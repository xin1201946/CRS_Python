import{bR as t,bS as e,bb as i,b3 as s,bc as n,bg as o,b0 as r,bW as a,br as l,bi as h,bX as c,j as d,_ as p,i as u,B as g,k as f,bH as m,m as b,bY as v,y as w,bI as y,R as P,T as _,bL as O,bM as E,bn as S,D as T,q as j,C,aW as R,z as k,t as D,p as I}from"./AppContent-DzAY2IDB.js";import{_ as H,e as x}from"./pick-CcpBOeoj.js";import{b as N,R as A,P as B,r as L,H as M,I as F}from"./index-CCsViYEm.js";var z,K,U,W,$,V;function G(){if(W)return U;W=1;var t=(K?z:(K=1,z=function(t){return function(e,i,s){for(var n=-1,o=Object(e),r=s(e),a=r.length;a--;){var l=r[t?a:++n];if(!1===i(o[l],l,o))break}return e}}))();return U=t}const Y=N(function(){if(V)return $;V=1;var l=t(),h=e(),c=i(),d=r(),p=s(),u=n(),g=a(),f=o(),m=Object.prototype.hasOwnProperty;return $=function(t){if(null==t)return!0;if(p(t)&&(d(t)||"string"==typeof t||"function"==typeof t.splice||u(t)||f(t)||c(t)))return!t.length;var e=h(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(g(t))return!l(t).length;for(var i in t)if(m.call(t,i))return!1;return!0}}());var X,q,Z,J,Q,tt,et,it,st,nt,ot,rt;function at(){if(tt)return Q;tt=1;var t=function(){if(q)return X;q=1;var t=G(),e=l();return X=function(i,s){return i&&t(i,s,e)}}(),e=function(){if(J)return Z;J=1;var t=s();return Z=function(e,i){return function(s,n){if(null==s)return s;if(!t(s))return e(s,n);for(var o=s.length,r=i?o:-1,a=Object(s);(i?r--:++r<o)&&!1!==n(a[r],r,a););return s}}}()(t);return Q=e}function lt(){if(it)return et;it=1;var t=h();return et=function(e){return"function"==typeof e?e:t}}const ht=N(rt?ot:(rt=1,ot=function(){if(nt)return st;nt=1;var t=c(),e=at(),i=lt(),s=r();return st=function(n,o){return(s(n)?t:e)(n,i(o))}}()));class ct{constructor(){this._eventMap=new Map}on(t,e){return t&&"function"==typeof e&&(this._eventMap.has(t)||this._eventMap.set(t,[]),this._eventMap.get(t).push(e)),this}once(t,e){var i=this;if(t&&"function"==typeof e){const s=function(){e(...arguments),i.off(t,s)};this.on(t,s)}}off(t,e){if(t)if("function"==typeof e){const i=this._eventMap.get(t);if(Array.isArray(i)&&i.length){let t=-1;for(;(t=i.findIndex((t=>t===e)))>-1;)i.splice(t,1)}}else d(e)&&this._eventMap.delete(t);return this}emit(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];if(!this._eventMap.has(t))return!1;return[...this._eventMap.get(t)].forEach((t=>t(...i))),!0}}function dt(t){t.stopPropagation(),t.preventDefault()}function pt(t){return 1===t.length&&t.match(/\S/)}function ut(t,e){for(let i=0;i<t.length;i++)t[i]===e?(t[i].tabIndex=0,t[i].focus()):t[i].tabIndex=-1}function gt(t){t.length>0&&ut(t,t[0])}function ft(t){t.length>0&&ut(t,t[t.length-1])}function mt(t,e){let i,s;t.length>0&&(e===t[0]?i=t[t.length-1]:(s=t.indexOf(e),i=t[s-1]),ut(t,i))}function bt(t,e){let i,s;t.length>0&&(e===t[t.length-1]?i=t[0]:(s=t.indexOf(e),i=t[s+1]),ut(t,i))}function vt(t,e,i,s){let n,o;return!t||!i||!s||s.length>1?-1:(s=s.toLowerCase(),n=t.indexOf(e)+1,n>=t.length&&(n=0),o=i.indexOf(s,n),-1===o&&(o=i.indexOf(s,0)),o>=0?o:-1)}function wt(t,e){if(!t)return null;for(;t.parentElement&&p(t.parentElement,"attributes.role.value","")!==e;)t=t.parentElement;return t.parentElement}function yt(t,e){for(let i=0;i<t.length;i++){const s=t[i].attributes["data-popupid"];if(s&&s.value===e)return t[i]}return null}const Pt={TOP:/top/i,RIGHT:/right/i,BOTTOM:/bottom/i,LEFT:/left/i},_t={left:0,top:0,height:0,width:0,scrollLeft:0,scrollTop:0};let Ot=class extends u{constructor(t){var e;super(Object.assign({},t)),e=this,this.removePortal=()=>{this._adapter.removePortal()},this.setDisplayNone=(t,e)=>{this._adapter.setDisplayNone(t,e)},this.updateStateIfCursorOnTrigger=t=>{var e,i;if(null===(e=null==t?void 0:t.matches)||void 0===e?void 0:e.call(t,":hover")){const t=this._adapter.getEventName(),e=this.getState("triggerEventSet");null===(i=e[t.mouseEnter])||void 0===i||i.call(e)}},this.onResize=()=>{this.getState("visible")&&this.calcPosition()},this.delayShow=()=>{const t=this.getProp("mouseEnterDelay");this.clearDelayTimer(),t>0?this._timer=setTimeout((()=>{this.show(),this.clearDelayTimer()}),t):this.show()},this.show=()=>{if(this._adapter.getAnimatingState())return;const t=this.getProp("content"),e=this.getProp("trigger"),i=this.getProp("clickTriggerToHide"),{visible:s,displayNone:n}=this.getStates();if(n&&this.setDisplayNone(!1),!s){if(this.clearDelayTimer(),this._adapter.on("portalInserted",(()=>{this.calcPosition()})),"hover"===e){const t=()=>{var i;const s=this._adapter.getTriggerDOM();e&&!(null===(i=null==s?void 0:s.matches)||void 0===i?void 0:i.call(s,":hover"))&&this.hide(),this._adapter.off("portalInserted",t)};this._adapter.on("portalInserted",t)}this._adapter.on("positionUpdated",(()=>{this._togglePortalVisible(!0)})),this._adapter.insertPortal(t,{left:-9999,top:-9999}),"custom"===e&&this._adapter.registerClickOutsideHandler((()=>{})),("click"===e||i||"contextMenu"===e)&&this._adapter.registerClickOutsideHandler(this.hide),this._bindScrollEvent(),this._bindResizeEvent()}},this.calcPosition=function(t,i,s){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t=(Y(t)?e._adapter.getTriggerBounding():t)||Object.assign({},_t),s=(Y(s)?e._adapter.getPopupContainerRect():s)||Object.assign({},_t),i=(Y(i)?e._adapter.getWrapperBounding():i)||Object.assign({},_t);let o=e.calcPosStyle({triggerRect:t,wrapperRect:i,containerRect:s}),r=e.getProp("position");if(e.getProp("autoAdjustOverflow")){const{position:n,isHeightOverFlow:a,isWidthOverFlow:l}=e.adjustPosIfNeed(r,o,t,i,s);(r!==n||a||l)&&(r=n,o=e.calcPosStyle({triggerRect:t,wrapperRect:i,containerRect:s,position:r,spacing:null,isOverFlow:[a,l]}))}return n&&e._mounted&&e._adapter.setPosition(Object.assign(Object.assign({},o),{position:r})),o},this.delayHide=()=>{const t=this.getProp("mouseLeaveDelay");this.clearDelayTimer(),t>0?this._timer=setTimeout((()=>{this.hide(),this.clearDelayTimer()}),t):this.hide()},this.hide=()=>{this.clearDelayTimer(),this._togglePortalVisible(!1),this._adapter.off("portalInserted"),this._adapter.off("positionUpdated")},this.handleContainerKeydown=t=>{const{guardFocus:e,closeOnEsc:i}=this.getProps();switch(t&&t.key){case"Escape":i&&this._handleEscKeyDown(t);break;case"Tab":if(e){const e=this._adapter.getContainer(),i=this._adapter.getFocusableElements(e);i.length&&(t.shiftKey?this._handleContainerShiftTabKeyDown(i,t):this._handleContainerTabKeyDown(i,t))}}},this._timer=null}init(){const{wrapperId:t}=this.getProps();this._mounted=!0,this._bindEvent(),this._shouldShow(),this._initContainerPosition(),t||this._adapter.setId()}destroy(){this._mounted=!1,this.unBindEvent()}_bindEvent(){const t=this.getProp("trigger"),{triggerEventSet:e,portalEventSet:i}=this._generateEvent(t);this._bindTriggerEvent(e),this._bindPortalEvent(i),this._bindResizeEvent()}unBindEvent(){this._adapter.unregisterClickOutsideHandler(),this.unBindResizeEvent(),this.unBindScrollEvent(),clearTimeout(this._timer)}_bindTriggerEvent(t){this._adapter.registerTriggerEvent(t)}_bindPortalEvent(t){this._adapter.registerPortalEvent(t)}_bindResizeEvent(){this._adapter.registerResizeHandler(this.onResize)}unBindResizeEvent(){this._adapter.unregisterResizeHandler(this.onResize)}_adjustPos(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>3?arguments[3]:void 0;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"reverse"){case"reverse":default:return this._reversePos(t,e);case"expand":return this._expandPos(t,i);case"reduce":return this._reducePos(t)}}_reversePos(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){if(Pt.TOP.test(t))return t.replace("top","bottom").replace("Top","Bottom");if(Pt.BOTTOM.test(t))return t.replace("bottom","top").replace("Bottom","Top")}else{if(Pt.LEFT.test(t))return t.replace("left","right").replace("Left","Right");if(Pt.RIGHT.test(t))return t.replace("right","left").replace("Right","Left")}return t}_expandPos(){let t=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(t)}_reducePos(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const e=["Top","Bottom","Left","Right"].find((e=>t.endsWith(e)));return e?t.replace(e,""):t}clearDelayTimer(){this._timer&&(clearTimeout(this._timer),this._timer=null)}_generateEvent(t){const e=this._adapter.getEventName(),i={[e.keydown]:t=>{this._handleTriggerKeydown(t)}};let s={};switch(t){case"focus":i[e.focus]=()=>{this.delayShow()},i[e.blur]=()=>{this.delayHide()},s=i;break;case"click":i[e.click]=()=>{this.show()},s={};break;case"hover":i[e.mouseEnter]=()=>{this.setCache("isClickToHide",!1),this.delayShow()},i[e.mouseLeave]=()=>{this.delayHide()},i[e.focus]=()=>{const{disableFocusListener:t}=this.getProps();!t&&this.delayShow()},i[e.blur]=()=>{const{disableFocusListener:t}=this.getProps();!t&&this.delayHide()},s=Object.assign({},i),this.getProp("clickToHide")&&(s[e.click]=()=>{this.setCache("isClickToHide",!0),this.hide()},s[e.mouseEnter]=()=>{this.getCache("isClickToHide")||this.delayShow()});break;case"custom":break;case"contextMenu":i[e.contextMenu]=t=>{t.preventDefault(),this.show()}}return{triggerEventSet:i,portalEventSet:s}}_shouldShow(){this.getProp("visible")&&this.show()}_togglePortalVisible(t){const e=this.getState("visible"),i=this.getState("isInsert");e===t&&i===t||this._adapter.togglePortalVisible(t,(()=>{t&&this._adapter.setInitialFocus(),this._adapter.notifyVisibleChange(t)}))}_roundPixel(t){return"number"==typeof t?Math.round(t):t}calcTransformOrigin(t,e,i,s){if(t&&e&&null!=i&&null!=s){if(this.getProp("transformFromCenter")){if(["topLeft","bottomLeft"].includes(t))return`${this._roundPixel(e.width/2)}px ${100*-s}%`;if(["topRight","bottomRight"].includes(t))return`calc(100% - ${this._roundPixel(e.width/2)}px) ${100*-s}%`;if(["leftTop","rightTop"].includes(t))return`${100*-i}% ${this._roundPixel(e.height/2)}px`;if(["leftBottom","rightBottom"].includes(t))return`${100*-i}% calc(100% - ${this._roundPixel(e.height/2)}px)`}return`${100*-i}% ${100*-s}%`}return null}calcPosStyle(t){var e;const{spacing:i,isOverFlow:s}=t,{innerWidth:n}=window,o=(Y(t.triggerRect)?t.triggerRect:this._adapter.getTriggerBounding())||Object.assign({},_t),r=(Y(t.containerRect)?t.containerRect:this._adapter.getPopupContainerRect())||Object.assign({},_t),a=(Y(t.wrapperRect)?t.wrapperRect:this._adapter.getWrapperBounding())||Object.assign({},_t),l=null!=t.position?t.position:this.getProp("position"),h=null!=i?i:this.getProp("spacing"),{arrowPointAtCenter:c,showArrow:d,arrowBounding:u}=this.getProps(),g=d&&c;let f=h,m=0;if("number"!=typeof h){const t=l.includes("top")||l.includes("bottom");f=t?h.y:h.x,m=t?h.x:h.y}const b=p(u,"width",24),v=p(u,"width",24),w=p(u,"offsetY",0);let y,P,_=0,O=0;const E=o.left+o.width/2,S=o.top+o.height/2,T=6+b/2,j=6+v/2,C=a.height-r.height,R=a.width-r.width,k=C>0?C:0,D=R>0?R:0,I=s&&s[0],H=s&&s[1],x=E-r.left<r.right-E,N=S-r.top<r.bottom-S,A=a.width>n,B=Math.abs((null==a?void 0:a.width)-(null===(e=this._adapter.getContainer())||void 0===e?void 0:e.clientWidth))>1;switch(B&&(f=f*a.width/this._adapter.getContainer().clientWidth),l){case"top":y=H?x?r.left+a.width/2:r.right-a.width/2+D:E+m,P=I?r.bottom+k:o.top-f,_=-.5,O=-1;break;case"topLeft":y=H?A?r.left:r.right-a.width:g?E-T+m:o.left+m,P=I?r.bottom+k:o.top-f,O=-1;break;case"topRight":y=H?r.right+D:g?E+T+m:o.right+m,P=I?r.bottom+k:o.top-f,O=-1,_=-1;break;case"left":y=H?r.right+D-f+T:o.left-f,P=I?N?r.top+a.height/2:r.bottom-a.height/2+k:S+m,_=-1,O=-.5;break;case"leftTop":y=H?r.right+D-f+T:o.left-f,P=I?r.top:g?S-j+m:o.top+m,_=-1;break;case"leftBottom":y=H?r.right+D-f+T:o.left-f,P=I?r.bottom+k:g?S+j+m:o.bottom+m,_=-1,O=-1;break;case"bottom":y=H?x?r.left+a.width/2:r.right-a.width/2+D:E+m,P=I?r.top+j-f:o.top+o.height+f,_=-.5;break;case"bottomLeft":y=H?A?r.left:r.right-a.width:g?E-T+m:o.left+m,P=I?r.top+j-f:o.top+o.height+f;break;case"bottomRight":y=H?r.right+D:g?E+T+m:o.right+m,P=I?r.top+j-f:o.top+o.height+f,_=-1;break;case"right":y=H?r.left-f+T:o.right+f,P=I?N?r.top+a.height/2:r.bottom-a.height/2+k:S+m,O=-.5;break;case"rightTop":y=H?r.left-f+T:o.right+f,P=I?r.top:g?S-j+m:o.top+m;break;case"rightBottom":y=H?r.left-f+T:o.right+f,P=I?r.bottom+k:g?S+j+m:o.bottom+m,O=-1;break;case"leftTopOver":y=o.left-f,P=o.top-f;break;case"rightTopOver":y=o.right+f,P=o.top-f,_=-1;break;case"leftBottomOver":y=o.left-f,P=o.bottom+f,O=-1;break;case"rightBottomOver":y=o.right+f,P=o.bottom+f,_=-1,O=-1}const L=this.calcTransformOrigin(l,o,_,O),M=this._adapter.containerIsBody();if(y-=r.left,P-=r.top,B&&(y/=a.width/this._adapter.getContainer().clientWidth),B&&(P/=a.height/this._adapter.getContainer().clientHeight),M&&!this._adapter.containerIsRelativeOrAbsolute()){const t=this._adapter.getDocumentElementBounding();y+=r.left-t.left,P+=r.top-t.top}y=M?y:y+r.scrollLeft,P=M?P:P+r.scrollTop;const F=o.height;if(this.getProp("showArrow")&&!c&&F<=2*(v/2+w)){const t=F/2-(w+v/2);!l.includes("Top")&&!l.includes("Bottom")||l.includes("Over")||(P=l.includes("Top")?P+t:P-t)}const z={left:this._roundPixel(y),top:this._roundPixel(P)};let K="";return null!=_&&(K+=`translateX(${100*_}%) `,Object.defineProperty(z,"translateX",{enumerable:!1,value:_})),null!=O&&(K+=`translateY(${100*O}%) `,Object.defineProperty(z,"translateY",{enumerable:!1,value:O})),null!=L&&(z.transformOrigin=L),K&&(z.transform=K),z}isLR(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.includes("left")||t.includes("right")}isTB(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.includes("top")||t.includes("bottom")}isReverse(t,e,i){return t<i&&e>i}isOverFlow(t,e,i){return t<i&&e<i}isHalfOverFlow(t,e,i){return t<i||e<i}isHalfAllEnough(t,e,i){return t>=i||e>=i}getReverse(t,e,i,s){return t&&s||i}adjustPosIfNeed(t,e,i,s,n){const{innerWidth:o,innerHeight:r}=window,{margin:a}=this.getProps(),l="number"==typeof a?a:a.marginLeft,h="number"==typeof a?a:a.marginTop,c="number"==typeof a?a:a.marginRight,d="number"==typeof a?a:a.marginBottom;let p=!1,u=!1;const g=this.getProp("spacing");let f=g,m=0;if("number"!=typeof g){const e=t.includes("top")||t.includes("bottom");f=e?g.y:g.x,m=e?g.x:g.y}if(s.width>0&&s.height>0){const e=i.left,a=i.right,g=i.top,b=i.bottom,v=o-e,w=r-g,y=o-a,P=r-b,_=s.width>i.width,O=s.height>i.height,E=g-h<s.height+f&&P-d>s.height+f,S=e-l<s.width+f&&y-c>s.width+f,T=P-d<s.height+f&&g-h>s.height+f,j=y-c<s.width+f&&e-l>s.width+f;w-d<s.height+f&&s.height,b-h<s.height+f&&s.height;const C=w<s.height+m&&b>s.height+m,R=b<s.height+m&&w>s.height+m,k=v<s.width+m&&a>s.width+m,D=a<s.width+m&&v>s.width+m,I=w<s.height+f&&b>s.height+f,H=b<s.height+f&&w>s.height+f,x=v<s.width&&a>s.width,N=a<s.width&&v>s.width,A=g-n.top,B=e-n.left,L=A+i.height,M=B+i.width,F=n.bottom-b,z=n.right-a,K=F+i.height,U=z+i.width,W=this.isReverse(A-h,F-d,s.height+f),$=this.isReverse(B-l,z-c,s.width+f),V=this.isReverse(F-d,A-h,s.height+f),G=this.isReverse(z-c,B-l,s.width+f);this.isReverse(K-d,L-h,s.height+f),this.isReverse(L-h,K-d,s.height+f);const Y=this.isReverse(K,L,s.height+m),X=this.isReverse(L,K,s.height+m),q=this.isReverse(U,M,s.width+m),Z=this.isReverse(M,U,s.width+m),J=i.height/2,Q=i.width/2,tt=this.isOverFlow(g-h,P-d,s.height+f),et=this.isOverFlow(e-l,y-c,s.width+f),it=this.isOverFlow(b-h,w-d,s.height+f),st=this.isOverFlow(a-l,v-c,s.width+f),nt=this.isHalfOverFlow(b-J,w-J,(s.height+m)/2),ot=this.isHalfOverFlow(a-Q,v-Q,(s.width+m)/2),rt=this.isHalfAllEnough(b-J,w-J,(s.height+m)/2),at=this.isHalfAllEnough(a-Q,v-Q,(s.width+m)/2),lt=this.isOverFlow(A-h,F-d,s.height+f),ht=this.isOverFlow(B-l,z-c,s.width+f),ct=this.isOverFlow(L-h,K-d,s.height+f),dt=this.isOverFlow(M-l,U-c,s.width+f),pt=this.isHalfOverFlow(L-J,K-J,(s.height+m)/2),ut=this.isHalfOverFlow(M-Q,U-Q,(s.width+m)/2),gt=this.isHalfAllEnough(L-J,K-J,(s.height+m)/2),ft=this.isHalfAllEnough(M-Q,U-Q,(s.width+m)/2),mt=this.getReverse(tt,lt,E,W),bt=this.getReverse(et,ht,S,$),vt=this.getReverse(tt,lt,T,V),wt=this.getReverse(et,ht,j,G),yt=this.getReverse(it,ct,C,Y),Pt=this.getReverse(it,ct,R,X),_t=this.getReverse(st,dt,k,q),Ot=this.getReverse(st,dt,D,Z),Et=nt&&pt,St=ot&&ut;switch(t){case"top":mt&&(t=this._adjustPos(t,!0)),St&&(_t||Ot)&&(t=this._adjustPos(t,!0,"expand",_t?"Right":"Left"));break;case"topLeft":mt&&(t=this._adjustPos(t,!0)),_t&&_&&(t=this._adjustPos(t)),u&&(at||ft)&&(t=this._adjustPos(t,!0,"reduce"));break;case"topRight":mt&&(t=this._adjustPos(t,!0)),Ot&&_&&(t=this._adjustPos(t)),u&&(at||ft)&&(t=this._adjustPos(t,!0,"reduce"));break;case"left":bt&&(t=this._adjustPos(t)),Et&&(yt||Pt)&&(t=this._adjustPos(t,!1,"expand",yt?"Bottom":"Top"));break;case"leftTop":bt&&(t=this._adjustPos(t)),yt&&O&&(t=this._adjustPos(t,!0)),p&&(rt||gt)&&(t=this._adjustPos(t,!1,"reduce"));break;case"leftBottom":bt&&(t=this._adjustPos(t)),Pt&&O&&(t=this._adjustPos(t,!0)),p&&(rt||gt)&&(t=this._adjustPos(t,!1,"reduce"));break;case"bottom":vt&&(t=this._adjustPos(t,!0)),St&&(_t||Ot)&&(t=this._adjustPos(t,!0,"expand",_t?"Right":"Left"));break;case"bottomLeft":vt&&(t=this._adjustPos(t,!0)),_t&&_&&(t=this._adjustPos(t)),u&&(at||ft)&&(t=this._adjustPos(t,!0,"reduce"));break;case"bottomRight":vt&&(t=this._adjustPos(t,!0)),Ot&&_&&(t=this._adjustPos(t)),u&&(at||ft)&&(t=this._adjustPos(t,!0,"reduce"));break;case"right":wt&&(t=this._adjustPos(t)),Et&&(yt||Pt)&&(t=this._adjustPos(t,!1,"expand",yt?"Bottom":"Top"));break;case"rightTop":wt&&(t=this._adjustPos(t)),yt&&O&&(t=this._adjustPos(t,!0)),p&&(rt||gt)&&(t=this._adjustPos(t,!1,"reduce"));break;case"rightBottom":wt&&(t=this._adjustPos(t)),Pt&&O&&(t=this._adjustPos(t,!0)),p&&(rt||gt)&&(t=this._adjustPos(t,!1,"reduce"));break;case"leftTopOver":I&&(t=this._adjustPos(t,!0)),x&&(t=this._adjustPos(t));break;case"leftBottomOver":H&&(t=this._adjustPos(t,!0)),x&&(t=this._adjustPos(t));break;case"rightTopOver":I&&(t=this._adjustPos(t,!0)),N&&(t=this._adjustPos(t));break;case"rightBottomOver":H&&(t=this._adjustPos(t,!0)),N&&(t=this._adjustPos(t))}this.isTB(t)&&(p=tt&&lt,u="top"===t||"bottom"===t?ot&&ut||a<0||y<0:st&&dt||a<0||y<0),this.isLR(t)&&(u=et&&ht,p="left"===t||"right"===t?nt&&pt||g<0||w<0:it&&ct||g<0||w<0)}return{position:t,isHeightOverFlow:p,isWidthOverFlow:u}}_bindScrollEvent(){this._adapter.registerScrollHandler((()=>this.calcPosition()))}unBindScrollEvent(){this._adapter.unregisterScrollHandler()}_initContainerPosition(){this._adapter.updateContainerPosition()}_handleTriggerKeydown(t){const{closeOnEsc:e,disableArrowKeyDown:i}=this.getProps(),s=this._adapter.getContainer(),n=this._adapter.getFocusableElements(s),o=n.length;switch(t&&t.key){case"Escape":dt(t),e&&this._handleEscKeyDown(t);break;case"ArrowUp":!i&&o&&this._handleTriggerArrowUpKeydown(n,t);break;case"ArrowDown":!i&&o&&this._handleTriggerArrowDownKeydown(n,t)}}focusTrigger(){const{trigger:t,returnFocusOnClose:e,preventScroll:i}=this.getProps();if(e&&"custom"!==t){const t=this._adapter.getTriggerNode();t&&"focus"in t&&t.focus({preventScroll:i})}}_handleEscKeyDown(t){const{trigger:e}=this.getProps();"custom"!==e&&(this.focusTrigger(),this.hide()),this._adapter.notifyEscKeydown(t)}_handleContainerTabKeyDown(t,e){const{preventScroll:i}=this.getProps(),s=this._adapter.getActiveElement();t[t.length-1]===s&&(t[0].focus({preventScroll:i}),e.preventDefault())}_handleContainerShiftTabKeyDown(t,e){const{preventScroll:i}=this.getProps(),s=this._adapter.getActiveElement();t[0]===s&&(t[t.length-1].focus({preventScroll:i}),e.preventDefault())}_handleTriggerArrowDownKeydown(t,e){const{preventScroll:i}=this.getProps();t[0].focus({preventScroll:i}),e.preventDefault()}_handleTriggerArrowUpKeydown(t,e){const{preventScroll:i}=this.getProps();t[t.length-1].focus({preventScroll:i}),e.preventDefault()}};const Et={PREFIX:`${g}-tooltip`},St={POSITION_SET:["top","topLeft","topRight","left","leftTop","leftBottom","right","rightTop","rightBottom","bottom","bottomLeft","bottomRight","leftTopOver","rightTopOver","leftBottomOver","rightBottomOver"],TRIGGER_SET:["hover","focus","click","custom","contextMenu"],STATUS_DISABLED:"disabled",STATUS_LOADING:"loading"},Tt={ARROW_BOUNDING:{offsetX:0,offsetY:2,width:24,height:7},DEFAULT_Z_INDEX:1060,MOUSE_ENTER_DELAY:50,MOUSE_LEAVE_DELAY:50,SPACING:8,MARGIN:0};const jt=t=>{const{className:e,style:i}=t,s=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(i[s[n]]=t[s[n]])}return i}(t,["className","style"]);return A.createElement("svg",Object.assign({"aria-hidden":!0,className:e,style:i},s,{width:"24",height:"7",viewBox:"0 0 24 7",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}),A.createElement("path",{d:"M24 0V1C20 1 18.5 2 16.5 4C14.5 6 14 7 12 7C10 7 9.5 6 7.5 4C5.5 2 4 1 0 1V0H24Z"}))};const Ct=t=>{const{className:e,style:i}=t,s=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(i[s[n]]=t[s[n]])}return i}(t,["className","style"]);return A.createElement("svg",Object.assign({"aria-hidden":!0,className:e,style:i},s,{width:"7",height:"24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"}),A.createElement("path",{d:"M0 0L1 0C1 4, 2 5.5, 4 7.5S7,10 7,12S6 14.5, 4 16.5S1,20 1,24L0 24L0 0z"}))},Rt=B.shape({offsetX:B.number,offsetY:B.number,width:B.number,height:B.number});var kt=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(i[s[n]]=t[s[n]])}return i};const Dt=Et.PREFIX,It=St.POSITION_SET,Ht=St.TRIGGER_SET,xt=["flex","block","table","flow-root","grid"],Nt=()=>document.body;class At extends f{constructor(t){super(t),this.isAnimating=!1,this.setContainerEl=t=>this.containerEl={current:t},this.isSpecial=t=>{if(m(t))return Boolean(t.disabled);if(L.isValidElement(t)){if(p(t,"props.disabled"))return St.STATUS_DISABLED;const e=p(t,"props.loading"),i=!(Y(t)||Y(t.type)||"Button"!==p(t,"type.elementType")&&"IconButton"!==p(t,"type.elementType"));if(e&&i)return St.STATUS_LOADING}return!1},this.didLeave=()=>{this.props.keepDOM?this.foundation.setDisplayNone(!0):this.foundation.removePortal(),this.foundation.unBindEvent()},this.renderIcon=()=>{const{placement:t}=this.state,{showArrow:e,prefixCls:i,style:s}=this.props;let n=null;const o=b([`${i}-icon-arrow`]),r=p(s,"backgroundColor"),a=(null==t?void 0:t.includes("left"))||(null==t?void 0:t.includes("right"))?A.createElement(Ct,null):A.createElement(jt,null);return e&&(n=L.isValidElement(e)?e:A.cloneElement(a,{className:o,style:{color:r,fill:"currentColor"}})),n},this.handlePortalInnerClick=t=>{this.props.clickToHide&&this.foundation.hide(),this.props.stopPropagation&&v(t)},this.handlePortalMouseDown=t=>{this.props.stopPropagation&&v(t)},this.handlePortalFocus=t=>{this.props.stopPropagation&&v(t)},this.handlePortalBlur=t=>{this.props.stopPropagation&&v(t)},this.handlePortalInnerKeyDown=t=>{this.foundation.handleContainerKeydown(t)},this.renderContentNode=t=>{const e={initialFocusRef:this.initialFocusRef};return H(t)?t(e):t},this.renderPortal=()=>{const{containerStyle:t={},visible:e,portalEventSet:i,placement:s,displayNone:n,transitionState:o,id:r,isPositionUpdated:a}=this.state,{prefixCls:l,content:h,showArrow:c,style:d,motion:u,role:f,zIndex:m}=this.props,v=this.renderContentNode(h),{className:P}=this.props,_=this.context.direction,O=b(P,{[`${l}-wrapper`]:!0,[`${l}-wrapper-show`]:e,[`${l}-with-arrow`]:Boolean(c),[`${l}-rtl`]:"rtl"===_}),E=this.renderIcon(),S=w(t,u?["transformOrigin"]:void 0),T=p(t,"transformOrigin"),j=p(d,"opacity",null),R=j||1,k=A.createElement(C,{fillMode:"forwards",animationState:o,motion:u&&a,startClassName:"enter"===o?`${Dt}-animation-show`:`${Dt}-animation-hide`,onAnimationStart:()=>this.isAnimating=!0,onAnimationEnd:()=>{var t,e;"leave"===o&&(this.didLeave(),null===(e=(t=this.props).afterClose)||void 0===e||e.call(t)),this.isAnimating=!1}},(t=>{let{animationStyle:e,animationClassName:o,animationEventsNeedBind:l}=t;return A.createElement("div",Object.assign({className:b(O,o),style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),n?{display:"none"}:{}),{transformOrigin:T}),d),j?{opacity:a?R:"0"}:{})},i,l,{role:f,"x-placement":s,id:r}),A.createElement("div",{className:`${Dt}-content`},v),E)}));return A.createElement(y,{getPopupContainer:this.props.getPopupContainer,style:{zIndex:m}},A.createElement("div",{tabIndex:-1,className:`${g}-portal-inner`,style:S,ref:this.setContainerEl,onClick:this.handlePortalInnerClick,onFocus:this.handlePortalFocus,onBlur:this.handlePortalBlur,onMouseDown:this.handlePortalMouseDown,onKeyDown:this.handlePortalInnerKeyDown},k))},this.wrapSpan=t=>{const{wrapperClassName:e}=this.props,i=p(t,"props.style.display"),s=p(t,"props.block"),n={};return"string"==typeof t||(n.display="inline-block"),(s||xt.includes(i))&&(n.width="100%"),A.createElement("span",{className:e,style:n},t)},this.mergeEvents=(t,e)=>{const i={};return ht(e,((e,s)=>{"function"==typeof e&&(i[s]=function(){e(...arguments),t&&"function"==typeof t[s]&&t[s](...arguments)})})),i},this.getPopupId=()=>this.state.id,this.state={visible:!1,transitionState:"",triggerEventSet:{},portalEventSet:{},containerStyle:{},isInsert:!1,placement:t.position||"top",transitionStyle:{},isPositionUpdated:!1,id:t.wrapperId,displayNone:!1},this.foundation=new Ot(this.adapter),this.eventManager=new ct,this.triggerEl=A.createRef(),this.containerEl=A.createRef(),this.initialFocusRef=A.createRef(),this.clickOutsideHandler=null,this.resizeHandler=null,this.isWrapped=!1,this.containerPosition=void 0}get adapter(){var t=this;return Object.assign(Object.assign({},super.adapter),{on:function(){return t.eventManager.on(...arguments)},off:function(){return t.eventManager.off(...arguments)},getAnimatingState:()=>this.isAnimating,insertPortal:(t,e)=>{var{position:i}=e,s=kt(e,["position"]);this.setState({isInsert:!0,transitionState:"enter",containerStyle:Object.assign(Object.assign({},this.state.containerStyle),s)},(()=>{setTimeout((()=>{this.setState((t=>("enter"===t.transitionState&&this.eventManager.emit("portalInserted"),{})))}),0)}))},removePortal:()=>{this.setState({isInsert:!1,isPositionUpdated:!1})},getEventName:()=>({mouseEnter:"onMouseEnter",mouseLeave:"onMouseLeave",mouseOut:"onMouseOut",mouseOver:"onMouseOver",click:"onClick",focus:"onFocus",blur:"onBlur",keydown:"onKeyDown",contextMenu:"onContextMenu"}),registerTriggerEvent:t=>{this.setState({triggerEventSet:t})},registerPortalEvent:t=>{this.setState({portalEventSet:t})},getTriggerBounding:()=>{const t=this.adapter.getTriggerNode();return this.triggerEl.current=t,t&&t.getBoundingClientRect()},getPopupContainerRect:()=>{const t=this.getPopupContainer();let e=null;if(t&&m(t)){const i=function(t){if(t&&"object"==typeof t)return"function"==typeof t.toJSON?t.toJSON():["left","top","right","bottom","width","height"].reduce(((e,i)=>(e[i]=t[i],e)),{})}(t.getBoundingClientRect());e=Object.assign(Object.assign({},i),{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop})}return e},containerIsBody:()=>this.getPopupContainer()===document.body,containerIsRelative:()=>{const t=this.getPopupContainer();return"relative"===window.getComputedStyle(t).getPropertyValue("position")},containerIsRelativeOrAbsolute:()=>["relative","absolute"].includes(this.containerPosition),getWrapperBounding:()=>{const t=this.containerEl&&this.containerEl.current;return t&&t.getBoundingClientRect()},getDocumentElementBounding:()=>document.documentElement.getBoundingClientRect(),setPosition:t=>{var{position:e}=t,i=kt(t,["position"]);this.setState({containerStyle:Object.assign(Object.assign({},this.state.containerStyle),i),placement:e,isPositionUpdated:!0},(()=>{this.eventManager.emit("positionUpdated")}))},setDisplayNone:(t,e)=>{this.setState({displayNone:t},e)},updatePlacementAttr:t=>{this.setState({placement:t})},togglePortalVisible:(t,e)=>{const i={};i.transitionState=t?"enter":"leave",i.visible=t,this.mounted&&this.setState(i,(()=>{e()}))},registerClickOutsideHandler:t=>{this.clickOutsideHandler&&this.adapter.unregisterClickOutsideHandler(),this.clickOutsideHandler=e=>{if(!this.mounted)return!1;let i=this.triggerEl&&this.triggerEl.current,s=this.containerEl&&this.containerEl.current;i=P.findDOMNode(i),s=P.findDOMNode(s);const n=e.target,o=e.composedPath&&e.composedPath()||[n],r=!!this.props.clickTriggerToHide&&(i&&i.contains(n)||o.includes(i));(i&&!i.contains(n)&&s&&!s.contains(n)&&!o.includes(s)&&!o.includes(i)||r)&&(this.props.onClickOutSide(e),t())},window.addEventListener("mousedown",this.clickOutsideHandler)},unregisterClickOutsideHandler:()=>{this.clickOutsideHandler&&(window.removeEventListener("mousedown",this.clickOutsideHandler),this.clickOutsideHandler=null)},registerResizeHandler:t=>{this.resizeHandler&&this.adapter.unregisterResizeHandler(),this.resizeHandler=x((e=>{if(!this.mounted)return!1;t(e)}),10),window.addEventListener("resize",this.resizeHandler,!1)},unregisterResizeHandler:()=>{this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler,!1),this.resizeHandler=null)},notifyVisibleChange:t=>{this.props.onVisibleChange(t)},registerScrollHandler:t=>{this.scrollHandler&&this.adapter.unregisterScrollHandler(),this.scrollHandler=x((e=>{if(!this.mounted)return!1;const i=this.adapter.getTriggerNode();if(e.target.contains(i)){const i={x:e.target.scrollLeft,y:e.target.scrollTop};t(i)}}),10),window.addEventListener("scroll",this.scrollHandler,!0)},unregisterScrollHandler:()=>{this.scrollHandler&&(window.removeEventListener("scroll",this.scrollHandler,!0),this.scrollHandler=null)},canMotion:()=>Boolean(this.props.motion),updateContainerPosition:()=>{const t=this.getPopupContainer();if(t&&m(t)){const e=window.getComputedStyle(t).getPropertyValue("position");this.containerPosition=e}},getContainerPosition:()=>this.containerPosition,getContainer:()=>this.containerEl&&this.containerEl.current,getTriggerNode:()=>{let t=this.triggerEl.current;return m(this.triggerEl.current)||(t=P.findDOMNode(this.triggerEl.current)),t},getFocusableElements:t=>E(t),getActiveElement:()=>O(),setInitialFocus:()=>{const{preventScroll:t}=this.props,e=p(this,"initialFocusRef.current");e&&"focus"in e&&e.focus({preventScroll:t})},notifyEscKeydown:t=>{this.props.onEscKeyDown(t)},setId:()=>{this.setState({id:_()})},getTriggerDOM:()=>this.triggerEl.current?P.findDOMNode(this.triggerEl.current):null})}componentDidMount(){this.mounted=!0,this.getPopupContainer=this.props.getPopupContainer||this.context.getPopupContainer||Nt,this.foundation.init(),S((()=>{let t=this.triggerEl.current;t&&(t instanceof HTMLElement||(t=R.findDOMNode(t))),this.foundation.updateStateIfCursorOnTrigger(t)}),1)}componentWillUnmount(){this.mounted=!1,this.foundation.destroy()}focusTrigger(){this.foundation.focusTrigger()}rePosition(){return this.foundation.calcPosition()}componentDidUpdate(t,e){T(this.props.mouseLeaveDelay<this.props.mouseEnterDelay,"[Semi Tooltip] 'mouseLeaveDelay' cannot be less than 'mouseEnterDelay', which may cause the dropdown layer to not be hidden."),t.visible!==this.props.visible&&(["hover","focus"].includes(this.props.trigger)?this.props.visible?this.foundation.delayShow():this.foundation.delayHide():this.props.visible?this.foundation.show():this.foundation.hide()),j(t.rePosKey,this.props.rePosKey)||this.rePosition()}render(){const{isInsert:t,triggerEventSet:e,visible:i,id:s}=this.state,{wrapWhenSpecial:n,role:o,trigger:r}=this.props;let{children:a}=this.props;const l=Object.assign({},p(a,"props.style")),h={};if(n){const t=this.isSpecial(a);t?(l.pointerEvents="none",t===St.STATUS_DISABLED&&(h.cursor="not-allowed"),a=L.cloneElement(a,{style:l}),"custom"!==r&&(a=this.wrapSpan(a)),this.isWrapped=!0):L.isValidElement(a)||(a=this.wrapSpan(a),this.isWrapped=!0)}let c={};"dialog"===o?(c["aria-expanded"]=i?"true":"false",c["aria-haspopup"]="dialog",c["aria-controls"]=s):c["aria-describedby"]=s;const d=A.cloneElement(a,Object.assign(Object.assign(Object.assign(Object.assign({},c),a.props),this.mergeEvents(a.props,e)),{style:Object.assign(Object.assign({},p(a,"props.style")),h),className:b(p(a,"props.className")),ref:t=>{this.triggerEl.current=t;const{ref:e}=a;"function"==typeof e?e(t):e&&"object"==typeof e&&(e.current=t)},tabIndex:a.props.tabIndex||0,"data-popupid":s}));return A.createElement(A.Fragment,null,t?this.renderPortal():null,d)}}At.contextType=k,At.propTypes={children:B.node,motion:B.bool,autoAdjustOverflow:B.bool,position:B.oneOf(It),getPopupContainer:B.func,mouseEnterDelay:B.number,mouseLeaveDelay:B.number,trigger:B.oneOf(Ht).isRequired,className:B.string,wrapperClassName:B.string,clickToHide:B.bool,clickTriggerToHide:B.bool,visible:B.bool,style:B.object,content:B.oneOfType([B.node,B.func]),prefixCls:B.string,onVisibleChange:B.func,onClickOutSide:B.func,spacing:B.oneOfType([B.number,B.object]),margin:B.oneOfType([B.number,B.object]),showArrow:B.oneOfType([B.bool,B.node]),zIndex:B.number,rePosKey:B.oneOfType([B.string,B.number]),arrowBounding:Rt,transformFromCenter:B.bool,arrowPointAtCenter:B.bool,stopPropagation:B.bool,role:B.string,wrapWhenSpecial:B.bool,guardFocus:B.bool,returnFocusOnClose:B.bool,preventScroll:B.bool,keepDOM:B.bool},At.__SemiComponentName__="Tooltip",At.defaultProps=D(At.__SemiComponentName__,{arrowBounding:Tt.ARROW_BOUNDING,autoAdjustOverflow:!0,arrowPointAtCenter:!0,trigger:"hover",transformFromCenter:!0,position:"top",prefixCls:Dt,role:"tooltip",mouseEnterDelay:Tt.MOUSE_ENTER_DELAY,mouseLeaveDelay:Tt.MOUSE_LEAVE_DELAY,motion:!0,onVisibleChange:I,onClickOutSide:I,spacing:Tt.SPACING,margin:Tt.MARGIN,showArrow:!0,wrapWhenSpecial:!0,zIndex:Tt.DEFAULT_Z_INDEX,closeOnEsc:!1,guardFocus:!1,returnFocusOnClose:!1,onEscKeyDown:I,disableFocusListener:!1,disableArrowKeyDown:!1,keepDOM:!1});class Bt extends L.Component{renderChildren(t,e){const{componentName:i}=this.props;let s=t;(null==t?void 0:t.code)||(s=M);const n=p(M,"dateFnsLocale"),o=p(s,"dateFnsLocale",n);return e(s[i],s.code,o)}render(){const{children:t}=this.props;return A.createElement(k.Consumer,null,(e=>{let{locale:i}=e;return A.createElement(F.Consumer,null,(e=>this.renderChildren(i||e,t)))}))}}Bt.propTypes={componentName:B.string.isRequired,children:B.any},Bt.defaultProps={componentName:""};export{ct as E,Bt as L,At as T,Y as _,G as a,gt as b,ft as c,ut as d,wt as e,vt as f,yt as g,dt as h,pt as i,bt as j,mt as k,at as l,ht as m,Tt as n,lt as r,St as s};
