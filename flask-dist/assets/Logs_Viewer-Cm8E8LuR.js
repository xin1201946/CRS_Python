import{B as e,R as t,a4 as s,F as r,P as n,r as o,a5 as i,a6 as l,a7 as a,a8 as c,j as d,a0 as m,d as p,e as u,b as h}from"./index-CiQzaChg.js";import{B as x}from"./index-DAldieki.js";import{C as g}from"./index-DGV8NlRW.js";import{C as j}from"./index-DiDXrLCp.js";import{D as y}from"./index-BhhisqWH.js";import{I as f,M as b}from"./Modal-DLaS0hW5.js";import{F as v}from"./index-CIVc8U6F.js";import{T as w,P as _}from"./index-CpoOHKow.js";import{S as C}from"./index-xa6R1Qjp.js";import{T as k}from"./index-DKe6xkTY.js";import{T as O}from"./index-CQFkFDot.js";import{u as P}from"./useTranslation-BGT4VW5o.js";import{V as L}from"./VChart-D6CM_1aF.js";import"./keyCode-BPRnlZ-b.js";import"./index-sXUAnNRm.js";import"./pick-CHTdVrpw.js";import"./index-CTcMDnNH.js";import"./isPlainObject-CfwJLuma.js";import"./isPromise-Bw3YL3VT.js";import"./IconClear-Drn29lcF.js";import"./toInteger-BoREWJDc.js";import"./index-Wgo1-T_w.js";import"./index-C0cFhWGq.js";import"./constants-3HxH-fPZ.js";import"./index-xFZevcIM.js";import"./IconChevronRight-DTqlCENH.js";import"./index-DGZ6T1Tj.js";import"./theme-manager-Cd_MApBo.js";const E={PREFIX:`${e}`};const F=["xxl","xl","lg","md","sm","xs"],R=t.createContext(null),S={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"};class T extends t.Component{constructor(){super(...arguments),this.state={screens:{xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}},this.unRegisters=[]}componentDidMount(){this.unRegisters=Object.keys(S).map((e=>s(S[e],{match:()=>{"object"==typeof this.props.gutter&&this.setState((t=>({screens:Object.assign(Object.assign({},t.screens),{[e]:!0})})))},unmatch:()=>{"object"==typeof this.props.gutter&&this.setState((t=>({screens:Object.assign(Object.assign({},t.screens),{[e]:!1})})))}})))}componentWillUnmount(){this.unRegisters.forEach((e=>e()))}getGutter(){const{gutter:e=0}=this.props,t=[0,0];return(Array.isArray(e)?e.slice(0,2):[e,0]).forEach(((e,s)=>{if("object"==typeof e)for(let r=0;r<F.length;r++){const n=F[r];if(this.state.screens[n]&&void 0!==e[n]){t[s]=e[n];break}}else t[s]=e||0})),t}render(){const e=this.props,{prefixCls:s,type:n,justify:o,align:i,className:l,style:a,children:c}=e,d=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(s[r[n]]=e[r[n]])}return s}(e,["prefixCls","type","justify","align","className","style","children"]),m=this.getGutter(),p=`${s}-row`,u=r({[p]:"flex"!==n,[`${p}-${n}`]:n,[`${p}-${n}-${o}`]:n&&o,[`${p}-${n}-${i}`]:n&&i},l),h=Object.assign(Object.assign(Object.assign({},m[0]>0?{marginLeft:m[0]/-2,marginRight:m[0]/-2}:{}),m[1]>0?{marginTop:m[1]/-2,marginBottom:m[1]/-2}:{}),a),x=Object.assign({},d);return delete x.gutter,t.createElement(R.Provider,{value:{gutters:m}},t.createElement("div",Object.assign({},x,{className:u,style:h,"x-semi-prop":"children"}),c))}}function I(){const{Text:e}=w,{t:t}=P(),[s,r]=o.useState([]),n=o.useRef({isComposition:!1}),[E,F]=o.useState(window.innerWidth),[R,S]=o.useState([]);let I="";function $(){"Phone"===p()?h(t("Warning"),t("Tip_cannot_support_your_device"),null,5,"warning"):b.info({title:t("More_info"),content:d.jsxs(d.Fragment,{children:[d.jsxs(g,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[d.jsx(e,{style:{color:"var(--semi-color-info)"},children:t("Logs_count")}),"： ",t("Logs_count_text")]}),d.jsxs(g,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[d.jsx(e,{style:{color:"var(--semi-color-success)"},children:t("Logs_success_count")}),"：",t("Logs_success_count_text")]}),d.jsxs(g,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[d.jsx(e,{style:{color:"var( --semi-color-warning)"},children:t("Logs_warning_count")}),"：",t("Logs_warning_count_text")]}),d.jsxs(g,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[d.jsx(e,{style:{color:"var(--semi-color-danger)"},children:t("Logs_error_count")}),"：",t("Logs_error_count_text")]})]}),cancelButtonProps:{theme:"borderless"},okButtonProps:{theme:"solid"}})}function z(e,t){return(e/t*100).toFixed(2)}o.useEffect((()=>{const e=i();function t(){F(window.innerWidth)}return S(e),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[]);const B=l().length+a().length+c().length;return d.jsxs(d.Fragment,{children:[d.jsx("h3",{children:d.jsxs(C,{children:[t("View_all_info"),d.jsx(_,{showArrow:!0,arrowPointAtCenter:!0,content:d.jsx("article",{children:t("Tip_Log_View_info")}),position:"right",children:d.jsx(m,{style:{color:"var(--semi-color-primary)"}})})]})}),d.jsx("div",{className:"grid",children:d.jsx(T,{type:"flex",justify:"center",children:d.jsxs(C,{spacing:[100,20],align:"center",wrap:!0,children:[E>=940&&function(){const e={type:"pie",data:[{id:"id0",values:[{type:"Success",value:z(l().length,B)},{type:"Warning",value:z(a().length,B)},{type:"Error",value:z(c().length,B)}]}],valueField:"value",categoryField:"type",label:{visible:!0},tooltip:{mark:{content:[{key:e=>e.type,value:e=>e.value+"%"}]}}};return d.jsx(d.Fragment,{children:d.jsx("div",{children:d.jsx(L,{spec:{...e,title:{visible:!0,text:"",subtext:""},legends:{visible:!0,orient:"right"}},option:{mode:"desktop-browser"}})})})}(),function(){const e=[{key:t("Logs_count"),value:d.jsx(x,{theme:"borderless",size:"small",children:i().length})},{key:t("Logs_success_count"),value:d.jsx(x,{type:"primary",theme:"borderless",size:"small",children:l().length})},{key:t("Logs_warning_count"),value:d.jsx(x,{type:"warning",theme:"borderless",size:"small",children:a().length})},{key:t("Logs_error_count"),value:d.jsx(x,{type:"danger",theme:"borderless",size:"small",children:c().length})}];return d.jsx(d.Fragment,{children:d.jsx(g,{shadows:"hover",title:t("Roughly_browse"),onClick:$,headerExtraContent:d.jsx(f,{style:{color:"var(--semi-color-primary)"}}),children:d.jsx(y,{data:e})})})}()]})})}),function(){let i;i="Phone"===p()?o.useMemo((()=>({pageSize:5,formatPageText:!1,position:"top"})),[]):o.useMemo((()=>({pageSize:7,position:"top"})),[]);const l=[{title:d.jsxs(C,{children:[d.jsx("span",{children:t("Event")}),d.jsx(v,{placeholder:t("Enter_filter_value"),style:{width:200},onCompositionStart:()=>{n.current.isComposition=!0},onCompositionEnd:e=>{n.current.isComposition=!1;const t=e.target.value;r(t?[t]:[])},onChange:e=>{if(n.current.isComposition)return;r(e?[e]:[])},showClear:!0})]}),dataIndex:"event",key:"event",width:400,render:e=>d.jsx("div",{children:e}),onFilter:(e,t)=>t.event.includes(e),filteredValue:s},{title:t("Result"),dataIndex:"result",key:"result",render:e=>d.jsx("div",{children:d.jsx(O,{color:"successfully"===e?"green":"warning"===e?"yellow":"red",children:e})}),sorter:(e,t)=>{const s={error:0,warning:1,successfully:2};return s[e.result]===s[t.result]?0:s[e.result]-s[t.result]}},{title:t("Time"),dataIndex:"time",key:"time",sorter:(e,t)=>new Date(e.time)-new Date(t.time)>0?1:-1,render:e=>d.jsx("div",{children:e})},{title:t("Comment"),dataIndex:"comment",key:"comment",render:s=>d.jsx(x,{onClick:()=>{return r=s,void("Phone"===p()?""===I?I=h(t("Remarks"),r,null,0,"info",!1,"light"):h(t("Remarks"),r,null,0,"info",!1,"light",I):b.info({title:t("More_info"),content:d.jsx(d.Fragment,{children:d.jsx(e,{children:r})}),cancelButtonProps:{theme:"borderless"},okButtonProps:{theme:"solid"}}));var r},children:t("View")})}];return d.jsxs(d.Fragment,{children:[d.jsx("h3",{children:d.jsxs(C,{children:[t("Event_list"),d.jsx(_,{showArrow:!0,arrowPointAtCenter:!0,content:d.jsx("article",{children:t("Find_E_by_filter")}),position:"right",children:d.jsx(m,{style:{color:"var(--semi-color-primary)"}})})]})}),d.jsx(j,{children:d.jsx(j.Panel,{header:t("Log_control"),itemKey:"1",children:d.jsx(C,{children:d.jsx(x,{theme:"outline",type:"primary",style:{marginRight:8},onClick:u,children:t("Log_download")})})})}),d.jsx(k,{style:{width:"100%"},pagination:i,dataSource:R,columns:l,filteredValue:s})]})}()]})}T.propTypes={type:n.oneOf(["flex"]),align:n.oneOf(["top","middle","bottom"]),justify:n.oneOf(["start","end","center","space-around","space-between"]),className:n.string,style:n.object,children:n.node,gutter:n.oneOfType([n.object,n.number,n.array]),prefixCls:n.string},T.defaultProps={prefixCls:E.PREFIX},T.RowContext={gutters:n.any};export{I as default};
