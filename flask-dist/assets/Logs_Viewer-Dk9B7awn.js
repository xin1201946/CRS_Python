import{r as e,A as r,B as t,C as s,D as o,j as n,k as i,m as l}from"./index-CCsViYEm.js";import{B as a}from"./pick-CcpBOeoj.js";import{T as c,S as d,P as m,C as u}from"./index-BI5xKCkj.js";import{a as h}from"./index-a4uSMUEr.js";import{D as x}from"./index-CoWGG1Mh.js";import{F as j,T as g,I as p,M as y}from"./index-ChJUr8MD.js";import{a as v}from"./row-CLbckD7V.js";import{T as _}from"./index-Cip1nc55.js";import{u as f,E as w,s as b}from"./AppContent-DzAY2IDB.js";import{V as k}from"./VChart-jgLG29LE.js";import"./index-D05P_SgG.js";import"./localeConsumer-BEiTkOj7.js";import"./isPlainObject-Dm5b2ZIv.js";import"./isPromise-Bg79myL2.js";import"./truncateValue-DRMgwlIu.js";import"./index-r0f7UA0L.js";import"./index-D7TaNYTJ.js";import"./IconClear-CZZZZ1Kg.js";function C(){const{Text:C}=c,{t:L}=f(),[P,F]=e.useState([]),E=e.useRef({isComposition:!1}),[S,z]=e.useState(window.innerWidth),[T,V]=e.useState([]);let A="";function B(){"Phone"===i()?b(L("Warning"),L("Tip_cannot_support_your_device"),null,5,"warning"):y.info({title:L("More_info"),content:n.jsxs(n.Fragment,{children:[n.jsxs(u,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[n.jsx(C,{style:{color:"var(--semi-color-info)"},children:L("Logs_count")}),"： ",L("Logs_count_text")]}),n.jsxs(u,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[n.jsx(C,{style:{color:"var(--semi-color-success)"},children:L("Logs_success_count")}),"：",L("Logs_success_count_text")]}),n.jsxs(u,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[n.jsx(C,{style:{color:"var( --semi-color-warning)"},children:L("Logs_warning_count")}),"：",L("Logs_warning_count_text")]}),n.jsxs(u,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[n.jsx(C,{style:{color:"var(--semi-color-danger)"},children:L("Logs_error_count")}),"：",L("Logs_error_count_text")]})]}),cancelButtonProps:{theme:"borderless"},okButtonProps:{theme:"solid"}})}function I(e,r){return(e/r*100).toFixed(2)}e.useEffect((()=>{const e=r();function t(){z(window.innerWidth)}return V(e),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[]);const R=t().length+s().length+o().length;return n.jsxs(n.Fragment,{children:[n.jsx("h3",{children:n.jsxs(d,{children:[L("View_all_info"),n.jsx(m,{showArrow:!0,arrowPointAtCenter:!0,content:n.jsx("article",{children:L("Tip_Log_View_info")}),position:"right",children:n.jsx(w,{style:{color:"var(--semi-color-primary)"}})})]})}),n.jsx("div",{className:"grid",children:n.jsx(v,{type:"flex",justify:"center",children:n.jsxs(d,{spacing:[100,20],align:"center",wrap:!0,children:[S>=940&&function(){const e={type:"pie",data:[{id:"id0",values:[{type:"Success",value:I(t().length,R)},{type:"Warning",value:I(s().length,R)},{type:"Error",value:I(o().length,R)}]}],valueField:"value",categoryField:"type",label:{visible:!0},tooltip:{mark:{content:[{key:e=>e.type,value:e=>e.value+"%"}]}}};return n.jsx(n.Fragment,{children:n.jsx("div",{children:n.jsx(k,{spec:{...e,title:{visible:!0,text:"",subtext:""},legends:{visible:!0,orient:"right"}},option:{mode:"desktop-browser"}})})})}(),function(){const e=[{key:L("Logs_count"),value:n.jsx(a,{theme:"borderless",size:"small",children:r().length})},{key:L("Logs_success_count"),value:n.jsx(a,{type:"primary",theme:"borderless",size:"small",children:t().length})},{key:L("Logs_warning_count"),value:n.jsx(a,{type:"warning",theme:"borderless",size:"small",children:s().length})},{key:L("Logs_error_count"),value:n.jsx(a,{type:"danger",theme:"borderless",size:"small",children:o().length})}];return n.jsx(n.Fragment,{children:n.jsx(u,{shadows:"hover",title:L("Roughly_browse"),onClick:B,headerExtraContent:n.jsx(p,{style:{color:"var(--semi-color-primary)"}}),children:n.jsx(x,{data:e})})})}()]})})}),function(){let r;r="Phone"===i()?e.useMemo((()=>({pageSize:5,formatPageText:!1,position:"top"})),[]):e.useMemo((()=>({pageSize:7,position:"top"})),[]);const t=[{title:n.jsxs(d,{children:[n.jsx("span",{children:L("Event")}),n.jsx(j,{placeholder:L("Enter_filter_value"),style:{width:200},onCompositionStart:()=>{E.current.isComposition=!0},onCompositionEnd:e=>{E.current.isComposition=!1;const r=e.target.value;F(r?[r]:[])},onChange:e=>{if(E.current.isComposition)return;F(e?[e]:[])},showClear:!0})]}),dataIndex:"event",key:"event",width:400,render:e=>n.jsx("div",{children:e}),onFilter:(e,r)=>r.event.includes(e),filteredValue:P},{title:L("Result"),dataIndex:"result",key:"result",render:e=>n.jsx("div",{children:n.jsx(_,{color:"successfully"===e?"green":"warning"===e?"yellow":"red",children:e})}),sorter:(e,r)=>{const t={error:0,warning:1,successfully:2};return t[e.result]===t[r.result]?0:t[e.result]-t[r.result]}},{title:L("Time"),dataIndex:"time",key:"time",sorter:(e,r)=>new Date(e.time)-new Date(r.time)>0?1:-1,render:e=>n.jsx("div",{children:e})},{title:L("Comment"),dataIndex:"comment",key:"comment",render:e=>n.jsx(a,{onClick:()=>{return r=e,void("Phone"===i()?""===A?A=b(L("Remarks"),r,null,0,"info",!1,"light"):b(L("Remarks"),r,null,0,"info",!1,"light",A):y.info({title:L("More_info"),content:n.jsx(n.Fragment,{children:n.jsx(C,{children:r})}),cancelButtonProps:{theme:"borderless"},okButtonProps:{theme:"solid"}}));var r},children:L("View")})}];return n.jsxs(n.Fragment,{children:[n.jsx("h3",{children:n.jsxs(d,{children:[L("Event_list"),n.jsx(m,{showArrow:!0,arrowPointAtCenter:!0,content:n.jsx("article",{children:L("Find_E_by_filter")}),position:"right",children:n.jsx(w,{style:{color:"var(--semi-color-primary)"}})})]})}),n.jsx(h,{children:n.jsx(h.Panel,{header:L("Log_control"),itemKey:"1",children:n.jsx(d,{children:n.jsx(a,{theme:"outline",type:"primary",style:{marginRight:8},onClick:l,children:L("Log_download")})})})}),n.jsx(g,{style:{width:"100%"},pagination:r,dataSource:T,columns:t,filteredValue:P})]})}()]})}export{C as default};
