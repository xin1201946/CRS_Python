import{r as e,j as t,P as s,am as r,an as a,R as n}from"./index-CiQzaChg.js";import{C as l}from"./index-DGV8NlRW.js";import{D as o}from"./index-BhhisqWH.js";import{P as i}from"./index-DTL10Svl.js";import{S as c}from"./index-xa6R1Qjp.js";import{T as d,a as p}from"./index-Bjz6sW2z.js";import{V as m}from"./VChart-D6CM_1aF.js";import"./index-CpoOHKow.js";import"./index-DAldieki.js";import"./keyCode-BPRnlZ-b.js";import"./isPlainObject-CfwJLuma.js";import"./pick-CHTdVrpw.js";import"./index-xFZevcIM.js";import"./index-CTcMDnNH.js";import"./IconChevronRight-DTqlCENH.js";import"./theme-manager-Cd_MApBo.js";function u({mainColor:s="#6366f1",backgroundColors:r="rgb(60, 60, 60)",icon:a="",title:n="Processor",content:l="Intel(R) Core(TM) i5-7400 CPU",percentage:o=22,usageLabel:i="PROCESSOR USAGE",bottomStats:c={left:"4 Cores",center:"1.6 GHz",right:"64-bit"}}){const[d,p]=e.useState(0);return e.useEffect((()=>{const e=setInterval((()=>{p((t=>t<o?t+1:t>o?t-1:(clearInterval(e),t)))}),20);return()=>clearInterval(e)}),[o]),t.jsxs("div",{className:"w-full max-w-md rounded-lg overflow-hidden",style:{backgroundColor:r},children:[t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex items-center justify-center",style:{backgroundColor:s},children:t.jsx("img",{src:a,alt:"Icon",className:"w-8 object-cover"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-white text-lg font-medium",children:n}),t.jsx("p",{className:"text-gray-300 text-sm",children:l})]})]}),t.jsxs("div",{className:"text-right mb-4",children:[t.jsxs("div",{className:"relative inline-block",children:[t.jsx("span",{className:"text-gray-500 text-6xl font-bold absolute left-0",children:"0"}),t.jsx("span",{className:"text-white text-6xl font-bold ml-8",children:d}),t.jsx("span",{className:"text-white text-4xl font-bold",children:"%"})]}),t.jsx("br",{}),t.jsxs("div",{className:"mt-2",style:{float:"right"},children:[t.jsx("p",{className:"text-gray-400 text-sm tracking-wider mb-2",children:i}),t.jsx("div",{className:"h-1 bg-gray-700 rounded-full w-32 mx-auto",children:t.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${d}%`,backgroundColor:s}})})]})]})]}),t.jsx("br",{}),t.jsxs("div",{className:"grid grid-cols-3 text-center py-3",style:{backgroundColor:s},children:[t.jsx("div",{className:"text-white border-r border-white/20",children:c.left}),t.jsx("div",{className:"text-white border-r border-white/20",children:c.center}),t.jsx("div",{className:"text-white",children:c.right})]})]})}u.propTypes={mainColor:s.string,backgroundColors:s.string,icon:s.string,title:s.string,content:s.string,percentage:s.number,usageLabel:s.string,bottomStats:s.shape({left:s.string,center:s.string,right:s.string})};class h extends n.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){}render(){return this.state.hasError?t.jsx("div",{children:"组件渲染出错，请稍后重试。"}):this.props.children}}function x(){const[s,n]=e.useState([]),[x,g]=e.useState(0),[y,j]=e.useState(""),[v,f]=e.useState(0),[b,N]=e.useState([]),[k,w]=e.useState([]),[S,C]=e.useState(0),[I,P]=e.useState(""),[U,T]=e.useState({}),[M,A]=e.useState([]),[_,$]=e.useState(""),[R,B]=e.useState("Waiting"),[E,F]=e.useState(""),[G,K]=e.useState(0),[D,O]=e.useState(0),[V,L]=e.useState(""),[W,z]=e.useState({version:"Unknown",released:"",RepairNumber:""}),[H,J]=e.useState(""),[Y,Z]=e.useState("");e.useEffect((()=>{const e=setInterval((()=>{(e=>{try{if("object"!=typeof e||null===e)return;if(j("string"==typeof e.cpu_name?e.cpu_name:""),n(Array.isArray(e.currentTime)?e.currentTime:[]),g("number"==typeof e.userCount?e.userCount:0),f("number"==typeof e.cpuCount?e.cpuCount:0),N(Array.isArray(e.cpuPercent)?e.cpuPercent:[]),w(Array.isArray(e.memPercent)?e.memPercent:[]),C("number"==typeof e.memTotal?e.memTotal:0),P("string"==typeof e.externalIp?e.externalIp:""),T("object"==typeof e.gpu&&null!==e.gpu?e.gpu:{}),$("string"==typeof e.hostname?e.hostname:""),B("string"==typeof e.serverInfo?e.serverInfo:"Invalid data"),F("string"==typeof e.platform?e.platform:""),K("number"==typeof e.swapTotal?e.swapTotal:0),O("number"==typeof e.swapPercent?e.swapPercent:0),L("string"==typeof e.runTime?e.runTime:""),z("object"==typeof e.python&&null!==e.python?e.python:{version:"Unknown",released:"",RepairNumber:""}),"object"==typeof e.network&&null!==e.network){const t=Object.values(e.network).filter((e=>!0===e.is_up));A(t)}else A([])}catch(t){}})(a())}),2e3);return()=>clearInterval(e)}),[]);const q={type:"area",stack:!0,title:{visible:!0,text:`${r("CPU usage")} ${b.length>0?b[b.length-1]:0}%`},xField:"type",yField:"value",line:{style:{curveType:"monotone"}},seriesField:"country",legends:{visible:!0},tooltip:{dimension:{updateContent:e=>{let t=0;return e.forEach((e=>t+=+e.value||0)),e.push({hasShape:"false",key:"Total",value:t}),e}}}},Q={type:"area",stack:!0,title:{visible:!0,text:`${r("memory usage")} ${k.length>0?k[k.length-1]:0}%`},xField:"type",yField:"value",line:{style:{curveType:"monotone"}},seriesField:"country",legends:{visible:!0},tooltip:{dimension:{updateContent:e=>{let t=0;return e.forEach((e=>t+=+e.value||0)),e.push({hasShape:"false",key:"Total",value:t}),e}}}},X=b.length>0?b:[0],ee=k.length>0?k:[0],te=s.length>0?s:["0"],se={values:te.map(((e,t)=>({type:e||"0",value:Array.isArray(X[t])?X[t]:[0]})))},re={values:te.map(((e,t)=>({type:e||"0",value:Array.isArray(ee[t])?ee[t]:[0]})))},ae=[{key:r("OS version"),value:E||"Unknown"},{key:r("Computer_Name"),value:_||"Unknown"},{key:r("Server_IP"),value:I||"Unknown"},{key:r("connected device"),value:x||0,span:3},{key:r("CPU core count"),value:v||0,span:3},{key:r("Mem total"),value:S||0,span:3},{key:r("server runtime"),value:V||"Unknown",span:3},{key:r("Swap total"),value:G||0,span:3},{key:r("Server Info"),value:R||"Invalid data",span:3}],ne=[{key:r("Python Version"),value:W.version||"Unknown"},{key:r("released"),value:W.released||""},{key:r("RepairNumber"),value:W.RepairNumber||""}],le=()=>U&&"object"==typeof U&&0!==Object.keys(U).length?t.jsx(d,{type:"line",activeKey:H||"0",onChange:J,children:Object.entries(U).map((([e,s])=>t.jsx(p,{tab:`GPU ${s.id||e}`,itemKey:e,children:t.jsxs(c,{align:"start",style:{margin:"5px"},className:"scroll-auto",children:[t.jsx(i,{percent:isNaN(Math.floor(s.load))?0:Math.floor(s.load),strokeWidth:10,type:"circle",style:{margin:5},format:e=>`${e}%`,"aria-label":"gpu usage",showInfo:!0}),t.jsxs("div",{children:[t.jsxs("p",{children:[r("Name"),": ",s.name||"Unknown"]}),t.jsxs("p",{children:[r("Driver version"),": ",s.driver||"Unknown"]}),t.jsxs("p",{children:[r("Video RAM"),": ",isNaN(Math.floor(s.memory_total))?0:Math.floor(s.memory_total)," GB"]}),t.jsxs("p",{children:[r("Video memory used"),": ",isNaN(Math.floor(s.memory_used))?0:Math.floor(s.memory_used)," GB"]}),t.jsxs("p",{children:[r("Video memory available"),": ",isNaN(Math.floor(s.memory_free))?0:Math.floor(s.memory_free)," GB"]}),t.jsxs("p",{children:[r("memory usage"),": ",isNaN(Math.floor(s.memory_percent))?0:Math.floor(s.memory_percent),"%"]}),t.jsxs("p",{children:[r("Temperature"),": ",s.temperature||0," °C"]}),t.jsxs("p",{children:[r("Graphics load"),": ",isNaN(Math.floor(s.load))?0:Math.floor(s.load),"%"]})]})]})},e)))}):t.jsx("div",{children:"Loading GPU info..."}),oe=()=>{const e=e=>e<1024?`${e}KB/s`:e<1048576?`${(e/1024).toFixed(1)}MB/s`:`${(e/1024/1024).toFixed(2)}GB/s`;return M&&Array.isArray(M)&&0!==M.length?t.jsx(d,{type:"line",tabPosition:"left",activeKey:Y||"0",onChange:Z,children:M.map(((s,a)=>{var n,l,o,i;return t.jsx(p,{tab:s.name||`Network ${a}`,itemKey:String(a),children:t.jsx(c,{align:"start",children:t.jsxs("p",{children:[t.jsxs("p",{children:[r("Name"),": ",s.name||"Unknown"]}),t.jsxs("p",{children:[r("Upload Speed"),": ",e((null==(n=s.speed)?void 0:n.upload_speedKBps)||0)]}),t.jsxs("p",{children:[r("Download Speed"),": ",e((null==(l=s.speed)?void 0:l.download_speedKBps)||0)]}),t.jsxs("p",{children:[r("Total Speed"),": ",e((null==(o=s.speed)?void 0:o.total_speedKBps)||0)]}),t.jsxs("p",{children:[r("Total rate"),": ",(null==(i=s.speed)?void 0:i.utilization)||0," %"]}),t.jsxs("p",{children:["ipv4: ",s.ipv4||"N/A"]}),t.jsxs("p",{children:["ipv6: ",s.ipv6||"N/A"]})]})})},a)}))}):t.jsx("div",{children:"Loading Network info..."})};return t.jsx(h,{children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 p-6",children:[t.jsxs("div",{className:"col-span-2 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsx(u,{mainColor:"#6366f1",content:y||"Unknown",icon:"/processor.webp",backgroundColors:"var(--semi-color-bg-3)",percentage:parseInt(b[b.length-1]||0),bottomStats:{left:`${v||0} Cores`,center:`${x||0} Devices`,right:"64-bit"}}),t.jsx(u,{mainColor:"orange",backgroundColors:"var(--semi-color-bg-3)",icon:"/memory.webp",title:"Memory",content:E||"Unknown",percentage:parseInt(k[k.length-1]||0),bottomStats:{left:`${(S/1024).toFixed(1)||0} GiB RAM`,center:"64-bit",right:V||"Unknown"}}),t.jsx(l,{className:"col-span-2 lg:col-span-1",title:"Swap",children:t.jsx(i,{percent:D||0,strokeWidth:10,type:"circle",style:{margin:5},format:e=>`${e}%`,"aria-label":"swap usage",showInfo:!0})}),t.jsx(l,{className:"col-span-2 lg:col-span-1",title:"Python",children:t.jsx(o,{layout:"vertical",align:"plain",data:ne,column:4})}),t.jsx(l,{className:"col-span-2 lg:col-span-1",title:"Network",children:t.jsx(oe,{})}),t.jsx(l,{className:"col-span-2 lg:col-span-1",children:t.jsx(le,{})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsx("div",{className:"col-span-2 lg:col-span-1",children:t.jsx(m,{spec:{...q,data:se},option:{mode:"desktop-browser"}})}),t.jsx("div",{className:"col-span-2 lg:col-span-1",children:t.jsx(m,{spec:{...Q,data:re},option:{mode:"desktop-browser"}})})]})]}),t.jsx("div",{className:"lg:col-span-1",children:t.jsx(l,{className:"w-full",title:r("Server detail"),children:t.jsx(o,{layout:"vertical",align:"plain",data:ae,column:4})})})]})})}export{x as default};
