import{z as e,r as t,b0 as a,b1 as s,Z as o,B as n,e as i,N as r,R as d,f as l,c,P as u,_ as h,an as p}from"./index-clQ5-bGK.js";import{c as b}from"./index-CKORjjze.js";const f=e((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("circle",{cx:12,cy:12,r:5,fill:"currentColor"}))}),"radio");var g,m;const y=o(function(){if(m)return g;m=1;var e=a(),t=s();return g=function(a){return!0===a||!1===a||t(a)&&"[object Boolean]"==e(a)}}()),v={PREFIX:`${n}-radio`},C={PREFIX:`${n}-radioGroup`},x=["horizontal","vertical"],k="horizontal",O=["advanced",""],$="default",I="button",E="card",R="pureCard",P=["middle","small","large"];class j extends i{constructor(e){super(Object.assign({},e))}init(){const e=this._getDisplayValue();this._setValue(e)}_getDisplayValue(){const{value:e,defaultValue:t}=this.getProps();let a;return"value"in this.getProps()?a=e:"defaultValue"in this.getProps()&&(a=t),a}handleChange(e){const t=this.getProp("mode"),a=this.getState("value"),{checked:s,value:o}=e.target,n=this._adapter.isInProps("value"),i=Object.assign(Object.assign({},e),{target:Object.assign(Object.assign({},e.target),{value:o})});"advanced"!==t||s||(i.target.value=void 0),n||("advanced"!==t||s?this._setValue(o):this._setValue(void 0)),"advanced"!==t&&a===o||this._adapter.notifyChange(i)}handlePropValueChange(e){this._setValue(e)}_setValue(e){this._adapter.setValue(e)}destroy(){}}class _ extends i{constructor(){super(...arguments),this.handleFocusVisible=e=>{const{target:t}=e;try{t.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch(a){r(!0,"Warning: [Semi Radio] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this._adapter.setFocusVisible(!1)}}init(){const{children:e,extra:t,extraId:a,addonId:s}=this._adapter.getProps();e&&!s&&this._adapter.setAddonId(),t&&!a&&this._adapter.setExtraId()}setHover(e){this._adapter.setHover(e)}setChecked(e){this._adapter.setChecked(e)}}class G extends i{constructor(e){super(Object.assign({},e))}init(){const e=this._adapter.getProp("checked"),t=this._adapter.getProp("defaultChecked");this.setChecked(e||t)}setChecked(e){this._adapter.setNativeControlChecked(e)}getChecked(){return this._adapter.getProp("checked")}handleChange(e){const t="checked"in this.getProps(),{checked:a}=e.target,s={target:Object.assign(Object.assign({},this.getProps()),{checked:a}),stopPropagation:()=>{e.stopPropagation()},preventDefault:()=>{e.preventDefault()}};t||this.setChecked(a),this._adapter.notifyChange(s)}destroy(){}}const N=d.createContext(null);class S extends l{constructor(e){super(e),this.state={checked:!1},this.foundation=new G(this.adapter),this.onChange=this.onChange.bind(this)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setNativeControlChecked:e=>{this.setState({checked:e})},notifyChange:e=>{this.props.onChange(e)}})}componentDidMount(){this.foundation.init()}componentDidUpdate(e){e.checked!==this.props.checked&&this.foundation.setChecked(this.props.checked)}componentWillUnmount(){this.foundation.destroy()}blur(){this.inputEntity.blur()}focus(){const{preventScroll:e}=this.props;this.inputEntity.focus({preventScroll:e})}onChange(e){this.foundation.handleChange(e)}render(){const{disabled:e,mode:t,autoFocus:a,name:s,isButtonRadio:o,isPureCardRadioGroup:n,addonId:i,extraId:r,"aria-label":l,focusInner:u,onInputFocus:h,onInputBlur:p}=this.props,{checked:b}=this.state,g=this.props.prefixCls||v.PREFIX,m=c({[`${g}-inner`]:!0,[`${g}-inner-checked`]:Boolean(b),[`${g}-inner-buttonRadio`]:o,[`${g}-inner-pureCardRadio`]:n}),y=c({[`${g}-focus`]:u,[`${g}-focus-border`]:u&&!b,[`${g}-inner-display`]:!o});return d.createElement("span",{className:m},d.createElement("input",{ref:e=>{this.inputEntity=e},autoFocus:a,type:"advanced"===t?"checkbox":"radio",checked:Boolean(b),disabled:e,onChange:this.onChange,name:s,"aria-label":l,"aria-labelledby":i,"aria-describedby":r,onFocus:h,onBlur:p}),d.createElement("span",{className:y},b?d.createElement(f,null):null))}}S.contextType=N,S.propTypes={checked:u.bool,disabled:u.bool,isButtonRadio:u.bool,onChange:u.func,mode:u.oneOf(["advanced",""]),"aria-label":u.string,focusInner:u.bool,onInputFocus:u.func,onInputBlur:u.func,preventScroll:u.bool},S.defaultProps={onChange:h,isButtonRadio:!1};class V extends l{constructor(e){super(e),this.onChange=e=>{const{onChange:t}=this.props;if(this.isInGroup()){const{radioGroup:t}=this.context;t.onChange&&t.onChange(e)}!("checked"in this.props)&&this.foundation.setChecked(e.target.checked),t&&t(e)},this.handleMouseEnter=e=>{this.props.onMouseEnter(e),this.foundation.setHover(!0)},this.handleMouseLeave=e=>{this.props.onMouseLeave(e),this.foundation.setHover(!1)},this.handleFocusVisible=e=>{this.foundation.handleFocusVisible(e)},this.handleBlur=e=>{this.foundation.handleBlur()},this.state={hover:!1,addonId:e.addonId,extraId:e.extraId,checked:e.checked||e.defaultChecked||!1},this.foundation=new _(this.adapter),this.radioEntity=null}componentDidUpdate(e){this.props.checked!==e.checked&&(b(this.props.checked)?this.foundation.setChecked(!1):y(this.props.checked)&&this.foundation.setChecked(this.props.checked))}get adapter(){return Object.assign(Object.assign({},super.adapter),{setHover:e=>{this.setState({hover:e})},setAddonId:()=>{this.setState({addonId:p({prefix:"addon"})})},setChecked:e=>{this.setState({checked:e})},setExtraId:()=>{this.setState({extraId:p({prefix:"extra"})})},setFocusVisible:e=>{this.setState({focusVisible:e})}})}isInGroup(){return this.context&&this.context.radioGroup}focus(){this.radioEntity.focus()}blur(){this.radioEntity.blur()}render(){const e=this.props,{addonClassName:t,addonStyle:a,disabled:s,style:o,className:n,prefixCls:i,displayMode:r,children:l,extra:u,mode:h,type:p,value:b,name:f}=e,g=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(a[s[o]]=e[s[o]])}return a}(e,["addonClassName","addonStyle","disabled","style","className","prefixCls","displayMode","children","extra","mode","type","value","name"]);let m,y,C,x,k,O,$,P,j;const{hover:_,addonId:G,extraId:N,focusVisible:V,checked:B}=this.state,F={checked:B,disabled:s};this.isInGroup()?(m=this.context.radioGroup.value===b,y=s||this.context.radioGroup.disabled,C=this.context.mode,x=this.context.radioGroup.isButtonRadio,k=this.context.radioGroup.isCardRadio,O=this.context.radioGroup.isPureCardRadio,P=this.context.radioGroup.buttonSize,j=i||this.context.radioGroup.prefixCls,F.checked=m,F.disabled=y):(m=B,y=s,C=h,$="button"===p,j=i,x=p===I,O=p===R,k=p===E||O);const w=void 0===x?$:x,M=j||v.PREFIX,D=k||O||w,z=c(M,{[`${M}-disabled`]:y,[`${M}-checked`]:m,[`${M}-${r}`]:Boolean(r),[`${M}-buttonRadioComponent`]:$,[`${M}-buttonRadioGroup`]:x,[`${M}-buttonRadioGroup-${P}`]:x&&P,[`${M}-cardRadioGroup`]:k,[`${M}-cardRadioGroup_disabled`]:y&&k,[`${M}-cardRadioGroup_checked`]:k&&m&&!y,[`${M}-cardRadioGroup_checked_disabled`]:k&&m&&y,[`${M}-cardRadioGroup_hover`]:k&&!m&&_&&!y,[n]:Boolean(n),[`${M}-focus`]:V&&(k||O)}),T=this.isInGroup()&&this.context.radioGroup.name,L=c({[`${M}-addon`]:!w,[`${M}-addon-buttonRadio`]:w,[`${M}-addon-buttonRadio-checked`]:w&&m,[`${M}-addon-buttonRadio-disabled`]:w&&y,[`${M}-addon-buttonRadio-hover`]:w&&!m&&!y&&_,[`${M}-addon-buttonRadio-${P}`]:w&&P,[`${M}-focus`]:V&&w},t);return d.createElement("label",Object.assign({style:o,className:z,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},this.getDataAttr(g)),d.createElement(S,Object.assign({},this.props,F,{mode:C,name:null!=f?f:T,isButtonRadio:w,isPureCardRadioGroup:O,onChange:this.onChange,ref:e=>{this.radioEntity=e},addonId:l&&G,extraId:u&&N,focusInner:V&&!D,onInputFocus:this.handleFocusVisible,onInputBlur:this.handleBlur})),l||u?d.createElement("div",{className:c([`${M}-content`,{[`${M}-isCardRadioGroup_content`]:k}])},l?d.createElement("span",{className:L,style:a,id:G,"x-semi-prop":"children"},l):null,u&&!w?d.createElement("div",{className:`${M}-extra`,id:N,"x-semi-prop":"extra"},u):null):null)}}V.contextType=N,V.propTypes={autoFocus:u.bool,checked:u.bool,defaultChecked:u.bool,value:u.any,style:u.object,className:u.string,disabled:u.bool,prefixCls:u.string,displayMode:u.oneOf(["vertical",""]),onChange:u.func,onMouseEnter:u.func,onMouseLeave:u.func,mode:u.oneOf(O),extra:u.node,addonStyle:u.object,addonClassName:u.string,type:u.oneOf([$,I,E,R]),"aria-label":u.string,preventScroll:u.bool},V.defaultProps={autoFocus:!1,defaultChecked:!1,value:void 0,style:void 0,onMouseEnter:h,onMouseLeave:h,mode:"",type:"default"},V.elementType="Radio";class B extends l{constructor(e){super(e),this.onChange=e=>{this.foundation.handleChange(e)},this.getFormatName=()=>this.props.name||"default",this.state={value:e.value||e.defaultValue},this.foundation=new j(this.adapter)}componentDidMount(){this.foundation.init()}componentDidUpdate(e){"number"==typeof e.value&&isNaN(e.value)&&"number"==typeof this.props.value&&isNaN(this.props.value)||e.value!==this.props.value&&this.foundation.handlePropValueChange(this.props.value)}componentWillUnmount(){this.foundation.destroy()}get adapter(){return Object.assign(Object.assign({},super.adapter),{setValue:e=>{this.setState({value:e})},getProps:()=>this.props,isInProps:e=>Boolean(e in this.props),notifyChange:e=>{this.props.onChange&&this.props.onChange(e)}})}render(){const e=this.props,{children:t,options:a,mode:s,prefixCls:o,className:n,style:i,direction:r,type:l,buttonSize:u,id:h}=e,p=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(a[s[o]]=e[s[o]])}return a}(e,["children","options","mode","prefixCls","className","style","direction","type","buttonSize","id"]),b=l===I,f=l===R,g=l===E||f,m=l===$,y=o||C.PREFIX,v=c(n,{[y]:!0,[`${y}-wrapper`]:!0,[`${y}-${r}`]:r&&!b,[`${y}-${r}-default`]:r&&m,[`${y}-${r}-card`]:r&&g,[`${y}-buttonRadio`]:b}),x=this.state.value;let k;return a?k=(a||[]).map(((e,t)=>"string"==typeof e?d.createElement(V,{key:t,disabled:this.props.disabled,value:e},e):d.createElement(V,{key:t,disabled:e.disabled||this.props.disabled,value:e.value,extra:e.extra,className:e.className,style:e.style},e.label))):t&&(k=d.Children.map(t,((e,t)=>d.isValidElement(e)?d.cloneElement(e,{key:t}):null))),d.createElement("div",Object.assign({className:v,style:i,id:h,"aria-label":this.props["aria-label"],"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],"aria-required":this.props["aria-required"]},this.getDataAttr(p)),d.createElement(N.Provider,{value:{radioGroup:{onChange:this.onChange,value:x,disabled:this.props.disabled,name:this.getFormatName(),isButtonRadio:b,isCardRadio:g,isPureCardRadio:f,buttonSize:u,prefixCls:o},mode:s}},k))}}B.propTypes={defaultValue:u.any,disabled:u.bool,name:u.string,options:u.array,buttonSize:u.oneOf(P),type:u.oneOf([$,I,E,R]),value:u.any,onChange:u.func,children:u.node,prefixCls:u.string,className:u.string,style:u.object,direction:u.oneOf(x),mode:u.oneOf(O),"aria-label":u.string,"aria-describedby":u.string,"aria-errormessage":u.string,"aria-invalid":u.bool,"aria-labelledby":u.string,"aria-required":u.bool,id:u.string},B.defaultProps={disabled:!1,onChange:h,direction:k,mode:"",type:$,buttonSize:"middle"};class F extends V{}F.Group=B;export{B as R,y as _,F as a,V as b};
