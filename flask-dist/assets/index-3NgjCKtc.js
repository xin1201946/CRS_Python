import{v as e,r as t,bi as a,bj as s,J as o,K as n,N as i,R as r,ag as d,U as l,W as c,P as u,Y as h,an as p}from"./index-BEnZJKm2.js";import{_ as b}from"./index-fs5Z28YX.js";const g=e((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("circle",{cx:12,cy:12,r:5,fill:"currentColor"}))}),"radio");var f,m;const y=o(function(){if(m)return f;m=1;var e=a(),t=s();return f=function(a){return!0===a||!1===a||t(a)&&"[object Boolean]"==e(a)}}()),v={PREFIX:`${n}-radio`},C={PREFIX:`${n}-radioGroup`},x=["horizontal","vertical"],k="horizontal",I=["advanced",""],O="default",$="button",E="card",R="pureCard",P=["middle","small","large"];class j extends i{constructor(e){super(Object.assign({},e))}init(){const e=this._getDisplayValue();this._setValue(e)}_getDisplayValue(){const{value:e,defaultValue:t}=this.getProps();let a;return"value"in this.getProps()?a=e:"defaultValue"in this.getProps()&&(a=t),a}handleChange(e){const t=this.getProp("mode"),a=this.getState("value"),{checked:s,value:o}=e.target,n=this._adapter.isInProps("value"),i=Object.assign(Object.assign({},e),{target:Object.assign(Object.assign({},e.target),{value:o})});"advanced"!==t||s||(i.target.value=void 0),n||("advanced"!==t||s?this._setValue(o):this._setValue(void 0)),"advanced"!==t&&a===o||this._adapter.notifyChange(i)}handlePropValueChange(e){this._setValue(e)}_setValue(e){this._adapter.setValue(e)}destroy(){}}const _=r.createContext(null);class N extends i{constructor(){super(...arguments),this.handleFocusVisible=e=>{const{target:t}=e;try{t.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch(a){d(!0,"Warning: [Semi Radio] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this._adapter.setFocusVisible(!1)}}init(){const{children:e,extra:t,extraId:a,addonId:s}=this._adapter.getProps();e&&!s&&this._adapter.setAddonId(),t&&!a&&this._adapter.setExtraId()}setHover(e){this._adapter.setHover(e)}setChecked(e){this._adapter.setChecked(e)}}class S extends i{constructor(e){super(Object.assign({},e))}init(){const e=this._adapter.getProp("checked"),t=this._adapter.getProp("defaultChecked");this.setChecked(e||t)}setChecked(e){this._adapter.setNativeControlChecked(e)}getChecked(){return this._adapter.getProp("checked")}handleChange(e){const t="checked"in this.getProps(),{checked:a}=e.target,s={target:Object.assign(Object.assign({},this.getProps()),{checked:a}),stopPropagation:()=>{e.stopPropagation()},preventDefault:()=>{e.preventDefault()}};t||this.setChecked(a),this._adapter.notifyChange(s)}destroy(){}}class G extends l{constructor(e){super(e),this.state={checked:!1},this.foundation=new S(this.adapter),this.onChange=this.onChange.bind(this)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setNativeControlChecked:e=>{this.setState({checked:e})},notifyChange:e=>{this.props.onChange(e)}})}componentDidMount(){this.foundation.init()}componentDidUpdate(e){e.checked!==this.props.checked&&this.foundation.setChecked(this.props.checked)}componentWillUnmount(){this.foundation.destroy()}blur(){this.inputEntity.blur()}focus(){const{preventScroll:e}=this.props;this.inputEntity.focus({preventScroll:e})}onChange(e){this.foundation.handleChange(e)}render(){const{disabled:e,mode:t,autoFocus:a,name:s,isButtonRadio:o,isPureCardRadioGroup:n,addonId:i,extraId:d,"aria-label":l,focusInner:u,onInputFocus:h,onInputBlur:p}=this.props,{checked:b}=this.state,f=this.props.prefixCls||v.PREFIX,m=c({[`${f}-inner`]:!0,[`${f}-inner-checked`]:Boolean(b),[`${f}-inner-buttonRadio`]:o,[`${f}-inner-pureCardRadio`]:n}),y=c({[`${f}-focus`]:u,[`${f}-focus-border`]:u&&!b,[`${f}-inner-display`]:!o});return r.createElement("span",{className:m},r.createElement("input",{ref:e=>{this.inputEntity=e},autoFocus:a,type:"advanced"===t?"checkbox":"radio",checked:Boolean(b),disabled:e,onChange:this.onChange,name:s,"aria-label":l,"aria-labelledby":i,"aria-describedby":d,onFocus:h,onBlur:p}),r.createElement("span",{className:y},b?r.createElement(g,null):null))}}G.contextType=_,G.propTypes={checked:u.bool,disabled:u.bool,isButtonRadio:u.bool,onChange:u.func,mode:u.oneOf(["advanced",""]),"aria-label":u.string,focusInner:u.bool,onInputFocus:u.func,onInputBlur:u.func,preventScroll:u.bool},G.defaultProps={onChange:h,isButtonRadio:!1};class V extends l{constructor(e){super(e),this.onChange=e=>{const{onChange:t}=this.props;if(this.isInGroup()){const{radioGroup:t}=this.context;t.onChange&&t.onChange(e)}!("checked"in this.props)&&this.foundation.setChecked(e.target.checked),t&&t(e)},this.handleMouseEnter=e=>{this.props.onMouseEnter(e),this.foundation.setHover(!0)},this.handleMouseLeave=e=>{this.props.onMouseLeave(e),this.foundation.setHover(!1)},this.handleFocusVisible=e=>{this.foundation.handleFocusVisible(e)},this.handleBlur=e=>{this.foundation.handleBlur()},this.state={hover:!1,addonId:e.addonId,extraId:e.extraId,checked:e.checked||e.defaultChecked||!1},this.foundation=new N(this.adapter),this.radioEntity=null}componentDidUpdate(e){this.props.checked!==e.checked&&(b(this.props.checked)?this.foundation.setChecked(!1):y(this.props.checked)&&this.foundation.setChecked(this.props.checked))}get adapter(){return Object.assign(Object.assign({},super.adapter),{setHover:e=>{this.setState({hover:e})},setAddonId:()=>{this.setState({addonId:p({prefix:"addon"})})},setChecked:e=>{this.setState({checked:e})},setExtraId:()=>{this.setState({extraId:p({prefix:"extra"})})},setFocusVisible:e=>{this.setState({focusVisible:e})}})}isInGroup(){return this.context&&this.context.radioGroup}focus(){this.radioEntity.focus()}blur(){this.radioEntity.blur()}render(){const e=this.props,{addonClassName:t,addonStyle:a,disabled:s,style:o,className:n,prefixCls:i,displayMode:d,children:l,extra:u,mode:h,type:p,value:b,name:g}=e,f=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(a[s[o]]=e[s[o]])}return a}(e,["addonClassName","addonStyle","disabled","style","className","prefixCls","displayMode","children","extra","mode","type","value","name"]);let m,y,C,x,k,I,O,P,j;const{hover:_,addonId:N,extraId:S,focusVisible:V,checked:F}=this.state,B={checked:F,disabled:s};this.isInGroup()?(m=this.context.radioGroup.value===b,y=s||this.context.radioGroup.disabled,C=this.context.mode,x=this.context.radioGroup.isButtonRadio,k=this.context.radioGroup.isCardRadio,I=this.context.radioGroup.isPureCardRadio,P=this.context.radioGroup.buttonSize,j=i||this.context.radioGroup.prefixCls,B.checked=m,B.disabled=y):(m=F,y=s,C=h,O="button"===p,j=i,x=p===$,I=p===R,k=p===E||I);const w=void 0===x?O:x,M=j||v.PREFIX,D=k||I||w,z=c(M,{[`${M}-disabled`]:y,[`${M}-checked`]:m,[`${M}-${d}`]:Boolean(d),[`${M}-buttonRadioComponent`]:O,[`${M}-buttonRadioGroup`]:x,[`${M}-buttonRadioGroup-${P}`]:x&&P,[`${M}-cardRadioGroup`]:k,[`${M}-cardRadioGroup_disabled`]:y&&k,[`${M}-cardRadioGroup_checked`]:k&&m&&!y,[`${M}-cardRadioGroup_checked_disabled`]:k&&m&&y,[`${M}-cardRadioGroup_hover`]:k&&!m&&_&&!y,[n]:Boolean(n),[`${M}-focus`]:V&&(k||I)}),T=this.isInGroup()&&this.context.radioGroup.name,L=c({[`${M}-addon`]:!w,[`${M}-addon-buttonRadio`]:w,[`${M}-addon-buttonRadio-checked`]:w&&m,[`${M}-addon-buttonRadio-disabled`]:w&&y,[`${M}-addon-buttonRadio-hover`]:w&&!m&&!y&&_,[`${M}-addon-buttonRadio-${P}`]:w&&P,[`${M}-focus`]:V&&w},t);return r.createElement("label",Object.assign({style:o,className:z,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},this.getDataAttr(f)),r.createElement(G,Object.assign({},this.props,B,{mode:C,name:null!=g?g:T,isButtonRadio:w,isPureCardRadioGroup:I,onChange:this.onChange,ref:e=>{this.radioEntity=e},addonId:l&&N,extraId:u&&S,focusInner:V&&!D,onInputFocus:this.handleFocusVisible,onInputBlur:this.handleBlur})),l||u?r.createElement("div",{className:c([`${M}-content`,{[`${M}-isCardRadioGroup_content`]:k}])},l?r.createElement("span",{className:L,style:a,id:N,"x-semi-prop":"children"},l):null,u&&!w?r.createElement("div",{className:`${M}-extra`,id:S,"x-semi-prop":"extra"},u):null):null)}}V.contextType=_,V.propTypes={autoFocus:u.bool,checked:u.bool,defaultChecked:u.bool,value:u.any,style:u.object,className:u.string,disabled:u.bool,prefixCls:u.string,displayMode:u.oneOf(["vertical",""]),onChange:u.func,onMouseEnter:u.func,onMouseLeave:u.func,mode:u.oneOf(I),extra:u.node,addonStyle:u.object,addonClassName:u.string,type:u.oneOf([O,$,E,R]),"aria-label":u.string,preventScroll:u.bool},V.defaultProps={autoFocus:!1,defaultChecked:!1,value:void 0,style:void 0,onMouseEnter:h,onMouseLeave:h,mode:"",type:"default"},V.elementType="Radio";class F extends l{constructor(e){super(e),this.onChange=e=>{this.foundation.handleChange(e)},this.getFormatName=()=>this.props.name||"default",this.state={value:e.value||e.defaultValue},this.foundation=new j(this.adapter)}componentDidMount(){this.foundation.init()}componentDidUpdate(e){"number"==typeof e.value&&isNaN(e.value)&&"number"==typeof this.props.value&&isNaN(this.props.value)||e.value!==this.props.value&&this.foundation.handlePropValueChange(this.props.value)}componentWillUnmount(){this.foundation.destroy()}get adapter(){return Object.assign(Object.assign({},super.adapter),{setValue:e=>{this.setState({value:e})},getProps:()=>this.props,isInProps:e=>Boolean(e in this.props),notifyChange:e=>{this.props.onChange&&this.props.onChange(e)}})}render(){const e=this.props,{children:t,options:a,mode:s,prefixCls:o,className:n,style:i,direction:d,type:l,buttonSize:u,id:h}=e,p=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(a[s[o]]=e[s[o]])}return a}(e,["children","options","mode","prefixCls","className","style","direction","type","buttonSize","id"]),b=l===$,g=l===R,f=l===E||g,m=l===O,y=o||C.PREFIX,v=c(n,{[y]:!0,[`${y}-wrapper`]:!0,[`${y}-${d}`]:d&&!b,[`${y}-${d}-default`]:d&&m,[`${y}-${d}-card`]:d&&f,[`${y}-buttonRadio`]:b}),x=this.state.value;let k;return a?k=(a||[]).map(((e,t)=>"string"==typeof e?r.createElement(V,{key:t,disabled:this.props.disabled,value:e},e):r.createElement(V,{key:t,disabled:e.disabled||this.props.disabled,value:e.value,extra:e.extra,className:e.className,style:e.style,addonId:e.addonId,addonStyle:e.addonStyle,addonClassName:e.addonClassName,extraId:e.extraId},e.label))):t&&(k=r.Children.map(t,((e,t)=>r.isValidElement(e)?r.cloneElement(e,{key:t}):null))),r.createElement("div",Object.assign({className:v,style:i,id:h,"aria-label":this.props["aria-label"],"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],"aria-required":this.props["aria-required"]},this.getDataAttr(p)),r.createElement(_.Provider,{value:{radioGroup:{onChange:this.onChange,value:x,disabled:this.props.disabled,name:this.getFormatName(),isButtonRadio:b,isCardRadio:f,isPureCardRadio:g,buttonSize:u,prefixCls:o},mode:s}},k))}}F.propTypes={defaultValue:u.any,disabled:u.bool,name:u.string,options:u.array,buttonSize:u.oneOf(P),type:u.oneOf([O,$,E,R]),value:u.any,onChange:u.func,children:u.node,prefixCls:u.string,className:u.string,style:u.object,direction:u.oneOf(x),mode:u.oneOf(I),"aria-label":u.string,"aria-describedby":u.string,"aria-errormessage":u.string,"aria-invalid":u.bool,"aria-labelledby":u.string,"aria-required":u.bool,id:u.string},F.defaultProps={disabled:!1,onChange:h,direction:k,mode:"",type:O,buttonSize:"middle"};class B extends V{}B.Group=F;export{F as R,y as _,B as a,V as b};
