function ode(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in i)){const r=Object.getOwnPropertyDescriptor(n,s);r&&Object.defineProperty(i,s,r.get?r:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();var Hg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xe(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function VY(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var s=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:function(){return i[n]}})}),t}var UY={exports:{}},lE={},WY={exports:{}},jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H1=Symbol.for("react.element"),lde=Symbol.for("react.portal"),cde=Symbol.for("react.fragment"),ude=Symbol.for("react.strict_mode"),hde=Symbol.for("react.profiler"),dde=Symbol.for("react.provider"),pde=Symbol.for("react.context"),fde=Symbol.for("react.forward_ref"),gde=Symbol.for("react.suspense"),mde=Symbol.for("react.memo"),yde=Symbol.for("react.lazy"),w$=Symbol.iterator;function _de(i){return i===null||typeof i!="object"?null:(i=w$&&i[w$]||i["@@iterator"],typeof i=="function"?i:null)}var GY={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},KY=Object.assign,XY={};function Wy(i,e,t){this.props=i,this.context=e,this.refs=XY,this.updater=t||GY}Wy.prototype.isReactComponent={};Wy.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};Wy.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function YY(){}YY.prototype=Wy.prototype;function DB(i,e,t){this.props=i,this.context=e,this.refs=XY,this.updater=t||GY}var FB=DB.prototype=new YY;FB.constructor=DB;KY(FB,Wy.prototype);FB.isPureReactComponent=!0;var A$=Array.isArray,qY=Object.prototype.hasOwnProperty,BB={current:null},ZY={key:!0,ref:!0,__self:!0,__source:!0};function JY(i,e,t){var n,s={},r=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(r=""+e.key),e)qY.call(e,n)&&!ZY.hasOwnProperty(n)&&(s[n]=e[n]);var o=arguments.length-2;if(o===1)s.children=t;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(i&&i.defaultProps)for(n in o=i.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:H1,type:i,key:r,ref:a,props:s,_owner:BB.current}}function vde(i,e){return{$$typeof:H1,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function jB(i){return typeof i=="object"&&i!==null&&i.$$typeof===H1}function bde(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(t){return e[t]})}var k$=/\/+/g;function _2(i,e){return typeof i=="object"&&i!==null&&i.key!=null?bde(""+i.key):e.toString(36)}function EC(i,e,t,n,s){var r=typeof i;(r==="undefined"||r==="boolean")&&(i=null);var a=!1;if(i===null)a=!0;else switch(r){case"string":case"number":a=!0;break;case"object":switch(i.$$typeof){case H1:case lde:a=!0}}if(a)return a=i,s=s(a),i=n===""?"."+_2(a,0):n,A$(s)?(t="",i!=null&&(t=i.replace(k$,"$&/")+"/"),EC(s,e,t,"",function(c){return c})):s!=null&&(jB(s)&&(s=vde(s,t+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(k$,"$&/")+"/")+i)),e.push(s)),1;if(a=0,n=n===""?".":n+":",A$(i))for(var o=0;o<i.length;o++){r=i[o];var l=n+_2(r,o);a+=EC(r,e,t,l,s)}else if(l=_de(i),typeof l=="function")for(i=l.call(i),o=0;!(r=i.next()).done;)r=r.value,l=n+_2(r,o++),a+=EC(r,e,t,l,s);else if(r==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function iS(i,e,t){if(i==null)return i;var n=[],s=0;return EC(i,n,"","",function(r){return e.call(t,r,s++)}),n}function xde(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(t){(i._status===0||i._status===-1)&&(i._status=1,i._result=t)},function(t){(i._status===0||i._status===-1)&&(i._status=2,i._result=t)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var Ar={current:null},PC={transition:null},Sde={ReactCurrentDispatcher:Ar,ReactCurrentBatchConfig:PC,ReactCurrentOwner:BB};function QY(){throw Error("act(...) is not supported in production builds of React.")}jt.Children={map:iS,forEach:function(i,e,t){iS(i,function(){e.apply(this,arguments)},t)},count:function(i){var e=0;return iS(i,function(){e++}),e},toArray:function(i){return iS(i,function(e){return e})||[]},only:function(i){if(!jB(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};jt.Component=Wy;jt.Fragment=cde;jt.Profiler=hde;jt.PureComponent=DB;jt.StrictMode=ude;jt.Suspense=gde;jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sde;jt.act=QY;jt.cloneElement=function(i,e,t){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var n=KY({},i.props),s=i.key,r=i.ref,a=i._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,a=BB.current),e.key!==void 0&&(s=""+e.key),i.type&&i.type.defaultProps)var o=i.type.defaultProps;for(l in e)qY.call(e,l)&&!ZY.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=t;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:H1,type:i.type,key:s,ref:r,props:n,_owner:a}};jt.createContext=function(i){return i={$$typeof:pde,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:dde,_context:i},i.Consumer=i};jt.createElement=JY;jt.createFactory=function(i){var e=JY.bind(null,i);return e.type=i,e};jt.createRef=function(){return{current:null}};jt.forwardRef=function(i){return{$$typeof:fde,render:i}};jt.isValidElement=jB;jt.lazy=function(i){return{$$typeof:yde,_payload:{_status:-1,_result:i},_init:xde}};jt.memo=function(i,e){return{$$typeof:mde,type:i,compare:e===void 0?null:e}};jt.startTransition=function(i){var e=PC.transition;PC.transition={};try{i()}finally{PC.transition=e}};jt.unstable_act=QY;jt.useCallback=function(i,e){return Ar.current.useCallback(i,e)};jt.useContext=function(i){return Ar.current.useContext(i)};jt.useDebugValue=function(){};jt.useDeferredValue=function(i){return Ar.current.useDeferredValue(i)};jt.useEffect=function(i,e){return Ar.current.useEffect(i,e)};jt.useId=function(){return Ar.current.useId()};jt.useImperativeHandle=function(i,e,t){return Ar.current.useImperativeHandle(i,e,t)};jt.useInsertionEffect=function(i,e){return Ar.current.useInsertionEffect(i,e)};jt.useLayoutEffect=function(i,e){return Ar.current.useLayoutEffect(i,e)};jt.useMemo=function(i,e){return Ar.current.useMemo(i,e)};jt.useReducer=function(i,e,t){return Ar.current.useReducer(i,e,t)};jt.useRef=function(i){return Ar.current.useRef(i)};jt.useState=function(i){return Ar.current.useState(i)};jt.useSyncExternalStore=function(i,e,t){return Ar.current.useSyncExternalStore(i,e,t)};jt.useTransition=function(){return Ar.current.useTransition()};jt.version="18.3.1";WY.exports=jt;var H=WY.exports;const k=Xe(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cde=H,wde=Symbol.for("react.element"),Ade=Symbol.for("react.fragment"),kde=Object.prototype.hasOwnProperty,Tde=Cde.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ede={key:!0,ref:!0,__self:!0,__source:!0};function eq(i,e,t){var n,s={},r=null,a=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)kde.call(e,n)&&!Ede.hasOwnProperty(n)&&(s[n]=e[n]);if(i&&i.defaultProps)for(n in e=i.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:wde,type:i,key:r,ref:a,props:s,_owner:Tde.current}}lE.Fragment=Ade;lE.jsx=eq;lE.jsxs=eq;UY.exports=lE;var N=UY.exports;const Pde=Xe(N),Ode=ode({__proto__:null,default:Pde},[N]);var tq={exports:{}},Ia={},iq={exports:{}},nq={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e($,V){var L=$.length;$.push(V);e:for(;0<L;){var Y=L-1>>>1,ae=$[Y];if(0<s(ae,V))$[Y]=V,$[L]=ae,L=Y;else break e}}function t($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var V=$[0],L=$.pop();if(L!==V){$[0]=L;e:for(var Y=0,ae=$.length,W=ae>>>1;Y<W;){var ce=2*(Y+1)-1,he=$[ce],le=ce+1,de=$[le];if(0>s(he,L))le<ae&&0>s(de,he)?($[Y]=de,$[le]=L,Y=le):($[Y]=he,$[ce]=L,Y=ce);else if(le<ae&&0>s(de,L))$[Y]=de,$[le]=L,Y=le;else break e}}return V}function s($,V){var L=$.sortIndex-V.sortIndex;return L!==0?L:$.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();i.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,h=null,d=3,p=!1,f=!1,g=!1,m=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x($){for(var V=t(c);V!==null;){if(V.callback===null)n(c);else if(V.startTime<=$)n(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=t(c)}}function S($){if(g=!1,x($),!f)if(t(l)!==null)f=!0,D(C);else{var V=t(c);V!==null&&z(S,V.startTime-$)}}function C($,V){f=!1,g&&(g=!1,y(T),T=-1),p=!0;var L=d;try{for(x(V),h=t(l);h!==null&&(!(h.expirationTime>V)||$&&!O());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,d=h.priorityLevel;var ae=Y(h.expirationTime<=V);V=i.unstable_now(),typeof ae=="function"?h.callback=ae:h===t(l)&&n(l),x(V)}else n(l);h=t(l)}if(h!==null)var W=!0;else{var ce=t(c);ce!==null&&z(S,ce.startTime-V),W=!1}return W}finally{h=null,d=L,p=!1}}var w=!1,A=null,T=-1,E=5,P=-1;function O(){return!(i.unstable_now()-P<E)}function M(){if(A!==null){var $=i.unstable_now();P=$;var V=!0;try{V=A(!0,$)}finally{V?R():(w=!1,A=null)}}else w=!1}var R;if(typeof b=="function")R=function(){b(M)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,I=j.port2;j.port1.onmessage=M,R=function(){I.postMessage(null)}}else R=function(){m(M,0)};function D($){A=$,w||(w=!0,R())}function z($,V){T=m(function(){$(i.unstable_now())},V)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function($){$.callback=null},i.unstable_continueExecution=function(){f||p||(f=!0,D(C))},i.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<$?Math.floor(1e3/$):5},i.unstable_getCurrentPriorityLevel=function(){return d},i.unstable_getFirstCallbackNode=function(){return t(l)},i.unstable_next=function($){switch(d){case 1:case 2:case 3:var V=3;break;default:V=d}var L=d;d=V;try{return $()}finally{d=L}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function($,V){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var L=d;d=$;try{return V()}finally{d=L}},i.unstable_scheduleCallback=function($,V,L){var Y=i.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?Y+L:Y):L=Y,$){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=L+ae,$={id:u++,callback:V,priorityLevel:$,startTime:L,expirationTime:ae,sortIndex:-1},L>Y?($.sortIndex=L,e(c,$),t(l)===null&&$===t(c)&&(g?(y(T),T=-1):g=!0,z(S,L-Y))):($.sortIndex=ae,e(l,$),f||p||(f=!0,D(C))),$},i.unstable_shouldYield=O,i.unstable_wrapCallback=function($){var V=d;return function(){var L=d;d=V;try{return $.apply(this,arguments)}finally{d=L}}}})(nq);iq.exports=nq;var Mde=iq.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ide=H,ka=Mde;function Se(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sq=new Set,sb={};function Bf(i,e){ey(i,e),ey(i+"Capture",e)}function ey(i,e){for(sb[i]=e,i=0;i<e.length;i++)sq.add(e[i])}var Au=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oR=Object.prototype.hasOwnProperty,Rde=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,T$={},E$={};function Lde(i){return oR.call(E$,i)?!0:oR.call(T$,i)?!1:Rde.test(i)?E$[i]=!0:(T$[i]=!0,!1)}function Dde(i,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function Fde(i,e,t,n){if(e===null||typeof e>"u"||Dde(i,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kr(i,e,t,n,s,r,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=i,this.type=e,this.sanitizeURL=r,this.removeEmptyString=a}var Is={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){Is[i]=new kr(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];Is[e]=new kr(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){Is[i]=new kr(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){Is[i]=new kr(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){Is[i]=new kr(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){Is[i]=new kr(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){Is[i]=new kr(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){Is[i]=new kr(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){Is[i]=new kr(i,5,!1,i.toLowerCase(),null,!1,!1)});var NB=/[\-:]([a-z])/g;function $B(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(NB,$B);Is[e]=new kr(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(NB,$B);Is[e]=new kr(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(NB,$B);Is[e]=new kr(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){Is[i]=new kr(i,1,!1,i.toLowerCase(),null,!1,!1)});Is.xlinkHref=new kr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){Is[i]=new kr(i,1,!1,i.toLowerCase(),null,!0,!0)});function zB(i,e,t,n){var s=Is.hasOwnProperty(e)?Is[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Fde(e,t,s,n)&&(t=null),n||s===null?Lde(e)&&(t===null?i.removeAttribute(e):i.setAttribute(e,""+t)):s.mustUseProperty?i[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,n=s.attributeNamespace,t===null?i.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,n?i.setAttributeNS(n,e,t):i.setAttribute(e,t))))}var ju=Ide.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nS=Symbol.for("react.element"),Vg=Symbol.for("react.portal"),Ug=Symbol.for("react.fragment"),HB=Symbol.for("react.strict_mode"),lR=Symbol.for("react.profiler"),rq=Symbol.for("react.provider"),aq=Symbol.for("react.context"),VB=Symbol.for("react.forward_ref"),cR=Symbol.for("react.suspense"),uR=Symbol.for("react.suspense_list"),UB=Symbol.for("react.memo"),ch=Symbol.for("react.lazy"),oq=Symbol.for("react.offscreen"),P$=Symbol.iterator;function B0(i){return i===null||typeof i!="object"?null:(i=P$&&i[P$]||i["@@iterator"],typeof i=="function"?i:null)}var vn=Object.assign,v2;function A_(i){if(v2===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);v2=e&&e[1]||""}return`
`+v2+i}var b2=!1;function x2(i,e){if(!i||b2)return"";b2=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(i,[],e)}else{try{e.call()}catch(c){n=c}i.call(e.prototype)}else{try{throw Error()}catch(c){n=c}i()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),r=n.stack.split(`
`),a=s.length-1,o=r.length-1;1<=a&&0<=o&&s[a]!==r[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==r[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==r[o]){var l=`
`+s[a].replace(" at new "," at ");return i.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",i.displayName)),l}while(1<=a&&0<=o);break}}}finally{b2=!1,Error.prepareStackTrace=t}return(i=i?i.displayName||i.name:"")?A_(i):""}function Bde(i){switch(i.tag){case 5:return A_(i.type);case 16:return A_("Lazy");case 13:return A_("Suspense");case 19:return A_("SuspenseList");case 0:case 2:case 15:return i=x2(i.type,!1),i;case 11:return i=x2(i.type.render,!1),i;case 1:return i=x2(i.type,!0),i;default:return""}}function hR(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Ug:return"Fragment";case Vg:return"Portal";case lR:return"Profiler";case HB:return"StrictMode";case cR:return"Suspense";case uR:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case aq:return(i.displayName||"Context")+".Consumer";case rq:return(i._context.displayName||"Context")+".Provider";case VB:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case UB:return e=i.displayName||null,e!==null?e:hR(i.type)||"Memo";case ch:e=i._payload,i=i._init;try{return hR(i(e))}catch{}}return null}function jde(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hR(e);case 8:return e===HB?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vd(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function lq(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Nde(i){var e=lq(i)?"checked":"value",t=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),n=""+i[e];if(!i.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,r=t.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,r.call(this,a)}}),Object.defineProperty(i,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function sS(i){i._valueTracker||(i._valueTracker=Nde(i))}function cq(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return i&&(n=lq(i)?i.checked?"true":"false":i.value),i=n,i!==t?(e.setValue(i),!0):!1}function _w(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function dR(i,e){var t=e.checked;return vn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??i._wrapperState.initialChecked})}function O$(i,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=vd(e.value!=null?e.value:t),i._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function uq(i,e){e=e.checked,e!=null&&zB(i,"checked",e,!1)}function pR(i,e){uq(i,e);var t=vd(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&i.value===""||i.value!=t)&&(i.value=""+t):i.value!==""+t&&(i.value=""+t);else if(n==="submit"||n==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?fR(i,e.type,t):e.hasOwnProperty("defaultValue")&&fR(i,e.type,vd(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function M$(i,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,t||e===i.value||(i.value=e),i.defaultValue=e}t=i.name,t!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,t!==""&&(i.name=t)}function fR(i,e,t){(e!=="number"||_w(i.ownerDocument)!==i)&&(t==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+t&&(i.defaultValue=""+t))}var k_=Array.isArray;function Im(i,e,t,n){if(i=i.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<i.length;t++)s=e.hasOwnProperty("$"+i[t].value),i[t].selected!==s&&(i[t].selected=s),s&&n&&(i[t].defaultSelected=!0)}else{for(t=""+vd(t),e=null,s=0;s<i.length;s++){if(i[s].value===t){i[s].selected=!0,n&&(i[s].defaultSelected=!0);return}e!==null||i[s].disabled||(e=i[s])}e!==null&&(e.selected=!0)}}function gR(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Se(91));return vn({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function I$(i,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Se(92));if(k_(t)){if(1<t.length)throw Error(Se(93));t=t[0]}e=t}e==null&&(e=""),t=e}i._wrapperState={initialValue:vd(t)}}function hq(i,e){var t=vd(e.value),n=vd(e.defaultValue);t!=null&&(t=""+t,t!==i.value&&(i.value=t),e.defaultValue==null&&i.defaultValue!==t&&(i.defaultValue=t)),n!=null&&(i.defaultValue=""+n)}function R$(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function dq(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mR(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?dq(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var rS,pq=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,s){MSApp.execUnsafeLocalFunction(function(){return i(e,t,n,s)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(rS=rS||document.createElement("div"),rS.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rS.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function rb(i,e){if(e){var t=i.firstChild;if(t&&t===i.lastChild&&t.nodeType===3){t.nodeValue=e;return}}i.textContent=e}var W_={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$de=["Webkit","ms","Moz","O"];Object.keys(W_).forEach(function(i){$de.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),W_[e]=W_[i]})});function fq(i,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||W_.hasOwnProperty(i)&&W_[i]?(""+e).trim():e+"px"}function gq(i,e){i=i.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,s=fq(t,e[t],n);t==="float"&&(t="cssFloat"),n?i.setProperty(t,s):i[t]=s}}var zde=vn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yR(i,e){if(e){if(zde[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Se(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Se(62))}}function _R(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vR=null;function WB(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var bR=null,Rm=null,Lm=null;function L$(i){if(i=W1(i)){if(typeof bR!="function")throw Error(Se(280));var e=i.stateNode;e&&(e=pE(e),bR(i.stateNode,i.type,e))}}function mq(i){Rm?Lm?Lm.push(i):Lm=[i]:Rm=i}function yq(){if(Rm){var i=Rm,e=Lm;if(Lm=Rm=null,L$(i),e)for(i=0;i<e.length;i++)L$(e[i])}}function _q(i,e){return i(e)}function vq(){}var S2=!1;function bq(i,e,t){if(S2)return i(e,t);S2=!0;try{return _q(i,e,t)}finally{S2=!1,(Rm!==null||Lm!==null)&&(vq(),yq())}}function ab(i,e){var t=i.stateNode;if(t===null)return null;var n=pE(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(i=i.type,n=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!n;break e;default:i=!1}if(i)return null;if(t&&typeof t!="function")throw Error(Se(231,e,typeof t));return t}var xR=!1;if(Au)try{var j0={};Object.defineProperty(j0,"passive",{get:function(){xR=!0}}),window.addEventListener("test",j0,j0),window.removeEventListener("test",j0,j0)}catch{xR=!1}function Hde(i,e,t,n,s,r,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var G_=!1,vw=null,bw=!1,SR=null,Vde={onError:function(i){G_=!0,vw=i}};function Ude(i,e,t,n,s,r,a,o,l){G_=!1,vw=null,Hde.apply(Vde,arguments)}function Wde(i,e,t,n,s,r,a,o,l){if(Ude.apply(this,arguments),G_){if(G_){var c=vw;G_=!1,vw=null}else throw Error(Se(198));bw||(bw=!0,SR=c)}}function jf(i){var e=i,t=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(t=e.return),i=e.return;while(i)}return e.tag===3?t:null}function xq(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function D$(i){if(jf(i)!==i)throw Error(Se(188))}function Gde(i){var e=i.alternate;if(!e){if(e=jf(i),e===null)throw Error(Se(188));return e!==i?null:i}for(var t=i,n=e;;){var s=t.return;if(s===null)break;var r=s.alternate;if(r===null){if(n=s.return,n!==null){t=n;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===t)return D$(s),i;if(r===n)return D$(s),e;r=r.sibling}throw Error(Se(188))}if(t.return!==n.return)t=s,n=r;else{for(var a=!1,o=s.child;o;){if(o===t){a=!0,t=s,n=r;break}if(o===n){a=!0,n=s,t=r;break}o=o.sibling}if(!a){for(o=r.child;o;){if(o===t){a=!0,t=r,n=s;break}if(o===n){a=!0,n=r,t=s;break}o=o.sibling}if(!a)throw Error(Se(189))}}if(t.alternate!==n)throw Error(Se(190))}if(t.tag!==3)throw Error(Se(188));return t.stateNode.current===t?i:e}function Sq(i){return i=Gde(i),i!==null?Cq(i):null}function Cq(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=Cq(i);if(e!==null)return e;i=i.sibling}return null}var wq=ka.unstable_scheduleCallback,F$=ka.unstable_cancelCallback,Kde=ka.unstable_shouldYield,Xde=ka.unstable_requestPaint,Fn=ka.unstable_now,Yde=ka.unstable_getCurrentPriorityLevel,GB=ka.unstable_ImmediatePriority,Aq=ka.unstable_UserBlockingPriority,xw=ka.unstable_NormalPriority,qde=ka.unstable_LowPriority,kq=ka.unstable_IdlePriority,cE=null,dc=null;function Zde(i){if(dc&&typeof dc.onCommitFiberRoot=="function")try{dc.onCommitFiberRoot(cE,i,void 0,(i.current.flags&128)===128)}catch{}}var gl=Math.clz32?Math.clz32:epe,Jde=Math.log,Qde=Math.LN2;function epe(i){return i>>>=0,i===0?32:31-(Jde(i)/Qde|0)|0}var aS=64,oS=4194304;function T_(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Sw(i,e){var t=i.pendingLanes;if(t===0)return 0;var n=0,s=i.suspendedLanes,r=i.pingedLanes,a=t&268435455;if(a!==0){var o=a&~s;o!==0?n=T_(o):(r&=a,r!==0&&(n=T_(r)))}else a=t&~s,a!==0?n=T_(a):r!==0&&(n=T_(r));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(n&4&&(n|=t&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=n;0<e;)t=31-gl(e),s=1<<t,n|=i[t],e&=~s;return n}function tpe(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ipe(i,e){for(var t=i.suspendedLanes,n=i.pingedLanes,s=i.expirationTimes,r=i.pendingLanes;0<r;){var a=31-gl(r),o=1<<a,l=s[a];l===-1?(!(o&t)||o&n)&&(s[a]=tpe(o,e)):l<=e&&(i.expiredLanes|=o),r&=~o}}function CR(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Tq(){var i=aS;return aS<<=1,!(aS&4194240)&&(aS=64),i}function C2(i){for(var e=[],t=0;31>t;t++)e.push(i);return e}function V1(i,e,t){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-gl(e),i[e]=t}function npe(i,e){var t=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var n=i.eventTimes;for(i=i.expirationTimes;0<t;){var s=31-gl(t),r=1<<s;e[s]=0,n[s]=-1,i[s]=-1,t&=~r}}function KB(i,e){var t=i.entangledLanes|=e;for(i=i.entanglements;t;){var n=31-gl(t),s=1<<n;s&e|i[n]&e&&(i[n]|=e),t&=~s}}var Ci=0;function Eq(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Pq,XB,Oq,Mq,Iq,wR=!1,lS=[],zh=null,Hh=null,Vh=null,ob=new Map,lb=new Map,yh=[],spe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function B$(i,e){switch(i){case"focusin":case"focusout":zh=null;break;case"dragenter":case"dragleave":Hh=null;break;case"mouseover":case"mouseout":Vh=null;break;case"pointerover":case"pointerout":ob.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":lb.delete(e.pointerId)}}function N0(i,e,t,n,s,r){return i===null||i.nativeEvent!==r?(i={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:r,targetContainers:[s]},e!==null&&(e=W1(e),e!==null&&XB(e)),i):(i.eventSystemFlags|=n,e=i.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),i)}function rpe(i,e,t,n,s){switch(e){case"focusin":return zh=N0(zh,i,e,t,n,s),!0;case"dragenter":return Hh=N0(Hh,i,e,t,n,s),!0;case"mouseover":return Vh=N0(Vh,i,e,t,n,s),!0;case"pointerover":var r=s.pointerId;return ob.set(r,N0(ob.get(r)||null,i,e,t,n,s)),!0;case"gotpointercapture":return r=s.pointerId,lb.set(r,N0(lb.get(r)||null,i,e,t,n,s)),!0}return!1}function Rq(i){var e=vp(i.target);if(e!==null){var t=jf(e);if(t!==null){if(e=t.tag,e===13){if(e=xq(t),e!==null){i.blockedOn=e,Iq(i.priority,function(){Oq(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){i.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}i.blockedOn=null}function OC(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var t=AR(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(t===null){t=i.nativeEvent;var n=new t.constructor(t.type,t);vR=n,t.target.dispatchEvent(n),vR=null}else return e=W1(t),e!==null&&XB(e),i.blockedOn=t,!1;e.shift()}return!0}function j$(i,e,t){OC(i)&&t.delete(e)}function ape(){wR=!1,zh!==null&&OC(zh)&&(zh=null),Hh!==null&&OC(Hh)&&(Hh=null),Vh!==null&&OC(Vh)&&(Vh=null),ob.forEach(j$),lb.forEach(j$)}function $0(i,e){i.blockedOn===e&&(i.blockedOn=null,wR||(wR=!0,ka.unstable_scheduleCallback(ka.unstable_NormalPriority,ape)))}function cb(i){function e(s){return $0(s,i)}if(0<lS.length){$0(lS[0],i);for(var t=1;t<lS.length;t++){var n=lS[t];n.blockedOn===i&&(n.blockedOn=null)}}for(zh!==null&&$0(zh,i),Hh!==null&&$0(Hh,i),Vh!==null&&$0(Vh,i),ob.forEach(e),lb.forEach(e),t=0;t<yh.length;t++)n=yh[t],n.blockedOn===i&&(n.blockedOn=null);for(;0<yh.length&&(t=yh[0],t.blockedOn===null);)Rq(t),t.blockedOn===null&&yh.shift()}var Dm=ju.ReactCurrentBatchConfig,Cw=!0;function ope(i,e,t,n){var s=Ci,r=Dm.transition;Dm.transition=null;try{Ci=1,YB(i,e,t,n)}finally{Ci=s,Dm.transition=r}}function lpe(i,e,t,n){var s=Ci,r=Dm.transition;Dm.transition=null;try{Ci=4,YB(i,e,t,n)}finally{Ci=s,Dm.transition=r}}function YB(i,e,t,n){if(Cw){var s=AR(i,e,t,n);if(s===null)R2(i,e,n,ww,t),B$(i,n);else if(rpe(s,i,e,t,n))n.stopPropagation();else if(B$(i,n),e&4&&-1<spe.indexOf(i)){for(;s!==null;){var r=W1(s);if(r!==null&&Pq(r),r=AR(i,e,t,n),r===null&&R2(i,e,n,ww,t),r===s)break;s=r}s!==null&&n.stopPropagation()}else R2(i,e,n,null,t)}}var ww=null;function AR(i,e,t,n){if(ww=null,i=WB(n),i=vp(i),i!==null)if(e=jf(i),e===null)i=null;else if(t=e.tag,t===13){if(i=xq(e),i!==null)return i;i=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return ww=i,null}function Lq(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yde()){case GB:return 1;case Aq:return 4;case xw:case qde:return 16;case kq:return 536870912;default:return 16}default:return 16}}var wh=null,qB=null,MC=null;function Dq(){if(MC)return MC;var i,e=qB,t=e.length,n,s="value"in wh?wh.value:wh.textContent,r=s.length;for(i=0;i<t&&e[i]===s[i];i++);var a=t-i;for(n=1;n<=a&&e[t-n]===s[r-n];n++);return MC=s.slice(i,1<n?1-n:void 0)}function IC(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function cS(){return!0}function N$(){return!1}function Ra(i){function e(t,n,s,r,a){this._reactName=t,this._targetInst=s,this.type=n,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var o in i)i.hasOwnProperty(o)&&(t=i[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?cS:N$,this.isPropagationStopped=N$,this}return vn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=cS)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=cS)},persist:function(){},isPersistent:cS}),e}var Gy={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ZB=Ra(Gy),U1=vn({},Gy,{view:0,detail:0}),cpe=Ra(U1),w2,A2,z0,uE=vn({},U1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:JB,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==z0&&(z0&&i.type==="mousemove"?(w2=i.screenX-z0.screenX,A2=i.screenY-z0.screenY):A2=w2=0,z0=i),w2)},movementY:function(i){return"movementY"in i?i.movementY:A2}}),$$=Ra(uE),upe=vn({},uE,{dataTransfer:0}),hpe=Ra(upe),dpe=vn({},U1,{relatedTarget:0}),k2=Ra(dpe),ppe=vn({},Gy,{animationName:0,elapsedTime:0,pseudoElement:0}),fpe=Ra(ppe),gpe=vn({},Gy,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),mpe=Ra(gpe),ype=vn({},Gy,{data:0}),z$=Ra(ype),_pe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vpe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bpe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xpe(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=bpe[i])?!!e[i]:!1}function JB(){return xpe}var Spe=vn({},U1,{key:function(i){if(i.key){var e=_pe[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=IC(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?vpe[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:JB,charCode:function(i){return i.type==="keypress"?IC(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?IC(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Cpe=Ra(Spe),wpe=vn({},uE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),H$=Ra(wpe),Ape=vn({},U1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:JB}),kpe=Ra(Ape),Tpe=vn({},Gy,{propertyName:0,elapsedTime:0,pseudoElement:0}),Epe=Ra(Tpe),Ppe=vn({},uE,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ope=Ra(Ppe),Mpe=[9,13,27,32],QB=Au&&"CompositionEvent"in window,K_=null;Au&&"documentMode"in document&&(K_=document.documentMode);var Ipe=Au&&"TextEvent"in window&&!K_,Fq=Au&&(!QB||K_&&8<K_&&11>=K_),V$=" ",U$=!1;function Bq(i,e){switch(i){case"keyup":return Mpe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jq(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Wg=!1;function Rpe(i,e){switch(i){case"compositionend":return jq(e);case"keypress":return e.which!==32?null:(U$=!0,V$);case"textInput":return i=e.data,i===V$&&U$?null:i;default:return null}}function Lpe(i,e){if(Wg)return i==="compositionend"||!QB&&Bq(i,e)?(i=Dq(),MC=qB=wh=null,Wg=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fq&&e.locale!=="ko"?null:e.data;default:return null}}var Dpe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function W$(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!Dpe[i.type]:e==="textarea"}function Nq(i,e,t,n){mq(n),e=Aw(e,"onChange"),0<e.length&&(t=new ZB("onChange","change",null,t,n),i.push({event:t,listeners:e}))}var X_=null,ub=null;function Fpe(i){qq(i,0)}function hE(i){var e=Xg(i);if(cq(e))return i}function Bpe(i,e){if(i==="change")return e}var $q=!1;if(Au){var T2;if(Au){var E2="oninput"in document;if(!E2){var G$=document.createElement("div");G$.setAttribute("oninput","return;"),E2=typeof G$.oninput=="function"}T2=E2}else T2=!1;$q=T2&&(!document.documentMode||9<document.documentMode)}function K$(){X_&&(X_.detachEvent("onpropertychange",zq),ub=X_=null)}function zq(i){if(i.propertyName==="value"&&hE(ub)){var e=[];Nq(e,ub,i,WB(i)),bq(Fpe,e)}}function jpe(i,e,t){i==="focusin"?(K$(),X_=e,ub=t,X_.attachEvent("onpropertychange",zq)):i==="focusout"&&K$()}function Npe(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return hE(ub)}function $pe(i,e){if(i==="click")return hE(e)}function zpe(i,e){if(i==="input"||i==="change")return hE(e)}function Hpe(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var xl=typeof Object.is=="function"?Object.is:Hpe;function hb(i,e){if(xl(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var t=Object.keys(i),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var s=t[n];if(!oR.call(e,s)||!xl(i[s],e[s]))return!1}return!0}function X$(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Y$(i,e){var t=X$(i);i=0;for(var n;t;){if(t.nodeType===3){if(n=i+t.textContent.length,i<=e&&n>=e)return{node:t,offset:e-i};i=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=X$(t)}}function Hq(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?Hq(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function Vq(){for(var i=window,e=_w();e instanceof i.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)i=e.contentWindow;else break;e=_w(i.document)}return e}function e3(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function Vpe(i){var e=Vq(),t=i.focusedElem,n=i.selectionRange;if(e!==t&&t&&t.ownerDocument&&Hq(t.ownerDocument.documentElement,t)){if(n!==null&&e3(t)){if(e=n.start,i=n.end,i===void 0&&(i=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(i,t.value.length);else if(i=(e=t.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var s=t.textContent.length,r=Math.min(n.start,s);n=n.end===void 0?r:Math.min(n.end,s),!i.extend&&r>n&&(s=n,n=r,r=s),s=Y$(t,r);var a=Y$(t,n);s&&a&&(i.rangeCount!==1||i.anchorNode!==s.node||i.anchorOffset!==s.offset||i.focusNode!==a.node||i.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),i.removeAllRanges(),r>n?(i.addRange(e),i.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),i.addRange(e)))}}for(e=[],i=t;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)i=e[t],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Upe=Au&&"documentMode"in document&&11>=document.documentMode,Gg=null,kR=null,Y_=null,TR=!1;function q$(i,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;TR||Gg==null||Gg!==_w(n)||(n=Gg,"selectionStart"in n&&e3(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Y_&&hb(Y_,n)||(Y_=n,n=Aw(kR,"onSelect"),0<n.length&&(e=new ZB("onSelect","select",null,e,t),i.push({event:e,listeners:n}),e.target=Gg)))}function uS(i,e){var t={};return t[i.toLowerCase()]=e.toLowerCase(),t["Webkit"+i]="webkit"+e,t["Moz"+i]="moz"+e,t}var Kg={animationend:uS("Animation","AnimationEnd"),animationiteration:uS("Animation","AnimationIteration"),animationstart:uS("Animation","AnimationStart"),transitionend:uS("Transition","TransitionEnd")},P2={},Uq={};Au&&(Uq=document.createElement("div").style,"AnimationEvent"in window||(delete Kg.animationend.animation,delete Kg.animationiteration.animation,delete Kg.animationstart.animation),"TransitionEvent"in window||delete Kg.transitionend.transition);function dE(i){if(P2[i])return P2[i];if(!Kg[i])return i;var e=Kg[i],t;for(t in e)if(e.hasOwnProperty(t)&&t in Uq)return P2[i]=e[t];return i}var Wq=dE("animationend"),Gq=dE("animationiteration"),Kq=dE("animationstart"),Xq=dE("transitionend"),Yq=new Map,Z$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dd(i,e){Yq.set(i,e),Bf(e,[i])}for(var O2=0;O2<Z$.length;O2++){var M2=Z$[O2],Wpe=M2.toLowerCase(),Gpe=M2[0].toUpperCase()+M2.slice(1);Dd(Wpe,"on"+Gpe)}Dd(Wq,"onAnimationEnd");Dd(Gq,"onAnimationIteration");Dd(Kq,"onAnimationStart");Dd("dblclick","onDoubleClick");Dd("focusin","onFocus");Dd("focusout","onBlur");Dd(Xq,"onTransitionEnd");ey("onMouseEnter",["mouseout","mouseover"]);ey("onMouseLeave",["mouseout","mouseover"]);ey("onPointerEnter",["pointerout","pointerover"]);ey("onPointerLeave",["pointerout","pointerover"]);Bf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var E_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kpe=new Set("cancel close invalid load scroll toggle".split(" ").concat(E_));function J$(i,e,t){var n=i.type||"unknown-event";i.currentTarget=t,Wde(n,e,void 0,i),i.currentTarget=null}function qq(i,e){e=(e&4)!==0;for(var t=0;t<i.length;t++){var n=i[t],s=n.event;n=n.listeners;e:{var r=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==r&&s.isPropagationStopped())break e;J$(s,o,c),r=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==r&&s.isPropagationStopped())break e;J$(s,o,c),r=l}}}if(bw)throw i=SR,bw=!1,SR=null,i}function Ki(i,e){var t=e[IR];t===void 0&&(t=e[IR]=new Set);var n=i+"__bubble";t.has(n)||(Zq(e,i,2,!1),t.add(n))}function I2(i,e,t){var n=0;e&&(n|=4),Zq(t,i,n,e)}var hS="_reactListening"+Math.random().toString(36).slice(2);function db(i){if(!i[hS]){i[hS]=!0,sq.forEach(function(t){t!=="selectionchange"&&(Kpe.has(t)||I2(t,!1,i),I2(t,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[hS]||(e[hS]=!0,I2("selectionchange",!1,e))}}function Zq(i,e,t,n){switch(Lq(e)){case 1:var s=ope;break;case 4:s=lpe;break;default:s=YB}t=s.bind(null,e,t,i),s=void 0,!xR||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?i.addEventListener(e,t,{capture:!0,passive:s}):i.addEventListener(e,t,!0):s!==void 0?i.addEventListener(e,t,{passive:s}):i.addEventListener(e,t,!1)}function R2(i,e,t,n,s){var r=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=vp(o),a===null)return;if(l=a.tag,l===5||l===6){n=r=a;continue e}o=o.parentNode}}n=n.return}bq(function(){var c=r,u=WB(t),h=[];e:{var d=Yq.get(i);if(d!==void 0){var p=ZB,f=i;switch(i){case"keypress":if(IC(t)===0)break e;case"keydown":case"keyup":p=Cpe;break;case"focusin":f="focus",p=k2;break;case"focusout":f="blur",p=k2;break;case"beforeblur":case"afterblur":p=k2;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=$$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=hpe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=kpe;break;case Wq:case Gq:case Kq:p=fpe;break;case Xq:p=Epe;break;case"scroll":p=cpe;break;case"wheel":p=Ope;break;case"copy":case"cut":case"paste":p=mpe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=H$}var g=(e&4)!==0,m=!g&&i==="scroll",y=g?d!==null?d+"Capture":null:d;g=[];for(var b=c,x;b!==null;){x=b;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,y!==null&&(S=ab(b,y),S!=null&&g.push(pb(b,S,x)))),m)break;b=b.return}0<g.length&&(d=new p(d,f,null,t,u),h.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=i==="mouseover"||i==="pointerover",p=i==="mouseout"||i==="pointerout",d&&t!==vR&&(f=t.relatedTarget||t.fromElement)&&(vp(f)||f[ku]))break e;if((p||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,p?(f=t.relatedTarget||t.toElement,p=c,f=f?vp(f):null,f!==null&&(m=jf(f),f!==m||f.tag!==5&&f.tag!==6)&&(f=null)):(p=null,f=c),p!==f)){if(g=$$,S="onMouseLeave",y="onMouseEnter",b="mouse",(i==="pointerout"||i==="pointerover")&&(g=H$,S="onPointerLeave",y="onPointerEnter",b="pointer"),m=p==null?d:Xg(p),x=f==null?d:Xg(f),d=new g(S,b+"leave",p,t,u),d.target=m,d.relatedTarget=x,S=null,vp(u)===c&&(g=new g(y,b+"enter",f,t,u),g.target=x,g.relatedTarget=m,S=g),m=S,p&&f)t:{for(g=p,y=f,b=0,x=g;x;x=lg(x))b++;for(x=0,S=y;S;S=lg(S))x++;for(;0<b-x;)g=lg(g),b--;for(;0<x-b;)y=lg(y),x--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=lg(g),y=lg(y)}g=null}else g=null;p!==null&&Q$(h,d,p,g,!1),f!==null&&m!==null&&Q$(h,m,f,g,!0)}}e:{if(d=c?Xg(c):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var C=Bpe;else if(W$(d))if($q)C=zpe;else{C=Npe;var w=jpe}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(C=$pe);if(C&&(C=C(i,c))){Nq(h,C,t,u);break e}w&&w(i,d,c),i==="focusout"&&(w=d._wrapperState)&&w.controlled&&d.type==="number"&&fR(d,"number",d.value)}switch(w=c?Xg(c):window,i){case"focusin":(W$(w)||w.contentEditable==="true")&&(Gg=w,kR=c,Y_=null);break;case"focusout":Y_=kR=Gg=null;break;case"mousedown":TR=!0;break;case"contextmenu":case"mouseup":case"dragend":TR=!1,q$(h,t,u);break;case"selectionchange":if(Upe)break;case"keydown":case"keyup":q$(h,t,u)}var A;if(QB)e:{switch(i){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Wg?Bq(i,t)&&(T="onCompositionEnd"):i==="keydown"&&t.keyCode===229&&(T="onCompositionStart");T&&(Fq&&t.locale!=="ko"&&(Wg||T!=="onCompositionStart"?T==="onCompositionEnd"&&Wg&&(A=Dq()):(wh=u,qB="value"in wh?wh.value:wh.textContent,Wg=!0)),w=Aw(c,T),0<w.length&&(T=new z$(T,i,null,t,u),h.push({event:T,listeners:w}),A?T.data=A:(A=jq(t),A!==null&&(T.data=A)))),(A=Ipe?Rpe(i,t):Lpe(i,t))&&(c=Aw(c,"onBeforeInput"),0<c.length&&(u=new z$("onBeforeInput","beforeinput",null,t,u),h.push({event:u,listeners:c}),u.data=A))}qq(h,e)})}function pb(i,e,t){return{instance:i,listener:e,currentTarget:t}}function Aw(i,e){for(var t=e+"Capture",n=[];i!==null;){var s=i,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=ab(i,t),r!=null&&n.unshift(pb(i,r,s)),r=ab(i,e),r!=null&&n.push(pb(i,r,s))),i=i.return}return n}function lg(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Q$(i,e,t,n,s){for(var r=e._reactName,a=[];t!==null&&t!==n;){var o=t,l=o.alternate,c=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&c!==null&&(o=c,s?(l=ab(t,r),l!=null&&a.unshift(pb(t,l,o))):s||(l=ab(t,r),l!=null&&a.push(pb(t,l,o)))),t=t.return}a.length!==0&&i.push({event:e,listeners:a})}var Xpe=/\r\n?/g,Ype=/\u0000|\uFFFD/g;function ez(i){return(typeof i=="string"?i:""+i).replace(Xpe,`
`).replace(Ype,"")}function dS(i,e,t){if(e=ez(e),ez(i)!==e&&t)throw Error(Se(425))}function kw(){}var ER=null,PR=null;function OR(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var MR=typeof setTimeout=="function"?setTimeout:void 0,qpe=typeof clearTimeout=="function"?clearTimeout:void 0,tz=typeof Promise=="function"?Promise:void 0,Zpe=typeof queueMicrotask=="function"?queueMicrotask:typeof tz<"u"?function(i){return tz.resolve(null).then(i).catch(Jpe)}:MR;function Jpe(i){setTimeout(function(){throw i})}function L2(i,e){var t=e,n=0;do{var s=t.nextSibling;if(i.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(n===0){i.removeChild(s),cb(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=s}while(t);cb(e)}function Uh(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function iz(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return i;e--}else t==="/$"&&e++}i=i.previousSibling}return null}var Ky=Math.random().toString(36).slice(2),ql="__reactFiber$"+Ky,fb="__reactProps$"+Ky,ku="__reactContainer$"+Ky,IR="__reactEvents$"+Ky,Qpe="__reactListeners$"+Ky,efe="__reactHandles$"+Ky;function vp(i){var e=i[ql];if(e)return e;for(var t=i.parentNode;t;){if(e=t[ku]||t[ql]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(i=iz(i);i!==null;){if(t=i[ql])return t;i=iz(i)}return e}i=t,t=i.parentNode}return null}function W1(i){return i=i[ql]||i[ku],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Xg(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(Se(33))}function pE(i){return i[fb]||null}var RR=[],Yg=-1;function Fd(i){return{current:i}}function qi(i){0>Yg||(i.current=RR[Yg],RR[Yg]=null,Yg--)}function Hi(i,e){Yg++,RR[Yg]=i.current,i.current=e}var bd={},er=Fd(bd),Gr=Fd(!1),Qp=bd;function ty(i,e){var t=i.type.contextTypes;if(!t)return bd;var n=i.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in t)s[r]=e[r];return n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=s),s}function Kr(i){return i=i.childContextTypes,i!=null}function Tw(){qi(Gr),qi(er)}function nz(i,e,t){if(er.current!==bd)throw Error(Se(168));Hi(er,e),Hi(Gr,t)}function Jq(i,e,t){var n=i.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(Se(108,jde(i)||"Unknown",s));return vn({},t,n)}function Ew(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||bd,Qp=er.current,Hi(er,i),Hi(Gr,Gr.current),!0}function sz(i,e,t){var n=i.stateNode;if(!n)throw Error(Se(169));t?(i=Jq(i,e,Qp),n.__reactInternalMemoizedMergedChildContext=i,qi(Gr),qi(er),Hi(er,i)):qi(Gr),Hi(Gr,t)}var Qc=null,fE=!1,D2=!1;function Qq(i){Qc===null?Qc=[i]:Qc.push(i)}function tfe(i){fE=!0,Qq(i)}function Bd(){if(!D2&&Qc!==null){D2=!0;var i=0,e=Ci;try{var t=Qc;for(Ci=1;i<t.length;i++){var n=t[i];do n=n(!0);while(n!==null)}Qc=null,fE=!1}catch(s){throw Qc!==null&&(Qc=Qc.slice(i+1)),wq(GB,Bd),s}finally{Ci=e,D2=!1}}return null}var qg=[],Zg=0,Pw=null,Ow=0,Qa=[],eo=0,ef=null,lu=1,cu="";function op(i,e){qg[Zg++]=Ow,qg[Zg++]=Pw,Pw=i,Ow=e}function eZ(i,e,t){Qa[eo++]=lu,Qa[eo++]=cu,Qa[eo++]=ef,ef=i;var n=lu;i=cu;var s=32-gl(n)-1;n&=~(1<<s),t+=1;var r=32-gl(e)+s;if(30<r){var a=s-s%5;r=(n&(1<<a)-1).toString(32),n>>=a,s-=a,lu=1<<32-gl(e)+s|t<<s|n,cu=r+i}else lu=1<<r|t<<s|n,cu=i}function t3(i){i.return!==null&&(op(i,1),eZ(i,1,0))}function i3(i){for(;i===Pw;)Pw=qg[--Zg],qg[Zg]=null,Ow=qg[--Zg],qg[Zg]=null;for(;i===ef;)ef=Qa[--eo],Qa[eo]=null,cu=Qa[--eo],Qa[eo]=null,lu=Qa[--eo],Qa[eo]=null}var xa=null,va=null,nn=!1,el=null;function tZ(i,e){var t=po(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=i,e=i.deletions,e===null?(i.deletions=[t],i.flags|=16):e.push(t)}function rz(i,e){switch(i.tag){case 5:var t=i.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,xa=i,va=Uh(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,xa=i,va=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=ef!==null?{id:lu,overflow:cu}:null,i.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=po(18,null,null,0),t.stateNode=e,t.return=i,i.child=t,xa=i,va=null,!0):!1;default:return!1}}function LR(i){return(i.mode&1)!==0&&(i.flags&128)===0}function DR(i){if(nn){var e=va;if(e){var t=e;if(!rz(i,e)){if(LR(i))throw Error(Se(418));e=Uh(t.nextSibling);var n=xa;e&&rz(i,e)?tZ(n,t):(i.flags=i.flags&-4097|2,nn=!1,xa=i)}}else{if(LR(i))throw Error(Se(418));i.flags=i.flags&-4097|2,nn=!1,xa=i}}}function az(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;xa=i}function pS(i){if(i!==xa)return!1;if(!nn)return az(i),nn=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!OR(i.type,i.memoizedProps)),e&&(e=va)){if(LR(i))throw iZ(),Error(Se(418));for(;e;)tZ(i,e),e=Uh(e.nextSibling)}if(az(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Se(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="/$"){if(e===0){va=Uh(i.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}i=i.nextSibling}va=null}}else va=xa?Uh(i.stateNode.nextSibling):null;return!0}function iZ(){for(var i=va;i;)i=Uh(i.nextSibling)}function iy(){va=xa=null,nn=!1}function n3(i){el===null?el=[i]:el.push(i)}var ife=ju.ReactCurrentBatchConfig;function H0(i,e,t){if(i=t.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Se(309));var n=t.stateNode}if(!n)throw Error(Se(147,i));var s=n,r=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(a){var o=s.refs;a===null?delete o[r]:o[r]=a},e._stringRef=r,e)}if(typeof i!="string")throw Error(Se(284));if(!t._owner)throw Error(Se(290,i))}return i}function fS(i,e){throw i=Object.prototype.toString.call(e),Error(Se(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function oz(i){var e=i._init;return e(i._payload)}function nZ(i){function e(y,b){if(i){var x=y.deletions;x===null?(y.deletions=[b],y.flags|=16):x.push(b)}}function t(y,b){if(!i)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function n(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function s(y,b){return y=Xh(y,b),y.index=0,y.sibling=null,y}function r(y,b,x){return y.index=x,i?(x=y.alternate,x!==null?(x=x.index,x<b?(y.flags|=2,b):x):(y.flags|=2,b)):(y.flags|=1048576,b)}function a(y){return i&&y.alternate===null&&(y.flags|=2),y}function o(y,b,x,S){return b===null||b.tag!==6?(b=H2(x,y.mode,S),b.return=y,b):(b=s(b,x),b.return=y,b)}function l(y,b,x,S){var C=x.type;return C===Ug?u(y,b,x.props.children,S,x.key):b!==null&&(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ch&&oz(C)===b.type)?(S=s(b,x.props),S.ref=H0(y,b,x),S.return=y,S):(S=NC(x.type,x.key,x.props,null,y.mode,S),S.ref=H0(y,b,x),S.return=y,S)}function c(y,b,x,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==x.containerInfo||b.stateNode.implementation!==x.implementation?(b=V2(x,y.mode,S),b.return=y,b):(b=s(b,x.children||[]),b.return=y,b)}function u(y,b,x,S,C){return b===null||b.tag!==7?(b=Bp(x,y.mode,S,C),b.return=y,b):(b=s(b,x),b.return=y,b)}function h(y,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return b=H2(""+b,y.mode,x),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case nS:return x=NC(b.type,b.key,b.props,null,y.mode,x),x.ref=H0(y,null,b),x.return=y,x;case Vg:return b=V2(b,y.mode,x),b.return=y,b;case ch:var S=b._init;return h(y,S(b._payload),x)}if(k_(b)||B0(b))return b=Bp(b,y.mode,x,null),b.return=y,b;fS(y,b)}return null}function d(y,b,x,S){var C=b!==null?b.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return C!==null?null:o(y,b,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case nS:return x.key===C?l(y,b,x,S):null;case Vg:return x.key===C?c(y,b,x,S):null;case ch:return C=x._init,d(y,b,C(x._payload),S)}if(k_(x)||B0(x))return C!==null?null:u(y,b,x,S,null);fS(y,x)}return null}function p(y,b,x,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(x)||null,o(b,y,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case nS:return y=y.get(S.key===null?x:S.key)||null,l(b,y,S,C);case Vg:return y=y.get(S.key===null?x:S.key)||null,c(b,y,S,C);case ch:var w=S._init;return p(y,b,x,w(S._payload),C)}if(k_(S)||B0(S))return y=y.get(x)||null,u(b,y,S,C,null);fS(b,S)}return null}function f(y,b,x,S){for(var C=null,w=null,A=b,T=b=0,E=null;A!==null&&T<x.length;T++){A.index>T?(E=A,A=null):E=A.sibling;var P=d(y,A,x[T],S);if(P===null){A===null&&(A=E);break}i&&A&&P.alternate===null&&e(y,A),b=r(P,b,T),w===null?C=P:w.sibling=P,w=P,A=E}if(T===x.length)return t(y,A),nn&&op(y,T),C;if(A===null){for(;T<x.length;T++)A=h(y,x[T],S),A!==null&&(b=r(A,b,T),w===null?C=A:w.sibling=A,w=A);return nn&&op(y,T),C}for(A=n(y,A);T<x.length;T++)E=p(A,y,T,x[T],S),E!==null&&(i&&E.alternate!==null&&A.delete(E.key===null?T:E.key),b=r(E,b,T),w===null?C=E:w.sibling=E,w=E);return i&&A.forEach(function(O){return e(y,O)}),nn&&op(y,T),C}function g(y,b,x,S){var C=B0(x);if(typeof C!="function")throw Error(Se(150));if(x=C.call(x),x==null)throw Error(Se(151));for(var w=C=null,A=b,T=b=0,E=null,P=x.next();A!==null&&!P.done;T++,P=x.next()){A.index>T?(E=A,A=null):E=A.sibling;var O=d(y,A,P.value,S);if(O===null){A===null&&(A=E);break}i&&A&&O.alternate===null&&e(y,A),b=r(O,b,T),w===null?C=O:w.sibling=O,w=O,A=E}if(P.done)return t(y,A),nn&&op(y,T),C;if(A===null){for(;!P.done;T++,P=x.next())P=h(y,P.value,S),P!==null&&(b=r(P,b,T),w===null?C=P:w.sibling=P,w=P);return nn&&op(y,T),C}for(A=n(y,A);!P.done;T++,P=x.next())P=p(A,y,T,P.value,S),P!==null&&(i&&P.alternate!==null&&A.delete(P.key===null?T:P.key),b=r(P,b,T),w===null?C=P:w.sibling=P,w=P);return i&&A.forEach(function(M){return e(y,M)}),nn&&op(y,T),C}function m(y,b,x,S){if(typeof x=="object"&&x!==null&&x.type===Ug&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case nS:e:{for(var C=x.key,w=b;w!==null;){if(w.key===C){if(C=x.type,C===Ug){if(w.tag===7){t(y,w.sibling),b=s(w,x.props.children),b.return=y,y=b;break e}}else if(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ch&&oz(C)===w.type){t(y,w.sibling),b=s(w,x.props),b.ref=H0(y,w,x),b.return=y,y=b;break e}t(y,w);break}else e(y,w);w=w.sibling}x.type===Ug?(b=Bp(x.props.children,y.mode,S,x.key),b.return=y,y=b):(S=NC(x.type,x.key,x.props,null,y.mode,S),S.ref=H0(y,b,x),S.return=y,y=S)}return a(y);case Vg:e:{for(w=x.key;b!==null;){if(b.key===w)if(b.tag===4&&b.stateNode.containerInfo===x.containerInfo&&b.stateNode.implementation===x.implementation){t(y,b.sibling),b=s(b,x.children||[]),b.return=y,y=b;break e}else{t(y,b);break}else e(y,b);b=b.sibling}b=V2(x,y.mode,S),b.return=y,y=b}return a(y);case ch:return w=x._init,m(y,b,w(x._payload),S)}if(k_(x))return f(y,b,x,S);if(B0(x))return g(y,b,x,S);fS(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,b!==null&&b.tag===6?(t(y,b.sibling),b=s(b,x),b.return=y,y=b):(t(y,b),b=H2(x,y.mode,S),b.return=y,y=b),a(y)):t(y,b)}return m}var ny=nZ(!0),sZ=nZ(!1),Mw=Fd(null),Iw=null,Jg=null,s3=null;function r3(){s3=Jg=Iw=null}function a3(i){var e=Mw.current;qi(Mw),i._currentValue=e}function FR(i,e,t){for(;i!==null;){var n=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),i===t)break;i=i.return}}function Fm(i,e){Iw=i,s3=Jg=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&($r=!0),i.firstContext=null)}function Co(i){var e=i._currentValue;if(s3!==i)if(i={context:i,memoizedValue:e,next:null},Jg===null){if(Iw===null)throw Error(Se(308));Jg=i,Iw.dependencies={lanes:0,firstContext:i}}else Jg=Jg.next=i;return e}var bp=null;function o3(i){bp===null?bp=[i]:bp.push(i)}function rZ(i,e,t,n){var s=e.interleaved;return s===null?(t.next=t,o3(e)):(t.next=s.next,s.next=t),e.interleaved=t,Tu(i,n)}function Tu(i,e){i.lanes|=e;var t=i.alternate;for(t!==null&&(t.lanes|=e),t=i,i=i.return;i!==null;)i.childLanes|=e,t=i.alternate,t!==null&&(t.childLanes|=e),t=i,i=i.return;return t.tag===3?t.stateNode:null}var uh=!1;function l3(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aZ(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function gu(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function Wh(i,e,t){var n=i.updateQueue;if(n===null)return null;if(n=n.shared,ni&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Tu(i,t)}return s=n.interleaved,s===null?(e.next=e,o3(n)):(e.next=s.next,s.next=e),n.interleaved=e,Tu(i,t)}function RC(i,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,KB(i,t)}}function lz(i,e){var t=i.updateQueue,n=i.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var s=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?s=r=a:r=r.next=a,t=t.next}while(t!==null);r===null?s=r=e:r=r.next=e}else s=r=e;t={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:n.shared,effects:n.effects},i.updateQueue=t;return}i=t.lastBaseUpdate,i===null?t.firstBaseUpdate=e:i.next=e,t.lastBaseUpdate=e}function Rw(i,e,t,n){var s=i.updateQueue;uh=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?r=c:a.next=c,a=l;var u=i.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(r!==null){var h=s.baseState;a=0,u=c=l=null,o=r;do{var d=o.lane,p=o.eventTime;if((n&d)===d){u!==null&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=i,g=o;switch(d=e,p=t,g.tag){case 1:if(f=g.payload,typeof f=="function"){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=g.payload,d=typeof f=="function"?f.call(p,h,d):f,d==null)break e;h=vn({},h,d);break e;case 2:uh=!0}}o.callback!==null&&o.lane!==0&&(i.flags|=64,d=s.effects,d===null?s.effects=[o]:d.push(o))}else p={eventTime:p,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=p,l=h):u=u.next=p,a|=d;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;d=o,o=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);nf|=a,i.lanes=a,i.memoizedState=h}}function cz(i,e,t){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var n=i[e],s=n.callback;if(s!==null){if(n.callback=null,n=t,typeof s!="function")throw Error(Se(191,s));s.call(n)}}}var G1={},pc=Fd(G1),gb=Fd(G1),mb=Fd(G1);function xp(i){if(i===G1)throw Error(Se(174));return i}function c3(i,e){switch(Hi(mb,e),Hi(gb,i),Hi(pc,G1),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mR(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=mR(e,i)}qi(pc),Hi(pc,e)}function sy(){qi(pc),qi(gb),qi(mb)}function oZ(i){xp(mb.current);var e=xp(pc.current),t=mR(e,i.type);e!==t&&(Hi(gb,i),Hi(pc,t))}function u3(i){gb.current===i&&(qi(pc),qi(gb))}var gn=Fd(0);function Lw(i){for(var e=i;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var F2=[];function h3(){for(var i=0;i<F2.length;i++)F2[i]._workInProgressVersionPrimary=null;F2.length=0}var LC=ju.ReactCurrentDispatcher,B2=ju.ReactCurrentBatchConfig,tf=0,yn=null,ts=null,hs=null,Dw=!1,q_=!1,yb=0,nfe=0;function Fs(){throw Error(Se(321))}function d3(i,e){if(e===null)return!1;for(var t=0;t<e.length&&t<i.length;t++)if(!xl(i[t],e[t]))return!1;return!0}function p3(i,e,t,n,s,r){if(tf=r,yn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,LC.current=i===null||i.memoizedState===null?ofe:lfe,i=t(n,s),q_){r=0;do{if(q_=!1,yb=0,25<=r)throw Error(Se(301));r+=1,hs=ts=null,e.updateQueue=null,LC.current=cfe,i=t(n,s)}while(q_)}if(LC.current=Fw,e=ts!==null&&ts.next!==null,tf=0,hs=ts=yn=null,Dw=!1,e)throw Error(Se(300));return i}function f3(){var i=yb!==0;return yb=0,i}function Vl(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hs===null?yn.memoizedState=hs=i:hs=hs.next=i,hs}function wo(){if(ts===null){var i=yn.alternate;i=i!==null?i.memoizedState:null}else i=ts.next;var e=hs===null?yn.memoizedState:hs.next;if(e!==null)hs=e,ts=i;else{if(i===null)throw Error(Se(310));ts=i,i={memoizedState:ts.memoizedState,baseState:ts.baseState,baseQueue:ts.baseQueue,queue:ts.queue,next:null},hs===null?yn.memoizedState=hs=i:hs=hs.next=i}return hs}function _b(i,e){return typeof e=="function"?e(i):e}function j2(i){var e=wo(),t=e.queue;if(t===null)throw Error(Se(311));t.lastRenderedReducer=i;var n=ts,s=n.baseQueue,r=t.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}n.baseQueue=s=r,t.pending=null}if(s!==null){r=s.next,n=n.baseState;var o=a=null,l=null,c=r;do{var u=c.lane;if((tf&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:i(n,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=h,a=n):l=l.next=h,yn.lanes|=u,nf|=u}c=c.next}while(c!==null&&c!==r);l===null?a=n:l.next=o,xl(n,e.memoizedState)||($r=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,t.lastRenderedState=n}if(i=t.interleaved,i!==null){s=i;do r=s.lane,yn.lanes|=r,nf|=r,s=s.next;while(s!==i)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function N2(i){var e=wo(),t=e.queue;if(t===null)throw Error(Se(311));t.lastRenderedReducer=i;var n=t.dispatch,s=t.pending,r=e.memoizedState;if(s!==null){t.pending=null;var a=s=s.next;do r=i(r,a.action),a=a.next;while(a!==s);xl(r,e.memoizedState)||($r=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,n]}function lZ(){}function cZ(i,e){var t=yn,n=wo(),s=e(),r=!xl(n.memoizedState,s);if(r&&(n.memoizedState=s,$r=!0),n=n.queue,g3(dZ.bind(null,t,n,i),[i]),n.getSnapshot!==e||r||hs!==null&&hs.memoizedState.tag&1){if(t.flags|=2048,vb(9,hZ.bind(null,t,n,s,e),void 0,null),gs===null)throw Error(Se(349));tf&30||uZ(t,e,s)}return s}function uZ(i,e,t){i.flags|=16384,i={getSnapshot:e,value:t},e=yn.updateQueue,e===null?(e={lastEffect:null,stores:null},yn.updateQueue=e,e.stores=[i]):(t=e.stores,t===null?e.stores=[i]:t.push(i))}function hZ(i,e,t,n){e.value=t,e.getSnapshot=n,pZ(e)&&fZ(i)}function dZ(i,e,t){return t(function(){pZ(e)&&fZ(i)})}function pZ(i){var e=i.getSnapshot;i=i.value;try{var t=e();return!xl(i,t)}catch{return!0}}function fZ(i){var e=Tu(i,1);e!==null&&ml(e,i,1,-1)}function uz(i){var e=Vl();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_b,lastRenderedState:i},e.queue=i,i=i.dispatch=afe.bind(null,yn,i),[e.memoizedState,i]}function vb(i,e,t,n){return i={tag:i,create:e,destroy:t,deps:n,next:null},e=yn.updateQueue,e===null?(e={lastEffect:null,stores:null},yn.updateQueue=e,e.lastEffect=i.next=i):(t=e.lastEffect,t===null?e.lastEffect=i.next=i:(n=t.next,t.next=i,i.next=n,e.lastEffect=i)),i}function gZ(){return wo().memoizedState}function DC(i,e,t,n){var s=Vl();yn.flags|=i,s.memoizedState=vb(1|e,t,void 0,n===void 0?null:n)}function gE(i,e,t,n){var s=wo();n=n===void 0?null:n;var r=void 0;if(ts!==null){var a=ts.memoizedState;if(r=a.destroy,n!==null&&d3(n,a.deps)){s.memoizedState=vb(e,t,r,n);return}}yn.flags|=i,s.memoizedState=vb(1|e,t,r,n)}function hz(i,e){return DC(8390656,8,i,e)}function g3(i,e){return gE(2048,8,i,e)}function mZ(i,e){return gE(4,2,i,e)}function yZ(i,e){return gE(4,4,i,e)}function _Z(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function vZ(i,e,t){return t=t!=null?t.concat([i]):null,gE(4,4,_Z.bind(null,e,i),t)}function m3(){}function bZ(i,e){var t=wo();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&d3(e,n[1])?n[0]:(t.memoizedState=[i,e],i)}function xZ(i,e){var t=wo();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&d3(e,n[1])?n[0]:(i=i(),t.memoizedState=[i,e],i)}function SZ(i,e,t){return tf&21?(xl(t,e)||(t=Tq(),yn.lanes|=t,nf|=t,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,$r=!0),i.memoizedState=t)}function sfe(i,e){var t=Ci;Ci=t!==0&&4>t?t:4,i(!0);var n=B2.transition;B2.transition={};try{i(!1),e()}finally{Ci=t,B2.transition=n}}function CZ(){return wo().memoizedState}function rfe(i,e,t){var n=Kh(i);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},wZ(i))AZ(e,t);else if(t=rZ(i,e,t,n),t!==null){var s=Sr();ml(t,i,n,s),kZ(t,e,n)}}function afe(i,e,t){var n=Kh(i),s={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(wZ(i))AZ(e,s);else{var r=i.alternate;if(i.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,o=r(a,t);if(s.hasEagerState=!0,s.eagerState=o,xl(o,a)){var l=e.interleaved;l===null?(s.next=s,o3(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=rZ(i,e,s,n),t!==null&&(s=Sr(),ml(t,i,n,s),kZ(t,e,n))}}function wZ(i){var e=i.alternate;return i===yn||e!==null&&e===yn}function AZ(i,e){q_=Dw=!0;var t=i.pending;t===null?e.next=e:(e.next=t.next,t.next=e),i.pending=e}function kZ(i,e,t){if(t&4194240){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,KB(i,t)}}var Fw={readContext:Co,useCallback:Fs,useContext:Fs,useEffect:Fs,useImperativeHandle:Fs,useInsertionEffect:Fs,useLayoutEffect:Fs,useMemo:Fs,useReducer:Fs,useRef:Fs,useState:Fs,useDebugValue:Fs,useDeferredValue:Fs,useTransition:Fs,useMutableSource:Fs,useSyncExternalStore:Fs,useId:Fs,unstable_isNewReconciler:!1},ofe={readContext:Co,useCallback:function(i,e){return Vl().memoizedState=[i,e===void 0?null:e],i},useContext:Co,useEffect:hz,useImperativeHandle:function(i,e,t){return t=t!=null?t.concat([i]):null,DC(4194308,4,_Z.bind(null,e,i),t)},useLayoutEffect:function(i,e){return DC(4194308,4,i,e)},useInsertionEffect:function(i,e){return DC(4,2,i,e)},useMemo:function(i,e){var t=Vl();return e=e===void 0?null:e,i=i(),t.memoizedState=[i,e],i},useReducer:function(i,e,t){var n=Vl();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},n.queue=i,i=i.dispatch=rfe.bind(null,yn,i),[n.memoizedState,i]},useRef:function(i){var e=Vl();return i={current:i},e.memoizedState=i},useState:uz,useDebugValue:m3,useDeferredValue:function(i){return Vl().memoizedState=i},useTransition:function(){var i=uz(!1),e=i[0];return i=sfe.bind(null,i[1]),Vl().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,t){var n=yn,s=Vl();if(nn){if(t===void 0)throw Error(Se(407));t=t()}else{if(t=e(),gs===null)throw Error(Se(349));tf&30||uZ(n,e,t)}s.memoizedState=t;var r={value:t,getSnapshot:e};return s.queue=r,hz(dZ.bind(null,n,r,i),[i]),n.flags|=2048,vb(9,hZ.bind(null,n,r,t,e),void 0,null),t},useId:function(){var i=Vl(),e=gs.identifierPrefix;if(nn){var t=cu,n=lu;t=(n&~(1<<32-gl(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=yb++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=nfe++,e=":"+e+"r"+t.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},lfe={readContext:Co,useCallback:bZ,useContext:Co,useEffect:g3,useImperativeHandle:vZ,useInsertionEffect:mZ,useLayoutEffect:yZ,useMemo:xZ,useReducer:j2,useRef:gZ,useState:function(){return j2(_b)},useDebugValue:m3,useDeferredValue:function(i){var e=wo();return SZ(e,ts.memoizedState,i)},useTransition:function(){var i=j2(_b)[0],e=wo().memoizedState;return[i,e]},useMutableSource:lZ,useSyncExternalStore:cZ,useId:CZ,unstable_isNewReconciler:!1},cfe={readContext:Co,useCallback:bZ,useContext:Co,useEffect:g3,useImperativeHandle:vZ,useInsertionEffect:mZ,useLayoutEffect:yZ,useMemo:xZ,useReducer:N2,useRef:gZ,useState:function(){return N2(_b)},useDebugValue:m3,useDeferredValue:function(i){var e=wo();return ts===null?e.memoizedState=i:SZ(e,ts.memoizedState,i)},useTransition:function(){var i=N2(_b)[0],e=wo().memoizedState;return[i,e]},useMutableSource:lZ,useSyncExternalStore:cZ,useId:CZ,unstable_isNewReconciler:!1};function qo(i,e){if(i&&i.defaultProps){e=vn({},e),i=i.defaultProps;for(var t in i)e[t]===void 0&&(e[t]=i[t]);return e}return e}function BR(i,e,t,n){e=i.memoizedState,t=t(n,e),t=t==null?e:vn({},e,t),i.memoizedState=t,i.lanes===0&&(i.updateQueue.baseState=t)}var mE={isMounted:function(i){return(i=i._reactInternals)?jf(i)===i:!1},enqueueSetState:function(i,e,t){i=i._reactInternals;var n=Sr(),s=Kh(i),r=gu(n,s);r.payload=e,t!=null&&(r.callback=t),e=Wh(i,r,s),e!==null&&(ml(e,i,s,n),RC(e,i,s))},enqueueReplaceState:function(i,e,t){i=i._reactInternals;var n=Sr(),s=Kh(i),r=gu(n,s);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=Wh(i,r,s),e!==null&&(ml(e,i,s,n),RC(e,i,s))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var t=Sr(),n=Kh(i),s=gu(t,n);s.tag=2,e!=null&&(s.callback=e),e=Wh(i,s,n),e!==null&&(ml(e,i,n,t),RC(e,i,n))}};function dz(i,e,t,n,s,r,a){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(n,r,a):e.prototype&&e.prototype.isPureReactComponent?!hb(t,n)||!hb(s,r):!0}function TZ(i,e,t){var n=!1,s=bd,r=e.contextType;return typeof r=="object"&&r!==null?r=Co(r):(s=Kr(e)?Qp:er.current,n=e.contextTypes,r=(n=n!=null)?ty(i,s):bd),e=new e(t,r),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=mE,i.stateNode=e,e._reactInternals=i,n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=r),e}function pz(i,e,t,n){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==i&&mE.enqueueReplaceState(e,e.state,null)}function jR(i,e,t,n){var s=i.stateNode;s.props=t,s.state=i.memoizedState,s.refs={},l3(i);var r=e.contextType;typeof r=="object"&&r!==null?s.context=Co(r):(r=Kr(e)?Qp:er.current,s.context=ty(i,r)),s.state=i.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(BR(i,e,r,t),s.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&mE.enqueueReplaceState(s,s.state,null),Rw(i,t,s,n),s.state=i.memoizedState),typeof s.componentDidMount=="function"&&(i.flags|=4194308)}function ry(i,e){try{var t="",n=e;do t+=Bde(n),n=n.return;while(n);var s=t}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:i,source:e,stack:s,digest:null}}function $2(i,e,t){return{value:i,source:null,stack:t??null,digest:e??null}}function NR(i,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var ufe=typeof WeakMap=="function"?WeakMap:Map;function EZ(i,e,t){t=gu(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){jw||(jw=!0,YR=n),NR(i,e)},t}function PZ(i,e,t){t=gu(-1,t),t.tag=3;var n=i.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;t.payload=function(){return n(s)},t.callback=function(){NR(i,e)}}var r=i.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){NR(i,e),typeof n!="function"&&(Gh===null?Gh=new Set([this]):Gh.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function fz(i,e,t){var n=i.pingCache;if(n===null){n=i.pingCache=new ufe;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(t)||(s.add(t),i=wfe.bind(null,i,e,t),e.then(i,i))}function gz(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function mz(i,e,t,n,s){return i.mode&1?(i.flags|=65536,i.lanes=s,i):(i===e?i.flags|=65536:(i.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=gu(-1,1),e.tag=2,Wh(t,e,1))),t.lanes|=1),i)}var hfe=ju.ReactCurrentOwner,$r=!1;function mr(i,e,t,n){e.child=i===null?sZ(e,null,t,n):ny(e,i.child,t,n)}function yz(i,e,t,n,s){t=t.render;var r=e.ref;return Fm(e,s),n=p3(i,e,t,n,r,s),t=f3(),i!==null&&!$r?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~s,Eu(i,e,s)):(nn&&t&&t3(e),e.flags|=1,mr(i,e,n,s),e.child)}function _z(i,e,t,n,s){if(i===null){var r=t.type;return typeof r=="function"&&!w3(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,OZ(i,e,r,n,s)):(i=NC(t.type,null,n,e,e.mode,s),i.ref=e.ref,i.return=e,e.child=i)}if(r=i.child,!(i.lanes&s)){var a=r.memoizedProps;if(t=t.compare,t=t!==null?t:hb,t(a,n)&&i.ref===e.ref)return Eu(i,e,s)}return e.flags|=1,i=Xh(r,n),i.ref=e.ref,i.return=e,e.child=i}function OZ(i,e,t,n,s){if(i!==null){var r=i.memoizedProps;if(hb(r,n)&&i.ref===e.ref)if($r=!1,e.pendingProps=n=r,(i.lanes&s)!==0)i.flags&131072&&($r=!0);else return e.lanes=i.lanes,Eu(i,e,s)}return $R(i,e,t,n,s)}function MZ(i,e,t){var n=e.pendingProps,s=n.children,r=i!==null?i.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Hi(em,pa),pa|=t;else{if(!(t&1073741824))return i=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,Hi(em,pa),pa|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=r!==null?r.baseLanes:t,Hi(em,pa),pa|=n}else r!==null?(n=r.baseLanes|t,e.memoizedState=null):n=t,Hi(em,pa),pa|=n;return mr(i,e,s,t),e.child}function IZ(i,e){var t=e.ref;(i===null&&t!==null||i!==null&&i.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function $R(i,e,t,n,s){var r=Kr(t)?Qp:er.current;return r=ty(e,r),Fm(e,s),t=p3(i,e,t,n,r,s),n=f3(),i!==null&&!$r?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~s,Eu(i,e,s)):(nn&&n&&t3(e),e.flags|=1,mr(i,e,t,s),e.child)}function vz(i,e,t,n,s){if(Kr(t)){var r=!0;Ew(e)}else r=!1;if(Fm(e,s),e.stateNode===null)FC(i,e),TZ(e,t,n),jR(e,t,n,s),n=!0;else if(i===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=t.contextType;typeof c=="object"&&c!==null?c=Co(c):(c=Kr(t)?Qp:er.current,c=ty(e,c));var u=t.getDerivedStateFromProps,h=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==c)&&pz(e,a,n,c),uh=!1;var d=e.memoizedState;a.state=d,Rw(e,n,a,s),l=e.memoizedState,o!==n||d!==l||Gr.current||uh?(typeof u=="function"&&(BR(e,t,u,n),l=e.memoizedState),(o=uh||dz(e,t,o,n,d,l,c))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=c,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,aZ(i,e),o=e.memoizedProps,c=e.type===e.elementType?o:qo(e.type,o),a.props=c,h=e.pendingProps,d=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=Co(l):(l=Kr(t)?Qp:er.current,l=ty(e,l));var p=t.getDerivedStateFromProps;(u=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||d!==l)&&pz(e,a,n,l),uh=!1,d=e.memoizedState,a.state=d,Rw(e,n,a,s);var f=e.memoizedState;o!==h||d!==f||Gr.current||uh?(typeof p=="function"&&(BR(e,t,p,n),f=e.memoizedState),(c=uh||dz(e,t,c,n,d,f,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,f,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,f,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===i.memoizedProps&&d===i.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===i.memoizedProps&&d===i.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=f),a.props=n,a.state=f,a.context=l,n=c):(typeof a.componentDidUpdate!="function"||o===i.memoizedProps&&d===i.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===i.memoizedProps&&d===i.memoizedState||(e.flags|=1024),n=!1)}return zR(i,e,t,n,r,s)}function zR(i,e,t,n,s,r){IZ(i,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&sz(e,t,!1),Eu(i,e,r);n=e.stateNode,hfe.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,i!==null&&a?(e.child=ny(e,i.child,null,r),e.child=ny(e,null,o,r)):mr(i,e,o,r),e.memoizedState=n.state,s&&sz(e,t,!0),e.child}function RZ(i){var e=i.stateNode;e.pendingContext?nz(i,e.pendingContext,e.pendingContext!==e.context):e.context&&nz(i,e.context,!1),c3(i,e.containerInfo)}function bz(i,e,t,n,s){return iy(),n3(s),e.flags|=256,mr(i,e,t,n),e.child}var HR={dehydrated:null,treeContext:null,retryLane:0};function VR(i){return{baseLanes:i,cachePool:null,transitions:null}}function LZ(i,e,t){var n=e.pendingProps,s=gn.current,r=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=i!==null&&i.memoizedState===null?!1:(s&2)!==0),o?(r=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(s|=1),Hi(gn,s&1),i===null)return DR(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,i=n.fallback,r?(n=e.mode,r=e.child,a={mode:"hidden",children:a},!(n&1)&&r!==null?(r.childLanes=0,r.pendingProps=a):r=vE(a,n,0,null),i=Bp(i,n,t,null),r.return=e,i.return=e,r.sibling=i,e.child=r,e.child.memoizedState=VR(t),e.memoizedState=HR,i):y3(e,a));if(s=i.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return dfe(i,e,a,n,o,s,t);if(r){r=n.fallback,a=e.mode,s=i.child,o=s.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Xh(s,l),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?r=Xh(o,r):(r=Bp(r,a,t,null),r.flags|=2),r.return=e,n.return=e,n.sibling=r,e.child=n,n=r,r=e.child,a=i.child.memoizedState,a=a===null?VR(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},r.memoizedState=a,r.childLanes=i.childLanes&~t,e.memoizedState=HR,n}return r=i.child,i=r.sibling,n=Xh(r,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,i!==null&&(t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)),e.child=n,e.memoizedState=null,n}function y3(i,e){return e=vE({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function gS(i,e,t,n){return n!==null&&n3(n),ny(e,i.child,null,t),i=y3(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function dfe(i,e,t,n,s,r,a){if(t)return e.flags&256?(e.flags&=-257,n=$2(Error(Se(422))),gS(i,e,a,n)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(r=n.fallback,s=e.mode,n=vE({mode:"visible",children:n.children},s,0,null),r=Bp(r,s,a,null),r.flags|=2,n.return=e,r.return=e,n.sibling=r,e.child=n,e.mode&1&&ny(e,i.child,null,a),e.child.memoizedState=VR(a),e.memoizedState=HR,r);if(!(e.mode&1))return gS(i,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,r=Error(Se(419)),n=$2(r,n,void 0),gS(i,e,a,n)}if(o=(a&i.childLanes)!==0,$r||o){if(n=gs,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,Tu(i,s),ml(n,i,s,-1))}return C3(),n=$2(Error(Se(421))),gS(i,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=i.child,e=Afe.bind(null,i),s._reactRetry=e,null):(i=r.treeContext,va=Uh(s.nextSibling),xa=e,nn=!0,el=null,i!==null&&(Qa[eo++]=lu,Qa[eo++]=cu,Qa[eo++]=ef,lu=i.id,cu=i.overflow,ef=e),e=y3(e,n.children),e.flags|=4096,e)}function xz(i,e,t){i.lanes|=e;var n=i.alternate;n!==null&&(n.lanes|=e),FR(i.return,e,t)}function z2(i,e,t,n,s){var r=i.memoizedState;r===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=t,r.tailMode=s)}function DZ(i,e,t){var n=e.pendingProps,s=n.revealOrder,r=n.tail;if(mr(i,e,n.children,t),n=gn.current,n&2)n=n&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&xz(i,t,e);else if(i.tag===19)xz(i,t,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}n&=1}if(Hi(gn,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)i=t.alternate,i!==null&&Lw(i)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),z2(e,!1,s,t,r);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(i=s.alternate,i!==null&&Lw(i)===null){e.child=s;break}i=s.sibling,s.sibling=t,t=s,s=i}z2(e,!0,t,null,r);break;case"together":z2(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function FC(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function Eu(i,e,t){if(i!==null&&(e.dependencies=i.dependencies),nf|=e.lanes,!(t&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(Se(153));if(e.child!==null){for(i=e.child,t=Xh(i,i.pendingProps),e.child=t,t.return=e;i.sibling!==null;)i=i.sibling,t=t.sibling=Xh(i,i.pendingProps),t.return=e;t.sibling=null}return e.child}function pfe(i,e,t){switch(e.tag){case 3:RZ(e),iy();break;case 5:oZ(e);break;case 1:Kr(e.type)&&Ew(e);break;case 4:c3(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Hi(Mw,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Hi(gn,gn.current&1),e.flags|=128,null):t&e.child.childLanes?LZ(i,e,t):(Hi(gn,gn.current&1),i=Eu(i,e,t),i!==null?i.sibling:null);Hi(gn,gn.current&1);break;case 19:if(n=(t&e.childLanes)!==0,i.flags&128){if(n)return DZ(i,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Hi(gn,gn.current),n)break;return null;case 22:case 23:return e.lanes=0,MZ(i,e,t)}return Eu(i,e,t)}var FZ,UR,BZ,jZ;FZ=function(i,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)i.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};UR=function(){};BZ=function(i,e,t,n){var s=i.memoizedProps;if(s!==n){i=e.stateNode,xp(pc.current);var r=null;switch(t){case"input":s=dR(i,s),n=dR(i,n),r=[];break;case"select":s=vn({},s,{value:void 0}),n=vn({},n,{value:void 0}),r=[];break;case"textarea":s=gR(i,s),n=gR(i,n),r=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(i.onclick=kw)}yR(t,n);var a;t=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(sb.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in n){var l=n[c];if(o=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(r||(r=[]),r.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(sb.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ki("scroll",i),r||o===l||(r=[])):(r=r||[]).push(c,l))}t&&(r=r||[]).push("style",t);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};jZ=function(i,e,t,n){t!==n&&(e.flags|=4)};function V0(i,e){if(!nn)switch(i.tailMode){case"hidden":e=i.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?i.tail=null:t.sibling=null;break;case"collapsed":t=i.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:n.sibling=null}}function Bs(i){var e=i.alternate!==null&&i.alternate.child===i.child,t=0,n=0;if(e)for(var s=i.child;s!==null;)t|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=i,s=s.sibling;else for(s=i.child;s!==null;)t|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=i,s=s.sibling;return i.subtreeFlags|=n,i.childLanes=t,e}function ffe(i,e,t){var n=e.pendingProps;switch(i3(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bs(e),null;case 1:return Kr(e.type)&&Tw(),Bs(e),null;case 3:return n=e.stateNode,sy(),qi(Gr),qi(er),h3(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(i===null||i.child===null)&&(pS(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,el!==null&&(JR(el),el=null))),UR(i,e),Bs(e),null;case 5:u3(e);var s=xp(mb.current);if(t=e.type,i!==null&&e.stateNode!=null)BZ(i,e,t,n,s),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Se(166));return Bs(e),null}if(i=xp(pc.current),pS(e)){n=e.stateNode,t=e.type;var r=e.memoizedProps;switch(n[ql]=e,n[fb]=r,i=(e.mode&1)!==0,t){case"dialog":Ki("cancel",n),Ki("close",n);break;case"iframe":case"object":case"embed":Ki("load",n);break;case"video":case"audio":for(s=0;s<E_.length;s++)Ki(E_[s],n);break;case"source":Ki("error",n);break;case"img":case"image":case"link":Ki("error",n),Ki("load",n);break;case"details":Ki("toggle",n);break;case"input":O$(n,r),Ki("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!r.multiple},Ki("invalid",n);break;case"textarea":I$(n,r),Ki("invalid",n)}yR(t,r),s=null;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];a==="children"?typeof o=="string"?n.textContent!==o&&(r.suppressHydrationWarning!==!0&&dS(n.textContent,o,i),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(r.suppressHydrationWarning!==!0&&dS(n.textContent,o,i),s=["children",""+o]):sb.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Ki("scroll",n)}switch(t){case"input":sS(n),M$(n,r,!0);break;case"textarea":sS(n),R$(n);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(n.onclick=kw)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=dq(t)),i==="http://www.w3.org/1999/xhtml"?t==="script"?(i=a.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof n.is=="string"?i=a.createElement(t,{is:n.is}):(i=a.createElement(t),t==="select"&&(a=i,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):i=a.createElementNS(i,t),i[ql]=e,i[fb]=n,FZ(i,e,!1,!1),e.stateNode=i;e:{switch(a=_R(t,n),t){case"dialog":Ki("cancel",i),Ki("close",i),s=n;break;case"iframe":case"object":case"embed":Ki("load",i),s=n;break;case"video":case"audio":for(s=0;s<E_.length;s++)Ki(E_[s],i);s=n;break;case"source":Ki("error",i),s=n;break;case"img":case"image":case"link":Ki("error",i),Ki("load",i),s=n;break;case"details":Ki("toggle",i),s=n;break;case"input":O$(i,n),s=dR(i,n),Ki("invalid",i);break;case"option":s=n;break;case"select":i._wrapperState={wasMultiple:!!n.multiple},s=vn({},n,{value:void 0}),Ki("invalid",i);break;case"textarea":I$(i,n),s=gR(i,n),Ki("invalid",i);break;default:s=n}yR(t,s),o=s;for(r in o)if(o.hasOwnProperty(r)){var l=o[r];r==="style"?gq(i,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&pq(i,l)):r==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&rb(i,l):typeof l=="number"&&rb(i,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(sb.hasOwnProperty(r)?l!=null&&r==="onScroll"&&Ki("scroll",i):l!=null&&zB(i,r,l,a))}switch(t){case"input":sS(i),M$(i,n,!1);break;case"textarea":sS(i),R$(i);break;case"option":n.value!=null&&i.setAttribute("value",""+vd(n.value));break;case"select":i.multiple=!!n.multiple,r=n.value,r!=null?Im(i,!!n.multiple,r,!1):n.defaultValue!=null&&Im(i,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(i.onclick=kw)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Bs(e),null;case 6:if(i&&e.stateNode!=null)jZ(i,e,i.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Se(166));if(t=xp(mb.current),xp(pc.current),pS(e)){if(n=e.stateNode,t=e.memoizedProps,n[ql]=e,(r=n.nodeValue!==t)&&(i=xa,i!==null))switch(i.tag){case 3:dS(n.nodeValue,t,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&dS(n.nodeValue,t,(i.mode&1)!==0)}r&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[ql]=e,e.stateNode=n}return Bs(e),null;case 13:if(qi(gn),n=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(nn&&va!==null&&e.mode&1&&!(e.flags&128))iZ(),iy(),e.flags|=98560,r=!1;else if(r=pS(e),n!==null&&n.dehydrated!==null){if(i===null){if(!r)throw Error(Se(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Se(317));r[ql]=e}else iy(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Bs(e),r=!1}else el!==null&&(JR(el),el=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(i!==null&&i.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(i===null||gn.current&1?is===0&&(is=3):C3())),e.updateQueue!==null&&(e.flags|=4),Bs(e),null);case 4:return sy(),UR(i,e),i===null&&db(e.stateNode.containerInfo),Bs(e),null;case 10:return a3(e.type._context),Bs(e),null;case 17:return Kr(e.type)&&Tw(),Bs(e),null;case 19:if(qi(gn),r=e.memoizedState,r===null)return Bs(e),null;if(n=(e.flags&128)!==0,a=r.rendering,a===null)if(n)V0(r,!1);else{if(is!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(a=Lw(i),a!==null){for(e.flags|=128,V0(r,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)r=t,i=n,r.flags&=14680066,a=r.alternate,a===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,i=a.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t=t.sibling;return Hi(gn,gn.current&1|2),e.child}i=i.sibling}r.tail!==null&&Fn()>ay&&(e.flags|=128,n=!0,V0(r,!1),e.lanes=4194304)}else{if(!n)if(i=Lw(a),i!==null){if(e.flags|=128,n=!0,t=i.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),V0(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!nn)return Bs(e),null}else 2*Fn()-r.renderingStartTime>ay&&t!==1073741824&&(e.flags|=128,n=!0,V0(r,!1),e.lanes=4194304);r.isBackwards?(a.sibling=e.child,e.child=a):(t=r.last,t!==null?t.sibling=a:e.child=a,r.last=a)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Fn(),e.sibling=null,t=gn.current,Hi(gn,n?t&1|2:t&1),e):(Bs(e),null);case 22:case 23:return S3(),n=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?pa&1073741824&&(Bs(e),e.subtreeFlags&6&&(e.flags|=8192)):Bs(e),null;case 24:return null;case 25:return null}throw Error(Se(156,e.tag))}function gfe(i,e){switch(i3(e),e.tag){case 1:return Kr(e.type)&&Tw(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return sy(),qi(Gr),qi(er),h3(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return u3(e),null;case 13:if(qi(gn),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(Se(340));iy()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return qi(gn),null;case 4:return sy(),null;case 10:return a3(e.type._context),null;case 22:case 23:return S3(),null;case 24:return null;default:return null}}var mS=!1,Xs=!1,mfe=typeof WeakSet=="function"?WeakSet:Set,De=null;function Qg(i,e){var t=i.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Cn(i,e,n)}else t.current=null}function WR(i,e,t){try{t()}catch(n){Cn(i,e,n)}}var Sz=!1;function yfe(i,e){if(ER=Cw,i=Vq(),e3(i)){if("selectionStart"in i)var t={start:i.selectionStart,end:i.selectionEnd};else e:{t=(t=i.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var s=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,c=0,u=0,h=i,d=null;t:for(;;){for(var p;h!==t||s!==0&&h.nodeType!==3||(o=a+s),h!==r||n!==0&&h.nodeType!==3||(l=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(p=h.firstChild)!==null;)d=h,h=p;for(;;){if(h===i)break t;if(d===t&&++c===s&&(o=a),d===r&&++u===n&&(l=a),(p=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=p}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(PR={focusedElem:i,selectionRange:t},Cw=!1,De=e;De!==null;)if(e=De,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,De=i;else for(;De!==null;){e=De;try{var f=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var g=f.memoizedProps,m=f.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:qo(e.type,g),m);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Se(163))}}catch(S){Cn(e,e.return,S)}if(i=e.sibling,i!==null){i.return=e.return,De=i;break}De=e.return}return f=Sz,Sz=!1,f}function Z_(i,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&i)===i){var r=s.destroy;s.destroy=void 0,r!==void 0&&WR(e,t,r)}s=s.next}while(s!==n)}}function yE(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&i)===i){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function GR(i){var e=i.ref;if(e!==null){var t=i.stateNode;switch(i.tag){case 5:i=t;break;default:i=t}typeof e=="function"?e(i):e.current=i}}function NZ(i){var e=i.alternate;e!==null&&(i.alternate=null,NZ(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[ql],delete e[fb],delete e[IR],delete e[Qpe],delete e[efe])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function $Z(i){return i.tag===5||i.tag===3||i.tag===4}function Cz(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||$Z(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function KR(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(i,e):t.insertBefore(i,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(i,t)):(e=t,e.appendChild(i)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=kw));else if(n!==4&&(i=i.child,i!==null))for(KR(i,e,t),i=i.sibling;i!==null;)KR(i,e,t),i=i.sibling}function XR(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.insertBefore(i,e):t.appendChild(i);else if(n!==4&&(i=i.child,i!==null))for(XR(i,e,t),i=i.sibling;i!==null;)XR(i,e,t),i=i.sibling}var Cs=null,Zo=!1;function Ju(i,e,t){for(t=t.child;t!==null;)zZ(i,e,t),t=t.sibling}function zZ(i,e,t){if(dc&&typeof dc.onCommitFiberUnmount=="function")try{dc.onCommitFiberUnmount(cE,t)}catch{}switch(t.tag){case 5:Xs||Qg(t,e);case 6:var n=Cs,s=Zo;Cs=null,Ju(i,e,t),Cs=n,Zo=s,Cs!==null&&(Zo?(i=Cs,t=t.stateNode,i.nodeType===8?i.parentNode.removeChild(t):i.removeChild(t)):Cs.removeChild(t.stateNode));break;case 18:Cs!==null&&(Zo?(i=Cs,t=t.stateNode,i.nodeType===8?L2(i.parentNode,t):i.nodeType===1&&L2(i,t),cb(i)):L2(Cs,t.stateNode));break;case 4:n=Cs,s=Zo,Cs=t.stateNode.containerInfo,Zo=!0,Ju(i,e,t),Cs=n,Zo=s;break;case 0:case 11:case 14:case 15:if(!Xs&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var r=s,a=r.destroy;r=r.tag,a!==void 0&&(r&2||r&4)&&WR(t,e,a),s=s.next}while(s!==n)}Ju(i,e,t);break;case 1:if(!Xs&&(Qg(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(o){Cn(t,e,o)}Ju(i,e,t);break;case 21:Ju(i,e,t);break;case 22:t.mode&1?(Xs=(n=Xs)||t.memoizedState!==null,Ju(i,e,t),Xs=n):Ju(i,e,t);break;default:Ju(i,e,t)}}function wz(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var t=i.stateNode;t===null&&(t=i.stateNode=new mfe),e.forEach(function(n){var s=kfe.bind(null,i,n);t.has(n)||(t.add(n),n.then(s,s))})}}function jo(i,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];try{var r=i,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Cs=o.stateNode,Zo=!1;break e;case 3:Cs=o.stateNode.containerInfo,Zo=!0;break e;case 4:Cs=o.stateNode.containerInfo,Zo=!0;break e}o=o.return}if(Cs===null)throw Error(Se(160));zZ(r,a,s),Cs=null,Zo=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Cn(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)HZ(e,i),e=e.sibling}function HZ(i,e){var t=i.alternate,n=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(jo(e,i),Fl(i),n&4){try{Z_(3,i,i.return),yE(3,i)}catch(g){Cn(i,i.return,g)}try{Z_(5,i,i.return)}catch(g){Cn(i,i.return,g)}}break;case 1:jo(e,i),Fl(i),n&512&&t!==null&&Qg(t,t.return);break;case 5:if(jo(e,i),Fl(i),n&512&&t!==null&&Qg(t,t.return),i.flags&32){var s=i.stateNode;try{rb(s,"")}catch(g){Cn(i,i.return,g)}}if(n&4&&(s=i.stateNode,s!=null)){var r=i.memoizedProps,a=t!==null?t.memoizedProps:r,o=i.type,l=i.updateQueue;if(i.updateQueue=null,l!==null)try{o==="input"&&r.type==="radio"&&r.name!=null&&uq(s,r),_R(o,a);var c=_R(o,r);for(a=0;a<l.length;a+=2){var u=l[a],h=l[a+1];u==="style"?gq(s,h):u==="dangerouslySetInnerHTML"?pq(s,h):u==="children"?rb(s,h):zB(s,u,h,c)}switch(o){case"input":pR(s,r);break;case"textarea":hq(s,r);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?Im(s,!!r.multiple,p,!1):d!==!!r.multiple&&(r.defaultValue!=null?Im(s,!!r.multiple,r.defaultValue,!0):Im(s,!!r.multiple,r.multiple?[]:"",!1))}s[fb]=r}catch(g){Cn(i,i.return,g)}}break;case 6:if(jo(e,i),Fl(i),n&4){if(i.stateNode===null)throw Error(Se(162));s=i.stateNode,r=i.memoizedProps;try{s.nodeValue=r}catch(g){Cn(i,i.return,g)}}break;case 3:if(jo(e,i),Fl(i),n&4&&t!==null&&t.memoizedState.isDehydrated)try{cb(e.containerInfo)}catch(g){Cn(i,i.return,g)}break;case 4:jo(e,i),Fl(i);break;case 13:jo(e,i),Fl(i),s=i.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(b3=Fn())),n&4&&wz(i);break;case 22:if(u=t!==null&&t.memoizedState!==null,i.mode&1?(Xs=(c=Xs)||u,jo(e,i),Xs=c):jo(e,i),Fl(i),n&8192){if(c=i.memoizedState!==null,(i.stateNode.isHidden=c)&&!u&&i.mode&1)for(De=i,u=i.child;u!==null;){for(h=De=u;De!==null;){switch(d=De,p=d.child,d.tag){case 0:case 11:case 14:case 15:Z_(4,d,d.return);break;case 1:Qg(d,d.return);var f=d.stateNode;if(typeof f.componentWillUnmount=="function"){n=d,t=d.return;try{e=n,f.props=e.memoizedProps,f.state=e.memoizedState,f.componentWillUnmount()}catch(g){Cn(n,t,g)}}break;case 5:Qg(d,d.return);break;case 22:if(d.memoizedState!==null){kz(h);continue}}p!==null?(p.return=d,De=p):kz(h)}u=u.sibling}e:for(u=null,h=i;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=fq("display",a))}catch(g){Cn(i,i.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){Cn(i,i.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===i)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:jo(e,i),Fl(i),n&4&&wz(i);break;case 21:break;default:jo(e,i),Fl(i)}}function Fl(i){var e=i.flags;if(e&2){try{e:{for(var t=i.return;t!==null;){if($Z(t)){var n=t;break e}t=t.return}throw Error(Se(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(rb(s,""),n.flags&=-33);var r=Cz(i);XR(i,r,s);break;case 3:case 4:var a=n.stateNode.containerInfo,o=Cz(i);KR(i,o,a);break;default:throw Error(Se(161))}}catch(l){Cn(i,i.return,l)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function _fe(i,e,t){De=i,VZ(i)}function VZ(i,e,t){for(var n=(i.mode&1)!==0;De!==null;){var s=De,r=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||mS;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||Xs;o=mS;var c=Xs;if(mS=a,(Xs=l)&&!c)for(De=s;De!==null;)a=De,l=a.child,a.tag===22&&a.memoizedState!==null?Tz(s):l!==null?(l.return=a,De=l):Tz(s);for(;r!==null;)De=r,VZ(r),r=r.sibling;De=s,mS=o,Xs=c}Az(i)}else s.subtreeFlags&8772&&r!==null?(r.return=s,De=r):Az(i)}}function Az(i){for(;De!==null;){var e=De;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xs||yE(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Xs)if(t===null)n.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:qo(e.type,t.memoizedProps);n.componentDidUpdate(s,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&cz(e,r,n);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}cz(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&cb(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Se(163))}Xs||e.flags&512&&GR(e)}catch(d){Cn(e,e.return,d)}}if(e===i){De=null;break}if(t=e.sibling,t!==null){t.return=e.return,De=t;break}De=e.return}}function kz(i){for(;De!==null;){var e=De;if(e===i){De=null;break}var t=e.sibling;if(t!==null){t.return=e.return,De=t;break}De=e.return}}function Tz(i){for(;De!==null;){var e=De;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{yE(4,e)}catch(l){Cn(e,t,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){Cn(e,s,l)}}var r=e.return;try{GR(e)}catch(l){Cn(e,r,l)}break;case 5:var a=e.return;try{GR(e)}catch(l){Cn(e,a,l)}}}catch(l){Cn(e,e.return,l)}if(e===i){De=null;break}var o=e.sibling;if(o!==null){o.return=e.return,De=o;break}De=e.return}}var vfe=Math.ceil,Bw=ju.ReactCurrentDispatcher,_3=ju.ReactCurrentOwner,bo=ju.ReactCurrentBatchConfig,ni=0,gs=null,Kn=null,Os=0,pa=0,em=Fd(0),is=0,bb=null,nf=0,_E=0,v3=0,J_=null,jr=null,b3=0,ay=1/0,qc=null,jw=!1,YR=null,Gh=null,yS=!1,Ah=null,Nw=0,Q_=0,qR=null,BC=-1,jC=0;function Sr(){return ni&6?Fn():BC!==-1?BC:BC=Fn()}function Kh(i){return i.mode&1?ni&2&&Os!==0?Os&-Os:ife.transition!==null?(jC===0&&(jC=Tq()),jC):(i=Ci,i!==0||(i=window.event,i=i===void 0?16:Lq(i.type)),i):1}function ml(i,e,t,n){if(50<Q_)throw Q_=0,qR=null,Error(Se(185));V1(i,t,n),(!(ni&2)||i!==gs)&&(i===gs&&(!(ni&2)&&(_E|=t),is===4&&_h(i,Os)),Xr(i,n),t===1&&ni===0&&!(e.mode&1)&&(ay=Fn()+500,fE&&Bd()))}function Xr(i,e){var t=i.callbackNode;ipe(i,e);var n=Sw(i,i===gs?Os:0);if(n===0)t!==null&&F$(t),i.callbackNode=null,i.callbackPriority=0;else if(e=n&-n,i.callbackPriority!==e){if(t!=null&&F$(t),e===1)i.tag===0?tfe(Ez.bind(null,i)):Qq(Ez.bind(null,i)),Zpe(function(){!(ni&6)&&Bd()}),t=null;else{switch(Eq(n)){case 1:t=GB;break;case 4:t=Aq;break;case 16:t=xw;break;case 536870912:t=kq;break;default:t=xw}t=ZZ(t,UZ.bind(null,i))}i.callbackPriority=e,i.callbackNode=t}}function UZ(i,e){if(BC=-1,jC=0,ni&6)throw Error(Se(327));var t=i.callbackNode;if(Bm()&&i.callbackNode!==t)return null;var n=Sw(i,i===gs?Os:0);if(n===0)return null;if(n&30||n&i.expiredLanes||e)e=$w(i,n);else{e=n;var s=ni;ni|=2;var r=GZ();(gs!==i||Os!==e)&&(qc=null,ay=Fn()+500,Fp(i,e));do try{Sfe();break}catch(o){WZ(i,o)}while(!0);r3(),Bw.current=r,ni=s,Kn!==null?e=0:(gs=null,Os=0,e=is)}if(e!==0){if(e===2&&(s=CR(i),s!==0&&(n=s,e=ZR(i,s))),e===1)throw t=bb,Fp(i,0),_h(i,n),Xr(i,Fn()),t;if(e===6)_h(i,n);else{if(s=i.current.alternate,!(n&30)&&!bfe(s)&&(e=$w(i,n),e===2&&(r=CR(i),r!==0&&(n=r,e=ZR(i,r))),e===1))throw t=bb,Fp(i,0),_h(i,n),Xr(i,Fn()),t;switch(i.finishedWork=s,i.finishedLanes=n,e){case 0:case 1:throw Error(Se(345));case 2:lp(i,jr,qc);break;case 3:if(_h(i,n),(n&130023424)===n&&(e=b3+500-Fn(),10<e)){if(Sw(i,0)!==0)break;if(s=i.suspendedLanes,(s&n)!==n){Sr(),i.pingedLanes|=i.suspendedLanes&s;break}i.timeoutHandle=MR(lp.bind(null,i,jr,qc),e);break}lp(i,jr,qc);break;case 4:if(_h(i,n),(n&4194240)===n)break;for(e=i.eventTimes,s=-1;0<n;){var a=31-gl(n);r=1<<a,a=e[a],a>s&&(s=a),n&=~r}if(n=s,n=Fn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*vfe(n/1960))-n,10<n){i.timeoutHandle=MR(lp.bind(null,i,jr,qc),n);break}lp(i,jr,qc);break;case 5:lp(i,jr,qc);break;default:throw Error(Se(329))}}}return Xr(i,Fn()),i.callbackNode===t?UZ.bind(null,i):null}function ZR(i,e){var t=J_;return i.current.memoizedState.isDehydrated&&(Fp(i,e).flags|=256),i=$w(i,e),i!==2&&(e=jr,jr=t,e!==null&&JR(e)),i}function JR(i){jr===null?jr=i:jr.push.apply(jr,i)}function bfe(i){for(var e=i;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var s=t[n],r=s.getSnapshot;s=s.value;try{if(!xl(r(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _h(i,e){for(e&=~v3,e&=~_E,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var t=31-gl(e),n=1<<t;i[t]=-1,e&=~n}}function Ez(i){if(ni&6)throw Error(Se(327));Bm();var e=Sw(i,0);if(!(e&1))return Xr(i,Fn()),null;var t=$w(i,e);if(i.tag!==0&&t===2){var n=CR(i);n!==0&&(e=n,t=ZR(i,n))}if(t===1)throw t=bb,Fp(i,0),_h(i,e),Xr(i,Fn()),t;if(t===6)throw Error(Se(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,lp(i,jr,qc),Xr(i,Fn()),null}function x3(i,e){var t=ni;ni|=1;try{return i(e)}finally{ni=t,ni===0&&(ay=Fn()+500,fE&&Bd())}}function sf(i){Ah!==null&&Ah.tag===0&&!(ni&6)&&Bm();var e=ni;ni|=1;var t=bo.transition,n=Ci;try{if(bo.transition=null,Ci=1,i)return i()}finally{Ci=n,bo.transition=t,ni=e,!(ni&6)&&Bd()}}function S3(){pa=em.current,qi(em)}function Fp(i,e){i.finishedWork=null,i.finishedLanes=0;var t=i.timeoutHandle;if(t!==-1&&(i.timeoutHandle=-1,qpe(t)),Kn!==null)for(t=Kn.return;t!==null;){var n=t;switch(i3(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Tw();break;case 3:sy(),qi(Gr),qi(er),h3();break;case 5:u3(n);break;case 4:sy();break;case 13:qi(gn);break;case 19:qi(gn);break;case 10:a3(n.type._context);break;case 22:case 23:S3()}t=t.return}if(gs=i,Kn=i=Xh(i.current,null),Os=pa=e,is=0,bb=null,v3=_E=nf=0,jr=J_=null,bp!==null){for(e=0;e<bp.length;e++)if(t=bp[e],n=t.interleaved,n!==null){t.interleaved=null;var s=n.next,r=t.pending;if(r!==null){var a=r.next;r.next=s,n.next=a}t.pending=n}bp=null}return i}function WZ(i,e){do{var t=Kn;try{if(r3(),LC.current=Fw,Dw){for(var n=yn.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Dw=!1}if(tf=0,hs=ts=yn=null,q_=!1,yb=0,_3.current=null,t===null||t.return===null){is=1,bb=e,Kn=null;break}e:{var r=i,a=t.return,o=t,l=e;if(e=Os,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=gz(a);if(p!==null){p.flags&=-257,mz(p,a,o,r,e),p.mode&1&&fz(r,c,e),e=p,l=c;var f=e.updateQueue;if(f===null){var g=new Set;g.add(l),e.updateQueue=g}else f.add(l);break e}else{if(!(e&1)){fz(r,c,e),C3();break e}l=Error(Se(426))}}else if(nn&&o.mode&1){var m=gz(a);if(m!==null){!(m.flags&65536)&&(m.flags|=256),mz(m,a,o,r,e),n3(ry(l,o));break e}}r=l=ry(l,o),is!==4&&(is=2),J_===null?J_=[r]:J_.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var y=EZ(r,l,e);lz(r,y);break e;case 1:o=l;var b=r.type,x=r.stateNode;if(!(r.flags&128)&&(typeof b.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Gh===null||!Gh.has(x)))){r.flags|=65536,e&=-e,r.lanes|=e;var S=PZ(r,o,e);lz(r,S);break e}}r=r.return}while(r!==null)}XZ(t)}catch(C){e=C,Kn===t&&t!==null&&(Kn=t=t.return);continue}break}while(!0)}function GZ(){var i=Bw.current;return Bw.current=Fw,i===null?Fw:i}function C3(){(is===0||is===3||is===2)&&(is=4),gs===null||!(nf&268435455)&&!(_E&268435455)||_h(gs,Os)}function $w(i,e){var t=ni;ni|=2;var n=GZ();(gs!==i||Os!==e)&&(qc=null,Fp(i,e));do try{xfe();break}catch(s){WZ(i,s)}while(!0);if(r3(),ni=t,Bw.current=n,Kn!==null)throw Error(Se(261));return gs=null,Os=0,is}function xfe(){for(;Kn!==null;)KZ(Kn)}function Sfe(){for(;Kn!==null&&!Kde();)KZ(Kn)}function KZ(i){var e=qZ(i.alternate,i,pa);i.memoizedProps=i.pendingProps,e===null?XZ(i):Kn=e,_3.current=null}function XZ(i){var e=i;do{var t=e.alternate;if(i=e.return,e.flags&32768){if(t=gfe(t,e),t!==null){t.flags&=32767,Kn=t;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{is=6,Kn=null;return}}else if(t=ffe(t,e,pa),t!==null){Kn=t;return}if(e=e.sibling,e!==null){Kn=e;return}Kn=e=i}while(e!==null);is===0&&(is=5)}function lp(i,e,t){var n=Ci,s=bo.transition;try{bo.transition=null,Ci=1,Cfe(i,e,t,n)}finally{bo.transition=s,Ci=n}return null}function Cfe(i,e,t,n){do Bm();while(Ah!==null);if(ni&6)throw Error(Se(327));t=i.finishedWork;var s=i.finishedLanes;if(t===null)return null;if(i.finishedWork=null,i.finishedLanes=0,t===i.current)throw Error(Se(177));i.callbackNode=null,i.callbackPriority=0;var r=t.lanes|t.childLanes;if(npe(i,r),i===gs&&(Kn=gs=null,Os=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||yS||(yS=!0,ZZ(xw,function(){return Bm(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=bo.transition,bo.transition=null;var a=Ci;Ci=1;var o=ni;ni|=4,_3.current=null,yfe(i,t),HZ(t,i),Vpe(PR),Cw=!!ER,PR=ER=null,i.current=t,_fe(t),Xde(),ni=o,Ci=a,bo.transition=r}else i.current=t;if(yS&&(yS=!1,Ah=i,Nw=s),r=i.pendingLanes,r===0&&(Gh=null),Zde(t.stateNode),Xr(i,Fn()),e!==null)for(n=i.onRecoverableError,t=0;t<e.length;t++)s=e[t],n(s.value,{componentStack:s.stack,digest:s.digest});if(jw)throw jw=!1,i=YR,YR=null,i;return Nw&1&&i.tag!==0&&Bm(),r=i.pendingLanes,r&1?i===qR?Q_++:(Q_=0,qR=i):Q_=0,Bd(),null}function Bm(){if(Ah!==null){var i=Eq(Nw),e=bo.transition,t=Ci;try{if(bo.transition=null,Ci=16>i?16:i,Ah===null)var n=!1;else{if(i=Ah,Ah=null,Nw=0,ni&6)throw Error(Se(331));var s=ni;for(ni|=4,De=i.current;De!==null;){var r=De,a=r.child;if(De.flags&16){var o=r.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(De=c;De!==null;){var u=De;switch(u.tag){case 0:case 11:case 15:Z_(8,u,r)}var h=u.child;if(h!==null)h.return=u,De=h;else for(;De!==null;){u=De;var d=u.sibling,p=u.return;if(NZ(u),u===c){De=null;break}if(d!==null){d.return=p,De=d;break}De=p}}}var f=r.alternate;if(f!==null){var g=f.child;if(g!==null){f.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(g!==null)}}De=r}}if(r.subtreeFlags&2064&&a!==null)a.return=r,De=a;else e:for(;De!==null;){if(r=De,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Z_(9,r,r.return)}var y=r.sibling;if(y!==null){y.return=r.return,De=y;break e}De=r.return}}var b=i.current;for(De=b;De!==null;){a=De;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,De=x;else e:for(a=b;De!==null;){if(o=De,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:yE(9,o)}}catch(C){Cn(o,o.return,C)}if(o===a){De=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,De=S;break e}De=o.return}}if(ni=s,Bd(),dc&&typeof dc.onPostCommitFiberRoot=="function")try{dc.onPostCommitFiberRoot(cE,i)}catch{}n=!0}return n}finally{Ci=t,bo.transition=e}}return!1}function Pz(i,e,t){e=ry(t,e),e=EZ(i,e,1),i=Wh(i,e,1),e=Sr(),i!==null&&(V1(i,1,e),Xr(i,e))}function Cn(i,e,t){if(i.tag===3)Pz(i,i,t);else for(;e!==null;){if(e.tag===3){Pz(e,i,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Gh===null||!Gh.has(n))){i=ry(t,i),i=PZ(e,i,1),e=Wh(e,i,1),i=Sr(),e!==null&&(V1(e,1,i),Xr(e,i));break}}e=e.return}}function wfe(i,e,t){var n=i.pingCache;n!==null&&n.delete(e),e=Sr(),i.pingedLanes|=i.suspendedLanes&t,gs===i&&(Os&t)===t&&(is===4||is===3&&(Os&130023424)===Os&&500>Fn()-b3?Fp(i,0):v3|=t),Xr(i,e)}function YZ(i,e){e===0&&(i.mode&1?(e=oS,oS<<=1,!(oS&130023424)&&(oS=4194304)):e=1);var t=Sr();i=Tu(i,e),i!==null&&(V1(i,e,t),Xr(i,t))}function Afe(i){var e=i.memoizedState,t=0;e!==null&&(t=e.retryLane),YZ(i,t)}function kfe(i,e){var t=0;switch(i.tag){case 13:var n=i.stateNode,s=i.memoizedState;s!==null&&(t=s.retryLane);break;case 19:n=i.stateNode;break;default:throw Error(Se(314))}n!==null&&n.delete(e),YZ(i,t)}var qZ;qZ=function(i,e,t){if(i!==null)if(i.memoizedProps!==e.pendingProps||Gr.current)$r=!0;else{if(!(i.lanes&t)&&!(e.flags&128))return $r=!1,pfe(i,e,t);$r=!!(i.flags&131072)}else $r=!1,nn&&e.flags&1048576&&eZ(e,Ow,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;FC(i,e),i=e.pendingProps;var s=ty(e,er.current);Fm(e,t),s=p3(null,e,n,i,s,t);var r=f3();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Kr(n)?(r=!0,Ew(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,l3(e),s.updater=mE,e.stateNode=s,s._reactInternals=e,jR(e,n,i,t),e=zR(null,e,n,!0,r,t)):(e.tag=0,nn&&r&&t3(e),mr(null,e,s,t),e=e.child),e;case 16:n=e.elementType;e:{switch(FC(i,e),i=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=Efe(n),i=qo(n,i),s){case 0:e=$R(null,e,n,i,t);break e;case 1:e=vz(null,e,n,i,t);break e;case 11:e=yz(null,e,n,i,t);break e;case 14:e=_z(null,e,n,qo(n.type,i),t);break e}throw Error(Se(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:qo(n,s),$R(i,e,n,s,t);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:qo(n,s),vz(i,e,n,s,t);case 3:e:{if(RZ(e),i===null)throw Error(Se(387));n=e.pendingProps,r=e.memoizedState,s=r.element,aZ(i,e),Rw(e,n,null,t);var a=e.memoizedState;if(n=a.element,r.isDehydrated)if(r={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=ry(Error(Se(423)),e),e=bz(i,e,n,t,s);break e}else if(n!==s){s=ry(Error(Se(424)),e),e=bz(i,e,n,t,s);break e}else for(va=Uh(e.stateNode.containerInfo.firstChild),xa=e,nn=!0,el=null,t=sZ(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(iy(),n===s){e=Eu(i,e,t);break e}mr(i,e,n,t)}e=e.child}return e;case 5:return oZ(e),i===null&&DR(e),n=e.type,s=e.pendingProps,r=i!==null?i.memoizedProps:null,a=s.children,OR(n,s)?a=null:r!==null&&OR(n,r)&&(e.flags|=32),IZ(i,e),mr(i,e,a,t),e.child;case 6:return i===null&&DR(e),null;case 13:return LZ(i,e,t);case 4:return c3(e,e.stateNode.containerInfo),n=e.pendingProps,i===null?e.child=ny(e,null,n,t):mr(i,e,n,t),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:qo(n,s),yz(i,e,n,s,t);case 7:return mr(i,e,e.pendingProps,t),e.child;case 8:return mr(i,e,e.pendingProps.children,t),e.child;case 12:return mr(i,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,r=e.memoizedProps,a=s.value,Hi(Mw,n._currentValue),n._currentValue=a,r!==null)if(xl(r.value,a)){if(r.children===s.children&&!Gr.current){e=Eu(i,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var o=r.dependencies;if(o!==null){a=r.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(r.tag===1){l=gu(-1,t&-t),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}r.lanes|=t,l=r.alternate,l!==null&&(l.lanes|=t),FR(r.return,t,e),o.lanes|=t;break}l=l.next}}else if(r.tag===10)a=r.type===e.type?null:r.child;else if(r.tag===18){if(a=r.return,a===null)throw Error(Se(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),FR(a,t,e),a=r.sibling}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}mr(i,e,s.children,t),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Fm(e,t),s=Co(s),n=n(s),e.flags|=1,mr(i,e,n,t),e.child;case 14:return n=e.type,s=qo(n,e.pendingProps),s=qo(n.type,s),_z(i,e,n,s,t);case 15:return OZ(i,e,e.type,e.pendingProps,t);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:qo(n,s),FC(i,e),e.tag=1,Kr(n)?(i=!0,Ew(e)):i=!1,Fm(e,t),TZ(e,n,s),jR(e,n,s,t),zR(null,e,n,!0,i,t);case 19:return DZ(i,e,t);case 22:return MZ(i,e,t)}throw Error(Se(156,e.tag))};function ZZ(i,e){return wq(i,e)}function Tfe(i,e,t,n){this.tag=i,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function po(i,e,t,n){return new Tfe(i,e,t,n)}function w3(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Efe(i){if(typeof i=="function")return w3(i)?1:0;if(i!=null){if(i=i.$$typeof,i===VB)return 11;if(i===UB)return 14}return 2}function Xh(i,e){var t=i.alternate;return t===null?(t=po(i.tag,e,i.key,i.mode),t.elementType=i.elementType,t.type=i.type,t.stateNode=i.stateNode,t.alternate=i,i.alternate=t):(t.pendingProps=e,t.type=i.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=i.flags&14680064,t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,e=i.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=i.sibling,t.index=i.index,t.ref=i.ref,t}function NC(i,e,t,n,s,r){var a=2;if(n=i,typeof i=="function")w3(i)&&(a=1);else if(typeof i=="string")a=5;else e:switch(i){case Ug:return Bp(t.children,s,r,e);case HB:a=8,s|=8;break;case lR:return i=po(12,t,e,s|2),i.elementType=lR,i.lanes=r,i;case cR:return i=po(13,t,e,s),i.elementType=cR,i.lanes=r,i;case uR:return i=po(19,t,e,s),i.elementType=uR,i.lanes=r,i;case oq:return vE(t,s,r,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case rq:a=10;break e;case aq:a=9;break e;case VB:a=11;break e;case UB:a=14;break e;case ch:a=16,n=null;break e}throw Error(Se(130,i==null?i:typeof i,""))}return e=po(a,t,e,s),e.elementType=i,e.type=n,e.lanes=r,e}function Bp(i,e,t,n){return i=po(7,i,n,e),i.lanes=t,i}function vE(i,e,t,n){return i=po(22,i,n,e),i.elementType=oq,i.lanes=t,i.stateNode={isHidden:!1},i}function H2(i,e,t){return i=po(6,i,null,e),i.lanes=t,i}function V2(i,e,t){return e=po(4,i.children!==null?i.children:[],i.key,e),e.lanes=t,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function Pfe(i,e,t,n,s){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=C2(0),this.expirationTimes=C2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=C2(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function A3(i,e,t,n,s,r,a,o,l){return i=new Pfe(i,e,t,o,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=po(3,null,null,e),i.current=r,r.stateNode=i,r.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},l3(r),i}function Ofe(i,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vg,key:n==null?null:""+n,children:i,containerInfo:e,implementation:t}}function JZ(i){if(!i)return bd;i=i._reactInternals;e:{if(jf(i)!==i||i.tag!==1)throw Error(Se(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Kr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Se(171))}if(i.tag===1){var t=i.type;if(Kr(t))return Jq(i,t,e)}return e}function QZ(i,e,t,n,s,r,a,o,l){return i=A3(t,n,!0,i,s,r,a,o,l),i.context=JZ(null),t=i.current,n=Sr(),s=Kh(t),r=gu(n,s),r.callback=e??null,Wh(t,r,s),i.current.lanes=s,V1(i,s,n),Xr(i,n),i}function bE(i,e,t,n){var s=e.current,r=Sr(),a=Kh(s);return t=JZ(t),e.context===null?e.context=t:e.pendingContext=t,e=gu(r,a),e.payload={element:i},n=n===void 0?null:n,n!==null&&(e.callback=n),i=Wh(s,e,a),i!==null&&(ml(i,s,a,r),RC(i,s,a)),a}function zw(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Oz(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var t=i.retryLane;i.retryLane=t!==0&&t<e?t:e}}function k3(i,e){Oz(i,e),(i=i.alternate)&&Oz(i,e)}function Mfe(){return null}var eJ=typeof reportError=="function"?reportError:function(i){console.error(i)};function T3(i){this._internalRoot=i}xE.prototype.render=T3.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(Se(409));bE(i,e,null,null)};xE.prototype.unmount=T3.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;sf(function(){bE(null,i,null,null)}),e[ku]=null}};function xE(i){this._internalRoot=i}xE.prototype.unstable_scheduleHydration=function(i){if(i){var e=Mq();i={blockedOn:null,target:i,priority:e};for(var t=0;t<yh.length&&e!==0&&e<yh[t].priority;t++);yh.splice(t,0,i),t===0&&Rq(i)}};function E3(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function SE(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Mz(){}function Ife(i,e,t,n,s){if(s){if(typeof n=="function"){var r=n;n=function(){var c=zw(a);r.call(c)}}var a=QZ(e,n,i,0,null,!1,!1,"",Mz);return i._reactRootContainer=a,i[ku]=a.current,db(i.nodeType===8?i.parentNode:i),sf(),a}for(;s=i.lastChild;)i.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var c=zw(l);o.call(c)}}var l=A3(i,0,!1,null,null,!1,!1,"",Mz);return i._reactRootContainer=l,i[ku]=l.current,db(i.nodeType===8?i.parentNode:i),sf(function(){bE(e,l,t,n)}),l}function CE(i,e,t,n,s){var r=t._reactRootContainer;if(r){var a=r;if(typeof s=="function"){var o=s;s=function(){var l=zw(a);o.call(l)}}bE(e,a,i,s)}else a=Ife(t,e,i,s,n);return zw(a)}Pq=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var t=T_(e.pendingLanes);t!==0&&(KB(e,t|1),Xr(e,Fn()),!(ni&6)&&(ay=Fn()+500,Bd()))}break;case 13:sf(function(){var n=Tu(i,1);if(n!==null){var s=Sr();ml(n,i,1,s)}}),k3(i,1)}};XB=function(i){if(i.tag===13){var e=Tu(i,134217728);if(e!==null){var t=Sr();ml(e,i,134217728,t)}k3(i,134217728)}};Oq=function(i){if(i.tag===13){var e=Kh(i),t=Tu(i,e);if(t!==null){var n=Sr();ml(t,i,e,n)}k3(i,e)}};Mq=function(){return Ci};Iq=function(i,e){var t=Ci;try{return Ci=i,e()}finally{Ci=t}};bR=function(i,e,t){switch(e){case"input":if(pR(i,t),e=t.name,t.type==="radio"&&e!=null){for(t=i;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==i&&n.form===i.form){var s=pE(n);if(!s)throw Error(Se(90));cq(n),pR(n,s)}}}break;case"textarea":hq(i,t);break;case"select":e=t.value,e!=null&&Im(i,!!t.multiple,e,!1)}};_q=x3;vq=sf;var Rfe={usingClientEntryPoint:!1,Events:[W1,Xg,pE,mq,yq,x3]},U0={findFiberByHostInstance:vp,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lfe={bundleType:U0.bundleType,version:U0.version,rendererPackageName:U0.rendererPackageName,rendererConfig:U0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ju.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Sq(i),i===null?null:i.stateNode},findFiberByHostInstance:U0.findFiberByHostInstance||Mfe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _S=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_S.isDisabled&&_S.supportsFiber)try{cE=_S.inject(Lfe),dc=_S}catch{}}Ia.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rfe;Ia.createPortal=function(i,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E3(e))throw Error(Se(200));return Ofe(i,e,null,t)};Ia.createRoot=function(i,e){if(!E3(i))throw Error(Se(299));var t=!1,n="",s=eJ;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=A3(i,1,!1,null,null,t,!1,n,s),i[ku]=e.current,db(i.nodeType===8?i.parentNode:i),new T3(e)};Ia.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(Se(188)):(i=Object.keys(i).join(","),Error(Se(268,i)));return i=Sq(e),i=i===null?null:i.stateNode,i};Ia.flushSync=function(i){return sf(i)};Ia.hydrate=function(i,e,t){if(!SE(e))throw Error(Se(200));return CE(null,i,e,!0,t)};Ia.hydrateRoot=function(i,e,t){if(!E3(i))throw Error(Se(405));var n=t!=null&&t.hydratedSources||null,s=!1,r="",a=eJ;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=QZ(e,null,i,1,t??null,s,!1,r,a),i[ku]=e.current,db(i),n)for(i=0;i<n.length;i++)t=n[i],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new xE(e)};Ia.render=function(i,e,t){if(!SE(e))throw Error(Se(200));return CE(null,i,e,!1,t)};Ia.unmountComponentAtNode=function(i){if(!SE(i))throw Error(Se(40));return i._reactRootContainer?(sf(function(){CE(null,null,i,!1,function(){i._reactRootContainer=null,i[ku]=null})}),!0):!1};Ia.unstable_batchedUpdates=x3;Ia.unstable_renderSubtreeIntoContainer=function(i,e,t,n){if(!SE(t))throw Error(Se(200));if(i==null||i._reactInternals===void 0)throw Error(Se(38));return CE(i,e,t,!1,n)};Ia.version="18.3.1-next-f1338f8080-20240426";function tJ(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tJ)}catch(i){console.error(i)}}tJ(),tq.exports=Ia;var Nf=tq.exports;const vr=Xe(Nf);function Xy(){const i=new Date,e=i.getHours().toString().padStart(2,"0"),t=i.getMinutes().toString().padStart(2,"0"),n=i.getSeconds().toString().padStart(2,"0");return`${e}:${t}:${n}`}function Yh(){const i=dt("server_ip");return dt("use_https")==="true"?"https://"+i:"http://"+i}function Dfe(){if(pt("Try_Check_Browser_Version","successfully"),typeof window<"u"){const i=navigator.userAgent.toLowerCase();let e="Unknown",t="";const n=[{name:"edge",regex:/edg(?:e|a|ios)\/(\d+(\.\d+)?)/},{name:"chrome",regex:/(?!chromeframe)(?:chrome|crios)\/(\d+(\.\d+)?)/},{name:"firefox",regex:/firefox\/(\d+(\.\d+)?)/},{name:"safari",regex:/version\/(\d+(\.\d+)?).+?safari/},{name:"opera",regex:/(?:opera|opr)\/(\d+(\.\d+)?)/}];for(const s of n){const r=i.match(s.regex);if(r){e=s.name,t=r[1],pt("Check_Browser_Version","successfully",e+" == "+t);break}}return`${e.charAt(0).toUpperCase()+e.slice(1)}: ${t}`}}function fc(){const i=navigator.userAgent;pt("Get User Agent","successfully",i);const e=i.toLowerCase(),n=["android","webos","iphone","ipad","ipod","blackberry","windows phone"].some(s=>e.includes(s));return pt("Get User Device","successfully",n?"Phone":"PC/Tablet"),n?"Phone":"PC"}function Ffe(){let i=document.cookie.split(";"),e={};return i.forEach(t=>{let n=t.split("="),s=n.shift().trim(),r=n.join("=").trim();e[s]=r}),e}let zr=[{key:1,time:Xy(),event:"Create event recorder",result:"successfully",comment:"",color:"default"}],Iz=[];function pt(i,e="Null",t=""){Array.isArray(zr)||(zr=[]);const n={key:zr.length+1,time:Xy(),event:i.toLowerCase(),result:e,comment:t,color:e==="successfully"?"green":e==="warning"?"yellow":"red"};zr.push(n)}function iJ(i,e,t="Null",n=""){Array.isArray(zr)||(zr=[]);const s={key:zr.length+1,time:i,event:e,result:t,comment:n,color:t==="successfully"?"green":t==="warning"?"yellow":"red"};zr.push(s)}function Bfe(){zr.length=0,iJ(Xy(),"Clear_ALL_Logs","successfully")}function jfe(){fetch(Yh()+"/getlogs").then(i=>i.json()).then(i=>{i.forEach(e=>{const{timestamp:t,event:n,result:s,remark:r}=e;Iz.includes(n)||(iJ(t,n,s,r),Iz.push(n))})}).catch(i=>{console.error("",i)})}function Rz(){return jfe(),zr}function Lz(){return zr.filter(i=>i.result==="error")}function Dz(){return zr.filter(i=>i.result==="warning")}function Fz(){return zr.filter(i=>i.result==="successfully")}function Nfe(){function i(){let r=Ffe();if(Object.keys(r).length===0)return"No cookies found";let a="";for(const[o,l]of Object.entries(r))a+=`${o}: ${l}
`;return a.trim()}let e=`CCRS LOG
`;e+=`======Base Information=====
`,e+=`Tips:Basic information Lists the user's browser, UA, and device type information
`,e+=`Create Time: ${Xy()}
`,e+=`Browser: ${Dfe()}
`,e+=`Device Type: ${fc()}
`,e+=`UA: ${navigator.userAgent}

`,e+=`========Cookies=========
`,e+=`Tips:
`,e+=`The Cookies section records snapshots of cookies  information when users download logs
`,e+=`Cookies:
${i()}

`,e+=`========Storage=========
`,e+=`Tips:
`,e+=`The Storage section records snapshots of  application storage information when users download logs
`;const t=Hfe();e+=`Storages:
${t}

`,e+=`=========LOGS==========
`,e+=`Tips:Logs lists all logs generated by the user from the start of the program to the user's download log
`,e+=`Log:
`,e+=`Time	Event	Result	Comment
`,zr.forEach(r=>{e+=`${r.time}	${r.event}	${r.result}	${r.comment}
`});const n=new Blob([e],{type:"text/plain;charset=utf-8"}),s=document.createElement("a");s.href=URL.createObjectURL(n),s.download="CCRS_LOG.txt",s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}function $fe(i){try{return JSON.stringify(i)}catch(e){return pt("Settings:stringifyJson","error",e.message),null}}function zfe(i){try{return JSON.parse(i)}catch(e){return pt("Settings:parseJson","error",e.message),null}}function bi(i,e,t=!1,n=!1){try{return t&&(e=$fe(e),pt("Settings:setSetting:"+i,"successfully",e)),n?(sessionStorage.setItem(i,e),pt("Settings:setSetting:"+i,"successfully",e)):(localStorage.setItem(i,e),pt("Settings:setSetting:"+i,"successfully",e)),!0}catch(s){return pt("Settings:setSetting:"+i,"error",s.message),!1}}function dt(i,e=!1){try{let t;return t=sessionStorage.getItem(i)||localStorage.getItem(i),e&&(t=zfe(t)),pt("Settings:getSettings:"+i,Object.keys(t)?"successfully":"error",t),t||null}catch(t){return pt("Settings:getSettings:"+i,"error",t.message),null}}function Hfe(){if(localStorage.length===0)return"No local storage data found";let i="";for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e),n=localStorage.getItem(t);i+=`${t}: ${n}
`}return i.trim()}function Vfe(){return localStorage.clear(),"Done"}function kh(i){return dt("api_service",!0)["api_"+i]}function Ufe(i){console.log(i),bi("api_service",i,!0),pt("setAPIJson","successfully")}function Wfe(){bi("api_service",{api_isHTTPS:"/isHTTPS",api_clear:"/clear",api_getpicture:"/getpicture",api_start:"/start",api_upload:"/upload",api_test:"/test",api_info:"/info",command:"/command"},!0)}function Gfe(){let i=dt("api_service",!0),e=[];for(let t in i)e.push(t);return e}const xc=Object.create(null);xc.open="0";xc.close="1";xc.ping="2";xc.pong="3";xc.message="4";xc.upgrade="5";xc.noop="6";const $C=Object.create(null);Object.keys(xc).forEach(i=>{$C[xc[i]]=i});const QR={type:"error",data:"parser error"},nJ=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",sJ=typeof ArrayBuffer=="function",rJ=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer,P3=({type:i,data:e},t,n)=>nJ&&e instanceof Blob?t?n(e):Bz(e,n):sJ&&(e instanceof ArrayBuffer||rJ(e))?t?n(e):Bz(new Blob([e]),n):n(xc[i]+(e||"")),Bz=(i,e)=>{const t=new FileReader;return t.onload=function(){const n=t.result.split(",")[1];e("b"+(n||""))},t.readAsDataURL(i)};function jz(i){return i instanceof Uint8Array?i:i instanceof ArrayBuffer?new Uint8Array(i):new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}let U2;function Kfe(i,e){if(nJ&&i.data instanceof Blob)return i.data.arrayBuffer().then(jz).then(e);if(sJ&&(i.data instanceof ArrayBuffer||rJ(i.data)))return e(jz(i.data));P3(i,!1,t=>{U2||(U2=new TextEncoder),e(U2.encode(t))})}const Nz="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P_=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let i=0;i<Nz.length;i++)P_[Nz.charCodeAt(i)]=i;const Xfe=i=>{let e=i.length*.75,t=i.length,n,s=0,r,a,o,l;i[i.length-1]==="="&&(e--,i[i.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(n=0;n<t;n+=4)r=P_[i.charCodeAt(n)],a=P_[i.charCodeAt(n+1)],o=P_[i.charCodeAt(n+2)],l=P_[i.charCodeAt(n+3)],u[s++]=r<<2|a>>4,u[s++]=(a&15)<<4|o>>2,u[s++]=(o&3)<<6|l&63;return c},Yfe=typeof ArrayBuffer=="function",O3=(i,e)=>{if(typeof i!="string")return{type:"message",data:aJ(i,e)};const t=i.charAt(0);return t==="b"?{type:"message",data:qfe(i.substring(1),e)}:$C[t]?i.length>1?{type:$C[t],data:i.substring(1)}:{type:$C[t]}:QR},qfe=(i,e)=>{if(Yfe){const t=Xfe(i);return aJ(t,e)}else return{base64:!0,data:i}},aJ=(i,e)=>{switch(e){case"blob":return i instanceof Blob?i:new Blob([i]);case"arraybuffer":default:return i instanceof ArrayBuffer?i:i.buffer}},oJ="",Zfe=(i,e)=>{const t=i.length,n=new Array(t);let s=0;i.forEach((r,a)=>{P3(r,!1,o=>{n[a]=o,++s===t&&e(n.join(oJ))})})},Jfe=(i,e)=>{const t=i.split(oJ),n=[];for(let s=0;s<t.length;s++){const r=O3(t[s],e);if(n.push(r),r.type==="error")break}return n};function Qfe(){return new TransformStream({transform(i,e){Kfe(i,t=>{const n=t.length;let s;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);const r=new DataView(s.buffer);r.setUint8(0,126),r.setUint16(1,n)}else{s=new Uint8Array(9);const r=new DataView(s.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(n))}i.data&&typeof i.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(t)})}})}let W2;function vS(i){return i.reduce((e,t)=>e+t.length,0)}function bS(i,e){if(i[0].length===e)return i.shift();const t=new Uint8Array(e);let n=0;for(let s=0;s<e;s++)t[s]=i[0][n++],n===i[0].length&&(i.shift(),n=0);return i.length&&n<i[0].length&&(i[0]=i[0].slice(n)),t}function ege(i,e){W2||(W2=new TextDecoder);const t=[];let n=0,s=-1,r=!1;return new TransformStream({transform(a,o){for(t.push(a);;){if(n===0){if(vS(t)<1)break;const l=bS(t,1);r=(l[0]&128)===128,s=l[0]&127,s<126?n=3:s===126?n=1:n=2}else if(n===1){if(vS(t)<2)break;const l=bS(t,2);s=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),n=3}else if(n===2){if(vS(t)<8)break;const l=bS(t,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){o.enqueue(QR);break}s=u*Math.pow(2,32)+c.getUint32(4),n=3}else{if(vS(t)<s)break;const l=bS(t,s);o.enqueue(O3(r?l:W2.decode(l),e)),n=0}if(s===0||s>i){o.enqueue(QR);break}}}})}const lJ=4;function Yn(i){if(i)return tge(i)}function tge(i){for(var e in Yn.prototype)i[e]=Yn.prototype[e];return i}Yn.prototype.on=Yn.prototype.addEventListener=function(i,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(e),this};Yn.prototype.once=function(i,e){function t(){this.off(i,t),e.apply(this,arguments)}return t.fn=e,this.on(i,t),this};Yn.prototype.off=Yn.prototype.removeListener=Yn.prototype.removeAllListeners=Yn.prototype.removeEventListener=function(i,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+i];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var n,s=0;s<t.length;s++)if(n=t[s],n===e||n.fn===e){t.splice(s,1);break}return t.length===0&&delete this._callbacks["$"+i],this};Yn.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+i],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){t=t.slice(0);for(var n=0,s=t.length;n<s;++n)t[n].apply(this,e)}return this};Yn.prototype.emitReserved=Yn.prototype.emit;Yn.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]};Yn.prototype.hasListeners=function(i){return!!this.listeners(i).length};const wE=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),to=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),ige="arraybuffer";function cJ(i,...e){return e.reduce((t,n)=>(i.hasOwnProperty(n)&&(t[n]=i[n]),t),{})}const nge=to.setTimeout,sge=to.clearTimeout;function AE(i,e){e.useNativeTimers?(i.setTimeoutFn=nge.bind(to),i.clearTimeoutFn=sge.bind(to)):(i.setTimeoutFn=to.setTimeout.bind(to),i.clearTimeoutFn=to.clearTimeout.bind(to))}const rge=1.33;function age(i){return typeof i=="string"?oge(i):Math.ceil((i.byteLength||i.size)*rge)}function oge(i){let e=0,t=0;for(let n=0,s=i.length;n<s;n++)e=i.charCodeAt(n),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(n++,t+=4);return t}function uJ(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function lge(i){let e="";for(let t in i)i.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(i[t]));return e}function cge(i){let e={},t=i.split("&");for(let n=0,s=t.length;n<s;n++){let r=t[n].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}class uge extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class M3 extends Yn{constructor(e){super(),this.writable=!1,AE(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new uge(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=O3(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=lge(e);return t.length?"?"+t:""}}class hge extends M3{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||t()})),this.writable||(n++,this.once("drain",function(){--n||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Jfe(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Zfe(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=uJ()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let hJ=!1;try{hJ=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const dge=hJ;function pge(){}class fge extends hge{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let n=location.port;n||(n=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(s,r)=>{this.onError("xhr post error",s,r)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,n)=>{this.onError("xhr poll error",t,n)}),this.pollXhr=e}}class gc extends Yn{constructor(e,t,n){super(),this.createRequest=e,AE(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const t=cJ(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&n.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var s;n.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=gc.requestsCount++,gc.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=pge,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete gc.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}gc.requestsCount=0;gc.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",$z);else if(typeof addEventListener=="function"){const i="onpagehide"in to?"pagehide":"unload";addEventListener(i,$z,!1)}}function $z(){for(let i in gc.requests)gc.requests.hasOwnProperty(i)&&gc.requests[i].abort()}const gge=function(){const i=dJ({xdomain:!1});return i&&i.responseType!==null}();class mge extends fge{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=gge&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new gc(dJ,this.uri(),e)}}function dJ(i){const e=i.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||dge))return new XMLHttpRequest}catch{}if(!e)try{return new to[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const pJ=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class yge extends M3{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=pJ?{}:cJ(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],s=t===e.length-1;P3(n,this.supportsBinary,r=>{try{this.doWrite(n,r)}catch{}s&&wE(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=uJ()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const G2=to.WebSocket||to.MozWebSocket;class _ge extends yge{createSocket(e,t,n){return pJ?new G2(e,t,n):t?new G2(e,t):new G2(e)}doWrite(e,t){this.ws.send(t)}}class vge extends M3{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=ege(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),s=Qfe();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const r=()=>{n.read().then(({done:o,value:l})=>{o||(this.onPacket(l),r())}).catch(o=>{})};r();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],s=t===e.length-1;this._writer.write(n).then(()=>{s&&wE(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const bge={websocket:_ge,webtransport:vge,polling:mge},xge=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Sge=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function eL(i){if(i.length>8e3)throw"URI too long";const e=i,t=i.indexOf("["),n=i.indexOf("]");t!=-1&&n!=-1&&(i=i.substring(0,t)+i.substring(t,n).replace(/:/g,";")+i.substring(n,i.length));let s=xge.exec(i||""),r={},a=14;for(;a--;)r[Sge[a]]=s[a]||"";return t!=-1&&n!=-1&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=Cge(r,r.path),r.queryKey=wge(r,r.query),r}function Cge(i,e){const t=/\/{2,9}/g,n=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function wge(i,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,s,r){s&&(t[s]=r)}),t}const tL=typeof addEventListener=="function"&&typeof removeEventListener=="function",zC=[];tL&&addEventListener("offline",()=>{zC.forEach(i=>i())},!1);class qh extends Yn{constructor(e,t){if(super(),this.binaryType=ige,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const n=eL(e);t.hostname=n.host,t.secure=n.protocol==="https"||n.protocol==="wss",t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=eL(t.host).host);AE(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(n=>{const s=n.prototype.name;this.transports.push(s),this._transportsByName[s]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=cge(this.opts.query)),tL&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},zC.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=lJ,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&qh.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",qh.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const s=this.writeBuffer[n].data;if(s&&(t+=age(s)),n>0&&t>this._maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,wE(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,s){if(typeof t=="function"&&(s=t,t=void 0),typeof n=="function"&&(s=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const r={type:e,data:t,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(qh.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),tL&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=zC.indexOf(this._offlineEventListener);n!==-1&&zC.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}qh.protocol=lJ;class Age extends qh{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;qh.priorWebsocketSuccess=!1;const s=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",h=>{if(!n)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;qh.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=t.name,this.emitReserved("upgradeError",d)}}))};function r(){n||(n=!0,u(),t.close(),t=null)}const a=h=>{const d=new Error("probe error: "+h);d.transport=t.name,r(),this.emitReserved("upgradeError",d)};function o(){a("transport closed")}function l(){a("socket closed")}function c(h){t&&h.name!==t.name&&r()}const u=()=>{t.removeListener("open",s),t.removeListener("error",a),t.removeListener("close",o),this.off("close",l),this.off("upgrading",c)};t.once("open",s),t.once("error",a),t.once("close",o),this.once("close",l),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}let kge=class extends Age{constructor(e,t={}){const n=typeof e=="object"?e:t;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(s=>bge[s]).filter(s=>!!s)),super(e,n)}};function Tge(i,e="",t){let n=i;t=t||typeof location<"u"&&location,i==null&&(i=t.protocol+"//"+t.host),typeof i=="string"&&(i.charAt(0)==="/"&&(i.charAt(1)==="/"?i=t.protocol+i:i=t.host+i),/^(https?|wss?):\/\//.test(i)||(typeof t<"u"?i=t.protocol+"//"+i:i="https://"+i),n=eL(i)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const r=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+r+":"+n.port+e,n.href=n.protocol+"://"+r+(t&&t.port===n.port?"":":"+n.port),n}const Ege=typeof ArrayBuffer=="function",Pge=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i.buffer instanceof ArrayBuffer,fJ=Object.prototype.toString,Oge=typeof Blob=="function"||typeof Blob<"u"&&fJ.call(Blob)==="[object BlobConstructor]",Mge=typeof File=="function"||typeof File<"u"&&fJ.call(File)==="[object FileConstructor]";function I3(i){return Ege&&(i instanceof ArrayBuffer||Pge(i))||Oge&&i instanceof Blob||Mge&&i instanceof File}function HC(i,e){if(!i||typeof i!="object")return!1;if(Array.isArray(i)){for(let t=0,n=i.length;t<n;t++)if(HC(i[t]))return!0;return!1}if(I3(i))return!0;if(i.toJSON&&typeof i.toJSON=="function"&&arguments.length===1)return HC(i.toJSON(),!0);for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&HC(i[t]))return!0;return!1}function Ige(i){const e=[],t=i.data,n=i;return n.data=iL(t,e),n.attachments=e.length,{packet:n,buffers:e}}function iL(i,e){if(!i)return i;if(I3(i)){const t={_placeholder:!0,num:e.length};return e.push(i),t}else if(Array.isArray(i)){const t=new Array(i.length);for(let n=0;n<i.length;n++)t[n]=iL(i[n],e);return t}else if(typeof i=="object"&&!(i instanceof Date)){const t={};for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=iL(i[n],e));return t}return i}function Rge(i,e){return i.data=nL(i.data,e),delete i.attachments,i}function nL(i,e){if(!i)return i;if(i&&i._placeholder===!0){if(typeof i.num=="number"&&i.num>=0&&i.num<e.length)return e[i.num];throw new Error("illegal attachments")}else if(Array.isArray(i))for(let t=0;t<i.length;t++)i[t]=nL(i[t],e);else if(typeof i=="object")for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&(i[t]=nL(i[t],e));return i}const Lge=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Dge=5;var Gt;(function(i){i[i.CONNECT=0]="CONNECT",i[i.DISCONNECT=1]="DISCONNECT",i[i.EVENT=2]="EVENT",i[i.ACK=3]="ACK",i[i.CONNECT_ERROR=4]="CONNECT_ERROR",i[i.BINARY_EVENT=5]="BINARY_EVENT",i[i.BINARY_ACK=6]="BINARY_ACK"})(Gt||(Gt={}));class Fge{constructor(e){this.replacer=e}encode(e){return(e.type===Gt.EVENT||e.type===Gt.ACK)&&HC(e)?this.encodeAsBinary({type:e.type===Gt.EVENT?Gt.BINARY_EVENT:Gt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===Gt.BINARY_EVENT||e.type===Gt.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Ige(e),n=this.encodeAsString(t.packet),s=t.buffers;return s.unshift(n),s}}function zz(i){return Object.prototype.toString.call(i)==="[object Object]"}class R3 extends Yn{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Gt.BINARY_EVENT;n||t.type===Gt.BINARY_ACK?(t.type=n?Gt.EVENT:Gt.ACK,this.reconstructor=new Bge(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(I3(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(Gt[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Gt.BINARY_EVENT||n.type===Gt.BINARY_ACK){const r=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const a=e.substring(r,t);if(a!=Number(a)||e.charAt(t)!=="-")throw new Error("Illegal attachments");n.attachments=Number(a)}if(e.charAt(t+1)==="/"){const r=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););n.nsp=e.substring(r,t)}else n.nsp="/";const s=e.charAt(t+1);if(s!==""&&Number(s)==s){const r=t+1;for(;++t;){const a=e.charAt(t);if(a==null||Number(a)!=a){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(R3.isPayloadValid(n.type,r))n.data=r;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case Gt.CONNECT:return zz(t);case Gt.DISCONNECT:return t===void 0;case Gt.CONNECT_ERROR:return typeof t=="string"||zz(t);case Gt.EVENT:case Gt.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&Lge.indexOf(t[0])===-1);case Gt.ACK:case Gt.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Bge{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=Rge(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const jge=Object.freeze(Object.defineProperty({__proto__:null,Decoder:R3,Encoder:Fge,get PacketType(){return Gt},protocol:Dge},Symbol.toStringTag,{value:"Module"}));function Jo(i,e,t){return i.on(e,t),function(){i.off(e,t)}}const Nge=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class gJ extends Yn{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Jo(e,"open",this.onopen.bind(this)),Jo(e,"packet",this.onpacket.bind(this)),Jo(e,"error",this.onerror.bind(this)),Jo(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,s,r;if(Nge.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const a={type:Gt.EVENT,data:t};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const u=this.ids++,h=t.pop();this._registerAckCallback(u,h),a.id=u}const o=(s=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||s===void 0?void 0:s.writable,l=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!o||(l?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var n;const s=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(s===void 0){this.acks[e]=t;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);t.call(this,new Error("operation has timed out"))},s),a=(...o)=>{this.io.clearTimeoutFn(r),t.apply(this,o)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...t){return new Promise((n,s)=>{const r=(a,o)=>a?s(a):n(o);r.withError=!0,t.push(r),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...r)=>n!==this._queue[0]?void 0:(s!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(s)):(this._queue.shift(),t&&t(null,...r)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Gt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Gt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Gt.EVENT:case Gt.BINARY_EVENT:this.onevent(e);break;case Gt.ACK:case Gt.BINARY_ACK:this.onack(e);break;case Gt.DISCONNECT:this.ondisconnect();break;case Gt.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...s){n||(n=!0,t.packet({type:Gt.ACK,id:e,data:s}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Gt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Yy(i){i=i||{},this.ms=i.min||100,this.max=i.max||1e4,this.factor=i.factor||2,this.jitter=i.jitter>0&&i.jitter<=1?i.jitter:0,this.attempts=0}Yy.prototype.duration=function(){var i=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*i);i=Math.floor(e*10)&1?i+t:i-t}return Math.min(i,this.max)|0};Yy.prototype.reset=function(){this.attempts=0};Yy.prototype.setMin=function(i){this.ms=i};Yy.prototype.setMax=function(i){this.max=i};Yy.prototype.setJitter=function(i){this.jitter=i};class sL extends Yn{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,AE(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((n=t.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Yy({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const s=t.parser||jge;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new kge(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=Jo(t,"open",function(){n.onopen(),e&&e()}),r=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),e?e(o):this.maybeReconnectOnOpen()},a=Jo(t,"error",r);if(this._timeout!==!1){const o=this._timeout,l=this.setTimeoutFn(()=>{s(),r(new Error("timeout")),t.close()},o);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(s),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Jo(e,"ping",this.onping.bind(this)),Jo(e,"data",this.ondata.bind(this)),Jo(e,"error",this.onerror.bind(this)),Jo(e,"close",this.onclose.bind(this)),Jo(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){wE(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new gJ(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t)if(this.nsps[n].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const W0={};function VC(i,e){typeof i=="object"&&(e=i,i=void 0),e=e||{};const t=Tge(i,e.path||"/socket.io"),n=t.source,s=t.id,r=t.path,a=W0[s]&&r in W0[s].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let l;return o?l=new sL(n,e):(W0[s]||(W0[s]=new sL(n,e)),l=W0[s]),t.query&&!e.query&&(e.query=t.queryKey),l.socket(t.path,e)}Object.assign(VC,{Manager:sL,Socket:gJ,io:VC,connect:VC});function $ge(){}var zge=$ge;const J=Xe(zge);var Hge=Array.isArray,_s=Hge;const Vge=Xe(_s);var Uge=typeof Hg=="object"&&Hg&&Hg.Object===Object&&Hg,mJ=Uge,Wge=mJ,Gge=typeof self=="object"&&self&&self.Object===Object&&self,Kge=Wge||Gge||Function("return this")(),Ol=Kge,Xge=Ol,Yge=Xge.Symbol,qy=Yge,Hz=qy,yJ=Object.prototype,qge=yJ.hasOwnProperty,Zge=yJ.toString,G0=Hz?Hz.toStringTag:void 0;function Jge(i){var e=qge.call(i,G0),t=i[G0];try{i[G0]=void 0;var n=!0}catch{}var s=Zge.call(i);return n&&(e?i[G0]=t:delete i[G0]),s}var Qge=Jge,eme=Object.prototype,tme=eme.toString;function ime(i){return tme.call(i)}var nme=ime,Vz=qy,sme=Qge,rme=nme,ame="[object Null]",ome="[object Undefined]",Uz=Vz?Vz.toStringTag:void 0;function lme(i){return i==null?i===void 0?ome:ame:Uz&&Uz in Object(i)?sme(i):rme(i)}var Mc=lme;function cme(i){return i!=null&&typeof i=="object"}var La=cme,ume=Mc,hme=La,dme="[object Symbol]";function pme(i){return typeof i=="symbol"||hme(i)&&ume(i)==dme}var kE=pme,fme=_s,gme=kE,mme=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yme=/^\w*$/;function _me(i,e){if(fme(i))return!1;var t=typeof i;return t=="number"||t=="symbol"||t=="boolean"||i==null||gme(i)?!0:yme.test(i)||!mme.test(i)||e!=null&&i in Object(e)}var L3=_me;function vme(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var Jr=vme;const As=Xe(Jr);var bme=Mc,xme=Jr,Sme="[object AsyncFunction]",Cme="[object Function]",wme="[object GeneratorFunction]",Ame="[object Proxy]";function kme(i){if(!xme(i))return!1;var e=bme(i);return e==Cme||e==wme||e==Sme||e==Ame}var TE=kme;const xt=Xe(TE);var Tme=Ol,Eme=Tme["__core-js_shared__"],Pme=Eme,K2=Pme,Wz=function(){var i=/[^.]+$/.exec(K2&&K2.keys&&K2.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function Ome(i){return!!Wz&&Wz in i}var Mme=Ome,Ime=Function.prototype,Rme=Ime.toString;function Lme(i){if(i!=null){try{return Rme.call(i)}catch{}try{return i+""}catch{}}return""}var _J=Lme,Dme=TE,Fme=Mme,Bme=Jr,jme=_J,Nme=/[\\^$.*+?()[\]{}|]/g,$me=/^\[object .+?Constructor\]$/,zme=Function.prototype,Hme=Object.prototype,Vme=zme.toString,Ume=Hme.hasOwnProperty,Wme=RegExp("^"+Vme.call(Ume).replace(Nme,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Gme(i){if(!Bme(i)||Fme(i))return!1;var e=Dme(i)?Wme:$me;return e.test(jme(i))}var Kme=Gme;function Xme(i,e){return i==null?void 0:i[e]}var Yme=Xme,qme=Kme,Zme=Yme;function Jme(i,e){var t=Zme(i,e);return qme(t)?t:void 0}var $f=Jme,Qme=$f,eye=Qme(Object,"create"),EE=eye,Gz=EE;function tye(){this.__data__=Gz?Gz(null):{},this.size=0}var iye=tye;function nye(i){var e=this.has(i)&&delete this.__data__[i];return this.size-=e?1:0,e}var sye=nye,rye=EE,aye="__lodash_hash_undefined__",oye=Object.prototype,lye=oye.hasOwnProperty;function cye(i){var e=this.__data__;if(rye){var t=e[i];return t===aye?void 0:t}return lye.call(e,i)?e[i]:void 0}var uye=cye,hye=EE,dye=Object.prototype,pye=dye.hasOwnProperty;function fye(i){var e=this.__data__;return hye?e[i]!==void 0:pye.call(e,i)}var gye=fye,mye=EE,yye="__lodash_hash_undefined__";function _ye(i,e){var t=this.__data__;return this.size+=this.has(i)?0:1,t[i]=mye&&e===void 0?yye:e,this}var vye=_ye,bye=iye,xye=sye,Sye=uye,Cye=gye,wye=vye;function Zy(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}Zy.prototype.clear=bye;Zy.prototype.delete=xye;Zy.prototype.get=Sye;Zy.prototype.has=Cye;Zy.prototype.set=wye;var Aye=Zy;function kye(){this.__data__=[],this.size=0}var Tye=kye;function Eye(i,e){return i===e||i!==i&&e!==e}var K1=Eye,Pye=K1;function Oye(i,e){for(var t=i.length;t--;)if(Pye(i[t][0],e))return t;return-1}var PE=Oye,Mye=PE,Iye=Array.prototype,Rye=Iye.splice;function Lye(i){var e=this.__data__,t=Mye(e,i);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():Rye.call(e,t,1),--this.size,!0}var Dye=Lye,Fye=PE;function Bye(i){var e=this.__data__,t=Fye(e,i);return t<0?void 0:e[t][1]}var jye=Bye,Nye=PE;function $ye(i){return Nye(this.__data__,i)>-1}var zye=$ye,Hye=PE;function Vye(i,e){var t=this.__data__,n=Hye(t,i);return n<0?(++this.size,t.push([i,e])):t[n][1]=e,this}var Uye=Vye,Wye=Tye,Gye=Dye,Kye=jye,Xye=zye,Yye=Uye;function Jy(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}Jy.prototype.clear=Wye;Jy.prototype.delete=Gye;Jy.prototype.get=Kye;Jy.prototype.has=Xye;Jy.prototype.set=Yye;var OE=Jy,qye=$f,Zye=Ol,Jye=qye(Zye,"Map"),D3=Jye,Kz=Aye,Qye=OE,e0e=D3;function t0e(){this.size=0,this.__data__={hash:new Kz,map:new(e0e||Qye),string:new Kz}}var i0e=t0e;function n0e(i){var e=typeof i;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?i!=="__proto__":i===null}var s0e=n0e,r0e=s0e;function a0e(i,e){var t=i.__data__;return r0e(e)?t[typeof e=="string"?"string":"hash"]:t.map}var ME=a0e,o0e=ME;function l0e(i){var e=o0e(this,i).delete(i);return this.size-=e?1:0,e}var c0e=l0e,u0e=ME;function h0e(i){return u0e(this,i).get(i)}var d0e=h0e,p0e=ME;function f0e(i){return p0e(this,i).has(i)}var g0e=f0e,m0e=ME;function y0e(i,e){var t=m0e(this,i),n=t.size;return t.set(i,e),this.size+=t.size==n?0:1,this}var _0e=y0e,v0e=i0e,b0e=c0e,x0e=d0e,S0e=g0e,C0e=_0e;function Qy(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}Qy.prototype.clear=v0e;Qy.prototype.delete=b0e;Qy.prototype.get=x0e;Qy.prototype.has=S0e;Qy.prototype.set=C0e;var F3=Qy,vJ=F3,w0e="Expected a function";function B3(i,e){if(typeof i!="function"||e!=null&&typeof e!="function")throw new TypeError(w0e);var t=function(){var n=arguments,s=e?e.apply(this,n):n[0],r=t.cache;if(r.has(s))return r.get(s);var a=i.apply(this,n);return t.cache=r.set(s,a)||r,a};return t.cache=new(B3.Cache||vJ),t}B3.Cache=vJ;var A0e=B3,k0e=A0e,T0e=500;function E0e(i){var e=k0e(i,function(n){return t.size===T0e&&t.clear(),n}),t=e.cache;return e}var P0e=E0e,O0e=P0e,M0e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,I0e=/\\(\\)?/g,R0e=O0e(function(i){var e=[];return i.charCodeAt(0)===46&&e.push(""),i.replace(M0e,function(t,n,s,r){e.push(s?r.replace(I0e,"$1"):n||t)}),e}),L0e=R0e;function D0e(i,e){for(var t=-1,n=i==null?0:i.length,s=Array(n);++t<n;)s[t]=e(i[t],t,i);return s}var e0=D0e,Xz=qy,F0e=e0,B0e=_s,j0e=kE,N0e=1/0,Yz=Xz?Xz.prototype:void 0,qz=Yz?Yz.toString:void 0;function bJ(i){if(typeof i=="string")return i;if(B0e(i))return F0e(i,bJ)+"";if(j0e(i))return qz?qz.call(i):"";var e=i+"";return e=="0"&&1/i==-N0e?"-0":e}var xJ=bJ,$0e=xJ;function z0e(i){return i==null?"":$0e(i)}var j3=z0e;const hh=Xe(j3);var H0e=_s,V0e=L3,U0e=L0e,W0e=j3;function G0e(i,e){return H0e(i)?i:V0e(i,e)?[i]:U0e(W0e(i))}var t0=G0e,K0e=kE,X0e=1/0;function Y0e(i){if(typeof i=="string"||K0e(i))return i;var e=i+"";return e=="0"&&1/i==-X0e?"-0":e}var i0=Y0e,q0e=t0,Z0e=i0;function J0e(i,e){e=q0e(e,i);for(var t=0,n=e.length;i!=null&&t<n;)i=i[Z0e(e[t++])];return t&&t==n?i:void 0}var IE=J0e,Q0e=IE;function e_e(i,e,t){var n=i==null?void 0:Q0e(i,e);return n===void 0?t:n}var SJ=e_e;const ne=Xe(SJ),CJ=function(i){if(ne(process,"env.NODE_ENV")==="development"){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];console.log(i,...t)}};class tt{static get cssClasses(){return{}}static get strings(){return{}}static get numbers(){return{}}static get defaultAdapter(){return{getProp:J,getProps:J,getState:J,getStates:J,setState:J,getContext:J,getContexts:J,getCache:J,setCache:J,getCaches:J,stopPropagation:J,persistEvent:J}}constructor(e){this._adapter=Object.assign(Object.assign({},tt.defaultAdapter),e)}getProp(e){return this._adapter.getProp(e)}getProps(){return this._adapter.getProps()}getState(e){return this._adapter.getState(e)}getStates(){return this._adapter.getStates()}setState(e,t){return this._adapter.setState(Object.assign({},e),t)}getContext(e){return this._adapter.getContext(e)}getContexts(){return this._adapter.getContexts()}getCaches(){return this._adapter.getCaches()}getCache(e){return this._adapter.getCache(e)}setCache(e,t){return e&&this._adapter.setCache(e,t)}stopPropagation(e){this._adapter.stopPropagation(e)}_isControlledComponent(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"value";const t=this.getProps();return e in t}_isInProps(e){const t=this.getProps();return e in t}init(e){}destroy(){}log(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];CJ(e,...n)}_persistEvent(e){this._adapter.persistEvent(e)}}function Sl(i){return Object.keys(i).reduce((e,t)=>(t.substr(0,5)==="data-"&&(e[t]=i[t]),e),{})}const{hasOwnProperty:t_e}=Object.prototype;let Ve=class extends H.Component{constructor(e){super(e),this.isControlled=t=>!!(t&&this.props&&typeof this.props=="object"&&t_e.call(this.props,t)),this.setStateAsync=t=>new Promise(n=>{this.setState(t,n)}),this.cache={},this.foundation=null}componentDidMount(){this.foundation&&typeof this.foundation.init=="function"&&this.foundation.init()}componentWillUnmount(){this.foundation&&typeof this.foundation.destroy=="function"&&this.foundation.destroy(),this.cache={}}get adapter(){return{getContext:e=>{if(this.context&&e)return this.context[e]},getContexts:()=>this.context,getProp:e=>this.props[e],getProps:()=>this.props,getState:e=>this.state[e],getStates:()=>this.state,setState:(e,t)=>this.setState(Object.assign({},e),t),getCache:e=>e&&this.cache[e],getCaches:()=>this.cache,setCache:(e,t)=>e&&(this.cache[e]=t),stopPropagation:e=>{try{e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation()}catch{}},persistEvent:e=>{e&&e.persist&&typeof e.persist=="function"&&e.persist()}}}log(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return CJ(e,...n)}getDataAttr(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return Sl(e)}};Ve.propTypes={};Ve.defaultProps={};var i_e=Ol,n_e=function(){return i_e.Date.now()},s_e=n_e,r_e=/\s/;function a_e(i){for(var e=i.length;e--&&r_e.test(i.charAt(e)););return e}var o_e=a_e,l_e=o_e,c_e=/^\s+/;function u_e(i){return i&&i.slice(0,l_e(i)+1).replace(c_e,"")}var h_e=u_e,d_e=h_e,Zz=Jr,p_e=kE,Jz=NaN,f_e=/^[-+]0x[0-9a-f]+$/i,g_e=/^0b[01]+$/i,m_e=/^0o[0-7]+$/i,y_e=parseInt;function __e(i){if(typeof i=="number")return i;if(p_e(i))return Jz;if(Zz(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=Zz(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=d_e(i);var t=g_e.test(i);return t||m_e.test(i)?y_e(i.slice(2),t?2:8):f_e.test(i)?Jz:+i}var N3=__e;const K0=Xe(N3);var v_e=Jr,X2=s_e,Qz=N3,b_e="Expected a function",x_e=Math.max,S_e=Math.min;function C_e(i,e,t){var n,s,r,a,o,l,c=0,u=!1,h=!1,d=!0;if(typeof i!="function")throw new TypeError(b_e);e=Qz(e)||0,v_e(t)&&(u=!!t.leading,h="maxWait"in t,r=h?x_e(Qz(t.maxWait)||0,e):r,d="trailing"in t?!!t.trailing:d);function p(w){var A=n,T=s;return n=s=void 0,c=w,a=i.apply(T,A),a}function f(w){return c=w,o=setTimeout(y,e),u?p(w):a}function g(w){var A=w-l,T=w-c,E=e-A;return h?S_e(E,r-T):E}function m(w){var A=w-l,T=w-c;return l===void 0||A>=e||A<0||h&&T>=r}function y(){var w=X2();if(m(w))return b(w);o=setTimeout(y,g(w))}function b(w){return o=void 0,d&&n?p(w):(n=s=void 0,a)}function x(){o!==void 0&&clearTimeout(o),c=0,n=l=s=o=void 0}function S(){return o===void 0?a:b(X2())}function C(){var w=X2(),A=m(w);if(n=arguments,s=this,l=w,A){if(o===void 0)return f(l);if(h)return clearTimeout(o),o=setTimeout(y,e),p(l)}return o===void 0&&(o=setTimeout(y,e)),a}return C.cancel=x,C.flush=S,C}var wJ=C_e;const Hw=Xe(wJ);var w_e=wJ,A_e=Jr,k_e="Expected a function";function T_e(i,e,t){var n=!0,s=!0;if(typeof i!="function")throw new TypeError(k_e);return A_e(t)&&(n="leading"in t?!!t.leading:n,s="trailing"in t?!!t.trailing:s),w_e(i,e,{leading:n,maxWait:e,trailing:s})}var E_e=T_e;const xb=Xe(E_e);var AJ={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(i){(function(){var e={}.hasOwnProperty;function t(){for(var r="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(r=s(r,n(o)))}return r}function n(r){if(typeof r=="string"||typeof r=="number")return r;if(typeof r!="object")return"";if(Array.isArray(r))return t.apply(null,r);if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]"))return r.toString();var a="";for(var o in r)e.call(r,o)&&r[o]&&(a=s(a,o));return a}function s(r,a){return a?r?r+" "+a:r+a:r}i.exports?(t.default=t,i.exports=t):window.classNames=t})()})(AJ);var P_e=AJ.exports;const K=Xe(P_e);var kJ={exports:{}},O_e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",M_e=O_e,I_e=M_e;function TJ(){}function EJ(){}EJ.resetWarningCache=TJ;var R_e=function(){function i(n,s,r,a,o,l){if(l!==I_e){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}i.isRequired=i;function e(){return i}var t={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:e,element:i,elementType:i,instanceOf:e,node:i,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:EJ,resetWarningCache:TJ};return t.PropTypes=t,t};kJ.exports=R_e();var X1=kJ.exports;const v=Xe(X1),ge="semi",$3=["default","error","warning","success"],RE={PREFIX:`${ge}-typography`},Js={WEIGHT:["light","regular","medium","semibold","bold","default"],TYPE:["primary","secondary","danger","warning","success","tertiary","quaternary"],SIZE:["normal","small","inherit"],SPACING:["normal","extended"],HEADING:[1,2,3,4,5,6],RULE:["text","numbers","bytes-decimal","bytes-binary","percentages","exponential"],TRUNCATE:["ceil","floor","round"]};var L_e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const D_e=RE.PREFIX;let LE=class extends H.PureComponent{render(){const e=this.props,{component:t,className:n,children:s,forwardRef:r}=e,a=L_e(e,["component","className","children","forwardRef"]),o=t,l=K(D_e,n);return k.createElement(o,Object.assign({className:l,ref:r},a),s)}};LE.defaultProps={component:"article",style:{},className:""};LE.propTypes={component:v.string,style:v.object,className:v.string};function F_e(i){return i===null}var B_e=F_e;const z3=Xe(B_e);var j_e=Mc,N_e=_s,$_e=La,z_e="[object String]";function H_e(i){return typeof i=="string"||!N_e(i)&&$_e(i)&&j_e(i)==z_e}var H3=H_e;const Ii=Xe(H3);var V_e=OE;function U_e(){this.__data__=new V_e,this.size=0}var W_e=U_e;function G_e(i){var e=this.__data__,t=e.delete(i);return this.size=e.size,t}var K_e=G_e;function X_e(i){return this.__data__.get(i)}var Y_e=X_e;function q_e(i){return this.__data__.has(i)}var Z_e=q_e,J_e=OE,Q_e=D3,eve=F3,tve=200;function ive(i,e){var t=this.__data__;if(t instanceof J_e){var n=t.__data__;if(!Q_e||n.length<tve-1)return n.push([i,e]),this.size=++t.size,this;t=this.__data__=new eve(n)}return t.set(i,e),this.size=t.size,this}var nve=ive,sve=OE,rve=W_e,ave=K_e,ove=Y_e,lve=Z_e,cve=nve;function n0(i){var e=this.__data__=new sve(i);this.size=e.size}n0.prototype.clear=rve;n0.prototype.delete=ave;n0.prototype.get=ove;n0.prototype.has=lve;n0.prototype.set=cve;var DE=n0,uve=$f,hve=function(){try{var i=uve(Object,"defineProperty");return i({},"",{}),i}catch{}}(),PJ=hve,e6=PJ;function dve(i,e,t){e=="__proto__"&&e6?e6(i,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):i[e]=t}var V3=dve,pve=V3,fve=K1;function gve(i,e,t){(t!==void 0&&!fve(i[e],t)||t===void 0&&!(e in i))&&pve(i,e,t)}var OJ=gve;function mve(i){return function(e,t,n){for(var s=-1,r=Object(e),a=n(e),o=a.length;o--;){var l=a[i?o:++s];if(t(r[l],l,r)===!1)break}return e}}var yve=mve,_ve=yve,vve=_ve(),MJ=vve,Vw={exports:{}};Vw.exports;(function(i,e){var t=Ol,n=e&&!e.nodeType&&e,s=n&&!0&&i&&!i.nodeType&&i,r=s&&s.exports===n,a=r?t.Buffer:void 0,o=a?a.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var h=c.length,d=o?o(h):new c.constructor(h);return c.copy(d),d}i.exports=l})(Vw,Vw.exports);var IJ=Vw.exports,bve=Ol,xve=bve.Uint8Array,RJ=xve,t6=RJ;function Sve(i){var e=new i.constructor(i.byteLength);return new t6(e).set(new t6(i)),e}var U3=Sve,Cve=U3;function wve(i,e){var t=e?Cve(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.length)}var LJ=wve;function Ave(i,e){var t=-1,n=i.length;for(e||(e=Array(n));++t<n;)e[t]=i[t];return e}var W3=Ave,kve=Jr,i6=Object.create,Tve=function(){function i(){}return function(e){if(!kve(e))return{};if(i6)return i6(e);i.prototype=e;var t=new i;return i.prototype=void 0,t}}(),Eve=Tve;function Pve(i,e){return function(t){return i(e(t))}}var DJ=Pve,Ove=DJ,Mve=Ove(Object.getPrototypeOf,Object),G3=Mve,Ive=Object.prototype;function Rve(i){var e=i&&i.constructor,t=typeof e=="function"&&e.prototype||Ive;return i===t}var FE=Rve,Lve=Eve,Dve=G3,Fve=FE;function Bve(i){return typeof i.constructor=="function"&&!Fve(i)?Lve(Dve(i)):{}}var FJ=Bve,jve=Mc,Nve=La,$ve="[object Arguments]";function zve(i){return Nve(i)&&jve(i)==$ve}var Hve=zve,n6=Hve,Vve=La,BJ=Object.prototype,Uve=BJ.hasOwnProperty,Wve=BJ.propertyIsEnumerable,Gve=n6(function(){return arguments}())?n6:function(i){return Vve(i)&&Uve.call(i,"callee")&&!Wve.call(i,"callee")},Y1=Gve,Kve=9007199254740991;function Xve(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=Kve}var K3=Xve,Yve=TE,qve=K3;function Zve(i){return i!=null&&qve(i.length)&&!Yve(i)}var Ic=Zve,Jve=Ic,Qve=La;function ebe(i){return Qve(i)&&Jve(i)}var X3=ebe,Uw={exports:{}};function tbe(){return!1}var ibe=tbe;Uw.exports;(function(i,e){var t=Ol,n=ibe,s=e&&!e.nodeType&&e,r=s&&!0&&i&&!i.nodeType&&i,a=r&&r.exports===s,o=a?t.Buffer:void 0,l=o?o.isBuffer:void 0,c=l||n;i.exports=c})(Uw,Uw.exports);var q1=Uw.exports,nbe=Mc,sbe=G3,rbe=La,abe="[object Object]",obe=Function.prototype,lbe=Object.prototype,jJ=obe.toString,cbe=lbe.hasOwnProperty,ube=jJ.call(Object);function hbe(i){if(!rbe(i)||nbe(i)!=abe)return!1;var e=sbe(i);if(e===null)return!0;var t=cbe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&jJ.call(t)==ube}var Y3=hbe;const rL=Xe(Y3);var dbe=Mc,pbe=K3,fbe=La,gbe="[object Arguments]",mbe="[object Array]",ybe="[object Boolean]",_be="[object Date]",vbe="[object Error]",bbe="[object Function]",xbe="[object Map]",Sbe="[object Number]",Cbe="[object Object]",wbe="[object RegExp]",Abe="[object Set]",kbe="[object String]",Tbe="[object WeakMap]",Ebe="[object ArrayBuffer]",Pbe="[object DataView]",Obe="[object Float32Array]",Mbe="[object Float64Array]",Ibe="[object Int8Array]",Rbe="[object Int16Array]",Lbe="[object Int32Array]",Dbe="[object Uint8Array]",Fbe="[object Uint8ClampedArray]",Bbe="[object Uint16Array]",jbe="[object Uint32Array]",Xi={};Xi[Obe]=Xi[Mbe]=Xi[Ibe]=Xi[Rbe]=Xi[Lbe]=Xi[Dbe]=Xi[Fbe]=Xi[Bbe]=Xi[jbe]=!0;Xi[gbe]=Xi[mbe]=Xi[Ebe]=Xi[ybe]=Xi[Pbe]=Xi[_be]=Xi[vbe]=Xi[bbe]=Xi[xbe]=Xi[Sbe]=Xi[Cbe]=Xi[wbe]=Xi[Abe]=Xi[kbe]=Xi[Tbe]=!1;function Nbe(i){return fbe(i)&&pbe(i.length)&&!!Xi[dbe(i)]}var $be=Nbe;function zbe(i){return function(e){return i(e)}}var s0=zbe,Ww={exports:{}};Ww.exports;(function(i,e){var t=mJ,n=e&&!e.nodeType&&e,s=n&&!0&&i&&!i.nodeType&&i,r=s&&s.exports===n,a=r&&t.process,o=function(){try{var l=s&&s.require&&s.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();i.exports=o})(Ww,Ww.exports);var BE=Ww.exports,Hbe=$be,Vbe=s0,s6=BE,r6=s6&&s6.isTypedArray,Ube=r6?Vbe(r6):Hbe,jE=Ube;function Wbe(i,e){if(!(e==="constructor"&&typeof i[e]=="function")&&e!="__proto__")return i[e]}var NJ=Wbe,Gbe=V3,Kbe=K1,Xbe=Object.prototype,Ybe=Xbe.hasOwnProperty;function qbe(i,e,t){var n=i[e];(!(Ybe.call(i,e)&&Kbe(n,t))||t===void 0&&!(e in i))&&Gbe(i,e,t)}var q3=qbe,Zbe=q3,Jbe=V3;function Qbe(i,e,t,n){var s=!t;t||(t={});for(var r=-1,a=e.length;++r<a;){var o=e[r],l=n?n(t[o],i[o],o,t,i):void 0;l===void 0&&(l=i[o]),s?Jbe(t,o,l):Zbe(t,o,l)}return t}var r0=Qbe;function e1e(i,e){for(var t=-1,n=Array(i);++t<i;)n[t]=e(t);return n}var $J=e1e,t1e=9007199254740991,i1e=/^(?:0|[1-9]\d*)$/;function n1e(i,e){var t=typeof i;return e=e??t1e,!!e&&(t=="number"||t!="symbol"&&i1e.test(i))&&i>-1&&i%1==0&&i<e}var Z1=n1e,s1e=$J,r1e=Y1,a1e=_s,o1e=q1,l1e=Z1,c1e=jE,u1e=Object.prototype,h1e=u1e.hasOwnProperty;function d1e(i,e){var t=a1e(i),n=!t&&r1e(i),s=!t&&!n&&o1e(i),r=!t&&!n&&!s&&c1e(i),a=t||n||s||r,o=a?s1e(i.length,String):[],l=o.length;for(var c in i)(e||h1e.call(i,c))&&!(a&&(c=="length"||s&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||l1e(c,l)))&&o.push(c);return o}var zJ=d1e;function p1e(i){var e=[];if(i!=null)for(var t in Object(i))e.push(t);return e}var f1e=p1e,g1e=Jr,m1e=FE,y1e=f1e,_1e=Object.prototype,v1e=_1e.hasOwnProperty;function b1e(i){if(!g1e(i))return y1e(i);var e=m1e(i),t=[];for(var n in i)n=="constructor"&&(e||!v1e.call(i,n))||t.push(n);return t}var x1e=b1e,S1e=zJ,C1e=x1e,w1e=Ic;function A1e(i){return w1e(i)?S1e(i,!0):C1e(i)}var J1=A1e,k1e=r0,T1e=J1;function E1e(i){return k1e(i,T1e(i))}var P1e=E1e,a6=OJ,O1e=IJ,M1e=LJ,I1e=W3,R1e=FJ,o6=Y1,l6=_s,L1e=X3,D1e=q1,F1e=TE,B1e=Jr,j1e=Y3,N1e=jE,c6=NJ,$1e=P1e;function z1e(i,e,t,n,s,r,a){var o=c6(i,t),l=c6(e,t),c=a.get(l);if(c){a6(i,t,c);return}var u=r?r(o,l,t+"",i,e,a):void 0,h=u===void 0;if(h){var d=l6(l),p=!d&&D1e(l),f=!d&&!p&&N1e(l);u=l,d||p||f?l6(o)?u=o:L1e(o)?u=I1e(o):p?(h=!1,u=O1e(l,!0)):f?(h=!1,u=M1e(l,!0)):u=[]:j1e(l)||o6(l)?(u=o,o6(o)?u=$1e(o):(!B1e(o)||F1e(o))&&(u=R1e(l))):h=!1}h&&(a.set(l,u),s(u,l,n,r,a),a.delete(l)),a6(i,t,u)}var H1e=z1e,V1e=DE,U1e=OJ,W1e=MJ,G1e=H1e,K1e=Jr,X1e=J1,Y1e=NJ;function HJ(i,e,t,n,s){i!==e&&W1e(e,function(r,a){if(s||(s=new V1e),K1e(r))G1e(i,e,a,t,HJ,n,s);else{var o=n?n(Y1e(i,a),r,a+"",i,e,s):void 0;o===void 0&&(o=r),U1e(i,a,o)}},X1e)}var q1e=HJ;function Z1e(i){return i}var NE=Z1e;function J1e(i,e,t){switch(t.length){case 0:return i.call(e);case 1:return i.call(e,t[0]);case 2:return i.call(e,t[0],t[1]);case 3:return i.call(e,t[0],t[1],t[2])}return i.apply(e,t)}var Q1e=J1e,exe=Q1e,u6=Math.max;function txe(i,e,t){return e=u6(e===void 0?i.length-1:e,0),function(){for(var n=arguments,s=-1,r=u6(n.length-e,0),a=Array(r);++s<r;)a[s]=n[e+s];s=-1;for(var o=Array(e+1);++s<e;)o[s]=n[s];return o[e]=t(a),exe(i,this,o)}}var VJ=txe;function ixe(i){return function(){return i}}var nxe=ixe,sxe=nxe,h6=PJ,rxe=NE,axe=h6?function(i,e){return h6(i,"toString",{configurable:!0,enumerable:!1,value:sxe(e),writable:!0})}:rxe,oxe=axe,lxe=800,cxe=16,uxe=Date.now;function hxe(i){var e=0,t=0;return function(){var n=uxe(),s=cxe-(n-t);if(t=n,s>0){if(++e>=lxe)return arguments[0]}else e=0;return i.apply(void 0,arguments)}}var dxe=hxe,pxe=oxe,fxe=dxe,gxe=fxe(pxe),UJ=gxe,mxe=NE,yxe=VJ,_xe=UJ;function vxe(i,e){return _xe(yxe(i,e,mxe),i+"")}var $E=vxe,bxe=K1,xxe=Ic,Sxe=Z1,Cxe=Jr;function wxe(i,e,t){if(!Cxe(t))return!1;var n=typeof e;return(n=="number"?xxe(t)&&Sxe(e,t.length):n=="string"&&e in t)?bxe(t[e],i):!1}var zE=wxe,Axe=$E,kxe=zE;function Txe(i){return Axe(function(e,t){var n=-1,s=t.length,r=s>1?t[s-1]:void 0,a=s>2?t[2]:void 0;for(r=i.length>3&&typeof r=="function"?(s--,r):void 0,a&&kxe(t[0],t[1],a)&&(r=s<3?void 0:r,s=1),e=Object(e);++n<s;){var o=t[n];o&&i(e,o,n,r)}return e})}var Exe=Txe,Pxe=q1e,Oxe=Exe,Mxe=Oxe(function(i,e,t){Pxe(i,e,t)}),Ixe=Mxe;const Q1=Xe(Ixe);function Rxe(i,e){for(var t=-1,n=i==null?0:i.length;++t<n&&e(i[t],t,i)!==!1;);return i}var WJ=Rxe,Lxe=DJ,Dxe=Lxe(Object.keys,Object),Fxe=Dxe,Bxe=FE,jxe=Fxe,Nxe=Object.prototype,$xe=Nxe.hasOwnProperty;function zxe(i){if(!Bxe(i))return jxe(i);var e=[];for(var t in Object(i))$xe.call(i,t)&&t!="constructor"&&e.push(t);return e}var Z3=zxe,Hxe=zJ,Vxe=Z3,Uxe=Ic;function Wxe(i){return Uxe(i)?Hxe(i):Vxe(i)}var zf=Wxe,Gxe=r0,Kxe=zf;function Xxe(i,e){return i&&Gxe(e,Kxe(e),i)}var Yxe=Xxe,qxe=r0,Zxe=J1;function Jxe(i,e){return i&&qxe(e,Zxe(e),i)}var Qxe=Jxe;function eSe(i,e){for(var t=-1,n=i==null?0:i.length,s=0,r=[];++t<n;){var a=i[t];e(a,t,i)&&(r[s++]=a)}return r}var GJ=eSe;function tSe(){return[]}var KJ=tSe,iSe=GJ,nSe=KJ,sSe=Object.prototype,rSe=sSe.propertyIsEnumerable,d6=Object.getOwnPropertySymbols,aSe=d6?function(i){return i==null?[]:(i=Object(i),iSe(d6(i),function(e){return rSe.call(i,e)}))}:nSe,J3=aSe,oSe=r0,lSe=J3;function cSe(i,e){return oSe(i,lSe(i),e)}var uSe=cSe;function hSe(i,e){for(var t=-1,n=e.length,s=i.length;++t<n;)i[s+t]=e[t];return i}var Q3=hSe,dSe=Q3,pSe=G3,fSe=J3,gSe=KJ,mSe=Object.getOwnPropertySymbols,ySe=mSe?function(i){for(var e=[];i;)dSe(e,fSe(i)),i=pSe(i);return e}:gSe,XJ=ySe,_Se=r0,vSe=XJ;function bSe(i,e){return _Se(i,vSe(i),e)}var xSe=bSe,SSe=Q3,CSe=_s;function wSe(i,e,t){var n=e(i);return CSe(i)?n:SSe(n,t(i))}var YJ=wSe,ASe=YJ,kSe=J3,TSe=zf;function ESe(i){return ASe(i,TSe,kSe)}var qJ=ESe,PSe=YJ,OSe=XJ,MSe=J1;function ISe(i){return PSe(i,MSe,OSe)}var ZJ=ISe,RSe=$f,LSe=Ol,DSe=RSe(LSe,"DataView"),FSe=DSe,BSe=$f,jSe=Ol,NSe=BSe(jSe,"Promise"),$Se=NSe,zSe=$f,HSe=Ol,VSe=zSe(HSe,"Set"),USe=VSe,WSe=$f,GSe=Ol,KSe=WSe(GSe,"WeakMap"),XSe=KSe,aL=FSe,oL=D3,lL=$Se,cL=USe,uL=XSe,JJ=Mc,a0=_J,p6="[object Map]",YSe="[object Object]",f6="[object Promise]",g6="[object Set]",m6="[object WeakMap]",y6="[object DataView]",qSe=a0(aL),ZSe=a0(oL),JSe=a0(lL),QSe=a0(cL),eCe=a0(uL),cp=JJ;(aL&&cp(new aL(new ArrayBuffer(1)))!=y6||oL&&cp(new oL)!=p6||lL&&cp(lL.resolve())!=f6||cL&&cp(new cL)!=g6||uL&&cp(new uL)!=m6)&&(cp=function(i){var e=JJ(i),t=e==YSe?i.constructor:void 0,n=t?a0(t):"";if(n)switch(n){case qSe:return y6;case ZSe:return p6;case JSe:return f6;case QSe:return g6;case eCe:return m6}return e});var o0=cp,tCe=Object.prototype,iCe=tCe.hasOwnProperty;function nCe(i){var e=i.length,t=new i.constructor(e);return e&&typeof i[0]=="string"&&iCe.call(i,"index")&&(t.index=i.index,t.input=i.input),t}var sCe=nCe,rCe=U3;function aCe(i,e){var t=e?rCe(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.byteLength)}var oCe=aCe,lCe=/\w*$/;function cCe(i){var e=new i.constructor(i.source,lCe.exec(i));return e.lastIndex=i.lastIndex,e}var uCe=cCe,_6=qy,v6=_6?_6.prototype:void 0,b6=v6?v6.valueOf:void 0;function hCe(i){return b6?Object(b6.call(i)):{}}var dCe=hCe,pCe=U3,fCe=oCe,gCe=uCe,mCe=dCe,yCe=LJ,_Ce="[object Boolean]",vCe="[object Date]",bCe="[object Map]",xCe="[object Number]",SCe="[object RegExp]",CCe="[object Set]",wCe="[object String]",ACe="[object Symbol]",kCe="[object ArrayBuffer]",TCe="[object DataView]",ECe="[object Float32Array]",PCe="[object Float64Array]",OCe="[object Int8Array]",MCe="[object Int16Array]",ICe="[object Int32Array]",RCe="[object Uint8Array]",LCe="[object Uint8ClampedArray]",DCe="[object Uint16Array]",FCe="[object Uint32Array]";function BCe(i,e,t){var n=i.constructor;switch(e){case kCe:return pCe(i);case _Ce:case vCe:return new n(+i);case TCe:return fCe(i,t);case ECe:case PCe:case OCe:case MCe:case ICe:case RCe:case LCe:case DCe:case FCe:return yCe(i,t);case bCe:return new n;case xCe:case wCe:return new n(i);case SCe:return gCe(i);case CCe:return new n;case ACe:return mCe(i)}}var jCe=BCe,NCe=o0,$Ce=La,zCe="[object Map]";function HCe(i){return $Ce(i)&&NCe(i)==zCe}var VCe=HCe,UCe=VCe,WCe=s0,x6=BE,S6=x6&&x6.isMap,GCe=S6?WCe(S6):UCe,QJ=GCe;const Sb=Xe(QJ);var KCe=o0,XCe=La,YCe="[object Set]";function qCe(i){return XCe(i)&&KCe(i)==YCe}var ZCe=qCe,JCe=ZCe,QCe=s0,C6=BE,w6=C6&&C6.isSet,ewe=w6?QCe(w6):JCe,eQ=ewe;const vh=Xe(eQ);var twe=DE,iwe=WJ,nwe=q3,swe=Yxe,rwe=Qxe,awe=IJ,owe=W3,lwe=uSe,cwe=xSe,uwe=qJ,hwe=ZJ,dwe=o0,pwe=sCe,fwe=jCe,gwe=FJ,mwe=_s,ywe=q1,_we=QJ,vwe=Jr,bwe=eQ,xwe=zf,Swe=J1,Cwe=1,wwe=2,Awe=4,tQ="[object Arguments]",kwe="[object Array]",Twe="[object Boolean]",Ewe="[object Date]",Pwe="[object Error]",iQ="[object Function]",Owe="[object GeneratorFunction]",Mwe="[object Map]",Iwe="[object Number]",nQ="[object Object]",Rwe="[object RegExp]",Lwe="[object Set]",Dwe="[object String]",Fwe="[object Symbol]",Bwe="[object WeakMap]",jwe="[object ArrayBuffer]",Nwe="[object DataView]",$we="[object Float32Array]",zwe="[object Float64Array]",Hwe="[object Int8Array]",Vwe="[object Int16Array]",Uwe="[object Int32Array]",Wwe="[object Uint8Array]",Gwe="[object Uint8ClampedArray]",Kwe="[object Uint16Array]",Xwe="[object Uint32Array]",Bi={};Bi[tQ]=Bi[kwe]=Bi[jwe]=Bi[Nwe]=Bi[Twe]=Bi[Ewe]=Bi[$we]=Bi[zwe]=Bi[Hwe]=Bi[Vwe]=Bi[Uwe]=Bi[Mwe]=Bi[Iwe]=Bi[nQ]=Bi[Rwe]=Bi[Lwe]=Bi[Dwe]=Bi[Fwe]=Bi[Wwe]=Bi[Gwe]=Bi[Kwe]=Bi[Xwe]=!0;Bi[Pwe]=Bi[iQ]=Bi[Bwe]=!1;function UC(i,e,t,n,s,r){var a,o=e&Cwe,l=e&wwe,c=e&Awe;if(t&&(a=s?t(i,n,s,r):t(i)),a!==void 0)return a;if(!vwe(i))return i;var u=mwe(i);if(u){if(a=pwe(i),!o)return owe(i,a)}else{var h=dwe(i),d=h==iQ||h==Owe;if(ywe(i))return awe(i,o);if(h==nQ||h==tQ||d&&!s){if(a=l||d?{}:gwe(i),!o)return l?cwe(i,rwe(a,i)):lwe(i,swe(a,i))}else{if(!Bi[h])return s?i:{};a=fwe(i,h,o)}}r||(r=new twe);var p=r.get(i);if(p)return p;r.set(i,a),bwe(i)?i.forEach(function(m){a.add(UC(m,e,t,m,i,r))}):_we(i)&&i.forEach(function(m,y){a.set(y,UC(m,e,t,y,i,r))});var f=c?l?hwe:uwe:l?Swe:xwe,g=u?void 0:f(i);return iwe(g||i,function(m,y){g&&(y=m,m=i[y]),nwe(a,y,UC(m,e,t,y,i,r))}),a}var ej=UC;function Ywe(i){var e=i==null?0:i.length;return e?i[e-1]:void 0}var qwe=Ywe;function Zwe(i,e,t){var n=-1,s=i.length;e<0&&(e=-e>s?0:s+e),t=t>s?s:t,t<0&&(t+=s),s=e>t?0:t-e>>>0,e>>>=0;for(var r=Array(s);++n<s;)r[n]=i[n+e];return r}var tj=Zwe,Jwe=IE,Qwe=tj;function eAe(i,e){return e.length<2?i:Jwe(i,Qwe(e,0,-1))}var tAe=eAe,iAe=t0,nAe=qwe,sAe=tAe,rAe=i0;function aAe(i,e){return e=iAe(e,i),i=sAe(i,e),i==null||delete i[rAe(nAe(e))]}var oAe=aAe,lAe=Y3;function cAe(i){return lAe(i)?void 0:i}var uAe=cAe,A6=qy,hAe=Y1,dAe=_s,k6=A6?A6.isConcatSpreadable:void 0;function pAe(i){return dAe(i)||hAe(i)||!!(k6&&i&&i[k6])}var fAe=pAe,gAe=Q3,mAe=fAe;function sQ(i,e,t,n,s){var r=-1,a=i.length;for(t||(t=mAe),s||(s=[]);++r<a;){var o=i[r];e>0&&t(o)?e>1?sQ(o,e-1,t,n,s):gAe(s,o):n||(s[s.length]=o)}return s}var ij=sQ,yAe=ij;function _Ae(i){var e=i==null?0:i.length;return e?yAe(i,1):[]}var vAe=_Ae,bAe=vAe,xAe=VJ,SAe=UJ;function CAe(i){return SAe(xAe(i,void 0,bAe),i+"")}var rQ=CAe,wAe=e0,AAe=ej,kAe=oAe,TAe=t0,EAe=r0,PAe=uAe,OAe=rQ,MAe=ZJ,IAe=1,RAe=2,LAe=4,DAe=OAe(function(i,e){var t={};if(i==null)return t;var n=!1;e=wAe(e,function(r){return r=TAe(r,i),n||(n=r.length>1),r}),EAe(i,MAe(i),t),n&&(t=AAe(t,IAe|RAe|LAe,PAe));for(var s=e.length;s--;)kAe(t,e[s]);return t}),FAe=DAe;const _n=Xe(FAe);function BAe(i){return i===void 0}var jAe=BAe;const Hr=Xe(jAe);var NAe="__lodash_hash_undefined__";function $Ae(i){return this.__data__.set(i,NAe),this}var zAe=$Ae;function HAe(i){return this.__data__.has(i)}var VAe=HAe,UAe=F3,WAe=zAe,GAe=VAe;function Gw(i){var e=-1,t=i==null?0:i.length;for(this.__data__=new UAe;++e<t;)this.add(i[e])}Gw.prototype.add=Gw.prototype.push=WAe;Gw.prototype.has=GAe;var aQ=Gw;function KAe(i,e){for(var t=-1,n=i==null?0:i.length;++t<n;)if(e(i[t],t,i))return!0;return!1}var oQ=KAe;function XAe(i,e){return i.has(e)}var lQ=XAe,YAe=aQ,qAe=oQ,ZAe=lQ,JAe=1,QAe=2;function eke(i,e,t,n,s,r){var a=t&JAe,o=i.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var c=r.get(i),u=r.get(e);if(c&&u)return c==e&&u==i;var h=-1,d=!0,p=t&QAe?new YAe:void 0;for(r.set(i,e),r.set(e,i);++h<o;){var f=i[h],g=e[h];if(n)var m=a?n(g,f,h,e,i,r):n(f,g,h,i,e,r);if(m!==void 0){if(m)continue;d=!1;break}if(p){if(!qAe(e,function(y,b){if(!ZAe(p,b)&&(f===y||s(f,y,t,n,r)))return p.push(b)})){d=!1;break}}else if(!(f===g||s(f,g,t,n,r))){d=!1;break}}return r.delete(i),r.delete(e),d}var cQ=eke;function tke(i){var e=-1,t=Array(i.size);return i.forEach(function(n,s){t[++e]=[s,n]}),t}var ike=tke;function nke(i){var e=-1,t=Array(i.size);return i.forEach(function(n){t[++e]=n}),t}var ske=nke,T6=qy,E6=RJ,rke=K1,ake=cQ,oke=ike,lke=ske,cke=1,uke=2,hke="[object Boolean]",dke="[object Date]",pke="[object Error]",fke="[object Map]",gke="[object Number]",mke="[object RegExp]",yke="[object Set]",_ke="[object String]",vke="[object Symbol]",bke="[object ArrayBuffer]",xke="[object DataView]",P6=T6?T6.prototype:void 0,Y2=P6?P6.valueOf:void 0;function Ske(i,e,t,n,s,r,a){switch(t){case xke:if(i.byteLength!=e.byteLength||i.byteOffset!=e.byteOffset)return!1;i=i.buffer,e=e.buffer;case bke:return!(i.byteLength!=e.byteLength||!r(new E6(i),new E6(e)));case hke:case dke:case gke:return rke(+i,+e);case pke:return i.name==e.name&&i.message==e.message;case mke:case _ke:return i==e+"";case fke:var o=oke;case yke:var l=n&cke;if(o||(o=lke),i.size!=e.size&&!l)return!1;var c=a.get(i);if(c)return c==e;n|=uke,a.set(i,e);var u=ake(o(i),o(e),n,s,r,a);return a.delete(i),u;case vke:if(Y2)return Y2.call(i)==Y2.call(e)}return!1}var Cke=Ske,O6=qJ,wke=1,Ake=Object.prototype,kke=Ake.hasOwnProperty;function Tke(i,e,t,n,s,r){var a=t&wke,o=O6(i),l=o.length,c=O6(e),u=c.length;if(l!=u&&!a)return!1;for(var h=l;h--;){var d=o[h];if(!(a?d in e:kke.call(e,d)))return!1}var p=r.get(i),f=r.get(e);if(p&&f)return p==e&&f==i;var g=!0;r.set(i,e),r.set(e,i);for(var m=a;++h<l;){d=o[h];var y=i[d],b=e[d];if(n)var x=a?n(b,y,d,e,i,r):n(y,b,d,i,e,r);if(!(x===void 0?y===b||s(y,b,t,n,r):x)){g=!1;break}m||(m=d=="constructor")}if(g&&!m){var S=i.constructor,C=e.constructor;S!=C&&"constructor"in i&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof C=="function"&&C instanceof C)&&(g=!1)}return r.delete(i),r.delete(e),g}var Eke=Tke,q2=DE,Pke=cQ,Oke=Cke,Mke=Eke,M6=o0,I6=_s,R6=q1,Ike=jE,Rke=1,L6="[object Arguments]",D6="[object Array]",xS="[object Object]",Lke=Object.prototype,F6=Lke.hasOwnProperty;function Dke(i,e,t,n,s,r){var a=I6(i),o=I6(e),l=a?D6:M6(i),c=o?D6:M6(e);l=l==L6?xS:l,c=c==L6?xS:c;var u=l==xS,h=c==xS,d=l==c;if(d&&R6(i)){if(!R6(e))return!1;a=!0,u=!1}if(d&&!u)return r||(r=new q2),a||Ike(i)?Pke(i,e,t,n,s,r):Oke(i,e,l,t,n,s,r);if(!(t&Rke)){var p=u&&F6.call(i,"__wrapped__"),f=h&&F6.call(e,"__wrapped__");if(p||f){var g=p?i.value():i,m=f?e.value():e;return r||(r=new q2),s(g,m,t,n,r)}}return d?(r||(r=new q2),Mke(i,e,t,n,s,r)):!1}var Fke=Dke,Bke=Fke,B6=La;function uQ(i,e,t,n,s){return i===e?!0:i==null||e==null||!B6(i)&&!B6(e)?i!==i&&e!==e:Bke(i,e,t,n,uQ,s)}var HE=uQ,jke=HE;function Nke(i,e){return jke(i,e)}var $ke=Nke;const wi=Xe($ke);var zke=Z3,Hke=o0,Vke=Y1,Uke=_s,Wke=Ic,Gke=q1,Kke=FE,Xke=jE,Yke="[object Map]",qke="[object Set]",Zke=Object.prototype,Jke=Zke.hasOwnProperty;function Qke(i){if(i==null)return!0;if(Wke(i)&&(Uke(i)||typeof i=="string"||typeof i.splice=="function"||Gke(i)||Xke(i)||Vke(i)))return!i.length;var e=Hke(i);if(e==Yke||e==qke)return!i.size;if(Kke(i))return!zke(i).length;for(var t in i)if(Jke.call(i,t))return!1;return!0}var eTe=Qke;const eu=Xe(eTe);var tTe=MJ,iTe=zf;function nTe(i,e){return i&&tTe(i,e,iTe)}var sTe=nTe,rTe=Ic;function aTe(i,e){return function(t,n){if(t==null)return t;if(!rTe(t))return i(t,n);for(var s=t.length,r=e?s:-1,a=Object(t);(e?r--:++r<s)&&n(a[r],r,a)!==!1;);return t}}var oTe=aTe,lTe=sTe,cTe=oTe,uTe=cTe(lTe),VE=uTe,hTe=NE;function dTe(i){return typeof i=="function"?i:hTe}var hQ=dTe,pTe=WJ,fTe=VE,gTe=hQ,mTe=_s;function yTe(i,e){var t=mTe(i)?pTe:fTe;return t(i,gTe(e))}var _Te=yTe,vTe=_Te;const ws=Xe(vTe);function ns(i,e){i&&console.warn(`Warning: ${e}`)}function Ms(i){return i==null}let dQ=class{constructor(){this._eventMap=new Map}on(e,t){return e&&typeof t=="function"&&(this._eventMap.has(e)||this._eventMap.set(e,[]),this._eventMap.get(e).push(t)),this}once(e,t){var n=this;if(e&&typeof t=="function"){const s=function(){t(...arguments),n.off(e,s)};this.on(e,s)}}off(e,t){if(e)if(typeof t=="function"){const n=this._eventMap.get(e);if(Array.isArray(n)&&n.length){let s=-1;for(;(s=n.findIndex(r=>r===t))>-1;)n.splice(s,1)}}else Ms(t)&&this._eventMap.delete(e);return this}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return this._eventMap.has(e)?([...this._eventMap.get(e)].forEach(a=>a(...n)),!0):!1}};function Sp(i){try{return i instanceof HTMLElement}catch{return typeof i=="object"&&i.nodeType===1&&typeof i.style=="object"&&typeof i.ownerDocument=="object"}}function bTe(i){if(i&&typeof i=="object")return typeof i.toJSON=="function"?i.toJSON():["left","top","right","bottom","width","height"].reduce((t,n)=>(t[n]=i[n],t),{})}function jn(i){i.stopPropagation(),i.preventDefault()}function xTe(i){return i.length===1&&i.match(/\S/)}function ex(i,e){for(let t=0;t<i.length;t++)i[t]===e?(i[t].tabIndex=0,i[t].focus()):i[t].tabIndex=-1}function STe(i){i.length>0&&ex(i,i[0])}function CTe(i){i.length>0&&ex(i,i[i.length-1])}function wTe(i,e){let t,n;i.length>0&&(e===i[0]?t=i[i.length-1]:(n=i.indexOf(e),t=i[n-1]),ex(i,t))}function ATe(i,e){let t,n;i.length>0&&(e===i[i.length-1]?t=i[0]:(n=i.indexOf(e),t=i[n+1]),ex(i,t))}function kTe(i,e,t,n){let s,r;return!i||!t||!n||n.length>1?-1:(n=n.toLowerCase(),s=i.indexOf(e)+1,s>=i.length&&(s=0),r=t.indexOf(n,s),r===-1&&(r=t.indexOf(n,0)),r>=0?r:-1)}function TTe(i,e){if(!i)return null;for(;i.parentElement&&ne(i.parentElement,"attributes.role.value","")!==e;)i=i.parentElement;return i.parentElement}function ETe(i,e){for(let t=0;t<i.length;t++){const n=i[t].attributes["data-popupid"];if(n&&n.value===e)return i[t]}return null}const SS={TOP:/top/i,RIGHT:/right/i,BOTTOM:/bottom/i,LEFT:/left/i},cg={left:0,top:0,height:0,width:0,scrollLeft:0,scrollTop:0};let PTe=class extends tt{constructor(e){var t;super(Object.assign({},e)),t=this,this.removePortal=()=>{this._adapter.removePortal()},this.setDisplayNone=(n,s)=>{this._adapter.setDisplayNone(n,s)},this.updateStateIfCursorOnTrigger=n=>{var s,r;if(!((s=n==null?void 0:n.matches)===null||s===void 0)&&s.call(n,":hover")){const a=this._adapter.getEventName(),o=this.getState("triggerEventSet");(r=o[a.mouseEnter])===null||r===void 0||r.call(o)}},this.onResize=()=>{this.calcPosition()},this.delayShow=()=>{const n=this.getProp("mouseEnterDelay");this.clearDelayTimer(),n>0?this._timer=setTimeout(()=>{this.show(),this.clearDelayTimer()},n):this.show()},this.show=()=>{if(this._adapter.getAnimatingState())return;const n=this.getProp("content"),s=this.getProp("trigger"),r=this.getProp("clickTriggerToHide"),{visible:a,displayNone:o}=this.getStates();if(o&&this.setDisplayNone(!1),!a){if(this.clearDelayTimer(),this._adapter.on("portalInserted",()=>{this.calcPosition()}),s==="hover"){const l=()=>{var c;const u=this._adapter.getTriggerDOM();s&&!(!((c=u==null?void 0:u.matches)===null||c===void 0)&&c.call(u,":hover"))&&this.hide(),this._adapter.off("portalInserted",l)};this._adapter.on("portalInserted",l)}this._adapter.on("positionUpdated",()=>{this._togglePortalVisible(!0)}),this._adapter.insertPortal(n,{left:-9999,top:-9999}),s==="custom"&&this._adapter.registerClickOutsideHandler(()=>{}),(s==="click"||r||s==="contextMenu")&&this._adapter.registerClickOutsideHandler(this.hide),this._bindScrollEvent(),this._bindResizeEvent()}},this.calcPosition=function(n,s,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;n=(eu(n)?t._adapter.getTriggerBounding():n)||Object.assign({},cg),r=(eu(r)?t._adapter.getPopupContainerRect():r)||Object.assign({},cg),s=(eu(s)?t._adapter.getWrapperBounding():s)||Object.assign({},cg);let o=t.calcPosStyle({triggerRect:n,wrapperRect:s,containerRect:r}),l=t.getProp("position");if(t.getProp("autoAdjustOverflow")){const{position:c,isHeightOverFlow:u,isWidthOverFlow:h}=t.adjustPosIfNeed(l,o,n,s,r);(l!==c||u||h)&&(l=c,o=t.calcPosStyle({triggerRect:n,wrapperRect:s,containerRect:r,position:l,spacing:null,isOverFlow:[u,h]}))}return a&&t._mounted&&t._adapter.setPosition(Object.assign(Object.assign({},o),{position:l})),o},this.delayHide=()=>{const n=this.getProp("mouseLeaveDelay");this.clearDelayTimer(),n>0?this._timer=setTimeout(()=>{this.hide(),this.clearDelayTimer()},n):this.hide()},this.hide=()=>{this.clearDelayTimer(),this._togglePortalVisible(!1),this._adapter.off("portalInserted"),this._adapter.off("positionUpdated")},this.handleContainerKeydown=n=>{const{guardFocus:s,closeOnEsc:r}=this.getProps();switch(n&&n.key){case"Escape":r&&this._handleEscKeyDown(n);break;case"Tab":if(s){const a=this._adapter.getContainer(),o=this._adapter.getFocusableElements(a);o.length&&(n.shiftKey?this._handleContainerShiftTabKeyDown(o,n):this._handleContainerTabKeyDown(o,n))}break}},this._timer=null}init(){const{wrapperId:e}=this.getProps();this._mounted=!0,this._bindEvent(),this._shouldShow(),this._initContainerPosition(),e||this._adapter.setId()}destroy(){this._mounted=!1,this.unBindEvent()}_bindEvent(){const e=this.getProp("trigger"),{triggerEventSet:t,portalEventSet:n}=this._generateEvent(e);this._bindTriggerEvent(t),this._bindPortalEvent(n),this._bindResizeEvent()}unBindEvent(){this._adapter.unregisterClickOutsideHandler(),this.unBindResizeEvent(),this.unBindScrollEvent(),clearTimeout(this._timer)}_bindTriggerEvent(e){this._adapter.registerTriggerEvent(e)}_bindPortalEvent(e){this._adapter.registerPortalEvent(e)}_bindResizeEvent(){this._adapter.registerResizeHandler(this.onResize)}unBindResizeEvent(){this._adapter.unregisterResizeHandler(this.onResize)}_adjustPos(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"reverse",s=arguments.length>3?arguments[3]:void 0;switch(n){case"reverse":return this._reversePos(e,t);case"expand":return this._expandPos(e,s);case"reduce":return this._reducePos(e);default:return this._reversePos(e,t)}}_reversePos(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1){if(SS.TOP.test(e))return e.replace("top","bottom").replace("Top","Bottom");if(SS.BOTTOM.test(e))return e.replace("bottom","top").replace("Bottom","Top")}else{if(SS.LEFT.test(e))return e.replace("left","right").replace("Left","Right");if(SS.RIGHT.test(e))return e.replace("right","left").replace("Right","Left")}return e}_expandPos(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return e.concat(t)}_reducePos(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const t=["Top","Bottom","Left","Right"].find(n=>e.endsWith(n));return t?e.replace(t,""):e}clearDelayTimer(){this._timer&&(clearTimeout(this._timer),this._timer=null)}_generateEvent(e){const t=this._adapter.getEventName(),n={[t.keydown]:r=>{this._handleTriggerKeydown(r)}};let s={};switch(e){case"focus":n[t.focus]=()=>{this.delayShow()},n[t.blur]=()=>{this.delayHide()},s=n;break;case"click":n[t.click]=()=>{this.show()},s={};break;case"hover":n[t.mouseEnter]=()=>{this.setCache("isClickToHide",!1),this.delayShow()},n[t.mouseLeave]=()=>{this.delayHide()},n[t.focus]=()=>{const{disableFocusListener:r}=this.getProps();!r&&this.delayShow()},n[t.blur]=()=>{const{disableFocusListener:r}=this.getProps();!r&&this.delayHide()},s=Object.assign({},n),this.getProp("clickToHide")&&(s[t.click]=()=>{this.setCache("isClickToHide",!0),this.hide()},s[t.mouseEnter]=()=>{this.getCache("isClickToHide")||this.delayShow()});break;case"custom":break;case"contextMenu":n[t.contextMenu]=r=>{r.preventDefault(),this.show()};break}return{triggerEventSet:n,portalEventSet:s}}_shouldShow(){this.getProp("visible")&&this.show()}_togglePortalVisible(e){this.getState("visible")!==e&&this._adapter.togglePortalVisible(e,()=>{e&&this._adapter.setInitialFocus(),this._adapter.notifyVisibleChange(e)})}_roundPixel(e){return typeof e=="number"?Math.round(e):e}calcTransformOrigin(e,t,n,s){if(e&&t&&n!=null&&s!=null){if(this.getProp("transformFromCenter")){if(["topLeft","bottomLeft"].includes(e))return`${this._roundPixel(t.width/2)}px ${-s*100}%`;if(["topRight","bottomRight"].includes(e))return`calc(100% - ${this._roundPixel(t.width/2)}px) ${-s*100}%`;if(["leftTop","rightTop"].includes(e))return`${-n*100}% ${this._roundPixel(t.height/2)}px`;if(["leftBottom","rightBottom"].includes(e))return`${-n*100}% calc(100% - ${this._roundPixel(t.height/2)}px)`}return`${-n*100}% ${-s*100}%`}return null}calcPosStyle(e){var t;const{spacing:n,isOverFlow:s}=e,{innerWidth:r}=window,a=(eu(e.triggerRect)?e.triggerRect:this._adapter.getTriggerBounding())||Object.assign({},cg),o=(eu(e.containerRect)?e.containerRect:this._adapter.getPopupContainerRect())||Object.assign({},cg),l=(eu(e.wrapperRect)?e.wrapperRect:this._adapter.getWrapperBounding())||Object.assign({},cg),c=e.position!=null?e.position:this.getProp("position"),u=n??this.getProp("spacing"),{arrowPointAtCenter:h,showArrow:d,arrowBounding:p}=this.getProps(),f=d&&h;let g=u,m=0;if(typeof u!="number"){const me=c.includes("top")||c.includes("bottom");g=me?u.y:u.x,m=me?u.x:u.y}const y=ne(p,"width",24),b=ne(p,"width",24),x=ne(p,"offsetY",0),S=6,C=6;let w,A,T=0,E=0;const P=a.left+a.width/2,O=a.top+a.height/2,M=S+y/2,R=C+b/2,j=l.height-o.height,I=l.width-o.width,D=j>0?j:0,z=I>0?I:0,$=s&&s[0],V=s&&s[1],L=P-o.left<o.right-P,Y=O-o.top<o.bottom-O,ae=l.width>r,W=Math.abs((l==null?void 0:l.width)-((t=this._adapter.getContainer())===null||t===void 0?void 0:t.clientWidth))>1;switch(W&&(g=g*l.width/this._adapter.getContainer().clientWidth),c){case"top":w=V?L?o.left+l.width/2:o.right-l.width/2+z:P+m,A=$?o.bottom+D:a.top-g,T=-.5,E=-1;break;case"topLeft":w=V?ae?o.left:o.right-l.width:f?P-M+m:a.left+m,A=$?o.bottom+D:a.top-g,E=-1;break;case"topRight":w=V?o.right+z:f?P+M+m:a.right+m,A=$?o.bottom+D:a.top-g,E=-1,T=-1;break;case"left":w=V?o.right+z-g+M:a.left-g,A=$?Y?o.top+l.height/2:o.bottom-l.height/2+D:O+m,T=-1,E=-.5;break;case"leftTop":w=V?o.right+z-g+M:a.left-g,A=$?o.top:f?O-R+m:a.top+m,T=-1;break;case"leftBottom":w=V?o.right+z-g+M:a.left-g,A=$?o.bottom+D:f?O+R+m:a.bottom+m,T=-1,E=-1;break;case"bottom":w=V?L?o.left+l.width/2:o.right-l.width/2+z:P+m,A=$?o.top+R-g:a.top+a.height+g,T=-.5;break;case"bottomLeft":w=V?ae?o.left:o.right-l.width:f?P-M+m:a.left+m,A=$?o.top+R-g:a.top+a.height+g;break;case"bottomRight":w=V?o.right+z:f?P+M+m:a.right+m,A=$?o.top+R-g:a.top+a.height+g,T=-1;break;case"right":w=V?o.left-g+M:a.right+g,A=$?Y?o.top+l.height/2:o.bottom-l.height/2+D:O+m,E=-.5;break;case"rightTop":w=V?o.left-g+M:a.right+g,A=$?o.top:f?O-R+m:a.top+m;break;case"rightBottom":w=V?o.left-g+M:a.right+g,A=$?o.bottom+D:f?O+R+m:a.bottom+m,E=-1;break;case"leftTopOver":w=a.left-g,A=a.top-g;break;case"rightTopOver":w=a.right+g,A=a.top-g,T=-1;break;case"leftBottomOver":w=a.left-g,A=a.bottom+g,E=-1;break;case"rightBottomOver":w=a.right+g,A=a.bottom+g,T=-1,E=-1;break}const ce=this.calcTransformOrigin(c,a,T,E),he=this._adapter.containerIsBody();if(w=w-o.left,A=A-o.top,W&&(w/=l.width/this._adapter.getContainer().clientWidth),W&&(A/=l.height/this._adapter.getContainer().clientHeight),he&&!this._adapter.containerIsRelativeOrAbsolute()){const me=this._adapter.getDocumentElementBounding();w+=o.left-me.left,A+=o.top-me.top}w=he?w:w+o.scrollLeft,A=he?A:A+o.scrollTop;const le=a.height;if(this.getProp("showArrow")&&!h&&le<=(b/2+x)*2){const me=le/2-(x+b/2);(c.includes("Top")||c.includes("Bottom"))&&!c.includes("Over")&&(A=c.includes("Top")?A+me:A-me)}const de={left:this._roundPixel(w),top:this._roundPixel(A)};let te="";return T!=null&&(te+=`translateX(${T*100}%) `,Object.defineProperty(de,"translateX",{enumerable:!1,value:T})),E!=null&&(te+=`translateY(${E*100}%) `,Object.defineProperty(de,"translateY",{enumerable:!1,value:E})),ce!=null&&(de.transformOrigin=ce),te&&(de.transform=te),de}isLR(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e.includes("left")||e.includes("right")}isTB(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e.includes("top")||e.includes("bottom")}isReverse(e,t,n){return e<n&&t>n}isOverFlow(e,t,n){return e<n&&t<n}isHalfOverFlow(e,t,n){return e<n||t<n}isHalfAllEnough(e,t,n){return e>=n||t>=n}getReverse(e,t,n,s){return e&&s||n}adjustPosIfNeed(e,t,n,s,r){const{innerWidth:a,innerHeight:o}=window,{margin:l}=this.getProps(),c=typeof l=="number"?l:l.marginLeft,u=typeof l=="number"?l:l.marginTop,h=typeof l=="number"?l:l.marginRight,d=typeof l=="number"?l:l.marginBottom;let p=!1,f=!1;const g=this.getProp("spacing");let m=g,y=0;if(typeof g!="number"){const b=e.includes("top")||e.includes("bottom");m=b?g.y:g.x,y=b?g.x:g.y}if(s.width>0&&s.height>0){const b=n.left,x=n.right,S=n.top,C=n.bottom,w=a-b,A=o-S,T=a-x,E=o-C,P=s.width>n.width,O=s.height>n.height,M=S-u<s.height+m&&E-d>s.height+m,R=b-c<s.width+m&&T-h>s.width+m,j=E-d<s.height+m&&S-u>s.height+m,I=T-h<s.width+m&&b-c>s.width+m;A-d<s.height+m&&C-u>s.height+m,C-u<s.height+m&&A-d>s.height+m;const D=A<s.height+y&&C>s.height+y,z=C<s.height+y&&A>s.height+y,$=w<s.width+y&&x>s.width+y,V=x<s.width+y&&w>s.width+y,L=A<s.height+m&&C>s.height+m,Y=C<s.height+m&&A>s.height+m,ae=w<s.width&&x>s.width,W=x<s.width&&w>s.width,ce=S-r.top,he=b-r.left,le=ce+n.height,de=he+n.width,te=r.bottom-C,me=r.right-x,Be=te+n.height,ve=me+n.width,Re=this.isReverse(ce-u,te-d,s.height+m),Qe=this.isReverse(he-c,me-h,s.width+m),Lt=this.isReverse(te-d,ce-u,s.height+m),Ue=this.isReverse(me-h,he-c,s.width+m);this.isReverse(Be-d,le-u,s.height+m),this.isReverse(le-u,Be-d,s.height+m);const je=this.isReverse(Be,le,s.height+y),ut=this.isReverse(le,Be,s.height+y),vt=this.isReverse(ve,de,s.width+y),si=this.isReverse(de,ve,s.width+y),Me=n.height/2,Ot=n.width/2,Gi=this.isOverFlow(S-u,E-d,s.height+m),Jn=this.isOverFlow(b-c,T-h,s.width+m),lt=this.isOverFlow(C-u,A-d,s.height+m),Fo=this.isOverFlow(x-c,w-h,s.width+m),fe=this.isHalfOverFlow(C-Me,A-Me,(s.height+y)/2),xe=this.isHalfOverFlow(x-Ot,w-Ot,(s.width+y)/2),G=this.isHalfAllEnough(C-Me,A-Me,(s.height+y)/2),at=this.isHalfAllEnough(x-Ot,w-Ot,(s.width+y)/2),Vt=this.isOverFlow(ce-u,te-d,s.height+m),Li=this.isOverFlow(he-c,me-h,s.width+m),ln=this.isOverFlow(le-u,Be-d,s.height+m),cn=this.isOverFlow(de-c,ve-h,s.width+m),Or=this.isHalfOverFlow(le-Me,Be-Me,(s.height+y)/2),ja=this.isHalfOverFlow(de-Ot,ve-Ot,(s.width+y)/2),ls=this.isHalfAllEnough(le-Me,Be-Me,(s.height+y)/2),Bo=this.isHalfAllEnough(de-Ot,ve-Ot,(s.width+y)/2),ia=this.getReverse(Gi,Vt,M,Re),g2=this.getReverse(Jn,Li,R,Qe),m2=this.getReverse(Gi,Vt,j,Lt),y2=this.getReverse(Jn,Li,I,Ue),ag=this.getReverse(lt,ln,D,je),eS=this.getReverse(lt,ln,z,ut),og=this.getReverse(Fo,cn,$,vt),tS=this.getReverse(Fo,cn,V,si),S$=fe&&Or,C$=xe&&ja;switch(e){case"top":ia&&(e=this._adjustPos(e,!0)),C$&&(og||tS)&&(e=this._adjustPos(e,!0,"expand",og?"Right":"Left"));break;case"topLeft":ia&&(e=this._adjustPos(e,!0)),og&&P&&(e=this._adjustPos(e)),f&&(at||Bo)&&(e=this._adjustPos(e,!0,"reduce"));break;case"topRight":ia&&(e=this._adjustPos(e,!0)),tS&&P&&(e=this._adjustPos(e)),f&&(at||Bo)&&(e=this._adjustPos(e,!0,"reduce"));break;case"left":g2&&(e=this._adjustPos(e)),S$&&(ag||eS)&&(e=this._adjustPos(e,!1,"expand",ag?"Bottom":"Top"));break;case"leftTop":g2&&(e=this._adjustPos(e)),ag&&O&&(e=this._adjustPos(e,!0)),p&&(G||ls)&&(e=this._adjustPos(e,!1,"reduce"));break;case"leftBottom":g2&&(e=this._adjustPos(e)),eS&&O&&(e=this._adjustPos(e,!0)),p&&(G||ls)&&(e=this._adjustPos(e,!1,"reduce"));break;case"bottom":m2&&(e=this._adjustPos(e,!0)),C$&&(og||tS)&&(e=this._adjustPos(e,!0,"expand",og?"Right":"Left"));break;case"bottomLeft":m2&&(e=this._adjustPos(e,!0)),og&&P&&(e=this._adjustPos(e)),f&&(at||Bo)&&(e=this._adjustPos(e,!0,"reduce"));break;case"bottomRight":m2&&(e=this._adjustPos(e,!0)),tS&&P&&(e=this._adjustPos(e)),f&&(at||Bo)&&(e=this._adjustPos(e,!0,"reduce"));break;case"right":y2&&(e=this._adjustPos(e)),S$&&(ag||eS)&&(e=this._adjustPos(e,!1,"expand",ag?"Bottom":"Top"));break;case"rightTop":y2&&(e=this._adjustPos(e)),ag&&O&&(e=this._adjustPos(e,!0)),p&&(G||ls)&&(e=this._adjustPos(e,!1,"reduce"));break;case"rightBottom":y2&&(e=this._adjustPos(e)),eS&&O&&(e=this._adjustPos(e,!0)),p&&(G||ls)&&(e=this._adjustPos(e,!1,"reduce"));break;case"leftTopOver":L&&(e=this._adjustPos(e,!0)),ae&&(e=this._adjustPos(e));break;case"leftBottomOver":Y&&(e=this._adjustPos(e,!0)),ae&&(e=this._adjustPos(e));break;case"rightTopOver":L&&(e=this._adjustPos(e,!0)),W&&(e=this._adjustPos(e));break;case"rightBottomOver":Y&&(e=this._adjustPos(e,!0)),W&&(e=this._adjustPos(e));break}this.isTB(e)&&(p=Gi&&Vt,e==="top"||e==="bottom"?f=xe&&ja||x<0||T<0:f=Fo&&cn||x<0||T<0),this.isLR(e)&&(f=Jn&&Li,e==="left"||e==="right"?p=fe&&Or||S<0||A<0:p=lt&&ln||S<0||A<0)}return{position:e,isHeightOverFlow:p,isWidthOverFlow:f}}_bindScrollEvent(){this._adapter.registerScrollHandler(()=>this.calcPosition())}unBindScrollEvent(){this._adapter.unregisterScrollHandler()}_initContainerPosition(){this._adapter.updateContainerPosition()}_handleTriggerKeydown(e){const{closeOnEsc:t,disableArrowKeyDown:n}=this.getProps(),s=this._adapter.getContainer(),r=this._adapter.getFocusableElements(s),a=r.length;switch(e&&e.key){case"Escape":jn(e),t&&this._handleEscKeyDown(e);break;case"ArrowUp":!n&&a&&this._handleTriggerArrowUpKeydown(r,e);break;case"ArrowDown":!n&&a&&this._handleTriggerArrowDownKeydown(r,e);break}}focusTrigger(){const{trigger:e,returnFocusOnClose:t,preventScroll:n}=this.getProps();if(t&&e!=="custom"){const s=this._adapter.getTriggerNode();s&&"focus"in s&&s.focus({preventScroll:n})}}_handleEscKeyDown(e){const{trigger:t}=this.getProps();t!=="custom"&&(this.focusTrigger(),this.hide()),this._adapter.notifyEscKeydown(e)}_handleContainerTabKeyDown(e,t){const{preventScroll:n}=this.getProps(),s=this._adapter.getActiveElement();e[e.length-1]===s&&(e[0].focus({preventScroll:n}),t.preventDefault())}_handleContainerShiftTabKeyDown(e,t){const{preventScroll:n}=this.getProps(),s=this._adapter.getActiveElement();e[0]===s&&(e[e.length-1].focus({preventScroll:n}),t.preventDefault())}_handleTriggerArrowDownKeydown(e,t){const{preventScroll:n}=this.getProps();e[0].focus({preventScroll:n}),t.preventDefault()}_handleTriggerArrowUpKeydown(e,t){const{preventScroll:n}=this.getProps();e[e.length-1].focus({preventScroll:n}),t.preventDefault()}};const OTe={PREFIX:`${ge}-tooltip`},Zh={POSITION_SET:["top","topLeft","topRight","left","leftTop","leftBottom","right","rightTop","rightBottom","bottom","bottomLeft","bottomRight","leftTopOver","rightTopOver","leftBottomOver","rightBottomOver"],TRIGGER_SET:["hover","focus","click","custom","contextMenu"],STATUS_DISABLED:"disabled",STATUS_LOADING:"loading"},dh={ARROW_BOUNDING:{offsetX:0,offsetY:2,width:24,height:7},DEFAULT_Z_INDEX:1060,MOUSE_ENTER_DELAY:50,MOUSE_LEAVE_DELAY:50,SPACING:8,MARGIN:0};function rf(i){return`${i}-${new Date().getTime()}-${Math.random()}`}function Cp(){var i,e;try{return(e=(i=crypto==null?void 0:crypto.randomUUID)===null||i===void 0?void 0:i.call(crypto))!==null&&e!==void 0?e:String(9987e3+-1e11).replace(/[018]/g,t=>(Number(t)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(t)/4).toString(16))}catch{return rf("semi")}}function Cl(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{prefix:e="",length:t=7}=i,n="0123456789abcdefghijklmnopqrstuvwxyz",s=n.length;let r="";for(let a=0;a<t;a++){const o=Math.floor(Math.random()*s);r+=n.charAt(o)}return e?`${e}-${r}`:r}function MTe(i){return k.isValidElement(i)}var ITe=q3,RTe=t0,LTe=Z1,j6=Jr,DTe=i0;function FTe(i,e,t,n){if(!j6(i))return i;e=RTe(e,i);for(var s=-1,r=e.length,a=r-1,o=i;o!=null&&++s<r;){var l=DTe(e[s]),c=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return i;if(s!=a){var u=o[l];c=n?n(u,l,o):void 0,c===void 0&&(c=j6(u)?u:LTe(e[s+1])?[]:{})}ITe(o,l,c),o=o[l]}return i}var pQ=FTe,BTe=pQ;function jTe(i,e,t){return i==null?i:BTe(i,e,t)}var NTe=jTe;const nc=Xe(NTe);var $Te=ej,zTe=1,HTe=4;function VTe(i,e){return e=typeof e=="function"?e:void 0,$Te(i,zTe|HTe,e)}var UTe=VTe;const WTe=Xe(UTe),GTe=i=>i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),KTe=i=>{let{autoEscape:e,caseSensitive:t,searchWords:n,sourceString:s}=i;return n.filter(r=>r).reduce((r,a)=>{e&&(a=GTe(a));const o=new RegExp(a,t?"g":"gi");let l;for(;l=o.exec(s);){const c=l.index,u=o.lastIndex;u>c&&r.push({highlight:!1,start:c,end:u}),l.index===o.lastIndex&&o.lastIndex++}return r},[])},XTe=i=>{let{chunks:e}=i;return e=e.sort((t,n)=>t.start-n.start).reduce((t,n)=>{if(t.length===0)return[n];{const s=t.pop();if(n.start<=s.end){const r=Math.max(s.end,n.end);t.push({highlight:!1,start:s.start,end:r})}else t.push(s,n);return t}},[]),e},YTe=i=>{let{chunksToHighlight:e,totalLength:t}=i;const n=[],s=(r,a,o)=>{a-r>0&&n.push({start:r,end:a,highlight:o})};if(e.length===0)s(0,t,!1);else{let r=0;e.forEach(a=>{s(r,a.start,!1),s(a.start,a.end,!0),r=a.end}),s(r,t,!1)}return n},qTe=i=>{let{autoEscape:e=!0,caseSensitive:t=!1,searchWords:n,sourceString:s}=i;Ii(n)&&(n=[n]);const r=KTe({autoEscape:e,caseSensitive:t,searchWords:n,sourceString:s}),a=XTe({chunks:r});return YTe({chunksToHighlight:a,totalLength:s?s.length:0})};class ZTe{constructor(){this.config={}}}const Z2=new ZTe;var N6=function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(a){a(r)})}return new(t||(t=Promise))(function(r,a){function o(u){try{c(n.next(u))}catch(h){a(h)}}function l(u){try{c(n.throw(u))}catch(h){a(h)}}function c(u){u.done?r(u.value):s(u.value).then(o,l)}c((n=n.apply(i,e||[])).next())})};function CS(i,e){i&&typeof i.stopPropagation=="function"&&i.stopPropagation(),i.nativeEvent&&typeof i.nativeEvent.stopImmediatePropagation=="function"&&i.nativeEvent.stopImmediatePropagation()}function sl(i,e){return WTe(i,t=>{if(typeof e=="function")return e(t);if(typeof t=="function"||k.isValidElement(t)||Object.prototype.toString.call(t)==="[object Error]")return t;if(Array.isArray(t)&&t.length===0){const n=Object.keys(t);if(n.length){const s=[];n.forEach(r=>{nc(s,r,t[r])});try{ns(ne(process,"env.NODE_ENV")!=="production",`[Semi] You may use an out-of-bounds array. In some cases, your program may not behave as expected.
                    The maximum length of an array is 4294967295.
                    Please check whether the array subscript in your data exceeds the maximum value of the JS array subscript`)}catch{}return s}else return}})}const fQ=i=>{let{sourceString:e="",searchWords:t=[],option:n={autoEscape:!0,caseSensitive:!1}}=i;const s=qTe(Object.assign({sourceString:e,searchWords:t},n)),r=n.highlightTag||"mark",a=n.highlightClassName||"",o=n.highlightStyle||{};return s.map((l,c)=>{const{end:u,start:h,highlight:d}=l,p=e.substr(h,u-h);return d?k.createElement(r,{style:o,className:a,key:p+c},p):p})},gQ=(i,e)=>{let{match:t,unmatch:n,callInInit:s=!0}=e;if(typeof window<"u"){let o=function(l){l.matches?t&&t(l):n&&n(l)};var r=o;const a=window.matchMedia(i);return s&&o(a),Object.prototype.hasOwnProperty.call(a,"addEventListener")?(a.addEventListener("change",o),()=>a.removeEventListener("change",o)):(a.addListener(o),()=>a.removeListener(o))}return()=>{}},oo=i=>k.isValidElement(i)&&ne(i.type,"elementType")==="Icon";function mQ(){return document?document.activeElement:null}function yQ(i){if(!Sp(i))return[];const t=["input:not([disabled]):not([tabindex='-1'])","textarea:not([disabled]):not([tabindex='-1'])","button:not([disabled]):not([tabindex='-1'])","a[href]:not([tabindex='-1'])","select:not([disabled]):not([tabindex='-1'])","area[href]:not([tabindex='-1'])","iframe:not([tabindex='-1'])","object:not([tabindex='-1'])","*[tabindex]:not([tabindex='-1'])","*[contenteditable]:not([tabindex='-1'])"].join(",");return Array.from(i.querySelectorAll(t))}function nj(i,e){return N6(this,void 0,void 0,function*(){if(e===0){yield i();return}else{yield new Promise(t=>{setTimeout(()=>N6(this,void 0,void 0,function*(){yield nj(i,e-1),t()}),0)});return}})}function sj(){return globalThis&&Object.prototype.toString.call(globalThis)==="[object Window]"?window.innerWidth-document.documentElement.clientWidth:0}function os(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=()=>{var n,s;return((s=(n=Z2==null?void 0:Z2.config)===null||n===void 0?void 0:n.overrideDefaultProps)===null||s===void 0?void 0:s[i])||{}};return new Proxy(Object.assign({},e),{get(n,s,r){const a=t();return s in a?a[s]:Reflect.get(n,s,r)},set(n,s,r,a){return Reflect.set(n,s,r,a)},ownKeys(){const n=t();return Array.from(new Set([...Reflect.ownKeys(e),...Object.keys(n)]))},getOwnPropertyDescriptor(n,s){const r=t();return s in r?Reflect.getOwnPropertyDescriptor(r,s):Reflect.getOwnPropertyDescriptor(n,s)}})}const Da=k.createContext({}),JTe=()=>document.body;class Hf extends H.PureComponent{constructor(e,t){var n;super(e),n=this,this.initContainer=function(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;var a,o;try{let l;if(!n.el||!(!((a=n.state)===null||a===void 0)&&a.container)||!Array.from(n.state.container.childNodes).includes(n.el)){n.el=document.createElement("div");const u=(n.props.getPopupContainer||s.getPopupContainer||JTe)();return u.appendChild(n.el),n.addStyle(n.props.style),n.addClass(n.props.prefixCls,s,n.props.className),l=u,l}}catch(l){if(!r)throw l}return(o=n.state)===null||o===void 0?void 0:o.container},this.addStyle=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.el)for(const r of Object.keys(s))n.el.style[r]=s[r]},this.addClass=function(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.context;const{direction:a}=r;for(var o=arguments.length,l=new Array(o>2?o-2:0),c=2;c<o;c++)l[c-2]=arguments[c];const u=K(s,...l,{[`${s}-rtl`]:a==="rtl"});n.el&&(n.el.className=u)},this.state={container:this.initContainer(t,!0)}}componentDidMount(){const e=this.initContainer(this.context);e!==this.state.container&&this.setState({container:e})}componentDidUpdate(e){const{didUpdate:t}=this.props;t&&t(e)}componentWillUnmount(){const{container:e}=this.state;e&&e.removeChild(this.el)}render(){const{state:e,props:t}=this;return e.container?Nf.createPortal(t.children,this.el):null}}Hf.contextType=Da;Hf.defaultProps={prefixCls:`${ge}-portal`};Hf.propTypes={children:v.node,prefixCls:v.string,getPopupContainer:v.func,className:v.string,didUpdate:v.func};var QTe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const eEe=i=>{const{className:e,style:t}=i,n=QTe(i,["className","style"]);return k.createElement("svg",Object.assign({"aria-hidden":!0,className:e,style:t},n,{width:"24",height:"7",viewBox:"0 0 24 7",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}),k.createElement("path",{d:"M24 0V1C20 1 18.5 2 16.5 4C14.5 6 14 7 12 7C10 7 9.5 6 7.5 4C5.5 2 4 1 0 1V0H24Z"}))};var tEe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const iEe=i=>{const{className:e,style:t}=i,n=tEe(i,["className","style"]);return k.createElement("svg",Object.assign({"aria-hidden":!0,className:e,style:t},n,{width:"7",height:"24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"}),k.createElement("path",{d:"M0 0L1 0C1 4, 2 5.5, 4 7.5S7,10 7,12S6 14.5, 4 16.5S1,20 1,24L0 24L0 0z"}))},nEe=v.shape({offsetX:v.number,offsetY:v.number,width:v.number,height:v.number});class Sc extends k.Component{constructor(e){super(e),this.handleAnimationStart=()=>{var t,n;(n=(t=this.props).onAnimationStart)===null||n===void 0||n.call(t)},this.handleAnimationEnd=()=>{this.setState({currentClassName:this.props.endClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!1},()=>{var t,n;(n=(t=this.props).onAnimationEnd)===null||n===void 0||n.call(t,!1)})},this.state={currentClassName:this.props.startClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!0}}componentDidMount(){var e,t,n,s;(t=(e=this.props).onAnimationStart)===null||t===void 0||t.call(e),this.props.motion||((s=(n=this.props).onAnimationEnd)===null||s===void 0||s.call(n,!1),this.setState({isAnimating:!1}))}componentDidUpdate(e,t,n){const s=Object.keys(this.props).filter(r=>!wi(this.props[r],e[r]));s.includes("animationState"),(s.includes("startClassName")||s.includes("replayKey")||s.includes("motion"))&&this.setState({currentClassName:this.props.startClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!0},()=>{var r,a,o,l;(a=(r=this.props).onAnimationStart)===null||a===void 0||a.call(r),this.props.motion||((l=(o=this.props).onAnimationEnd)===null||l===void 0||l.call(o,this.state.isAnimating),this.setState({isAnimating:!1}))})}render(){var e;return this.props.motion?this.props.children({animationClassName:(e=this.state.currentClassName)!==null&&e!==void 0?e:"",animationStyle:this.state.extraStyle,animationEventsNeedBind:{onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},isAnimating:this.state.isAnimating}):this.props.children({animationClassName:"",animationStyle:{},animationEventsNeedBind:{},isAnimating:this.state.isAnimating})}}Sc.defaultProps={motion:!0,replayKey:""};var $6=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const WC=OTe.PREFIX,sEe=Zh.POSITION_SET,rEe=Zh.TRIGGER_SET,aEe=["flex","block","table","flow-root","grid"],oEe=()=>document.body;let En=class extends Ve{constructor(e){super(e),this.isAnimating=!1,this.setContainerEl=t=>this.containerEl={current:t},this.isSpecial=t=>{if(Sp(t))return!!t.disabled;if(H.isValidElement(t)){if(ne(t,"props.disabled"))return Zh.STATUS_DISABLED;const s=ne(t,"props.loading"),r=!eu(t)&&!eu(t.type)&&(ne(t,"type.elementType")==="Button"||ne(t,"type.elementType")==="IconButton");if(s&&r)return Zh.STATUS_LOADING}return!1},this.didLeave=()=>{this.props.keepDOM?this.foundation.setDisplayNone(!0):this.foundation.removePortal(),this.foundation.unBindEvent()},this.renderIcon=()=>{const{placement:t}=this.state,{showArrow:n,prefixCls:s,style:r}=this.props;let a=null;const o=K([`${s}-icon-arrow`]),l=ne(r,"backgroundColor"),c=t!=null&&t.includes("left")||t!=null&&t.includes("right")?k.createElement(iEe,null):k.createElement(eEe,null);return n&&(H.isValidElement(n)?a=n:a=k.cloneElement(c,{className:o,style:{color:l,fill:"currentColor"}})),a},this.handlePortalInnerClick=t=>{this.props.clickToHide&&this.foundation.hide(),this.props.stopPropagation&&CS(t)},this.handlePortalMouseDown=t=>{this.props.stopPropagation&&CS(t)},this.handlePortalFocus=t=>{this.props.stopPropagation&&CS(t)},this.handlePortalBlur=t=>{this.props.stopPropagation&&CS(t)},this.handlePortalInnerKeyDown=t=>{this.foundation.handleContainerKeydown(t)},this.renderContentNode=t=>{const n={initialFocusRef:this.initialFocusRef};return xt(t)?t(n):t},this.renderPortal=()=>{const{containerStyle:t={},visible:n,portalEventSet:s,placement:r,displayNone:a,transitionState:o,id:l,isPositionUpdated:c}=this.state,{prefixCls:u,content:h,showArrow:d,style:p,motion:f,role:g,zIndex:m}=this.props,y=this.renderContentNode(h),{className:b}=this.props,x=this.context.direction,S=K(b,{[`${u}-wrapper`]:!0,[`${u}-wrapper-show`]:n,[`${u}-with-arrow`]:!!d,[`${u}-rtl`]:x==="rtl"}),C=this.renderIcon(),w=_n(t,f?["transformOrigin"]:void 0),A=ne(t,"transformOrigin"),T=ne(p,"opacity",null),E=T||1,P=k.createElement(Sc,{fillMode:"forwards",animationState:o,motion:f&&c,startClassName:o==="enter"?`${WC}-animation-show`:`${WC}-animation-hide`,onAnimationStart:()=>this.isAnimating=!0,onAnimationEnd:()=>{var O,M;o==="leave"&&(this.didLeave(),(M=(O=this.props).afterClose)===null||M===void 0||M.call(O)),this.isAnimating=!1}},O=>{let{animationStyle:M,animationClassName:R,animationEventsNeedBind:j}=O;return k.createElement("div",Object.assign({className:K(S,R),style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},M),a?{display:"none"}:{}),{transformOrigin:A}),p),T?{opacity:c?E:"0"}:{})},s,j,{role:g,"x-placement":r,id:l}),k.createElement("div",{className:`${WC}-content`},y),C)});return k.createElement(Hf,{getPopupContainer:this.props.getPopupContainer,style:{zIndex:m}},k.createElement("div",{tabIndex:-1,className:`${ge}-portal-inner`,style:w,ref:this.setContainerEl,onClick:this.handlePortalInnerClick,onFocus:this.handlePortalFocus,onBlur:this.handlePortalBlur,onMouseDown:this.handlePortalMouseDown,onKeyDown:this.handlePortalInnerKeyDown},P))},this.wrapSpan=t=>{const{wrapperClassName:n}=this.props,s=ne(t,"props.style.display"),r=ne(t,"props.block"),a=typeof t=="string",o={};return a||(o.display="inline-block"),(r||aEe.includes(s))&&(o.width="100%"),k.createElement("span",{className:n,style:o},t)},this.mergeEvents=(t,n)=>{const s={};return ws(n,(r,a)=>{typeof r=="function"&&(s[a]=function(){r(...arguments),t&&typeof t[a]=="function"&&t[a](...arguments)})}),s},this.getPopupId=()=>this.state.id,this.state={visible:!1,transitionState:"",triggerEventSet:{},portalEventSet:{},containerStyle:{},isInsert:!1,placement:e.position||"top",transitionStyle:{},isPositionUpdated:!1,id:e.wrapperId,displayNone:!1},this.foundation=new PTe(this.adapter),this.eventManager=new dQ,this.triggerEl=k.createRef(),this.containerEl=k.createRef(),this.initialFocusRef=k.createRef(),this.clickOutsideHandler=null,this.resizeHandler=null,this.isWrapped=!1,this.containerPosition=void 0}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{on:function(){return e.eventManager.on(...arguments)},off:function(){return e.eventManager.off(...arguments)},getAnimatingState:()=>this.isAnimating,insertPortal:(t,n)=>{var s=$6(n,["position"]);this.setState({isInsert:!0,transitionState:"enter",containerStyle:Object.assign(Object.assign({},this.state.containerStyle),s)},()=>{setTimeout(()=>{this.eventManager.emit("portalInserted")},0)})},removePortal:()=>{this.setState({isInsert:!1,isPositionUpdated:!1})},getEventName:()=>({mouseEnter:"onMouseEnter",mouseLeave:"onMouseLeave",mouseOut:"onMouseOut",mouseOver:"onMouseOver",click:"onClick",focus:"onFocus",blur:"onBlur",keydown:"onKeyDown",contextMenu:"onContextMenu"}),registerTriggerEvent:t=>{this.setState({triggerEventSet:t})},registerPortalEvent:t=>{this.setState({portalEventSet:t})},getTriggerBounding:()=>{const t=this.adapter.getTriggerNode();return this.triggerEl.current=t,t&&t.getBoundingClientRect()},getPopupContainerRect:()=>{const t=this.getPopupContainer();let n=null;if(t&&Sp(t)){const s=bTe(t.getBoundingClientRect());n=Object.assign(Object.assign({},s),{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop})}return n},containerIsBody:()=>this.getPopupContainer()===document.body,containerIsRelative:()=>{const t=this.getPopupContainer();return window.getComputedStyle(t).getPropertyValue("position")==="relative"},containerIsRelativeOrAbsolute:()=>["relative","absolute"].includes(this.containerPosition),getWrapperBounding:()=>{const t=this.containerEl&&this.containerEl.current;return t&&t.getBoundingClientRect()},getDocumentElementBounding:()=>document.documentElement.getBoundingClientRect(),setPosition:t=>{var{position:n}=t,s=$6(t,["position"]);this.setState({containerStyle:Object.assign(Object.assign({},this.state.containerStyle),s),placement:n,isPositionUpdated:!0},()=>{this.eventManager.emit("positionUpdated")})},setDisplayNone:(t,n)=>{this.setState({displayNone:t},n)},updatePlacementAttr:t=>{this.setState({placement:t})},togglePortalVisible:(t,n)=>{const s={};s.transitionState=t?"enter":"leave",s.visible=t,this.mounted&&this.setState(s,()=>{n()})},registerClickOutsideHandler:t=>{this.clickOutsideHandler&&this.adapter.unregisterClickOutsideHandler(),this.clickOutsideHandler=n=>{if(!this.mounted)return!1;let s=this.triggerEl&&this.triggerEl.current,r=this.containerEl&&this.containerEl.current;s=vr.findDOMNode(s),r=vr.findDOMNode(r);const a=n.target,o=n.composedPath&&n.composedPath()||[a],l=this.props.clickTriggerToHide?s&&s.contains(a)||o.includes(s):!1;(s&&!s.contains(a)&&r&&!r.contains(a)&&!(o.includes(r)||o.includes(s))||l)&&(this.props.onClickOutSide(n),t())},window.addEventListener("mousedown",this.clickOutsideHandler)},unregisterClickOutsideHandler:()=>{this.clickOutsideHandler&&(window.removeEventListener("mousedown",this.clickOutsideHandler),this.clickOutsideHandler=null)},registerResizeHandler:t=>{this.resizeHandler&&this.adapter.unregisterResizeHandler(),this.resizeHandler=xb(n=>{if(!this.mounted)return!1;t(n)},10),window.addEventListener("resize",this.resizeHandler,!1)},unregisterResizeHandler:()=>{this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler,!1),this.resizeHandler=null)},notifyVisibleChange:t=>{this.props.onVisibleChange(t)},registerScrollHandler:t=>{this.scrollHandler&&this.adapter.unregisterScrollHandler(),this.scrollHandler=xb(n=>{if(!this.mounted)return!1;const s=this.adapter.getTriggerNode();if(n.target.contains(s)){const a={x:n.target.scrollLeft,y:n.target.scrollTop};t(a)}},10),window.addEventListener("scroll",this.scrollHandler,!0)},unregisterScrollHandler:()=>{this.scrollHandler&&(window.removeEventListener("scroll",this.scrollHandler,!0),this.scrollHandler=null)},canMotion:()=>!!this.props.motion,updateContainerPosition:()=>{const t=this.getPopupContainer();if(t&&Sp(t)){const s=window.getComputedStyle(t).getPropertyValue("position");this.containerPosition=s}},getContainerPosition:()=>this.containerPosition,getContainer:()=>this.containerEl&&this.containerEl.current,getTriggerNode:()=>{let t=this.triggerEl.current;return Sp(this.triggerEl.current)||(t=vr.findDOMNode(this.triggerEl.current)),t},getFocusableElements:t=>yQ(t),getActiveElement:()=>mQ(),setInitialFocus:()=>{const{preventScroll:t}=this.props,n=ne(this,"initialFocusRef.current");n&&"focus"in n&&n.focus({preventScroll:t})},notifyEscKeydown:t=>{this.props.onEscKeyDown(t)},setId:()=>{this.setState({id:Cl()})},getTriggerDOM:()=>this.triggerEl.current?vr.findDOMNode(this.triggerEl.current):null})}componentDidMount(){this.mounted=!0,this.getPopupContainer=this.props.getPopupContainer||this.context.getPopupContainer||oEe,this.foundation.init(),nj(()=>{let e=this.triggerEl.current;e&&(e instanceof HTMLElement||(e=Nf.findDOMNode(e))),this.foundation.updateStateIfCursorOnTrigger(e)},1)}componentWillUnmount(){this.mounted=!1,this.foundation.destroy()}focusTrigger(){this.foundation.focusTrigger()}rePosition(){return this.foundation.calcPosition()}componentDidUpdate(e,t){ns(this.props.mouseLeaveDelay<this.props.mouseEnterDelay,"[Semi Tooltip] 'mouseLeaveDelay' cannot be less than 'mouseEnterDelay', which may cause the dropdown layer to not be hidden."),e.visible!==this.props.visible&&(["hover","focus"].includes(this.props.trigger)?this.props.visible?this.foundation.delayShow():this.foundation.delayHide():this.props.visible?this.foundation.show():this.foundation.hide()),wi(e.rePosKey,this.props.rePosKey)||this.rePosition()}render(){const{isInsert:e,triggerEventSet:t,visible:n,id:s}=this.state,{wrapWhenSpecial:r,role:a,trigger:o}=this.props;let{children:l}=this.props;const c=Object.assign({},ne(l,"props.style")),u={};if(r){const p=this.isSpecial(l);p?(c.pointerEvents="none",p===Zh.STATUS_DISABLED&&(u.cursor="not-allowed"),l=H.cloneElement(l,{style:c}),o!=="custom"&&(l=this.wrapSpan(l)),this.isWrapped=!0):H.isValidElement(l)||(l=this.wrapSpan(l),this.isWrapped=!0)}let h={};a==="dialog"?(h["aria-expanded"]=n?"true":"false",h["aria-haspopup"]="dialog",h["aria-controls"]=s):h["aria-describedby"]=s;const d=k.cloneElement(l,Object.assign(Object.assign(Object.assign(Object.assign({},h),l.props),this.mergeEvents(l.props,t)),{style:Object.assign(Object.assign({},ne(l,"props.style")),u),className:K(ne(l,"props.className")),ref:p=>{this.triggerEl.current=p;const{ref:f}=l;typeof f=="function"?f(p):f&&typeof f=="object"&&(f.current=p)},tabIndex:l.props.tabIndex||0,"data-popupid":s}));return k.createElement(k.Fragment,null,e?this.renderPortal():null,d)}};En.contextType=Da;En.propTypes={children:v.node,motion:v.bool,autoAdjustOverflow:v.bool,position:v.oneOf(sEe),getPopupContainer:v.func,mouseEnterDelay:v.number,mouseLeaveDelay:v.number,trigger:v.oneOf(rEe).isRequired,className:v.string,wrapperClassName:v.string,clickToHide:v.bool,clickTriggerToHide:v.bool,visible:v.bool,style:v.object,content:v.oneOfType([v.node,v.func]),prefixCls:v.string,onVisibleChange:v.func,onClickOutSide:v.func,spacing:v.oneOfType([v.number,v.object]),margin:v.oneOfType([v.number,v.object]),showArrow:v.oneOfType([v.bool,v.node]),zIndex:v.number,rePosKey:v.oneOfType([v.string,v.number]),arrowBounding:nEe,transformFromCenter:v.bool,arrowPointAtCenter:v.bool,stopPropagation:v.bool,role:v.string,wrapWhenSpecial:v.bool,guardFocus:v.bool,returnFocusOnClose:v.bool,preventScroll:v.bool,keepDOM:v.bool};En.__SemiComponentName__="Tooltip";En.defaultProps=os(En.__SemiComponentName__,{arrowBounding:dh.ARROW_BOUNDING,autoAdjustOverflow:!0,arrowPointAtCenter:!0,trigger:"hover",transformFromCenter:!0,position:"top",prefixCls:WC,role:"tooltip",mouseEnterDelay:dh.MOUSE_ENTER_DELAY,mouseLeaveDelay:dh.MOUSE_LEAVE_DELAY,motion:!0,onVisibleChange:J,onClickOutSide:J,spacing:dh.SPACING,margin:dh.MARGIN,showArrow:!0,wrapWhenSpecial:!0,zIndex:dh.DEFAULT_Z_INDEX,closeOnEsc:!1,guardFocus:!1,returnFocusOnClose:!1,onEscKeyDown:J,disableFocusListener:!1,disableArrowKeyDown:!1,keepDOM:!1});var rj={exports:{}};const _Q=(i,{target:e=document.body}={})=>{const t=document.createElement("textarea"),n=document.activeElement;t.value=i,t.setAttribute("readonly",""),t.style.contain="strict",t.style.position="absolute",t.style.left="-9999px",t.style.fontSize="12pt";const s=document.getSelection();let r=!1;s.rangeCount>0&&(r=s.getRangeAt(0)),e.append(t),t.select(),t.selectionStart=0,t.selectionEnd=i.length;let a=!1;try{a=document.execCommand("copy")}catch{}return t.remove(),r&&(s.removeAllRanges(),s.addRange(r)),n&&n.focus(),a};rj.exports=_Q;rj.exports.default=_Q;var lEe=rj.exports;const Kw=Xe(lEe);function Vr(){}const vQ=k.createContext(null);function jm(i){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):i.defaultWidth,n=i.formats[t]||i.formats[i.defaultWidth];return n}}function Zl(i){return function(e,t){var n=t!=null&&t.context?String(t.context):"standalone",s;if(n==="formatting"&&i.formattingValues){var r=i.defaultFormattingWidth||i.defaultWidth,a=t!=null&&t.width?String(t.width):r;s=i.formattingValues[a]||i.formattingValues[r]}else{var o=i.defaultWidth,l=t!=null&&t.width?String(t.width):i.defaultWidth;s=i.values[l]||i.values[o]}var c=i.argumentCallback?i.argumentCallback(e):e;return s[c]}}function Jl(i){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.width,s=n&&i.matchPatterns[n]||i.matchPatterns[i.defaultMatchWidth],r=e.match(s);if(!r)return null;var a=r[0],o=n&&i.parsePatterns[n]||i.parsePatterns[i.defaultParseWidth],l=Array.isArray(o)?uEe(o,function(h){return h.test(a)}):cEe(o,function(h){return h.test(a)}),c;c=i.valueCallback?i.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;var u=e.slice(a.length);return{value:c,rest:u}}}function cEe(i,e){for(var t in i)if(i.hasOwnProperty(t)&&e(i[t]))return t}function uEe(i,e){for(var t=0;t<i.length;t++)if(e(i[t]))return t}function bQ(i){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.match(i.matchPattern);if(!n)return null;var s=n[0],r=e.match(i.parsePattern);if(!r)return null;var a=i.valueCallback?i.valueCallback(r[0]):r[0];a=t.valueCallback?t.valueCallback(a):a;var o=e.slice(s.length);return{value:a,rest:o}}}function hL(i){"@babel/helpers - typeof";return hL=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hL(i)}function hEe(i){if(i===null||i===!0||i===!1)return NaN;var e=Number(i);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function aj(i,e){if(e.length<i)throw new TypeError(i+" argument"+(i>1?"s":"")+" required, but only "+e.length+" present")}function dEe(i){aj(1,arguments);var e=Object.prototype.toString.call(i);return i instanceof Date||hL(i)==="object"&&e==="[object Date]"?new Date(i.getTime()):typeof i=="number"||e==="[object Number]"?new Date(i):((typeof i=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var pEe={};function fEe(){return pEe}function z6(i,e){var t,n,s,r,a,o,l,c;aj(1,arguments);var u=fEe(),h=hEe((t=(n=(s=(r=e==null?void 0:e.weekStartsOn)!==null&&r!==void 0?r:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&s!==void 0?s:u.weekStartsOn)!==null&&n!==void 0?n:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&t!==void 0?t:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=dEe(i),p=d.getUTCDay(),f=(p<h?7:0)+p-h;return d.setUTCDate(d.getUTCDate()-f),d.setUTCHours(0,0,0,0),d}var gEe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},mEe=function(e,t,n){var s,r=gEe[e];return typeof r=="string"?s=r:t===1?s=r.one:s=r.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s},yEe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},_Ee={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},vEe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},bEe={date:jm({formats:yEe,defaultWidth:"full"}),time:jm({formats:_Ee,defaultWidth:"full"}),dateTime:jm({formats:vEe,defaultWidth:"full"})},xEe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},SEe=function(e,t,n,s){return xEe[e]},CEe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},wEe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},AEe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},kEe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},TEe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},EEe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},PEe=function(e,t){var n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},OEe={ordinalNumber:PEe,era:Zl({values:CEe,defaultWidth:"wide"}),quarter:Zl({values:wEe,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Zl({values:AEe,defaultWidth:"wide"}),day:Zl({values:kEe,defaultWidth:"wide"}),dayPeriod:Zl({values:TEe,defaultWidth:"wide",formattingValues:EEe,defaultFormattingWidth:"wide"})},MEe=/^(\d+)(th|st|nd|rd)?/i,IEe=/\d+/i,REe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},LEe={any:[/^b/i,/^(a|c)/i]},DEe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},FEe={any:[/1/i,/2/i,/3/i,/4/i]},BEe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},jEe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},NEe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},$Ee={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},zEe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},HEe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},VEe={ordinalNumber:bQ({matchPattern:MEe,parsePattern:IEe,valueCallback:function(e){return parseInt(e,10)}}),era:Jl({matchPatterns:REe,defaultMatchWidth:"wide",parsePatterns:LEe,defaultParseWidth:"any"}),quarter:Jl({matchPatterns:DEe,defaultMatchWidth:"wide",parsePatterns:FEe,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Jl({matchPatterns:BEe,defaultMatchWidth:"wide",parsePatterns:jEe,defaultParseWidth:"any"}),day:Jl({matchPatterns:NEe,defaultMatchWidth:"wide",parsePatterns:$Ee,defaultParseWidth:"any"}),dayPeriod:Jl({matchPatterns:zEe,defaultMatchWidth:"any",parsePatterns:HEe,defaultParseWidth:"any"})},UEe={code:"en-US",formatDistance:mEe,formatLong:bEe,formatRelative:SEe,localize:OEe,match:VEe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function H6(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function dL(i,e){return dL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},dL(i,e)}function WEe(i,e,t){aj(2,arguments);var n=z6(i,t),s=z6(e,t);return n.getTime()===s.getTime()}var GEe={lessThanXSeconds:{one:" 1 ",other:" {{count}} "},xSeconds:{one:"1 ",other:"{{count}} "},halfAMinute:"",lessThanXMinutes:{one:" 1 ",other:" {{count}} "},xMinutes:{one:"1 ",other:"{{count}} "},xHours:{one:"1 ",other:"{{count}} "},aboutXHours:{one:" 1 ",other:" {{count}} "},xDays:{one:"1 ",other:"{{count}} "},aboutXWeeks:{one:" 1 ",other:" {{count}} "},xWeeks:{one:"1 ",other:"{{count}} "},aboutXMonths:{one:" 1 ",other:" {{count}} "},xMonths:{one:"1 ",other:"{{count}} "},aboutXYears:{one:" 1 ",other:" {{count}} "},xYears:{one:"1 ",other:"{{count}} "},overXYears:{one:" 1 ",other:" {{count}} "},almostXYears:{one:" 1 ",other:" {{count}} "}},KEe=function(e,t,n){var s,r=GEe[e];return typeof r=="string"?s=r:t===1?s=r.one:s=r.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?s+"":s+"":s},XEe={full:"y''M''d'' EEEE",long:"y''M''d''",medium:"yyyy-MM-dd",short:"yy-MM-dd"},YEe={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},qEe={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},ZEe={date:jm({formats:XEe,defaultWidth:"full"}),time:jm({formats:YEe,defaultWidth:"full"}),dateTime:jm({formats:qEe,defaultWidth:"full"})};function V6(i,e,t){var n="eeee p";return WEe(i,e,t)?n:i.getTime()>e.getTime()?"''"+n:"''"+n}var JEe={lastWeek:V6,yesterday:"'' p",today:"'' p",tomorrow:"'' p",nextWeek:V6,other:"PP p"},QEe=function(e,t,n,s){var r=JEe[e];return typeof r=="function"?r(t,n,s):r},ePe={narrow:["",""],abbreviated:["",""],wide:["",""]},tPe={narrow:["1","2","3","4"],abbreviated:["","","",""],wide:["","","",""]},iPe={narrow:["","","","","","","","","","","",""],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["","","","","","","","","","","",""]},nPe={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},sPe={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},rPe={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},aPe=function(e,t){var n=Number(e);switch(t==null?void 0:t.unit){case"date":return n.toString()+"";case"hour":return n.toString()+"";case"minute":return n.toString()+"";case"second":return n.toString()+"";default:return" "+n.toString()}},oPe={ordinalNumber:aPe,era:Zl({values:ePe,defaultWidth:"wide"}),quarter:Zl({values:tPe,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Zl({values:iPe,defaultWidth:"wide"}),day:Zl({values:nPe,defaultWidth:"wide"}),dayPeriod:Zl({values:sPe,defaultWidth:"wide",formattingValues:rPe,defaultFormattingWidth:"wide"})},lPe=/^(\s*)?\d+(|||)?/i,cPe=/\d+/i,uPe={narrow:/^()/i,abbreviated:/^()/i,wide:/^(|)/i},hPe={any:[/^()/i,/^()/i]},dPe={narrow:/^[1234]/i,abbreviated:/^[]/i,wide:/^[]/i},pPe={any:[/(1|)/i,/(2|)/i,/(3|)/i,/(4|)/i]},fPe={narrow:/^(|||||||||[])/i,abbreviated:/^(|||||||||[]|\d|1[12])/i,wide:/^(|||||||||[])/i},gPe={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^(?!(|))/i,/^/i,/^/i],any:[/^|1/i,/^|2/i,/^|3/i,/^|4/i,/^|5/i,/^|6/i,/^|7/i,/^|8/i,/^|9/i,/^(?!(|))|10/i,/^|11/i,/^|12/i]},mPe={narrow:/^[]/i,short:/^[]/i,abbreviated:/^[]/i,wide:/^[]/i},yPe={any:[//i,//i,//i,//i,//i,//i,//i]},_Pe={any:/^(?|?||[]|?||?||)/i},vPe={any:{am:/^?/i,pm:/^?/i,midnight:/^/i,noon:/^[]/i,morning:/^/i,afternoon:/^/i,evening:/^?/i,night:/^/i}},bPe={ordinalNumber:bQ({matchPattern:lPe,parsePattern:cPe,valueCallback:function(e){return parseInt(e,10)}}),era:Jl({matchPatterns:uPe,defaultMatchWidth:"wide",parsePatterns:hPe,defaultParseWidth:"any"}),quarter:Jl({matchPatterns:dPe,defaultMatchWidth:"wide",parsePatterns:pPe,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Jl({matchPatterns:fPe,defaultMatchWidth:"wide",parsePatterns:gPe,defaultParseWidth:"any"}),day:Jl({matchPatterns:mPe,defaultMatchWidth:"wide",parsePatterns:yPe,defaultParseWidth:"any"}),dayPeriod:Jl({matchPatterns:_Pe,defaultMatchWidth:"any",parsePatterns:vPe,defaultParseWidth:"any"})},xPe={code:"zh-CN",formatDistance:KEe,formatLong:ZEe,formatRelative:QEe,localize:oPe,match:bPe,options:{weekStartsOn:1,firstWeekContainsDate:4}};const Xw={code:"zh-CN",dateFnsLocale:xPe,Pagination:{pageSize:"${pageSize}",total:"${total}",jumpTo:"",page:""},Modal:{confirm:"",cancel:""},Tabs:{more:""},TimePicker:{placeholder:{time:"",timeRange:""},begin:"",end:"",hour:"",minute:"",second:"",AM:"",PM:""},DatePicker:{placeholder:{date:"",dateTime:"",dateRange:["",""],dateTimeRange:["",""],monthRange:["",""]},presets:"",footer:{confirm:"",cancel:""},selectDate:"",selectTime:"",year:"",month:"",day:"",monthText:"${year} ${month}",months:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},fullMonths:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},weeks:{Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",Sun:""},localeFormatToken:{FORMAT_SWITCH_DATE:"yyyy-MM-dd"}},Navigation:{collapseText:"",expandText:""},Popconfirm:{confirm:"",cancel:""},Table:{emptyText:"",pageText:" ${currentStart} - ${currentEnd}  ${total} ",descend:"",ascend:"",cancelSort:""},Select:{emptyText:"",createText:""},Cascader:{emptyText:""},Tree:{emptyText:"",searchPlaceholder:""},List:{emptyText:""},Calendar:{allDay:"",AM:"${time}",PM:"${time}",datestring:"",remaining:"${remained}"},Upload:{mainText:"",illegalTips:"",legalTips:"",retry:"",replace:"",clear:"",selectedFiles:"",illegalSize:"",fail:""},TreeSelect:{searchPlaceholder:""},Typography:{copy:"",copied:"",expand:"",collapse:""},Transfer:{emptyLeft:"",emptySearch:"",emptyRight:"",placeholder:"",clear:"",selectAll:"",clearSelectAll:"",total:"${total}",selected:"${total}"},Form:{optional:""},Image:{preview:"",loading:"",loadError:"",prevTip:"",nextTip:"",zoomInTip:"",zoomOutTip:"",rotateTip:"",downloadTip:"",adaptiveTip:"",originTip:""},Chat:{deleteConfirm:"",clearContext:"",copySuccess:"",stop:"",copy:"",copied:"",dropAreaText:""}};class gi extends H.Component{renderChildren(e,t){const{componentName:n}=this.props;let s=e;e!=null&&e.code||(s=Xw);const r=ne(Xw,"dateFnsLocale"),a=ne(s,"dateFnsLocale",r);return t(s[n],s.code,a)}render(){const{children:e}=this.props;return k.createElement(Da.Consumer,null,t=>{let{locale:n}=t;return k.createElement(vQ.Consumer,null,s=>this.renderChildren(n||s,e))})}}gi.propTypes={componentName:v.string.isRequired,children:v.any};gi.defaultProps={componentName:""};const SPe="semi";var CPe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const xQ=k.forwardRef((i,e)=>{const{svg:t,spin:n=!1,rotate:s,style:r,className:a,prefixCls:o=SPe,type:l,size:c="default"}=i,u=CPe(i,["svg","spin","rotate","style","className","prefixCls","type","size"]),h=K(`${o}-icon`,{[`${o}-icon-extra-small`]:c==="extra-small",[`${o}-icon-small`]:c==="small",[`${o}-icon-default`]:c==="default",[`${o}-icon-large`]:c==="large",[`${o}-icon-extra-large`]:c==="extra-large",[`${o}-icon-spinning`]:n===!0,[`${o}-icon-${l}`]:!!l},a),d={};return Number.isSafeInteger(s)&&(d.transform=`rotate(${s}deg)`),Object.assign(d,r),k.createElement("span",Object.assign({role:"img",ref:e,"aria-label":l,className:h,style:d},u),t)});xQ.elementType="Icon";const qe=(i,e)=>{const t=k.forwardRef((n,s)=>k.createElement(xQ,Object.assign({svg:k.createElement(i),type:e,ref:s},n)));return t.elementType="Icon",t};function wPe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM13.5 17.5C13.5 16.6716 12.8284 16 12 16C11.1716 16 10.5 16.6716 10.5 17.5C10.5 18.3284 11.1716 19 12 19C12.8284 19 13.5 18.3284 13.5 17.5ZM12 5C10.9138 5 10.0507 5.91244 10.1109 6.99692L10.4168 12.5023C10.4635 13.3426 11.1584 14 12 14C12.8416 14 13.5365 13.3426 13.5832 12.5023L13.8891 6.99692C13.9493 5.91244 13.0862 5 12 5Z",fill:"currentColor"}))}const tx=qe(wPe,"alert_circle");function APe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.2268 2.3986L1.52616 19.0749C0.831449 20.4064 1.79747 22 3.29933 22H20.7007C22.2025 22 23.1686 20.4064 22.4739 19.0749L13.7732 2.3986C13.0254 0.965441 10.9746 0.965442 10.2268 2.3986ZM13.1415 14.0101C13.0603 14.5781 12.5739 15 12.0001 15C11.4263 15 10.9398 14.5781 10.8586 14.0101L10.2829 9.97992C10.1336 8.93495 10.9445 8.00002 12.0001 8.00002C13.0556 8.00002 13.8665 8.93495 13.7172 9.97992L13.1415 14.0101ZM13.5001 18.5C13.5001 19.3284 12.8285 20 12.0001 20C11.1716 20 10.5001 19.3284 10.5001 18.5C10.5001 17.6716 11.1716 17 12.0001 17C12.8285 17 13.5001 17.6716 13.5001 18.5Z",fill:"currentColor"}))}const ix=qe(APe,"alert_triangle");function kPe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 12C23 12.8284 22.3284 13.5 21.5 13.5L6.12132 13.5L12.5607 19.9393C13.1464 20.5251 13.1464 21.4749 12.5607 22.0607C11.9749 22.6464 11.0251 22.6464 10.4393 22.0607L1.43934 13.0607C0.853554 12.4749 0.853554 11.5251 1.43934 10.9393L10.4393 1.93934C11.0251 1.35355 11.9749 1.35355 12.5607 1.93934C13.1464 2.52513 13.1464 3.47487 12.5607 4.06066L6.12132 10.5L21.5 10.5C22.3284 10.5 23 11.1716 23 12Z",fill:"currentColor"}))}const TPe=qe(kPe,"arrow_left");function EPe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 12C1 11.1716 1.67157 10.5 2.5 10.5L17.8787 10.5L11.4393 4.06066C10.8536 3.47487 10.8536 2.52513 11.4393 1.93934C12.0251 1.35355 12.9749 1.35355 13.5607 1.93934L22.5607 10.9393C23.1464 11.5251 23.1464 12.4749 22.5607 13.0607L13.5607 22.0607C12.9749 22.6464 12.0251 22.6464 11.4393 22.0607C10.8536 21.4749 10.8536 20.5251 11.4393 19.9393L17.8787 13.5L2.5 13.5C1.67157 13.5 1 12.8284 1 12Z",fill:"currentColor"}))}const wp=qe(EPe,"arrow_right");function PPe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C11.1716 23 10.5 22.3284 10.5 21.5L10.5 6.12132L4.06066 12.5607C3.47487 13.1464 2.52513 13.1464 1.93934 12.5607C1.35355 11.9749 1.35355 11.0251 1.93934 10.4393L10.9393 1.43934C11.5251 0.853554 12.4749 0.853554 13.0607 1.43934L22.0607 10.4393C22.6464 11.0251 22.6464 11.9749 22.0607 12.5607C21.4749 13.1464 20.5251 13.1464 19.9393 12.5607L13.5 6.12132L13.5 21.5C13.5 22.3284 12.8284 23 12 23Z",fill:"currentColor"}))}const OPe=qe(PPe,"arrow_up");function MPe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.99995 9.63222V4C6.17155 3.99997 5.5 3.32841 5.5 2.5C5.5 1.67157 6.17157 1 7 1H8.49995H15.5H17C17.8284 1 18.5 1.67157 18.5 2.5C18.5 3.32843 17.8284 4 17 4H17V9.63222L22.0668 19.3436C22.9351 21.008 21.7276 23 19.8503 23H4.14962C2.27229 23 1.06476 21.008 1.93315 19.3436L6.99995 9.63222ZM14 4H9.99995V10C9.99995 10.2416 9.94159 10.4796 9.82983 10.6938L8.62662 13H15.3733L14.1701 10.6938C14.0583 10.4796 14 10.2416 14 10V4Z",fill:"currentColor"}))}const IPe=qe(MPe,"beaker");function RPe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 1C3.89543 1 3 1.89543 3 3V21C3 22.1046 3.89543 23 5 23H19C20.1046 23 21 22.1046 21 21V8.41421C21 7.88378 20.7893 7.37507 20.4142 7L15 1.58579C14.6249 1.21071 14.1162 1 13.5858 1H5ZM13 3L5 3V21H19V9H14C13.4477 9 13 8.55228 13 8V3ZM17.5858 7L15 4.41421V7H17.5858ZM11.5 12C11.2239 12 11 12.2239 11 12.5V13.5C11 13.7761 11.2239 14 11.5 14H16.5C16.7761 14 17 13.7761 17 13.5V12.5C17 12.2239 16.7761 12 16.5 12H11.5ZM7 12.5C7 12.2239 7.22386 12 7.5 12H8.5C8.77614 12 9 12.2239 9 12.5V13.5C9 13.7761 8.77614 14 8.5 14H7.5C7.22386 14 7 13.7761 7 13.5V12.5ZM11.5 16C11.2239 16 11 16.2239 11 16.5V17.5C11 17.7761 11.2239 18 11.5 18H16.5C16.7761 18 17 17.7761 17 17.5V16.5C17 16.2239 16.7761 16 16.5 16H11.5ZM7 16.5C7 16.2239 7.22386 16 7.5 16H8.5C8.77614 16 9 16.2239 9 16.5V17.5C9 17.7761 8.77614 18 8.5 18H7.5C7.22386 18 7 17.7761 7 17.5V16.5Z",fill:"currentColor"}))}const LPe=qe(RPe,"brief_stroked");function DPe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{d:"M17.549 15.659L12.753 21.139C12.6591 21.2464 12.5434 21.3325 12.4135 21.3915C12.2836 21.4505 12.1427 21.481 12 21.481C11.8574 21.481 11.7164 21.4505 11.5865 21.3915C11.4566 21.3325 11.3409 21.2464 11.247 21.139L6.45101 15.659C5.88501 15.011 6.34501 14 7.20401 14H16.796C17.656 14 18.115 15.012 17.549 15.659Z",fill:"currentColor"}))}const FPe=qe(DPe,"caretdown");function BPe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{d:"M6.45096 8.34102L11.247 2.86102C11.3408 2.75361 11.4566 2.66753 11.5865 2.60854C11.7163 2.54956 11.8573 2.51904 12 2.51904C12.1426 2.51904 12.2836 2.54956 12.4135 2.60854C12.5433 2.66753 12.6591 2.75361 12.753 2.86102L17.549 8.34102C18.115 8.98802 17.655 10 16.796 10H7.20396C6.34396 10 5.88496 8.98802 6.45096 8.34102Z",fill:"currentColor"}))}const jPe=qe(BPe,"caretup");function NPe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.364 5.636C17.1924 4.46443 15.2929 4.46443 14.1214 5.636L12 7.75732C11.6095 8.14785 10.9763 8.14785 10.5858 7.75732C10.1953 7.3668 10.1953 6.73363 10.5858 6.34311L12.7071 4.22179C14.6598 2.26917 17.8256 2.26917 19.7782 4.22179C21.7308 6.17441 21.7308 9.34024 19.7782 11.2929L17.6569 13.4142C17.2664 13.8047 16.6332 13.8047 16.2427 13.4142C15.8522 13.0237 15.8522 12.3905 16.2427 12L18.364 9.87864C19.5356 8.70707 19.5356 6.80758 18.364 5.636ZM5.636 18.3638C6.80758 19.5353 8.70707 19.5353 9.87864 18.3638L12 16.2424C12.3905 15.8519 13.0237 15.8519 13.4142 16.2424C13.8047 16.633 13.8047 17.2661 13.4142 17.6567L11.2929 19.778C9.34024 21.7306 6.17441 21.7306 4.22179 19.778C2.26917 17.8254 2.26917 14.6595 4.22179 12.7069L6.34311 10.5856C6.73364 10.1951 7.3668 10.1951 7.75732 10.5856C8.14785 10.9761 8.14785 11.6093 7.75732 11.9998L5.636 14.1211C4.46443 15.2927 4.46443 17.1922 5.636 18.3638ZM15.5357 9.87838C15.9262 9.48785 15.9262 8.85469 15.5357 8.46416C15.1452 8.07364 14.512 8.07364 14.1215 8.46416L8.46465 14.121C8.07413 14.5115 8.07413 15.1447 8.46465 15.5352C8.85518 15.9258 9.48834 15.9258 9.87887 15.5352L15.5357 9.87838Z",fill:"currentColor"}))}const $Pe=qe(NPe,"chain_stroked");function zPe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{d:"M5 12.5C5 11.6716 5.67157 11 6.5 11H17.5C18.3284 11 19 11.6716 19 12.5C19 13.3284 18.3284 14 17.5 14H6.5C5.67157 14 5 13.3284 5 12.5Z",fill:"currentColor"}))}const HPe=qe(zPe,"checkbox_indeterminate");function VPe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.4111 7.30848C18.0692 7.81171 18.1947 8.75312 17.6915 9.41119L11.1915 17.9112C10.909 18.2806 10.4711 18.4981 10.0061 18.5C9.54105 18.5019 9.10143 18.288 8.81592 17.9209L5.31592 13.4209C4.80731 12.767 4.92512 11.8246 5.57904 11.316C6.23296 10.8074 7.17537 10.9252 7.68398 11.5791L9.98988 14.5438L15.3084 7.58884C15.8116 6.93077 16.7531 6.80525 17.4111 7.30848Z",fill:"currentColor"}))}const UPe=qe(VPe,"checkbox_tick");function WPe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.08045 7.59809C4.66624 7.01231 5.61599 7.01231 6.20177 7.59809L11.8586 13.2549L17.5155 7.59809C18.1013 7.01231 19.051 7.01231 19.6368 7.59809C20.2226 8.18388 20.2226 9.13363 19.6368 9.71941L12.9193 16.4369C12.3335 17.0227 11.3838 17.0227 10.798 16.4369L4.08045 9.71941C3.49467 9.13363 3.49467 8.18388 4.08045 7.59809Z",fill:"currentColor"}))}const af=qe(WPe,"chevron_down");function GPe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.2782 4.23933C16.864 4.82511 16.864 5.77486 16.2782 6.36065L10.6213 12.0175L16.2782 17.6744C16.864 18.2601 16.864 19.2099 16.2782 19.7957C15.6924 20.3815 14.7426 20.3815 14.1569 19.7957L7.43934 13.0782C6.85355 12.4924 6.85355 11.5426 7.43934 10.9568L14.1569 4.23933C14.7426 3.65354 15.6924 3.65354 16.2782 4.23933Z",fill:"currentColor"}))}const oj=qe(GPe,"chevron_left");function KPe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.43934 19.7957C6.85355 19.2099 6.85355 18.2601 7.43934 17.6744L13.0962 12.0175L7.43934 6.36065C6.85355 5.77486 6.85355 4.82511 7.43934 4.23933C8.02513 3.65354 8.97487 3.65354 9.56066 4.23933L16.2782 10.9568C16.864 11.5426 16.864 12.4924 16.2782 13.0782L9.56066 19.7957C8.97487 20.3815 8.02513 20.3815 7.43934 19.7957Z",fill:"currentColor"}))}const xd=qe(KPe,"chevron_right");function XPe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.637 16.4369C19.0513 17.0227 18.1015 17.0227 17.5157 16.4369L11.8589 10.7801L6.20202 16.4369C5.61623 17.0227 4.66648 17.0227 4.0807 16.4369C3.49491 15.8511 3.49491 14.9014 4.0807 14.3156L10.7982 7.59809C11.384 7.01231 12.3337 7.01231 12.9195 7.59809L19.637 14.3156C20.2228 14.9014 20.2228 15.8511 19.637 16.4369Z",fill:"currentColor"}))}const SQ=qe(XPe,"chevron_up");function YPe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM17.0352 16.8626C16.4597 17.4585 15.5101 17.4751 14.9142 16.8996L12.0368 14.121L9.25822 16.9984C8.68274 17.5943 7.73314 17.6109 7.13722 17.0354C6.5413 16.4599 6.52472 15.5103 7.1002 14.9144L9.87883 12.037L7.00147 9.2584C6.40555 8.68293 6.38897 7.73332 6.96445 7.1374C7.53992 6.54148 8.48953 6.52491 9.08545 7.10038L11.9628 9.87901L14.7414 7.00165C15.3169 6.40573 16.2665 6.38916 16.8624 6.96463C17.4584 7.54011 17.4749 8.48971 16.8995 9.08563L14.1208 11.963L16.9982 14.7416C17.5941 15.3171 17.6107 16.2667 17.0352 16.8626Z",fill:"currentColor"}))}const nx=qe(YPe,"clear");function qPe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{d:"M17.6568 19.7782C18.2426 20.3639 19.1924 20.3639 19.7782 19.7782C20.3639 19.1924 20.3639 18.2426 19.7782 17.6568L14.1213 12L19.7782 6.34313C20.3639 5.75734 20.3639 4.8076 19.7782 4.22181C19.1924 3.63602 18.2426 3.63602 17.6568 4.22181L12 9.87866L6.34313 4.22181C5.75734 3.63602 4.8076 3.63602 4.22181 4.22181C3.63602 4.8076 3.63602 5.75734 4.22181 6.34313L9.87866 12L4.22181 17.6568C3.63602 18.2426 3.63602 19.1924 4.22181 19.7782C4.8076 20.3639 5.75734 20.3639 6.34313 19.7782L12 14.1213L17.6568 19.7782Z",fill:"currentColor"}))}const Rc=qe(qPe,"close");function ZPe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.4885 4.18603C14.5912 3.364 14.0081 2.61431 13.1861 2.51156C12.3641 2.4088 11.6144 2.99189 11.5116 3.81392L9.51162 19.8139C9.40886 20.636 9.99195 21.3856 10.814 21.4884C11.636 21.5911 12.3857 21.0081 12.4885 20.186L14.4885 4.18603ZM8.06066 5.93931C8.64645 6.5251 8.64645 7.47485 8.06066 8.06063L4.12132 12L8.06066 15.9393C8.64645 16.5251 8.64645 17.4748 8.06066 18.0606C7.47487 18.6464 6.52513 18.6464 5.93934 18.0606L0.93934 13.0606C0.353553 12.4748 0.353553 11.5251 0.93934 10.9393L5.93934 5.93931C6.52513 5.35353 7.47487 5.35353 8.06066 5.93931ZM15.9393 5.93931C16.5251 5.35353 17.4749 5.35353 18.0607 5.93931L23.0607 10.9393C23.6464 11.5251 23.6464 12.4748 23.0607 13.0606L18.0607 18.0606C17.4749 18.6464 16.5251 18.6464 15.9393 18.0606C15.3536 17.4748 15.3536 16.5251 15.9393 15.9393L19.8787 12L15.9393 8.06063C15.3536 7.47485 15.3536 6.5251 15.9393 5.93931Z",fill:"currentColor"}))}const JPe=qe(ZPe,"code");function QPe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{d:"M7 4C7 2.89543 7.89543 2 9 2H20C21.1046 2 22 2.89543 22 4V15C22 16.1046 21.1046 17 20 17H19V8C19 6 18 5 16 5H7V4Z",fill:"currentColor"}),H.createElement("path",{d:"M5 7C3.89543 7 3 7.89543 3 9V19C3 20.1046 3.89543 21 5 21H15C16.1046 21 17 20.1046 17 19V9C17 7.89543 16.1046 7 15 7H5Z",fill:"currentColor"}))}const pL=qe(QPe,"copy");function eOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 16C22 17.1046 21.1046 18 20 18V4H6C6 2.89543 6.89543 2 8 2H20C21.1046 2 22 2.89543 22 4V16ZM2 8C2 6.89543 2.89543 6 4 6H16C17.1046 6 18 6.89543 18 8V20C18 21.1046 17.1046 22 16 22H4C2.89543 22 2 21.1046 2 20V8ZM4 8H16V20H4V8ZM6 14C6 13.4477 6.44772 13 7 13H9V11C9 10.4477 9.44771 10 10 10C10.5523 10 11 10.4477 11 11V13H13C13.5523 13 14 13.4477 14 14C14 14.5523 13.5523 15 13 15H11V17C11 17.5523 10.5523 18 10 18C9.44772 18 9 17.5523 9 17V15H7C6.44772 15 6 14.5523 6 14Z",fill:"currentColor"}))}const CQ=qe(eOe,"copy_stroked");function tOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.38055 2C9.00251 2 8.65678 2.21319 8.48703 2.55098L7.00505 5.5H3C2.44772 5.5 2 5.94772 2 6.5V7.5C2 8.05228 2.44772 8.5 3 8.5H21C21.5523 8.5 22 8.05228 22 7.5V6.5C22 5.94772 21.5523 5.5 21 5.5H16.9949L15.5129 2.55098C15.3432 2.21319 14.9975 2 14.6194 2H9.38055ZM14.8571 5.5L14.1439 4.25193C14.0549 4.09614 13.8893 4 13.7098 4H10.2901C10.1107 4 9.94505 4.09614 9.85602 4.25193L9.14284 5.5H14.8571ZM18.7192 10H5.28078C4.6302 10 4.15285 10.6114 4.31063 11.2425L6.4319 19.7276C6.76578 21.0631 7.96573 22 9.34233 22H14.6577C16.0343 22 17.2342 21.0631 17.5681 19.7276L19.6894 11.2425C19.8472 10.6114 19.3698 10 18.7192 10Z",fill:"currentColor"}))}const iOe=qe(tOe,"delete");function nOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 5V4H14V5H10ZM8 5V3C8 2.44772 8.44772 2 9 2H15C15.5523 2 16 2.44772 16 3V5H19H20C20.5523 5 21 5.44772 21 6C21 6.55228 20.5523 7 20 7H19V21C19 21.5523 18.5523 22 18 22H6C5.44772 22 5 21.5523 5 21V7H4C3.44772 7 3 6.55228 3 6C3 5.44772 3.44772 5 4 5H5H8ZM15 7H9H7V20H17V7H15ZM9 9.5C9 9.22386 9.22386 9 9.5 9H10.5C10.7761 9 11 9.22386 11 9.5V16.5C11 16.7761 10.7761 17 10.5 17H9.5C9.22386 17 9 16.7761 9 16.5V9.5ZM13 9.5C13 9.22386 13.2239 9 13.5 9H14.5C14.7761 9 15 9.22386 15 9.5V16.5C15 16.7761 14.7761 17 14.5 17H13.5C13.2239 17 13 16.7761 13 16.5V9.5Z",fill:"currentColor"}))}const wQ=qe(nOe,"delete_stroked");function sOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12ZM12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",fill:"currentColor"}))}const rOe=qe(sOe,"disc");function aOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.8395 8.05827C17.1837 5.16226 14.5944 3 11.5 3C7.91015 3 5 5.91015 5 9.5C5 10.0204 5.06115 10.5264 5.17665 11.0114C2.84229 11.1772 1 13.1234 1 15.5C1 17.9853 3.01469 20 5.49995 20H17C20.3137 20 23 17.3137 23 14C23 10.9712 20.7558 8.46659 17.8395 8.05827ZM11.6799 17.7333C11.8653 17.8878 12.1347 17.8878 12.3201 17.7333L17.4695 13.4421C17.6492 13.2924 17.5433 13 17.3095 13H14V9.5C14 9.22386 13.7761 9 13.5 9H10.5C10.2239 9 10 9.22386 10 9.5V13H6.69051C6.45669 13 6.35084 13.2924 6.53047 13.4421L11.6799 17.7333Z",fill:"currentColor"}))}const oOe=qe(aOe,"download");function lOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{d:"M14.4999 4.49994L19.4999 9.49994L21.5857 7.41416C22.3667 6.63311 22.3667 5.36678 21.5857 4.58573L19.4141 2.41415C18.6331 1.63311 17.3667 1.63311 16.5857 2.41416L14.4999 4.49994Z",fill:"currentColor"}),H.createElement("path",{d:"M2.24715 21.1346L3.92871 15.2491C3.9754 15.0857 4.06296 14.9369 4.18313 14.8167L12.9999 5.99994L17.9999 10.9999L9.18313 19.8167C9.06296 19.9369 8.91415 20.0244 8.75074 20.0711L2.86527 21.7527C2.48809 21.8605 2.13938 21.5117 2.24715 21.1346Z",fill:"currentColor"}))}const cOe=qe(lOe,"edit");function uOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.7071 3.70711C22.0976 3.31658 22.0976 2.68342 21.7071 2.29289C21.3166 1.90237 20.6834 1.90237 20.2929 2.29289L17.3135 5.27233C15.8114 4.50566 14.0321 4 12 4C5 4 1 10 1 12C1 13.1757 2.38219 15.7335 4.94345 17.6423L2.29289 20.2929C1.90237 20.6834 1.90237 21.3166 2.29289 21.7071C2.68342 22.0976 3.31658 22.0976 3.70711 21.7071L21.7071 3.70711ZM7.8284 14.7574L9.29237 13.2934C9.10495 12.9018 9 12.4631 9 12C9 10.3431 10.3431 9 12 9C12.4631 9 12.9018 9.10495 13.2934 9.29237L14.7574 7.8284C13.967 7.30488 13.0191 7 12 7C9.23858 7 7 9.23858 7 12C7 13.0191 7.30488 13.967 7.8284 14.7574Z",fill:"currentColor"}),H.createElement("path",{d:"M12 20C10.7789 20 9.64914 19.8174 8.61594 19.5054L11.1871 16.9342C11.4516 16.9775 11.7232 17 12 17C14.7614 17 17 14.7614 17 12C17 11.7232 16.9775 11.4516 16.9342 11.1871L20.5032 7.61808C22.1342 9.27317 23 11.0695 23 12C23 14 19 20 12 20Z",fill:"currentColor"}))}const hOe=qe(uOe,"eye_closed_solid");function dOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4C5 4 1 10 1 12C1 14 5 20 12 20C19 20 23 14 23 12C23 10 19 4 12 4ZM17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12ZM12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",fill:"currentColor"}))}const AQ=qe(dOe,"eye_opened");function pOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C12 1.44772 11.5523 1 11 1H6C4.89543 1 4 1.89543 4 3V21C4 22.1046 4.89543 23 6 23H18C19.1046 23 20 22.1046 20 21V10C20 9.44772 19.5523 9 19 9H14C12.8954 9 12 8.10457 12 7V2ZM7 8C7 7.44772 7.44772 7 8 7H9C9.55228 7 10 7.44772 10 8C10 8.55228 9.55228 9 9 9H8C7.44772 9 7 8.55228 7 8ZM7 13C7 12.4477 7.44772 12 8 12H16C16.5523 12 17 12.4477 17 13C17 13.5523 16.5523 14 16 14H8C7.44772 14 7 13.5523 7 13ZM8 17C7.44772 17 7 17.4477 7 18C7 18.5523 7.44772 19 8 19H16C16.5523 19 17 18.5523 17 18C17 17.4477 16.5523 17 16 17H8ZM19.0686 7.49999H14.5C13.9477 7.49999 13.5 7.05228 13.5 6.49999V1.93136C13.5 1.21864 14.3617 0.861707 14.8657 1.36568L19.6343 6.13431C20.1383 6.63828 19.7814 7.49999 19.0686 7.49999Z",fill:"currentColor"}))}const Yw=qe(pOe,"file");function fOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.0929 2.57912C1.25675 2.22596 1.61069 2 2.00001 2H22C22.3893 2 22.7433 2.22596 22.9071 2.57912C23.071 2.93229 23.015 3.34845 22.7636 3.64573L14.5654 12.8261V21C14.5654 21.3466 14.386 21.6684 14.0911 21.8507C13.7963 22.0329 13.4282 22.0494 13.1182 21.8944L10.0528 19.8944C9.71401 19.725 9.5 19.3788 9.5 19V12.8261L1.23644 3.64573C0.985045 3.34845 0.929036 2.93229 1.0929 2.57912Z",fill:"currentColor"}))}const gOe=qe(fOe,"filter");function mOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM11.8281 14.6094C10.9688 14.6094 10.5391 14.0723 10.5391 13.3691C10.5391 12.3242 11.0566 11.6504 12.2676 10.7324C12.2894 10.7158 12.3111 10.6993 12.3326 10.6829C13.1573 10.0555 13.7324 9.61807 13.7324 8.82812C13.7324 7.93945 12.9023 7.42188 11.9746 7.42188C11.2129 7.42188 10.627 7.70508 10.168 8.30078C9.83594 8.64258 9.57227 8.82812 9.12305 8.82812C8.38086 8.82812 8 8.31055 8 7.71484C8 7.10938 8.3418 6.49414 8.87891 6.02539C9.60156 5.40039 10.7539 5 12.2773 5C14.9922 5 16.8965 6.33789 16.8965 8.64258C16.8965 10.3223 15.8906 11.1328 14.709 11.9531C13.9082 12.5391 13.5273 12.8809 13.2246 13.5742L13.2238 13.5756C12.8922 14.1609 12.638 14.6094 11.8281 14.6094ZM11.8086 18.7695C10.8711 18.7695 10.0996 18.1641 10.0996 17.2266C10.0996 16.2891 10.8711 15.6836 11.8086 15.6836C12.7461 15.6836 13.5078 16.2891 13.5078 17.2266C13.5078 18.1641 12.7461 18.7695 11.8086 18.7695Z",fill:"currentColor"}))}const kQ=qe(mOe,"help_circle");function yOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{d:"M2 11.4454C2 11.1619 2.12032 10.8917 2.33104 10.7021L11.331 2.60207C11.7113 2.2598 12.2887 2.2598 12.669 2.60207L21.669 10.7021C21.8797 10.8917 22 11.1619 22 11.4454V20C22 21.1046 21.1046 22 20 22H16C15.4477 22 15 21.5523 15 21V17C15 15.3432 13.6569 14 12 14C10.3431 14 9 15.3432 9 17V21C9 21.5523 8.55228 22 8 22H4C2.89543 22 2 21.1046 2 20V11.4454Z",fill:"currentColor"}))}const _Oe=qe(yOe,"home");function vOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM14 7C14 8.10457 13.1046 9 12 9C10.8954 9 10 8.10457 10 7C10 5.89543 10.8954 5 12 5C13.1046 5 14 5.89543 14 7ZM9 10.75C9 10.3358 9.33579 10 9.75 10H12.5C13.0523 10 13.5 10.4477 13.5 11V16.5H14.25C14.6642 16.5 15 16.8358 15 17.25C15 17.6642 14.6642 18 14.25 18H9.75C9.33579 18 9 17.6642 9 17.25C9 16.8358 9.33579 16.5 9.75 16.5H10.5V11.5H9.75C9.33579 11.5 9 11.1642 9 10.75Z",fill:"currentColor"}))}const wl=qe(vOe,"info_circle");function bOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.62333 3.24915L7.05683 4H2.6C1.71634 4 1 4.67158 1 5.5C1 6.32843 1.71634 7 2.6 7H4.5C4.50001 9.45276 5.59062 11.7127 7 13.5C5.89676 14.1383 4.36624 14.5 3 14.5C2.17157 14.5 1.5 15.1715 1.5 16C1.5 16.8284 2.17157 17.5 3 17.5C5.23087 17.5 7.29925 16.8042 9 15.6179C10.4054 16.5983 12.0619 17.2436 13.8537 17.4381L12.1582 20.8291C11.7877 21.5701 12.0881 22.4711 12.829 22.8416C13.57 23.2121 14.471 22.9117 14.8415 22.1708L15.4269 21H19.5728L20.1582 22.1708C20.5287 22.9117 21.4297 23.2121 22.1707 22.8416C22.9116 22.4711 23.212 21.5701 22.8415 20.8291L18.8415 12.8291C18.5874 12.321 18.068 12 17.4998 12C16.9317 12 16.4123 12.321 16.1582 12.8291L15.3071 14.5314C15.2079 14.5108 15.1052 14.5 15 14.5C13.6338 14.5 12.1032 14.1383 11 13.5C12.4094 11.7127 13.5 9.45276 13.5 7H15.4C16.2837 7 17 6.32843 17 5.5C17 4.67158 16.2837 4 15.4 4H10.5209L9.22141 1.74915C8.80719 1.03171 7.88981 0.7859 7.17237 1.20011C6.45493 1.61433 6.20912 2.53171 6.62333 3.24915ZM7.5 7L10.5 7C10.5 8.68872 9.94186 10.2471 9 11.5007C8.05814 10.2471 7.50001 8.68872 7.5 7ZM17.4998 16.8541L18.5728 19H16.4269L17.4998 16.8541Z",fill:"currentColor"}))}const TQ=qe(bOe,"language");function xOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.05882 9.38973L11.7724 2.42678C11.8993 2.18883 12.1914 2.09699 12.4121 2.25201C12.9945 2.66123 13.8333 3.45218 13.8333 4.37503C13.8333 4.87411 13.7011 5.7719 13.5626 6.71262C13.4101 7.74781 13.25 8.83498 13.25 9.50003H20.8333C21.2778 9.50003 22 9.95175 22 11C22 11.904 21.0084 16.0872 20.3079 19.0423C20.1961 19.5138 20.0917 19.9541 20 20.3449C20 20.5632 19.7333 21 18.6667 21H8.49796C8.22182 21 8 20.7762 8 20.5V9.62503C8 9.54296 8.0202 9.46215 8.05882 9.38973ZM3.5 9.50003C3.22386 9.50003 3 9.72389 3 10V20.5C3 20.7762 3.22386 21 3.5 21H5.5C5.77614 21 6 20.7762 6 20.5V10C6 9.72389 5.77614 9.50003 5.5 9.50003H3.5Z",fill:"currentColor"}))}const U6=qe(xOe,"like_thumb");function SOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.9393 2.9393C15.182 0.69666 18.818 0.696668 21.0606 2.93931C23.3033 5.18195 23.3033 8.81799 21.0606 11.0606L18.3925 13.7288C18.4631 13.3298 18.5 12.9192 18.5 12.5C18.5 11.5751 18.3206 10.6921 17.9947 9.88386L18.9393 8.93931C20.0104 7.86824 20.0104 6.13169 18.9393 5.06063C17.8682 3.98956 16.1317 3.98956 15.0606 5.06062L11.0606 9.06063C9.98956 10.1317 9.98956 11.8682 11.0606 12.9393C11.3265 13.2052 11.6335 13.4051 11.961 13.539L9.75848 15.7415C9.47 15.5439 9.19556 15.3169 8.9393 15.0606C6.69666 12.818 6.69666 9.18195 8.9393 6.93931L12.9393 2.9393ZM2.9393 12.9393L5.60751 10.2711C5.53685 10.6701 5.49999 11.0808 5.49999 11.5001C5.49999 12.4249 5.67935 13.3079 6.00519 14.1161L5.06062 15.0607C3.98956 16.1317 3.98956 17.8683 5.06063 18.9393C6.13169 20.0104 7.86824 20.0104 8.9393 18.9393L12.9393 14.9393C14.0104 13.8683 14.0104 12.1317 12.9393 11.0607C12.7664 10.8878 12.5762 10.7428 12.3743 10.6258L14.5302 8.46985C14.7141 8.61357 14.8914 8.77007 15.0606 8.93934C17.3033 11.182 17.3033 14.818 15.0606 17.0607L11.0606 21.0607C8.81798 23.3033 5.18194 23.3033 2.9393 21.0607C0.696665 18.818 0.696663 15.182 2.9393 12.9393Z",fill:"currentColor"}))}const COe=qe(SOe,"link");function wOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 8.0412L13.3183 12.405C12.6314 12.7706 11.7962 12.7706 11.1093 12.405L3 7.79829L3 18H21V8.0412ZM4.29229 6L12.2138 10.5L20.1353 6H4.29229ZM1 6C1 4.89543 1.89543 4 3 4H21C22.1046 4 23 4.89543 23 6V6.90481L23.0001 6.90499L23 6.90505V18C23 19.1046 22.1046 20 21 20H3C1.89543 20 1 19.1046 1 18V6Z",fill:"currentColor"}))}const AOe=qe(wOe,"mail_stroked_1");function kOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{d:"M2 12C2 11.1716 2.67157 10.5 3.5 10.5H20.5C21.3284 10.5 22 11.1716 22 12C22 12.8284 21.3284 13.5 20.5 13.5H3.5C2.67157 13.5 2 12.8284 2 12Z",fill:"currentColor"}))}const TOe=qe(kOe,"minus");function EOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{d:"M20.5 13.5C21.3284 13.5 22 12.8284 22 12C22 11.1716 21.3284 10.5 20.5 10.5L13.5 10.5L13.5 3.5C13.5 2.67157 12.8284 2 12 2C11.1716 2 10.5 2.67157 10.5 3.5L10.5 10.5L3.5 10.5C2.67157 10.5 2 11.1716 2 12C2 12.8284 2.67157 13.5 3.5 13.5L10.5 13.5V20.5C10.5 21.3284 11.1716 22 12 22C12.8284 22 13.5 21.3284 13.5 20.5V13.5L20.5 13.5Z",fill:"currentColor"}))}const EQ=qe(EOe,"plus");function POe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("circle",{cx:12,cy:12,r:5,fill:"currentColor"}))}const OOe=qe(POe,"radio");function MOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 6C1 4.89543 1.89543 4 3 4H21C22.1046 4 23 4.89543 23 6V18C23 19.1046 22.1046 20 21 20H3C1.89543 20 1 19.1046 1 18V6ZM21 6L3 6V18H21V6ZM5 9C5 8.44772 5.44772 8 6 8H7.5C8.05228 8 8.5 8.44772 8.5 9V15C8.5 15.5523 8.05228 16 7.5 16C6.94772 16 6.5 15.5523 6.5 15V10H6C5.44772 10 5 9.55228 5 9ZM16 8C15.4477 8 15 8.44772 15 9C15 9.55228 15.4477 10 16 10H16.5V15C16.5 15.5523 16.9477 16 17.5 16C18.0523 16 18.5 15.5523 18.5 15V9C18.5 8.44772 18.0523 8 17.5 8H16ZM13 10C13 10.5523 12.5523 11 12 11C11.4477 11 11 10.5523 11 10C11 9.44772 11.4477 9 12 9C12.5523 9 13 9.44772 13 10ZM12 15C12.5523 15 13 14.5523 13 14C13 13.4477 12.5523 13 12 13C11.4477 13 11 13.4477 11 14C11 14.5523 11.4477 15 12 15Z",fill:"currentColor"}))}const IOe=qe(MOe,"real_size_stroked");function ROe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 12C3.5 7.58173 7.08173 4 11.5 4C13.7094 4 15.7081 4.89435 17.1568 6.34316C17.4361 6.62246 17.8399 7.05385 18.2497 7.5H16C15.4477 7.5 15 7.94772 15 8.5C15 9.05228 15.4477 9.5 16 9.5H20.5C21.0523 9.5 21.5 9.05228 21.5 8.5V4C21.5 3.44772 21.0523 3 20.5 3C19.9477 3 19.5 3.44772 19.5 4V5.90549C19.1565 5.53424 18.8233 5.18114 18.5711 4.92895C16.7625 3.12038 14.2612 2 11.5 2C5.97717 2 1.5 6.47717 1.5 12C1.5 17.5228 5.97717 22 11.5 22C14.2612 22 16.7625 20.8796 18.5711 19.071C18.9616 18.6805 18.9616 18.0474 18.571 17.6568C18.1805 17.2663 17.5474 17.2663 17.1568 17.6569C15.7081 19.1057 13.7094 20 11.5 20C7.08173 20 3.5 16.4183 3.5 12Z",fill:"currentColor"}))}const LOe=qe(ROe,"redo_stroked");function DOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.49993 11.9998C4.49993 7.85775 7.85775 4.49993 11.9998 4.49993C14.6403 4.49993 16.9645 5.86506 18.3012 7.9305L16.2939 7.52902C15.4815 7.36656 14.6913 7.89337 14.5288 8.7057C14.3664 9.51803 14.8932 10.3083 15.7055 10.4707L20.7055 11.4707C21.4643 11.6225 22.214 11.1721 22.4363 10.4309L23.9363 5.43095C24.1744 4.63747 23.7241 3.80126 22.9307 3.56321C22.1372 3.32517 21.301 3.77543 21.0629 4.56891L20.6287 6.01635C18.7332 3.28781 15.5765 1.49998 11.9998 1.49998C6.20092 1.49998 1.49998 6.20092 1.49998 11.9998C1.49998 17.7987 6.20092 22.4997 11.9998 22.4997C16.5739 22.4997 20.4611 19.5757 21.9018 15.4996C22.1779 14.7186 21.7685 13.8616 20.9874 13.5855C20.2064 13.3095 19.3494 13.7189 19.0733 14.4999C18.0431 17.4149 15.263 19.4997 11.9998 19.4997C7.85775 19.4997 4.49993 16.1419 4.49993 11.9998Z",fill:"currentColor"}))}const PQ=qe(DOe,"refresh");function FOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{d:"M14.2071 2.20711C14.5976 1.81658 14.5976 1.18342 14.2071 0.792893C13.8166 0.402369 13.1834 0.402369 12.7929 0.792893L10.2929 3.29289C9.90237 3.68342 9.90237 4.31658 10.2929 4.70711L12.7929 7.20711C13.1834 7.59763 13.8166 7.59763 14.2071 7.20711C14.5976 6.81658 14.5976 6.18342 14.2071 5.79289L13.4142 5H16C18.7614 5 21 7.23858 21 10V12C21 12.5523 21.4477 13 22 13C22.5523 13 23 12.5523 23 12V10C23 6.13401 19.866 3 16 3H13.4142L14.2071 2.20711Z",fill:"currentColor"}),H.createElement("path",{d:"M3 10C3 8.89543 3.89543 8 5 8H17C18.1046 8 19 8.89543 19 10V20C19 21.1046 18.1046 22 17 22H5C3.89543 22 3 21.1046 3 20V10Z",fill:"currentColor"}))}const BOe=qe(FOe,"rotate");function jOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{d:"M1 12C1 11.1716 1.64237 10.5 2.43478 10.5H21.5652C22.3576 10.5 23 11.1716 23 12C23 12.8284 22.3576 13.5 21.5652 13.5H2.43478C1.64237 13.5 1 12.8284 1 12Z",fill:"currentColor"}),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 3.5C14 2.67157 14.6716 2 15.5 2L18.5 2C20.433 2 22 3.567 22 5.5V7.5C22 8.32843 21.3284 9 20.5 9C19.6716 9 19 8.32843 19 7.5V5.5C19 5.22386 18.7761 5 18.5 5L15.5 5C14.6716 5 14 4.32843 14 3.5ZM2 5.5C2 3.567 3.567 2 5.5 2H8.5C9.32843 2 10 2.67157 10 3.5C10 4.32843 9.32843 5 8.5 5H5.5C5.22386 5 5 5.22386 5 5.5V7.5C5 8.32843 4.32843 9 3.5 9C2.67157 9 2 8.32843 2 7.5V5.5ZM3.5 15C4.32843 15 5 15.6716 5 16.5V18.5C5 18.7761 5.22386 19 5.5 19H8.5C9.32843 19 10 19.6716 10 20.5C10 21.3284 9.32843 22 8.5 22H5.5C3.567 22 2 20.433 2 18.5V16.5C2 15.6716 2.67157 15 3.5 15ZM20.5 15C21.3284 15 22 15.6716 22 16.5V18.5C22 20.433 20.433 22 18.5 22H15.5C14.6716 22 14 21.3284 14 20.5C14 19.6716 14.6716 19 15.5 19H18.5C18.7761 19 19 18.7761 19 18.5V16.5C19 15.6716 19.6716 15 20.5 15Z",fill:"currentColor"}))}const OQ=qe(jOe,"scan");function NOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 2C5.80558 2 2 5.80558 2 10.5C2 15.1944 5.80558 19 10.5 19C12.3054 19 13.9794 18.4371 15.356 17.4773L19.4393 21.5606C20.0251 22.1464 20.9749 22.1464 21.5606 21.5606C22.1464 20.9749 22.1464 20.0251 21.5606 19.4393L17.4773 15.356C18.4371 13.9794 19 12.3054 19 10.5C19 5.80558 15.1944 2 10.5 2ZM5 10.5C5 7.46243 7.46243 5 10.5 5C13.5376 5 16 7.46243 16 10.5C16 13.5376 13.5376 16 10.5 16C7.46243 16 5 13.5376 5 10.5Z",fill:"currentColor"}))}const $Oe=qe(NOe,"search");function zOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99973 5.07197C7.19713 5.53535 6.20729 5.53113 5.40866 5.06092L5.1637 4.91669C4.55751 4.55978 3.77662 4.65563 3.34264 5.20927C2.69567 6.03462 2.17585 6.94251 1.79166 7.90124C1.53027 8.55354 1.83733 9.27693 2.449 9.62286L2.69407 9.76145C3.50107 10.2178 4.00002 11.0732 4.00002 12.0003C4.00002 12.9271 3.50145 13.7822 2.69492 14.2387L2.44842 14.3783C1.83596 14.725 1.52888 15.4497 1.79213 16.1024C1.98358 16.577 2.21048 17.044 2.47374 17.5C2.73723 17.9564 3.0285 18.3868 3.34416 18.7902C3.77773 19.3443 4.5588 19.4406 5.16498 19.0834L5.40839 18.9399C6.20714 18.4692 7.19739 18.4648 8.0003 18.9284C8.80291 19.3918 9.29417 20.2511 9.28627 21.1778L9.28386 21.4601C9.27787 22.1629 9.75107 22.7906 10.4468 22.8903C11.4692 23.0368 12.5154 23.0404 13.5537 22.8927C14.2499 22.7936 14.7231 22.1653 14.7169 21.462L14.7143 21.1785C14.7061 20.2514 15.1974 19.3916 16.0003 18.928C16.8029 18.4647 17.7927 18.4689 18.5914 18.9391L18.8363 19.0833C19.4425 19.4402 20.2234 19.3444 20.6574 18.7907C21.3044 17.9654 21.8242 17.0575 22.2084 16.0988C22.4698 15.4465 22.1627 14.7231 21.551 14.3772L21.306 14.2386C20.499 13.7822 20 12.9268 20 11.9997C20 11.0729 20.4986 10.2178 21.3051 9.76126L21.5516 9.62174C22.1641 9.27506 22.4712 8.55029 22.2079 7.89761C22.0165 7.42297 21.7896 6.95598 21.5263 6.50001C21.2628 6.04362 20.9715 5.61325 20.6559 5.20982C20.2223 4.65568 19.4412 4.55944 18.8351 4.91665L18.5916 5.06009C17.7929 5.53078 16.8026 5.53519 15.9997 5.07163C15.1971 4.60825 14.7059 3.74891 14.7138 2.82218L14.7162 2.53994C14.7222 1.83708 14.249 1.20945 13.5532 1.10973C12.5308 0.963214 11.4846 0.959581 10.4464 1.10733C9.75011 1.20641 9.27691 1.83473 9.28317 2.53798L9.28569 2.82154C9.29395 3.74862 8.80264 4.60841 7.99973 5.07197ZM14 15.4641C15.9132 14.3595 16.5687 11.9132 15.4641 9.99999C14.3595 8.08682 11.9132 7.43132 10 8.53589C8.08684 9.64046 7.43134 12.0868 8.53591 14C9.64048 15.9132 12.0868 16.5687 14 15.4641Z",fill:"currentColor"}))}const UE=qe(zOe,"setting");function HOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 2H19C20.6569 2 22 3.34315 22 5V19C22 20.6569 20.6569 22 19 22H5C3.34315 22 2 20.6569 2 19V5C2 3.34315 3.34315 2 5 2ZM6 4C5.44772 4 5 4.44772 5 5V19C5 19.5523 5.44772 20 6 20H9C9.55229 20 10 19.5523 10 19V5C10 4.44772 9.55229 4 9 4H6Z",fill:"currentColor"}))}const fL=qe(HOe,"sidebar");function VOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 5C2 3.34315 3.34315 2 5 2H19C20.6569 2 22 3.34315 22 5V19C22 20.6569 20.6569 22 19 22H5C3.34315 22 2 20.6569 2 19V5ZM12 16C12 15.4477 12.4477 15 13 15H18C18.5523 15 19 15.4477 19 16C19 16.5523 18.5523 17 18 17H13C12.4477 17 12 16.5523 12 16ZM7.70714 6.29289C7.31662 5.90237 6.68345 5.90237 6.29293 6.29289C5.90241 6.68342 5.90241 7.31658 6.29293 7.70711L9.66004 11.0742L6.21917 15.3753C5.87416 15.8066 5.94408 16.4359 6.37534 16.7809C6.8066 17.1259 7.4359 17.056 7.78091 16.6247L11.7809 11.6247C12.0992 11.2268 12.0674 10.6532 11.7071 10.2929L7.70714 6.29289Z",fill:"currentColor"}))}const UOe=qe(VOe,"terminal");function WOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.422 2.09341L10.5881 1.70522L6.41967 9H3.2C2.53726 9 2 9.53726 2 10.2V20.8C2 21.4627 2.53726 22 3.2 22H8L17.6667 22C18.3152 22 18.8599 21.8762 19.2763 21.607C19.6472 21.3672 19.9326 20.99 19.9896 20.5433C20.324 19.192 20.815 17.1476 21.226 15.3057C21.4353 14.3679 21.6253 13.4759 21.7635 12.752C21.8936 12.0704 22 11.4313 22 11.069C22 10.3038 21.7093 9.69155 21.24 9.28292C20.8028 8.90221 20.2705 8.75 19.8333 8.75H13.3409C13.3904 8.39857 13.4561 8.00566 13.5273 7.59043L13.5564 7.42098C13.6871 6.66202 13.8333 5.81287 13.8333 5.25C13.8333 4.28245 13.2516 3.52694 12.7844 3.06764C12.2974 2.58876 11.7438 2.24319 11.422 2.09341ZM6 20V11H4V20H6ZM8 20H17.6667C17.8602 20 17.9903 19.9822 18.0726 19.9641C18.4036 18.6233 18.8771 16.6486 19.274 14.8701C19.4814 13.9407 19.6664 13.0715 19.799 12.3769C19.9397 11.6399 20 11.2031 20 11.069C20 10.9437 19.9777 10.8759 19.9644 10.8456C19.9514 10.8159 19.9379 10.801 19.9266 10.7912C19.9129 10.7793 19.8936 10.7677 19.8696 10.7592C19.8501 10.7523 19.8364 10.7506 19.833 10.7501C19.8324 10.7501 19.8321 10.75 19.8321 10.75L11.25 10.75V9.75C11.25 9.04443 11.4155 8.07195 11.556 7.25245L11.5592 7.23411L11.5592 7.23407C11.7124 6.34084 11.8333 5.63528 11.8333 5.25C11.8333 5.09254 11.7206 4.8265 11.3822 4.49378C11.3643 4.4761 11.3461 4.45873 11.3279 4.44168L8 10.2656V20Z",fill:"currentColor"}))}const W6=qe(WOe,"thumb_up_stroked");function GOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.3516 4.2652C22.0336 4.73552 22.2052 5.66964 21.7348 6.35162L11.7348 20.8516C11.4765 21.2262 11.0622 21.4632 10.6084 21.4961C10.1546 21.529 9.71041 21.3541 9.40082 21.0207L2.90082 14.0207C2.33711 13.4136 2.37226 12.4645 2.97933 11.9008C3.5864 11.3371 4.53549 11.3723 5.0992 11.9793L10.3268 17.6091L19.2652 4.64842C19.7355 3.96644 20.6696 3.79487 21.3516 4.2652Z",fill:"currentColor"}))}const oy=qe(GOe,"tick");function KOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM17.8831 9.82235L11.6854 17.4112C11.4029 17.7806 10.965 17.9981 10.5 18C10.035 18.0019 9.59533 17.788 9.30982 17.421L5.81604 13.4209C5.30744 12.767 5.42524 11.8246 6.07916 11.316C6.73308 10.8074 7.67549 10.9252 8.1841 11.5791L10.4838 14.0439L15.5 8C16.0032 7.34193 16.9446 7.21641 17.6027 7.71964C18.2608 8.22287 18.3863 9.16428 17.8831 9.82235Z",fill:"currentColor"}))}const WE=qe(KOe,"tick_circle");function XOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{d:"M20.5598 9.65618L12.7546 18.6322C12.3559 19.0906 11.644 19.0906 11.2453 18.6322L3.4401 9.65618C2.8773 9.00895 3.33701 8 4.19471 8L19.8052 8C20.6629 8 21.1226 9.00895 20.5598 9.65618Z",fill:"currentColor"}))}const YOe=qe(XOe,"tree_triangle_down");function qOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{d:"M9.65618 3.44015L18.6322 11.2454C19.0906 11.644 19.0906 12.356 18.6322 12.7546L9.65618 20.5598C9.00895 21.1226 8 20.6629 8 19.8052V4.19475C8 3.33705 9.00895 2.87734 9.65618 3.44015Z",fill:"currentColor"}))}const ZOe=qe(qOe,"tree_triangle_right");function JOe(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.8395 8.05827C17.1837 5.16226 14.5944 3 11.5 3C7.91015 3 5 5.91015 5 9.5C5 10.0204 5.06115 10.5264 5.17665 11.0114C2.84229 11.1772 1 13.1234 1 15.5C1 17.9853 3.01469 20 5.49995 20H17C20.3137 20 23 17.3137 23 14C23 10.9712 20.7558 8.46659 17.8395 8.05827ZM12.3201 8.26674C12.1347 8.11222 11.8653 8.11222 11.6799 8.26674L6.53047 12.5579C6.35084 12.7076 6.45669 13 6.69051 13H10V17.5C10 17.7761 10.2239 18 10.5 18H13.5C13.7761 18 14 17.7761 14 17.5V13H17.3095C17.5433 13 17.6492 12.7076 17.4695 12.5579L12.3201 8.26674Z",fill:"currentColor"}))}const QOe=qe(JOe,"upload");function e2e(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.9998 12.0001C22.9998 18.0753 18.0749 23.0001 11.9998 23.0001C5.92463 23.0001 0.999756 18.0753 0.999756 12.0001C0.999756 5.92499 5.92463 1.00012 11.9998 1.00012C18.0749 1.00012 22.9998 5.92499 22.9998 12.0001ZM13.4998 17.5C13.4998 16.6718 12.8282 16.0001 11.9998 16.0001C11.1713 16.0001 10.4998 16.6718 10.4998 17.5C10.4998 18.3285 11.1713 19 11.9998 19C12.8282 19 13.4998 18.3285 13.4998 17.5ZM11.9998 5.00011C10.9136 5.00011 10.0505 5.91257 10.1107 6.99704L10.4166 12.5024C10.4632 13.3427 11.1582 14.0001 11.9998 14.0001C12.8413 14.0001 13.5363 13.3427 13.583 12.5024L13.8888 6.99704C13.9491 5.91257 13.0859 5.00011 11.9998 5.00011Z",fill:"currentColor"}))}const MQ=qe(e2e,"upload_error");function t2e(i){return H.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 3C14 2.44772 14.4477 2 15 2H21C21.5523 2 22 2.44772 22 3V9C22 9.55229 21.5523 10 21 10C20.4477 10 20 9.55229 20 9V4H15C14.4477 4 14 3.55229 14 3ZM10 21C10 21.5523 9.55229 22 9 22H3C2.44772 22 2 21.5523 2 21V15C2 14.4477 2.44772 14 3 14C3.55228 14 4 14.4477 4 15L4 20H9C9.55229 20 10 20.4477 10 21ZM2 9C2 9.55228 2.44772 10 3 10C3.55229 10 4 9.55228 4 9L4 4L9 4C9.55229 4 10 3.55228 10 3C10 2.44771 9.55229 2 9 2H3C2.44772 2 2 2.44772 2 3V9ZM21 14C21.5523 14 22 14.4477 22 15V21C22 21.5523 21.5523 22 21 22H15C14.4477 22 14 21.5523 14 21C14 20.4477 14.4477 20 15 20H20V15C20 14.4477 20.4477 14 21 14ZM8.5 7.5C7.94772 7.5 7.5 7.94772 7.5 8.5V15.5C7.5 16.0523 7.94772 16.5 8.5 16.5H15.5C16.0523 16.5 16.5 16.0523 16.5 15.5V8.5C16.5 7.94772 16.0523 7.5 15.5 7.5H8.5ZM9.5 14.5V9.5H14.5V14.5H9.5Z",fill:"currentColor"}))}const i2e=qe(t2e,"window_adaption_stroked"),ds={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229},lj="Enter";function jd(i){return ne(i,"key")===lj}const J2=RE.PREFIX;class cj extends k.PureComponent{constructor(e){super(e),this.copy=t=>{const{content:n,duration:s,onCopy:r}=this.props,a=Kw(n);r&&r(t,n,a),this.setCopied(n,s)},this.setCopied=(t,n)=>{this.setState({copied:!0,item:t}),this._timeId=setTimeout(()=>{this.resetCopied()},n*1e3)},this.resetCopied=()=>{this._timeId&&(clearTimeout(this._timeId),this._timeId=null,this.setState({copied:!1,item:""}))},this.renderSuccessTip=()=>{const{successTip:t}=this.props;return typeof t<"u"?t:k.createElement(gi,{componentName:"Typography"},n=>k.createElement("span",null,k.createElement(oy,null),n.copied))},this.renderCopyIcon=()=>{const{icon:t}=this.props,n={role:"button",tabIndex:0,onClick:this.copy,onKeyPress:r=>jd(r)&&this.copy(r)},s=k.createElement("a",{className:`${J2}-action-copy-icon`},k.createElement(pL,Object.assign({onClick:this.copy},n)));return k.isValidElement(t)?k.cloneElement(t,n):s},this.state={copied:!1,item:""}}componentWillUnmount(){this._timeId&&(clearTimeout(this._timeId),this._timeId=null)}render(){const{style:e,className:t,forwardRef:n,copyTip:s,render:r}=this.props,{copied:a}=this.state,o=K(t,{[`${J2}-action-copy`]:!a,[`${J2}-action-copied`]:a});return r?r(a,this.copy,this.props):k.createElement(gi,{componentName:"Typography"},l=>k.createElement("span",{style:Object.assign({marginLeft:"4px"},e),className:o,ref:n},a?this.renderSuccessTip():k.createElement(En,{content:typeof s<"u"?s:l.copy},this.renderCopyIcon())))}}cj.propTypes={content:v.string,onCopy:v.func,successTip:v.node,copyTip:v.node,duration:v.number,style:v.object,className:v.string,icon:v.node};cj.defaultProps={content:"",onCopy:Vr,duration:3,style:{},className:""};const IQ={PREFIX:`${ge}-popover`,ARROW:`${ge}-popover-icon-arrow`},ev={POSITION_SET:["top","topLeft","topRight","left","leftTop","leftBottom","right","rightTop","rightBottom","bottom","bottomLeft","bottomRight","leftTopOver","rightTopOver"],TRIGGER_SET:["hover","focus","click","custom","contextMenu"],DEFAULT_ARROW_STYLE:{borderOpacity:"1",backgroundColor:"var(--semi-color-bg-3)",borderColor:"var(--semi-color-border)"}},Pu={ARROW_BOUNDING:Object.assign(Object.assign({},dh.ARROW_BOUNDING),{offsetY:6,offsetX:0,height:8}),SPACING:4,SPACING_WITH_ARROW:10,DEFAULT_Z_INDEX:1030};var n2e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const RQ=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{position:e="",className:t,arrowStyle:n,popStyle:s}=i,r=n2e(i,["position","className","arrowStyle","popStyle"]),a=e.indexOf("top")===0||e.indexOf("bottom")===0,o=K(t,IQ.ARROW),l=ne(n,"borderOpacity",ev.DEFAULT_ARROW_STYLE.borderOpacity),c=ne(n,"backgroundColor",ne(s,"backgroundColor",ev.DEFAULT_ARROW_STYLE.backgroundColor)),u=ne(n,"borderColor",ne(s,"borderColor",ev.DEFAULT_ARROW_STYLE.borderColor)),h=Object.assign(Object.assign({},r),{width:Pu.ARROW_BOUNDING.width,height:Pu.ARROW_BOUNDING.height,xmlns:"http://www.w3.org/2000/svg",className:o});return a?k.createElement("svg",Object.assign({},h),k.createElement("path",{d:"M0 0.5L0 1.5C4 1.5, 5.5 3, 7.5 5S10,8 12,8S14.5 7, 16.5 5S20,1.5 24,1.5L24 0.5L0 0.5z",fill:u,opacity:l}),k.createElement("path",{d:"M0 0L0 1C4 1, 5.5 2, 7.5 4S10,7 12,7S14.5  6, 16.5 4S20,1 24,1L24 0L0 0z",fill:c})):k.createElement("svg",Object.assign({},h),k.createElement("path",{d:"M0.5 0L1.5 0C1.5 4, 3 5.5, 5 7.5S8,10 8,12S7 14.5, 5 16.5S1.5,20 1.5,24L0.5 24L0.5 0z",fill:u,opacity:l}),k.createElement("path",{d:"M0 0L1 0C1 4, 2 5.5, 4 7.5S7,10 7,12S6 14.5, 4 16.5S1,20 1,24L0 24L0 0z",fill:c}))};RQ.propTypes={position:v.string,className:v.string,arrowStyle:v.object,popStyle:v.object};var s2e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const r2e=ev.POSITION_SET,a2e=ev.TRIGGER_SET;class ss extends k.PureComponent{constructor(e){super(e),this.focusTrigger=()=>{var t;(t=this.tooltipRef.current)===null||t===void 0||t.focusTrigger()},this.renderPopCard=t=>{let{initialFocusRef:n}=t;const{content:s,contentClassName:r,prefixCls:a}=this.props,{direction:o}=this.context,l=K(a,r,{[`${a}-rtl`]:o==="rtl"}),c=this.renderContentNode({initialFocusRef:n,content:s});return k.createElement("div",{className:l},k.createElement("div",{className:`${a}-content`},c))},this.renderContentNode=t=>{const{initialFocusRef:n,content:s}=t,r={initialFocusRef:n};return xt(s)?s(r):s},this.tooltipRef=k.createRef()}render(){const e=this.props,{children:t,prefixCls:n,showArrow:s,arrowStyle:r={},arrowBounding:a,position:o,style:l,trigger:c}=e,u=s2e(e,["children","prefixCls","showArrow","arrowStyle","arrowBounding","position","style","trigger"]);let{spacing:h}=this.props;const d={position:o,className:"",popStyle:l,arrowStyle:r},p=s?k.createElement(RQ,Object.assign({},d)):!1;Ms(h)&&(h=s?Pu.SPACING_WITH_ARROW:Pu.SPACING);const f=c==="click"||c==="custom"?"dialog":"tooltip";return k.createElement(En,Object.assign({guardFocus:!0,ref:this.tooltipRef},u,{trigger:c,position:o,style:l,content:this.renderPopCard,prefixCls:n,spacing:h,showArrow:p,arrowBounding:a,role:f}),t)}}ss.contextType=Da;ss.propTypes={children:v.node,content:v.oneOfType([v.node,v.func]),visible:v.bool,autoAdjustOverflow:v.bool,motion:v.bool,position:v.oneOf(r2e),margin:v.oneOfType([v.number,v.object]),mouseEnterDelay:v.number,mouseLeaveDelay:v.number,trigger:v.oneOf(a2e).isRequired,contentClassName:v.oneOfType([v.string,v.array]),onVisibleChange:v.func,onClickOutSide:v.func,style:v.object,spacing:v.oneOfType([v.number,v.object]),zIndex:v.number,showArrow:v.bool,arrowStyle:v.shape({borderColor:v.string,backgroundColor:v.string,borderOpacity:v.oneOfType([v.string,v.number])}),arrowPointAtCenter:v.bool,arrowBounding:v.object,prefixCls:v.string,guardFocus:v.bool,disableArrowKeyDown:v.bool};ss.__SemiComponentName__="Popover";ss.defaultProps=os(ss.__SemiComponentName__,{arrowBounding:Pu.ARROW_BOUNDING,showArrow:!1,autoAdjustOverflow:!0,zIndex:Pu.DEFAULT_Z_INDEX,motion:!0,trigger:"hover",cancelText:"No",okText:"Yes",position:"bottom",prefixCls:IQ.PREFIX,onClickOutSide:J,onEscKeyDown:J,closeOnEsc:!0,returnFocusOnClose:!0,guardFocus:!0,disableFocusListener:!0});let un;function Q2(i){if(!i)return 0;const e=i.match(/^\d*(\.\d*)?/);return e?Number(e[0]):0}function o2e(i){return Array.prototype.slice.apply(i).map(t=>`${t}: ${i.getPropertyValue(t)};`).join("")}const l2e=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,o=arguments.length>7?arguments[7]:void 0;if(t.length===0)return"";un||(un=document.createElement("div"),un.setAttribute("aria-hidden","true"),document.body.appendChild(un));const l=window.getComputedStyle(i),c=o2e(l),u=Q2(l.lineHeight),h=Math.round(u*(e+1)+Q2(l.paddingTop)+Q2(l.paddingBottom));un.setAttribute("style",c),un.style.position="fixed",un.style.left="0",un.style.height="auto",un.style.top="-999999px",un.style.zIndex="-1000",o&&(un.style.fontWeight="600"),un.style.textOverflow="clip",un.style.webkitLineClamp="none",vr.render(k.createElement(k.Fragment,null),un);function d(){const x=un.scrollWidth<=un.offsetWidth,S=un.scrollHeight<h;return e===1?x&&S:S}const p=document.createElement("span"),f=document.createTextNode(t);if(p.appendChild(f),r.length>0){const x=document.createTextNode(r);p.appendChild(x)}un.appendChild(p),Object.values(_n(n,"expand")).map(x=>x&&un.appendChild(x.cloneNode(!0)));function g(){un.innerHTML="",un.appendChild(p),Object.values(n).map(x=>x&&un.appendChild(x.cloneNode(!0)))}function m(x,S){const C=x.length;return S?a==="end"?x.slice(0,S)+s:x.slice(0,S)+s+x.slice(C-S,C):s}function y(x,S){let C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:S.length,A=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;const T=Math.floor((C+w)/2),E=m(S,T);if(x.textContent=E,C>=w-1&&w>0)for(let P=w;P>=C;P-=1){const O=m(S,P);if(x.textContent=O,d())return O}else if(w===0)return s;return d()?y(x,S,T,w,T):y(x,S,C,T,A)}let b=t;return d()||(g(),b=y(f,t,0,a==="middle"?Math.floor(t.length/2):t.length)),un.innerHTML="",b},LQ=k.createContext("normal");var qw;(function(i){i.Width="width",i.Height="height",i.All="all"})(qw||(qw={}));class jp extends Ve{constructor(e){var t;super(e),t=this,this.formerPropertyValue=new Map,this.getElement=()=>{try{return Nf.findDOMNode(this.childNode||this)}catch{return null}},this.handleResizeEventTriggered=n=>{var s,r,a,o;if(this.props.observerProperty===qw.All)(r=(s=this.props).onResize)===null||r===void 0||r.call(s,n);else{const l=[];for(const c of n)this.formerPropertyValue.has(c.target)?c.contentRect[this.props.observerProperty]!==this.formerPropertyValue.get(c.target)&&(this.formerPropertyValue.set(c.target,c.contentRect[this.props.observerProperty]),l.push(c)):(this.formerPropertyValue.set(c.target,c.contentRect[this.props.observerProperty]),l.push(c));l.length>0&&((o=(a=this.props).onResize)===null||o===void 0||o.call(a,l))}},this.observeElement=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const s=t.getElement();if(t.observer||(t.observer=new ResizeObserver(t.handleResizeEventTriggered)),!(s&&s instanceof Element)){t.observer.disconnect();return}s===t.element&&!n||(t.observer.disconnect(),t.element=s,t.observer.observe(s),t.props.observeParent&&s.parentNode&&s.parentNode.ownerDocument&&s.parentNode.ownerDocument.defaultView&&s.parentNode instanceof s.parentNode.ownerDocument.defaultView.HTMLElement&&(t._parentNode=s.parentNode,t.observer.observe(t._parentNode)))},this.mergeRef=(n,s)=>{this.childNode=s,typeof n=="function"?n(s):typeof n=="object"&&n&&"current"in n&&(n.current=s)},globalThis.ResizeObserver&&(this.observer=new ResizeObserver(this.handleResizeEventTriggered))}componentDidMount(){var e;(e=this.observeElement)===null||e===void 0||e.call(this)}componentDidUpdate(e){var t;(t=this.observeElement)===null||t===void 0||t.call(this,this.props.observeParent!==e.observeParent)}componentWillUnmount(){this.observer&&(this.observer.disconnect(),this.observer=null,this.element=null)}render(){const e=k.Children.only(this.props.children),{ref:t}=e;return k.cloneElement(e,{ref:n=>this.mergeRef(t,n)})}}jp.propTypes={onResize:v.func,observeParent:v.bool,observerProperty:v.string,delayTick:v.number};jp.defaultProps={onResize:()=>{},observeParent:!1,observerProperty:"all",delayTick:0};var eM=function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(a){a(r)})}return new(t||(t=Promise))(function(r,a){function o(u){try{c(n.next(u))}catch(h){a(h)}}function l(u){try{c(n.throw(u))}catch(h){a(h)}}function c(u){u.done?r(u.value):s(u.value).then(o,l)}c((n=n.apply(i,e||[])).next())})},c2e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const cs=RE.PREFIX,u2e="...",h2e=(i,e)=>{const{mark:t,code:n,underline:s,strong:r,link:a,disabled:o}=i;let l=e;const c=(u,h)=>{let d={};u&&(typeof u=="object"&&(d=Object.assign({},u)),l=k.createElement(h,d,l))};return c(t,"mark"),c(n,"code"),c(s&&!a,"u"),c(r,"strong"),c(i.delete,"del"),c(a,o?"span":"a"),l};class Vf extends H.Component{constructor(e){super(e),this.observerTakingEffect=!1,this.onResize=t=>eM(this,void 0,void 0,function*(){return this.rafId&&window.cancelAnimationFrame(this.rafId),new Promise(n=>{this.rafId=window.requestAnimationFrame(()=>eM(this,void 0,void 0,function*(){yield this.getEllipsisState(),n()}))})}),this.canUseCSSEllipsis=()=>{const{copyable:t}=this.props,{expandable:n,expandText:s,pos:r,suffix:a}=this.getEllipsisOpt();return!n&&Hr(s)&&!t&&r==="end"&&!a.length},this.shouldTruncated=t=>!t||t<1?!1:t<=1?this.compareSingleRow():this.wrapperRef.current.scrollHeight>this.wrapperRef.current.offsetHeight,this.compareSingleRow=()=>{if(!(document&&document.createRange))return!1;const t=this.wrapperRef.current,n=t.getBoundingClientRect().width,s=Array.from(t.childNodes),r=document.createRange(),a=s.reduce((o,l)=>{var c;return r.selectNodeContents(l),o+((c=r.getBoundingClientRect().width)!==null&&c!==void 0?c:0)},0);return r.detach(),a>n},this.showTooltip=()=>{var t,n;const{isOverflowed:s,isTruncated:r,expanded:a}=this.state,{showTooltip:o,expandable:l,expandText:c}=this.getEllipsisOpt(),u=this.canUseCSSEllipsis(),h=!a&&(u?s:r),p=!l&&Hr(c)&&h&&o;if(!p)return p;const f={type:"tooltip"};return typeof o=="object"?o.type&&o.type.toLowerCase()==="popover"?Q1({opts:{showArrow:!0}},o,{opts:{className:K({[`${cs}-ellipsis-popover`]:!0,[(t=o==null?void 0:o.opts)===null||t===void 0?void 0:t.className]:!!(!((n=o==null?void 0:o.opts)===null||n===void 0)&&n.className)})}}):Object.assign(Object.assign({},f),o):f},this.onHover=()=>{if(this.canUseCSSEllipsis()){const{rows:n,suffix:s,pos:r}=this.getEllipsisOpt(),a=this.shouldTruncated(n);this.setState({isOverflowed:a,isTruncated:!1});return}},this.getEllipsisState=()=>eM(this,void 0,void 0,function*(){const{rows:t,suffix:n,pos:s}=this.getEllipsisOpt(),{children:r,strong:a}=this.props;if(!this.wrapperRef||!this.wrapperRef.current){yield this.onResize();return}const{expanded:o}=this.state;if(this.canUseCSSEllipsis())return;if(z3(r))return new Promise(d=>{this.setState({isTruncated:!1,isOverflowed:!1},d)});if(ns("children"in this.props&&typeof r!="string","[Semi Typography] Only children with pure text could be used with ellipsis at this moment."),!t||t<0||o)return;const c={expand:this.expandRef.current,copy:this.copyRef&&this.copyRef.current},u=Array.isArray(r)?r.join(""):String(r),h=l2e(this.wrapperRef.current,t,u,c,u2e,n,s,a);return new Promise(d=>{this.setState({isOverflowed:!1,ellipsisContent:h,isTruncated:u!==h},d)})}),this.toggleOverflow=t=>{const{onExpand:n,expandable:s,collapsible:r}=this.getEllipsisOpt(),{expanded:a}=this.state;n&&n(!a,t),(s&&!a||r&&a)&&this.setState({expanded:!a})},this.getEllipsisOpt=()=>{const{ellipsis:t}=this.props;return t?Object.assign({rows:1,expandable:!1,pos:"end",suffix:"",showTooltip:!1,collapsible:!1,expandText:t.expandable?this.expandStr:void 0,collapseText:t.collapsible?this.collapseStr:void 0},typeof t=="object"?t:null):{}},this.renderExpandable=()=>{const{expanded:t,isTruncated:n}=this.state;if(!n)return null;const{expandText:s,expandable:r,collapseText:a,collapsible:o}=this.getEllipsisOpt(),l=!r&&Hr(s),c=!o&&Hr(a);let u;return!t&&!l?u=s:t&&!c&&(u=a),!l||!c?k.createElement("a",{role:"button",tabIndex:0,className:`${cs}-ellipsis-expand`,key:"expand",ref:this.expandRef,"aria-label":u,onClick:this.toggleOverflow,onKeyPress:h=>jd(h)&&this.toggleOverflow(h)},u):null},this.getEllipsisStyle=()=>{const{ellipsis:t,component:n}=this.props;if(!t)return{ellipsisCls:"",ellipsisStyle:{}};const{rows:s}=this.getEllipsisOpt(),{expanded:r}=this.state,a=!r&&this.canUseCSSEllipsis(),o=K({[`${cs}-ellipsis`]:!0,[`${cs}-ellipsis-single-line`]:s===1,[`${cs}-ellipsis-multiple-line`]:s>1,[`${cs}-ellipsis-multiple-line-text`]:s>1&&n==="span",[`${cs}-ellipsis-overflow-ellipsis`]:s===1&&a,[`${cs}-ellipsis-overflow-ellipsis-text`]:s===1&&a&&n==="span"}),l=a&&s>1?{WebkitLineClamp:s}:{};return{ellipsisCls:o,ellipsisStyle:l}},this.renderEllipsisText=t=>{const{suffix:n}=t,{children:s}=this.props,{isTruncated:r,expanded:a,ellipsisContent:o}=this.state;return a||!r?k.createElement("span",{onMouseEnter:this.onHover},s,n&&n.length?n:null):k.createElement("span",{onMouseEnter:this.onHover},o,n)},this.state={editable:!1,copied:!1,isOverflowed:!1,ellipsisContent:e.children,expanded:!1,isTruncated:!1,prevChildren:null},this.wrapperRef=k.createRef(),this.expandRef=k.createRef(),this.copyRef=k.createRef()}componentDidMount(){this.props.ellipsis&&this.onResize().then(()=>nj(()=>this.observerTakingEffect=!0,1))}static getDerivedStateFromProps(e,t){const{prevChildren:n}=t,s={};return s.prevChildren=e.children,e.ellipsis&&n!==e.children&&(s.isOverflowed=!1,s.ellipsisContent=e.children,s.expanded=!1,s.isTruncated=!0),s}componentDidUpdate(e){this.props.children!==e.children&&(this.forceUpdate(),this.props.ellipsis&&this.onResize())}componentWillUnmount(){this.rafId&&window.cancelAnimationFrame(this.rafId)}renderOperations(){return k.createElement(k.Fragment,null,this.renderExpandable(),this.renderCopy())}renderCopy(){var e;const{copyable:t,children:n}=this.props;if(!t)return null;const s=(e=t==null?void 0:t.content)!==null&&e!==void 0?e:n;let r,a=!1;Array.isArray(s)?(r="",s.forEach(l=>{typeof l=="object"&&(a=!0),r+=String(l)})):(typeof s!="object"||(a=!0),r=String(s)),ns(a,"Content to be copied in Typography is a object, it will case a [object Object] mistake when copy to clipboard.");const o=Object.assign({content:r,duration:3},typeof t=="object"?t:null);return k.createElement(cj,Object.assign({},o,{forwardRef:this.copyRef}))}renderIcon(){const{icon:e,size:t}=this.props,n=t==="inherit"?this.context:t;if(!e)return null;const s=n==="small"?"small":"default";return k.createElement("span",{className:`${cs}-icon`,"x-semi-prop":"icon"},oo(e)?k.cloneElement(e,{size:s}):e)}renderContent(){const e=this.props,{component:t,children:n,className:s,type:r,spacing:a,disabled:o,style:l,ellipsis:c,icon:u,size:h,link:d,heading:p,weight:f}=e,g=c2e(e,["component","children","className","type","spacing","disabled","style","ellipsis","icon","size","link","heading","weight"]),m=_n(g,["strong","editable","mark","copyable","underline","code","delete"]),y=h==="inherit"?this.context:h,b=this.renderIcon(),x=this.getEllipsisOpt(),{ellipsisCls:S,ellipsisStyle:C}=this.getEllipsisStyle();let w=c?this.renderEllipsisText(x):n;const A=K({[`${cs}-link-text`]:d,[`${cs}-link-underline`]:this.props.underline&&d});w=h2e(this.props,k.createElement(k.Fragment,null,b,this.props.link?k.createElement("span",{className:A},w):w));const T=/^h[1-6]$/,E=Ii(p)&&T.test(p),P=K(s,S,{[`${cs}-${r}`]:r&&!d,[`${cs}-${y}`]:y,[`${cs}-link`]:d,[`${cs}-disabled`]:o,[`${cs}-${a}`]:a,[`${cs}-${p}`]:E,[`${cs}-${p}-weight-${f}`]:E&&f&&isNaN(Number(f))}),O=Object.assign(Object.assign({},isNaN(Number(f))?{}:{fontWeight:f}),l);return k.createElement(LE,Object.assign({className:P,style:Object.assign(Object.assign({},O),C),component:t,forwardRef:this.wrapperRef},m),w,this.renderOperations())}renderTipWrapper(){const{children:e}=this.props,t=this.showTooltip(),n=this.renderContent();if(t){const{type:s,opts:r,renderTooltip:a}=t;return xt(a)?a(e,n):s.toLowerCase()==="popover"?k.createElement(ss,Object.assign({content:e,position:"top"},r),n):k.createElement(En,Object.assign({content:e,position:"top"},r),n)}else return n}render(){var e=this;const{size:t}=this.props,n=t==="inherit"?this.context:t,s=k.createElement(LQ.Provider,{value:n},k.createElement(gi,{componentName:"Typography"},r=>(this.expandStr=r.expand,this.collapseStr=r.collapse,this.renderTipWrapper())));return this.props.ellipsis?k.createElement(jp,{onResize:function(){e.observerTakingEffect&&e.onResize(...arguments)},observeParent:!0,observerProperty:qw.Width},s):s}}Vf.propTypes={children:v.node,copyable:v.oneOfType([v.shape({text:v.string,onCopy:v.func,successTip:v.node,copyTip:v.node}),v.bool]),delete:v.bool,disabled:v.bool,ellipsis:v.oneOfType([v.shape({rows:v.number,expandable:v.bool,expandText:v.string,onExpand:v.func,suffix:v.string,showTooltip:v.oneOfType([v.shape({type:v.string,opts:v.object}),v.bool]),collapsible:v.bool,collapseText:v.string,pos:v.oneOf(["end","middle"])}),v.bool]),mark:v.bool,underline:v.bool,link:v.oneOfType([v.object,v.bool]),spacing:v.oneOf(Js.SPACING),strong:v.bool,size:v.oneOf(Js.SIZE),type:v.oneOf(Js.TYPE),style:v.object,className:v.string,icon:v.oneOfType([v.node,v.string]),heading:v.string,component:v.string};Vf.defaultProps={children:null,copyable:!1,delete:!1,disabled:!1,ellipsis:!1,icon:"",mark:!1,underline:!1,strong:!1,link:!1,type:"primary",spacing:"normal",size:"normal",style:{},className:""};Vf.contextType=LQ;let GE=class extends H.PureComponent{render(){return k.createElement(Vf,Object.assign({component:"span"},this.props))}};GE.propTypes={copyable:v.oneOfType([v.object,v.bool]),delete:v.bool,disabled:v.bool,icon:v.oneOfType([v.node,v.string]),ellipsis:v.oneOfType([v.object,v.bool]),mark:v.bool,underline:v.bool,link:v.oneOfType([v.object,v.bool]),strong:v.bool,type:v.oneOf(Js.TYPE),size:v.oneOf(Js.SIZE),style:v.object,className:v.string,code:v.bool,component:v.string,weight:v.number};GE.defaultProps={copyable:!1,delete:!1,disabled:!1,icon:"",ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",style:{},size:"normal",className:""};var d2e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};let uj=class extends H.PureComponent{render(){const e=this.props,{heading:t}=e,n=d2e(e,["heading"]),s=Js.HEADING.indexOf(t)!==-1?`h${t}`:"h1";return k.createElement(Vf,Object.assign({component:s,heading:s},n))}};uj.propTypes={copyable:v.oneOfType([v.object,v.bool]),delete:v.bool,disabled:v.bool,ellipsis:v.oneOfType([v.object,v.bool]),mark:v.bool,link:v.oneOfType([v.object,v.bool]),underline:v.bool,strong:v.bool,type:v.oneOf(Js.TYPE),heading:v.oneOf(Js.HEADING),style:v.object,className:v.string,component:v.string,weight:v.oneOfType([v.oneOf(Js.WEIGHT),v.number])};uj.defaultProps={copyable:!1,delete:!1,disabled:!1,ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",heading:1,style:{},className:""};const p2e=RE.PREFIX;let hj=class extends H.PureComponent{render(){const{className:e}=this.props,t=K(e,`${p2e}-paragraph`);return k.createElement(Vf,Object.assign({component:"p"},this.props,{className:t}))}};hj.propTypes={copyable:v.oneOfType([v.object,v.bool]),delete:v.bool,disabled:v.bool,ellipsis:v.oneOfType([v.object,v.bool]),mark:v.bool,link:v.oneOfType([v.object,v.bool]),underline:v.bool,strong:v.bool,type:v.oneOf(Js.TYPE),size:v.oneOf(Js.SIZE),spacing:v.oneOf(Js.SPACING),style:v.object,className:v.string,component:v.string};hj.defaultProps={copyable:!1,delete:!1,disabled:!1,ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",size:"normal",spacing:"normal",style:{},className:""};class f2e{constructor(e,t,n,s,r){this.ruleMethods={"bytes-decimal":a=>{const o=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];let l=0;for(;a>=1e3;)a/=1e3,l++;return`${this.truncatePrecision(a)} ${o[l]}`},"bytes-binary":a=>{const o=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let l=0;for(;a>=1024;)a/=1024,l++;return`${this.truncatePrecision(a)} ${o[l]}`},percentages:a=>`${this.truncatePrecision(a*100)}%`,exponential:a=>{const l=a.toExponential(this.precision+2).split("e");return`${this.truncatePrecision(Number(l[0]))}e${l[1]}`}},this.truncateMethods={ceil:Math.ceil,floor:Math.floor,round:Math.round},this.isDiyParser=typeof r<"u",this.content=e,this.rule=t,this.precision=n,this.truncate=s,this.parser=r}format(){return this.isDiyParser?this.parser(this.content):this.rule==="text"?tM(this.content).map(e=>iM(e)?this.truncatePrecision(e):e).join(""):this.rule==="numbers"?tM(this.content).filter(e=>iM(e)).map(e=>this.truncatePrecision(e)).join(","):tM(this.content).map(e=>iM(e)?this.ruleMethods[this.rule](Number(e)):e).join("")}truncatePrecision(e){const t=this.truncateMethods[this.truncate](Number(e)*Math.pow(10,this.precision))/Math.pow(10,this.precision),n=t.toString().split(".");if(n.length===1)return t.toFixed(this.precision);const s=n[1].length;return s<this.precision?`${n[0]}.${n[1]}${"0".repeat(this.precision-s)}`:t.toString()}}function tM(i){const e=/(-?[0-9]*\.?[0-9]+([eE]-?[0-9]+)?)|([^-\d\.]+)/g;return i.match(e)||[]}function iM(i){return!(isNaN(Number(i))||i.replace(/\s+/g,"")==="")}class dj extends H.PureComponent{formatNodeDFS(e){return Array.isArray(e)||(e=[e]),e=e.map(t=>typeof t=="string"||typeof t=="number"?new f2e(String(t),this.props.rule,this.props.precision,this.props.truncate,this.props.parser).format():typeof t=="function"?this.formatNodeDFS(t()):typeof t=="object"&&"children"in t.props?Object.assign(Object.assign({},t),{props:Object.assign(Object.assign({},t.props),{children:this.formatNodeDFS(t.props.children)})}):t),e.length===1?e[0]:e}render(){const e=Object.assign({},this.props);return delete e.rule,delete e.parser,e.children=this.formatNodeDFS(this.props.children),k.createElement(Vf,Object.assign({component:"span"},e))}}dj.propTypes={rule:v.oneOf(Js.RULE),precision:v.number,truncate:v.oneOf(Js.TRUNCATE),parser:v.func,copyable:v.oneOfType([v.object,v.bool]),delete:v.bool,disabled:v.bool,icon:v.oneOfType([v.node,v.string]),mark:v.bool,underline:v.bool,link:v.oneOfType([v.object,v.bool]),strong:v.bool,type:v.oneOf(Js.TYPE),size:v.oneOf(Js.SIZE),style:v.object,className:v.string,code:v.bool,component:v.string};dj.defaultProps={rule:"text",precision:0,truncate:"round",parser:void 0,copyable:!1,delete:!1,icon:"",mark:!1,underline:!1,strong:!1,link:!1,type:"primary",style:{},size:"normal",className:""};const On=LE;On.Text=GE;On.Title=uj;On.Paragraph=hj;On.Numeral=dj;const DQ={PREFIX:`${ge}-autocomplete`,PREFIX_OPTION:`${ge}-autocomplete-option`,PREFIX_GROUP:`${ge}-autocomplete-group`},pj={SIZE:["small","large","default"],POSITION:Zh.POSITION_SET,OPTIONS:["children","value"],STATUS:$3};var g2e=Mc,m2e=La,y2e="[object Number]";function _2e(i){return typeof i=="number"||m2e(i)&&g2e(i)==y2e}var FQ=_2e;const Sa=Xe(FQ);class v2e extends tt{constructor(e){super(Object.assign({},e)),this.isPanelOpen=!1}init(){this._setDropdownWidth();const{defaultOpen:e,data:t,defaultValue:n,value:s}=this.getProps();if(t&&t.length){const a=this._generateList(t);this._adapter.updateOptionList(a)}e&&this.openDropdown();let r;typeof n<"u"&&(r=n),typeof s<"u"&&(r=s),typeof r<"u"&&this.handleValueChange(r)}destroy(){this._adapter.unregisterClickOutsideHandler()}_setDropdownWidth(){const{style:e,dropdownMatchSelectWidth:t}=this.getProps();let n;t&&(e&&Sa(e.width)||e&&Ii(e.width)&&!e.width.includes("%")?n=e.width:n=this._adapter.getTriggerWidth(),this._adapter.setOptionWrapperWidth(n))}handleInputClick(e){this.getStates();const{disabled:t}=this.getProps();t||(this.isPanelOpen?this.closeDropdown():this.openDropdown())}openDropdown(){this.isPanelOpen=!0,this._adapter.toggleListVisible(!0),this._setDropdownWidth(),this._adapter.registerClickOutsideHandler(e=>this.closeDropdown(e)),this._adapter.notifyDropdownVisibleChange(!0),this._modifyFocusIndexOnPanelOpen()}closeDropdown(e){this.isPanelOpen=!1,this._adapter.toggleListVisible(!1),this._adapter.unregisterClickOutsideHandler(),this._adapter.notifyDropdownVisibleChange(!1)}_generateList(e){const{renderItem:t}=this.getProps(),n=[];return e&&e.length&&e.forEach((s,r)=>{const a=String(new Date().getTime())+r;let o={};Ii(s)||Sa(s)?o={value:s,key:a,label:s,show:!0}:As(s)&&!Hr(s.value)&&(o=Object.assign({show:!0},s)),t&&typeof t=="function"&&(o.label=t(s)),n.push(o)}),n}handleSearch(e){this._adapter.updateInputValue(e),this._adapter.notifySearch(e),this._adapter.notifyChange(e),this._modifyFocusIndex(e),this.isPanelOpen||this.openDropdown()}handleSelect(e,t){const{renderSelectedItem:n}=this.getProps();let s="";n&&typeof n=="function"?(s=n(e),ns(typeof s!="string","Warning: [Semi AutoComplete] renderSelectedItem must return string, please check your function return")):s=e.value,this._isControlledComponent()?(this.closeDropdown(),this.notifySelect(e)):(this._adapter.updateInputValue(s),this.updateSelection(e),this.notifySelect(e),this.closeDropdown()),this._adapter.notifyChange(s),this._adapter.updateFocusIndex(t)}updateSelection(e){const t=new Map;e&&t.set(e.label,e),this._adapter.updateSelection(t)}notifySelect(e){this._backwardLabelInValue()?this._adapter.notifySelect(e):this._adapter.notifySelect(e.value)}_backwardLabelInValue(){const e=this.getProps();let{onSelectWithObject:t}=e;return t}handleDataChange(e){const t=this._generateList(e);this._adapter.updateOptionList(t),this._adapter.rePositionDropdown()}handleValueChange(e){let{data:t,defaultActiveFirstOption:n}=this.getProps(),s="";this._backwardLabelInValue()&&Object.prototype.toString.call(e)==="[object Object]"?s=e.value:s=e;let r=this._getRenderSelectedItem();const a=this._generateList(t);let o=a.length?a.filter(h=>r(h)===s):[];const l=o.length,c=a.findIndex(h=>r(h)===s);let u="";if(l)o=o[0],u=r(o);else{const h=this._backwardLabelInValue()?e:{label:s,value:s};u=r(h)}this._adapter.updateInputValue(u),this.updateSelection(l?o:null),c===-1&&n?this._adapter.updateFocusIndex(0):this._adapter.updateFocusIndex(c)}_modifyFocusIndex(e){let{focusIndex:t}=this.getStates(),{data:n,defaultActiveFirstOption:s}=this.getProps(),r=-1;if(e){let a=this._getRenderSelectedItem();r=this._generateList(n).findIndex(l=>a(l)===e)}r===-1&&s?t!==0&&this._adapter.updateFocusIndex(0):r!==t&&this._adapter.updateFocusIndex(r)}_modifyFocusIndexOnPanelOpen(){let{inputValue:e}=this.getStates();this._modifyFocusIndex(e)}_getRenderSelectedItem(){let{renderSelectedItem:e}=this.getProps();return typeof e>"u"&&(e=t=>t==null?void 0:t.value),e}handleClear(){this._adapter.notifyClear()}bindKeyBoardEvent(){this._keydownHandler=e=>{this._handleKeyDown(e)},this._adapter.registerKeyDown(this._keydownHandler)}_handleKeyDown(e){const t=e.keyCode;switch(this.getStates(),t){case ds.UP:e.preventDefault(),this._handleArrowKeyDown(-1);break;case ds.DOWN:e.preventDefault(),this._handleArrowKeyDown(1);break;case ds.ENTER:e.preventDefault(),this._handleEnterKeyDown();break;case ds.ESC:this.closeDropdown();break;case ds.TAB:this.closeDropdown();break}this._adapter.notifyKeyDown(e)}_getEnableFocusIndex(e){const{focusIndex:t,options:n}=this.getStates(),s=n.filter(o=>o.show),r=s.length;let a=t+e;if(a<0&&(a=r-1),a>=r&&(a=0),e>0){let o=-1;for(let l=0;l<s.length&&(!s[l].disabled&&(o=l),!(o>=a));l++);a=o}else{let o=s.length;for(let l=r-1;l>=0&&(!s[l].disabled&&(o=l),!(o<=a));l--);a=o}this._adapter.updateFocusIndex(a),this._adapter.updateScrollTop(a)}_handleArrowKeyDown(e){const{visible:t}=this.getStates();t?this._getEnableFocusIndex(e):this.openDropdown()}_handleEnterKeyDown(){const{visible:e,options:t,focusIndex:n}=this.getStates();if(!e)this.openDropdown();else if(n!==void 0&&n!==-1&&t.length!==0){const r=t.filter(a=>a.show)[n];this.handleSelect(r,n)}else this.closeDropdown()}handleOptionMouseEnter(e){this._adapter.updateFocusIndex(e)}handleFocus(e){this.bindKeyBoardEvent(),this._adapter.notifyFocus(e)}handleBlur(e){this._persistEvent(e),this._adapter.notifyBlur(e)}}const b2e=`${ge}-spin`,x2e={PREFIX:b2e},S2e={SIZE:["small","middle","large"]};class fj extends tt{static get spinDefaultAdapter(){return{getProp:()=>{},setLoading:e=>{}}}constructor(e){super(Object.assign(Object.assign({},fj.spinDefaultAdapter),e))}updateLoadingIfNeedDelay(){const{spinning:e,delay:t}=this._adapter.getProps(),{delay:n}=this._adapter.getStates();if(n){const s=this;this._timer=setTimeout(()=>{s._adapter.setState({loading:e,delay:0})},t)}}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}}var C2e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};let G6=-1;function BQ(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:e,className:t}=i,n=C2e(i,["id","className"]);let s=e;Ms(s)&&(G6++,s=G6);const r=`linearGradient-${s}`;return k.createElement("svg",Object.assign({},n,{className:t,width:"48",height:"48",viewBox:"0 0 36 36",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,"data-icon":"spin"}),k.createElement("defs",null,k.createElement("linearGradient",{x1:"0%",y1:"100%",x2:"100%",y2:"100%",id:r},k.createElement("stop",{stopColor:"currentColor",stopOpacity:"0",offset:"0%"}),k.createElement("stop",{stopColor:"currentColor",stopOpacity:"0.50",offset:"39.9430698%"}),k.createElement("stop",{stopColor:"currentColor",offset:"100%"}))),k.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},k.createElement("rect",{fillOpacity:"0.01",fill:"none",x:"0",y:"0",width:"36",height:"36"}),k.createElement("path",{d:"M34,18 C34,9.163444 26.836556,2 18,2 C11.6597233,2 6.18078805,5.68784135 3.59122325,11.0354951",stroke:`url(#${r})`,strokeWidth:"4",strokeLinecap:"round"})))}var w2e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const qd=x2e.PREFIX;class Cc extends Ve{constructor(e){super(e),this.foundation=new fj(this.adapter),this.state={delay:e.delay,loading:!0}}static getDerivedStateFromProps(e){return e.delay?e.spinning===!1?{delay:0,loading:!1}:{delay:e.delay}:{loading:e.spinning}}get adapter(){return Object.assign(Object.assign({},super.adapter),{setLoading:e=>{this.setState({loading:e})}})}componentWillUnmount(){this.foundation.destroy()}renderSpin(){const{indicator:e,tip:t}=this.props,{loading:n}=this.state;return n?k.createElement("div",{className:`${qd}-wrapper`},e?k.createElement("div",{className:`${qd}-animate`,"x-semi-prop":"indicator"},e):k.createElement(BQ,null),t?k.createElement("div",{"x-semi-prop":"tip"},t):null):null}render(){this.foundation.updateLoadingIfNeedDelay();const e=this.props,{children:t,style:n,wrapperClassName:s,childStyle:r,size:a}=e,o=w2e(e,["children","style","wrapperClassName","childStyle","size"]),{loading:l}=this.state,c=K(qd,s,{[`${qd}-${a}`]:a,[`${qd}-block`]:t,[`${qd}-hidden`]:!l});return k.createElement("div",Object.assign({className:c,style:n},this.getDataAttr(o)),this.renderSpin(),k.createElement("div",{className:`${qd}-children`,style:r,"x-semi-prop":"children"},t))}}Cc.propTypes={size:v.oneOf(S2e.SIZE),spinning:v.bool,children:v.node,indicator:v.node,delay:v.number,tip:v.node,wrapperClassName:v.string,childStyle:v.object,style:v.object};Cc.defaultProps={size:"middle",spinning:!0,children:null,indicator:null,delay:0};const KE={PREFIX:`${ge}-input`},l0={SIZE:["small","large","default"],DEFAULT_SIZE:"default",STATUS:["default","error","warning","success"],CLEARBTN_CLICKED_EVENT_FLAG:"__fromClearBtn",MODE:["password"]},A2e={};function jQ(i){const{value:e,maxLength:t,getValueLength:n}=i;if(xt(n)){let s=0,r=e.length;for(;s<r;){const a=s+Math.floor((r-s)/2),o=e.slice(0,a+1);n(o)>t?r=a:s=a+1}return e.slice(0,s)}else return e.slice(0,t)}class gj extends tt{static get inputDefaultAdapter(){return{notifyChange:J,setValue:J}}constructor(e){super(Object.assign(Object.assign({},gj.inputDefaultAdapter),e))}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}setDisable(){}setValue(e){this._adapter.setValue(e)}handleChange(e,t){const{maxLength:n,minLength:s,getValueLength:r}=this._adapter.getProps();let a=e;n&&xt(r)&&(a=this.handleVisibleMaxLength(e)),s&&xt(r)&&this.handleVisibleMinLength(a),this._isControlledComponent()?this._adapter.notifyChange(a,t):(this._adapter.setValue(a),this._adapter.notifyChange(a,t))}handleVisibleMinLength(e){const{minLength:t,getValueLength:n}=this._adapter.getProps(),{minLength:s}=this._adapter.getStates();if(Sa(t)&&t>=0&&xt(n)&&Ii(e)){const r=n(e);if(r<t){const a=e.length+(t-r);a!==s&&this._adapter.setMinLength(a)}else s!==t&&this._adapter.setMinLength(t)}}handleVisibleMaxLength(e){const{maxLength:t,getValueLength:n}=this._adapter.getProps();return Sa(t)&&t>=0&&xt(n)&&Ii(e)&&n(e)>t?(console.warn("[Semi Input] The input character is truncated because the input length exceeds the maximum length limit"),this.handleTruncateValue(e,t)):e}handleTruncateValue(e,t){const{getValueLength:n}=this._adapter.getProps();return jQ({value:e,maxLength:t,getValueLength:n})}handleClear(e){let t=e;const n="";this._isControlledComponent("value")?this._adapter.setState({isFocus:!1}):this._adapter.setState({value:"",isFocus:!1}),(!t||typeof t!="object")&&(t={}),nc(t,l0.CLEARBTN_CLICKED_EVENT_FLAG,!0),this._adapter.notifyChange(n,t),this._adapter.notifyClear(t),t&&this.stopPropagation(t)}handleClick(e){const{disabled:t}=this._adapter.getProps(),{isFocus:n}=this._adapter.getStates();t||n||this._adapter.isEventTarget(e)&&(this._adapter.focusInput(),this._adapter.toggleFocusing(!0))}handleModeChange(e){e==="password"?this._adapter.setEyeClosed(!0):this._adapter.setEyeClosed(!1)}handleClickEye(e){const t=this._adapter.getState("eyeClosed");this._adapter.focusInput(),this._adapter.toggleFocusing(!0),this._adapter.setEyeClosed(!t)}handleInputType(e){const t=this._adapter.getProp("mode"),n=this._adapter.getState("eyeClosed");return t==="password"?n?"password":"text":e}handleMouseDown(e){e.preventDefault()}handleMouseUp(e){e.preventDefault()}handleBlur(e){const{value:t}=this.getStates();this._adapter.toggleFocusing(!1),this._adapter.notifyBlur(t,e)}handleFocus(e){const{value:t}=this.getStates();this._adapter.toggleFocusing(!0),this._adapter.notifyFocus(t,e)}handleInput(e){this._adapter.notifyInput(e)}handleKeyDown(e){this._adapter.notifyKeyDown(e)}handleKeyUp(e){this._adapter.notifyKeyUp(e)}handleKeyPress(e){this._adapter.notifyKeyPress(e),e.key===lj&&this._adapter.notifyEnterPress(e)}isAllowClear(){const{value:e,isFocus:t,isHovering:n}=this._adapter.getStates(),{showClear:s,disabled:r,showClearIgnoreDisabled:a}=this._adapter.getProps();return e&&s&&(!r||a)&&(t||n)}handleClickPrefixOrSuffix(e){const{disabled:t}=this._adapter.getProps(),{isFocus:n}=this._adapter.getStates();!t&&!n&&(this._adapter.focusInput(),this._adapter.toggleFocusing(!0))}handlePreventMouseDown(e){e&&xt(e.preventDefault)&&e.preventDefault()}handleModeEnterPress(e){["Enter"," "].includes(e==null?void 0:e.key)&&(this.handlePreventMouseDown(e),this.handleClickEye(e))}}var k2e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const ri=KE.PREFIX,T2e=l0.SIZE,E2e=l0.STATUS,P2e=l0.MODE;class mj extends Ve{constructor(e){super(e),this.handleClear=n=>{this.foundation.handleClear(n)},this.handleClick=n=>{this.foundation.handleClick(n)},this.handleMouseOver=n=>{this.setState({isHovering:!0})},this.handleMouseLeave=n=>{this.setState({isHovering:!1})},this.handleModeChange=n=>{this.foundation.handleModeChange(n)},this.handleClickEye=n=>{this.foundation.handleClickEye(n)},this.handleMouseDown=n=>{this.foundation.handleMouseDown(n)},this.handleMouseUp=n=>{this.foundation.handleMouseUp(n)},this.handleModeEnterPress=n=>{this.foundation.handleModeEnterPress(n)},this.handleClickPrefixOrSuffix=n=>{this.foundation.handleClickPrefixOrSuffix(n)},this.handlePreventMouseDown=n=>{this.foundation.handlePreventMouseDown(n)};const t="value"in e?e.value:e.defaultValue;this.state={value:t,cachedValue:e.value,disabled:!1,props:{},isFocus:!1,isHovering:!1,eyeClosed:e.mode==="password",minLength:e.minLength},this.inputRef=k.createRef(),this.prefixRef=k.createRef(),this.suffixRef=k.createRef(),this.foundation=new gj(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setValue:e=>this.setState({value:e}),setEyeClosed:e=>this.setState({eyeClosed:e}),toggleFocusing:e=>{this.setState({isFocus:e})},focusInput:()=>{const{preventScroll:e}=this.props,t=this.inputRef&&this.inputRef.current;t&&t.focus({preventScroll:e})},toggleHovering:e=>this.setState({isHovering:e}),getIfFocusing:()=>this.state.isFocus,notifyChange:(e,t)=>this.props.onChange(e,t),notifyBlur:(e,t)=>this.props.onBlur(t),notifyFocus:(e,t)=>this.props.onFocus(t),notifyInput:e=>this.props.onInput(e),notifyKeyPress:e=>this.props.onKeyPress(e),notifyKeyDown:e=>this.props.onKeyDown(e),notifyKeyUp:e=>this.props.onKeyUp(e),notifyEnterPress:e=>this.props.onEnterPress(e),notifyClear:e=>this.props.onClear(e),setMinLength:e=>this.setState({minLength:e}),isEventTarget:e=>e&&e.target===e.currentTarget})}static getDerivedStateFromProps(e,t){const n={};return e.value!==t.cachedValue&&(n.value=e.value,n.cachedValue=e.value),n}componentDidUpdate(e){const{mode:t}=this.props;e.mode!==t&&this.handleModeChange(t)}componentDidMount(){const{disabled:e,autoFocus:t,preventScroll:n}=this.props;!e&&(t||this.props.autofocus)&&this.inputRef.current.focus({preventScroll:n})}renderPrepend(){const{addonBefore:e}=this.props;if(e){const t=K({[`${ri}-prepend`]:!0,[`${ri}-prepend-text`]:e&&Ii(e),[`${ri}-prepend-icon`]:oo(e)});return k.createElement("div",{className:t,"x-semi-prop":"addonBefore"},e)}return null}renderAppend(){const{addonAfter:e}=this.props;if(e){const t=K({[`${ri}-append`]:!0,[`${ri}-append-text`]:e&&Ii(e),[`${ri}-append-icon`]:oo(e)});return k.createElement("div",{className:t,"x-semi-prop":"addonAfter"},e)}return null}renderClearBtn(){const e=K(`${ri}-clearbtn`),{clearIcon:t}=this.props;return this.foundation.isAllowClear()?k.createElement("div",{className:e,onMouseDown:this.handleClear},t||k.createElement(nx,null)):null}renderModeBtn(){const{eyeClosed:e}=this.state,{mode:t,disabled:n}=this.props,s=K(`${ri}-modebtn`),r=e?k.createElement(hOe,null):k.createElement(AQ,null),a=t==="password"&&!n,o=e?"Show password":"Hidden password";return a?k.createElement("div",{role:"button",tabIndex:0,"aria-label":o,className:s,onClick:this.handleClickEye,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onKeyPress:this.handleModeEnterPress},r):null}renderPrefix(){const{prefix:e,insetLabel:t,insetLabelId:n}=this.props,s=e||t;if(!s)return null;const r=K({[`${ri}-prefix`]:!0,[`${ri}-inset-label`]:t,[`${ri}-prefix-text`]:s&&Ii(s),[`${ri}-prefix-icon`]:oo(s)});return k.createElement("div",{className:r,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,id:n,"x-semi-prop":"prefix,insetLabel"},s)}renderSuffix(e){const{suffix:t,hideSuffix:n}=this.props;if(!t)return null;const s=K({[`${ri}-suffix`]:!0,[`${ri}-suffix-text`]:t&&Ii(t),[`${ri}-suffix-icon`]:oo(t),[`${ri}-suffix-hidden`]:e&&!!n});return k.createElement("div",{className:s,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,"x-semi-prop":"suffix"},t)}getInputRef(){const{forwardRef:e}=this.props;if(!Hr(e)){if(typeof e=="function")return t=>{e(t),this.inputRef={current:t}};if(Object.prototype.toString.call(e)==="[object Object]")return this.inputRef=e,e}return this.inputRef}render(){const e=this.props,{addonAfter:t,addonBefore:n,autoFocus:s,clearIcon:r,className:a,disabled:o,defaultValue:l,placeholder:c,prefix:u,mode:h,insetLabel:d,insetLabelId:p,validateStatus:f,type:g,readonly:m,size:y,suffix:b,style:x,showClear:S,onEnterPress:C,onClear:w,hideSuffix:A,inputStyle:T,forwardRef:E,maxLength:P,getValueLength:O,preventScroll:M,borderless:R,showClearIgnoreDisabled:j,onlyBorder:I}=e,D=k2e(e,["addonAfter","addonBefore","autoFocus","clearIcon","className","disabled","defaultValue","placeholder","prefix","mode","insetLabel","insetLabelId","validateStatus","type","readonly","size","suffix","style","showClear","onEnterPress","onClear","hideSuffix","inputStyle","forwardRef","maxLength","getValueLength","preventScroll","borderless","showClearIgnoreDisabled","onlyBorder"]),{value:z,isFocus:$,minLength:V}=this.state,L=this.foundation.isAllowClear(),Y=oo(b),ae=this.getInputRef(),W=`${ri}-wrapper`,ce=K(W,a,{[`${ri}-wrapper__with-prefix`]:u||d,[`${ri}-wrapper__with-suffix`]:b,[`${ri}-wrapper__with-suffix-hidden`]:L&&!!A,[`${ri}-wrapper__with-suffix-icon`]:Y,[`${ri}-wrapper__with-append`]:n,[`${ri}-wrapper__with-prepend`]:t,[`${ri}-wrapper__with-append-only`]:n&&!t,[`${ri}-wrapper__with-prepend-only`]:!n&&t,[`${W}-readonly`]:m,[`${W}-disabled`]:o,[`${W}-warning`]:f==="warning",[`${W}-error`]:f==="error",[`${W}-focus`]:$,[`${W}-clearable`]:S,[`${W}-modebtn`]:h==="password",[`${W}-hidden`]:g==="hidden",[`${W}-${y}`]:y,[`${ri}-borderless`]:R,[`${ri}-only_border`]:I!=null}),he=K(ri,{[`${ri}-${y}`]:y,[`${ri}-disabled`]:o,[`${ri}-sibling-clearbtn`]:this.foundation.isAllowClear(),[`${ri}-sibling-modebtn`]:h==="password"}),le=z??"",de=Object.assign(Object.assign({},D),{style:T,className:he,disabled:o,readOnly:m,type:this.foundation.handleInputType(g),placeholder:c,onInput:me=>this.foundation.handleInput(me),onChange:me=>this.foundation.handleChange(me.target.value,me),onFocus:me=>this.foundation.handleFocus(me),onBlur:me=>this.foundation.handleBlur(me),onKeyUp:me=>this.foundation.handleKeyUp(me),onKeyDown:me=>this.foundation.handleKeyDown(me),onKeyPress:me=>this.foundation.handleKeyPress(me),value:le});xt(O)||(de.maxLength=P),V&&(de.minLength=V),f==="error"&&(de["aria-invalid"]="true");let te=Object.assign({},x);return I!==void 0&&(te=Object.assign({borderWidth:I},x)),k.createElement("div",{className:ce,style:te,onMouseEnter:me=>this.handleMouseOver(me),onMouseLeave:me=>this.handleMouseLeave(me),onClick:me=>this.handleClick(me)},this.renderPrepend(),this.renderPrefix(),k.createElement("input",Object.assign({},de,{ref:ae})),this.renderClearBtn(),this.renderSuffix(L),this.renderModeBtn(),this.renderAppend())}}mj.propTypes={"aria-label":v.string,"aria-labelledby":v.string,"aria-invalid":v.bool,"aria-errormessage":v.string,"aria-describedby":v.string,"aria-required":v.bool,addonBefore:v.node,addonAfter:v.node,clearIcon:v.node,prefix:v.node,suffix:v.node,mode:v.oneOf(P2e),value:v.any,defaultValue:v.any,disabled:v.bool,readonly:v.bool,autoFocus:v.bool,type:v.string,showClear:v.bool,hideSuffix:v.bool,placeholder:v.any,size:v.oneOf(T2e),className:v.string,style:v.object,validateStatus:v.oneOf(E2e),onClear:v.func,onChange:v.func,onBlur:v.func,onFocus:v.func,onInput:v.func,onKeyDown:v.func,onKeyUp:v.func,onKeyPress:v.func,onEnterPress:v.func,insetLabel:v.node,insetLabelId:v.string,inputStyle:v.object,getValueLength:v.func,preventScroll:v.bool,borderless:v.bool};mj.defaultProps={addonBefore:"",addonAfter:"",prefix:"",suffix:"",readonly:!1,type:"text",showClear:!1,hideSuffix:!1,placeholder:"",size:"default",className:"",onClear:J,onChange:J,onBlur:J,onFocus:J,onInput:J,onKeyDown:J,onKeyUp:J,onKeyPress:J,onEnterPress:J,validateStatus:"default",borderless:!1};const ll=k.forwardRef((i,e)=>k.createElement(mj,Object.assign({},i,{forwardRef:e})));var O2e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};class yj extends k.PureComponent{render(){const e=this.props,{triggerRender:t,componentName:n}=e,s=O2e(e,["triggerRender","componentName"]);return t(Object.assign({},s))}}yj.propTypes={triggerRender:v.func.isRequired,componentName:v.string,componentProps:v.object,value:v.any,inputValue:v.string,placeholder:v.oneOfType([v.string,v.array]),className:v.string,style:v.object};var K6=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};let sx=class extends H.PureComponent{onClick(e,t){var{value:n,label:s,children:r}=e,a=K6(e,["value","label","children"]);const{props:o}=this;o.disabled||o.onSelect(Object.assign(Object.assign({},a),{value:n,label:s||r}),t)}renderOptionContent(e){let{config:t,children:n,inputValue:s,prefixCls:r}=e;return Ii(n)&&s?fQ(t):n}render(){const e=this.props,{children:t,disabled:n,value:s,selected:r,label:a,empty:o,emptyContent:l,onSelect:c,focused:u,showTick:h,className:d,style:p,onMouseEnter:f,prefixCls:g,renderOptionItem:m,inputValue:y}=e,b=K6(e,["children","disabled","value","selected","label","empty","emptyContent","onSelect","focused","showTick","className","style","onMouseEnter","prefixCls","renderOptionItem","inputValue"]),x=K(g,{[`${g}-disabled`]:n,[`${g}-selected`]:r,[`${g}-focused`]:u,[`${g}-empty`]:o,[d]:d}),S=K([`${g}-icon`]);if(o)return l===null?null:k.createElement(gi,{componentName:"Select"},w=>k.createElement("div",{className:x,"x-semi-prop":"emptyContent"},l||w.emptyText));if(typeof m=="function")return m(Object.assign({disabled:n,focused:u,selected:r,style:p,label:a,value:s,inputValue:y,onMouseEnter:w=>f(w),onClick:w=>this.onClick(Object.assign({value:s,label:a,children:t},b),w)},b));const C={searchWords:y,sourceString:t,option:{highlightClassName:`${g}-keyword`}};return k.createElement("div",{className:x,onClick:w=>{this.onClick(Object.assign({value:s,label:a,children:t},b),w)},onMouseEnter:w=>f&&f(w),role:"option","aria-selected":r?"true":"false","aria-disabled":n?"true":"false",style:p},h?k.createElement("div",{className:S},k.createElement(oy,null)):null,Ii(t)?k.createElement("div",{className:`${g}-text`},this.renderOptionContent({children:t,config:C,inputValue:y,prefixCls:g})):t)}};sx.isSelectOption=!0;sx.propTypes={children:v.node,disabled:v.bool,value:v.oneOfType([v.string,v.number]),selected:v.bool,label:v.node,empty:v.bool,emptyContent:v.node,onSelect:v.func,focused:v.bool,showTick:v.bool,className:v.string,style:v.object,onMouseEnter:v.func,prefixCls:v.string,renderOptionItem:v.func,inputValue:v.string};sx.defaultProps={prefixCls:DQ.PREFIX_OPTION};const Qu=DQ.PREFIX,M2e=pj.SIZE,I2e=pj.POSITION,R2e=pj.STATUS;class ly extends Ve{constructor(e){super(e),this.onSelect=(n,s,r)=>{this.foundation.handleSelect(n,s)},this.onSearch=n=>{this.foundation.handleSearch(n)},this.onBlur=n=>this.foundation.handleBlur(n),this.onFocus=n=>this.foundation.handleFocus(n),this.onInputClear=()=>this.foundation.handleClear(),this.handleInputClick=n=>this.foundation.handleInputClick(n),this.foundation=new v2e(this.adapter);const t=1;this.state={dropdownMinWidth:null,inputValue:"",options:[],visible:!1,focusIndex:e.defaultActiveFirstOption?0:-1,selection:new Map,rePosKey:t},this.triggerRef=k.createRef(),this.optionsRef=k.createRef(),this.clickOutsideHandler=null,this.optionListId="",ns("triggerRender"in this.props&&typeof this.props.triggerRender=="function",`[Semi AutoComplete]
            - If you are using the following props: 'suffix', 'prefix', 'showClear', 'validateStatus', and 'size',
            please notice that they will be removed in the next major version.
            Please use 'componentProps' to retrieve these props instead.
            - If you are using 'onBlur', 'onFocus', please try to avoid using them and look for changes in the future.`)}get adapter(){const e={registerKeyDown:t=>{const n={onKeyDown:t};this.setState({keyboardEventSet:n})},unregisterKeyDown:t=>{this.setState({keyboardEventSet:{}})},updateFocusIndex:t=>{this.setState({focusIndex:t})},updateScrollTop:t=>{let n;n=`.${Qu}-option-selected`,t!==void 0&&(n=`.${Qu}-option:nth-child(${t+1})`);let s=document.querySelector(`#${Qu}-${this.optionListId} ${n}`);if(Array.isArray(s)&&(s=s[0]),s){const r=s.parentNode;r.scrollTop=s.offsetTop-r.offsetTop-r.clientHeight/2+s.clientHeight/2}}};return Object.assign(Object.assign(Object.assign({},super.adapter),e),{getTriggerWidth:()=>{const t=this.triggerRef.current;return t&&t.getBoundingClientRect().width},setOptionWrapperWidth:t=>{this.setState({dropdownMinWidth:t})},updateInputValue:t=>{this.setState({inputValue:t})},toggleListVisible:t=>{this.setState({visible:t})},updateOptionList:t=>{this.setState({options:t})},updateSelection:t=>{this.setState({selection:t})},notifySearch:t=>{this.props.onSearch(t)},notifyChange:t=>{this.props.onChange(t)},notifySelect:t=>{this.props.onSelect(t)},notifyDropdownVisibleChange:t=>{this.props.onDropdownVisibleChange(t)},notifyClear:()=>{this.props.onClear()},notifyFocus:t=>{this.props.onFocus(t)},notifyBlur:t=>{this.props.onBlur(t)},notifyKeyDown:t=>{this.props.onKeyDown(t)},rePositionDropdown:()=>{let{rePosKey:t}=this.state;t=t+1,this.setState({rePosKey:t})},registerClickOutsideHandler:t=>{const n=s=>{const r=this.optionsRef&&this.optionsRef.current,a=this.triggerRef&&this.triggerRef.current,o=vr.findDOMNode(r),l=s.target,c=s.composedPath&&s.composedPath()||[l];o&&(!o.contains(l)||!o.contains(l.parentNode))&&a&&!a.contains(l)&&!(c.includes(a)||c.includes(o))&&t(s)};this.clickOutsideHandler=n,document.addEventListener("mousedown",n,!1)},unregisterClickOutsideHandler:()=>{this.clickOutsideHandler&&document.removeEventListener("mousedown",this.clickOutsideHandler,!1)}})}componentDidMount(){this.foundation.init(),this.optionListId=Cl()}componentWillUnmount(){this.foundation.destroy()}componentDidUpdate(e,t){wi(this.props.data,e.data)||this.foundation.handleDataChange(this.props.data),this.props.value!==e.value&&this.foundation.handleValueChange(this.props.value)}renderInput(){const{size:e,prefix:t,insetLabel:n,insetLabelId:s,suffix:r,placeholder:a,style:o,className:l,showClear:c,disabled:u,triggerRender:h,validateStatus:d,autoFocus:p,value:f,id:g,clearIcon:m}=this.props,{inputValue:y,keyboardEventSet:b,selection:x}=this.state,C=Object.assign(Object.assign(Object.assign({style:o,className:typeof h=="function"?K(l):K({[Qu]:!0,[`${Qu}-disabled`]:u},l),onClick:this.handleInputClick,ref:this.triggerRef,id:g},b),{tabIndex:-1}),this.getDataAttr(this.props)),w={disabled:u,placeholder:a,autoFocus:p,onChange:this.onSearch,onClear:this.onInputClear,"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-describedby":this.props["aria-describedby"],"aria-required":this.props["aria-required"],suffix:r,prefix:t||n,insetLabelId:s,showClear:c,validateStatus:d,size:e,onBlur:this.onBlur,onFocus:this.onFocus,clearIcon:m};return k.createElement("div",Object.assign({},C),typeof h=="function"?k.createElement(yj,Object.assign({},w,{inputValue:typeof f<"u"?f:y,value:Array.from(x.values()),triggerRender:h,componentName:"AutoComplete",componentProps:Object.assign({},this.props)})):k.createElement(ll,Object.assign({},w,{value:typeof f<"u"?f:y})))}renderLoading(){const e=`${Qu}-loading-wrapper`;return k.createElement("div",{className:e},k.createElement(Cc,null))}renderOption(e,t){const{focusIndex:n}=this.state,s=t===n;return k.createElement(sx,Object.assign({showTick:!1,onSelect:(r,a)=>this.onSelect(r,t,a),focused:s,onMouseEnter:()=>this.foundation.handleOptionMouseEnter(t),key:e.key||e.label+e.value+t},e),e.label)}renderOptionList(){const{maxHeight:e,dropdownStyle:t,dropdownClassName:n,loading:s,emptyContent:r}=this.props,{options:a,dropdownMinWidth:o}=this.state,l=K({[`${Qu}-option-list`]:!0},n);let c;a.length===0?c=r:c=a.filter(h=>h.show).map((h,d)=>this.renderOption(h,d));const u=Object.assign({maxHeight:e,minWidth:o},t);return k.createElement("div",{className:l,role:"listbox",style:u,id:`${Qu}-${this.optionListId}`},s?this.renderLoading():c)}render(){const{position:e,motion:t,zIndex:n,mouseEnterDelay:s,mouseLeaveDelay:r,autoAdjustOverflow:a,stopPropagation:o,getPopupContainer:l}=this.props,{visible:c,rePosKey:u}=this.state,h=this.renderInput(),d=this.renderOptionList();return k.createElement(ss,{mouseEnterDelay:s,mouseLeaveDelay:r,autoAdjustOverflow:a,trigger:"custom",motion:t,visible:c,content:d,position:e,ref:this.optionsRef,zIndex:n,stopPropagation:o,getPopupContainer:l,rePosKey:u},h)}}ly.propTypes={"aria-label":v.string,"aria-labelledby":v.string,"aria-invalid":v.bool,"aria-errormessage":v.string,"aria-describedby":v.string,"aria-required":v.bool,autoFocus:v.bool,autoAdjustOverflow:v.bool,className:v.string,clearIcon:v.node,children:v.node,data:v.array,defaultOpen:v.bool,defaultValue:v.oneOfType([v.string,v.number]),defaultActiveFirstOption:v.bool,disabled:v.bool,dropdownMatchSelectWidth:v.bool,dropdownClassName:v.string,dropdownStyle:v.object,emptyContent:v.node,id:v.string,insetLabel:v.node,insetLabelId:v.string,onSearch:v.func,onSelect:v.func,onClear:v.func,onBlur:v.func,onFocus:v.func,onChange:v.func,onKeyDown:v.func,position:v.oneOf(I2e),placeholder:v.string,prefix:v.node,onChangeWithObject:v.bool,onSelectWithObject:v.bool,renderItem:v.func,renderSelectedItem:v.func,suffix:v.node,showClear:v.bool,size:v.oneOf(M2e),style:v.object,stopPropagation:v.oneOfType([v.bool,v.string]),maxHeight:v.oneOfType([v.string,v.number]),mouseEnterDelay:v.number,mouseLeaveDelay:v.number,motion:v.oneOfType([v.bool,v.func,v.object]),getPopupContainer:v.func,triggerRender:v.func,value:v.oneOfType([v.string,v.number]),validateStatus:v.oneOf(R2e),zIndex:v.number};ly.Option=sx;ly.__SemiComponentName__="AutoComplete";ly.defaultProps=os(ly.__SemiComponentName__,{stopPropagation:!0,motion:!0,zIndex:Pu.DEFAULT_Z_INDEX,position:"bottomLeft",data:[],showClear:!1,size:"default",onFocus:J,onSearch:J,onClear:J,onBlur:J,onSelect:J,onChange:J,onSelectWithObject:!1,onDropdownVisibleChange:J,defaultActiveFirstOption:!1,dropdownMatchSelectWidth:!0,loading:!1,maxHeight:300,validateStatus:"default",autoFocus:!1,emptyContent:null,onKeyDown:J});const L2e={PREFIX:`${ge}-avatar`},c0={SHAPE:["circle","square"],SIZE:["extra-extra-small","extra-small","small","default","medium","large","extra-large"],COLOR:["grey","red","pink","purple","violet","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","white"],OVERLAP_FROM:["start","end"]};class D2e extends tt{constructor(e){super(Object.assign({},e)),this.handleFocusVisible=t=>{const{target:n}=t;try{n.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch{ns(!0,"Warning: [Semi Avatar] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this._adapter.setFocusVisible(!1)},this.changeScale=()=>{const{gap:t}=this.getProps(),n=this._adapter.getAvatarNode(),s=n==null?void 0:n.firstChild,[r,a]=[(n==null?void 0:n.offsetWidth)||0,(s==null?void 0:s.offsetWidth)||0];if(r!==0&&a!==0&&t*2<r){const o=r-t*2>a?1:(r-t*2)/a;this._adapter.setScale(o)}}}init(){const{children:e}=this.getProps();typeof e=="string"&&this.changeScale()}destroy(){}handleImgLoadError(){const{onError:e}=this.getProps();(e?e():void 0)!==!1&&this._adapter.notifyImgState(!1)}handleEnter(e){this._adapter.notifyEnter(e)}handleLeave(e){this._adapter.notifyLeave(e)}}const F2e=i=>{let{gradientStart:e,gradientEnd:t}=i;const n=Cl();return k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"51",height:"52",viewBox:"0 0 51 52",fill:"none"},k.createElement("g",{filter:"url(#filter0_d_6_2)"},k.createElement("path",{d:"M40.4918 46.5592C44.6795 43.176 46.261 34.1333 47.5301 25.6141C49.5854 11.8168 39.6662 1 25.8097 1C11.2857 1 3 11.4279 3 25.3518C3 33.7866 6.29361 43.8947 10.4602 46.5592C12.5868 47.9192 12.5868 47.9051 25.8097 47.9192C38.3651 47.9282 38.5352 48.14 40.4918 46.5592Z",fill:`url(#${n})`})),k.createElement("defs",null,k.createElement("filter",{id:"filter0_d_6_2",x:"0.789215",y:"0.447304",width:"49.2216",height:"51.3549",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},k.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),k.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),k.createElement("feOffset",{dy:"1.65809"}),k.createElement("feGaussianBlur",{stdDeviation:"1.10539"}),k.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"}),k.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_6_2"}),k.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_6_2",result:"shape"})),k.createElement("linearGradient",{id:n,x1:"17.671",y1:"31.7392",x2:"17.671",y2:"47.9333",gradientUnits:"userSpaceOnUse"},k.createElement("stop",{stopColor:e}),k.createElement("stop",{offset:"1",stopColor:t}))))};var B2e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const j2e=c0.SIZE,N2e=c0.SHAPE,$2e=c0.COLOR,oi=L2e.PREFIX;let of=class extends Ve{constructor(e){super(e),this.handleFocusVisible=t=>{this.foundation.handleFocusVisible(t)},this.handleBlur=t=>{this.foundation.handleBlur()},this.getContent=()=>{const{children:t,onClick:n,imgAttr:s,src:r,srcSet:a,alt:o}=this.props,{isImgExist:l}=this.state;let c=t;const u=n!==Vr,h=r&&l,d={tabIndex:0,onKeyDown:this.handleKeyDown,onFocus:this.handleFocusVisible,onBlur:this.handleBlur};if(h){const p=u?`clickable Avatar: ${o}`:o,f=Object.assign(Object.assign({src:r,srcSet:a,onError:this.handleError},s),{className:K({[`${oi}-no-focus-visible`]:u})}),g=u?Object.assign(Object.assign({},f),d):f;c=k.createElement("img",Object.assign({alt:p},g))}else if(typeof t=="string"){const p=o??t,g={role:"img","aria-label":u?`clickable Avatar: ${p}`:p,className:K(`${oi}-label`,{[`${oi}-no-focus-visible`]:u})},m=u?Object.assign(Object.assign({},g),d):g,y={transform:`scale(${this.state.scale})`};c=k.createElement("span",{className:`${oi}-content`,style:y},k.createElement("span",Object.assign({},m,{"x-semi-prop":"children"}),t))}return c},this.renderBottomSlot=()=>{var t,n;if(!this.props.bottomSlot)return null;if(this.props.bottomSlot.render)return this.props.bottomSlot.render();const s=(t=this.props.bottomSlot.render)!==null&&t!==void 0?t:()=>{var r;const a={};return this.props.bottomSlot.bgColor&&(a.backgroundColor=this.props.bottomSlot.bgColor),this.props.bottomSlot.textColor&&(a.color=this.props.bottomSlot.textColor),k.createElement("span",{style:a,className:K(`${oi}-bottom_slot-shape_${this.props.bottomSlot.shape}`,`${oi}-bottom_slot-shape_${this.props.bottomSlot.shape}-${this.props.size}`,(r=this.props.bottomSlot.className)!==null&&r!==void 0?r:"")},this.props.bottomSlot.text)};return k.createElement("div",{className:K([`${oi}-bottom_slot`]),style:(n=this.props.bottomSlot.style)!==null&&n!==void 0?n:{}},s())},this.renderTopSlot=()=>{var t,n,s,r;if(!this.props.topSlot)return null;if(this.props.topSlot.render)return this.props.topSlot.render();const a={};return this.props.topSlot.textColor&&(a.color=this.props.topSlot.textColor),k.createElement("div",{style:(t=this.props.topSlot.style)!==null&&t!==void 0?t:{},className:K([`${oi}-top_slot-wrapper`,(n=this.props.topSlot.className)!==null&&n!==void 0?n:"",{[`${oi}-animated`]:this.props.contentMotion}])},k.createElement("div",{className:K([`${oi}-top_slot-bg`,`${oi}-top_slot-bg-${this.props.size}`])},k.createElement("div",{className:K([`${oi}-top_slot-bg-svg`,`${oi}-top_slot-bg-svg-${this.props.size}`])},k.createElement(F2e,{gradientStart:(s=this.props.topSlot.gradientStart)!==null&&s!==void 0?s:"var(--semi-color-primary)",gradientEnd:(r=this.props.topSlot.gradientEnd)!==null&&r!==void 0?r:"var(--semi-color-primary)"}))),k.createElement("div",{className:K([`${oi}-top_slot`])},k.createElement("div",{style:a,className:K([`${oi}-top_slot-content`,`${oi}-top_slot-content-${this.props.size}`])},this.props.topSlot.text)))},this.state={isImgExist:!0,hoverContent:"",focusVisible:!1,scale:1},this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.handleError=this.handleError.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.getContent=this.getContent.bind(this),this.avatarRef=k.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyImgState:e=>{this.setState({isImgExist:e})},notifyEnter:e=>{const{hoverMask:t}=this.props,n=t;this.setState({hoverContent:n},()=>{const{onMouseEnter:s}=this.props;s&&s(e)})},notifyLeave:e=>{this.setState({hoverContent:""},()=>{const{onMouseLeave:t}=this.props;t&&t(e)})},setFocusVisible:e=>{this.setState({focusVisible:e})},setScale:e=>{this.setState({scale:e})},getAvatarNode:()=>{var e;return(e=this.avatarRef)===null||e===void 0?void 0:e.current}})}componentDidMount(){this.foundation=new D2e(this.adapter),this.foundation.init()}componentDidUpdate(e){if(this.props.src&&this.props.src!==e.src){const t=new Image(0,0);t.src=this.props.src,t.onload=()=>{this.setState({isImgExist:!0})},t.onerror=()=>{this.setState({isImgExist:!1})},t.onabort=()=>{this.setState({isImgExist:!1})}}typeof this.props.children=="string"&&this.props.children!==e.children&&this.foundation.changeScale()}componentWillUnmount(){this.foundation.destroy()}onEnter(e){this.foundation.handleEnter(e)}onLeave(e){this.foundation.handleLeave(e)}handleError(){this.foundation.handleImgLoadError()}handleKeyDown(e){const{onClick:t}=this.props;switch(e.key){case"Enter":t(e),jn(e);break;case"Escape":e.target.blur();break}}render(){var e;const t=this.props,{shape:n,children:s,size:r,color:a,className:o,hoverMask:l,onClick:c,imgAttr:u,src:h,srcSet:d,style:p,alt:f,gap:g,bottomSlot:m,topSlot:y,border:b,contentMotion:x}=t,S=B2e(t,["shape","children","size","color","className","hoverMask","onClick","imgAttr","src","srcSet","style","alt","gap","bottomSlot","topSlot","border","contentMotion"]),{isImgExist:C,hoverContent:w,focusVisible:A}=this.state;let T={};c0.SIZE.includes(r)||(T={width:r,height:r}),T=Object.assign(Object.assign({},T),p);const E=m||y||b,P={onClick:c,onMouseEnter:this.onEnter,onMouseLeave:this.onLeave},O=h&&C,M=K(oi,{[`${oi}-${n}`]:n,[`${oi}-${r}`]:r,[`${oi}-${a}`]:a&&!O,[`${oi}-img`]:O,[`${oi}-focus`]:A,[`${oi}-animated`]:x},o),R=w?k.createElement("div",{className:`${oi}-hover`,"x-semi-prop":"hoverContent"},w):null;let j=k.createElement("span",Object.assign({},S,{style:E?{}:T,className:M},E?{}:P,{role:"listitem",ref:this.avatarRef}),this.getContent(),R);if(b){const I={};typeof b=="object"&&(b!=null&&b.color)&&(I.borderColor=b==null?void 0:b.color),j=k.createElement("div",{style:Object.assign({position:"relative"},T)},j,k.createElement("span",{style:I,className:K([`${oi}-additionalBorder`,`${oi}-additionalBorder-${r}`,{[`${oi}-${n}`]:n}])}),typeof this.props.border=="object"&&this.props.border.motion&&k.createElement("span",{style:I,className:K([`${oi}-additionalBorder`,`${oi}-additionalBorder-${r}`,{[`${oi}-${n}`]:n,[`${oi}-additionalBorder-animated`]:typeof this.props.border=="object"&&((e=this.props.border)===null||e===void 0?void 0:e.motion)}])}))}return E?k.createElement("span",Object.assign({className:K([`${oi}-wrapper`]),style:T},P),j,y&&["extra-small","small","default","medium","large","extra-large"].includes(r)&&n==="circle"&&this.renderTopSlot(),m&&["extra-small","small","default","medium","large","extra-large"].includes(r)&&this.renderBottomSlot()):j}};of.__SemiComponentName__="Avatar";of.defaultProps=os(of.__SemiComponentName__,{size:"medium",color:"grey",shape:"circle",gap:3,onClick:Vr,onMouseEnter:Vr,onMouseLeave:Vr});of.propTypes={children:v.node,color:v.oneOf($2e),shape:v.oneOf(N2e),size:v.oneOf(j2e),hoverMask:v.node,className:v.string,style:v.object,gap:v.number,imgAttr:v.object,src:v.string,srcSet:v.string,alt:v.string,onError:v.func,onClick:v.func,onMouseEnter:v.func,onMouseLeave:v.func,bottomSlot:v.shape({render:v.func,shape:v.oneOf(["circle","square"]),text:v.node,bgColor:v.string,textColor:v.string,className:v.string,style:v.object}),topSlot:v.shape({render:v.func,gradientStart:v.string,gradientEnd:v.string,text:v.node,textColor:v.string,className:v.string,style:v.object}),border:v.oneOfType([v.shape({color:v.string,motion:v.bool}),v.bool]),contentMotion:v.bool};of.elementType="Avatar";var z2e=4,H2e=.001,V2e=1e-7,U2e=10,O_=11,wS=1/(O_-1),W2e=typeof Float32Array=="function";function NQ(i,e){return 1-3*e+3*i}function $Q(i,e){return 3*e-6*i}function zQ(i){return 3*i}function Zw(i,e,t){return((NQ(e,t)*i+$Q(e,t))*i+zQ(e))*i}function HQ(i,e,t){return 3*NQ(e,t)*i*i+2*$Q(e,t)*i+zQ(e)}function G2e(i,e,t,n,s){var r,a,o=0;do a=e+(t-e)/2,r=Zw(a,n,s)-i,r>0?t=a:e=a;while(Math.abs(r)>V2e&&++o<U2e);return a}function K2e(i,e,t,n){for(var s=0;s<z2e;++s){var r=HQ(e,t,n);if(r===0)return e;var a=Zw(e,t,n)-i;e-=a/r}return e}function X2e(i){return i}var Y2e=function(e,t,n,s){if(!(0<=e&&e<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&n===s)return X2e;for(var r=W2e?new Float32Array(O_):new Array(O_),a=0;a<O_;++a)r[a]=Zw(a*wS,e,n);function o(l){for(var c=0,u=1,h=O_-1;u!==h&&r[u]<=l;++u)c+=wS;--u;var d=(l-r[u])/(r[u+1]-r[u]),p=c+d*wS,f=HQ(p,e,n);return f>=H2e?K2e(l,p,e,n):f===0?p:G2e(l,c,c+wS,e,n)}return function(c){return c===0?0:c===1?1:Zw(o(c),t,s)}};const nM=Xe(Y2e);function X6(i,e,t){return Math.min(Math.max(i,e),t)}function q2e(i){const e=/\(([^)]+)\)/.exec(i);return e?e[1].split(",").map(t=>parseFloat(t)):[]}function AS(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;const t=X6(i,1,10),n=X6(e,.1,2);return s=>s===0||s===1?s:-t*Math.pow(2,10*(s-1))*Math.sin((s-1-n/(Math.PI*2)*Math.asin(1/t))*(Math.PI*2)/n)}const sM=(()=>{const i=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],e={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],AS],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],(n,s)=>r=>1-AS(n,s)(1-r)],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],(n,s)=>r=>r<.5?AS(n,s)(r*2)/2:1-AS(n,s)(r*-2+2)/2]},t={linear:[.25,.25,.75,.75]};for(const n of Object.keys(e))e[n].forEach((s,r)=>{t["ease"+n+i[r]]=s});return t})();function Y6(i){if(typeof i=="function")return i;!i||typeof i!="string"?i="linear":i=i.trim();let e=i.split("(")[0];const t=q2e(i);let n;return e==="cubic-bezier"||e==="cubicBezier"?nM(...t.length?t:sM.linear):((!e||typeof e!="string"||typeof e=="string"&&sM[e]==null)&&(e="linear"),n=sM[e],typeof n=="function"?n(...t):t.length?nM(...t):nM(...n))}let Z2e=class{constructor(){this._eventMap=new Map}on(e,t){return e&&typeof t=="function"&&(this._eventMap.has(e)||this._eventMap.set(e,[]),this._eventMap.get(e).push(t)),this}once(e,t){var n=this;if(e&&typeof t=="function"){const s=function(){t(...arguments),n.off(e,s)};this.on(e,s)}}off(e,t){if(e)if(typeof t=="function"){const n=this._eventMap.get(e);if(Array.isArray(n)&&n.length){let s=-1;for(;(s=n.findIndex(r=>r===t))>-1;)n.splice(s,1)}}else t==null&&this._eventMap.delete(e);return this}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return this._eventMap.has(e)?(this._eventMap.get(e).forEach(r=>r(...n)),!0):!1}};function Cb(i){return!!(i&&typeof i=="object"&&(i.duration>0||typeof i.easing=="string"||typeof i.easing=="function"))}function J2e(i,e,t,n,s){for(const r of Object.keys(e)){const a=e[r],o=typeof a=="number"?a:a.val;if(!(typeof a=="object"&&a.done)){if(Cb(a)&&n&&s&&a.duration){if(a.duration+n<=s||o!==i[r])return!1}else if(typeof t[r]=="number"&&t[r]!==0)return!1;if(i[r]!==o)return!1}}return!0}function kS(i){const e={};for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=typeof i[t]=="number"?i[t]:i[t].val);return e}const ug=[0,0];function q6(i,e,t,n,s,r,a){const o=-s*(e-n),l=-r*t,c=o+l,u=t+c*i,h=e+u*i;return Math.abs(u)<a&&Math.abs(h-n)<a?(ug[0]=n,ug[1]=0,ug):(ug[0]=h,ug[1]=u,ug)}function Q2e(i){const e={},t=i&&Object.keys(i)||[];for(const n of t)e[n]=0;return e}const eMe={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},tMe=Object.assign(Object.assign({},eMe.default),{precision:.01});function iMe(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Cb(e)){const n=Y6(e.easing),s=typeof e.duration=="number"&&e.duration>0?e.duration:1e3;e=Object.assign(Object.assign({},e),{easing:n,duration:s})}let t=Object.assign(Object.assign(Object.assign({},tMe),e),{done:!1});if(i&&typeof i=="object"&&"val"in i){if(Cb(i)){const n=Y6(i.easing),s=typeof i.duration=="number"&&i.duration>0?i.duration:parseInt(e.duration)||1e3;i=Object.assign(Object.assign({},i),{easing:n,duration:s})}t=Object.assign(Object.assign({},t),i)}else t=Object.assign(Object.assign({},t),{val:i});return t}const X0=()=>Date.now(),eh=1e3/60;class VQ extends Z2e{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),this._props=Object.assign({},e),this._config=Object.assign({},t),this.initStates()}_wrapConfig(e,t){t=t&&typeof t=="object"?t:this._config;const n={};for(const s of Object.keys(e))n[s]=iMe(e[s],t);return n}initStates(e,t){e=e&&typeof e=="object"?e:this._props,t=t&&typeof t=="object"?t:this._config;const{from:n,to:s}=e;if(this._from={},n)for(const o of Object.keys(n))this._from[o]=typeof n[o]=="object"&&n[o].val?n[o].val:n[o];this._to=this._wrapConfig(s,t),this._delay=parseInt(t.delay)||0;const r=this._from&&kS(this._from)||kS(this._to),a=Q2e(r);this._currentStyle=Object.assign({},r),this._currentVelocity=Object.assign({},a),this._lastIdealStyle=Object.assign({},r),this._lastIdealVelocity=Object.assign({},a),this.resetPlayStates(),this._frameCount=0,this._prevTime=0}animate(){this._timer==null&&(this._timer=requestAnimationFrame(e=>{const t=X0();if(J2e(this._currentStyle,this._to,this._currentVelocity,this._startedTime||t,t)||this._ended||this._stopped){this._wasAnimating&&!this._ended&&!this._stopped&&(this._timer=setTimeout(()=>{clearTimeout(this._timer),this._timer=null,this._ended=!0,this.emit("rest",this.getCurrentStates())},eh)),this.resetPlayStates();return}this._started||(this._started=!0,this.emit("start",this.getCurrentStates())),this._stopped=!1,this._paused=!1,this._wasAnimating=!0,this._startedTime===0&&(this._startedTime=t);const n=t,s=n-this._prevTime;this._prevTime=n,n-this._startedTime<this._delay&&(this._timer=null,this.animate());const r={},a={},o={},l={},c=this._to&&Object.keys(this._to)||[];for(const u of c){const h=this._to[u];this._accumulatedTime[u]=typeof this._accumulatedTime[u]!="number"?s:this._accumulatedTime[u]+s;const d=this._from[u]!=null&&typeof this._from[u]=="object"?this._from[u].val:this._from[u],p=h.val;if(typeof h=="number")o[u]=h,l[u]=0,r[u]=h,a[u]=0;else{let f=this._lastIdealStyle[u],g=this._lastIdealVelocity[u];if(Cb(this._config)||Cb(h)){const{easing:m,duration:y}=h;f=d+m((n-this._startedTime)/y)*(p-d),n>=this._startedTime+y&&(f=p,h.done=!0),r[u]=f,o[u]=f}else if(p!=null&&p===this._currentStyle[u])o[u]=p,l[u]=0,r[u]=p,a[u]=0;else{const m=(this._accumulatedTime[u]-Math.floor(this._accumulatedTime[u]/eh)*eh)/eh,y=Math.floor(this._accumulatedTime[u]/eh);for(let S=0;S<y;S++)[f,g]=q6(eh/1e3,f,g,h.val,h.tension,h.friction,h.precision);const[b,x]=q6(eh/1e3,f,g,h.val,h.tension,h.friction,h.precision);o[u]=f+(b-f)*m,l[u]=g+(x-g)*m,r[u]=f,a[u]=g,this._accumulatedTime[u]-=y*eh}}}this._timer=null,this._currentStyle=Object.assign({},o),this._currentVelocity=Object.assign({},l),this._lastIdealStyle=Object.assign({},r),this._lastIdealVelocity=Object.assign({},a),this._destroyed||(this.emit("frame",this.getCurrentStates()),this.animate())}))}start(){this._prevTime=X0(),this._startedTime=X0(),this.animate()}end(){this._ended||(this._ended=!0,this._currentStyle=this.getFinalStates(),this.emit("frame",this.getFinalStates()),this.emit("rest",this.getFinalStates())),this.destroy()}pause(){this._paused||(this._pausedTime=X0(),this._paused=!0,this.emit("pause",this.getCurrentStates()),this.destroy(),this._destroyed=!1)}resume(){if(this._started&&this._paused){const t=X0()-this._pausedTime;this._paused=!1,this._startedTime+=t,this._prevTime+=t,this._pausedTime=0,this.emit("resume",this.getCurrentStates()),this.animate()}}stop(){this.destroy(),this._stopped||(this._stopped=!0,this.emit("stop",this.getInitialStates()),this.initStates())}destroy(){cancelAnimationFrame(this._timer),clearTimeout(this._timer),this._timer=null,this._destroyed=!0}resetPlayStates(){this._started=!1,this._stopped=!1,this._ended=!1,this._paused=!1,this._destroyed=!1,this._timer=null,this._wasAnimating=!1,this._accumulatedTime={},this._startedTime=0,this._pausedTime=0}reset(){this.destroy(),this.initStates()}reverse(){this.destroy();const e=Object.assign({},this._props),[t,n]=[e.to,e.from];e.from=t,e.to=n,this._props=Object.assign({},e),this.initStates()}getCurrentStates(){return Object.assign({},this._currentStyle)}getInitialStates(){return Object.assign({},kS(this._props.from))}getFinalStates(){return Object.assign({},kS(this._props.to))}}const UQ={PREFIX:`${ge}-button`},rx={sizes:["default","small","large"],iconPositions:["left","right"],htmlTypes:["button","reset","submit"],btnTypes:["primary","secondary","tertiary","warning","danger"],themes:["solid","borderless","light","outline"],DEFAULT_ICON_SIZE:"default",DEFAULT_ICON_POSITION:"left"},nMe={SIZE:["extra-small","small","default","large","extra-large","custom"],ICON_PREFIX:"semi-icon-"};var sMe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const rMe=rx.sizes,{htmlTypes:aMe,btnTypes:oMe}=rx;let ax=class extends H.PureComponent{render(){const e=this.props,{children:t,block:n,htmlType:s,loading:r,circle:a,className:o,style:l,disabled:c,size:u,theme:h,type:d,prefixCls:p,iconPosition:f}=e,g=sMe(e,["children","block","htmlType","loading","circle","className","style","disabled","size","theme","type","prefixCls","iconPosition"]),m=Object.assign(Object.assign({disabled:c},_n(g,["x-semi-children-alias"])),{className:K(p,{[`${p}-${d}`]:!c&&d,[`${p}-disabled`]:c,[`${p}-size-large`]:u==="large",[`${p}-size-small`]:u==="small",[`${p}-light`]:h==="light",[`${p}-block`]:n,[`${p}-circle`]:a,[`${p}-borderless`]:h==="borderless",[`${p}-outline`]:h==="outline",[`${p}-${d}-disabled`]:c&&d},o),type:s,"aria-disabled":c}),y={};return o&&o.includes("-with-icon")||(y["x-semi-prop"]=this.props["x-semi-children-alias"]||"children"),k.createElement("button",Object.assign({},m,{onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,style:l}),k.createElement("span",Object.assign({className:K(`${p}-content`,this.props.contentClassName),onClick:b=>c&&b.stopPropagation()},y),t))}};ax.defaultProps={disabled:!1,size:"default",type:"primary",theme:"light",block:!1,htmlType:"button",onMouseDown:Vr,onClick:Vr,onMouseEnter:Vr,onMouseLeave:Vr,prefixCls:UQ.PREFIX};ax.propTypes={children:v.node,disabled:v.bool,prefixCls:v.string,style:v.object,size:v.oneOf(rMe),type:v.oneOf(oMe),block:v.bool,onClick:v.func,onMouseDown:v.func,circle:v.bool,loading:v.bool,htmlType:v.oneOf(aMe),theme:v.oneOf(rx.themes),className:v.string,onMouseEnter:v.func,onMouseLeave:v.func,"aria-label":v.string,contentClassName:v.string};var lMe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const cMe=nMe.SIZE;class Ml extends H.PureComponent{render(){const e=this.props,{children:t,iconPosition:n,iconSize:s,iconStyle:r,style:a,icon:o,noHorizontalPadding:l,theme:c,className:u,prefixCls:h,loading:d}=e,p=lMe(e,["children","iconPosition","iconSize","iconStyle","style","icon","noHorizontalPadding","theme","className","prefixCls","loading"]),f=Object.assign({},a);Array.isArray(l)?(l.includes("left")&&(f.paddingLeft=0),l.includes("right")&&(f.paddingRight=0)):l===!0?(f.paddingLeft=0,f.paddingRight=0):typeof l=="string"&&(l==="left"&&(f.paddingLeft=0),l==="right"&&(f.paddingRight=0));let g=null,m=null;d&&!p.disabled?m=k.createElement(BQ,null):k.isValidElement(o)&&(m=o);const y=K({[`${h}-content-left`]:n==="right",[`${h}-content-right`]:n==="left"}),b=this.props["x-semi-children-alias"]||"children",x=t!=null?k.createElement("span",{className:y,"x-semi-prop":b},t):null;n==="left"?g=k.createElement(k.Fragment,null,m,x):g=k.createElement(k.Fragment,null,x,m);const S=K(u,`${h}-with-icon`,{[`${h}-with-icon-only`]:x==null||x==="",[`${h}-loading`]:d});return k.createElement(ax,Object.assign({},p,{className:S,theme:c,style:f}),g)}}Ml.defaultProps={iconPosition:rx.DEFAULT_ICON_POSITION,prefixCls:UQ.PREFIX,loading:!1,noHorizontalPadding:!1,onMouseEnter:J,onMouseLeave:J};Ml.elementType="IconButton";Ml.propTypes={iconStyle:v.object,style:v.object,loading:v.bool,prefixCls:v.string,icon:v.oneOfType([v.object,v.string,v.node]),iconSize:v.oneOf(cMe),noHorizontalPadding:v.oneOfType([v.bool,v.string,v.array]),children:v.node,theme:v.string,iconPosition:v.oneOf(rx.iconPositions),className:v.string,onMouseEnter:v.func,onMouseLeave:v.func};const uMe={PREFIX:`${ge}-banner`},hMe={TYPE:["info","success","danger","warning"]};class _j extends tt{constructor(e){super(Object.assign(Object.assign({},_j.defaultAdapter),e))}removeBanner(e){this._adapter.notifyClose(e),this._adapter.setVisible()}}const na=uMe.PREFIX,dMe=hMe.TYPE;class Sd extends Ve{constructor(e){super(e),this.remove=t=>{t&&t.stopPropagation(),this.foundation.removeBanner(t)},this.state={visible:!0},ns("target"in this.props,"[Semi Banner] 'target' has been deprecated, please write JSX directly instead.")}get adapter(){return Object.assign(Object.assign({},super.adapter),{setVisible:()=>{this.setState({visible:!1})},notifyClose:e=>{const{onClose:t}=this.props;t(e)}})}componentDidMount(){this.foundation=new _j(this.adapter),this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}renderCloser(){const{closeIcon:e}=this.props;return e===null?e:k.createElement(Ml,{className:`${na}-close`,onClick:this.remove,icon:e||k.createElement(Rc,{"x-semi-prop":"closeIcon","aria-hidden":!0}),theme:"borderless",size:"small",type:"tertiary","aria-label":"Close"})}renderIcon(){const{type:e,icon:t}=this.props;let s={warning:k.createElement(ix,{size:"large","aria-label":"warning"}),success:k.createElement(WE,{size:"large","aria-label":"success"}),info:k.createElement(wl,{size:"large","aria-label":"info"}),danger:k.createElement(tx,{size:"large","aria-label":"danger"})}[e];const r=K({[`${na}-icon`]:!0});return typeof t<"u"&&(s=t),s?k.createElement("div",{className:r,"x-semi-prop":"icon"},s):null}render(){const{children:e,type:t,className:n,style:s,bordered:r,title:a,description:o,fullMode:l}=this.props,{visible:c}=this.state,u=K(na,n,{[`${na}-${t}`]:t,[`${na}-full`]:l,[`${na}-in-container`]:!l,[`${na}-bordered`]:!l&&r});return c?k.createElement("div",Object.assign({className:u,style:s,role:"alert"},this.getDataAttr(this.props)),k.createElement("div",{className:`${na}-content-wrapper`},k.createElement("div",{className:`${na}-content`},this.renderIcon(),k.createElement("div",{className:`${na}-content-body`},a?k.createElement(On.Title,{heading:5,className:`${na}-title`,component:"div","x-semi-prop":"title"},a):null,o?k.createElement(On.Paragraph,{className:`${na}-description`,component:"div","x-semi-prop":"description"},o):null)),this.renderCloser()),e?k.createElement("div",{className:`${na}-extra`,"x-semi-prop":"children"},e):null):null}}Sd.propTypes={fullMode:v.bool,type:v.oneOf(dMe),title:v.node,description:v.node,icon:v.node,closeIcon:v.node,children:v.node,style:v.object,className:v.string,onClose:v.func,bordered:v.bool};Sd.defaultProps={onClose:()=>{},type:"info",fullMode:!0};let it=class extends k.PureComponent{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e)}render(){const e=Object.assign({},this.props),t=!!e.icon,n=!!e.loading,s=!!e.disabled;return t||n&&!s?k.createElement(Ml,Object.assign({},e)):k.createElement(ax,Object.assign({},e))}};it.__SemiComponentName__="Button";it.propTypes=Object.assign(Object.assign({},ax.propTypes),Ml.propTypes);it.defaultProps=os(it.__SemiComponentName__);it.elementType="Button";const WQ={PREFIX:`${ge}-card`},pMe={SHADOWS:["hover","always"],TYPE:["grid"]};var fMe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const Y0=WQ.PREFIX;class uu extends H.PureComponent{render(){const e=this.props,{avatar:t,className:n,description:s,style:r,title:a}=e,o=fMe(e,["avatar","className","description","style","title"]),l=K(`${Y0}-meta`,n),c=t&&k.createElement("div",{className:`${Y0}-meta-avatar`},t),u=a&&k.createElement("div",{className:`${Y0}-meta-wrapper-title`},a),h=s&&k.createElement("div",{className:`${Y0}-meta-wrapper-description`},s),d=a||s?k.createElement("div",{className:`${Y0}-meta-wrapper`},u,h):null;return k.createElement("div",Object.assign({},o,{className:l,style:r}),c,d)}}uu.propTypes={avatar:v.node,className:v.string,description:v.node,style:v.object,title:v.node};const vj={PREFIX:`${ge}-skeleton`};var gMe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const mMe=c0.SIZE,yMe=c0.SHAPE,XE=i=>e=>t=>k.createElement(e,Object.assign({type:i},t));class u0 extends H.PureComponent{render(){const e=this.props,{prefixCls:t,className:n,type:s,size:r,shape:a}=e,o=gMe(e,["prefixCls","className","type","size","shape"]),l=K(n,`${t}-${s}`,{[`${t}-${s}-${r}`]:s.toUpperCase()==="AVATAR"},{[`${t}-${s}-${a}`]:s.toUpperCase()==="AVATAR"});return k.createElement("div",Object.assign({className:l},o))}}u0.propTypes={type:v.string,prefixCls:v.string,style:v.object,className:v.string,size:v.oneOf(mMe),shape:v.oneOf(yMe)};u0.defaultProps={prefixCls:vj.PREFIX,size:"medium",shape:"circle"};const _Me=XE("avatar")(u0),vMe=XE("image")(u0),gL=XE("title")(u0),bMe=XE("button")(u0);let bj=class extends H.PureComponent{render(){const{prefixCls:e,className:t,style:n,rows:s}=this.props,r=K(t,`${e}-paragraph`);return k.createElement("ul",{className:r,style:n},[...Array(s)].map((a,o)=>k.createElement("li",{key:o})))}};bj.propTypes={rows:v.number,prefixCls:v.string,style:v.object,className:v.string};bj.defaultProps={prefixCls:vj.PREFIX,rows:4};var xMe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const Z6=vj.PREFIX;class yl extends H.PureComponent{render(){const e=this.props,{placeholder:t,active:n,children:s,className:r,loading:a,style:o}=e,l=xMe(e,["placeholder","active","children","className","loading","style"]),c=K(Z6,{[`${Z6}-active`]:!!n},r);let u;return a?u=k.createElement("div",Object.assign({className:c,style:o},l,{"x-semi-prop":"placeholder"}),t):u=s,u}}yl.Avatar=_Me;yl.Title=gL;yl.Button=bMe;yl.Paragraph=bj;yl.Image=vMe;yl.defaultProps={loading:!0};yl.propTypes={active:v.bool,placeholder:v.node,style:v.object,className:v.string,loading:v.bool,children:v.node};const SMe={PREFIX:`${ge}-space`},up={ALIGN_SET:["start","end","center","baseline"],SPACING_LOOSE:"loose",SPACING_MEDIUM:"medium",SPACING_TIGHT:"tight"},CMe="Symbol(react.fragment)",mL=i=>{let e=[];return k.Children.forEach(i,t=>{t!=null&&(Array.isArray(t)?e=e.concat(mL(t)):H.isValidElement(t)&&t.type&&t.type.toString()===CMe&&t.props?e=e.concat(mL(t.props.children)):e.push(t))}),e},No=SMe.PREFIX;class Nt extends H.PureComponent{render(){const{children:e=null,style:t,className:n,spacing:s,wrap:r,align:a,vertical:o}=this.props,l=r&&o?!1:r,c=Object.assign({},t);let u="",h="";Ii(s)?(u=s,h=s):Sa(s)?(c.rowGap=s,c.columnGap=s):Vge(s)&&(Ii(s[0])?u=s[0]:Sa(s[0])&&(c.columnGap=`${s[0]}px`),Ii(s[1])?h=s[1]:Sa(s[1])&&(c.rowGap=`${s[1]}px`));const d=K(No,n,{[`${No}-align-${a}`]:a,[`${No}-vertical`]:o,[`${No}-horizontal`]:!o,[`${No}-wrap`]:l,[`${No}-tight-horizontal`]:u===up.SPACING_TIGHT,[`${No}-tight-vertical`]:h===up.SPACING_TIGHT,[`${No}-medium-horizontal`]:u===up.SPACING_MEDIUM,[`${No}-medium-vertical`]:h===up.SPACING_MEDIUM,[`${No}-loose-horizontal`]:u===up.SPACING_LOOSE,[`${No}-loose-vertical`]:h===up.SPACING_LOOSE}),p=mL(e),f=Sl(this.props);return k.createElement("div",Object.assign({},f,{className:d,style:c,"x-semi-prop":"children"}),p)}}Nt.propTypes={wrap:v.bool,align:v.oneOf(up.ALIGN_SET),vertical:v.bool,spacing:v.oneOfType([v.string,v.number,v.array]),children:v.node,style:v.object,className:v.string};Nt.defaultProps={vertical:!1,wrap:!1,spacing:"tight",align:"center"};var wMe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const js=WQ.PREFIX;class xi extends H.PureComponent{constructor(){super(...arguments),this.renderHeader=()=>{const{title:e,headerExtraContent:t,header:n,headerLine:s,headerStyle:r}=this.props,a=K(`${js}-header`,{[`${js}-header-bordered`]:!!s}),o=K(`${js}-header-wrapper`),l=K(`${js}-header-wrapper-title`,{[`${js}-header-wrapper-spacing`]:!!t});return n||t||e?k.createElement("div",{style:r,className:a},n||k.createElement("div",{className:o},t&&k.createElement("div",{className:`${js}-header-wrapper-extra`,"x-semi-prop":"headerExtraContent"},t),e&&k.createElement("div",{className:l},Ii(e)?k.createElement(On.Title,{heading:6,ellipsis:{showTooltip:!0,rows:1},"x-semi-prop":"title"},e):e))):null},this.renderCover=()=>{const{cover:e}=this.props,t=K(`${js}-cover`);return e&&k.createElement("div",{className:t,"x-semi-prop":"cover"},e)},this.renderBody=()=>{const{bodyStyle:e,children:t,actions:n,loading:s}=this.props,r=K(`${js}-body`),a=K(`${js}-body-actions`),o=K(`${js}-body-actions-item`),l=k.createElement("div",null,k.createElement(yl.Title,null),k.createElement("br",null),k.createElement(yl.Paragraph,{rows:3}));return k.createElement("div",{style:e,className:r},t&&k.createElement(yl,{placeholder:l,loading:s,active:!0},t),Array.isArray(n)&&k.createElement("div",{className:a},k.createElement(Nt,{spacing:12},n.map((c,u)=>k.createElement("div",{key:u,className:o,"x-semi-prop":`actions.${u}`},c)))))},this.renderFooter=()=>{const{footer:e,footerLine:t,footerStyle:n}=this.props,s=K(`${js}-footer`,{[`${js}-footer-bordered`]:t});return e&&k.createElement("div",{style:n,className:s,"x-semi-prop":"footer"},e)}}render(){const e=this.props,{bordered:t,shadows:n,style:s,className:r}=e,a=wMe(e,["bordered","shadows","style","className"]),o=_n(a,["actions","bodyStyle","cover","headerExtraContent","footer","footerLine","footerStyle","header","headerLine","headerStyle","loading","title"]),l=K(js,r,{[`${js}-bordered`]:t,[`${js}-shadows`]:n,[`${js}-shadows-${n}`]:n});return k.createElement("div",Object.assign({},o,{"aria-busy":this.props.loading,className:l,style:s}),this.renderHeader(),this.renderCover(),this.renderBody(),this.renderFooter())}}xi.Meta=uu;xi.propTypes={actions:v.array,bodyStyle:v.object,bordered:v.bool,children:v.node,className:v.string,cover:v.node,footer:v.node,footerLine:v.bool,footerStyle:v.object,header:v.node,headerExtraContent:v.node,headerLine:v.bool,headerStyle:v.object,loading:v.bool,shadows:v.oneOf(pMe.SHADOWS),style:v.object,title:v.node,"aria-label":v.string};xi.defaultProps={bordered:!0,footerLine:!1,headerLine:!0,loading:!1};const Ni={CAROUSEL:`${ge}-carousel`,CAROUSEL_INDICATOR:`${ge}-carousel-indicator`,CAROUSEL_INDICATOR_LINE:`${ge}-carousel-indicator-line`,CAROUSEL_INDICATOR_DOT:`${ge}-carousel-indicator-dot`,CAROUSEL_INDICATOR_COLUMNAR:`${ge}-carousel-indicator-columnar`,CAROUSEL_INDICATOR_INACTIVE:`${ge}-carousel-indicator-inactive`,CAROUSEL_INDICATOR_ACTIVE:`${ge}-carousel-indicator-active`,CAROUSEL_CONTENT:`${ge}-carousel-content`,CAROUSEL_ARROW:`${ge}-carousel-arrow`},Jw={DEFAULT_ACTIVE_INDEX:0,DEFAULT_INTERVAL:2e3,DEFAULT_SPEED:300},fa={ANIMATION_MAP:["slide","fade"],DIRECTION:["left","right"],TYPE_MAP:["columnar","line","dot"],THEME_MAP:["dark","primary","light"],POSITION_MAP:["left","center","right"],ARROW_MAP:["always","hover"],SIZE:["small","medium"],TRIGGER:["click","hover"]};class AMe extends tt{constructor(e){super(Object.assign({},e)),this._interval=null,this._forcePlay=!1}setForcePlay(e){this._forcePlay=e}play(e){this._interval&&clearInterval(this._interval),this._interval=setInterval(()=>{this.next()},e)}stop(){this._interval&&clearInterval(this._interval)}goTo(e){const{activeIndex:t}=this.getStates(),n=this.getValidIndex(e);this._adapter.setIsReverse(t>n),this.getIsControlledComponent()?this._notifyChange(n):(this._notifyChange(n),this.handleNewActiveIndex(n))}next(){this.stop();const{activeIndex:e}=this.getStates(),t=this.getValidIndex(e+1);this._adapter.setIsReverse(!1),this.getIsControlledComponent()?this._notifyChange(t):(this._notifyChange(t),this.handleNewActiveIndex(t)),this.handleAutoPlay()}prev(){this.stop();const{activeIndex:e}=this.getStates(),t=this.getValidIndex(e-1);this._adapter.setIsReverse(!0),this.getIsControlledComponent()?this._notifyChange(t):(this._notifyChange(t),this.handleNewActiveIndex(t)),this.handleAutoPlay()}destroy(){this._unregisterInterval()}_unregisterInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_notifyChange(e){const{activeIndex:t,isInit:n}=this.getStates();n&&this._adapter.setIsInit(!1),t!==e&&(this._adapter.setPreActiveIndex(t),this._adapter.notifyChange(e,t))}getValidIndex(e){const{children:t}=this.getStates();return(e+t.length)%t.length}getSwitchingTime(){const{autoPlay:e,speed:t}=this.getProps();return typeof e==="boolean"?Jw.DEFAULT_INTERVAL+t:As(e)?ne(e,"interval",Jw.DEFAULT_INTERVAL)+t:t}getIsControlledComponent(){return this._isInProps("activeIndex")}handleAutoPlay(){const{autoPlay:e}=this.getProps(),{children:t}=this.getStates();t.length>1&&(e===!0||As(e)||this._forcePlay)&&this.play(this.getSwitchingTime())}handleKeyDown(e){e.key==="ArrowLeft"&&this.prev(),e.key==="ArrowRight"&&this.next()}onIndicatorChange(e){const{activeIndex:t}=this.getStates();this._adapter.setIsReverse(t>e),this._notifyChange(e),this.getIsControlledComponent()||this.handleNewActiveIndex(e)}handleNewActiveIndex(e){const{activeIndex:t}=this.getStates();t!==e&&this._adapter.setNewActiveIndex(e)}getDefaultActiveIndex(){let e;const t=this.getProps();return"activeIndex"in t?e=t.activeIndex:"defaultActiveIndex"in t&&(e=t.defaultActiveIndex),e}}var kMe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};class GQ extends k.PureComponent{constructor(){super(...arguments),this.onIndicatorChange=e=>{this.props.onIndicatorChange(e)},this.handleIndicatorClick=e=>{const{trigger:t}=this.props;t==="click"&&this.onIndicatorChange(e)},this.handleIndicatorHover=e=>{const{trigger:t}=this.props;t==="hover"&&this.onIndicatorChange(e)}}renderIndicatorContent(){const{total:e,theme:t,size:n,activeIndex:s}=this.props,r=[];for(let a=0;a<e;a++)r.push(k.createElement("span",{key:a,"data-index":a,className:K([`${Ni.CAROUSEL_INDICATOR}-item`],{[`${Ni.CAROUSEL_INDICATOR}-item-active`]:a===s,[`${Ni.CAROUSEL_INDICATOR}-item-${t}`]:t,[`${Ni.CAROUSEL_INDICATOR}-item-${n}`]:n}),onClick:()=>this.handleIndicatorClick(a),onMouseEnter:()=>this.handleIndicatorHover(a)}));return r}render(){const e=this.props,{type:t,size:n,theme:s,style:r,className:a,position:o}=e,l=kMe(e,["type","size","theme","style","className","position"]),c=K(a,{[Ni.CAROUSEL_INDICATOR]:!0,[`${Ni.CAROUSEL_INDICATOR}-${t}`]:t,[`${Ni.CAROUSEL_INDICATOR}-${o}`]:o}),u=this.renderIndicatorContent();return k.createElement("div",Object.assign({className:c,style:r},Sl(l)),u)}}GQ.propTypes={activeKey:v.number,className:v.string,position:v.oneOf(fa.POSITION_MAP),size:v.oneOf(fa.SIZE),style:v.object,theme:v.oneOf(fa.THEME_MAP),total:v.number,onIndicatorChange:v.func,type:v.oneOf(fa.TYPE_MAP),trigger:v.oneOf(fa.TRIGGER)};class TMe extends k.PureComponent{constructor(){super(...arguments),this.renderLeftIcon=()=>ne(this.props,"arrowProps.leftArrow.children",k.createElement(oj,{"aria-label":"Previous index",size:"inherit"})),this.renderRightIcon=()=>ne(this.props,"arrowProps.rightArrow.children",k.createElement(xd,{"aria-label":"Next index",size:"inherit"}))}render(){const{type:e,theme:t,prev:n,next:s}=this.props,r=K({[Ni.CAROUSEL_ARROW]:!0,[`${Ni.CAROUSEL_ARROW}-${t}`]:t,[`${Ni.CAROUSEL_ARROW}-hover`]:e==="hover"}),a=K({[`${Ni.CAROUSEL_ARROW}-prev`]:!0,[`${Ni.CAROUSEL_ARROW}-${t}`]:t}),o=K({[`${Ni.CAROUSEL_ARROW}-next`]:!0,[`${Ni.CAROUSEL_ARROW}-${t}`]:t});return k.createElement("div",{className:r},k.createElement("div",Object.assign({className:a,onClick:n},ne(this.props,"arrowProps.leftArrow.props"),{"x-semi-prop":"arrowProps.leftArrow.children"}),this.renderLeftIcon()),k.createElement("div",Object.assign({className:o,onClick:s},ne(this.props,"arrowProps.rightArrow.props"),{"x-semi-prop":"arrowProps.rightArrow.children"}),this.renderRightIcon()))}}class xj extends Ve{constructor(e){super(e),this.play=()=>(this.foundation.setForcePlay(!0),this.foundation.handleAutoPlay()),this.stop=()=>(this.foundation.setForcePlay(!1),this.foundation.stop()),this.goTo=n=>this.foundation.goTo(n),this.prev=()=>this.foundation.prev(),this.next=()=>this.foundation.next(),this.handleAutoPlay=()=>{this.foundation.getIsControlledComponent()||this.foundation.handleAutoPlay()},this.handleMouseEnter=()=>{const{autoPlay:n}=this.props;(n===!0||typeof n=="object"&&n.hoverToPause)&&this.foundation.stop()},this.handleMouseLeave=()=>{const{autoPlay:n}=this.props;(typeof n!="object"||n.hoverToPause)&&!this.foundation.getIsControlledComponent()&&this.foundation.handleAutoPlay()},this.onIndicatorChange=n=>this.foundation.onIndicatorChange(n),this.getChildren=()=>{const{children:n}=this.props;return H.Children.toArray(n).filter(s=>k.isValidElement(s))},this.getValidIndex=n=>this.foundation.getValidIndex(n),this.renderChildren=()=>{const{speed:n,animation:s}=this.props,{activeIndex:r,children:a,preIndex:o,isInit:l}=this.state;return k.createElement(k.Fragment,null,a.map((c,u)=>{const h=u===r,d=u===this.getValidIndex(r-1),p=u===this.getValidIndex(r+1),f={transitionTimingFunction:"ease",transitionDuration:`${n}ms`,animationTimingFunction:"ease",animationDuration:`${n}ms`};return k.cloneElement(c,{style:Object.assign(Object.assign({},c.props.style),f),className:K(c.props.className,{[`${Ni.CAROUSEL_CONTENT}-item-prev`]:d,[`${Ni.CAROUSEL_CONTENT}-item-next`]:p,[`${Ni.CAROUSEL_CONTENT}-item-current`]:h,[`${Ni.CAROUSEL_CONTENT}-item`]:!0,[`${Ni.CAROUSEL_CONTENT}-item-active`]:h,[`${Ni.CAROUSEL_CONTENT}-item-slide-in`]:s==="slide"&&!l&&h,[`${Ni.CAROUSEL_CONTENT}-item-slide-out`]:s==="slide"&&!l&&u===o})})}))},this.renderIndicator=()=>{const{children:n,activeIndex:s}=this.state,{showIndicator:r,indicatorType:a,theme:o,indicatorPosition:l,indicatorSize:c,trigger:u}=this.props,h=K({[Ni.CAROUSEL_INDICATOR]:!0});return r&&n.length>1?k.createElement("div",{className:h},k.createElement(GQ,{type:a,total:n.length,activeIndex:s,position:l,trigger:u,size:c,theme:o,onIndicatorChange:this.onIndicatorChange})):null},this.renderArrow=()=>{const{children:n}=this.state,{showArrow:s,arrowType:r,theme:a,arrowProps:o}=this.props;return s&&n.length>1?k.createElement(TMe,{type:r,theme:a,prev:this.prev,next:this.next,arrowProps:o}):null},this.foundation=new AMe(this.adapter);const t=this.foundation.getDefaultActiveIndex();this.state={activeIndex:t,children:this.getChildren(),preIndex:t,isReverse:!1,isInit:!0}}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyChange:(e,t)=>{this.props.onChange(e,t)},setNewActiveIndex:e=>{this.setState({activeIndex:e})},setPreActiveIndex:e=>{this.setState({preIndex:e})},setIsReverse:e=>{this.setState({isReverse:e})},setIsInit:e=>{this.setState({isInit:e})}})}static getDerivedStateFromProps(e,t){const n={};return!Ms(e.activeIndex)&&e.activeIndex!==t.activeIndex&&(n.activeIndex=e.activeIndex),n}componentDidMount(){this.handleAutoPlay()}componentDidUpdate(e,t,n){const s=k.Children.toArray(e.children).map(a=>H.isValidElement(a)?a.key:null),r=k.Children.toArray(this.props.children).map(a=>H.isValidElement(a)?a.key:null);wi(s,r)||this.setState({children:this.getChildren()})}componentWillUnmount(){this.foundation.destroy()}render(){const{animation:e,className:t,style:n,slideDirection:s}=this.props,{isReverse:r}=this.state,a=K(t,{[Ni.CAROUSEL]:!0});return k.createElement("div",Object.assign({className:a,style:n,onMouseEnter:Hw(this.handleMouseEnter,400),onMouseLeave:Hw(this.handleMouseLeave,400)},this.getDataAttr(this.props)),k.createElement("div",{className:K([`${Ni.CAROUSEL_CONTENT}-${e}`],{[`${Ni.CAROUSEL_CONTENT}`]:!0,[`${Ni.CAROUSEL_CONTENT}-reverse`]:s==="left"?r:!r}),"x-semi-prop":"children"},this.renderChildren()),this.renderIndicator(),this.renderArrow())}}xj.propTypes={activeIndex:v.number,animation:v.oneOf(fa.ANIMATION_MAP),arrowProps:v.object,autoPlay:v.oneOfType([v.bool,v.object]),className:v.string,defaultActiveIndex:v.number,indicatorPosition:v.oneOf(fa.POSITION_MAP),indicatorSize:v.oneOf(fa.SIZE),indicatorType:v.oneOf(fa.TYPE_MAP),theme:v.oneOf(fa.THEME_MAP),onChange:v.func,arrowType:v.oneOf(fa.ARROW_MAP),showArrow:v.bool,showIndicator:v.bool,slideDirection:v.oneOf(fa.DIRECTION),speed:v.number,style:v.object,trigger:v.oneOf(fa.TRIGGER)};xj.defaultProps={children:[],animation:"slide",autoPlay:!0,arrowType:"always",defaultActiveIndex:Jw.DEFAULT_ACTIVE_INDEX,indicatorPosition:"center",indicatorSize:"small",indicatorType:"dot",theme:"light",onChange:()=>{},showArrow:!0,showIndicator:!0,slideDirection:"left",speed:Jw.DEFAULT_SPEED,trigger:"click"};function EMe(i,e,t,n){for(var s=i.length,r=t+(n?1:-1);n?r--:++r<s;)if(e(i[r],r,i))return r;return-1}var Sj=EMe;function PMe(i){return i!==i}var OMe=PMe;function MMe(i,e,t){for(var n=t-1,s=i.length;++n<s;)if(i[n]===e)return n;return-1}var IMe=MMe,RMe=Sj,LMe=OMe,DMe=IMe;function FMe(i,e,t){return e===e?DMe(i,e,t):RMe(i,LMe,t)}var Cj=FMe,BMe=N3,J6=1/0,jMe=17976931348623157e292;function NMe(i){if(!i)return i===0?i:0;if(i=BMe(i),i===J6||i===-J6){var e=i<0?-1:1;return e*jMe}return i===i?i:0}var $Me=NMe,zMe=$Me;function HMe(i){var e=zMe(i),t=e%1;return e===e?t?e-t:e:0}var h0=HMe,VMe=e0;function UMe(i,e){return VMe(e,function(t){return i[t]})}var WMe=UMe,GMe=WMe,KMe=zf;function XMe(i){return i==null?[]:GMe(i,KMe(i))}var YMe=XMe,qMe=Cj,ZMe=Ic,JMe=H3,QMe=h0,eIe=YMe,tIe=Math.max;function iIe(i,e,t,n){i=ZMe(i)?i:eIe(i),t=t&&!n?QMe(t):0;var s=i.length;return t<0&&(t=tIe(s+t,0)),JMe(i)?t<=s&&i.indexOf(e,t)>-1:!!s&&qMe(i,e,t)>-1}var nIe=iIe;const Qw=Xe(nIe);var sIe=Cj;function rIe(i,e){var t=i==null?0:i.length;return!!t&&sIe(i,e,0)>-1}var aIe=rIe;function oIe(i,e,t){for(var n=-1,s=i==null?0:i.length;++n<s;)if(t(e,i[n]))return!0;return!1}var lIe=oIe,cIe=aQ,uIe=aIe,hIe=lIe,dIe=e0,pIe=s0,fIe=lQ,gIe=200;function mIe(i,e,t,n){var s=-1,r=uIe,a=!0,o=i.length,l=[],c=e.length;if(!o)return l;t&&(e=dIe(e,pIe(t))),n?(r=hIe,a=!1):e.length>=gIe&&(r=fIe,a=!1,e=new cIe(e));e:for(;++s<o;){var u=i[s],h=t==null?u:t(u);if(u=n||u!==0?u:0,a&&h===h){for(var d=c;d--;)if(e[d]===h)continue e;l.push(u)}else r(e,h,n)||l.push(u)}return l}var KQ=mIe,yIe=KQ,_Ie=ij,vIe=$E,Q6=X3,bIe=vIe(function(i,e){return Q6(i)?yIe(i,_Ie(e,1,Q6,!0)):[]}),xIe=bIe;const e9=Xe(xIe);var SIe=IE,CIe=pQ,wIe=t0;function AIe(i,e,t){for(var n=-1,s=e.length,r={};++n<s;){var a=e[n],o=SIe(i,a);t(o,a)&&CIe(r,wIe(a,i),o)}return r}var kIe=AIe;function TIe(i,e){return i!=null&&e in Object(i)}var EIe=TIe,PIe=t0,OIe=Y1,MIe=_s,IIe=Z1,RIe=K3,LIe=i0;function DIe(i,e,t){e=PIe(e,i);for(var n=-1,s=e.length,r=!1;++n<s;){var a=LIe(e[n]);if(!(r=i!=null&&t(i,a)))break;i=i[a]}return r||++n!=s?r:(s=i==null?0:i.length,!!s&&RIe(s)&&IIe(a,s)&&(MIe(i)||OIe(i)))}var FIe=DIe,BIe=EIe,jIe=FIe;function NIe(i,e){return i!=null&&jIe(i,e,BIe)}var XQ=NIe,$Ie=kIe,zIe=XQ;function HIe(i,e){return $Ie(i,e,function(t,n){return zIe(i,n)})}var VIe=HIe,UIe=VIe,WIe=rQ,GIe=WIe(function(i,e){return i==null?{}:UIe(i,e)}),KIe=GIe;const lf=Xe(KIe);var XIe=Mc,YIe=La,qIe="[object Boolean]";function ZIe(i){return i===!0||i===!1||YIe(i)&&XIe(i)==qIe}var JIe=ZIe;const wj=Xe(JIe),GC={PREFIX:`${ge}-checkbox`,INNER:`${ge}-checkbox-inner`,TEXT:`${ge}-checkbox-text`,INPUT:`${ge}-checkbox-input`,CHECKED:`${ge}-checkbox-checked`,DISABLED:`${ge}-checkbox-disabled`,BUTTON:`${ge}-checkbox-button`,WRAPPER:""},QIe={PREFIX:`${ge}-checkboxGroup`,INNER:`${ge}-checkboxGroup-inner`,TEXT:`${ge}-checkboxGroup-text`,INPUT:`${ge}-checkboxGroup-input`,CHECKED:`${ge}-checkboxGroup-checked`,DISABLED:`${ge}-checkboxGroup-disabled`},sc={DIRECTION_SET:["horizontal","vertical"],TYPE_DEFAULT:"default",TYPE_CARD:"card",TYPE_PURECARD:"pureCard",DEFAULT_DIRECTION:"vertical"};class eRe extends tt{constructor(e){super(Object.assign({},e)),this.clickState=!1,this.handleFocusVisible=t=>{const{target:n}=t;try{if(this.clickState){this.clickState=!1;return}n.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch{ns(!0,"Warning: [Semi Checkbox] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this.clickState=!1,this._adapter.setFocusVisible(!1)}}init(){const{children:e,extra:t,extraId:n,addonId:s}=this.getProps();e&&!s&&this._adapter.setAddonId(),t&&!n&&this._adapter.setExtraId()}notifyChange(e,t){const n=this._adapter.generateEvent(e,t);this._adapter.notifyChange(n)}handleChange(e){if(this.getProp("disabled"))return;if((e==null?void 0:e.type)==="click"&&(this.clickState=!0),this._adapter.focusCheckboxEntity(),this._adapter.getIsInGroup()){this._adapter.getGroupDisabled()||this.handleChangeInGroup(e);return}const r=!this.getState("checked");this._isControlledComponent("checked")?this.notifyChange(r,e):(this.setChecked(r),this.notifyChange(r,e))}handleChangeInGroup(e){const{value:t}=this.getProps(),r=!this._adapter.getGroupValue().includes(t),a=this._adapter.generateEvent(r,e);this._adapter.notifyChange(a),this._adapter.notifyGroupChange(a)}handleEnterPress(e){jd(e)&&this.handleChange(e)}setChecked(e){this._adapter.setNativeControlChecked(e)}destroy(){}}const Aj=k.createContext({});class YE extends H.PureComponent{blur(){this.inputEntity.blur()}focus(){const{preventScroll:e}=this.props;this.inputEntity.focus({preventScroll:e})}render(){const{indeterminate:e,checked:t,disabled:n,prefixCls:s,name:r,isPureCardType:a,addonId:o,extraId:l,focusInner:c,onInputFocus:u,onInputBlur:h}=this.props,d=s||GC.PREFIX,p=K({[`${d}-inner`]:!0,[`${d}-inner-checked`]:!!t,[`${d}-inner-pureCardType`]:a},GC.WRAPPER),f=K({[`${d}-inner-display`]:!0,[`${d}-focus`]:c,[`${d}-focus-border`]:c&&!t}),g=t?k.createElement(UPe,null):e?k.createElement(HPe,null):null,m={type:"checkbox","aria-label":this.props["aria-label"],"aria-disabled":n,"aria-checked":t,"aria-labelledby":o,"aria-describedby":l||this.props["aria-describedby"],"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-required":this.props["aria-required"],className:GC.INPUT,onChange:J,checked:t,disabled:n,onFocus:u,onBlur:h};return r&&(m.name=r),k.createElement("span",{className:p},k.createElement("input",Object.assign({},m,{ref:y=>{this.inputEntity=y}})),k.createElement("span",{className:f},g))}}YE.contextType=Aj;YE.propTypes={"aria-describedby":v.string,"aria-errormessage":v.string,"aria-invalid":v.bool,"aria-labelledby":v.string,"aria-required":v.bool,checked:v.bool,disabled:v.bool,onChange:v.func,children:v.node,grouped:v.bool,value:v.any,isPureCardType:v.bool,addonId:v.string,extraId:v.string,focusInner:v.bool,onInputFocus:v.func,onInputBlur:v.func,preventScroll:v.bool};YE.defaultProps={onChange:J};class Ou extends Ve{get adapter(){return Object.assign(Object.assign({},super.adapter),{setNativeControlChecked:e=>{this.setState({checked:e})},notifyChange:e=>{const{onChange:t}=this.props;t&&t(e)},generateEvent:(e,t)=>{const{props:n}=this;return{target:Object.assign(Object.assign({},n),{checked:e}),stopPropagation:()=>{t.stopPropagation()},preventDefault:()=>{t.preventDefault()},nativeEvent:{stopImmediatePropagation:()=>{t.nativeEvent&&typeof t.nativeEvent.stopImmediatePropagation=="function"&&t.nativeEvent.stopImmediatePropagation()}}}},getIsInGroup:()=>this.isInGroup(),getGroupValue:()=>this.context&&this.context.checkboxGroup.value||[],notifyGroupChange:e=>{this.context.checkboxGroup.onChange(e)},getGroupDisabled:()=>this.context&&this.context.checkboxGroup.disabled,setAddonId:()=>{this.setState({addonId:Cl({prefix:"addon"})})},setExtraId:()=>{this.setState({extraId:Cl({prefix:"extra"})})},setFocusVisible:e=>{this.setState({focusVisible:e})},focusCheckboxEntity:()=>{this.focus()}})}constructor(e){super(e),this.handleChange=n=>this.foundation.handleChange(n),this.handleEnterPress=n=>this.foundation.handleEnterPress(n),this.handleFocusVisible=n=>{this.foundation.handleFocusVisible(n)},this.handleBlur=n=>{this.foundation.handleBlur()};const t=!1;this.state={checked:e.checked||e.defaultChecked||t,addonId:e.addonId,extraId:e.extraId,focusVisible:!1},this.checkboxEntity=null,this.foundation=new eRe(this.adapter)}componentDidUpdate(e){this.props.checked!==e.checked&&(Hr(this.props.checked)?this.foundation.setChecked(!1):wj(this.props.checked)&&this.foundation.setChecked(this.props.checked))}isInGroup(){return!!(this.context&&this.context.checkboxGroup&&"value"in this.props)}focus(){this.checkboxEntity&&this.checkboxEntity.focus()}blur(){this.checkboxEntity&&this.checkboxEntity.blur()}render(){const{disabled:e,style:t,prefixCls:n,className:s,indeterminate:r,children:a,onMouseEnter:o,onMouseLeave:l,extra:c,value:u,role:h,tabIndex:d,id:p,type:f}=this.props,{checked:g,addonId:m,extraId:y,focusVisible:b}=this.state,x={checked:g,disabled:e},S=this.isInGroup();if(S){if(this.context.checkboxGroup.value){const R=(this.context.checkboxGroup.value||[]).includes(u);x.checked=R}this.context.checkboxGroup.disabled&&(x.disabled=this.context.checkboxGroup.disabled||this.props.disabled);const{isCardType:O,isPureCardType:M}=this.context.checkboxGroup;x.isCardType=O,x.isPureCardType=M,x.name=this.context.checkboxGroup.name}else x.isPureCardType=f===sc.TYPE_PURECARD,x.isCardType=f===sc.TYPE_CARD||x.isPureCardType;const C=n||GC.PREFIX,w=x.isCardType||x.isPureCardType,A=K(C,{[`${C}-disabled`]:x.disabled,[`${C}-indeterminate`]:r,[`${C}-checked`]:x.checked,[`${C}-unChecked`]:!x.checked,[`${C}-cardType`]:x.isCardType,[`${C}-cardType_disabled`]:x.disabled&&x.isCardType,[`${C}-cardType_enable`]:!(x.disabled&&x.isCardType),[`${C}-cardType_checked`]:x.isCardType&&x.checked&&!x.disabled,[`${C}-cardType_checked_disabled`]:x.isCardType&&x.checked&&x.disabled,[s]:!!s,[`${C}-focus`]:b&&w}),T=K(`${C}-extra`,{[`${C}-cardType_extra_noChildren`]:x.isCardType&&!a});S&&this.context.checkboxGroup.name;const E=this.props["x-semi-children-alias"]||"children",P=()=>!a&&!c?null:k.createElement("div",{className:`${C}-content`},a?k.createElement("span",{id:m,className:`${C}-addon`,"x-semi-prop":E},a):null,c?k.createElement("div",{id:y,className:T,"x-semi-prop":"extra"},c):null);return k.createElement("span",Object.assign({role:h,tabIndex:d,style:t,className:A,id:p,onMouseEnter:o,onMouseLeave:l,onClick:this.handleChange,onKeyPress:this.handleEnterPress,"aria-labelledby":this.props["aria-labelledby"]},this.getDataAttr(this.props)),k.createElement(YE,Object.assign({},this.props,x,{addonId:a&&m,extraId:c&&y,isPureCardType:x.isPureCardType,ref:O=>{this.checkboxEntity=O},focusInner:b&&!w,onInputFocus:this.handleFocusVisible,onInputBlur:this.handleBlur})),P())}}Ou.contextType=Aj;Ou.propTypes={"aria-describedby":v.string,"aria-errormessage":v.string,"aria-invalid":v.bool,"aria-labelledby":v.string,"aria-required":v.bool,checked:v.bool,defaultChecked:v.bool,disabled:v.bool,indeterminate:v.bool,onChange:v.func,value:v.any,style:v.object,className:v.string,prefixCls:v.string,onMouseEnter:v.func,onMouseLeave:v.func,extra:v.node,index:v.number,"aria-label":v.string,tabIndex:v.number,preventScroll:v.bool,type:v.string};Ou.defaultProps={defaultChecked:!1,indeterminate:!1,onChange:J,onMouseEnter:J,onMouseLeave:J,type:"default"};Ou.elementType="Checkbox";class kj extends tt{static get checkboxGroupDefaultAdapter(){return{}}constructor(e){super(Object.assign(Object.assign({},kj.checkboxGroupDefaultAdapter),e))}init(){const{defaultValue:e,value:t}=this.getProps();typeof e<"u"&&!Array.isArray(e)&&ns(!0,"Warning: [Semi CheckboxGroup] defaultValue should be an Array"),typeof t<"u"&&!Array.isArray(t)&&ns(!0,"Warning: [Semi CheckboxGroup] value should be an Array")}notifyChange(e){this._adapter.notifyChange(e)}handleChange(e){const t=this.getState("value");let n=[];Array.isArray(t)||(n=[t]),e.target.checked?n=[...t,e.target.value]:n=t.filter((r,a)=>r!==e.target.value),"value"in this.getProps()?this.notifyChange(n):(this._adapter.updateGroupValue(n),this.notifyChange(n))}getFormatName(){return this.getProp("name")||"default"}handlePropValueChange(e){Array.isArray(e)?this._adapter.updateGroupValue(e):(typeof e>"u"&&this._adapter.updateGroupValue([]),ns(!0,"Warning: [Semi CheckboxGroup] value should be an Array"))}destroy(){}}class Tj extends Ve{get adapter(){return Object.assign(Object.assign({},super.adapter),{updateGroupValue:e=>{this.setState({value:e})},notifyChange:e=>{this.props.onChange&&this.props.onChange(e)}})}constructor(e){super(e),this.state={value:e.value||e.defaultValue},this.foundation=new kj(this.adapter),this.onChange=this.onChange.bind(this)}componentDidMount(){this.foundation.init()}componentDidUpdate(e){wi(e.value,this.props.value)||this.foundation.handlePropValueChange(this.props.value)}componentWillUnmount(){this.foundation.destroy()}onChange(e){this.foundation.handleChange(e)}render(){const{children:e,options:t,prefixCls:n,direction:s,className:r,id:a,style:o,type:l,disabled:c}=this.props,u=l===sc.TYPE_PURECARD,h=l===sc.TYPE_CARD||u,d=n||QIe.PREFIX,p=K({[d]:!0,[`${d}-wrapper`]:!0,[`${d}-${s}`]:s,[`${d}-${s}-cardType`]:s&&h,[`${d}-${s}-pureCardType`]:s&&u},r),f=this.state.value.slice();let g;return t?g=(t||[]).map((m,y)=>typeof m=="string"?k.createElement(Ou,{role:"listitem",key:y,disabled:this.props.disabled,value:m,prefixCls:n},m):k.createElement(Ou,{role:"listitem",key:y,disabled:m.disabled||this.props.disabled,value:m.value,prefixCls:n,extra:m.extra,className:m.className,style:m.style,onChange:m.onChange},m.label)):e&&(g=k.Children.toArray(e).map((m,y)=>k.cloneElement(m,{key:y,role:"listitem"}))),k.createElement("div",Object.assign({id:a,role:"list","aria-label":this.props["aria-label"],className:p,style:o,"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"]},this.getDataAttr(this.props)),k.createElement(Aj.Provider,{value:{checkboxGroup:{onChange:this.onChange,value:f,disabled:this.props.disabled,name:this.foundation.getFormatName(),isCardType:h,isPureCardType:u}}},g))}}Tj.propTypes={"aria-describedby":v.string,"aria-errormessage":v.string,"aria-invalid":v.bool,"aria-labelledby":v.string,"aria-required":v.bool,defaultValue:v.array,disabled:v.bool,name:v.string,options:v.array,value:v.array,onChange:v.func,children:v.node,prefixCls:v.string,direction:v.oneOf(sc.DIRECTION_SET),className:v.string,type:v.oneOf([sc.TYPE_DEFAULT,sc.TYPE_CARD,sc.TYPE_PURECARD]),style:v.object};Tj.defaultProps={disabled:!1,onChange:()=>{},type:sc.TYPE_DEFAULT,defaultValue:[],direction:sc.DEFAULT_DIRECTION};class tRe extends Ou{}tRe.Group=Tj;function yL(){return yL=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},yL.apply(null,arguments)}function iRe(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,dL(i,e)}var t9=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function nRe(i,e){return!!(i===e||t9(i)&&t9(e))}function sRe(i,e){if(i.length!==e.length)return!1;for(var t=0;t<i.length;t++)if(!nRe(i[t],e[t]))return!1;return!0}function Ap(i,e){e===void 0&&(e=sRe);var t,n=[],s,r=!1;function a(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return r&&t===this&&e(o,n)||(s=i.apply(this,o),r=!0,t=this,n=o),s}return a}var rRe=typeof performance=="object"&&typeof performance.now=="function",i9=rRe?function(){return performance.now()}:function(){return Date.now()};function n9(i){cancelAnimationFrame(i.id)}function aRe(i,e){var t=i9();function n(){i9()-t>=e?i.call(null):s.id=requestAnimationFrame(n)}var s={id:requestAnimationFrame(n)};return s}var rM=-1;function s9(i){if(i===void 0&&(i=!1),rM===-1||i){var e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",document.body.appendChild(e),rM=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return rM}var hg=null;function r9(i){if(i===void 0&&(i=!1),hg===null||i){var e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",t.direction="rtl";var n=document.createElement("div"),s=n.style;return s.width="100px",s.height="100px",e.appendChild(n),document.body.appendChild(e),e.scrollLeft>0?hg="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?hg="negative":hg="positive-ascending"),document.body.removeChild(e),hg}return hg}var oRe=150,lRe=function(e,t){return e};function YQ(i){var e,t=i.getItemOffset,n=i.getEstimatedTotalSize,s=i.getItemSize,r=i.getOffsetForIndexAndAlignment,a=i.getStartIndexForOffset,o=i.getStopIndexForStartIndex,l=i.initInstanceProps,c=i.shouldResetStyleCacheOnItemSizeChange,u=i.validateProps;return e=function(h){iRe(d,h);function d(f){var g;return g=h.call(this,f)||this,g._instanceProps=l(g.props,H6(g)),g._outerRef=void 0,g._resetIsScrollingTimeoutId=null,g.state={instance:H6(g),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof g.props.initialScrollOffset=="number"?g.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},g._callOnItemsRendered=void 0,g._callOnItemsRendered=Ap(function(m,y,b,x){return g.props.onItemsRendered({overscanStartIndex:m,overscanStopIndex:y,visibleStartIndex:b,visibleStopIndex:x})}),g._callOnScroll=void 0,g._callOnScroll=Ap(function(m,y,b){return g.props.onScroll({scrollDirection:m,scrollOffset:y,scrollUpdateWasRequested:b})}),g._getItemStyle=void 0,g._getItemStyle=function(m){var y=g.props,b=y.direction,x=y.itemSize,S=y.layout,C=g._getItemStyleCache(c&&x,c&&S,c&&b),w;if(C.hasOwnProperty(m))w=C[m];else{var A=t(g.props,m,g._instanceProps),T=s(g.props,m,g._instanceProps),E=b==="horizontal"||S==="horizontal",P=b==="rtl",O=E?A:0;C[m]=w={position:"absolute",left:P?void 0:O,right:P?O:void 0,top:E?0:A,height:E?"100%":T,width:E?T:"100%"}}return w},g._getItemStyleCache=void 0,g._getItemStyleCache=Ap(function(m,y,b){return{}}),g._onScrollHorizontal=function(m){var y=m.currentTarget,b=y.clientWidth,x=y.scrollLeft,S=y.scrollWidth;g.setState(function(C){if(C.scrollOffset===x)return null;var w=g.props.direction,A=x;if(w==="rtl")switch(r9()){case"negative":A=-x;break;case"positive-descending":A=S-b-x;break}return A=Math.max(0,Math.min(A,S-b)),{isScrolling:!0,scrollDirection:C.scrollOffset<A?"forward":"backward",scrollOffset:A,scrollUpdateWasRequested:!1}},g._resetIsScrollingDebounced)},g._onScrollVertical=function(m){var y=m.currentTarget,b=y.clientHeight,x=y.scrollHeight,S=y.scrollTop;g.setState(function(C){if(C.scrollOffset===S)return null;var w=Math.max(0,Math.min(S,x-b));return{isScrolling:!0,scrollDirection:C.scrollOffset<w?"forward":"backward",scrollOffset:w,scrollUpdateWasRequested:!1}},g._resetIsScrollingDebounced)},g._outerRefSetter=function(m){var y=g.props.outerRef;g._outerRef=m,typeof y=="function"?y(m):y!=null&&typeof y=="object"&&y.hasOwnProperty("current")&&(y.current=m)},g._resetIsScrollingDebounced=function(){g._resetIsScrollingTimeoutId!==null&&n9(g._resetIsScrollingTimeoutId),g._resetIsScrollingTimeoutId=aRe(g._resetIsScrolling,oRe)},g._resetIsScrolling=function(){g._resetIsScrollingTimeoutId=null,g.setState({isScrolling:!1},function(){g._getItemStyleCache(-1,null)})},g}d.getDerivedStateFromProps=function(g,m){return cRe(g,m),u(g),null};var p=d.prototype;return p.scrollTo=function(g){g=Math.max(0,g),this.setState(function(m){return m.scrollOffset===g?null:{scrollDirection:m.scrollOffset<g?"forward":"backward",scrollOffset:g,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},p.scrollToItem=function(g,m){m===void 0&&(m="auto");var y=this.props,b=y.itemCount,x=y.layout,S=this.state.scrollOffset;g=Math.max(0,Math.min(g,b-1));var C=0;if(this._outerRef){var w=this._outerRef;x==="vertical"?C=w.scrollWidth>w.clientWidth?s9():0:C=w.scrollHeight>w.clientHeight?s9():0}this.scrollTo(r(this.props,g,m,S,this._instanceProps,C))},p.componentDidMount=function(){var g=this.props,m=g.direction,y=g.initialScrollOffset,b=g.layout;if(typeof y=="number"&&this._outerRef!=null){var x=this._outerRef;m==="horizontal"||b==="horizontal"?x.scrollLeft=y:x.scrollTop=y}this._callPropsCallbacks()},p.componentDidUpdate=function(){var g=this.props,m=g.direction,y=g.layout,b=this.state,x=b.scrollOffset,S=b.scrollUpdateWasRequested;if(S&&this._outerRef!=null){var C=this._outerRef;if(m==="horizontal"||y==="horizontal")if(m==="rtl")switch(r9()){case"negative":C.scrollLeft=-x;break;case"positive-ascending":C.scrollLeft=x;break;default:var w=C.clientWidth,A=C.scrollWidth;C.scrollLeft=A-w-x;break}else C.scrollLeft=x;else C.scrollTop=x}this._callPropsCallbacks()},p.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&n9(this._resetIsScrollingTimeoutId)},p.render=function(){var g=this.props,m=g.children,y=g.className,b=g.direction,x=g.height,S=g.innerRef,C=g.innerElementType,w=g.innerTagName,A=g.itemCount,T=g.itemData,E=g.itemKey,P=E===void 0?lRe:E,O=g.layout,M=g.outerElementType,R=g.outerTagName,j=g.style,I=g.useIsScrolling,D=g.width,z=this.state.isScrolling,$=b==="horizontal"||O==="horizontal",V=$?this._onScrollHorizontal:this._onScrollVertical,L=this._getRangeToRender(),Y=L[0],ae=L[1],W=[];if(A>0)for(var ce=Y;ce<=ae;ce++)W.push(H.createElement(m,{data:T,key:P(ce,T),index:ce,isScrolling:I?z:void 0,style:this._getItemStyle(ce)}));var he=n(this.props,this._instanceProps);return H.createElement(M||R||"div",{className:y,onScroll:V,ref:this._outerRefSetter,style:yL({position:"relative",height:x,width:D,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:b},j)},H.createElement(C||w||"div",{children:W,ref:S,style:{height:$?"100%":he,pointerEvents:z?"none":void 0,width:$?he:"100%"}}))},p._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var g=this.props.itemCount;if(g>0){var m=this._getRangeToRender(),y=m[0],b=m[1],x=m[2],S=m[3];this._callOnItemsRendered(y,b,x,S)}}if(typeof this.props.onScroll=="function"){var C=this.state,w=C.scrollDirection,A=C.scrollOffset,T=C.scrollUpdateWasRequested;this._callOnScroll(w,A,T)}},p._getRangeToRender=function(){var g=this.props,m=g.itemCount,y=g.overscanCount,b=this.state,x=b.isScrolling,S=b.scrollDirection,C=b.scrollOffset;if(m===0)return[0,0,0,0];var w=a(this.props,C,this._instanceProps),A=o(this.props,w,C,this._instanceProps),T=!x||S==="backward"?Math.max(1,y):1,E=!x||S==="forward"?Math.max(1,y):1;return[Math.max(0,w-T),Math.max(0,Math.min(m-1,A+E)),w,A]},d}(H.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var cRe=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},uRe=50,tm=function(e,t,n){var s=e,r=s.itemSize,a=n.itemMetadataMap,o=n.lastMeasuredIndex;if(t>o){var l=0;if(o>=0){var c=a[o];l=c.offset+c.size}for(var u=o+1;u<=t;u++){var h=r(u);a[u]={offset:l,size:h},l+=h}n.lastMeasuredIndex=t}return a[t]},hRe=function(e,t,n){var s=t.itemMetadataMap,r=t.lastMeasuredIndex,a=r>0?s[r].offset:0;return a>=n?qQ(e,t,r,0,n):dRe(e,t,Math.max(0,r),n)},qQ=function(e,t,n,s,r){for(;s<=n;){var a=s+Math.floor((n-s)/2),o=tm(e,a,t).offset;if(o===r)return a;o<r?s=a+1:o>r&&(n=a-1)}return s>0?s-1:0},dRe=function(e,t,n,s){for(var r=e.itemCount,a=1;n<r&&tm(e,n,t).offset<s;)n+=a,a*=2;return qQ(e,t,Math.min(n,r-1),Math.floor(n/2),s)},a9=function(e,t){var n=e.itemCount,s=t.itemMetadataMap,r=t.estimatedItemSize,a=t.lastMeasuredIndex,o=0;if(a>=n&&(a=n-1),a>=0){var l=s[a];o=l.offset+l.size}var c=n-a-1,u=c*r;return o+u},pRe=YQ({getItemOffset:function(e,t,n){return tm(e,t,n).offset},getItemSize:function(e,t,n){return n.itemMetadataMap[t].size},getEstimatedTotalSize:a9,getOffsetForIndexAndAlignment:function(e,t,n,s,r,a){var o=e.direction,l=e.height,c=e.layout,u=e.width,h=o==="horizontal"||c==="horizontal",d=h?u:l,p=tm(e,t,r),f=a9(e,r),g=Math.max(0,Math.min(f-d,p.offset)),m=Math.max(0,p.offset-d+p.size+a);switch(n==="smart"&&(s>=m-d&&s<=g+d?n="auto":n="center"),n){case"start":return g;case"end":return m;case"center":return Math.round(m+(g-m)/2);case"auto":default:return s>=m&&s<=g?s:s<m?m:g}},getStartIndexForOffset:function(e,t,n){return hRe(e,n,t)},getStopIndexForStartIndex:function(e,t,n,s){for(var r=e.direction,a=e.height,o=e.itemCount,l=e.layout,c=e.width,u=r==="horizontal"||l==="horizontal",h=u?c:a,d=tm(e,t,s),p=n+h,f=d.offset+d.size,g=t;g<o-1&&f<p;)g++,f+=tm(e,g,s).size;return g},initInstanceProps:function(e,t){var n=e,s=n.estimatedItemSize,r={itemMetadataMap:{},estimatedItemSize:s||uRe,lastMeasuredIndex:-1};return t.resetAfterIndex=function(a,o){o===void 0&&(o=!0),r.lastMeasuredIndex=Math.min(r.lastMeasuredIndex,a-1),t._getItemStyleCache(-1),o&&t.forceUpdate()},r},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.itemSize}}),ZQ=YQ({getItemOffset:function(e,t){var n=e.itemSize;return t*n},getItemSize:function(e,t){var n=e.itemSize;return n},getEstimatedTotalSize:function(e){var t=e.itemCount,n=e.itemSize;return n*t},getOffsetForIndexAndAlignment:function(e,t,n,s,r,a){var o=e.direction,l=e.height,c=e.itemCount,u=e.itemSize,h=e.layout,d=e.width,p=o==="horizontal"||h==="horizontal",f=p?d:l,g=Math.max(0,c*u-f),m=Math.min(g,t*u),y=Math.max(0,t*u-f+u+a);switch(n==="smart"&&(s>=y-f&&s<=m+f?n="auto":n="center"),n){case"start":return m;case"end":return y;case"center":{var b=Math.round(y+(m-y)/2);return b<Math.ceil(f/2)?0:b>g+Math.floor(f/2)?g:b}case"auto":default:return s>=y&&s<=m?s:s<y?y:m}},getStartIndexForOffset:function(e,t){var n=e.itemCount,s=e.itemSize;return Math.max(0,Math.min(n-1,Math.floor(t/s)))},getStopIndexForStartIndex:function(e,t,n){var s=e.direction,r=e.height,a=e.itemCount,o=e.itemSize,l=e.layout,c=e.width,u=s==="horizontal"||l==="horizontal",h=t*o,d=u?c:r,p=Math.ceil((d+n-h)/o);return Math.max(0,Math.min(a-1,t+p-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});const JQ={PREFIX:`${ge}-tag`},d0={TAG_SIZE:["default","small","large"],TAG_COLOR:["grey","red","pink","purple","violet","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","white"],TAG_TYPE:["light","solid","ghost"],AVATAR_SHAPE:["square","circle"]};var fRe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const Ns=JQ.PREFIX,QQ=d0.TAG_COLOR,eee=d0.TAG_SIZE,tee=d0.TAG_TYPE,gRe=d0.AVATAR_SHAPE;let mc=class iee extends H.Component{constructor(e){super(e),this.state={visible:!0},this.close=this.close.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}static getDerivedStateFromProps(e){return"visible"in e?{visible:e.visible}:null}setVisible(e){"visible"in this.props||this.setState({visible:e})}close(e,t,n){const{onClose:s}=this.props;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),s&&s(t,e,n),!e.defaultPrevented&&this.setVisible(!1)}handleKeyDown(e){const{closable:t,onClick:n,onKeyDown:s}=this.props;switch(e.key){case"Backspace":case"Delete":t&&this.close(e,this.props.children,this.props.tagKey),jn(e);break;case"Enter":n(e),jn(e);break;case"Escape":e.target.blur();break}s&&s(e)}renderAvatar(){const{avatarShape:e,avatarSrc:t}=this.props;return k.createElement(of,{src:t,shape:e})}render(){const e=this.props,{tagKey:t,children:n,size:s,color:r,closable:a,visible:o,onClose:l,onClick:c,className:u,type:h,shape:d,avatarSrc:p,avatarShape:f,tabIndex:g,prefixIcon:m,suffixIcon:y}=e,b=fRe(e,["tagKey","children","size","color","closable","visible","onClose","onClick","className","type","shape","avatarSrc","avatarShape","tabIndex","prefixIcon","suffixIcon"]),{visible:x}=this.state,S=c!==iee.defaultProps.onClick||a,C={role:"button",tabIndex:g||0,onKeyDown:this.handleKeyDown},w=Object.assign(Object.assign({},b),{onClick:c,tabIndex:g,className:K(Ns,{[`${Ns}-default`]:s==="default",[`${Ns}-small`]:s==="small",[`${Ns}-large`]:s==="large",[`${Ns}-square`]:d==="square",[`${Ns}-circle`]:d==="circle",[`${Ns}-${h}`]:h,[`${Ns}-${r}-${h}`]:r&&h,[`${Ns}-closable`]:a,[`${Ns}-invisible`]:!x,[`${Ns}-avatar-${f}`]:p},u)}),A=S?Object.assign(Object.assign({},w),C):w,T=a?k.createElement("div",{className:`${Ns}-close`,onClick:O=>this.close(O,n,t)},k.createElement(Rc,{size:"small"})):null,E=Ii(n),P=K(`${Ns}-content`,`${Ns}-content-${E?"ellipsis":"center"}`);return k.createElement("div",Object.assign({"aria-label":this.props["aria-label"]||E?`${a?"Closable ":""}Tag: ${n}`:""},A),m?k.createElement("div",{className:`${Ns}-prefix-icon`},m):null,p?this.renderAvatar():null,k.createElement("div",{className:P},n),y?k.createElement("div",{className:`${Ns}-suffix-icon`},y):null,T)}};mc.defaultProps={size:eee[0],color:QQ[0],closable:!1,type:tee[0],onClose:()=>{},onClick:()=>{},onMouseEnter:()=>{},style:{},className:"",shape:"square",avatarShape:"square",prefixIcon:null,suffixIcon:null};mc.propTypes={children:v.node,tagKey:v.oneOfType([v.string,v.number]),size:v.oneOf(eee),color:v.oneOf(QQ),type:v.oneOf(tee),closable:v.bool,visible:v.bool,onClose:v.func,onClick:v.func,prefixIcon:v.node,suffixIcon:v.node,style:v.object,className:v.string,avatarSrc:v.string,avatarShape:v.oneOf(gRe),"aria-label":v.string};const zl={PREFIX:`${ge}-collapse`},mRe={iconPosition:["left","right"]};class yRe extends tt{constructor(e){super(Object.assign({},e))}initActiveKey(){const{defaultActiveKey:e,activeKey:t,accordion:n}=this.getProps();let s=t||e;return n&&(s=Array.isArray(s)?s[0]:s),s&&s.length?(s=Array.isArray(s)?s:[s],s):[]}handleChange(e,t){const{activeKey:n,accordion:s}=this.getProps(),{activeSet:r}=this.getStates();let a=new Set(r);a.has(e)?a.delete(e):s?a=new Set([e]):a.add(e),this._adapter.handleChange([...a.values()],t),typeof n>"u"&&this._adapter.addActiveKey(a)}}class _Re extends tt{constructor(e){super(Object.assign({},e)),this.updateDOMInRenderTree=t=>{this._adapter.setDOMInRenderTree(t)},this.updateDOMHeight=t=>{this._adapter.setDOMHeight(t)},this.updateVisible=t=>{this._adapter.setVisible(t)},this.updateIsTransitioning=t=>{this._adapter.setIsTransitioning(t)}}}const o9={PREFIX:`${ge}-collapsible`};class Mu extends Ve{constructor(e){super(e),this.domRef=k.createRef(),this.hasBeenRendered=!1,this.handleResize=t=>{const n=t[0];if(n){const s=Mu.getEntryInfo(n);this.foundation.updateDOMHeight(s.height),this.foundation.updateDOMInRenderTree(s.isShown)}},this.isChildrenInRenderTree=()=>this.domRef.current?this.domRef.current.offsetHeight>0:!1,this.state={domInRenderTree:!1,domHeight:0,visible:this.props.isOpen,isTransitioning:!1},this.foundation=new _Re(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setDOMInRenderTree:e=>{this.state.domInRenderTree!==e&&this.setState({domInRenderTree:e})},setDOMHeight:e=>{this.state.domHeight!==e&&this.setState({domHeight:e})},setVisible:e=>{this.state.visible!==e&&this.setState({visible:e})},setIsTransitioning:e=>{this.state.isTransitioning!==e&&this.setState({isTransitioning:e})}})}componentDidMount(){super.componentDidMount(),this.resizeObserver=new ResizeObserver(this.handleResize),this.resizeObserver.observe(this.domRef.current);const e=this.isChildrenInRenderTree();this.foundation.updateDOMInRenderTree(e),e&&this.foundation.updateDOMHeight(this.domRef.current.scrollHeight)}componentDidUpdate(e,t,n){const s=Object.keys(this.props).filter(a=>!wi(this.props[a],e[a])),r=Object.keys(this.state).filter(a=>!wi(this.state[a],t[a]));s.includes("reCalcKey")&&this.foundation.updateDOMHeight(this.domRef.current.scrollHeight),r.includes("domInRenderTree")&&this.state.domInRenderTree&&this.foundation.updateDOMHeight(this.domRef.current.scrollHeight),s.includes("isOpen")&&(this.props.isOpen||!this.props.motion)&&this.foundation.updateVisible(this.props.isOpen),this.props.motion&&e.isOpen!==this.props.isOpen&&this.foundation.updateIsTransitioning(!0)}componentWillUnmount(){super.componentWillUnmount(),this.resizeObserver.disconnect()}render(){const e=Object.assign({overflow:"hidden",height:this.props.isOpen?this.state.domHeight:this.props.collapseHeight,opacity:this.props.isOpen||!this.props.fade||this.props.collapseHeight!==0?1:0,transitionDuration:`${this.props.motion&&this.state.isTransitioning?this.props.duration:0}ms`},this.props.style),t=K(`${o9.PREFIX}-wrapper`,{[`${o9.PREFIX}-transition`]:this.props.motion&&this.state.isTransitioning},this.props.className),n=this.props.keepDOM&&(this.props.lazyRender?this.hasBeenRendered:!0)||this.props.collapseHeight!==0||this.state.visible||this.props.isOpen;return n&&!this.hasBeenRendered&&(this.hasBeenRendered=!0),k.createElement("div",Object.assign({className:t,style:e,onTransitionEnd:()=>{var s,r;this.props.isOpen||this.foundation.updateVisible(!1),this.foundation.updateIsTransitioning(!1),(r=(s=this.props).onMotionEnd)===null||r===void 0||r.call(s)}},this.getDataAttr(this.props)),k.createElement("div",{"x-semi-prop":"children",ref:this.domRef,style:{overflow:"hidden"},id:this.props.id},n&&this.props.children))}}Mu.__SemiComponentName__="Collapsible";Mu.defaultProps=os(Mu.__SemiComponentName__,{isOpen:!1,duration:250,motion:!0,keepDOM:!1,lazyRender:!1,collapseHeight:0,fade:!1});Mu.getEntryInfo=i=>{let e;i.borderBoxSize?e=!(i.borderBoxSize[0].blockSize===0&&i.borderBoxSize[0].inlineSize===0):e=!(i.contentRect.height===0&&i.contentRect.width===0);let t=0;return i.borderBoxSize?t=Math.ceil(i.borderBoxSize[0].blockSize):t=i.target.clientHeight,{isShown:e,height:t}};Mu.propTypes={motion:v.bool,children:v.node,isOpen:v.bool,duration:v.number,keepDOM:v.bool,collapseHeight:v.number,style:v.object,className:v.string,reCalcKey:v.oneOfType([v.string,v.number])};const nee=k.createContext({});var vRe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};class qE extends H.PureComponent{constructor(){super(...arguments),this.headerExpandIconTriggerRef=k.createRef(),this.ariaID="",this.handleClick=(e,t)=>{var n;(this.context.clickHeaderToExpand||!((n=this.headerExpandIconTriggerRef.current)===null||n===void 0)&&n.contains(t.target))&&this.context.onClick(e,t)}}componentDidMount(){this.ariaID=Cl({})}renderHeader(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const{showArrow:n,header:s,extra:r}=this.props;let{expandIcon:a,collapseIcon:o}=this.context;const{expandIconPosition:l}=this.context;typeof a>"u"&&(a=k.createElement(af,null)),typeof o>"u"&&(o=k.createElement(SQ,null));const c=k.createElement("span",{ref:this.headerExpandIconTriggerRef,"aria-hidden":"true",className:K([`${zl.PREFIX}-header-icon`,{[`${zl.PREFIX}-header-iconDisabled`]:!t}])},t&&e?o:a),u=l==="left";return typeof s=="string"?k.createElement(k.Fragment,null,n&&(u?c:null),k.createElement("span",null,s),k.createElement("span",{className:`${zl.PREFIX}-header-right`},k.createElement("span",null,r),n&&(u?null:c))):k.createElement(k.Fragment,null,n&&(u?c:null),s,n&&(u?null:c))}render(){const e=this.props,{className:t,children:n,itemKey:s,reCalcKey:r,header:a,extra:o,showArrow:l,disabled:c}=e,u=vRe(e,["className","children","itemKey","reCalcKey","header","extra","showArrow","disabled"]),{keepDOM:h,expandIconPosition:d,activeSet:p,motion:f,lazyRender:g}=this.context,m=p.has(s),y=K(t,{[`${zl.PREFIX}-item`]:!0}),b=K({[`${zl.PREFIX}-header`]:!0,[`${zl.PREFIX}-header-disabled`]:c,[`${zl.PREFIX}-header-iconLeft`]:d==="left"}),x=K({[`${zl.PREFIX}-content`]:!0});return k.createElement("div",Object.assign({className:y},u),k.createElement("div",{role:"button",tabIndex:0,className:b,"aria-disabled":c,"aria-expanded":m?"true":"false","aria-owns":this.ariaID,onClick:S=>!c&&this.handleClick(s,S)},this.renderHeader(m,n!==void 0&&!c)),n&&k.createElement(Mu,{lazyRender:g,isOpen:m,keepDOM:h,motion:f,onMotionEnd:this.props.onMotionEnd,reCalcKey:r},k.createElement("div",{className:x,"aria-hidden":!m,id:this.ariaID},k.createElement("div",{className:`${zl.PREFIX}-content-wrapper`},n))))}}qE.contextType=nee;qE.propTypes={itemKey:v.string,extra:v.node,header:v.oneOfType([v.string,v.node]),className:v.string,reCalcKey:v.oneOfType([v.string,v.number]),showArrow:v.bool,disabled:v.bool};qE.defaultProps={showArrow:!0,disabled:!1};var bRe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};class cf extends Ve{constructor(e){super(e),this.onChange=(n,s)=>{this.foundation.handleChange(n,s)},this.foundation=new yRe(this.adapter);const t=this.foundation.initActiveKey();this.state={activeSet:new Set(t)},this.onChange=this.onChange.bind(this)}get adapter(){return Object.assign(Object.assign({},super.adapter),{handleChange:(e,t)=>this.props.onChange(e,t),addActiveKey:e=>this.setState({activeSet:e})})}static getDerivedStateFromProps(e,t){if(e.activeKey){const n=Array.isArray(e.activeKey)?e.activeKey:[e.activeKey],s=new Set(n);return wi(s,t.activeSet)?t:Object.assign(Object.assign({},t),{activeSet:s})}return t}componentWillUnmount(){this.foundation.destroy()}render(){const e=this.props,{defaultActiveKey:t,lazyRender:n,accordion:s,style:r,motion:a,className:o,keepDOM:l,expandIconPosition:c,expandIcon:u,collapseIcon:h,children:d,clickHeaderToExpand:p}=e;bRe(e,["defaultActiveKey","lazyRender","accordion","style","motion","className","keepDOM","expandIconPosition","expandIcon","collapseIcon","children","clickHeaderToExpand"]);const f=K(zl.PREFIX,o),{activeSet:g}=this.state;return k.createElement("div",Object.assign({className:f,style:r},this.getDataAttr(this.props)),k.createElement(nee.Provider,{value:{activeSet:g,expandIcon:u,collapseIcon:h,clickHeaderToExpand:p,keepDOM:l,expandIconPosition:c,onClick:this.onChange,motion:a,lazyRender:n}},d))}}cf.Panel=qE;cf.propTypes={activeKey:v.oneOfType([v.string,v.array]),defaultActiveKey:v.oneOfType([v.string,v.array]),accordion:v.bool,clickHeaderToExpand:v.bool,onChange:v.func,expandIcon:v.node,collapseIcon:v.node,style:v.object,className:v.string,keepDOM:v.bool,motion:v.oneOfType([v.bool,v.func,v.object]),expandIconPosition:v.oneOf(mRe.iconPosition),lazyRender:v.bool};cf.__SemiComponentName__="Collapse";cf.defaultProps=os(cf.__SemiComponentName__,{defaultActiveKey:"",clickHeaderToExpand:!0,onChange:Vr,expandIconPosition:"right",lazyRender:!1});function xRe(i,e){return i&&(typeof i=="function"||typeof i=="object")&&e&&(typeof e=="function"||typeof e=="object")&&Object.entries(e).forEach(t=>{let[n,s]=t;i[n]=s}),i}var SRe=Function.prototype.toString,aM=Object.create,CRe=Object.prototype.toString,wRe=function(){function i(){this._keys=[],this._values=[]}return i.prototype.has=function(e){return!!~this._keys.indexOf(e)},i.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},i.prototype.set=function(e,t){this._keys.push(e),this._values.push(t)},i}();function ARe(){return new wRe}function kRe(){return new WeakMap}var TRe=typeof WeakMap<"u"?kRe:ARe;function Ej(i){if(!i)return aM(null);var e=i.constructor;if(e===Object)return i===Object.prototype?{}:aM(i);if(e&&~SRe.call(e).indexOf("[native code]"))try{return new e}catch{}return aM(i)}function ERe(i){var e="";return i.global&&(e+="g"),i.ignoreCase&&(e+="i"),i.multiline&&(e+="m"),i.unicode&&(e+="u"),i.sticky&&(e+="y"),e}function PRe(i){return i.flags}var ORe=/test/g.flags==="g"?PRe:ERe;function see(i){var e=CRe.call(i);return e.substring(8,e.length-1)}function MRe(i){return i[Symbol.toStringTag]||see(i)}var IRe=typeof Symbol<"u"?MRe:see,RRe=Object.defineProperty,LRe=Object.getOwnPropertyDescriptor,ree=Object.getOwnPropertyNames,Pj=Object.getOwnPropertySymbols,aee=Object.prototype,oee=aee.hasOwnProperty,DRe=aee.propertyIsEnumerable,lee=typeof Pj=="function";function FRe(i){return ree(i).concat(Pj(i))}var BRe=lee?FRe:ree;function ZE(i,e,t){for(var n=BRe(i),s=0,r=n.length,a=void 0,o=void 0;s<r;++s)if(a=n[s],!(a==="callee"||a==="caller")){if(o=LRe(i,a),!o){e[a]=t.copier(i[a],t);continue}!o.get&&!o.set&&(o.value=t.copier(o.value,t));try{RRe(e,a,o)}catch{e[a]=o.value}}return e}function jRe(i,e){var t=new e.Constructor;e.cache.set(i,t);for(var n=0,s=i.length;n<s;++n)t[n]=e.copier(i[n],e);return t}function NRe(i,e){var t=new e.Constructor;return e.cache.set(i,t),ZE(i,t,e)}function cee(i,e){return i.slice(0)}function $Re(i,e){return i.slice(0,i.size,i.type)}function zRe(i,e){return new e.Constructor(cee(i.buffer))}function HRe(i,e){return new e.Constructor(i.getTime())}function uee(i,e){var t=new e.Constructor;return e.cache.set(i,t),i.forEach(function(n,s){t.set(s,e.copier(n,e))}),t}function VRe(i,e){return ZE(i,uee(i,e),e)}function URe(i,e){var t=Ej(e.prototype);e.cache.set(i,t);for(var n in i)oee.call(i,n)&&(t[n]=e.copier(i[n],e));return t}function WRe(i,e){var t=Ej(e.prototype);e.cache.set(i,t);for(var n in i)oee.call(i,n)&&(t[n]=e.copier(i[n],e));for(var s=Pj(i),r=0,a=s.length,o=void 0;r<a;++r)o=s[r],DRe.call(i,o)&&(t[o]=e.copier(i[o],e));return t}var GRe=lee?WRe:URe;function KRe(i,e){var t=Ej(e.prototype);return e.cache.set(i,t),ZE(i,t,e)}function oM(i,e){return new e.Constructor(i.valueOf())}function XRe(i,e){var t=new e.Constructor(i.source,ORe(i));return t.lastIndex=i.lastIndex,t}function KC(i,e){return i}function hee(i,e){var t=new e.Constructor;return e.cache.set(i,t),i.forEach(function(n){t.add(e.copier(n,e))}),t}function YRe(i,e){return ZE(i,hee(i,e),e)}var qRe=Array.isArray,Oj=Object.assign,ZRe=Object.getPrototypeOf||function(i){return i.__proto__},dee={array:jRe,arrayBuffer:cee,blob:$Re,dataView:zRe,date:HRe,error:KC,map:uee,object:GRe,regExp:XRe,set:hee},JRe=Oj({},dee,{array:NRe,map:VRe,object:KRe,set:YRe});function QRe(i){return{Arguments:i.object,Array:i.array,ArrayBuffer:i.arrayBuffer,Blob:i.blob,Boolean:oM,DataView:i.dataView,Date:i.date,Error:i.error,Float32Array:i.arrayBuffer,Float64Array:i.arrayBuffer,Int8Array:i.arrayBuffer,Int16Array:i.arrayBuffer,Int32Array:i.arrayBuffer,Map:i.map,Number:oM,Object:i.object,Promise:KC,RegExp:i.regExp,Set:i.set,String:oM,WeakMap:KC,WeakSet:KC,Uint8Array:i.arrayBuffer,Uint8ClampedArray:i.arrayBuffer,Uint16Array:i.arrayBuffer,Uint32Array:i.arrayBuffer,Uint64Array:i.arrayBuffer}}function pee(i){var e=Oj({},dee,i),t=QRe(e),n=t.Array,s=t.Object;function r(a,o){if(o.prototype=o.Constructor=void 0,!a||typeof a!="object")return a;if(o.cache.has(a))return o.cache.get(a);if(o.prototype=ZRe(a),o.Constructor=o.prototype&&o.prototype.constructor,!o.Constructor||o.Constructor===Object)return s(a,o);if(qRe(a))return n(a,o);var l=t[IRe(a)];return l?l(a,o):typeof a.then=="function"?a:s(a,o)}return function(o){return r(o,{Constructor:void 0,cache:TRe(),copier:r,prototype:void 0})}}function eLe(i){return pee(Oj({},JRe,i))}eLe({});var eA=pee({}),tLe=$J,iLe=hQ,nLe=h0,sLe=9007199254740991,lM=4294967295,rLe=Math.min;function aLe(i,e){if(i=nLe(i),i<1||i>sLe)return[];var t=lM,n=rLe(i,lM);e=iLe(e),i-=lM;for(var s=tLe(n,e);++t<i;)e(t);return s}var oLe=aLe;const fee=Xe(oLe);var lLe=DE,cLe=HE,uLe=1,hLe=2;function dLe(i,e,t,n){var s=t.length,r=s,a=!n;if(i==null)return!r;for(i=Object(i);s--;){var o=t[s];if(a&&o[2]?o[1]!==i[o[0]]:!(o[0]in i))return!1}for(;++s<r;){o=t[s];var l=o[0],c=i[l],u=o[1];if(a&&o[2]){if(c===void 0&&!(l in i))return!1}else{var h=new lLe;if(n)var d=n(c,u,l,i,e,h);if(!(d===void 0?cLe(u,c,uLe|hLe,n,h):d))return!1}}return!0}var pLe=dLe,fLe=Jr;function gLe(i){return i===i&&!fLe(i)}var gee=gLe,mLe=gee,yLe=zf;function _Le(i){for(var e=yLe(i),t=e.length;t--;){var n=e[t],s=i[n];e[t]=[n,s,mLe(s)]}return e}var vLe=_Le;function bLe(i,e){return function(t){return t==null?!1:t[i]===e&&(e!==void 0||i in Object(t))}}var mee=bLe,xLe=pLe,SLe=vLe,CLe=mee;function wLe(i){var e=SLe(i);return e.length==1&&e[0][2]?CLe(e[0][0],e[0][1]):function(t){return t===i||xLe(t,i,e)}}var ALe=wLe,kLe=HE,TLe=SJ,ELe=XQ,PLe=L3,OLe=gee,MLe=mee,ILe=i0,RLe=1,LLe=2;function DLe(i,e){return PLe(i)&&OLe(e)?MLe(ILe(i),e):function(t){var n=TLe(t,i);return n===void 0&&n===e?ELe(t,i):kLe(e,n,RLe|LLe)}}var FLe=DLe;function BLe(i){return function(e){return e==null?void 0:e[i]}}var yee=BLe,jLe=IE;function NLe(i){return function(e){return jLe(e,i)}}var $Le=NLe,zLe=yee,HLe=$Le,VLe=L3,ULe=i0;function WLe(i){return VLe(i)?zLe(ULe(i)):HLe(i)}var GLe=WLe,KLe=ALe,XLe=FLe,YLe=NE,qLe=_s,ZLe=GLe;function JLe(i){return typeof i=="function"?i:i==null?YLe:typeof i=="object"?qLe(i)?XLe(i[0],i[1]):KLe(i):ZLe(i)}var p0=JLe,QLe=Sj,eDe=p0,tDe=h0,iDe=Math.max;function nDe(i,e,t){var n=i==null?0:i.length;if(!n)return-1;var s=t==null?0:tDe(t);return s<0&&(s=iDe(n+s,0)),QLe(i,eDe(e),s)}var _ee=nDe;const cy=Xe(_ee);var sDe=VE,rDe=Ic;function aDe(i,e){var t=-1,n=rDe(i)?Array(i.length):[];return sDe(i,function(s,r,a){n[++t]=e(s,r,a)}),n}var oDe=aDe,lDe=e0,cDe=p0,uDe=oDe,hDe=_s;function dDe(i,e){var t=hDe(i)?lDe:uDe;return t(i,cDe(e))}var pDe=dDe;const tA=Xe(pDe);var fDe=p0,gDe=Ic,mDe=zf;function yDe(i){return function(e,t,n){var s=Object(e);if(!gDe(e)){var r=fDe(t);e=mDe(e),t=function(o){return r(s[o],o,s)}}var a=i(e,t,n);return a>-1?s[r?e[a]:a]:void 0}}var _De=yDe,vDe=_De,bDe=_ee,xDe=vDe(bDe),SDe=xDe;const uf=Xe(SDe);var CDe=tj,wDe=zE,l9=h0;function ADe(i,e,t){var n=i==null?0:i.length;return n?(t&&typeof t!="number"&&wDe(i,e,t)?(e=0,t=n):(e=e==null?0:l9(e),t=t===void 0?n:l9(t)),CDe(i,e,t)):[]}var kDe=ADe;const TDe=Xe(kDe),vee={PREFIX:`${ge}-descriptions`},cM={ALIGN_SET:["left","justify","plain","center"],SIZE_SET:["small","medium","large"],LAYOUT_SET:["horizontal","vertical"]},Mj=k.createContext(null);var EDe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const fp=vee.PREFIX,c9=`${fp}-key`,u9=`${fp}-value`;class wb extends H.PureComponent{render(){const e=this.props,{itemKey:t,hidden:n,className:s,span:r,style:a,children:o}=e,l=EDe(e,["itemKey","hidden","className","span","style","children"]),{align:c,layout:u}=this.context;if(n)return null;const h=k.createElement("td",{className:`${fp}-item`,colSpan:r||1},k.createElement("span",{className:c9},t,":"),k.createElement("span",{className:u9},typeof o=="function"?o():o)),d=k.createElement(k.Fragment,null,k.createElement("th",{className:`${fp}-item ${fp}-item-th`},k.createElement("span",{className:c9},t)),k.createElement("td",{className:`${fp}-item ${fp}-item-td`,colSpan:r?r*2-1:1},k.createElement("span",{className:u9},typeof o=="function"?o():o))),p=c==="plain"?k.createElement("tr",Object.assign({className:s,style:a},Sl(l)),h):k.createElement("tr",Object.assign({className:s,style:a},Sl(l)),d);return u==="horizontal"?c==="plain"?h:d:p}}wb.propTypes={itemKey:v.node,hidden:v.bool,className:v.string,style:v.object};wb.contextType=Mj;class PDe extends tt{constructor(e){super(Object.assign({},e))}getHorizontalList(){const{column:e,data:t,children:n}=this.getProps(),s=this._adapter.getColumns(),r=[],a={totalSpan:0,itemList:[]};for(const o of s)a.totalSpan+=o.span||1,a.itemList.push(o),a.totalSpan>=e&&(r.push(a.itemList),a.itemList=[],a.totalSpan=0);if(a.itemList.length!=0){const o=a.itemList[a.itemList.length-1];if(isNaN(o.span)){let l=0;a.itemList.forEach(c=>l+=isNaN(c.span)?1:c.span),l<e&&(o.span=e-l+1)}r.push(a.itemList)}return r}}var ODe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const dg=vee.PREFIX;class rl extends Ve{constructor(e){super(e),this.renderChildrenList=()=>{const t=this.props,{layout:n,data:s,children:r}=t;return n==="horizontal"?this.foundation.getHorizontalList().map((o,l)=>k.createElement("tr",{key:l},o.map((c,u)=>rL(c)?k.createElement(wb,Object.assign({itemKey:c.key},c,{key:l+"-"+u}),c.value):null))):s&&s.length?s.map((a,o)=>rL(a)?k.createElement(wb,Object.assign({itemKey:a.key},a,{key:o}),a.value):null):r},this.foundation=new PDe(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{getColumns:()=>{var e,t;return!((e=this.props.data)===null||e===void 0)&&e.length?this.props.data:this.props.children?(t=k.Children.toArray(this.props.children))===null||t===void 0?void 0:t.map(n=>H.isValidElement(n)?Object.assign({value:n.props.children},n.props):[]):[]}})}render(){const e=this.props,{align:t,row:n,size:s,className:r,style:a,children:o,data:l,layout:c}=e,u=ODe(e,["align","row","size","className","style","children","data","layout"]),h=K(dg,r,{[`${dg}-${t}`]:!n,[`${dg}-double`]:n,[`${dg}-double-${s}`]:n,[`${dg}-horizontal`]:c==="horizontal",[`${dg}-vertical`]:c==="vertical"});return k.createElement("div",Object.assign({className:h,style:a},Sl(u)),k.createElement("table",null,k.createElement("tbody",null,k.createElement(Mj.Provider,{value:{align:t,layout:c}},this.renderChildrenList()))))}}rl.Item=wb;rl.contextType=Mj;rl.propTypes={align:v.oneOf(cM.ALIGN_SET),row:v.bool,size:v.oneOf(cM.SIZE_SET),style:v.object,className:v.string,data:v.arrayOf(v.shape({key:v.node,value:v.oneOfType([v.node,v.func]),hidden:v.bool,className:v.string,style:v.object})),layout:v.oneOf(cM.LAYOUT_SET),column:v.number};rl.defaultProps={align:"center",row:!1,size:"medium",data:[],layout:"vertical",column:3};const MDe={PREFIX:`${ge}`};var IDe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const Zd=MDe.PREFIX,iA=i=>{const{layout:e="horizontal",dashed:t,align:n="center",className:s,margin:r,style:a,children:o}=i,l=IDe(i,["layout","dashed","align","className","margin","style","children"]),c=K(`${Zd}-divider`,s,{[`${Zd}-divider-horizontal`]:e==="horizontal",[`${Zd}-divider-vertical`]:e==="vertical",[`${Zd}-divider-dashed`]:!!t,[`${Zd}-divider-with-text`]:o&&e==="horizontal",[`${Zd}-divider-with-text-${n}`]:o&&e==="horizontal"});let u={};return r!==void 0&&(e==="vertical"?u={marginLeft:r,marginRight:r}:e==="horizontal"&&(u={marginTop:r,marginBottom:r})),k.createElement("div",Object.assign({},l,{className:c,style:Object.assign(Object.assign({},u),a)}),o&&e==="horizontal"?typeof o=="string"?k.createElement("span",{className:`${Zd}-divider_inner-text`,"x-semi-prop":"children"},o):o:null)},hi={DIALOG:`${ge}-modal`},h9={cancelKey:"cancel",confirmKey:"confirm",SIZE:["small","medium","large","full-width"],directions:["ltr","rtl"]};function RDe(i){return i!==null&&typeof i=="object"}function Ab(i){return RDe(i)&&typeof i.then=="function"}class LDe extends tt{constructor(e){super(Object.assign({},e)),this.toggleDisplayNone=(t,n)=>{this._adapter.toggleDisplayNone(t,n)}}destroy(){this.afterHide()}handleCancel(e){var t;const n=this._adapter.notifyCancel(e);Ab(n)&&(this._adapter.setState({onCancelReturnPromiseStatus:"pending"}),(t=n==null?void 0:n.then(()=>{this._adapter.setState({onCancelReturnPromiseStatus:"fulfilled"})}))===null||t===void 0||t.catch(s=>{throw this._adapter.setState({onCancelReturnPromiseStatus:"rejected"}),s}))}handleOk(e){var t;const n=this._adapter.notifyOk(e);Ab(n)&&(this._adapter.setState({onOKReturnPromiseStatus:"pending"}),(t=n==null?void 0:n.then(()=>{this._adapter.setState({onOKReturnPromiseStatus:"fulfilled"})}))===null||t===void 0||t.catch(s=>{throw this._adapter.setState({onOKReturnPromiseStatus:"rejected"}),s}))}beforeShow(){this._adapter.disabledBodyScroll()}afterHide(){this._adapter.enabledBodyScroll(),this._adapter.notifyClose()}enabledBodyScroll(){this._adapter.enabledBodyScroll()}}class Ij extends tt{constructor(e){super(Object.assign(Object.assign({},Ij.defaultAdapter),e)),this.handleKeyDown=t=>{const{closeOnEsc:n}=this.getProps();if(n&&t.keyCode===ds.ESC){t.stopPropagation(),this.close(t);return}}}destroy(){this.handleKeyDownEventListenerUnmount(),this.modalDialogBlur(),this.prevFocusElementReFocus()}handleDialogMouseDown(){this._adapter.notifyDialogMouseDown()}handleMaskMouseUp(){this._adapter.notifyDialogMouseUp()}handleKeyDownEventListenerMount(){this._adapter.addKeyDownEventListener()}handleKeyDownEventListenerUnmount(){this._adapter.removeKeyDownEventListener()}getMouseState(){this._adapter.getMouseState()}handleMaskClick(e){const{dialogMouseDown:t}=this.getStates();e.target===e.currentTarget&&!t&&this.close(e)}close(e){this._adapter.notifyClose(e)}modalDialogFocus(){this._adapter.modalDialogFocus()}modalDialogBlur(){this._adapter.modalDialogBlur()}prevFocusElementReFocus(){this._adapter.prevFocusElementReFocus()}}var DDe=KQ,FDe=$E,BDe=X3,jDe=FDe(function(i,e){return BDe(i)?DDe(i,e):[]}),NDe=jDe;const $De=Xe(NDe);class Th{constructor(e,t){var n;this.addFocusRedirectListener=s=>(this.focusRedirectListenerList.push(s),()=>this.removeFocusRedirectListener(s)),this.removeFocusRedirectListener=s=>{this.focusRedirectListenerList=$De(this.focusRedirectListenerList,s)},this.destroy=()=>{var s;(s=this.container)===null||s===void 0||s.removeEventListener("keydown",this.onKeyPress)},this.shouldFocusRedirect=s=>{if(!this.enable)return!1;for(const r of this.focusRedirectListenerList)if(!r(s))return!1;return!0},this.focusElement=(s,r)=>{const{preventScroll:a}=this.options;s==null||s.focus({preventScroll:a}),r.preventDefault()},this.onKeyPress=s=>{if(s&&s.key==="Tab"){const r=Th.getFocusableElements(this.container);r.length&&(s.shiftKey?this.handleContainerShiftTabKeyDown(r,s):this.handleContainerTabKeyDown(r,s))}},this.handleContainerTabKeyDown=(s,r)=>{const a=Th.getActiveElement(),o=s[s.length-1]===a,l=s[0];o&&this.shouldFocusRedirect(l)&&this.focusElement(l,r)},this.handleContainerShiftTabKeyDown=(s,r)=>{const a=Th.getActiveElement(),o=s[0]===a,l=s[s.length-1];o&&this.shouldFocusRedirect(l)&&this.focusElement(l,r)},Object.freeze(t),this.container=e,this.options=t,this.enable=(n=t==null?void 0:t.enable)!==null&&n!==void 0?n:!0,this.focusRedirectListenerList=t!=null&&t.onFocusRedirectListener?Array.isArray(t.onFocusRedirectListener)?[...t.onFocusRedirectListener]:[t.onFocusRedirectListener]:[],this.container.addEventListener("keydown",this.onKeyPress)}get enable(){return this._enable}set enable(e){this._enable=e}static getFocusableElements(e){if(!Sp(e))return[];const n=["input:not([disabled]):not([tabindex='-1'])","textarea:not([disabled]):not([tabindex='-1'])","button:not([disabled]):not([tabindex='-1'])","a[href]:not([tabindex='-1'])","select:not([disabled]):not([tabindex='-1'])","area[href]:not([tabindex='-1'])","iframe:not([tabindex='-1'])","object:not([tabindex='-1'])","*[tabindex]:not([tabindex='-1'])","*[contenteditable]:not([tabindex='-1'])"].join(",");return Array.from(e.querySelectorAll(n))}static getActiveElement(){return document?document.activeElement:null}}var uM=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};let zDe=0;class JE extends Ve{constructor(e){super(e),this.onKeyDown=t=>{this.foundation.handleKeyDown(t)},this.onDialogMouseDown=()=>{this.foundation.handleDialogMouseDown()},this.onMaskMouseUp=()=>{this.foundation.handleMaskMouseUp()},this.onMaskClick=t=>{this.foundation.handleMaskClick(t)},this.close=t=>{this.foundation.close(t)},this.getMaskElement=()=>{const t=uM(this.props,[]),{mask:n,maskClassName:s}=t;if(n){const r=K(`${hi.DIALOG}-mask`,{});return k.createElement("div",Object.assign({key:"mask"},this.props.maskExtraProps,{className:K(r,s),style:t.maskStyle}))}return null},this.renderCloseBtn=()=>{const{closable:t,closeIcon:n}=this.props;let s;if(t){const r=n||k.createElement(Rc,{"x-semi-prop":"closeIcon"});s=k.createElement(Ml,{"aria-label":"close",className:`${hi.DIALOG}-close`,key:"close-btn",onClick:this.close,type:"tertiary",icon:r,theme:"borderless",size:"small"})}return s},this.renderIcon=()=>{const{icon:t}=this.props;return t?k.createElement("span",{className:`${hi.DIALOG}-icon-wrapper`,"x-semi-prop":"icon"},t):null},this.renderHeader=()=>{if("header"in this.props)return this.props.header;const{title:t}=this.props,n=this.renderCloseBtn(),s=this.renderIcon();return t==null?null:k.createElement("div",{className:`${hi.DIALOG}-header`},s,k.createElement(On.Title,{heading:5,className:`${hi.DIALOG}-title`,id:`${hi.DIALOG}-title`,"x-semi-prop":"title"},t),n)},this.renderBody=()=>{const{bodyStyle:t,children:n,title:s}=this.props,r=K(`${hi.DIALOG}-body`,{[`${hi.DIALOG}-withIcon`]:this.props.icon}),a=this.renderCloseBtn(),o=this.renderIcon();return s!=null||"header"in this.props?k.createElement("div",{className:r,id:`${hi.DIALOG}-body`,style:t,"x-semi-prop":"children"},n):k.createElement("div",{className:`${hi.DIALOG}-body-wrapper`},o,k.createElement("div",{className:r,style:t,"x-semi-prop":"children"},n),a)},this.getDialogElement=()=>{const t=uM(this.props,[]),n={},s=K(`${hi.DIALOG}`,{[`${hi.DIALOG}-centered`]:t.centered,[`${hi.DIALOG}-${t.size}`]:t.size});t.width&&(n.width=t.width),t.height&&(n.height=t.height),t.isFullScreen&&(n.width="100%",n.height="100%",n.margin="unset");const r=this.renderBody(),a=this.renderHeader(),o=t.footer?k.createElement("div",{className:`${hi.DIALOG}-footer`,"x-semi-prop":"footer"},t.footer):null;return k.createElement("div",{key:"dialog-element",className:s,onMouseDown:this.onDialogMouseDown,style:Object.assign(Object.assign({},t.style),n),id:this.dialogId},k.createElement("div",{role:"dialog",ref:this.modalDialogRef,"aria-modal":"true","aria-labelledby":`${hi.DIALOG}-title`,"aria-describedby":`${hi.DIALOG}-body`,onAnimationEnd:t.onAnimationEnd,className:K([`${hi.DIALOG}-content`,t.contentClassName,{[`${hi.DIALOG}-content-fullScreen`]:t.isFullScreen}])},a,r,o))},this.state={dialogMouseDown:!1,prevFocusElement:Th.getActiveElement()},this.foundation=new Ij(this.adapter),this.dialogId=`dialog-${zDe++}`,this.modalDialogRef=k.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyClose:e=>{this.props.onClose(e)},notifyDialogMouseDown:()=>{this.setState({dialogMouseDown:!0})},notifyDialogMouseUp:()=>{this.state.dialogMouseDown&&(this.timeoutId=setTimeout(()=>{this.setState({dialogMouseDown:!1})},0))},addKeyDownEventListener:()=>{this.props.closeOnEsc&&document.addEventListener("keydown",this.foundation.handleKeyDown)},removeKeyDownEventListener:()=>{this.props.closeOnEsc&&document.removeEventListener("keydown",this.foundation.handleKeyDown)},getMouseState:()=>this.state.dialogMouseDown,modalDialogFocus:()=>{var e,t,n;const{preventScroll:s}=this.props;let r;if(this.modalDialogRef){const a=Th.getActiveElement();r=this.modalDialogRef.current.contains(a),(e=this.focusTrapHandle)===null||e===void 0||e.destroy(),this.focusTrapHandle=new Th(this.modalDialogRef.current,{preventScroll:s})}r||(n=(t=this.modalDialogRef)===null||t===void 0?void 0:t.current)===null||n===void 0||n.focus({preventScroll:s})},modalDialogBlur:()=>{var e,t;(e=this.modalDialogRef)===null||e===void 0||e.current.blur(),(t=this.focusTrapHandle)===null||t===void 0||t.destroy()},prevFocusElementReFocus:()=>{const{prevFocusElement:e}=this.state,{preventScroll:t}=this.props,n=ne(e,"focus");xt(n)&&e.focus({preventScroll:t})}})}componentDidMount(){var e;this.foundation.handleKeyDownEventListenerMount(),this.foundation.modalDialogFocus();const t=Th.getFocusableElements(this.modalDialogRef.current);this.modalDialogRef.current.contains(document.activeElement)||(e=t[0])===null||e===void 0||e.focus()}componentWillUnmount(){clearTimeout(this.timeoutId),this.foundation.destroy()}render(){var e;const t=this.props,{maskClosable:n,className:s,getPopupContainer:r,maskFixed:a,getContainerContext:o}=t,l=uM(t,["maskClosable","className","getPopupContainer","maskFixed","getContainerContext"]),{direction:c}=this.context,u=K(s,{[`${hi.DIALOG}-popup`]:r&&r()!==((e=globalThis==null?void 0:globalThis.document)===null||e===void 0?void 0:e.body)&&!a,[`${hi.DIALOG}-fixed`]:a,[`${hi.DIALOG}-rtl`]:c==="rtl"}),h=o(),d=this.getDataAttr(l),p=k.createElement("div",Object.assign({className:u},d),this.getMaskElement(),k.createElement("div",Object.assign({role:"none",className:K({[`${hi.DIALOG}-wrap`]:!0,[`${hi.DIALOG}-wrap-center`]:this.props.centered}),onClick:n?this.onMaskClick:null,onMouseUp:n?this.onMaskMouseUp:null},this.props.contentExtraProps),this.getDialogElement()));return h&&h.Provider?k.createElement(h.Provider,{value:h.value},p):p}}JE.contextType=Da;JE.propTypes={close:v.func,getContainerContext:v.func,contentClassName:v.string,maskClassName:v.string,onAnimationEnd:v.func,preventScroll:v.bool};JE.defaultProps={close:J,getContainerContext:J,contentClassName:"",maskClassName:""};var HDe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const bee=i=>{const[e,t]=H.useState(!0),[n,s]=H.useState(),[r,a]=H.useState(),{direction:o}=i,{title:l,content:c,icon:u,type:h,onCancel:d,onOk:p,className:f}=i,g=HDe(i,["title","content","icon","type","onCancel","onOk","className"]),m=H.useCallback(T=>{const E=p&&p(T);E&&E.then?(s(!0),E.then(function(){t(!1),s(!1)},P=>{s(!1)})):t(!1)},[p]),y=H.useCallback(T=>{const E=d&&d(T);E&&E.then?(a(!0),E.then(function(){t(!1),a(!1)},P=>{a(!1)})):t(!1)},[d]),b=`${hi.DIALOG}-confirm`,x=K(f,b,{[`${b}-rtl`]:o==="rtl"}),S=K(`${hi.DIALOG}-${h}`),C=oo(u)?k.cloneElement(u,{className:`${b}-icon ${S}-icon`,size:"extra-large"}):u,w=l==null?null:k.createElement("span",{className:`${b}-title-text`},l),A=K(`${b}-content`,{[`${b}-content-withIcon`]:i.icon});return k.createElement(tr,Object.assign({className:x,title:w,confirmLoading:n,cancelLoading:r,onOk:m,onCancel:y,icon:C,visible:e},g),k.createElement("div",{className:A,"x-semi-prop":"content"},c))};function ox(i){const e=document.createElement("div");document.body.appendChild(e);let t=Object.assign({},i);const n=()=>{vr.unmountComponentAtNode(e)&&e.parentNode&&e.parentNode.removeChild(e);for(let l=0;l<kp.length;l++)if(kp[l]===r){kp.splice(l,1);break}};function s(o){const{afterClose:l}=o;vr.render(k.createElement(bee,Object.assign({},o,{afterClose:function(){l==null||l(...arguments),n()},motion:i.motion})),e)}function r(){t=Object.assign(Object.assign({},t),{visible:!1}),s(t)}function a(o){t=Object.assign(Object.assign({},t),o),s(t)}return s(t),kp.push(r),{destroy:r,update:a}}function xee(i){return Object.assign({type:"info",icon:k.createElement(wl,null)},i)}function See(i){return Object.assign({type:"success",icon:k.createElement(WE,null)},i)}function Cee(i){return Object.assign({type:"warning",icon:k.createElement(ix,null)},i)}function wee(i){return Object.assign({type:"error",icon:k.createElement(tx,null),okButtonProps:Object.assign({type:"danger"},i.okButtonProps)},_n(i,["okButtonProps"]))}function Aee(i){return Object.assign({type:"confirm",icon:k.createElement(kQ,null)},i)}var VDe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const UDe=(i,e)=>{var{afterClose:t,config:n}=i;VDe(i,["afterClose","config"]);const[s,r]=k.useState(n);k.useImperativeHandle(e,()=>({destroy:()=>{r(o=>Object.assign(Object.assign({},o),{visible:!1}))},update:o=>{r(l=>Object.assign(Object.assign({},l),o))}}));const a=()=>{var o;(o=n==null?void 0:n.afterClose)===null||o===void 0||o.call(n),t()};return k.createElement(bee,Object.assign({},s,{afterClose:a}))},WDe=k.forwardRef(UDe);let d9=0;function GDe(){const[i,e]=k.useState([]);function t(n){return e(s=>[...s,n]),()=>{e(s=>s.filter(r=>r!==n))}}return[i,t]}function KDe(){const[i,e]=GDe();function t(n){return function(r){d9+=1;const a=k.createRef();let o;const l=k.createElement(WDe,{key:`semi-modal-${d9}`,config:n(r),ref:a,afterClose:()=>{o()}});return o=e(l),{destroy:()=>{a.current&&a.current.destroy()},update:c=>{a.current&&a.current.update(c)}}}}return[{info:t(xee),success:t(See),error:t(wee),warning:t(Cee),confirm:t(Aee)},k.createElement(k.Fragment,null,i)]}var XDe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};let kp=[];class tr extends Ve{constructor(e){super(e),this.bodyOverflow=null,this.handleCancel=t=>{this.foundation.handleCancel(t)},this.handleOk=t=>{this.foundation.handleOk(t)},this.updateState=()=>{const{visible:t}=this.props;this.foundation.toggleDisplayNone(!t)},this.renderFooter=()=>{const{okText:t,okType:n,cancelText:s,confirmLoading:r,cancelLoading:a,hasCancel:o,footerFill:l}=this.props,c=u=>{var h;return o?k.createElement(it,Object.assign({"aria-label":"cancel",onClick:this.handleCancel,loading:a===void 0?this.state.onCancelReturnPromiseStatus==="pending":a,type:"tertiary",block:l,autoFocus:!0},this.props.cancelButtonProps,{style:Object.assign(Object.assign({},l?{marginLeft:"unset"}:{}),(h=this.props.cancelButtonProps)===null||h===void 0?void 0:h.style),"x-semi-children-alias":"cancelText"}),s||u.cancel):null};return k.createElement(gi,{componentName:"Modal"},(u,h)=>k.createElement("div",{className:K({[`${hi.DIALOG}-footerfill`]:l})},c(u),k.createElement(it,Object.assign({"aria-label":"confirm",type:n,theme:"solid",block:l,loading:r===void 0?this.state.onOKReturnPromiseStatus==="pending":r,onClick:this.handleOk},this.props.okButtonProps,{"x-semi-children-alias":"okText"}),t||u.confirm)))},this.renderDialog=()=>{var t;let n=this.props,{footer:s,className:r,motion:a,maskStyle:o,keepDOM:l,style:c,zIndex:u,getPopupContainer:h,visible:d,modalContentClass:p}=n,f=XDe(n,["footer","className","motion","maskStyle","keepDOM","style","zIndex","getPopupContainer","visible","modalContentClass"]),g=c;const m=o,y="footer"in this.props?s:this.renderFooter();let b={zIndex:u};h&&h()!==((t=globalThis==null?void 0:globalThis.document)===null||t===void 0?void 0:t.body)&&(b={zIndex:u,position:"static"});const x=K(r,{[`${hi.DIALOG}-displayNone`]:l&&this.state.displayNone}),S=this.props.visible||this.props.keepDOM&&(!this.props.lazyRender||this._haveRendered)||this.props.motion&&!this.state.displayNone;return S&&(this._haveRendered=!0),k.createElement(Sc,{motion:this.props.motion,animationState:d?"enter":"leave",startClassName:d?`${hi.DIALOG}-content-animate-show`:`${hi.DIALOG}-content-animate-hide`,onAnimationEnd:()=>{this.updateState()}},C=>{let{animationClassName:w,animationEventsNeedBind:A}=C;return k.createElement(Sc,{motion:this.props.motion,animationState:d?"enter":"leave",startClassName:d?`${hi.DIALOG}-mask-animate-show`:`${hi.DIALOG}-mask-animate-hide`,onAnimationEnd:()=>{this.updateState()}},T=>{let{animationClassName:E,animationEventsNeedBind:P}=T;return S?k.createElement(Hf,{style:b,getPopupContainer:h}," ",k.createElement(JE,Object.assign({},f,{contentExtraProps:A,maskExtraProps:P,isFullScreen:this.state.isFullScreen,contentClassName:`${w} ${p}`,maskClassName:E,className:x,getPopupContainer:h,maskStyle:m,style:g,ref:this.modalRef,footer:y,onClose:this.handleCancel}))):k.createElement(k.Fragment,null)})})},this.state={displayNone:!e.visible,isFullScreen:e.fullScreen},this.foundation=new LDe(this.adapter),this.modalRef=k.createRef(),this.scrollBarWidth=0,this.originBodyWidth="100%"}get adapter(){return Object.assign(Object.assign({},super.adapter),{getProps:()=>this.props,disabledBodyScroll:()=>{var e;const{getPopupContainer:t}=this.props;this.bodyOverflow=document.body.style.overflow||"",(!t||t()===((e=globalThis==null?void 0:globalThis.document)===null||e===void 0?void 0:e.body))&&this.bodyOverflow!=="hidden"&&(document.body.style.overflow="hidden",document.body.style.width=`calc(${this.originBodyWidth||"100%"} - ${this.scrollBarWidth}px)`)},enabledBodyScroll:()=>{var e;const{getPopupContainer:t}=this.props;(!t||t()===((e=globalThis==null?void 0:globalThis.document)===null||e===void 0?void 0:e.body))&&this.bodyOverflow!==null&&this.bodyOverflow!=="hidden"&&(document.body.style.overflow=this.bodyOverflow,document.body.style.width=this.originBodyWidth)},notifyCancel:e=>this.props.onCancel(e),notifyOk:e=>this.props.onOk(e),notifyClose:()=>{this.props.afterClose()},toggleDisplayNone:(e,t)=>{e!==this.state.displayNone&&this.setState({displayNone:e},t||J)},notifyFullScreen:e=>{e!==this.state.isFullScreen&&this.setState({isFullScreen:e})}})}static getDerivedStateFromProps(e,t){const n={};return e.fullScreen!==t.isFullScreen&&(n.isFullScreen=e.fullScreen),e.visible&&t.displayNone&&(n.displayNone=!1),n}componentDidMount(){this.scrollBarWidth=sj(),this.originBodyWidth=document.body.style.width,this.props.visible&&this.foundation.beforeShow()}componentDidUpdate(e,t,n){!e.visible&&this.props.visible&&this.foundation.beforeShow(),!t.displayNone&&this.state.displayNone&&this.foundation.afterHide()}componentWillUnmount(){this.props.visible?this.foundation.destroy():this.foundation.enabledBodyScroll()}render(){return this.props,this.renderDialog()}}tr.propTypes={mask:v.bool,closable:v.bool,centered:v.bool,visible:v.bool,width:v.oneOfType([v.string,v.number]),height:v.oneOfType([v.string,v.number]),confirmLoading:v.bool,cancelLoading:v.bool,okText:v.string,okType:v.string,cancelText:v.string,maskClosable:v.bool,onCancel:v.func,onOk:v.func,afterClose:v.func,okButtonProps:v.object,cancelButtonProps:v.object,style:v.object,className:v.string,maskStyle:v.object,bodyStyle:v.object,zIndex:v.number,title:v.node,icon:v.node,header:v.node,footer:v.node,hasCancel:v.bool,motion:v.bool,children:v.node,getPopupContainer:v.func,getContainerContext:v.func,maskFixed:v.bool,closeIcon:v.node,closeOnEsc:v.bool,size:v.oneOf(h9.SIZE),keepDOM:v.bool,lazyRender:v.bool,direction:v.oneOf(h9.directions),fullScreen:v.bool,footerFill:v.bool};tr.__SemiComponentName__="Modal";tr.defaultProps=os(tr.__SemiComponentName__,{zIndex:1e3,motion:!0,mask:!0,centered:!1,closable:!0,visible:!1,okType:"primary",maskClosable:!0,hasCancel:!0,onCancel:J,onOk:J,afterClose:J,maskFixed:!1,closeOnEsc:!0,size:"small",keepDOM:!1,lazyRender:!0,fullScreen:!1});tr.useModal=KDe;tr.info=function(i){return ox(xee(i))};tr.success=function(i){return ox(See(i))};tr.error=function(i){return ox(wee(i))};tr.warning=function(i){return ox(Cee(i))};tr.confirm=function(i){return ox(Aee(i))};tr.destroyAll=function(){for(let e=0,t=kp.length;e<t;e++){const n=kp[e];n&&n()}kp=[]};const lx={PREFIX:`${ge}-dropdown`,SELECTED:`${ge}-dropdown-item-selected`,DISABLED:`${ge}-dropdown-item-disabled`},QE={POSITION_SET:Zh.POSITION_SET,TRIGGER_SET:["hover","focus","click","custom","contextMenu"],DEFAULT_LEAVE_DELAY:100,ITEM_TYPE:["primary","secondary","tertiary","warning","danger"]},p9={SPACING:4,NESTED_SPACING:2};class YDe extends tt{handleVisibleChange(e){this._adapter.setPopVisible(e),this._adapter.notifyVisibleChange(e);const{trigger:t}=this.getProps();if(e&&t==="click"){const n=this._adapter.getPopupId();this.setFocusToFirstMenuItem(n)}}getMenuItemNodes(e){const t=document.getElementById(e);return t?Array.from(t.getElementsByTagName("li")).filter(n=>n.ariaDisabled==="false"):null}setFocusToFirstMenuItem(e){const t=this.getMenuItemNodes(e);t&&STe(t)}setFocusToLastMenuItem(e){const t=this.getMenuItemNodes(e);t&&CTe(t)}handleKeyDown(e){var t,n;const s=(n=(t=e.target)===null||t===void 0?void 0:t.attributes["data-popupid"])===null||n===void 0?void 0:n.value,{visible:r}=this._adapter.getStates();switch(e.key){case" ":case"Enter":e.target.click();break;case"ArrowDown":this.setFocusToFirstMenuItem(s),r&&jn(e);break;case"ArrowUp":this.setFocusToLastMenuItem(s),r&&jn(e);break}}}class qDe extends tt{constructor(){super(...arguments),this.menuItemNodes=null,this.firstChars=[]}handleEscape(e){this._adapter.getContext("trigger")==="custom"&&(e&&ETe(document.querySelectorAll("[data-popupid]"),e.id)).focus()}setFocusByFirstCharacter(e,t){const n=kTe(this.menuItemNodes,e,this.firstChars,t);n>=0&&ex(this.menuItemNodes,this.menuItemNodes[n])}onMenuKeydown(e){const t=TTe(e.target,"tooltip");this.menuItemNodes||(this.menuItemNodes=[...e.target.parentNode.getElementsByTagName("li")].filter(s=>s.ariaDisabled!=="true")),this.firstChars.length===0&&this.menuItemNodes.forEach(s=>{var r;this.firstChars.push((r=s.textContent.trim()[0])===null||r===void 0?void 0:r.toLowerCase())});const n=this.menuItemNodes.find(s=>s.tabIndex===0);switch(e.key){case" ":case"Enter":e.target.click();break;case"Escape":this.handleEscape(t);break;case"ArrowUp":wTe(this.menuItemNodes,n),jn(e);break;case"ArrowDown":ATe(this.menuItemNodes,n),jn(e);break;default:xTe(e.key)&&this.setFocusByFirstCharacter(n,e.key);break}}}const uy=k.createContext({level:0});var ZDe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const JDe=lx.PREFIX;class Rj extends Ve{constructor(e){super(e),this.foundation=new qDe(this.adapter)}get adapter(){return Object.assign({},super.adapter)}render(){const e=this.props,{children:t,className:n,style:s}=e,r=ZDe(e,["children","className","style"]);return k.createElement("ul",Object.assign({role:"menu","aria-orientation":"vertical"},r,{className:K(`${JDe}-menu`,n),style:s,onKeyDown:a=>this.foundation.onMenuKeydown(a)}),t)}}Rj.propTypes={children:v.node,className:v.string,style:v.object};Rj.contextType=uy;const Jd=lx.PREFIX;class cx extends Ve{render(){const{children:e,disabled:t,className:n,forwardRef:s,style:r,type:a,active:o,icon:l,onKeyDown:c,showTick:u,hover:h}=this.props,{showTick:d}=this.context,p=d??u,f=K(n,{[`${Jd}-item`]:!0,[`${Jd}-item-disabled`]:t,[`${Jd}-item-hover`]:h,[`${Jd}-item-withTick`]:p,[`${Jd}-item-${a}`]:a,[`${Jd}-item-active`]:o}),g={};t||["onClick","onMouseEnter","onMouseLeave","onContextMenu"].forEach(b=>{this.context.level!==1&&b==="onClick"?g.onMouseDown=S=>{var C,w;S.button===0&&((w=(C=this.props)[b])===null||w===void 0||w.call(C,S))}:g[b]=this.props[b]});let m=null;switch(!0){case(p&&o):m=k.createElement(oy,null);break;case(p&&!o):m=k.createElement(oy,{style:{color:"transparent"}});break;default:m=null;break}let y=null;return l&&(y=k.createElement("div",{className:`${Jd}-item-icon`},l)),k.createElement("li",Object.assign({role:"menuitem",tabIndex:-1,"aria-disabled":t},g,{onKeyDown:c,ref:b=>s(b),className:f,style:r},this.getDataAttr(this.props)),m,y,e)}}cx.propTypes={children:v.oneOfType([v.string,v.node]),name:v.string,disabled:v.bool,selected:v.bool,onClick:v.func,onMouseEnter:v.func,onMouseLeave:v.func,onContextMenu:v.func,className:v.string,style:v.object,forwardRef:v.func,type:v.oneOf(QE.ITEM_TYPE),active:v.bool,icon:v.node};cx.contextType=uy;cx.defaultProps={disabled:!1,divided:!1,selected:!1,onMouseEnter:J,onMouseLeave:J,forwardRef:J};cx.elementType="Dropdown.Item";const QDe=lx.PREFIX,kee=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{style:e,className:t}=i;return k.createElement("div",{className:K(`${QDe}-divider`,t),style:e})};kee.propTypes={style:v.object,className:v.string};const f9=lx.PREFIX;class Lj extends H.PureComponent{render(){const{className:e,style:t,children:n}=this.props,{showTick:s}=this.context,r=K({[`${f9}-title`]:!0,[`${f9}-title-withTick`]:s},e);return k.createElement("div",{className:r,style:t},n)}}Lj.propTypes={children:v.node,className:v.string,style:v.object};Lj.contextType=uy;var hM=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const eFe=QE.POSITION_SET,tFe=QE.TRIGGER_SET;class Oi extends Ve{constructor(e){super(e),this.handleVisibleChange=t=>this.foundation.handleVisibleChange(t),this.state={popVisible:e.visible},this.foundation=new YDe(this.adapter),this.tooltipRef=k.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{setPopVisible:e=>this.setState({popVisible:e}),notifyVisibleChange:e=>{var t,n;return(n=(t=this.props).onVisibleChange)===null||n===void 0?void 0:n.call(t,e)},getPopupId:()=>this.tooltipRef.current.getPopupId()})}renderContent(){const{render:e,menu:t,contentClassName:n,style:s,showTick:r,prefixCls:a,trigger:o}=this.props,l=K(a,n),{level:c=0}=this.context,u={showTick:r,level:c+1,trigger:o};let h=null;return k.isValidElement(e)?h=e:Array.isArray(t)&&(h=this.renderMenu()),k.createElement(uy.Provider,{value:u},k.createElement("div",{className:l,style:s},k.createElement("div",{className:`${a}-content`,"x-semi-prop":"render"},h)))}renderMenu(){const{menu:e}=this.props,t=e.map((n,s)=>{switch(n.node){case"title":{const{name:r,node:a}=n,o=hM(n,["name","node"]);return k.createElement(Oi.Title,Object.assign({},o,{key:a+r+s}),r)}case"item":{const{node:r,name:a}=n,o=hM(n,["node","name"]);return k.createElement(Oi.Item,Object.assign({},o,{key:r+a+s}),a)}case"divider":return k.createElement(Oi.Divider,{key:n.node+s});default:return null}});return k.createElement(Oi.Menu,null,t)}renderPopCard(){const{render:e,contentClassName:t,style:n,showTick:s,prefixCls:r}=this.props,a=K(r,t),{level:o=0}=this.context,l={showTick:s,level:o+1};return k.createElement(uy.Provider,{value:l},k.createElement("div",{className:a,style:n},k.createElement("div",{className:`${r}-content`},e)))}render(){const e=this.props,{children:t,position:n,trigger:s,onVisibleChange:r,zIndex:a,className:o,motion:l,margin:c,style:u,prefixCls:h}=e,d=hM(e,["children","position","trigger","onVisibleChange","zIndex","className","motion","margin","style","prefixCls"]);let{spacing:p}=this.props;const{level:f}=this.context,{popVisible:g}=this.state,m=this.renderContent();return f>0?p=typeof p=="number"?p:p9.NESTED_SPACING:(p===null||typeof p>"u")&&(p=p9.SPACING),k.createElement(En,Object.assign({zIndex:a,motion:l,margin:c,content:m,className:o,prefixCls:h,spacing:p,position:n,trigger:s,onVisibleChange:this.handleVisibleChange,showArrow:!1,returnFocusOnClose:!0,ref:this.tooltipRef},d),k.isValidElement(t)?k.cloneElement(t,{className:K(ne(t,"props.className"),{[`${h}-showing`]:g}),"aria-haspopup":!0,"aria-expanded":g,onKeyDown:y=>{this.foundation.handleKeyDown(y);const b=ne(t,"props.onKeyDown");b&&b(y)}}):t)}}Oi.Menu=Rj;Oi.Item=cx;Oi.Divider=kee;Oi.Title=Lj;Oi.contextType=uy;Oi.propTypes={children:v.node,contentClassName:v.oneOfType([v.string,v.array]),className:v.string,getPopupContainer:v.func,margin:v.oneOfType([v.number,v.object]),mouseEnterDelay:v.number,mouseLeaveDelay:v.number,menu:v.array,motion:v.oneOfType([v.bool,v.func,v.object]),onVisibleChange:v.func,prefixCls:v.string,position:v.oneOf(eFe),rePosKey:v.oneOfType([v.string,v.number]),render:v.node,spacing:v.oneOfType([v.number,v.object]),showTick:v.bool,style:v.object,trigger:v.oneOf(tFe),visible:v.bool,zIndex:v.number};Oi.__SemiComponentName__="Dropdown";Oi.defaultProps=os(Oi.__SemiComponentName__,{onVisibleChange:J,prefixCls:lx.PREFIX,zIndex:dh.DEFAULT_Z_INDEX,motion:!0,trigger:"hover",position:"bottom",mouseLeaveDelay:QE.DEFAULT_LEAVE_DELAY,showTick:!1,closeOnEsc:!0,onEscKeyDown:J});const Tee={PREFIX:`${ge}`};var iFe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const g9=["xxl","xl","lg","md","sm","xs"],Eee=k.createContext(null),m9={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"};class mu extends k.Component{constructor(){super(...arguments),this.state={screens:{xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}},this.unRegisters=[]}componentDidMount(){this.unRegisters=Object.keys(m9).map(e=>gQ(m9[e],{match:()=>{typeof this.props.gutter=="object"&&this.setState(t=>({screens:Object.assign(Object.assign({},t.screens),{[e]:!0})}))},unmatch:()=>{typeof this.props.gutter=="object"&&this.setState(t=>({screens:Object.assign(Object.assign({},t.screens),{[e]:!1})}))}}))}componentWillUnmount(){this.unRegisters.forEach(e=>e())}getGutter(){const{gutter:e=0}=this.props,t=[0,0];return(Array.isArray(e)?e.slice(0,2):[e,0]).forEach((s,r)=>{if(typeof s=="object")for(let a=0;a<g9.length;a++){const o=g9[a];if(this.state.screens[o]&&s[o]!==void 0){t[r]=s[o];break}}else t[r]=s||0}),t}render(){const e=this.props,{prefixCls:t,type:n,justify:s,align:r,className:a,style:o,children:l}=e,c=iFe(e,["prefixCls","type","justify","align","className","style","children"]),u=this.getGutter(),h=`${t}-row`,d=K({[h]:n!=="flex",[`${h}-${n}`]:n,[`${h}-${n}-${s}`]:n&&s,[`${h}-${n}-${r}`]:n&&r},a),p=Object.assign(Object.assign(Object.assign({},u[0]>0?{marginLeft:u[0]/-2,marginRight:u[0]/-2}:{}),u[1]>0?{marginTop:u[1]/-2,marginBottom:u[1]/-2}:{}),o),f=Object.assign({},c);return delete f.gutter,k.createElement(Eee.Provider,{value:{gutters:u}},k.createElement("div",Object.assign({},f,{className:d,style:p,"x-semi-prop":"children"}),l))}}mu.propTypes={type:v.oneOf(["flex"]),align:v.oneOf(["top","middle","bottom"]),justify:v.oneOf(["start","end","center","space-around","space-between"]),className:v.string,style:v.object,children:v.node,gutter:v.oneOfType([v.object,v.number,v.array]),prefixCls:v.string};mu.defaultProps={prefixCls:Tee.PREFIX};mu.RowContext={gutters:v.any};var nFe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const pg=v.oneOfType([v.object,v.number]);class fo extends k.Component{render(){const{props:e}=this,{prefixCls:t,span:n,order:s,offset:r,push:a,pull:o,className:l,children:c}=e,u=nFe(e,["prefixCls","span","order","offset","push","pull","className","children"]);let h={};const d=`${t}-col`;["xs","sm","md","lg","xl","xxl"].forEach(m=>{let y={};typeof e[m]=="number"?y.span=e[m]:typeof e[m]=="object"&&(y=e[m]||{}),delete u[m],h=Object.assign(Object.assign({},h),{[`${d}-${m}-${y.span}`]:y.span!==void 0,[`${d}-${m}-order-${y.order}`]:y.order||y.order===0,[`${d}-${m}-offset-${y.offset}`]:y.offset||y.offset===0,[`${d}-${m}-push-${y.push}`]:y.push||y.push===0,[`${d}-${m}-pull-${y.pull}`]:y.pull||y.pull===0})});const p=K(d,{[`${d}-${n}`]:n!==void 0,[`${d}-order-${s}`]:s,[`${d}-offset-${r}`]:r,[`${d}-push-${a}`]:a,[`${d}-pull-${o}`]:o},l,h);let{style:f}=u,g;try{g=this.context.gutters}catch{throw new Error("please make sure <Col> inside <Row>")}return f=Object.assign(Object.assign(Object.assign({},g[0]>0?{paddingLeft:g[0]/2,paddingRight:g[0]/2}:{}),g[1]>0?{paddingTop:g[1]/2,paddingBottom:g[1]/2}:{}),f),k.createElement("div",Object.assign({},u,{style:f,className:p,"x-semi-prop":"children"}),c)}}fo.contextType=Eee;fo.propTypes={span:v.number,order:v.number,offset:v.number,push:v.number,pull:v.number,className:v.string,children:v.node,xs:pg,sm:pg,md:pg,lg:pg,xl:pg,xxl:pg,prefixCls:v.string};fo.defaultProps={prefixCls:Tee.PREFIX};const eP={PREFIX:`${ge}-layout`},sFe={BREAKPOINT:["xs","sm","md","lg","xl","xxl"]},Pee=k.createContext({siderHook:{addSider:Vr,removeSider:Vr}});var rFe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const y9={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},aFe=(()=>{let i=0;return()=>(i+=1,`${eP.PREFIX}-sider-${i}`)})(),oFe=sFe.BREAKPOINT;class f0 extends k.PureComponent{constructor(e){super(e),this.unRegisters=[],this.uniqueId="",this.uniqueId=aFe()}componentDidMount(){const{breakpoint:e}=this.props,n=Object.keys(y9).filter(s=>e&&e.indexOf(s)!==-1).map(s=>gQ(y9[s],{match:()=>{this.responsiveHandler(s,!0)},unmatch:()=>{this.responsiveHandler(s,!1)}}));this.unRegisters=n,this.context.siderHook&&this.context.siderHook.addSider(this.uniqueId)}componentWillUnmount(){this.unRegisters.forEach(e=>e()),this.context.siderHook&&this.context.siderHook.removeSider(this.uniqueId)}responsiveHandler(e,t){const{onBreakpoint:n}=this.props;n&&n(e,t)}render(){const e=this.props,{prefixCls:t,className:n,children:s,style:r}=e,a=rFe(e,["prefixCls","className","children","style"]),o=K(n,{[`${t}-sider`]:!0});return k.createElement("aside",Object.assign({className:o,"aria-label":this.props["aria-label"],style:r},Sl(a)),k.createElement("div",{className:`${t}-sider-children`},s))}}f0.propTypes={prefixCls:v.string,style:v.object,className:v.string,breakpoint:v.arrayOf(v.oneOf(oFe)),onBreakpoint:v.func,"aria-label":v.string,role:v.string};f0.defaultProps={prefixCls:eP.PREFIX};f0.contextType=Pee;f0.elementType="Layout.Sider";var Oee=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const lFe={Header:"header",Footer:"footer",Content:"main",Layout:"section"};function Dj(i){const e=lFe[i],t=i.toLowerCase();return n=>class extends k.PureComponent{render(){return k.createElement(n,Object.assign({role:this.props.role,"aria-label":this.props["aria-label"],type:t,tagName:e},this.props))}}}class ux extends k.PureComponent{render(){const e=this.props,{prefixCls:t,type:n,className:s,children:r,tagName:a}=e,o=Oee(e,["prefixCls","type","className","children","tagName"]),l=K(s,`${t}-${n}`);return k.createElement(a,Object.assign({className:l},o),r)}}ux.propTypes={prefixCls:v.string,style:v.object,className:v.string};ux.defaultProps={prefixCls:eP.PREFIX};const cFe=Dj("Header")(ux),uFe=Dj("Footer")(ux),hFe=Dj("Content")(ux);let yc=class extends k.Component{constructor(e){super(e),this.state={siders:[]}}getSiderHook(){return{addSider:e=>{this.setState(t=>({siders:[...t.siders,e]}))},removeSider:e=>{this.setState(t=>({siders:t.siders.filter(n=>n!==e)}))}}}render(){const e=this.props,{prefixCls:t,className:n,children:s,hasSider:r,tagName:a}=e,o=Oee(e,["prefixCls","className","children","hasSider","tagName"]),{siders:l}=this.state,c=K(n,t,{[`${t}-has-sider`]:typeof r=="boolean"&&r||l.length>0||k.Children.toArray(s).some(h=>k.isValidElement(h)&&h.type&&h.type.elementType==="Layout.Sider")}),u=a;return k.createElement(Pee.Provider,{value:{siderHook:this.getSiderHook()}},k.createElement(u,Object.assign({className:c},o),s))}};yc.propTypes={prefixCls:v.string,style:v.object,className:v.string};yc.defaultProps={prefixCls:eP.PREFIX,tagName:"section"};yc.Header=cFe;yc.Footer=uFe;yc.Content=hFe;yc.Sider=f0;const dFe={PREFIX:`${ge}-form`},Hc=dFe.PREFIX;let Fj=class extends H.PureComponent{render(){const{children:e,required:t,text:n,disabled:s,name:r,width:a,align:o,style:l,className:c,extra:u,id:h,optional:d}=this.props,p=K(c,{[`${Hc}-field-label`]:!0,[`${Hc}-field-label-left`]:o==="left",[`${Hc}-field-label-right`]:o==="right",[`${Hc}-field-label-required`]:t,[`${Hc}-field-label-disabled`]:s,[`${Hc}-field-label-with-extra`]:u}),f=l||{};a&&(f.width=a);const g=k.createElement(gi,{componentName:"Form"},b=>k.createElement("span",{className:`${Hc}-field-label-optional-text`},b.optional)),m=k.createElement("div",{className:`${Hc}-field-label-text`,"x-semi-prop":"label"},typeof n<"u"?n:e,d?g:null),y=k.createElement(k.Fragment,null,m,k.createElement("div",{className:`${Hc}-field-label-extra`},u));return k.createElement("label",{className:p,htmlFor:r,style:f,id:h},u?y:m)}};Fj.defaultProps={required:!1,name:"",align:"left",className:"",optional:!1};Fj.propTypes={id:v.string,children:v.node,required:v.bool,text:v.node,disabled:v.bool,name:v.string,align:v.string,width:v.oneOfType([v.number,v.string]),style:v.object,className:v.string,extra:v.node,optional:v.bool};var _9=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const Qd=KE.PREFIX,pFe=l0.SIZE;class Bj extends Ve{renderGroupWithLabel(e){const t=this.props,{size:n,className:s,label:r,labelPosition:a}=t;_9(t,["size","className","label","labelPosition"]);const o=K({[`${Qd}-group-wrapper`]:!0,[`${Qd}-group-wrapper-with-top-label`]:a==="top",[`${Qd}-group-wrapper-with-left-label`]:a==="left"}),l=K(`${Qd}-group`,s,{[`${Qd}-${n}`]:n!=="default"}),c="input-group";return k.createElement("div",{className:o},r&&r.text?k.createElement(Fj,Object.assign({name:c},r)):null,k.createElement("span",{role:"group","aria-disabled":this.props.disabled,id:r&&r.name||c,className:l,style:this.props.style,onFocus:this.props.onFocus,onBlur:this.props.onBlur},e))}render(){const e=this.props,{size:t,style:n,className:s,children:r,label:a,onBlur:o,onFocus:l,disabled:c}=e,u=_9(e,["size","style","className","children","label","onBlur","onFocus","disabled"]),h=K(`${Qd}-group`,{[`${Qd}-${t}`]:t!=="default"},s);let d;return r&&(d=(Array.isArray(r)?r:[r]).map((p,f)=>{if(p){const{onBlur:g,onFocus:m,disabled:y}=p.props,b=xt(g)&&ne(g,"name")!=="noop"?g:o,x=xt(m)&&ne(m,"name")!=="noop"?m:l,S=typeof y=="boolean"?y:c;return k.cloneElement(p,Object.assign(Object.assign({key:f},u),{size:t,onBlur:b,onFocus:x,disabled:S}))}return null})),a&&a.text?this.renderGroupWithLabel(d):k.createElement("span",{role:"group","aria-label":"Input group","aria-disabled":this.props.disabled,className:h,style:n,onFocus:this.props.onFocus,onBlur:this.props.onBlur},d)}}Bj.propTypes={className:v.string,children:v.node,size:v.oneOf(pFe),style:v.object,onBlur:v.func,onFocus:v.func,label:v.object,labelPosition:v.string};Bj.defaultProps={size:"default",className:"",onBlur:Vr,onFocus:Vr};let sa=null;const v9={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},b9=i=>{Object.keys(v9).forEach(e=>{i.style.setProperty(e,v9[e],"important")})},x9=(i,e)=>{const t=i.scrollHeight;return e.sizingStyle.boxSizing==="border-box"?t+e.borderSize:t-e.paddingSize};function fFe(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/0;sa||(sa=document.createElement("textarea"),sa.setAttribute("tab-index","-1"),sa.setAttribute("aria-hidden","true"),b9(sa)),sa.parentNode===null&&document.body.appendChild(sa);const{paddingSize:s,borderSize:r,sizingStyle:a}=i,{boxSizing:o}=a;Object.keys(a).forEach(d=>{sa.style[d]=a[d]}),b9(sa),sa.value=e;let l=x9(sa,i);sa.value="x";const c=x9(sa,i)-s-r;let u=c*t;o==="border-box"&&(u=u+s+r),l=Math.max(u,l);let h=c*n;return o==="border-box"&&(h=h+s+r),l=Math.min(h,l),l}const gFe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width"],mFe=i=>{const e=window.getComputedStyle(i);if(e===null)return null;const t=lf(e,gFe),{boxSizing:n}=t;if(n==="")return null;const s=parseFloat(t.paddingBottom)+parseFloat(t.paddingTop),r=parseFloat(t.borderBottomWidth)+parseFloat(t.borderTopWidth);return{sizingStyle:t,paddingSize:s,borderSize:r}};class jj extends tt{static get textAreaDefaultAdapter(){return{notifyChange:J,setValue:J,toggleFocusing:J,toggleHovering:J,notifyFocus:J,notifyBlur:J,notifyKeyDown:J,notifyEnterPress:J}}constructor(e){super(Object.assign(Object.assign({},jj.textAreaDefaultAdapter),e)),this.resizeTextarea=()=>{var t;const{height:n}=this.getStates(),{rows:s,autosize:r}=this.getProps(),a=this._adapter.getRef(),o=mFe(a);if(!o)return;const[l,c]=r!==null&&typeof r=="object"?[(t=r==null?void 0:r.minRows)!==null&&t!==void 0?t:s,r==null?void 0:r.maxRows]:[s],u=fFe(o,a.value||a.placeholder||"x",l,c);if(n!==u){this._adapter.notifyHeightUpdate(u),a.style.height=`${u}px`;return}}}destroy(){}handleValueChange(e){this._adapter.setValue(e)}handleChange(e,t){const{maxLength:n,minLength:s,getValueLength:r}=this._adapter.getProps();let a=e;n&&xt(r)&&(a=this.handleVisibleMaxLength(e)),s&&xt(r)&&this.handleVisibleMinLength(a),this._isControlledComponent()?this._adapter.notifyChange(a,t):(this._adapter.setValue(a),this._adapter.notifyChange(a,t))}handleVisibleMinLength(e){const{minLength:t,getValueLength:n}=this._adapter.getProps(),{minLength:s}=this._adapter.getStates();if(Sa(t)&&t>=0&&xt(n)&&Ii(e)){const r=n(e);if(r<t){const a=e.length+(t-r);a!==s&&this._adapter.setMinLength(a)}else s!==t&&this._adapter.setMinLength(t)}}handleVisibleMaxLength(e){const{maxLength:t,getValueLength:n}=this._adapter.getProps();if(Sa(t)&&t>=0&&Ii(e)){if(xt(n)){if(n(e)>t)return console.warn("[Semi TextArea] The input character is truncated because the input length exceeds the maximum length limit"),this.handleTruncateValue(e,t)}else if(e.length>t)return console.warn("[Semi TextArea] The input character is truncated because the input length exceeds the maximum length limit"),e.slice(0,t);return e}}handleTruncateValue(e,t){const{getValueLength:n}=this._adapter.getProps();return jQ({value:e,maxLength:t,getValueLength:n})}handleFocus(e){const{value:t}=this.getStates();this._adapter.toggleFocusing(!0),this._adapter.notifyFocus(t,e)}handleBlur(e){const{value:t}=this.getStates(),{maxLength:n}=this.getProps();let s=t;n&&(s=this.handleVisibleMaxLength(t),s!==t&&(this._isControlledComponent()||this._adapter.setValue(s),this._adapter.notifyChange(s,e))),this._adapter.toggleFocusing(!1),this._adapter.notifyBlur(s,e)}handleKeyDown(e){const{disabledEnterStartNewLine:t}=this.getProps();t&&e.key==="Enter"&&!e.shiftKey&&e.preventDefault(),this._adapter.notifyKeyDown(e),e.keyCode===13&&this._adapter.notifyPressEnter(e)}handleMouseEnter(e){this._adapter.toggleHovering(!0)}handleMouseLeave(e){this._adapter.toggleHovering(!1)}isAllowClear(){const{value:e,isFocus:t,isHover:n}=this._adapter.getStates(),{showClear:s,disabled:r,readonly:a}=this._adapter.getProps();return e&&s&&!r&&(t||n)&&!a}handleClear(e){const{isFocus:t}=this.getStates();this._isControlledComponent("value")?this._adapter.setState({isFocus:!1}):this._adapter.setState({value:"",isFocus:!1}),t&&this._adapter.notifyBlur("",e),this._adapter.notifyChange("",e),this._adapter.notifyClear(e),this.stopPropagation(e)}}var yFe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const cr=KE.PREFIX;class Nj extends Ve{constructor(e){super(e),this.handleClear=n=>{this.foundation.handleClear(n)},this.setRef=n=>{this.libRef.current=n;const{forwardRef:s}=this.props;typeof s=="function"?s(n):s&&typeof s=="object"&&(s.current=n)};const t="value"in e?e.value:e.defaultValue;this.state={value:t,isFocus:!1,isHover:!1,height:0,minLength:e.minLength,cachedValue:e.value},this.focusing=!1,this.foundation=new jj(this.adapter),this.libRef=k.createRef(),this.throttledResizeTextarea=xb(this.foundation.resizeTextarea,10)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setValue:e=>this.setState({value:e},()=>{this.props.autosize&&this.foundation.resizeTextarea()}),getRef:()=>this.libRef.current,toggleFocusing:e=>this.setState({isFocus:e}),toggleHovering:e=>this.setState({isHover:e}),notifyChange:(e,t)=>{this.props.onChange(e,t)},notifyClear:e=>this.props.onClear(e),notifyBlur:(e,t)=>this.props.onBlur(t),notifyFocus:(e,t)=>this.props.onFocus(t),notifyKeyDown:e=>{this.props.onKeyDown(e)},notifyHeightUpdate:e=>{this.setState({height:e}),this.props.onResize({height:e})},notifyPressEnter:e=>{this.props.onEnterPress&&this.props.onEnterPress(e)},setMinLength:e=>this.setState({minLength:e})})}static getDerivedStateFromProps(e,t){const n={};return e.value!==t.cachedValue&&(n.value=e.value,n.cachedValue=e.value),n}componentWillUnmount(){var e,t;this.throttledResizeTextarea&&((t=(e=this.throttledResizeTextarea)===null||e===void 0?void 0:e.cancel)===null||t===void 0||t.call(e),this.throttledResizeTextarea=null)}componentDidUpdate(e,t){(this.props.value!==e.value||this.props.placeholder!==e.placeholder)&&this.props.autosize&&this.foundation.resizeTextarea()}renderClearBtn(){const{showClear:e}=this.props,t=this.foundation.isAllowClear(),n=K(`${cr}-clearbtn`,{[`${cr}-clearbtn-hidden`]:!t});return e?k.createElement("div",{className:n,onClick:this.handleClear},k.createElement(nx,null)):null}renderCounter(){let e,t,n,s;const{showCounter:r,maxCount:a,getValueLength:o}=this.props;if(r||a){const{value:l}=this.state;t=l?xt(o)?o(l):l.length:0,n=a||null,s=K(`${cr}-textarea-counter`,{[`${cr}-textarea-counter-exceed`]:t>n}),e=k.createElement("div",{className:s},t,n?"/":null,n)}else e=null;return e}render(){const e=this.props,{autosize:t,placeholder:n,onEnterPress:s,onResize:r,disabled:a,readonly:o,className:l,showCounter:c,validateStatus:u,maxCount:h,defaultValue:d,style:p,forwardRef:f,getValueLength:g,maxLength:m,minLength:y,showClear:b,borderless:x,autoFocus:S}=e,C=yFe(e,["autosize","placeholder","onEnterPress","onResize","disabled","readonly","className","showCounter","validateStatus","maxCount","defaultValue","style","forwardRef","getValueLength","maxLength","minLength","showClear","borderless","autoFocus"]),{isFocus:w,value:A,minLength:T}=this.state,E=K(l,`${cr}-textarea-wrapper`,{[`${cr}-textarea-borderless`]:x,[`${cr}-textarea-wrapper-disabled`]:a,[`${cr}-textarea-wrapper-readonly`]:o,[`${cr}-textarea-wrapper-${u}`]:!!u,[`${cr}-textarea-wrapper-focus`]:w}),P=K(`${cr}-textarea`,{[`${cr}-textarea-disabled`]:a,[`${cr}-textarea-readonly`]:o,[`${cr}-textarea-autosize`]:As(t)?Hr(t==null?void 0:t.maxRows):t,[`${cr}-textarea-showClear`]:b}),O=Object.assign(Object.assign({},_n(C,"insetLabel","insetLabelId","getValueLength","onClear","showClear","disabledEnterStartNewLine")),{autoFocus:S||this.props.autofocus,className:P,disabled:a,readOnly:o,placeholder:n||null,onChange:M=>this.foundation.handleChange(M.target.value,M),onFocus:M=>this.foundation.handleFocus(M),onBlur:M=>this.foundation.handleBlur(M.nativeEvent),onKeyDown:M=>this.foundation.handleKeyDown(M),value:A??""});return xt(g)||(O.maxLength=m),T&&(O.minLength=T),k.createElement("div",{className:E,style:p,onMouseEnter:M=>this.foundation.handleMouseEnter(M),onMouseLeave:M=>this.foundation.handleMouseLeave(M)},t?k.createElement(jp,{onResize:this.throttledResizeTextarea},k.createElement("textarea",Object.assign({},O,{ref:this.setRef}))):k.createElement("textarea",Object.assign({},O,{ref:this.setRef})),this.renderClearBtn(),this.renderCounter())}}Nj.propTypes={autosize:v.oneOfType([v.bool,v.object]),borderless:v.bool,placeholder:v.string,value:v.string,rows:v.number,cols:v.number,maxCount:v.number,onEnterPress:v.func,validateStatus:v.string,className:v.string,style:v.object,showClear:v.bool,onClear:v.func,onResize:v.func,getValueLength:v.func,disabledEnterStartNewLine:v.bool};Nj.defaultProps={autosize:!1,borderless:!1,rows:4,cols:20,showCounter:!1,showClear:!1,onEnterPress:J,onChange:J,onBlur:J,onFocus:J,onKeyDown:J,onResize:J,onClear:J};const Mee=k.forwardRef((i,e)=>k.createElement(Nj,Object.assign({},i,{forwardRef:e})));var _Fe=FQ;function vFe(i){return _Fe(i)&&i!=+i}var bFe=vFe;const xFe=Xe(bFe),SFe=(i,e)=>{const{isNaN:t}=Number;return t(i)&&t(e)},CFe=Object.assign({},KE),Tp=Object.assign(Object.assign({},A2e),{DEFAULT_STEP:1,DEFAULT_SHIFT_STEP:10,DEFAULT_PRESS_TIMEOUT:250,DEFAULT_PRESS_INTERVAL:0,MOUSE_BUTTON_LEFT:0}),wFe=Object.assign({},l0);function AFe(i,e){const t=(i.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=Math.pow(10,Math.max(t,n));return(i*s+e*s)/s}function S9(i,e){return AFe(i,-e)}class kFe extends tt{init(){this._setInitValue()}destroy(){this._unregisterInterval(),this._unregisterTimer(),this._adapter.unregisterGlobalEvent("mouseup")}isControlled(){return this._isControlledComponent("value")}_doInput(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=e,r=e,a=!0;const o=this.isControlled();typeof e!="number"&&(r=this.doParse(e,!1),a=!isNaN(r)),a&&(s=r,o||this._adapter.setNumber(r)),o||this._adapter.setValue(e,n),this.getProp("keepFocus")&&this._adapter.setFocusing(!0,()=>{this._adapter.setClickUpOrDown(!0)}),this.notifyChange(s,t)}_registerInterval(e){const t=this.getProp("pressInterval")||Tp.DEFAULT_PRESS_INTERVAL;this._intervalHasRegistered=!0,this._interval=setInterval(()=>{typeof e=="function"&&this._intervalHasRegistered&&e()},t)}_unregisterInterval(){this._interval&&(this._intervalHasRegistered=!1,clearInterval(this._interval),this._interval=null)}_registerTimer(e){const t=this.getProp("pressTimeout")||Tp.DEFAULT_PRESS_TIMEOUT;this._timerHasRegistered=!0,this._timer=setTimeout(()=>{this._timerHasRegistered&&typeof e=="function"&&e()},t)}_unregisterTimer(){this._timer&&(this._timerHasRegistered=!1,clearTimeout(this._timer),this._timer=null)}handleInputFocus(e){this.getState("value"),this._adapter.recordCursorPosition(),this._adapter.setFocusing(!0,null),this._adapter.setClickUpOrDown(!1),this._adapter.notifyFocus(e)}handleInputChange(e,t){const n=this.doParse(e,!0,!0,!0),s=this.doParse(e,!1,!1,!1),r=this.afterParser(e);this._adapter.recordCursorPosition();let a,o=s,l=e;if(e==="")this.isControlled()||(o=null);else if(this.isValidNumber(s)&&this.isValidNumber(n))a=s,l=this.doFormat(s,!1);else{if(typeof s=="number"&&!isNaN(s)){l=this.doFormat(s,!1);const c=r.lastIndexOf("."),u=r.length-1-c,h=this._getPrecLen(s);if(h){if(h<u)for(let d=0;d<u-h;d++)l+="0"}else{const d=c>-1?r.slice(c):"";l+=d}o=s}else l=this.doFormat(r,!1);a=r}!this.isControlled()&&(o===null||typeof o=="number"&&!isNaN(o))&&this._adapter.setNumber(o),this._adapter.setValue(this.isControlled()?l:this.doFormat(r,!1),()=>{this._adapter.restoreCursor()}),this.notifyChange(a,t)}handleInputKeyDown(e){const t=e.keyCode;if(t===ds.UP||t===ds.DOWN){this._adapter.setClickUpOrDown(!0),this._adapter.recordCursorPosition();const n=t===ds.UP?this.add(null,e):this.minus(null,e);this._doInput(n,e,()=>{this._adapter.restoreCursor()}),e.preventDefault()}this._adapter.notifyKeyDown(e)}handleInputBlur(e){const t=hh(this.getState("value"));let n=this.getState("number");if(n!=null||t!=null&&t!==""){const s=this.doParse(t,!1,!0,!0);let r=!1,a=!1,o,l;this.isValidNumber(s)&&n!==s&&(o=s,this.isControlled()||(n=o),r=!0);const c=this.doFormat(n,!0);if(c!==t&&(l=c,a=!0),a||r){const u=l??o;l!=null&&this._adapter.setValue(l),o!=null&&(this._isControlledComponent("value")||this._adapter.setNumber(o)),this.notifyChange(u,e)}}this._adapter.setFocusing(!1),this._adapter.notifyBlur(e)}handleInputMouseEnter(e){this._adapter.setHovering(!0)}handleInputMouseLeave(e){this._adapter.setHovering(!1)}handleInputMouseMove(e){this._adapter.setHovering(!0)}handleMouseUp(e){this._unregisterInterval(),this._unregisterTimer(),this._adapter.unregisterGlobalEvent("mouseup")}handleUpClick(e){const{readonly:t}=this.getProps();!this._isMouseButtonLeft(e)||t||(this._adapter.setClickUpOrDown(!0),e&&(this._persistEvent(e),e.stopPropagation(),this._preventDefault(e)),this.upClick(e),this._registerTimer(()=>{this._registerInterval(()=>{this.upClick(e)})}))}handleDownClick(e){const{readonly:t}=this.getProps();!this._isMouseButtonLeft(e)||t||(this._adapter.setClickUpOrDown(!0),e&&(this._persistEvent(e),e.stopPropagation(),this._preventDefault(e)),this.downClick(e),this._registerTimer(()=>{this._registerInterval(()=>{this.downClick(e)})}))}_isMouseButtonLeft(e){return ne(e,"button")===Tp.MOUSE_BUTTON_LEFT}_preventDefault(e){const t=this._adapter.getProp("keepFocus"),n=this._adapter.getProp("innerButtons");(t||n)&&e.preventDefault()}handleMouseLeave(e){this._adapter.registerGlobalEvent("mouseup",()=>{this.handleMouseUp(e)})}upClick(e){const t=this.add(null,e);this._doInput(t,e),this._adapter.notifyUpClick(t,e)}downClick(e){const t=this.minus(null,e);this._doInput(t,e),this._adapter.notifyDownClick(t,e)}_setInitValue(){const{defaultValue:e,value:t}=this.getProps(),n=this._isControlledComponent("value")?t:e,s=this.doParse(hh(n),!1,!0,!0);let r=null;typeof s=="number"&&!isNaN(s)&&(r=s);const a=typeof r=="number"?this.doFormat(r,!0):"";this._adapter.setNumber(r),this._adapter.setValue(a),Ii(a)&&a!==String(n??"")&&this.notifyChange(a,null)}add(e,t){const s=t&&t.shiftKey?this.getProp("shiftStep"):this.getProp("step");e=e==null?s:Number(e);const r=Math.abs(K0(e)),a=this.getState("number");let o=this.toNumber(a)||0;const l=this.getProp("min"),c=this.getProp("max"),u=this._getPrecLen(l),h=this._getPrecLen(c),d=this._getPrecLen(o),p=this._getPrecLen(e),f=Math.pow(10,Math.max(u,h,d,p));return e<0?Math.abs(S9(l,o))>=r&&(o=(o*f+e*f)/f):e>0&&Math.abs(S9(c,o))>=r&&(o=(o*f+e*f)/f),typeof l=="number"&&l>o&&(o=l),typeof c=="number"&&c<o&&(o=c),this.doFormat(o,!0)}minus(e,t){const s=t&&t.shiftKey?this.getProp("shiftStep"):this.getProp("step");return e=e==null?s:Number(e),this.add(-e,t)}_getPrecLen(e){typeof e!="string"&&(e=String(Math.abs(Number(e||""))));const t=e.indexOf(".")+1;return t?e.length-t:0}_adjustPrec(e){const t=this.getProp("precision");return typeof t=="number"&&e!==""&&e!==null&&!Number.isNaN(Number(e))&&(e=Number(e).toFixed(t)),hh(e)}doFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n;const s=this.getProp("formatter");return t?n=this._adjustPrec(e):n=hh(e),typeof s=="function"&&(n=s(n)),n}fetchMinOrMax(e){const{min:t,max:n}=this.getProps();return e<t?t:e>n?n:e}doParse(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(typeof e=="number")return s&&(e=this.fetchMinOrMax(e)),n&&(e=this._adjustPrec(e)),K0(e);const r=this.getProp("parser");if(typeof r=="function"&&(e=r(e)),t&&typeof e=="string"){const a=e.indexOf(".")===-1||e.indexOf(".")>-1&&(e==="0"||e.lastIndexOf("0")<e.length-1),o=e.lastIndexOf(".")<e.length-1&&e.split("").filter(l=>l===".").length<2;if(!a||!o)return NaN}return n&&(e=this._adjustPrec(e)),typeof e=="string"&&e.length?s?this.fetchMinOrMax(K0(e)):K0(e):NaN}afterParser(e){const t=this.getProp("parser");return hh(typeof e=="string"&&typeof t=="function"?t(e):e)}toNumber(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof e=="number")return e;if(typeof e=="string"){const n=this.getProp("parser");typeof n=="function"&&(e=n(e)),t&&(e=this._adjustPrec(e))}return K0(e)}isValidNumber(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof e=="number"&&!isNaN(e)){const{min:n,max:s,precision:r}=this.getProps(),a=this._getPrecLen(e),o=t?typeof r=="number"&&a<=r||typeof r!="number":!0;if(e>=n&&e<=s&&o)return!0}return!1}isValidString(e){if(typeof e=="string"&&e.length){const t=this.doParse(e);return this.isValidNumber(t)}return!1}notifyChange(e,t){if(e==null||e==="")this._adapter.notifyChange("",t);else{const n=this.toNumber(e,!0);typeof n=="number"&&!isNaN(n)?(this._adapter.notifyChange(n,t),this.notifyNumberChange(n,t)):this._adapter.notifyChange(this.afterParser(e),t)}}notifyNumberChange(e,t){const{number:n}=this.getStates();this.isValidNumber(e)&&e!==n&&this._adapter.notifyNumberChange(e,t)}updateStates(e,t){this._adapter.updateStates(e,t)}}var TFe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};class nA extends Ve{get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{setValue:(t,n)=>this.setState({value:t},n),setNumber:(t,n)=>this.setState({number:t},n),setFocusing:(t,n)=>this.setState({focusing:t},n),setHovering:t=>this.setState({hovering:t}),notifyChange:function(){return e.props.onChange(...arguments)},notifyNumberChange:function(){return e.props.onNumberChange(...arguments)},notifyBlur:t=>this.props.onBlur(t),notifyFocus:t=>this.props.onFocus(t),notifyUpClick:(t,n)=>this.props.onUpClick(t,n),notifyDownClick:(t,n)=>this.props.onDownClick(t,n),notifyKeyDown:t=>this.props.onKeyDown(t),registerGlobalEvent:(t,n)=>{t&&typeof n=="function"&&(this.adapter.unregisterGlobalEvent(t),this.adapter.setCache(t,n),document.addEventListener(t,n))},unregisterGlobalEvent:t=>{if(t){const n=this.adapter.getCache(t);document.removeEventListener(t,n),this.adapter.setCache(t,null)}},recordCursorPosition:()=>{try{this.inputNode&&(this.cursorStart=this.inputNode.selectionStart,this.cursorEnd=this.inputNode.selectionEnd,this.currentValue=this.inputNode.value,this.cursorBefore=this.inputNode.value.substring(0,this.cursorStart),this.cursorAfter=this.inputNode.value.substring(this.cursorEnd))}catch(t){console.warn(t)}},restoreByAfter:t=>{if(Ms(t))return!1;const n=this.inputNode.value,s=n.lastIndexOf(t);return s===-1?!1:s+t.length===n.length?(this.adapter.fixCaret(s,s),!0):!1},restoreCursor:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.cursorAfter;return Ms(t)?!1:Array.prototype.some.call(t,(n,s)=>{const r=t.substring(s);return e.adapter.restoreByAfter(r)})},fixCaret:(t,n)=>{if(!(t===void 0||n===void 0||!this.inputNode||!this.inputNode.value))try{const s=this.inputNode.selectionStart,r=this.inputNode.selectionEnd;(t!==s||n!==r)&&this.inputNode.setSelectionRange(t,n)}catch{}},setClickUpOrDown:t=>{this.clickUpOrDown=t},updateStates:(t,n)=>{this.setState(t,n)}})}constructor(e){super(e),this.setInputRef=t=>{const{forwardedRef:n}=this.props;this.inputNode=t,n&&typeof n=="object"?n.current=t:typeof n=="function"&&n(t)},this.handleInputFocus=t=>this.foundation.handleInputFocus(t),this.handleInputChange=(t,n)=>this.foundation.handleInputChange(t,n),this.handleInputBlur=t=>this.foundation.handleInputBlur(t),this.handleInputKeyDown=t=>this.foundation.handleInputKeyDown(t),this.handleInputMouseEnter=t=>this.foundation.handleInputMouseEnter(t),this.handleInputMouseLeave=t=>this.foundation.handleInputMouseLeave(t),this.handleInputMouseMove=t=>this.foundation.handleInputMouseMove(t),this.handleUpClick=t=>this.foundation.handleUpClick(t),this.handleDownClick=t=>this.foundation.handleDownClick(t),this.handleMouseUp=t=>this.foundation.handleMouseUp(t),this.handleMouseLeave=t=>this.foundation.handleMouseLeave(t),this.renderButtons=()=>{const{prefixCls:t,disabled:n,innerButtons:s,max:r,min:a}=this.props,{hovering:o,focusing:l,number:c}=this.state,u=n||c===r,h=n||c===a,d=K(`${t}-number-suffix-btns`,{[`${t}-number-suffix-btns-inner`]:s,[`${t}-number-suffix-btns-inner-hover`]:s&&o&&!l}),p=K(`${t}-number-button`,`${t}-number-button-up`,{[`${t}-number-button-up-disabled`]:n,[`${t}-number-button-up-not-allowed`]:u}),f=K(`${t}-number-button`,`${t}-number-button-down`,{[`${t}-number-button-down-disabled`]:n,[`${t}-number-button-down-not-allowed`]:h});return k.createElement("div",{className:d},k.createElement("span",{className:p,onMouseDown:u?J:this.handleUpClick,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave},k.createElement(SQ,{size:"extra-small"})),k.createElement("span",{className:f,onMouseDown:h?J:this.handleDownClick,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave},k.createElement(af,{size:"extra-small"})))},this.renderSuffix=()=>{const{innerButtons:t,suffix:n}=this.props,{hovering:s,focusing:r}=this.state;return t&&(s||r)?this.renderButtons():n},this.state={value:"",number:null,focusing:!!e.autofocus||!1,hovering:!1},this.inputNode=null,this.foundation=new kFe(this.adapter),this.clickUpOrDown=!1}componentDidUpdate(e){const{value:t,preventScroll:n}=this.props,{focusing:s}=this.state;let r;if(t!==e.value&&!SFe(t,e.value)){if(Ms(t)||t==="")r="",this.foundation.updateStates({value:r,number:null});else{let a=t;typeof t=="number"&&(a=this.foundation.doFormat(t));const o=this.foundation.doParse(a,!1,!0,!0),l=typeof t=="number"?t:this.foundation.doParse(a,!1,!1,!1);if(s)if(this.foundation.isValidNumber(o)&&o!==this.state.number){const c={number:o};this.clickUpOrDown&&(c.value=this.foundation.doFormat(c.number,!0),r=c.value),this.foundation.updateStates(c,()=>this.adapter.restoreCursor())}else xFe(l)?this.foundation.updateStates({value:a}):(r=this.foundation.doFormat(l,!1),this.foundation.updateStates({value:r}));else this.foundation.isValidNumber(o)?(r=this.foundation.doFormat(o),this.foundation.updateStates({number:o,value:r})):(r="",this.foundation.updateStates({number:null,value:r}))}r&&Ii(r)&&r!==String(this.props.value)&&this.foundation.notifyChange(r,null)}this.clickUpOrDown&&this.props.keepFocus&&this.state.focusing&&document.activeElement!==this.inputNode&&this.inputNode.focus({preventScroll:n})}render(){const e=this.props,{disabled:t,className:n,prefixCls:s,min:r,max:a,step:o,shiftStep:l,precision:c,formatter:u,parser:h,forwardedRef:d,onUpClick:p,onDownClick:f,pressInterval:g,pressTimeout:m,suffix:y,size:b,hideButtons:x,innerButtons:S,style:C,onNumberChange:w,keepFocus:A,defaultValue:T}=e,E=TFe(e,["disabled","className","prefixCls","min","max","step","shiftStep","precision","formatter","parser","forwardedRef","onUpClick","onDownClick","pressInterval","pressTimeout","suffix","size","hideButtons","innerButtons","style","onNumberChange","keepFocus","defaultValue"]),{value:P,number:O}=this.state,M=K(n,`${s}-number`,{[`${s}-number-size-${b}`]:b}),R=this.renderButtons(),j={"aria-disabled":t,step:o};return O&&(j["aria-valuenow"]=O),a!==1/0&&(j["aria-valuemax"]=a),r!==-1/0&&(j["aria-valuemin"]=r),k.createElement("div",{className:M,style:C,onMouseMove:D=>this.handleInputMouseMove(D),onMouseEnter:D=>this.handleInputMouseEnter(D),onMouseLeave:D=>this.handleInputMouseLeave(D)},k.createElement(ll,Object.assign({role:"spinbutton"},j,E,{size:b,disabled:t,ref:this.setInputRef,value:P,onFocus:this.handleInputFocus,onChange:this.handleInputChange,onBlur:this.handleInputBlur,onKeyDown:this.handleInputKeyDown,suffix:this.renderSuffix()})),x||S?null:R)}}nA.propTypes={"aria-label":v.string,"aria-labelledby":v.string,"aria-invalid":v.bool,"aria-errormessage":v.string,"aria-describedby":v.string,"aria-required":v.bool,autofocus:v.bool,clearIcon:v.node,className:v.string,defaultValue:v.oneOfType([v.number,v.string]),disabled:v.bool,formatter:v.func,forwardedRef:v.any,hideButtons:v.bool,innerButtons:v.bool,insetLabel:v.node,insetLabelId:v.string,keepFocus:v.bool,max:v.number,min:v.number,parser:v.func,precision:v.number,prefixCls:v.string,pressInterval:v.number,pressTimeout:v.number,preventScroll:v.bool,shiftStep:v.number,step:v.number,style:v.object,suffix:v.any,value:v.oneOfType([v.number,v.string]),onBlur:v.func,onChange:v.func,onDownClick:v.func,onKeyDown:v.func,onNumberChange:v.func,onUpClick:v.func};nA.defaultProps={forwardedRef:J,innerButtons:!1,keepFocus:!1,max:1/0,min:-1/0,prefixCls:CFe.PREFIX,pressInterval:Tp.DEFAULT_PRESS_TIMEOUT,pressTimeout:Tp.DEFAULT_PRESS_TIMEOUT,shiftStep:Tp.DEFAULT_SHIFT_STEP,size:wFe.DEFAULT_SIZE,step:Tp.DEFAULT_STEP,onBlur:J,onChange:J,onDownClick:J,onFocus:J,onKeyDown:J,onNumberChange:J,onUpClick:J};const EFe=xRe(k.forwardRef(function(e,t){return k.createElement(nA,Object.assign({},e,{forwardedRef:t}))}),nA),C9="horizontal",w9="vertical",cl={PREFIX:`${ge}-navigation`},_i={MODE:[w9,C9],MODE_VERTICAL:w9,MODE_HORIZONTAL:C9,ICON_POS_LEFT:"left",ICON_POS_RIGHT:"right",DEFAULT_LOGO_ICON_SIZE:"extra-large",TOGGLE_ICON_LEFT:"left",TOGGLE_ICON_RIGHT:"right"},im={DEFAULT_SUBNAV_MAX_HEIGHT:999,DEFAULT_TOOLTIP_SHOW_DELAY:0,DEFAULT_TOOLTIP_HIDE_DELAY:100,DEFAULT_SUBNAV_OPEN_DELAY:0,DEFAULT_SUBNAV_CLOSE_DELAY:100},A9={open:"chevron_up",closed:"chevron_down"};let PFe=class _L{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(e==null||typeof e!="object")&&(e={text:e,itemKey:e,maxHeight:im.DEFAULT_SUBNAV_MAX_HEIGHT,link:null,items:null,icon:"",indent:!1});for(const t of Object.keys(e))this[t]=e[t];e.items&&Array.isArray(e.items)&&e.items.length?(this.items=e.items.map(t=>new _L(t)),"toggleIcon"in e?this.toggleIcon=_L.isValidToggleIcon(e.toggleIcon)?Object.assign({},e.toggleIcon):Object.assign({},A9):this.toggleIcon=Object.assign({},A9)):this.items=null}static isValidToggleIcon(e){return!!(e&&typeof e=="object"&&typeof e.open=="string"&&e.open.length&&typeof e.closed=="string"&&e.closed.length)}};class nm extends tt{constructor(e){super(Object.assign({},e))}static getZeroParentKeys(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=[];for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];if(s.length){for(const a of s)if(Array.isArray(e[a])&&e[a].length){const o=e[a][0];Ms(o)||t.push(o)}}return t}static buildItemKeysMap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"itemKey";if(Array.isArray(e)&&e.length)for(const r of e)if(Array.isArray(r))nm.buildItemKeysMap(r,t,[...n],s);else{let a;if(r&&typeof r=="object"&&(a=r[s]||r.props&&r.props[s]),a){if(t[a]=[...n],Array.isArray(r.items)&&r.items.length)nm.buildItemKeysMap(r.items,t,[...n,a],s);else if(r.props&&r.props.children){const o=Array.isArray(r.props.children)?r.props.children:[r.props.children];nm.buildItemKeysMap(o,t,[...n,a],s)}}}return t}init(e){const{defaultSelectedKeys:t,selectedKeys:n}=this.getProps();let s=n||t||[];const{itemKeysMap:r,willOpenKeys:a,formattedItems:o}=this.getCalcState(),l=this.selectLevelZeroParentKeys(r,s);if(s=s.concat(l),e==="constructor")return{selectedKeys:s,itemKeysMap:r,openKeys:a,items:o};this._adapter.updateSelectedKeys(s,!1),this._adapter.setItemKeysMap(r),this._adapter.updateOpenKeys(a),this._adapter.updateItems(o),this._adapter.setItemsChanged(!0)}getCalcState(){const{itemKeysMap:e,formattedItems:t}=this.getFormattedItems(),n=this.getWillOpenKeys(e);return{itemKeysMap:e,willOpenKeys:n,formattedItems:t}}getFormattedItems(){const{items:e,children:t}=this.getProps(),n=this.formatItems(e),s=Array.isArray(e)&&e.length?n:t;return{itemKeysMap:nm.buildItemKeysMap(s),formattedItems:n}}getWillOpenKeys(e){const{defaultOpenKeys:t,openKeys:n,defaultSelectedKeys:s,selectedKeys:r,mode:a}=this.getProps(),{openKeys:o=[]}=this.getStates();let l=n||t||[];if(!(Array.isArray(t)||Array.isArray(n))&&a===_i.MODE_VERTICAL&&(Array.isArray(s)||Array.isArray(r))){const c=Array.isArray(r)?r:s;l=o.concat(this.getShouldOpenKeys(e,c)),l=Array.from(new Set(l))}return[...l]}getShouldOpenKeys(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const n=new Set;return Array.isArray(t)&&t.length&&t.forEach(s=>{if(s){const r=ne(e,s);Array.isArray(r)&&r.forEach(a=>n.add(a))}}),[...n]}destroy(){}selectLevelZeroParentKeys(e,t){const n=Ms(e)?this.getState("itemKeysMap"):e,s=[];if(t.length){for(const r of t)if(Array.isArray(n[r])&&n[r].length){const a=n[r][0];Ms(a)||s.push(a)}}return s.length?s:[]}formatItems(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];for(const n of e)t.push(new PFe(n));return t}handleSelect(e){this._adapter.notifySelect(e)}judgeIfOpen(e,t){let n=!1;const s=Array.isArray(e)?e:e&&[e];if(s&&Array.isArray(t)&&t.length){for(const r of t)if(n=s.includes(r.itemKey)||this.judgeIfOpen(s,r.items),n)break}return n}handleCollapseChange(){const e=!this.getState("isCollapsed");this._isControlledComponent("isCollapsed")||this._adapter.setIsCollapsed(e),this._adapter.notifyCollapseChange(e)}handleItemsChange(e){this._adapter.setItemsChanged(e)}}const k9=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=new Set(e);for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return s.forEach(a=>a&&t.add(a)),Array.from(t)},T9=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=new Set(e);for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return s.forEach(a=>a&&t.delete(a)),Array.from(t)};class OFe extends tt{constructor(e){super(Object.assign({},e))}init(){this._timer=null}destroy(){this.clearDelayTimer()}clearDelayTimer(){this._timer&&(clearTimeout(this._timer),this._timer=null)}isValidKey(e){return e!=null&&(typeof e=="number"||typeof e=="string")}handleDropdownVisibleChange(e){const t=this.getProp("itemKey"),n=this._adapter.getOpenKeysIsControlled(),s=this._adapter.getCanUpdateOpenKeys(),r=this._adapter.getOpenKeys(),a=e?k9(r,t):T9(r,t);this.clearDelayTimer(),n||s&&this._adapter.updateOpen(e),this._adapter.notifyGlobalOpenChange({itemKey:t,openKeys:a,isOpen:e})}handleClick(e,t){const{itemKey:n,disabled:s}=this.getProps();if(s)return;const r=t&&t.contains(e.target);let a=!!this._adapter.getIsOpen();r?a=!a:a=!1;const o=a?k9(this._adapter.getOpenKeys(),n):T9(this._adapter.getOpenKeys(),n),l={itemKey:n,openKeys:o,isOpen:a,domEvent:e},c=this._adapter.getOpenKeysIsControlled(),u=this._adapter.getCanUpdateOpenKeys();!c&&u&&this._adapter.updateOpen(a),this._adapter.notifyGlobalOpenChange(l),this._adapter.notifyGlobalOnClick(l)}handleKeyPress(e,t){jd(e)&&this.handleClick(e,t)}}class MFe extends tt{constructor(e){super(Object.assign({},e))}init(){this._timer=null,this._mounted=!0}destroy(){this._mounted=!1}isValidKey(e){return e!=null&&(typeof e=="string"||typeof e=="number")}handleClick(e){const{isSubNav:t,itemKey:n,text:s,disabled:r}=this.getProps();if(r)return;!t&&this.isValidKey(n)&&!this._adapter.getSelectedKeysIsControlled()&&!this._adapter.getSelected()&&this._adapter.updateSelected(!0);const a=[n];if(!t){if(!this._adapter.getSelected()){const o=[this._adapter.cloneDeep(this.getProps())];this._adapter.notifyGlobalOnSelect({itemKey:n,selectedKeys:a,selectedItems:o,domEvent:e})}this._adapter.notifyGlobalOnClick({itemKey:n,text:s,domEvent:e})}this._adapter.notifyClick({itemKey:n,text:s,domEvent:e})}handleKeyPress(e){if(jd(e)){const{link:t,linkOptions:n}=this.getProps(),s=ne(n,"target","_self");this.handleClick(e),typeof t=="string"&&(s==="_blank"?window.open(t):window.location.href=t)}}}const g0=k.createContext({isCollapsed:!1,selectedKeys:[],openKeys:[]}),ur=`${cl.PREFIX}-item`;class m0 extends Ve{constructor(e){super(e),this.setItemRef=t=>{this.props.forwardRef&&this.props.forwardRef(t)},this.wrapTooltip=t=>{const{text:n,tooltipHideDelay:s,tooltipShowDelay:r}=this.props,a=s??this.context.tooltipHideDelay,o=r??this.context.tooltipShowDelay;return k.createElement(En,{content:n,position:"right",trigger:"hover",mouseEnterDelay:o,mouseLeaveDelay:a},t)},this.handleClick=t=>this.foundation.handleClick(t),this.handleKeyPress=t=>this.foundation.handleKeyPress(t),this.state={tooltipShow:!1},this.foundation=new MFe(this.adapter)}_invokeContextFunc(e){if(e&&this.context&&typeof this.context[e]=="function"){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return this.context[e](...n)}return null}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{cloneDeep:sl,updateTooltipShow:t=>this.setState({tooltipShow:t}),updateSelected:t=>this._invokeContextFunc("updateSelectedKeys",[this.props.itemKey]),updateGlobalSelectedKeys:t=>this._invokeContextFunc("updateSelectedKeys",[...t]),getSelectedKeys:()=>this.context&&this.context.selectedKeys,getSelectedKeysIsControlled:()=>this.context&&this.context.selectedKeysIsControlled,notifyGlobalOnSelect:function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e._invokeContextFunc("onSelect",...n)},notifyGlobalOnClick:function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e._invokeContextFunc("onClick",...n)},notifyClick:function(){return e.props.onClick(...arguments)},notifyMouseEnter:function(){return e.props.onMouseEnter(...arguments)},notifyMouseLeave:function(){return e.props.onMouseLeave(...arguments)},getIsCollapsed:()=>this.props.isCollapsed||!!(this.context&&this.context.isCollapsed)||!1,getSelected:()=>!!(this.context&&this.context.selectedKeys&&this.context.selectedKeys.includes(this.props.itemKey)),getIsOpen:()=>!!(this.context&&this.context.openKeys&&this.context.openKeys.includes(this.props.itemKey))})}renderIcon(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(this.props.isSubNav||!e&&this.context.mode===_i.MODE_HORIZONTAL)return null;let r="large";t===_i.ICON_POS_RIGHT&&(r="default");const a=K(`${ur}-icon`,{[`${ur}-icon-toggle-${this.context.toggleIconPosition}`]:n,[`${ur}-icon-info`]:!n});return k.createElement("i",{className:a,key:s},oo(e)?k.cloneElement(e,{size:e.props.size||r}):e)}render(){const{text:e,children:t,icon:n,toggleIcon:s,className:r,isSubNav:a,style:o,indent:l,onMouseEnter:c,onMouseLeave:u,link:h,linkOptions:d,disabled:p,level:f=0,tabIndex:g}=this.props,{mode:m,isInSubNav:y,prefixCls:b,limitIndent:x}=this.context,S=this.adapter.getIsCollapsed(),C=this.adapter.getSelected();let w=null;if(!Ms(t))w=t;else{let T=null;if(m===_i.MODE_VERTICAL&&!x&&!S){const E=n&&!l?f:f-1;T=fee(E,P=>this.renderIcon(null,_i.ICON_POS_RIGHT,!1,P))}w=k.createElement(k.Fragment,null,T,this.context.toggleIconPosition===_i.TOGGLE_ICON_LEFT&&this.renderIcon(s,_i.ICON_POS_RIGHT,!0,"key-toggle-pos-right"),n||l||y?this.renderIcon(n,_i.ICON_POS_LEFT,!1,"key-position-left"):null,Ms(e)?"":k.createElement("span",{className:`${cl.PREFIX}-item-text`},e),this.context.toggleIconPosition===_i.TOGGLE_ICON_RIGHT&&this.renderIcon(s,_i.ICON_POS_RIGHT,!0,"key-toggle-pos-right"))}typeof h=="string"&&(w=k.createElement("a",Object.assign({className:`${b}-item-link`,href:h,tabIndex:-1},d),w));let A="";if(y&&(S||m===_i.MODE_HORIZONTAL)){const T=K({[ur]:!0,[`${ur}-sub`]:a,[`${ur}-selected`]:C,[`${ur}-collapsed`]:S,[`${ur}-disabled`]:p});A=k.createElement(Oi.Item,{selected:C,active:C,forwardRef:this.setItemRef,className:T,onClick:this.handleClick,onMouseEnter:c,onMouseLeave:u,disabled:p,onKeyDown:this.handleKeyPress},w)}else{const T=K(`${r||`${ur}-normal`}`,{[ur]:!0,[`${ur}-sub`]:a,[`${ur}-selected`]:C&&!a,[`${ur}-collapsed`]:S,[`${ur}-disabled`]:p,[`${ur}-has-link`]:typeof h=="string"}),E={"aria-disabled":p};if(a){const P=this.adapter.getIsOpen();E["aria-expanded"]=P}A=k.createElement("li",Object.assign({role:a?null:"menuitem",tabIndex:a?-1:g},E,{style:o,ref:this.setItemRef,className:T,onClick:this.handleClick,onMouseEnter:c,onMouseLeave:u,onKeyPress:this.handleKeyPress},this.getDataAttr(this.props)),w)}return(S&&!y&&!a||S&&a&&p)&&(A=this.wrapTooltip(A)),typeof this.context.renderWrapper=="function"?this.context.renderWrapper({itemElement:A,isSubNav:a,isInSubNav:y,props:this.props}):A}}m0.contextType=g0;m0.propTypes={text:v.oneOfType([v.string,v.node]),itemKey:v.oneOfType([v.string,v.number]),onClick:v.func,onMouseEnter:v.func,onMouseLeave:v.func,children:v.node,icon:v.oneOfType([v.node]),className:v.string,toggleIcon:v.string,style:v.object,forwardRef:v.func,indent:v.oneOfType([v.bool,v.number]),isCollapsed:v.bool,isSubNav:v.bool,link:v.string,linkOptions:v.object,disabled:v.bool,tabIndex:v.number};m0.defaultProps={isSubNav:!1,indent:!1,forwardRef:J,isCollapsed:!1,onClick:J,onMouseEnter:J,onMouseLeave:J,disabled:!1,tabIndex:0};class hx extends Ve{constructor(e){super(e),this.setItemRef=t=>{t&&t.current?this.itemRef=t:this.itemRef={current:t}},this.setTitleRef=t=>{t&&t.current?this.titleRef=t:this.titleRef={current:t}},this.handleClick=t=>{this.foundation.handleClick(t&&t.nativeEvent,this.titleRef&&this.titleRef.current)},this.handleKeyPress=t=>{this.foundation.handleKeyPress(t&&t.nativeEvent,this.titleRef&&this.titleRef.current)},this.handleDropdownVisible=t=>this.foundation.handleDropdownVisibleChange(t),this.state={isHovered:!1},this.adapter.setCache("firstMounted",!0),this.titleRef=k.createRef(),this.itemRef=k.createRef(),this.foundation=new OFe(this.adapter)}_invokeContextFunc(e){if(e&&this.context&&typeof this.context[e]=="function"){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return this.context[e](...n)}return null}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{updateIsHovered:t=>this.setState({isHovered:t}),getOpenKeys:()=>this.context&&this.context.openKeys,getOpenKeysIsControlled:()=>this.context&&this.context.openKeysIsControlled,getCanUpdateOpenKeys:()=>this.context&&this.context.canUpdateOpenKeys,updateOpen:t=>this._invokeContextFunc(t?"addOpenKeys":"removeOpenKeys",this.props.itemKey),notifyGlobalOpenChange:function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e._invokeContextFunc("onOpenChange",...n)},notifyGlobalOnSelect:function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e._invokeContextFunc("onSelect",...n)},notifyGlobalOnClick:function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e._invokeContextFunc("onClick",...n)},getIsSelected:t=>!!(!Ms(t)&&ne(this.context,"selectedKeys",[]).includes(String(t))),getIsOpen:()=>(this.props,!!(this.context&&this.context.openKeys&&this.context.openKeys.includes(this.props.itemKey)))})}renderIcon(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;const{prefixCls:a}=this.context;let o="large";t===_i.ICON_POS_RIGHT&&(o="default");const l=K(`${a}-item-icon`,{[`${a}-item-icon-toggle-${this.context.toggleIconPosition}`]:s,[`${a}-item-icon-info`]:!s}),c=this.adapter.getIsOpen(),u=k.isValidElement(e)?n?k.createElement(Sc,{animationState:c?"enter":"leave",startClassName:`${cl.PREFIX}-icon-rotate-${c?"180":"0"}`},h=>{let{animationClassName:d}=h;return k.cloneElement(e,{size:o,className:d})}):k.cloneElement(e,{size:o}):null;return k.createElement("i",{key:r,className:l},u)}renderTitleDiv(){const{text:e,icon:t,itemKey:n,indent:s,disabled:r,level:a,expandIcon:o}=this.props,{mode:l,isInSubNav:c,isCollapsed:u,prefixCls:h,subNavMotion:d,limitIndent:p}=this.context,f=this.adapter.getIsOpen(),g=K(`${h}-sub-title`,{[`${h}-sub-title-selected`]:this.adapter.getIsSelected(n),[`${h}-sub-title-disabled`]:r});let m=!1,y="";u?c?y=k.createElement(xd,null):y=null:l===_i.MODE_HORIZONTAL?c?y=k.createElement(xd,{"aria-hidden":!0}):y=o||k.createElement(af,{"aria-hidden":!0}):(d&&(m=!0),y=o||k.createElement(af,{"aria-hidden":!0}));let b=null;if(l===_i.MODE_VERTICAL&&!p&&!u){const C=t&&!s?a:a-1;b=fee(C,w=>this.renderIcon(null,_i.ICON_POS_RIGHT,!1,!1,w))}const x=!u&&c&&l===_i.MODE_HORIZONTAL||u&&c;return k.createElement("div",{role:"menuitem",tabIndex:x?-1:0,ref:this.setTitleRef,className:g,onClick:this.handleClick,onKeyPress:this.handleKeyPress,"aria-expanded":f?"true":"false"},k.createElement("div",{className:`${h}-item-inner`},b,this.context.toggleIconPosition===_i.TOGGLE_ICON_LEFT&&this.renderIcon(y,_i.ICON_POS_RIGHT,m,!0,"key-toggle-position-left"),t||s||c&&l!==_i.MODE_HORIZONTAL?this.renderIcon(t,_i.ICON_POS_LEFT,!1,!1,"key-inSubNav-position-left"):null,k.createElement("span",{className:`${h}-item-text`},e),this.context.toggleIconPosition===_i.TOGGLE_ICON_RIGHT&&this.renderIcon(y,_i.ICON_POS_RIGHT,m,!0,"key-toggle-position-right")))}renderSubUl(){const{children:e,maxHeight:t}=this.props,{isCollapsed:n,mode:s,subNavMotion:r,prefixCls:a}=this.context,o=this.adapter.getIsOpen(),l=s===_i.MODE_HORIZONTAL,c=K(`${a}-sub`,{[`${a}-sub-open`]:o,[`${a}-sub-popover`]:n||l});return l?null:r?k.createElement(Mu,{motion:r,isOpen:o,keepDOM:!1,fade:!0},n?null:k.createElement("ul",{className:c},e)):o&&!n?k.createElement("ul",{className:c},e):null}wrapDropdown(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const{children:n,dropdownStyle:s,disabled:r}=this.props,{mode:a,isInSubNav:o,isCollapsed:l,subNavCloseDelay:c,subNavOpenDelay:u,prefixCls:h,getPopupContainer:d}=this.context,p=this.adapter.getIsOpen(),f=this.adapter.getOpenKeysIsControlled(),g=K({[`${h}-popover`]:l}),m={trigger:"hover",style:s};return f&&(m.trigger="custom",m.visible=p),d&&(m.getPopupContainer=d),(l||a===_i.MODE_HORIZONTAL)&&(t=r?t:k.createElement(Oi,Object.assign({className:g,render:k.createElement(Oi.Menu,null,n),position:a===_i.MODE_HORIZONTAL&&!o?"bottomLeft":"rightTop",mouseEnterDelay:u,mouseLeaveDelay:c,onVisibleChange:this.handleDropdownVisible},m),t)),t}render(){const{itemKey:e,style:t,onMouseEnter:n,onMouseLeave:s,disabled:r,text:a}=this.props,{mode:o,isCollapsed:l,prefixCls:c}=this.context;let u=this.renderTitleDiv();const h=this.renderSubUl();return(l||o===_i.MODE_HORIZONTAL)&&(u=this.wrapDropdown(u)),k.createElement(m0,{style:t,isSubNav:!0,itemKey:e,forwardRef:this.setItemRef,isCollapsed:l,className:`${c}-sub-wrap`,onMouseEnter:n,onMouseLeave:s,disabled:r,text:a},k.createElement(g0.Provider,{value:Object.assign(Object.assign({},this.context),{isInSubNav:!0})},u,h))}}hx.contextType=g0;hx.propTypes={itemKey:v.oneOfType([v.string,v.number]),text:v.oneOfType([v.string,v.node]),isOpen:v.bool,isCollapsed:v.bool,indent:v.oneOfType([v.bool,v.number]),children:v.node,style:v.object,icon:v.node,maxHeight:v.number,onMouseEnter:v.func,onMouseLeave:v.func,disabled:v.bool,level:v.number};hx.defaultProps={level:0,indent:!1,isCollapsed:!1,isOpen:!1,maxHeight:im.DEFAULT_SUBNAV_MAX_HEIGHT,disabled:!1};function IFe(i){let{prefixCls:e,locale:t,collapseText:n,isCollapsed:s,onClick:r=J}=i;const a=()=>{typeof r=="function"&&r(!s)},o={icon:k.createElement(fL,null),type:"tertiary",theme:"borderless",onClick:a};let l=s?t==null?void 0:t.expandText:t==null?void 0:t.collapseText;return typeof n=="function"&&(l=n(s)),k.createElement("div",{className:`${e}-collapse-btn`},s?k.createElement(En,{content:l,position:"right"},k.createElement(it,Object.assign({},o))):k.createElement(it,Object.assign({},o),l))}class Jh extends H.PureComponent{constructor(){super(...arguments),this.renderCollapseButton=()=>{const{collapseButton:e,collapseText:t}=this.props;if(k.isValidElement(e))return e;const{onCollapseChange:n,prefixCls:s,locale:r,isCollapsed:a}=this.context;return k.createElement(IFe,{prefixCls:s,isCollapsed:a,locale:r,onClick:n,collapseText:t})}}render(){const{style:e,className:t,collapseButton:n,onClick:s}=this.props;let{children:r}=this.props;const{isCollapsed:a,mode:o}=this.context;!k.isValidElement(r)&&n&&o!==_i.MODE_HORIZONTAL&&(r=this.renderCollapseButton());const l=K(t,`${cl.PREFIX}-footer`,{[`${cl.PREFIX}-footer-collapsed`]:a});return k.createElement("div",{className:l,style:e,onClick:s},r)}}Jh.contextType=g0;Jh.propTypes={children:v.node,style:v.object,className:v.string,collapseButton:v.oneOfType([v.node,v.bool]),collapseText:v.func,onClick:v.func};Jh.defaultProps={collapseButton:!1,onClick:J};Jh.elementType="NavFooter";class Qh extends H.PureComponent{renderLogo(e){return k.isValidElement(e)?e:null}render(){const{children:e,style:t,className:n,logo:s,text:r,link:a,linkOptions:o,prefixCls:l}=this.props,{isCollapsed:c}=this.context,u=K(n,`${cl.PREFIX}-header`,{[`${cl.PREFIX}-header-collapsed`]:c});let h=k.createElement(k.Fragment,null,s?k.createElement("i",{className:`${cl.PREFIX}-header-logo`},this.renderLogo(s)):null,!Ms(r)&&!c?k.createElement("span",{className:`${cl.PREFIX}-header-text`},r):null,e);return typeof a=="string"&&(h=k.createElement("a",Object.assign({className:`${l}-header-link`,href:a},o),h)),k.createElement("div",{className:u,style:t},h)}}Qh.contextType=g0;Qh.propTypes={prefixCls:v.string,logo:v.oneOfType([v.string,v.object,v.node]),text:v.oneOfType([v.string,v.node]),children:v.node,style:v.object,className:v.string,link:v.string,linkOptions:v.object};Qh.defaultProps={prefixCls:cl.PREFIX};Qh.elementType="NavHeader";var RFe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};function E9(i,e){return function(){const n=new Set(i.state[e]);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];r.forEach(o=>o&&n.add(o)),i.setState({[e]:Array.from(n)})}}function P9(i,e){return function(){const n=new Set(i.state[e]);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];r.forEach(o=>o&&n.delete(o)),i.setState({[e]:Array.from(n)})}}const{hasOwnProperty:LFe}=Object.prototype;class wc extends Ve{constructor(e){super(e),this.onCollapseChange=()=>{this.foundation.handleCollapseChange()},this.foundation=new nm(this.adapter),this.itemsChanged=!0;const{isCollapsed:t,defaultIsCollapsed:n,items:s,children:r}=e,a={isCollapsed:!!(this.isControlled("isCollapsed")?t:n),openKeys:[],items:[],itemKeysMap:{},selectedKeys:[]};if(this.state=Object.assign({},a),s&&s.length||r){const o=this.foundation.init("constructor");this.state=Object.assign(Object.assign({},a),o)}}static getDerivedStateFromProps(e,t){const n={};return LFe.call(e,"isCollapsed")&&e.isCollapsed!==t.isCollapsed&&(n.isCollapsed=e.isCollapsed),n}componentDidMount(){}componentDidUpdate(e){if(e.items!==this.props.items||e.children!==this.props.children)this.foundation.init();else{if(this.foundation.handleItemsChange(!1),this.props.selectedKeys&&!wi(e.selectedKeys,this.props.selectedKeys)){this.adapter.updateSelectedKeys(this.props.selectedKeys);const t=this.foundation.getWillOpenKeys(this.state.itemKeysMap);this.adapter.updateOpenKeys(t)}this.props.openKeys&&!wi(e.openKeys,this.props.openKeys)&&this.adapter.updateOpenKeys(this.props.openKeys)}}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{notifySelect:function(){return e.props.onSelect(...arguments)},notifyOpenChange:function(){return e.props.onOpenChange(...arguments)},setIsCollapsed:t=>this.setState({isCollapsed:t}),notifyCollapseChange:function(){return e.props.onCollapseChange(...arguments)},updateItems:t=>this.setState({items:[...t]}),setItemKeysMap:t=>this.setState({itemKeysMap:Object.assign({},t)}),addSelectedKeys:E9(this,"selectedKeys"),removeSelectedKeys:P9(this,"selectedKeys"),updateSelectedKeys:function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,s=t;if(n){const r=e.foundation.selectLevelZeroParentKeys(null,t);s=Array.from(new Set(t.concat(r)))}e.setState({selectedKeys:s})},updateOpenKeys:t=>this.setState({openKeys:[...t]}),addOpenKeys:E9(this,"openKeys"),removeOpenKeys:P9(this,"openKeys"),setItemsChanged:t=>{this.itemsChanged=t}})}renderItems(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const{expandIcon:n}=this.props;return k.createElement(k.Fragment,null,e.map((r,a)=>Array.isArray(r.items)&&r.items.length?k.createElement(hx,Object.assign({key:r.itemKey||String(t)+a},r,{level:t,expandIcon:n}),this.renderItems(r.items,t+1)):k.createElement(m0,Object.assign({key:r.itemKey||String(t)+a},r,{level:t}))))}render(){const e=this.props,{children:t,mode:n,onOpenChange:s,onSelect:r,onClick:a,style:o,className:l,subNavCloseDelay:c,subNavOpenDelay:u,subNavMotion:h,tooltipShowDelay:d,tooltipHideDelay:p,prefixCls:f,bodyStyle:g,footer:m,header:y,toggleIconPosition:b,limitIndent:x,renderWrapper:S,getPopupContainer:C}=e,w=RFe(e,["children","mode","onOpenChange","onSelect","onClick","style","className","subNavCloseDelay","subNavOpenDelay","subNavMotion","tooltipShowDelay","tooltipHideDelay","prefixCls","bodyStyle","footer","header","toggleIconPosition","limitIndent","renderWrapper","getPopupContainer"]),{selectedKeys:A,openKeys:T,items:E,isCollapsed:P}=this.state,{updateOpenKeys:O,addOpenKeys:M,removeOpenKeys:R,updateSelectedKeys:j,addSelectedKeys:I,removeSelectedKeys:D}=this.adapter,z=Object.assign({},o);let $=H.Children.toArray(t);const V=[],L=[];if(k.isValidElement(m)?V.push(k.createElement(Jh,{key:0},m)):m&&typeof m=="object"&&V.push(k.createElement(Jh,Object.assign({key:0},m))),k.isValidElement(y)?L.push(k.createElement(Qh,{key:0},y)):y&&typeof y=="object"&&L.push(k.createElement(Qh,Object.assign({key:0},y))),Array.isArray($)&&$.length){$=[...$];let W=$.length;for(let ce=0;ce<W;ce++){const he=$[ce];he.type===Jh||ne(he,"type.elementType")==="NavFooter"?(V.push(he),$.splice(ce,1),ce--,W--):(he.type===Qh||ne(he,"type.elementType")==="NavHeader")&&(L.push(he),$.splice(ce,1),ce--,W--)}}const Y=K(f,l,{[`${f}-collapsed`]:P,[`${f}-horizontal`]:n==="horizontal",[`${f}-vertical`]:n==="vertical"}),ae=K(`${f}-header-list-outer`,{[`${f}-header-list-outer-collapsed`]:P});return this.itemsChanged&&this.adapter.setCache("itemElems",this.renderItems(E)),k.createElement(gi,{componentName:"Navigation"},W=>k.createElement(g0.Provider,{value:{subNavCloseDelay:c,subNavOpenDelay:u,subNavMotion:h,tooltipShowDelay:d,tooltipHideDelay:p,openKeys:T,openKeysIsControlled:this.isControlled("openKeys")&&n==="vertical"&&!P,canUpdateOpenKeys:!0,selectedKeys:A,selectedKeysIsControlled:this.isControlled("selectedKeys"),isCollapsed:P,onCollapseChange:this.onCollapseChange,mode:n,onSelect:r,onOpenChange:s,updateOpenKeys:O,addOpenKeys:M,removeOpenKeys:R,updateSelectedKeys:j,addSelectedKeys:I,removeSelectedKeys:D,onClick:a,locale:W,prefixCls:f,toggleIconPosition:b,limitIndent:x,renderWrapper:S,getPopupContainer:C}},k.createElement("div",Object.assign({className:Y,style:z},this.getDataAttr(w)),k.createElement("div",{className:`${f}-inner`},k.createElement("div",{className:ae},L,k.createElement("div",{style:g,className:`${f}-list-wrapper`},k.createElement("ul",{role:"menu","aria-orientation":n,className:`${f}-list`},this.adapter.getCache("itemElems"),$))),V))))}}wc.Sub=hx;wc.Item=m0;wc.Header=Qh;wc.Footer=Jh;wc.propTypes={collapseIcon:v.node,defaultOpenKeys:v.arrayOf(v.oneOfType([v.string,v.number])),openKeys:v.arrayOf(v.oneOfType([v.string,v.number])),defaultSelectedKeys:v.arrayOf(v.oneOfType([v.string,v.number])),expandIcon:v.node,selectedKeys:v.arrayOf(v.oneOfType([v.string,v.number])),mode:v.oneOf([..._i.MODE]),onSelect:v.func,onClick:v.func,onOpenChange:v.func,items:v.array,isCollapsed:v.bool,defaultIsCollapsed:v.bool,onCollapseChange:v.func,multiple:v.bool,onDeselect:v.func,subNavMotion:v.oneOfType([v.bool,v.object,v.func]),subNavCloseDelay:v.number,subNavOpenDelay:v.number,tooltipShowDelay:v.number,tooltipHideDelay:v.number,children:v.node,style:v.object,bodyStyle:v.object,className:v.string,toggleIconPosition:v.string,prefixCls:v.string,header:v.oneOfType([v.node,v.object]),footer:v.oneOfType([v.node,v.object]),limitIndent:v.bool,getPopupContainer:v.func};wc.__SemiComponentName__="Navigation";wc.defaultProps=os(wc.__SemiComponentName__,{subNavCloseDelay:im.DEFAULT_SUBNAV_CLOSE_DELAY,subNavOpenDelay:im.DEFAULT_SUBNAV_OPEN_DELAY,tooltipHideDelay:im.DEFAULT_TOOLTIP_HIDE_DELAY,tooltipShowDelay:im.DEFAULT_TOOLTIP_SHOW_DELAY,onCollapseChange:J,onSelect:J,onClick:J,onOpenChange:J,toggleIconPosition:"right",limitIndent:!0,prefixCls:cl.PREFIX,subNavMotion:!0,mode:_i.MODE_VERTICAL});class DFe extends tt{addNotice(e){const t=this._adapter.getNotices();this._adapter.updateNotices([e,...t])}has(e){return this._adapter.getNotices().some(t=>t.id===e)}update(e,t){let n=this._adapter.getNotices();n=n.map(r=>r.id===e?Object.assign(Object.assign({},r),t):r);const s=n.filter(r=>r.id===e);this._adapter.updateNotices(n,[],s)}removeNotice(e){let t=this._adapter.getNotices();const n=[];t=t.filter(s=>s.id===e?(n.push(s),!1):!0),this._adapter.updateNotices(t,n)}destroyAll(){const e=this._adapter.getNotices();e.length>0&&this._adapter.updateNotices([],e)}}const tv={WRAPPER:`${ge}-notification-wrapper`,LIST:`${ge}-notification-list`,NOTICE:`${ge}-notification-notice`},Iee={types:["warning","success","info","error","default"],themes:["normal","light"],directions:["ltr","rtl"]},FFe={duration:3};class $j extends tt{constructor(e){super(Object.assign(Object.assign({},$j.defaultAdapter),e)),this._timer=null,this._id=null}init(){this._startCloseTimer(),this._id=this.getProp("id")}destroy(){this._clearCloseTimer()}_startCloseTimer(){const e=this.getProp("duration");e&&Sa(e)&&(this._timer=setTimeout(()=>{this.close()},e*1e3))}close(e){e&&e.stopPropagation(),this._adapter.notifyWrapperToRemove(this._id),this._adapter.notifyClose()}_clearCloseTimer(){this._timer&&(clearTimeout(this._timer),this._timer=null)}restartCloseTimer(){this._clearCloseTimer(),this._startCloseTimer()}}var BFe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const ra=tv.NOTICE,{duration:jFe}=FFe,{types:Ree,themes:NFe,directions:$Fe}=Iee;class hf extends Ve{get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyWrapperToRemove:e=>{this.props.close(e)},notifyClose:()=>{this.props.onClose(),this.props.onHookClose&&this.props.onHookClose()}})}constructor(e){super(e),this.clearCloseTimer=()=>{this.foundation._clearCloseTimer()},this.startCloseTimer=()=>{this.foundation._startCloseTimer()},this.close=t=>{this.props.onCloseClick(this.props.id),this.foundation.close(t)},this.notifyClick=t=>{this.props.onClick(t)},this.state={visible:!0},this.foundation=new $j(this.adapter)}componentWillUnmount(){this.foundation.destroy()}renderTypeIcon(){const{type:e,icon:t}=this.props;let s={warning:k.createElement(ix,{size:"large"}),success:k.createElement(WE,{size:"large"}),info:k.createElement(wl,{size:"large"}),error:k.createElement(tx,{size:"large"})}[e];const r=K({[`${ra}-icon`]:!0,[`${ra}-${e}`]:!0});return t&&(s=t),s?k.createElement("div",{className:r,"x-semi-prop":"icon"},oo(s)?k.cloneElement(s,{size:s.props.size||"large"}):s):null}render(){const e=this.props.direction||this.context.direction,t=e==="rtl"?"topLeft":"topRight",n=this.props,{content:s,title:r,theme:a,position:o=t,type:l,id:c,onCloseClick:u,className:h,showClose:d,style:p}=n;BFe(n,["content","title","theme","position","type","id","onCloseClick","className","showClose","style"]);const{visible:f}=this.state,g=K(ra,h,{[`${ra}-close`]:!f,[`${ra}-icon-show`]:Ree.includes(l),[`${ra}-${l}`]:!0,[`${ra}-${a}`]:a==="light",[`${ra}-rtl`]:e==="rtl"}),m=Cl({});return k.createElement("div",{className:g,style:p,onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onClick:this.notifyClick,"aria-labelledby":m,role:"alert",onAnimationEnd:this.props.onAnimationEnd,onAnimationStart:this.props.onAnimationStart},k.createElement("div",null,this.renderTypeIcon()),k.createElement("div",{className:`${ra}-inner`},k.createElement("div",{className:`${ra}-content-wrapper`},r?k.createElement("div",{id:m,className:`${ra}-title`,"x-semi-prop":"title"},r):"",s?k.createElement("div",{className:`${ra}-content`,"x-semi-prop":"content"},s):""),d&&k.createElement(Ml,{className:`${ra}-icon-close`,type:"tertiary",icon:k.createElement(Rc,null),theme:"borderless",size:"small",onClick:this.close})))}}hf.contextType=Da;hf.propTypes={duration:v.number,id:v.string,title:v.node,content:v.node,type:v.oneOf(Ree),theme:v.oneOf(NFe),icon:v.node,onClick:v.func,onClose:v.func,onCloseClick:v.func,showClose:v.bool,close:v.func,direction:v.oneOf($Fe)};hf.__SemiComponentName__="Notification";hf.defaultProps=os(hf.__SemiComponentName__,{duration:jFe,id:"",close:J,onClose:J,onClick:J,onCloseClick:J,content:"",title:"",showClose:!0,theme:"normal"});var zFe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const HFe=(i,e)=>{var{afterClose:t}=i,n=zFe(i,["afterClose"]);const[s,r]=H.useState(!0),a=()=>{r(!1)};return k.useImperativeHandle(e,()=>({close:()=>{r(!1)}})),H.useEffect(()=>{s||t(String(n.id))},[s]),s?k.createElement(hf,Object.assign({},n,{onHookClose:a})):null},VFe=k.forwardRef(HFe),q0={duration:3,position:"topRight",motion:!0,content:"",title:"",zIndex:1010};function UFe(){const[i,e]=H.useState([]);function t(s,r){return e(a=>[{element:s,config:r},...a]),a=>{e(o=>o.filter(l=>{let{config:c}=l;return c.id!==a}))}}function n(){const s={top:[],topLeft:[],topRight:[],bottom:[],bottomLeft:[],bottomRight:[]};return i.forEach(r=>{let{element:a,config:o}=r;const{position:l}=o;s[l].push(a)}),Object.entries(s).map(r=>{const a=r[0],o=r[1];return Array.isArray(o)&&o.length?k.createElement("div",{key:a,className:K(tv.LIST),placement:a},o):null})}return[n(),t]}function WFe(){const[i,e]=UFe(),t=new Map,n=r=>{const a=rf("semi_notice_"),o=Object.assign(Object.assign({},r),{id:a});let l;const c=h=>{t.set(a,h)},u=k.createElement(VFe,Object.assign({key:a},o,{afterClose:h=>l(h),ref:c}));return l=e(u,Object.assign({},o)),a};return[{success:r=>n(Object.assign(Object.assign(Object.assign({},q0),r),{type:"success"})),info:r=>n(Object.assign(Object.assign(Object.assign({},q0),r),{type:"info"})),error:r=>n(Object.assign(Object.assign(Object.assign({},q0),r),{type:"error"})),warning:r=>n(Object.assign(Object.assign(Object.assign({},q0),r),{type:"warning"})),open:r=>n(Object.assign(Object.assign(Object.assign({},q0),r),{type:"default"})),close:r=>{const a=t.get(r);a&&a.close()}},k.createElement(k.Fragment,null,i)]}let $o=null;const fg={duration:3,position:"topRight",motion:!0,content:"",title:"",zIndex:1010};class rc extends Ve{constructor(e){var t;super(e),t=this,this.add=n=>this.foundation.addNotice(n),this.has=n=>this.foundation.has(n),this.remove=n=>{this.foundation.removeNotice(String(n))},this.update=(n,s)=>this.foundation.update(n,s),this.destroyAll=()=>this.foundation.destroyAll(),this.renderNoticeInPosition=function(n,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];const o=K(tv.LIST);if(n.length){const l=t.setPosInStyle(n[0]);return k.createElement("div",{placement:s,key:s,className:o,style:l},n.map((c,u)=>{const h=r.find(d=>d.id===c.id)!==void 0;return k.createElement(Sc,{key:c.id,animationState:h?"leave":"enter",startClassName:`${tv.NOTICE}-animation-${h?"hide":"show"}_${s}`},d=>{let{animationClassName:p,animationEventsNeedBind:f,isAnimating:g}=d;return h&&!g?null:k.createElement(hf,Object.assign({},c,{ref:m=>{m&&a.some(y=>y.id===m.props.id)&&m.foundation.restartCloseTimer()},className:K({[c.className]:!!c.className,[p]:!0})},f,{style:Object.assign({},c.style),close:t.remove}))})}))}return null},this.state={notices:[],removedItems:[],updatedItems:[]},this.noticeStorage=[],this.removeItemStorage=[],this.foundation=new DFe(this.adapter)}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{updateNotices:function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];e.noticeStorage=[...t],e.removeItemStorage=[...n],e.setState({notices:t,removedItems:n,updatedItems:s})},getNotices:()=>this.noticeStorage})}static addNotice(e){var t;e=Object.assign(Object.assign({},fg),e);const n=(t=e.id)!==null&&t!==void 0?t:rf("notification");if($o)$o.has(`${n}`)?$o.update(n,e):$o.add(Object.assign(Object.assign({},e),{id:n}));else{const{getPopupContainer:s}=e,r=document.createElement("div");this.wrapperId||(this.wrapperId=rf("notification-wrapper").slice(0,32)),r.className=tv.WRAPPER,r.id=this.wrapperId,r.style.zIndex=String(typeof e.zIndex=="number"?e.zIndex:fg.zIndex),s?s().appendChild(r):document.body.appendChild(r),vr.render(k.createElement(rc,{ref:a=>$o=a}),r,()=>{$o.add(Object.assign(Object.assign({},e),{id:n}))})}return n}static removeNotice(e){return $o&&$o.remove(e),e}static info(e){return this.addNotice(Object.assign(Object.assign({},e),{type:"info"}))}static success(e){return this.addNotice(Object.assign(Object.assign({},e),{type:"success"}))}static error(e){return this.addNotice(Object.assign(Object.assign({},e),{type:"error"}))}static warning(e){return this.addNotice(Object.assign(Object.assign({},e),{type:"warning"}))}static open(e){return this.addNotice(Object.assign(Object.assign({},e),{type:"default"}))}static close(e){return this.removeNotice(e)}static destroyAll(){if($o){$o.destroyAll();const e=document.querySelector(`#${this.wrapperId}`);vr.unmountComponentAtNode(e),e&&e.parentNode.removeChild(e),$o=null,this.wrapperId=null}}static config(e){["top","left","bottom","right"].map(t=>{t in e&&(fg[t]=e[t])}),typeof e.zIndex=="number"&&(fg.zIndex=e.zIndex),typeof e.duration=="number"&&(fg.duration=e.duration),typeof e.position=="string"&&(fg.position=e.position)}setPosInStyle(e){const t={};return["top","left","bottom","right"].forEach(n=>{if(n in e){const s=e[n];t[n]=typeof s=="number"?`${s}px`:s}}),t}render(){let{notices:e}=this.state;const{removedItems:t,updatedItems:n}=this.state;e=Array.from(new Set([...e,...t]));const s={top:[],topLeft:[],topRight:[],bottom:[],bottomLeft:[],bottomRight:[]};e.forEach(a=>{const l=(a.direction||this.context.direction)==="rtl"?"topLeft":"topRight",c=a.position||l;s[c].push(a)});const r=Object.entries(s).map(a=>{const o=a[0],l=a[1];return this.renderNoticeInPosition(l,o,t,n)});return k.createElement(k.Fragment,null,r)}}rc.contextType=Da;rc.propTypes={style:v.object,className:v.string,direction:v.oneOf(Iee.directions)};rc.defaultProps={};rc.useNotification=WFe;const GFe={PREFIX:ge+"-overflow-list"},O9={COLLAPSE:"collapse",SCROLL:"scroll"},M9={START:"start",END:"end"},KFe={NONE:0,GROW:1,SHRINK:2},Np={BOUNDARY_SET:Object.values(M9),POSITION_SET:["vertical","horizontal"],MODE_SET:Object.values(O9),MODE_MAP:O9,BOUNDARY_MAP:M9,OVERFLOW_DIR:KFe},I9={MINIMUM_HTML_ELEMENT_WIDTH:4};class zj extends k.PureComponent{componentDidMount(){const{items:e}=this.props;this.cachedKeys=Object.keys(e);const{root:t,threshold:n,rootMargin:s,option:r,onIntersect:a}=this.props;this.observer=new IntersectionObserver(a,Object.assign({root:t,threshold:n,rootMargin:s},r)),this.observeElement()}componentDidUpdate(){const{items:e}=this.props,t=Object.keys(e);wi(this.cachedKeys,t)||(this.observeElement(!0),this.cachedKeys=t)}componentWillUnmount(){this.observer&&(this.observer.disconnect(),this.observer=null)}observeElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const{items:t}=this.props;if(eu(t)){this.observer.disconnect();return}e&&this.observer.disconnect(),Object.keys(t).forEach(n=>{const s=t[n];s&&Sp(s)&&this.observer.observe(s)})}render(){const{children:e}=this.props;return e}}zj.propTypes={onIntersect:v.func,option:v.object,root:v.any,threshold:v.number,rootMargin:v.string,items:v.object};zj.defaultProps={onIntersect:()=>{},threshold:.75,rootMargin:"0px",option:{},items:{}};const XFe=Np.BOUNDARY_MAP;class YFe extends tt{constructor(e){super(Object.assign({},e)),this.previousY=void 0,this.isScrollMode=()=>{const{renderMode:t}=this.getProps();return t==="scroll"},this.getReversedItems=()=>{const{items:t}=this.getProps();return eA(t).reverse()}}getOverflowItem(){const{items:e}=this.getProps(),{visibleState:t,overflow:n}=this.getStates();if(!this.isScrollMode())return n;const s=e.map(l=>{let{key:c}=l;return!!t.get(c)}),r=s.indexOf(!0),a=s.lastIndexOf(!0),o=[];return o[0]=r>=0?e.slice(0,r):[],o[1]=a>=0?e.slice(a+1,e.length):e.slice(),o}handleIntersect(e){const t=eA(this.getState("visibleState")),n={};e.forEach(l=>{const c=ne(l,"target.dataset.scrollkey"),u=l.isIntersecting;n[c]=l,t.set(c,u)});let s=!1;for(const l of t.values())if(l){s=!0;break}const r=s,[a]=e,o=a.boundingClientRect.y;if(!r&&this.previousY!==void 0&&o!==this.previousY){this.previousY=o;return}this.previousY=o,this._adapter.updateVisibleState(t),this._adapter.notifyIntersect(n)}handleCollapseOverflow(){const{minVisibleItems:e,collapseFrom:t}=this.getProps(),{overflowWidth:n,containerWidth:s,pivot:r,overflowStatus:a}=this.getStates(),{items:o,onOverflow:l}=this.getProps();let c=n,u=0,h=!1;for(const d of this._adapter.getItemSizeMap().values()){if(c+=d,c>s){h=!0;break}if(u===o.length-1){this._adapter.updateStates({overflowStatus:"normal",pivot:o.length-1,visible:o,overflow:[]});break}u++}if(h){const d=Math.max(e,u),p=t===XFe.START,f=p?this.getReversedItems().slice(0,d).reverse():o.slice(0,d),g=p?this.getReversedItems().slice(d).reverse():o.slice(d);this._adapter.updateStates({overflowStatus:"overflowed",pivot:d,visible:f,overflow:g}),r!==d&&l(g);return}}}const Z0=GFe.PREFIX,dM=Np.BOUNDARY_MAP,R9=Np.OVERFLOW_DIR,J0=Np.MODE_MAP;class kb extends Ve{constructor(e){var t;super(e),t=this,this.scroller=null,this.spacer=null,this.isScrollMode=()=>{const{renderMode:n}=this.props;return n===J0.SCROLL},this.resize=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];var s;const r=(s=n[0])===null||s===void 0?void 0:s.target.clientWidth;t.setState({containerWidth:r,overflowStatus:"calculating"})},this.reintersect=n=>{this.foundation.handleIntersect(n)},this.mergeRef=(n,s,r)=>{this.itemRefs[r]=s,typeof n=="function"?n(s):typeof n=="object"&&n&&"current"in n&&(n.current=s)},this.renderOverflow=()=>{const n=this.foundation.getOverflowItem();return this.props.overflowRenderer(n)},this.getItemKey=(n,s)=>{const{itemKey:r}=this.props;return xt(r)?r(n):ne(n,r||"key",s)},this.renderItemList=()=>{const{className:n,wrapperClassName:s,wrapperStyle:r,style:a,visibleItemRenderer:o,renderMode:l,collapseFrom:c}=this.props,{visible:u,overflowStatus:h}=this.state;let d=this.renderOverflow();if(!this.isScrollMode()&&(Array.isArray(d)&&(d=k.createElement(k.Fragment,null,d)),k.isValidElement(d))){const g=k.cloneElement(d);d=k.createElement(jp,{onResize:m=>{let[y]=m;this.setState({overflowWidth:y.target.clientWidth,overflowStatus:"calculating"})}},k.createElement("div",{className:`${Z0}-overflow`},g))}const p=l===J0.SCROLL?(()=>{const g=[k.createElement("div",{className:K(s,`${Z0}-scroll-wrapper`),ref:m=>{this.scroller=m},style:Object.assign({},r),key:`${Z0}-scroll-wrapper`},u.map(o).map(m=>{const{forwardRef:y,key:b}=m;return k.cloneElement(m,{ref:x=>this.mergeRef(y,x,b),"data-scrollkey":`${b}`,key:b})}))];return this.props.overflowRenderDirection==="both"?(g.unshift(d[0]),g.push(d[1])):this.props.overflowRenderDirection==="start"?(g.unshift(d[1]),g.unshift(d[0])):(g.push(d[0]),g.push(d[1])),g})():[c===dM.START?d:null,u.map((g,m)=>{const{key:y}=g,b=o(g,m),x=k.cloneElement(b);return k.createElement(jp,{key:y??m,onResize:S=>{let[C]=S;return this.onItemResize(C,g,m)}},k.createElement("div",{key:y??m,className:`${Z0}-item`},x))}),c===dM.END?d:null];return k.createElement("div",{className:K(`${Z0}`,n),style:Object.assign(Object.assign({},a),l===J0.COLLAPSE?{maxWidth:"100%",visibility:h==="calculating"?"hidden":"visible"}:null)},...p)},this.onItemResize=(n,s,r)=>{const a=this.getItemKey(s,r),o=this.itemSizeMap.get(a);o?o!==n.target.clientWidth&&(this.itemSizeMap.set(a,n.target.clientWidth),this.setState({overflowStatus:"calculating"})):this.itemSizeMap.set(a,n.target.clientWidth);const{maxCount:l}=this.state;this.itemSizeMap.size===l&&this.setState({overflowStatus:"calculating"})},this.state={direction:R9.GROW,lastOverflowCount:0,overflow:[],visible:[],containerWidth:0,visibleState:new Map,itemSizeMap:new Map,overflowStatus:"calculating",pivot:-1,overflowWidth:0,maxCount:0},this.foundation=new YFe(this.adapter),this.previousWidths=new Map,this.itemRefs={},this.itemSizeMap=new Map}static getDerivedStateFromProps(e,t){const{prevProps:n}=t,s={};s.prevProps=e;const r=a=>!n&&a in e||n&&!wi(n[a],e[a]);if(r("items")||r("style")){if(s.direction=R9.GROW,s.lastOverflowCount=0,s.maxCount=0,e.renderMode===J0.SCROLL)s.visible=e.items,s.overflow=[];else{let a=e.items.length;Math.floor(t.containerWidth/I9.MINIMUM_HTML_ELEMENT_WIDTH)!==0&&(a=Math.min(a,Math.floor(t.containerWidth/I9.MINIMUM_HTML_ELEMENT_WIDTH)));const o=e.collapseFrom===dM.START,l=o?eA(e.items).reverse().slice(0,a):e.items.slice(0,a),c=o?eA(e.items).reverse().slice(a):e.items.slice(a);s.visible=l,s.overflow=c,s.maxCount=a}s.pivot=-1,s.overflowStatus="calculating"}return s}get adapter(){return Object.assign(Object.assign({},super.adapter),{updateVisibleState:e=>{this.setState({visibleState:e},()=>{var t,n;(n=(t=this.props).onVisibleStateChange)===null||n===void 0||n.call(t,e)})},updateStates:e=>{this.setState(Object.assign({},e))},notifyIntersect:e=>{this.props.onIntersect&&this.props.onIntersect(e)},getItemSizeMap:()=>this.itemSizeMap})}componentDidUpdate(e,t){const n=e.items.map(c=>c.key),s=this.props.items.map(c=>c.key);wi(n,s)||(this.itemRefs={},this.setState({visibleState:new Map}));const{overflow:r,containerWidth:a,visible:o,overflowStatus:l}=this.state;this.isScrollMode()||l!=="calculating"||this.foundation.handleCollapseOverflow()}render(){const e=this.renderItemList(),{renderMode:t}=this.props;return t===J0.SCROLL?k.createElement(zj,{onIntersect:this.reintersect,root:this.scroller,threshold:this.props.threshold,items:this.itemRefs},e):k.createElement(jp,{onResize:this.resize},e)}}kb.__SemiComponentName__="OverflowList";kb.defaultProps=os(kb.__SemiComponentName__,{collapseFrom:"end",minVisibleItems:0,overflowRenderer:()=>null,renderMode:"collapse",threshold:.75,visibleItemRenderer:()=>null,onOverflow:()=>null,overflowRenderDirection:"both"});kb.propTypes={className:v.string,collapseFrom:v.oneOf(Np.BOUNDARY_SET),direction:v.oneOf(Np.POSITION_SET),items:v.array,minVisibleItems:v.number,onIntersect:v.func,onOverflow:v.func,overflowRenderer:v.func,renderMode:v.oneOf(Np.MODE_SET),style:v.object,threshold:v.number,visibleItemRenderer:v.func,wrapperClassName:v.string,wrapperStyle:v.object,collapseMask:v.object,overflowRenderDirection:v.string};const qFe={PREFIX:`${ge}-page`},Hj={PAGE_SHOW_MAX:7,REST_PAGE_SHOW_MAX:5,DEFAULT_PAGE_SIZE:10,PAGE_SIZE_OPTION:[10,20,40,100],REST_PAGE_MAX_SIZE:1e6};class ZFe extends tt{constructor(e){super(Object.assign({},e))}init(){const{currentPage:e,total:t,pageSize:n}=this.getStates();this._updateDisabled({currentPage:e,total:t,pageSize:n}),this._updatePageList({currentPage:e,total:t,pageSize:n}),this._registerEventHandler()}destroy(){this._unregisterEventHandler()}_registerEventHandler(){this._adapter.registerKeyDownHandler(this.handleKeyDown)}_unregisterEventHandler(){this._adapter.unregisterKeyDownHandler(this.handleKeyDown)}_updateDisabled(e){const{currentPage:t,total:n,pageSize:s}=e,r=this._getTotalPageNumber(n,s);let a=!1,o=!1;t===1?(a=!0,o=r<2):t===r&&(a=!1,o=!0),this._adapter.setDisabled(a,o)}goPage(e){if(e==="...")return;const{pageSize:t,currentPage:n}=this.getStates(),s=this._isInProps("currentPage");e!==n&&(s?(this._adapter.notifyPageChange(e),this._adapter.notifyChange(e,t)):(this.updatePage(e),this._adapter.notifyPageChange(e),this._adapter.notifyChange(e,t)))}updatePage(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;(t===null||typeof t>"u")&&(t=this.getState("total")),(n===null||typeof n>"u")&&(n=this.getState("pageSize")),this._updateDisabled({currentPage:e,total:t,pageSize:n}),this._updatePageList({currentPage:e,total:t,pageSize:n}),this._adapter.updateTotal(t),this._adapter.setCurrentPage(e),this._adapter.updatePageSize(n)}updateAllPageNumbers(e,t){const{size:n,hoverShowPageSelect:s,disabled:r}=this.getProps();if(!(n!=="small"||!s||r)){const a=Array.from({length:Math.ceil(e/t)},(o,l)=>l+1);this._adapter.updateAllPageNumbers(a)}}goPrev(){const{currentPage:e}=this.getStates();e>1&&this.goPage(e-1)}goNext(){const{currentPage:e,total:t,pageSize:n}=this.getStates(),s=this._getTotalPageNumber(t,n);e<=s-1&&this.goPage(e+1)}_updatePageList(e){const{currentPage:t,total:n,pageSize:s}=e;let r=[],a=[],o=[];const l=this._getTotalPageNumber(n,s),{PAGE_SHOW_MAX:c,REST_PAGE_MAX_SIZE:u}=Hj;if(l<=c)r=Array.from({length:l},(h,d)=>d+1),a=[],o=[];else switch(!0){case t<4:r=[1,2,3,4,"...",l-1,l],o=Array.from({length:Math.min(l-6,u)},(p,f)=>f+5),a=[];break;case t===4:r=[1,2,3,4,5,"...",l],o=Array.from({length:Math.min(l-6,u)},(p,f)=>f+6),a=[];break;case(4<t&&t<l-3):const h=Array.from({length:3},(p,f)=>t+(f-1));r=[1].concat("...",h,"...",l),o=Array.from({length:Math.min(l-t-2,u)},(p,f)=>t+f+2),a=Array.from({length:Math.min(t-3,u)},(p,f)=>f+2);break;case(t-3<=t&&t<=l):const d=Array.from({length:5},(p,f)=>l-(4-f));r=[1,"..."].concat(d),o=[],a=Array.from({length:Math.min(d[0]-2,u)},(p,f)=>f+2);break}this._adapter.setPageList({pageList:r,restLeftPageList:a,restRightPageList:o})}changePageSize(e){const{pageSize:t}=this.getStates();this._adapter.updatePageSize(e),this._adapter.notifyPageSizeChange(e);const{total:n,currentPage:s}=this.getStates(),r=(s-1)*t+1,a=Math.ceil(r/e);this.updatePage(a,n,e),s!==a&&this._adapter.notifyPageChange(a),this._adapter.notifyChange(a,e)}handleKeyDown(){}pageSizeInOpts(){const{pageSizeOpts:e}=this.getProps(),{pageSize:t}=this.getStates(),n=[...e];if(n.indexOf(t)===-1){const s=n.findIndex(r=>r>t);n.splice(s,0,t)}return n}handleQuickJumpNumberChange(e){this._adapter.updateQuickJumpPage(e)}_handleQuickJump(e){let t=Number(e);const{pageSize:n,total:s}=this.getStates(),r=this._getTotalPageNumber(s,n);Number.isNaN(t)||(t>r&&(t=r),t<=0&&(t=1),this._adapter.updateQuickJumpPage(""),this.goPage(t))}handleQuickJumpBlur(){const{quickJumpPage:e}=this.getStates();(typeof e=="string"&&e||typeof e=="number")&&this._handleQuickJump(e)}handleQuickJumpEnterPress(e){this._handleQuickJump(e)}_getTotalPageNumber(e,t){return Math.ceil(e/t)}}const Vj={PREFIX:`${ge}-select`,PREFIX_OPTION:`${ge}-select-option`,PREFIX_GROUP:`${ge}-select-group`},yu={SIZE_SET:["small","large","default"],POSITION_SET:Zh.POSITION_SET,MODE_SELECT:"select",MODE_AUTOCOMPLETE:"autoComplete",STATUS:$3,SEARCH_POSITION_TRIGGER:"trigger",SEARCH_POSITION_DROPDOWN:"dropdown"},Lee={LIST_HEIGHT:270};var L9=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};class JFe extends tt{constructor(e){super(Object.assign({},e)),this._keydownHandler=null}init(){this._setDropdownWidth();const e=this.getProp("defaultOpen"),t=this.getProp("open"),n=this._collectOptions();this._setDefaultSelection(n),(e||t)&&this.open(void 0,n),this.getProp("autoFocus")&&this.focus()}focus(){const e=this._isFilterable(),t=this._isMultiple();this._adapter.updateFocusState(!0),this._adapter.setIsFocusInContainer(!1),e&&t?this.focusInput():e&&!t?this.toggle2SearchInput(!0):this._focusTrigger()}_focusTrigger(){this._adapter.focusTrigger()}destroy(){this._adapter.unregisterClickOutsideHandler()}_setDropdownWidth(){const{style:e,dropdownMatchSelectWidth:t}=this.getProps();let n;t&&(e&&Sa(e.width)||e&&Ii(e.width)&&!e.width.includes("%")?n=e.width:n=this._adapter.getTriggerWidth(),this._adapter.setOptionWrapperWidth(n))}_collectOptions(){const e=this._adapter.getOptionsFromChildren();return this._adapter.updateOptions(e),this._adapter.rePositionDropdown(),e}_setDefaultSelection(e){let{value:t}=this.getProps();const{defaultValue:n}=this.getProps();this._isControlledComponent()||(t=n),this._update(t,e)}handleOptionListChange(){const e=this._collectOptions(),{selections:t}=this.getStates();this.updateOptionsActiveStatus(t,e);const{defaultActiveFirstOption:n}=this.getProps();n&&this._adapter.updateFocusIndex(0)}handleOptionListChangeHadDefaultValue(){const e=this.getState("selections");let t;const{onChangeWithObject:n}=this.getProps(),s=this._isMultiple();switch(!0){case(s&&!!e.size):try{t=[...e].map(a=>n?a[1]:a[1].value)}catch{t=[]}break;case(s&&!e.size):t=[];break;case(!s&&!!e.size):try{t=n?[...e][0][1]:[...e][0][1].value}catch{}break;case(!s&&!e.size):break}const r=this._adapter.getOptionsFromChildren();this._update(t,r)}handleValueChange(e){const{allowCreate:t,autoClearSearchValue:n,remote:s}=this.getProps(),{inputValue:r}=this.getStates();let a;t&&this._isControlledComponent()?(a=this.getState("options"),a.forEach(o=>o._show=!0)):a=this._adapter.getOptionsFromChildren(),this._adapter.rePositionDropdown(),this._isFilterable()&&!n&&r&&!s&&(a=this._filterOption(a,r)),this._update(e,a)}_update(e,t){let n;this._isMultiple()?(n=this._updateMultiple(e,t),this.updateOverflowItemCount(n.size)):n=this._updateSingle(e,t),this._adapter.updateSelection(n),this.updateOptionsActiveStatus(n,t)}_updateSingle(e,t){const n=new Map,{onChangeWithObject:s}=this.getProps(),r=s&&typeof e<"u"?e.value:e,a=t.filter(l=>l.value===r),o=!a.length&&typeof r<"u"&&r!==null;if(a.length){const l=a[0],c=Object.assign({},l);n.set(c.label,c)}else if(o){let l={value:e,label:e,_notExist:!0,_scrollIndex:-1};s&&(l=Object.assign(Object.assign({},e),{_notExist:!0,_scrollIndex:-1})),n.set(l.label,l)}return n}_updateMultiple(e,t){const n=this.getState("selections");let s=[];const r=Array.isArray(e);this.checkMultipleProps(),n.size&&(s=[...n].map(c=>c[1]));const a=new Map;let o=e;const{onChangeWithObject:l}=this.getProps();return l&&r&&(o=e.map(c=>c.value)),r&&o.length&&o.forEach((c,u)=>{const h=t.findIndex(d=>d.value===c);if(h!==-1)a.set(t[h].label,t[h]);else{const d=s.findIndex(p=>p.value===c);if(d!==-1){const p=s[d];if(l){const f=Object.assign({},e[u]);wi(f,p)?a.set(p.label,p):a.set(f.label,f)}else a.set(p.label,p)}else{let p={value:c,label:c,_notExist:!0};l&&(p=Object.assign(Object.assign({},e[u]),{_notExist:!0})),a.set(p.label,Object.assign(Object.assign({},p),{_scrollIndex:-1}))}}}),a}_isMultiple(){return this.getProp("multiple")}_isDisabled(){return this.getProp("disabled")}_isFilterable(){return!!this.getProp("filter")}handleClick(e){const{clickToHide:t}=this.getProps(),{isOpen:n}=this.getStates();this._isDisabled()||(n?n&&t?this.close({event:e}):n&&!t&&this.focusInput():(this.open(),this._notifyFocus(e)))}open(e,t){const n=this._isFilterable(),s=t||this.getState("options");if(n){const a=this._filterOption(s,"").filter(o=>!o._inputCreateOnly);this._adapter.updateOptions(a),this.toggle2SearchInput(!0)}else this._adapter.updateFocusState(!0);this._adapter.openMenu(()=>{const{searchPosition:r,autoFocus:a}=this.getProps();a&&r===yu.SEARCH_POSITION_DROPDOWN&&this._adapter.focusDropdownInput()}),this._setDropdownWidth(),this._adapter.notifyDropdownVisibleChange(!0),this.bindKeyBoardEvent(),this._adapter.registerClickOutsideHandler(r=>{this.close({event:r}),this._notifyBlur(r),this._adapter.updateFocusState(!1)})}toggle2SearchInput(e){e?this._adapter.toggleInputShow(e,()=>this.focusInput()):this._adapter.toggleInputShow(e,()=>{})}close(e){const{event:t,closeCb:n,notToggleInput:s}=e||{},{isFocus:r}=this.getStates();this._adapter.closeMenu(),this._adapter.notifyDropdownVisibleChange(!1),this._adapter.setIsFocusInContainer(!1),r&&this._focusTrigger(),this._adapter.unregisterClickOutsideHandler();const a=this._isFilterable();a&&!s&&this.toggle2SearchInput(!1),this._adapter.once("popoverClose",()=>{a&&this.clearInput(t),n&&n()})}onSelect(e,t,n){if(this._isDisabled())return;e._inputCreateOnly&&this._adapter.notifyCreate(e),this._isMultiple()?this._handleMultipleSelect(e,n):this._handleSingleSelect(e,n),this._adapter.updateFocusIndex(t)}_handleSingleSelect(e,t){var{value:n,label:s}=e,r=L9(e,["value","label"]);const a=new Map().set(s,Object.assign({value:n,label:s},r));this._notifySelect(n,Object.assign({value:n,label:s},r));const o=this._isFilterable();this._isControlledComponent()?this.close({event:t,notToggleInput:!0,closeCb:()=>{this._notifyChange(a),o&&this.toggle2SearchInput(!1)}}):(this._adapter.updateSelection(a),this._notifyChange(a),this.close({event:t,closeCb:()=>{this.updateOptionsActiveStatus(a)}}))}_handleMultipleSelect(e,t){var{value:n,label:s}=e,r=L9(e,["value","label"]);const a=this._adapter.getMaxLimit(),o=this._adapter.getSelections(),{autoClearSearchValue:l}=this.getProps();if(o.has(s))this._notifyDeselect(n,Object.assign({value:n,label:s},r)),o.delete(s);else if(a&&o.size===a){this._adapter.notifyMaxLimit(Object.assign({value:n,label:s},_n(r,"_scrollIndex")));return}else this._notifySelect(n,Object.assign({value:n,label:s},r)),o.set(s,Object.assign({value:n,label:s},r));if(this._isControlledComponent())this._notifyChange(o),this._isFilterable()&&(l&&this.clearInput(t),this.focusInput());else{this._adapter.updateSelection(o),this.updateOverflowItemCount(o.size),this._adapter.rePositionDropdown();let{options:c}=this.getStates();this._isFilterable()&&(l&&(this.clearInput(t),c=this._filterOption(c,"")),this.focusInput()),this.updateOptionsActiveStatus(o,c),this._notifyChange(o)}}clearSelected(){const e=new Map;this._isControlledComponent()?(this._notifyChange(e),this._adapter.notifyClear()):(this._adapter.updateSelection(e),this.updateOptionsActiveStatus(e),this._notifyChange(e),this._adapter.notifyClear());const{isOpen:t}=this.getStates();t&&this._adapter.rePositionDropdown()}updateOptionsActiveStatus(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getState("options");const{allowCreate:n}=this.getProps(),s=t.map(r=>(e.has(r.label)?(r._selected=!0,n&&delete r._inputCreateOnly):(r._inputCreateOnly&&(r._show=!1),r._selected=!1),r));this._adapter.updateOptions(s)}removeTag(e){const t=this._adapter.getSelections();t.delete(e.label),this._isControlledComponent()?(this._notifyDeselect(e.value,e),this._notifyChange(t)):(this._notifyDeselect(e.value,e),this._adapter.updateSelection(t),this.updateOverflowItemCount(t.size),this.updateOptionsActiveStatus(t),this._adapter.rePositionDropdown(),this._notifyChange(t))}clearInput(e){const{inputValue:t}=this.getStates();if(t!==""){this._adapter.updateInputValue(""),this._adapter.notifySearch("",e);const{options:n}=this.getStates(),{remote:s}=this.getProps();let r=n;s||(r=this._filterOption(n,"")),this._adapter.updateOptions(r)}}focusInput(){this._adapter.focusInput(),this._adapter.updateFocusState(!0),this._adapter.setIsFocusInContainer(!1)}handleInputChange(e,t){this._adapter.updateInputValue(e);const{options:n,isOpen:s}=this.getStates(),{allowCreate:r,remote:a}=this.getProps();let o=n;a||(o=this._filterOption(n,e)),o=this._createOptionByInput(r,o,e),this._adapter.updateOptions(o),this._adapter.notifySearch(e,t),this._isMultiple()&&this._adapter.rePositionDropdown()}_filterOption(e,t){const n=this.getProp("filter");if(n){if(typeof n=="boolean"&&n){const s=t.toLowerCase();return e.map(r=>{const a=r.label.toString().toLowerCase(),o=r._parentGroup&&r._parentGroup.label,l=a.includes(s),c=Ii(o)&&o.toLowerCase().includes(s);return l||c?r._show=!0:r._show=!1,r})}else if(typeof n=="function")return e.map(s=>(n(t,s)?s._show=!0:s._show=!1,s))}else return e}_createOptionByInput(e,t,n){if(e)if(n){const s={_show:!0,_selected:!1,value:n,label:n,_inputCreateOnly:!0};let r=-1,a=-1;t.forEach((o,l)=>{!o._show&&!o._inputCreateOnly||(o.label===n&&(a=l),o._inputCreateOnly&&(r=l,o.value=n,o.label=n,o._show=!0))}),r===-1&&a===-1&&t.push(s),a!==-1&&(t=t.filter(o=>!o._inputCreateOnly))}else t=t.filter(s=>!s._inputCreateOnly);return t}bindKeyBoardEvent(){this._keydownHandler=e=>{this._handleKeyDown(e)},this._adapter.registerKeyDown(this._keydownHandler)}unBindKeyBoardEvent(){this._keydownHandler&&this._adapter.unregisterKeyDown()}_handleKeyDown(e){const t=e.keyCode,{loading:n,filter:s,multiple:r,disabled:a}=this.getProps(),{isOpen:o}=this.getStates();if(!(n||a))switch(t){case ds.UP:e.preventDefault(),this._handleArrowKeyDown(-1);break;case ds.DOWN:e.preventDefault(),this._handleArrowKeyDown(1);break;case ds.BACKSPACE:this._handleBackspaceKeyDown();break;case ds.ENTER:jn(e),this._handleEnterKeyDown(e);break;case ds.ESC:o&&this.close({event:e}),s&&!r&&this._focusTrigger();break;case ds.TAB:this._handleTabKeyDown(e);break}}handleContainerKeyDown(e){const t=e.keyCode,{isOpen:n}=this.getStates();switch(t){case ds.TAB:n&&this._handleTabKeyDown(e);break}}_getEnableFocusIndex(e){const{focusIndex:t,options:n}=this.getStates(),s=n.filter(o=>o._show),r=s.length;let a=t+e;if(a<0&&(a=r-1),a>=r&&(a=0),e>0){let o=-1;for(let l=0;l<s.length&&(!s[l].disabled&&(o=l),!(o>=a));l++);a=o}else{let o=s.length;for(let l=r-1;l>=0&&(!s[l].disabled&&(o=l),!(o<=a));l--);a=o}this._adapter.updateFocusIndex(a),this._adapter.updateScrollTop(a)}_handleArrowKeyDown(e){const{isOpen:t}=this.getStates();t?this._getEnableFocusIndex(e):this.open()}_handleTabKeyDown(e){const{isOpen:t}=this.getStates();if(this._adapter.updateFocusState(!1),t){const n=this._adapter.getContainer(),s=this._adapter.getFocusableElements(n);s.length>0?e.shiftKey?this._handlePanelOpenShiftTabKeyDown(s,e):this._handlePanelOpenTabKeyDown(s,e):(this.close({event:e}),this._notifyBlur(e))}else this._notifyBlur(e)}_handlePanelOpenTabKeyDown(e,t){const n=this._adapter.getActiveElement();this._adapter.getIsFocusInContainer()?n===e[e.length-1]&&(this._focusTrigger(),this.close({event:t}),jn(t)):(e[0].focus(),this._adapter.setIsFocusInContainer(!0),jn(t))}_handlePanelOpenShiftTabKeyDown(e,t){const n=this._adapter.getActiveElement();this._adapter.getIsFocusInContainer()?n===e[0]&&(this._focusTrigger(),this._adapter.setIsFocusInContainer(!1),jn(t)):(this.close({event:t}),this._notifyBlur(t))}_handleEnterKeyDown(e){const{isOpen:t,options:n,focusIndex:s}=this.getStates();if(!t)this.open();else if(s!==-1){const r=n.filter(o=>o._show),{length:a}=r;if(a<=s)return;if(r&&a){const o=r[s];if(o.disabled)return;this.onSelect(o,s,e)}}else this.close({event:e})}_handleBackspaceKeyDown(){if(this._isMultiple()){const e=this._adapter.getSelections(),{inputValue:t}=this.getStates(),n=e.size;if(n&&!t){const s=[...e.keys()];let r=n-1,a=s[r],o=e.get(a),l=!1;if(o.disabled&&r===0)return;for(;o.disabled&&r!==0;)r=r-1,a=s[r],o=e.get(a),r==0&&o.disabled&&(l=!0);l||this.removeTag(o)}}}_notifyChange(e){const{onChangeWithObject:t}=this.getProps(),n=this.getState("selections");let s;const r=[...e.values()],a=this._isMultiple();if(this._diffSelections(e,n,a))switch(!0){case t:this._notifyChangeWithObject(e);break;case(!t&&!a):s=r.length?r[0].value:void 0,this._adapter.notifyChange(s);break;case(!t&&a):s=r.length?r.map(l=>l.value):[],this._adapter.notifyChange(s);break}}_removeInternalKey(e){let t=Object.assign({},e);return delete t._parentGroup,delete t._show,delete t._selected,delete t._scrollIndex,delete t._keyInJsx,"_keyInOptionList"in t&&(t.key=t._keyInOptionList,delete t._keyInOptionList),t}_notifySelect(e,t){const n=this._removeInternalKey(t);this._adapter.notifySelect(e,n)}_notifyDeselect(e,t){const n=this._removeInternalKey(t);this._adapter.notifyDeselect(e,n)}_diffSelections(e,t,n){let s=!0,r=!0;if(!n){const a=[...e.values()],o=[...t.values()],l=a[0]?a[0].value:a[0],c=o[0]?o[0].value:o[0];r=!wi(l,c);const u=a[0]?a[0].label:a[0],h=o[0]?o[0].label:o[0];s=!wi(u,h)}return r||s}_notifyChangeWithObject(e){this.getState("selections");const t=[];for(const n of e.entries()){let s=Object.assign({label:n[0]},n[1]);s=this._removeInternalKey(s),t.push(s)}this._isMultiple()?this._adapter.notifyChange(t):this._adapter.notifyChange(t[0])}_notifyBlur(e){this._adapter.notifyBlur(e)}_notifyFocus(e){this._adapter.notifyFocus(e)}handleMouseEnter(e){this._adapter.updateHovering(!0),this._adapter.notifyMouseEnter(e)}handleMouseLeave(e){this._adapter.updateHovering(!1),this._adapter.notifyMouseLeave(e)}handleClearClick(e){const{filter:t,searchPosition:n}=this.getProps();t&&n===yu.SEARCH_POSITION_TRIGGER&&this.clearInput(e),this.focus(),this.clearSelected(),e.stopPropagation()}handleKeyPress(e){e&&e.key===lj&&this.handleClick(e)}handleClearBtnEnterPress(e){jd(e)&&this.handleClearClick(e)}handleOptionMouseEnter(e){this._adapter.updateFocusIndex(e)}handleListScroll(e){this._adapter.notifyListScroll(e)}handleTriggerFocus(e){this.bindKeyBoardEvent(),this._adapter.setIsFocusInContainer(!1)}handleTriggerBlur(e){this.getProps();const{isOpen:t,isFocus:n}=this.getStates();n&&!t&&(this._notifyBlur(e),this._adapter.updateFocusState(!1))}handleInputBlur(e){const{filter:t,autoFocus:n}=this.getProps(),s=this._isMultiple();n&&t&&!s&&this.toggle2SearchInput(!1)}selectAll(){const{options:e}=this.getStates(),{onChangeWithObject:t}=this.getProps();let n=[];if(!this._isMultiple()){console.warn(`[Semi Select]: It seems that you have called the selectAll method in the single-selection Select.
                Please note that this is not a legal way to use it`);return}t?n=e:n=e.map(r=>r.value),this.handleValueChange(n),this._adapter.notifyChange(n)}checkMultipleProps(e){if(this._isMultiple()){const t=e||this.getProps(),{defaultValue:n,value:s}=t,r=s||n;!Ms(r)&&!Array.isArray(r)&&ns(!0,"[Semi Select] defaultValue/value should be array type in multiple mode")}}updateScrollTop(){this._adapter.updateScrollTop()}updateOverflowItemCount(e,t){const{maxTagCount:n,ellipsisTrigger:s}=this.getProps();s&&(t?this._adapter.updateOverflowItemCount(t):typeof n=="number"&&(e-n>0?this._adapter.updateOverflowItemCount(e-n):this._adapter.updateOverflowItemCount(0)))}updateIsFullTags(){const{isFullTags:e}=this.getStates();e||this._adapter.setState({isFullTags:!0})}handlePopoverClose(){this._adapter.emit("popoverClose")}handleSlotMouseEnter(){this._adapter.updateFocusIndex(-1)}}const Q0=JQ.PREFIX,Dee=d0.TAG_SIZE,QFe=d0.AVATAR_SHAPE;class sA extends H.PureComponent{renderNTag(e,t){const{size:n,showPopover:s,popoverProps:r,onPlusNMouseEnter:a}=this.props;let o=k.createElement(mc,{closable:!1,size:n,color:"grey",style:{backgroundColor:"transparent"},key:"_+n",onMouseEnter:a},"+",e);return s&&(o=k.createElement(ss,Object.assign({showArrow:!0,content:t,trigger:"hover",position:"top",autoAdjustOverflow:!0,className:`${Q0}-rest-group-popover`},r,{key:"_+n_Popover"}),o)),o}renderMergeTags(e){const{maxTagCount:t,tagList:n,restCount:s}=this.props,r=s||n.length-t;let a=e;const o=e.slice(0,t),l=e.slice(t);let c=null;return r>0&&(c=this.renderNTag(r,l),o.push(c),a=o),a}renderAllTags(){const{tagList:e,size:t,mode:n,avatarShape:s,onTagClose:r}=this.props;return e.map(o=>{if(n==="custom")return o;const l=Object.assign({},o);return l.size||(l.size=t),l.avatarShape||(l.avatarShape=s),l.tagKey||(typeof l.children=="string"||typeof l.children=="number"?l.tagKey=l.children:l.tagKey=Math.random()),k.createElement(mc,Object.assign({},l,{key:l.tagKey,onClose:(c,u,h)=>{l.onClose&&l.onClose(c,u,h),r&&r(c,u,h)}}))})}render(){const{style:e,className:t,maxTagCount:n,size:s}=this.props,r=K({[`${Q0}-group`]:!0,[`${Q0}-group-max`]:n,[`${Q0}-group-small`]:s==="small",[`${Q0}-group-large`]:s==="large"},t),a=this.renderAllTags(),o=typeof n>"u"?a:this.renderMergeTags(a);return k.createElement("div",{style:e,className:r},o)}}sA.defaultProps={style:{},className:"",size:Dee[0],avatarShape:"square",onTagClose:()=>{},onPlusNMouseEnter:()=>{}};sA.propTypes={children:v.node,style:v.object,className:v.string,maxTagCount:v.number,restCount:v.number,tagList:v.array,size:v.oneOf(Dee),mode:v.string,onTagClose:v.func,showPopover:v.bool,popoverProps:v.object,avatarShape:v.oneOf(QFe)};var eBe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const D9=(i,e,t,n)=>{const s=i.props;if(!i||!s)return null;const r=Object.assign(Object.assign({value:s.value,label:s.label||s.children||s.value,_show:!0,_selected:!1,_scrollIndex:t},s),{_parentGroup:e});return r._keyInJsx=n||i.key,r},tBe=i=>{let e=[],t=[];const n={label:"",children:[],_show:!1};let s=k.Children.toArray(i);s=s.filter(o=>o&&o.props);let r="",a=-1;return s.forEach(o=>{if(o.type.isSelectOption){r="option",a++;const l=D9(o,void 0,a);n.children.push(l),t.push(l)}else if(o.type.isSelectOptionGroup){r="group";let l=o.props,{children:c}=l,u=eBe(l,["children"]),h=[];Array.isArray(c)?h=c.map(f=>f.key):h.push(c.key),c=k.Children.toArray(c);const d=c.map((f,g)=>{let m=f.key;return h[g]===null&&(m=o.key+""+f.key),a++,D9(f,u,a,m)}),p=Object.assign(Object.assign({},o.props),{children:d,key:o.key});e.push(p),t=t.concat(d)}else ns(!0,"[Semi Select] The children of `Select` should be `Select.Option` or `Select.OptionGroup`")}),r==="option"&&(e=[n]),{optionGroups:e,options:t}},iBe=i=>{let{index:e,data:t,style:n}=i;const{visibleOptions:s,renderOption:r}=t,a=s[e];return r(a,e,n)};var F9=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};let $p=class extends H.PureComponent{onClick(e,t){var{value:n,label:s,children:r}=e,a=F9(e,["value","label","children"]);const{props:o}=this;o.disabled||o.onSelect(Object.assign(Object.assign({},a),{value:n,label:s||r}),t)}renderOptionContent(e){let{config:t,children:n,inputValue:s,prefixCls:r}=e;return Ii(n)&&s?fQ(t):n}render(){const e=this.props,{children:t,disabled:n,value:s,selected:r,label:a,empty:o,emptyContent:l,onSelect:c,focused:u,showTick:h,className:d,style:p,onMouseEnter:f,prefixCls:g,renderOptionItem:m,inputValue:y,semiOptionId:b}=e,x=F9(e,["children","disabled","value","selected","label","empty","emptyContent","onSelect","focused","showTick","className","style","onMouseEnter","prefixCls","renderOptionItem","inputValue","semiOptionId"]),S=K(g,{[`${g}-disabled`]:n,[`${g}-selected`]:r,[`${g}-focused`]:u,[`${g}-empty`]:o,[d]:d}),C=K([`${g}-icon`]);if(o)return l===null?null:k.createElement(gi,{componentName:"Select"},A=>k.createElement("div",{className:S,"x-semi-prop":"emptyContent"},l||A.emptyText));if(typeof m=="function"){const A=K(d,{[`${g}-custom`]:!0,[`${g}-custom-selected`]:r});return m(Object.assign({disabled:n,focused:u,selected:r,style:p,label:a,value:s,inputValue:y,onMouseEnter:T=>f(T),onClick:T=>this.onClick(Object.assign({value:s,label:a,children:t},x),T),className:A},x))}const w={searchWords:y,sourceString:t,option:{highlightClassName:`${g}-keyword`}};return k.createElement("div",Object.assign({className:S,onClick:A=>{this.onClick(Object.assign({value:s,label:a,children:t},x),A)},onMouseEnter:A=>f&&f(A),role:"option",id:b,"aria-selected":r?"true":"false","aria-disabled":n?"true":"false",style:p},Sl(x)),h?k.createElement("div",{className:C},k.createElement(oy,null)):null,Ii(t)?k.createElement("div",{className:`${g}-text`},this.renderOptionContent({children:t,config:w,inputValue:y,prefixCls:g})):t)}};$p.isSelectOption=!0;$p.propTypes={children:v.node,disabled:v.bool,value:v.oneOfType([v.string,v.number]),selected:v.bool,label:v.node,empty:v.bool,emptyContent:v.node,onSelect:v.func,focused:v.bool,showTick:v.bool,className:v.string,style:v.object,onMouseEnter:v.func,prefixCls:v.string,renderOptionItem:v.func,inputValue:v.string};$p.defaultProps={prefixCls:Vj.PREFIX_OPTION};var nBe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const sBe=Vj.PREFIX_GROUP;class tP extends Ve{render(){const e=this.props,{label:t,className:n,style:s}=e,r=nBe(e,["label","className","style"]),a=K(n,{[sBe]:!0});return!t&&typeof t!="number"?null:k.createElement("div",Object.assign({className:a,style:s},this.getDataAttr(r)),t)}}tP.isSelectOptionGroup=!0;tP.propTypes={children:v.oneOfType([v.array,v.node]),label:v.node,className:v.string,style:v.object};var rBe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const $e=Vj.PREFIX,aBe=0;class Iu extends Ve{constructor(e){super(e),this.setOptionContainerEl=t=>this.optionContainerEl={current:t},this.handleInputChange=(t,n)=>this.foundation.handleInputChange(t,n),this.getTagItem=(t,n,s)=>{const{size:r,disabled:a}=this.props,o=t[0],{value:l}=t[1],c=t[1].disabled||a,u=(f,g)=>{g&&typeof g.preventDefault=="function"&&g.preventDefault(),this.foundation.removeTag({label:o,value:l})},{content:h,isRenderInTag:d}=s(t[1],{index:n,disabled:c,onClose:u}),p={disabled:c,closable:!c,onClose:u};return d?k.createElement(mc,Object.assign({},p,{color:"white",size:r||"large",key:l,tabIndex:-1}),h):k.createElement(H.Fragment,{key:l},h)},this.state={isOpen:!1,isFocus:!1,options:[],selections:new Map,dropdownMinWidth:null,optionKey:aBe,inputValue:"",showInput:!1,focusIndex:e.defaultActiveFirstOption?0:-1,keyboardEventSet:{},optionGroups:[],isHovering:!1,isFocusInContainer:!1,isFullTags:!1,overflowItemCount:0},this.selectOptionListID="",this.selectID="",this.virtualizeListRef=k.createRef(),this.inputRef=k.createRef(),this.dropdownInputRef=k.createRef(),this.triggerRef=k.createRef(),this.optionsRef=k.createRef(),this.optionContainerEl=k.createRef(),this.clickOutsideHandler=null,this.onSelect=this.onSelect.bind(this),this.onClear=this.onClear.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.renderOption=this.renderOption.bind(this),this.onKeyPress=this.onKeyPress.bind(this),this.eventManager=new dQ,this.foundation=new JFe(this.adapter)}get adapter(){var e=this;const t={registerKeyDown:r=>{const a={onKeyDown:r};this.setState({keyboardEventSet:a})},unregisterKeyDown:()=>{this.setState({keyboardEventSet:{}})},updateFocusIndex:r=>{this.setState({focusIndex:r})},scrollToFocusOption:()=>{}},n={updateInputValue:r=>{this.setState({inputValue:r})},toggleInputShow:(r,a)=>{this.setState({showInput:r},()=>{a()})},focusInput:()=>{const{preventScroll:r}=this.props;this.inputRef&&this.inputRef.current&&this.inputRef.current.focus({preventScroll:r})},focusDropdownInput:()=>{const{preventScroll:r}=this.props;this.dropdownInputRef&&this.dropdownInputRef.current&&this.dropdownInputRef.current.focus({preventScroll:r})}},s={notifyMaxLimit:r=>this.props.onExceed(r),getMaxLimit:()=>this.props.max,registerClickOutsideHandler:r=>{const a=o=>{const l=this.optionsRef&&this.optionsRef.current,c=this.triggerRef&&this.triggerRef.current,u=vr.findDOMNode(l),h=o.target,d=o.composedPath&&o.composedPath()||[h];!(u&&u.contains(h))&&!(c&&c.contains(h))&&!(d.includes(c)||d.includes(u))&&r(o)};this.clickOutsideHandler=a,document.addEventListener("mousedown",a,!1)},unregisterClickOutsideHandler:()=>{this.clickOutsideHandler&&(document.removeEventListener("mousedown",this.clickOutsideHandler,!1),this.clickOutsideHandler=null)},rePositionDropdown:()=>{let{optionKey:r}=this.state;r=r+1,this.setState({optionKey:r})},notifyDeselect:(r,a)=>{delete a._parentGroup,this.props.onDeselect(r,a)}};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},super.adapter),t),n),s),{on:(r,a)=>this.eventManager.on(r,a),off:r=>this.eventManager.off(r),once:(r,a)=>this.eventManager.once(r,a),emit:r=>this.eventManager.emit(r),getOptionsFromChildren:function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.props.children,a=[],o=[];const{optionList:l}=e.props;if(l&&l.length)o=l.map((c,u)=>Object.assign({_show:!0,_selected:!1,_scrollIndex:u},c)),a[0]={children:o,label:""};else{const c=tBe(r);a=c.optionGroups,o=c.options}return e.setState({optionGroups:a}),o},updateOptions:r=>{this.setState({options:r})},openMenu:r=>{this.setState({isOpen:!0},()=>{r==null||r()})},closeMenu:()=>{this.setState({isOpen:!1})},getTriggerWidth:()=>{const r=this.triggerRef.current;return r&&r.getBoundingClientRect().width},setOptionWrapperWidth:r=>{this.setState({dropdownMinWidth:r})},updateSelection:r=>{this.setState({selections:r})},getSelections:()=>new Map(this.state.selections),notifyChange:r=>{this.props.onChange(r)},notifySelect:(r,a)=>{delete a._parentGroup,this.props.onSelect(r,a)},notifyDropdownVisibleChange:r=>{this.props.onDropdownVisibleChange(r)},notifySearch:(r,a)=>{this.props.onSearch(r,a)},notifyCreate:r=>{this.props.onCreate(r)},notifyMouseEnter:r=>{this.props.onMouseEnter(r)},notifyMouseLeave:r=>{this.props.onMouseLeave(r)},notifyFocus:r=>{this.props.onFocus(r)},notifyBlur:r=>{this.props.onBlur(r)},notifyClear:()=>{this.props.onClear()},notifyListScroll:r=>{this.props.onListScroll(r)},updateHovering:r=>{this.setState({isHovering:r})},updateFocusState:r=>{this.setState({isFocus:r})},updateOverflowItemCount:r=>{this.setState({overflowItemCount:r})},focusTrigger:()=>{try{const{preventScroll:r}=this.props;this.triggerRef.current.focus({preventScroll:r})}catch{}},getContainer:()=>this.optionContainerEl&&this.optionContainerEl.current,getFocusableElements:r=>yQ(r),getActiveElement:()=>mQ(),setIsFocusInContainer:r=>{this.setState({isFocusInContainer:r})},getIsFocusInContainer:()=>this.state.isFocusInContainer,updateScrollTop:r=>{let a;"renderOptionItem"in this.props?(a=`.${$e}-option-custom-selected`,r!==void 0&&(a=`.${$e}-option-custom:nth-child(${r+1})`)):(a=`.${$e}-option-selected`,r!==void 0&&(a=`.${$e}-option:nth-child(${r+1})`));let o=document.querySelector(`#${$e}-${this.selectOptionListID} ${a}`);if(Array.isArray(o)&&(o=o[0]),o){const l=o.parentNode;l.scrollTop=o.offsetTop-l.offsetTop-l.clientHeight/2+o.clientHeight/2}}})}componentDidMount(){this.foundation.init(),this.selectOptionListID=Cl(),this.selectID=this.props.id||Cl()}componentWillUnmount(){this.foundation.destroy()}componentDidUpdate(e,t){const n=k.Children.toArray(e.children).map(a=>a.key),s=k.Children.toArray(this.props.children).map(a=>a.key);let r=!1;(!wi(n,s)||!wi(e.optionList,this.props.optionList))&&(r=!0,this.foundation.handleOptionListChange()),(!wi(this.props.value,e.value)||r)&&("value"in this.props?this.foundation.handleValueChange(this.props.value):this.foundation.handleOptionListChangeHadDefaultValue())}renderTriggerInput(){const{size:e,multiple:t,disabled:n,inputProps:s,filter:r}=this.props,a=ne(s,"className"),o=K(`${$e}-input`,{[`${$e}-input-single`]:!t,[`${$e}-input-multiple`]:t},a),{inputValue:l,focusIndex:c}=this.state,u=Object.assign({value:l,disabled:n,className:o,onChange:this.handleInputChange},s);let h={};return t&&(h={width:l?`${l.length*16}px`:"2px"},u.style=h),k.createElement(ll,Object.assign({ref:this.inputRef,size:e,"aria-activedescendant":c!==-1?`${this.selectID}-option-${c}`:"",onFocus:d=>{t&&r&&this.setState({isFocus:!0}),d.stopPropagation()},onBlur:d=>this.foundation.handleInputBlur(d)},u))}renderDropdownInput(){const{size:e,multiple:t,disabled:n,inputProps:s,filter:r,searchPosition:a,searchPlaceholder:o}=this.props,{inputValue:l,focusIndex:c}=this.state,u=K(`${$e}-dropdown-search-wrapper`,{}),h=ne(s,"className"),d=K(`${$e}-dropdown-input`,{[`${$e}-dropdown-input-single`]:!t,[`${$e}-dropdown-input-multiple`]:t},h),p=Object.assign(Object.assign({value:l,disabled:n,className:d,onChange:this.handleInputChange,placeholder:o,showClear:!0},s),{onKeyDown:f=>this.foundation._handleKeyDown(f)});return k.createElement("div",{className:u},k.createElement(ll,Object.assign({ref:this.dropdownInputRef,prefix:k.createElement($Oe,null),"aria-activedescendant":c!==-1?`${this.selectID}-option-${c}`:""},p)))}close(){this.foundation.close()}open(){this.foundation.open()}clearInput(){this.foundation.clearInput()}selectAll(){this.foundation.selectAll()}deselectAll(){this.foundation.clearSelected()}focus(){this.foundation.focus()}onSelect(e,t,n){this.foundation.onSelect(e,t,n)}onClear(e){e.nativeEvent.stopImmediatePropagation(),this.foundation.handleClearClick(e)}search(e,t){this.handleInputChange(e,t)}renderEmpty(){return k.createElement($p,{empty:!0,emptyContent:this.props.emptyContent})}renderLoading(){const e=`${$e}-loading-wrapper`;return k.createElement("div",{className:e},k.createElement(Cc,null))}renderOption(e,t,n){const{focusIndex:s,inputValue:r}=this.state,{renderOptionItem:a}=this.props;let o;const l=t===s;let c=n||{};return e.style&&(c=Object.assign(Object.assign({},c),e.style)),e._inputCreateOnly?o=this.renderCreateOption(e,l,t,n):("key"in e&&(e._keyInOptionList=e.key),o=k.createElement($p,Object.assign({showTick:!0},e,{selected:e._selected,onSelect:(u,h)=>this.onSelect(u,t,h),focused:l,onMouseEnter:()=>this.onOptionHover(t),style:c,key:e._keyInOptionList||e._keyInJsx||e.label+e.value+t,renderOptionItem:a,inputValue:r,semiOptionId:`${this.selectID}-option-${t}`}),e.label)),o}renderCreateOption(e,t,n,s){const{renderCreateItem:r}=this.props;if(typeof r>"u")return k.createElement($p,Object.assign({key:e.key||e.label+e.value,onSelect:(l,c)=>this.onSelect(l,n,c),onMouseEnter:()=>this.onOptionHover(n),showTick:!0},e,{focused:t,style:s}),k.createElement(gi,{componentName:"Select"},l=>k.createElement(k.Fragment,null,k.createElement("span",{className:`${$e}-create-tips`},l.createText),e.value)));const a=r(e.value,t,s);return k.createElement("div",{role:"button","aria-label":"Use the input box to create an optional item",onClick:o=>this.onSelect(e,n,o),key:e.key||e.label},a)}onOptionHover(e){this.foundation.handleOptionMouseEnter(e)}renderWithGroup(e){const t=[],n=new Map;return e.forEach((s,r)=>{const a=s._parentGroup,o=this.renderOption(s,r);if(a&&!n.has(a.label)){const l=k.createElement(tP,Object.assign({},a,{key:a.label}));n.set(a.label,!0),t.push(l)}t.push(o)}),t}renderVirtualizeList(e){const{virtualize:t}=this.props,{direction:n}=this.context,{height:s,width:r,itemSize:a}=t;return k.createElement(ZQ,{ref:this.virtualizeListRef,height:s||Lee.LIST_HEIGHT,itemCount:e.length,itemSize:a,itemData:{visibleOptions:e,renderOption:this.renderOption},width:r||"100%",style:{direction:n}},iBe)}renderOptions(e){const{dropdownMinWidth:t,options:n,selections:s}=this.state,{maxHeight:r,dropdownClassName:a,dropdownStyle:o,outerTopSlot:l,innerTopSlot:c,outerBottomSlot:u,innerBottomSlot:h,loading:d,virtualize:p,multiple:f,emptyContent:g,searchPosition:m,filter:y}=this.props,b=n.filter(A=>A._show);let x=this.renderWithGroup(b);p&&(x=this.renderVirtualizeList(b));const S=Object.assign({minWidth:t},o),C=K({[`${$e}-option-list`]:!0,[`${$e}-option-list-chosen`]:s.size}),w=!n.length||!n.some(A=>A._show);return k.createElement("div",{id:`${$e}-${this.selectOptionListID}`,className:K({[`${$e}-option-list-wrapper`]:!(w&&g===null)},a),style:S,ref:this.setOptionContainerEl,onKeyDown:A=>this.foundation.handleContainerKeyDown(A)},l?k.createElement("div",{className:`${$e}-option-list-outer-top-slot`,onMouseEnter:()=>this.foundation.handleSlotMouseEnter()},l):null,m===yu.SEARCH_POSITION_DROPDOWN&&y?this.renderDropdownInput():null,k.createElement("div",{style:{maxHeight:`${r}px`},className:C,role:"listbox","aria-multiselectable":f,onScroll:A=>this.foundation.handleListScroll(A)},c?k.createElement("div",{className:`${$e}-option-list-inner-top-slot`,onMouseEnter:()=>this.foundation.handleSlotMouseEnter()},c):null,d?this.renderLoading():w?this.renderEmpty():x,h?k.createElement("div",{className:`${$e}-option-list-inner-bottom-slot`,onMouseEnter:()=>this.foundation.handleSlotMouseEnter()},h):null),u?k.createElement("div",{className:`${$e}-option-list-outer-bottom-slot`,onMouseEnter:()=>this.foundation.handleSlotMouseEnter()},u):null)}renderSingleSelection(e,t){let{renderSelectedItem:n,searchPosition:s}=this.props;const{placeholder:r}=this.props,{showInput:a,inputValue:o}=this.state;let l="";const c=[...e];if(typeof n>"u"&&(n=p=>p.label),c.length){const p=c[0][1];l=n(p)}const u=s===yu.SEARCH_POSITION_TRIGGER,h=K({[`${$e}-selection-text`]:!0,[`${$e}-selection-placeholder`]:!l&&l!==0,[`${$e}-selection-text-hide`]:o&&a&&u,[`${$e}-selection-text-inactive`]:!o&&a&&u}),d=`${$e}-content-wrapper`;return k.createElement(k.Fragment,null,k.createElement("div",{className:d},k.createElement("span",{className:h,"x-semi-prop":"placeholder"},l||l===0?l:r),t&&a&&u?this.renderTriggerInput():null))}renderTag(e,t,n){const{size:s,disabled:r}=this.props;let{renderSelectedItem:a}=this.props;const o=e[0],{value:l}=e[1],c=e[1].disabled||r,u=(g,m)=>{m&&typeof m.preventDefault=="function"&&m.preventDefault(),this.foundation.removeTag({label:o,value:l})};typeof a>"u"&&(a=g=>({isRenderInTag:!0,content:g.label}));const{content:h,isRenderInTag:d}=a(e[1],{index:t,disabled:c,onClose:u}),p={disabled:c,closable:!c,onClose:u},f=n&&!xt(this.props.renderSelectedItem)?k.createElement(GE,{size:"small",ellipsis:{rows:1,showTooltip:{type:"popover",opts:{style:{width:"auto",fontSize:12}}}}},h):h;return d?k.createElement(mc,Object.assign({},p,{color:"white",size:s||"large",key:l,style:{maxWidth:"100%"}}),f):k.createElement(H.Fragment,{key:l},f)}renderNTag(e,t){const{size:n,showRestTagsPopover:s,restTagsPopoverProps:r}=this.props;let a=k.createElement(mc,{closable:!1,size:n||"large",color:"grey",className:`${$e}-content-wrapper-collapse-tag`,key:`_+${e}`,style:{marginRight:0,flexShrink:0}},"+",e);return s&&(a=k.createElement(ss,Object.assign({showArrow:!0,content:k.createElement(Nt,{spacing:2,wrap:!0,style:{maxWidth:"400px"}},t.map((o,l)=>this.renderTag(o,l))),trigger:"hover",position:"top",autoAdjustOverflow:!0},r,{key:`_+${e}_Popover`}),a)),a}renderOverflow(e,t){return e.length&&e[0]?this.renderTag(e[0],t,!0):null}handleOverflow(e){const{overflowItemCount:t,selections:n}=this.state,{maxTagCount:s}=this.props,r=n.size-s>0?n.size-s+e.length-1:e.length-1;t!==r&&this.foundation.updateOverflowItemCount(n.size,r)}renderCollapsedTags(e,t){const{overflowItemCount:n}=this.state,s=typeof t=="number"?e.slice(0,t):e;return k.createElement("div",{className:`${$e}-content-wrapper-collapse`},k.createElement(kb,{items:s,key:String(e.length),overflowRenderer:r=>this.renderOverflow(r,t-1),onOverflow:r=>this.handleOverflow(r),visibleItemRenderer:(r,a)=>this.renderTag(r,a)}),n>0&&this.renderNTag(n,e.slice(e.length-n)))}renderOneLineTags(e,t){let{renderSelectedItem:n}=this.props;const{showRestTagsPopover:s,restTagsPopoverProps:r,maxTagCount:a}=this.props,{isFullTags:o}=this.state;let l;if(typeof n>"u"&&(n=c=>({isRenderInTag:!0,content:c.label})),s){const u=(o?e:e.slice(0,a)).map((h,d)=>this.getTagItem(h,d,n));l=k.createElement(sA,{tagList:u,maxTagCount:t,restCount:o?void 0:e.length-a,size:"large",mode:"custom",showPopover:s,popoverProps:r,onPlusNMouseEnter:()=>{this.foundation.updateIsFullTags()}})}else{const u=e.slice(0,a).map((h,d)=>this.getTagItem(h,d,n));l=k.createElement(sA,{tagList:u,maxTagCount:t,restCount:e.length-a,size:"large",mode:"custom"})}return l}renderMultipleSelection(e,t){let{renderSelectedItem:n,searchPosition:s}=this.props;const{placeholder:r,maxTagCount:a,expandRestTagsOnClick:o,ellipsisTrigger:l}=this.props,{inputValue:c,isOpen:u}=this.state,h=[...e];typeof n>"u"&&(n=S=>({isRenderInTag:!0,content:S.label}));const d=K({[`${$e}-content-wrapper`]:!0,[`${$e}-content-wrapper-one-line`]:a&&!u,[`${$e}-content-wrapper-empty`]:!h.length}),p=K({[`${$e}-selection-text`]:!0,[`${$e}-selection-placeholder`]:!h.length,[`${$e}-selection-text-hide`]:h&&h.length}),f=r&&!c?k.createElement("span",{className:p},r):null,g=h.length>a?a:void 0,m=!a,y=l?this.renderCollapsedTags(h,g):this.renderOneLineTags(h,g),b=m||o&&u?h.map((S,C)=>this.renderTag(S,C)):y,x=t&&s===yu.SEARCH_POSITION_TRIGGER;return k.createElement(k.Fragment,null,k.createElement("div",{className:d},h&&h.length?b:f,x?this.renderTriggerInput():null))}onMouseEnter(e){this.foundation.handleMouseEnter(e)}onMouseLeave(e){this.foundation.handleMouseLeave(e)}onKeyPress(e){this.foundation.handleKeyPress(e)}handlePopoverVisibleChange(e){const{virtualize:t}=this.props,{selections:n}=this.state;if(e)if(t){let s=-1;if(n.forEach(r=>{const a=ne(r,"_scrollIndex");Sa(a)&&a>=0&&(s=s!==-1&&s<a?s:a)}),s!==-1)try{this.virtualizeListRef.current.scrollToItem(s,"center")}catch{}}else this.foundation.updateScrollTop()}renderSuffix(){const{suffix:e}=this.props,t=K({[`${$e}-suffix`]:!0,[`${$e}-suffix-text`]:e&&Ii(e),[`${$e}-suffix-icon`]:oo(e)});return k.createElement("div",{className:t,"x-semi-prop":"suffix"},e)}renderPrefix(){const{prefix:e,insetLabel:t,insetLabelId:n}=this.props,s=e||t,r=K({[`${$e}-prefix`]:!0,[`${$e}-inset-label`]:t,[`${$e}-prefix-text`]:s&&Ii(s),[`${$e}-prefix-icon`]:oo(s)});return k.createElement("div",{className:r,id:n,"x-semi-prop":"prefix,insetLabel"},s)}renderSelection(){const e=this.props,{disabled:t,multiple:n,filter:s,style:r,id:a,size:o,className:l,validateStatus:c,showArrow:u,suffix:h,prefix:d,insetLabel:p,placeholder:f,triggerRender:g,arrowIcon:m,clearIcon:y,borderless:b}=e,x=rBe(e,["disabled","multiple","filter","style","id","size","className","validateStatus","showArrow","suffix","prefix","insetLabel","placeholder","triggerRender","arrowIcon","clearIcon","borderless"]),{selections:S,isOpen:C,keyboardEventSet:w,inputValue:A,isHovering:T,isFocus:E,showInput:P,focusIndex:O}=this.state,M=typeof g=="function",R=!!s,j=M?K(l):K($e,l,{[`${$e}-borderless`]:b,[`${$e}-open`]:C,[`${$e}-focus`]:E,[`${$e}-disabled`]:t,[`${$e}-single`]:!n,[`${$e}-multiple`]:n,[`${$e}-filterable`]:R,[`${$e}-small`]:o==="small",[`${$e}-large`]:o==="large",[`${$e}-error`]:c==="error",[`${$e}-warning`]:c==="warning",[`${$e}-no-arrow`]:!u,[`${$e}-with-prefix`]:d||p,[`${$e}-with-suffix`]:h}),I=this.props.showClear&&(S.size||A)&&!t&&(T||C),D=u?k.createElement("div",{className:`${$e}-arrow`,"x-semi-prop":"arrowIcon"},m):k.createElement("div",{className:`${$e}-arrow-empty`}),z=y||k.createElement(nx,null),$=M?k.createElement(yj,{value:Array.from(S.values()),inputValue:A,onChange:this.handleInputChange,onSearch:this.handleInputChange,onRemove:L=>this.foundation.removeTag(L),onClear:this.onClear,disabled:t,triggerRender:g,placeholder:f,componentName:"Select",componentProps:Object.assign({},this.props)}):[k.createElement(H.Fragment,{key:"prefix"},d||p?this.renderPrefix():null),k.createElement(H.Fragment,{key:"selection"},k.createElement("div",{className:K(`${$e}-selection`)},n?this.renderMultipleSelection(S,R):this.renderSingleSelection(S,R))),k.createElement(H.Fragment,{key:"suffix"},h?this.renderSuffix():null),k.createElement(H.Fragment,{key:"clearicon"},I?k.createElement("div",{className:K(`${$e}-clear`),onClick:this.onClear},z):D)],V=t||R&&P||R&&n?-1:0;return k.createElement("div",Object.assign({role:"combobox","aria-disabled":t,"aria-expanded":C,"aria-controls":`${$e}-${this.selectOptionListID}`,"aria-haspopup":"listbox","aria-label":S.size?"selected":"","aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],"aria-required":this.props["aria-required"],className:j,ref:L=>this.triggerRef.current=L,onClick:L=>this.foundation.handleClick(L),style:r,id:this.selectID,tabIndex:V,"aria-activedescendant":O!==-1?`${this.selectID}-option-${O}`:"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onFocus:L=>this.foundation.handleTriggerFocus(L),onBlur:L=>this.foundation.handleTriggerBlur(L),onKeyPress:this.onKeyPress},w,this.getDataAttr(x)),$)}render(){const{direction:e}=this.context,t=e==="rtl"?"bottomRight":"bottomLeft",{children:n,position:s=t,zIndex:r,getPopupContainer:a,motion:o,autoAdjustOverflow:l,mouseLeaveDelay:c,mouseEnterDelay:u,spacing:h,stopPropagation:d,dropdownMargin:p}=this.props,{isOpen:f,optionKey:g}=this.state,m=this.renderOptions(n),y=this.renderSelection();return k.createElement(ss,{getPopupContainer:a,motion:o,margin:p,autoAdjustOverflow:l,mouseLeaveDelay:c,mouseEnterDelay:u,zIndex:r,ref:this.optionsRef,content:m,visible:f,trigger:"custom",rePosKey:g,position:s,spacing:h,stopPropagation:d,disableArrowKeyDown:!0,onVisibleChange:b=>this.handlePopoverVisibleChange(b),afterClose:()=>this.foundation.handlePopoverClose()},y)}}Iu.contextType=Da;Iu.Option=$p;Iu.OptGroup=tP;Iu.propTypes={"aria-describedby":v.string,"aria-errormessage":v.string,"aria-invalid":v.bool,"aria-labelledby":v.string,"aria-required":v.bool,autoFocus:v.bool,autoClearSearchValue:v.bool,borderless:v.bool,children:v.node,clearIcon:v.node,defaultValue:v.oneOfType([v.string,v.number,v.array,v.object]),ellipsisTrigger:v.bool,value:v.oneOfType([v.string,v.number,v.array,v.object]),placeholder:v.node,onChange:v.func,multiple:v.bool,filter:v.oneOfType([v.func,v.bool]),max:v.number,maxTagCount:v.number,maxHeight:v.oneOfType([v.string,v.number]),style:v.object,className:v.string,size:v.oneOf(yu.SIZE_SET),disabled:v.bool,emptyContent:v.node,expandRestTagsOnClick:v.bool,onDropdownVisibleChange:v.func,zIndex:v.number,position:v.oneOf(yu.POSITION_SET),onSearch:v.func,getPopupContainer:v.func,dropdownClassName:v.string,dropdownStyle:v.object,dropdownMargin:v.oneOfType([v.number,v.object]),outerTopSlot:v.node,innerTopSlot:v.node,inputProps:v.object,outerBottomSlot:v.node,innerBottomSlot:v.node,optionList:v.array,dropdownMatchSelectWidth:v.bool,loading:v.bool,defaultOpen:v.bool,validateStatus:v.oneOf(yu.STATUS),defaultActiveFirstOption:v.bool,triggerRender:v.func,stopPropagation:v.bool,searchPosition:v.string,motion:v.bool,onChangeWithObject:v.bool,suffix:v.node,prefix:v.node,insetLabel:v.node,insetLabelId:v.string,showClear:v.bool,showArrow:v.bool,renderSelectedItem:v.func,allowCreate:v.bool,renderCreateItem:v.func,onMouseEnter:v.func,onMouseLeave:v.func,clickToHide:v.bool,onExceed:v.func,onCreate:v.func,remote:v.bool,onDeselect:v.func,onSelect:v.func,autoAdjustOverflow:v.bool,mouseEnterDelay:v.number,mouseLeaveDelay:v.number,spacing:v.oneOfType([v.number,v.object]),onBlur:v.func,onFocus:v.func,onClear:v.func,virtualize:v.object,renderOptionItem:v.func,onListScroll:v.func,arrowIcon:v.node,preventScroll:v.bool};Iu.__SemiComponentName__="Select";Iu.defaultProps=os(Iu.__SemiComponentName__,{stopPropagation:!0,motion:!0,borderless:!1,zIndex:Pu.DEFAULT_Z_INDEX,filter:!1,multiple:!1,disabled:!1,defaultOpen:!1,allowCreate:!1,placeholder:"",onDropdownVisibleChange:J,onChangeWithObject:!1,onChange:J,onSearch:J,onMouseEnter:J,onMouseLeave:J,onDeselect:J,onSelect:J,onCreate:J,onExceed:J,onFocus:J,onBlur:J,onClear:J,onListScroll:J,maxHeight:Lee.LIST_HEIGHT,dropdownMatchSelectWidth:!0,defaultActiveFirstOption:!0,showArrow:!0,showClear:!1,searchPosition:yu.SEARCH_POSITION_TRIGGER,remote:!1,autoAdjustOverflow:!0,autoClearSearchValue:!0,arrowIcon:k.createElement(af,{"aria-label":""}),showRestTagsPopover:!1,restTagsPopoverProps:{},expandRestTagsOnClick:!1,ellipsisTrigger:!1});var B9=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const Di=qFe.PREFIX,{Option:oBe}=Iu;class iP extends Ve{constructor(e){super(e);const t=e.total,n=e.pageSize||e.pageSizeOpts[0]||Hj.DEFAULT_PAGE_SIZE,s=e.size==="small"&&e.hoverShowPageSelect&&!e.disabled;this.state={total:t,showTotal:e.showTotal,currentPage:e.currentPage||e.defaultCurrentPage,pageSize:n,pageList:[],prevDisabled:!1,nextDisabled:!1,restLeftPageList:[],restRightPageList:[],quickJumpPage:"",allPageNumbers:s?Array.from({length:Math.ceil(t/n)},(r,a)=>a+1):[]},this.foundation=new ZFe(this.adapter),this.renderDefaultPage=this.renderDefaultPage.bind(this),this.renderSmallPage=this.renderSmallPage.bind(this),ns(!!(e.showSizeChanger&&e.hideOnSinglePage),"[Semi Pagination] You should not use showSizeChanger and hideOnSinglePage in ths same time. At this time, hideOnSinglePage no longer takes effect, otherwise there may be a problem that the switch entry disappears")}get adapter(){return Object.assign(Object.assign({},super.adapter),{setPageList:e=>{const{pageList:t,restLeftPageList:n,restRightPageList:s}=e;this.setState({pageList:t,restLeftPageList:n,restRightPageList:s})},setDisabled:(e,t)=>{this.setState({prevDisabled:e,nextDisabled:t})},updateTotal:e=>this.setState({total:e}),updatePageSize:e=>this.setState({pageSize:e}),updateQuickJumpPage:e=>this.setState({quickJumpPage:e}),updateAllPageNumbers:e=>this.setState({allPageNumbers:e}),setCurrentPage:e=>{this.setState({currentPage:e})},registerKeyDownHandler:e=>{document.addEventListener("keydown",e)},unregisterKeyDownHandler:e=>{document.removeEventListener("keydown",e)},notifyPageChange:e=>{this.props.onPageChange(e)},notifyPageSizeChange:e=>{this.props.onPageSizeChange(e)},notifyChange:(e,t)=>{this.props.onChange(e,t)}})}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}componentDidUpdate(e){const t={currentPage:this.props.currentPage,total:this.props.total,pageSize:this.props.pageSize};let n=!1,s=!1;e.currentPage!==this.props.currentPage&&(n=!0),e.total!==this.props.total&&(n=!0,s=!0),e.pageSize!==this.props.pageSize&&(n=!0,s=!0),n&&this.foundation.updatePage(t.currentPage,t.total,t.pageSize),s&&this.foundation.updateAllPageNumbers(t.total,t.pageSize)}renderPrevBtn(){const{prevText:e,disabled:t}=this.props,{prevDisabled:n}=this.state,s=n||t,r=K({[`${Di}-item`]:!0,[`${Di}-prev`]:!0,[`${Di}-item-disabled`]:s});return k.createElement("li",{role:"button","aria-disabled":!!s,"aria-label":"Previous",onClick:a=>!s&&this.foundation.goPrev(a),className:r,"x-semi-prop":"prevText"},e||k.createElement(oj,{size:"large"}))}renderNextBtn(){const{nextText:e,disabled:t}=this.props,{nextDisabled:n}=this.state,s=n||t,r=K({[`${Di}-item`]:!0,[`${Di}-item-disabled`]:s,[`${Di}-next`]:!0});return k.createElement("li",{role:"button","aria-disabled":!!s,"aria-label":"Next",onClick:a=>!s&&this.foundation.goNext(a),className:r,"x-semi-prop":"nextText"},e||k.createElement(xd,{size:"large"}))}renderPageSizeSwitch(e){const{direction:t}=this.context,n=t==="rtl"?"bottomRight":"bottomLeft",{showSizeChanger:s,popoverPosition:r=n,disabled:a,popoverZIndex:o}=this.props,{pageSize:l}=this.state,c=K(`${Di}-switch`);if(!s)return null;const u=this.foundation.pageSizeInOpts(),h=e.pageSize,d=u.map(p=>k.createElement(oBe,{value:p,key:p},k.createElement("span",null,h.replace("${pageSize}",p.toString()))));return k.createElement("div",{className:c},k.createElement(Iu,{"aria-label":"Page size selector",disabled:a,onChange:p=>this.foundation.changePageSize(p),value:l,key:l,position:r||"bottomRight",clickToHide:!0,zIndex:o,dropdownClassName:`${Di}-select-dropdown`},d))}renderQuickJump(e){const{showQuickJumper:t,disabled:n}=this.props,{quickJumpPage:s,total:r,pageSize:a}=this.state;if(!t)return null;const l=this.foundation._getTotalPageNumber(r,a)===1||n,c=K({[`${Di}-quickjump`]:!0,[`${Di}-quickjump-disabled`]:l});return k.createElement("div",{className:c},k.createElement("span",null,e.jumpTo),k.createElement(EFe,{value:s,className:`${Di}-quickjump-input-number`,hideButtons:!0,disabled:l,onBlur:u=>this.foundation.handleQuickJumpBlur(),onEnterPress:u=>this.foundation.handleQuickJumpEnterPress(u.target.value),onChange:u=>this.foundation.handleQuickJumpNumberChange(u)}),k.createElement("span",null,e.page))}renderPageList(){const{pageList:e,currentPage:t,restLeftPageList:n,restRightPageList:s}=this.state,{popoverPosition:r,popoverZIndex:a,disabled:o}=this.props;return e.map((l,c)=>{const u=K(`${Di}-item`,{[`${Di}-item-active`]:t===l,[`${Di}-item-all-disabled`]:o,[`${Di}-item-all-disabled-active`]:t===l&&o}),h=k.createElement("li",{key:`${l}${c}`,onClick:()=>!o&&this.foundation.goPage(l,c),className:u,"aria-label":l==="..."?"More":`Page ${l}`,"aria-current":t===l?"page":!1},l);if(l==="..."&&!o){let d;return c<3?d=n:d=s,k.createElement(ss,{rePosKey:this.props.currentPage,trigger:"hover",content:this.renderRestPageList(d),key:`${l}${c}`,position:r,zIndex:a},h)}return h})}renderRestPageList(e){const{direction:t}=this.context,n=K(`${Di}-rest-item`),s=e.length,r=l=>{const{index:c,style:u}=l,h=e[c];return k.createElement("div",{role:"listitem",key:`${h}${c}`,className:n,onClick:()=>this.foundation.goPage(h,c),style:u,"aria-label":`${h}`},h)},a=32,o=s>=5?a*5:a*s;return k.createElement(ZQ,{className:`${Di}-rest-list`,itemData:e,itemSize:a,width:78,itemCount:s,height:o,style:{direction:t}},r)}renderSmallPageSelect(e){const t=this.state.allPageNumbers,n=this.renderRestPageList(t);return k.createElement(ss,{content:n},e)}renderSmallPage(e){const t=this.props,{className:n,style:s,hideOnSinglePage:r,hoverShowPageSelect:a,showSizeChanger:o,disabled:l}=t,c=B9(t,["className","style","hideOnSinglePage","hoverShowPageSelect","showSizeChanger","disabled"]),u=K(`${Di}-small`,Di,n,{[`${Di}-disabled`]:l}),{currentPage:h,total:d,pageSize:p}=this.state,f=Math.ceil(d/p);if(f<2&&r&&!o)return null;const g=K({[`${Di}-item`]:!0,[`${Di}-item-small`]:!0,[`${Di}-item-all-disabled`]:l}),m=k.createElement("div",{className:g},h,"/",f," ");return k.createElement("div",Object.assign({className:u,style:s},this.getDataAttr(c)),this.renderPrevBtn(),a&&!l?this.renderSmallPageSelect(m):m,this.renderNextBtn(),this.renderQuickJump(e))}renderDefaultPage(e){const{total:t,pageSize:n}=this.state,s=this.props,{showTotal:r,className:a,style:o,hideOnSinglePage:l,showSizeChanger:c,disabled:u}=s,h=B9(s,["showTotal","className","style","hideOnSinglePage","showSizeChanger","disabled"]),d=K(a,`${Di}`,{[`${Di}-disabled`]:u}),p=`${Di}-total`;if(Math.ceil(t/n)<2&&l&&!c)return null;const g=Math.ceil(t/n),m=e.total.replace("${total}",g.toString());return k.createElement("ul",Object.assign({className:d,style:o},this.getDataAttr(h)),r?k.createElement("span",{className:p},m):null,this.renderPrevBtn(),this.renderPageList(),this.renderNextBtn(),this.renderPageSizeSwitch(e),this.renderQuickJump(e))}render(){const{size:e}=this.props;return k.createElement(gi,{componentName:"Pagination"},t=>e==="small"?this.renderSmallPage(t):this.renderDefaultPage(t))}}iP.contextType=Da;iP.propTypes={total:v.number,showTotal:v.bool,pageSize:v.number,pageSizeOpts:v.array,size:v.string,currentPage:v.number,defaultCurrentPage:v.number,onPageChange:v.func,onPageSizeChange:v.func,onChange:v.func,prevText:v.node,nextText:v.node,showSizeChanger:v.bool,popoverZIndex:v.number,popoverPosition:v.string,style:v.object,className:v.string,hideOnSinglePage:v.bool,hoverShowPageSelect:v.bool,showQuickJumper:v.bool,disabled:v.bool};iP.defaultProps={total:1,popoverZIndex:Pu.DEFAULT_Z_INDEX,showTotal:!1,pageSize:null,pageSizeOpts:Hj.PAGE_SIZE_OPTION,defaultCurrentPage:1,size:"default",onPageChange:J,onPageSizeChange:J,onChange:J,showSizeChanger:!1,className:"",hideOnSinglePage:!1,showQuickJumper:!1,disabled:!1};const Fee={PREFIX:`${ge}-popconfirm`,POPOVER:`${ge}-popconfirm-popover`},lBe={SPACING:4,DEFAULT_Z_INDEX:1030};class cBe extends tt{init(){}destroy(){}handleCancel(e){const t=this._adapter.notifyCancel(e);Ab(t)?(this._adapter.updateCancelLoading(!0),t.then(n=>{this.handleVisibleChange(!1),this._adapter.updateCancelLoading(!1)},n=>{this._adapter.updateCancelLoading(!1)})):this.handleVisibleChange(!1)}handleConfirm(e){const t=this._adapter.notifyConfirm(e);Ab(t)?(this._adapter.updateConfirmLoading(!0),t.then(n=>{this._adapter.updateConfirmLoading(!1),this.handleVisibleChange(!1)},n=>{this._adapter.updateConfirmLoading(!1)})):this.handleVisibleChange(!1)}handleClickOutSide(e){this._adapter.notifyClickOutSide(e)}handleVisibleChange(e){this._isControlledComponent("visible")||this._adapter.setVisible(e),e?this.handleFocusOperateButton():this._adapter.focusPrevFocusElement(),this._adapter.notifyVisibleChange(e)}handleFocusOperateButton(){const{cancelButtonProps:e,okButtonProps:t}=this._adapter.getProps();ne(e,"autoFocus")&&!ne(e,"disabled")?this._adapter.focusCancelButton():ne(t,"autoFocus")&&!ne(t,"disabled")&&this._adapter.focusOkButton()}}var uBe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};class Cd extends Ve{constructor(e){super(e),this.handleCancel=t=>this.foundation.handleCancel(t&&t.nativeEvent),this.handleConfirm=t=>this.foundation.handleConfirm(t&&t.nativeEvent),this.handleVisibleChange=t=>this.foundation.handleVisibleChange(t),this.handleClickOutSide=t=>this.foundation.handleClickOutSide(t),this.stopImmediatePropagation=t=>t&&t.nativeEvent&&t.nativeEvent.stopImmediatePropagation(),this.renderConfirmPopCard=t=>{let{initialFocusRef:n}=t;const{content:s,title:r,className:a,style:o,cancelType:l,icon:c,prefixCls:u,showCloseIcon:h}=this.props,{direction:d}=this.context,p=K(u,a,{[`${u}-rtl`]:d==="rtl"}),f=r!==null&&typeof r<"u",g=!(s===null||typeof s>"u"),m=k.isValidElement(c),y=K({[`${u}-body`]:!0,[`${u}-body-withIcon`]:m});return k.createElement("div",{className:p,onClick:this.stopImmediatePropagation,style:o},k.createElement("div",{className:`${u}-inner`},k.createElement("div",{className:`${u}-header`},m?k.createElement("i",{className:`${u}-header-icon`,"x-semi-prop":"icon"},c):null,k.createElement("div",{className:`${u}-header-body`},f?k.createElement("div",{className:`${u}-header-title`,"x-semi-prop":"title"},r):null),h?k.createElement(it,{className:`${u}-btn-close`,icon:k.createElement(Rc,null),size:"small",theme:"borderless",type:l,onClick:this.handleCancel}):null),g?k.createElement("div",{className:y,"x-semi-prop":"content"},xt(s)?s({initialFocusRef:n}):s):null,k.createElement("div",{className:`${u}-footer`,ref:this.footerRef},this.renderControls())))},this.state={cancelLoading:!1,confirmLoading:!1,visible:e.defaultVisible||!1},this.foundation=new cBe(this.adapter),this.footerRef=k.createRef(),this.popoverRef=k.createRef()}static getDerivedStateFromProps(e,t){const n={},{hasOwnProperty:s}=Object.prototype;return s.call(e,"visible")&&(n.visible=e.visible),n}get adapter(){return Object.assign(Object.assign({},super.adapter),{setVisible:e=>this.setState({visible:e}),updateConfirmLoading:e=>this.setState({confirmLoading:e}),updateCancelLoading:e=>this.setState({cancelLoading:e}),notifyConfirm:e=>this.props.onConfirm(e),notifyCancel:e=>this.props.onCancel(e),notifyVisibleChange:e=>this.props.onVisibleChange(e),notifyClickOutSide:e=>this.props.onClickOutSide(e),focusCancelButton:()=>{var e,t;const n=(t=(e=this.footerRef)===null||e===void 0?void 0:e.current)===null||t===void 0?void 0:t.querySelector("[data-type=cancel]");n==null||n.focus({preventScroll:!0})},focusOkButton:()=>{var e,t;const n=(t=(e=this.footerRef)===null||e===void 0?void 0:e.current)===null||t===void 0?void 0:t.querySelector("[data-type=ok]");n==null||n.focus({preventScroll:!0})},focusPrevFocusElement:()=>{var e;(e=this.popoverRef.current)===null||e===void 0||e.focusTrigger()}})}renderControls(){const{okText:e,cancelText:t,okType:n,cancelType:s,cancelButtonProps:r,okButtonProps:a}=this.props,{cancelLoading:o,confirmLoading:l}=this.state;return k.createElement(gi,{componentName:"Popconfirm"},(c,u)=>k.createElement(k.Fragment,null,k.createElement(it,Object.assign({"data-type":"cancel",type:s,onClick:this.handleCancel,loading:o},_n(r,"autoFocus")),t||ne(c,"cancel")),k.createElement(it,Object.assign({"data-type":"ok",type:n,theme:"solid",onClick:this.handleConfirm,loading:l},_n(a,"autoFocus")),e||ne(c,"confirm"))))}render(){const{direction:e}=this.context,t=e==="rtl"?"bottomRight":"bottomLeft",n=this.props,{className:s,prefixCls:r,disabled:a,children:o,style:l,position:c=t}=n,u=uBe(n,["className","prefixCls","disabled","children","style","position"]);if(a)return o;const{visible:h}=this.state,d={onVisibleChange:this.handleVisibleChange,className:Fee.POPOVER,onClickOutSide:this.handleClickOutSide};return this.isControlled("visible")&&(d.trigger="custom"),k.createElement(ss,Object.assign({ref:this.popoverRef},u,{content:p=>{let{initialFocusRef:f}=p;return this.renderConfirmPopCard({initialFocusRef:f})},visible:h,position:c},d),o)}}Cd.contextType=Da;Cd.propTypes={motion:v.oneOfType([v.bool,v.func,v.object]),disabled:v.bool,content:v.oneOfType([v.node,v.func]),title:v.any,prefixCls:v.string,className:v.string,style:v.object,icon:v.node,okText:v.string,okType:v.string,cancelText:v.string,cancelType:v.string,onCancel:v.func,onConfirm:v.func,onClickOutSide:v.func,onVisibleChange:v.func,visible:v.bool,defaultVisible:v.bool,okButtonProps:v.object,cancelButtonProps:v.object,stopPropagation:v.oneOfType([v.bool,v.string]),showCloseIcon:v.bool,zIndex:v.number,trigger:v.string,position:v.string};Cd.__SemiComponentName__="Popconfirm";Cd.defaultProps=os(Cd.__SemiComponentName__,{stopPropagation:!0,trigger:"click",onVisibleChange:J,disabled:!1,icon:k.createElement(ix,{size:"extra-large"}),okType:"primary",cancelType:"tertiary",prefixCls:Fee.PREFIX,zIndex:lBe.DEFAULT_Z_INDEX,showCloseIcon:!0,onCancel:J,onConfirm:J,onClickOutSide:J});const hBe={PREFIX:`${ge}-progress`},_r={types:["line","circle"],DEFAULT_TYPE:"line",STROKE_DEFAULT:"var(--semi-color-success)",strokeLineCap:["square","round"],DEFAULT_LINECAP:"round",sizes:["default","small","large"],DEFAULT_SIZE:"default",directions:["vertical","horizontal"],DEFAULT_DIRECTION:"horizontal"};function dBe(i,e,t){try{const n=pBe(i,e,t);if(n.length!==0)return n}catch{return}}function pBe(i,e,t){if(i.sort((s,r)=>s.percent-r.percent),i[0].percent>e)return _r.STROKE_DEFAULT;const n=i[i.length-1];if(n.percent<e)return e_(n.color);for(const[s,r]of i.entries()){if(r.percent===e)return e_(r.color);if(e>r.percent)continue;const a=i[s-1];return t?fBe({startColor:e_(a.color),endColor:e_(r.color),size:r.percent-a.percent-1},e-a.percent-1):e_(a.color)}}function fBe(i,e){const{startColor:t,endColor:n,size:s}=i,r=t.split(""),a=n.split(""),o=[parseInt(`${r[1]}${r[2]}`,16),parseInt(`${a[1]}${a[2]}`,16)],l=[parseInt(`${r[3]}${r[4]}`,16),parseInt(`${a[3]}${a[4]}`,16)],c=[parseInt(`${r[5]}${r[6]}`,16),parseInt(`${a[5]}${a[6]}`,16)],u=[parseInt(`${r[7]}${r[8]}`,16),parseInt(`${a[7]}${a[8]}`,16)],h=(o[0]-o[1])/(s+1),d=(l[0]-l[1])/(s+1),p=(c[0]-c[1])/(s+1),f=(u[0]-u[1])/(s+1);function g(y){const b=Math.round(o[0]-h*(y+1)).toString(16),x=Math.round(l[0]-d*(y+1)).toString(16),S=Math.round(c[0]-p*(y+1)).toString(16),C=`${m(b)}${m(x)}${m(S)}`,w=Math.floor(f*(y+1)+u[1]).toString(16);return Za.Hex(`#${C}`,w)}function m(y){return y.length===1?`0${y}`:y.length===0?"00":y}if(typeof e>"u"){const y=[t];for(let b=0;b<s;b+=1)y.push(g(b));return y}return g(e)}function e_(i){if(i=i.trim().toLowerCase(),sm.hex.test(i))return Za.Hex(i,void 0);if(sm.hslA.test(i))return Za.Hex(Za.HslA(i),void 0);if(sm.rgbA.test(i))return Za.Hex(Za.RgbA(i),void 0);if(sm.semiDesignTokens.test(i))return j9.ALONG.indexOf(i)!==-1?Za.SemiDesignToken(i):j9.SEQUENCE.indexOf(i)!==-1?Za.SemiDesignToken(`${i}-5`):Za.SemiDesignToken(`${i}`)}const Za={Hex(i,e){return i=i.replace("#",""),i.length===8?`#${i}`:i.length===6?`#${i}${e||"ff"}`:(i.length===3&&(i=i.split("").map(t=>t+t).join("")),`#${i}${e||"ff"}`)},SemiDesignToken(i){if(typeof window>"u")return;const e=getComputedStyle(document.body).getPropertyValue(`--semi-${i}`);if(e==="")return;const t=`rgba(${e}, 1)`;return Za.RgbA(t)},HslA(i){const e=sm.hslA.exec(i),t=parseInt(e[2]),n=parseInt(e[3])/100,s=parseInt(e[4])/100,r=e[5],a=(1-Math.abs(2*s-1))*n,o=a*(1-Math.abs(t/60%2-1)),l=s-a/2;let c=0,u=0,h=0;return 0<=t&&t<60?(c=a,u=o,h=0):60<=t&&t<120?(c=o,u=a,h=0):120<=t&&t<180?(c=0,u=a,h=o):180<=t&&t<240?(c=0,u=o,h=a):240<=t&&t<300?(c=o,u=0,h=a):300<=t&&t<360&&(c=a,u=0,h=o),c=Math.round((c+l)*255).toString(16),u=Math.round((u+l)*255).toString(16),h=Math.round((h+l)*255).toString(16),Za.utils.pAL(c,u,h,r)},RgbA(i){const e=sm.rgbA.exec(i),t=parseInt(e[2],10).toString(16),n=parseInt(e[3],10).toString(16),s=parseInt(e[4],10).toString(16),r=e[5];return Za.utils.pAL(t,n,s,r)},utils:{pAL(i,e,t,n){return i.length==1&&(i="0"+i),e.length==1&&(e="0"+e),t.length==1&&(t="0"+t),typeof n<"u"?(n=Math.round(parseInt(n)*255).toString(16),n.length==1&&(n="0"+n),"#"+i+e+t+n):"#"+i+e+t}}},sm={hex:/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,hslA:/(hsl)a?\(\s*?(\d+),?\s*?(\d+)%,?\s*?(\d+)%,?\s*?\/?(\s*?[\d.]+)?\s*?\)/,rgbA:/(rgb)a?\(\s*?(\d+),?\s*?(\d+),?\s*?(\d+),?\s*?\/?(\s*?[\d.]+)?\s*?\)/,semiDesignTokens:/(\w+)?-?(\w+)-?(\d)?/},j9={ALONG:["black","white"],SEQUENCE:["amber","blue","cyan","green","grey","indigo","light-blue","light-green","lime","orange","pink","purple","red","teal","violet","yellow"]};var N9=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const zo=hBe.PREFIX;class Tb extends H.Component{constructor(e){super(e),this._mounted=!0,this._mounted=!0,this.state={percentNumber:this.props.percent}}componentDidUpdate(e){if(isNaN(this.props.percent)||isNaN(e.percent))throw new Error("[Semi Progress]:percent can not be NaN");if(e.percent!==this.props.percent){if(!this.props.motion){this.setState({percentNumber:this.props.percent});return}this.animation&&this.animation.destroy&&this.animation.destroy(),this.animation=new VQ({from:{value:e.percent},to:{value:this.props.percent}},{easing:"linear",duration:300}),this.animation.on("frame",t=>{if(this._mounted===!1)return;const n=parseInt(t.value);this.setState({percentNumber:n})}),this.animation.on("rest",()=>{this._mounted!==!1&&this.setState({percentNumber:this.props.percent})}),this.animation.start()}}componentWillUnmount(){this.animation&&this.animation.destroy(),this._mounted=!1}renderCircleProgress(){const e=this.props,{strokeLinecap:t,style:n,className:s,strokeWidth:r,format:a,size:o,stroke:l,strokeGradient:c,showInfo:u,percent:h,orbitStroke:d,id:p}=e,f=N9(e,["strokeLinecap","style","className","strokeWidth","format","size","stroke","strokeGradient","showInfo","percent","orbitStroke","id"]),g=this.props["aria-label"],m=this.props["aria-labelledby"],y=this.props["aria-valuetext"],{percentNumber:b}=this.state,x={wrapper:K(`${zo}-circle`,s),svg:K(`${zo}-circle-ring`),circle:K(`${zo}-circle-ring-inner`)},S=this.calcPercent(h),C=this.calcPercent(b);let w;this.props.width?w=this.props.width:o===_r.DEFAULT_SIZE?w=72:w=24;const A=this.selectStroke(l,h,c),T=w/2,E=w/2,P=(w-r)/2,O=P*2*Math.PI,M=(1-S/100)*O,R=`${O} ${O}`,j=a(C);return k.createElement("div",Object.assign({id:p,className:x.wrapper,style:n,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":C,"aria-labelledby":m,"aria-label":g,"aria-valuetext":y},Sl(f)),k.createElement("svg",{key:o,className:x.svg,height:w,width:w,"aria-hidden":!0},k.createElement("circle",{strokeDashoffset:0,strokeWidth:r,strokeDasharray:R,strokeLinecap:t,fill:"transparent",stroke:d,r:P,cx:E,cy:T,"aria-hidden":!0}),k.createElement("circle",{className:x.circle,strokeDashoffset:M,strokeWidth:r,strokeDasharray:R,strokeLinecap:t,fill:"transparent",stroke:A,r:P,cx:E,cy:T,"aria-hidden":!0})),u&&o!=="small"?k.createElement("span",{className:`${zo}-circle-text`},j):null)}calcPercent(e){let t;return e>100?t=100:e<0?t=0:t=e,t}selectStroke(e,t,n){if(typeof e=="string")return e;const s=dBe(e,t,n);return typeof s<"u"?s:_r.STROKE_DEFAULT}renderLineProgress(){const e=this.props,{className:t,style:n,stroke:s,strokeGradient:r,direction:a,format:o,showInfo:l,size:c,percent:u,orbitStroke:h,id:d}=e,p=N9(e,["className","style","stroke","strokeGradient","direction","format","showInfo","size","percent","orbitStroke","id"]),f=this.props["aria-label"],g=this.props["aria-labelledby"],m=this.props["aria-valuetext"],{percentNumber:y}=this.state,b=K(zo,t,{[`${zo}-horizontal`]:a===_r.DEFAULT_DIRECTION,[`${zo}-vertical`]:a!==_r.DEFAULT_DIRECTION,[`${zo}-large`]:c==="large"}),x=K({[`${zo}-track`]:!0}),S=K(`${zo}-track-inner`),C=this.calcPercent(u),w=this.calcPercent(y),T={background:this.selectStroke(s,u,r)};a===_r.DEFAULT_DIRECTION?T.width=`${C}%`:T.height=`${C}%`;const E=o(w);return k.createElement("div",Object.assign({id:d,className:b,style:n,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":C,"aria-labelledby":g,"aria-label":f,"aria-valuetext":m},Sl(p)),k.createElement("div",{className:x,style:h?{backgroundColor:h}:{},"aria-hidden":!0},k.createElement("div",{className:S,style:T,"aria-hidden":!0})),l?k.createElement("div",{className:`${zo}-line-text`},E):null)}render(){const{type:e}=this.props;return e==="line"?this.renderLineProgress():this.renderCircleProgress()}}Tb.propTypes={"aria-label":v.string,"aria-labelledby":v.string,"aria-valuetext":v.string,className:v.string,direction:v.oneOf(_r.directions),format:v.oneOfType([v.func,v.node]),id:v.string,motion:v.oneOfType([v.bool,v.func,v.object]),orbitStroke:v.string,percent:v.number,scale:v.number,showInfo:v.bool,size:v.oneOf(_r.sizes),stroke:v.oneOfType([v.string,v.arrayOf(v.shape({percent:v.number,color:v.string}))]),strokeGradient:v.bool,strokeLinecap:v.oneOf(_r.strokeLineCap),strokeWidth:v.number,style:v.object,type:v.oneOf(_r.types),width:v.number};Tb.defaultProps={className:"",direction:_r.DEFAULT_DIRECTION,format:i=>`${i}%`,motion:!0,orbitStroke:"var(--semi-color-fill-0)",percent:0,showInfo:!1,size:_r.DEFAULT_SIZE,stroke:_r.STROKE_DEFAULT,strokeGradient:!1,strokeLinecap:_r.DEFAULT_LINECAP,strokeWidth:4,style:{},type:_r.DEFAULT_TYPE};const Bee={PREFIX:`${ge}-radio`,INNER:`${ge}-radio-inner`,TEXT:`${ge}-radio-text`,INPUT:`${ge}-radio-input`,CHECKED:`${ge}-radio-checked`,DISABLED:`${ge}-radio-disabled`,BUTTON:`${ge}-radio-button`},gBe={PREFIX:`${ge}-radioGroup`,INNER:`${ge}-radioGroup-inner`,TEXT:`${ge}-radioGroup-text`,INPUT:`${ge}-radioGroup-input`,CHECKED:`${ge}-radioGroup-checked`,DISABLED:`${ge}-radioGroup-disabled`},Dn={DIRECTION_SET:["horizontal","vertical"],DEFAULT_DIRECTION:"horizontal",MODE:["advanced",""],TYPE_DEFAULT:"default",TYPE_BUTTON:"button",TYPE_CARD:"card",TYPE_PURECARD:"pureCard",BUTTON_SIZE:["middle","small","large"]};class mBe extends tt{constructor(e){super(Object.assign({},e))}init(){const e=this._getDisplayValue();this._setValue(e)}_getDisplayValue(){const{value:e,defaultValue:t}=this.getProps();let n;return"value"in this.getProps()?n=e:"defaultValue"in this.getProps()&&(n=t),n}handleChange(e){const t=this.getProp("mode"),n=this.getState("value"),{checked:s,value:r}=e.target,a=this._adapter.isInProps("value"),o=Object.assign(Object.assign({},e),{target:Object.assign(Object.assign({},e.target),{value:r})});t==="advanced"&&!s&&(o.target.value=void 0),a||(t==="advanced"&&!s?this._setValue(void 0):this._setValue(r)),(t==="advanced"||n!==r)&&this._adapter.notifyChange(o)}handlePropValueChange(e){this._setValue(e)}_setValue(e){this._adapter.setValue(e)}destroy(){}}class yBe extends tt{constructor(){super(...arguments),this.handleFocusVisible=e=>{const{target:t}=e;try{t.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch{ns(!0,"Warning: [Semi Radio] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this._adapter.setFocusVisible(!1)}}init(){const{children:e,extra:t,extraId:n,addonId:s}=this._adapter.getProps();e&&!s&&this._adapter.setAddonId(),t&&!n&&this._adapter.setExtraId()}setHover(e){this._adapter.setHover(e)}setChecked(e){this._adapter.setChecked(e)}}class _Be extends tt{constructor(e){super(Object.assign({},e))}init(){const e=this._adapter.getProp("checked"),t=this._adapter.getProp("defaultChecked");this.setChecked(e||t)}setChecked(e){this._adapter.setNativeControlChecked(e)}getChecked(){return this._adapter.getProp("checked")}handleChange(e){const t="checked"in this.getProps(),{checked:n}=e.target,s=()=>{e.stopPropagation()},r=()=>{e.preventDefault()},a={target:Object.assign(Object.assign({},this.getProps()),{checked:n}),stopPropagation:s,preventDefault:r};t?this._adapter.notifyChange(a):(this.setChecked(n),this._adapter.notifyChange(a))}destroy(){}}const Uj=k.createContext(null);class nP extends Ve{constructor(e){super(e),this.state={checked:!1},this.foundation=new _Be(this.adapter),this.onChange=this.onChange.bind(this)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setNativeControlChecked:e=>{this.setState({checked:e})},notifyChange:e=>{this.props.onChange(e)}})}componentDidMount(){this.foundation.init()}componentDidUpdate(e){e.checked!==this.props.checked&&this.foundation.setChecked(this.props.checked)}componentWillUnmount(){this.foundation.destroy()}blur(){this.inputEntity.blur()}focus(){const{preventScroll:e}=this.props;this.inputEntity.focus({preventScroll:e})}onChange(e){this.foundation.handleChange(e)}render(){const{disabled:e,mode:t,autoFocus:n,name:s,isButtonRadio:r,isPureCardRadioGroup:a,addonId:o,extraId:l,"aria-label":c,focusInner:u,onInputFocus:h,onInputBlur:d}=this.props,{checked:p}=this.state,f=this.props.prefixCls||Bee.PREFIX,g=K({[`${f}-inner`]:!0,[`${f}-inner-checked`]:!!p,[`${f}-inner-buttonRadio`]:r,[`${f}-inner-pureCardRadio`]:a}),m=K({[`${f}-focus`]:u,[`${f}-focus-border`]:u&&!p,[`${f}-inner-display`]:!r});return k.createElement("span",{className:g},k.createElement("input",{ref:y=>{this.inputEntity=y},autoFocus:n,type:t==="advanced"?"checkbox":"radio",checked:!!p,disabled:e,onChange:this.onChange,name:s,"aria-label":c,"aria-labelledby":o,"aria-describedby":l,onFocus:h,onBlur:d}),k.createElement("span",{className:m},p?k.createElement(OOe,null):null))}}nP.contextType=Uj;nP.propTypes={checked:v.bool,disabled:v.bool,isButtonRadio:v.bool,onChange:v.func,mode:v.oneOf(["advanced",""]),"aria-label":v.string,focusInner:v.bool,onInputFocus:v.func,onInputBlur:v.func,preventScroll:v.bool};nP.defaultProps={onChange:J,isButtonRadio:!1};var vBe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};class wd extends Ve{constructor(e){super(e),this.onChange=t=>{const{onChange:n}=this.props;if(this.isInGroup()){const{radioGroup:s}=this.context;s.onChange&&s.onChange(t)}!("checked"in this.props)&&this.foundation.setChecked(t.target.checked),n&&n(t)},this.handleMouseEnter=t=>{this.props.onMouseEnter(t),this.foundation.setHover(!0)},this.handleMouseLeave=t=>{this.props.onMouseLeave(t),this.foundation.setHover(!1)},this.handleFocusVisible=t=>{this.foundation.handleFocusVisible(t)},this.handleBlur=t=>{this.foundation.handleBlur()},this.state={hover:!1,addonId:e.addonId,extraId:e.extraId,checked:e.checked||e.defaultChecked||!1},this.foundation=new yBe(this.adapter),this.radioEntity=null}componentDidUpdate(e){this.props.checked!==e.checked&&(Hr(this.props.checked)?this.foundation.setChecked(!1):wj(this.props.checked)&&this.foundation.setChecked(this.props.checked))}get adapter(){return Object.assign(Object.assign({},super.adapter),{setHover:e=>{this.setState({hover:e})},setAddonId:()=>{this.setState({addonId:Cl({prefix:"addon"})})},setChecked:e=>{this.setState({checked:e})},setExtraId:()=>{this.setState({extraId:Cl({prefix:"extra"})})},setFocusVisible:e=>{this.setState({focusVisible:e})}})}isInGroup(){return this.context&&this.context.radioGroup}focus(){this.radioEntity.focus()}blur(){this.radioEntity.blur()}render(){const e=this.props,{addonClassName:t,addonStyle:n,disabled:s,style:r,className:a,prefixCls:o,displayMode:l,children:c,extra:u,mode:h,type:d,value:p,name:f}=e,g=vBe(e,["addonClassName","addonStyle","disabled","style","className","prefixCls","displayMode","children","extra","mode","type","value","name"]);let m,y,b,x,S,C,w,A,T;const{hover:E,addonId:P,extraId:O,focusVisible:M,checked:R}=this.state,j={checked:R,disabled:s};this.isInGroup()?(m=this.context.radioGroup.value===p,y=s||this.context.radioGroup.disabled,b=this.context.mode,x=this.context.radioGroup.isButtonRadio,S=this.context.radioGroup.isCardRadio,C=this.context.radioGroup.isPureCardRadio,A=this.context.radioGroup.buttonSize,T=o||this.context.radioGroup.prefixCls,j.checked=m,j.disabled=y):(m=R,y=s,b=h,w=d==="button",T=o,x=d===Dn.TYPE_BUTTON,C=d===Dn.TYPE_PURECARD,S=d===Dn.TYPE_CARD||C);const I=typeof x>"u"?w:x,D=T||Bee.PREFIX,z=S||C||I,$=K(D,{[`${D}-disabled`]:y,[`${D}-checked`]:m,[`${D}-${l}`]:!!l,[`${D}-buttonRadioComponent`]:w,[`${D}-buttonRadioGroup`]:x,[`${D}-buttonRadioGroup-${A}`]:x&&A,[`${D}-cardRadioGroup`]:S,[`${D}-cardRadioGroup_disabled`]:y&&S,[`${D}-cardRadioGroup_checked`]:S&&m&&!y,[`${D}-cardRadioGroup_checked_disabled`]:S&&m&&y,[`${D}-cardRadioGroup_hover`]:S&&!m&&E&&!y,[a]:!!a,[`${D}-focus`]:M&&(S||C)}),V=this.isInGroup()&&this.context.radioGroup.name,L=K({[`${D}-addon`]:!I,[`${D}-addon-buttonRadio`]:I,[`${D}-addon-buttonRadio-checked`]:I&&m,[`${D}-addon-buttonRadio-disabled`]:I&&y,[`${D}-addon-buttonRadio-hover`]:I&&!m&&!y&&E,[`${D}-addon-buttonRadio-${A}`]:I&&A,[`${D}-focus`]:M&&I},t),Y=()=>!c&&!u?null:k.createElement("div",{className:K([`${D}-content`,{[`${D}-isCardRadioGroup_content`]:S}])},c?k.createElement("span",{className:L,style:n,id:P,"x-semi-prop":"children"},c):null,u&&!I?k.createElement("div",{className:`${D}-extra`,id:O,"x-semi-prop":"extra"},u):null);return k.createElement("label",Object.assign({style:r,className:$,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},this.getDataAttr(g)),k.createElement(nP,Object.assign({},this.props,j,{mode:b,name:f??V,isButtonRadio:I,isPureCardRadioGroup:C,onChange:this.onChange,ref:ae=>{this.radioEntity=ae},addonId:c&&P,extraId:u&&O,focusInner:M&&!z,onInputFocus:this.handleFocusVisible,onInputBlur:this.handleBlur})),Y())}}wd.contextType=Uj;wd.propTypes={autoFocus:v.bool,checked:v.bool,defaultChecked:v.bool,value:v.any,style:v.object,className:v.string,disabled:v.bool,prefixCls:v.string,displayMode:v.oneOf(["vertical",""]),onChange:v.func,onMouseEnter:v.func,onMouseLeave:v.func,mode:v.oneOf(Dn.MODE),extra:v.node,addonStyle:v.object,addonClassName:v.string,type:v.oneOf([Dn.TYPE_DEFAULT,Dn.TYPE_BUTTON,Dn.TYPE_CARD,Dn.TYPE_PURECARD]),"aria-label":v.string,preventScroll:v.bool};wd.defaultProps={autoFocus:!1,defaultChecked:!1,value:void 0,style:void 0,onMouseEnter:J,onMouseLeave:J,mode:"",type:"default"};wd.elementType="Radio";var bBe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};class dx extends Ve{constructor(e){super(e),this.onChange=t=>{this.foundation.handleChange(t)},this.getFormatName=()=>this.props.name||"default",this.state={value:e.value||e.defaultValue},this.foundation=new mBe(this.adapter)}componentDidMount(){this.foundation.init()}componentDidUpdate(e){typeof e.value=="number"&&isNaN(e.value)&&typeof this.props.value=="number"&&isNaN(this.props.value)||e.value!==this.props.value&&this.foundation.handlePropValueChange(this.props.value)}componentWillUnmount(){this.foundation.destroy()}get adapter(){return Object.assign(Object.assign({},super.adapter),{setValue:e=>{this.setState({value:e})},getProps:()=>this.props,isInProps:e=>e in this.props,notifyChange:e=>{this.props.onChange&&this.props.onChange(e)}})}render(){const e=this.props,{children:t,options:n,mode:s,prefixCls:r,className:a,style:o,direction:l,type:c,buttonSize:u,id:h}=e,d=bBe(e,["children","options","mode","prefixCls","className","style","direction","type","buttonSize","id"]),p=c===Dn.TYPE_BUTTON,f=c===Dn.TYPE_PURECARD,g=c===Dn.TYPE_CARD||f,m=c===Dn.TYPE_DEFAULT,y=r||gBe.PREFIX,b=K(a,{[y]:!0,[`${y}-wrapper`]:!0,[`${y}-${l}`]:l&&!p,[`${y}-${l}-default`]:l&&m,[`${y}-${l}-card`]:l&&g,[`${y}-buttonRadio`]:p}),x=this.state.value;let S;return n?S=(n||[]).map((C,w)=>typeof C=="string"?k.createElement(wd,{key:w,disabled:this.props.disabled,value:C},C):k.createElement(wd,{key:w,disabled:C.disabled||this.props.disabled,value:C.value,extra:C.extra,className:C.className,style:C.style},C.label)):t&&(S=k.Children.map(t,(C,w)=>k.isValidElement(C)?k.cloneElement(C,{key:w}):null)),k.createElement("div",Object.assign({className:b,style:o,id:h,"aria-label":this.props["aria-label"],"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],"aria-required":this.props["aria-required"]},this.getDataAttr(d)),k.createElement(Uj.Provider,{value:{radioGroup:{onChange:this.onChange,value:x,disabled:this.props.disabled,name:this.getFormatName(),isButtonRadio:p,isCardRadio:g,isPureCardRadio:f,buttonSize:u,prefixCls:r},mode:s}},S))}}dx.propTypes={defaultValue:v.any,disabled:v.bool,name:v.string,options:v.array,buttonSize:v.oneOf(Dn.BUTTON_SIZE),type:v.oneOf([Dn.TYPE_DEFAULT,Dn.TYPE_BUTTON,Dn.TYPE_CARD,Dn.TYPE_PURECARD]),value:v.any,onChange:v.func,children:v.node,prefixCls:v.string,className:v.string,style:v.object,direction:v.oneOf(Dn.DIRECTION_SET),mode:v.oneOf(Dn.MODE),"aria-label":v.string,"aria-describedby":v.string,"aria-errormessage":v.string,"aria-invalid":v.bool,"aria-labelledby":v.string,"aria-required":v.bool,id:v.string};dx.defaultProps={disabled:!1,onChange:J,direction:Dn.DEFAULT_DIRECTION,mode:"",type:Dn.TYPE_DEFAULT,buttonSize:"middle"};class Nm extends wd{}Nm.Group=dx;const jee={PREFIX:`${ge}-sidesheet`,DIALOG:`${ge}-modal`},vL={PLACEMENT:["top","right","bottom","left"],SIZE:["small","medium","large"],WIDTH:{small:448,medium:684,large:920},HEIGHT:448};var $9=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};let xBe=0;const Na=jee.PREFIX;class Wj extends k.PureComponent{constructor(){super(...arguments),this.onMaskClick=e=>{e.target===e.currentTarget&&this.close(e)},this.close=e=>{const{onClose:t}=this.props;t&&t(e)}}componentDidMount(){this.sideSheetId=`sidesheet-${xBe++}`}componentWillUnmount(){clearTimeout(this.timeoutId)}getMaskElement(){var e;const{mask:t,maskStyle:n,maskClosable:s}=this.props;return t?k.createElement("div",Object.assign({"aria-hidden":!0,key:"mask",className:K(`${Na}-mask`,(e=this.props.maskClassName)!==null&&e!==void 0?e:""),style:n,onClick:s?this.onMaskClick:null},this.props.maskExtraProps)):null}renderHeader(){const{title:e,closable:t,headerStyle:n,closeIcon:s}=this.props;let r,a;if(e&&(r=k.createElement("div",{className:`${Na}-title`,"x-semi-prop":"title"},this.props.title)),t){const o=s||k.createElement(Rc,null);a=k.createElement(Ml,{className:`${Na}-close`,key:"close-btn",onClick:this.close,type:"tertiary",icon:o,theme:"borderless",size:"small"})}return k.createElement("div",{className:`${Na}-header`,role:"heading","aria-level":1,style:Object.assign({},n)},r,a)}getDialogElement(){var e;const t=$9(this.props,[]),n={};t.width&&(n.width=t.width,t.mask||(n.width="100%")),t.height&&(n.height=t.height);const s=this.renderHeader();return k.createElement("div",Object.assign({key:"dialog-element",role:"dialog",tabIndex:-1,className:K(`${Na}-inner`,`${Na}-inner-wrap`,(e=this.props.dialogClassName)!==null&&e!==void 0?e:"",`${Na}-size-${t.size}`),style:Object.assign(Object.assign({},t.style),n)},this.props.wrapperExtraProps),k.createElement("div",{className:`${Na}-content`},s,k.createElement("div",{className:`${Na}-body`,style:t.bodyStyle,"x-semi-prop":"children"},t.children),t.footer?k.createElement("div",{className:`${Na}-footer`,"x-semi-prop":"footer"},t.footer):null))}render(){const e=this.props,{mask:t,className:n,width:s,onClose:r,maskStyle:a,maskClosable:o,maskClassName:l,title:c,closable:u,headerStyle:h,height:d,style:p,size:f,bodyStyle:g,dialogClassName:m,children:y,footer:b,maskExtraProps:x,wrapperExtraProps:S}=e,C=$9(e,["mask","className","width","onClose","maskStyle","maskClosable","maskClassName","title","closable","headerStyle","height","style","size","bodyStyle","dialogClassName","children","footer","maskExtraProps","wrapperExtraProps"]),w=K(n,{[`${Na}-fixed`]:!t,[`${Na}-size-${this.props.size}`]:!t}),A={};!t&&s&&(A.width=s);const T=Sl(C);return k.createElement("div",Object.assign({className:w,style:A},T),this.getMaskElement(),this.getDialogElement())}}Wj.propTypes={onClose:v.func,closeIcon:v.node};Wj.defaultProps={onClose:J};class Gj extends tt{constructor(e){super(Object.assign(Object.assign({},Gj.defaultAdapter),e)),this.toggleDisplayNone=t=>{this._adapter.toggleDisplayNone(t)}}get defaultAdapter(){return{handleCancel:J,beforeShow:J,afterHide:J}}destroy(){this.afterHide()}handleCancel(e){this._adapter.notifyCancel(e)}beforeShow(){this.getProp("disableScroll")&&this._adapter.disabledBodyScroll(),this._adapter.setOnKeyDownListener()}afterHide(){this.getProp("disableScroll")&&this._adapter.enabledBodyScroll(),this._adapter.removeKeyDownListener()}handleKeyDown(e){const{closeOnEsc:t}=this.getProps();if(t&&e.keyCode===ds.ESC){e.stopPropagation(),this.handleCancel(e);return}}onVisibleChange(e){this._adapter.notifyVisibleChange(e)}}var SBe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const Bl=jee.PREFIX,CBe=vL.HEIGHT;class Pn extends Ve{constructor(e){super(e),this.handleCancel=t=>{this.foundation.handleCancel(t)},this.handleKeyDown=t=>{this.foundation.handleKeyDown(t)},this.updateState=()=>{this.foundation.toggleDisplayNone(!this.props.visible)},this.state={displayNone:!this.props.visible},this.foundation=new Gj(this.adapter),this.bodyOverflow="",this.scrollBarWidth=0,this.originBodyWidth="100%"}get adapter(){return Object.assign(Object.assign({},super.adapter),{disabledBodyScroll:()=>{const{getPopupContainer:e}=this.props;this.bodyOverflow=document.body.style.overflow||"",!e&&this.bodyOverflow!=="hidden"&&(document.body.style.overflow="hidden",document.body.style.width=`calc(${this.originBodyWidth||"100%"} - ${this.scrollBarWidth}px)`)},enabledBodyScroll:()=>{const{getPopupContainer:e}=this.props;!e&&this.bodyOverflow!=="hidden"&&(document.body.style.overflow=this.bodyOverflow,document.body.style.width=this.originBodyWidth)},notifyCancel:e=>{this.props.onCancel&&this.props.onCancel(e)},notifyVisibleChange:e=>{this.props.afterVisibleChange(e)},setOnKeyDownListener:()=>{window&&window.addEventListener("keydown",this.handleKeyDown)},removeKeyDownListener:()=>{window&&window.removeEventListener("keydown",this.handleKeyDown)},toggleDisplayNone:e=>{e!==this.state.displayNone&&this.setState({displayNone:e})}})}static getDerivedStateFromProps(e,t){const n={};return e.visible&&t.displayNone&&(n.displayNone=!1),!e.visible&&!e.motion&&!t.displayNone&&(n.displayNone=!0),n}componentDidMount(){this.scrollBarWidth=sj(),this.originBodyWidth=document.body.style.width,this.props.visible&&this.foundation.beforeShow()}componentDidUpdate(e,t,n){!e.visible&&this.props.visible&&this.foundation.beforeShow(),e.visible&&!this.props.visible&&this.foundation.afterHide(),t.displayNone!==this.state.displayNone&&this.foundation.onVisibleChange(!this.state.displayNone)}componentWillUnmount(){this.props.visible&&this.foundation.destroy()}renderContent(){const e=this.props,{placement:t,className:n,children:s,width:r,height:a,motion:o,visible:l,style:c,maskStyle:u,size:h,zIndex:d,getPopupContainer:p,keepDOM:f}=e,g=SBe(e,["placement","className","children","width","height","motion","visible","style","maskStyle","size","zIndex","getPopupContainer","keepDOM"]);let m={zIndex:d};p&&(m={zIndex:d,position:"static"});const{direction:y}=this.context,b=t==="left"||t==="right",x=t==="top"||t==="bottom",S=x?a||CBe:"100%",C=K(Bl,n,{[`${Bl}-${t}`]:t,[`${Bl}-popup`]:p,[`${Bl}-horizontal`]:x,[`${Bl}-rtl`]:y==="rtl",[`${Bl}-hidden`]:f&&this.state.displayNone}),w=Object.assign(Object.assign(Object.assign({},b?r?{width:r}:{}:{width:"100%"}),g),{visible:l,motion:!1,size:h,className:C,height:S,onClose:this.handleCancel}),A=this.props.visible||this.props.keepDOM||this.props.motion&&!this.state.displayNone;return k.createElement(Sc,{motion:this.props.motion,animationState:l?"enter":"leave",startClassName:l?`${Bl}-animation-mask_show`:`${Bl}-animation-mask_hide`,onAnimationEnd:this.updateState},T=>{let{animationClassName:E,animationEventsNeedBind:P}=T;return k.createElement(Sc,{motion:this.props.motion,animationState:l?"enter":"leave",startClassName:l?`${Bl}-animation-content_show_${this.props.placement}`:`${Bl}-animation-content_hide_${this.props.placement}`,onAnimationEnd:this.updateState},O=>{let{animationClassName:M,animationStyle:R,animationEventsNeedBind:j}=O;return A?k.createElement(Hf,{getPopupContainer:p,style:m},k.createElement(Wj,Object.assign({},w,{maskExtraProps:P,wrapperExtraProps:j,dialogClassName:M,maskClassName:E,maskStyle:Object.assign({},u),style:Object.assign(Object.assign({},R),c)}),s)):k.createElement(k.Fragment,null)})})}render(){return this.props,this.renderContent()}}Pn.contextType=Da;Pn.propTypes={bodyStyle:v.object,headerStyle:v.object,children:v.node,className:v.string,closable:v.bool,disableScroll:v.bool,getPopupContainer:v.func,height:v.oneOfType([v.number,v.string]),mask:v.bool,maskClosable:v.bool,maskStyle:v.object,motion:v.oneOfType([v.bool,v.object,v.func]),onCancel:v.func,placement:v.oneOf(vL.PLACEMENT),size:v.oneOf(vL.SIZE),style:v.object,title:v.node,visible:v.bool,width:v.oneOfType([v.number,v.string]),zIndex:v.number,afterVisibleChange:v.func,closeOnEsc:v.bool,footer:v.node,keepDOM:v.bool,"aria-label":v.string};Pn.__SemiComponentName__="SideSheet";Pn.defaultProps=os(Pn.__SemiComponentName__,{visible:!1,motion:!0,mask:!0,placement:"right",closable:!0,footer:null,zIndex:1e3,maskClosable:!0,size:"small",disableScroll:!0,closeOnEsc:!1,afterVisibleChange:J,keepDOM:!1});const zs={PREFIX:`${ge}-slider`,DISABLED:`${ge}-slider-disabled`,VERTICAL:`${ge}-slider-vertical`,TRACK:`${ge}-slider-track`,DOTS:`${ge}-slider-dots`,MARKS:`${ge}-slider-marks`,HANDLE:`${ge}-slider-handle`,HANDLE_DOT:`${ge}-slider-handle-dot`},z9=(i,e)=>(!globalThis.Touch||!(i instanceof Touch)||["stopPropagation","preventDefault"].forEach(n=>{let s=e[n];s&&(typeof s=="function"&&(s=function(){return e[n](...arguments)}),i[n]?ns(!0,`"The key ${n}" exist in Touch.`):i[n]=s)}),i);class Kj extends tt{constructor(e){var t;super(Object.assign(Object.assign({},Kj.defaultAdapter),e)),t=this,this.getMinAndMaxPercent=n=>{const{range:s,min:r,max:a}=this._adapter.getProps(),o=s?(n[0]-r)/(a-r):(n-r)/(a-r),l=s?(n[1]-r)/(a-r):1;return{min:this._checkValidity(o),max:this._checkValidity(l)}},this._checkValidity=function(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return n>r?r:n<s?s:n},this.computeHandleVisibleVal=(n,s,r)=>{const{focusPos:a,currentValue:o}=this._adapter.getStates(),l={min:!1,max:!1};let c;return s?c={min:s(r?this.outPutValue(o[0]):this.outPutValue(o)),max:r?s(this.outPutValue(o[1])):null}:c={min:r?this.outPutValue(o[0]):this.outPutValue(o),max:r?this.outPutValue(o[1]):null},n?(l.min=!0,l.max=!0):typeof n>"u"&&s&&(a==="min"?l.min=!0:a==="max"&&(l.max=!0)),{tipVisible:l,tipChildren:c}},this.valueFormatIsCorrect=n=>Array.isArray(n)?typeof n[0]=="number"&&typeof n[0]=="number":typeof n=="number",this.handleMousePos=(n,s)=>{const r=this._adapter.getParentRect(),a=this._adapter.getScrollParentVal(),o=r?r.left:0,l=r?r.top:0;return{x:n-o+a.scrollLeft,y:s-l+a.scrollTop}},this.getScrollParent=n=>{const s=n,r=/(auto|scroll)/,a=(c,u)=>window.getComputedStyle(c,null).getPropertyValue(u),o=c=>r.test(a(c,"overflow")+a(c,"overflow-y")+a(c,"overflow-x")),l=c=>!c||c===document.body||!(c instanceof Element)?document.body:o(c)?c:l(c.parentNode);return l(s)},this.checkMeetMinMax=n=>{const{vertical:s,verticalReverse:r,range:a}=this._adapter.getProps(),o=this._adapter.getState("currentValue");this.transValueToPos(o);const{sliderX:l,sliderY:c,sliderWidth:u,sliderHeight:h}=this._adapter.getSliderLengths();this._adapter.getStates();const d=s?h:u;let p;s&&r?p=c+d:p=s?c:l;let f;return s&&r?f=c:f=s?c+h:l+u,s&&r?n>=p?n=p:n<=f&&(n=f):n<=p?n=p:n>=f&&(n=f),n},this.transPosToValue=(n,s)=>{const r=this.checkMeetMinMax(n),{min:a,max:o,currentValue:l}=this._adapter.getStates(),{range:c,vertical:u,step:h,verticalReverse:d}=this._adapter.getProps(),{sliderX:p,sliderY:f,sliderWidth:g,sliderHeight:m}=this._adapter.getSliderLengths(),y=u?f:p,b=u?m:g;let x;u&&d?x=(y+b-r)/b*(o-a)+a:x=(r-y)/b*(o-a)+a;let S;return c?S=s?l[0]:l[1]:S=l,h!==1&&(x=Math.round(x/h)*h),c&&x!==S?s?[x,l[1]]:[l[0],x]:!c&&x!==S?x:!1},this.transValueToPos=n=>{const{min:s,max:r}=this._adapter.getStates(),{vertical:a,range:o,verticalReverse:l}=this._adapter.getProps(),{sliderX:c,sliderY:u,sliderWidth:h,sliderHeight:d}=this._adapter.getSliderLengths(),p=a?u:c,f=a?d:h;return o?[(n[0]-s)*f/(r-s)+p,(n[1]-s)*f/(r-s)+p]:(n-s)*f/(r-s)+p},this.isMarkActive=n=>{const{min:s,max:r,range:a,included:o}=this._adapter.getProps(),l=this._adapter.getState("currentValue");return typeof(n/1)=="number"&&n>=s&&n<=r?a?(n>l[1]||n<l[0])&&o?"unActive":"active":n<=l&&o?"active":"unActive":!1},this.outPutValue=n=>{const s=o=>{var l,c;return/^\d+(\.\d+)?$/.test(String(o))&&(c=(l=o.toString().split(".")[1])===null||l===void 0?void 0:l.length)!==null&&c!==void 0?c:0},r=this._adapter.getProp("step"),a=(()=>{const o=s(r),l=Math.pow(10,o);return c=>Math.round(c*l)/l})();if(Array.isArray(n)){const o=a(n[0]),l=a(n[1]);return o>l?this.getState("focusPos")==="min"?[l,l]:[o,o]:[o,l]}else return a(n)},this.handleDisabledChange=n=>{this._adapter.updateDisabled(n)},this.checkAndUpdateIsInRenderTreeState=()=>this._adapter.checkAndUpdateIsInRenderTreeState(),this.calculateOutputValue=(n,s)=>{const r=this.transPosToValue(n,s);if(r!==!1)return this.outPutValue(r)},this.handleValueChange=(n,s)=>{const{min:r,max:a}=this._adapter.getStates();let o=null;const l={};this.valueFormatIsCorrect(s)?(Array.isArray(n)&&Array.isArray(s)&&(s=[s[0]<r?r:s[0],s[1]>a?a:s[1]],o=Object.assign(l,{currentValue:s})),typeof n=="number"&&typeof s=="number"&&(s>a?s=a:s=s<r?r:s,o=Object.assign(l,{currentValue:s}))):o=l,o&&this._adapter.transNewPropsToState(o)},this.onHandleDown=(n,s)=>{this._adapter.onHandleDown(n);const r=this._adapter.getState("disabled"),{vertical:a}=this._adapter.getProps(),{dragging:o}=this._adapter.getOverallVars();if(r)return!1;this._adapter.setStateVal("isDrag",!0),this._adapter.setStateVal("chooseMovePos",s),s==="min"?this._adapter.setDragging([!0,o[1]]):this._adapter.setDragging([o[0],!0]);const l=this.handleMousePos(n.clientX,n.clientY);let c=a?l.y:l.x;if(!this._adapter.isEventFromHandle(n))this._dragOffset=0;else{const u=this._getHandleCenterPosition(a,n.target);this._dragOffset=c-u,c=u}return!0},this.onHandleMove=n=>{this._adapter.setEventDefault(n);const{disabled:s,chooseMovePos:r}=this._adapter.getStates(),{vertical:a}=this._adapter.getProps(),{dragging:o}=this._adapter.getOverallVars();if(s)return!1;this.onHandleEnter(r);const l=this.handleMousePos(n.clientX,n.clientY);let c=a?l.y:l.x;if(c=c-this._dragOffset,r==="min"&&o[0]||r==="max"&&o[1]){const u=this.calculateOutputValue(c,r==="min");if(u===void 0)return!1;this._adapter.notifyChange(u),this._adapter.onHandleMove(c,r==="min",void 0,!1,u)}return!0},this.onHandleTouchStart=(n,s)=>{const r=this._adapter.getMinHandleEl(),a=this._adapter.getMaxHandleEl();if(n.target===r||n.target===a){jn(n);const o=z9(n.touches[0],n);this.onHandleDown(o,s)}},this.onHandleTouchMove=n=>{const s=this._adapter.getMinHandleEl(),r=this._adapter.getMaxHandleEl();if(n.target===s||n.target===r){const a=z9(n.touches[0],n);this.onHandleMove(a)}},this.onHandleEnter=n=>{const{disabled:s,focusPos:r}=this._adapter.getStates();s||!r&&n!==r&&this._adapter.onHandleEnter(n)},this.onHandleLeave=()=>{const n=this._adapter.getState("disabled"),s=this._adapter.getState("isDrag");!n&&!s&&this._adapter.onHandleLeave()},this.onHandleUp=n=>{this._adapter.onHandleUpBefore(n);const{disabled:s,chooseMovePos:r}=this._adapter.getStates(),{dragging:a}=this._adapter.getOverallVars();return s?!1:(r==="min"?this._adapter.setDragging([!1,a[1]]):this._adapter.setDragging([a[0],!1]),this._adapter.setStateVal("isDrag",!1),this._adapter.onHandleLeave(),this._adapter.onHandleUpAfter(),!0)},this._handleValueDecreaseWithKeyBoard=(n,s)=>{const{min:r,currentValue:a}=this.getStates(),{range:o}=this.getProps();if(s==="min")if(o){let l=a[0]-n;return l=l<r?r:l,[l,a[1]]}else{let l=a-n;return l=l<r?r:l,l}else{let l=a[1]-n;return l=l<a[0]?a[0]:l,[a[0],l]}},this._handleValueIncreaseWithKeyBoard=(n,s)=>{const{max:r,currentValue:a}=this.getStates(),{range:o}=this.getProps();if(s==="min")if(o){let l=a[0]+n;return l=l>a[1]?a[1]:l,[l,a[1]]}else{let l=a+n;return l=l>r?r:l,l}else{let l=a[1]+n;return l=l>r?r:l,[a[0],l]}},this._handleHomeKey=n=>{const{min:s,currentValue:r}=this.getStates(),{range:a}=this.getProps();return n==="min"?a?[s,r[1]]:s:[r[0],r[0]]},this._handleEndKey=n=>{const{max:s,currentValue:r}=this.getStates(),{range:a}=this.getProps();return n==="min"?a?[r[1],r[1]]:s:[r[0],s]},this.handleKeyDown=(n,s)=>{const{min:r,max:a,currentValue:o}=this.getStates(),{step:l,range:c}=this.getProps();let u;switch(n.key){case"ArrowLeft":case"ArrowDown":u=this._handleValueDecreaseWithKeyBoard(l,s);break;case"ArrowRight":case"ArrowUp":u=this._handleValueIncreaseWithKeyBoard(l,s);break;case"PageUp":u=this._handleValueIncreaseWithKeyBoard(10*l,s);break;case"PageDown":u=this._handleValueDecreaseWithKeyBoard(10*l,s);break;case"Home":u=this._handleHomeKey(s);break;case"End":u=this._handleEndKey(s);break}if(["ArrowLeft","ArrowDown","ArrowRight","ArrowUp","PageUp","PageDown","Home","End"].includes(n.key)){let h=!0;Array.isArray(o)?h=!(o[0]===u[0]&&o[1]===u[1]):h=o!==u,h&&(this._adapter.updateCurrentValue(u),this._adapter.notifyChange(u)),jn(n)}},this._noTooltip=()=>{const{tipFormatter:n,tooltipVisible:s}=this.getProps();return n===null||s===!1},this.onFocus=(n,s)=>{if(this._noTooltip())return;jn(n);const{target:a}=n;try{a.matches(":focus-visible")&&(s==="min"?this._adapter.setStateVal("firstDotFocusVisible",!0):this._adapter.setStateVal("secondDotFocusVisible",!0))}catch{ns(!0,"Warning: [Semi Slider] The current browser does not support the focus-visible")}},this.onBlur=(n,s)=>{if(this._noTooltip())return;const{firstDotFocusVisible:a,secondDotFocusVisible:o}=this.getStates();s==="min"?a&&this._adapter.setStateVal("firstDotFocusVisible",!1):o&&this._adapter.setStateVal("secondDotFocusVisible",!1)},this.handleWrapClick=n=>{const{disabled:s,isDrag:r}=this._adapter.getStates();if(r||s||this._adapter.isEventFromHandle(n))return;const{vertical:a}=this.getProps(),o=this.handleMousePos(n.clientX,n.clientY),l=a?o.y:o.x,c=this.checkWhichHandle(l),u=this.calculateOutputValue(l,c);u!==void 0&&(this._adapter.notifyChange(u),!this._isControlledComponent()&&this.setHandlePos(l,c,!0,u))},this.setHandlePos=function(n,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3?arguments[3]:void 0;t._adapter.onHandleMove(n,s,()=>t._adapter.onHandleUpAfter(),r,a)},this.checkWhichHandle=n=>{const{vertical:s,verticalReverse:r}=this.getProps(),{currentValue:a}=this._adapter.getStates(),o=this.transValueToPos(a);let l=!0;return Array.isArray(o)&&(n>o[1]||Math.abs(n-o[0])>Math.abs(n-o[1]))&&(l=!1),s&&r&&(l=!l),l},this.handleWrapperEnter=()=>{this._adapter.setStateVal("showBoundary",!0)},this.handleWrapperLeave=()=>{this._adapter.setStateVal("showBoundary",!1)}}init(){this._checkCurrentValue(),this._dragOffset=0}_checkCurrentValue(){const{currentValue:e,min:t,max:n}=this.getStates();let s;Array.isArray(e)?(s=[],s[0]=this._checkValidity(e[0],t,n),s[1]=this._checkValidity(e[1],t,n)):s=this._checkValidity(e,t,n),this._adapter.updateCurrentValue(s)}destroy(){this._adapter.unSubscribeEventListener()}_getHandleCenterPosition(e,t){const n=t.getBoundingClientRect(),{x:s,y:r}=this.handleMousePos(n.left+n.width*.5,n.top+n.height*.5);return e?r:s}}var wBe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const $a=zs.PREFIX;function ABe(i){return i?!!(i.offsetWidth||i.offsetHeight||i.getClientRects().length):!1}let Xj=class extends Ve{constructor(e){super(e),this.renderHandle=()=>{var n,s,r,a,o;const{vertical:l,range:c,tooltipVisible:u,tipFormatter:h,"aria-label":d,"aria-labelledby":p,"aria-valuetext":f,getAriaValueText:g,disabled:m}=this.props,{chooseMovePos:y,isDrag:b,isInRenderTree:x,firstDotFocusVisible:S,secondDotFocusVisible:C}=this.state,w=l?"top":"left",A=this.foundation.getMinAndMaxPercent(this.state.currentValue),T=A.min,E=A.max,{tipVisible:P,tipChildren:O}=this.foundation.computeHandleVisibleVal(u&&x,h,c),M=K(zs.HANDLE,{[`${zs.HANDLE}-clicked`]:y==="min"&&b}),R=K(zs.HANDLE,{[`${zs.HANDLE}-clicked`]:y==="max"&&b}),{min:j,max:I,currentValue:D}=this.state,z={"aria-label":d??(m?"Disabled Slider":void 0),"aria-labelledby":p,"aria-disabled":m};l&&Object.assign(z,{"aria-orientation":"vertical"});const $=this.props.handleDot;return c?k.createElement(k.Fragment,null,k.createElement(En,{content:O.min,position:"top",trigger:"custom",rePosKey:T,visible:x&&(P.min||S),className:`${zs.HANDLE}-tooltip`},k.createElement("span",Object.assign({ref:this.minHanleEl,className:M,style:{[w]:`${T*100}%`,zIndex:y==="min"?2:1},onMouseDown:L=>{this.foundation.onHandleDown(L,"min")},onMouseEnter:()=>{this.foundation.onHandleEnter("min")},onTouchStart:L=>{this.foundation.onHandleTouchStart(L,"min")},onMouseLeave:()=>{this.foundation.onHandleLeave()},onKeyUp:L=>{this.foundation.onHandleUp(L)},onTouchEnd:L=>{this.foundation.onHandleUp(L)},onKeyDown:L=>{this.foundation.handleKeyDown(L,"min")},onFocus:L=>{this.foundation.onFocus(L,"min")},onBlur:L=>{this.foundation.onBlur(L,"min")},role:"slider",tabIndex:m?-1:0},z,{"aria-valuetext":g?g(D[0],0):f,"aria-valuenow":D[0],"aria-valuemax":D[1],"aria-valuemin":j}),($==null?void 0:$[0])&&k.createElement("div",{className:zs.HANDLE_DOT,style:Object.assign(Object.assign({},!((n=$[0])===null||n===void 0)&&n.size?{width:$[0].size,height:$[0].size}:{}),!((s=$[0])===null||s===void 0)&&s.color?{backgroundColor:$[0].color}:{})}))),k.createElement(En,{content:O.max,position:"top",trigger:"custom",rePosKey:E,visible:x&&(P.max||C),className:`${zs.HANDLE}-tooltip`},k.createElement("span",Object.assign({ref:this.maxHanleEl,className:R,style:{[w]:`${E*100}%`,zIndex:y==="max"?2:1},onMouseDown:L=>{this.foundation.onHandleDown(L,"max")},onMouseEnter:()=>{this.foundation.onHandleEnter("max")},onMouseLeave:()=>{this.foundation.onHandleLeave()},onKeyUp:L=>{this.foundation.onHandleUp(L)},onTouchStart:L=>{this.foundation.onHandleTouchStart(L,"max")},onTouchEnd:L=>{this.foundation.onHandleUp(L)},onKeyDown:L=>{this.foundation.handleKeyDown(L,"max")},onFocus:L=>{this.foundation.onFocus(L,"max")},onBlur:L=>{this.foundation.onBlur(L,"max")},role:"slider",tabIndex:m?-1:0},z,{"aria-valuetext":g?g(D[1],1):f,"aria-valuenow":D[1],"aria-valuemax":I,"aria-valuemin":D[0]}),((r=this.props.handleDot)===null||r===void 0?void 0:r[1])&&k.createElement("div",{className:zs.HANDLE_DOT,style:Object.assign(Object.assign({},!((a=this.props.handleDot[1])===null||a===void 0)&&a.size?{width:this.props.handleDot[1].size,height:this.props.handleDot[1].size}:{}),!((o=this.props.handleDot[1])===null||o===void 0)&&o.color?{backgroundColor:this.props.handleDot[1].color}:{})})))):k.createElement(En,{content:O.min,showArrow:this.props.showArrow,position:"top",trigger:"custom",rePosKey:T,visible:x&&(P.min||S),className:`${zs.HANDLE}-tooltip`},k.createElement("span",Object.assign({onMouseOver:this.foundation.checkAndUpdateIsInRenderTreeState,ref:this.minHanleEl,className:M,style:{[w]:`${T*100}%`,zIndex:y==="min"&&b?2:1},onMouseDown:L=>{this.foundation.onHandleDown(L,"min")},onMouseEnter:()=>{this.foundation.onHandleEnter("min")},onTouchStart:L=>{this.foundation.onHandleTouchStart(L,"min")},onMouseLeave:()=>{this.foundation.onHandleLeave()},onKeyUp:L=>{this.foundation.onHandleUp(L)},onTouchEnd:L=>{this.foundation.onHandleUp(L)},onKeyDown:L=>{this.foundation.handleKeyDown(L,"min")},onFocus:L=>{this.foundation.onFocus(L,"min")},onBlur:L=>{this.foundation.onBlur(L,"min")},role:"slider","aria-valuetext":g?g(D,0):f,tabIndex:m?-1:0},z,{"aria-valuenow":D,"aria-valuemax":I,"aria-valuemin":j}),$&&k.createElement("div",{className:zs.HANDLE_DOT,style:Object.assign(Object.assign({},$!=null&&$.size?{width:$.size,height:$.size}:{}),$!=null&&$.color?{backgroundColor:$.color}:{})})))},this.renderTrack=()=>{const{range:n,included:s,vertical:r}=this.props,a=this.foundation.getMinAndMaxPercent(this.state.currentValue),o=a.min,l=a.max;let c=r?{height:n?`${Math.abs(l-o)*100}%`:`${o*100}%`,top:n?`${Math.min(o,l)*100}%`:0}:{width:n?`${Math.abs(l-o)*100}%`:`${o*100}%`,left:n?`${Math.min(o,l)*100}%`:0};return c=s?c:{},k.createElement("div",{className:zs.TRACK,style:c,onClick:this.foundation.handleWrapClick})},this.renderStepDot=()=>{const{min:n,max:s,vertical:r,marks:a}=this.props,o=r?"top":"left";return a&&Object.keys(a).length>0?k.createElement("div",{className:zs.DOTS},Object.keys(a).map(c=>{const u=this.foundation.isMarkActive(Number(c)),h=K(`${$a}-dot`,{[`${$a}-dot-active`]:this.foundation.isMarkActive(Number(c))==="active"}),d=(Number(c)-n)/(s-n),p=k.createElement("span",{key:c,onClick:this.foundation.handleWrapClick,className:h,style:{[o]:`calc(${d*100}% - 2px)`}});return u?this.props.tooltipOnMark?k.createElement(En,{content:a[c]},p):p:null})):null},this.renderLabel=()=>{if(!this.props.showMarkLabel)return null;const{min:n,max:s,vertical:r,marks:a,verticalReverse:o}=this.props,l=r?"top":"left";return a&&Object.keys(a).length>0?k.createElement("div",{className:zs.MARKS+(r&&o?"-reverse":"")},Object.keys(a).map(u=>{const h=this.foundation.isMarkActive(Number(u)),d=(Number(u)-n)/(s-n);return h?k.createElement("span",{key:u,className:K(`${$a}-mark${r&&o?"-reverse":""}`),style:{[l]:`${d*100}%`},onClick:this.foundation.handleWrapClick},a[u]):null})):null},this._getAriaValueText=(n,s)=>{const{getAriaValueText:r}=this.props;return r?r(n,s):n};let{value:t}=this.props;t||(t=this.props.defaultValue),this.state={currentValue:t||(this.props.range?[0,0]:0),min:this.props.min||0,max:this.props.max||0,focusPos:"",onChange:this.props.onChange,disabled:this.props.disabled||!1,chooseMovePos:"",isDrag:!1,clickValue:0,showBoundary:!1,isInRenderTree:!0,firstDotFocusVisible:!1,secondDotFocusVisible:!1},this.sliderEl=k.createRef(),this.minHanleEl=k.createRef(),this.maxHanleEl=k.createRef(),this.dragging=[!1,!1],this.foundation=new Kj(this.adapter),this.eventListenerSet=new Set,this.handleDownEventListenerSet=new Set}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{getSliderLengths:()=>{var t;if(this.sliderEl&&this.sliderEl.current){const n=this.sliderEl.current.getBoundingClientRect(),s=(t=this.sliderEl.current.offsetParent)===null||t===void 0?void 0:t.getBoundingClientRect(),r={x:s?n.left-s.left:this.sliderEl.current.offsetLeft,y:s?n.top-s.top:this.sliderEl.current.offsetTop};return{sliderX:r.x,sliderY:r.y,sliderWidth:n.width,sliderHeight:n.height}}return{sliderX:0,sliderY:0,sliderWidth:0,sliderHeight:0}},getParentRect:()=>{const t=this.sliderEl&&this.sliderEl.current&&this.sliderEl.current.offsetParent;if(t)return t.getBoundingClientRect()},getScrollParentVal:()=>{const t=this.foundation.getScrollParent(this.sliderEl.current);return{scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}},isEventFromHandle:t=>{const n=[this.minHanleEl,this.maxHanleEl];let s=!1;return n.forEach(r=>{if(!r)return;const a=r&&r.current,o=vr.findDOMNode(a);o&&o.contains(t.target)&&(s=!0)}),s},getOverallVars:()=>({dragging:this.dragging}),updateDisabled:t=>{this.setState({disabled:t})},transNewPropsToState(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:J;this.setState(t,n)},notifyChange:t=>{this.props.onChange(Array.isArray(t)?[...t].sort((n,s)=>n-s):t)},setDragging:t=>{this.dragging=t},updateCurrentValue:t=>{const{currentValue:n}=this.state;t!==n&&this.setState({currentValue:t})},setOverallVars:(t,n)=>{this[t]=n},getMinHandleEl:()=>this.minHanleEl.current,getMaxHandleEl:()=>this.maxHanleEl.current,onHandleDown:t=>{this.handleDownEventListenerSet.add(this._addEventListener(document.body,"mousemove",this.foundation.onHandleMove,!1)),this.handleDownEventListenerSet.add(this._addEventListener(window,"mouseup",this.foundation.onHandleUp,!1)),this.handleDownEventListenerSet.add(this._addEventListener(document.body,"touchmove",this.foundation.onHandleTouchMove,!1))},onHandleMove:function(t,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:J,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=arguments.length>4?arguments[4]:void 0;if(!e.foundation.checkAndUpdateIsInRenderTreeState())return;const{value:l}=e.props;let c=a;if(c===void 0){const h=e.foundation.transPosToValue(t,n);if(h===!1)return;c=e.foundation.outPutValue(h)}const{currentValue:u}=e.state;if(!wi(e.foundation.outPutValue(u),c)){if(!r&&e.foundation.valueFormatIsCorrect(l))return!1;e.setState({currentValue:c},s)}},setEventDefault:t=>{t.stopPropagation(),t.preventDefault()},setStateVal:(t,n)=>{this.setState({[t]:n})},checkAndUpdateIsInRenderTreeState:()=>{const t=ABe(this.sliderEl.current);return t!==this.state.isInRenderTree&&this.setState({isInRenderTree:t}),t},onHandleEnter:t=>{this.setState({focusPos:t})},onHandleLeave:()=>{this.setState({focusPos:""})},onHandleUpBefore:t=>{var n,s;(s=(n=this.props).onMouseUp)===null||s===void 0||s.call(n,t),t.stopPropagation(),t.preventDefault(),Array.from(this.handleDownEventListenerSet).forEach(r=>r()),this.handleDownEventListenerSet.clear()},onHandleUpAfter:()=>{const{currentValue:t}=this.state,n=this.foundation.outPutValue(t);this.props.onAfterChange(n)},unSubscribeEventListener:()=>{Array.from(this.eventListenerSet).forEach(t=>t())}})}componentDidMount(){this.foundation.init()}componentDidUpdate(e,t){const n=!wi(this.props.value,e.value);if(this.props.disabled!==e.disabled&&this.foundation.handleDisabledChange(this.props.disabled),n){const r=this.props.value,a=this.state.currentValue;this.foundation.handleValueChange(a,r),this.props.onAfterChange(this.props.value)}}componentWillUnmount(){this.foundation.destroy()}render(){const{disabled:e,currentValue:t,min:n,max:s}=this.state,r=this.props,{vertical:a,verticalReverse:o,style:l,railStyle:c,range:u,className:h}=r,d=wBe(r,["vertical","verticalReverse","style","railStyle","range","className"]),p=K(`${$a}-wrapper`,{[`${$a}-disabled`]:e,[`${zs.VERTICAL}-wrapper`]:a,[`${$a}-reverse`]:a&&o},h),f=K(`${$a}-boundary`,{[`${$a}-boundary-show`]:this.props.showBoundary&&this.state.showBoundary}),g=K({[`${$a}`]:!a,[zs.VERTICAL]:a}),m=Array.isArray(t)?[...t].sort():t,y=u?`Range: ${this._getAriaValueText(m[0],0)} to ${this._getAriaValueText(m[1],1)}`:void 0,b=k.createElement("div",Object.assign({className:p,style:l,ref:this.sliderEl,"aria-label":y,onMouseEnter:()=>this.foundation.handleWrapperEnter(),onMouseLeave:()=>this.foundation.handleWrapperLeave()},this.getDataAttr(d)),k.createElement("div",{className:`${$a}-rail`,onClick:this.foundation.handleWrapClick,style:c}),this.renderTrack(),this.renderStepDot(),k.createElement("div",null,this.renderHandle()),this.renderLabel(),k.createElement("div",{className:f},k.createElement("span",{className:`${$a}-boundary-min`},n),k.createElement("span",{className:`${$a}-boundary-max`},s)));return a?b:k.createElement("div",{className:g},b)}_addEventListener(e,t,n){if(e.addEventListener){for(var s=arguments.length,r=new Array(s>3?s-3:0),a=3;a<s;a++)r[a-3]=arguments[a];e.addEventListener(t,n,...r);const o=()=>{e==null||e.removeEventListener(t,n),Promise.resolve().then(()=>{this.eventListenerSet.delete(o)})};return this.eventListenerSet.add(o),o}else return J}};Xj.propTypes={defaultValue:v.oneOfType([v.number,v.array]),disabled:v.bool,showMarkLabel:v.bool,included:v.bool,marks:v.object,max:v.number,min:v.number,range:v.bool,step:v.number,tipFormatter:v.func,value:v.oneOfType([v.number,v.array]),vertical:v.bool,onAfterChange:v.func,onChange:v.func,onMouseUp:v.func,tooltipOnMark:v.bool,tooltipVisible:v.bool,showArrow:v.bool,style:v.object,className:v.string,showBoundary:v.bool,railStyle:v.object,verticalReverse:v.bool,getAriaValueText:v.func,handleDot:v.oneOfType([v.shape({size:v.string,color:v.string}),v.arrayOf(v.shape({size:v.string,color:v.string}))])};Xj.defaultProps={disabled:!1,showMarkLabel:!0,tooltipOnMark:!1,included:!0,max:100,min:0,range:!1,showArrow:!0,step:1,tipFormatter:i=>i,vertical:!1,showBoundary:!1,onAfterChange:i=>{},onChange:i=>{},verticalReverse:!1};class kBe extends tt{constructor(e){super(Object.assign({},e)),this.handleFocusVisible=t=>{const{target:n}=t;try{n.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch{ns(!0,"Warning: [Semi Switch] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this._adapter.setFocusVisible(!1)}}init(){const{disabled:e}=this.getProps();this.setDisabled(e)}setChecked(e){this._adapter.setNativeControlChecked(e)}setDisabled(e){this._adapter.setNativeControlDisabled(e)}handleChange(e,t){typeof this.getProps().checked<"u"?this._adapter.notifyChange(e,t):(this._adapter.setNativeControlChecked(e),this._adapter.notifyChange(e,t))}destroy(){}}const za={PREFIX:`${ge}-switch`,FOCUS:`${ge}-switch-focus`,LARGE:`${ge}-switch-large`,SMALL:`${ge}-switch-small`,CHECKED:`${ge}-switch-checked`,DISABLED:`${ge}-switch-disabled`,ACTIVE:`${ge}-switch-active`,KNOB:`${ge}-switch-knob`,NATIVE_CONTROL:`${ge}-switch-native-control`,CHECKED_TEXT:`${ge}-switch-checked-text`,UNCHECKED_TEXT:`${ge}-switch-unchecked-text`,LOADING_SPIN:`${ge}-switch-loading-spin`,LOADING:`${ge}-switch-loading`},TBe={SIZE_MAP:["default","small","large"]};var EBe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};class Eb extends Ve{constructor(e){super(e),this.handleFocusVisible=t=>{this.foundation.handleFocusVisible(t)},this.handleBlur=t=>{this.foundation.handleBlur()},this.state={nativeControlChecked:e.defaultChecked||e.checked,nativeControlDisabled:!1,focusVisible:!1},this.switchRef=k.createRef(),this.foundation=new kBe(this.adapter)}componentDidMount(){this.foundation.init()}componentDidUpdate(e){this.props.checked!==e.checked&&this.foundation.setChecked(this.props.checked),this.props.disabled!==e.disabled&&this.foundation.setDisabled(this.props.disabled)}componentWillUnmount(){this.foundation.destroy()}get adapter(){return Object.assign(Object.assign({},super.adapter),{setNativeControlChecked:e=>{this.setState({nativeControlChecked:e})},setNativeControlDisabled:e=>{this.setState({nativeControlDisabled:e})},setFocusVisible:e=>{this.setState({focusVisible:e})},notifyChange:(e,t)=>{this.props.onChange(e,t)}})}render(){const{nativeControlChecked:e,nativeControlDisabled:t,focusVisible:n}=this.state,s=this.props,{className:r,style:a,onMouseEnter:o,onMouseLeave:l,size:c,checkedText:u,uncheckedText:h,loading:d,id:p}=s,f=EBe(s,["className","style","onMouseEnter","onMouseLeave","size","checkedText","uncheckedText","loading","id"]),g=K(r,{[za.PREFIX]:!0,[za.CHECKED]:e,[za.DISABLED]:t,[za.LARGE]:c==="large",[za.SMALL]:c==="small",[za.LOADING]:d,[za.FOCUS]:n}),m={type:"checkbox",className:za.NATIVE_CONTROL,disabled:t||d,checked:e||!1},y=u&&e&&c!=="small",b=h&&!e&&c!=="small";return k.createElement("div",Object.assign({className:g,style:a,onMouseEnter:o,onMouseLeave:l},this.getDataAttr(f)),d?k.createElement(Cc,{wrapperClassName:za.LOADING_SPIN,size:c==="default"?"middle":c}):k.createElement("div",{className:za.KNOB,"aria-hidden":!0}),y?k.createElement("div",{className:za.CHECKED_TEXT,"x-semi-prop":"checkedText"},u):null,b?k.createElement("div",{className:za.UNCHECKED_TEXT,"x-semi-prop":"uncheckedText"},h):null,k.createElement("input",Object.assign({},m,{ref:this.switchRef,id:p,role:"switch","aria-checked":e,"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],"aria-disabled":this.props.disabled,onChange:x=>this.foundation.handleChange(x.target.checked,x),onFocus:x=>this.handleFocusVisible(x),onBlur:x=>this.handleBlur(x)})))}}Eb.propTypes={"aria-label":v.string,"aria-labelledby":v.string,"aria-invalid":v.bool,"aria-errormessage":v.string,"aria-describedby":v.string,className:v.string,checked:v.bool,checkedText:v.node,defaultChecked:v.bool,disabled:v.bool,loading:v.bool,onChange:v.func,onMouseEnter:v.func,onMouseLeave:v.func,style:v.object,size:v.oneOf(TBe.SIZE_MAP),uncheckedText:v.node,id:v.string};Eb.defaultProps={disabled:!1,className:"",onChange:J,loading:!1,onMouseEnter:J,onMouseLeave:J,size:"default"};var PBe=ij,OBe=1/0;function MBe(i){var e=i==null?0:i.length;return e?PBe(i,OBe):[]}var IBe=MBe;const RBe=Xe(IBe);var LBe=VE;function DBe(i,e){var t;return LBe(i,function(n,s,r){return t=e(n,s,r),!t}),!!t}var FBe=DBe,BBe=oQ,jBe=p0,NBe=FBe,$Be=_s,zBe=zE;function HBe(i,e,t){var n=$Be(i)?BBe:NBe;return t&&zBe(i,e,t)&&(e=void 0),n(i,jBe(e))}var VBe=HBe;const XC=Xe(VBe);var UBe=VE;function WBe(i,e){var t=[];return UBe(i,function(n,s,r){e(n,s,r)&&t.push(n)}),t}var GBe=WBe,KBe=GJ,XBe=GBe,YBe=p0,qBe=_s;function ZBe(i,e){var t=qBe(i)?KBe:XBe;return t(i,YBe(e))}var JBe=ZBe;const hy=Xe(JBe);var QBe=HE;function e3e(i,e,t){t=typeof t=="function"?t:void 0;var n=t?t(i,e):void 0;return n===void 0?QBe(i,e,void 0,t):!!n}var t3e=e3e;const i3e=Xe(t3e),ir={PREFIX:`${ge}-table`,TABLE:`${ge}-table`,WRAP:`${ge}-table-wrapper`,THEAD:`${ge}-table-thead`,TR:`${ge}-table-row`,TH:`${ge}-table-row-head`,TD:`${ge}-table-row-cell`},Je={SIZE_SMALL:"small",SIZE_MIDDLE:"middle",SIZES:["small","default","middle"],LAYOUTS:["","auto","fixed"],PAGINATION_POSITIONS:["bottom","top","both"],FOOTER_POSITIONS:[!1,!0,"left","right"],SORT_DIRECTIONS:["ascend","descend"],FIXED_SET:[!1,!0,"left","right"],ALIGNS:["left","right","center"],JUSTIFY_CONTENT:["flex-start","flex-end","center"],SCROLL_HORIZONTAL_POSITIONS:["left","middle","right"],DEFAULT_KEY_COLUMN_SELECTION:"column-selection",DEFAULT_KEY_COLUMN_EXPAND:"column-expand",DEFAULT_KEY_COLUMN_TITLE:"column-title",DEFAULT_KEY_COLUMN_SORTER:"column-sorter",DEFAULT_KEY_COLUMN_FILTER:"column-filter",DEFAULT_KEY_COLUMN_SCROLLBAR:"column-scrollbar",DEFAULT_COMPONENTS:{table:"table",header:{outer:"table",wrapper:"thead",row:"tr",cell:"th"},body:{outer:"table",wrapper:"tbody",row:"tr",cell:"td"},footer:{wrapper:"tfoot",row:"tr",cell:"td"}},EXPAND_RELATED_PROPS:["expandedRowRender","dataSource","hideExpandedColumn","childrenRecordName","rowExpandable"]},Uf=1,Yj=0,qj=16,Zj=16,Jj=12,Qj=12,eN=8,tN=8,sP=20,H9=sP+Uf+Yj+qj+Zj,n3e=qj+Zj+Uf,V9=sP+Uf+Yj+Jj+Qj,s3e=Jj+Qj+Uf,U9=sP+Uf+Yj+tN+eN,r3e=eN+tN+Uf,Vn={DEFAULT_PAGE_SIZE:10,DEFAULT_WIDTH_COLUMN_EXPAND:60,DEFAULT_WIDTH_COLUMN_SELECTION:60,DEFAULT_INDENT_WIDTH:20,DEFAULT_CELL_PADDING_LEFT:16,DEFAULT_CELL_PADDING_RIGHT:16,DEFAULT_CELL_PADDING_TOP:qj,DEFAULT_CELL_PADDING_BOTTOM:Zj,DEFAULT_CELL_MIDDLE_PADDING_TOP:Jj,DEFAULT_CELL_MIDDLE_PADDING_BOTTOM:Qj,DEFAULT_CELL_SMALL_PADDING_TOP:eN,DEFAULT_CELL_SMALL_PADDING_BOTTOM:tN,DEFAULT_CELL_BORDER_WIDTH_LEFT:1,DEFAULT_CELL_BORDER_WIDTH_RIGHT:1,DEFAULT_CELL_BORDER_WITH_BOTTOM:Uf,DEFAULT_CELL_LINE_HEIGHT:sP,DEFAULT_VIRTUALIZED_BODY_HEIGHT:600,DEFAULT_VIRTUALIZED_SECTION_ROW_HEIGHT:H9,DEFAULT_VIRTUALIZED_ROW_HEIGHT:H9,DEFAULT_VIRTUALIZED_ROW_MIN_HEIGHT:n3e,DEFAULT_VIRTUALIZED_SECTION_ROW_MIDDLE_HEIGHT:V9,DEFAULT_VIRTUALIZED_ROW_MIDDLE_HEIGHT:V9,DEFAULT_VIRTUALIZED_ROW_MIDDLE_MIN_HEIGHT:s3e,DEFAULT_VIRTUALIZED_SECTION_ROW_SMALL_HEIGHT:U9,DEFAULT_VIRTUALIZED_ROW_SMALL_HEIGHT:U9,DEFAULT_VIRTUALIZED_ROW_SMALL_MIN_HEIGHT:r3e};let Nee=class{constructor(e){this._prefix=e}_isEmpty(e){return e==null||e===""}_baseLog(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"log";if(typeof console[e]=="function"){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const r=[...n];this._isEmpty(this._prefix)||r.unshift(this._prefix,":"),console[e](...r)}}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._baseLog("log",...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._baseLog("warn",...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._baseLog("error",...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._baseLog("info",...t)}};function a3e(i,e,t){return i3e(i,e,function(n,s){if(typeof n=="function"&&typeof s=="function")return hh(n)===hh(s)})}function W9(i,e){e=Array.isArray(e)?e:["key","dataIndex"];let t=null;return ws(e,n=>{if(t=ne(i,n),t!=null)return!1}),t}function dy(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2?arguments[2]:void 0;e=e<0||typeof e!="number"?0:e,t=t>i.length||typeof t!="number"?i.length:t;let n=0;return ws(i,(s,r)=>{r>=e&&r<t&&(n+=typeof s=="number"&&!isNaN(s)?s:0)}),n}function bL(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:["key"];const n=hy(i,r=>r.fixed===!0||r.fixed==="left"),s=cy(n,r=>t.every(a=>r[a]!=null&&r[a]===e[a]));return n.length>0&&s===n.length-1}function xL(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:["key"];const n=hy(i,r=>r.fixed==="right"),s=cy(n,r=>t.every(a=>r[a]!=null&&r[a]===e[a]));return n.length>0&&s===0}function YC(i){return["left",!0].includes(ne(i,"fixed"))}function qC(i){return["right"].includes(ne(i,"fixed"))}function o3e(i){return[Je.DEFAULT_KEY_COLUMN_EXPAND,Je.DEFAULT_KEY_COLUMN_SCROLLBAR,Je.DEFAULT_KEY_COLUMN_SELECTION].includes(i)}function $ee(i){return ne(i,"key")===Je.DEFAULT_KEY_COLUMN_EXPAND}function l3e(i){return ne(i,"key")===Je.DEFAULT_KEY_COLUMN_SCROLLBAR}function c3e(i){return ne(i,"key")===Je.DEFAULT_KEY_COLUMN_SELECTION}function iN(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[Je.DEFAULT_KEY_COLUMN_SCROLLBAR];return hy(i,t=>!e.includes(t.key))}function Eh(i,e){return e===void 0&&(e="key"),typeof e=="function"?e(i):ne(i,e)}function pM(i,e){return e!=null&&Qw(i,e)}function u3e(i,e){return e!==null&&i.has(e)}function h3e(i,e){return e!==null&&i.has(e)}function G9(i,e,t){return t===void 0&&(t="key"),uf(i,n=>e!=null&&e!==""&&Eh(n,t)===e)}function d3e(i,e){return e===void 0&&(e="children"),ne(i,e)}function zee(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return e===void 0&&(e="__expanded_row"),i+e}function p3e(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const t={};return i==="small"?(t.height=e?Vn.DEFAULT_VIRTUALIZED_SECTION_ROW_SMALL_HEIGHT:Vn.DEFAULT_VIRTUALIZED_ROW_SMALL_HEIGHT,t.minHeight=Vn.DEFAULT_VIRTUALIZED_ROW_SMALL_MIN_HEIGHT):i==="middle"?(t.height=e?Vn.DEFAULT_VIRTUALIZED_SECTION_ROW_MIDDLE_HEIGHT:Vn.DEFAULT_VIRTUALIZED_ROW_MIDDLE_HEIGHT,t.minHeight=Vn.DEFAULT_VIRTUALIZED_ROW_MIDDLE_MIN_HEIGHT):(t.height=e?Vn.DEFAULT_VIRTUALIZED_SECTION_ROW_HEIGHT:Vn.DEFAULT_VIRTUALIZED_ROW_HEIGHT,t.minHeight=Vn.DEFAULT_VIRTUALIZED_ROW_MIN_HEIGHT),t}function $m(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"children";const t=[];if(Array.isArray(i)&&i.length)for(const n of i)Array.isArray(n[e])&&n[e].length?t.push(...$m(n[e],e)):(m3e(n),t.push(n));return t}function rA(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"children",t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const n=[];return ws(i,(s,r)=>{if(s.key==null){const a=s.dataIndex||r;s.key=`${t}-${a}`}Array.isArray(s[e])&&s[e].length&&n.push(...s[e])}),n.length&&rA(n,e,t+1),i}function Hee(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"children",n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const s=[];return Array.isArray(i)&&i.length&&n<=e&&i.forEach(r=>{const a=r[t];Array.isArray(a)&&a.length&&n<e?s.push(...Hee(a,e,t,n+1)):s.push(r)}),s}function ZC(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"children",n;return ws(i,s=>{if(s&&s.key!=null&&!n&&s.key===e.key&&(n=s),s&&Array.isArray(s[t])&&!n&&(n=ZC(s[t],e,t)),n)return!1}),n}function f3e(i){const{expandedRowRender:e,dataSource:t,hideExpandedColumn:n,childrenRecordName:s,rowExpandable:r}=i,a=typeof e=="function";return n&&a||!a&&t.some(o=>{const l=ne(o,s);return!!(Array.isArray(l)&&l.length||r(o))})}function Vee(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t;const n=e.findIndex(s=>i.dataIndex===s.dataIndex?(t=Object.assign(Object.assign({},s),i),!0):!1);return n>-1?e.splice(n,1,t):e.push(t),[...e]}function g3e(i,e){const t=[...e];for(const n of i)if(!Ms(n.width)){const s=n.key,r=cy(t,a=>a.key===s);r!==-1&&(t[r].width=ne(n,"width"))}return t}function Uee(i){let{dataSource:e,getCheckboxProps:t,childrenRecordName:n,rowKey:s}=i;const r=[];if(Array.isArray(e)&&e.length&&typeof t=="function")for(const a of e){const o=t(a),l=typeof s=="function"?s(a):ne(a,s);o&&o.disabled&&r.push(l);const c=ne(a,n);if(Array.isArray(c)&&c.length){const u=Uee({dataSource:c,getCheckboxProps:t});r.push(...u)}}return r}function m3e(i){if(typeof i=="object"&&i!==null){const{filters:e,sorter:t,dataIndex:n,onFilter:s}=i,r=new Nee("[@douyinfe/semi-ui Table]");(Array.isArray(e)||xt(s)||xt(t))&&Ms(n)&&r.warn("The column with sorter or filter must pass the 'dataIndex' prop")}}function y3e(i){let{dataSource:e,childrenRecordName:t="children"}=i,n=!1;if(Array.isArray(e))for(const s of e){const r=ne(s,t);if(Array.isArray(r)&&r.length){n=!0;break}}return n}function Wee(i,e){if(e==="rtl")switch(i){case"left":return"right";case"right":return"left";default:return i}return i}function _3e(i,e){if(e==="rtl")switch(i){case"left":return"flex-end";case"right":return"flex-start";default:return i}else switch(i){case"left":return"flex-start";case"right":return"flex-end";default:return i}}function nN(i){return i===!0||ne(i,"showTitle",!0)}class v3e{constructor(e){this._state=Object.assign({},e),this._listeners=[]}subscribe(e){return this._listeners.push(e),()=>{const n=this._listeners.indexOf(e);n>-1&&this._listeners.splice(n,1)}}setState(e){Object.assign(this._state,Object.assign({},e));for(const t of this._listeners)typeof t=="function"&&t(this._state)}getState(){return this._state}}function b3e(i,e,t,n){for(var s=t-1,r=i.length;++s<r;)if(n(i[s],e))return s;return-1}var x3e=b3e,S3e=e0,C3e=Cj,w3e=x3e,A3e=s0,k3e=W3,T3e=Array.prototype,K9=T3e.splice;function E3e(i,e,t,n){var s=n?w3e:C3e,r=-1,a=e.length,o=i;for(i===e&&(e=k3e(e)),t&&(o=S3e(i,A3e(t)));++r<a;)for(var l=0,c=e[r],u=t?t(c):c;(l=s(o,u,l,n))>-1;)o!==i&&K9.call(o,l,1),K9.call(i,l,1);return i}var P3e=E3e,O3e=P3e;function M3e(i,e){return i&&i.length&&e&&e.length?O3e(i,e):i}var I3e=M3e,R3e=$E,L3e=I3e,D3e=R3e(L3e),F3e=D3e;const B3e=Xe(F3e);function j3e(i){return new Set(i)}function N3e(i,e){if(i===e&&(e=j3e(e)),vh(i)&&i.size&&vh(e)&&e.size){for(const t of e)i.has(t)&&i.delete(t);return i}return i}function X9(i,e){if(i!==null&&i.length&&e!==null&&e.length){const t=new Set(i),n=new Set(e),s=N3e(t,n);return Array.from(s)}return i}function $3e(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ascend";switch(e){case"descend":return(t,n)=>{const s=Number(i(t,n,e));return s!==0?-s:s};case"ascend":default:return(t,n)=>i(t,n,e)}}class Pb extends tt{static initColumnsFilteredValueAndSorterOrder(e){return e.forEach(t=>{Pb.initFilteredValue(t),Pb.initSorterOrder(t)}),e}static initFilteredValue(e){const{defaultFilteredValue:t,filteredValue:n}=e;Hr(n)&&(Array.isArray(t)&&t.length?e.filteredValue=t:e.filteredValue=[])}static initSorterOrder(e){const{defaultSortOrder:t,sortOrder:n,sorter:s}=e;s&&Hr(n)&&(Hr(t)?e.sortOrder=!1:e.sortOrder=t)}constructor(e){super(Object.assign({},e)),this.setPage=(s,r)=>{s=s||this._adapter.getCurrentPage();const a=this.getState("pagination"),{dataSource:o,pagination:l,disabledRowKeys:c,allRowKeys:u}=this.getCurrentPageData(null,Object.assign(Object.assign({},a),{currentPage:s,pageSize:r}));!this._pagerIsControlled()&&s>0&&(this._adapter.setDisabledRowKeys(c),this._adapter.setAllRowKeys(u),this._adapter.setPagination(l),this._adapter.setDataSource(o)),this._notifyChange(l)},this.setCachedFilteredSortedDataSource=s=>{this._adapter.setCachedFilteredSortedDataSource(s);const r=this.getAllRowKeys(s);this._adapter.setCachedFilteredSortedRowKeys(r)},this.isSortOrderValid=s=>Je.SORT_DIRECTIONS.includes(s)||s===!1;const t=this._adapter.getHandleColumns(),n=this._adapter.getMergePagination();this.memoizedWithFnsColumns=Ap(t,wi),this.memoizedFilterColumns=Ap(iN),this.memoizedFlattenFnsColumns=Ap($m),this.memoizedPagination=Ap(n,wi)}init(){const e=[...this.getProp("dataSource")],{queries:t}=this._adapter.getStates(),n=this.getFilteredSortedDataSource(e,t),s=this.getAllDisabledRowKeys(n),r=this.getCurrentPageData(n);this.setAdapterPageData(r),this.initExpandedRowKeys(r),this.initSelectedRowKeys(r),this.setCachedFilteredSortedDataSource(n),this.setAllDisabledRowKeys(s)}initExpandedRowKeys(){let{groups:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{defaultExpandAllRows:t,defaultExpandedRowKeys:n=[],expandedRowKeys:s=[],dataSource:r=[],expandAllRows:a,defaultExpandAllGroupRows:o,expandAllGroupRows:l}=this.getProps(),c=[];t||a?this._addNoDuplicatedItemsToArr(c,this.getAllRowKeys(r),e&&Sb(e)&&e.size?Array.from(e.keys()):[]):o||l?this._addNoDuplicatedItemsToArr(c,s,e&&Sb(e)&&e.size?Array.from(e.keys()):[]):Array.isArray(n)&&n.length?this._addNoDuplicatedItemsToArr(c,n):Array.isArray(s)&&s.length&&this._addNoDuplicatedItemsToArr(c,s),this._adapter.setExpandedRowKeys(c)}initSelectedRowKeys(e){let{disabledRowKeys:t}=e;const n=this.getProp("rowSelection"),s=[];if(n){const r=ne(n,"selectedRowKeys"),a=ne(n,"defaultSelectedRowKeys");Array.isArray(r)?this._addNoDuplicatedItemsToArr(s,r):Array.isArray(a)&&this._addNoDuplicatedItemsToArr(s,a),Array.isArray(t)&&t.length&&B3e(s,...t),this._adapter.setSelectedRowKeys(s)}}getFilteredSortedDataSource(e,t){const n=this.filterDataSource(e,t.filter(r=>{const a=r.filteredValue?r.filteredValue:r.defaultFilteredValue;return xt(r.onFilter)&&Array.isArray(a)&&a.length}));return this.sortDataSource(n,t.filter(r=>r&&xt(r.sorter)))}getCurrentPageData(e,t,n){const s=this._adapter.getCachedFilteredSortedDataSource();e=e??[...s],t=t??(this.getState("pagination")&&Object.assign({},this.getState("pagination"))),n=n??[...this.getState("queries")];let r;if(this.getProp("groupBy")!=null){const{groups:c,dataSource:u}=this.groupDataSource(e);e=u,r=c}t=this.normalizePagination(t,e),e=this.limitPageDataSource(e,t);const a=this.getAllDisabledRowKeys(e),o=this.getAllRowKeys(e);return{dataSource:e,groups:r,pagination:t,disabledRowKeys:a,allRowKeys:o,queries:n}}groupDataSource(e,t){t=t??this.getProp("groupBy");const n=new Map,s=[];return t!=null&&ws(e,(r,a)=>{const o=typeof t=="function"?t(r):ne(r,t);if(o!=null&&o!==""){const l=this.getRecordKey(r);let c=n.get(o);vh(c)?c.add(l):(c=new Set([l]),n.set(o,c))}}),n&&n.size?n.forEach((r,a)=>{vh(r)&&r.forEach(o=>{s.push(this._getRecord(o))})}):s.push(...e),{groups:n,dataSource:s}}sortDataSource(e,t){return ws(t,n=>{const{sorter:s,sortOrder:r,defaultSortOrder:a,sortChildrenRecord:o}=n,l=this.isSortOrderValid(r)?r:a;if(xt(s)&&l&&Je.SORT_DIRECTIONS.includes(l)){if(o){const c=this.getProp("childrenRecordName");e=e&&e.map(u=>{const h=this._getRecordChildren(u);return Array.isArray(h)&&h.length?Object.assign(Object.assign({},u),{[c]:this.sortDataSource(h,[n])}):u})}return e.sort($3e(s,l)),!1}}),e}filterDataSource(e,t){let n=null,s=!1;const r=this.getProp("childrenRecordName");return ws(t,a=>{const{onFilter:o,filteredValue:l,filterChildrenRecord:c,defaultFilteredValue:u}=a,h=Array.isArray(l)?l:u;typeof o=="function"&&Array.isArray(h)&&h.length&&(s=!0,n===null?n=new Map:(e=Array.from(n&&n.values()),n=new Map),ws(e,d=>{ws(h,p=>{const f=ne(d,r),g=this.getRecordKey(d);let m;if(Array.isArray(f)&&f.length&&c&&(m=this.filterDataSource(f,[a])),Array.isArray(m)&&m.length){if(g!=null){const y=ne(n.get(g),r,[]);n.set(g,Object.assign(Object.assign({},d),{[r]:m.reduce((b,x)=>(b.find(S=>this.getRecordKey(S)===this.getRecordKey(x))==null&&b.push(x),b),[...y])}))}}else o(p,d)&&n.set(g,d)})}))}),s&&(e=Array.from(n&&n.values())),e}limitPageDataSource(e,t){e=e??this.getProp("dataSource"),t=t??this.getState("pagination");let n=e;const s=ne(t,"currentPage");if(this.getProp("pagination")!==!1&&s&&e&&t&&!this._pagerIsControlled()){const{pageSize:r=Vn.DEFAULT_PAGE_SIZE}=t,a=(s-1)*r,o=s*r;n=TDe(e,a,o)}return n}normalizePagination(e,t){e=e??this._getPagination(),t=t??this._getDataSource();const n=this.getProp("pagination");if(e&&(e=typeof e=="object"?Object.assign({},e):{},e=Q1({total:t&&t.length||0,pageSize:Vn.DEFAULT_PAGE_SIZE,currentPage:ne(n,"defaultCurrentPage",1),position:Je.PAGINATION_POSITIONS[0]},e),!this._pagerIsControlled())){const s=ne(n,"total",t.length),{currentPage:r,pageSize:a}=e,o=Math.ceil(s/a);e.total=s,r>o&&(e.currentPage=1)}return e}setAdapterPageData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{pagination:t,dataSource:n,disabledRowKeys:s,allRowKeys:r,groups:a}=e;this._adapter.setDisabledRowKeys(s),this._adapter.setAllRowKeys(r),this._adapter.setPagination(t),this._adapter.setGroups(a),this._adapter.setDataSource(n)}destroy(){}setAllDisabledRowKeys(e){this._adapter.setAllDisabledRowKeys(e)}handleClick(e){}handleMouseEnter(e){}handleMouseLeave(e){}stopPropagation(e){this._adapter.stopPropagation(e)}_addNoDuplicatedItemsToArr(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];for(const r of n)if(Array.isArray(r))for(const a of r)e.includes(a)||e.push(a);return e}_notifyChange(e,t,n,s){e=e??this._getPagination(),t=t??this._getAllFilters(),n=n??this._getAllSorters()[0],ne(this.getProp("scroll"),"scrollToFirstRowOnChange")&&this._adapter.resetScrollY(),this._adapter.notifyChange({pagination:Object.assign({},e),filters:[...t],sorter:n,extra:Object.assign({},s)})}_rowExpansionIsControlled(){return Array.isArray(this.getProp("expandedRowKeys"))}_pagerIsControlled(){return ne(this.getProp("pagination"),"currentPage")!=null}_selectionIsControlled(){return Array.isArray(ne(this.getProp("rowSelection"),"selectedRowKeys"))}_sorterIsControlled(e){const t=e&&this.getQuery(e,this.getState("flattenColumns"));return!!(t&&t.sortOrder!=null)}_filterIsControlled(e){const t=e&&this.getQuery(e,this.getState("flattenColumns"));return!!(t&&Array.isArray(t.filteredValue))}_filterShowIsControlled(e){const t=e&&this.getQuery(e,this.getState("flattenColumns"));return!!(t&&(t.filterDropdownVisible===!0||t.filterDropdownVisible===!1))}_getSelectedRowKeys(){const e=this.getState("rowSelection");return[...ne(e,"selectedRowKeys",[])]}_getSelectedRowKeysSet(){const e=this.getState("rowSelection");return ne(e,"selectedRowKeysSet",new Set)}_getDataSource(){return this.getProp("dataSource")||[]}_getRecord(e){return uf(this.getProp("dataSource"),t=>e!=null&&e!==""&&this.getRecordKey(t)===e)}_getRecordChildren(e){return ne(e,this.getProp("childrenRecordName"))}_getPagination(){return this.getState("pagination")||{}}_getAllFilters(e){e=e||this.getState("queries");const t=[];return ws(e,n=>{Array.isArray(n.filteredValue)&&(n.filteredValue.length||this._filterIsControlled(n.dataIndex))&&t.push(n)}),t}_getAllSorters(e){return e=e||this.getState("queries"),hy(e,t=>t.sorter&&t.sortOrder)}_filterQueries(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:["dataIndex"];t=t??this.getState("queries");const s=[],r=[];return ws(t,(a,o)=>{XC(n,c=>c&&e[c]!=null&&e[c]===a[c])&&(s.push(a),r.push(o))}),{filteredQueries:s,filteredIndexes:r}}_mergeToQueries(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:["dataIndex"];t=t??this.getState("queries"),t=[...t],e=Object.assign({},e);const{filteredQueries:s,filteredIndexes:r}=this._filterQueries(e,t,n);return ws(s,(a,o)=>{t[r[o]]=Object.assign({},e)}),t}getRecordKey(e){if(!e)return;const t=this.getProp("rowKey");return typeof t=="function"?t(e):ne(e,t)}isEmpty(e){return e=e??this.getProp("dataSource"),!(Array.isArray(e)&&e.length>0)}handleSelectRow(e,t,n){if(this.stopPropagation(n),typeof t=="boolean"&&e!=null){const s=this._getSelectedRowKeys();let r=-1;const a=this.getSelectedRows(null,[e])[0];let o;(r=s.indexOf(e))>-1&&t===!1?(s.splice(r,1),o=this.getSelectedRows(null,s),this._selectionIsControlled()||this._adapter.setSelectedRowKeys(s),this._adapter.notifySelect(a,t,o,n),this._adapter.notifySelectionChange(s,o)):s.indexOf(e)===-1&&t===!0&&(s.push(e),o=this.getSelectedRows(null,s),this._selectionIsControlled()||this._adapter.setSelectedRowKeys(s),this._adapter.notifySelect(a,t,o,n),this._adapter.notifySelectionChange(s,o))}}handleSelectAllRow(e,t){if(this.stopPropagation(t),typeof e=="boolean"){const n=this._getSelectedRowKeys();let s=[...n];const r=this._getSelectedRowKeysSet();let a=[...this._adapter.getCachedFilteredSortedRowKeys()];const o=this._adapter.getAllDisabledRowKeys(),l=this._adapter.getAllDisabledRowKeysSet();let c;if(e){for(const d of a)!l.has(d)&&!r.has(d)&&s.push(d);a=X9(a,[...o,...n]),c=[...a]}else s=X9(s,a),c=[...n];const u=this.getSelectedRows(null,c||[]),h=this.getSelectedRows(null,s||[]);this._selectionIsControlled()||this._adapter.setSelectedRowKeys(s),this._adapter.notifySelectAll(e,h,u,t),this._adapter.notifySelectionChange(s,h)}}getSelectedRows(e,t,n){e=e??this._getDataSource(),t=t??this._getSelectedRowKeys(),vh(n)||(n=new Set(t));const s=this.getProp("childrenRecordName"),r=[];if(vh(n)&&n.size&&Array.isArray(e)&&e.length&&(r.push(...e.filter(a=>n.has(this.getRecordKey(a)))),r.length<t.length))for(const a of e){const o=ne(a,s);if(Array.isArray(o)&&o.length){const l=this.getSelectedRows(o,t,n);r.push(...l)}}return r}getAllDisabledRowKeys(e,t){e=e??this._getDataSource(),t=t??ne(this.getProp("rowSelection"),"getCheckboxProps");const n=this.getProp("childrenRecordName"),s=[];if(Array.isArray(e)&&e.length&&typeof t=="function")for(const r of e){const a=t(r);a&&a.disabled&&s.push(this.getRecordKey(r));const o=ne(r,n);if(Array.isArray(o)&&o.length){const l=this.getAllDisabledRowKeys(o,t);s.push(...l)}}return s}getAllRowKeys(e){e=e??this._getDataSource();const t=this.getProp("childrenRecordName"),n=[];if(Array.isArray(e)&&e.length)for(const s of e){const r=[],a=ne(s,t);Array.isArray(a)&&a.length&&r.push(...this.getAllRowKeys(a)),n.push(this.getRecordKey(s),...r)}return n}hasRowSelected(e,t){return!!(Array.isArray(e)&&e.length&&vh(t)&&t.size&&e.filter(n=>t.has(n)).length)}handleRowExpanded(e,t,n){this.stopPropagation(n);const s=[...this.getState("expandedRowKeys")],r=s.indexOf(t),a=typeof t=="string"||typeof t=="number";a&&e&&r===-1?s.push(t):a&&!e&&r>-1&&s.splice(r,1),this._rowExpansionIsControlled()||this._adapter.setExpandedRowKeys(s);const o=this.getSelectedRows(null,s);let l=this.getSelectedRows(null,[t])[0];const c=this._getGroups();if(c){c.has(t)&&(l={groupKey:t});for(let u=0,h=s.length;u<h;u++)c.has(t)&&o.push({groupKey:s[u]})}this._adapter.notifyExpand(e,l,n),this._adapter.notifyExpandedRowsChange(o)}_getGroups(){return this._adapter.getProp("groupBy")!==null?this._adapter.getState("groups"):null}allIsSelected(e,t,n){const s=hy(n,r=>r!=null&&!t.has(r));if(s&&s.length){for(const r of s)if(r!=null&&!e.has(r))return!1;return!0}else return n.length&&n.every(a=>e.has(a))||!1}allIsNotSelected(e,t){for(const n of t)if(n!=null&&Array.isArray(e)&&e.includes(n))return!0;return!1}formatPaginationInfo(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n="";const s=ne(this.getProp("pagination"),"formatPageText"),{total:r,pageSize:a,currentPage:o}=e,l=Math.min((o-1)*a+1,r),c=Math.min(o*a,r);return(s||s!==!1&&t&&r>0)&&(n=typeof s=="function"?s({currentStart:l,currentEnd:c,total:r}):t.replace("${currentStart}",l).replace("${currentEnd}",c).replace("${total}",r)),n}toggleShowFilter(e,t){let n=this.getQuery(e);const s=t;n=Object.assign(Object.assign({},n),{filterDropdownVisible:s}),this._filterShowIsControlled(),this._adapter.notifyFilterDropdownVisibleChange(s,e)}handleFilterSelect(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.getQuery(e),s=[...this._adapter.getState("queries")];const{filteredValue:r}=t;n=Object.assign(Object.assign({},n),{filteredValue:r}),s=Vee(n,s);const a=this._mergeToQueries(n,null),o=this._getAllFilters(a);this._filterIsControlled(e)||(this._adapter.setQueries(s),this.handleClickFilterOrSorter(s)),this._notifyChange(null,o)}handleSort(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;this.stopPropagation(t);const{dataIndex:n}=e;let s=this.getState("queries"),r=null;s=[...s],ws(s,(a,o,l)=>{if(a.sorter){const c=Object.assign({},a),u=ne(c,"sortOrder"),h=ne(c,"defaultSortOrder",!1);let d=this.isSortOrderValid(u)?u:h;n&&n===c.dataIndex?d===Je.SORT_DIRECTIONS[0]?d=Je.SORT_DIRECTIONS[1]:d===Je.SORT_DIRECTIONS[1]?d=!1:d=Je.SORT_DIRECTIONS[0]:d=!1,l[o]=Object.assign(Object.assign({},c),{sortOrder:d}),n===c.dataIndex&&(r=l[o])}}),this._sorterIsControlled(n)||(this._adapter.setQueries(s),this.handleClickFilterOrSorter(s)),this._notifyChange(null,null,r,null)}handleClickFilterOrSorter(e){const t=[...this.getProp("dataSource")],n=this.getFilteredSortedDataSource(t,e),s=this.getAllDisabledRowKeys(n);this.setCachedFilteredSortedDataSource(n),this.setAllDisabledRowKeys(s);const r=this.getCurrentPageData(n);this.setAdapterPageData(r)}getQuery(e,t){if(t=t||this.getState("queries"),e!=null)return uf(t,n=>n.dataIndex===e)}getCellWidths(e,t,n){return this._adapter.getCellWidths(e,t,n)}setHeadWidths(e,t){return this._adapter.setHeadWidths(e,t)}getHeadWidths(e){return this._adapter.getHeadWidths(e)}mergedRowExpandable(e){return this._adapter.mergedRowExpandable(e)}setBodyHasScrollbar(e){this._adapter.setBodyHasScrollbar(e)}}const Gee={align:v.oneOf(Je.ALIGNS),className:v.string,colSpan:v.number,dataIndex:v.string,defaultSortOrder:v.oneOf(Je.SORT_DIRECTIONS),filterChildrenRecord:v.bool,filterDropdownProps:v.object,filterDropdown:v.node,filterDropdownVisible:v.bool,filterIcon:v.func,filterMultiple:v.bool,filteredValue:v.arrayOf(v.any),filters:v.array,fixed:v.oneOf(Je.FIXED_SET),onCell:v.func,onFilter:v.func,onFilterDropdownVisibleChange:v.func,onHeaderCell:v.func,onSorterChange:v.func,render:v.func,renderFilterDropdownItem:v.func,sortChildrenRecord:v.bool,sortDirections:v.arrayOf(v.string),sortOrder:v.oneOfType([v.bool,v.string]),sorter:v.oneOfType([v.bool,v.func]),title:v.oneOfType([v.func,v.node]),useFullRender:v.bool,width:v.oneOfType([v.number,v.string]),showSortTip:v.bool};class py extends k.PureComponent{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e)}render(){return null}}py.propTypes=Object.assign({},Gee);py.elementType="Column";function aA(i){if(i){const e=[];return k.Children.forEach(i,t=>{if(k.isValidElement(t)&&(t.type===py||ne(t,"type.elementType")==="Column")){const n=_n(t.props,["children"]);Array.isArray(t.props.children)&&t.props.children.length&&(n.children=aA(t.props.children)),e.push(Object.assign({key:t.key},n))}}),e}return[]}const Wf=k.createContext({headWidths:[],setHeadWidths:J,handleRowExpanded:J}),z3e=i=>{let{children:e,anyColumnFixed:t,flattenedColumns:n,tableWidth:s,headWidths:r,setHeadWidths:a,getHeadWidths:o,getCellWidths:l,handleRowExpanded:c,renderExpandIcon:u,renderSelection:h,getVirtualizedListRef:d,setBodyHasScrollbar:p,direction:f}=i;const g=H.useMemo(()=>({anyColumnFixed:t,flattenedColumns:n,renderExpandIcon:u,renderSelection:h,setHeadWidths:a,getHeadWidths:o,getCellWidths:l,headWidths:r,tableWidth:s,handleRowExpanded:c,getVirtualizedListRef:d,setBodyHasScrollbar:p,direction:f}),[t,n,u,h,a,o,l,r,s,c,d,p,f]);return k.createElement(Wf.Provider,{value:g},e)};class H3e extends tt{handleChange(e){const t=e.target.checked;this._adapter.notifyChange(t,e)}}class oA extends Ve{get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{notifyChange:function(){return e.props.onChange(...arguments)}})}constructor(e){super(e),this.handleChange=t=>this.foundation.handleChange(t),this.foundation=new H3e(this.adapter)}render(){const{selected:e,getCheckboxProps:t,indeterminate:n,disabled:s,prefixCls:r,className:a}=this.props,o=this.props["aria-label"];let l={onChange:this.handleChange,disabled:s,indeterminate:n,checked:e};typeof t=="function"&&(l=Object.assign(Object.assign({},l),t()));const c=K(`${r}-selection-wrap`,{[`${r}-selection-disabled`]:s},a);return k.createElement("span",{className:c},k.createElement(Ou,Object.assign({"aria-label":o},l)))}}oA.propTypes={columnTitle:v.string,getCheckboxProps:v.func,type:v.string,onChange:v.func,selected:v.bool,disabled:v.bool,indeterminate:v.bool,prefixCls:v.string,className:v.string,"aria-label":v.string};oA.defaultProps={disabled:!1,onChange:J,prefixCls:ir.PREFIX};class sN extends H.PureComponent{render(){const{pagination:e,prefixCls:t,info:n,renderPagination:s}=this.props,r=ne(e,"total"),a=s&&xt(s)?s(e):null;return k.createElement("div",{className:`${t}-pagination-outer`},H.isValidElement(a)?a:k.createElement(k.Fragment,null,k.createElement("span",{className:`${t}-pagination-info`},n),k.createElement("span",{className:`${t}-pagination-wrapper`},r>0?k.createElement(iP,Object.assign({},e,{key:ne(e,"pageSize","pagination")})):null)))}}sN.propTypes={style:v.object,prefixCls:v.string,pagination:v.object,info:v.oneOfType([v.string,v.node]),renderPagination:v.func};sN.defaultProps={prefixCls:ir.PREFIX};function Kee(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const{filterMultiple:n=!0,filters:s=[],filteredValue:r=[],filterDropdownVisible:a,onSelect:o=J,onFilterDropdownVisibleChange:l=J,trigger:c="click",position:u="bottom",renderFilterDropdown:h,renderFilterDropdownItem:d}=i??{},p=lf(i,["tempFilteredValue","setTempFilteredValue","confirm","clear","close","filters"]),f=typeof h=="function"?h(p):k.createElement(Oi.Menu,null,Array.isArray(s)&&s.map((m,y)=>{const b=E=>{const P=E&&E.nativeEvent;P&&(P.stopImmediatePropagation(),P.stopPropagation(),P.preventDefault());let O=[...r];const M=O.includes(m.value),R=O.indexOf(m.value);return R>-1?O.splice(R,1):n?O.push(m.value):O=[m.value],o({value:m.value,filteredValue:O,included:!M,domEvent:P})},x=r.includes(m.value),{text:S}=m,{value:C}=m,w=`${t}_${y}`,A=typeof d=="function"?d({onChange:b,filterMultiple:n,value:C,text:S,checked:x,filteredValue:r,level:t}):null;let T=A&&k.isValidElement(A)?k.cloneElement(A,{key:w}):k.createElement(Oi.Item,{key:w,onClick:b},n?k.createElement(Ou,{checked:x},S):k.createElement(wd,{checked:x},S));if(Array.isArray(m.children)&&m.children.length){const E=Object.assign(Object.assign({},i),{filters:m.children,trigger:"hover",position:"right"});delete E.filterDropdownVisible,T=Kee(E,T,t+1)}return T})),g=Object.assign(Object.assign({},i),{onVisibleChange:m=>l(m),trigger:c,position:u,render:f});return a!=null&&(g.visible=a),k.createElement(Oi,Object.assign({},g,{key:`Dropdown_level_${t}`,className:`${ir.PREFIX}-column-filter-dropdown`}),e)}function V3e(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{prefixCls:e=ir.PREFIX,filteredValue:t,filterIcon:n="filter",filterDropdownProps:s,onSelect:r,filterDropdownVisible:a,renderFilterDropdown:o,onFilterDropdownVisibleChange:l}=i;let{filterDropdown:c=null}=i;const u=typeof a<"u",d=!u&&typeof o=="function",[p,f]=H.useState(t),g=d?!1:a,[m,y]=H.useState(g);H.useEffect(()=>{typeof a<"u"&&y(a)},[a]),H.useEffect(()=>{f(t)},[t]);const b=function(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const O=(P==null?void 0:P.filteredValue)||p;wi(O,t)||r({filteredValue:O}),P.closeDropdown&&y(!1)},x=function(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};f([]),r({filteredValue:[]}),P.closeDropdown&&y(!1)},S=()=>{y(!1)},C=P=>{d&&y(P),l(P)},w={tempFilteredValue:p,setTempFilteredValue:f,confirm:b,clear:x,close:S},A=K(`${e}-column-filter`,{on:Array.isArray(t)&&t.length});let T;typeof n=="function"?T=n(Array.isArray(t)&&t.length>0):H.isValidElement(n)?T=n:T=k.createElement("div",{className:A},"",k.createElement(gOe,{role:"button","aria-label":"Filter data with this column","aria-haspopup":"listbox",tabIndex:-1,size:"default"}));const E=Object.assign(Object.assign(Object.assign(Object.assign({},i),s),w),{filterDropdownVisible:u?a:m,onFilterDropdownVisibleChange:C});return c=k.isValidElement(c)?c:Kee(E,T),c}var U3e=ej,W3e=4;function G3e(i){return U3e(i,W3e)}var K3e=G3e;const X3e=Xe(K3e);let fM,gM;const Y9={position:"absolute",top:"-9999px",width:"50px",height:"50px"};function Y3e(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"vertical";if(typeof document>"u"||typeof window>"u")return 0;const e=i==="vertical";if(e&&fM)return fM;if(!e&&gM)return gM;const t=document.createElement("div");Object.keys(Y9).forEach(s=>{t.style[s]=Y9[s]}),e?t.style.overflowY="scroll":t.style.overflowX="scroll",document.body.appendChild(t);let n=0;return e?(n=t.offsetWidth-t.clientWidth,fM=n):(n=t.offsetHeight-t.clientHeight,gM=n),document.body.removeChild(t),n}function Xee(i){return typeof i=="number"?i-Vn.DEFAULT_CELL_PADDING_LEFT-Vn.DEFAULT_CELL_PADDING_RIGHT-Vn.DEFAULT_CELL_BORDER_WIDTH_LEFT-Vn.DEFAULT_CELL_BORDER_WIDTH_RIGHT-Y3e("vertical"):void 0}function q9(i,e){return Q1({},{table:"table",header:{outer:"table",wrapper:"thead",row:"tr",cell:"th"},body:e?{outer:"div",wrapper:"div",row:"div",cell:"div",colgroup:{wrapper:"div",col:"div"}}:{outer:"table",wrapper:"tbody",row:"tr",cell:"td",colgroup:{wrapper:"colgroup",col:"col"}},footer:{wrapper:"tfoot",row:"tr",cell:"td"}},i)}const iv=new Nee("[@douyinfe/semi-ui Table]");function SL(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const s=[],r=n?sl:X3e;return tA(e,a=>{a=Object.assign({},a);const o=W9(a,t),l=o!=null&&uf(i,c=>W9(c,t)===o);l?s.push(r(Object.assign(Object.assign({},l),a))):s.push(r(a))}),s}function Yee(i){switch(i){case Je.SORT_DIRECTIONS[0]:return Je.SORT_DIRECTIONS[1];case Je.SORT_DIRECTIONS[1]:return"cancelSort";default:return Je.SORT_DIRECTIONS[0]}}class rN extends H.PureComponent{render(){const{prefixCls:e,onClick:t,sortOrder:n,style:s,title:r,sortIcon:a,showTooltip:o}=this.props,l="default",c=K(`${e}-column-sorter-up`,{on:n===Je.SORT_DIRECTIONS[0]}),u=K(`${e}-column-sorter-down`,{on:n===Je.SORT_DIRECTIONS[1]}),h={"aria-label":`Current sort order is ${n?`${n}ing`:"none"}`,"aria-roledescription":"Sort data with this column"},d=()=>{if(typeof a=="function")return a({sortOrder:n});{const p=k.createElement("div",{style:s,className:`${e}-column-sorter`},k.createElement("span",{className:`${c}`},k.createElement(jPe,{size:l})),k.createElement("span",{className:`${u}`},k.createElement(FPe,{size:l})));if(o){let f=Yee(n);return k.createElement(gi,{componentName:"Table"},(g,m)=>k.createElement(En,{content:g[f]},p))}return p}};return k.createElement("div",Object.assign({role:"button"},h,{tabIndex:-1,className:`${e}-column-sorter-wrapper`,onClick:t,onKeyPress:p=>jd(p)&&t(p)}),r,d())}}rN.propTypes={className:v.string,style:v.object,onClick:v.func,prefixCls:v.string,sortOrder:v.oneOfType([v.string,v.bool]),sortIcon:v.func,showTooltip:v.bool};rN.defaultProps={prefixCls:ir.PREFIX,onClick:J,sortOrder:!1,showTooltip:!1};function aN(i){const{expanded:e,componentType:t,onClick:n=J,onMouseEnter:s=J,onMouseLeave:r=J,expandIcon:a,prefixCls:o=ir.PREFIX,motion:l=!0}=i;let c;k.isValidElement(a)?c=a:typeof a=="function"?c=a(e):t==="tree"?c=e&&!l?k.createElement(YOe,{size:"small"}):k.createElement(ZOe,{size:"small"}):c=e&&!l?k.createElement(af,null):k.createElement(xd,null);const u=H.useCallback(h=>{typeof n=="function"&&n(!e,h)},[e]);if(l){const h=c;c=k.createElement(Sc,{animationState:e?"enter":"leave",startClassName:`${ir.PREFIX}-expandedIcon-${e?"show":"hide"}`},d=>{let{animationClassName:p}=d;return k.cloneElement(h,{className:(h.props.className||"")+" "+p})})}return k.createElement("span",{role:"button","aria-label":"Expand this row",tabIndex:-1,onClick:u,onMouseEnter:s,onMouseLeave:r,className:`${o}-expand-icon`,onKeyPress:h=>jd(h)&&u(h)},c)}aN.propTypes={expanded:v.bool,componentType:v.oneOf(["tree","expand"]),onClick:v.func,onMouseEnter:v.func,onMouseLeave:v.func,expandIcon:v.oneOfType([v.node,v.func]),prefixCls:v.string,motion:v.bool};aN.defaultProps={componentType:"expand",onClick:J,onMouseEnter:J,onMouseLeave:J,prefixCls:ir.PREFIX};class rP extends k.PureComponent{render(){const{columns:e,className:t,style:n,prefixCls:s,components:r}=this.props,a=ne(r,"colgroup.wrapper","colgroup"),o=ne(r,"colgroup.col","col"),l=$m(e).map((u,h)=>{const d={};return u.width&&(d.width=u.width,d.minWidth=d.width),k.createElement(o,{className:K(`${s}-col`,u.className),key:u.key||u.dataIndex||h,style:d})}),c=K(`${s}-colgroup`,t);return k.createElement(a,{className:c,style:n},l)}}rP.propTypes={columns:v.array,prefixCls:v.string,className:v.string,style:v.object,components:v.object};rP.defaultProps={columns:[],prefixCls:ir.PREFIX};var q3e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};class aP extends Ve{get adapter(){return Object.assign({},super.adapter)}constructor(e){super(e),this.cacheRef=t=>{if(this.headerNode=t,t&&this.context.setHeadWidths){const{prefixCls:n,row:s,index:r}=this.props,a=`.${n}-row-head`,o=t&&t.querySelectorAll&&t.querySelectorAll(a);this.context.setHeadWidths(tA(o,(l,c)=>{let u=ne(s,[c,"column","width"]);const h=ne(s,[c,"column","key"]);return typeof u!="number"&&(u=l&&l.getBoundingClientRect().width||0),{width:u,key:h}}),r)}},this.headerNode=null}componentDidUpdate(e){e.columns!==this.props.columns&&this.headerNode&&this.cacheRef(this.headerNode)}render(){const{components:e,row:t,prefixCls:n,onHeaderRow:s,index:r,style:a,columns:o}=this.props,{getCellWidths:l,direction:c}=this.context,u=c==="rtl",h=Hee(o,r),d=l(h),p=ne(e,"header.row","tr"),f=ne(e,"header.cell","th"),g=s(o,r)||{};nc(g,"className",K(ne(g,"className"),`${n}-row`));const m=tA(t,(y,b)=>{const{column:x}=y,S=q3e(y,["column"]),C=typeof x.onHeaderCell=="function"?x.onHeaderCell(x,b,r):{};let w=Object.assign({},C.style);if(x.align){const I=Wee(x.align,c);w=Object.assign(Object.assign({},w),{textAlign:I}),C.className=K(C.className,x.className,{[`${n}-align-${I}`]:!!I})}let A,T,E,P;if(u?(A=qC(x),T=YC(x),E=xL(h,x),P=bL(h,x)):(A=YC(x),T=qC(x),E=bL(h,x),P=xL(h,x)),C.className=K(`${n}-row-head`,x.className,C.className,{[`${n}-cell-fixed-left`]:A,[`${n}-cell-fixed-left-last`]:E,[`${n}-cell-fixed-right`]:T,[`${n}-cell-fixed-right-first`]:P,[`${n}-row-head-ellipsis`]:x.ellipsis,[`${n}-row-head-clickSort`]:x.clickToSort}),d.length&&h.length){const I=cy(h,D=>D&&D.key!=null&&D.key===x.key);if(I>-1){if(YC(x)){const D=u?"right":"left";w=Object.assign(Object.assign({},w),{position:"sticky",[D]:dy(d,0,I)})}else if(qC(x)){const D=u?"left":"right";w=Object.assign(Object.assign({},w),{position:"sticky",[D]:dy(d,I+1)})}}}Object.assign(S,{resize:x.resize});const O=_n(Object.assign(Object.assign({},S),C),["colStart","colEnd","hasSubColumns","parents","level"]),{rowSpan:M,colSpan:R}=O;if(M===0||R===0)return null;typeof x.clickToSort=="function"&&(O.onClick?O.onClick=I=>{O.onClick(I),x.clickToSort(I)}:O.onClick=x.clickToSort);const j=k.createElement(f,Object.assign({role:"columnheader","aria-colindex":b+1},O,{style:w,key:x.key||x.dataIndex||b}));if(typeof x.clickToSort=="function"&&x.showSortTip===!0){let I=Yee(x.sortOrder);return k.createElement(gi,{componentName:"Table",key:x.key||x.dataIndex||b},(D,z)=>k.createElement(En,{content:D[I]},j))}return j});return k.createElement(p,Object.assign({role:"row","aria-rowindex":r+1},g,{style:a,ref:this.cacheRef}),m)}}aP.contextType=Wf;aP.propTypes={components:v.object,row:v.array,prefixCls:v.string,onHeaderRow:v.func,index:v.oneOfType([v.string,v.number]),style:v.object,columns:v.array,fixed:v.oneOfType([v.bool,v.string]),selectedRowKeysSet:v.instanceOf(Set).isRequired};aP.defaultProps={onHeaderRow:J,prefixCls:ir.PREFIX,columns:[],components:{header:{wrapper:"thead",row:"tr",cell:"th"}}};function Z3e(i){const e=[];function t(s,r){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;e[o]=e[o]||[];let c=r;return s.map(h=>{const d={key:h.key,className:h.className||"",children:xt(h.title)?h.title():h.title,column:h,colStart:c,level:l,parents:a};let p=1;const f=h.children;f&&f.length>0&&(p=t(f,c,[...a,d],o+1,l+1).reduce((y,b)=>y+b,0),d.hasSubColumns=!0),"colSpan"in h&&({colSpan:p}=h),"rowSpan"in h&&(d.rowSpan=h.rowSpan),h.key===Je.DEFAULT_KEY_COLUMN_SCROLLBAR&&(d["x-type"]=Je.DEFAULT_KEY_COLUMN_SCROLLBAR),d.colSpan=p,d.colEnd=d.colStart+p-1,e[o].push(d),c+=p;const g=h==null?void 0:h.ellipsis;return nN(g)&&typeof d.children=="string"&&(d.title=d.children),p})}t(i,0);const n=e.length;for(let s=0;s<n;s+=1)e[s].forEach(r=>{!("rowSpan"in r)&&!r.hasSubColumns&&(r.rowSpan=n-s)});return e}class oN extends Ve{get adapter(){return Object.assign({},super.adapter)}render(){const{components:e,columns:t,prefixCls:n,fixed:s,onHeaderRow:r,forwardedRef:a,selectedRowKeysSet:o}=this.props,l=Z3e(t),c=e.header.wrapper;return k.createElement(c,{className:`${n}-thead`,ref:a},l.map((u,h)=>k.createElement(aP,{prefixCls:n,key:h,index:h,fixed:s,columns:t,row:u,components:e,onHeaderRow:r,selectedRowKeysSet:o})))}}oN.propTypes={components:v.any,columns:v.array,columnManager:v.object,prefixCls:v.string,onHeaderRow:v.func,onDidUpdate:v.func,fixed:v.oneOfType([v.bool,v.string]),selectedRowKeysSet:v.instanceOf(Set).isRequired};oN.defaultProps={columns:[],prefixCls:ir.PREFIX,onHeaderRow:J,onDidUpdate:J,components:{header:{wrapper:"thead",row:"tr",cell:"th"}}};const qee=k.forwardRef((i,e)=>k.createElement(oN,Object.assign({},i,{forwardedRef:e})));class lN extends k.PureComponent{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{selectedRowKeysSet:new Set};super(e)}render(){const{scroll:e,prefixCls:t,fixed:n,forwardedRef:s,handleBodyScroll:r,columns:a,components:o,onDidUpdate:l,showHeader:c,tableLayout:u,bodyHasScrollBar:h,sticky:d}=this.props,p=ne(o,"header.outer","table"),f=ne(e,"x"),g={},m={};f&&!n&&(m.width=f),h&&(g.overflowY="scroll");const y=k.createElement(rP,{columns:a,prefixCls:t}),b=k.createElement(qee,Object.assign({},this.props,{columns:a,components:o,onDidUpdate:l})),x=K(`${t}-header`,{[`${t}-header-sticky`]:d,[`${t}-header-hidden`]:!c}),S=ne(d,"top",0);return typeof S=="number"&&(g.top=S),k.createElement("div",{key:"headTable",style:g,className:x,ref:s,onScroll:r},k.createElement(p,{style:m,className:K(t,{[`${t}-fixed`]:u==="fixed"})},y,b))}}lN.propTypes={tableLayout:v.string,bodyHasScrollBar:v.bool,columns:v.array,components:v.object,dataSource:v.array,fixed:v.oneOfType([v.bool,v.string]),handleBodyScroll:v.func,prefixCls:v.string,forwardedRef:v.oneOfType([v.object,v.func]),scroll:v.shape({x:v.oneOfType([v.number,v.string,v.bool]),y:v.oneOfType([v.number,v.string])}),selectedRowKeysSet:v.instanceOf(Set).isRequired,showHeader:v.bool,onDidUpdate:v.func,onHeaderRow:v.func};lN.defaultProps={handleBodyScroll:J};const J3e=k.forwardRef((i,e)=>k.createElement(lN,Object.assign({},i,{forwardedRef:e})));var Q3e=yee,eje=Q3e("length"),tje=eje,ije="\\ud800-\\udfff",nje="\\u0300-\\u036f",sje="\\ufe20-\\ufe2f",rje="\\u20d0-\\u20ff",aje=nje+sje+rje,oje="\\ufe0e\\ufe0f",lje="\\u200d",cje=RegExp("["+lje+ije+aje+oje+"]");function uje(i){return cje.test(i)}var cN=uje,Zee="\\ud800-\\udfff",hje="\\u0300-\\u036f",dje="\\ufe20-\\ufe2f",pje="\\u20d0-\\u20ff",fje=hje+dje+pje,gje="\\ufe0e\\ufe0f",mje="["+Zee+"]",CL="["+fje+"]",wL="\\ud83c[\\udffb-\\udfff]",yje="(?:"+CL+"|"+wL+")",Jee="[^"+Zee+"]",Qee="(?:\\ud83c[\\udde6-\\uddff]){2}",ete="[\\ud800-\\udbff][\\udc00-\\udfff]",_je="\\u200d",tte=yje+"?",ite="["+gje+"]?",vje="(?:"+_je+"(?:"+[Jee,Qee,ete].join("|")+")"+ite+tte+")*",bje=ite+tte+vje,xje="(?:"+[Jee+CL+"?",CL,Qee,ete,mje].join("|")+")",Z9=RegExp(wL+"(?="+wL+")|"+xje+bje,"g");function Sje(i){for(var e=Z9.lastIndex=0;Z9.test(i);)++e;return e}var Cje=Sje,wje=tje,Aje=cN,kje=Cje;function Tje(i){return Aje(i)?kje(i):wje(i)}var Eje=Tje,Pje=Z3,Oje=o0,Mje=Ic,Ije=H3,Rje=Eje,Lje="[object Map]",Dje="[object Set]";function Fje(i){if(i==null)return 0;if(Mje(i))return Ije(i)?Rje(i):i.length;var e=Oje(i);return e==Lje||e==Dje?i.size:Pje(i).length}var Bje=Fje;const TS=Xe(Bje);var jje=Sj,Nje=p0,$je=h0,zje=Math.max,Hje=Math.min;function Vje(i,e,t){var n=i==null?0:i.length;if(!n)return-1;var s=n-1;return t!==void 0&&(s=$je(t),s=t<0?zje(n+s,0):Hje(s,n-1)),jje(i,Nje(e),s,!0)}var Uje=Vje;const Wje=Xe(Uje);class Gje extends tt{init(){this.initVirtualizedData(),this.initExpandBtnShouldInRow()}destroy(){this.unobserveBodyResize()}initVirtualizedData(e){this._adapter.setVirtualizedData(this.flattenData(this.getProp("dataSource")),e)}initExpandBtnShouldInRow(e){const t=this.getProps(),n=f3e(t);this._adapter.setCachedExpandBtnShouldInRow(n),!As(e)&&!e&&(e=Je.EXPAND_RELATED_PROPS.map(r=>ne(t,r,void 0))),this._adapter.setCachedExpandRelatedProps(e)}flattenData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];const r=[],{rowKey:a,childrenRecordName:o,expandedRowRender:l,expandedRowKeys:c,groups:u}=this.getProps();return t===0&&Sb(u)?u.forEach((h,d)=>{const p=e.findIndex(f=>h.has(Eh(f,a)));if(p>-1){const f=Wje(e,m=>h.has(Eh(m,a))),g=Qw(c,d);r.push({key:d,level:t,sectionRow:!0,group:h,groupKey:d,expanded:g}),g&&r.push(...this.flattenData(e.slice(p,f+1),t+1,[...n],[...s]))}}):e.forEach((h,d)=>{const p=Eh(h,a),f=d3e(h,o);t&&s.push(p);const g={key:p,record:h,level:t,parentKeys:[...n],childrenKeys:[...s]};r.push(g);const m=[];Qw(c,p)&&(Array.isArray(f)&&f.length?m.push(...this.flattenData(f,t+1,[...g.parentKeys],[...g.childrenKeys])):l&&m.push({key:zee(p),level:t,expandedRow:!0,record:h}),r.push(...m))}),r}observeBodyResize(e){const{scroll:t}=this.getProps();if(ne(t,"y"))return this._adapter.observeBodyResize(e)}unobserveBodyResize(){return this._adapter.unobserveBodyResize()}}function Kje(){return!0}var Xje=Kje;const Yje=Xe(Xje);function qje(i,e){if(i===e)return!0;if(!i||!e)return!1;const t=Object.keys(i),n=Object.keys(e),s=t.length;if(n.length!==s)return!1;for(let r=0;r<s;r++){const a=t[r];if(i[a]!==e[a]||!Object.prototype.hasOwnProperty.call(e,a))return!1}return!0}class Zje extends tt{handleClick(e){const{expanded:t,rowKey:n}=this.getProps();this._adapter.notifyClick(n,e,t)}handleDoubleClick(e){this._adapter.notifyDoubleClick(this.getProp("record"),e)}handleMouseEnter(e){const t=this.getProp("record");this._adapter.notifyMouseEnter(t,e)}handleMouseLeave(e){const t=this.getProp("record");this._adapter.notifyMouseLeave(t,e)}}class Jje extends tt{handleClick(e){this._adapter.notifyClick(this.getProp("record"),e)}}function J9(i){return i&&!k.isValidElement(i)&&Object.prototype.toString.call(i)==="[object Object]"}class Ob extends Ve{get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{notifyClick:function(){const{onClick:t}=e.props;typeof t=="function"&&t(...arguments)}})}constructor(e){super(e),this.setRef=t=>this.ref=t,this.handleClick=t=>{this.foundation.handleClick(t);const n=this.adapter.getCache("customCellProps");n&&typeof n.onClick=="function"&&n.onClick(t)},this.ref=H.createRef(),this.foundation=new Jje(this.adapter)}shouldComponentUpdate(e){const t=this.props,{column:n,expandIcon:s}=t,r=c3e(n),a=$ee(n)||s;if((r||a)&&!wi(e,this.props))return!0;{const o=["selected","expanded","expandIcon","disabled"],l=_n(t,o),c=_n(e,o);if(!wi(c,l))return!0}return!1}componentDidUpdate(){this.props.onDidUpdate(this.ref)}getTdProps(){const{record:e,index:t,column:n={},fixedLeft:s,fixedRight:r,width:a,height:o}=this.props;let l={},c={};const{direction:u}=this.context,h=u==="rtl";if(s||typeof s=="number"?nc(l,h?"style.right":"style.left",typeof s=="number"?s:0):(r||typeof r=="number")&&nc(l,h?"style.left":"style.right",typeof r=="number"?r:0),a!=null&&nc(l,"style.width",a),o!=null&&nc(l,"style.height",o),n.onCell){c=n.onCell(e,t),this.adapter.setCache("customCellProps",Object.assign({},c)),l=Object.assign(Object.assign({},l),_n(c,["style","className","onClick"]));const f=ne(c,"style")||{};l.style=Object.assign(Object.assign({},l.style),f)}if(n.align){const f=Wee(n.align,u),g=_3e(n.align,u);l.style=Object.assign(Object.assign({},l.style),{textAlign:f,justifyContent:g})}return{tdProps:l,customCellProps:c}}renderText(e){const{record:t,indentSize:n,prefixCls:s,indent:r,index:a,expandIcon:o,renderExpandIcon:l,column:c={}}=this.props,{dataIndex:u,render:h,useFullRender:d}=c;let p,f,g;typeof u=="number"?p=ne(t,u):!u||u.length===0?p=t:p=ne(t,u);const m=r&&n?k.createElement("span",{style:{paddingLeft:`${n*r}px`},className:`${s}-row-indent indent-level-${r}`}):null,y=typeof l=="function"?l(t):o;if(h){const b={expandIcon:y};if(d){const{renderSelection:x}=this.context,S=typeof x=="function"?x(t):null;Object.assign(b,{selection:S,indentText:m})}p=h(p,t,a,b),J9(p)&&(e=p.props?Q1(e,p.props):e,f=e.colSpan,g=e.rowSpan,p=p.children)}return{text:p,indentText:m,rowSpan:g,colSpan:f,realExpandIcon:y,tdProps:e}}renderInner(e,t,n){const{prefixCls:s,isSection:r,expandIcon:a,column:o={}}=this.props,{tableWidth:l,anyColumnFixed:c}=this.context,{useFullRender:u}=o;let h=null;return u?h=e:h=[k.createElement(H.Fragment,{key:"indentText"},t),k.createElement(H.Fragment,{key:"expandIcon"},a?n:null),k.createElement(H.Fragment,{key:"text"},e)],r&&(h=k.createElement("div",{className:K(`${s}-section-inner`),style:{width:c?Xee(l):void 0}},h)),h}render(){const{prefixCls:e,column:t={},component:n,fixedLeft:s,fixedRight:r,lastFixedLeft:a,firstFixedRight:o,colIndex:l}=this.props,{direction:c}=this.context,u=c==="rtl",{className:h,ellipsis:d}=t,p=s||typeof s=="number",f=r||typeof r=="number",{tdProps:g,customCellProps:m}=this.getTdProps(),y=this.renderText(g);let{text:b}=y;const{indentText:x,rowSpan:S,colSpan:C,realExpandIcon:w,tdProps:A}=y;let T;if(nN(d)&&typeof b=="string"&&(T=b),S===0||C===0)return null;J9(b)&&(b=null);const P=this.renderInner(b,x,w);let O,M,R,j;u?(O=f,M=o,R=p,j=a):(O=p,M=a,R=f,j=o);const I=K(h,`${e}-row-cell`,ne(m,"className"),{[`${e}-cell-fixed-left`]:O,[`${e}-cell-fixed-left-last`]:M,[`${e}-cell-fixed-right`]:R,[`${e}-cell-fixed-right-first`]:j,[`${e}-row-cell-ellipsis`]:d});return k.createElement(n,Object.assign({role:"gridcell","aria-colindex":l+1,className:I,onClick:this.handleClick,title:T},A,{ref:this.setRef}),P)}}Ob.contextType=Wf;Ob.defaultProps={indent:0,indentSize:Vn.DEFAULT_INDENT_WIDTH,onClick:J,prefixCls:ir.PREFIX,component:"td",onDidUpdate:J,column:{}};Ob.propTypes={record:v.object,prefixCls:v.string,index:v.number,fixedLeft:v.oneOfType([v.bool,v.number]),lastFixedLeft:v.bool,fixedRight:v.oneOfType([v.bool,v.number]),firstFixedRight:v.bool,indent:v.number,indentSize:v.number,column:v.object,expandIcon:v.any,renderExpandIcon:v.func,hideExpandedColumn:v.bool,component:v.any,onClick:v.func,onDidUpdate:v.func,isSection:v.bool,width:v.oneOfType([v.string,v.number]),height:v.oneOfType([v.string,v.number]),selected:v.bool,expanded:v.bool,colIndex:v.number};var Q9=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const nte={anyColumnFixed:v.bool,cellWidths:v.array.isRequired,className:v.string,columns:v.array.isRequired,components:v.object.isRequired,disabled:v.bool,expandIcon:v.oneOfType([v.bool,v.func,v.node]),expandableRow:v.bool,expanded:v.bool,displayNone:v.bool,expandedRow:v.bool,fixed:v.oneOfType([v.string,v.bool]),height:v.oneOfType([v.string,v.number]),hideExpandedColumn:v.bool,hovered:v.bool.isRequired,indent:v.number,indentSize:v.number,index:v.number,isSection:v.bool,level:v.number,onDidUpdate:v.func,onHover:v.func,onRow:v.func,onRowClick:v.func,onRowContextMenu:v.func,onRowDoubleClick:v.func,onRowMouseEnter:v.func,onRowMouseLeave:v.func,prefixCls:v.string,record:v.object,renderExpandIcon:v.func,replaceClassName:v.string,rowExpandable:v.func,rowKey:v.oneOfType([v.string,v.number]).isRequired,selected:v.bool,store:v.object,style:v.object,virtualized:v.oneOfType([v.object,v.bool]),visible:v.bool.isRequired};class px extends Ve{get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{notifyClick:function(){return e.props.onRowClick(...arguments)},notifyDoubleClick:function(){return e.props.onRowDoubleClick(...arguments)},notifyMouseLeave:function(){e.props.onHover(!1,e.props.rowKey),e.props.onRowMouseEnter(...arguments)},notifyMouseEnter:function(){e.props.onHover(!0,e.props.rowKey),e.props.onRowMouseEnter(...arguments)}})}constructor(e){super(e),this.renderExpandIcon=t=>{const{renderExpandIcon:n}=this.props;return n(t,!0)},this.handleMouseEnter=t=>{this.foundation.handleMouseEnter(t);const n=this.adapter.getCache("customRowProps");typeof(n==null?void 0:n.onMouseEnter)=="function"&&n.onMouseEnter(t)},this.handleMouseLeave=t=>{this.foundation.handleMouseLeave(t);const n=this.adapter.getCache("customRowProps");typeof(n==null?void 0:n.onMouseLeave)=="function"&&n.onMouseLeave(t)},this.handleClick=t=>{this.foundation.handleClick(t);const n=this.adapter.getCache("customRowProps");n&&typeof n.onClick=="function"&&n.onClick(t)},this.foundation=new Zje(this.adapter)}componentDidMount(){const{onRow:e,index:t,record:n}=this.props;if(typeof this.adapter.getCache("customRowProps")>"u"){const r=e(n,t)||{},a=Q9(r,["className","style"]);this.adapter.setCache("customRowProps",Object.assign({},a))}}shouldComponentUpdate(e){const t=["cellWidths"];return!qje(_n(e,t),_n(this.props,t))||!wi(lf(e,t),lf(this.props,t))}renderCells(){const{columns:e,record:t,index:n,prefixCls:s,fixed:r,components:a,expandableRow:o,level:l,expandIcon:c,rowExpandable:u,isSection:h,expandedRow:d,virtualized:p,indentSize:f,hideExpandedColumn:g,cellWidths:m,selected:y,expanded:b,disabled:x,onDidUpdate:S}=this.props,C=ne(a,"body.cell",Je.DEFAULT_COMPONENTS.body.cell),w=[],A=u(t);let T=0;return ws(e,(E,P)=>{const O=ne(E,"key"),M={};if(r!=="right"&&(o3e(O)&&T++,o&&P===T&&(M.renderExpandIcon=this.renderExpandIcon,(g||h)&&(M.expandIcon=c??!0)),l!=null&&P===T&&(M.indent=l,!o&&g&&(c!==!1||!(typeof c=="boolean")&&c!==null)&&(M.indent=l+1))),$ee(E)&&!A)w.push(k.createElement(Ob,{key:P,colIndex:P,isSection:h}));else if(!l3e(E)){const R={};C!==Je.DEFAULT_COMPONENTS.body.cell&&p&&!d&&(R.width=ne(m,P)),w.push(k.createElement(Ob,Object.assign({colIndex:P},M,R,{hideExpandedColumn:g,indentSize:f,isSection:h,prefixCls:`${s}`,column:E,key:P,index:n,record:t,component:C,fixedLeft:YC(E)&&dy(m,0,P),lastFixedLeft:bL(e,E),fixedRight:qC(E)&&dy(m,P+1),firstFixedRight:xL(e,E),selected:y,expanded:b,disabled:x,onDidUpdate:S})))}}),w}render(){const{style:e}=this.props,{components:t,prefixCls:n,selected:s,onRow:r,index:a,className:o,replaceClassName:l,record:c,hovered:u,expanded:h,displayNone:d,expandableRow:p,level:f,expandedRow:g,isSection:m,rowKey:y}=this.props,b=t.body.row,x=r(c,a)||{},{className:S,style:C}=x,w=Q9(x,["className","style"]);this.adapter.setCache("customRowProps",Object.assign({},w));const A=Object.assign(Object.assign({},e),C),T=typeof l=="string"&&l.length?K(l,S):K(o,`${n}-row`,{[`${n}-row-selected`]:s,[`${n}-row-expanded`]:h,[`${n}-row-hovered`]:u,[`${n}-row-hidden`]:d},S),E={};return typeof a=="number"&&(E["aria-rowindex"]=a+1),p&&(E["aria-expanded"]=h),(h||g)&&(E["aria-level"]=2),typeof f=="number"&&(E["aria-level"]=f+1),m&&(E["aria-level"]=1),k.createElement(b,Object.assign({role:"row"},E,w,{style:A,className:T,"data-row-key":y,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:this.handleClick}),this.renderCells())}}px.propTypes=nte;px.defaultProps={columns:[],rowExpandable:Yje,components:{body:{row:"tr",cell:"td"}},prefixCls:ir.PREFIX,onRow:J,onRowClick:J,onRowDoubleClick:J,onRowMouseEnter:J,onRowMouseLeave:J,onHover:J,onDidUpdate:J,visible:!0,hovered:!1,selected:!1,disabled:!1};var Qje=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};class oP extends H.PureComponent{render(){const{record:e,columns:t=[],prefixCls:n,className:s,expanded:r,expandedRowRender:a,renderExpandIcon:o,index:l,store:c,components:u,style:h,virtualized:d,indentSize:p,cellWidths:f,displayNone:g}=this.props,{tableWidth:m,anyColumnFixed:y,getCellWidths:b}=this.context,x=a(e,l,r);let S=null;const C={};let w={};if(z3(x))return null;if(H.isValidElement(x))S=x;else if(x&&Object.prototype.toString.call(x)==="[object Object]"){const P=x,{children:O,fixed:M}=P,R=Qje(P,["children","fixed"]);S=O,w=Object.assign({},R)}ne(u,"body.cell")!==Je.DEFAULT_COMPONENTS.body.cell?(d&&nc(C,"style.height","100%"),nc(C,"style.display","block"),nc(C,"style.width",dy(f,0,t.length))):C.colSpan=iN(t).length;const A=[Object.assign({render:()=>({props:C,children:k.createElement("div",{className:K(`${n}-expand-inner`),style:{width:y?Xee(m):void 0}},S)})},w)],T=K(s,`${n}-row-expand`),E=b(A);return k.createElement(px,{style:h,components:u,className:T,expandedRow:!0,renderExpandIcon:o,rowKey:`${e.key}-expanded-row`,columns:A,store:c,virtualized:d,indentSize:p,cellWidths:E,displayNone:g})}}oP.contextType=Wf;oP.propTypes={cellWidths:v.array.isRequired,className:v.string,columns:v.array,components:v.object,defaultExpandAllRows:v.bool,defaultExpandedRowKeys:v.array,expandIcon:v.oneOfType([v.object,v.node,v.func]),expandRowByClick:v.bool,expanded:v.bool,expandedRowKeys:v.array,expandedRowRender:v.func,indentSize:v.number,index:v.oneOfType([v.string,v.number]),onExpand:v.func,onExpandedRowsChange:v.func,prefixCls:v.string,record:v.object,renderExpandIcon:v.func,store:v.object,style:v.object,virtualized:v.oneOfType([v.bool,v.object])};oP.defaultProps={record:{},prefixCls:ir.PREFIX};var eNe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const ste={record:v.object,index:v.number,columns:v.array,group:v.object.isRequired,groupKey:v.oneOfType([v.string,v.number]).isRequired,data:v.array,renderGroupSection:v.func,onGroupedRow:v.func,clickGroupedRowToExpand:v.bool,components:v.object,expanded:v.bool,prefixCls:v.string,onExpand:v.func,virtualized:v.oneOfType([v.bool,v.object]),style:v.object,renderExpandIcon:v.func,className:v.string,store:v.object,rowKey:v.oneOfType([v.string,v.number,v.func])};class lP extends H.PureComponent{constructor(){var e;super(...arguments),e=this,this.onRow=function(){const{onGroupedRow:t,clickGroupedRowToExpand:n,onExpand:s,groupKey:r,expanded:a}=e.props,o={};return typeof t=="function"&&Object.assign(o,t(...arguments)),Object.assign(Object.assign({},o),{onClick:l=>{typeof s=="function"&&n&&s(!a,r,l),typeof o.onClick=="function"&&o.onClick(l)}})},this.collectGroupedData=()=>{const{data:t,group:n,rowKey:s}=this.props;return Array.isArray(t)&&t.length&&vh(n)?t.filter(r=>{const a=typeof s=="function"?s(r):ne(r,s);return a!=null&&a!==""&&n.has(a)}):[]},this.renderExpandIcon=t=>{const{renderExpandIcon:n,groupKey:s}=this.props;return typeof n=="function"?n(t,!1,s):null}}isInnerColumnKey(e){return e!=null?[Je.DEFAULT_KEY_COLUMN_EXPAND,Je.DEFAULT_KEY_COLUMN_SELECTION].includes(e):!1}render(){const{record:e,columns:t=[],prefixCls:n,className:s,expanded:r,renderGroupSection:a,components:o,index:l,store:c,group:u,groupKey:h,virtualized:d,style:p}=this.props,f={};let g={},m=null;const y=typeof a=="function"?a(h,[...u]):null;if(H.isValidElement(y))m=y;else if(y&&Object.prototype.toString.call(y)==="[object Object]"){const w=y,{children:A}=w,T=eNe(w,["children"]);m=A,g=Object.assign({},T)}f.colSpan=iN(t).length;const b=[Object.assign({render:()=>({props:f,children:m})},g)],x=K(s,`${n}-row-section`,{on:r}),{getCellWidths:S}=this.context,C=S(b,null,!0);return k.createElement(px,{components:o,virtualized:d,index:l,onRow:this.onRow,expanded:r,expandIcon:!0,isSection:!0,record:e,replaceClassName:x,expandableRow:!0,renderExpandIcon:this.renderExpandIcon,rowKey:h,columns:b,store:c,style:p,cellWidths:C})}}lP.contextType=Wf;lP.propTypes=ste;lP.defaultProps={prefixCls:ir.PREFIX,components:{body:{row:"tr",cell:"td"}}};var eH=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};class uN extends Ve{constructor(e,t){var n;super(e),n=this,this.forwardRef=a=>{const{forwardedRef:o}=this.props;this.ref.current=a,this.foundation.observeBodyResize(a),typeof o=="function"?o(a):o&&typeof o=="object"&&(o.current=a)},this.setListRef=a=>{this.listRef.current=a;const{getVirtualizedListRef:o}=this.context;o&&(this.props.virtualized?o(this.listRef):console.warn("getVirtualizedListRef only works with virtualized. See https://semi.design/en-US/show/table for more information."))},this.itemSize=a=>{const{virtualized:o,size:l}=this.props,{virtualizedData:c}=this.state,u=ne(c,a),h=p3e(l,u.sectionRow),d=ne(o,"itemSize",h.height);let p=d;return typeof d=="function"&&(p=d(a,{expandedRow:ne(u,"expandedRow",!1),sectionRow:ne(u,"sectionRow",!1)})),p<h.minHeight&&iv.warn(`The computed real \`itemSize\` cannot be less than ${h.minHeight}`),p},this.itemKey=(a,o)=>ne(o,[a,"key"],a),this.handleRowClick=(a,o,l)=>{const{handleRowExpanded:c}=this.context;c(!l,a,o)},this.handleVirtualizedScroll=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const o=ne(n.props.virtualized,"onScroll");typeof o=="function"&&o(a)},this.handleVirtualizedBodyScroll=a=>{const{handleBodyScroll:o}=this.props,l=ne(a,"nativeEvent.target.scrollLeft"),c=ne(a,"nativeEvent.target.scrollTop");c===this.state.cache.virtualizedScrollTop&&this.handleVirtualizedScroll({horizontalScrolling:!0}),this.state.cache.virtualizedScrollLeft=l,this.state.cache.virtualizedScrollTop=c,typeof o=="function"&&o(a)},this.getVirtualizedRowWidth=()=>{const{getCellWidths:a}=this.context,{columns:o}=this.props,l=a(o);return dy(l,0,TS(o))},this.renderVirtualizedRow=a=>{const{index:o,style:l}=a,{virtualizedData:c,cachedExpandBtnShouldInRow:u}=this.state,{flattenedColumns:h}=this.context,d=ne(c,[o],{}),{key:p,parentKeys:f,expandedRow:g,sectionRow:m}=d,y=eH(d,["key","parentKeys","expandedRow","sectionRow"]),b=this.getVirtualizedRowWidth(),x=u,S=Object.assign(Object.assign(Object.assign(Object.assign({},this.props),{style:Object.assign(Object.assign({},l),{width:b})}),y),{columns:h,index:o,expandBtnShouldInRow:x});return m?this.renderSectionRow(S):g?this.renderExpandedRow(S):this.renderBaseRow(S)},this.renderTbody=k.forwardRef(function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return k.createElement("div",Object.assign({},a,{onScroll:function(){a.onScroll&&a.onScroll(...arguments)},className:K(a.className,`${n.props.prefixCls}-tbody`),style:Object.assign({},a.style),ref:o}))}),this.renderOuter=k.forwardRef((a,o)=>{const{children:l}=a,c=eH(a,["children"]),{handleWheel:u,prefixCls:h,emptySlot:d,dataSource:p}=this.props,f=this.getVirtualizedRowWidth(),g=K(`${h}`,`${h}-fixed`);return k.createElement("div",Object.assign({},c,{ref:o,onWheel:function(){u&&u(...arguments),c.onWheel&&c.onWheel(...arguments)},onScroll:function(){n.handleVirtualizedBodyScroll(...arguments),c.onScroll&&c.onScroll(...arguments)}}),k.createElement("div",{style:{width:f},className:g},l),TS(p)===0&&d)}),this.onItemsRendered=a=>{this.state.cache.virtualizedScrollLeft&&this.ref.current&&(this.ref.current.scrollLeft=this.state.cache.virtualizedScrollLeft)},this.renderVirtualizedBody=a=>{const{scroll:o,prefixCls:l,virtualized:c,columns:u}=this.props,{virtualizedData:h}=this.state,{getCellWidths:d}=this.context,p=d(u);if(!TS(p))return null;const f=ne(o,"y"),g=typeof f=="number",m=g?f:600;g||iv.warn('You have to specific "scroll.y" which must be a number for table virtualization!');const y={width:"100%",height:h!=null&&h.length?m:null,overflowX:"auto",overflowY:"auto"},b=K(`${l}-body`);return k.createElement(pRe,Object.assign({},typeof c=="object"?c:{},{initialScrollOffset:this.state.cache.virtualizedScrollTop,onScroll:this.handleVirtualizedScroll,onItemsRendered:this.onItemsRendered,ref:this.setListRef,className:b,outerRef:this.forwardRef,height:h!=null&&h.length?m:0,width:y.width,itemData:h,itemSize:this.itemSize,itemCount:h.length,itemKey:this.itemKey,innerElementType:this.renderTbody,outerElementType:this.renderOuter,style:Object.assign(Object.assign({},y),{direction:a}),direction:a}),this.renderVirtualizedRow)},this.renderSectionRow=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{groupKey:void 0};const{dataSource:o,rowKey:l,group:c,groupKey:u,index:h}=a,d=Object.keys(ste),p=lf(a,d),{handleRowExpanded:f}=n.context;return k.createElement(lP,Object.assign({},p,{record:{groupKey:u,records:[...c].map(g=>G9(o,g,l))},index:h,onExpand:f,data:o,key:u||h}))},this.renderExpandedRow=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{renderExpandIcon:()=>null};const{style:o,components:l,renderExpandIcon:c,expandedRowRender:u,record:h,columns:d,expanded:p,index:f,rowKey:g,virtualized:m,displayNone:y}=a;let b=Eh(h,g);b==null&&(b=f);const{flattenedColumns:x,getCellWidths:S}=n.context;return x!==n.flattenedColumns&&(n.flattenedColumns=x,n.cellWidths=S(x)),k.createElement(oP,{style:o,components:l,renderExpandIcon:c,expandedRowRender:u,record:h,columns:d,expanded:p,index:f,virtualized:m,key:zee(b),cellWidths:n.cellWidths,displayNone:y})},this.renderGroupedRows=()=>{const{groups:a,dataSource:o,rowKey:l,expandedRowKeys:c,keepDOM:u}=this.props,{flattenedColumns:h}=this.context,d=new Map,p=[];a!=null&&Array.isArray(o)&&o.length&&o.forEach(g=>{const m=Eh(g,l);a.forEach((y,b)=>{if(y.has(m))return d.has(b)||d.set(b,new Set([])),d.get(b).add(m),!1})});let f=-1;return d.forEach((g,m)=>{const y=pM(c,m);if(p.push(this.renderSectionRow(Object.assign(Object.assign({},this.props),{columns:h,index:++f,group:g,groupKey:m,expanded:y}))),y||u){const b=[];g.forEach(x=>{const S=G9(o,x,l);S!=null&&b.push(S)}),p.push(this.renderBodyRows(b,void 0,[],!y))}}),p},this.renderBody=a=>{const{scroll:o,prefixCls:l,columns:c,components:u,fixed:h,handleWheel:d,headerRef:p,handleBodyScroll:f,anyColumnFixed:g,showHeader:m,emptySlot:y,includeHeader:b,dataSource:x,onScroll:S,groups:C,expandedRowRender:w,tableLayout:A}=this.props,T=ne(o,"x"),E=ne(o,"y"),P={},O={},M=ne(u,"body.outer","table"),R=ne(u,"body.wrapper")||"tbody";E&&(P.maxHeight=E),T&&(O.width=T),g&&TS(x)&&(P.overflow="auto",P.WebkitTransform="translate3d (0, 0, 0)");const j=k.createElement(rP,{components:ne(u,"body"),columns:c,prefixCls:l}),I=`${l}-body`,D=k.createElement("div",{key:"bodyTable",className:I,style:P,ref:this.forwardRef,onWheel:d,onScroll:f},k.createElement(M,{role:Sb(C)||xt(w)||y3e({dataSource:x})?"treegrid":"grid","aria-rowcount":x&&x.length,"aria-colcount":c&&c.length,style:O,className:K(l,{[`${l}-fixed`]:A==="fixed"})},j,b&&m?k.createElement(qee,Object.assign({},this.props,{ref:p,components:u,columns:c})):null,k.createElement(R,{className:`${l}-tbody`,onScroll:S},Sb(C)?this.renderGroupedRows():this.renderBodyRows(x))),y);return h&&c.length?k.createElement("div",{key:"bodyTable",className:`${l}-body-outer`},D):D},this.ref=k.createRef(),this.state={virtualizedData:[],cache:{virtualizedScrollTop:null,virtualizedScrollLeft:null},cachedExpandBtnShouldInRow:null,cachedExpandRelatedProps:[]},this.listRef=k.createRef();const{flattenedColumns:s,getCellWidths:r}=t;this.foundation=new Gje(this.adapter),this.flattenedColumns=s,this.cellWidths=r(s),this.observer=null}get adapter(){return Object.assign(Object.assign({},super.adapter),{setVirtualizedData:(e,t)=>this.setState({virtualizedData:e},t),setCachedExpandBtnShouldInRow:e=>this.setState({cachedExpandBtnShouldInRow:e}),setCachedExpandRelatedProps:e=>this.setState({cachedExpandRelatedProps:e}),observeBodyResize:e=>{const{setBodyHasScrollbar:t}=this.context,n=()=>{const s=()=>{const{offsetWidth:a,clientWidth:o}=e,l=o<a;t(l)};(window.requestAnimationFrame||window.setTimeout)(s)};e&&(ne(window,"ResizeObserver")?(this.observer&&(this.observer.unobserve(e),this.observer=null),this.observer=new ResizeObserver(n),this.observer.observe(e)):iv.warn("The current browser does not support ResizeObserver,and the table may be misaligned after plugging and unplugging the mouse and keyboard.You can try to refresh it."))},unobserveBodyResize:()=>{const e=this.ref.current;this.observer&&(this.observer.unobserve(e),this.observer=null)}})}componentDidUpdate(e,t){const{virtualized:n,dataSource:s,expandedRowKeys:r,columns:a,scroll:o}=this.props;n&&(e.dataSource!==s||e.expandedRowKeys!==r||e.columns!==a)&&this.foundation.initVirtualizedData();const c=Je.EXPAND_RELATED_PROPS.map(d=>ne(this.props,d,void 0));wi(c,t.cachedExpandRelatedProps)||this.foundation.initExpandBtnShouldInRow(c);const u=ne(o,"y"),h=this.ref.current;u&&u!==ne(e,"scroll.y")&&this.foundation.observeBodyResize(h)}renderBaseRow(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{rowKey:t,columns:n,expandedRowKeys:s,rowExpandable:r,record:a,index:o,level:l,expandBtnShouldInRow:c,selectedRowKeysSet:u,disabledRowKeysSet:h,expandRowByClick:d}=e,p=Object.keys(nte),f=lf(e,p);let g=Eh(a,t);g==null&&(g=o);const m=pM(s,g),y=r&&r(a),b={level:void 0,expanded:m};(y||c)&&(b.level=l,b.expandableRow=y,d&&(b.onRowClick=this.handleRowClick));const x={selected:u3e(u,g),disabled:h3e(h,g)},{getCellWidths:S}=this.context,C=S(n,null,!0);return k.createElement(px,Object.assign({},f,b,x,{key:g,rowKey:g,cellWidths:C}))}renderBodyRows(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const{rowKey:r,expandedRowRender:a,expandedRowKeys:o,childrenRecordName:l,rowExpandable:c,keepDOM:u}=this.props,h=typeof a=="function",d=this.state.cachedExpandBtnShouldInRow,{flattenedColumns:p}=this.context;return ws(e,(f,g)=>{let m=Eh(f,r);m==null&&(m=g);const y=ne(f,l),b=!!(Array.isArray(y)&&y.length);n.push(this.renderBaseRow(Object.assign(Object.assign({},this.props),{columns:p,expandBtnShouldInRow:d,displayNone:s,record:f,key:m,level:t,index:g})));const x=pM(o,m),S=x||u;if(h&&c&&c(f)&&S){const C=this.renderExpandedRow(Object.assign(Object.assign({},this.props),{columns:p,level:t,index:g,record:f,expanded:x,displayNone:s||!x}));z3(C)||n.push(C)}if(b&&S){const C=this.renderBodyRows(y,t+1,[],s||!x);n.push(...C)}}),n}render(){const{virtualized:e}=this.props,{direction:t}=this.context;return e?this.renderVirtualizedBody(t):this.renderBody(t)}}uN.contextType=Wf;uN.propTypes={anyColumnFixed:v.bool,childrenRecordName:v.string,columns:v.array,components:v.object,dataSource:v.array,disabledRowKeysSet:v.instanceOf(Set).isRequired,emptySlot:v.node,expandRowByClick:v.bool,expandedRowKeys:v.array,expandedRowRender:v.func,fixed:v.oneOfType([v.string,v.bool]),forwardedRef:v.oneOfType([v.object,v.func]),groups:v.instanceOf(Map),handleBodyScroll:v.func,handleWheel:v.func,headerRef:v.oneOfType([v.object,v.func]),includeHeader:v.bool,onScroll:v.func,prefixCls:v.string,renderExpandIcon:v.func,rowExpandable:v.func,rowKey:v.oneOfType([v.string,v.bool,v.func]),scroll:v.object,selectedRowKeysSet:v.instanceOf(Set).isRequired,showHeader:v.bool,size:v.string,store:v.object,virtualized:v.oneOfType([v.bool,v.object])};const tNe=k.forwardRef(function(e,t){return k.createElement(uN,Object.assign({},e,{forwardedRef:t}))});var iNe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};let y0=class extends Ve{get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{resetScrollY:()=>{this.bodyWrapRef.current&&(this.bodyWrapRef.current.scrollTop=0)},setSelectedRowKeys:t=>{this.setState({rowSelection:Object.assign(Object.assign({},this.state.rowSelection),{selectedRowKeys:[...t],selectedRowKeysSet:new Set(t)})})},setDisabledRowKeys:t=>{this.setState({disabledRowKeys:t,disabledRowKeysSet:new Set(t)})},setCurrentPage:t=>{const{pagination:n}=this.state;typeof n=="object"?this.setState({pagination:Object.assign(Object.assign({},n),{currentPage:t})}):this.setState({pagination:{currentPage:t}})},setPagination:t=>this.setState({pagination:t}),setGroups:t=>this.setState({groups:t}),setDataSource:t=>this.setState({dataSource:t}),setExpandedRowKeys:t=>this.setState({expandedRowKeys:[...t]}),setQuery:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=[...e.state.queries];n=Vee(t,n),e.setState({queries:n})},setQueries:t=>this.setState({queries:t}),setFlattenData:t=>this.setState({flattenData:t}),setAllRowKeys:t=>this.setState({allRowKeys:t}),setHoveredRowKey:t=>{this.store.setState({hoveredRowKey:t})},setCachedFilteredSortedDataSource:t=>{this.cachedFilteredSortedDataSource=t},setCachedFilteredSortedRowKeys:t=>{this.cachedFilteredSortedRowKeys=t,this.cachedFilteredSortedRowKeysSet=new Set(t)},setAllDisabledRowKeys:t=>{const n=new Set(t);this.setState({allDisabledRowKeys:t,allDisabledRowKeysSet:n})},getCurrentPage:()=>ne(this.state,"pagination.currentPage",1),getCurrentPageSize:()=>ne(this.state,"pagination.pageSize",Vn.DEFAULT_PAGE_SIZE),getCachedFilteredSortedDataSource:()=>this.cachedFilteredSortedDataSource,getCachedFilteredSortedRowKeys:()=>this.cachedFilteredSortedRowKeys,getCachedFilteredSortedRowKeysSet:()=>this.cachedFilteredSortedRowKeysSet,getAllDisabledRowKeys:()=>this.state.allDisabledRowKeys,getAllDisabledRowKeysSet:()=>this.state.allDisabledRowKeysSet,notifyFilterDropdownVisibleChange:(t,n)=>this._invokeColumnFn(n,"onFilterDropdownVisibleChange",t),notifyChange:function(){return e.props.onChange(...arguments)},notifyExpand:function(){return e.props.onExpand(...arguments)},notifyExpandedRowsChange:function(){return e.props.onExpandedRowsChange(...arguments)},notifySelect:function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e._invokeRowSelection("onSelect",...n)},notifySelectAll:function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e._invokeRowSelection("onSelectAll",...n)},notifySelectInvert:function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e._invokeRowSelection("onSelectInvert",...n)},notifySelectionChange:function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e._invokeRowSelection("onChange",...n)},isAnyColumnFixed:t=>XC(this.getColumns(t||this.props.columns,this.props.children),n=>!!n.fixed),useFixedHeader:()=>{const{scroll:t,sticky:n}=this.props;return!!(ne(t,"y")||n)},getTableLayout:()=>{let t=!1;const{flattenColumns:n}=this.state;return Array.isArray(n)&&(t=n.some(s=>!!s.ellipsis||!!s.fixed)),this.adapter.useFixedHeader()&&(t=!0),t?"fixed":"auto"},setHeadWidths:function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;a3e(e.state.headWidths[n],t)||e.setState(s=>{const r=[...s.headWidths];return r[n]=[...t],{headWidths:r}})},getHeadWidths:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.state.headWidths.length&&typeof t=="number"?(e.state.headWidths[t]||[]).map(s=>s.width):[]},getCellWidths:function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return Array.isArray(t)&&t.length&&(n=n==null&&e.state.headWidths.length?RBe(e.state.headWidths):[],Array.isArray(n)&&n.length)?t.reduce((r,a)=>{const o=a.key===Je.DEFAULT_KEY_COLUMN_SCROLLBAR&&s?null:uf(n,l=>l&&l.key!=null&&l.key===a.key);return o&&r.push(o.width),r},[]):[]},mergedRowExpandable:t=>{const{expandedRowRender:n,childrenRecordName:s,rowExpandable:r}=this.props,a=ne(t,s),o=typeof n=="function",l=typeof r=="function",c=Array.isArray(a)&&a.length,u=l&&r(t);return(o||c)&&(!l||u)||!(o||c)&&u},isAnyColumnUseFullRender:t=>XC(t,n=>!!n.useFullRender),getNormalizeColumns:()=>this.normalizeColumns,getHandleColumns:()=>this.handleColumns,getMergePagination:()=>this.mergePagination,setBodyHasScrollbar:t=>{t!==this.state.bodyHasScrollBar&&this.setState({bodyHasScrollBar:t})},stopPropagation(t){t&&typeof t=="object"&&(typeof t.stopPropagation=="function"&&t.stopPropagation(),t.nativeEvent&&typeof t.nativeEvent.stopPropagation=="function"?t.nativeEvent.stopPropagation():typeof t.stopImmediatePropagation=="function"&&t.stopImmediatePropagation())}})}constructor(e,t){var n;super(e),n=this,this._warnIfNoKey=()=>{(this.props.rowSelection||this.props.expandedRowRender)&&XC(this.props.dataSource,u=>this.foundation.getRecordKey(u)==null)&&iv.error('You must specify a key for each element in the dataSource or use "rowKey" to specify an attribute name as the primary key!')},this._invokeRowSelection=function(u){const h=ne(n.state,["rowSelection",u]);if(typeof h=="function"){for(var d=arguments.length,p=new Array(d>1?d-1:0),f=1;f<d;f++)p[f-1]=arguments[f];h(...p)}},this._invokeColumnFn=function(u,h){if(u&&h){const g=n.foundation.getQuery(u),m=ne(g,h,null);if(typeof m=="function"){for(var d=arguments.length,p=new Array(d>2?d-2:0),f=2;f<d;f++)p[f-2]=arguments[f];m(...p)}}},this._cacheHeaderRef=u=>{this.headerWrapRef.current=u},this.getCurrentPageData=()=>{const u=this.foundation.getCurrentPageData(),h=["dataSource","groups"].reduce((d,p)=>(u[p]&&(d[p]=u[p]),d),{});return sl(h)},this.getColumns=(u,h)=>!Array.isArray(u)||!u||!u.length?aA(h):u,this.getCellWidths=function(){return n.foundation.getCellWidths(...arguments)},this.setHeadWidths=function(){return n.foundation.setHeadWidths(...arguments)},this.getHeadWidths=function(){return n.foundation.getHeadWidths(...arguments)},this.mergedRowExpandable=function(){return n.foundation.mergedRowExpandable(...arguments)},this.setBodyHasScrollbar=function(){return n.foundation.setBodyHasScrollbar(...arguments)},this.handleWheel=u=>{const{scroll:h={}}=this.props;if(window.navigator.userAgent.match(/Trident\/7\./)&&h.y){u.preventDefault();const d=u.deltaY,{target:p}=u,f=this.bodyWrapRef.current;let g=0;this.lastScrollTop?g=this.lastScrollTop+d:g=d,f&&p!==f&&(f.scrollTop=g)}},this.handleBodyScrollLeft=u=>{if(u.currentTarget!==u.target)return;const{target:h}=u,d=this.headerWrapRef.current,p=this.bodyWrapRef.current;h.scrollLeft!==this.lastScrollLeft&&(h===p&&d?d.scrollLeft=h.scrollLeft:h===d&&p&&(p.scrollLeft=h.scrollLeft),this.setScrollPositionClassName()),this.lastScrollLeft=h.scrollLeft},this.handleWindowResize=()=>{this.syncTableWidth(),this.setScrollPositionClassName()},this.handleBodyScrollTop=u=>{const{target:h}=u;if(u.currentTarget!==h)return;const{scroll:d={}}=this.props,p=this.headerWrapRef.current,f=this.bodyWrapRef.current;if(h.scrollTop!==this.lastScrollTop&&d.y&&h!==p){const{scrollTop:g}=h;f&&h!==f&&(f.scrollTop=g)}this.lastScrollTop=h.scrollTop},this.handleBodyScroll=u=>{this.handleBodyScrollLeft(u),this.handleBodyScrollTop(u)},this.setScrollPosition=u=>{const{prefixCls:h}=this.props,d=[`${h}-scroll-position-both`,`${h}-scroll-position-middle`,`${h}-scroll-position-left`,`${h}-scroll-position-right`];this.scrollPosition=u;const p=this.wrapRef.current;if(p&&p.nodeType)if(u==="both"){const f=[`${h}-scroll-position-left`,`${h}-scroll-position-right`];p.classList.remove(...e9(d,f)),p.classList.add(...f)}else{const f=[`${h}-scroll-position-${u}`];p.classList.remove(...e9(d,f)),p.classList.add(...f)}},this.setScrollPositionClassName=()=>{const u=this.bodyWrapRef.current;if(u&&u.children&&u.children.length){const h=u.scrollLeft===0,d=Math.abs(u.scrollLeft)+1>=u.children[0].getBoundingClientRect().width-u.getBoundingClientRect().width;h&&d?this.setScrollPosition("both"):h?this.setScrollPosition("left"):d?this.setScrollPosition("right"):this.scrollPosition!=="middle"&&this.setScrollPosition("middle")}},this.syncTableWidth=()=>{this.rootWrapRef&&this.rootWrapRef.current&&this.setState({tableWidth:this.rootWrapRef.current.getBoundingClientRect().width})},this.renderSelection=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,d=arguments.length>2?arguments[2]:void 0;const{rowSelection:p,allDisabledRowKeysSet:f}=n.state;if(p&&typeof p=="object"){const{selectedRowKeys:g=[],selectedRowKeysSet:m=new Set,getCheckboxProps:y,disabled:b,renderCell:x}=p,S=n.cachedFilteredSortedRowKeys,C=n.cachedFilteredSortedRowKeysSet,w=n.foundation.allIsSelected(m,f,S),T=n.foundation.hasRowSelected(g,C)&&!w;if(h){const E=ne(p,"key",Je.DEFAULT_KEY_COLUMN_SELECTION),P=k.createElement(oA,{"aria-label":`${w?"Deselect":"Select"} all rows`,disabled:b,key:E,selected:w,indeterminate:T,onChange:(M,R)=>{n.toggleSelectAllRow(M,R)}}),O=(M,R)=>n.toggleSelectAllRow(M,R);return xt(x)?x({selected:w,record:u,originNode:P,inHeader:h,disabled:b,indeterminate:T,selectAll:O}):P}else{const E=n.foundation.getRecordKey(u),P=m.has(E),O=()=>typeof y=="function"?y(u):{},M=k.createElement(oA,{"aria-label":`${P?"Deselect":"Select"} this row`,getCheckboxProps:O,selected:P,onChange:(j,I)=>n.toggleSelectRow(j,E,I)}),R=(j,I)=>n.toggleSelectRow(j,E,I);return xt(x)?x({selected:P,record:u,index:d,originNode:M,inHeader:!1,disabled:b,indeterminate:T,selectRow:R}):M}}return null},this.renderRowSelectionCallback=function(u){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2?arguments[2]:void 0;return n.renderSelection(h,!1,d)},this.renderTitleSelectionCallback=()=>this.renderSelection(void 0,!0),this.normalizeSelectionColumn=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{rowSelection:h,prefixCls:d}=u;let p={};if(h){const f=["selectedRowKeys","selectedRowKeysSet"];p={key:Je.DEFAULT_KEY_COLUMN_SELECTION},As(h)&&(p=Object.assign(Object.assign({},p),_n(h,f))),p.className=K(p.className,`${d}-column-selection`),p.title=n.renderTitleSelectionCallback,p.render=n.renderRowSelectionCallback}return p},this.normalizeScrollbarColumn=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{scrollbarWidth:h=0}=u;return{key:Je.DEFAULT_KEY_COLUMN_SCROLLBAR,width:h,fixed:"right"}},this.renderExpandIcon=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;const{expandedRowKeys:p}=n.state,{expandIcon:f}=n.props,g=typeof d=="string"||typeof d=="number"?d:n.foundation.getRecordKey(u);return k.createElement(aN,{key:g,componentType:h?"tree":"expand",expanded:Qw(p,g),expandIcon:f,onClick:(m,y)=>n.handleRowExpanded(m,g,y)})},this.handleRowExpanded=function(){return n.foundation.handleRowExpanded(...arguments)},this.normalizeExpandColumn=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=null;const{prefixCls:d,expandCellFixed:p,expandIcon:f}=u;return h={fixed:p,key:Je.DEFAULT_KEY_COLUMN_EXPAND},h.className=K(h.className,`${d}-column-expand`),h.render=f!==!1?function(){let g=arguments.length>1?arguments[1]:void 0;return n.adapter.mergedRowExpandable(g)?n.renderExpandIcon(g):null}:()=>null,h},this.addFnsInColumn=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{prefixCls:h}=n.props;if(u&&(u.sorter||u.filters||u.onFilter||u.useFullRender)){let d=typeof u.sorter=="function"||u.sorter===!0,p=Array.isArray(u.filters)&&u.filters.length||H.isValidElement(u.filterDropdown)||typeof u.renderFilterDropdown=="function",f=!1;const m=!("sortOrder"in u)&&u.showSortTip===!0,{dataIndex:y,title:b,useFullRender:x}=u,S=d&&!p&&!x,C=n.foundation.getQuery(y),w={},A=[];x&&(w.selection=n.renderSelection(null,!0));const T=ne(C,"sortOrder"),E=ne(C,"defaultSortOrder",!1),P=n.foundation.isSortOrderValid(T)?T:E,O=nN(u.ellipsis),M=typeof b!="function"&&k.createElement("span",{className:`${h}-row-head-title`,key:Je.DEFAULT_KEY_COLUMN_TITLE,title:O&&typeof b=="string"?b:void 0},b);if(d){const z=k.createElement(rN,{key:Je.DEFAULT_KEY_COLUMN_SORTER,sortOrder:P,sortIcon:u.sortIcon,onClick:x||p?$=>n.foundation.handleSort(u,$):null,title:M,showTooltip:!S&&m});x&&(w.sorter=z),f=!0,A.push(z)}else A.push(M);const R=ne(C,"filteredValue"),j=ne(C,"defaultFilteredValue"),I=R||j;if(p){const z=k.createElement(V3e,Object.assign({key:Je.DEFAULT_KEY_COLUMN_FILTER},_n(C,"children"),{filteredValue:I,onFilterDropdownVisibleChange:$=>n.foundation.toggleShowFilter(y,$),onSelect:$=>n.foundation.handleFilterSelect(y,$)}));x&&(w.filter=z),f=!0,A.push(z)}const D=typeof b=="function"?()=>b(w):f?k.createElement("div",{className:`${h}-operate-wrapper`},A):A;u=Object.assign(Object.assign({},u),{title:D}),S&&(u.clickToSort=z=>{n.foundation.handleSort(u,z)},u.sortOrder=P,u.showSortTip=m)}return u},this.toggleSelectRow=(u,h,d)=>{this.foundation.handleSelectRow(h,u,d)},this.toggleSelectAllRow=(u,h)=>{this.foundation.handleSelectAllRow(u,h)},this.renderPagination=(u,h)=>{if(!u)return null;const d=this.foundation.memoizedPagination(u);return k.createElement(gi,{componentName:"Table"},p=>{const f=this.foundation.formatPaginationInfo(d,p.pageText);return k.createElement(sN,{info:f,pagination:d,renderPagination:h})})},this.renderTitle=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{title:h}=u;const{prefixCls:d,dataSource:p}=u;return typeof h=="function"&&(h=h(p)),H.isValidElement(h)||typeof h=="string"?k.createElement("div",{className:`${d}-title`,"x-semi-prop":"title"},h):null},this.renderEmpty=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{prefixCls:h,empty:d,dataSource:p}=u,f=`${h}-placeholder`;return n.foundation.isEmpty(p)?k.createElement(gi,{componentName:"Table",key:"emptyText"},(m,y)=>k.createElement("div",{className:f},k.createElement("div",{className:`${h}-empty`,"x-semi-prop":"empty"},d||m.emptyText))):null},this.renderFooter=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{footer:h}=u;const{prefixCls:d,dataSource:p}=u;return typeof h=="function"&&(h=h(p)),H.isValidElement(h)||typeof h=="string"?k.createElement("div",{className:`${d}-footer`,key:"footer","x-semi-prop":"footer"},h):null},this.renderMainTable=u=>{const h=this.adapter.useFixedHeader(),d=this.renderEmpty(u);return[this.renderTable(Object.assign(Object.assign({},u),{fixed:!1,useFixedHeader:h,headerRef:this._cacheHeaderRef,bodyRef:this.bodyWrapRef,includeHeader:!h,emptySlot:d})),this.renderFooter(u)]},this.renderTable=u=>{const{columns:h,filteredColumns:d,fixed:p,useFixedHeader:f,scroll:g,prefixCls:m,anyColumnFixed:y,includeHeader:b,showHeader:x,components:S,headerRef:C,bodyRef:w,onHeaderRow:A,rowSelection:T,dataSource:E,bodyHasScrollBar:P,disabledRowKeysSet:O,sticky:M}=u,R=ne(T,"selectedRowKeysSet",new Set),j=this.adapter.getTableLayout(),I=p||f?k.createElement(J3e,{key:"head",tableLayout:j,ref:C,columns:d,prefixCls:m,fixed:p,handleBodyScroll:this.handleBodyScrollLeft,components:S,scroll:g,showHeader:x,selectedRowKeysSet:R,onHeaderRow:A,dataSource:E,bodyHasScrollBar:P,sticky:M}):null,D=k.createElement(tNe,Object.assign({},_n(u,["rowSelection","headWidths"]),{key:"body",ref:w,columns:d,fixed:p,prefixCls:m,handleWheel:this.handleWheel,handleBodyScroll:this.handleBodyScroll,anyColumnFixed:y,tableLayout:j,includeHeader:b,showHeader:x,scroll:g,components:S,store:this.store,selectedRowKeysSet:R,disabledRowKeysSet:O}));return[I,D]},this.handleColumns=(u,h)=>{const{hideExpandedColumn:d,scroll:p,prefixCls:f,expandCellFixed:g,expandIcon:m,rowSelection:y}=this.props,b="children";let x=sl(h);const S=function(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];Array.isArray(C)&&C.length&&ws(C,(w,A,T)=>{const E=n.addFnsInColumn(w),P=w[b];if(Array.isArray(P)&&P.length){const O=[...P];S(O),E[b]=O}T[A]=E})};if(S(x),!d){const C=this.normalizeExpandColumn({prefixCls:f,expandCellFixed:g,expandIcon:m}),w=cy(x,A=>A.key===Je.DEFAULT_KEY_COLUMN_EXPAND);C&&(w>-1?x[w]=Object.assign(Object.assign({},C),x[w]):C.fixed==="right"?x=[...x,C]:x=[C,...x])}if(y&&!ne(y,"hidden")){const C=cy(x,A=>A.key===Je.DEFAULT_KEY_COLUMN_SELECTION),w=this.normalizeSelectionColumn({rowSelection:y,prefixCls:f});C>-1?x[C]=Object.assign(Object.assign({},w),x[C]):w.fixed==="right"?x=[...x,w]:x=[w,...x]}return rA(x),x},this.normalizeColumns=(u,h)=>sl(this.getColumns(u,h)),this.mergePagination=u=>Object.assign({onChange:this.foundation.setPage},u),this.foundation=new Pb(this.adapter);const s=this.getColumns(e.columns,e.children),r=$m(s),a=Pb.initColumnsFilteredValueAndSorterOrder(sl(r)),o=this.foundation.getFilteredSortedDataSource(this.props.dataSource,a),l=rL(this.props.pagination)?this.props.pagination:{},c=this.foundation.getCurrentPageData(o,l,a);this.state={cachedColumns:s,cachedChildren:e.children,flattenColumns:r,components:q9(e.components,e.virtualized),queries:a,dataSource:c.dataSource,flattenData:[],expandedRowKeys:[...e.expandedRowKeys||[],...e.defaultExpandedRowKeys||[]],rowSelection:e.rowSelection?As(e.rowSelection)?Object.assign({},e.rowSelection):{}:null,pagination:c.pagination,groups:null,allRowKeys:[],disabledRowKeys:[],disabledRowKeysSet:new Set,allDisabledRowKeys:[],allDisabledRowKeysSet:new Set,headWidths:[],bodyHasScrollBar:!1,prePropRowSelection:void 0,prePagination:void 0},this.rootWrapRef=H.createRef(),this.wrapRef=H.createRef(),this.bodyWrapRef=H.createRef(),this.headerWrapRef=H.createRef(),this.store=new v3e({hoveredRowKey:null}),this.debouncedWindowResize=Hw(this.handleWindowResize,150),this.cachedFilteredSortedDataSource=[],this.cachedFilteredSortedRowKeys=[],this.cachedFilteredSortedRowKeysSet=new Set}static getDerivedStateFromProps(e,t){const n={},{rowSelection:s,dataSource:r,childrenRecordName:a,rowKey:o,pagination:l}=e;if(e.columns&&e.children&&iv.warn("columns should not given by object and children at the same time"),e.columns&&e.columns!==t.cachedColumns){const c=$m(e.columns);n.flattenColumns=c,n.queries=SL(t.queries,c,null,!1),n.cachedColumns=e.columns,n.cachedChildren=null}else if(e.children&&e.children!==t.cachedChildren){const c=aA(e.children),u=$m(c),h=SL(t.queries,u,null,!1);n.flattenColumns=u,n.queries=[...h],n.cachedColumns=[...c],n.cachedChildren=e.children}if(s!==t.prePropRowSelection){let c={};As(t.rowSelection)&&(c=Object.assign(Object.assign({},c),t.rowSelection)),As(s)&&(c=Object.assign(Object.assign({},c),s));const u=ne(s,"selectedRowKeys"),h=ne(s,"getCheckboxProps");if(u&&Array.isArray(u)&&(c.selectedRowKeysSet=new Set(u)),xt(h)){const d=Uee({dataSource:r,getCheckboxProps:h,childrenRecordName:a,rowKey:o}),p=new Set(d);n.disabledRowKeys=d,n.disabledRowKeysSet=p,n.allDisabledRowKeys=d,n.allDisabledRowKeysSet=p}n.rowSelection=c,n.prePropRowSelection=s}if(l!==t.prePagination){let c={};As(t.pagination)&&(c=Object.assign(Object.assign({},c),t.pagination)),As(l)&&(c=Object.assign(Object.assign({},c),l)),n.pagination=c,n.prePagination=l}return n}componentDidMount(){super.componentDidMount(),this.setScrollPosition("left"),(this.adapter.isAnyColumnFixed()||this.props.showHeader&&this.adapter.useFixedHeader())&&(this.handleWindowResize(),window.addEventListener("resize",this.debouncedWindowResize))}componentDidUpdate(e,t){const{dataSource:n,expandedRowKeys:s,expandAllRows:r,expandAllGroupRows:a,virtualized:o,components:l,pagination:c}=this.props,{pagination:u,queries:h,cachedColumns:d,cachedChildren:p,groups:f}=this.state,g={};if(this._warnIfNoKey(),Array.isArray(s)&&s!==e.expandedRowKeys&&this.setState({expandedRowKeys:s}),(l!==e.components||o!==e.virtualized)&&this.setState({components:q9(l,o)}),(r!==e.expandAllRows||a!==e.expandAllGroupRows)&&this.foundation.initExpandedRowKeys({groups:f}),n!==e.dataSource||d!==t.cachedColumns||p!==t.cachedChildren){const m=[...n],y=this.foundation.getFilteredSortedDataSource(m,h),b=this.foundation.getAllDisabledRowKeys(y);this.foundation.setCachedFilteredSortedDataSource(y),this.foundation.setAllDisabledRowKeys(b),g.dataSource=y,this.props.groupBy&&(g.groups=null)}if(n!==e.dataSource&&(g.pagination=As(u)?Object.assign(Object.assign({},u),{currentPage:As(c)&&c.currentPage?c.currentPage:1}):u),Object.keys(g).length){const{pagination:m=null,queries:y=null,dataSource:b=null}=g,x=this.foundation.getCurrentPageData(b,m,y);this.adapter.setAllRowKeys(x.allRowKeys),this.adapter.setDisabledRowKeys(x.disabledRowKeys),"dataSource"in g&&((this.props.defaultExpandAllRows&&x.groups&&x.groups.size||this.props.expandAllRows||this.props.expandAllGroupRows)&&this.foundation.initExpandedRowKeys(x),g.pagination=x.pagination);const S=Object.keys(g);for(const C of S)this.setState({[C]:x[C]})}(this.adapter.isAnyColumnFixed()||this.props.showHeader&&this.adapter.useFixedHeader())&&(this.debouncedWindowResize||window.addEventListener("resize",this.debouncedWindowResize))}componentWillUnmount(){super.componentWillUnmount(),this.debouncedWindowResize&&(window.removeEventListener("resize",this.debouncedWindowResize),this.debouncedWindowResize.cancel(),this.debouncedWindowResize=null)}render(){let e=this.props,{scroll:t,prefixCls:n,className:s,style:r={},bordered:a,id:o,pagination:l,virtualized:c,size:u,renderPagination:h,getVirtualizedListRef:d,loading:p,hideExpandedColumn:f,rowSelection:g}=e,m=iNe(e,["scroll","prefixCls","className","style","bordered","id","pagination","virtualized","size","renderPagination","getVirtualizedListRef","loading","hideExpandedColumn","rowSelection"]),{rowSelection:y,expandedRowKeys:b,headWidths:x,tableWidth:S,pagination:C,dataSource:w,queries:A,cachedColumns:T,bodyHasScrollBar:E}=this.state;r=Object.assign({},r);let P;if(this.adapter.isAnyColumnUseFullRender(A))P=this.handleColumns(A,T);else{const ae=g&&!ne(g,"hidden");P=this.foundation.memoizedWithFnsColumns(A,T,ae,f,E)}const O=this.foundation.memoizedFilterColumns(P),M=this.foundation.memoizedFlattenFnsColumns(P),R=this.adapter.isAnyColumnFixed(P),j=Object.assign(Object.assign(Object.assign({},m),this.state),{virtualized:c,scroll:t,prefixCls:n,size:u,hideExpandedColumn:f,columns:P,anyColumnFixed:R,rowExpandable:this.mergedRowExpandable,pagination:C,dataSource:w,rowSelection:y,expandedRowKeys:b,renderExpandIcon:this.renderExpandIcon,filteredColumns:O}),I=ne(t,"x"),D=ne(t,"y");c&&typeof r.width!="number"&&(r.width=I);const z=K({[`${n}-${Je.SIZE_SMALL}`]:u===Je.SIZE_SMALL,[`${n}-${Je.SIZE_MIDDLE}`]:u===Je.SIZE_MIDDLE,[`${n}-virtualized`]:!!c,[`${n}-bordered`]:a,[`${n}-fixed-header`]:!!D,[`${n}-scroll-position-left`]:["both","left"].includes(this.position),[`${n}-scroll-position-right`]:["both","right"].includes(this.position)}),$=C&&l?this.renderPagination(C,h):null,V=ne(l,"position","bottom"),L=Object.assign(Object.assign({},this.context),{headWidths:x,tableWidth:S,anyColumnFixed:R,flattenedColumns:M,renderExpandIcon:this.renderExpandIcon,renderSelection:this.renderSelection,setHeadWidths:this.setHeadWidths,getHeadWidths:this.getHeadWidths,getCellWidths:this.getCellWidths,handleRowExpanded:this.handleRowExpanded,getVirtualizedListRef:d,setBodyHasScrollbar:this.setBodyHasScrollbar}),Y=this.getDataAttr(m);return k.createElement("div",Object.assign({ref:this.rootWrapRef,className:K(s,`${n}-wrapper`,`${n}-wrapper-${j.direction}`),"data-column-fixed":R,style:r,id:o},Y),k.createElement(z3e,Object.assign({},L,{direction:j.direction}),k.createElement(Cc,{spinning:p,size:"large"},k.createElement("div",{ref:this.wrapRef,className:z},k.createElement(k.Fragment,{key:"pagination-top"},["top","both"].includes(V)?$:null),this.renderTitle({title:j.title,dataSource:j.dataSource,prefixCls:j.prefixCls}),k.createElement("div",{className:`${n}-container`},this.renderMainTable(Object.assign({},j))),k.createElement(k.Fragment,{key:"pagination-bottom"},["bottom","both"].includes(V)?$:null)))))}};y0.contextType=Wf;y0.propTypes={className:v.string,style:v.object,prefixCls:v.string,components:v.any,bordered:v.bool,loading:v.bool,size:v.oneOf(Je.SIZES),tableLayout:v.oneOf(Je.LAYOUTS),columns:v.arrayOf(v.shape(Gee)),hideExpandedColumn:v.bool,id:v.string,expandIcon:v.oneOfType([v.bool,v.func,v.node]),expandCellFixed:v.oneOf(Je.FIXED_SET),title:v.oneOfType([v.string,v.node,v.func]),onHeaderRow:v.func,showHeader:v.bool,indentSize:v.number,rowKey:v.oneOfType([v.func,v.string,v.number]),onRow:v.func,onExpandedRowsChange:v.func,onExpand:v.func,rowExpandable:v.func,expandedRowRender:v.func,expandedRowKeys:v.array,defaultExpandAllRows:v.bool,expandAllRows:v.bool,defaultExpandAllGroupRows:v.bool,expandAllGroupRows:v.bool,defaultExpandedRowKeys:v.array,pagination:v.oneOfType([v.object,v.bool]),renderPagination:v.func,footer:v.oneOfType([v.func,v.string,v.node]),empty:v.node,dataSource:v.array,childrenRecordName:v.string,rowSelection:v.oneOfType([v.object,v.bool]),onChange:v.func,scroll:v.shape({x:v.oneOfType([v.number,v.string,v.bool]),y:v.oneOfType([v.number,v.string])}),groupBy:v.oneOfType([v.string,v.number,v.func]),renderGroupSection:v.oneOfType([v.func]),onGroupedRow:v.func,clickGroupedRowToExpand:v.bool,virtualized:v.oneOfType([v.object,v.bool]),dropdownPrefixCls:v.string,expandRowByClick:v.bool,getVirtualizedListRef:v.func};y0.defaultProps={tableLayout:"",dataSource:[],prefixCls:ir.PREFIX,rowSelection:null,className:"",childrenRecordName:"children",size:"default",loading:!1,bordered:!1,expandCellFixed:!1,hideExpandedColumn:!0,showHeader:!0,indentSize:Vn.DEFAULT_INDENT_WIDTH,onChange:J,pagination:!0,rowKey:"key",defaultExpandedRowKeys:[],defaultExpandAllRows:!1,defaultExpandAllGroupRows:!1,expandAllRows:!1,expandAllGroupRows:!1,onFilterDropdownVisibleChange:J,onExpand:J,onExpandedRowsChange:J,expandRowByClick:!1};var nNe=tj;function sNe(i,e,t){var n=i.length;return t=t===void 0?n:t,!e&&t>=n?i:nNe(i,e,t)}var rNe=sNe,aNe=Mc,oNe=La,lNe="[object RegExp]";function cNe(i){return oNe(i)&&aNe(i)==lNe}var uNe=cNe,hNe=uNe,dNe=s0,tH=BE,iH=tH&&tH.isRegExp,pNe=iH?dNe(iH):hNe,fNe=pNe;function gNe(i){return i.split("")}var mNe=gNe,rte="\\ud800-\\udfff",yNe="\\u0300-\\u036f",_Ne="\\ufe20-\\ufe2f",vNe="\\u20d0-\\u20ff",bNe=yNe+_Ne+vNe,xNe="\\ufe0e\\ufe0f",SNe="["+rte+"]",AL="["+bNe+"]",kL="\\ud83c[\\udffb-\\udfff]",CNe="(?:"+AL+"|"+kL+")",ate="[^"+rte+"]",ote="(?:\\ud83c[\\udde6-\\uddff]){2}",lte="[\\ud800-\\udbff][\\udc00-\\udfff]",wNe="\\u200d",cte=CNe+"?",ute="["+xNe+"]?",ANe="(?:"+wNe+"(?:"+[ate,ote,lte].join("|")+")"+ute+cte+")*",kNe=ute+cte+ANe,TNe="(?:"+[ate+AL+"?",AL,ote,lte,SNe].join("|")+")",ENe=RegExp(kL+"(?="+kL+")|"+TNe+kNe,"g");function PNe(i){return i.match(ENe)||[]}var ONe=PNe,MNe=mNe,INe=cN,RNe=ONe;function LNe(i){return INe(i)?RNe(i):MNe(i)}var DNe=LNe,FNe=xJ,BNe=rNe,jNe=cN,NNe=zE,$Ne=fNe,zNe=DNe,HNe=j3,VNe=4294967295;function UNe(i,e,t){return t&&typeof t!="number"&&NNe(i,e,t)&&(e=t=void 0),t=t===void 0?VNe:t>>>0,t?(i=HNe(i),i&&(typeof e=="string"||e!=null&&!$Ne(e))&&(e=FNe(e),!e&&jNe(i))?BNe(zNe(i),0,t):i.split(e,t)):[]}var WNe=UNe;const hte=Xe(WNe);function GNe(i){const e=hte(i,/\s+/);for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const r=hy(n,a=>!e.includes(a));return K(i,...r)}function KNe(i){const e=hte(i,/\s+/);for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return tA(n,r=>{const a=e.indexOf(r);a>-1&&e.splice(a,1)}),K(...e)}var hN={exports:{}},fx={},cP={exports:{}},dte={};function pte(i){var e,t,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i))for(e=0;e<i.length;e++)i[e]&&(t=pte(i[e]))&&(n&&(n+=" "),n+=t);else for(e in i)i[e]&&(n&&(n+=" "),n+=e);return n}function nH(){for(var i,e,t=0,n="";t<arguments.length;)(i=arguments[t++])&&(e=pte(i))&&(n&&(n+=" "),n+=e);return n}const XNe=Object.freeze(Object.defineProperty({__proto__:null,clsx:nH,default:nH},Symbol.toStringTag,{value:"Module"})),YNe=VY(XNe);var In={},Lc={};Object.defineProperty(Lc,"__esModule",{value:!0});Lc.dontSetMe=e5e;Lc.findInArray=qNe;Lc.int=QNe;Lc.isFunction=ZNe;Lc.isNum=JNe;function qNe(i,e){for(let t=0,n=i.length;t<n;t++)if(e.apply(e,[i[t],t,i]))return i[t]}function ZNe(i){return typeof i=="function"||Object.prototype.toString.call(i)==="[object Function]"}function JNe(i){return typeof i=="number"&&!isNaN(i)}function QNe(i){return parseInt(i,10)}function e5e(i,e,t){if(i[e])return new Error("Invalid prop ".concat(e," passed to ").concat(t," - do not set this, set it on the child."))}var Gf={};Object.defineProperty(Gf,"__esModule",{value:!0});Gf.browserPrefixToKey=gte;Gf.browserPrefixToStyle=t5e;Gf.default=void 0;Gf.getPrefix=fte;const mM=["Moz","Webkit","O","ms"];function fte(){var i;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const t=(i=window.document)===null||i===void 0||(i=i.documentElement)===null||i===void 0?void 0:i.style;if(!t||e in t)return"";for(let n=0;n<mM.length;n++)if(gte(e,mM[n])in t)return mM[n];return""}function gte(i,e){return e?"".concat(e).concat(i5e(i)):i}function t5e(i,e){return e?"-".concat(e.toLowerCase(),"-").concat(i):i}function i5e(i){let e="",t=!0;for(let n=0;n<i.length;n++)t?(e+=i[n].toUpperCase(),t=!1):i[n]==="-"?t=!0:e+=i[n];return e}Gf.default=fte();Object.defineProperty(In,"__esModule",{value:!0});In.addClassName=_te;In.addEvent=r5e;In.addUserSelectStyles=m5e;In.createCSSTransform=d5e;In.createSVGTransform=p5e;In.getTouch=f5e;In.getTouchIdentifier=g5e;In.getTranslation=dN;In.innerHeight=c5e;In.innerWidth=u5e;In.matchesSelector=yte;In.matchesSelectorAndParentsTo=s5e;In.offsetXYFromParent=h5e;In.outerHeight=o5e;In.outerWidth=l5e;In.removeClassName=vte;In.removeEvent=a5e;In.removeUserSelectStyles=y5e;var Ca=Lc,sH=n5e(Gf);function mte(i){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(mte=function(n){return n?t:e})(i)}function n5e(i,e){if(i&&i.__esModule)return i;if(i===null||typeof i!="object"&&typeof i!="function")return{default:i};var t=mte(e);if(t&&t.has(i))return t.get(i);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in i)if(r!=="default"&&Object.prototype.hasOwnProperty.call(i,r)){var a=s?Object.getOwnPropertyDescriptor(i,r):null;a&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=i[r]}return n.default=i,t&&t.set(i,n),n}let ES="";function yte(i,e){return ES||(ES=(0,Ca.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(t){return(0,Ca.isFunction)(i[t])})),(0,Ca.isFunction)(i[ES])?i[ES](e):!1}function s5e(i,e,t){let n=i;do{if(yte(n,e))return!0;if(n===t)return!1;n=n.parentNode}while(n);return!1}function r5e(i,e,t,n){if(!i)return;const s={capture:!0,...n};i.addEventListener?i.addEventListener(e,t,s):i.attachEvent?i.attachEvent("on"+e,t):i["on"+e]=t}function a5e(i,e,t,n){if(!i)return;const s={capture:!0,...n};i.removeEventListener?i.removeEventListener(e,t,s):i.detachEvent?i.detachEvent("on"+e,t):i["on"+e]=null}function o5e(i){let e=i.clientHeight;const t=i.ownerDocument.defaultView.getComputedStyle(i);return e+=(0,Ca.int)(t.borderTopWidth),e+=(0,Ca.int)(t.borderBottomWidth),e}function l5e(i){let e=i.clientWidth;const t=i.ownerDocument.defaultView.getComputedStyle(i);return e+=(0,Ca.int)(t.borderLeftWidth),e+=(0,Ca.int)(t.borderRightWidth),e}function c5e(i){let e=i.clientHeight;const t=i.ownerDocument.defaultView.getComputedStyle(i);return e-=(0,Ca.int)(t.paddingTop),e-=(0,Ca.int)(t.paddingBottom),e}function u5e(i){let e=i.clientWidth;const t=i.ownerDocument.defaultView.getComputedStyle(i);return e-=(0,Ca.int)(t.paddingLeft),e-=(0,Ca.int)(t.paddingRight),e}function h5e(i,e,t){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),r=(i.clientX+e.scrollLeft-s.left)/t,a=(i.clientY+e.scrollTop-s.top)/t;return{x:r,y:a}}function d5e(i,e){const t=dN(i,e,"px");return{[(0,sH.browserPrefixToKey)("transform",sH.default)]:t}}function p5e(i,e){return dN(i,e,"")}function dN(i,e,t){let{x:n,y:s}=i,r="translate(".concat(n).concat(t,",").concat(s).concat(t,")");if(e){const a="".concat(typeof e.x=="string"?e.x:e.x+t),o="".concat(typeof e.y=="string"?e.y:e.y+t);r="translate(".concat(a,", ").concat(o,")")+r}return r}function f5e(i,e){return i.targetTouches&&(0,Ca.findInArray)(i.targetTouches,t=>e===t.identifier)||i.changedTouches&&(0,Ca.findInArray)(i.changedTouches,t=>e===t.identifier)}function g5e(i){if(i.targetTouches&&i.targetTouches[0])return i.targetTouches[0].identifier;if(i.changedTouches&&i.changedTouches[0])return i.changedTouches[0].identifier}function m5e(i){if(!i)return;let e=i.getElementById("react-draggable-style-el");e||(e=i.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,i.getElementsByTagName("head")[0].appendChild(e)),i.body&&_te(i.body,"react-draggable-transparent-selection")}function y5e(i){if(i)try{if(i.body&&vte(i.body,"react-draggable-transparent-selection"),i.selection)i.selection.empty();else{const e=(i.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function _te(i,e){i.classList?i.classList.add(e):i.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(i.className+=" ".concat(e))}function vte(i,e){i.classList?i.classList.remove(e):i.className=i.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var Dc={};Object.defineProperty(Dc,"__esModule",{value:!0});Dc.canDragX=b5e;Dc.canDragY=x5e;Dc.createCoreData=C5e;Dc.createDraggableData=w5e;Dc.getBoundPosition=_5e;Dc.getControlPosition=S5e;Dc.snapToGrid=v5e;var aa=Lc,rm=In;function _5e(i,e,t){if(!i.props.bounds)return[e,t];let{bounds:n}=i.props;n=typeof n=="string"?n:A5e(n);const s=pN(i);if(typeof n=="string"){const{ownerDocument:r}=s,a=r.defaultView;let o;if(n==="parent"?o=s.parentNode:o=r.querySelector(n),!(o instanceof a.HTMLElement))throw new Error('Bounds selector "'+n+'" could not find an element.');const l=o,c=a.getComputedStyle(s),u=a.getComputedStyle(l);n={left:-s.offsetLeft+(0,aa.int)(u.paddingLeft)+(0,aa.int)(c.marginLeft),top:-s.offsetTop+(0,aa.int)(u.paddingTop)+(0,aa.int)(c.marginTop),right:(0,rm.innerWidth)(l)-(0,rm.outerWidth)(s)-s.offsetLeft+(0,aa.int)(u.paddingRight)-(0,aa.int)(c.marginRight),bottom:(0,rm.innerHeight)(l)-(0,rm.outerHeight)(s)-s.offsetTop+(0,aa.int)(u.paddingBottom)-(0,aa.int)(c.marginBottom)}}return(0,aa.isNum)(n.right)&&(e=Math.min(e,n.right)),(0,aa.isNum)(n.bottom)&&(t=Math.min(t,n.bottom)),(0,aa.isNum)(n.left)&&(e=Math.max(e,n.left)),(0,aa.isNum)(n.top)&&(t=Math.max(t,n.top)),[e,t]}function v5e(i,e,t){const n=Math.round(e/i[0])*i[0],s=Math.round(t/i[1])*i[1];return[n,s]}function b5e(i){return i.props.axis==="both"||i.props.axis==="x"}function x5e(i){return i.props.axis==="both"||i.props.axis==="y"}function S5e(i,e,t){const n=typeof e=="number"?(0,rm.getTouch)(i,e):null;if(typeof e=="number"&&!n)return null;const s=pN(t),r=t.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,rm.offsetXYFromParent)(n||i,r,t.props.scale)}function C5e(i,e,t){const n=!(0,aa.isNum)(i.lastX),s=pN(i);return n?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:t,x:e,y:t}:{node:s,deltaX:e-i.lastX,deltaY:t-i.lastY,lastX:i.lastX,lastY:i.lastY,x:e,y:t}}function w5e(i,e){const t=i.props.scale;return{node:e.node,x:i.state.x+e.deltaX/t,y:i.state.y+e.deltaY/t,deltaX:e.deltaX/t,deltaY:e.deltaY/t,lastX:i.state.x,lastY:i.state.y}}function A5e(i){return{left:i.left,top:i.top,right:i.right,bottom:i.bottom}}function pN(i){const e=i.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var uP={},hP={};Object.defineProperty(hP,"__esModule",{value:!0});hP.default=k5e;function k5e(){}Object.defineProperty(uP,"__esModule",{value:!0});uP.default=void 0;var yM=E5e(H),Mr=fN(X1),T5e=fN(Nf),$s=In,th=Dc,_M=Lc,t_=fN(hP);function fN(i){return i&&i.__esModule?i:{default:i}}function bte(i){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(bte=function(n){return n?t:e})(i)}function E5e(i,e){if(i&&i.__esModule)return i;if(i===null||typeof i!="object"&&typeof i!="function")return{default:i};var t=bte(e);if(t&&t.has(i))return t.get(i);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in i)if(r!=="default"&&Object.prototype.hasOwnProperty.call(i,r)){var a=s?Object.getOwnPropertyDescriptor(i,r):null;a&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=i[r]}return n.default=i,t&&t.set(i,n),n}function gr(i,e,t){return e=P5e(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function P5e(i){var e=O5e(i,"string");return typeof e=="symbol"?e:String(e)}function O5e(i,e){if(typeof i!="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}const Xo={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let ih=Xo.mouse,dP=class extends yM.Component{constructor(){super(...arguments),gr(this,"dragging",!1),gr(this,"lastX",NaN),gr(this,"lastY",NaN),gr(this,"touchIdentifier",null),gr(this,"mounted",!1),gr(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:n}=t;if(this.props.disabled||!(e.target instanceof n.defaultView.Node)||this.props.handle&&!(0,$s.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,$s.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;e.type==="touchstart"&&e.preventDefault();const s=(0,$s.getTouchIdentifier)(e);this.touchIdentifier=s;const r=(0,th.getControlPosition)(e,s,this);if(r==null)return;const{x:a,y:o}=r,l=(0,th.createCoreData)(this,a,o);(0,t_.default)("DraggableCore: handleDragStart: %j",l),(0,t_.default)("calling",this.props.onStart),!(this.props.onStart(e,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,$s.addUserSelectStyles)(n),this.dragging=!0,this.lastX=a,this.lastY=o,(0,$s.addEvent)(n,ih.move,this.handleDrag),(0,$s.addEvent)(n,ih.stop,this.handleDragStop))}),gr(this,"handleDrag",e=>{const t=(0,th.getControlPosition)(e,this.touchIdentifier,this);if(t==null)return;let{x:n,y:s}=t;if(Array.isArray(this.props.grid)){let o=n-this.lastX,l=s-this.lastY;if([o,l]=(0,th.snapToGrid)(this.props.grid,o,l),!o&&!l)return;n=this.lastX+o,s=this.lastY+l}const r=(0,th.createCoreData)(this,n,s);if((0,t_.default)("DraggableCore: handleDrag: %j",r),this.props.onDrag(e,r)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=n,this.lastY=s}),gr(this,"handleDragStop",e=>{if(!this.dragging)return;const t=(0,th.getControlPosition)(e,this.touchIdentifier,this);if(t==null)return;let{x:n,y:s}=t;if(Array.isArray(this.props.grid)){let l=n-this.lastX||0,c=s-this.lastY||0;[l,c]=(0,th.snapToGrid)(this.props.grid,l,c),n=this.lastX+l,s=this.lastY+c}const r=(0,th.createCoreData)(this,n,s);if(this.props.onStop(e,r)===!1||this.mounted===!1)return!1;const o=this.findDOMNode();o&&this.props.enableUserSelectHack&&(0,$s.removeUserSelectStyles)(o.ownerDocument),(0,t_.default)("DraggableCore: handleDragStop: %j",r),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,o&&((0,t_.default)("DraggableCore: Removing handlers"),(0,$s.removeEvent)(o.ownerDocument,ih.move,this.handleDrag),(0,$s.removeEvent)(o.ownerDocument,ih.stop,this.handleDragStop))}),gr(this,"onMouseDown",e=>(ih=Xo.mouse,this.handleDragStart(e))),gr(this,"onMouseUp",e=>(ih=Xo.mouse,this.handleDragStop(e))),gr(this,"onTouchStart",e=>(ih=Xo.touch,this.handleDragStart(e))),gr(this,"onTouchEnd",e=>(ih=Xo.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,$s.addEvent)(e,Xo.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;(0,$s.removeEvent)(t,Xo.mouse.move,this.handleDrag),(0,$s.removeEvent)(t,Xo.touch.move,this.handleDrag),(0,$s.removeEvent)(t,Xo.mouse.stop,this.handleDragStop),(0,$s.removeEvent)(t,Xo.touch.stop,this.handleDragStop),(0,$s.removeEvent)(e,Xo.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,$s.removeUserSelectStyles)(t)}}findDOMNode(){var e,t;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(t=this.props)===null||t===void 0||(t=t.nodeRef)===null||t===void 0?void 0:t.current:T5e.default.findDOMNode(this)}render(){return yM.cloneElement(yM.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};uP.default=dP;gr(dP,"displayName","DraggableCore");gr(dP,"propTypes",{allowAnyClick:Mr.default.bool,children:Mr.default.node.isRequired,disabled:Mr.default.bool,enableUserSelectHack:Mr.default.bool,offsetParent:function(i,e){if(i[e]&&i[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Mr.default.arrayOf(Mr.default.number),handle:Mr.default.string,cancel:Mr.default.string,nodeRef:Mr.default.object,onStart:Mr.default.func,onDrag:Mr.default.func,onStop:Mr.default.func,onMouseDown:Mr.default.func,scale:Mr.default.number,className:_M.dontSetMe,style:_M.dontSetMe,transform:_M.dontSetMe});gr(dP,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(i){Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),i.default=void 0;var e=d(H),t=u(X1),n=u(Nf),s=u(YNe),r=In,a=Dc,o=Lc,l=u(uP),c=u(hP);function u(b){return b&&b.__esModule?b:{default:b}}function h(b){if(typeof WeakMap!="function")return null;var x=new WeakMap,S=new WeakMap;return(h=function(C){return C?S:x})(b)}function d(b,x){if(b&&b.__esModule)return b;if(b===null||typeof b!="object"&&typeof b!="function")return{default:b};var S=h(x);if(S&&S.has(b))return S.get(b);var C={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in b)if(A!=="default"&&Object.prototype.hasOwnProperty.call(b,A)){var T=w?Object.getOwnPropertyDescriptor(b,A):null;T&&(T.get||T.set)?Object.defineProperty(C,A,T):C[A]=b[A]}return C.default=b,S&&S.set(b,C),C}function p(){return p=Object.assign?Object.assign.bind():function(b){for(var x=1;x<arguments.length;x++){var S=arguments[x];for(var C in S)Object.prototype.hasOwnProperty.call(S,C)&&(b[C]=S[C])}return b},p.apply(this,arguments)}function f(b,x,S){return x=g(x),x in b?Object.defineProperty(b,x,{value:S,enumerable:!0,configurable:!0,writable:!0}):b[x]=S,b}function g(b){var x=m(b,"string");return typeof x=="symbol"?x:String(x)}function m(b,x){if(typeof b!="object"||b===null)return b;var S=b[Symbol.toPrimitive];if(S!==void 0){var C=S.call(b,x||"default");if(typeof C!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(b)}class y extends e.Component{static getDerivedStateFromProps(x,S){let{position:C}=x,{prevPropsPosition:w}=S;return C&&(!w||C.x!==w.x||C.y!==w.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:C,prevPropsPosition:w}),{x:C.x,y:C.y,prevPropsPosition:{...C}}):null}constructor(x){super(x),f(this,"onDragStart",(S,C)=>{if((0,c.default)("Draggable: onDragStart: %j",C),this.props.onStart(S,(0,a.createDraggableData)(this,C))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(S,C)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",C);const w=(0,a.createDraggableData)(this,C),A={x:w.x,y:w.y,slackX:0,slackY:0};if(this.props.bounds){const{x:E,y:P}=A;A.x+=this.state.slackX,A.y+=this.state.slackY;const[O,M]=(0,a.getBoundPosition)(this,A.x,A.y);A.x=O,A.y=M,A.slackX=this.state.slackX+(E-A.x),A.slackY=this.state.slackY+(P-A.y),w.x=A.x,w.y=A.y,w.deltaX=A.x-this.state.x,w.deltaY=A.y-this.state.y}if(this.props.onDrag(S,w)===!1)return!1;this.setState(A)}),f(this,"onDragStop",(S,C)=>{if(!this.state.dragging||this.props.onStop(S,(0,a.createDraggableData)(this,C))===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",C);const A={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:E,y:P}=this.props.position;A.x=E,A.y=P}this.setState(A)}),this.state={dragging:!1,dragged:!1,x:x.position?x.position.x:x.defaultPosition.x,y:x.position?x.position.y:x.defaultPosition.y,prevPropsPosition:{...x.position},slackX:0,slackY:0,isElementSVG:!1},x.position&&!(x.onDrag||x.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var x,S;return(x=(S=this.props)===null||S===void 0||(S=S.nodeRef)===null||S===void 0?void 0:S.current)!==null&&x!==void 0?x:n.default.findDOMNode(this)}render(){const{axis:x,bounds:S,children:C,defaultPosition:w,defaultClassName:A,defaultClassNameDragging:T,defaultClassNameDragged:E,position:P,positionOffset:O,scale:M,...R}=this.props;let j={},I=null;const z=!!!P||this.state.dragging,$=P||w,V={x:(0,a.canDragX)(this)&&z?this.state.x:$.x,y:(0,a.canDragY)(this)&&z?this.state.y:$.y};this.state.isElementSVG?I=(0,r.createSVGTransform)(V,O):j=(0,r.createCSSTransform)(V,O);const L=(0,s.default)(C.props.className||"",A,{[T]:this.state.dragging,[E]:this.state.dragged});return e.createElement(l.default,p({},R,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(C),{className:L,style:{...C.props.style,...j},transform:I}))}}i.default=y,f(y,"displayName","Draggable"),f(y,"propTypes",{...l.default.propTypes,axis:t.default.oneOf(["both","x","y","none"]),bounds:t.default.oneOfType([t.default.shape({left:t.default.number,right:t.default.number,top:t.default.number,bottom:t.default.number}),t.default.string,t.default.oneOf([!1])]),defaultClassName:t.default.string,defaultClassNameDragging:t.default.string,defaultClassNameDragged:t.default.string,defaultPosition:t.default.shape({x:t.default.number,y:t.default.number}),positionOffset:t.default.shape({x:t.default.oneOfType([t.default.number,t.default.string]),y:t.default.oneOfType([t.default.number,t.default.string])}),position:t.default.shape({x:t.default.number,y:t.default.number}),className:o.dontSetMe,style:o.dontSetMe,transform:o.dontSetMe}),f(y,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(dte);const{default:xte,DraggableCore:M5e}=dte;cP.exports=xte;cP.exports.default=xte;cP.exports.DraggableCore=M5e;var I5e=cP.exports,gN={};gN.__esModule=!0;gN.cloneElement=j5e;var R5e=L5e(H);function L5e(i){return i&&i.__esModule?i:{default:i}}function rH(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function aH(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rH(Object(t),!0).forEach(function(n){D5e(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):rH(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function D5e(i,e,t){return e=F5e(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function F5e(i){var e=B5e(i,"string");return typeof e=="symbol"?e:String(e)}function B5e(i,e){if(typeof i!="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function j5e(i,e){return e.style&&i.props.style&&(e.style=aH(aH({},i.props.style),e.style)),e.className&&i.props.className&&(e.className=i.props.className+" "+e.className),R5e.default.cloneElement(i,e)}var gx={};gx.__esModule=!0;gx.resizableProps=void 0;var Ct=N5e(X1);function N5e(i){return i&&i.__esModule?i:{default:i}}var $5e={axis:Ct.default.oneOf(["both","x","y","none"]),className:Ct.default.string,children:Ct.default.element.isRequired,draggableOpts:Ct.default.shape({allowAnyClick:Ct.default.bool,cancel:Ct.default.string,children:Ct.default.node,disabled:Ct.default.bool,enableUserSelectHack:Ct.default.bool,offsetParent:Ct.default.node,grid:Ct.default.arrayOf(Ct.default.number),handle:Ct.default.string,nodeRef:Ct.default.object,onStart:Ct.default.func,onDrag:Ct.default.func,onStop:Ct.default.func,onMouseDown:Ct.default.func,scale:Ct.default.number}),height:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var s=t[0];if(s.axis==="both"||s.axis==="y"){var r;return(r=Ct.default.number).isRequired.apply(r,t)}return Ct.default.number.apply(Ct.default,t)},handle:Ct.default.oneOfType([Ct.default.node,Ct.default.func]),handleSize:Ct.default.arrayOf(Ct.default.number),lockAspectRatio:Ct.default.bool,maxConstraints:Ct.default.arrayOf(Ct.default.number),minConstraints:Ct.default.arrayOf(Ct.default.number),onResizeStop:Ct.default.func,onResizeStart:Ct.default.func,onResize:Ct.default.func,resizeHandles:Ct.default.arrayOf(Ct.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:Ct.default.number,width:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var s=t[0];if(s.axis==="both"||s.axis==="x"){var r;return(r=Ct.default.number).isRequired.apply(r,t)}return Ct.default.number.apply(Ct.default,t)}};gx.resizableProps=$5e;fx.__esModule=!0;fx.default=void 0;var i_=W5e(H),z5e=I5e,H5e=gN,V5e=gx,U5e=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function Ste(i){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Ste=function(s){return s?t:e})(i)}function W5e(i,e){if(i&&i.__esModule)return i;if(i===null||typeof i!="object"&&typeof i!="function")return{default:i};var t=Ste(e);if(t&&t.has(i))return t.get(i);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in i)if(r!=="default"&&Object.prototype.hasOwnProperty.call(i,r)){var a=s?Object.getOwnPropertyDescriptor(i,r):null;a&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=i[r]}return n.default=i,t&&t.set(i,n),n}function TL(){return TL=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},TL.apply(this,arguments)}function G5e(i,e){if(i==null)return{};var t={},n=Object.keys(i),s,r;for(r=0;r<n.length;r++)s=n[r],!(e.indexOf(s)>=0)&&(t[s]=i[s]);return t}function oH(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function vM(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oH(Object(t),!0).forEach(function(n){K5e(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):oH(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function K5e(i,e,t){return e=X5e(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function X5e(i){var e=Y5e(i,"string");return typeof e=="symbol"?e:String(e)}function Y5e(i,e){if(typeof i!="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function q5e(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,EL(i,e)}function EL(i,e){return EL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},EL(i,e)}var mN=function(i){q5e(e,i);function e(){for(var n,s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return n=i.call.apply(i,[this].concat(r))||this,n.handleRefs={},n.lastHandleRect=null,n.slack=null,n}var t=e.prototype;return t.componentWillUnmount=function(){this.resetData()},t.resetData=function(){this.lastHandleRect=this.slack=null},t.runConstraints=function(s,r){var a=this.props,o=a.minConstraints,l=a.maxConstraints,c=a.lockAspectRatio;if(!o&&!l&&!c)return[s,r];if(c){var u=this.props.width/this.props.height,h=s-this.props.width,d=r-this.props.height;Math.abs(h)>Math.abs(d*u)?r=s/u:s=r*u}var p=s,f=r,g=this.slack||[0,0],m=g[0],y=g[1];return s+=m,r+=y,o&&(s=Math.max(o[0],s),r=Math.max(o[1],r)),l&&(s=Math.min(l[0],s),r=Math.min(l[1],r)),this.slack=[m+(p-s),y+(f-r)],[s,r]},t.resizeHandler=function(s,r){var a=this;return function(o,l){var c=l.node,u=l.deltaX,h=l.deltaY;s==="onResizeStart"&&a.resetData();var d=(a.props.axis==="both"||a.props.axis==="x")&&r!=="n"&&r!=="s",p=(a.props.axis==="both"||a.props.axis==="y")&&r!=="e"&&r!=="w";if(!(!d&&!p)){var f=r[0],g=r[r.length-1],m=c.getBoundingClientRect();if(a.lastHandleRect!=null){if(g==="w"){var y=m.left-a.lastHandleRect.left;u+=y}if(f==="n"){var b=m.top-a.lastHandleRect.top;h+=b}}a.lastHandleRect=m,g==="w"&&(u=-u),f==="n"&&(h=-h);var x=a.props.width+(d?u/a.props.transformScale:0),S=a.props.height+(p?h/a.props.transformScale:0),C=a.runConstraints(x,S);x=C[0],S=C[1];var w=x!==a.props.width||S!==a.props.height,A=typeof a.props[s]=="function"?a.props[s]:null,T=s==="onResize"&&!w;A&&!T&&(o.persist==null||o.persist(),A(o,{node:c,size:{width:x,height:S},handle:r})),s==="onResizeStop"&&a.resetData()}}},t.renderResizeHandle=function(s,r){var a=this.props.handle;if(!a)return i_.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+s,ref:r});if(typeof a=="function")return a(s,r);var o=typeof a.type=="string",l=vM({ref:r},o?{}:{handleAxis:s});return i_.cloneElement(a,l)},t.render=function(){var s=this,r=this.props,a=r.children,o=r.className,l=r.draggableOpts;r.width,r.height,r.handle,r.handleSize,r.lockAspectRatio,r.axis,r.minConstraints,r.maxConstraints,r.onResize,r.onResizeStop,r.onResizeStart;var c=r.resizeHandles;r.transformScale;var u=G5e(r,U5e);return(0,H5e.cloneElement)(a,vM(vM({},u),{},{className:(o?o+" ":"")+"react-resizable",children:[].concat(a.props.children,c.map(function(h){var d,p=(d=s.handleRefs[h])!=null?d:s.handleRefs[h]=i_.createRef();return i_.createElement(z5e.DraggableCore,TL({},l,{nodeRef:p,key:"resizableHandle-"+h,onStop:s.resizeHandler("onResizeStop",h),onStart:s.resizeHandler("onResizeStart",h),onDrag:s.resizeHandler("onResize",h)}),s.renderResizeHandle(h,p))}))}))},e}(i_.Component);fx.default=mN;mN.propTypes=V5e.resizableProps;mN.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var pP={};pP.__esModule=!0;pP.default=void 0;var bM=t4e(H),Z5e=Cte(X1),J5e=Cte(fx),Q5e=gx,e4e=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function Cte(i){return i&&i.__esModule?i:{default:i}}function wte(i){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(wte=function(s){return s?t:e})(i)}function t4e(i,e){if(i&&i.__esModule)return i;if(i===null||typeof i!="object"&&typeof i!="function")return{default:i};var t=wte(e);if(t&&t.has(i))return t.get(i);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in i)if(r!=="default"&&Object.prototype.hasOwnProperty.call(i,r)){var a=s?Object.getOwnPropertyDescriptor(i,r):null;a&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=i[r]}return n.default=i,t&&t.set(i,n),n}function PL(){return PL=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},PL.apply(this,arguments)}function lH(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function lA(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lH(Object(t),!0).forEach(function(n){i4e(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):lH(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function i4e(i,e,t){return e=n4e(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function n4e(i){var e=s4e(i,"string");return typeof e=="symbol"?e:String(e)}function s4e(i,e){if(typeof i!="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function r4e(i,e){if(i==null)return{};var t={},n=Object.keys(i),s,r;for(r=0;r<n.length;r++)s=n[r],!(e.indexOf(s)>=0)&&(t[s]=i[s]);return t}function a4e(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,OL(i,e)}function OL(i,e){return OL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},OL(i,e)}var Ate=function(i){a4e(e,i);function e(){for(var n,s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return n=i.call.apply(i,[this].concat(r))||this,n.state={width:n.props.width,height:n.props.height,propsWidth:n.props.width,propsHeight:n.props.height},n.onResize=function(o,l){var c=l.size;n.props.onResize?(o.persist==null||o.persist(),n.setState(c,function(){return n.props.onResize&&n.props.onResize(o,l)})):n.setState(c)},n}e.getDerivedStateFromProps=function(s,r){return r.propsWidth!==s.width||r.propsHeight!==s.height?{width:s.width,height:s.height,propsWidth:s.width,propsHeight:s.height}:null};var t=e.prototype;return t.render=function(){var s=this.props,r=s.handle,a=s.handleSize;s.onResize;var o=s.onResizeStart,l=s.onResizeStop,c=s.draggableOpts,u=s.minConstraints,h=s.maxConstraints,d=s.lockAspectRatio,p=s.axis;s.width,s.height;var f=s.resizeHandles,g=s.style,m=s.transformScale,y=r4e(s,e4e);return bM.createElement(J5e.default,{axis:p,draggableOpts:c,handle:r,handleSize:a,height:this.state.height,lockAspectRatio:d,maxConstraints:h,minConstraints:u,onResizeStart:o,onResize:this.onResize,onResizeStop:l,resizeHandles:f,transformScale:m,width:this.state.width},bM.createElement("div",PL({},y,{style:lA(lA({},g),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},e}(bM.Component);pP.default=Ate;Ate.propTypes=lA(lA({},Q5e.resizableProps),{},{children:Z5e.default.element});hN.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};var o4e=hN.exports.Resizable=fx.default;hN.exports.ResizableBox=pP.default;var l4e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};class c4e extends k.PureComponent{render(){const e=this.props,{onResize:t,onResizeStart:n,onResizeStop:s,width:r,resize:a}=e,o=l4e(e,["onResize","onResizeStart","onResizeStop","width","resize"]);if(typeof r!="number"||a===!1)return k.createElement("th",Object.assign({},o));let{children:l}=o;return l=k.Children.map(l,(c,u)=>k.createElement(k.Fragment,{key:u},c)),k.createElement(o4e,{width:r,height:0,onResize:t,onResizeStart:n,onResizeStop:s,draggableOpts:{enableUserSelectHack:!1},axis:"x"},k.createElement("th",Object.assign({},o),l))}}var u4e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const h4e=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;const{components:t,columns:n,resizable:s}=i,r=u4e(i,["components","columns","resizable"]),a="children",o=ne(s,"onResize",J),l=ne(s,"onResizeStart",J),c=ne(s,"onResizeStop",J),u=Array.isArray(n)&&n.length?n:aA(i.children),h=rA(sl(u),a),d=rA(sl(u),a);typeof i.expandedRowRender=="function"&&!i.hideExpandedColumn&&!uf(h,A=>A.key===Je.DEFAULT_KEY_COLUMN_EXPAND)&&d.unshift({key:Je.DEFAULT_KEY_COLUMN_EXPAND,width:Vn.DEFAULT_WIDTH_COLUMN_EXPAND}),i.rowSelection&&!ne(i.rowSelection,"hidden")&&!uf(h,A=>A.key===Je.DEFAULT_KEY_COLUMN_SELECTION)&&d.unshift({width:ne(i,"rowSelection.width",Vn.DEFAULT_WIDTH_COLUMN_SELECTION),key:Je.DEFAULT_KEY_COLUMN_SELECTION});const[p,f]=H.useState(d);H.useEffect(()=>{const A=g3e(p,d);f(SL(p,A))},[n,i.expandedRowRender,i.hideExpandedColumn,i.rowSelection]);const g=H.useMemo(()=>Q1({header:{cell:c4e}},t),[t]),m=ne(s,"handlerClassName","resizing"),y=A=>(T,E)=>{let{size:P}=E;const O=sl(p),M=ZC(O,A,a);let R=Object.assign(Object.assign({},M),{width:P.width});const j=o(R)||{};R=Object.assign(Object.assign({},R),j),Object.assign(M,R),f(O)},b=A=>T=>{const E=sl(p),P=ZC(E,A,a);let O=Object.assign(Object.assign({},P),{className:GNe(P.className,m)});const M=l(O)||{};O=Object.assign(Object.assign({},O),M),Object.assign(P,O),f(E)},x=A=>T=>{const E=sl(p),P=ZC(E,A,a);let O=Object.assign(Object.assign({},P),{className:KNe(P.className,m)});const M=c(O)||{};O=Object.assign(Object.assign({},O),M),Object.assign(P,O),f(E)},S=function(A,T){let E=arguments.length>3?arguments[3]:void 0;return Object.assign(Object.assign({},A),{onHeaderCell:P=>Object.assign(Object.assign({},E),{width:P.width,onResize:y(P),onResizeStart:b(P),onResizeStop:x(P)})})},C=function(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.isArray(A)&&A.length?A.map((E,P)=>{var O,M;const R=(M=(O=E.onHeaderCell)===null||O===void 0?void 0:O.call(E,E,P,T))!==null&&M!==void 0?M:{};Object.assign(E,S(E,P,T,R));const j=E[a];return Array.isArray(j)&&j.length&&(E[a]=C(j,T+1)),E}):[]},w=H.useMemo(()=>C(p),[p]);return k.createElement(y0,Object.assign({},r,{columns:w,components:g,ref:e}))},d4e=k.forwardRef(h4e);class Fc extends k.PureComponent{constructor(e){super(e),this.getCurrentPageData=()=>this.tableRef.current&&this.tableRef.current.getCurrentPageData(),this.tableRef=k.createRef()}render(){var e;const t=this.props,n=(e=this.props.direction)!==null&&e!==void 0?e:this.context.direction;return t.resizable?k.createElement(d4e,Object.assign({},t,{ref:this.tableRef,direction:n})):k.createElement(y0,Object.assign({},t,{ref:this.tableRef,direction:n}))}}Fc.Column=py;Fc.DEFAULT_KEY_COLUMN_SELECTION=Je.DEFAULT_KEY_COLUMN_SELECTION;Fc.DEFAULT_KEY_COLUMN_EXPAND=Je.DEFAULT_KEY_COLUMN_EXPAND;Fc.propTypes=Object.assign(Object.assign({},y0.propTypes),{resizable:v.oneOfType([v.bool,v.object])});Fc.defaultProps={hideExpandedColumn:!0};Fc.contextType=Da;class yN extends tt{constructor(e){super(Object.assign(Object.assign({},yN.defaultAdapter),e)),this.handleMouseInSideChange=t=>{this._adapter.handleMouseInSideChange(t)},this.getInputWrapperRect=()=>this._adapter.getInputWrapperRect()}hasToast(e){return this._adapter.getState("list").map(n=>{let{id:s}=n;return s}).includes(e)}addToast(e){const t=this._adapter.getState("list");t.push(e),this._adapter.updateToast(t,[],[])}updateToast(e,t){let n=this._adapter.getState("list");n=n.map(r=>r.id===e?Object.assign(Object.assign({},r),t):r);const s=n.filter(r=>r.id===e);this._adapter.updateToast(n,[],s)}removeToast(e){let t=this._adapter.getState("list");const n=[];t=t.filter(s=>s.id===e?(n.push(s),!1):!0),this._adapter.updateToast(t,n,[])}destroyAll(){const e=this._adapter.getState("list");e.length>0&&this._adapter.updateToast([],e,[])}}const xM=`${ge}-toast`,Ig={PREFIX:xM,WRAPPER:`${xM}-wrapper`,LIST:`${xM}-list`},nv={types:["warning","success","info","error","default"],themes:["normal","light"],directions:["ltr","rtl"]},p4e={duration:3};class _N extends tt{constructor(e){super(Object.assign(Object.assign({},_N.defaultAdapter),e)),this._timer=null,this._id=null}init(){this.startCloseTimer_(),this._id=this._adapter.getProp("id")}destroy(){this.clearCloseTimer_()}startCloseTimer_(){const e=this._adapter.getProp("duration");e&&Sa(e)&&(this._timer=setTimeout(()=>{this.close()},e*1e3))}close(e){e&&e.stopPropagation(),this._adapter.notifyWrapperToRemove(this._id),this._adapter.notifyClose()}clearCloseTimer_(){this._timer&&(clearTimeout(this._timer),this._timer=null)}restartCloseTimer(){this.clearCloseTimer_(),this.startCloseTimer_()}}const Ho=Ig.PREFIX;let df=class extends Ve{constructor(e){super(e),this.toastEle=k.createRef(),this.clearCloseTimer=()=>{this.foundation.clearCloseTimer_()},this.startCloseTimer=()=>{this.foundation.startCloseTimer_()},this.restartCloseTimer=()=>{this.foundation.restartCloseTimer()},this.state={},this.foundation=new _N(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyWrapperToRemove:e=>{this.props.close(e)},notifyClose:()=>{this.props.onClose()}})}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}close(e){this.foundation.close(e)}renderIcon(){const{type:e,icon:t}=this.props,s={warning:k.createElement(ix,null),success:k.createElement(WE,null),info:k.createElement(wl,null),error:k.createElement(tx,null)}[e],r="large",a=K(`${Ho}-icon`,`${Ho}-icon-${e}`);return t?oo(t)?k.cloneElement(t,{size:r,className:`${Ho}-icon`}):t:e&&s?k.cloneElement(s,{size:r,className:a}):null}render(){const{content:e,type:t,theme:n,showClose:s,textMaxWidth:r,className:a,style:o}=this.props,l=this.props.direction||this.context.direction,c=K(Ho,a,{[`${Ho}-${t}`]:!0,[`${Ho}-${n}`]:n==="light",[`${Ho}-rtl`]:l==="rtl"}),u={};u.maxWidth=r;const h="borderless",d="small",p=this.props.positionInList?this.props.positionInList.length-this.props.positionInList.index-1:0,f=k.createElement("div",{ref:this.toastEle,role:"alert","aria-label":`${t||"default"} type`,className:c,style:Object.assign(Object.assign({},o),{transform:`translate3d(0,0,${p*-10}px)`}),onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onAnimationStart:this.props.onAnimationStart,onAnimationEnd:this.props.onAnimationEnd},k.createElement("div",{className:`${Ho}-content`},this.renderIcon(),k.createElement("span",{className:`${Ho}-content-text`,style:u,"x-semi-prop":"content"},e),s&&k.createElement("div",{className:`${Ho}-close-button`},k.createElement(Ml,{onClick:g=>this.close(g),type:"tertiary",icon:k.createElement(Rc,{"x-semi-prop":"icon"}),theme:h,size:d}))));if(this.props.stack){const g=this.props.stackExpanded&&this.toastEle.current&&getComputedStyle(this.toastEle.current).height||0;return k.createElement("div",{className:`${Ho}-zero-height-wrapper`,style:{height:g}},f)}else return f}};df.contextType=Da;df.propTypes={onClose:v.func,content:v.node,close:v.func,duration:v.number,theme:v.oneOf(nv.themes),type:v.oneOf(nv.types),textMaxWidth:v.oneOfType([v.string,v.number]),style:v.object,className:v.string,showClose:v.bool,stack:v.bool,stackExpanded:v.bool,icon:v.node,direction:v.oneOf(nv.directions)};df.__SemiComponentName__="Toast";df.defaultProps=os(df.__SemiComponentName__,{onClose:J,content:"",close:J,duration:p4e.duration,textMaxWidth:450,showClose:!0,stack:!1,stackExpanded:!1,theme:"normal"});var f4e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const g4e=(i,e)=>{var{afterClose:t}=i,n=f4e(i,["afterClose"]);const[s,r]=H.useState(!0),a=()=>{r(!1)};return k.useImperativeHandle(e,()=>({close:()=>{r(!1)}})),H.useEffect(()=>{s||t(n.id)},[s]),s?k.createElement(df,Object.assign({},n,{close:a})):null},m4e=k.forwardRef(g4e),n_={motion:!0,zIndex:1010,duration:3};function y4e(){const[i,e]=k.useState([]);function t(n,s){return e(r=>[{element:n,config:s},...r]),r=>{e(a=>a.filter(o=>{let{config:l}=o;return l.id!==r}))}}return[i,t]}function _4e(){const[i,e]=y4e(),t=H.useRef(new Map),n=r=>{const a=rf("semi_toast_"),o=Object.assign(Object.assign({},r),{id:a});let l;const c=k.createElement(m4e,Object.assign({},o,{key:a,afterClose:u=>l(u),ref:u=>{var h;t.current.set(a,{close:(h=u==null?void 0:u.close)!==null&&h!==void 0?h:J})}}));return l=e(c,Object.assign({},o)),a},s=r=>{var a;const{close:o}=(a=t.current.get(r))!==null&&a!==void 0?a:{};o==null||o()};return[{success:r=>n(Object.assign(Object.assign(Object.assign({},n_),r),{type:"success"})),info:r=>n(Object.assign(Object.assign(Object.assign({},n_),r),{type:"info"})),error:r=>n(Object.assign(Object.assign(Object.assign({},n_),r),{type:"error"})),warning:r=>n(Object.assign(Object.assign(Object.assign({},n_),r),{type:"warning"})),open:r=>n(Object.assign(Object.assign(Object.assign({},n_),r),{type:"default"})),close:r=>s(r)},k.createElement(k.Fragment,null,Array.isArray(i)&&i.length?k.createElement(k.Fragment,null,i.map(r=>r.element)):null)]}const v4e=()=>{var i;return i=class mi extends Ve{constructor(t){super(t),this.stack=!1,this.innerWrapperRef=k.createRef(),this.handleMouseEnter=n=>{this.stack&&this.foundation.handleMouseInSideChange(!0)},this.handleMouseLeave=n=>{var s;this.stack&&(!((s=this.foundation.getInputWrapperRect())===null||s===void 0)&&s.height)&&this.foundation.handleMouseInSideChange(!1)},this.state={list:[],removedItems:[],updatedItems:[],mouseInSide:!1},this.foundation=new yN(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{updateToast:(t,n,s)=>{this.setState({list:t,removedItems:n,updatedItems:s})},handleMouseInSideChange:t=>{this.setState({mouseInSide:t})},getInputWrapperRect:()=>{var t;return(t=this.innerWrapperRef.current)===null||t===void 0?void 0:t.getBoundingClientRect()}})}static create(t){var n;const s=(n=t.id)!==null&&n!==void 0?n:rf("toast");if(mi.ref){const r=document.querySelector(`#${this.wrapperId}`);["top","left","bottom","right"].map(a=>{a in t&&(r.style[a]=typeof t[a]=="number"?`${t[a]}px`:t[a])}),!!t.stack!==mi.ref.stack&&(mi.ref.stack=!!t.stack),mi.ref.has(s)?mi.ref.update(s,Object.assign(Object.assign({},t),{id:s})):mi.ref.add(Object.assign(Object.assign({},t),{id:s}))}else{const r=document.createElement("div");this.wrapperId||(this.wrapperId=rf("toast-wrapper").slice(0,26)),r.className=Ig.WRAPPER,r.id=this.wrapperId,r.style.zIndex=String(typeof t.zIndex=="number"?t.zIndex:mi.defaultOpts.zIndex),["top","left","bottom","right"].map(a=>{if(a in mi.defaultOpts||a in t){const o=t[a]?t[a]:mi.defaultOpts[a];r.style[a]=typeof o=="number"?`${o}px`:o}}),mi.defaultOpts.getPopupContainer?mi.defaultOpts.getPopupContainer().appendChild(r):document.body.appendChild(r),vr.render(k.createElement(mi,{ref:a=>mi.ref=a}),r,()=>{mi.ref.add(Object.assign(Object.assign({},t),{id:s})),mi.ref.stack=!!t.stack})}return s}static close(t){mi.ref&&mi.ref.remove(t)}static destroyAll(){if(mi.ref){mi.ref.destroyAll();const t=document.querySelector(`#${this.wrapperId}`);vr.unmountComponentAtNode(t),t&&t.parentNode.removeChild(t),mi.ref=null,this.wrapperId=null}}static getWrapperId(){return this.wrapperId}static info(t){return typeof t=="string"&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},mi.defaultOpts),t),{type:"info"}))}static warning(t){return typeof t=="string"&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},mi.defaultOpts),t),{type:"warning"}))}static error(t){return typeof t=="string"&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},mi.defaultOpts),t),{type:"error"}))}static success(t){return typeof t=="string"&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},mi.defaultOpts),t),{type:"success"}))}static config(t){["top","left","bottom","right"].forEach(n=>{n in t&&(mi.defaultOpts[n]=t[n])}),typeof t.theme=="string"&&nv.themes.includes(t.theme)&&(mi.defaultOpts.theme=t.theme),typeof t.zIndex=="number"&&(mi.defaultOpts.zIndex=t.zIndex),typeof t.duration=="number"&&(mi.defaultOpts.duration=t.duration),typeof t.getPopupContainer=="function"&&(mi.defaultOpts.getPopupContainer=t.getPopupContainer)}has(t){return this.foundation.hasToast(t)}add(t){return this.foundation.addToast(t)}update(t,n){return this.foundation.updateToast(t,n)}remove(t){return this.foundation.removeToast(t)}destroyAll(){return this.foundation.destroyAll()}render(){let{list:t}=this.state;const{removedItems:n,updatedItems:s}=this.state;t=Array.from(new Set([...t,...n]));const r=s.map(o=>{let{id:l}=o;return l}),a=o=>{var l;!((l=o==null?void 0:o.foundation)===null||l===void 0)&&l._id&&r.includes(o.foundation._id)&&o.foundation.restartCloseTimer()};return k.createElement(k.Fragment,null,k.createElement("div",{className:K({[`${Ig.PREFIX}-innerWrapper`]:!0,[`${Ig.PREFIX}-innerWrapper-hover`]:this.state.mouseInSide}),ref:this.innerWrapperRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},t.map((o,l)=>{const c=n.find(u=>u.id===o.id)!==void 0;return k.createElement(Sc,{key:o.id,motion:o.motion,animationState:c?"leave":"enter",startClassName:c?`${Ig.PREFIX}-animation-hide`:`${Ig.PREFIX}-animation-show`},u=>{let{animationClassName:h,animationEventsNeedBind:d,isAnimating:p}=u;return c&&!p?null:k.createElement(df,Object.assign({},o,{stack:this.stack,stackExpanded:this.state.mouseInSide,positionInList:{length:t.length,index:l},className:K({[o.className]:!!o.className,[h]:!0})},d,{style:Object.assign({},o.style),close:f=>this.remove(f),ref:a}))})})))}},i.defaultOpts={motion:!0,zIndex:1010,content:""},i.propTypes={content:v.node,duration:v.number,onClose:v.func,icon:v.node,direction:v.oneOf(nv.directions),stack:v.bool},i.defaultProps={},i};class b4e{static create(e){const t=v4e();return t.useToast=_4e,e&&t.config(e),t}}const ML=b4e.create(),cH=`${ge}-upload`,uH="picture",hH="list",x4e=.95,kte={PREFIX:cH,LIST:`${cH}-list`},dH="auto",pH="custom",Wt={FILE_STATUS_UPLOADING:"uploading",FILE_STATUS_SUCCESS:"success",FILE_STATUS_UPLOAD_FAIL:"uploadFail",FILE_STATUS_VALIDATING:"validating",FILE_STATUS_VALID_FAIL:"validateFail",FILE_STATUS_WAIT_UPLOAD:"wait",FILE_LIST_PIC:uH,FILE_LIST_DEFAULT:hH,LIST_TYPE:[uH,hH],imageTypes:["image","webp","png","svg","gif","jpg","jpeg","bmp","dpg"],DRAG_AREA_DEFAULT:"default",DRAG_AREA_LEGAL:"legal",DRAG_AREA_ILLEGAL:"illegal",TRIGGER_AUTO:dH,TRIGGER_CUSTOM:pH,UPLOAD_TRIGGER:[dH,pH],VALIDATE_STATUS:$3,PROMPT_POSITION:["left","right","bottom"]},S4e={PROGRESS_COEFFICIENT:x4e};var IL=function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(a){a(r)})}return new(t||(t=Promise))(function(r,a){function o(u){try{c(n.next(u))}catch(h){a(h)}}function l(u){try{c(n.throw(u))}catch(h){a(h)}}function c(u){u.done?r(u.value):s(u.value).then(o,l)}c((n=n.apply(i,e||[])).next())})};const am=1024,SM=1048576;function RL(i){if(i<am)return`${(i/am).toFixed(2)}KB`;if(i>=am&&i<SM)return`${(i/am).toFixed(1)}KB`;if(i>=SM)return`${(i/SM).toFixed(1)}MB`}function C4e(i,e){return i.indexOf(e,i.length-e.length)!==-1}function w4e(i){return IL(this,void 0,void 0,function*(){return new Promise((e,t)=>{const n=i.createReader();let s=[];function r(){n.readEntries(a=>{const o=Array.prototype.slice.apply(a);s=s.concat(o),!o.length?e(s):r()},t)}r()})})}function A4e(i){return IL(this,void 0,void 0,function*(){const e=[],t=(n,s)=>IL(this,void 0,void 0,function*(){if(s=s||"",n.path=s,n.isFile)e.push(new Promise((r,a)=>{n.file(o=>{n.fullPath&&!o.webkitRelativePath&&(Object.defineProperties(o,{webkitRelativePath:{writable:!0}}),o.webkitRelativePath=n.fullPath.replace(/^\//,""),Object.defineProperties(o,{webkitRelativePath:{writable:!1}})),r(o)},a)}));else if(n.isDirectory){const r=yield w4e(n);for(let a=0;a<r.length;a++){const o=r[a];yield t(o,`${s}${n.name}/`)}}});try{const n=i.map(r=>t(r.webkitGetAsEntry()));return yield Promise.all(n),yield Promise.all(e)}catch(n){return console.warn("Captured error while loop directory."),console.error(n),[]}})}var k4e=function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(a){a(r)})}return new(t||(t=Promise))(function(r,a){function o(u){try{c(n.next(u))}catch(h){a(h)}}function l(u){try{c(n.throw(u))}catch(h){a(h)}}function c(u){u.done?r(u.value):s(u.value).then(o,l)}c((n=n.apply(i,e||[])).next())})};const{FILE_STATUS_UPLOADING:fH,FILE_STATUS_SUCCESS:T4e,FILE_STATUS_UPLOAD_FAIL:E4e,FILE_STATUS_VALID_FAIL:CM,FILE_STATUS_WAIT_UPLOAD:gH,DRAG_AREA_DEFAULT:wM,DRAG_AREA_LEGAL:P4e,TRIGGER_AUTO:PS}=Wt;class O4e extends tt{constructor(e){super(Object.assign({},e)),this.destroyState=!1}init(){this.destroyState=!1;const{disabled:e,addOnPasting:t}=this.getProps();t&&!e&&this.bindPastingHandler()}destroy(){const{disabled:e,addOnPasting:t}=this.getProps();this.releaseMemory(),e||this.unbindPastingHandler(),this.destroyState=!0}getError(e){let{action:t,xhr:n,message:s,fileName:r}=e;const a=n?n.status:0,o=s||`cannot post ${r} to ${t}, xhr status: ${a}'`,l=new Error(o);return l.status=a,l.method="post",l.url=t,l}getBody(e){if(!e)return;const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}checkFileSize(e){const{size:t}=e,{maxSize:n,minSize:s}=this.getProps();let r=!1;return(t>n*am||t<s*am)&&(r=!0),r}handleChange(e){const t=[],{limit:n,transformFile:s,accept:r}=this.getProps(),{fileList:a}=this.getStates();let o=Array.from(e);if(typeof r<"u"&&(o=o.filter(c=>{const u=this.checkFileFormat(r,c);return u||t.push(c),u}),t.length!==0&&this._adapter.notifyAcceptInvalid(t),o.length===0))return;o=o.map(c=>(s&&(c=s(c)),c.uid||(c.uid=Cp()),this.checkFileSize(c)&&(c._sizeInvalid=!0,c.status=CM,this._adapter.notifySizeError(c,a)),c));const l=a.length+o.length;if(typeof n<"u"&&l>n){if(this._adapter.notifyExceed(o),n===1){o=o.slice(-1),this._adapter.notifyFileSelect(o),this._adapter.resetInput(),this.replaceFileList(o);return}const c=n-a.length;o=o.slice(0,c)}this._adapter.notifyFileSelect(o),this._adapter.resetInput(),this.addFilesToList(o)}handleReplaceChange(e){if(e.length===0)return;const{transformFile:t,uploadTrigger:n,accept:s}=this.getProps(),{replaceIdx:r,fileList:a}=this.getStates();let o=Array.from(e).pop();if(typeof s<"u"&&!this.checkFileFormat(s,o)){this._adapter.notifyAcceptInvalid([o]);return}t&&(o=t(o)),o.uid||(o.uid=Cp()),this.checkFileSize(o)&&(o._sizeInvalid=!0,o.status=CM,this._adapter.notifySizeError(o,a)),this._adapter.notifyFileSelect([o]);const l=this.buildFileItem(o,n),c=[...a];c.splice(r,1,l),this._adapter.notifyChange({currentFile:l,fileList:c}),this._adapter.updateFileList(c,()=>{this._adapter.resetReplaceInput(),l._sizeInvalid||this.upload(l)})}buildFileItem(e,t){const{_sizeInvalid:n,status:s}=e;try{delete e._sizeInvalid,delete e.status}catch{}const r={status:s||(t===PS?fH:gH),name:e.name,size:RL(e.size),uid:e.uid,percent:0,fileInstance:e,url:this._createURL(e)};return n&&(r._sizeInvalid=!0),this.isImage(e)&&(r.preview=!0),r}replaceFileList(e){const{uploadTrigger:t}=this.getProps(),n=e.map(s=>this.buildFileItem(s,t));this._adapter.notifyChange({fileList:n,currentFile:n[0]}),this._adapter.updateFileList(n,()=>{t===PS&&this.startUpload(n)})}addFilesToList(e){const t=this.getState("fileList").slice(),{uploadTrigger:n}=this.getProps(),s=e.map(r=>this.buildFileItem(r,n));s.forEach(r=>{const a=t.findIndex(o=>o.uid===r.uid);a!==-1?t[a]=r:(t.push(r),this._adapter.notifyChange({fileList:t,currentFile:r}))}),this._adapter.updateFileList(t,()=>{n===PS&&this.startUpload(s)})}insertFileToList(e,t){const{limit:n,transformFile:s,accept:r,uploadTrigger:a}=this.getProps(),{fileList:o}=this.getStates(),l=[];let c=Array.from(e);if(typeof r<"u"&&(c=c.filter(p=>{const f=this.checkFileFormat(r,p);return f||l.push(p),f}),l.length!==0&&this._adapter.notifyAcceptInvalid(l),c.length===0))return;c=c.map(p=>(p.uid||(p.uid=Cp()),this.checkFileSize(p)&&(p._sizeInvalid=!0,p.status=CM,this._adapter.notifySizeError(p,o)),s&&(p=s(p)),p));const u=o.length+c.length;if(typeof n<"u"&&u>n){if(n===1){c=c.slice(-1),this._adapter.notifyFileSelect(c),this._adapter.resetInput(),this.replaceFileList(c);return}const p=n-o.length;c=c.slice(0,p),this._adapter.notifyExceed(c)}const h=c.map(p=>this.buildFileItem(p,a)),d=o.slice();typeof t<"u"?d.splice(t,0,...h):d.push(...h),this._adapter.notifyFileSelect(c),this._adapter.notifyChange({fileList:d,currentFile:null}),this._adapter.updateFileList(d,()=>{a===PS&&this.startUpload(h)})}manualUpload(){const e=this.getState("fileList").filter(t=>t.status===gH);this.startUpload(e)}startUpload(e){e.forEach(t=>{t._sizeInvalid||this.upload(t)})}upload(e){const{beforeUpload:t}=this.getProps();if(typeof t>"u"){this.post(e);return}if(typeof t=="function"){const{fileList:n}=this.getStates(),s=this._adapter.notifyBeforeUpload({file:e,fileList:n});switch(!0){case s===!0:{this.post(e);break}case s===!1:{const r={shouldUpload:!1,status:Wt.FILE_STATUS_VALID_FAIL};this.handleBeforeUploadResultInObject(r,e);break}case(s&&Ab(s)):{Promise.resolve(s).then(r=>{let a={shouldUpload:!0};Object.prototype.toString.call(r).slice(8,-1)==="Object"&&(a=Object.assign(Object.assign({},a),r)),this.handleBeforeUploadResultInObject(a,e)},r=>{let a={shouldUpload:!1,status:Wt.FILE_STATUS_VALID_FAIL};Object.prototype.toString.call(r).slice(8,-1)==="Object"&&(a=Object.assign(Object.assign({},a),r)),this.handleBeforeUploadResultInObject(a,e)});break}case typeof s=="object":this.handleBeforeUploadResultInObject(s,e);break}}}handleBeforeUploadResultInObject(e,t){const{shouldUpload:n,status:s,autoRemove:r,validateMessage:a,fileInstance:o}=e;let l=this.getState("fileList").slice();if(r)l=l.filter(c=>c.uid!==t.uid);else{const c=this._getFileIndex(t,l);if(c<0)return;s&&(l[c].status=s),a&&(l[c].validateMessage=a),o&&(o.uid=t.uid,l[c].fileInstance=o,l[c].size=RL(o.size),l[c].name=o.name,l[c].url=this._createURL(o)),l[c].shouldUpload=n}this._adapter.updateFileList(l),this._adapter.notifyChange({fileList:l,currentFile:t}),n&&this.post(t)}post(e){const{fileInstance:t}=e,n=this.getProps();if(typeof XMLHttpRequest>"u")return;const s=new XMLHttpRequest,r=new FormData,{action:a}=n;let{data:o}=n;o&&(typeof o=="function"&&(o=o(t)),Object.keys(o).forEach(u=>{r.append(u,o[u])}));const l=n.name||n.fileName||t.name;if(n.customRequest)return n.customRequest({fileName:l,data:o,file:e,fileInstance:t,onProgress:u=>this.handleProgress({e:u,fileInstance:t}),onError:(u,h)=>this.handleError({e:h,xhr:u,fileInstance:t}),onSuccess:(u,h)=>this.handleSuccess({response:u,fileInstance:t,e:h,isCustomRequest:!0}),withCredentials:n.withCredentials,action:n.action});r.append(l,t),s.open("post",a,!0),n.withCredentials&&"withCredentials"in s&&(s.withCredentials=!0),s.upload&&(s.upload.onprogress=u=>{this.destroyState?s.abort():this.handleProgress({e:u,fileInstance:t})}),s.onload=u=>{this.destroyState||this.handleOnLoad({e:u,xhr:s,fileInstance:t})},s.onerror=u=>{this.destroyState||this.handleError({e:u,xhr:s,fileInstance:t})};let c=n.headers||{};typeof c=="function"&&(c=c(t));for(const u in c)Object.prototype.hasOwnProperty.call(c,u)&&c[u]!==null&&s.setRequestHeader(u,c[u]);s.send(r)}handleProgress(e){let{e:t,fileInstance:n}=e;const{fileList:s}=this.getStates(),r=s.slice();let a=0;t.total>0&&(a=Number((t.loaded/t.total*100*S4e.PROGRESS_COEFFICIENT).toFixed(0))||0);const o=this._getFileIndex(n,r);o<0||(r[o].percent=a,r[o].status=fH,this._adapter.notifyProgress(a,n,r),this._adapter.updateFileList(r),this._adapter.notifyChange({fileList:r,currentFile:r[o]}))}handleOnLoad(e){let{e:t,xhr:n,fileInstance:s}=e;const{fileList:r}=this.getStates(),a=this._getFileIndex(s,r);a<0||(n.status<200||n.status>=300?this.handleError({e:t,xhr:n,fileInstance:s}):this.handleSuccess({e:t,xhr:n,fileInstance:s,index:a}))}handleSuccess(e){let{e:t,fileInstance:n,isCustomRequest:s=!1,xhr:r,response:a}=e;const{fileList:o}=this.getStates();let l=null;const c=this._getFileIndex(n,o);if(c<0)return;s?l=a:l=this.getBody(r);const u=o.slice(),{afterUpload:h}=this.getProps();if(u[c].status=T4e,u[c].percent=100,this._adapter.notifyProgress(100,n,u),u[c].response=l,t&&(u[c].event=t),h&&typeof h=="function"){const{autoRemove:d,status:p,validateMessage:f,name:g,url:m}=this._adapter.notifyAfterUpload({response:l,file:u[c],fileList:u})||{};p&&(u[c].status=p),f&&(u[c].validateMessage=f),g&&(u[c].name=g),m&&(u[c].url=m),d&&u.splice(c,1)}this._adapter.notifySuccess(l,n,u),this._adapter.notifyChange({fileList:u,currentFile:u[c]}),this._adapter.updateFileList(u)}_getFileIndex(e,t){return t.findIndex(n=>n.uid===e.uid)}handleRemove(e){const{disabled:t}=this.getProps();if(t)return;const{fileList:n}=this.getStates();Promise.resolve(this._adapter.notifyBeforeRemove(e,n)).then(s=>{if(s===!1)return;const r=n.slice(),a=this._getFileIndex(e,n);a<0||(r.splice(a,1),this._adapter.notifyRemove(e.fileInstance,r,e),this._adapter.updateFileList(r),this._adapter.notifyChange({fileList:r,currentFile:e}))})}handleError(e){let{e:t,xhr:n,fileInstance:s}=e;const{fileList:r}=this.getStates(),a=this._getFileIndex(s,r);if(a<0)return;const{action:o}=this.getProps(),l=r.slice(),c=this.getError({action:o,xhr:n,fileName:s.name});l[a].status=E4e,l[a].response=c,l[a].event=t,this._adapter.notifyError(c,s,l,n),this._adapter.updateFileList(l),this._adapter.notifyChange({currentFile:l[a],fileList:l})}handleClear(){const{disabled:e}=this.getProps(),{fileList:t}=this.getStates();e||Promise.resolve(this._adapter.notifyBeforeClear(t)).then(n=>{n!==!1&&(this._adapter.updateFileList([]),this._adapter.notifyClear(),this._adapter.notifyChange({fileList:[]}))}).catch(n=>{})}_createURL(e){const t=URL.createObjectURL(e),{localUrls:n}=this.getStates(),s=n.slice();return s.push(t),this._adapter.updateLocalUrls(s),t}releaseMemory(){const{localUrls:e}=this.getStates();e.forEach(t=>{this._releaseBlob(t)})}_releaseBlob(e){try{URL.revokeObjectURL(e)}catch(t){console.log(t)}}isImage(e){return/(webp|svg|png|gif|jpg|jpeg|bmp|dpg)$/i.test(e.type)}isMultiple(){return!!this.getProp("multiple")}handleDragEnter(e){e.preventDefault(),e.stopPropagation(),this._dragEnterTarget=e.currentTarget;const{disabled:t}=this.getProps();t||this._adapter.updateDragAreaStatus(P4e)}handleDirectoryDrop(e){return k4e(this,void 0,void 0,function*(){const t=this.getState("fileList").slice(),n=[].slice.call(e.dataTransfer.items),s=yield A4e(n);this.handleChange(s),this._adapter.updateDragAreaStatus(wM),this._adapter.notifyDrop(e,s,t)})}handleDrop(e){e.preventDefault(),e.stopPropagation();const{disabled:t,directory:n}=this.getProps(),s=this.getState("fileList").slice();if(!t){if(n){this.handleDirectoryDrop(e);return}const r=Array.from(e.dataTransfer.files);this.handleChange(r),this._adapter.updateDragAreaStatus(wM),this._adapter.notifyDrop(e,r,s)}}handleDragOver(e){e.preventDefault(),e.stopPropagation()}handleDragLeave(e){e.preventDefault(),e.stopPropagation(),this._dragEnterTarget===e.target&&this._adapter.updateDragAreaStatus(wM)}checkFileFormat(e,t){const n=e.split(",").map(a=>a.trim()).filter(a=>a),s=t.type||"",r=s.replace(/\/.*$/,"");return n.some(a=>{if(a.charAt(0)==="."){const o=t.name||"",l=a.split(".").pop().toLowerCase();return C4e(o.toLowerCase(),l)}if(/\/\*$/.test(a)){const o=a.replace(/\/.*$/,"");return r===o}return/^[^\/]+\/[^\/]+$/.test(a)?s===a:!1})}retry(e){const{onRetry:t}=this.getProps();t&&typeof t=="function"&&t(e),this.post(e)}handlePreviewClick(e){this._adapter.notifyPreviewClick(e)}readFileFromClipboard(e){for(const t of e)for(const n of t.types)n.startsWith("image")&&t.getType(n).then(s=>s.arrayBuffer()).then(s=>{const r=n.split("/")[1],a=new File([s],`upload.${r}`,{type:n});this.handleChange([a])})}handlePasting(e){const n=this._adapter.isMac()?e.metaKey:e.ctrlKey,{addOnPasting:s}=this.getProps();s&&n&&e.code==="KeyV"&&navigator.permissions.query({name:"clipboard-read"}).then(a=>{a.state==="granted"||a.state==="prompt"?navigator.clipboard.read().then(o=>{this.readFileFromClipboard(o)}):this._adapter.notifyPastingError(a)}).catch(a=>{this._adapter.notifyPastingError(a)})}bindPastingHandler(){this._adapter.registerPastingHandler(e=>this.handlePasting(e))}unbindPastingHandler(){this._adapter.unRegisterPastingHandler()}}class M4e extends tt{constructor(e){super(Object.assign({},e))}handleImageError(e){this._adapter.updateFallbackPreview(!0)}}const Pi=kte.PREFIX,I4e=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return k.createElement("svg",Object.assign({focusable:!1,"aria-hidden":!0,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),k.createElement("circle",{cx:"7.99992",cy:"7.99992",r:"6.66667",fill:"white"}),k.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.3332 8.00008C15.3332 12.0502 12.0499 15.3334 7.99984 15.3334C3.94975 15.3334 0.666504 12.0502 0.666504 8.00008C0.666504 3.94999 3.94975 0.666748 7.99984 0.666748C12.0499 0.666748 15.3332 3.94999 15.3332 8.00008ZM8.99984 11.6667C8.99984 11.1145 8.55212 10.6667 7.99984 10.6667C7.44755 10.6667 6.99984 11.1145 6.99984 11.6667C6.99984 12.219 7.44755 12.6667 7.99984 12.6667C8.55212 12.6667 8.99984 12.219 8.99984 11.6667ZM7.99984 3.33341C7.27573 3.33341 6.7003 3.94171 6.74046 4.66469L6.94437 8.33495C6.97549 8.89513 7.4388 9.33341 7.99984 9.33341C8.56087 9.33341 9.02419 8.89513 9.05531 8.33495L9.25921 4.66469C9.29938 3.94171 8.72394 3.33341 7.99984 3.33341Z",fill:"#F93920"}))},R4e=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return k.createElement("svg",Object.assign({focusable:!1,"aria-hidden":!0,width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),k.createElement("circle",{cx:"14",cy:"14",r:"14",fill:"#16161A",fillOpacity:"0.6"}),k.createElement("path",{d:"M9 10.25V18.25L10.25 13.25H17.875V11.75C17.875 11.4739 17.6511 11.25 17.375 11.25H14L12.75 9.75H9.5C9.22386 9.75 9 9.97386 9 10.25Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),k.createElement("path",{d:"M18 18.25L19 13.25H10.2031L9 18.25H18Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}))},L4e=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return k.createElement("svg",Object.assign({focusable:!1,"aria-hidden":!0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),k.createElement("path",{d:"M6 17V7.58824C6 7.26336 6.26863 7 6.6 7H10.5L12 8.76471H16.05C16.3814 8.76471 16.65 9.02806 16.65 9.35294V11.1176H7.5L6 17ZM6 17L7.44375 11.1176H18L16.8 17L6 17Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))};class fP extends Ve{constructor(e){super(e),this.state={fallbackPreview:!1},this.foundation=new M4e(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{updateFallbackPreview:e=>this.setState({fallbackPreview:e})})}transSize(e){return typeof e=="number"?RL(e):e}renderValidateMessage(){const{status:e,validateMessage:t}=this.props;let n=null;switch(!0){case(typeof t=="string"&&e===Wt.FILE_STATUS_VALIDATING):n=k.createElement(k.Fragment,null,k.createElement(Cc,{size:"small",wrapperClassName:`${Pi}-file-card-icon-loading`}),t);break;case typeof t=="string":n=k.createElement(k.Fragment,null,k.createElement(tx,{className:`${Pi}-file-card-icon-error`}),t);break;case MTe(t):n=t;break}return n}renderPicValidateMsg(){const{status:e,validateMessage:t}=this.props;let n=null;switch(!0){case(t&&e===Wt.FILE_STATUS_VALIDATING):n=k.createElement(Cc,{size:"small",wrapperClassName:`${Pi}-picture-file-card-icon-loading`});break;case(t&&(e===Wt.FILE_STATUS_VALID_FAIL||e===Wt.FILE_STATUS_UPLOAD_FAIL)):n=k.createElement("div",{className:`${Pi}-picture-file-card-icon-error`},k.createElement(I4e,null));break}return n?k.createElement(En,{content:t,trigger:"hover",position:"bottom"},n):null}renderPic(e){const{fallbackPreview:t}=this.state,{url:n,percent:s,status:r,disabled:a,style:o,onPreviewClick:l,showPicInfo:c,renderPicInfo:u,renderPicPreviewIcon:h,renderThumbnail:d,name:p,index:f,picHeight:g,picWidth:m}=this.props,y=r===Wt.FILE_STATUS_UPLOADING&&s!==100,b=r===Wt.FILE_STATUS_UPLOAD_FAIL&&this.props.showRetry,x=r===Wt.FILE_STATUS_SUCCESS&&this.props.showReplace,S=r===Wt.FILE_STATUS_SUCCESS&&!this.props.showReplace,C=typeof d=="function",w=K({[`${Pi}-picture-file-card`]:!0,[`${Pi}-picture-file-card-preview-fallback`]:t,[`${Pi}-picture-file-card-disabled`]:a,[`${Pi}-picture-file-card-show-pointer`]:typeof l<"u",[`${Pi}-picture-file-card-error`]:r===Wt.FILE_STATUS_UPLOAD_FAIL,[`${Pi}-picture-file-card-uploading`]:y,[`${Pi}-picture-file-card-custom-thumbnail`]:C&&g&&m}),A=k.createElement("div",{role:"button",tabIndex:0,className:`${Pi}-picture-file-card-retry`,onClick:D=>this.onRetry(D)},k.createElement(PQ,{className:`${Pi}-picture-file-card-icon-retry`})),T=k.createElement(En,{trigger:"hover",position:"top",content:e.replace,showArrow:!1,spacing:4},k.createElement("div",{role:"button",tabIndex:0,className:`${Pi}-picture-file-card-replace`,onClick:D=>this.onReplace(D)},k.createElement(R4e,{className:`${Pi}-picture-file-card-icon-replace`}))),E=k.createElement("div",{className:`${Pi}-picture-file-card-preview`},typeof h=="function"?h(this.props):null),P=k.createElement("div",{role:"button",tabIndex:0,className:`${Pi}-picture-file-card-close`,onClick:D=>this.onRemove(D)},k.createElement(nx,{className:`${Pi}-picture-file-card-icon-close`})),O=typeof u=="function"?u(this.props):k.createElement("div",{className:`${Pi}-picture-file-card-pic-info`},f+1);let M={},R=o?Object.assign({},o):{};g&&(R.height=g,M.height=g),m&&(R.width=m,M.width=m);const I=C?d(this.props):t?k.createElement(Yw,{size:"large"}):k.createElement("img",{src:n,alt:p,onError:D=>this.foundation.handleImageError(D),style:M});return k.createElement("div",{role:"listitem",className:w,style:R,onClick:l},I,y?k.createElement(Tb,{percent:s,type:"circle",size:"small",orbitStroke:"#FFF","aria-label":"uploading file progress"}):null,b?A:null,x&&T,S&&E,c&&O,!a&&P,this.renderPicValidateMsg())}renderFile(e){const{name:t,size:n,percent:s,url:r,showRetry:a,showReplace:o,preview:l,previewFile:c,status:u,style:h,onPreviewClick:d,renderFileOperation:p}=this.props,{fallbackPreview:f}=this.state,g=K({[`${Pi}-file-card`]:!0,[`${Pi}-file-card-fail`]:u===Wt.FILE_STATUS_VALID_FAIL||u===Wt.FILE_STATUS_UPLOAD_FAIL,[`${Pi}-file-card-show-pointer`]:typeof d<"u"}),m=K({[`${Pi}-file-card-preview`]:!0,[`${Pi}-file-card-preview-placeholder`]:!l||c||f}),y=`${Pi}-file-card-info`,b=`${Pi}-file-card-close`,x=`${Pi}-file-card-replace`,S=!(s===100||typeof s>"u")&&u===Wt.FILE_STATUS_UPLOADING,C=u===Wt.FILE_STATUS_UPLOAD_FAIL&&a,w=u===Wt.FILE_STATUS_SUCCESS&&o,A=this.transSize(n);let T=l&&!f?k.createElement("img",{src:r,alt:t,onError:P=>this.foundation.handleImageError(P)}):k.createElement(Yw,{size:"large"});c&&(T=c(this.props));const E=typeof p=="function"?p(this.props):k.createElement(it,{onClick:P=>this.onRemove(P),type:"tertiary",icon:k.createElement(Rc,null),theme:"borderless",size:"small",className:b});return k.createElement("div",{role:"listitem",className:g,style:h,onClick:d},k.createElement("div",{className:m},T),k.createElement("div",{className:`${y}-main`},k.createElement("div",{className:`${y}-main-text`},k.createElement("span",{className:`${y}-name`},t),k.createElement("span",null,k.createElement("span",{className:`${y}-size`},A),w&&k.createElement(En,{trigger:"hover",position:"top",showArrow:!1,content:e.replace},k.createElement(it,{onClick:P=>this.onReplace(P),type:"tertiary",theme:"borderless",size:"small",icon:k.createElement(L4e,null),className:x})))),S?k.createElement(Tb,{percent:s,style:{width:"100%"},"aria-label":"uploading file progress"}):null,k.createElement("div",{className:`${y}-main-control`},k.createElement("span",{className:`${y}-validate-message`},this.renderValidateMessage()),C?k.createElement("span",{role:"button",tabIndex:0,className:`${y}-retry`,onClick:P=>this.onRetry(P)},e.retry):null)),E)}onRemove(e){e.stopPropagation(),this.props.onRemove()}onReplace(e){e.stopPropagation(),this.props.onReplace()}onRetry(e){e.stopPropagation(),this.props.onRetry()}render(){const{listType:e}=this.props;return e===Wt.FILE_LIST_PIC?k.createElement(gi,{componentName:"Upload"},t=>this.renderPic(t)):e===Wt.FILE_LIST_DEFAULT?k.createElement(gi,{componentName:"Upload"},t=>this.renderFile(t)):null}}fP.propTypes={className:v.string,disabled:v.bool,listType:v.string,name:v.string,onPreviewClick:v.func,onRemove:v.func,onReplace:v.func,onRetry:v.func,percent:v.number,preview:v.bool,previewFile:v.func,picWidth:v.oneOfType([v.number,v.string]),picHeight:v.oneOfType([v.number,v.string]),showReplace:v.bool,showRetry:v.bool,size:v.oneOfType([v.number,v.string]),status:v.string,style:v.object,url:v.string,validateMessage:v.node,index:v.number};fP.defaultProps={listType:Wt.FILE_LIST_DEFAULT,name:"",onRemove:()=>{},onRetry:()=>{},preview:!1,size:""};var D4e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const hn=kte.PREFIX;class mx extends Ve{constructor(e){super(e),this.inputRef=null,this.replaceInputRef=null,this.onClick=()=>{const{inputRef:t,props:n}=this,{onOpenFileDialog:s}=n;this.props.disabled||!t||!t.current||(t.current.click(),s&&s())},this.onChange=t=>{const{files:n}=t.target;this.foundation.handleChange(n)},this.replace=t=>{this.setState({replaceIdx:t},()=>{this.replaceInputRef.current.click()})},this.onReplaceChange=t=>{const{files:n}=t.target;this.foundation.handleReplaceChange(n)},this.clear=()=>{this.foundation.handleClear()},this.remove=t=>{this.foundation.handleRemove(t)},this.insert=(t,n)=>this.foundation.insertFileToList(t,n),this.upload=()=>{this.foundation.manualUpload()},this.openFileDialog=()=>{this.onClick()},this.renderFile=(t,n,s)=>{const{name:r,status:a,validateMessage:o,_sizeInvalid:l,uid:c}=t,{previewFile:u,listType:h,itemStyle:d,showPicInfo:p,renderPicInfo:f,renderPicPreviewIcon:g,renderFileOperation:m,renderFileItem:y,renderThumbnail:b,disabled:x,onPreviewClick:S,picWidth:C,picHeight:w}=this.props,A=()=>this.remove(t),T=()=>{this.foundation.retry(t)},E=()=>{this.replace(n)},P=Object.assign(Object.assign(Object.assign({},lf(this.props,["showRetry","showReplace",""])),t),{previewFile:u,listType:h,onRemove:A,onRetry:T,index:n,key:c||`${r}${n}`,style:d,disabled:x,showPicInfo:p,renderPicInfo:f,renderPicPreviewIcon:g,renderFileOperation:m,renderThumbnail:b,onReplace:E,onPreviewClick:typeof S<"u"?()=>this.foundation.handlePreviewClick(t):void 0,picWidth:C,picHeight:w});return a===Wt.FILE_STATUS_UPLOAD_FAIL&&!o&&(P.validateMessage=s.fail),l&&!o&&(P.validateMessage=s.illegalSize),typeof y>"u"?k.createElement(fP,Object.assign({},P)):y(P)},this.renderFileList=()=>{const{listType:t}=this.props;return t===Wt.FILE_LIST_PIC?this.renderFileListPic():t===Wt.FILE_LIST_DEFAULT?this.renderFileListDefault():null},this.renderFileListPic=()=>{const{showUploadList:t,limit:n,disabled:s,children:r,draggable:a,hotSpotLocation:o,picHeight:l,picWidth:c}=this.props,{fileList:u,dragAreaStatus:h}=this.state,d=this.props.fileList||u,p=n?n>d.length:!0,f=`${hn}-drag-area`,g=K(`${hn}-add`,{[`${hn}-picture-add`]:!0,[`${hn}-picture-add-disabled`]:s}),m=K(`${hn}-file-list`,{[`${hn}-picture-file-list`]:!0}),y=K({[`${f}-legal`]:h===Wt.DRAG_AREA_LEGAL,[`${f}-illegal`]:h===Wt.DRAG_AREA_ILLEGAL}),b=`${hn}-file-list-main`,x={role:"button",className:g,onClick:this.onClick,style:{height:l,width:c}},S={className:m},C={onDrop:this.onDrop,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDragEnter:this.onDragEnter};a&&Object.assign(x,C,{className:K(g,y)});const w=k.createElement("div",Object.assign({},x,{"x-semi-prop":"children"}),r);return!t||!d.length?p?w:null:k.createElement(gi,{componentName:"Upload"},A=>k.createElement("div",Object.assign({},S),k.createElement("div",{className:b,role:"list","aria-label":"picture list"},p&&o==="start"?w:null,d.map((T,E)=>this.renderFile(T,E,A)),p&&o==="end"?w:null)))},this.renderFileListDefault=()=>{const{showUploadList:t,limit:n,disabled:s}=this.props,{fileList:r}=this.state,a=this.props.fileList||r,o=K(`${hn}-file-list`),l=`${hn}-file-list-title`,c=`${hn}-file-list-main`,u=n!==1&&a.length,h=this.props.showClear&&!s,d={className:o};return!t||!a.length?null:k.createElement(gi,{componentName:"Upload"},p=>k.createElement("div",Object.assign({},d),u?k.createElement("div",{className:l},k.createElement("span",{className:`${l}-choosen`},p.selectedFiles),h?k.createElement("span",{role:"button",tabIndex:0,onClick:this.clear,className:`${l}-clear`},p.clear):null):null,k.createElement("div",{className:c,role:"list","aria-label":"file list"},a.map((f,g)=>this.renderFile(f,g,p)))))},this.onDrop=t=>{this.foundation.handleDrop(t)},this.onDragOver=t=>{this.foundation.handleDragOver(t)},this.onDragLeave=t=>{this.foundation.handleDragLeave(t)},this.onDragEnter=t=>{this.foundation.handleDragEnter(t)},this.renderAddContent=()=>{const{draggable:t,children:n,listType:s,disabled:r}=this.props,a=K(`${hn}-add`);return s===Wt.FILE_LIST_PIC?null:t?this.renderDragArea():k.createElement("div",{role:"button",tabIndex:0,"aria-disabled":r,className:a,onClick:this.onClick},n)},this.renderDragArea=()=>{const{dragAreaStatus:t}=this.state,{children:n,dragIcon:s,dragMainText:r,dragSubText:a,disabled:o}=this.props,l=`${hn}-drag-area`,c=K(l,{[`${l}-legal`]:t===Wt.DRAG_AREA_LEGAL,[`${l}-illegal`]:t===Wt.DRAG_AREA_ILLEGAL,[`${l}-custom`]:n});return k.createElement(gi,{componentName:"Upload"},u=>k.createElement("div",{role:"button",tabIndex:0,"aria-disabled":o,className:c,onDrop:this.onDrop,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDragEnter:this.onDragEnter,onClick:this.onClick},n||k.createElement(k.Fragment,null,k.createElement("div",{className:`${l}-icon`,"x-semi-prop":"dragIcon"},s||k.createElement(QOe,{size:"extra-large"})),k.createElement("div",{className:`${l}-text`},k.createElement("div",{className:`${l}-main-text`,"x-semi-prop":"dragMainText"},r||u.mainText),k.createElement("div",{className:`${l}-sub-text`,"x-semi-prop":"dragSubText"},a),k.createElement("div",{className:`${l}-tips`},t===Wt.DRAG_AREA_LEGAL&&k.createElement("span",{className:`${l}-tips-legal`},u.legalTips),t===Wt.DRAG_AREA_ILLEGAL&&k.createElement("span",{className:`${l}-tips-illegal`},u.illegalTips))))))},this.state={fileList:e.defaultFileList||[],replaceIdx:-1,inputKey:Math.random(),replaceInputKey:Math.random(),dragAreaStatus:"default",localUrls:[]},this.foundation=new O4e(this.adapter),this.inputRef=k.createRef(),this.replaceInputRef=k.createRef()}static getDerivedStateFromProps(e){const{fileList:t}=e;return"fileList"in e?{fileList:t||[]}:null}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyFileSelect:e=>this.props.onFileChange(e),notifyError:(e,t,n,s)=>this.props.onError(e,t,n,s),notifySuccess:(e,t,n)=>this.props.onSuccess(e,t,n),notifyProgress:(e,t,n)=>this.props.onProgress(e,t,n),notifyRemove:(e,t,n)=>this.props.onRemove(e,t,n),notifySizeError:(e,t)=>this.props.onSizeError(e,t),notifyExceed:e=>this.props.onExceed(e),updateFileList:(e,t)=>{typeof t=="function"?this.setState({fileList:e},t):this.setState({fileList:e})},notifyBeforeUpload:e=>{let{file:t,fileList:n}=e;return this.props.beforeUpload({file:t,fileList:n})},notifyAfterUpload:e=>{let{response:t,file:n,fileList:s}=e;return this.props.afterUpload({response:t,file:n,fileList:s})},resetInput:()=>{this.setState(e=>({inputKey:Math.random()}))},resetReplaceInput:()=>{this.setState(e=>({replaceInputKey:Math.random()}))},isMac:()=>navigator.platform.toUpperCase().indexOf("MAC")>=0,registerPastingHandler:e=>{document.body.addEventListener("keydown",e),this.pastingCb=e},unRegisterPastingHandler:()=>{this.pastingCb&&document.body.removeEventListener("keydown",this.pastingCb)},notifyPastingError:e=>this.props.onPastingError(e),updateDragAreaStatus:e=>this.setState({dragAreaStatus:e}),notifyChange:e=>{let{currentFile:t,fileList:n}=e;return this.props.onChange({currentFile:t,fileList:n})},updateLocalUrls:e=>this.setState({localUrls:e}),notifyClear:()=>this.props.onClear(),notifyPreviewClick:e=>this.props.onPreviewClick(e),notifyDrop:(e,t,n)=>this.props.onDrop(e,t,n),notifyAcceptInvalid:e=>this.props.onAcceptInvalid(e),notifyBeforeRemove:(e,t)=>this.props.beforeRemove(e,t),notifyBeforeClear:e=>this.props.beforeClear(e)})}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}render(){const e=this.props,{style:t,className:n,multiple:s,accept:r,disabled:a,children:o,capture:l,listType:c,prompt:u,promptPosition:h,draggable:d,validateMessage:p,validateStatus:f,directory:g}=e,m=D4e(e,["style","className","multiple","accept","disabled","children","capture","listType","prompt","promptPosition","draggable","validateMessage","validateStatus","directory"]),y=K(hn,{[`${hn}-picture`]:c===Wt.FILE_LIST_PIC,[`${hn}-disabled`]:a,[`${hn}-default`]:f==="default",[`${hn}-error`]:f==="error",[`${hn}-warning`]:f==="warning",[`${hn}-success`]:f==="success"},n),b=K(`${hn}-hidden-input`),x=K(`${hn}-hidden-input-replace`),S=K(`${hn}-prompt`),C=K(`${hn}-validate-message`),w=g?{directory:"directory",webkitdirectory:"webkitdirectory"}:{};return k.createElement("div",Object.assign({className:y,style:t,"x-prompt-pos":h},this.getDataAttr(m)),k.createElement("input",Object.assign({key:this.state.inputKey,capture:l,multiple:s,accept:r,onChange:this.onChange,type:"file",autoComplete:"off",tabIndex:-1,className:b,ref:this.inputRef},w)),k.createElement("input",{key:this.state.replaceInputKey,multiple:!1,accept:r,onChange:this.onReplaceChange,type:"file",autoComplete:"off",tabIndex:-1,className:x,ref:this.replaceInputRef}),this.renderAddContent(),u?k.createElement("div",{className:S,"x-semi-prop":"prompt"},u):null,p?k.createElement("div",{className:C,"x-semi-prop":"validateMessage"},p):null,this.renderFileList())}}mx.propTypes={accept:v.string,action:v.string.isRequired,addOnPasting:v.bool,afterUpload:v.func,beforeClear:v.func,beforeRemove:v.func,beforeUpload:v.func,children:v.node,className:v.string,customRequest:v.func,data:v.oneOfType([v.object,v.func]),defaultFileList:v.array,directory:v.bool,disabled:v.bool,dragIcon:v.node,dragMainText:v.node,dragSubText:v.node,draggable:v.bool,fileList:v.array,fileName:v.string,headers:v.oneOfType([v.object,v.func]),hotSpotLocation:v.oneOf(["start","end"]),itemStyle:v.object,limit:v.number,listType:v.oneOf(Wt.LIST_TYPE),maxSize:v.number,minSize:v.number,multiple:v.bool,name:v.string,onAcceptInvalid:v.func,onChange:v.func,onClear:v.func,onDrop:v.func,onError:v.func,onExceed:v.func,onFileChange:v.func,onOpenFileDialog:v.func,onPreviewClick:v.func,onProgress:v.func,onRemove:v.func,onRetry:v.func,onSizeError:v.func,onSuccess:v.func,onPastingError:v.func,previewFile:v.func,prompt:v.node,promptPosition:v.oneOf(Wt.PROMPT_POSITION),picWidth:v.oneOfType([v.number,v.string]),picHeight:v.oneOfType([v.number,v.string]),renderFileItem:v.func,renderPicPreviewIcon:v.func,renderFileOperation:v.func,renderPicInfo:v.func,renderThumbnail:v.func,showClear:v.bool,showPicInfo:v.bool,showReplace:v.bool,showRetry:v.bool,showUploadList:v.bool,style:v.object,timeout:v.number,transformFile:v.func,uploadTrigger:v.oneOf(Wt.UPLOAD_TRIGGER),validateMessage:v.node,validateStatus:v.oneOf(Wt.VALIDATE_STATUS),withCredentials:v.bool};mx.defaultProps={defaultFileList:[],disabled:!1,listType:"list",hotSpotLocation:"end",multiple:!1,onAcceptInvalid:J,onChange:J,beforeRemove:()=>!0,beforeClear:()=>!0,onClear:J,onDrop:J,onError:J,onExceed:J,onFileChange:J,onOpenFileDialog:J,onProgress:J,onRemove:J,onRetry:J,onSizeError:J,onSuccess:J,onPastingError:J,promptPosition:"right",showClear:!0,showPicInfo:!1,showReplace:!1,showRetry:!0,showUploadList:!0,uploadTrigger:"auto",withCredentials:!1};mx.FileCard=fP;class vN extends H.Component{constructor(e){super(e),this.state={}}render(){const{children:e,locale:t}=this.props;return k.createElement(vQ.Provider,{value:t},e)}}vN.propTypes={locale:v.object,children:v.node};vN.defaultProps={locale:Xw};const yx={PREFIX:`${ge}-image`},F4e={DEFAULT_Z_INDEX:1070},bN=H.createContext({}),AM=`${yx.PREFIX}-preview-header`,B4e=H.forwardRef((i,e)=>{let{onClose:t,titleStyle:n,className:s,renderHeader:r,closable:a}=i;return k.createElement(bN.Consumer,null,o=>{let{currentIndex:l,titles:c}=o,u;return c&&typeof l=="number"&&(u=c[l]),k.createElement("section",{ref:e,className:K(AM,s)},k.createElement("section",{className:`${AM}-title`,style:n},r?r(u):u),a&&k.createElement("section",{className:`${AM}-close`,onMouseUp:t},k.createElement(Rc,null)))})});class j4e extends tt{constructor(){super(...arguments),this.changeSliderValue=e=>{const{zoom:t,step:n,min:s,max:r}=this.getProps();let a=e==="plus"?t+n:t-n;a>r?a=r:a<s&&(a=s),this.handleValueChange(a)},this.handleValueChange=e=>{const{onZoomIn:t,onZoomOut:n,zoom:s}=this.getProps();e>s?t(Number((e/100).toFixed(2))):n(Number((e/100).toFixed(2)))},this.handleRatioClick=()=>{const{ratio:e,onAdjustRatio:t}=this.getProps();t(e==="adaptation"?"realSize":"adaptation")},this.handleRotate=e=>{const{onRotate:t}=this.getProps();t&&t(e)}}}const Vo=`${yx.PREFIX}-preview-footer`;class xN extends Ve{get adapter(){return Object.assign({},super.adapter)}constructor(e){super(e),this.changeSliderValue=t=>{this.foundation.changeSliderValue(t)},this.handleMinusClick=()=>{this.changeSliderValue("minus")},this.handlePlusClick=()=>{this.changeSliderValue("plus")},this.handleRotateLeft=()=>{this.foundation.handleRotate("left")},this.handleRotateRight=()=>{this.foundation.handleRotate("right")},this.handleSlideChange=xb(t=>{this.foundation.handleValueChange(t)},50),this.handleRatioClick=()=>{this.foundation.handleRatioClick()},this.customRenderViewMenu=()=>{const{min:t,max:n,step:s,curPage:r,totalNum:a,ratio:o,zoom:l,disabledPrev:c,disabledNext:u,disableDownload:h,onNext:d,onPrev:p,onDownload:f,renderPreviewMenu:g}=this.props,m={min:t,max:n,step:s,curPage:r,totalNum:a,ratio:o,zoom:l,disabledPrev:c,disabledNext:u,disableDownload:h,onNext:d,onPrev:p,onDownload:f,onRotateLeft:this.handleRotateLeft,onRotateRight:this.handleRotateRight,disabledZoomIn:l===n,disabledZoomOut:l===t,onRatioClick:this.handleRatioClick,onZoomIn:this.handlePlusClick,onZoomOut:this.handleMinusClick,menuItems:this.getMenu()};return g(m)},this.getFinalIconElement=(t,n,s)=>{const{showTooltip:r,zIndex:a}=this.props;return r?k.createElement(En,{content:n,key:`tooltip-${s}`,zIndex:a+1},t):t},this.getLocalTextByKey=t=>k.createElement(gi,{componentName:"Image"},n=>n[t]),this.getIconChevronLeft=()=>{const{disabledPrev:t,onPrev:n,prevTip:s}=this.props,r=k.createElement(oj,{key:"chevron-left",size:"large",className:t?`${Vo}-disabled`:"",onClick:t?void 0:n}),a=s??this.getLocalTextByKey("prevTip");return this.getFinalIconElement(r,a,"chevron-left")},this.getIconChevronRight=()=>{const{disabledNext:t,onNext:n,nextTip:s}=this.props,r=k.createElement(xd,{key:"chevron-right",size:"large",className:t?`${Vo}-disabled`:"",onClick:t?void 0:n}),a=s??this.getLocalTextByKey("nextTip");return this.getFinalIconElement(r,a,"chevron-right")},this.getIconMinus=()=>{const{zoomOutTip:t,zoom:n,min:s}=this.props,r=n===s,a=k.createElement(TOe,{key:"minus",size:"large",onClick:r?void 0:this.handleMinusClick,className:r?`${Vo}-disabled`:""}),o=t??this.getLocalTextByKey("zoomOutTip");return this.getFinalIconElement(a,o,"minus")},this.getIconPlus=()=>{const{zoomInTip:t,zoom:n,max:s}=this.props,r=n===s,a=k.createElement(EQ,{key:"plus",size:"large",onClick:r?void 0:this.handlePlusClick,className:r?`${Vo}-disabled`:""}),o=t??this.getLocalTextByKey("zoomInTip");return this.getFinalIconElement(a,o,"plus")},this.getIconRatio=()=>{const{ratio:t,originTip:n,adaptiveTip:s}=this.props,r={key:"ratio",size:"large",className:K(`${Vo}-gap`),onClick:this.handleRatioClick},a=t==="adaptation"?k.createElement(IOe,Object.assign({},r)):k.createElement(i2e,Object.assign({},r));let o;return t==="adaptation"?o=n??this.getLocalTextByKey("originTip"):o=s??this.getLocalTextByKey("adaptiveTip"),this.getFinalIconElement(a,o,"ratio")},this.getIconRotate=()=>{const{rotateTip:t}=this.props,n=k.createElement(BOe,{key:"rotate",size:"large",onClick:this.handleRotateLeft}),s=t??this.getLocalTextByKey("rotateTip");return this.getFinalIconElement(n,s,"rotate")},this.getIconDownload=()=>{const{downloadTip:t,onDownload:n,disableDownload:s}=this.props,r=k.createElement(oOe,{key:"download",size:"large",onClick:s?void 0:n,className:K(`${Vo}-gap`,{[`${Vo}-disabled`]:s})}),a=t??this.getLocalTextByKey("downloadTip");return this.getFinalIconElement(r,a,"download")},this.getNumberInfo=()=>{const{curPage:t,totalNum:n}=this.props;return k.createElement("div",{className:`${Vo}-page`,key:"info"},t,"/",n)},this.getSlider=()=>{const{zoom:t,min:n,max:s,step:r,showTooltip:a}=this.props;return k.createElement(Xj,{key:"slider",value:t,min:n,max:s,step:r,tipFormatter:o=>`${o}%`,tooltipVisible:a?void 0:!1,onChange:this.handleSlideChange})},this.getMenu=()=>[this.getIconChevronLeft(),this.getNumberInfo(),this.getIconChevronRight(),this.getIconMinus(),this.getSlider(),this.getIconPlus(),this.getIconRatio(),this.getIconRotate(),this.getIconDownload()],this.getFooterMenu=()=>{const t=this.getMenu();return t.splice(3,0,k.createElement(iA,{layout:"vertical",key:"divider-first"})),t.splice(8,0,k.createElement(iA,{layout:"vertical",key:"divider-second"})),t},this.foundation=new j4e(this.adapter)}render(){const{className:e,renderPreviewMenu:t,forwardRef:n}=this.props,s=K(Vo,`${Vo}-wrapper`,e,{[`${Vo}-content`]:!t});return k.createElement("section",{className:s,ref:n},t?this.customRenderViewMenu():this.getFooterMenu())}}xN.propTypes={curPage:v.number,totalNum:v.number,disabledPrev:v.bool,disabledNext:v.bool,disableDownload:v.bool,className:v.string,zoom:v.number,ratio:v.string,prevTip:v.string,nextTip:v.string,zoomInTip:v.string,zoomOutTip:v.string,rotateTip:v.string,downloadTip:v.string,adaptiveTip:v.string,originTip:v.string,showTooltip:v.bool,onZoomIn:v.func,onZoomOut:v.func,onPrev:v.func,onNext:v.func,onAdjustRatio:v.func,onRotateLeft:v.func,onDownload:v.func};xN.defaultProps={min:10,max:500,step:10,showTooltip:!1,disableDownload:!1};class N4e extends tt{constructor(e){var t;super(Object.assign({},e)),t=this,this.startMouseClientPosition={x:0,y:0},this.originImageWidth=null,this.originImageHeight=null,this.containerWidth=0,this.containerHeight=0,this._isImageVertical=()=>this.getProp("rotation")%180!==0,this._getContainerBoundingRectSize=()=>{const n=this._adapter.getContainer();n&&(this.containerWidth=n.clientWidth,this.containerHeight=n.clientHeight)},this._getAdaptationZoom=()=>{let n=1;if(this._adapter.getContainer()&&this.originImageWidth&&this.originImageHeight){const{rotation:r}=this.getProps(),{width:a,height:o}=this.calcBoundingRectSize(this.originImageWidth,this.originImageHeight,r),l=this.containerWidth-80,c=this.containerHeight-80;n=Number(Math.min(l/a,c/o).toFixed(2))}return n},this._getInitialZoom=()=>{const{ratio:n}=this.getProps();let s=1;return n==="adaptation"&&(s=this._getAdaptationZoom()),s},this.setLoading=n=>{this._adapter.setLoading(n)},this.handleWindowResize=()=>{this._getContainerBoundingRectSize(),this.initializeImage()},this.handleLoad=n=>{if(n.target){const{naturalWidth:a,naturalHeight:o}=n.target;this.originImageHeight=o,this.originImageWidth=a,this.setState({loading:!1}),this.initializeImage(!1)}const{src:s,onLoad:r}=this.getProps();r&&r(s)},this.handleError=n=>{const{onError:s,src:r}=this.getProps();this.setState({loading:!1}),s&&s(r)},this.handleRatioChange=()=>{this.initializeImage()},this.initializeImageZoom=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const{currZoom:s}=t.getStates(),{onZoom:r}=t.getProps(),a=t._getInitialZoom();s!==a?r(a,n):t.changeZoom(a)},this.initializeTranslate=()=>{this.setState({translate:{x:0,y:0}})},this.initializeImage=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;t.initializeImageZoom(n),t.initializeTranslate()},this.handleRightClickImage=n=>{const{disableDownload:s}=this.getProps();return s?(n.preventDefault(),n.stopPropagation(),!1):!0},this.getCanDragDirection=(n,s)=>{let r=n>this.containerWidth;return{canDragVertical:s>this.containerHeight,canDragHorizontal:r}},this.changeZoom=(n,s)=>{const r=this._adapter.getImage(),{currZoom:a,translate:o,width:l,height:c}=this.getStates(),{rotation:u}=this.getProps(),h=n/(a||1),d=Math.floor(this.originImageWidth*n),p=Math.floor(this.originImageHeight*n);let f=Math.floor(o.x*h),g=Math.floor(o.y*h);const m=this.calcBoundingRectSize(l,c,u),y={width:m.width*h,height:m.height*h};if(s&&r&&s.target===r){let x=u%360;switch(x<0&&(x=360+x),x){case 0:f=(s.offsetX-.5*l)*(1-n/a)+o.x,g=(s.offsetY-.5*c)*(1-n/a)+o.y;break;case 90:f=(.5*c-s.offsetY)*(1-n/a)+o.x,g=(s.offsetX-.5*l)*(1-n/a)+o.y;break;case 180:f=(.5*l-s.offsetX)*(1-n/a)+o.x,g=(.5*c-s.offsetY)*(1-n/a)+o.y;break;case 270:f=(s.offsetY-.5*c)*(1-n/a)+o.x,g=(.5*l-s.offsetX)*(1-n/a)+o.y;break}}const b=this.getSafeTranslate(y.width,y.height,f,g);if(this.setState({translate:b,width:d,height:p,currZoom:n}),r){const{canDragVertical:x,canDragHorizontal:S}=this.getCanDragDirection(y.width,y.height),C=x||S;this._adapter.setImageCursor(C)}},this.getExtremeTranslate=(n,s)=>({x:(n-this.containerWidth)/2,y:(s-this.containerHeight)/2}),this.getSafeTranslate=(n,s,r,a)=>{const{x:o,y:l}=this.getExtremeTranslate(n,s),{canDragVertical:c,canDragHorizontal:u}=this.getCanDragDirection(n,s);let h=0,d=0;return u&&(h=r>0?Math.min(r,o):Math.max(r,-o)),c&&(d=a>0?Math.min(a,l):Math.max(a,-l)),{x:h,y:d}},this.handleImageMove=n=>{n.buttons===1&&this.moveImage(n)},this.moveImage=n=>{const{clientX:s,clientY:r}=n,{width:a,height:o,translate:l}=this.getStates(),{rotation:c}=this.getProps(),u=this.calcBoundingRectSize(a,o,c),{canDragVertical:h,canDragHorizontal:d}=this.getCanDragDirection(u.width,u.height);if(h||d){let p=d?l.x+s-this.startMouseClientPosition.x:l.x,f=h?l.y+r-this.startMouseClientPosition.y:l.y;const g=this.getSafeTranslate(u.width,u.height,p,f);this.setState({translate:g}),this.startMouseClientPosition={x:s,y:r}}},this.handleImageMouseDown=n=>{this.startMouseClientPosition={x:n.clientX,y:n.clientY}},this.calcBoundingRectMouseOffset=n=>{const{width:s,height:r,offset:a,rotation:o=0}=n;let l=o%360;l=l>=0?l:360+l;let c=0,u=0;switch(l){case 0:c=a.x,u=a.y;break;case 90:c=r-a.y,u=a.x;break;case 180:c=s-a.x,u=r-a.y;break;case 270:c=a.y,u=s-a.x;break}return{x:c,y:u}}}init(){this._getContainerBoundingRectSize()}calcBoundingRectSize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const s=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:0)*Math.PI/180,r=Math.abs(Math.sin(s)),a=Math.abs(Math.cos(s)),o=e*a+t*r,l=e*r+t*a;return{width:o,height:l}}}const $4e=yx.PREFIX,kM=`${$4e}-preview-image`;class SN extends Ve{get adapter(){return Object.assign(Object.assign({},super.adapter),{getContainer:()=>this.containerRef.current,getImage:()=>this.imageRef.current,setLoading:e=>{this.setState({loading:e})},setImageCursor:e=>{this.imageRef.current.style.cursor=e?"grab":"default"}})}constructor(e){super(e),this.onWindowResize=()=>{this.foundation.handleWindowResize()},this.handleRightClickImage=t=>{this.foundation.handleRightClickImage(t)},this.handleLoad=t=>{this.foundation.handleLoad(t)},this.handleError=t=>{this.foundation.handleError(t)},this.handleImageMove=t=>{this.foundation.handleImageMove(t)},this.handleMouseDown=t=>{this.foundation.handleImageMouseDown(t)},this.state={width:0,height:0,loading:!0,translate:{x:0,y:0},currZoom:this.props.zoom},this.containerRef=k.createRef(),this.imageRef=k.createRef(),this.foundation=new N4e(this.adapter)}componentDidMount(){this.foundation.init(),window.addEventListener("resize",this.onWindowResize)}componentWillUnmount(){window.removeEventListener("resize",this.onWindowResize)}componentDidUpdate(e,t){const n="zoom"in this.props&&this.props.zoom!==this.state.currZoom,s=this.props.src&&this.props.src!==e.src;s&&this.foundation.setLoading(!0),!n&&!s&&e&&("ratio"in this.props&&this.props.ratio!==e.ratio&&this.foundation.handleRatioChange(),"rotation"in this.props&&this.props.rotation!==e.rotation&&this.onWindowResize())}render(){const{src:e,rotation:t,crossOrigin:n}=this.props,{loading:s,width:r,height:a,translate:o}=this.state,l={position:"absolute",visibility:s?"hidden":"visible",transform:`translate(${o.x}px, ${o.y}px) rotate(${t}deg)`,width:r,height:a};return k.createElement("div",{className:`${kM}`,ref:this.containerRef},k.createElement("img",{ref:this.imageRef,src:e,alt:"previewImag",className:`${kM}-img`,key:e,onMouseMove:this.handleImageMove,onMouseDown:this.handleMouseDown,onContextMenu:this.handleRightClickImage,onDragStart:c=>c.preventDefault(),onLoad:this.handleLoad,onError:this.handleError,style:l,crossOrigin:n}),s&&k.createElement(Cc,{size:"large",wrapperClassName:`${kM}-spin`}))}}SN.propTypes={src:v.string,rotation:v.number,style:v.object,zoom:v.number,ratio:v.string,disableDownload:v.bool,clickZoom:v.number,setRatio:v.func,onZoom:v.func,onLoad:v.func,onError:v.func};SN.defaultProps={zoom:void 0};var z4e=function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(a){a(r)})}return new(t||(t=Promise))(function(r,a){function o(u){try{c(n.next(u))}catch(h){a(h)}}function l(u){try{c(n.throw(u))}catch(h){a(h)}}function c(u){u.done?r(u.value):s(u.value).then(o,l)}c((n=n.apply(i,e||[])).next())})};const H4e=(i,e)=>{const t=i==null?void 0:i.composedPath();return t==null?void 0:t.slice(0,t.length-4).some(s=>s.className&&typeof s.className=="string"?e.some(r=>s.className.includes(r)):!1)},V4e=(i,e,t)=>z4e(void 0,void 0,void 0,function*(){try{const n=yield fetch(i);if(n.ok){const s=yield n.blob(),r=URL.createObjectURL(s),a=document.createElement("a");a.href=r,a.download=e,a.click(),URL.revokeObjectURL(r),a.remove()}else t(i)}catch{t(i)}}),U4e=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=[];const n=i.length,s=e.length,r=n<=s?n:s;return new Array(r).fill(0).forEach((a,o)=>{t.push(e[o]),t.push(i[o])}),n>s?t=t.concat(i.slice(s,n)):n<s&&(t=t.concat(e.slice(n,s))),t},W4e=(i,e,t,n)=>{const s=e-t,r=e+t,a=i.length;let o=[],l=[];t>=Math.floor(a/2)?n?(o=i.concat(i).slice(s+a<0?0:s+a,e+a),l=i.concat(i).slice(e+1,r+1<2*a?r+1:2*a)):(o=i.slice(0,e),l=i.slice(e+1,a)):n?(o=i.concat(i).slice(s+a,e+a),l=i.concat(i).slice(e+1,r+1)):s>=0&&r<a?(o=i.slice(s,e),l=i.slice(e+1,r+1)):s<0?(o=i.slice(0,e),l=i.slice(e+1,2*t+1)):(l=i.slice(e+1,a),o=i.slice(a-2*t-1,e));const c=U4e(o.reverse(),l);return Array.from(new Set(c))},G4e=["icon","footer"];class K4e extends tt{constructor(e){var t;super(Object.assign({},e)),t=this,this._timer=null,this._startMouseDown={x:0,y:0},this.handleViewVisibleChange=()=>{const{viewerVisible:n}=this.getStates();n&&(this.setState({viewerVisible:!1}),this.clearTimer())},this.handleMouseMove=n=>{this._persistEvent(n),this.mouseMoveHandler(n)},this.mouseMoveHandler=xb(n=>{const{viewerVisible:s}=this.getStates();this._adapter.isValidTarget(n)?(s||this.setState({viewerVisible:!0}),this.updateTimer()):this.clearTimer()},50),this.updateTimer=()=>{const{viewerVisibleDelay:n}=this.getProps();this.clearTimer(),this._timer=setTimeout(this.handleViewVisibleChange,n)},this.clearTimer=()=>{this._timer&&(clearTimeout(this._timer),this._timer=null)},this.handleWheel=n=>{this.onWheel(n),jn(n)},this.onWheel=n=>{const{zoomStep:s,maxZoom:r,minZoom:a}=this.getProps(),{zoom:o}=this.getStates();let l;n.deltaY<0?o+s<=r&&(l=Number((o+s).toFixed(2))):n.deltaY>0&&o-s>=a&&(l=Number((o-s).toFixed(2))),Hr(l)||this.handleZoomImage(l,!0,n)},this.handleMouseUp=n=>{const{maskClosable:s}=this.getProps();let r=!H4e(n,G4e);const{clientX:a,clientY:o}=n,{x:l,y:c}=this._startMouseDown;(Math.abs(a-l)>5||Math.abs(c-o)>5)&&(r=!1),r&&s&&this._adapter.notifyVisibleChange(!1)},this.handleMouseDown=n=>{const{clientX:s,clientY:r}=n;this._startMouseDown={x:s,y:r}},this.handleKeyDown=n=>{const{closeOnEsc:s}=this.getProps();if(s&&n.keyCode===ds.ESC){n.stopPropagation(),this._adapter.notifyVisibleChange(!1),this._adapter.notifyClose();return}},this.handleSwitchImage=n=>{const s=n==="prev"?-1:1,{imgSrc:r,currentIndex:a}=this.getStates(),o=r.length,l=(a+s+o)%o;"currentIndex"in this.getProps()?this._adapter.getIsInGroup()&&this._adapter.getContext("setCurrentIndex")(l):this.setState({currentIndex:l}),this._adapter.notifyChange(l,n),this.setState({direction:n,rotation:0})},this.handleDownload=()=>{const{currentIndex:n,imgSrc:s}=this.getStates(),r=this._adapter.getSetDownloadFunc(),a=s[n],o=r?r(a):a.slice(a.lastIndexOf("/")+1).split("?")[0];V4e(a,o,this._adapter.notifyDownloadError),this._adapter.notifyDownload(a,n)},this.handlePreviewClose=n=>{this._adapter.notifyVisibleChange(!1),this._adapter.notifyClose(),jn(n)},this.handleAdjustRatio=n=>{this.setState({ratio:n}),this._adapter.notifyRatioChange(n)},this.handleRotateImage=n=>{const{rotation:s}=this.getStates(),r=90,a=s+(n==="left"?-r:r);this.setState({rotation:a}),this._adapter.notifyRotateChange(a)},this.handleZoomImage=function(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=arguments.length>2?arguments[2]:void 0;const{zoom:a}=t.getStates();a!==n&&(s&&t._adapter.notifyZoom(n,n>a),t._adapter.changeImageZoom(n,r),t.setState({zoom:n}))},this.preloadGapImage=()=>{const{preLoad:n,preLoadGap:s,infinite:r,currentIndex:a}=this.getProps(),{imgSrc:o}=this.getStates();if(!n||typeof s!="number"||s<1)return;const l=W4e(o,a,s,r);if(l.length===0)return;const c=new Image;let u=0;function h(d){u++,u<l.length&&(c.src=l[u])}c.onload=d=>{this.setLoadSuccessStatus(c.src),h()},c.onerror=h,c.src=l[0]},this.preloadSingleImage=()=>{const{preLoad:n,preLoadGap:s,infinite:r}=this.getProps(),{imgSrc:a,currentIndex:o,direction:l,imgLoadStatus:c}=this.getStates();if(!n||typeof s!="number"||s<1)return;let u=o+(l==="prev"?-1:1)*s;if(u<0||u>=a.length)if(r)u=(u+a.length)%a.length;else return;if(!c[u]){const h=new Image;h.onload=d=>{this.setLoadSuccessStatus(a[u])},h.src=a[u]}},this.setLoadSuccessStatus=n=>{const{imgLoadStatus:s}=this.getStates(),r=Object.assign({},s);r[n]=!0,this.setState({imgLoadStatus:r})},this.onImageLoad=n=>{const{preloadAfterVisibleChange:s}=this.getStates();this.setLoadSuccessStatus(n),s?(this.preloadGapImage(),this.setState({preloadAfterVisibleChange:!1})):this.preloadSingleImage()}}beforeShow(){this._adapter.registerKeyDownListener(),this._adapter.disabledBodyScroll(),this.updateTimer()}afterHide(){this._adapter.unregisterKeyDownListener(),this._adapter.enabledBodyScroll(),this.clearTimer()}}const mH=yx.PREFIX;class gP extends Ve{get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{getIsInGroup:()=>this.isInGroup(),disabledBodyScroll:()=>{const{getPopupContainer:t}=this.props;this.bodyOverflow=document.body.style.overflow||"",!t&&this.bodyOverflow!=="hidden"&&(document.body.style.overflow="hidden",document.body.style.width=`calc(${this.originBodyWidth||"100%"} - ${this.scrollBarWidth}px)`)},enabledBodyScroll:()=>{const{getPopupContainer:t}=this.props;!t&&this.bodyOverflow!=="hidden"&&(document.body.style.overflow=this.bodyOverflow,document.body.style.width=this.originBodyWidth)},notifyChange:(t,n)=>{const{onChange:s,onPrev:r,onNext:a}=this.props;xt(s)&&s(t),n==="prev"?r&&r(t):a&&a(t)},notifyZoom:(t,n)=>{const{onZoomIn:s,onZoomOut:r}=this.props;n?xt(s)&&s(t):xt(r)&&r(t)},notifyClose:()=>{const{onClose:t}=this.props;xt(t)&&t()},notifyVisibleChange:t=>{const{onVisibleChange:n}=this.props;xt(n)&&n(t)},notifyRatioChange:t=>{const{onRatioChange:n}=this.props;xt(n)&&n(t)},notifyRotateChange:t=>{const{onRotateLeft:n}=this.props;xt(n)&&n(t)},notifyDownload:(t,n)=>{const{onDownload:s}=this.props;xt(s)&&s(t,n)},notifyDownloadError:t=>{const{onDownloadError:n}=this.props;xt(n)&&n(t)},registerKeyDownListener:()=>{window&&window.addEventListener("keydown",this.handleKeyDown)},unregisterKeyDownListener:()=>{window&&window.removeEventListener("keydown",this.handleKeyDown)},getSetDownloadFunc:()=>{var t,n;return(n=(t=this.context)===null||t===void 0?void 0:t.setDownloadName)!==null&&n!==void 0?n:this.props.setDownloadName},isValidTarget:t=>{const n=this.headerRef&&this.headerRef.current,s=this.footerRef&&this.footerRef.current,r=this.leftIconRef&&this.leftIconRef.current,a=this.rightIconRef&&this.rightIconRef.current,o=t.target;return!(n&&n.contains(o)||s&&s.contains(o)||r&&r.contains(o)||a&&a.contains(o))},changeImageZoom:function(){var t;!((t=e.imageRef)===null||t===void 0)&&t.current&&e.imageRef.current.foundation.changeZoom(...arguments)}})}constructor(e){var t;super(e),t=this,this.viewVisibleChange=()=>{this.foundation.handleViewVisibleChange()},this.handleSwitchImage=n=>{this.foundation.handleSwitchImage(n)},this.handleDownload=()=>{this.foundation.handleDownload()},this.handlePreviewClose=n=>{this.foundation.handlePreviewClose(n)},this.handleAdjustRatio=n=>{this.foundation.handleAdjustRatio(n)},this.handleRotateImage=n=>{this.foundation.handleRotateImage(n)},this.handleZoomImage=function(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;t.foundation.handleZoomImage(n,s)},this.handleMouseUp=n=>{this.foundation.handleMouseUp(n.nativeEvent)},this.handleMouseMove=n=>{this.foundation.handleMouseMove(n)},this.handleKeyDown=n=>{this.foundation.handleKeyDown(n)},this.onImageError=()=>{this.foundation.preloadSingleImage()},this.onImageLoad=n=>{this.foundation.onImageLoad(n)},this.handleMouseDown=n=>{this.foundation.handleMouseDown(n)},this.handleWheel=n=>{this.foundation.handleWheel(n)},this.registryImageWrapRef=n=>{this.imageWrapRef&&this.imageWrapRef.removeEventListener("wheel",this.handleWheel),n&&n.addEventListener("wheel",this.handleWheel,{passive:!1}),this.imageWrapRef=n},this.state={imgSrc:[],imgLoadStatus:new Map,zoom:.1,currentIndex:0,ratio:"adaptation",rotation:0,viewerVisible:!0,visible:!1,preloadAfterVisibleChange:!0,direction:""},this.foundation=new K4e(this.adapter),this.bodyOverflow="",this.originBodyWidth="100%",this.scrollBarWidth=0,this.imageWrapRef=null,this.imageRef=k.createRef(),this.headerRef=k.createRef(),this.footerRef=k.createRef(),this.leftIconRef=k.createRef(),this.rightIconRef=k.createRef()}static getDerivedStateFromProps(e,t){const n={};let s=[];return e.visible&&(s=Array.isArray(e.src)?e.src:[e.src]),wi(s,t.imgSrc)||(n.imgSrc=s),e.visible!==t.visible&&(n.visible=e.visible,e.visible&&(n.preloadAfterVisibleChange=!0,n.viewerVisible=!0,n.rotation=0,n.ratio="adaptation")),"currentIndex"in e&&e.currentIndex!==t.currentIndex&&(n.currentIndex=e.currentIndex,n.ratio="adaptation"),n}componentDidMount(){this.scrollBarWidth=sj(),this.originBodyWidth=document.body.style.width,this.props.visible&&this.foundation.beforeShow()}componentDidUpdate(e,t){e.src!==this.props.src&&this.foundation.updateTimer(),!e.visible&&this.props.visible&&this.foundation.beforeShow(),e.visible&&!this.props.visible&&this.foundation.afterHide()}componentWillUnmount(){this.foundation.clearTimer()}isInGroup(){return!!(this.context&&this.context.isGroup)}render(){const{getPopupContainer:e,closable:t,zIndex:n,visible:s,className:r,style:a,infinite:o,zoomStep:l,crossOrigin:c,prevTip:u,nextTip:h,zoomInTip:d,zoomOutTip:p,rotateTip:f,downloadTip:g,adaptiveTip:m,originTip:y,showTooltip:b,disableDownload:x,renderPreviewMenu:S,renderHeader:C}=this.props,{currentIndex:w,imgSrc:A,zoom:T,ratio:E,rotation:P,viewerVisible:O}=this.state;let M={zIndex:n};e&&(M={zIndex:n,position:"static"});const R=`${mH}-preview`,j=K(R,{[`${mH}-hide`]:!s,[`${R}-popup`]:e},r),I=O?"":`${R}-hide`,D=A.length,z=D!==1&&(o||w!==0),$=D!==1&&(o||w!==D-1);return s&&k.createElement(Hf,{getPopupContainer:e,style:M},k.createElement("div",{className:j,style:a,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,ref:this.registryImageWrapRef,onMouseMove:this.handleMouseMove},k.createElement(B4e,{ref:this.headerRef,className:K(I),onClose:this.handlePreviewClose,renderHeader:C,closable:t}),k.createElement(SN,{ref:this.imageRef,src:A[w],onZoom:this.handleZoomImage,disableDownload:x,setRatio:this.handleAdjustRatio,zoom:T,ratio:E,rotation:P,crossOrigin:c,onError:this.onImageError,onLoad:this.onImageLoad}),z&&k.createElement("div",{ref:this.leftIconRef,className:K(`${R}-icon`,`${R}-prev`,I),onClick:()=>this.handleSwitchImage("prev")},k.createElement(TPe,{size:"large"})),$&&k.createElement("div",{ref:this.rightIconRef,className:K(`${R}-icon`,`${R}-next`,I),onClick:()=>this.handleSwitchImage("next")},k.createElement(wp,{size:"large"})),k.createElement(xN,{forwardRef:this.footerRef,className:I,totalNum:D,curPage:w+1,disabledPrev:!z,disabledNext:!$,zoom:T*100,step:l*100,showTooltip:b,ratio:E,prevTip:u,nextTip:h,zIndex:n,zoomInTip:d,zoomOutTip:p,rotateTip:f,downloadTip:g,disableDownload:x,adaptiveTip:m,originTip:y,onPrev:()=>this.handleSwitchImage("prev"),onNext:()=>this.handleSwitchImage("next"),onZoomIn:this.handleZoomImage,onZoomOut:this.handleZoomImage,onDownload:this.handleDownload,onRotate:this.handleRotateImage,onAdjustRatio:this.handleAdjustRatio,renderPreviewMenu:S})))}}gP.contextType=bN;gP.propTypes={style:v.object,className:v.string,visible:v.bool,src:v.oneOfType([v.string,v.array]),currentIndex:v.number,defaultCurrentIndex:v.number,defaultVisible:v.bool,maskClosable:v.bool,closable:v.bool,zoomStep:v.number,infinite:v.bool,showTooltip:v.bool,closeOnEsc:v.bool,prevTip:v.string,nextTip:v.string,zoomInTip:v.string,zoomOutTip:v.string,downloadTip:v.string,adaptiveTip:v.string,originTip:v.string,lazyLoad:v.bool,preLoad:v.bool,preLoadGap:v.number,disableDownload:v.bool,viewerVisibleDelay:v.number,zIndex:v.number,maxZoom:v.number,minZoom:v.number,renderHeader:v.func,renderPreviewMenu:v.func,getPopupContainer:v.func,onVisibleChange:v.func,onChange:v.func,onClose:v.func,onZoomIn:v.func,onZoomOut:v.func,onPrev:v.func,onNext:v.func,onDownload:v.func,onRatioChange:v.func,onRotateLeft:v.func};gP.defaultProps={showTooltip:!1,zoomStep:.1,infinite:!1,closeOnEsc:!0,lazyLoad:!1,preLoad:!0,preLoadGap:2,zIndex:F4e.DEFAULT_Z_INDEX,maskClosable:!0,viewerVisibleDelay:1e4,maxZoom:5,minZoom:.1};class X4e extends tt{constructor(e){super(Object.assign({},e)),this.handleClick=t=>{const{imageID:n,preview:s}=this.getProps();if(s)if(this._adapter.getIsInGroup()){const{setCurrentIndex:r,handleVisibleChange:a}=this._adapter.getContexts();r(n),a(!0)}else this.handlePreviewVisibleChange(!0)},this.handleLoaded=t=>{const{onLoad:n}=this.getProps();n&&n(t),this.setState({loadStatus:"success"})},this.handleError=t=>{const{onError:n}=this.getProps();n&&n(t),this.setState({loadStatus:"error"})},this.handlePreviewVisibleChange=t=>{const{preview:n}=this.getProps();if(As(n)){const{onVisibleChange:s}=n;s&&s(t),"visible"in n||this.setState({previewVisible:t})}else this.setState({previewVisible:t})}}}var Y4e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const Uo=yx.PREFIX;let _0=class extends Ve{get adapter(){return Object.assign(Object.assign({},super.adapter),{getIsInGroup:()=>this.isInGroup()})}constructor(e){super(e),this.handleClick=t=>{this.foundation.handleClick(t)},this.handleLoaded=t=>{this.foundation.handleLoaded(t)},this.handleError=t=>{this.foundation.handleError(t)},this.handlePreviewVisibleChange=t=>{this.foundation.handlePreviewVisibleChange(t)},this.renderDefaultLoading=()=>{const{width:t,height:n}=this.props;return k.createElement(yl.Image,{style:{width:t,height:n}})},this.renderDefaultError=()=>{const t=`${Uo}-status`;return k.createElement("div",{className:t},k.createElement(MQ,{size:"extra-large"}))},this.renderLoad=()=>{const t=`${Uo}-status`,{placeholder:n}=this.props;return n?k.createElement("div",{className:t},n):this.renderDefaultLoading()},this.renderError=()=>{const{fallback:t}=this.props,n=`${Uo}-status`,s=typeof t=="string"?k.createElement("img",{style:{width:"100%",height:"100%"},src:t,alt:"fallback"}):t;return t?k.createElement("div",{className:n},s):this.renderDefaultError()},this.renderExtra=()=>{const{loadStatus:t}=this.state;return k.createElement("div",{className:`${Uo}-overlay`},t==="error"&&this.renderError(),t==="loading"&&this.renderLoad())},this.getLocalTextByKey=t=>k.createElement(gi,{componentName:"Image"},n=>n[t]),this.renderMask=()=>k.createElement("div",{className:`${Uo}-mask`},k.createElement("div",{className:`${Uo}-mask-info`},k.createElement(AQ,{size:"extra-large"}),k.createElement("span",{className:`${Uo}-mask-info-text`},this.getLocalTextByKey("preview")))),this.state={src:"",loadStatus:"loading",previewVisible:!1},this.foundation=new X4e(this.adapter),this.imgRef=k.createRef()}static getDerivedStateFromProps(e,t){const n={};if(e.src!==t.src&&(n.src=e.src,n.loadStatus="loading"),As(e.preview)){const{visible:s}=e.preview;wj(s)&&(n.previewVisible=s)}return n}isInGroup(){return!!(this.context&&this.context.isGroup)}isLazyLoad(){return this.context?this.context.lazyLoad:!1}render(){var e;const{src:t,loadStatus:n,previewVisible:s}=this.state,r=this.props,{src:a,width:o,height:l,alt:c,style:u,className:h,crossOrigin:d,preview:p,fallback:f,placeholder:g,imageID:m,setDownloadName:y,imgCls:b,imgStyle:x}=r,S=Y4e(r,["src","width","height","alt","style","className","crossOrigin","preview","fallback","placeholder","imageID","setDownloadName","imgCls","imgStyle"]),C=Object.assign({width:o,height:l},u),w=K(Uo,h),A=n==="success"&&p&&!this.isInGroup(),T=p&&n==="success",E=As(p)&&(e=p.src)!==null&&e!==void 0?e:t,P=As(p)&&A?Object.assign(Object.assign({},_n(p,["className","style","previewCls","previewStyle"])),{className:p==null?void 0:p.previewCls,style:p==null?void 0:p.previewStyle}):{};return k.createElement("div",{style:C,className:w,onClick:this.handleClick},k.createElement("img",Object.assign({ref:this.imgRef},S,{src:this.isInGroup()&&this.isLazyLoad()?void 0:t,"data-src":t,alt:c,style:x,className:K(`${Uo}-img`,{[`${Uo}-img-preview`]:T,[`${Uo}-img-error`]:n==="error",[b]:!!b}),width:o,height:l,crossOrigin:d,onError:this.handleError,onLoad:this.handleLoaded})),n!=="success"&&this.renderExtra(),A&&k.createElement(gP,Object.assign({},P,{src:E,visible:s,onVisibleChange:this.handlePreviewVisibleChange,crossOrigin:Hr(d)?P==null?void 0:P.crossOrigin:d,setDownloadName:y})))}};_0.isSemiImage=!0;_0.contextType=bN;_0.propTypes={style:v.object,className:v.string,src:v.string,width:v.oneOfType([v.string,v.number]),height:v.oneOfType([v.string,v.number]),alt:v.string,placeholder:v.node,fallback:v.oneOfType([v.string,v.node]),preview:v.oneOfType([v.bool,v.object]),onLoad:v.func,onError:v.func,onClick:v.func,crossOrigin:v.string,imageID:v.number};_0.defaultProps={preview:!0};function go(i){return!i||typeof i!="object"?"":"position"in i||"type"in i?yH(i.position):"start"in i||"end"in i?yH(i):"line"in i||"column"in i?LL(i):""}function LL(i){return _H(i&&i.line)+":"+_H(i&&i.column)}function yH(i){return LL(i&&i.start)+"-"+LL(i&&i.end)}function _H(i){return i&&typeof i=="number"?i:1}class fi extends Error{constructor(e,t,n){super(),typeof t=="string"&&(n=t,t=void 0);let s="",r={},a=!1;if(t&&("line"in t&&"column"in t?r={place:t}:"start"in t&&"end"in t?r={place:t}:"type"in t?r={ancestors:[t],place:t.position}:r={...t}),typeof e=="string"?s=e:!r.cause&&e&&(a=!0,s=e.message,r.cause=e),!r.ruleId&&!r.source&&typeof n=="string"){const l=n.indexOf(":");l===-1?r.ruleId=n:(r.source=n.slice(0,l),r.ruleId=n.slice(l+1))}if(!r.place&&r.ancestors&&r.ancestors){const l=r.ancestors[r.ancestors.length-1];l&&(r.place=l.position)}const o=r.place&&"start"in r.place?r.place.start:r.place;this.ancestors=r.ancestors||void 0,this.cause=r.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file,this.message=s,this.line=o?o.line:void 0,this.name=go(r.place)||"1:1",this.place=r.place||void 0,this.reason=this.message,this.ruleId=r.ruleId||void 0,this.source=r.source||void 0,this.stack=a&&r.cause&&typeof r.cause.stack=="string"?r.cause.stack:"",this.actual,this.expected,this.note,this.url}}fi.prototype.file="";fi.prototype.name="";fi.prototype.reason="";fi.prototype.message="";fi.prototype.stack="";fi.prototype.column=void 0;fi.prototype.line=void 0;fi.prototype.ancestors=void 0;fi.prototype.cause=void 0;fi.prototype.fatal=void 0;fi.prototype.place=void 0;fi.prototype.ruleId=void 0;fi.prototype.source=void 0;const Ul={basename:q4e,dirname:Z4e,extname:J4e,join:Q4e,sep:"/"};function q4e(i,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');_x(i);let t=0,n=-1,s=i.length,r;if(e===void 0||e.length===0||e.length>i.length){for(;s--;)if(i.codePointAt(s)===47){if(r){t=s+1;break}}else n<0&&(r=!0,n=s+1);return n<0?"":i.slice(t,n)}if(e===i)return"";let a=-1,o=e.length-1;for(;s--;)if(i.codePointAt(s)===47){if(r){t=s+1;break}}else a<0&&(r=!0,a=s+1),o>-1&&(i.codePointAt(s)===e.codePointAt(o--)?o<0&&(n=s):(o=-1,n=a));return t===n?n=a:n<0&&(n=i.length),i.slice(t,n)}function Z4e(i){if(_x(i),i.length===0)return".";let e=-1,t=i.length,n;for(;--t;)if(i.codePointAt(t)===47){if(n){e=t;break}}else n||(n=!0);return e<0?i.codePointAt(0)===47?"/":".":e===1&&i.codePointAt(0)===47?"//":i.slice(0,e)}function J4e(i){_x(i);let e=i.length,t=-1,n=0,s=-1,r=0,a;for(;e--;){const o=i.codePointAt(e);if(o===47){if(a){n=e+1;break}continue}t<0&&(a=!0,t=e+1),o===46?s<0?s=e:r!==1&&(r=1):s>-1&&(r=-1)}return s<0||t<0||r===0||r===1&&s===t-1&&s===n+1?"":i.slice(s,t)}function Q4e(...i){let e=-1,t;for(;++e<i.length;)_x(i[e]),i[e]&&(t=t===void 0?i[e]:t+"/"+i[e]);return t===void 0?".":e$e(t)}function e$e(i){_x(i);const e=i.codePointAt(0)===47;let t=t$e(i,!e);return t.length===0&&!e&&(t="."),t.length>0&&i.codePointAt(i.length-1)===47&&(t+="/"),e?"/"+t:t}function t$e(i,e){let t="",n=0,s=-1,r=0,a=-1,o,l;for(;++a<=i.length;){if(a<i.length)o=i.codePointAt(a);else{if(o===47)break;o=47}if(o===47){if(!(s===a-1||r===1))if(s!==a-1&&r===2){if(t.length<2||n!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(l=t.lastIndexOf("/"),l!==t.length-1){l<0?(t="",n=0):(t=t.slice(0,l),n=t.length-1-t.lastIndexOf("/")),s=a,r=0;continue}}else if(t.length>0){t="",n=0,s=a,r=0;continue}}e&&(t=t.length>0?t+"/..":"..",n=2)}else t.length>0?t+="/"+i.slice(s+1,a):t=i.slice(s+1,a),n=a-s-1;s=a,r=0}else o===46&&r>-1?r++:r=-1}return t}function _x(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}const i$e={cwd:n$e};function n$e(){return"/"}function DL(i){return!!(i!==null&&typeof i=="object"&&"href"in i&&i.href&&"protocol"in i&&i.protocol&&i.auth===void 0)}function s$e(i){if(typeof i=="string")i=new URL(i);else if(!DL(i)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+i+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(i.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return r$e(i)}function r$e(i){if(i.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const e=i.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const n=e.codePointAt(t+2);if(n===70||n===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const TM=["history","path","basename","stem","extname","dirname"];class Tte{constructor(e){let t;e?DL(e)?t={path:e}:typeof e=="string"||a$e(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":i$e.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<TM.length;){const r=TM[n];r in t&&t[r]!==void 0&&t[r]!==null&&(this[r]=r==="history"?[...t[r]]:t[r])}let s;for(s in t)TM.includes(s)||(this[s]=t[s])}get basename(){return typeof this.path=="string"?Ul.basename(this.path):void 0}set basename(e){PM(e,"basename"),EM(e,"basename"),this.path=Ul.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Ul.dirname(this.path):void 0}set dirname(e){vH(this.basename,"dirname"),this.path=Ul.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Ul.extname(this.path):void 0}set extname(e){if(EM(e,"extname"),vH(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ul.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){DL(e)&&(e=s$e(e)),PM(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Ul.basename(this.path,this.extname):void 0}set stem(e){PM(e,"stem"),EM(e,"stem"),this.path=Ul.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const s=this.message(e,t,n);throw s.fatal=!0,s}info(e,t,n){const s=this.message(e,t,n);return s.fatal=void 0,s}message(e,t,n){const s=new fi(e,t,n);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function EM(i,e){if(i&&i.includes(Ul.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Ul.sep+"`")}function PM(i,e){if(!i)throw new Error("`"+e+"` cannot be empty")}function vH(i,e){if(!i)throw new Error("Setting `"+e+"` requires `path` to be set too")}function a$e(i){return!!(i&&typeof i=="object"&&"byteLength"in i&&"byteOffset"in i)}const o$e=["md","markdown","mdown","mkdn","mkd","mdwn","mkdown","ron"],l$e=o$e.map(function(i){return"."+i});function Ete(i,e){const t=c$e(i)?i:new Tte(i),{format:n,...s}=e||{};return{file:t,options:{format:n==="md"||n==="mdx"?n:t.extname&&(s.mdExtensions||l$e).includes(t.extname)?"md":"mdx",...s}}}function c$e(i){return!!(i&&typeof i=="object"&&"message"in i&&"messages"in i)}function u$e(){return{enter:{mdxFlowExpression:d$e,mdxTextExpression:p$e},exit:{mdxFlowExpression:bH,mdxFlowExpressionChunk:xH,mdxTextExpression:bH,mdxTextExpressionChunk:xH}}}function h$e(){return{handlers:{mdxFlowExpression:SH,mdxTextExpression:SH},unsafe:[{character:"{",inConstruct:["phrasing"]},{atBreak:!0,character:"{"}]}}function d$e(i){this.enter({type:"mdxFlowExpression",value:""},i),this.buffer()}function p$e(i){this.enter({type:"mdxTextExpression",value:""},i),this.buffer()}function bH(i){const e=this.resume(),t=i.estree,n=this.stack[this.stack.length-1];n.type==="mdxFlowExpression"||n.type,this.exit(i),n.value=e,t&&(n.data={estree:t})}function xH(i){this.config.enter.data.call(this,i),this.config.exit.data.call(this,i)}function SH(i,e,t){const n=i.value||"";return"{"+t.indentLines(n,function(r,a,o){return(a===0||o?"":"  ")+r})+"}"}function cA(i,e){const t=String(i);if(typeof e!="string")throw new TypeError("Expected character");let n=0,s=t.indexOf(e);for(;s!==-1;)n++,s=t.indexOf(e,s+e.length);return n}const f$e=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],CH={0:"",128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""};function Pte(i){const e=typeof i=="string"?i.charCodeAt(0):i;return e>=48&&e<=57}function g$e(i){const e=typeof i=="string"?i.charCodeAt(0):i;return e>=97&&e<=102||e>=65&&e<=70||e>=48&&e<=57}function m$e(i){const e=typeof i=="string"?i.charCodeAt(0):i;return e>=97&&e<=122||e>=65&&e<=90}function wH(i){return m$e(i)||Pte(i)}const AH=document.createElement("i");function Mb(i){const e="&"+i+";";AH.innerHTML=e;const t=AH.textContent;return t.charCodeAt(t.length-1)===59&&i!=="semi"||t===e?!1:t}const gg=String.fromCharCode,y$e=["","Named character references must be terminated by a semicolon","Numeric character references must be terminated by a semicolon","Named character references cannot be empty","Numeric character references cannot be empty","Named character references must be known","Numeric character references cannot be disallowed","Numeric character references cannot be outside the permissible Unicode range"];function _$e(i,e={}){const t=typeof e.additional=="string"?e.additional.charCodeAt(0):e.additional,n=[];let s=0,r=-1,a="",o,l;e.position&&("start"in e.position||"indent"in e.position?(l=e.position.indent,o=e.position.start):o=e.position);let c=(o?o.line:0)||1,u=(o?o.column:0)||1,h=p(),d;for(s--;++s<=i.length;)if(d===10&&(u=(l?l[r]:0)||1),d=i.charCodeAt(s),d===38){const m=i.charCodeAt(s+1);if(m===9||m===10||m===12||m===32||m===38||m===60||Number.isNaN(m)||t&&m===t){a+=gg(d),u++;continue}const y=s+1;let b=y,x=y,S;if(m===35){x=++b;const M=i.charCodeAt(x);M===88||M===120?(S="hexadecimal",x=++b):S="decimal"}else S="named";let C="",w="",A="";const T=S==="named"?wH:S==="decimal"?Pte:g$e;for(x--;++x<=i.length;){const M=i.charCodeAt(x);if(!T(M))break;A+=gg(M),S==="named"&&f$e.includes(A)&&(C=A,w=Mb(A))}let E=i.charCodeAt(x)===59;if(E){x++;const M=S==="named"?Mb(A):!1;M&&(C=A,w=M)}let P=1+x-y,O="";if(!(!E&&e.nonTerminated===!1))if(!A)S!=="named"&&f(4,P);else if(S==="named"){if(E&&!w)f(5,1);else if(C!==A&&(x=b+C.length,P=1+x-b,E=!1),!E){const M=C?1:3;if(e.attribute){const R=i.charCodeAt(x);R===61?(f(M,P),w=""):wH(R)?w="":f(M,P)}else f(M,P)}O=w}else{E||f(2,P);let M=Number.parseInt(A,S==="hexadecimal"?16:10);if(v$e(M))f(7,P),O=gg(65533);else if(M in CH)f(6,P),O=CH[M];else{let R="";b$e(M)&&f(6,P),M>65535&&(M-=65536,R+=gg(M>>>10|55296),M=56320|M&1023),O=R+gg(M)}}if(O){g(),h=p(),s=x-1,u+=x-y+1,n.push(O);const M=p();M.offset++,e.reference&&e.reference.call(e.referenceContext,O,{start:h,end:M},i.slice(y-1,x)),h=M}else A=i.slice(y-1,x),a+=A,u+=A.length,s=x-1}else d===10&&(c++,r++,u=0),Number.isNaN(d)?g():(a+=gg(d),u++);return n.join("");function p(){return{line:c,column:u,offset:s+((o?o.offset:0)||0)}}function f(m,y){let b;e.warning&&(b=p(),b.column+=y,b.offset+=y,e.warning.call(e.warningContext,y$e[m],b,m))}function g(){a&&(n.push(a),e.text&&e.text.call(e.textContext,a,{start:h,end:p()}),a="")}}function v$e(i){return i>=55296&&i<=57343||i>1114111}function b$e(i){return i>=1&&i<=8||i===11||i>=13&&i<=31||i>=127&&i<=159||i>=64976&&i<=65007||(i&65535)===65535||(i&65535)===65534}const x$e=/["&'<>`]/g,S$e=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,C$e=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,w$e=/[|\\{}()[\]^$+*?.]/g,kH=new WeakMap;function A$e(i,e){if(i=i.replace(e.subset?k$e(e.subset):x$e,n),e.subset||e.escapeOnly)return i;return i.replace(S$e,t).replace(C$e,n);function t(s,r,a){return e.format((s.charCodeAt(0)-55296)*1024+s.charCodeAt(1)-56320+65536,a.charCodeAt(r+2),e)}function n(s,r,a){return e.format(s.charCodeAt(0),a.charCodeAt(r+1),e)}}function k$e(i){let e=kH.get(i);return e||(e=T$e(i),kH.set(i,e)),e}function T$e(i){const e=[];let t=-1;for(;++t<i.length;)e.push(i[t].replace(w$e,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}function E$e(i){return"&#x"+i.toString(16).toUpperCase()+";"}function P$e(i,e){return A$e(i,Object.assign({format:E$e},e))}const Ote="  ";function O$e(){return{canContainEols:["mdxJsxTextElement"],enter:{mdxJsxFlowTag:n,mdxJsxFlowTagClosingMarker:s,mdxJsxFlowTagAttribute:h,mdxJsxFlowTagExpressionAttribute:d,mdxJsxFlowTagAttributeValueLiteral:i,mdxJsxFlowTagAttributeValueExpression:i,mdxJsxFlowTagSelfClosingMarker:a,mdxJsxTextTag:n,mdxJsxTextTagClosingMarker:s,mdxJsxTextTagAttribute:h,mdxJsxTextTagExpressionAttribute:d,mdxJsxTextTagAttributeValueLiteral:i,mdxJsxTextTagAttributeValueExpression:i,mdxJsxTextTagSelfClosingMarker:a},exit:{mdxJsxFlowTagClosingMarker:o,mdxJsxFlowTagNamePrimary:l,mdxJsxFlowTagNameMember:c,mdxJsxFlowTagNameLocal:u,mdxJsxFlowTagExpressionAttribute:p,mdxJsxFlowTagExpressionAttributeValue:t,mdxJsxFlowTagAttributeNamePrimary:f,mdxJsxFlowTagAttributeNameLocal:g,mdxJsxFlowTagAttributeValueLiteral:m,mdxJsxFlowTagAttributeValueLiteralValue:t,mdxJsxFlowTagAttributeValueExpression:y,mdxJsxFlowTagAttributeValueExpressionValue:t,mdxJsxFlowTagSelfClosingMarker:b,mdxJsxFlowTag:x,mdxJsxTextTagClosingMarker:o,mdxJsxTextTagNamePrimary:l,mdxJsxTextTagNameMember:c,mdxJsxTextTagNameLocal:u,mdxJsxTextTagExpressionAttribute:p,mdxJsxTextTagExpressionAttributeValue:t,mdxJsxTextTagAttributeNamePrimary:f,mdxJsxTextTagAttributeNameLocal:g,mdxJsxTextTagAttributeValueLiteral:m,mdxJsxTextTagAttributeValueLiteralValue:t,mdxJsxTextTagAttributeValueExpression:y,mdxJsxTextTagAttributeValueExpressionValue:t,mdxJsxTextTagSelfClosingMarker:b,mdxJsxTextTag:x}};function i(){this.buffer()}function e(A){return{line:A.line,column:A.column,offset:A.offset}}function t(A){this.config.enter.data.call(this,A),this.config.exit.data.call(this,A)}function n(A){const T={name:void 0,attributes:[],close:!1,selfClosing:!1,start:A.start,end:A.end};this.data.mdxJsxTagStack||(this.data.mdxJsxTagStack=[]),this.data.mdxJsxTag=T,this.buffer()}function s(A){if(this.data.mdxJsxTagStack.length===0)throw new fi("Unexpected closing slash `/` in tag, expected an open tag first",{start:A.start,end:A.end},"mdast-util-mdx-jsx:unexpected-closing-slash")}function r(A){if(this.data.mdxJsxTag.close)throw new fi("Unexpected attribute in closing tag, expected the end of the tag",{start:A.start,end:A.end},"mdast-util-mdx-jsx:unexpected-attribute")}function a(A){if(this.data.mdxJsxTag.close)throw new fi("Unexpected self-closing slash `/` in closing tag, expected the end of the tag",{start:A.start,end:A.end},"mdast-util-mdx-jsx:unexpected-self-closing-slash")}function o(){const A=this.data.mdxJsxTag;A.close=!0}function l(A){const T=this.data.mdxJsxTag;T.name=this.sliceSerialize(A)}function c(A){const T=this.data.mdxJsxTag;T.name+="."+this.sliceSerialize(A)}function u(A){const T=this.data.mdxJsxTag;T.name+=":"+this.sliceSerialize(A)}function h(A){const T=this.data.mdxJsxTag;r.call(this,A),T.attributes.push({type:"mdxJsxAttribute",name:"",value:null,position:{start:e(A.start),end:void 0}})}function d(A){const T=this.data.mdxJsxTag;r.call(this,A),T.attributes.push({type:"mdxJsxExpressionAttribute",value:""}),this.buffer()}function p(A){const T=this.data.mdxJsxTag,E=T.attributes[T.attributes.length-1];E.type;const P=A.estree;E.value=this.resume(),P&&(E.data={estree:P})}function f(A){const T=this.data.mdxJsxTag,E=T.attributes[T.attributes.length-1];E.type,E.name=this.sliceSerialize(A),E.position,E.position.end=e(A.end)}function g(A){const T=this.data.mdxJsxTag,E=T.attributes[T.attributes.length-1];E.type,E.name+=":"+this.sliceSerialize(A),E.position,E.position.end=e(A.end)}function m(A){const T=this.data.mdxJsxTag,E=T.attributes[T.attributes.length-1];E.value=_$e(this.resume(),{nonTerminated:!1}),E.position,E.position.end=e(A.end)}function y(A){const T=this.data.mdxJsxTag,E=T.attributes[T.attributes.length-1];E.type;const P={type:"mdxJsxAttributeValueExpression",value:this.resume()},O=A.estree;O&&(P.data={estree:O}),E.value=P,E.position,E.position.end=e(A.end)}function b(){const A=this.data.mdxJsxTag;A.selfClosing=!0}function x(A){const T=this.data.mdxJsxTag,E=this.data.mdxJsxTagStack,P=E[E.length-1];if(T.close&&P.name!==T.name)throw new fi("Unexpected closing tag `"+w(T)+"`, expected corresponding closing tag for `"+w(P)+"` ("+go(P)+")",{start:A.start,end:A.end},"mdast-util-mdx-jsx:end-tag-mismatch");this.resume(),T.close?E.pop():this.enter({type:A.type==="mdxJsxTextTag"?"mdxJsxTextElement":"mdxJsxFlowElement",name:T.name||null,attributes:T.attributes,children:[]},A,S),T.selfClosing||T.close?this.exit(A,C):E.push(T)}function S(A,T){const E=this.data.mdxJsxTagStack,P=E[E.length-1],O=A?" before the end of `"+A.type+"`":"",M=A?{start:A.start,end:A.end}:void 0;throw new fi("Expected a closing tag for `"+w(P)+"` ("+go({start:T.start,end:T.end})+")"+O,M,"mdast-util-mdx-jsx:end-tag-mismatch")}function C(A,T){const E=this.data.mdxJsxTag;throw new fi("Expected the closing tag `"+w(E)+"` either after the end of `"+T.type+"` ("+go(T.end)+") or another opening tag after the start of `"+T.type+"` ("+go(T.start)+")",{start:A.start,end:A.end},"mdast-util-mdx-jsx:end-tag-mismatch")}function w(A){return"<"+(A.close?"/":"")+(A.name||"")+">"}}function M$e(i){const e=i||{},t=e.quote||'"',n=e.quoteSmart||!1,s=e.tightSelfClosing||!1,r=e.printWidth||Number.POSITIVE_INFINITY,a=t==='"'?"'":'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize attribute values with `"+t+"` for `options.quote`, expected `\"`, or `'`");return o.peek=R$e,{handlers:{mdxJsxFlowElement:o,mdxJsxTextElement:o},unsafe:[{character:"<",inConstruct:["phrasing"]},{atBreak:!0,character:"<"}],fences:!0,resourceLink:!0};function o(l,c,u,h){const d=l.type==="mdxJsxFlowElement",p=l.name?!l.children||l.children.length===0:!1,f=Mte(u),g=Ite(f),m=u.createTracker(h),y=u.createTracker(h),b=[],x=(d?g:"")+"<"+(l.name||""),S=u.enter(l.type);if(m.move(x),y.move(x),l.attributes&&l.attributes.length>0){if(!l.name)throw new Error("Cannot serialize fragment w/ attributes");let E=-1;for(;++E<l.attributes.length;){const P=l.attributes[E];let O;if(P.type==="mdxJsxExpressionAttribute")O="{"+(P.value||"")+"}";else{if(!P.name)throw new Error("Cannot serialize attribute w/o name");const M=P.value,R=P.name;let j="";if(M!=null)if(typeof M=="object")j="{"+(M.value||"")+"}";else{const I=n&&cA(M,t)>cA(M,a)?a:t;j=I+P$e(M,{subset:[I]})+I}O=R+(j?"=":"")+j}b.push(O)}}let C=!1;const w=b.join(" ");d&&(/\r?\n|\r/.test(w)||m.current().now.column+w.length+(p?s?2:3:1)>r)&&(C=!0);let A=m,T=x;if(C){A=y;let E=-1;for(;++E<b.length;)b[E]=g+Ote+b[E];T+=A.move(`
`+b.join(`
`)+`
`+g)}else w&&(T+=A.move(" "+w));return p&&(T+=A.move((s||C?"":" ")+"/")),T+=A.move(">"),l.children&&l.children.length>0&&(l.type==="mdxJsxTextElement"?T+=A.move(u.containerPhrasing(l,{...A.current(),before:">",after:"<"})):(A.shift(2),T+=A.move(`
`),T+=A.move(I$e(l,u,A.current())),T+=A.move(`
`))),p||(T+=A.move((d?g:"")+"</"+(l.name||"")+">")),S(),T}}function I$e(i,e,t){const n=e.indexStack,s=i.children,r=e.createTracker(t),a=Ite(Mte(e)),o=[];let l=-1;for(n.push(-1);++l<s.length;){const c=s[l];n[n.length-1]=l;const u={before:`
`,after:`
`,...r.current()},h=e.handle(c,i,e,u),d=c.type==="mdxJsxFlowElement"?h:e.indentLines(h,function(p,f,g){return(g?"":a)+p});o.push(r.move(d)),c.type!=="list"&&(e.bulletLastUsed=void 0),l<s.length-1&&o.push(r.move(`

`))}return n.pop(),o.join("")}function Mte(i){let e=0,t=i.stack.length;for(;--t>-1;){const n=i.stack[t];if(n==="blockquote"||n==="listItem")break;n==="mdxJsxFlowElement"&&e++}return e}function Ite(i){return Ote.repeat(i)}function R$e(){return"<"}function L$e(){return{enter:{mdxjsEsm:F$e},exit:{mdxjsEsm:B$e,mdxjsEsmData:j$e}}}function D$e(){return{handlers:{mdxjsEsm:N$e}}}function F$e(i){this.enter({type:"mdxjsEsm",value:""},i),this.buffer()}function B$e(i){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,this.exit(i);const n=i.estree;t.value=e,n&&(t.data={estree:n})}function j$e(i){this.config.enter.data.call(this,i),this.config.exit.data.call(this,i)}function N$e(i){return i.value||""}function $$e(){return[u$e(),O$e(),L$e()]}function z$e(i){return{extensions:[h$e(),M$e(i),D$e()]}}var H$e=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],Rte=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],V$e="-----------------------------------------------------------------------------------------------------------------------------------------------------",Lte="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",OM={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},MM="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",U$e={5:MM,"5module":MM+" export import",6:MM+" const class extends export import super"},W$e=/^in(stanceof)?$/,G$e=new RegExp("["+Lte+"]"),K$e=new RegExp("["+Lte+V$e+"]");function FL(i,e){for(var t=65536,n=0;n<e.length;n+=2){if(t+=e[n],t>i)return!1;if(t+=e[n+1],t>=i)return!0}return!1}function Ac(i,e){return i<65?i===36:i<91?!0:i<97?i===95:i<123?!0:i<=65535?i>=170&&G$e.test(String.fromCharCode(i)):e===!1?!1:FL(i,Rte)}function pf(i,e){return i<48?i===36:i<58?!0:i<65?!1:i<91?!0:i<97?i===95:i<123?!0:i<=65535?i>=170&&K$e.test(String.fromCharCode(i)):e===!1?!1:FL(i,Rte)||FL(i,H$e)}var Zt=function(e,t){t===void 0&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function Ha(i,e){return new Zt(i,{beforeExpr:!0,binop:e})}var Va={beforeExpr:!0},Ir={startsExpr:!0},mP={};function Ut(i,e){return e===void 0&&(e={}),e.keyword=i,mP[i]=new Zt(i,e)}var U={num:new Zt("num",Ir),regexp:new Zt("regexp",Ir),string:new Zt("string",Ir),name:new Zt("name",Ir),privateId:new Zt("privateId",Ir),eof:new Zt("eof"),bracketL:new Zt("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Zt("]"),braceL:new Zt("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Zt("}"),parenL:new Zt("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Zt(")"),comma:new Zt(",",Va),semi:new Zt(";",Va),colon:new Zt(":",Va),dot:new Zt("."),question:new Zt("?",Va),questionDot:new Zt("?."),arrow:new Zt("=>",Va),template:new Zt("template"),invalidTemplate:new Zt("invalidTemplate"),ellipsis:new Zt("...",Va),backQuote:new Zt("`",Ir),dollarBraceL:new Zt("${",{beforeExpr:!0,startsExpr:!0}),eq:new Zt("=",{beforeExpr:!0,isAssign:!0}),assign:new Zt("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Zt("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Zt("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Ha("||",1),logicalAND:Ha("&&",2),bitwiseOR:Ha("|",3),bitwiseXOR:Ha("^",4),bitwiseAND:Ha("&",5),equality:Ha("==/!=/===/!==",6),relational:Ha("</>/<=/>=",7),bitShift:Ha("<</>>/>>>",8),plusMin:new Zt("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Ha("%",10),star:Ha("*",10),slash:Ha("/",10),starstar:new Zt("**",{beforeExpr:!0}),coalesce:Ha("??",1),_break:Ut("break"),_case:Ut("case",Va),_catch:Ut("catch"),_continue:Ut("continue"),_debugger:Ut("debugger"),_default:Ut("default",Va),_do:Ut("do",{isLoop:!0,beforeExpr:!0}),_else:Ut("else",Va),_finally:Ut("finally"),_for:Ut("for",{isLoop:!0}),_function:Ut("function",Ir),_if:Ut("if"),_return:Ut("return",Va),_switch:Ut("switch"),_throw:Ut("throw",Va),_try:Ut("try"),_var:Ut("var"),_const:Ut("const"),_while:Ut("while",{isLoop:!0}),_with:Ut("with"),_new:Ut("new",{beforeExpr:!0,startsExpr:!0}),_this:Ut("this",Ir),_super:Ut("super",Ir),_class:Ut("class",Ir),_extends:Ut("extends",Va),_export:Ut("export"),_import:Ut("import",Ir),_null:Ut("null",Ir),_true:Ut("true",Ir),_false:Ut("false",Ir),_in:Ut("in",{beforeExpr:!0,binop:7}),_instanceof:Ut("instanceof",{beforeExpr:!0,binop:7}),_typeof:Ut("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Ut("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Ut("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Fa=/\r\n?|\n|\u2028|\u2029/,Dte=new RegExp(Fa.source,"g");function Kf(i){return i===10||i===13||i===8232||i===8233}function Fte(i,e,t){t===void 0&&(t=i.length);for(var n=e;n<t;n++){var s=i.charCodeAt(n);if(Kf(s))return n<t-1&&s===13&&i.charCodeAt(n+1)===10?n+2:n+1}return-1}var CN=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,io=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Bte=Object.prototype,X$e=Bte.hasOwnProperty,Y$e=Bte.toString,vx=Object.hasOwn||function(i,e){return X$e.call(i,e)},TH=Array.isArray||function(i){return Y$e.call(i)==="[object Array]"},EH=Object.create(null);function Ph(i){return EH[i]||(EH[i]=new RegExp("^(?:"+i.replace(/ /g,"|")+")$"))}function Ad(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}var q$e=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,fy=function(e,t){this.line=e,this.column=t};fy.prototype.offset=function(e){return new fy(this.line,this.column+e)};var bx=function(e,t,n){this.start=t,this.end=n,e.sourceFile!==null&&(this.source=e.sourceFile)};function wN(i,e){for(var t=1,n=0;;){var s=Fte(i,n,e);if(s<0)return new fy(t,e-n);++t,n=s}}var uA={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},PH=!1;function Z$e(i){var e={};for(var t in uA)e[t]=i&&vx(i,t)?i[t]:uA[t];if(e.ecmaVersion==="latest"?e.ecmaVersion=1e8:e.ecmaVersion==null?(!PH&&typeof console=="object"&&console.warn&&(PH=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),e.allowReserved==null&&(e.allowReserved=e.ecmaVersion<5),(!i||i.allowHashBang==null)&&(e.allowHashBang=e.ecmaVersion>=14),TH(e.onToken)){var n=e.onToken;e.onToken=function(s){return n.push(s)}}return TH(e.onComment)&&(e.onComment=J$e(e,e.onComment)),e}function J$e(i,e){return function(t,n,s,r,a,o){var l={type:t?"Block":"Line",value:n,start:s,end:r};i.locations&&(l.loc=new bx(this,a,o)),i.ranges&&(l.range=[s,r]),e.push(l)}}var Ib=1,v0=2,AN=4,jte=8,Nte=16,$te=32,kN=64,zte=128,xx=256,TN=Ib|v0|xx;function EN(i,e){return v0|(i?AN:0)|(e?jte:0)}var hA=0,PN=1,Nu=2,Hte=3,Vte=4,Ute=5,bn=function(e,t,n){this.options=e=Z$e(e),this.sourceFile=e.sourceFile,this.keywords=Ph(U$e[e.ecmaVersion>=6?6:e.sourceType==="module"?"5module":5]);var s="";e.allowReserved!==!0&&(s=OM[e.ecmaVersion>=6?6:e.ecmaVersion===5?5:3],e.sourceType==="module"&&(s+=" await")),this.reservedWords=Ph(s);var r=(s?s+" ":"")+OM.strict;this.reservedWordsStrict=Ph(r),this.reservedWordsStrictBind=Ph(r+" "+OM.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf(`
`,n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Fa).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=U.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=e.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&e.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Ib),this.regexpState=null,this.privateNameStack=[]},Bc={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};bn.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)};Bc.inFunction.get=function(){return(this.currentVarScope().flags&v0)>0};Bc.inGenerator.get=function(){return(this.currentVarScope().flags&jte)>0&&!this.currentVarScope().inClassFieldInit};Bc.inAsync.get=function(){return(this.currentVarScope().flags&AN)>0&&!this.currentVarScope().inClassFieldInit};Bc.canAwait.get=function(){for(var i=this.scopeStack.length-1;i>=0;i--){var e=this.scopeStack[i];if(e.inClassFieldInit||e.flags&xx)return!1;if(e.flags&v0)return(e.flags&AN)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Bc.allowSuper.get=function(){var i=this.currentThisScope(),e=i.flags,t=i.inClassFieldInit;return(e&kN)>0||t||this.options.allowSuperOutsideMethod};Bc.allowDirectSuper.get=function(){return(this.currentThisScope().flags&zte)>0};Bc.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Bc.allowNewDotTarget.get=function(){var i=this.currentThisScope(),e=i.flags,t=i.inClassFieldInit;return(e&(v0|xx))>0||t};Bc.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&xx)>0};bn.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,s=0;s<e.length;s++)n=e[s](n);return n};bn.parse=function(e,t){return new this(t,e).parse()};bn.parseExpressionAt=function(e,t,n){var s=new this(n,e,t);return s.nextToken(),s.parseExpression()};bn.tokenizer=function(e,t){return new this(t,e)};Object.defineProperties(bn.prototype,Bc);var Tr=bn.prototype,Q$e=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;Tr.strictDirective=function(i){if(this.options.ecmaVersion<5)return!1;for(;;){io.lastIndex=i,i+=io.exec(this.input)[0].length;var e=Q$e.exec(this.input.slice(i));if(!e)return!1;if((e[1]||e[2])==="use strict"){io.lastIndex=i+e[0].length;var t=io.exec(this.input),n=t.index+t[0].length,s=this.input.charAt(n);return s===";"||s==="}"||Fa.test(t[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(s)||s==="!"&&this.input.charAt(n+1)==="=")}i+=e[0].length,io.lastIndex=i,i+=io.exec(this.input)[0].length,this.input[i]===";"&&i++}};Tr.eat=function(i){return this.type===i?(this.next(),!0):!1};Tr.isContextual=function(i){return this.type===U.name&&this.value===i&&!this.containsEsc};Tr.eatContextual=function(i){return this.isContextual(i)?(this.next(),!0):!1};Tr.expectContextual=function(i){this.eatContextual(i)||this.unexpected()};Tr.canInsertSemicolon=function(){return this.type===U.eof||this.type===U.braceR||Fa.test(this.input.slice(this.lastTokEnd,this.start))};Tr.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Tr.semicolon=function(){!this.eat(U.semi)&&!this.insertSemicolon()&&this.unexpected()};Tr.afterTrailingComma=function(i,e){if(this.type===i)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0};Tr.expect=function(i){this.eat(i)||this.unexpected()};Tr.unexpected=function(i){this.raise(i??this.start,"Unexpected token")};var yP=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Tr.checkPatternErrors=function(i,e){if(i){i.trailingComma>-1&&this.raiseRecoverable(i.trailingComma,"Comma is not permitted after the rest element");var t=e?i.parenthesizedAssign:i.parenthesizedBind;t>-1&&this.raiseRecoverable(t,e?"Assigning to rvalue":"Parenthesized pattern")}};Tr.checkExpressionErrors=function(i,e){if(!i)return!1;var t=i.shorthandAssign,n=i.doubleProto;if(!e)return t>=0||n>=0;t>=0&&this.raise(t,"Shorthand property assignments are valid only in destructuring patterns"),n>=0&&this.raiseRecoverable(n,"Redefinition of __proto__ property")};Tr.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Tr.isSimpleAssignTarget=function(i){return i.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(i.expression):i.type==="Identifier"||i.type==="MemberExpression"};var Ze=bn.prototype;Ze.parseTopLevel=function(i){var e=Object.create(null);for(i.body||(i.body=[]);this.type!==U.eof;){var t=this.parseStatement(null,!0,e);i.body.push(t)}if(this.inModule)for(var n=0,s=Object.keys(this.undefinedExports);n<s.length;n+=1){var r=s[n];this.raiseRecoverable(this.undefinedExports[r].start,"Export '"+r+"' is not defined")}return this.adaptDirectivePrologue(i.body),this.next(),i.sourceType=this.options.sourceType,this.finishNode(i,"Program")};var ON={kind:"loop"},eze={kind:"switch"};Ze.isLet=function(i){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;io.lastIndex=this.pos;var e=io.exec(this.input),t=this.pos+e[0].length,n=this.input.charCodeAt(t);if(n===91||n===92)return!0;if(i)return!1;if(n===123||n>55295&&n<56320)return!0;if(Ac(n,!0)){for(var s=t+1;pf(n=this.input.charCodeAt(s),!0);)++s;if(n===92||n>55295&&n<56320)return!0;var r=this.input.slice(t,s);if(!W$e.test(r))return!0}return!1};Ze.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;io.lastIndex=this.pos;var i=io.exec(this.input),e=this.pos+i[0].length,t;return!Fa.test(this.input.slice(this.pos,e))&&this.input.slice(e,e+8)==="function"&&(e+8===this.input.length||!(pf(t=this.input.charCodeAt(e+8))||t>55295&&t<56320))};Ze.parseStatement=function(i,e,t){var n=this.type,s=this.startNode(),r;switch(this.isLet(i)&&(n=U._var,r="let"),n){case U._break:case U._continue:return this.parseBreakContinueStatement(s,n.keyword);case U._debugger:return this.parseDebuggerStatement(s);case U._do:return this.parseDoStatement(s);case U._for:return this.parseForStatement(s);case U._function:return i&&(this.strict||i!=="if"&&i!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!i);case U._class:return i&&this.unexpected(),this.parseClass(s,!0);case U._if:return this.parseIfStatement(s);case U._return:return this.parseReturnStatement(s);case U._switch:return this.parseSwitchStatement(s);case U._throw:return this.parseThrowStatement(s);case U._try:return this.parseTryStatement(s);case U._const:case U._var:return r=r||this.value,i&&r!=="var"&&this.unexpected(),this.parseVarStatement(s,r);case U._while:return this.parseWhileStatement(s);case U._with:return this.parseWithStatement(s);case U.braceL:return this.parseBlock(!0,s);case U.semi:return this.parseEmptyStatement(s);case U._export:case U._import:if(this.options.ecmaVersion>10&&n===U._import){io.lastIndex=this.pos;var a=io.exec(this.input),o=this.pos+a[0].length,l=this.input.charCodeAt(o);if(l===40||l===46)return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),n===U._import?this.parseImport(s):this.parseExport(s,t);default:if(this.isAsyncFunction())return i&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!i);var c=this.value,u=this.parseExpression();return n===U.name&&u.type==="Identifier"&&this.eat(U.colon)?this.parseLabeledStatement(s,c,u,i):this.parseExpressionStatement(s,u)}};Ze.parseBreakContinueStatement=function(i,e){var t=e==="break";this.next(),this.eat(U.semi)||this.insertSemicolon()?i.label=null:this.type!==U.name?this.unexpected():(i.label=this.parseIdent(),this.semicolon());for(var n=0;n<this.labels.length;++n){var s=this.labels[n];if((i.label==null||s.name===i.label.name)&&(s.kind!=null&&(t||s.kind==="loop")||i.label&&t))break}return n===this.labels.length&&this.raise(i.start,"Unsyntactic "+e),this.finishNode(i,t?"BreakStatement":"ContinueStatement")};Ze.parseDebuggerStatement=function(i){return this.next(),this.semicolon(),this.finishNode(i,"DebuggerStatement")};Ze.parseDoStatement=function(i){return this.next(),this.labels.push(ON),i.body=this.parseStatement("do"),this.labels.pop(),this.expect(U._while),i.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(U.semi):this.semicolon(),this.finishNode(i,"DoWhileStatement")};Ze.parseForStatement=function(i){this.next();var e=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(ON),this.enterScope(0),this.expect(U.parenL),this.type===U.semi)return e>-1&&this.unexpected(e),this.parseFor(i,null);var t=this.isLet();if(this.type===U._var||this.type===U._const||t){var n=this.startNode(),s=t?"let":this.value;return this.next(),this.parseVar(n,!0,s),this.finishNode(n,"VariableDeclaration"),(this.type===U._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&n.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===U._in?e>-1&&this.unexpected(e):i.await=e>-1),this.parseForIn(i,n)):(e>-1&&this.unexpected(e),this.parseFor(i,n))}var r=this.isContextual("let"),a=!1,o=this.containsEsc,l=new yP,c=this.start,u=e>-1?this.parseExprSubscripts(l,"await"):this.parseExpression(!0,l);return this.type===U._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(e>-1?(this.type===U._in&&this.unexpected(e),i.await=!0):a&&this.options.ecmaVersion>=8&&(u.start===c&&!o&&u.type==="Identifier"&&u.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(i.await=!1)),r&&a&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,l),this.checkLValPattern(u),this.parseForIn(i,u)):(this.checkExpressionErrors(l,!0),e>-1&&this.unexpected(e),this.parseFor(i,u))};Ze.parseFunctionStatement=function(i,e,t){return this.next(),this.parseFunction(i,sv|(t?0:BL),!1,e)};Ze.parseIfStatement=function(i){return this.next(),i.test=this.parseParenExpression(),i.consequent=this.parseStatement("if"),i.alternate=this.eat(U._else)?this.parseStatement("if"):null,this.finishNode(i,"IfStatement")};Ze.parseReturnStatement=function(i){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(U.semi)||this.insertSemicolon()?i.argument=null:(i.argument=this.parseExpression(),this.semicolon()),this.finishNode(i,"ReturnStatement")};Ze.parseSwitchStatement=function(i){this.next(),i.discriminant=this.parseParenExpression(),i.cases=[],this.expect(U.braceL),this.labels.push(eze),this.enterScope(0);for(var e,t=!1;this.type!==U.braceR;)if(this.type===U._case||this.type===U._default){var n=this.type===U._case;e&&this.finishNode(e,"SwitchCase"),i.cases.push(e=this.startNode()),e.consequent=[],this.next(),n?e.test=this.parseExpression():(t&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),t=!0,e.test=null),this.expect(U.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(i,"SwitchStatement")};Ze.parseThrowStatement=function(i){return this.next(),Fa.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),i.argument=this.parseExpression(),this.semicolon(),this.finishNode(i,"ThrowStatement")};var tze=[];Ze.parseCatchClauseParam=function(){var i=this.parseBindingAtom(),e=i.type==="Identifier";return this.enterScope(e?$te:0),this.checkLValPattern(i,e?Vte:Nu),this.expect(U.parenR),i};Ze.parseTryStatement=function(i){if(this.next(),i.block=this.parseBlock(),i.handler=null,this.type===U._catch){var e=this.startNode();this.next(),this.eat(U.parenL)?e.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0)),e.body=this.parseBlock(!1),this.exitScope(),i.handler=this.finishNode(e,"CatchClause")}return i.finalizer=this.eat(U._finally)?this.parseBlock():null,!i.handler&&!i.finalizer&&this.raise(i.start,"Missing catch or finally clause"),this.finishNode(i,"TryStatement")};Ze.parseVarStatement=function(i,e,t){return this.next(),this.parseVar(i,!1,e,t),this.semicolon(),this.finishNode(i,"VariableDeclaration")};Ze.parseWhileStatement=function(i){return this.next(),i.test=this.parseParenExpression(),this.labels.push(ON),i.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(i,"WhileStatement")};Ze.parseWithStatement=function(i){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),i.object=this.parseParenExpression(),i.body=this.parseStatement("with"),this.finishNode(i,"WithStatement")};Ze.parseEmptyStatement=function(i){return this.next(),this.finishNode(i,"EmptyStatement")};Ze.parseLabeledStatement=function(i,e,t,n){for(var s=0,r=this.labels;s<r.length;s+=1){var a=r[s];a.name===e&&this.raise(t.start,"Label '"+e+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===U._switch?"switch":null,l=this.labels.length-1;l>=0;l--){var c=this.labels[l];if(c.statementStart===i.start)c.statementStart=this.start,c.kind=o;else break}return this.labels.push({name:e,kind:o,statementStart:this.start}),i.body=this.parseStatement(n?n.indexOf("label")===-1?n+"label":n:"label"),this.labels.pop(),i.label=t,this.finishNode(i,"LabeledStatement")};Ze.parseExpressionStatement=function(i,e){return i.expression=e,this.semicolon(),this.finishNode(i,"ExpressionStatement")};Ze.parseBlock=function(i,e,t){for(i===void 0&&(i=!0),e===void 0&&(e=this.startNode()),e.body=[],this.expect(U.braceL),i&&this.enterScope(0);this.type!==U.braceR;){var n=this.parseStatement(null);e.body.push(n)}return t&&(this.strict=!1),this.next(),i&&this.exitScope(),this.finishNode(e,"BlockStatement")};Ze.parseFor=function(i,e){return i.init=e,this.expect(U.semi),i.test=this.type===U.semi?null:this.parseExpression(),this.expect(U.semi),i.update=this.type===U.parenR?null:this.parseExpression(),this.expect(U.parenR),i.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(i,"ForStatement")};Ze.parseForIn=function(i,e){var t=this.type===U._in;return this.next(),e.type==="VariableDeclaration"&&e.declarations[0].init!=null&&(!t||this.options.ecmaVersion<8||this.strict||e.kind!=="var"||e.declarations[0].id.type!=="Identifier")&&this.raise(e.start,(t?"for-in":"for-of")+" loop variable declaration may not have an initializer"),i.left=e,i.right=t?this.parseExpression():this.parseMaybeAssign(),this.expect(U.parenR),i.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(i,t?"ForInStatement":"ForOfStatement")};Ze.parseVar=function(i,e,t,n){for(i.declarations=[],i.kind=t;;){var s=this.startNode();if(this.parseVarId(s,t),this.eat(U.eq)?s.init=this.parseMaybeAssign(e):!n&&t==="const"&&!(this.type===U._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!n&&s.id.type!=="Identifier"&&!(e&&(this.type===U._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):s.init=null,i.declarations.push(this.finishNode(s,"VariableDeclarator")),!this.eat(U.comma))break}return i};Ze.parseVarId=function(i,e){i.id=this.parseBindingAtom(),this.checkLValPattern(i.id,e==="var"?PN:Nu,!1)};var sv=1,BL=2,Wte=4;Ze.parseFunction=function(i,e,t,n,s){this.initFunction(i),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!n)&&(this.type===U.star&&e&BL&&this.unexpected(),i.generator=this.eat(U.star)),this.options.ecmaVersion>=8&&(i.async=!!n),e&sv&&(i.id=e&Wte&&this.type!==U.name?null:this.parseIdent(),i.id&&!(e&BL)&&this.checkLValSimple(i.id,this.strict||i.generator||i.async?this.treatFunctionsAsVar?PN:Nu:Hte));var r=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(EN(i.async,i.generator)),e&sv||(i.id=this.type===U.name?this.parseIdent():null),this.parseFunctionParams(i),this.parseFunctionBody(i,t,!1,s),this.yieldPos=r,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(i,e&sv?"FunctionDeclaration":"FunctionExpression")};Ze.parseFunctionParams=function(i){this.expect(U.parenL),i.params=this.parseBindingList(U.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Ze.parseClass=function(i,e){this.next();var t=this.strict;this.strict=!0,this.parseClassId(i,e),this.parseClassSuper(i);var n=this.enterClassBody(),s=this.startNode(),r=!1;for(s.body=[],this.expect(U.braceL);this.type!==U.braceR;){var a=this.parseClassElement(i.superClass!==null);a&&(s.body.push(a),a.type==="MethodDefinition"&&a.kind==="constructor"?(r&&this.raiseRecoverable(a.start,"Duplicate constructor in the same class"),r=!0):a.key&&a.key.type==="PrivateIdentifier"&&ize(n,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=t,this.next(),i.body=this.finishNode(s,"ClassBody"),this.exitClassBody(),this.finishNode(i,e?"ClassDeclaration":"ClassExpression")};Ze.parseClassElement=function(i){if(this.eat(U.semi))return null;var e=this.options.ecmaVersion,t=this.startNode(),n="",s=!1,r=!1,a="method",o=!1;if(this.eatContextual("static")){if(e>=13&&this.eat(U.braceL))return this.parseClassStaticBlock(t),t;this.isClassElementNameStart()||this.type===U.star?o=!0:n="static"}if(t.static=o,!n&&e>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===U.star)&&!this.canInsertSemicolon()?r=!0:n="async"),!n&&(e>=9||!r)&&this.eat(U.star)&&(s=!0),!n&&!r&&!s){var l=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=l:n=l)}if(n?(t.computed=!1,t.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),t.key.name=n,this.finishNode(t.key,"Identifier")):this.parseClassElementName(t),e<13||this.type===U.parenL||a!=="method"||s||r){var c=!t.static&&dA(t,"constructor"),u=c&&i;c&&a!=="method"&&this.raise(t.key.start,"Constructor can't have get/set modifier"),t.kind=c?"constructor":a,this.parseClassMethod(t,s,r,u)}else this.parseClassField(t);return t};Ze.isClassElementNameStart=function(){return this.type===U.name||this.type===U.privateId||this.type===U.num||this.type===U.string||this.type===U.bracketL||this.type.keyword};Ze.parseClassElementName=function(i){this.type===U.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),i.computed=!1,i.key=this.parsePrivateIdent()):this.parsePropertyName(i)};Ze.parseClassMethod=function(i,e,t,n){var s=i.key;i.kind==="constructor"?(e&&this.raise(s.start,"Constructor can't be a generator"),t&&this.raise(s.start,"Constructor can't be an async method")):i.static&&dA(i,"prototype")&&this.raise(s.start,"Classes may not have a static property named prototype");var r=i.value=this.parseMethod(e,t,n);return i.kind==="get"&&r.params.length!==0&&this.raiseRecoverable(r.start,"getter should have no params"),i.kind==="set"&&r.params.length!==1&&this.raiseRecoverable(r.start,"setter should have exactly one param"),i.kind==="set"&&r.params[0].type==="RestElement"&&this.raiseRecoverable(r.params[0].start,"Setter cannot use rest params"),this.finishNode(i,"MethodDefinition")};Ze.parseClassField=function(i){if(dA(i,"constructor")?this.raise(i.key.start,"Classes can't have a field named 'constructor'"):i.static&&dA(i,"prototype")&&this.raise(i.key.start,"Classes can't have a static field named 'prototype'"),this.eat(U.eq)){var e=this.currentThisScope(),t=e.inClassFieldInit;e.inClassFieldInit=!0,i.value=this.parseMaybeAssign(),e.inClassFieldInit=t}else i.value=null;return this.semicolon(),this.finishNode(i,"PropertyDefinition")};Ze.parseClassStaticBlock=function(i){i.body=[];var e=this.labels;for(this.labels=[],this.enterScope(xx|kN);this.type!==U.braceR;){var t=this.parseStatement(null);i.body.push(t)}return this.next(),this.exitScope(),this.labels=e,this.finishNode(i,"StaticBlock")};Ze.parseClassId=function(i,e){this.type===U.name?(i.id=this.parseIdent(),e&&this.checkLValSimple(i.id,Nu,!1)):(e===!0&&this.unexpected(),i.id=null)};Ze.parseClassSuper=function(i){i.superClass=this.eat(U._extends)?this.parseExprSubscripts(null,!1):null};Ze.enterClassBody=function(){var i={declared:Object.create(null),used:[]};return this.privateNameStack.push(i),i.declared};Ze.exitClassBody=function(){var i=this.privateNameStack.pop(),e=i.declared,t=i.used;if(this.options.checkPrivateFields)for(var n=this.privateNameStack.length,s=n===0?null:this.privateNameStack[n-1],r=0;r<t.length;++r){var a=t[r];vx(e,a.name)||(s?s.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}};function ize(i,e){var t=e.key.name,n=i[t],s="true";return e.type==="MethodDefinition"&&(e.kind==="get"||e.kind==="set")&&(s=(e.static?"s":"i")+e.kind),n==="iget"&&s==="iset"||n==="iset"&&s==="iget"||n==="sget"&&s==="sset"||n==="sset"&&s==="sget"?(i[t]="true",!1):n?!0:(i[t]=s,!1)}function dA(i,e){var t=i.computed,n=i.key;return!t&&(n.type==="Identifier"&&n.name===e||n.type==="Literal"&&n.value===e)}Ze.parseExportAllDeclaration=function(i,e){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(i.exported=this.parseModuleExportName(),this.checkExport(e,i.exported,this.lastTokStart)):i.exported=null),this.expectContextual("from"),this.type!==U.string&&this.unexpected(),i.source=this.parseExprAtom(),this.semicolon(),this.finishNode(i,"ExportAllDeclaration")};Ze.parseExport=function(i,e){if(this.next(),this.eat(U.star))return this.parseExportAllDeclaration(i,e);if(this.eat(U._default))return this.checkExport(e,"default",this.lastTokStart),i.declaration=this.parseExportDefaultDeclaration(),this.finishNode(i,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())i.declaration=this.parseExportDeclaration(i),i.declaration.type==="VariableDeclaration"?this.checkVariableExport(e,i.declaration.declarations):this.checkExport(e,i.declaration.id,i.declaration.id.start),i.specifiers=[],i.source=null;else{if(i.declaration=null,i.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==U.string&&this.unexpected(),i.source=this.parseExprAtom();else{for(var t=0,n=i.specifiers;t<n.length;t+=1){var s=n[t];this.checkUnreserved(s.local),this.checkLocalExport(s.local),s.local.type==="Literal"&&this.raise(s.local.start,"A string literal cannot be used as an exported binding without `from`.")}i.source=null}this.semicolon()}return this.finishNode(i,"ExportNamedDeclaration")};Ze.parseExportDeclaration=function(i){return this.parseStatement(null)};Ze.parseExportDefaultDeclaration=function(){var i;if(this.type===U._function||(i=this.isAsyncFunction())){var e=this.startNode();return this.next(),i&&this.next(),this.parseFunction(e,sv|Wte,!1,i)}else if(this.type===U._class){var t=this.startNode();return this.parseClass(t,"nullableID")}else{var n=this.parseMaybeAssign();return this.semicolon(),n}};Ze.checkExport=function(i,e,t){i&&(typeof e!="string"&&(e=e.type==="Identifier"?e.name:e.value),vx(i,e)&&this.raiseRecoverable(t,"Duplicate export '"+e+"'"),i[e]=!0)};Ze.checkPatternExport=function(i,e){var t=e.type;if(t==="Identifier")this.checkExport(i,e,e.start);else if(t==="ObjectPattern")for(var n=0,s=e.properties;n<s.length;n+=1){var r=s[n];this.checkPatternExport(i,r)}else if(t==="ArrayPattern")for(var a=0,o=e.elements;a<o.length;a+=1){var l=o[a];l&&this.checkPatternExport(i,l)}else t==="Property"?this.checkPatternExport(i,e.value):t==="AssignmentPattern"?this.checkPatternExport(i,e.left):t==="RestElement"&&this.checkPatternExport(i,e.argument)};Ze.checkVariableExport=function(i,e){if(i)for(var t=0,n=e;t<n.length;t+=1){var s=n[t];this.checkPatternExport(i,s.id)}};Ze.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Ze.parseExportSpecifier=function(i){var e=this.startNode();return e.local=this.parseModuleExportName(),e.exported=this.eatContextual("as")?this.parseModuleExportName():e.local,this.checkExport(i,e.exported,e.exported.start),this.finishNode(e,"ExportSpecifier")};Ze.parseExportSpecifiers=function(i){var e=[],t=!0;for(this.expect(U.braceL);!this.eat(U.braceR);){if(t)t=!1;else if(this.expect(U.comma),this.afterTrailingComma(U.braceR))break;e.push(this.parseExportSpecifier(i))}return e};Ze.parseImport=function(i){return this.next(),this.type===U.string?(i.specifiers=tze,i.source=this.parseExprAtom()):(i.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),i.source=this.type===U.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(i,"ImportDeclaration")};Ze.parseImportSpecifier=function(){var i=this.startNode();return i.imported=this.parseModuleExportName(),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLValSimple(i.local,Nu),this.finishNode(i,"ImportSpecifier")};Ze.parseImportDefaultSpecifier=function(){var i=this.startNode();return i.local=this.parseIdent(),this.checkLValSimple(i.local,Nu),this.finishNode(i,"ImportDefaultSpecifier")};Ze.parseImportNamespaceSpecifier=function(){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLValSimple(i.local,Nu),this.finishNode(i,"ImportNamespaceSpecifier")};Ze.parseImportSpecifiers=function(){var i=[],e=!0;if(this.type===U.name&&(i.push(this.parseImportDefaultSpecifier()),!this.eat(U.comma)))return i;if(this.type===U.star)return i.push(this.parseImportNamespaceSpecifier()),i;for(this.expect(U.braceL);!this.eat(U.braceR);){if(e)e=!1;else if(this.expect(U.comma),this.afterTrailingComma(U.braceR))break;i.push(this.parseImportSpecifier())}return i};Ze.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===U.string){var i=this.parseLiteral(this.value);return q$e.test(i.value)&&this.raise(i.start,"An export name cannot include a lone surrogate."),i}return this.parseIdent(!0)};Ze.adaptDirectivePrologue=function(i){for(var e=0;e<i.length&&this.isDirectiveCandidate(i[e]);++e)i[e].directive=i[e].expression.raw.slice(1,-1)};Ze.isDirectiveCandidate=function(i){return this.options.ecmaVersion>=5&&i.type==="ExpressionStatement"&&i.expression.type==="Literal"&&typeof i.expression.value=="string"&&(this.input[i.start]==='"'||this.input[i.start]==="'")};var Eo=bn.prototype;Eo.toAssignable=function(i,e,t){if(this.options.ecmaVersion>=6&&i)switch(i.type){case"Identifier":this.inAsync&&i.name==="await"&&this.raise(i.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":i.type="ObjectPattern",t&&this.checkPatternErrors(t,!0);for(var n=0,s=i.properties;n<s.length;n+=1){var r=s[n];this.toAssignable(r,e),r.type==="RestElement"&&(r.argument.type==="ArrayPattern"||r.argument.type==="ObjectPattern")&&this.raise(r.argument.start,"Unexpected token")}break;case"Property":i.kind!=="init"&&this.raise(i.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(i.value,e);break;case"ArrayExpression":i.type="ArrayPattern",t&&this.checkPatternErrors(t,!0),this.toAssignableList(i.elements,e);break;case"SpreadElement":i.type="RestElement",this.toAssignable(i.argument,e),i.argument.type==="AssignmentPattern"&&this.raise(i.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":i.operator!=="="&&this.raise(i.left.end,"Only '=' operator can be used for specifying default value."),i.type="AssignmentPattern",delete i.operator,this.toAssignable(i.left,e);break;case"ParenthesizedExpression":this.toAssignable(i.expression,e,t);break;case"ChainExpression":this.raiseRecoverable(i.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(i.start,"Assigning to rvalue")}else t&&this.checkPatternErrors(t,!0);return i};Eo.toAssignableList=function(i,e){for(var t=i.length,n=0;n<t;n++){var s=i[n];s&&this.toAssignable(s,e)}if(t){var r=i[t-1];this.options.ecmaVersion===6&&e&&r&&r.type==="RestElement"&&r.argument.type!=="Identifier"&&this.unexpected(r.argument.start)}return i};Eo.parseSpread=function(i){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,i),this.finishNode(e,"SpreadElement")};Eo.parseRestBinding=function(){var i=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==U.name&&this.unexpected(),i.argument=this.parseBindingAtom(),this.finishNode(i,"RestElement")};Eo.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case U.bracketL:var i=this.startNode();return this.next(),i.elements=this.parseBindingList(U.bracketR,!0,!0),this.finishNode(i,"ArrayPattern");case U.braceL:return this.parseObj(!0)}return this.parseIdent()};Eo.parseBindingList=function(i,e,t,n){for(var s=[],r=!0;!this.eat(i);)if(r?r=!1:this.expect(U.comma),e&&this.type===U.comma)s.push(null);else{if(t&&this.afterTrailingComma(i))break;if(this.type===U.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),s.push(a),this.type===U.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(i);break}else s.push(this.parseAssignableListItem(n))}return s};Eo.parseAssignableListItem=function(i){var e=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(e),e};Eo.parseBindingListItem=function(i){return i};Eo.parseMaybeDefault=function(i,e,t){if(t=t||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(U.eq))return t;var n=this.startNodeAt(i,e);return n.left=t,n.right=this.parseMaybeAssign(),this.finishNode(n,"AssignmentPattern")};Eo.checkLValSimple=function(i,e,t){e===void 0&&(e=hA);var n=e!==hA;switch(i.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(i.name)&&this.raiseRecoverable(i.start,(n?"Binding ":"Assigning to ")+i.name+" in strict mode"),n&&(e===Nu&&i.name==="let"&&this.raiseRecoverable(i.start,"let is disallowed as a lexically bound name"),t&&(vx(t,i.name)&&this.raiseRecoverable(i.start,"Argument name clash"),t[i.name]=!0),e!==Ute&&this.declareName(i.name,e,i.start));break;case"ChainExpression":this.raiseRecoverable(i.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":n&&this.raiseRecoverable(i.start,"Binding member expression");break;case"ParenthesizedExpression":return n&&this.raiseRecoverable(i.start,"Binding parenthesized expression"),this.checkLValSimple(i.expression,e,t);default:this.raise(i.start,(n?"Binding":"Assigning to")+" rvalue")}};Eo.checkLValPattern=function(i,e,t){switch(e===void 0&&(e=hA),i.type){case"ObjectPattern":for(var n=0,s=i.properties;n<s.length;n+=1){var r=s[n];this.checkLValInnerPattern(r,e,t)}break;case"ArrayPattern":for(var a=0,o=i.elements;a<o.length;a+=1){var l=o[a];l&&this.checkLValInnerPattern(l,e,t)}break;default:this.checkLValSimple(i,e,t)}};Eo.checkLValInnerPattern=function(i,e,t){switch(e===void 0&&(e=hA),i.type){case"Property":this.checkLValInnerPattern(i.value,e,t);break;case"AssignmentPattern":this.checkLValPattern(i.left,e,t);break;case"RestElement":this.checkLValPattern(i.argument,e,t);break;default:this.checkLValPattern(i,e,t)}};var Xa=function(e,t,n,s,r){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=s,this.generator=!!r},Yi={b_stat:new Xa("{",!1),b_expr:new Xa("{",!0),b_tmpl:new Xa("${",!1),p_stat:new Xa("(",!1),p_expr:new Xa("(",!0),q_tmpl:new Xa("`",!0,!0,function(i){return i.tryReadTemplateToken()}),f_stat:new Xa("function",!1),f_expr:new Xa("function",!0),f_expr_gen:new Xa("function",!0,!1,null,!0),f_gen:new Xa("function",!1,!1,null,!0)},b0=bn.prototype;b0.initialContext=function(){return[Yi.b_stat]};b0.curContext=function(){return this.context[this.context.length-1]};b0.braceIsBlock=function(i){var e=this.curContext();return e===Yi.f_expr||e===Yi.f_stat?!0:i===U.colon&&(e===Yi.b_stat||e===Yi.b_expr)?!e.isExpr:i===U._return||i===U.name&&this.exprAllowed?Fa.test(this.input.slice(this.lastTokEnd,this.start)):i===U._else||i===U.semi||i===U.eof||i===U.parenR||i===U.arrow?!0:i===U.braceL?e===Yi.b_stat:i===U._var||i===U._const||i===U.name?!1:!this.exprAllowed};b0.inGeneratorContext=function(){for(var i=this.context.length-1;i>=1;i--){var e=this.context[i];if(e.token==="function")return e.generator}return!1};b0.updateContext=function(i){var e,t=this.type;t.keyword&&i===U.dot?this.exprAllowed=!1:(e=t.updateContext)?e.call(this,i):this.exprAllowed=t.beforeExpr};b0.overrideContext=function(i){this.curContext()!==i&&(this.context[this.context.length-1]=i)};U.parenR.updateContext=U.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var i=this.context.pop();i===Yi.b_stat&&this.curContext().token==="function"&&(i=this.context.pop()),this.exprAllowed=!i.isExpr};U.braceL.updateContext=function(i){this.context.push(this.braceIsBlock(i)?Yi.b_stat:Yi.b_expr),this.exprAllowed=!0};U.dollarBraceL.updateContext=function(){this.context.push(Yi.b_tmpl),this.exprAllowed=!0};U.parenL.updateContext=function(i){var e=i===U._if||i===U._for||i===U._with||i===U._while;this.context.push(e?Yi.p_stat:Yi.p_expr),this.exprAllowed=!0};U.incDec.updateContext=function(){};U._function.updateContext=U._class.updateContext=function(i){i.beforeExpr&&i!==U._else&&!(i===U.semi&&this.curContext()!==Yi.p_stat)&&!(i===U._return&&Fa.test(this.input.slice(this.lastTokEnd,this.start)))&&!((i===U.colon||i===U.braceL)&&this.curContext()===Yi.b_stat)?this.context.push(Yi.f_expr):this.context.push(Yi.f_stat),this.exprAllowed=!1};U.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};U.backQuote.updateContext=function(){this.curContext()===Yi.q_tmpl?this.context.pop():this.context.push(Yi.q_tmpl),this.exprAllowed=!1};U.star.updateContext=function(i){if(i===U._function){var e=this.context.length-1;this.context[e]===Yi.f_expr?this.context[e]=Yi.f_expr_gen:this.context[e]=Yi.f_gen}this.exprAllowed=!0};U.name.updateContext=function(i){var e=!1;this.options.ecmaVersion>=6&&i!==U.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var ot=bn.prototype;ot.checkPropClash=function(i,e,t){if(!(this.options.ecmaVersion>=9&&i.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(i.computed||i.method||i.shorthand))){var n=i.key,s;switch(n.type){case"Identifier":s=n.name;break;case"Literal":s=String(n.value);break;default:return}var r=i.kind;if(this.options.ecmaVersion>=6){s==="__proto__"&&r==="init"&&(e.proto&&(t?t.doubleProto<0&&(t.doubleProto=n.start):this.raiseRecoverable(n.start,"Redefinition of __proto__ property")),e.proto=!0);return}s="$"+s;var a=e[s];if(a){var o;r==="init"?o=this.strict&&a.init||a.get||a.set:o=a.init||a[r],o&&this.raiseRecoverable(n.start,"Redefinition of property")}else a=e[s]={init:!1,get:!1,set:!1};a[r]=!0}};ot.parseExpression=function(i,e){var t=this.start,n=this.startLoc,s=this.parseMaybeAssign(i,e);if(this.type===U.comma){var r=this.startNodeAt(t,n);for(r.expressions=[s];this.eat(U.comma);)r.expressions.push(this.parseMaybeAssign(i,e));return this.finishNode(r,"SequenceExpression")}return s};ot.parseMaybeAssign=function(i,e,t){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(i);this.exprAllowed=!1}var n=!1,s=-1,r=-1,a=-1;e?(s=e.parenthesizedAssign,r=e.trailingComma,a=e.doubleProto,e.parenthesizedAssign=e.trailingComma=-1):(e=new yP,n=!0);var o=this.start,l=this.startLoc;(this.type===U.parenL||this.type===U.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=i==="await");var c=this.parseMaybeConditional(i,e);if(t&&(c=t.call(this,c,o,l)),this.type.isAssign){var u=this.startNodeAt(o,l);return u.operator=this.value,this.type===U.eq&&(c=this.toAssignable(c,!1,e)),n||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=c.start&&(e.shorthandAssign=-1),this.type===U.eq?this.checkLValPattern(c):this.checkLValSimple(c),u.left=c,this.next(),u.right=this.parseMaybeAssign(i),a>-1&&(e.doubleProto=a),this.finishNode(u,"AssignmentExpression")}else n&&this.checkExpressionErrors(e,!0);return s>-1&&(e.parenthesizedAssign=s),r>-1&&(e.trailingComma=r),c};ot.parseMaybeConditional=function(i,e){var t=this.start,n=this.startLoc,s=this.parseExprOps(i,e);if(this.checkExpressionErrors(e))return s;if(this.eat(U.question)){var r=this.startNodeAt(t,n);return r.test=s,r.consequent=this.parseMaybeAssign(),this.expect(U.colon),r.alternate=this.parseMaybeAssign(i),this.finishNode(r,"ConditionalExpression")}return s};ot.parseExprOps=function(i,e){var t=this.start,n=this.startLoc,s=this.parseMaybeUnary(e,!1,!1,i);return this.checkExpressionErrors(e)||s.start===t&&s.type==="ArrowFunctionExpression"?s:this.parseExprOp(s,t,n,-1,i)};ot.parseExprOp=function(i,e,t,n,s){var r=this.type.binop;if(r!=null&&(!s||this.type!==U._in)&&r>n){var a=this.type===U.logicalOR||this.type===U.logicalAND,o=this.type===U.coalesce;o&&(r=U.logicalAND.binop);var l=this.value;this.next();var c=this.start,u=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,s),c,u,r,s),d=this.buildBinary(e,t,i,h,l,a||o);return(a&&this.type===U.coalesce||o&&(this.type===U.logicalOR||this.type===U.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,e,t,n,s)}return i};ot.buildBinary=function(i,e,t,n,s,r){n.type==="PrivateIdentifier"&&this.raise(n.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(i,e);return a.left=t,a.operator=s,a.right=n,this.finishNode(a,r?"LogicalExpression":"BinaryExpression")};ot.parseMaybeUnary=function(i,e,t,n){var s=this.start,r=this.startLoc,a;if(this.isContextual("await")&&this.canAwait)a=this.parseAwait(n),e=!0;else if(this.type.prefix){var o=this.startNode(),l=this.type===U.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,l,n),this.checkExpressionErrors(i,!0),l?this.checkLValSimple(o.argument):this.strict&&o.operator==="delete"&&Gte(o.argument)?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):o.operator==="delete"&&jL(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):e=!0,a=this.finishNode(o,l?"UpdateExpression":"UnaryExpression")}else if(!e&&this.type===U.privateId)(n||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),a=this.parsePrivateIdent(),this.type!==U._in&&this.unexpected();else{if(a=this.parseExprSubscripts(i,n),this.checkExpressionErrors(i))return a;for(;this.type.postfix&&!this.canInsertSemicolon();){var c=this.startNodeAt(s,r);c.operator=this.value,c.prefix=!1,c.argument=a,this.checkLValSimple(a),this.next(),a=this.finishNode(c,"UpdateExpression")}}if(!t&&this.eat(U.starstar))if(e)this.unexpected(this.lastTokStart);else return this.buildBinary(s,r,a,this.parseMaybeUnary(null,!1,!1,n),"**",!1);else return a};function Gte(i){return i.type==="Identifier"||i.type==="ParenthesizedExpression"&&Gte(i.expression)}function jL(i){return i.type==="MemberExpression"&&i.property.type==="PrivateIdentifier"||i.type==="ChainExpression"&&jL(i.expression)||i.type==="ParenthesizedExpression"&&jL(i.expression)}ot.parseExprSubscripts=function(i,e){var t=this.start,n=this.startLoc,s=this.parseExprAtom(i,e);if(s.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return s;var r=this.parseSubscripts(s,t,n,!1,e);return i&&r.type==="MemberExpression"&&(i.parenthesizedAssign>=r.start&&(i.parenthesizedAssign=-1),i.parenthesizedBind>=r.start&&(i.parenthesizedBind=-1),i.trailingComma>=r.start&&(i.trailingComma=-1)),r};ot.parseSubscripts=function(i,e,t,n,s){for(var r=this.options.ecmaVersion>=8&&i.type==="Identifier"&&i.name==="async"&&this.lastTokEnd===i.end&&!this.canInsertSemicolon()&&i.end-i.start===5&&this.potentialArrowAt===i.start,a=!1;;){var o=this.parseSubscript(i,e,t,n,r,a,s);if(o.optional&&(a=!0),o===i||o.type==="ArrowFunctionExpression"){if(a){var l=this.startNodeAt(e,t);l.expression=o,o=this.finishNode(l,"ChainExpression")}return o}i=o}};ot.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(U.arrow)};ot.parseSubscriptAsyncArrow=function(i,e,t,n){return this.parseArrowExpression(this.startNodeAt(i,e),t,!0,n)};ot.parseSubscript=function(i,e,t,n,s,r,a){var o=this.options.ecmaVersion>=11,l=o&&this.eat(U.questionDot);n&&l&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var c=this.eat(U.bracketL);if(c||l&&this.type!==U.parenL&&this.type!==U.backQuote||this.eat(U.dot)){var u=this.startNodeAt(e,t);u.object=i,c?(u.property=this.parseExpression(),this.expect(U.bracketR)):this.type===U.privateId&&i.type!=="Super"?u.property=this.parsePrivateIdent():u.property=this.parseIdent(this.options.allowReserved!=="never"),u.computed=!!c,o&&(u.optional=l),i=this.finishNode(u,"MemberExpression")}else if(!n&&this.eat(U.parenL)){var h=new yP,d=this.yieldPos,p=this.awaitPos,f=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var g=this.parseExprList(U.parenR,this.options.ecmaVersion>=8,!1,h);if(s&&!l&&this.shouldParseAsyncArrow())return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=p,this.awaitIdentPos=f,this.parseSubscriptAsyncArrow(e,t,g,a);this.checkExpressionErrors(h,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,this.awaitIdentPos=f||this.awaitIdentPos;var m=this.startNodeAt(e,t);m.callee=i,m.arguments=g,o&&(m.optional=l),i=this.finishNode(m,"CallExpression")}else if(this.type===U.backQuote){(l||r)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(e,t);y.tag=i,y.quasi=this.parseTemplate({isTagged:!0}),i=this.finishNode(y,"TaggedTemplateExpression")}return i};ot.parseExprAtom=function(i,e,t){this.type===U.slash&&this.readRegexp();var n,s=this.potentialArrowAt===this.start;switch(this.type){case U._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),n=this.startNode(),this.next(),this.type===U.parenL&&!this.allowDirectSuper&&this.raise(n.start,"super() call outside constructor of a subclass"),this.type!==U.dot&&this.type!==U.bracketL&&this.type!==U.parenL&&this.unexpected(),this.finishNode(n,"Super");case U._this:return n=this.startNode(),this.next(),this.finishNode(n,"ThisExpression");case U.name:var r=this.start,a=this.startLoc,o=this.containsEsc,l=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&l.name==="async"&&!this.canInsertSemicolon()&&this.eat(U._function))return this.overrideContext(Yi.f_expr),this.parseFunction(this.startNodeAt(r,a),0,!1,!0,e);if(s&&!this.canInsertSemicolon()){if(this.eat(U.arrow))return this.parseArrowExpression(this.startNodeAt(r,a),[l],!1,e);if(this.options.ecmaVersion>=8&&l.name==="async"&&this.type===U.name&&!o&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return l=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(U.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,a),[l],!0,e)}return l;case U.regexp:var c=this.value;return n=this.parseLiteral(c.value),n.regex={pattern:c.pattern,flags:c.flags},n;case U.num:case U.string:return this.parseLiteral(this.value);case U._null:case U._true:case U._false:return n=this.startNode(),n.value=this.type===U._null?null:this.type===U._true,n.raw=this.type.keyword,this.next(),this.finishNode(n,"Literal");case U.parenL:var u=this.start,h=this.parseParenAndDistinguishExpression(s,e);return i&&(i.parenthesizedAssign<0&&!this.isSimpleAssignTarget(h)&&(i.parenthesizedAssign=u),i.parenthesizedBind<0&&(i.parenthesizedBind=u)),h;case U.bracketL:return n=this.startNode(),this.next(),n.elements=this.parseExprList(U.bracketR,!0,!0,i),this.finishNode(n,"ArrayExpression");case U.braceL:return this.overrideContext(Yi.b_expr),this.parseObj(!1,i);case U._function:return n=this.startNode(),this.next(),this.parseFunction(n,0);case U._class:return this.parseClass(this.startNode(),!1);case U._new:return this.parseNew();case U.backQuote:return this.parseTemplate();case U._import:return this.options.ecmaVersion>=11?this.parseExprImport(t):this.unexpected();default:return this.parseExprAtomDefault()}};ot.parseExprAtomDefault=function(){this.unexpected()};ot.parseExprImport=function(i){var e=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===U.parenL&&!i)return this.parseDynamicImport(e);if(this.type===U.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);return t.name="import",e.meta=this.finishNode(t,"Identifier"),this.parseImportMeta(e)}else this.unexpected()};ot.parseDynamicImport=function(i){if(this.next(),i.source=this.parseMaybeAssign(),!this.eat(U.parenR)){var e=this.start;this.eat(U.comma)&&this.eat(U.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(i,"ImportExpression")};ot.parseImportMeta=function(i){this.next();var e=this.containsEsc;return i.property=this.parseIdent(!0),i.property.name!=="meta"&&this.raiseRecoverable(i.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(i.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(i.start,"Cannot use 'import.meta' outside a module"),this.finishNode(i,"MetaProperty")};ot.parseLiteral=function(i){var e=this.startNode();return e.value=i,e.raw=this.input.slice(this.start,this.end),e.raw.charCodeAt(e.raw.length-1)===110&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")};ot.parseParenExpression=function(){this.expect(U.parenL);var i=this.parseExpression();return this.expect(U.parenR),i};ot.shouldParseArrow=function(i){return!this.canInsertSemicolon()};ot.parseParenAndDistinguishExpression=function(i,e){var t=this.start,n=this.startLoc,s,r=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a=this.start,o=this.startLoc,l=[],c=!0,u=!1,h=new yP,d=this.yieldPos,p=this.awaitPos,f;for(this.yieldPos=0,this.awaitPos=0;this.type!==U.parenR;)if(c?c=!1:this.expect(U.comma),r&&this.afterTrailingComma(U.parenR,!0)){u=!0;break}else if(this.type===U.ellipsis){f=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===U.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else l.push(this.parseMaybeAssign(!1,h,this.parseParenItem));var g=this.lastTokEnd,m=this.lastTokEndLoc;if(this.expect(U.parenR),i&&this.shouldParseArrow(l)&&this.eat(U.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=p,this.parseParenArrowList(t,n,l,e);(!l.length||u)&&this.unexpected(this.lastTokStart),f&&this.unexpected(f),this.checkExpressionErrors(h,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,l.length>1?(s=this.startNodeAt(a,o),s.expressions=l,this.finishNodeAt(s,"SequenceExpression",g,m)):s=l[0]}else s=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(t,n);return y.expression=s,this.finishNode(y,"ParenthesizedExpression")}else return s};ot.parseParenItem=function(i){return i};ot.parseParenArrowList=function(i,e,t,n){return this.parseArrowExpression(this.startNodeAt(i,e),t,!1,n)};var nze=[];ot.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var i=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===U.dot){var e=this.startNodeAt(i.start,i.loc&&i.loc.start);e.name="new",i.meta=this.finishNode(e,"Identifier"),this.next();var t=this.containsEsc;return i.property=this.parseIdent(!0),i.property.name!=="target"&&this.raiseRecoverable(i.property.start,"The only valid meta property for new is 'new.target'"),t&&this.raiseRecoverable(i.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(i.start,"'new.target' can only be used in functions and class static block"),this.finishNode(i,"MetaProperty")}var n=this.start,s=this.startLoc;return i.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),n,s,!0,!1),this.eat(U.parenL)?i.arguments=this.parseExprList(U.parenR,this.options.ecmaVersion>=8,!1):i.arguments=nze,this.finishNode(i,"NewExpression")};ot.parseTemplateElement=function(i){var e=i.isTagged,t=this.startNode();return this.type===U.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),t.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):t.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),t.tail=this.type===U.backQuote,this.finishNode(t,"TemplateElement")};ot.parseTemplate=function(i){i===void 0&&(i={});var e=i.isTagged;e===void 0&&(e=!1);var t=this.startNode();this.next(),t.expressions=[];var n=this.parseTemplateElement({isTagged:e});for(t.quasis=[n];!n.tail;)this.type===U.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(U.dollarBraceL),t.expressions.push(this.parseExpression()),this.expect(U.braceR),t.quasis.push(n=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(t,"TemplateLiteral")};ot.isAsyncProp=function(i){return!i.computed&&i.key.type==="Identifier"&&i.key.name==="async"&&(this.type===U.name||this.type===U.num||this.type===U.string||this.type===U.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===U.star)&&!Fa.test(this.input.slice(this.lastTokEnd,this.start))};ot.parseObj=function(i,e){var t=this.startNode(),n=!0,s={};for(t.properties=[],this.next();!this.eat(U.braceR);){if(n)n=!1;else if(this.expect(U.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(U.braceR))break;var r=this.parseProperty(i,e);i||this.checkPropClash(r,s,e),t.properties.push(r)}return this.finishNode(t,i?"ObjectPattern":"ObjectExpression")};ot.parseProperty=function(i,e){var t=this.startNode(),n,s,r,a;if(this.options.ecmaVersion>=9&&this.eat(U.ellipsis))return i?(t.argument=this.parseIdent(!1),this.type===U.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(t,"RestElement")):(t.argument=this.parseMaybeAssign(!1,e),this.type===U.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(t,"SpreadElement"));this.options.ecmaVersion>=6&&(t.method=!1,t.shorthand=!1,(i||e)&&(r=this.start,a=this.startLoc),i||(n=this.eat(U.star)));var o=this.containsEsc;return this.parsePropertyName(t),!i&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(t)?(s=!0,n=this.options.ecmaVersion>=9&&this.eat(U.star),this.parsePropertyName(t)):s=!1,this.parsePropertyValue(t,i,n,s,r,a,e,o),this.finishNode(t,"Property")};ot.parseGetterSetter=function(i){i.kind=i.key.name,this.parsePropertyName(i),i.value=this.parseMethod(!1);var e=i.kind==="get"?0:1;if(i.value.params.length!==e){var t=i.value.start;i.kind==="get"?this.raiseRecoverable(t,"getter should have no params"):this.raiseRecoverable(t,"setter should have exactly one param")}else i.kind==="set"&&i.value.params[0].type==="RestElement"&&this.raiseRecoverable(i.value.params[0].start,"Setter cannot use rest params")};ot.parsePropertyValue=function(i,e,t,n,s,r,a,o){(t||n)&&this.type===U.colon&&this.unexpected(),this.eat(U.colon)?(i.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),i.kind="init"):this.options.ecmaVersion>=6&&this.type===U.parenL?(e&&this.unexpected(),i.kind="init",i.method=!0,i.value=this.parseMethod(t,n)):!e&&!o&&this.options.ecmaVersion>=5&&!i.computed&&i.key.type==="Identifier"&&(i.key.name==="get"||i.key.name==="set")&&this.type!==U.comma&&this.type!==U.braceR&&this.type!==U.eq?((t||n)&&this.unexpected(),this.parseGetterSetter(i)):this.options.ecmaVersion>=6&&!i.computed&&i.key.type==="Identifier"?((t||n)&&this.unexpected(),this.checkUnreserved(i.key),i.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=s),i.kind="init",e?i.value=this.parseMaybeDefault(s,r,this.copyNode(i.key)):this.type===U.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),i.value=this.parseMaybeDefault(s,r,this.copyNode(i.key))):i.value=this.copyNode(i.key),i.shorthand=!0):this.unexpected()};ot.parsePropertyName=function(i){if(this.options.ecmaVersion>=6){if(this.eat(U.bracketL))return i.computed=!0,i.key=this.parseMaybeAssign(),this.expect(U.bracketR),i.key;i.computed=!1}return i.key=this.type===U.num||this.type===U.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};ot.initFunction=function(i){i.id=null,this.options.ecmaVersion>=6&&(i.generator=i.expression=!1),this.options.ecmaVersion>=8&&(i.async=!1)};ot.parseMethod=function(i,e,t){var n=this.startNode(),s=this.yieldPos,r=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(n),this.options.ecmaVersion>=6&&(n.generator=i),this.options.ecmaVersion>=8&&(n.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(EN(e,n.generator)|kN|(t?zte:0)),this.expect(U.parenL),n.params=this.parseBindingList(U.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1,!0,!1),this.yieldPos=s,this.awaitPos=r,this.awaitIdentPos=a,this.finishNode(n,"FunctionExpression")};ot.parseArrowExpression=function(i,e,t,n){var s=this.yieldPos,r=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(EN(t,!1)|Nte),this.initFunction(i),this.options.ecmaVersion>=8&&(i.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,i.params=this.toAssignableList(e,!0),this.parseFunctionBody(i,!0,!1,n),this.yieldPos=s,this.awaitPos=r,this.awaitIdentPos=a,this.finishNode(i,"ArrowFunctionExpression")};ot.parseFunctionBody=function(i,e,t,n){var s=e&&this.type!==U.braceL,r=this.strict,a=!1;if(s)i.body=this.parseMaybeAssign(n),i.expression=!0,this.checkParams(i,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(i.params);(!r||o)&&(a=this.strictDirective(this.end),a&&o&&this.raiseRecoverable(i.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var l=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(i,!r&&!a&&!e&&!t&&this.isSimpleParamList(i.params)),this.strict&&i.id&&this.checkLValSimple(i.id,Ute),i.body=this.parseBlock(!1,void 0,a&&!r),i.expression=!1,this.adaptDirectivePrologue(i.body.body),this.labels=l}this.exitScope()};ot.isSimpleParamList=function(i){for(var e=0,t=i;e<t.length;e+=1){var n=t[e];if(n.type!=="Identifier")return!1}return!0};ot.checkParams=function(i,e){for(var t=Object.create(null),n=0,s=i.params;n<s.length;n+=1){var r=s[n];this.checkLValInnerPattern(r,PN,e?null:t)}};ot.parseExprList=function(i,e,t,n){for(var s=[],r=!0;!this.eat(i);){if(r)r=!1;else if(this.expect(U.comma),e&&this.afterTrailingComma(i))break;var a=void 0;t&&this.type===U.comma?a=null:this.type===U.ellipsis?(a=this.parseSpread(n),n&&this.type===U.comma&&n.trailingComma<0&&(n.trailingComma=this.start)):a=this.parseMaybeAssign(!1,n),s.push(a)}return s};ot.checkUnreserved=function(i){var e=i.start,t=i.end,n=i.name;if(this.inGenerator&&n==="yield"&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&n==="await"&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&n==="arguments"&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(n==="arguments"||n==="await")&&this.raise(e,"Cannot use "+n+" in class static initialization block"),this.keywords.test(n)&&this.raise(e,"Unexpected keyword '"+n+"'"),!(this.options.ecmaVersion<6&&this.input.slice(e,t).indexOf("\\")!==-1)){var s=this.strict?this.reservedWordsStrict:this.reservedWords;s.test(n)&&(!this.inAsync&&n==="await"&&this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+n+"' is reserved"))}};ot.parseIdent=function(i){var e=this.parseIdentNode();return this.next(!!i),this.finishNode(e,"Identifier"),i||(this.checkUnreserved(e),e.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=e.start)),e};ot.parseIdentNode=function(){var i=this.startNode();return this.type===U.name?i.name=this.value:this.type.keyword?(i.name=this.type.keyword,(i.name==="class"||i.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=U.name):this.unexpected(),i};ot.parsePrivateIdent=function(){var i=this.startNode();return this.type===U.privateId?i.name=this.value:this.unexpected(),this.next(),this.finishNode(i,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(i.start,"Private field '#"+i.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(i)),i};ot.parseYield=function(i){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===U.semi||this.canInsertSemicolon()||this.type!==U.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(U.star),e.argument=this.parseMaybeAssign(i)),this.finishNode(e,"YieldExpression")};ot.parseAwait=function(i){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0,!1,i),this.finishNode(e,"AwaitExpression")};var pA=bn.prototype;pA.raise=function(i,e){var t=wN(this.input,i);e+=" ("+t.line+":"+t.column+")";var n=new SyntaxError(e);throw n.pos=i,n.loc=t,n.raisedAt=this.pos,n};pA.raiseRecoverable=pA.raise;pA.curPosition=function(){if(this.options.locations)return new fy(this.curLine,this.pos-this.lineStart)};var Nd=bn.prototype,sze=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Nd.enterScope=function(i){this.scopeStack.push(new sze(i))};Nd.exitScope=function(){this.scopeStack.pop()};Nd.treatFunctionsAsVarInScope=function(i){return i.flags&v0||!this.inModule&&i.flags&Ib};Nd.declareName=function(i,e,t){var n=!1;if(e===Nu){var s=this.currentScope();n=s.lexical.indexOf(i)>-1||s.functions.indexOf(i)>-1||s.var.indexOf(i)>-1,s.lexical.push(i),this.inModule&&s.flags&Ib&&delete this.undefinedExports[i]}else if(e===Vte){var r=this.currentScope();r.lexical.push(i)}else if(e===Hte){var a=this.currentScope();this.treatFunctionsAsVar?n=a.lexical.indexOf(i)>-1:n=a.lexical.indexOf(i)>-1||a.var.indexOf(i)>-1,a.functions.push(i)}else for(var o=this.scopeStack.length-1;o>=0;--o){var l=this.scopeStack[o];if(l.lexical.indexOf(i)>-1&&!(l.flags&$te&&l.lexical[0]===i)||!this.treatFunctionsAsVarInScope(l)&&l.functions.indexOf(i)>-1){n=!0;break}if(l.var.push(i),this.inModule&&l.flags&Ib&&delete this.undefinedExports[i],l.flags&TN)break}n&&this.raiseRecoverable(t,"Identifier '"+i+"' has already been declared")};Nd.checkLocalExport=function(i){this.scopeStack[0].lexical.indexOf(i.name)===-1&&this.scopeStack[0].var.indexOf(i.name)===-1&&(this.undefinedExports[i.name]=i)};Nd.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Nd.currentVarScope=function(){for(var i=this.scopeStack.length-1;;i--){var e=this.scopeStack[i];if(e.flags&TN)return e}};Nd.currentThisScope=function(){for(var i=this.scopeStack.length-1;;i--){var e=this.scopeStack[i];if(e.flags&TN&&!(e.flags&Nte))return e}};var Sx=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new bx(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},Cx=bn.prototype;Cx.startNode=function(){return new Sx(this,this.start,this.startLoc)};Cx.startNodeAt=function(i,e){return new Sx(this,i,e)};function Kte(i,e,t,n){return i.type=e,i.end=t,this.options.locations&&(i.loc.end=n),this.options.ranges&&(i.range[1]=t),i}Cx.finishNode=function(i,e){return Kte.call(this,i,e,this.lastTokEnd,this.lastTokEndLoc)};Cx.finishNodeAt=function(i,e,t,n){return Kte.call(this,i,e,t,n)};Cx.copyNode=function(i){var e=new Sx(this,i.start,this.startLoc);for(var t in i)e[t]=i[t];return e};var Xte="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Yte=Xte+" Extended_Pictographic",qte=Yte,Zte=qte+" EBase EComp EMod EPres ExtPict",Jte=Zte,rze=Jte,aze={9:Xte,10:Yte,11:qte,12:Zte,13:Jte,14:rze},oze="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",lze={9:"",10:"",11:"",12:"",13:"",14:oze},OH="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Qte="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",eie=Qte+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",tie=eie+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",iie=tie+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",nie=iie+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",cze=nie+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",uze={9:Qte,10:eie,11:tie,12:iie,13:nie,14:cze},sie={};function hze(i){var e=sie[i]={binary:Ph(aze[i]+" "+OH),binaryOfStrings:Ph(lze[i]),nonBinary:{General_Category:Ph(OH),Script:Ph(uze[i])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}for(var IM=0,MH=[9,10,11,12,13,14];IM<MH.length;IM+=1){var dze=MH[IM];hze(dze)}var Ne=bn.prototype,fA=function(e,t){this.parent=e,this.base=t||this};fA.prototype.separatedFrom=function(e){for(var t=this;t;t=t.parent)for(var n=e;n;n=n.parent)if(t.base===n.base&&t!==n)return!0;return!1};fA.prototype.sibling=function(){return new fA(this.parent,this.base)};var jc=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":"")+(e.options.ecmaVersion>=13?"d":"")+(e.options.ecmaVersion>=15?"v":""),this.unicodeProperties=sie[e.options.ecmaVersion>=14?14:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};jc.prototype.reset=function(e,t,n){var s=n.indexOf("v")!==-1,r=n.indexOf("u")!==-1;this.start=e|0,this.source=t+"",this.flags=n,s&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=r&&this.parser.options.ecmaVersion>=9)};jc.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)};jc.prototype.at=function(e,t){t===void 0&&(t=!1);var n=this.source,s=n.length;if(e>=s)return-1;var r=n.charCodeAt(e);if(!(t||this.switchU)||r<=55295||r>=57344||e+1>=s)return r;var a=n.charCodeAt(e+1);return a>=56320&&a<=57343?(r<<10)+a-56613888:r};jc.prototype.nextIndex=function(e,t){t===void 0&&(t=!1);var n=this.source,s=n.length;if(e>=s)return s;var r=n.charCodeAt(e),a;return!(t||this.switchU)||r<=55295||r>=57344||e+1>=s||(a=n.charCodeAt(e+1))<56320||a>57343?e+1:e+2};jc.prototype.current=function(e){return e===void 0&&(e=!1),this.at(this.pos,e)};jc.prototype.lookahead=function(e){return e===void 0&&(e=!1),this.at(this.nextIndex(this.pos,e),e)};jc.prototype.advance=function(e){e===void 0&&(e=!1),this.pos=this.nextIndex(this.pos,e)};jc.prototype.eat=function(e,t){return t===void 0&&(t=!1),this.current(t)===e?(this.advance(t),!0):!1};jc.prototype.eatChars=function(e,t){t===void 0&&(t=!1);for(var n=this.pos,s=0,r=e;s<r.length;s+=1){var a=r[s],o=this.at(n,t);if(o===-1||o!==a)return!1;n=this.nextIndex(n,t)}return this.pos=n,!0};Ne.validateRegExpFlags=function(i){for(var e=i.validFlags,t=i.flags,n=!1,s=!1,r=0;r<t.length;r++){var a=t.charAt(r);e.indexOf(a)===-1&&this.raise(i.start,"Invalid regular expression flag"),t.indexOf(a,r+1)>-1&&this.raise(i.start,"Duplicate regular expression flag"),a==="u"&&(n=!0),a==="v"&&(s=!0)}this.options.ecmaVersion>=15&&n&&s&&this.raise(i.start,"Invalid regular expression flag")};function pze(i){for(var e in i)return!0;return!1}Ne.validateRegExpPattern=function(i){this.regexp_pattern(i),!i.switchN&&this.options.ecmaVersion>=9&&pze(i.groupNames)&&(i.switchN=!0,this.regexp_pattern(i))};Ne.regexp_pattern=function(i){i.pos=0,i.lastIntValue=0,i.lastStringValue="",i.lastAssertionIsQuantifiable=!1,i.numCapturingParens=0,i.maxBackReference=0,i.groupNames=Object.create(null),i.backReferenceNames.length=0,i.branchID=null,this.regexp_disjunction(i),i.pos!==i.source.length&&(i.eat(41)&&i.raise("Unmatched ')'"),(i.eat(93)||i.eat(125))&&i.raise("Lone quantifier brackets")),i.maxBackReference>i.numCapturingParens&&i.raise("Invalid escape");for(var e=0,t=i.backReferenceNames;e<t.length;e+=1){var n=t[e];i.groupNames[n]||i.raise("Invalid named capture referenced")}};Ne.regexp_disjunction=function(i){var e=this.options.ecmaVersion>=16;for(e&&(i.branchID=new fA(i.branchID,null)),this.regexp_alternative(i);i.eat(124);)e&&(i.branchID=i.branchID.sibling()),this.regexp_alternative(i);e&&(i.branchID=i.branchID.parent),this.regexp_eatQuantifier(i,!0)&&i.raise("Nothing to repeat"),i.eat(123)&&i.raise("Lone quantifier brackets")};Ne.regexp_alternative=function(i){for(;i.pos<i.source.length&&this.regexp_eatTerm(i););};Ne.regexp_eatTerm=function(i){return this.regexp_eatAssertion(i)?(i.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(i)&&i.switchU&&i.raise("Invalid quantifier"),!0):(i.switchU?this.regexp_eatAtom(i):this.regexp_eatExtendedAtom(i))?(this.regexp_eatQuantifier(i),!0):!1};Ne.regexp_eatAssertion=function(i){var e=i.pos;if(i.lastAssertionIsQuantifiable=!1,i.eat(94)||i.eat(36))return!0;if(i.eat(92)){if(i.eat(66)||i.eat(98))return!0;i.pos=e}if(i.eat(40)&&i.eat(63)){var t=!1;if(this.options.ecmaVersion>=9&&(t=i.eat(60)),i.eat(61)||i.eat(33))return this.regexp_disjunction(i),i.eat(41)||i.raise("Unterminated group"),i.lastAssertionIsQuantifiable=!t,!0}return i.pos=e,!1};Ne.regexp_eatQuantifier=function(i,e){return e===void 0&&(e=!1),this.regexp_eatQuantifierPrefix(i,e)?(i.eat(63),!0):!1};Ne.regexp_eatQuantifierPrefix=function(i,e){return i.eat(42)||i.eat(43)||i.eat(63)||this.regexp_eatBracedQuantifier(i,e)};Ne.regexp_eatBracedQuantifier=function(i,e){var t=i.pos;if(i.eat(123)){var n=0,s=-1;if(this.regexp_eatDecimalDigits(i)&&(n=i.lastIntValue,i.eat(44)&&this.regexp_eatDecimalDigits(i)&&(s=i.lastIntValue),i.eat(125)))return s!==-1&&s<n&&!e&&i.raise("numbers out of order in {} quantifier"),!0;i.switchU&&!e&&i.raise("Incomplete quantifier"),i.pos=t}return!1};Ne.regexp_eatAtom=function(i){return this.regexp_eatPatternCharacters(i)||i.eat(46)||this.regexp_eatReverseSolidusAtomEscape(i)||this.regexp_eatCharacterClass(i)||this.regexp_eatUncapturingGroup(i)||this.regexp_eatCapturingGroup(i)};Ne.regexp_eatReverseSolidusAtomEscape=function(i){var e=i.pos;if(i.eat(92)){if(this.regexp_eatAtomEscape(i))return!0;i.pos=e}return!1};Ne.regexp_eatUncapturingGroup=function(i){var e=i.pos;if(i.eat(40)){if(i.eat(63)&&i.eat(58)){if(this.regexp_disjunction(i),i.eat(41))return!0;i.raise("Unterminated group")}i.pos=e}return!1};Ne.regexp_eatCapturingGroup=function(i){if(i.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(i):i.current()===63&&i.raise("Invalid group"),this.regexp_disjunction(i),i.eat(41))return i.numCapturingParens+=1,!0;i.raise("Unterminated group")}return!1};Ne.regexp_eatExtendedAtom=function(i){return i.eat(46)||this.regexp_eatReverseSolidusAtomEscape(i)||this.regexp_eatCharacterClass(i)||this.regexp_eatUncapturingGroup(i)||this.regexp_eatCapturingGroup(i)||this.regexp_eatInvalidBracedQuantifier(i)||this.regexp_eatExtendedPatternCharacter(i)};Ne.regexp_eatInvalidBracedQuantifier=function(i){return this.regexp_eatBracedQuantifier(i,!0)&&i.raise("Nothing to repeat"),!1};Ne.regexp_eatSyntaxCharacter=function(i){var e=i.current();return rie(e)?(i.lastIntValue=e,i.advance(),!0):!1};function rie(i){return i===36||i>=40&&i<=43||i===46||i===63||i>=91&&i<=94||i>=123&&i<=125}Ne.regexp_eatPatternCharacters=function(i){for(var e=i.pos,t=0;(t=i.current())!==-1&&!rie(t);)i.advance();return i.pos!==e};Ne.regexp_eatExtendedPatternCharacter=function(i){var e=i.current();return e!==-1&&e!==36&&!(e>=40&&e<=43)&&e!==46&&e!==63&&e!==91&&e!==94&&e!==124?(i.advance(),!0):!1};Ne.regexp_groupSpecifier=function(i){if(i.eat(63)){this.regexp_eatGroupName(i)||i.raise("Invalid group");var e=this.options.ecmaVersion>=16,t=i.groupNames[i.lastStringValue];if(t)if(e)for(var n=0,s=t;n<s.length;n+=1){var r=s[n];r.separatedFrom(i.branchID)||i.raise("Duplicate capture group name")}else i.raise("Duplicate capture group name");e?(t||(i.groupNames[i.lastStringValue]=[])).push(i.branchID):i.groupNames[i.lastStringValue]=!0}};Ne.regexp_eatGroupName=function(i){if(i.lastStringValue="",i.eat(60)){if(this.regexp_eatRegExpIdentifierName(i)&&i.eat(62))return!0;i.raise("Invalid capture group name")}return!1};Ne.regexp_eatRegExpIdentifierName=function(i){if(i.lastStringValue="",this.regexp_eatRegExpIdentifierStart(i)){for(i.lastStringValue+=Ad(i.lastIntValue);this.regexp_eatRegExpIdentifierPart(i);)i.lastStringValue+=Ad(i.lastIntValue);return!0}return!1};Ne.regexp_eatRegExpIdentifierStart=function(i){var e=i.pos,t=this.options.ecmaVersion>=11,n=i.current(t);return i.advance(t),n===92&&this.regexp_eatRegExpUnicodeEscapeSequence(i,t)&&(n=i.lastIntValue),fze(n)?(i.lastIntValue=n,!0):(i.pos=e,!1)};function fze(i){return Ac(i,!0)||i===36||i===95}Ne.regexp_eatRegExpIdentifierPart=function(i){var e=i.pos,t=this.options.ecmaVersion>=11,n=i.current(t);return i.advance(t),n===92&&this.regexp_eatRegExpUnicodeEscapeSequence(i,t)&&(n=i.lastIntValue),gze(n)?(i.lastIntValue=n,!0):(i.pos=e,!1)};function gze(i){return pf(i,!0)||i===36||i===95||i===8204||i===8205}Ne.regexp_eatAtomEscape=function(i){return this.regexp_eatBackReference(i)||this.regexp_eatCharacterClassEscape(i)||this.regexp_eatCharacterEscape(i)||i.switchN&&this.regexp_eatKGroupName(i)?!0:(i.switchU&&(i.current()===99&&i.raise("Invalid unicode escape"),i.raise("Invalid escape")),!1)};Ne.regexp_eatBackReference=function(i){var e=i.pos;if(this.regexp_eatDecimalEscape(i)){var t=i.lastIntValue;if(i.switchU)return t>i.maxBackReference&&(i.maxBackReference=t),!0;if(t<=i.numCapturingParens)return!0;i.pos=e}return!1};Ne.regexp_eatKGroupName=function(i){if(i.eat(107)){if(this.regexp_eatGroupName(i))return i.backReferenceNames.push(i.lastStringValue),!0;i.raise("Invalid named reference")}return!1};Ne.regexp_eatCharacterEscape=function(i){return this.regexp_eatControlEscape(i)||this.regexp_eatCControlLetter(i)||this.regexp_eatZero(i)||this.regexp_eatHexEscapeSequence(i)||this.regexp_eatRegExpUnicodeEscapeSequence(i,!1)||!i.switchU&&this.regexp_eatLegacyOctalEscapeSequence(i)||this.regexp_eatIdentityEscape(i)};Ne.regexp_eatCControlLetter=function(i){var e=i.pos;if(i.eat(99)){if(this.regexp_eatControlLetter(i))return!0;i.pos=e}return!1};Ne.regexp_eatZero=function(i){return i.current()===48&&!_P(i.lookahead())?(i.lastIntValue=0,i.advance(),!0):!1};Ne.regexp_eatControlEscape=function(i){var e=i.current();return e===116?(i.lastIntValue=9,i.advance(),!0):e===110?(i.lastIntValue=10,i.advance(),!0):e===118?(i.lastIntValue=11,i.advance(),!0):e===102?(i.lastIntValue=12,i.advance(),!0):e===114?(i.lastIntValue=13,i.advance(),!0):!1};Ne.regexp_eatControlLetter=function(i){var e=i.current();return aie(e)?(i.lastIntValue=e%32,i.advance(),!0):!1};function aie(i){return i>=65&&i<=90||i>=97&&i<=122}Ne.regexp_eatRegExpUnicodeEscapeSequence=function(i,e){e===void 0&&(e=!1);var t=i.pos,n=e||i.switchU;if(i.eat(117)){if(this.regexp_eatFixedHexDigits(i,4)){var s=i.lastIntValue;if(n&&s>=55296&&s<=56319){var r=i.pos;if(i.eat(92)&&i.eat(117)&&this.regexp_eatFixedHexDigits(i,4)){var a=i.lastIntValue;if(a>=56320&&a<=57343)return i.lastIntValue=(s-55296)*1024+(a-56320)+65536,!0}i.pos=r,i.lastIntValue=s}return!0}if(n&&i.eat(123)&&this.regexp_eatHexDigits(i)&&i.eat(125)&&mze(i.lastIntValue))return!0;n&&i.raise("Invalid unicode escape"),i.pos=t}return!1};function mze(i){return i>=0&&i<=1114111}Ne.regexp_eatIdentityEscape=function(i){if(i.switchU)return this.regexp_eatSyntaxCharacter(i)?!0:i.eat(47)?(i.lastIntValue=47,!0):!1;var e=i.current();return e!==99&&(!i.switchN||e!==107)?(i.lastIntValue=e,i.advance(),!0):!1};Ne.regexp_eatDecimalEscape=function(i){i.lastIntValue=0;var e=i.current();if(e>=49&&e<=57){do i.lastIntValue=10*i.lastIntValue+(e-48),i.advance();while((e=i.current())>=48&&e<=57);return!0}return!1};var oie=0,Ru=1,lo=2;Ne.regexp_eatCharacterClassEscape=function(i){var e=i.current();if(yze(e))return i.lastIntValue=-1,i.advance(),Ru;var t=!1;if(i.switchU&&this.options.ecmaVersion>=9&&((t=e===80)||e===112)){i.lastIntValue=-1,i.advance();var n;if(i.eat(123)&&(n=this.regexp_eatUnicodePropertyValueExpression(i))&&i.eat(125))return t&&n===lo&&i.raise("Invalid property name"),n;i.raise("Invalid property name")}return oie};function yze(i){return i===100||i===68||i===115||i===83||i===119||i===87}Ne.regexp_eatUnicodePropertyValueExpression=function(i){var e=i.pos;if(this.regexp_eatUnicodePropertyName(i)&&i.eat(61)){var t=i.lastStringValue;if(this.regexp_eatUnicodePropertyValue(i)){var n=i.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(i,t,n),Ru}}if(i.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(i)){var s=i.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(i,s)}return oie};Ne.regexp_validateUnicodePropertyNameAndValue=function(i,e,t){vx(i.unicodeProperties.nonBinary,e)||i.raise("Invalid property name"),i.unicodeProperties.nonBinary[e].test(t)||i.raise("Invalid property value")};Ne.regexp_validateUnicodePropertyNameOrValue=function(i,e){if(i.unicodeProperties.binary.test(e))return Ru;if(i.switchV&&i.unicodeProperties.binaryOfStrings.test(e))return lo;i.raise("Invalid property name")};Ne.regexp_eatUnicodePropertyName=function(i){var e=0;for(i.lastStringValue="";lie(e=i.current());)i.lastStringValue+=Ad(e),i.advance();return i.lastStringValue!==""};function lie(i){return aie(i)||i===95}Ne.regexp_eatUnicodePropertyValue=function(i){var e=0;for(i.lastStringValue="";_ze(e=i.current());)i.lastStringValue+=Ad(e),i.advance();return i.lastStringValue!==""};function _ze(i){return lie(i)||_P(i)}Ne.regexp_eatLoneUnicodePropertyNameOrValue=function(i){return this.regexp_eatUnicodePropertyValue(i)};Ne.regexp_eatCharacterClass=function(i){if(i.eat(91)){var e=i.eat(94),t=this.regexp_classContents(i);return i.eat(93)||i.raise("Unterminated character class"),e&&t===lo&&i.raise("Negated character class may contain strings"),!0}return!1};Ne.regexp_classContents=function(i){return i.current()===93?Ru:i.switchV?this.regexp_classSetExpression(i):(this.regexp_nonEmptyClassRanges(i),Ru)};Ne.regexp_nonEmptyClassRanges=function(i){for(;this.regexp_eatClassAtom(i);){var e=i.lastIntValue;if(i.eat(45)&&this.regexp_eatClassAtom(i)){var t=i.lastIntValue;i.switchU&&(e===-1||t===-1)&&i.raise("Invalid character class"),e!==-1&&t!==-1&&e>t&&i.raise("Range out of order in character class")}}};Ne.regexp_eatClassAtom=function(i){var e=i.pos;if(i.eat(92)){if(this.regexp_eatClassEscape(i))return!0;if(i.switchU){var t=i.current();(t===99||hie(t))&&i.raise("Invalid class escape"),i.raise("Invalid escape")}i.pos=e}var n=i.current();return n!==93?(i.lastIntValue=n,i.advance(),!0):!1};Ne.regexp_eatClassEscape=function(i){var e=i.pos;if(i.eat(98))return i.lastIntValue=8,!0;if(i.switchU&&i.eat(45))return i.lastIntValue=45,!0;if(!i.switchU&&i.eat(99)){if(this.regexp_eatClassControlLetter(i))return!0;i.pos=e}return this.regexp_eatCharacterClassEscape(i)||this.regexp_eatCharacterEscape(i)};Ne.regexp_classSetExpression=function(i){var e=Ru,t;if(!this.regexp_eatClassSetRange(i))if(t=this.regexp_eatClassSetOperand(i)){t===lo&&(e=lo);for(var n=i.pos;i.eatChars([38,38]);){if(i.current()!==38&&(t=this.regexp_eatClassSetOperand(i))){t!==lo&&(e=Ru);continue}i.raise("Invalid character in character class")}if(n!==i.pos)return e;for(;i.eatChars([45,45]);)this.regexp_eatClassSetOperand(i)||i.raise("Invalid character in character class");if(n!==i.pos)return e}else i.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(i)){if(t=this.regexp_eatClassSetOperand(i),!t)return e;t===lo&&(e=lo)}};Ne.regexp_eatClassSetRange=function(i){var e=i.pos;if(this.regexp_eatClassSetCharacter(i)){var t=i.lastIntValue;if(i.eat(45)&&this.regexp_eatClassSetCharacter(i)){var n=i.lastIntValue;return t!==-1&&n!==-1&&t>n&&i.raise("Range out of order in character class"),!0}i.pos=e}return!1};Ne.regexp_eatClassSetOperand=function(i){return this.regexp_eatClassSetCharacter(i)?Ru:this.regexp_eatClassStringDisjunction(i)||this.regexp_eatNestedClass(i)};Ne.regexp_eatNestedClass=function(i){var e=i.pos;if(i.eat(91)){var t=i.eat(94),n=this.regexp_classContents(i);if(i.eat(93))return t&&n===lo&&i.raise("Negated character class may contain strings"),n;i.pos=e}if(i.eat(92)){var s=this.regexp_eatCharacterClassEscape(i);if(s)return s;i.pos=e}return null};Ne.regexp_eatClassStringDisjunction=function(i){var e=i.pos;if(i.eatChars([92,113])){if(i.eat(123)){var t=this.regexp_classStringDisjunctionContents(i);if(i.eat(125))return t}else i.raise("Invalid escape");i.pos=e}return null};Ne.regexp_classStringDisjunctionContents=function(i){for(var e=this.regexp_classString(i);i.eat(124);)this.regexp_classString(i)===lo&&(e=lo);return e};Ne.regexp_classString=function(i){for(var e=0;this.regexp_eatClassSetCharacter(i);)e++;return e===1?Ru:lo};Ne.regexp_eatClassSetCharacter=function(i){var e=i.pos;if(i.eat(92))return this.regexp_eatCharacterEscape(i)||this.regexp_eatClassSetReservedPunctuator(i)?!0:i.eat(98)?(i.lastIntValue=8,!0):(i.pos=e,!1);var t=i.current();return t<0||t===i.lookahead()&&vze(t)||bze(t)?!1:(i.advance(),i.lastIntValue=t,!0)};function vze(i){return i===33||i>=35&&i<=38||i>=42&&i<=44||i===46||i>=58&&i<=64||i===94||i===96||i===126}function bze(i){return i===40||i===41||i===45||i===47||i>=91&&i<=93||i>=123&&i<=125}Ne.regexp_eatClassSetReservedPunctuator=function(i){var e=i.current();return xze(e)?(i.lastIntValue=e,i.advance(),!0):!1};function xze(i){return i===33||i===35||i===37||i===38||i===44||i===45||i>=58&&i<=62||i===64||i===96||i===126}Ne.regexp_eatClassControlLetter=function(i){var e=i.current();return _P(e)||e===95?(i.lastIntValue=e%32,i.advance(),!0):!1};Ne.regexp_eatHexEscapeSequence=function(i){var e=i.pos;if(i.eat(120)){if(this.regexp_eatFixedHexDigits(i,2))return!0;i.switchU&&i.raise("Invalid escape"),i.pos=e}return!1};Ne.regexp_eatDecimalDigits=function(i){var e=i.pos,t=0;for(i.lastIntValue=0;_P(t=i.current());)i.lastIntValue=10*i.lastIntValue+(t-48),i.advance();return i.pos!==e};function _P(i){return i>=48&&i<=57}Ne.regexp_eatHexDigits=function(i){var e=i.pos,t=0;for(i.lastIntValue=0;cie(t=i.current());)i.lastIntValue=16*i.lastIntValue+uie(t),i.advance();return i.pos!==e};function cie(i){return i>=48&&i<=57||i>=65&&i<=70||i>=97&&i<=102}function uie(i){return i>=65&&i<=70?10+(i-65):i>=97&&i<=102?10+(i-97):i-48}Ne.regexp_eatLegacyOctalEscapeSequence=function(i){if(this.regexp_eatOctalDigit(i)){var e=i.lastIntValue;if(this.regexp_eatOctalDigit(i)){var t=i.lastIntValue;e<=3&&this.regexp_eatOctalDigit(i)?i.lastIntValue=e*64+t*8+i.lastIntValue:i.lastIntValue=e*8+t}else i.lastIntValue=e;return!0}return!1};Ne.regexp_eatOctalDigit=function(i){var e=i.current();return hie(e)?(i.lastIntValue=e-48,i.advance(),!0):(i.lastIntValue=0,!1)};function hie(i){return i>=48&&i<=55}Ne.regexp_eatFixedHexDigits=function(i,e){var t=i.pos;i.lastIntValue=0;for(var n=0;n<e;++n){var s=i.current();if(!cie(s))return i.pos=t,!1;i.lastIntValue=16*i.lastIntValue+uie(s),i.advance()}return!0};var vP=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new bx(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},Ht=bn.prototype;Ht.next=function(i){!i&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new vP(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Ht.getToken=function(){return this.next(),new vP(this)};typeof Symbol<"u"&&(Ht[Symbol.iterator]=function(){var i=this;return{next:function(){var e=i.getToken();return{done:e.type===U.eof,value:e}}}});Ht.nextToken=function(){var i=this.curContext();if((!i||!i.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(U.eof);if(i.override)return i.override(this);this.readToken(this.fullCharCodeAtPos())};Ht.readToken=function(i){return Ac(i,this.options.ecmaVersion>=6)||i===92?this.readWord():this.getTokenFromCode(i)};Ht.fullCharCodeAtPos=function(){var i=this.input.charCodeAt(this.pos);if(i<=55295||i>=56320)return i;var e=this.input.charCodeAt(this.pos+1);return e<=56319||e>=57344?i:(i<<10)+e-56613888};Ht.skipBlockComment=function(){var i=this.options.onComment&&this.curPosition(),e=this.pos,t=this.input.indexOf("*/",this.pos+=2);if(t===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=t+2,this.options.locations)for(var n=void 0,s=e;(n=Fte(this.input,s,this.pos))>-1;)++this.curLine,s=this.lineStart=n;this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,t),e,this.pos,i,this.curPosition())};Ht.skipLineComment=function(i){for(var e=this.pos,t=this.options.onComment&&this.curPosition(),n=this.input.charCodeAt(this.pos+=i);this.pos<this.input.length&&!Kf(n);)n=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+i,this.pos),e,this.pos,t,this.curPosition())};Ht.skipSpace=function(){e:for(;this.pos<this.input.length;){var i=this.input.charCodeAt(this.pos);switch(i){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(i>8&&i<14||i>=5760&&CN.test(String.fromCharCode(i)))++this.pos;else break e}}};Ht.finishToken=function(i,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var t=this.type;this.type=i,this.value=e,this.updateContext(t)};Ht.readToken_dot=function(){var i=this.input.charCodeAt(this.pos+1);if(i>=48&&i<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&i===46&&e===46?(this.pos+=3,this.finishToken(U.ellipsis)):(++this.pos,this.finishToken(U.dot))};Ht.readToken_slash=function(){var i=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):i===61?this.finishOp(U.assign,2):this.finishOp(U.slash,1)};Ht.readToken_mult_modulo_exp=function(i){var e=this.input.charCodeAt(this.pos+1),t=1,n=i===42?U.star:U.modulo;return this.options.ecmaVersion>=7&&i===42&&e===42&&(++t,n=U.starstar,e=this.input.charCodeAt(this.pos+2)),e===61?this.finishOp(U.assign,t+1):this.finishOp(n,t)};Ht.readToken_pipe_amp=function(i){var e=this.input.charCodeAt(this.pos+1);if(e===i){if(this.options.ecmaVersion>=12){var t=this.input.charCodeAt(this.pos+2);if(t===61)return this.finishOp(U.assign,3)}return this.finishOp(i===124?U.logicalOR:U.logicalAND,2)}return e===61?this.finishOp(U.assign,2):this.finishOp(i===124?U.bitwiseOR:U.bitwiseAND,1)};Ht.readToken_caret=function(){var i=this.input.charCodeAt(this.pos+1);return i===61?this.finishOp(U.assign,2):this.finishOp(U.bitwiseXOR,1)};Ht.readToken_plus_min=function(i){var e=this.input.charCodeAt(this.pos+1);return e===i?e===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Fa.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(U.incDec,2):e===61?this.finishOp(U.assign,2):this.finishOp(U.plusMin,1)};Ht.readToken_lt_gt=function(i){var e=this.input.charCodeAt(this.pos+1),t=1;return e===i?(t=i===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+t)===61?this.finishOp(U.assign,t+1):this.finishOp(U.bitShift,t)):e===33&&i===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(e===61&&(t=2),this.finishOp(U.relational,t))};Ht.readToken_eq_excl=function(i){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(U.equality,this.input.charCodeAt(this.pos+2)===61?3:2):i===61&&e===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(U.arrow)):this.finishOp(i===61?U.eq:U.prefix,1)};Ht.readToken_question=function(){var i=this.options.ecmaVersion;if(i>=11){var e=this.input.charCodeAt(this.pos+1);if(e===46){var t=this.input.charCodeAt(this.pos+2);if(t<48||t>57)return this.finishOp(U.questionDot,2)}if(e===63){if(i>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(U.assign,3)}return this.finishOp(U.coalesce,2)}}return this.finishOp(U.question,1)};Ht.readToken_numberSign=function(){var i=this.options.ecmaVersion,e=35;if(i>=13&&(++this.pos,e=this.fullCharCodeAtPos(),Ac(e,!0)||e===92))return this.finishToken(U.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Ad(e)+"'")};Ht.getTokenFromCode=function(i){switch(i){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(U.parenL);case 41:return++this.pos,this.finishToken(U.parenR);case 59:return++this.pos,this.finishToken(U.semi);case 44:return++this.pos,this.finishToken(U.comma);case 91:return++this.pos,this.finishToken(U.bracketL);case 93:return++this.pos,this.finishToken(U.bracketR);case 123:return++this.pos,this.finishToken(U.braceL);case 125:return++this.pos,this.finishToken(U.braceR);case 58:return++this.pos,this.finishToken(U.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(U.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(e===120||e===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(e===111||e===79)return this.readRadixNumber(8);if(e===98||e===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(i);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(i);case 124:case 38:return this.readToken_pipe_amp(i);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(i);case 60:case 62:return this.readToken_lt_gt(i);case 61:case 33:return this.readToken_eq_excl(i);case 63:return this.readToken_question();case 126:return this.finishOp(U.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Ad(i)+"'")};Ht.finishOp=function(i,e){var t=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(i,t)};Ht.readRegexp=function(){for(var i,e,t=this.pos;;){this.pos>=this.input.length&&this.raise(t,"Unterminated regular expression");var n=this.input.charAt(this.pos);if(Fa.test(n)&&this.raise(t,"Unterminated regular expression"),i)i=!1;else{if(n==="[")e=!0;else if(n==="]"&&e)e=!1;else if(n==="/"&&!e)break;i=n==="\\"}++this.pos}var s=this.input.slice(t,this.pos);++this.pos;var r=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(r);var o=this.regexpState||(this.regexpState=new jc(this));o.reset(t,s,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var l=null;try{l=new RegExp(s,a)}catch{}return this.finishToken(U.regexp,{pattern:s,flags:a,value:l})};Ht.readInt=function(i,e,t){for(var n=this.options.ecmaVersion>=12&&e===void 0,s=t&&this.input.charCodeAt(this.pos)===48,r=this.pos,a=0,o=0,l=0,c=e??1/0;l<c;++l,++this.pos){var u=this.input.charCodeAt(this.pos),h=void 0;if(n&&u===95){s&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),o===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),l===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=u;continue}if(u>=97?h=u-97+10:u>=65?h=u-65+10:u>=48&&u<=57?h=u-48:h=1/0,h>=i)break;o=u,a=a*i+h}return n&&o===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===r||e!=null&&this.pos-r!==e?null:a};function Sze(i,e){return e?parseInt(i,8):parseFloat(i.replace(/_/g,""))}function die(i){return typeof BigInt!="function"?null:BigInt(i.replace(/_/g,""))}Ht.readRadixNumber=function(i){var e=this.pos;this.pos+=2;var t=this.readInt(i);return t==null&&this.raise(this.start+2,"Expected number in radix "+i),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(t=die(this.input.slice(e,this.pos)),++this.pos):Ac(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(U.num,t)};Ht.readNumber=function(i){var e=this.pos;!i&&this.readInt(10,void 0,!0)===null&&this.raise(e,"Invalid number");var t=this.pos-e>=2&&this.input.charCodeAt(e)===48;t&&this.strict&&this.raise(e,"Invalid number");var n=this.input.charCodeAt(this.pos);if(!t&&!i&&this.options.ecmaVersion>=11&&n===110){var s=die(this.input.slice(e,this.pos));return++this.pos,Ac(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(U.num,s)}t&&/[89]/.test(this.input.slice(e,this.pos))&&(t=!1),n===46&&!t&&(++this.pos,this.readInt(10),n=this.input.charCodeAt(this.pos)),(n===69||n===101)&&!t&&(n=this.input.charCodeAt(++this.pos),(n===43||n===45)&&++this.pos,this.readInt(10)===null&&this.raise(e,"Invalid number")),Ac(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var r=Sze(this.input.slice(e,this.pos),t);return this.finishToken(U.num,r)};Ht.readCodePoint=function(){var i=this.input.charCodeAt(this.pos),e;if(i===123){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e};Ht.readString=function(i){for(var e="",t=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var n=this.input.charCodeAt(this.pos);if(n===i)break;n===92?(e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!1),t=this.pos):n===8232||n===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Kf(n)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(t,this.pos++),this.finishToken(U.string,e)};var pie={};Ht.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(i){if(i===pie)this.readInvalidTemplateToken();else throw i}this.inTemplateElement=!1};Ht.invalidStringToken=function(i,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw pie;this.raise(i,e)};Ht.readTmplToken=function(){for(var i="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var t=this.input.charCodeAt(this.pos);if(t===96||t===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===U.template||this.type===U.invalidTemplate)?t===36?(this.pos+=2,this.finishToken(U.dollarBraceL)):(++this.pos,this.finishToken(U.backQuote)):(i+=this.input.slice(e,this.pos),this.finishToken(U.template,i));if(t===92)i+=this.input.slice(e,this.pos),i+=this.readEscapedChar(!0),e=this.pos;else if(Kf(t)){switch(i+=this.input.slice(e,this.pos),++this.pos,t){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:i+=`
`;break;default:i+=String.fromCharCode(t);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}};Ht.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(U.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")};Ht.readEscapedChar=function(i){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Ad(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),i){var t=this.pos-1;this.invalidStringToken(t,"Invalid escape sequence in template string")}default:if(e>=48&&e<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],s=parseInt(n,8);return s>255&&(n=n.slice(0,-1),s=parseInt(n,8)),this.pos+=n.length-1,e=this.input.charCodeAt(this.pos),(n!=="0"||e===56||e===57)&&(this.strict||i)&&this.invalidStringToken(this.pos-1-n.length,i?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(s)}return Kf(e)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(e)}};Ht.readHexChar=function(i){var e=this.pos,t=this.readInt(16,i);return t===null&&this.invalidStringToken(e,"Bad character escape sequence"),t};Ht.readWord1=function(){this.containsEsc=!1;for(var i="",e=!0,t=this.pos,n=this.options.ecmaVersion>=6;this.pos<this.input.length;){var s=this.fullCharCodeAtPos();if(pf(s,n))this.pos+=s<=65535?1:2;else if(s===92){this.containsEsc=!0,i+=this.input.slice(t,this.pos);var r=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?Ac:pf)(a,n)||this.invalidStringToken(r,"Invalid Unicode escape"),i+=Ad(a),t=this.pos}else break;e=!1}return i+this.input.slice(t,this.pos)};Ht.readWord=function(){var i=this.readWord1(),e=U.name;return this.keywords.test(i)&&(e=mP[i]),this.finishToken(e,i)};var fie="8.12.1";bn.acorn={Parser:bn,version:fie,defaultOptions:uA,Position:fy,SourceLocation:bx,getLineInfo:wN,Node:Sx,TokenType:Zt,tokTypes:U,keywordTypes:mP,TokContext:Xa,tokContexts:Yi,isIdentifierChar:pf,isIdentifierStart:Ac,Token:vP,isNewLine:Kf,lineBreak:Fa,lineBreakG:Dte,nonASCIIwhitespace:CN};function Cze(i,e){return bn.parse(i,e)}function wze(i,e,t){return bn.parseExpressionAt(i,e,t)}function Aze(i,e){return bn.tokenizer(i,e)}const kze=Object.freeze(Object.defineProperty({__proto__:null,Node:Sx,Parser:bn,Position:fy,SourceLocation:bx,TokContext:Xa,Token:vP,TokenType:Zt,defaultOptions:uA,getLineInfo:wN,isIdentifierChar:pf,isIdentifierStart:Ac,isNewLine:Kf,keywordTypes:mP,lineBreak:Fa,lineBreakG:Dte,nonASCIIwhitespace:CN,parse:Cze,parseExpressionAt:wze,tokContexts:Yi,tokTypes:U,tokenizer:Aze,version:fie},Symbol.toStringTag,{value:"Module"}));var gie={exports:{}},Tze={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",frasl:"",euro:"",image:"",weierp:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:""};const IH=VY(kze);(function(i){const e=Tze,t=/^[\da-fA-F]+$/,n=/^\d+$/,s=new WeakMap;function r(l){l=l.Parser.acorn||l;let c=s.get(l);if(!c){const u=l.tokTypes,h=l.TokContext,d=l.TokenType,p=new h("<tag",!1),f=new h("</tag",!1),g=new h("<tag>...</tag>",!0,!0),m={tc_oTag:p,tc_cTag:f,tc_expr:g},y={jsxName:new d("jsxName"),jsxText:new d("jsxText",{beforeExpr:!0}),jsxTagStart:new d("jsxTagStart",{startsExpr:!0}),jsxTagEnd:new d("jsxTagEnd")};y.jsxTagStart.updateContext=function(){this.context.push(g),this.context.push(p),this.exprAllowed=!1},y.jsxTagEnd.updateContext=function(b){let x=this.context.pop();x===p&&b===u.slash||x===f?(this.context.pop(),this.exprAllowed=this.curContext()===g):this.exprAllowed=!0},c={tokContexts:m,tokTypes:y},s.set(l,c)}return c}function a(l){if(!l)return l;if(l.type==="JSXIdentifier")return l.name;if(l.type==="JSXNamespacedName")return l.namespace.name+":"+l.name.name;if(l.type==="JSXMemberExpression")return a(l.object)+"."+a(l.property)}i.exports=function(l){return l=l||{},function(c){return o({allowNamespaces:l.allowNamespaces!==!1,allowNamespacedObjects:!!l.allowNamespacedObjects},c)}},Object.defineProperty(i.exports,"tokTypes",{get:function(){return r(IH).tokTypes},configurable:!0,enumerable:!0});function o(l,c){const u=c.acorn||IH,h=r(u),d=u.tokTypes,p=h.tokTypes,f=u.tokContexts,g=h.tokContexts.tc_oTag,m=h.tokContexts.tc_cTag,y=h.tokContexts.tc_expr,b=u.isNewLine,x=u.isIdentifierStart,S=u.isIdentifierChar;return class extends c{static get acornJsx(){return h}jsx_readToken(){let C="",w=this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated JSX contents");let A=this.input.charCodeAt(this.pos);switch(A){case 60:case 123:return this.pos===this.start?A===60&&this.exprAllowed?(++this.pos,this.finishToken(p.jsxTagStart)):this.getTokenFromCode(A):(C+=this.input.slice(w,this.pos),this.finishToken(p.jsxText,C));case 38:C+=this.input.slice(w,this.pos),C+=this.jsx_readEntity(),w=this.pos;break;case 62:case 125:this.raise(this.pos,"Unexpected token `"+this.input[this.pos]+"`. Did you mean `"+(A===62?"&gt;":"&rbrace;")+'` or `{"'+this.input[this.pos]+'"}`?');default:b(A)?(C+=this.input.slice(w,this.pos),C+=this.jsx_readNewLine(!0),w=this.pos):++this.pos}}}jsx_readNewLine(C){let w=this.input.charCodeAt(this.pos),A;return++this.pos,w===13&&this.input.charCodeAt(this.pos)===10?(++this.pos,A=C?`
`:`\r
`):A=String.fromCharCode(w),this.options.locations&&(++this.curLine,this.lineStart=this.pos),A}jsx_readString(C){let w="",A=++this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");let T=this.input.charCodeAt(this.pos);if(T===C)break;T===38?(w+=this.input.slice(A,this.pos),w+=this.jsx_readEntity(),A=this.pos):b(T)?(w+=this.input.slice(A,this.pos),w+=this.jsx_readNewLine(!1),A=this.pos):++this.pos}return w+=this.input.slice(A,this.pos++),this.finishToken(d.string,w)}jsx_readEntity(){let C="",w=0,A,T=this.input[this.pos];T!=="&"&&this.raise(this.pos,"Entity must start with an ampersand");let E=++this.pos;for(;this.pos<this.input.length&&w++<10;){if(T=this.input[this.pos++],T===";"){C[0]==="#"?C[1]==="x"?(C=C.substr(2),t.test(C)&&(A=String.fromCharCode(parseInt(C,16)))):(C=C.substr(1),n.test(C)&&(A=String.fromCharCode(parseInt(C,10)))):A=e[C];break}C+=T}return A||(this.pos=E,"&")}jsx_readWord(){let C,w=this.pos;do C=this.input.charCodeAt(++this.pos);while(S(C)||C===45);return this.finishToken(p.jsxName,this.input.slice(w,this.pos))}jsx_parseIdentifier(){let C=this.startNode();return this.type===p.jsxName?C.name=this.value:this.type.keyword?C.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(C,"JSXIdentifier")}jsx_parseNamespacedName(){let C=this.start,w=this.startLoc,A=this.jsx_parseIdentifier();if(!l.allowNamespaces||!this.eat(d.colon))return A;var T=this.startNodeAt(C,w);return T.namespace=A,T.name=this.jsx_parseIdentifier(),this.finishNode(T,"JSXNamespacedName")}jsx_parseElementName(){if(this.type===p.jsxTagEnd)return"";let C=this.start,w=this.startLoc,A=this.jsx_parseNamespacedName();for(this.type===d.dot&&A.type==="JSXNamespacedName"&&!l.allowNamespacedObjects&&this.unexpected();this.eat(d.dot);){let T=this.startNodeAt(C,w);T.object=A,T.property=this.jsx_parseIdentifier(),A=this.finishNode(T,"JSXMemberExpression")}return A}jsx_parseAttributeValue(){switch(this.type){case d.braceL:let C=this.jsx_parseExpressionContainer();return C.expression.type==="JSXEmptyExpression"&&this.raise(C.start,"JSX attributes must only be assigned a non-empty expression"),C;case p.jsxTagStart:case d.string:return this.parseExprAtom();default:this.raise(this.start,"JSX value should be either an expression or a quoted JSX text")}}jsx_parseEmptyExpression(){let C=this.startNodeAt(this.lastTokEnd,this.lastTokEndLoc);return this.finishNodeAt(C,"JSXEmptyExpression",this.start,this.startLoc)}jsx_parseExpressionContainer(){let C=this.startNode();return this.next(),C.expression=this.type===d.braceR?this.jsx_parseEmptyExpression():this.parseExpression(),this.expect(d.braceR),this.finishNode(C,"JSXExpressionContainer")}jsx_parseAttribute(){let C=this.startNode();return this.eat(d.braceL)?(this.expect(d.ellipsis),C.argument=this.parseMaybeAssign(),this.expect(d.braceR),this.finishNode(C,"JSXSpreadAttribute")):(C.name=this.jsx_parseNamespacedName(),C.value=this.eat(d.eq)?this.jsx_parseAttributeValue():null,this.finishNode(C,"JSXAttribute"))}jsx_parseOpeningElementAt(C,w){let A=this.startNodeAt(C,w);A.attributes=[];let T=this.jsx_parseElementName();for(T&&(A.name=T);this.type!==d.slash&&this.type!==p.jsxTagEnd;)A.attributes.push(this.jsx_parseAttribute());return A.selfClosing=this.eat(d.slash),this.expect(p.jsxTagEnd),this.finishNode(A,T?"JSXOpeningElement":"JSXOpeningFragment")}jsx_parseClosingElementAt(C,w){let A=this.startNodeAt(C,w),T=this.jsx_parseElementName();return T&&(A.name=T),this.expect(p.jsxTagEnd),this.finishNode(A,T?"JSXClosingElement":"JSXClosingFragment")}jsx_parseElementAt(C,w){let A=this.startNodeAt(C,w),T=[],E=this.jsx_parseOpeningElementAt(C,w),P=null;if(!E.selfClosing){e:for(;;)switch(this.type){case p.jsxTagStart:if(C=this.start,w=this.startLoc,this.next(),this.eat(d.slash)){P=this.jsx_parseClosingElementAt(C,w);break e}T.push(this.jsx_parseElementAt(C,w));break;case p.jsxText:T.push(this.parseExprAtom());break;case d.braceL:T.push(this.jsx_parseExpressionContainer());break;default:this.unexpected()}a(P.name)!==a(E.name)&&this.raise(P.start,"Expected corresponding JSX closing tag for <"+a(E.name)+">")}let O=E.name?"Element":"Fragment";return A["opening"+O]=E,A["closing"+O]=P,A.children=T,this.type===d.relational&&this.value==="<"&&this.raise(this.start,"Adjacent JSX elements must be wrapped in an enclosing tag"),this.finishNode(A,"JSX"+O)}jsx_parseText(){let C=this.parseLiteral(this.value);return C.type="JSXText",C}jsx_parseElement(){let C=this.start,w=this.startLoc;return this.next(),this.jsx_parseElementAt(C,w)}parseExprAtom(C){return this.type===p.jsxText?this.jsx_parseText():this.type===p.jsxTagStart?this.jsx_parseElement():super.parseExprAtom(C)}readToken(C){let w=this.curContext();if(w===y)return this.jsx_readToken();if(w===g||w===m){if(x(C))return this.jsx_readWord();if(C==62)return++this.pos,this.finishToken(p.jsxTagEnd);if((C===34||C===39)&&w==g)return this.jsx_readString(C)}return C===60&&this.exprAllowed&&this.input.charCodeAt(this.pos+1)!==33?(++this.pos,this.finishToken(p.jsxTagStart)):super.readToken(C)}updateContext(C){if(this.type==d.braceL){var w=this.curContext();w==g?this.context.push(f.b_expr):w==y?this.context.push(f.b_tmpl):super.updateContext(C),this.exprAllowed=!0}else if(this.type===d.slash&&C===p.jsxTagStart)this.context.length-=2,this.context.push(m),this.exprAllowed=!1;else return super.updateContext(C)}}}})(gie);var Eze=gie.exports;const Pze=Xe(Eze),Zs=$d(/[A-Za-z]/),Qs=$d(/[\dA-Za-z]/),Oze=$d(/[#-'*+\--9=?A-Z^-~]/);function gA(i){return i!==null&&(i<32||i===127)}const NL=$d(/\d/),Mze=$d(/[\dA-Fa-f]/),Ize=$d(/[!-/:-@[-`{-~]/);function ze(i){return i!==null&&i<-2}function ei(i){return i!==null&&(i<0||i===32)}function St(i){return i===-2||i===-1||i===32}const bP=$d(new RegExp("\\p{P}|\\p{S}","u")),yr=$d(/\s/);function $d(i){return e;function e(t){return t!==null&&t>-1&&i.test(String.fromCharCode(t))}}function Bt(i,e,t,n){const s=n?n-1:Number.POSITIVE_INFINITY;let r=0;return a;function a(l){return St(l)?(i.enter(t),o(l)):e(l)}function o(l){return St(l)&&r++<s?(i.consume(l),o):(i.exit(t),e(l))}}const Rze={}.hasOwnProperty,Lze=Symbol("continue"),RM=Symbol("exit"),Dze=Symbol("skip");function Fze(i,e){let t,n;typeof e=="function"?t=e:e&&typeof e=="object"&&(e.enter&&(t=e.enter),e.leave&&(n=e.leave)),s(i,void 0,void 0,[])();function s(r,a,o,l){return LM(r)&&(c.displayName="node ("+r.type+")"),c;function c(){const u=t?RH(t(r,a,o,l)):[];if(u[0]===RM)return u;if(u[0]!==Dze){let h;for(h in r)if(Rze.call(r,h)&&r[h]&&typeof r[h]=="object"&&h!=="data"&&h!=="position"){const d=l.concat(r),p=r[h];if(Array.isArray(p)){const f=p;let g=0;for(;g>-1&&g<f.length;){const m=f[g];if(LM(m)){const y=s(m,h,g,d)();if(y[0]===RM)return y;g=typeof y[1]=="number"?y[1]:g+1}else g++}}else if(LM(p)){const f=s(p,h,void 0,d)();if(f[0]===RM)return f}}}return n?RH(n(r,a,o,l)):u}}}function RH(i){return Array.isArray(i)?i:typeof i=="number"?[Lze,i]:[i]}function LM(i){return!!(i&&typeof i=="object"&&"type"in i&&typeof i.type=="string"&&i.type.length>0)}function mie(i,e){const t=e.prefix||"",n=e.suffix||"",s=Object.assign({},e.acornOptions),r=[],a=[],o=s.onComment,l=s.onToken;let c=!1,u,h;const d=Object.assign({},s,{onComment:r,preserveParens:!0});l&&(d.onToken=a);const p=Bze(i,e.tokenTypes),f=p.value,g=t+f+n,m=e.expression&&LH(f);if(m&&!e.allowEmpty)throw new fi("Unexpected empty expression",{place:b(0),ruleId:"unexpected-empty-expression",source:"micromark-extension-mdx-expression"});try{u=e.expression&&!m?e.acorn.parseExpressionAt(g,0,d):e.acorn.parse(g,d)}catch(x){const S=x,C=b(S.pos);S.message=String(S.message).replace(/ \(\d+:\d+\)$/,""),S.pos=C.offset,S.loc={line:C.line,column:C.column-1},h=S,c=S.raisedAt>=t.length+f.length||S.message==="Unterminated comment"}if(u&&e.expression&&!m)if(LH(g.slice(u.end,g.length-n.length)))u={type:"Program",start:0,end:t.length+f.length,body:[{type:"ExpressionStatement",expression:u,start:0,end:t.length+f.length}],sourceType:"module",comments:[]};else{const x=b(u.end),S=new Error("Unexpected content after expression");S.pos=x.offset,S.loc={line:x.line,column:x.column-1},h=S,u=void 0}if(u){if(u.comments=r,Fze(u,function(x,S,C,w){let A=w[w.length-1],T=S;x.type==="ParenthesizedExpression"&&A&&T&&(typeof C=="number"&&(A=A[T],T=C),A[T]=x.expression),y(x)}),Array.isArray(o))o.push(...r);else if(typeof o=="function")for(const x of r)o(x.type==="Block",x.value,x.start,x.end,x.loc.start,x.loc.end);for(const x of a)x.end<=t.length||x.start-t.length>=f.length||(y(x),Array.isArray(l)?l.push(x):l(x))}return{estree:u,error:h,swallow:c};function y(x){const S=b(x.start),C=b(x.end);x.start=S.offset,x.end=C.offset,x.loc={start:{line:S.line,column:S.column-1,offset:S.offset},end:{line:C.line,column:C.column-1,offset:C.offset}},x.range=[x.start,x.end]}function b(x){let S=x-t.length;S<0?S=0:S>f.length&&(S=f.length);let C=jze(p.stops,S);return C||(C={line:e.start.line,column:e.start.column,offset:e.start.offset}),C}}function LH(i){return/^\s*$/.test(i.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\/\/[^\r\n]*(\r\n|\n|\r)/g,""))}function Bze(i,e){const t={value:"",stops:[]};let n=-1;for(;++n<i.length;){const s=i[n];if(s[0]==="enter"){const r=s[1].type;if(r==="lineEnding"||e.includes(r)){const a=s[2].sliceStream(s[1]);for(;a.length>0&&a[0]===-1;)a.shift();const o=Nze(a);t.stops.push([t.value.length,s[1].start]),t.value+=o,t.stops.push([t.value.length,s[1].end])}}}return t}function jze(i,e){let t=0;for(;t<i.length&&i[t][0]<=e;)t+=1;if(t===0)return;const[n,s]=i[t-1],r=e-n;return{line:s.line,column:s.column+r,offset:s.offset+r}}function Nze(i){let e=-1;const t=[];let n;for(;++e<i.length;){const s=i[e];let r;if(typeof s=="string")r=s;else switch(s){case-5:{r="\r";break}case-4:{r=`
`;break}case-3:{r=`\r
`;break}case-2:{r="	";break}case-1:{if(n)continue;r=" ";break}default:r=String.fromCharCode(s)}n=s===-2,t.push(r)}return t.join("")}function hu(i){const e=i||{},t=e.loc||{},n=e.range||[void 0,void 0],s=DH(t.start,n[0]||e.start),r=DH(t.end,n[1]||e.end);if(s&&r)return{start:s,end:r}}function DH(i,e){if(i&&typeof i=="object"){const t="line"in i?DM(i.line):void 0,n="column"in i?DM(i.column):void 0;if(t&&n!==void 0)return{line:t,column:n+1,offset:DM(e)}}}function DM(i){return typeof i=="number"&&i>-1?i:void 0}const $ze=2,om="https://github.com/micromark/micromark-extension-mdx-expression/tree/main/packages/micromark-extension-mdx-expression",zze="#unexpected-end-of-file-in-expression-expected-a-corresponding-closing-brace-for-",Hze="#unexpected-lazy-line-in-expression-in-container-expected-line-to-be-prefixed",FH="#unexpected-type-in-code-expected-an-object-spread-spread",Vze="#unexpected-extra-content-in-spread-only-a-single-spread-is-supported",Uze="#could-not-parse-expression-with-acorn";function mA(i,e,t,n,s,r,a,o,l,c,u){const h=this,d=this.events.length+3;let p=0,f,g;return m;function m(S){return i.enter(t),i.enter(n),i.consume(S),i.exit(n),f=h.now(),y}function y(S){if(S===null){if(g)throw g;const C=new fi("Unexpected end of file in expression, expected a corresponding closing brace for `{`",{place:h.now(),ruleId:"unexpected-eof",source:"micromark-extension-mdx-expression"});throw C.url=om+zze,C}if(ze(S))return i.enter("lineEnding"),i.consume(S),i.exit("lineEnding"),x;if(S===125&&p===0){const C=r?Wze.call(h,r,a,s,d,f,c||!1,l||!1):{type:"ok",estree:void 0};if(C.type==="ok"){i.enter(n),i.consume(S),i.exit(n);const w=i.exit(t);return o&&C.estree&&Object.assign(w,{estree:C.estree}),e}return g=C.message,i.enter(s),i.consume(S),b}return i.enter(s),b(S)}function b(S){return S===125&&p===0||S===null||ze(S)?(i.exit(s),y(S)):(S===123&&!r?p+=1:S===125&&(p-=1),i.consume(S),b)}function x(S){const C=h.now();if(C.line!==f.line&&!u&&h.parser.lazy[C.line]){const w=new fi("Unexpected lazy line in expression in container, expected line to be prefixed with `>` when in a block quote, whitespace when in a list, etc",{place:h.now(),ruleId:"unexpected-lazy",source:"micromark-extension-mdx-expression"});throw w.url=om+Hze,w}return St(S)?Bt(i,y,"linePrefix",$ze+1)(S):y(S)}}function Wze(i,e,t,n,s,r,a){const o=mie(this.events.slice(n),{acorn:i,tokenTypes:[t],acornOptions:e,start:s,expression:!0,allowEmpty:r,prefix:a?"({":"",suffix:a?"})":""}),l=o.estree;if(a&&l){const c=l.body[0];if(c.type!=="ExpressionStatement"||c.expression.type!=="ObjectExpression"){const u=hu(c),h=new fi("Unexpected `"+c.type+"` in code: expected an object spread (`{...spread}`)",{place:u.start,ruleId:"non-spread",source:"micromark-extension-mdx-expression"});throw h.url=om+FH,h}if(c.expression.properties[1]){const u=hu(c.expression.properties[1]),h=new fi("Unexpected extra content in spread: only a single spread is supported",{place:u.start,ruleId:"spread-extra",source:"micromark-extension-mdx-expression"});throw h.url=om+Vze,h}if(c.expression.properties[0]&&c.expression.properties[0].type!=="SpreadElement"){const u=hu(c.expression.properties[0]),h=new fi("Unexpected `"+c.expression.properties[0].type+"` in code: only spread elements are supported",{place:u.start,ruleId:"non-spread",source:"micromark-extension-mdx-expression"});throw h.url=om+FH,h}}if(o.error){const c=new fi("Could not parse expression with acorn",{cause:o.error,place:{line:o.error.loc.line,column:o.error.loc.column+1,offset:o.error.pos},ruleId:"acorn",source:"micromark-extension-mdx-expression"});return c.url=om+Uze,{type:"nok",message:c}}return{type:"ok",estree:l}}function Gze(i){const e=i||{},t=e.addResult,n=e.acorn,s=e.spread;let r=e.allowEmpty,a;if(r==null&&(r=!0),n){if(!n.parseExpressionAt)throw new Error("Expected a proper `acorn` instance passed in as `options.acorn`");a=Object.assign({ecmaVersion:2024,sourceType:"module"},e.acornOptions)}else if(e.acornOptions||e.addResult)throw new Error("Expected an `acorn` instance passed in as `options.acorn`");return{flow:{123:{name:"mdxFlowExpression",tokenize:o,concrete:!0}},text:{123:{name:"mdxTextExpression",tokenize:l}}};function o(c,u,h){const d=this;return p;function p(y){return f(y)}function f(y){return mA.call(d,c,g,"mdxFlowExpression","mdxFlowExpressionMarker","mdxFlowExpressionChunk",n,a,t,s,r)(y)}function g(y){return St(y)?Bt(c,m,"whitespace")(y):m(y)}function m(y){const b=d.parser.constructs.flow[60],S=(Array.isArray(b)?b:b?[b]:[]).find(function(C){return C.name==="mdxJsxFlowTag"});return y===60&&S?c.attempt(S,m,h)(y):y===null||ze(y)?u(y):h(y)}}function l(c,u){const h=this;return d;function d(p){return mA.call(h,c,u,"mdxTextExpression","mdxTextExpressionMarker","mdxTextExpressionChunk",n,a,t,s,r,!0)(p)}}}const Kze=/[$_\p{ID_Start}]/u,Xze=/[$_\u{200C}\u{200D}\p{ID_Continue}]/u,Yze=/[-$_\u{200C}\u{200D}\p{ID_Continue}]/u,qze=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Zze=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,yie={};function Wo(i){return i?Kze.test(String.fromCodePoint(i)):!1}function s_(i,e){const n=(e||yie).jsx?Yze:Xze;return i?n.test(String.fromCodePoint(i)):!1}function _c(i,e){return((e||yie).jsx?Zze:qze).test(i)}const BH="https://github.com/micromark/micromark-extension-mdx-jsx";function _ie(i,e,t,n,s,r,a,o,l,c,u,h,d,p,f,g,m,y,b,x,S,C,w,A,T,E,P,O,M,R,j,I){const D=this;let z,$;return V;function V(G){return i.enter(o),i.enter(l),i.consume(G),i.exit(l),L}function L(G){return ei(G)?t(G):(z=Y,lt(G))}function Y(G){if(G===47)return i.enter(c),i.consume(G),i.exit(c),z=ae,lt;if(G===62)return Jn(G);if(G!==null&&G>=0&&Wo(G))return i.enter(h),i.enter(d),i.consume(G),W;xe(G,"before name","a character that can start a name, such as a letter, `$`, or `_`"+(G===33?" (note: to create a comment in MDX, use `{/* text */}`)":""))}function ae(G){if(G===62)return Jn(G);if(G!==null&&G>=0&&Wo(G))return i.enter(h),i.enter(d),i.consume(G),W;xe(G,"before name","a character that can start a name, such as a letter, `$`, or `_`"+(G===42||G===47?" (note: JS comments in JSX tags are not supported in MDX)":""))}function W(G){if(G!==null&&G>=0&&s_(G,{jsx:!0}))return i.consume(G),W;if(G===46||G===47||G===58||G===62||G===123||ei(G)||yr(G))return i.exit(d),z=ce,lt(G);xe(G,"in name","a name character such as letters, digits, `$`, or `_`; whitespace before attributes; or the end of the tag"+(G===64?" (note: to create a link in MDX, use `[text](url)`)":""))}function ce(G){if(G===46)return i.enter(p),i.consume(G),i.exit(p),z=he,lt;if(G===58)return i.enter(g),i.consume(G),i.exit(g),z=te,lt;if(G===47||G===62||G===123||G!==null&&G>=0&&Wo(G))return i.exit(h),ve(G);xe(G,"after name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function he(G){if(G!==null&&G>=0&&Wo(G))return i.enter(f),i.consume(G),le;xe(G,"before member name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function le(G){if(G!==null&&G>=0&&s_(G,{jsx:!0}))return i.consume(G),le;if(G===46||G===47||G===62||G===123||ei(G)||yr(G))return i.exit(f),z=de,lt(G);xe(G,"in member name","a name character such as letters, digits, `$`, or `_`; whitespace before attributes; or the end of the tag"+(G===64?" (note: to create a link in MDX, use `[text](url)`)":""))}function de(G){if(G===46)return i.enter(p),i.consume(G),i.exit(p),z=he,lt;if(G===47||G===62||G===123||G!==null&&G>=0&&Wo(G))return i.exit(h),ve(G);xe(G,"after member name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function te(G){if(G!==null&&G>=0&&Wo(G))return i.enter(m),i.consume(G),me;xe(G,"before local name","a character that can start a name, such as a letter, `$`, or `_`"+(G===43||G!==null&&G>46&&G<58?" (note: to create a link in MDX, use `[text](url)`)":""))}function me(G){if(G!==null&&G>=0&&s_(G,{jsx:!0}))return i.consume(G),me;if(G===47||G===62||G===123||ei(G)||yr(G))return i.exit(m),z=Be,lt(G);xe(G,"in local name","a name character such as letters, digits, `$`, or `_`; whitespace before attributes; or the end of the tag")}function Be(G){if(G===47||G===62||G===123||G!==null&&G>=0&&Wo(G))return i.exit(h),ve(G);xe(G,"after local name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function ve(G){if(G===47)return i.enter(u),i.consume(G),i.exit(u),z=Gi,lt;if(G===62)return Jn(G);if(G===123)return mA.call(D,i,Re,y,b,x,n,s,r,!0,!1,a)(G);if(G!==null&&G>=0&&Wo(G))return i.enter(S),i.enter(C),i.enter(w),i.consume(G),Qe;xe(G,"before attribute name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function Re(G){return z=ve,lt(G)}function Qe(G){if(G!==null&&G>=0&&s_(G,{jsx:!0}))return i.consume(G),Qe;if(G===47||G===58||G===61||G===62||G===123||ei(G)||yr(G))return i.exit(w),z=Lt,lt(G);xe(G,"in attribute name","an attribute name character such as letters, digits, `$`, or `_`; `=` to initialize a value; whitespace before attributes; or the end of the tag")}function Lt(G){if(G===58)return i.enter(A),i.consume(G),i.exit(A),z=Ue,lt;if(G===61)return i.exit(C),i.enter(E),i.consume(G),i.exit(E),z=vt,lt;if(G===47||G===62||G===123||ei(G)||yr(G)||G!==null&&G>=0&&Wo(G))return i.exit(C),i.exit(S),z=ve,lt(G);xe(G,"after attribute name","a character that can start an attribute name, such as a letter, `$`, or `_`; `=` to initialize a value; or the end of the tag")}function Ue(G){if(G!==null&&G>=0&&Wo(G))return i.enter(T),i.consume(G),je;xe(G,"before local attribute name","a character that can start an attribute name, such as a letter, `$`, or `_`; `=` to initialize a value; or the end of the tag")}function je(G){if(G!==null&&G>=0&&s_(G,{jsx:!0}))return i.consume(G),je;if(G===47||G===61||G===62||G===123||ei(G)||yr(G))return i.exit(T),i.exit(C),z=ut,lt(G);xe(G,"in local attribute name","an attribute name character such as letters, digits, `$`, or `_`; `=` to initialize a value; whitespace before attributes; or the end of the tag")}function ut(G){if(G===61)return i.enter(E),i.consume(G),i.exit(E),z=vt,lt;if(G===47||G===62||G===123||G!==null&&G>=0&&Wo(G))return i.exit(S),ve(G);xe(G,"after local attribute name","a character that can start an attribute name, such as a letter, `$`, or `_`; `=` to initialize a value; or the end of the tag")}function vt(G){if(G===34||G===39)return i.enter(P),i.enter(O),i.consume(G),i.exit(O),$=G,Me;if(G===123)return mA.call(D,i,si,R,j,I,n,s,r,!1,!1,a)(G);xe(G,"before attribute value","a character that can start an attribute value, such as `\"`, `'`, or `{`"+(G===60?" (note: to use an element or fragment as a prop value in MDX, use `{<element />}`)":""))}function si(G){return i.exit(S),z=ve,lt(G)}function Me(G){return G===null&&xe(G,"in attribute value","a corresponding closing quote `"+String.fromCodePoint($)+"`"),G===$?(i.enter(O),i.consume(G),i.exit(O),i.exit(P),i.exit(S),$=void 0,z=ve,lt):ze(G)?(z=Me,lt(G)):(i.enter(M),Ot(G))}function Ot(G){return G===null||G===$||ze(G)?(i.exit(M),Me(G)):(i.consume(G),Ot)}function Gi(G){if(G===62)return Jn(G);xe(G,"after self-closing slash","`>` to end the tag"+(G===42||G===47?" (note: JS comments in JSX tags are not supported in MDX)":""))}function Jn(G){return i.enter(l),i.consume(G),i.exit(l),i.exit(o),e}function lt(G){return ze(G)?(i.enter("lineEnding"),i.consume(G),i.exit("lineEnding"),fe):St(G)||yr(G)?(i.enter("esWhitespace"),Fo(G)):z(G)}function Fo(G){return ze(G)?(i.exit("esWhitespace"),lt(G)):St(G)||yr(G)?(i.consume(G),Fo):(i.exit("esWhitespace"),z(G))}function fe(G){if(!a&&D.parser.lazy[D.now().line]){const at=new fi("Unexpected lazy line in container, expected line to be prefixed with `>` when in a block quote, whitespace when in a list, etc",D.now(),"micromark-extension-mdx-jsx:unexpected-lazy");throw at.url=BH+"#unexpected-lazy-line-in-container-expected-line-to-be",at}return lt(G)}function xe(G,at,Vt){const Li=new fi("Unexpected "+(G===null?"end of file":"character `"+(G===96?"` ` `":String.fromCodePoint(G))+"` ("+Jze(G)+")")+" "+at+", expected "+Vt,D.now(),"micromark-extension-mdx-jsx:unexpected-"+(G===null?"eof":"character"));throw Li.url=BH+(G===null?"#unexpected-end-of-file-at-expected-expect":"#unexpected-character-at-expected-expect"),Li}}function Jze(i){return"U+"+i.toString(16).toUpperCase().padStart(4,"0")}function Qze(i,e){return{name:"mdxJsxTextTag",tokenize:t};function t(n,s,r){return _ie.call(this,n,s,r,i,e.acornOptions,e.addResult,!0,"mdxJsxTextTag","mdxJsxTextTagMarker","mdxJsxTextTagClosingMarker","mdxJsxTextTagSelfClosingMarker","mdxJsxTextTagName","mdxJsxTextTagNamePrimary","mdxJsxTextTagNameMemberMarker","mdxJsxTextTagNameMember","mdxJsxTextTagNamePrefixMarker","mdxJsxTextTagNameLocal","mdxJsxTextTagExpressionAttribute","mdxJsxTextTagExpressionAttributeMarker","mdxJsxTextTagExpressionAttributeValue","mdxJsxTextTagAttribute","mdxJsxTextTagAttributeName","mdxJsxTextTagAttributeNamePrimary","mdxJsxTextTagAttributeNamePrefixMarker","mdxJsxTextTagAttributeNameLocal","mdxJsxTextTagAttributeInitializerMarker","mdxJsxTextTagAttributeValueLiteral","mdxJsxTextTagAttributeValueLiteralMarker","mdxJsxTextTagAttributeValueLiteralValue","mdxJsxTextTagAttributeValueExpression","mdxJsxTextTagAttributeValueExpressionMarker","mdxJsxTextTagAttributeValueExpressionValue")}}function e6e(i,e){return{name:"mdxJsxFlowTag",tokenize:t,concrete:!0};function t(n,s,r){const a=this;return o;function o(h){return l(h)}function l(h){return _ie.call(a,n,c,r,i,e.acornOptions,e.addResult,!1,"mdxJsxFlowTag","mdxJsxFlowTagMarker","mdxJsxFlowTagClosingMarker","mdxJsxFlowTagSelfClosingMarker","mdxJsxFlowTagName","mdxJsxFlowTagNamePrimary","mdxJsxFlowTagNameMemberMarker","mdxJsxFlowTagNameMember","mdxJsxFlowTagNamePrefixMarker","mdxJsxFlowTagNameLocal","mdxJsxFlowTagExpressionAttribute","mdxJsxFlowTagExpressionAttributeMarker","mdxJsxFlowTagExpressionAttributeValue","mdxJsxFlowTagAttribute","mdxJsxFlowTagAttributeName","mdxJsxFlowTagAttributeNamePrimary","mdxJsxFlowTagAttributeNamePrefixMarker","mdxJsxFlowTagAttributeNameLocal","mdxJsxFlowTagAttributeInitializerMarker","mdxJsxFlowTagAttributeValueLiteral","mdxJsxFlowTagAttributeValueLiteralMarker","mdxJsxFlowTagAttributeValueLiteralValue","mdxJsxFlowTagAttributeValueExpression","mdxJsxFlowTagAttributeValueExpressionMarker","mdxJsxFlowTagAttributeValueExpressionValue")(h)}function c(h){return St(h)?Bt(n,u,"whitespace")(h):u(h)}function u(h){const d=a.parser.constructs.flow[123],f=(Array.isArray(d)?d:d?[d]:[]).find(g=>g.name==="mdxFlowExpression");return h===60?o(h):h===123&&f?n.attempt(f,u,r)(h):h===null||ze(h)?s(h):r(h)}}}function t6e(i){const e=i||{},t=e.acorn;let n;if(t){if(!t.parse||!t.parseExpressionAt)throw new Error("Expected a proper `acorn` instance passed in as `options.acorn`");n=Object.assign({ecmaVersion:2024,sourceType:"module"},e.acornOptions,{locations:!0})}else if(e.acornOptions||e.addResult)throw new Error("Expected an `acorn` instance passed in as `options.acorn`");return{flow:{60:e6e(t||void 0,{acornOptions:n,addResult:e.addResult||void 0})},text:{60:Qze(t||void 0,{acornOptions:n,addResult:e.addResult||void 0})}}}function i6e(){return{disable:{null:["autolink","codeIndented","htmlFlow","htmlText"]}}}function xo(i,e,t,n){const s=i.length;let r=0,a;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,t=t>0?t:0,n.length<1e4)a=Array.from(n),a.unshift(e,t),i.splice(...a);else for(t&&i.splice(e,t);r<n.length;)a=n.slice(r,r+1e4),a.unshift(e,0),i.splice(...a),r+=1e4,e+=1e4}function no(i,e){return i.length>0?(xo(i,i.length,0,e),i):e}function yA(i){if(i===null||ei(i)||yr(i))return 1;if(bP(i))return 2}function xP(i,e,t){const n=[];let s=-1;for(;++s<i.length;){const r=i[s].resolveAll;r&&!n.includes(r)&&(e=r(e,t),n.push(r))}return e}const $L={name:"attention",tokenize:s6e,resolveAll:n6e};function n6e(i,e){let t=-1,n,s,r,a,o,l,c,u;for(;++t<i.length;)if(i[t][0]==="enter"&&i[t][1].type==="attentionSequence"&&i[t][1]._close){for(n=t;n--;)if(i[n][0]==="exit"&&i[n][1].type==="attentionSequence"&&i[n][1]._open&&e.sliceSerialize(i[n][1]).charCodeAt(0)===e.sliceSerialize(i[t][1]).charCodeAt(0)){if((i[n][1]._close||i[t][1]._open)&&(i[t][1].end.offset-i[t][1].start.offset)%3&&!((i[n][1].end.offset-i[n][1].start.offset+i[t][1].end.offset-i[t][1].start.offset)%3))continue;l=i[n][1].end.offset-i[n][1].start.offset>1&&i[t][1].end.offset-i[t][1].start.offset>1?2:1;const h=Object.assign({},i[n][1].end),d=Object.assign({},i[t][1].start);jH(h,-l),jH(d,l),a={type:l>1?"strongSequence":"emphasisSequence",start:h,end:Object.assign({},i[n][1].end)},o={type:l>1?"strongSequence":"emphasisSequence",start:Object.assign({},i[t][1].start),end:d},r={type:l>1?"strongText":"emphasisText",start:Object.assign({},i[n][1].end),end:Object.assign({},i[t][1].start)},s={type:l>1?"strong":"emphasis",start:Object.assign({},a.start),end:Object.assign({},o.end)},i[n][1].end=Object.assign({},a.start),i[t][1].start=Object.assign({},o.end),c=[],i[n][1].end.offset-i[n][1].start.offset&&(c=no(c,[["enter",i[n][1],e],["exit",i[n][1],e]])),c=no(c,[["enter",s,e],["enter",a,e],["exit",a,e],["enter",r,e]]),c=no(c,xP(e.parser.constructs.insideSpan.null,i.slice(n+1,t),e)),c=no(c,[["exit",r,e],["enter",o,e],["exit",o,e],["exit",s,e]]),i[t][1].end.offset-i[t][1].start.offset?(u=2,c=no(c,[["enter",i[t][1],e],["exit",i[t][1],e]])):u=0,xo(i,n-1,t-n+3,c),t=n+c.length-u-2;break}}for(t=-1;++t<i.length;)i[t][1].type==="attentionSequence"&&(i[t][1].type="data");return i}function s6e(i,e){const t=this.parser.constructs.attentionMarkers.null,n=this.previous,s=yA(n);let r;return a;function a(l){return r=l,i.enter("attentionSequence"),o(l)}function o(l){if(l===r)return i.consume(l),o;const c=i.exit("attentionSequence"),u=yA(l),h=!u||u===2&&s||t.includes(l),d=!s||s===2&&u||t.includes(n);return c._open=!!(r===42?h:h&&(s||!d)),c._close=!!(r===42?d:d&&(u||!h)),e(l)}}function jH(i,e){i.column+=e,i.offset+=e,i._bufferIndex+=e}const r6e={name:"autolink",tokenize:a6e};function a6e(i,e,t){let n=0;return s;function s(p){return i.enter("autolink"),i.enter("autolinkMarker"),i.consume(p),i.exit("autolinkMarker"),i.enter("autolinkProtocol"),r}function r(p){return Zs(p)?(i.consume(p),a):p===64?t(p):c(p)}function a(p){return p===43||p===45||p===46||Qs(p)?(n=1,o(p)):c(p)}function o(p){return p===58?(i.consume(p),n=0,l):(p===43||p===45||p===46||Qs(p))&&n++<32?(i.consume(p),o):(n=0,c(p))}function l(p){return p===62?(i.exit("autolinkProtocol"),i.enter("autolinkMarker"),i.consume(p),i.exit("autolinkMarker"),i.exit("autolink"),e):p===null||p===32||p===60||gA(p)?t(p):(i.consume(p),l)}function c(p){return p===64?(i.consume(p),u):Oze(p)?(i.consume(p),c):t(p)}function u(p){return Qs(p)?h(p):t(p)}function h(p){return p===46?(i.consume(p),n=0,u):p===62?(i.exit("autolinkProtocol").type="autolinkEmail",i.enter("autolinkMarker"),i.consume(p),i.exit("autolinkMarker"),i.exit("autolink"),e):d(p)}function d(p){if((p===45||Qs(p))&&n++<63){const f=p===45?d:h;return i.consume(p),f}return t(p)}}const x0={tokenize:o6e,partial:!0};function o6e(i,e,t){return n;function n(r){return St(r)?Bt(i,s,"linePrefix")(r):s(r)}function s(r){return r===null||ze(r)?e(r):t(r)}}const vie={name:"blockQuote",tokenize:l6e,continuation:{tokenize:c6e},exit:u6e};function l6e(i,e,t){const n=this;return s;function s(a){if(a===62){const o=n.containerState;return o.open||(i.enter("blockQuote",{_container:!0}),o.open=!0),i.enter("blockQuotePrefix"),i.enter("blockQuoteMarker"),i.consume(a),i.exit("blockQuoteMarker"),r}return t(a)}function r(a){return St(a)?(i.enter("blockQuotePrefixWhitespace"),i.consume(a),i.exit("blockQuotePrefixWhitespace"),i.exit("blockQuotePrefix"),e):(i.exit("blockQuotePrefix"),e(a))}}function c6e(i,e,t){const n=this;return s;function s(a){return St(a)?Bt(i,r,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):r(a)}function r(a){return i.attempt(vie,e,t)(a)}}function u6e(i){i.exit("blockQuote")}const bie={name:"characterEscape",tokenize:h6e};function h6e(i,e,t){return n;function n(r){return i.enter("characterEscape"),i.enter("escapeMarker"),i.consume(r),i.exit("escapeMarker"),s}function s(r){return Ize(r)?(i.enter("characterEscapeValue"),i.consume(r),i.exit("characterEscapeValue"),i.exit("characterEscape"),e):t(r)}}const xie={name:"characterReference",tokenize:d6e};function d6e(i,e,t){const n=this;let s=0,r,a;return o;function o(h){return i.enter("characterReference"),i.enter("characterReferenceMarker"),i.consume(h),i.exit("characterReferenceMarker"),l}function l(h){return h===35?(i.enter("characterReferenceMarkerNumeric"),i.consume(h),i.exit("characterReferenceMarkerNumeric"),c):(i.enter("characterReferenceValue"),r=31,a=Qs,u(h))}function c(h){return h===88||h===120?(i.enter("characterReferenceMarkerHexadecimal"),i.consume(h),i.exit("characterReferenceMarkerHexadecimal"),i.enter("characterReferenceValue"),r=6,a=Mze,u):(i.enter("characterReferenceValue"),r=7,a=NL,u(h))}function u(h){if(h===59&&s){const d=i.exit("characterReferenceValue");return a===Qs&&!Mb(n.sliceSerialize(d))?t(h):(i.enter("characterReferenceMarker"),i.consume(h),i.exit("characterReferenceMarker"),i.exit("characterReference"),e)}return a(h)&&s++<r?(i.consume(h),u):t(h)}}const NH={tokenize:f6e,partial:!0},$H={name:"codeFenced",tokenize:p6e,concrete:!0};function p6e(i,e,t){const n=this,s={tokenize:C,partial:!0};let r=0,a=0,o;return l;function l(w){return c(w)}function c(w){const A=n.events[n.events.length-1];return r=A&&A[1].type==="linePrefix"?A[2].sliceSerialize(A[1],!0).length:0,o=w,i.enter("codeFenced"),i.enter("codeFencedFence"),i.enter("codeFencedFenceSequence"),u(w)}function u(w){return w===o?(a++,i.consume(w),u):a<3?t(w):(i.exit("codeFencedFenceSequence"),St(w)?Bt(i,h,"whitespace")(w):h(w))}function h(w){return w===null||ze(w)?(i.exit("codeFencedFence"),n.interrupt?e(w):i.check(NH,g,S)(w)):(i.enter("codeFencedFenceInfo"),i.enter("chunkString",{contentType:"string"}),d(w))}function d(w){return w===null||ze(w)?(i.exit("chunkString"),i.exit("codeFencedFenceInfo"),h(w)):St(w)?(i.exit("chunkString"),i.exit("codeFencedFenceInfo"),Bt(i,p,"whitespace")(w)):w===96&&w===o?t(w):(i.consume(w),d)}function p(w){return w===null||ze(w)?h(w):(i.enter("codeFencedFenceMeta"),i.enter("chunkString",{contentType:"string"}),f(w))}function f(w){return w===null||ze(w)?(i.exit("chunkString"),i.exit("codeFencedFenceMeta"),h(w)):w===96&&w===o?t(w):(i.consume(w),f)}function g(w){return i.attempt(s,S,m)(w)}function m(w){return i.enter("lineEnding"),i.consume(w),i.exit("lineEnding"),y}function y(w){return r>0&&St(w)?Bt(i,b,"linePrefix",r+1)(w):b(w)}function b(w){return w===null||ze(w)?i.check(NH,g,S)(w):(i.enter("codeFlowValue"),x(w))}function x(w){return w===null||ze(w)?(i.exit("codeFlowValue"),b(w)):(i.consume(w),x)}function S(w){return i.exit("codeFenced"),e(w)}function C(w,A,T){let E=0;return P;function P(I){return w.enter("lineEnding"),w.consume(I),w.exit("lineEnding"),O}function O(I){return w.enter("codeFencedFence"),St(I)?Bt(w,M,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):M(I)}function M(I){return I===o?(w.enter("codeFencedFenceSequence"),R(I)):T(I)}function R(I){return I===o?(E++,w.consume(I),R):E>=a?(w.exit("codeFencedFenceSequence"),St(I)?Bt(w,j,"whitespace")(I):j(I)):T(I)}function j(I){return I===null||ze(I)?(w.exit("codeFencedFence"),A(I)):T(I)}}}function f6e(i,e,t){const n=this;return s;function s(a){return a===null?t(a):(i.enter("lineEnding"),i.consume(a),i.exit("lineEnding"),r)}function r(a){return n.parser.lazy[n.now().line]?t(a):e(a)}}const FM={name:"codeIndented",tokenize:m6e},g6e={tokenize:y6e,partial:!0};function m6e(i,e,t){const n=this;return s;function s(c){return i.enter("codeIndented"),Bt(i,r,"linePrefix",5)(c)}function r(c){const u=n.events[n.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?a(c):t(c)}function a(c){return c===null?l(c):ze(c)?i.attempt(g6e,a,l)(c):(i.enter("codeFlowValue"),o(c))}function o(c){return c===null||ze(c)?(i.exit("codeFlowValue"),a(c)):(i.consume(c),o)}function l(c){return i.exit("codeIndented"),e(c)}}function y6e(i,e,t){const n=this;return s;function s(a){return n.parser.lazy[n.now().line]?t(a):ze(a)?(i.enter("lineEnding"),i.consume(a),i.exit("lineEnding"),s):Bt(i,r,"linePrefix",5)(a)}function r(a){const o=n.events[n.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(a):ze(a)?s(a):t(a)}}const _6e={name:"codeText",tokenize:x6e,resolve:v6e,previous:b6e};function v6e(i){let e=i.length-4,t=3,n,s;if((i[t][1].type==="lineEnding"||i[t][1].type==="space")&&(i[e][1].type==="lineEnding"||i[e][1].type==="space")){for(n=t;++n<e;)if(i[n][1].type==="codeTextData"){i[t][1].type="codeTextPadding",i[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(n=t-1,e++;++n<=e;)s===void 0?n!==e&&i[n][1].type!=="lineEnding"&&(s=n):(n===e||i[n][1].type==="lineEnding")&&(i[s][1].type="codeTextData",n!==s+2&&(i[s][1].end=i[n-1][1].end,i.splice(s+2,n-s-2),e-=n-s-2,n=s+2),s=void 0);return i}function b6e(i){return i!==96||this.events[this.events.length-1][1].type==="characterEscape"}function x6e(i,e,t){let n=0,s,r;return a;function a(h){return i.enter("codeText"),i.enter("codeTextSequence"),o(h)}function o(h){return h===96?(i.consume(h),n++,o):(i.exit("codeTextSequence"),l(h))}function l(h){return h===null?t(h):h===32?(i.enter("space"),i.consume(h),i.exit("space"),l):h===96?(r=i.enter("codeTextSequence"),s=0,u(h)):ze(h)?(i.enter("lineEnding"),i.consume(h),i.exit("lineEnding"),l):(i.enter("codeTextData"),c(h))}function c(h){return h===null||h===32||h===96||ze(h)?(i.exit("codeTextData"),l(h)):(i.consume(h),c)}function u(h){return h===96?(i.consume(h),s++,u):s===n?(i.exit("codeTextSequence"),i.exit("codeText"),e(h)):(r.type="codeTextData",c(h))}}class S6e{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=t??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const s=t||0;this.setCursor(Math.trunc(e));const r=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return n&&r_(this.left,n),r.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),r_(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),r_(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);r_(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);r_(this.left,t.reverse())}}}function r_(i,e){let t=0;if(e.length<1e4)i.push(...e);else for(;t<e.length;)i.push(...e.slice(t,t+1e4)),t+=1e4}function Sie(i){const e={};let t=-1,n,s,r,a,o,l,c;const u=new S6e(i);for(;++t<u.length;){for(;t in e;)t=e[t];if(n=u.get(t),t&&n[1].type==="chunkFlow"&&u.get(t-1)[1].type==="listItemPrefix"&&(l=n[1]._tokenizer.events,r=0,r<l.length&&l[r][1].type==="lineEndingBlank"&&(r+=2),r<l.length&&l[r][1].type==="content"))for(;++r<l.length&&l[r][1].type!=="content";)l[r][1].type==="chunkText"&&(l[r][1]._isInFirstContentOfListItem=!0,r++);if(n[0]==="enter")n[1].contentType&&(Object.assign(e,C6e(u,t)),t=e[t],c=!0);else if(n[1]._container){for(r=t,s=void 0;r--&&(a=u.get(r),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank");)a[0]==="enter"&&(s&&(u.get(s)[1].type="lineEndingBlank"),a[1].type="lineEnding",s=r);s&&(n[1].end=Object.assign({},u.get(s)[1].start),o=u.slice(s,t),o.unshift(n),u.splice(s,t-s+1,o))}}return xo(i,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function C6e(i,e){const t=i.get(e)[1],n=i.get(e)[2];let s=e-1;const r=[],a=t._tokenizer||n.parser[t.contentType](t.start),o=a.events,l=[],c={};let u,h,d=-1,p=t,f=0,g=0;const m=[g];for(;p;){for(;i.get(++s)[1]!==p;);r.push(s),p._tokenizer||(u=n.sliceStream(p),p.next||u.push(null),h&&a.defineSkip(p.start),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(u),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),h=p,p=p.next}for(p=t;++d<o.length;)o[d][0]==="exit"&&o[d-1][0]==="enter"&&o[d][1].type===o[d-1][1].type&&o[d][1].start.line!==o[d][1].end.line&&(g=d+1,m.push(g),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(a.events=[],p?(p._tokenizer=void 0,p.previous=void 0):m.pop(),d=m.length;d--;){const y=o.slice(m[d],m[d+1]),b=r.pop();l.push([b,b+y.length-1]),i.splice(b,2,y)}for(l.reverse(),d=-1;++d<l.length;)c[f+l[d][0]]=f+l[d][1],f+=l[d][1]-l[d][0]-1;return c}const w6e={tokenize:T6e,resolve:k6e},A6e={tokenize:E6e,partial:!0};function k6e(i){return Sie(i),i}function T6e(i,e){let t;return n;function n(o){return i.enter("content"),t=i.enter("chunkContent",{contentType:"content"}),s(o)}function s(o){return o===null?r(o):ze(o)?i.check(A6e,a,r)(o):(i.consume(o),s)}function r(o){return i.exit("chunkContent"),i.exit("content"),e(o)}function a(o){return i.consume(o),i.exit("chunkContent"),t.next=i.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,s}}function E6e(i,e,t){const n=this;return s;function s(a){return i.exit("chunkContent"),i.enter("lineEnding"),i.consume(a),i.exit("lineEnding"),Bt(i,r,"linePrefix")}function r(a){if(a===null||ze(a))return t(a);const o=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(a):i.interrupt(n.parser.constructs.flow,t,e)(a)}}function Cie(i,e,t,n,s,r,a,o,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return h;function h(y){return y===60?(i.enter(n),i.enter(s),i.enter(r),i.consume(y),i.exit(r),d):y===null||y===32||y===41||gA(y)?t(y):(i.enter(n),i.enter(a),i.enter(o),i.enter("chunkString",{contentType:"string"}),g(y))}function d(y){return y===62?(i.enter(r),i.consume(y),i.exit(r),i.exit(s),i.exit(n),e):(i.enter(o),i.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===62?(i.exit("chunkString"),i.exit(o),d(y)):y===null||y===60||ze(y)?t(y):(i.consume(y),y===92?f:p)}function f(y){return y===60||y===62||y===92?(i.consume(y),p):p(y)}function g(y){return!u&&(y===null||y===41||ei(y))?(i.exit("chunkString"),i.exit(o),i.exit(a),i.exit(n),e(y)):u<c&&y===40?(i.consume(y),u++,g):y===41?(i.consume(y),u--,g):y===null||y===32||y===40||gA(y)?t(y):(i.consume(y),y===92?m:g)}function m(y){return y===40||y===41||y===92?(i.consume(y),g):g(y)}}function wie(i,e,t,n,s,r){const a=this;let o=0,l;return c;function c(p){return i.enter(n),i.enter(s),i.consume(p),i.exit(s),i.enter(r),u}function u(p){return o>999||p===null||p===91||p===93&&!l||p===94&&!o&&"_hiddenFootnoteSupport"in a.parser.constructs?t(p):p===93?(i.exit(r),i.enter(s),i.consume(p),i.exit(s),i.exit(n),e):ze(p)?(i.enter("lineEnding"),i.consume(p),i.exit("lineEnding"),u):(i.enter("chunkString",{contentType:"string"}),h(p))}function h(p){return p===null||p===91||p===93||ze(p)||o++>999?(i.exit("chunkString"),u(p)):(i.consume(p),l||(l=!St(p)),p===92?d:h)}function d(p){return p===91||p===92||p===93?(i.consume(p),o++,h):h(p)}}function Aie(i,e,t,n,s,r){let a;return o;function o(d){return d===34||d===39||d===40?(i.enter(n),i.enter(s),i.consume(d),i.exit(s),a=d===40?41:d,l):t(d)}function l(d){return d===a?(i.enter(s),i.consume(d),i.exit(s),i.exit(n),e):(i.enter(r),c(d))}function c(d){return d===a?(i.exit(r),l(a)):d===null?t(d):ze(d)?(i.enter("lineEnding"),i.consume(d),i.exit("lineEnding"),Bt(i,c,"linePrefix")):(i.enter("chunkString",{contentType:"string"}),u(d))}function u(d){return d===a||d===null||ze(d)?(i.exit("chunkString"),c(d)):(i.consume(d),d===92?h:u)}function h(d){return d===a||d===92?(i.consume(d),u):u(d)}}function rv(i,e){let t;return n;function n(s){return ze(s)?(i.enter("lineEnding"),i.consume(s),i.exit("lineEnding"),t=!0,n):St(s)?Bt(i,n,t?"linePrefix":"lineSuffix")(s):e(s)}}function _l(i){return i.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const P6e={name:"definition",tokenize:M6e},O6e={tokenize:I6e,partial:!0};function M6e(i,e,t){const n=this;let s;return r;function r(p){return i.enter("definition"),a(p)}function a(p){return wie.call(n,i,o,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function o(p){return s=_l(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),p===58?(i.enter("definitionMarker"),i.consume(p),i.exit("definitionMarker"),l):t(p)}function l(p){return ei(p)?rv(i,c)(p):c(p)}function c(p){return Cie(i,u,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function u(p){return i.attempt(O6e,h,h)(p)}function h(p){return St(p)?Bt(i,d,"whitespace")(p):d(p)}function d(p){return p===null||ze(p)?(i.exit("definition"),n.parser.defined.push(s),e(p)):t(p)}}function I6e(i,e,t){return n;function n(o){return ei(o)?rv(i,s)(o):t(o)}function s(o){return Aie(i,r,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function r(o){return St(o)?Bt(i,a,"whitespace")(o):a(o)}function a(o){return o===null||ze(o)?e(o):t(o)}}const R6e={name:"hardBreakEscape",tokenize:L6e};function L6e(i,e,t){return n;function n(r){return i.enter("hardBreakEscape"),i.consume(r),s}function s(r){return ze(r)?(i.exit("hardBreakEscape"),e(r)):t(r)}}const D6e={name:"headingAtx",tokenize:B6e,resolve:F6e};function F6e(i,e){let t=i.length-2,n=3,s,r;return i[n][1].type==="whitespace"&&(n+=2),t-2>n&&i[t][1].type==="whitespace"&&(t-=2),i[t][1].type==="atxHeadingSequence"&&(n===t-1||t-4>n&&i[t-2][1].type==="whitespace")&&(t-=n+1===t?2:4),t>n&&(s={type:"atxHeadingText",start:i[n][1].start,end:i[t][1].end},r={type:"chunkText",start:i[n][1].start,end:i[t][1].end,contentType:"text"},xo(i,n,t-n+1,[["enter",s,e],["enter",r,e],["exit",r,e],["exit",s,e]])),i}function B6e(i,e,t){let n=0;return s;function s(u){return i.enter("atxHeading"),r(u)}function r(u){return i.enter("atxHeadingSequence"),a(u)}function a(u){return u===35&&n++<6?(i.consume(u),a):u===null||ei(u)?(i.exit("atxHeadingSequence"),o(u)):t(u)}function o(u){return u===35?(i.enter("atxHeadingSequence"),l(u)):u===null||ze(u)?(i.exit("atxHeading"),e(u)):St(u)?Bt(i,o,"whitespace")(u):(i.enter("atxHeadingText"),c(u))}function l(u){return u===35?(i.consume(u),l):(i.exit("atxHeadingSequence"),o(u))}function c(u){return u===null||u===35||ei(u)?(i.exit("atxHeadingText"),o(u)):(i.consume(u),c)}}const j6e=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],zH=["pre","script","style","textarea"],N6e={name:"htmlFlow",tokenize:V6e,resolveTo:H6e,concrete:!0},$6e={tokenize:W6e,partial:!0},z6e={tokenize:U6e,partial:!0};function H6e(i){let e=i.length;for(;e--&&!(i[e][0]==="enter"&&i[e][1].type==="htmlFlow"););return e>1&&i[e-2][1].type==="linePrefix"&&(i[e][1].start=i[e-2][1].start,i[e+1][1].start=i[e-2][1].start,i.splice(e-2,2)),i}function V6e(i,e,t){const n=this;let s,r,a,o,l;return c;function c(W){return u(W)}function u(W){return i.enter("htmlFlow"),i.enter("htmlFlowData"),i.consume(W),h}function h(W){return W===33?(i.consume(W),d):W===47?(i.consume(W),r=!0,g):W===63?(i.consume(W),s=3,n.interrupt?e:L):Zs(W)?(i.consume(W),a=String.fromCharCode(W),m):t(W)}function d(W){return W===45?(i.consume(W),s=2,p):W===91?(i.consume(W),s=5,o=0,f):Zs(W)?(i.consume(W),s=4,n.interrupt?e:L):t(W)}function p(W){return W===45?(i.consume(W),n.interrupt?e:L):t(W)}function f(W){const ce="CDATA[";return W===ce.charCodeAt(o++)?(i.consume(W),o===ce.length?n.interrupt?e:M:f):t(W)}function g(W){return Zs(W)?(i.consume(W),a=String.fromCharCode(W),m):t(W)}function m(W){if(W===null||W===47||W===62||ei(W)){const ce=W===47,he=a.toLowerCase();return!ce&&!r&&zH.includes(he)?(s=1,n.interrupt?e(W):M(W)):j6e.includes(a.toLowerCase())?(s=6,ce?(i.consume(W),y):n.interrupt?e(W):M(W)):(s=7,n.interrupt&&!n.parser.lazy[n.now().line]?t(W):r?b(W):x(W))}return W===45||Qs(W)?(i.consume(W),a+=String.fromCharCode(W),m):t(W)}function y(W){return W===62?(i.consume(W),n.interrupt?e:M):t(W)}function b(W){return St(W)?(i.consume(W),b):P(W)}function x(W){return W===47?(i.consume(W),P):W===58||W===95||Zs(W)?(i.consume(W),S):St(W)?(i.consume(W),x):P(W)}function S(W){return W===45||W===46||W===58||W===95||Qs(W)?(i.consume(W),S):C(W)}function C(W){return W===61?(i.consume(W),w):St(W)?(i.consume(W),C):x(W)}function w(W){return W===null||W===60||W===61||W===62||W===96?t(W):W===34||W===39?(i.consume(W),l=W,A):St(W)?(i.consume(W),w):T(W)}function A(W){return W===l?(i.consume(W),l=null,E):W===null||ze(W)?t(W):(i.consume(W),A)}function T(W){return W===null||W===34||W===39||W===47||W===60||W===61||W===62||W===96||ei(W)?C(W):(i.consume(W),T)}function E(W){return W===47||W===62||St(W)?x(W):t(W)}function P(W){return W===62?(i.consume(W),O):t(W)}function O(W){return W===null||ze(W)?M(W):St(W)?(i.consume(W),O):t(W)}function M(W){return W===45&&s===2?(i.consume(W),D):W===60&&s===1?(i.consume(W),z):W===62&&s===4?(i.consume(W),Y):W===63&&s===3?(i.consume(W),L):W===93&&s===5?(i.consume(W),V):ze(W)&&(s===6||s===7)?(i.exit("htmlFlowData"),i.check($6e,ae,R)(W)):W===null||ze(W)?(i.exit("htmlFlowData"),R(W)):(i.consume(W),M)}function R(W){return i.check(z6e,j,ae)(W)}function j(W){return i.enter("lineEnding"),i.consume(W),i.exit("lineEnding"),I}function I(W){return W===null||ze(W)?R(W):(i.enter("htmlFlowData"),M(W))}function D(W){return W===45?(i.consume(W),L):M(W)}function z(W){return W===47?(i.consume(W),a="",$):M(W)}function $(W){if(W===62){const ce=a.toLowerCase();return zH.includes(ce)?(i.consume(W),Y):M(W)}return Zs(W)&&a.length<8?(i.consume(W),a+=String.fromCharCode(W),$):M(W)}function V(W){return W===93?(i.consume(W),L):M(W)}function L(W){return W===62?(i.consume(W),Y):W===45&&s===2?(i.consume(W),L):M(W)}function Y(W){return W===null||ze(W)?(i.exit("htmlFlowData"),ae(W)):(i.consume(W),Y)}function ae(W){return i.exit("htmlFlow"),e(W)}}function U6e(i,e,t){const n=this;return s;function s(a){return ze(a)?(i.enter("lineEnding"),i.consume(a),i.exit("lineEnding"),r):t(a)}function r(a){return n.parser.lazy[n.now().line]?t(a):e(a)}}function W6e(i,e,t){return n;function n(s){return i.enter("lineEnding"),i.consume(s),i.exit("lineEnding"),i.attempt(x0,e,t)}}const G6e={name:"htmlText",tokenize:K6e};function K6e(i,e,t){const n=this;let s,r,a;return o;function o(L){return i.enter("htmlText"),i.enter("htmlTextData"),i.consume(L),l}function l(L){return L===33?(i.consume(L),c):L===47?(i.consume(L),C):L===63?(i.consume(L),x):Zs(L)?(i.consume(L),T):t(L)}function c(L){return L===45?(i.consume(L),u):L===91?(i.consume(L),r=0,f):Zs(L)?(i.consume(L),b):t(L)}function u(L){return L===45?(i.consume(L),p):t(L)}function h(L){return L===null?t(L):L===45?(i.consume(L),d):ze(L)?(a=h,z(L)):(i.consume(L),h)}function d(L){return L===45?(i.consume(L),p):h(L)}function p(L){return L===62?D(L):L===45?d(L):h(L)}function f(L){const Y="CDATA[";return L===Y.charCodeAt(r++)?(i.consume(L),r===Y.length?g:f):t(L)}function g(L){return L===null?t(L):L===93?(i.consume(L),m):ze(L)?(a=g,z(L)):(i.consume(L),g)}function m(L){return L===93?(i.consume(L),y):g(L)}function y(L){return L===62?D(L):L===93?(i.consume(L),y):g(L)}function b(L){return L===null||L===62?D(L):ze(L)?(a=b,z(L)):(i.consume(L),b)}function x(L){return L===null?t(L):L===63?(i.consume(L),S):ze(L)?(a=x,z(L)):(i.consume(L),x)}function S(L){return L===62?D(L):x(L)}function C(L){return Zs(L)?(i.consume(L),w):t(L)}function w(L){return L===45||Qs(L)?(i.consume(L),w):A(L)}function A(L){return ze(L)?(a=A,z(L)):St(L)?(i.consume(L),A):D(L)}function T(L){return L===45||Qs(L)?(i.consume(L),T):L===47||L===62||ei(L)?E(L):t(L)}function E(L){return L===47?(i.consume(L),D):L===58||L===95||Zs(L)?(i.consume(L),P):ze(L)?(a=E,z(L)):St(L)?(i.consume(L),E):D(L)}function P(L){return L===45||L===46||L===58||L===95||Qs(L)?(i.consume(L),P):O(L)}function O(L){return L===61?(i.consume(L),M):ze(L)?(a=O,z(L)):St(L)?(i.consume(L),O):E(L)}function M(L){return L===null||L===60||L===61||L===62||L===96?t(L):L===34||L===39?(i.consume(L),s=L,R):ze(L)?(a=M,z(L)):St(L)?(i.consume(L),M):(i.consume(L),j)}function R(L){return L===s?(i.consume(L),s=void 0,I):L===null?t(L):ze(L)?(a=R,z(L)):(i.consume(L),R)}function j(L){return L===null||L===34||L===39||L===60||L===61||L===96?t(L):L===47||L===62||ei(L)?E(L):(i.consume(L),j)}function I(L){return L===47||L===62||ei(L)?E(L):t(L)}function D(L){return L===62?(i.consume(L),i.exit("htmlTextData"),i.exit("htmlText"),e):t(L)}function z(L){return i.exit("htmlTextData"),i.enter("lineEnding"),i.consume(L),i.exit("lineEnding"),$}function $(L){return St(L)?Bt(i,V,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):V(L)}function V(L){return i.enter("htmlTextData"),a(L)}}const MN={name:"labelEnd",tokenize:Q6e,resolveTo:J6e,resolveAll:Z6e},X6e={tokenize:e9e},Y6e={tokenize:t9e},q6e={tokenize:i9e};function Z6e(i){let e=-1;for(;++e<i.length;){const t=i[e][1];(t.type==="labelImage"||t.type==="labelLink"||t.type==="labelEnd")&&(i.splice(e+1,t.type==="labelImage"?4:2),t.type="data",e++)}return i}function J6e(i,e){let t=i.length,n=0,s,r,a,o;for(;t--;)if(s=i[t][1],r){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;i[t][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(a){if(i[t][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(r=t,s.type!=="labelLink")){n=2;break}}else s.type==="labelEnd"&&(a=t);const l={type:i[r][1].type==="labelLink"?"link":"image",start:Object.assign({},i[r][1].start),end:Object.assign({},i[i.length-1][1].end)},c={type:"label",start:Object.assign({},i[r][1].start),end:Object.assign({},i[a][1].end)},u={type:"labelText",start:Object.assign({},i[r+n+2][1].end),end:Object.assign({},i[a-2][1].start)};return o=[["enter",l,e],["enter",c,e]],o=no(o,i.slice(r+1,r+n+3)),o=no(o,[["enter",u,e]]),o=no(o,xP(e.parser.constructs.insideSpan.null,i.slice(r+n+4,a-3),e)),o=no(o,[["exit",u,e],i[a-2],i[a-1],["exit",c,e]]),o=no(o,i.slice(a+1)),o=no(o,[["exit",l,e]]),xo(i,r,i.length,o),i}function Q6e(i,e,t){const n=this;let s=n.events.length,r,a;for(;s--;)if((n.events[s][1].type==="labelImage"||n.events[s][1].type==="labelLink")&&!n.events[s][1]._balanced){r=n.events[s][1];break}return o;function o(d){return r?r._inactive?h(d):(a=n.parser.defined.includes(_l(n.sliceSerialize({start:r.end,end:n.now()}))),i.enter("labelEnd"),i.enter("labelMarker"),i.consume(d),i.exit("labelMarker"),i.exit("labelEnd"),l):t(d)}function l(d){return d===40?i.attempt(X6e,u,a?u:h)(d):d===91?i.attempt(Y6e,u,a?c:h)(d):a?u(d):h(d)}function c(d){return i.attempt(q6e,u,h)(d)}function u(d){return e(d)}function h(d){return r._balanced=!0,t(d)}}function e9e(i,e,t){return n;function n(h){return i.enter("resource"),i.enter("resourceMarker"),i.consume(h),i.exit("resourceMarker"),s}function s(h){return ei(h)?rv(i,r)(h):r(h)}function r(h){return h===41?u(h):Cie(i,a,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function a(h){return ei(h)?rv(i,l)(h):u(h)}function o(h){return t(h)}function l(h){return h===34||h===39||h===40?Aie(i,c,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function c(h){return ei(h)?rv(i,u)(h):u(h)}function u(h){return h===41?(i.enter("resourceMarker"),i.consume(h),i.exit("resourceMarker"),i.exit("resource"),e):t(h)}}function t9e(i,e,t){const n=this;return s;function s(o){return wie.call(n,i,r,a,"reference","referenceMarker","referenceString")(o)}function r(o){return n.parser.defined.includes(_l(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?e(o):t(o)}function a(o){return t(o)}}function i9e(i,e,t){return n;function n(r){return i.enter("reference"),i.enter("referenceMarker"),i.consume(r),i.exit("referenceMarker"),s}function s(r){return r===93?(i.enter("referenceMarker"),i.consume(r),i.exit("referenceMarker"),i.exit("reference"),e):t(r)}}const n9e={name:"labelStartImage",tokenize:s9e,resolveAll:MN.resolveAll};function s9e(i,e,t){const n=this;return s;function s(o){return i.enter("labelImage"),i.enter("labelImageMarker"),i.consume(o),i.exit("labelImageMarker"),r}function r(o){return o===91?(i.enter("labelMarker"),i.consume(o),i.exit("labelMarker"),i.exit("labelImage"),a):t(o)}function a(o){return o===94&&"_hiddenFootnoteSupport"in n.parser.constructs?t(o):e(o)}}const r9e={name:"labelStartLink",tokenize:a9e,resolveAll:MN.resolveAll};function a9e(i,e,t){const n=this;return s;function s(a){return i.enter("labelLink"),i.enter("labelMarker"),i.consume(a),i.exit("labelMarker"),i.exit("labelLink"),r}function r(a){return a===94&&"_hiddenFootnoteSupport"in n.parser.constructs?t(a):e(a)}}const BM={name:"lineEnding",tokenize:o9e};function o9e(i,e){return t;function t(n){return i.enter("lineEnding"),i.consume(n),i.exit("lineEnding"),Bt(i,e,"linePrefix")}}const JC={name:"thematicBreak",tokenize:l9e};function l9e(i,e,t){let n=0,s;return r;function r(c){return i.enter("thematicBreak"),a(c)}function a(c){return s=c,o(c)}function o(c){return c===s?(i.enter("thematicBreakSequence"),l(c)):n>=3&&(c===null||ze(c))?(i.exit("thematicBreak"),e(c)):t(c)}function l(c){return c===s?(i.consume(c),n++,l):(i.exit("thematicBreakSequence"),St(c)?Bt(i,o,"whitespace")(c):o(c))}}const Lr={name:"list",tokenize:h9e,continuation:{tokenize:d9e},exit:f9e},c9e={tokenize:g9e,partial:!0},u9e={tokenize:p9e,partial:!0};function h9e(i,e,t){const n=this,s=n.events[n.events.length-1];let r=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,a=0;return o;function o(p){const f=n.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(f==="listUnordered"?!n.containerState.marker||p===n.containerState.marker:NL(p)){if(n.containerState.type||(n.containerState.type=f,i.enter(f,{_container:!0})),f==="listUnordered")return i.enter("listItemPrefix"),p===42||p===45?i.check(JC,t,c)(p):c(p);if(!n.interrupt||p===49)return i.enter("listItemPrefix"),i.enter("listItemValue"),l(p)}return t(p)}function l(p){return NL(p)&&++a<10?(i.consume(p),l):(!n.interrupt||a<2)&&(n.containerState.marker?p===n.containerState.marker:p===41||p===46)?(i.exit("listItemValue"),c(p)):t(p)}function c(p){return i.enter("listItemMarker"),i.consume(p),i.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||p,i.check(x0,n.interrupt?t:u,i.attempt(c9e,d,h))}function u(p){return n.containerState.initialBlankLine=!0,r++,d(p)}function h(p){return St(p)?(i.enter("listItemPrefixWhitespace"),i.consume(p),i.exit("listItemPrefixWhitespace"),d):t(p)}function d(p){return n.containerState.size=r+n.sliceSerialize(i.exit("listItemPrefix"),!0).length,e(p)}}function d9e(i,e,t){const n=this;return n.containerState._closeFlow=void 0,i.check(x0,s,r);function s(o){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,Bt(i,e,"listItemIndent",n.containerState.size+1)(o)}function r(o){return n.containerState.furtherBlankLines||!St(o)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,a(o)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,i.attempt(u9e,e,a)(o))}function a(o){return n.containerState._closeFlow=!0,n.interrupt=void 0,Bt(i,i.attempt(Lr,e,t),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function p9e(i,e,t){const n=this;return Bt(i,s,"listItemIndent",n.containerState.size+1);function s(r){const a=n.events[n.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===n.containerState.size?e(r):t(r)}}function f9e(i){i.exit(this.containerState.type)}function g9e(i,e,t){const n=this;return Bt(i,s,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(r){const a=n.events[n.events.length-1];return!St(r)&&a&&a[1].type==="listItemPrefixWhitespace"?e(r):t(r)}}const HH={name:"setextUnderline",tokenize:y9e,resolveTo:m9e};function m9e(i,e){let t=i.length,n,s,r;for(;t--;)if(i[t][0]==="enter"){if(i[t][1].type==="content"){n=t;break}i[t][1].type==="paragraph"&&(s=t)}else i[t][1].type==="content"&&i.splice(t,1),!r&&i[t][1].type==="definition"&&(r=t);const a={type:"setextHeading",start:Object.assign({},i[s][1].start),end:Object.assign({},i[i.length-1][1].end)};return i[s][1].type="setextHeadingText",r?(i.splice(s,0,["enter",a,e]),i.splice(r+1,0,["exit",i[n][1],e]),i[n][1].end=Object.assign({},i[r][1].end)):i[n][1]=a,i.push(["exit",a,e]),i}function y9e(i,e,t){const n=this;let s;return r;function r(c){let u=n.events.length,h;for(;u--;)if(n.events[u][1].type!=="lineEnding"&&n.events[u][1].type!=="linePrefix"&&n.events[u][1].type!=="content"){h=n.events[u][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||h)?(i.enter("setextHeadingLine"),s=c,a(c)):t(c)}function a(c){return i.enter("setextHeadingLineSequence"),o(c)}function o(c){return c===s?(i.consume(c),o):(i.exit("setextHeadingLineSequence"),St(c)?Bt(i,l,"lineSuffix")(c):l(c))}function l(c){return c===null||ze(c)?(i.exit("setextHeadingLine"),e(c)):t(c)}}const _9e={tokenize:x9e,partial:!0},VH="https://github.com/micromark/micromark-extension-mdxjs-esm",v9e=new Set(["ExportAllDeclaration","ExportDefaultDeclaration","ExportNamedDeclaration","ImportDeclaration"]);function b9e(i){const e={tokenize:s,concrete:!0};if(!i||!i.acorn||!i.acorn.parse)throw new Error("Expected an `acorn` instance passed in as `options.acorn`");const t=i.acorn,n=Object.assign({ecmaVersion:2024,sourceType:"module"},i.acornOptions,{locations:!0});return{flow:{101:e,105:e}};function s(r,a,o){const l=this,c=l.parser.definedModuleSpecifiers||(l.parser.definedModuleSpecifiers=[]),u=this.events.length+1;let h="";return l.interrupt?o:d;function d(b){return l.now().column>1?o(b):(r.enter("mdxjsEsm"),r.enter("mdxjsEsmData"),r.consume(b),h+=String.fromCharCode(b),p)}function p(b){return Zs(b)?(r.consume(b),h+=String.fromCharCode(b),p):(h==="import"||h==="export")&&b===32?(r.consume(b),f):o(b)}function f(b){return b===null||ze(b)?(r.exit("mdxjsEsmData"),g(b)):(r.consume(b),f)}function g(b){return b===null?y(b):ze(b)?r.check(_9e,y,m)(b):(r.enter("mdxjsEsmData"),f(b))}function m(b){return r.enter("lineEnding"),r.consume(b),r.exit("lineEnding"),g}function y(b){const x=mie(l.events.slice(u),{acorn:t,acornOptions:n,tokenTypes:["mdxjsEsmData"],prefix:c.length>0?"var "+c.join(",")+`
`:""});if(x.error){if(b!==null&&x.swallow)return m(b);const C=new fi("Could not parse import/exports with acorn",{cause:x.error,place:{line:x.error.loc.line,column:x.error.loc.column+1,offset:x.error.pos},ruleId:"acorn",source:"micromark-extension-mdxjs-esm"});throw C.url=VH+"#could-not-parse-importexports-with-acorn",C}c.length>0&&x.estree.body.shift();let S=-1;for(;++S<x.estree.body.length;){const C=x.estree.body[S];if(!v9e.has(C.type)){const w=new fi("Unexpected `"+C.type+"` in code: only import/exports are supported",{place:hu(C),ruleId:"non-esm",source:"micromark-extension-mdxjs-esm"});throw w.url=VH+"#unexpected-type-in-code-only-importexports-are-supported",w}if(C.type==="ImportDeclaration"&&!l.interrupt){let w=-1;for(;++w<C.specifiers.length;){const A=C.specifiers[w];c.push(A.local.name)}}}return Object.assign(r.exit("mdxjsEsm"),i.addResult?{estree:x.estree}:void 0),a(b)}}}function x9e(i,e,t){return n;function n(s){return i.enter("lineEndingBlank"),i.consume(s),i.exit("lineEndingBlank"),i.attempt(x0,e,t)}}const UH={}.hasOwnProperty;function IN(i){const e={};let t=-1;for(;++t<i.length;)S9e(e,i[t]);return e}function S9e(i,e){let t;for(t in e){const s=(UH.call(i,t)?i[t]:void 0)||(i[t]={}),r=e[t];let a;if(r)for(a in r){UH.call(s,a)||(s[a]=[]);const o=r[a];C9e(s[a],Array.isArray(o)?o:o?[o]:[])}}}function C9e(i,e){let t=-1;const n=[];for(;++t<e.length;)(e[t].add==="after"?i:n).push(e[t]);xo(i,0,0,n)}function w9e(i){const e=Object.assign({acorn:bn.extend(Pze()),acornOptions:{ecmaVersion:2024,sourceType:"module"},addResult:!0},i);return IN([b9e(e),Gze(e),t6e(e),i6e()])}const A9e={};function k9e(i){const e=this,t=i||A9e,n=e.data(),s=n.micromarkExtensions||(n.micromarkExtensions=[]),r=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),a=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);s.push(w9e(t)),r.push($$e()),a.push(z$e(t))}const T9e={};function RN(i,e){const t=T9e,n=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,s=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return kie(i,n,s)}function kie(i,e,t){if(E9e(i)){if("value"in i)return i.type==="html"&&!t?"":i.value;if(e&&"alt"in i&&i.alt)return i.alt;if("children"in i)return WH(i.children,e,t)}return Array.isArray(i)?WH(i,e,t):""}function WH(i,e,t){const n=[];let s=-1;for(;++s<i.length;)n[s]=kie(i[s],e,t);return n.join("")}function E9e(i){return!!(i&&typeof i=="object")}function Tie(i,e){const t=Number.parseInt(i,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function S0(i){const e=[];let t=-1,n=0,s=0;for(;++t<i.length;){const r=i.charCodeAt(t);let a="";if(r===37&&Qs(i.charCodeAt(t+1))&&Qs(i.charCodeAt(t+2)))s=2;else if(r<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(r))||(a=String.fromCharCode(r));else if(r>55295&&r<57344){const o=i.charCodeAt(t+1);r<56320&&o>56319&&o<57344?(a=String.fromCharCode(r,o),s=1):a=""}else a=String.fromCharCode(r);a&&(e.push(i.slice(n,t),encodeURIComponent(a)),n=t+s+1,a=""),s&&(t+=s,s=0)}return e.join("")+i.slice(n)}const P9e={tokenize:O9e};function O9e(i){const e=i.attempt(this.parser.constructs.contentInitial,n,s);let t;return e;function n(o){if(o===null){i.consume(o);return}return i.enter("lineEnding"),i.consume(o),i.exit("lineEnding"),Bt(i,e,"linePrefix")}function s(o){return i.enter("paragraph"),r(o)}function r(o){const l=i.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=l),t=l,a(o)}function a(o){if(o===null){i.exit("chunkText"),i.exit("paragraph"),i.consume(o);return}return ze(o)?(i.consume(o),i.exit("chunkText"),r):(i.consume(o),a)}}const M9e={tokenize:I9e},GH={tokenize:R9e};function I9e(i){const e=this,t=[];let n=0,s,r,a;return o;function o(x){if(n<t.length){const S=t[n];return e.containerState=S[1],i.attempt(S[0].continuation,l,c)(x)}return c(x)}function l(x){if(n++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&b();const S=e.events.length;let C=S,w;for(;C--;)if(e.events[C][0]==="exit"&&e.events[C][1].type==="chunkFlow"){w=e.events[C][1].end;break}y(n);let A=S;for(;A<e.events.length;)e.events[A][1].end=Object.assign({},w),A++;return xo(e.events,C+1,0,e.events.slice(S)),e.events.length=A,c(x)}return o(x)}function c(x){if(n===t.length){if(!s)return d(x);if(s.currentConstruct&&s.currentConstruct.concrete)return f(x);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},i.check(GH,u,h)(x)}function u(x){return s&&b(),y(n),d(x)}function h(x){return e.parser.lazy[e.now().line]=n!==t.length,a=e.now().offset,f(x)}function d(x){return e.containerState={},i.attempt(GH,p,f)(x)}function p(x){return n++,t.push([e.currentConstruct,e.containerState]),d(x)}function f(x){if(x===null){s&&b(),y(0),i.consume(x);return}return s=s||e.parser.flow(e.now()),i.enter("chunkFlow",{contentType:"flow",previous:r,_tokenizer:s}),g(x)}function g(x){if(x===null){m(i.exit("chunkFlow"),!0),y(0),i.consume(x);return}return ze(x)?(i.consume(x),m(i.exit("chunkFlow")),n=0,e.interrupt=void 0,o):(i.consume(x),g)}function m(x,S){const C=e.sliceStream(x);if(S&&C.push(null),x.previous=r,r&&(r.next=x),r=x,s.defineSkip(x.start),s.write(C),e.parser.lazy[x.start.line]){let w=s.events.length;for(;w--;)if(s.events[w][1].start.offset<a&&(!s.events[w][1].end||s.events[w][1].end.offset>a))return;const A=e.events.length;let T=A,E,P;for(;T--;)if(e.events[T][0]==="exit"&&e.events[T][1].type==="chunkFlow"){if(E){P=e.events[T][1].end;break}E=!0}for(y(n),w=A;w<e.events.length;)e.events[w][1].end=Object.assign({},P),w++;xo(e.events,T+1,0,e.events.slice(A)),e.events.length=w}}function y(x){let S=t.length;for(;S-- >x;){const C=t[S];e.containerState=C[1],C[0].exit.call(e,i)}t.length=x}function b(){s.write([null]),r=void 0,s=void 0,e.containerState._closeFlow=void 0}}function R9e(i,e,t){return Bt(i,i.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const L9e={tokenize:D9e};function D9e(i){const e=this,t=i.attempt(x0,n,i.attempt(this.parser.constructs.flowInitial,s,Bt(i,i.attempt(this.parser.constructs.flow,s,i.attempt(w6e,s)),"linePrefix")));return t;function n(r){if(r===null){i.consume(r);return}return i.enter("lineEndingBlank"),i.consume(r),i.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function s(r){if(r===null){i.consume(r);return}return i.enter("lineEnding"),i.consume(r),i.exit("lineEnding"),e.currentConstruct=void 0,t}}const F9e={resolveAll:Pie()},B9e=Eie("string"),j9e=Eie("text");function Eie(i){return{tokenize:e,resolveAll:Pie(i==="text"?N9e:void 0)};function e(t){const n=this,s=this.parser.constructs[i],r=t.attempt(s,a,o);return a;function a(u){return c(u)?r(u):o(u)}function o(u){if(u===null){t.consume(u);return}return t.enter("data"),t.consume(u),l}function l(u){return c(u)?(t.exit("data"),r(u)):(t.consume(u),l)}function c(u){if(u===null)return!0;const h=s[u];let d=-1;if(h)for(;++d<h.length;){const p=h[d];if(!p.previous||p.previous.call(n,n.previous))return!0}return!1}}}function Pie(i){return e;function e(t,n){let s=-1,r;for(;++s<=t.length;)r===void 0?t[s]&&t[s][1].type==="data"&&(r=s,s++):(!t[s]||t[s][1].type!=="data")&&(s!==r+2&&(t[r][1].end=t[s-1][1].end,t.splice(r+2,s-r-2),s=r+2),r=void 0);return i?i(t,n):t}}function N9e(i,e){let t=0;for(;++t<=i.length;)if((t===i.length||i[t][1].type==="lineEnding")&&i[t-1][1].type==="data"){const n=i[t-1][1],s=e.sliceStream(n);let r=s.length,a=-1,o=0,l;for(;r--;){const c=s[r];if(typeof c=="string"){for(a=c.length;c.charCodeAt(a-1)===32;)o++,a--;if(a)break;a=-1}else if(c===-2)l=!0,o++;else if(c!==-1){r++;break}}if(o){const c={type:t===i.length||l||o<2?"lineSuffix":"hardBreakTrailing",start:{line:n.end.line,column:n.end.column-o,offset:n.end.offset-o,_index:n.start._index+r,_bufferIndex:r?a:n.start._bufferIndex+a},end:Object.assign({},n.end)};n.end=Object.assign({},c.start),n.start.offset===n.end.offset?Object.assign(n,c):(i.splice(t,0,["enter",c,e],["exit",c,e]),t+=2)}t++}return i}function $9e(i,e,t){let n=Object.assign(t?Object.assign({},t):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const s={},r=[];let a=[],o=[];const l={consume:b,enter:x,exit:S,attempt:A(C),check:A(w),interrupt:A(w,{interrupt:!0})},c={previous:null,code:null,containerState:{},events:[],parser:i,sliceStream:p,sliceSerialize:d,now:f,defineSkip:g,write:h};let u=e.tokenize.call(c,l);return e.resolveAll&&r.push(e),c;function h(O){return a=no(a,O),m(),a[a.length-1]!==null?[]:(T(e,0),c.events=xP(r,c.events,c),c.events)}function d(O,M){return H9e(p(O),M)}function p(O){return z9e(a,O)}function f(){const{line:O,column:M,offset:R,_index:j,_bufferIndex:I}=n;return{line:O,column:M,offset:R,_index:j,_bufferIndex:I}}function g(O){s[O.line]=O.column,P()}function m(){let O;for(;n._index<a.length;){const M=a[n._index];if(typeof M=="string")for(O=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===O&&n._bufferIndex<M.length;)y(M.charCodeAt(n._bufferIndex));else y(M)}}function y(O){u=u(O)}function b(O){ze(O)?(n.line++,n.column=1,n.offset+=O===-3?2:1,P()):O!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===a[n._index].length&&(n._bufferIndex=-1,n._index++)),c.previous=O}function x(O,M){const R=M||{};return R.type=O,R.start=f(),c.events.push(["enter",R,c]),o.push(R),R}function S(O){const M=o.pop();return M.end=f(),c.events.push(["exit",M,c]),M}function C(O,M){T(O,M.from)}function w(O,M){M.restore()}function A(O,M){return R;function R(j,I,D){let z,$,V,L;return Array.isArray(j)?ae(j):"tokenize"in j?ae([j]):Y(j);function Y(le){return de;function de(te){const me=te!==null&&le[te],Be=te!==null&&le.null,ve=[...Array.isArray(me)?me:me?[me]:[],...Array.isArray(Be)?Be:Be?[Be]:[]];return ae(ve)(te)}}function ae(le){return z=le,$=0,le.length===0?D:W(le[$])}function W(le){return de;function de(te){return L=E(),V=le,le.partial||(c.currentConstruct=le),le.name&&c.parser.constructs.disable.null.includes(le.name)?he():le.tokenize.call(M?Object.assign(Object.create(c),M):c,l,ce,he)(te)}}function ce(le){return O(V,L),I}function he(le){return L.restore(),++$<z.length?W(z[$]):D}}}function T(O,M){O.resolveAll&&!r.includes(O)&&r.push(O),O.resolve&&xo(c.events,M,c.events.length-M,O.resolve(c.events.slice(M),c)),O.resolveTo&&(c.events=O.resolveTo(c.events,c))}function E(){const O=f(),M=c.previous,R=c.currentConstruct,j=c.events.length,I=Array.from(o);return{restore:D,from:j};function D(){n=O,c.previous=M,c.currentConstruct=R,c.events.length=j,o=I,P()}}function P(){n.line in s&&n.column<2&&(n.column=s[n.line],n.offset+=s[n.line]-1)}}function z9e(i,e){const t=e.start._index,n=e.start._bufferIndex,s=e.end._index,r=e.end._bufferIndex;let a;if(t===s)a=[i[t].slice(n,r)];else{if(a=i.slice(t,s),n>-1){const o=a[0];typeof o=="string"?a[0]=o.slice(n):a.shift()}r>0&&a.push(i[s].slice(0,r))}return a}function H9e(i,e){let t=-1;const n=[];let s;for(;++t<i.length;){const r=i[t];let a;if(typeof r=="string")a=r;else switch(r){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&s)continue;a=" ";break}default:a=String.fromCharCode(r)}s=r===-2,n.push(a)}return n.join("")}const V9e={42:Lr,43:Lr,45:Lr,48:Lr,49:Lr,50:Lr,51:Lr,52:Lr,53:Lr,54:Lr,55:Lr,56:Lr,57:Lr,62:vie},U9e={91:P6e},W9e={[-2]:FM,[-1]:FM,32:FM},G9e={35:D6e,42:JC,45:[HH,JC],60:N6e,61:HH,95:JC,96:$H,126:$H},K9e={38:xie,92:bie},X9e={[-5]:BM,[-4]:BM,[-3]:BM,33:n9e,38:xie,42:$L,60:[r6e,G6e],91:r9e,92:[R6e,bie],93:MN,95:$L,96:_6e},Y9e={null:[$L,F9e]},q9e={null:[42,95]},Z9e={null:[]},J9e=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:q9e,contentInitial:U9e,disable:Z9e,document:V9e,flow:G9e,flowInitial:W9e,insideSpan:Y9e,string:K9e,text:X9e},Symbol.toStringTag,{value:"Module"}));function Q9e(i){const t=IN([J9e,...(i||{}).extensions||[]]),n={defined:[],lazy:{},constructs:t,content:s(P9e),document:s(M9e),flow:s(L9e),string:s(B9e),text:s(j9e)};return n;function s(r){return a;function a(o){return $9e(n,r,o)}}}function eHe(i){for(;!Sie(i););return i}const KH=/[\0\t\n\r]/g;function tHe(){let i=1,e="",t=!0,n;return s;function s(r,a,o){const l=[];let c,u,h,d,p;for(r=e+(typeof r=="string"?r.toString():new TextDecoder(a||void 0).decode(r)),h=0,e="",t&&(r.charCodeAt(0)===65279&&h++,t=void 0);h<r.length;){if(KH.lastIndex=h,c=KH.exec(r),d=c&&c.index!==void 0?c.index:r.length,p=r.charCodeAt(d),!c){e=r.slice(h);break}if(p===10&&h===d&&n)l.push(-3),n=void 0;else switch(n&&(l.push(-5),n=void 0),h<d&&(l.push(r.slice(h,d)),i+=d-h),p){case 0:{l.push(65533),i++;break}case 9:{for(u=Math.ceil(i/4)*4,l.push(-2);i++<u;)l.push(-1);break}case 10:{l.push(-4),i=1;break}default:n=!0,i=1}h=d+1}return o&&(n&&l.push(-5),e&&l.push(e),l.push(null)),l}}const iHe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function nHe(i){return i.replace(iHe,sHe)}function sHe(i,e,t){if(e)return e;if(t.charCodeAt(0)===35){const s=t.charCodeAt(1),r=s===120||s===88;return Tie(t.slice(r?2:1),r?16:10)}return Mb(t)||i}const Oie={}.hasOwnProperty;function rHe(i,e,t){return typeof e!="string"&&(t=e,e=void 0),aHe(t)(eHe(Q9e(t).document().write(tHe()(i,e,!0))))}function aHe(i){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:r(si),autolinkProtocol:E,autolinkEmail:E,atxHeading:r(Ue),blockQuote:r(Be),characterEscape:E,characterReference:E,codeFenced:r(ve),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:r(ve,a),codeText:r(Re,a),codeTextData:E,data:E,codeFlowValue:E,definition:r(Qe),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:r(Lt),hardBreakEscape:r(je),hardBreakTrailing:r(je),htmlFlow:r(ut,a),htmlFlowData:E,htmlText:r(ut,a),htmlTextData:E,image:r(vt),label:a,link:r(si),listItem:r(Ot),listItemValue:d,listOrdered:r(Me,h),listUnordered:r(Me),paragraph:r(Gi),reference:W,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:r(Ue),strong:r(Jn),thematicBreak:r(Fo)},exit:{atxHeading:l(),atxHeadingSequence:C,autolink:l(),autolinkEmail:me,autolinkProtocol:te,blockQuote:l(),characterEscapeValue:P,characterReferenceMarkerHexadecimal:he,characterReferenceMarkerNumeric:he,characterReferenceValue:le,characterReference:de,codeFenced:l(m),codeFencedFence:g,codeFencedFenceInfo:p,codeFencedFenceMeta:f,codeFlowValue:P,codeIndented:l(y),codeText:l(I),codeTextData:P,data:P,definition:l(),definitionDestinationString:S,definitionLabelString:b,definitionTitleString:x,emphasis:l(),hardBreakEscape:l(M),hardBreakTrailing:l(M),htmlFlow:l(R),htmlFlowData:P,htmlText:l(j),htmlTextData:P,image:l(z),label:V,labelText:$,lineEnding:O,link:l(D),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:ce,resourceDestinationString:L,resourceTitleString:Y,resource:ae,setextHeading:l(T),setextHeadingLineSequence:A,setextHeadingText:w,strong:l(),thematicBreak:l()}};Mie(e,(i||{}).mdastExtensions||[]);const t={};return n;function n(fe){let xe={type:"root",children:[]};const G={stack:[xe],tokenStack:[],config:e,enter:o,exit:c,buffer:a,resume:u,data:t},at=[];let Vt=-1;for(;++Vt<fe.length;)if(fe[Vt][1].type==="listOrdered"||fe[Vt][1].type==="listUnordered")if(fe[Vt][0]==="enter")at.push(Vt);else{const Li=at.pop();Vt=s(fe,Li,Vt)}for(Vt=-1;++Vt<fe.length;){const Li=e[fe[Vt][0]];Oie.call(Li,fe[Vt][1].type)&&Li[fe[Vt][1].type].call(Object.assign({sliceSerialize:fe[Vt][2].sliceSerialize},G),fe[Vt][1])}if(G.tokenStack.length>0){const Li=G.tokenStack[G.tokenStack.length-1];(Li[1]||XH).call(G,void 0,Li[0])}for(xe.position={start:nh(fe.length>0?fe[0][1].start:{line:1,column:1,offset:0}),end:nh(fe.length>0?fe[fe.length-2][1].end:{line:1,column:1,offset:0})},Vt=-1;++Vt<e.transforms.length;)xe=e.transforms[Vt](xe)||xe;return xe}function s(fe,xe,G){let at=xe-1,Vt=-1,Li=!1,ln,cn,Or,ja;for(;++at<=G;){const ls=fe[at];switch(ls[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ls[0]==="enter"?Vt++:Vt--,ja=void 0;break}case"lineEndingBlank":{ls[0]==="enter"&&(ln&&!ja&&!Vt&&!Or&&(Or=at),ja=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ja=void 0}if(!Vt&&ls[0]==="enter"&&ls[1].type==="listItemPrefix"||Vt===-1&&ls[0]==="exit"&&(ls[1].type==="listUnordered"||ls[1].type==="listOrdered")){if(ln){let Bo=at;for(cn=void 0;Bo--;){const ia=fe[Bo];if(ia[1].type==="lineEnding"||ia[1].type==="lineEndingBlank"){if(ia[0]==="exit")continue;cn&&(fe[cn][1].type="lineEndingBlank",Li=!0),ia[1].type="lineEnding",cn=Bo}else if(!(ia[1].type==="linePrefix"||ia[1].type==="blockQuotePrefix"||ia[1].type==="blockQuotePrefixWhitespace"||ia[1].type==="blockQuoteMarker"||ia[1].type==="listItemIndent"))break}Or&&(!cn||Or<cn)&&(ln._spread=!0),ln.end=Object.assign({},cn?fe[cn][1].start:ls[1].end),fe.splice(cn||at,0,["exit",ln,ls[2]]),at++,G++}if(ls[1].type==="listItemPrefix"){const Bo={type:"listItem",_spread:!1,start:Object.assign({},ls[1].start),end:void 0};ln=Bo,fe.splice(at,0,["enter",Bo,ls[2]]),at++,G++,Or=void 0,ja=!0}}}return fe[xe][1]._spread=Li,G}function r(fe,xe){return G;function G(at){o.call(this,fe(at),at),xe&&xe.call(this,at)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(fe,xe,G){this.stack[this.stack.length-1].children.push(fe),this.stack.push(fe),this.tokenStack.push([xe,G]),fe.position={start:nh(xe.start),end:void 0}}function l(fe){return xe;function xe(G){fe&&fe.call(this,G),c.call(this,G)}}function c(fe,xe){const G=this.stack.pop(),at=this.tokenStack.pop();if(at)at[0].type!==fe.type&&(xe?xe.call(this,fe,at[0]):(at[1]||XH).call(this,fe,at[0]));else throw new Error("Cannot close `"+fe.type+"` ("+go({start:fe.start,end:fe.end})+"): its not open");G.position.end=nh(fe.end)}function u(){return RN(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function d(fe){if(this.data.expectingFirstListItemValue){const xe=this.stack[this.stack.length-2];xe.start=Number.parseInt(this.sliceSerialize(fe),10),this.data.expectingFirstListItemValue=void 0}}function p(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.lang=fe}function f(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.meta=fe}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function m(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.value=fe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.value=fe.replace(/(\r?\n|\r)$/g,"")}function b(fe){const xe=this.resume(),G=this.stack[this.stack.length-1];G.label=xe,G.identifier=_l(this.sliceSerialize(fe)).toLowerCase()}function x(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.title=fe}function S(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.url=fe}function C(fe){const xe=this.stack[this.stack.length-1];if(!xe.depth){const G=this.sliceSerialize(fe).length;xe.depth=G}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function A(fe){const xe=this.stack[this.stack.length-1];xe.depth=this.sliceSerialize(fe).codePointAt(0)===61?1:2}function T(){this.data.setextHeadingSlurpLineEnding=void 0}function E(fe){const G=this.stack[this.stack.length-1].children;let at=G[G.length-1];(!at||at.type!=="text")&&(at=lt(),at.position={start:nh(fe.start),end:void 0},G.push(at)),this.stack.push(at)}function P(fe){const xe=this.stack.pop();xe.value+=this.sliceSerialize(fe),xe.position.end=nh(fe.end)}function O(fe){const xe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const G=xe.children[xe.children.length-1];G.position.end=nh(fe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(xe.type)&&(E.call(this,fe),P.call(this,fe))}function M(){this.data.atHardBreak=!0}function R(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.value=fe}function j(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.value=fe}function I(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.value=fe}function D(){const fe=this.stack[this.stack.length-1];if(this.data.inReference){const xe=this.data.referenceType||"shortcut";fe.type+="Reference",fe.referenceType=xe,delete fe.url,delete fe.title}else delete fe.identifier,delete fe.label;this.data.referenceType=void 0}function z(){const fe=this.stack[this.stack.length-1];if(this.data.inReference){const xe=this.data.referenceType||"shortcut";fe.type+="Reference",fe.referenceType=xe,delete fe.url,delete fe.title}else delete fe.identifier,delete fe.label;this.data.referenceType=void 0}function $(fe){const xe=this.sliceSerialize(fe),G=this.stack[this.stack.length-2];G.label=nHe(xe),G.identifier=_l(xe).toLowerCase()}function V(){const fe=this.stack[this.stack.length-1],xe=this.resume(),G=this.stack[this.stack.length-1];if(this.data.inReference=!0,G.type==="link"){const at=fe.children;G.children=at}else G.alt=xe}function L(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.url=fe}function Y(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.title=fe}function ae(){this.data.inReference=void 0}function W(){this.data.referenceType="collapsed"}function ce(fe){const xe=this.resume(),G=this.stack[this.stack.length-1];G.label=xe,G.identifier=_l(this.sliceSerialize(fe)).toLowerCase(),this.data.referenceType="full"}function he(fe){this.data.characterReferenceType=fe.type}function le(fe){const xe=this.sliceSerialize(fe),G=this.data.characterReferenceType;let at;G?(at=Tie(xe,G==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):at=Mb(xe);const Vt=this.stack[this.stack.length-1];Vt.value+=at}function de(fe){const xe=this.stack.pop();xe.position.end=nh(fe.end)}function te(fe){P.call(this,fe);const xe=this.stack[this.stack.length-1];xe.url=this.sliceSerialize(fe)}function me(fe){P.call(this,fe);const xe=this.stack[this.stack.length-1];xe.url="mailto:"+this.sliceSerialize(fe)}function Be(){return{type:"blockquote",children:[]}}function ve(){return{type:"code",lang:null,meta:null,value:""}}function Re(){return{type:"inlineCode",value:""}}function Qe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Lt(){return{type:"emphasis",children:[]}}function Ue(){return{type:"heading",depth:0,children:[]}}function je(){return{type:"break"}}function ut(){return{type:"html",value:""}}function vt(){return{type:"image",title:null,url:"",alt:null}}function si(){return{type:"link",title:null,url:"",children:[]}}function Me(fe){return{type:"list",ordered:fe.type==="listOrdered",start:null,spread:fe._spread,children:[]}}function Ot(fe){return{type:"listItem",spread:fe._spread,checked:null,children:[]}}function Gi(){return{type:"paragraph",children:[]}}function Jn(){return{type:"strong",children:[]}}function lt(){return{type:"text",value:""}}function Fo(){return{type:"thematicBreak"}}}function nh(i){return{line:i.line,column:i.column,offset:i.offset}}function Mie(i,e){let t=-1;for(;++t<e.length;){const n=e[t];Array.isArray(n)?Mie(i,n):oHe(i,n)}}function oHe(i,e){let t;for(t in e)if(Oie.call(e,t))switch(t){case"canContainEols":{const n=e[t];n&&i[t].push(...n);break}case"transforms":{const n=e[t];n&&i[t].push(...n);break}case"enter":case"exit":{const n=e[t];n&&Object.assign(i[t],n);break}}}function XH(i,e){throw i?new Error("Cannot close `"+i.type+"` ("+go({start:i.start,end:i.end})+"): a different token (`"+e.type+"`, "+go({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+go({start:e.start,end:e.end})+") is still open")}function lHe(i){const e=this;e.parser=t;function t(n){return rHe(n,{...e.data("settings"),...i,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function cHe(i,e){const t={type:"element",tagName:"blockquote",properties:{},children:i.wrap(i.all(e),!0)};return i.patch(e,t),i.applyData(e,t)}function uHe(i,e){const t={type:"element",tagName:"br",properties:{},children:[]};return i.patch(e,t),[i.applyData(e,t),{type:"text",value:`
`}]}function hHe(i,e){const t=e.value?e.value+`
`:"",n={};e.lang&&(n.className=["language-"+e.lang]);let s={type:"element",tagName:"code",properties:n,children:[{type:"text",value:t}]};return e.meta&&(s.data={meta:e.meta}),i.patch(e,s),s=i.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},i.patch(e,s),s}function dHe(i,e){const t={type:"element",tagName:"del",properties:{},children:i.all(e)};return i.patch(e,t),i.applyData(e,t)}function pHe(i,e){const t={type:"element",tagName:"em",properties:{},children:i.all(e)};return i.patch(e,t),i.applyData(e,t)}function fHe(i,e){const t=typeof i.options.clobberPrefix=="string"?i.options.clobberPrefix:"user-content-",n=String(e.identifier).toUpperCase(),s=S0(n.toLowerCase()),r=i.footnoteOrder.indexOf(n);let a,o=i.footnoteCounts.get(n);o===void 0?(o=0,i.footnoteOrder.push(n),a=i.footnoteOrder.length):a=r+1,o+=1,i.footnoteCounts.set(n,o);const l={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+s,id:t+"fnref-"+s+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};i.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return i.patch(e,c),i.applyData(e,c)}function gHe(i,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:i.all(e)};return i.patch(e,t),i.applyData(e,t)}function mHe(i,e){if(i.options.allowDangerousHtml){const t={type:"raw",value:e.value};return i.patch(e,t),i.applyData(e,t)}}function Iie(i,e){const t=e.referenceType;let n="]";if(t==="collapsed"?n+="[]":t==="full"&&(n+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+n}];const s=i.all(e),r=s[0];r&&r.type==="text"?r.value="["+r.value:s.unshift({type:"text",value:"["});const a=s[s.length-1];return a&&a.type==="text"?a.value+=n:s.push({type:"text",value:n}),s}function yHe(i,e){const t=String(e.identifier).toUpperCase(),n=i.definitionById.get(t);if(!n)return Iie(i,e);const s={src:S0(n.url||""),alt:e.alt};n.title!==null&&n.title!==void 0&&(s.title=n.title);const r={type:"element",tagName:"img",properties:s,children:[]};return i.patch(e,r),i.applyData(e,r)}function _He(i,e){const t={src:S0(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const n={type:"element",tagName:"img",properties:t,children:[]};return i.patch(e,n),i.applyData(e,n)}function vHe(i,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};i.patch(e,t);const n={type:"element",tagName:"code",properties:{},children:[t]};return i.patch(e,n),i.applyData(e,n)}function bHe(i,e){const t=String(e.identifier).toUpperCase(),n=i.definitionById.get(t);if(!n)return Iie(i,e);const s={href:S0(n.url||"")};n.title!==null&&n.title!==void 0&&(s.title=n.title);const r={type:"element",tagName:"a",properties:s,children:i.all(e)};return i.patch(e,r),i.applyData(e,r)}function xHe(i,e){const t={href:S0(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const n={type:"element",tagName:"a",properties:t,children:i.all(e)};return i.patch(e,n),i.applyData(e,n)}function SHe(i,e,t){const n=i.all(e),s=t?CHe(t):Rie(e),r={},a=[];if(typeof e.checked=="boolean"){const u=n[0];let h;u&&u.type==="element"&&u.tagName==="p"?h=u:(h={type:"element",tagName:"p",properties:{},children:[]},n.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),r.className=["task-list-item"]}let o=-1;for(;++o<n.length;){const u=n[o];(s||o!==0||u.type!=="element"||u.tagName!=="p")&&a.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!s?a.push(...u.children):a.push(u)}const l=n[n.length-1];l&&(s||l.type!=="element"||l.tagName!=="p")&&a.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:r,children:a};return i.patch(e,c),i.applyData(e,c)}function CHe(i){let e=!1;if(i.type==="list"){e=i.spread||!1;const t=i.children;let n=-1;for(;!e&&++n<t.length;)e=Rie(t[n])}return e}function Rie(i){const e=i.spread;return e??i.children.length>1}function wHe(i,e){const t={},n=i.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++s<n.length;){const a=n[s];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const r={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:i.wrap(n,!0)};return i.patch(e,r),i.applyData(e,r)}function AHe(i,e){const t={type:"element",tagName:"p",properties:{},children:i.all(e)};return i.patch(e,t),i.applyData(e,t)}function kHe(i,e){const t={type:"root",children:i.wrap(i.all(e))};return i.patch(e,t),i.applyData(e,t)}function THe(i,e){const t={type:"element",tagName:"strong",properties:{},children:i.all(e)};return i.patch(e,t),i.applyData(e,t)}const Lie=Fie("end"),Die=Fie("start");function Fie(i){return e;function e(t){const n=t&&t.position&&t.position[i]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function Bie(i){const e=Die(i),t=Lie(i);if(e&&t)return{start:e,end:t}}function EHe(i,e){const t=i.all(e),n=t.shift(),s=[];if(n){const a={type:"element",tagName:"thead",properties:{},children:i.wrap([n],!0)};i.patch(e.children[0],a),s.push(a)}if(t.length>0){const a={type:"element",tagName:"tbody",properties:{},children:i.wrap(t,!0)},o=Die(e.children[1]),l=Lie(e.children[e.children.length-1]);o&&l&&(a.position={start:o,end:l}),s.push(a)}const r={type:"element",tagName:"table",properties:{},children:i.wrap(s,!0)};return i.patch(e,r),i.applyData(e,r)}function PHe(i,e,t){const n=t?t.children:void 0,r=(n?n.indexOf(e):1)===0?"th":"td",a=t&&t.type==="table"?t.align:void 0,o=a?a.length:e.children.length;let l=-1;const c=[];for(;++l<o;){const h=e.children[l],d={},p=a?a[l]:void 0;p&&(d.align=p);let f={type:"element",tagName:r,properties:d,children:[]};h&&(f.children=i.all(h),i.patch(h,f),f=i.applyData(h,f)),c.push(f)}const u={type:"element",tagName:"tr",properties:{},children:i.wrap(c,!0)};return i.patch(e,u),i.applyData(e,u)}function OHe(i,e){const t={type:"element",tagName:"td",properties:{},children:i.all(e)};return i.patch(e,t),i.applyData(e,t)}const YH=9,qH=32;function MHe(i){const e=String(i),t=/\r?\n|\r/g;let n=t.exec(e),s=0;const r=[];for(;n;)r.push(ZH(e.slice(s,n.index),s>0,!0),n[0]),s=n.index+n[0].length,n=t.exec(e);return r.push(ZH(e.slice(s),s>0,!1)),r.join("")}function ZH(i,e,t){let n=0,s=i.length;if(e){let r=i.codePointAt(n);for(;r===YH||r===qH;)n++,r=i.codePointAt(n)}if(t){let r=i.codePointAt(s-1);for(;r===YH||r===qH;)s--,r=i.codePointAt(s-1)}return s>n?i.slice(n,s):""}function IHe(i,e){const t={type:"text",value:MHe(String(e.value))};return i.patch(e,t),i.applyData(e,t)}function RHe(i,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return i.patch(e,t),i.applyData(e,t)}const LHe={blockquote:cHe,break:uHe,code:hHe,delete:dHe,emphasis:pHe,footnoteReference:fHe,heading:gHe,html:mHe,imageReference:yHe,image:_He,inlineCode:vHe,linkReference:bHe,link:xHe,listItem:SHe,list:wHe,paragraph:AHe,root:kHe,strong:THe,table:EHe,tableCell:OHe,tableRow:PHe,text:IHe,thematicBreak:RHe,toml:OS,yaml:OS,definition:OS,footnoteDefinition:OS};function OS(){}const jie=-1,SP=0,_A=1,vA=2,LN=3,DN=4,FN=5,BN=6,Nie=7,$ie=8,JH=typeof self=="object"?self:globalThis,DHe=(i,e)=>{const t=(s,r)=>(i.set(r,s),s),n=s=>{if(i.has(s))return i.get(s);const[r,a]=e[s];switch(r){case SP:case jie:return t(a,s);case _A:{const o=t([],s);for(const l of a)o.push(n(l));return o}case vA:{const o=t({},s);for(const[l,c]of a)o[n(l)]=n(c);return o}case LN:return t(new Date(a),s);case DN:{const{source:o,flags:l}=a;return t(new RegExp(o,l),s)}case FN:{const o=t(new Map,s);for(const[l,c]of a)o.set(n(l),n(c));return o}case BN:{const o=t(new Set,s);for(const l of a)o.add(n(l));return o}case Nie:{const{name:o,message:l}=a;return t(new JH[o](l),s)}case $ie:return t(BigInt(a),s);case"BigInt":return t(Object(BigInt(a)),s)}return t(new JH[r](a),s)};return n},QH=i=>DHe(new Map,i)(0),mg="",{toString:FHe}={},{keys:BHe}=Object,a_=i=>{const e=typeof i;if(e!=="object"||!i)return[SP,e];const t=FHe.call(i).slice(8,-1);switch(t){case"Array":return[_A,mg];case"Object":return[vA,mg];case"Date":return[LN,mg];case"RegExp":return[DN,mg];case"Map":return[FN,mg];case"Set":return[BN,mg]}return t.includes("Array")?[_A,t]:t.includes("Error")?[Nie,t]:[vA,t]},MS=([i,e])=>i===SP&&(e==="function"||e==="symbol"),jHe=(i,e,t,n)=>{const s=(a,o)=>{const l=n.push(a)-1;return t.set(o,l),l},r=a=>{if(t.has(a))return t.get(a);let[o,l]=a_(a);switch(o){case SP:{let u=a;switch(l){case"bigint":o=$ie,u=a.toString();break;case"function":case"symbol":if(i)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return s([jie],a)}return s([o,u],a)}case _A:{if(l)return s([l,[...a]],a);const u=[],h=s([o,u],a);for(const d of a)u.push(r(d));return h}case vA:{if(l)switch(l){case"BigInt":return s([l,a.toString()],a);case"Boolean":case"Number":case"String":return s([l,a.valueOf()],a)}if(e&&"toJSON"in a)return r(a.toJSON());const u=[],h=s([o,u],a);for(const d of BHe(a))(i||!MS(a_(a[d])))&&u.push([r(d),r(a[d])]);return h}case LN:return s([o,a.toISOString()],a);case DN:{const{source:u,flags:h}=a;return s([o,{source:u,flags:h}],a)}case FN:{const u=[],h=s([o,u],a);for(const[d,p]of a)(i||!(MS(a_(d))||MS(a_(p))))&&u.push([r(d),r(p)]);return h}case BN:{const u=[],h=s([o,u],a);for(const d of a)(i||!MS(a_(d)))&&u.push(r(d));return h}}const{message:c}=a;return s([o,{name:l,message:c}],a)};return r},e7=(i,{json:e,lossy:t}={})=>{const n=[];return jHe(!(e||t),!!e,new Map,n)(i),n},bA=typeof structuredClone=="function"?(i,e)=>e&&("json"in e||"lossy"in e)?QH(e7(i,e)):structuredClone(i):(i,e)=>QH(e7(i,e));function NHe(i,e){const t=[{type:"text",value:""}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function $He(i,e){return"Back to reference "+(i+1)+(e>1?"-"+e:"")}function zHe(i){const e=typeof i.options.clobberPrefix=="string"?i.options.clobberPrefix:"user-content-",t=i.options.footnoteBackContent||NHe,n=i.options.footnoteBackLabel||$He,s=i.options.footnoteLabel||"Footnotes",r=i.options.footnoteLabelTagName||"h2",a=i.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<i.footnoteOrder.length;){const c=i.footnoteById.get(i.footnoteOrder[l]);if(!c)continue;const u=i.all(c),h=String(c.identifier).toUpperCase(),d=S0(h.toLowerCase());let p=0;const f=[],g=i.footnoteCounts.get(h);for(;g!==void 0&&++p<=g;){f.length>0&&f.push({type:"text",value:" "});let b=typeof t=="string"?t:t(l,p);typeof b=="string"&&(b={type:"text",value:b}),f.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+d+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(l,p),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const m=u[u.length-1];if(m&&m.type==="element"&&m.tagName==="p"){const b=m.children[m.children.length-1];b&&b.type==="text"?b.value+=" ":m.children.push({type:"text",value:" "}),m.children.push(...f)}else u.push(...f);const y={type:"element",tagName:"li",properties:{id:e+"fn-"+d},children:i.wrap(u,!0)};i.patch(c,y),o.push(y)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:r,properties:{...bA(a),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:i.wrap(o,!0)},{type:"text",value:`
`}]}}const CP=function(i){if(i==null)return WHe;if(typeof i=="function")return wP(i);if(typeof i=="object")return Array.isArray(i)?HHe(i):VHe(i);if(typeof i=="string")return UHe(i);throw new Error("Expected function, string, or object as test")};function HHe(i){const e=[];let t=-1;for(;++t<i.length;)e[t]=CP(i[t]);return wP(n);function n(...s){let r=-1;for(;++r<e.length;)if(e[r].apply(this,s))return!0;return!1}}function VHe(i){const e=i;return wP(t);function t(n){const s=n;let r;for(r in i)if(s[r]!==e[r])return!1;return!0}}function UHe(i){return wP(e);function e(t){return t&&t.type===i}}function wP(i){return e;function e(t,n,s){return!!(GHe(t)&&i.call(this,t,typeof n=="number"?n:void 0,s||void 0))}}function WHe(){return!0}function GHe(i){return i!==null&&typeof i=="object"&&"type"in i}const zie=[],KHe=!0,zL=!1,XHe="skip";function Hie(i,e,t,n){let s;typeof e=="function"&&typeof t!="function"?(n=t,t=e):s=e;const r=CP(s),a=n?-1:1;o(i,void 0,[])();function o(l,c,u){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const p=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(l.type+(p?"<"+p+">":""))+")"})}return d;function d(){let p=zie,f,g,m;if((!e||r(l,c,u[u.length-1]||void 0))&&(p=YHe(t(l,u)),p[0]===zL))return p;if("children"in l&&l.children){const y=l;if(y.children&&p[0]!==XHe)for(g=(n?y.children.length:-1)+a,m=u.concat(y);g>-1&&g<y.children.length;){const b=y.children[g];if(f=o(b,g,m)(),f[0]===zL)return f;g=typeof f[1]=="number"?f[1]:g+a}}return p}}}function YHe(i){return Array.isArray(i)?i:typeof i=="number"?[KHe,i]:i==null?zie:[i]}function AP(i,e,t,n){let s,r,a;typeof e=="function"&&typeof t!="function"?(r=void 0,a=e,s=t):(r=e,a=t,s=n),Hie(i,r,o,s);function o(l,c){const u=c[c.length-1],h=u?u.children.indexOf(l):void 0;return a(l,h,u)}}const HL={}.hasOwnProperty,qHe={};function ZHe(i,e){const t=e||qHe,n=new Map,s=new Map,r=new Map,a={...LHe,...t.handlers},o={all:c,applyData:QHe,definitionById:n,footnoteById:s,footnoteCounts:r,footnoteOrder:[],handlers:a,one:l,options:t,patch:JHe,wrap:t7e};return AP(i,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const h=u.type==="definition"?n:s,d=String(u.identifier).toUpperCase();h.has(d)||h.set(d,u)}}),o;function l(u,h){const d=u.type,p=o.handlers[d];if(HL.call(o.handlers,d)&&p)return p(o,u,h);if(o.options.passThrough&&o.options.passThrough.includes(d)){if("children"in u){const{children:g,...m}=u,y=bA(m);return y.children=o.all(u),y}return bA(u)}return(o.options.unknownHandler||e7e)(o,u,h)}function c(u){const h=[];if("children"in u){const d=u.children;let p=-1;for(;++p<d.length;){const f=o.one(d[p],u);if(f){if(p&&d[p-1].type==="break"&&(!Array.isArray(f)&&f.type==="text"&&(f.value=t7(f.value)),!Array.isArray(f)&&f.type==="element")){const g=f.children[0];g&&g.type==="text"&&(g.value=t7(g.value))}Array.isArray(f)?h.push(...f):h.push(f)}}}return h}}function JHe(i,e){i.position&&(e.position=Bie(i))}function QHe(i,e){let t=e;if(i&&i.data){const n=i.data.hName,s=i.data.hChildren,r=i.data.hProperties;if(typeof n=="string")if(t.type==="element")t.tagName=n;else{const a="children"in t?t.children:[t];t={type:"element",tagName:n,properties:{},children:a}}t.type==="element"&&r&&Object.assign(t.properties,bA(r)),"children"in t&&t.children&&s!==null&&s!==void 0&&(t.children=s)}return t}function e7e(i,e){const t=e.data||{},n="value"in e&&!(HL.call(t,"hProperties")||HL.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:i.all(e)};return i.patch(e,n),i.applyData(e,n)}function t7e(i,e){const t=[];let n=-1;for(e&&t.push({type:"text",value:`
`});++n<i.length;)n&&t.push({type:"text",value:`
`}),t.push(i[n]);return e&&i.length>0&&t.push({type:"text",value:`
`}),t}function t7(i){let e=0,t=i.charCodeAt(e);for(;t===9||t===32;)e++,t=i.charCodeAt(e);return i.slice(e)}function i7(i,e){const t=ZHe(i,e),n=t.one(i,void 0),s=zHe(t),r=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return s&&r.children.push({type:"text",value:`
`},s),r}function i7e(i,e){return i&&"run"in i?async function(t,n){const s=i7(t,{file:n,...e});await i.run(s,n)}:function(t,n){return i7(t,{file:n,...i||e})}}function n7(i){if(i)throw i}var QC=Object.prototype.hasOwnProperty,Vie=Object.prototype.toString,s7=Object.defineProperty,r7=Object.getOwnPropertyDescriptor,a7=function(e){return typeof Array.isArray=="function"?Array.isArray(e):Vie.call(e)==="[object Array]"},o7=function(e){if(!e||Vie.call(e)!=="[object Object]")return!1;var t=QC.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&QC.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!n)return!1;var s;for(s in e);return typeof s>"u"||QC.call(e,s)},l7=function(e,t){s7&&t.name==="__proto__"?s7(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c7=function(e,t){if(t==="__proto__")if(QC.call(e,t)){if(r7)return r7(e,t).value}else return;return e[t]},n7e=function i(){var e,t,n,s,r,a,o=arguments[0],l=1,c=arguments.length,u=!1;for(typeof o=="boolean"&&(u=o,o=arguments[1]||{},l=2),(o==null||typeof o!="object"&&typeof o!="function")&&(o={});l<c;++l)if(e=arguments[l],e!=null)for(t in e)n=c7(o,t),s=c7(e,t),o!==s&&(u&&s&&(o7(s)||(r=a7(s)))?(r?(r=!1,a=n&&a7(n)?n:[]):a=n&&o7(n)?n:{},l7(o,{name:t,newValue:i(u,a,s)})):typeof s<"u"&&l7(o,{name:t,newValue:s}));return o};const jM=Xe(n7e);function VL(i){if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)}function s7e(){const i=[],e={run:t,use:n};return e;function t(...s){let r=-1;const a=s.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);o(null,...s);function o(l,...c){const u=i[++r];let h=-1;if(l){a(l);return}for(;++h<s.length;)(c[h]===null||c[h]===void 0)&&(c[h]=s[h]);s=c,u?r7e(u,o)(...c):a(null,...c)}}function n(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return i.push(s),e}}function r7e(i,e){let t;return n;function n(...a){const o=i.length>a.length;let l;o&&a.push(s);try{l=i.apply(this,a)}catch(c){const u=c;if(o&&t)throw u;return s(u)}o||(l&&l.then&&typeof l.then=="function"?l.then(r,s):l instanceof Error?s(l):r(l))}function s(a,...o){t||(t=!0,e(a,...o))}function r(a){s(null,a)}}const a7e=function(i){const n=this.constructor.prototype,s=n[i],r=function(){return s.apply(r,arguments)};return Object.setPrototypeOf(r,n),r},o7e={}.hasOwnProperty;class jN extends a7e{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=s7e()}copy(){const e=new jN;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(jM(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(zM("data",this.frozen),this.namespace[e]=t,this):o7e.call(this.namespace,e)&&this.namespace[e]||void 0:e?(zM("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const s=t.call(e,...n);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=IS(e),n=this.parser||this.Parser;return NM("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),NM("process",this.parser||this.Parser),$M("process",this.compiler||this.Compiler),t?s(void 0,t):new Promise(s);function s(r,a){const o=IS(e),l=n.parse(o);n.run(l,o,function(u,h,d){if(u||!h||!d)return c(u);const p=h,f=n.stringify(p,d);u7e(f)?d.value=f:d.result=f,c(u,d)});function c(u,h){u||!h?a(u):r?r(h):t(void 0,h)}}}processSync(e){let t=!1,n;return this.freeze(),NM("processSync",this.parser||this.Parser),$M("processSync",this.compiler||this.Compiler),this.process(e,s),h7("processSync","process",t),n;function s(r,a){t=!0,n7(r),n=a}}run(e,t,n){u7(e),this.freeze();const s=this.transformers;return!n&&typeof t=="function"&&(n=t,t=void 0),n?r(void 0,n):new Promise(r);function r(a,o){const l=IS(t);s.run(e,l,c);function c(u,h,d){const p=h||e;u?o(u):a?a(p):n(void 0,p,d)}}}runSync(e,t){let n=!1,s;return this.run(e,t,r),h7("runSync","run",n),s;function r(a,o){n7(a),s=o,n=!0}}stringify(e,t){this.freeze();const n=IS(t),s=this.compiler||this.Compiler;return $M("stringify",s),u7(e),s(e,n)}use(e,...t){const n=this.attachers,s=this.namespace;if(zM("use",this.frozen),e!=null)if(typeof e=="function")l(e,t);else if(typeof e=="object")Array.isArray(e)?o(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function r(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...h]=c;l(u,h)}else a(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function a(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(c.plugins),c.settings&&(s.settings=jM(!0,s.settings,c.settings))}function o(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const h=c[u];r(h)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let h=-1,d=-1;for(;++h<n.length;)if(n[h][0]===c){d=h;break}if(d===-1)n.push([c,...u]);else if(u.length>0){let[p,...f]=u;const g=n[d][1];VL(g)&&VL(p)&&(p=jM(!0,g,p)),n[d]=[c,p,...f]}}}}const l7e=new jN().freeze();function NM(i,e){if(typeof e!="function")throw new TypeError("Cannot `"+i+"` without `parser`")}function $M(i,e){if(typeof e!="function")throw new TypeError("Cannot `"+i+"` without `compiler`")}function zM(i,e){if(e)throw new Error("Cannot call `"+i+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function u7(i){if(!VL(i)||typeof i.type!="string")throw new TypeError("Expected node, got `"+i+"`")}function h7(i,e,t){if(!t)throw new Error("`"+i+"` finished async. Use `"+e+"` instead")}function IS(i){return c7e(i)?i:new Tte(i)}function c7e(i){return!!(i&&typeof i=="object"&&"message"in i&&"messages"in i)}function u7e(i){return typeof i=="string"||h7e(i)}function h7e(i){return!!(i&&typeof i=="object"&&"byteLength"in i&&"byteOffset"in i)}class d7e{constructor(){this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:e=>this.replacement=e}}replace(e,t,n,s){e&&t&&(n!=null?e[t][n]=s:e[t]=s)}remove(e,t,n){e&&t&&(n!=null?e[t].splice(n,1):delete e[t])}}class p7e extends d7e{constructor(e,t){super(),this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:n=>this.replacement=n},this.enter=e,this.leave=t}visit(e,t,n,s){if(e){if(this.enter){const a=this.should_skip,o=this.should_remove,l=this.replacement;this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.enter.call(this.context,e,t,n,s),this.replacement&&(e=this.replacement,this.replace(t,n,s,e)),this.should_remove&&this.remove(t,n,s);const c=this.should_skip,u=this.should_remove;if(this.should_skip=a,this.should_remove=o,this.replacement=l,c)return e;if(u)return null}let r;for(r in e){const a=e[r];if(a&&typeof a=="object")if(Array.isArray(a)){const o=a;for(let l=0;l<o.length;l+=1){const c=o[l];d7(c)&&(this.visit(c,e,r,l)||l--)}}else d7(a)&&this.visit(a,e,r,null)}if(this.leave){const a=this.replacement,o=this.should_remove;this.replacement=null,this.should_remove=!1,this.leave.call(this.context,e,t,n,s),this.replacement&&(e=this.replacement,this.replace(t,n,s,e)),this.should_remove&&this.remove(t,n,s);const l=this.should_remove;if(this.replacement=a,this.should_remove=o,l)return null}}return e}}function d7(i){return i!==null&&typeof i=="object"&&"type"in i&&typeof i.type=="string"}function Rb(i,{enter:e,leave:t}){return new p7e(e,t).visit(i,null)}function Uie(i,e){if(i.type==="MemberExpression")return!i.computed&&Uie(i.object,i);if(i.type==="Identifier"){if(!e)return!0;switch(e.type){case"MemberExpression":return e.computed||i===e.object;case"MethodDefinition":return e.computed;case"PropertyDefinition":return e.computed||i===e.value;case"Property":return e.computed||i===e.value;case"ExportSpecifier":case"ImportSpecifier":return i===e.local;case"LabeledStatement":case"BreakStatement":case"ContinueStatement":return!1;default:return!0}}return!1}function Wie(i){const e=new WeakMap,t=new Map,n=new yg(null,!1),s=[];let r=n;Rb(i,{enter(a,o){switch(a.type){case"Identifier":o&&Uie(a,o)&&s.push([r,a]);break;case"ImportDeclaration":a.specifiers.forEach(l=>{r.declarations.set(l.local.name,l)});break;case"FunctionExpression":case"FunctionDeclaration":case"ArrowFunctionExpression":a.type==="FunctionDeclaration"?(a.id&&r.declarations.set(a.id.name,a),e.set(a,r=new yg(r,!1))):(e.set(a,r=new yg(r,!1)),a.type==="FunctionExpression"&&a.id&&r.declarations.set(a.id.name,a)),a.params.forEach(l=>{UL(l).forEach(c=>{r.declarations.set(c,a)})});break;case"ForStatement":case"ForInStatement":case"ForOfStatement":e.set(a,r=new yg(r,!0));break;case"BlockStatement":e.set(a,r=new yg(r,!0));break;case"ClassDeclaration":case"VariableDeclaration":r.add_declaration(a);break;case"CatchClause":e.set(a,r=new yg(r,!0)),a.param&&UL(a.param).forEach(l=>{a.param&&r.declarations.set(l,a.param)});break}},leave(a){e.has(a)&&r!==null&&r.parent&&(r=r.parent)}});for(let a=s.length-1;a>=0;--a){const[o,l]=s[a];o.references.has(l.name)||Gie(o,l.name),o.find_owner(l.name)||t.set(l.name,l)}return{map:e,scope:n,globals:t}}function Gie(i,e){i.references.add(e),i.parent&&Gie(i.parent,e)}class yg{constructor(e,t){this.parent=e,this.block=t,this.declarations=new Map,this.initialised_declarations=new Set,this.references=new Set}add_declaration(e){if(e.type==="VariableDeclaration")if(e.kind==="var"&&this.block&&this.parent)this.parent.add_declaration(e);else{const t=n=>{UL(n.id).forEach(s=>{this.declarations.set(s,e),n.init&&this.initialised_declarations.add(s)})};e.declarations.forEach(t)}else e.id&&this.declarations.set(e.id.name,e)}find_owner(e){return this.declarations.has(e)?this:this.parent&&this.parent.find_owner(e)}has(e){return this.declarations.has(e)||!!this.parent&&this.parent.has(e)}}function UL(i){return Rg(i).map(e=>e.name)}function Rg(i,e=[]){switch(i.type){case"Identifier":e.push(i);break;case"MemberExpression":let t=i;for(;t.type==="MemberExpression";)t=t.object;e.push(t);break;case"ObjectPattern":const n=r=>{r.type==="RestElement"?Rg(r.argument,e):Rg(r.value,e)};i.properties.forEach(n);break;case"ArrayPattern":const s=r=>{r&&Rg(r,e)};i.elements.forEach(r=>{r&&s(r)});break;case"RestElement":Rg(i.argument,e);break;case"AssignmentPattern":Rg(i.left,e);break}return e}function ph(i,e){const t=["start","end","loc","range","comments"];let n=-1;for(;++n<t.length;){const s=t[n];s in i&&(e[s]=i[s])}}function f7e(i){return i.type==="FunctionDeclaration"?{...i,type:"FunctionExpression"}:(i.type,{...i,type:"ClassExpression"})}function g7e(i){return i.type==="FunctionDeclaration"||i.type==="ClassDeclaration"||i.type==="VariableDeclaration"}function NN(i,e){let t=-1;const n=[],s=[];let r;for(;++t<i.length;){const a=i[t];a.type==="ImportNamespaceSpecifier"?r=a:s.push(a)}if(r){const a={type:"VariableDeclarator",id:r.local,init:e};ph(r,a),n.push(a)}return n.push({type:"VariableDeclarator",id:{type:"ObjectPattern",properties:s.map(function(a){let o=a.type==="ImportSpecifier"?a.imported:a.type==="ExportSpecifier"?a.exported:{type:"Identifier",name:"default"},l=a.local;a.type==="ExportSpecifier"&&(l=o,o=a.local);const c={type:"Property",kind:"init",shorthand:o.name===l.name,method:!1,computed:!1,key:o,value:l};return ph(a,c),c})},init:r?{type:"Identifier",name:r.local.name}:e}),n}function ed(i){let e=-1,t;for(;++e<i.length;){const n=i[e],s=typeof n=="string"&&_c(n)?{type:"Identifier",name:n}:{type:"Literal",value:n};t=t?{type:"MemberExpression",object:t,property:s,computed:s.type==="Literal",optional:!1}:s}return t.type,t}function p7(i){let e=-1,t;for(;++e<i.length;){const n=i[e];typeof n=="string"&&_c(n,{jsx:!0});const s={type:"JSXIdentifier",name:n};t=t?{type:"JSXMemberExpression",object:t,property:s}:s}return t}function m7e(i){const e=i.baseUrl||void 0,t=typeof e=="object"?e.href:e,n=i.outputFormat||"program",s=i.pragma===void 0?"React.createElement":i.pragma,r=i.pragmaFrag===void 0?"React.Fragment":i.pragmaFrag,a=i.pragmaImportSource||"react",o=i.jsxImportSource||"react",l=i.jsxRuntime||"automatic";return function(u,h){const d=[],p=[];let f=0,g,m,y;if(l==="classic"&&r&&RS(u,"@jsxFrag",r),l==="classic"&&s&&RS(u,"@jsx",s),l==="automatic"&&o&&RS(u,"@jsxImportSource",o),l&&RS(u,"@jsxRuntime",l),l==="classic"&&a){if(!s)throw new Error("Missing `pragma` in classic runtime with `pragmaImportSource`");C({type:"ImportDeclaration",specifiers:[{type:"ImportDefaultSpecifier",local:{type:"Identifier",name:s.split(".")[0]}}],source:{type:"Literal",value:a}})}for(y of u.body)if(y.type==="ExportDefaultDeclaration")g&&h.fail("Unexpected duplicate layout, expected a single layout (previous: "+go(hu(g))+")",{ancestors:[u,y],place:hu(y),ruleId:"duplicate-layout",source:"recma-document"}),g=y,p.push({type:"VariableDeclaration",kind:"const",declarations:[{type:"VariableDeclarator",id:{type:"Identifier",name:"MDXLayout"},init:g7e(y.declaration)?f7e(y.declaration):y.declaration}]});else if(y.type==="ExportNamedDeclaration"&&y.source){const w=y.source;y.specifiers=y.specifiers.filter(function(A){if(A.exported.name==="default"){g&&h.fail("Unexpected duplicate layout, expected a single layout (previous: "+go(hu(g))+")",{ancestors:[u,y,A],place:hu(y),ruleId:"duplicate-layout",source:"recma-document"}),g=A;const T=[];if(A.local.name==="default")T.push({type:"ImportDefaultSpecifier",local:{type:"Identifier",name:"MDXLayout"}});else{const O={type:"ImportSpecifier",imported:A.local,local:{type:"Identifier",name:"MDXLayout"}};ph(A.local,O),T.push(O)}const E={type:"Literal",value:w.value};ph(w,E);const P={type:"ImportDeclaration",specifiers:T,source:E};return ph(A,P),C(P),!1}return!0}),y.specifiers.length>0&&S(y)}else y.type==="ExportNamedDeclaration"||y.type==="ExportAllDeclaration"?S(y):y.type==="ImportDeclaration"?C(y):y.type==="ExpressionStatement"&&(y.expression.type==="JSXElement"||y.expression.type==="JSXFragment")?(m=!0,p.push(...c(y.expression,n,!!g))):p.push(y);m||p.push(...c(void 0,n,!!g)),d.push(["MDXContent","default"]),n==="function-body"&&p.push({type:"ReturnStatement",argument:{type:"ObjectExpression",properties:[...Array.from({length:f}).map(function(w,A){return{type:"SpreadElement",argument:{type:"Identifier",name:"_exportAll"+(A+1)}}}),...d.map(function(w){return{type:"Property",kind:"init",method:!1,computed:!1,shorthand:typeof w=="string",key:{type:"Identifier",name:typeof w=="string"?w:w[1]},value:{type:"Identifier",name:typeof w=="string"?w:w[0]}}})]}}),u.body=p;let b=!1,x=!1;(t||n==="function-body")&&Rb(u,{enter(w){if((w.type==="ExportAllDeclaration"||w.type==="ExportNamedDeclaration"||w.type==="ImportDeclaration")&&w.source){let A=w.source.value;try{new URL(A)}catch{(A.startsWith("/")||A.startsWith("./")||A.startsWith("../"))&&(A=new URL(A,t).href)}const T={type:"Literal",value:A};ph(w.source,T),w.source=T;return}if(w.type==="ImportExpression"){x=!0;const A={type:"CallExpression",callee:{type:"Identifier",name:"_resolveDynamicMdxSpecifier"},arguments:[w.source],optional:!1};w.source=A;return}if(w.type==="MemberExpression"&&"object"in w&&w.object.type==="MetaProperty"&&w.property.type==="Identifier"&&w.object.meta.name==="import"&&w.object.property.name==="meta"&&w.property.name==="url"){b=!0;const A={type:"Identifier",name:"_importMetaUrl"};ph(w,A),this.replace(A)}}}),x&&(t||(b=!0),u.body.push(y7e(t?{type:"Literal",value:t}:{type:"Identifier",name:"_importMetaUrl"}))),b&&u.body.unshift(..._7e());function S(w){if(w.type==="ExportNamedDeclaration"){w.declaration&&d.push(...Wie(w.declaration).scope.declarations.keys());for(y of w.specifiers)d.push(y.exported.name)}C(w)}function C(w){let A,T;if(n==="function-body")if(w.type==="ImportDeclaration"||w.type==="ExportAllDeclaration"||w.type==="ExportNamedDeclaration"&&w.source){w.source;const E={type:"ImportExpression",source:w.source};ph(w,E),T={type:"AwaitExpression",argument:E},(w.type==="ImportDeclaration"||w.type==="ExportNamedDeclaration")&&w.specifiers.length===0?A={type:"ExpressionStatement",expression:T}:A={type:"VariableDeclaration",kind:"const",declarations:w.type==="ExportAllDeclaration"?[{type:"VariableDeclarator",id:{type:"Identifier",name:"_exportAll"+ ++f},init:T}]:NN(w.specifiers,T)}}else if(w.declaration)A=w.declaration;else{const E=w.specifiers.filter(function(P){return P.local.name!==P.exported.name}).map(function(P){return{type:"VariableDeclarator",id:P.exported,init:P.local}});E.length>0&&(A={type:"VariableDeclaration",kind:"const",declarations:E})}else A=w;A&&p.push(A)}};function c(u,h,d){let f={type:"JSXElement",openingElement:{type:"JSXOpeningElement",name:{type:"JSXIdentifier",name:"MDXLayout"},attributes:[{type:"JSXSpreadAttribute",argument:{type:"Identifier",name:"props"}}],selfClosing:!1},closingElement:{type:"JSXClosingElement",name:{type:"JSXIdentifier",name:"MDXLayout"}},children:[{type:"JSXElement",openingElement:{type:"JSXOpeningElement",name:{type:"JSXIdentifier",name:"_createMdxContent"},attributes:[{type:"JSXSpreadAttribute",argument:{type:"Identifier",name:"props"}}],selfClosing:!0},closingElement:null,children:[]}]};d||(f={type:"ConditionalExpression",test:{type:"Identifier",name:"MDXLayout"},consequent:f,alternate:{type:"CallExpression",callee:{type:"Identifier",name:"_createMdxContent"},arguments:[{type:"Identifier",name:"props"}],optional:!1}});let g=u||{type:"Identifier",name:"undefined"};g.type==="JSXFragment"&&g.children.length===1&&g.children[0].type==="JSXElement"&&(g=g.children[0]);let m=!1;Rb(g,{enter(b){if(b.type==="ArrowFunctionExpression"||b.type==="FunctionDeclaration"||b.type==="FunctionExpression")return this.skip();(b.type==="AwaitExpression"||b.type==="ForOfStatement"&&b.await)&&(m=!0)}});const y={type:"FunctionDeclaration",id:{type:"Identifier",name:"MDXContent"},params:[{type:"AssignmentPattern",left:{type:"Identifier",name:"props"},right:{type:"ObjectExpression",properties:[]}}],body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:f}]}};return[{type:"FunctionDeclaration",async:m,id:{type:"Identifier",name:"_createMdxContent"},params:[{type:"Identifier",name:"props"}],body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:g}]}},h==="program"?{type:"ExportDefaultDeclaration",declaration:y}:y]}}function RS(i,e,t){var n;(n=i.comments)==null||n.unshift({type:"Block",value:e+" "+t,data:{_mdxIsPragmaComment:!0}})}function y7e(i){return{type:"FunctionDeclaration",id:{type:"Identifier",name:"_resolveDynamicMdxSpecifier"},generator:!1,async:!1,params:[{type:"Identifier",name:"d"}],body:{type:"BlockStatement",body:[{type:"IfStatement",test:{type:"BinaryExpression",left:{type:"UnaryExpression",operator:"typeof",prefix:!0,argument:{type:"Identifier",name:"d"}},operator:"!==",right:{type:"Literal",value:"string"}},consequent:{type:"ReturnStatement",argument:{type:"Identifier",name:"d"}},alternate:null},{type:"TryStatement",block:{type:"BlockStatement",body:[{type:"ExpressionStatement",expression:{type:"NewExpression",callee:{type:"Identifier",name:"URL"},arguments:[{type:"Identifier",name:"d"}]}},{type:"ReturnStatement",argument:{type:"Identifier",name:"d"}}]},handler:{type:"CatchClause",param:null,body:{type:"BlockStatement",body:[]}},finalizer:null},{type:"IfStatement",test:{type:"LogicalExpression",left:{type:"LogicalExpression",left:{type:"CallExpression",callee:ed(["d","startsWith"]),arguments:[{type:"Literal",value:"/"}],optional:!1},operator:"||",right:{type:"CallExpression",callee:ed(["d","startsWith"]),arguments:[{type:"Literal",value:"./"}],optional:!1}},operator:"||",right:{type:"CallExpression",callee:ed(["d","startsWith"]),arguments:[{type:"Literal",value:"../"}],optional:!1}},consequent:{type:"ReturnStatement",argument:{type:"MemberExpression",object:{type:"NewExpression",callee:{type:"Identifier",name:"URL"},arguments:[{type:"Identifier",name:"d"},i]},property:{type:"Identifier",name:"href"},computed:!1,optional:!1}},alternate:null},{type:"ReturnStatement",argument:{type:"Identifier",name:"d"}}]}}}function _7e(){return[{type:"VariableDeclaration",declarations:[{type:"VariableDeclarator",id:{type:"Identifier",name:"_importMetaUrl"},init:ed(["arguments",0,"baseUrl"])}],kind:"const"},{type:"IfStatement",test:{type:"UnaryExpression",operator:"!",prefix:!0,argument:{type:"Identifier",name:"_importMetaUrl"}},consequent:{type:"ThrowStatement",argument:{type:"NewExpression",callee:{type:"Identifier",name:"Error"},arguments:[{type:"Literal",value:"Unexpected missing `options.baseUrl` needed to support `export  from`, `import`, or `import.meta.url` when generating `function-body`"}]}},alternate:null}]}const HM=/@(jsx|jsxFrag|jsxImportSource|jsxRuntime)\s+(\S+)/g;function v7e(i,e){const t=e||{};let n=t.runtime==="automatic";const s={},r={};Rb(i,{enter(a){if(a.type==="Program"){const o=a.comments||[];let l=-1;for(;++l<o.length;){HM.lastIndex=0;let c=HM.exec(o[l].value);for(;c;)s[c[1]]=c[2],c=HM.exec(o[l].value)}if(s.jsxRuntime)if(s.jsxRuntime==="automatic"){if(n=!0,s.jsx)throw new Error("Unexpected `@jsx` pragma w/ automatic runtime");if(s.jsxFrag)throw new Error("Unexpected `@jsxFrag` pragma w/ automatic runtime")}else if(s.jsxRuntime==="classic"){if(n=!1,s.jsxImportSource)throw new Error("Unexpected `@jsxImportSource` w/ classic runtime")}else throw new Error("Unexpected `jsxRuntime` `"+s.jsxRuntime+"`, expected `automatic` or `classic`")}},leave(a){if(a.type==="Program"){const g=[];if(r.fragment&&g.push({type:"ImportSpecifier",imported:{type:"Identifier",name:"Fragment"},local:{type:"Identifier",name:"_Fragment"}}),r.jsx&&g.push({type:"ImportSpecifier",imported:{type:"Identifier",name:"jsx"},local:{type:"Identifier",name:"_jsx"}}),r.jsxs&&g.push({type:"ImportSpecifier",imported:{type:"Identifier",name:"jsxs"},local:{type:"Identifier",name:"_jsxs"}}),r.jsxDEV&&g.push({type:"ImportSpecifier",imported:{type:"Identifier",name:"jsxDEV"},local:{type:"Identifier",name:"_jsxDEV"}}),g.length>0){let m=0;for(;m<a.body.length;){const y=a.body[m];if("directive"in y&&y.directive)m++;else break}a.body.splice(m,0,{type:"ImportDeclaration",specifiers:g,source:{type:"Literal",value:(s.jsxImportSource||t.importSource||"react")+(t.development?"/jsx-dev-runtime":"/jsx-runtime")}})}}if(a.type!=="JSXElement"&&a.type!=="JSXFragment")return;const o=[];let l=-1;for(;++l<a.children.length;){const g=a.children[l];if(g.type==="JSXExpressionContainer")g.expression.type!=="JSXEmptyExpression"&&o.push(g.expression);else if(g.type==="JSXText"){const m=g.value.replace(/\t/g," ").replace(/ *(\r?\n|\r) */g,`
`).replace(/\n+/g,`
`).replace(/\n+$/,"").replace(/^\n+/,"").replace(/\n/g," ");if(m){const y={type:"Literal",value:m};av(g,y),o.push(y)}}else g.type!=="JSXElement"&&g.type!=="JSXFragment"&&g.type,o.push(g)}let c;const u=[];let h=[],d;if(a.type==="JSXElement"){if(c=xA(a.openingElement.name),c.type==="Identifier"&&/^[a-z]/.test(c.name)){const b={type:"Literal",value:c.name};av(c,b),c=b}let g;const m=a.openingElement.attributes;let y=-1;for(;++y<m.length;){const b=m[y];if(b.type==="JSXSpreadAttribute")b.argument.type==="ObjectExpression"?u.push(...b.argument.properties):u.push({type:"SpreadElement",argument:b.argument}),g=!0;else{const x=b7e(b);if(n&&x.key.type==="Identifier"&&x.key.name==="key"){if(g)throw new Error("Expected `key` to come before any spread expressions");const S=x.value;S.type!=="AssignmentPattern"&&S.type!=="ArrayPattern"&&S.type!=="ObjectPattern"&&S.type,d=S}else u.push(x)}}}else n?(r.fragment=!0,c={type:"Identifier",name:"_Fragment"}):c=f7(s.jsxFrag||t.pragmaFrag||"React.Fragment");n?o.length>0&&u.push({type:"Property",key:{type:"Identifier",name:"children"},value:o.length>1?{type:"ArrayExpression",elements:o}:o[0],kind:"init",method:!1,shorthand:!1,computed:!1}):h=o;let p;if(n){h.push({type:"ObjectExpression",properties:u}),d?h.push(d):t.development&&h.push({type:"Identifier",name:"undefined"});const g=o.length>1;if(t.development){r.jsxDEV=!0,p={type:"Identifier",name:"_jsxDEV"},h.push({type:"Literal",value:g});const m={type:"ObjectExpression",properties:[{type:"Property",method:!1,shorthand:!1,computed:!1,kind:"init",key:{type:"Identifier",name:"fileName"},value:{type:"Literal",value:t.filePath||"<source.js>"}}]};a.loc&&m.properties.push({type:"Property",method:!1,shorthand:!1,computed:!1,kind:"init",key:{type:"Identifier",name:"lineNumber"},value:{type:"Literal",value:a.loc.start.line}},{type:"Property",method:!1,shorthand:!1,computed:!1,kind:"init",key:{type:"Identifier",name:"columnNumber"},value:{type:"Literal",value:a.loc.start.column+1}}),h.push(m,{type:"ThisExpression"})}else g?(r.jsxs=!0,p={type:"Identifier",name:"_jsxs"}):(r.jsx=!0,p={type:"Identifier",name:"_jsx"})}else u.length>0?h.unshift({type:"ObjectExpression",properties:u}):h.length>0&&h.unshift({type:"Literal",value:null}),p=f7(s.jsx||t.pragma||"React.createElement");h.unshift(c);const f={type:"CallExpression",callee:p,arguments:h,optional:!1};av(a,f),this.replace(f)}})}function b7e(i){let e;if(i.value)if(i.value.type==="JSXExpressionContainer"){const n=i.value.expression;n.type,e=n}else{const n=i.value;n.type!=="JSXElement"&&n.type,e=n,delete e.raw}else e={type:"Literal",value:!0};const t={type:"Property",key:xA(i.name),value:e,kind:"init",method:!1,shorthand:!1,computed:!1};return av(i,t),t}function xA(i){let e;if(i.type==="JSXMemberExpression"){const t=xA(i.property);e={type:"MemberExpression",object:xA(i.object),property:t,computed:t.type==="Literal",optional:!1}}else i.type==="JSXNamespacedName"?e={type:"Literal",value:i.namespace.name+":"+i.name.name}:e=_c(i.name)?{type:"Identifier",name:i.name}:{type:"Literal",value:i.name};return av(i,e),e}function f7(i){const e=i.split(".");let t=-1,n;for(;++t<e.length;){const s=_c(e[t])?{type:"Identifier",name:e[t]}:{type:"Literal",value:e[t]};n=n?{type:"MemberExpression",object:n,property:s,computed:!!(t&&s.type==="Literal"),optional:!1}:s}return n}function av(i,e){const t=["start","end","loc","range","comments"];let n=-1;for(;++n<t.length;){const s=t[n];s in i&&(e[s]=i[s])}}function x7e(i){const{development:e,outputFormat:t}=i||{};return function(n,s){if(v7e(n,{development:e,filePath:s.history[0]}),n.comments&&(n.comments=n.comments.filter(function(r){var a;return!((a=r.data)!=null&&a._mdxIsPragmaComment)})),t==="function-body"){let r=0;for(;r<n.body.length;){const o=n.body[r];if("directive"in o&&o.directive)r++;else break}const a=n.body[r];a&&a.type==="ImportDeclaration"&&typeof a.source.value=="string"&&/\/jsx-(dev-)?runtime$/.test(a.source.value)&&(n.body[r]={type:"VariableDeclaration",kind:"const",declarations:NN(a.specifiers,ed(["arguments",0]))})}}}function g7(i){let e=-1,t;for(;++e<i.length;){const n=i[e];t=t?{type:"BinaryExpression",left:t,operator:"+",right:n}:n}return t}function S7e(i){const{development:e,outputFormat:t,providerImportSource:n}=i;return function(s,r){const a=Wie(s),o=[];let l=!1,c=!1,u;if(Rb(s,{enter(h){const d=a.map.get(h);(h.type==="FunctionDeclaration"||h.type==="FunctionExpression"||h.type==="ArrowFunctionExpression")&&(o.push({components:[],idToInvalidComponentName:new Map,node:h,objects:[],references:{},tags:[]}),_g(h,"MDXContent")&&d&&!VM(d,"MDXLayout")&&o[0].components.push("MDXLayout"));const p=o[0];if(!(!p||!_g(p.node,"_createMdxContent")&&!n)&&(d&&(d.node=h,u=d),u&&h.type==="JSXElement")){let f=h.openingElement.name;if(f.type==="JSXMemberExpression"){const g=[];for(;f.type==="JSXMemberExpression";)g.unshift(f.property.name),f=f.object;g.unshift(f.name);const m=g.join("."),y=f.name,b=VM(u,y);if(!Object.hasOwn(p.references,m)){const x=u.parent;(!b||x&&x.node.type==="FunctionDeclaration"&&_g(x.node,"_createMdxContent"))&&(p.references[m]={component:!0,node:h})}!p.objects.includes(y)&&!b&&p.objects.push(y)}else if(f.type!=="JSXNamespacedName"){if(_c(f.name)&&!/^[a-z]/.test(f.name)){const g=f.name;VM(u,g)||(g!=="MDXLayout"&&!Object.hasOwn(p.references,g)&&(p.references[g]={component:!0,node:h}),p.components.includes(g)||p.components.push(g))}else if(!(h.data&&h.data._mdxExplicitJsx)){const g=f.name;p.tags.includes(g)||p.tags.push(g);let m=["_components",g];if(_c(g)===!1){let y=p.idToInvalidComponentName.get(g);y===void 0&&(y=`_component${p.idToInvalidComponentName.size}`,p.idToInvalidComponentName.set(g,y)),m=[y]}h.openingElement.name=p7(m),h.closingElement&&(h.closingElement.name=p7(m))}}}},leave(h){const d=[],p=[],f=[],g=[];if(u&&u.node===h&&(u=u.parent),h.type==="FunctionDeclaration"||h.type==="FunctionExpression"||h.type==="ArrowFunctionExpression"){const m=h,y=o[o.length-1];let b;for(b of y.tags.sort())d.push({type:"Property",kind:"init",key:_c(b)?{type:"Identifier",name:b}:{type:"Literal",value:b},value:{type:"Literal",value:b},method:!1,shorthand:!1,computed:!1});p.push(...y.components);for(b of y.objects)p.includes(b)||p.push(b);p.sort();const x=[];if(d.length>0||p.length>0||y.idToInvalidComponentName.size>0){if(n&&(l=!0,f.push({type:"CallExpression",callee:{type:"Identifier",name:"_provideComponents"},arguments:[],optional:!1})),(_g(y.node,"MDXContent")||_g(y.node,"_createMdxContent"))&&f.push(ed(["props","components"])),d.length>0||f.length>1)for(const E of f)d.push({type:"SpreadElement",argument:E});let A=d.length>0?{type:"ObjectExpression",properties:d}:{type:"LogicalExpression",operator:"||",left:f[0],right:{type:"ObjectExpression",properties:[]}},T;if(p.length>0&&(T={type:"ObjectPattern",properties:p.map(function(E){return{type:"Property",kind:"init",key:{type:"Identifier",name:E==="MDXLayout"?"wrapper":E},value:{type:"Identifier",name:E},method:!1,shorthand:E!=="MDXLayout",computed:!1}})}),y.tags.length>0&&(g.push({type:"VariableDeclarator",id:{type:"Identifier",name:"_components"},init:A}),A={type:"Identifier",name:"_components"}),_g(y.node,"_createMdxContent"))for(const[E,P]of[...y.idToInvalidComponentName].sort(function([O],[M]){return O.localeCompare(M)}))g.push({type:"VariableDeclarator",id:{type:"Identifier",name:P},init:{type:"MemberExpression",object:{type:"Identifier",name:"_components"},property:{type:"Literal",value:E},computed:!0,optional:!1}});T&&g.push({type:"VariableDeclarator",id:T,init:A}),g.length>0&&x.push({type:"VariableDeclaration",kind:"const",declarations:g})}let S;for(S in y.references)if(Object.hasOwn(y.references,S)){const A=S.split(".");let T=0;for(;++T<A.length;){const E=A.slice(0,T).join(".");Object.hasOwn(y.references,E)||(y.references[E]={component:!1,node:y.references[S].node})}}const C=Object.keys(y.references).sort();let w=-1;for(;++w<C.length;){const A=C[w],T=y.references[A],E=go(hu(T.node)),P=[{type:"Literal",value:A},{type:"Literal",value:T.component}];c=!0,e&&E&&P.push({type:"Literal",value:E}),x.push({type:"IfStatement",test:{type:"UnaryExpression",operator:"!",prefix:!0,argument:ed(A.split("."))},consequent:{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"_missingMdxReference"},arguments:P,optional:!1}},alternate:void 0})}x.length>0&&(m.body.type!=="BlockStatement"&&(m.body={type:"BlockStatement",body:[{type:"ReturnStatement",argument:m.body}]}),m.body.body.unshift(...x)),o.pop()}}}),l&&n&&s.body.unshift(C7e(n,t)),c){const h=[{type:"Literal",value:"Expected "},{type:"ConditionalExpression",test:{type:"Identifier",name:"component"},consequent:{type:"Literal",value:"component"},alternate:{type:"Literal",value:"object"}},{type:"Literal",value:" `"},{type:"Identifier",name:"id"},{type:"Literal",value:"` to be defined: you likely forgot to import, pass, or provide it."}],d=[{type:"Identifier",name:"id"},{type:"Identifier",name:"component"}];e&&(h.push({type:"ConditionalExpression",test:{type:"Identifier",name:"place"},consequent:g7([{type:"Literal",value:"\nIts referenced in your code at `"},{type:"Identifier",name:"place"},{type:"Literal",value:(r.path?"` in `"+r.path:"")+"`"}]),alternate:{type:"Literal",value:""}}),d.push({type:"Identifier",name:"place"})),s.body.push({type:"FunctionDeclaration",id:{type:"Identifier",name:"_missingMdxReference"},generator:!1,async:!1,params:d,body:{type:"BlockStatement",body:[{type:"ThrowStatement",argument:{type:"NewExpression",callee:{type:"Identifier",name:"Error"},arguments:[g7(h)]}}]}})}t==="function-body"&&s.body.unshift({type:"ExpressionStatement",expression:{type:"Literal",value:"use strict"},directive:"use strict"})}}function C7e(i,e){const t=[{type:"ImportSpecifier",imported:{type:"Identifier",name:"useMDXComponents"},local:{type:"Identifier",name:"_provideComponents"}}];return e==="function-body"?{type:"VariableDeclaration",kind:"const",declarations:NN(t,ed(["arguments",0]))}:{type:"ImportDeclaration",specifiers:t,source:{type:"Literal",value:i}}}function _g(i,e){return!!(i&&"id"in i&&i.id&&i.id.name===e)}function VM(i,e){let t=i;for(;t;){if(t.declarations.has(e))return!0;t=t.parent||void 0}return!1}const{stringify:w7e}=JSON;if(!String.prototype.repeat)throw new Error("String.prototype.repeat is undefined, see https://github.com/davidbonnet/astring#installation");if(!String.prototype.endsWith)throw new Error("String.prototype.endsWith is undefined, see https://github.com/davidbonnet/astring#installation");const LS={"||":2,"??":3,"&&":4,"|":5,"^":6,"&":7,"==":8,"!=":8,"===":8,"!==":8,"<":9,">":9,"<=":9,">=":9,in:9,instanceof:9,"<<":10,">>":10,">>>":10,"+":11,"-":11,"*":12,"%":12,"/":12,"**":13},tl=17,A7e={ArrayExpression:20,TaggedTemplateExpression:20,ThisExpression:20,Identifier:20,PrivateIdentifier:20,Literal:18,TemplateLiteral:20,Super:20,SequenceExpression:20,MemberExpression:19,ChainExpression:19,CallExpression:19,NewExpression:19,ArrowFunctionExpression:tl,ClassExpression:tl,FunctionExpression:tl,ObjectExpression:tl,UpdateExpression:16,UnaryExpression:15,AwaitExpression:15,BinaryExpression:14,LogicalExpression:13,ConditionalExpression:4,AssignmentExpression:3,YieldExpression:2,RestElement:1};function vg(i,e){const{generator:t}=i;if(i.write("("),e!=null&&e.length>0){t[e[0].type](e[0],i);const{length:n}=e;for(let s=1;s<n;s++){const r=e[s];i.write(", "),t[r.type](r,i)}}i.write(")")}function Kie(i,e,t,n){const s=i.expressionsPrecedence[e.type];if(s===tl)return!0;const r=i.expressionsPrecedence[t.type];return s!==r?!n&&s===15&&r===14&&t.operator==="**"||s<r:s!==13&&s!==14?!1:e.operator==="**"&&t.operator==="**"?!n:s===13&&r===13&&(e.operator==="??"||t.operator==="??")?!0:n?LS[e.operator]<=LS[t.operator]:LS[e.operator]<LS[t.operator]}function DS(i,e,t,n){const{generator:s}=i;Kie(i,e,t,n)?(i.write("("),s[e.type](e,i),i.write(")")):s[e.type](e,i)}function k7e(i,e,t,n){const s=e.split(`
`),r=s.length-1;if(i.write(s[0].trim()),r>0){i.write(n);for(let a=1;a<r;a++)i.write(t+s[a].trim()+n);i.write(t+s[r].trim())}}function hr(i,e,t,n){const{length:s}=e;for(let r=0;r<s;r++){const a=e[r];i.write(t),a.type[0]==="L"?i.write("// "+a.value.trim()+`
`,a):(i.write("/*"),k7e(i,a.value,t,n),i.write("*/"+n))}}function T7e(i){let e=i;for(;e!=null;){const{type:t}=e;if(t[0]==="C"&&t[1]==="a")return!0;if(t[0]==="M"&&t[1]==="e"&&t[2]==="m")e=e.object;else return!1}}function UM(i,e){const{generator:t}=i,{declarations:n}=e;i.write(e.kind+" ");const{length:s}=n;if(s>0){t.VariableDeclarator(n[0],i);for(let r=1;r<s;r++)i.write(", "),t.VariableDeclarator(n[r],i)}}let m7,y7,_7,v7,b7,x7;const Xie={Program(i,e){const t=e.indent.repeat(e.indentLevel),{lineEnd:n,writeComments:s}=e;s&&i.comments!=null&&hr(e,i.comments,t,n);const r=i.body,{length:a}=r;for(let o=0;o<a;o++){const l=r[o];s&&l.comments!=null&&hr(e,l.comments,t,n),e.write(t),this[l.type](l,e),e.write(n)}s&&i.trailingComments!=null&&hr(e,i.trailingComments,t,n)},BlockStatement:x7=function(i,e){const t=e.indent.repeat(e.indentLevel++),{lineEnd:n,writeComments:s}=e,r=t+e.indent;e.write("{");const a=i.body;if(a!=null&&a.length>0){e.write(n),s&&i.comments!=null&&hr(e,i.comments,r,n);const{length:o}=a;for(let l=0;l<o;l++){const c=a[l];s&&c.comments!=null&&hr(e,c.comments,r,n),e.write(r),this[c.type](c,e),e.write(n)}e.write(t)}else s&&i.comments!=null&&(e.write(n),hr(e,i.comments,r,n),e.write(t));s&&i.trailingComments!=null&&hr(e,i.trailingComments,r,n),e.write("}"),e.indentLevel--},ClassBody:x7,StaticBlock(i,e){e.write("static "),this.BlockStatement(i,e)},EmptyStatement(i,e){e.write(";")},ExpressionStatement(i,e){const t=e.expressionsPrecedence[i.expression.type];t===tl||t===3&&i.expression.left.type[0]==="O"?(e.write("("),this[i.expression.type](i.expression,e),e.write(")")):this[i.expression.type](i.expression,e),e.write(";")},IfStatement(i,e){e.write("if ("),this[i.test.type](i.test,e),e.write(") "),this[i.consequent.type](i.consequent,e),i.alternate!=null&&(e.write(" else "),this[i.alternate.type](i.alternate,e))},LabeledStatement(i,e){this[i.label.type](i.label,e),e.write(": "),this[i.body.type](i.body,e)},BreakStatement(i,e){e.write("break"),i.label!=null&&(e.write(" "),this[i.label.type](i.label,e)),e.write(";")},ContinueStatement(i,e){e.write("continue"),i.label!=null&&(e.write(" "),this[i.label.type](i.label,e)),e.write(";")},WithStatement(i,e){e.write("with ("),this[i.object.type](i.object,e),e.write(") "),this[i.body.type](i.body,e)},SwitchStatement(i,e){const t=e.indent.repeat(e.indentLevel++),{lineEnd:n,writeComments:s}=e;e.indentLevel++;const r=t+e.indent,a=r+e.indent;e.write("switch ("),this[i.discriminant.type](i.discriminant,e),e.write(") {"+n);const{cases:o}=i,{length:l}=o;for(let c=0;c<l;c++){const u=o[c];s&&u.comments!=null&&hr(e,u.comments,r,n),u.test?(e.write(r+"case "),this[u.test.type](u.test,e),e.write(":"+n)):e.write(r+"default:"+n);const{consequent:h}=u,{length:d}=h;for(let p=0;p<d;p++){const f=h[p];s&&f.comments!=null&&hr(e,f.comments,a,n),e.write(a),this[f.type](f,e),e.write(n)}}e.indentLevel-=2,e.write(t+"}")},ReturnStatement(i,e){e.write("return"),i.argument&&(e.write(" "),this[i.argument.type](i.argument,e)),e.write(";")},ThrowStatement(i,e){e.write("throw "),this[i.argument.type](i.argument,e),e.write(";")},TryStatement(i,e){if(e.write("try "),this[i.block.type](i.block,e),i.handler){const{handler:t}=i;t.param==null?e.write(" catch "):(e.write(" catch ("),this[t.param.type](t.param,e),e.write(") ")),this[t.body.type](t.body,e)}i.finalizer&&(e.write(" finally "),this[i.finalizer.type](i.finalizer,e))},WhileStatement(i,e){e.write("while ("),this[i.test.type](i.test,e),e.write(") "),this[i.body.type](i.body,e)},DoWhileStatement(i,e){e.write("do "),this[i.body.type](i.body,e),e.write(" while ("),this[i.test.type](i.test,e),e.write(");")},ForStatement(i,e){if(e.write("for ("),i.init!=null){const{init:t}=i;t.type[0]==="V"?UM(e,t):this[t.type](t,e)}e.write("; "),i.test&&this[i.test.type](i.test,e),e.write("; "),i.update&&this[i.update.type](i.update,e),e.write(") "),this[i.body.type](i.body,e)},ForInStatement:m7=function(i,e){e.write(`for ${i.await?"await ":""}(`);const{left:t}=i;t.type[0]==="V"?UM(e,t):this[t.type](t,e),e.write(i.type[3]==="I"?" in ":" of "),this[i.right.type](i.right,e),e.write(") "),this[i.body.type](i.body,e)},ForOfStatement:m7,DebuggerStatement(i,e){e.write("debugger;",i)},FunctionDeclaration:y7=function(i,e){e.write((i.async?"async ":"")+(i.generator?"function* ":"function ")+(i.id?i.id.name:""),i),vg(e,i.params),e.write(" "),this[i.body.type](i.body,e)},FunctionExpression:y7,VariableDeclaration(i,e){UM(e,i),e.write(";")},VariableDeclarator(i,e){this[i.id.type](i.id,e),i.init!=null&&(e.write(" = "),this[i.init.type](i.init,e))},ClassDeclaration(i,e){if(e.write("class "+(i.id?`${i.id.name} `:""),i),i.superClass){e.write("extends ");const{superClass:t}=i,{type:n}=t,s=e.expressionsPrecedence[n];(n[0]!=="C"||n[1]!=="l"||n[5]!=="E")&&(s===tl||s<e.expressionsPrecedence.ClassExpression)?(e.write("("),this[i.superClass.type](t,e),e.write(")")):this[t.type](t,e),e.write(" ")}this.ClassBody(i.body,e)},ImportDeclaration(i,e){e.write("import ");const{specifiers:t,attributes:n}=i,{length:s}=t;let r=0;if(s>0){for(;r<s;){r>0&&e.write(", ");const a=t[r],o=a.type[6];if(o==="D")e.write(a.local.name,a),r++;else if(o==="N")e.write("* as "+a.local.name,a),r++;else break}if(r<s){for(e.write("{");;){const a=t[r],{name:o}=a.imported;if(e.write(o,a),o!==a.local.name&&e.write(" as "+a.local.name),++r<s)e.write(", ");else break}e.write("}")}e.write(" from ")}if(this.Literal(i.source,e),n&&n.length>0){e.write(" with { ");for(let a=0;a<n.length;a++)this.ImportAttribute(n[a],e),a<n.length-1&&e.write(", ");e.write(" }")}e.write(";")},ImportAttribute(i,e){this.Identifier(i.key,e),e.write(": "),this.Literal(i.value,e)},ImportExpression(i,e){e.write("import("),this[i.source.type](i.source,e),e.write(")")},ExportDefaultDeclaration(i,e){e.write("export default "),this[i.declaration.type](i.declaration,e),e.expressionsPrecedence[i.declaration.type]!=null&&i.declaration.type[0]!=="F"&&e.write(";")},ExportNamedDeclaration(i,e){if(e.write("export "),i.declaration)this[i.declaration.type](i.declaration,e);else{e.write("{");const{specifiers:t}=i,{length:n}=t;if(n>0)for(let s=0;;){const r=t[s],{name:a}=r.local;if(e.write(a,r),a!==r.exported.name&&e.write(" as "+r.exported.name),++s<n)e.write(", ");else break}if(e.write("}"),i.source&&(e.write(" from "),this.Literal(i.source,e)),i.attributes&&i.attributes.length>0){e.write(" with { ");for(let s=0;s<i.attributes.length;s++)this.ImportAttribute(i.attributes[s],e),s<i.attributes.length-1&&e.write(", ");e.write(" }")}e.write(";")}},ExportAllDeclaration(i,e){if(i.exported!=null?e.write("export * as "+i.exported.name+" from "):e.write("export * from "),this.Literal(i.source,e),i.attributes&&i.attributes.length>0){e.write(" with { ");for(let t=0;t<i.attributes.length;t++)this.ImportAttribute(i.attributes[t],e),t<i.attributes.length-1&&e.write(", ");e.write(" }")}e.write(";")},MethodDefinition(i,e){i.static&&e.write("static ");const t=i.kind[0];(t==="g"||t==="s")&&e.write(i.kind+" "),i.value.async&&e.write("async "),i.value.generator&&e.write("*"),i.computed?(e.write("["),this[i.key.type](i.key,e),e.write("]")):this[i.key.type](i.key,e),vg(e,i.value.params),e.write(" "),this[i.value.body.type](i.value.body,e)},ClassExpression(i,e){this.ClassDeclaration(i,e)},ArrowFunctionExpression(i,e){e.write(i.async?"async ":"",i);const{params:t}=i;t!=null&&(t.length===1&&t[0].type[0]==="I"?e.write(t[0].name,t[0]):vg(e,i.params)),e.write(" => "),i.body.type[0]==="O"?(e.write("("),this.ObjectExpression(i.body,e),e.write(")")):this[i.body.type](i.body,e)},ThisExpression(i,e){e.write("this",i)},Super(i,e){e.write("super",i)},RestElement:_7=function(i,e){e.write("..."),this[i.argument.type](i.argument,e)},SpreadElement:_7,YieldExpression(i,e){e.write(i.delegate?"yield*":"yield"),i.argument&&(e.write(" "),this[i.argument.type](i.argument,e))},AwaitExpression(i,e){e.write("await ",i),DS(e,i.argument,i)},TemplateLiteral(i,e){const{quasis:t,expressions:n}=i;e.write("`");const{length:s}=n;for(let a=0;a<s;a++){const o=n[a],l=t[a];e.write(l.value.raw,l),e.write("${"),this[o.type](o,e),e.write("}")}const r=t[t.length-1];e.write(r.value.raw,r),e.write("`")},TemplateElement(i,e){e.write(i.value.raw,i)},TaggedTemplateExpression(i,e){DS(e,i.tag,i),this[i.quasi.type](i.quasi,e)},ArrayExpression:b7=function(i,e){if(e.write("["),i.elements.length>0){const{elements:t}=i,{length:n}=t;for(let s=0;;){const r=t[s];if(r!=null&&this[r.type](r,e),++s<n)e.write(", ");else{r==null&&e.write(", ");break}}}e.write("]")},ArrayPattern:b7,ObjectExpression(i,e){const t=e.indent.repeat(e.indentLevel++),{lineEnd:n,writeComments:s}=e,r=t+e.indent;if(e.write("{"),i.properties.length>0){e.write(n),s&&i.comments!=null&&hr(e,i.comments,r,n);const a=","+n,{properties:o}=i,{length:l}=o;for(let c=0;;){const u=o[c];if(s&&u.comments!=null&&hr(e,u.comments,r,n),e.write(r),this[u.type](u,e),++c<l)e.write(a);else break}e.write(n),s&&i.trailingComments!=null&&hr(e,i.trailingComments,r,n),e.write(t+"}")}else s?i.comments!=null?(e.write(n),hr(e,i.comments,r,n),i.trailingComments!=null&&hr(e,i.trailingComments,r,n),e.write(t+"}")):i.trailingComments!=null?(e.write(n),hr(e,i.trailingComments,r,n),e.write(t+"}")):e.write("}"):e.write("}");e.indentLevel--},Property(i,e){i.method||i.kind[0]!=="i"?this.MethodDefinition(i,e):(i.shorthand||(i.computed?(e.write("["),this[i.key.type](i.key,e),e.write("]")):this[i.key.type](i.key,e),e.write(": ")),this[i.value.type](i.value,e))},PropertyDefinition(i,e){if(i.static&&e.write("static "),i.computed&&e.write("["),this[i.key.type](i.key,e),i.computed&&e.write("]"),i.value==null){i.key.type[0]!=="F"&&e.write(";");return}e.write(" = "),this[i.value.type](i.value,e),e.write(";")},ObjectPattern(i,e){if(e.write("{"),i.properties.length>0){const{properties:t}=i,{length:n}=t;for(let s=0;this[t[s].type](t[s],e),++s<n;)e.write(", ")}e.write("}")},SequenceExpression(i,e){vg(e,i.expressions)},UnaryExpression(i,e){if(i.prefix){const{operator:t,argument:n,argument:{type:s}}=i;e.write(t);const r=Kie(e,n,i);!r&&(t.length>1||s[0]==="U"&&(s[1]==="n"||s[1]==="p")&&n.prefix&&n.operator[0]===t&&(t==="+"||t==="-"))&&e.write(" "),r?(e.write(t.length>1?" (":"("),this[s](n,e),e.write(")")):this[s](n,e)}else this[i.argument.type](i.argument,e),e.write(i.operator)},UpdateExpression(i,e){i.prefix?(e.write(i.operator),this[i.argument.type](i.argument,e)):(this[i.argument.type](i.argument,e),e.write(i.operator))},AssignmentExpression(i,e){this[i.left.type](i.left,e),e.write(" "+i.operator+" "),this[i.right.type](i.right,e)},AssignmentPattern(i,e){this[i.left.type](i.left,e),e.write(" = "),this[i.right.type](i.right,e)},BinaryExpression:v7=function(i,e){const t=i.operator==="in";t&&e.write("("),DS(e,i.left,i,!1),e.write(" "+i.operator+" "),DS(e,i.right,i,!0),t&&e.write(")")},LogicalExpression:v7,ConditionalExpression(i,e){const{test:t}=i,n=e.expressionsPrecedence[t.type];n===tl||n<=e.expressionsPrecedence.ConditionalExpression?(e.write("("),this[t.type](t,e),e.write(")")):this[t.type](t,e),e.write(" ? "),this[i.consequent.type](i.consequent,e),e.write(" : "),this[i.alternate.type](i.alternate,e)},NewExpression(i,e){e.write("new ");const t=e.expressionsPrecedence[i.callee.type];t===tl||t<e.expressionsPrecedence.CallExpression||T7e(i.callee)?(e.write("("),this[i.callee.type](i.callee,e),e.write(")")):this[i.callee.type](i.callee,e),vg(e,i.arguments)},CallExpression(i,e){const t=e.expressionsPrecedence[i.callee.type];t===tl||t<e.expressionsPrecedence.CallExpression?(e.write("("),this[i.callee.type](i.callee,e),e.write(")")):this[i.callee.type](i.callee,e),i.optional&&e.write("?."),vg(e,i.arguments)},ChainExpression(i,e){this[i.expression.type](i.expression,e)},MemberExpression(i,e){const t=e.expressionsPrecedence[i.object.type];t===tl||t<e.expressionsPrecedence.MemberExpression?(e.write("("),this[i.object.type](i.object,e),e.write(")")):this[i.object.type](i.object,e),i.computed?(i.optional&&e.write("?."),e.write("["),this[i.property.type](i.property,e),e.write("]")):(i.optional?e.write("?."):e.write("."),this[i.property.type](i.property,e))},MetaProperty(i,e){e.write(i.meta.name+"."+i.property.name,i)},Identifier(i,e){e.write(i.name,i)},PrivateIdentifier(i,e){e.write(`#${i.name}`,i)},Literal(i,e){i.raw!=null?e.write(i.raw,i):i.regex!=null?this.RegExpLiteral(i,e):i.bigint!=null?e.write(i.bigint+"n",i):e.write(w7e(i.value),i)},RegExpLiteral(i,e){const{regex:t}=i;e.write(`/${t.pattern}/${t.flags}`,i)}},E7e={};class P7e{constructor(e){const t=e??E7e;this.output="",t.output!=null?(this.output=t.output,this.write=this.writeToStream):this.output="",this.generator=t.generator!=null?t.generator:Xie,this.expressionsPrecedence=t.expressionsPrecedence!=null?t.expressionsPrecedence:A7e,this.indent=t.indent!=null?t.indent:"  ",this.lineEnd=t.lineEnd!=null?t.lineEnd:`
`,this.indentLevel=t.startingIndentLevel!=null?t.startingIndentLevel:0,this.writeComments=t.comments?t.comments:!1,t.sourceMap!=null&&(this.write=t.output==null?this.writeAndMap:this.writeToStreamAndMap,this.sourceMap=t.sourceMap,this.line=1,this.column=0,this.lineEndSize=this.lineEnd.split(`
`).length-1,this.mapping={original:null,generated:this,name:void 0,source:t.sourceMap.file||t.sourceMap._file})}write(e){this.output+=e}writeToStream(e){this.output.write(e)}writeAndMap(e,t){this.output+=e,this.map(e,t)}writeToStreamAndMap(e,t){this.output.write(e),this.map(e,t)}map(e,t){if(t!=null){const{type:r}=t;if(r[0]==="L"&&r[2]==="n"){this.column=0,this.line++;return}if(t.loc!=null){const{mapping:a}=this;a.original=t.loc.start,a.name=t.name,this.sourceMap.addMapping(a)}if(r[0]==="T"&&r[8]==="E"||r[0]==="L"&&r[1]==="i"&&typeof t.value=="string"){const{length:a}=e;let{column:o,line:l}=this;for(let c=0;c<a;c++)e[c]===`
`?(o=0,l++):o++;this.column=o,this.line=l;return}}const{length:n}=e,{lineEnd:s}=this;n>0&&(this.lineEndSize>0&&(s.length===1?e[n-1]===s:e.endsWith(s))?(this.line+=this.lineEndSize,this.column=0):this.column+=n)}toString(){return this.output}}function O7e(i,e){const t=new P7e(e);return t.generator[i.type](i,t),t.output}const M7e={};function S7(i,e){const{SourceMapGenerator:t,filePath:n,handlers:s}=e||M7e,r=t?new t({file:n||"<unknown>.js"}):void 0,a=O7e(i,{comments:!0,generator:{...Xie,...s},sourceMap:r||void 0}),o=r?r.toJSON():void 0;return{value:a,map:o}}const C7={JSXAttribute:I7e,JSXClosingElement:R7e,JSXClosingFragment:L7e,JSXElement:D7e,JSXEmptyExpression:F7e,JSXExpressionContainer:B7e,JSXFragment:j7e,JSXIdentifier:N7e,JSXMemberExpression:$7e,JSXNamespacedName:z7e,JSXOpeningElement:H7e,JSXOpeningFragment:V7e,JSXSpreadAttribute:U7e,JSXText:W7e};function I7e(i,e){this[i.name.type](i.name,e),i.value!==null&&i.value!==void 0&&(e.write("="),i.value.type==="Literal"?e.write('"'+Yie(String(i.value.value)).replace(/"/g,"&quot;")+'"',i):this[i.value.type](i.value,e))}function R7e(i,e){e.write("</"),this[i.name.type](i.name,e),e.write(">")}function L7e(i,e){e.write("</>",i)}function D7e(i,e){let t=-1;if(this[i.openingElement.type](i.openingElement,e),i.children)for(;++t<i.children.length;){const n=i.children[t];if(n.type==="JSXSpreadChild")throw new Error("JSX spread children are not supported");this[n.type](n,e)}i.closingElement&&this[i.closingElement.type](i.closingElement,e)}function F7e(){}function B7e(i,e){e.write("{"),this[i.expression.type](i.expression,e),e.write("}")}function j7e(i,e){let t=-1;if(this[i.openingFragment.type](i.openingFragment,e),i.children)for(;++t<i.children.length;){const n=i.children[t];if(n.type==="JSXSpreadChild")throw new Error("JSX spread children are not supported");this[n.type](n,e)}this[i.closingFragment.type](i.closingFragment,e)}function N7e(i,e){e.write(i.name,i)}function $7e(i,e){this[i.object.type](i.object,e),e.write("."),this[i.property.type](i.property,e)}function z7e(i,e){this[i.namespace.type](i.namespace,e),e.write(":"),this[i.name.type](i.name,e)}function H7e(i,e){let t=-1;if(e.write("<"),this[i.name.type](i.name,e),i.attributes)for(;++t<i.attributes.length;)e.write(" "),this[i.attributes[t].type](i.attributes[t],e);e.write(i.selfClosing?" />":">")}function V7e(i,e){e.write("<>",i)}function U7e(i,e){e.write("{"),this.SpreadElement(i,e),e.write("}")}function W7e(i,e){e.write(Yie(i.value).replace(/[<>{}]/g,G7e),i)}function Yie(i){return i.replace(/&(?=[#a-z])/gi,"&amp;")}function G7e(i){return i==="<"?"&lt;":i===">"?"&gt;":i==="{"?"&#123;":"&#125;"}function K7e(i){const e=this,{SourceMapGenerator:t}=i;e.compiler=n;function n(s,r){const a=t?S7(s,{SourceMapGenerator:t,filePath:r.path||"unknown.mdx",handlers:C7}):S7(s,{handlers:C7});return r.map=a.map,a.value}}function X7e(i,e){const t={type:"Block",value:i.value};e.inherit(i,t),e.comments.push(t);const n={type:"JSXEmptyExpression",comments:[Object.assign({},t,{leading:!1,trailing:!0})]};e.patch(i,n);const s={type:"JSXExpressionContainer",expression:n};return e.patch(i,s),s}function Y7e(i,e){const t={};return(i[i.length-1]===""?[...i,""]:i).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}class wx{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}wx.prototype.property={};wx.prototype.normal={};wx.prototype.space=null;function qie(i,e){const t={},n={};let s=-1;for(;++s<i.length;)Object.assign(t,i[s].property),Object.assign(n,i[s].normal);return new wx(t,n,e)}function WL(i){return i.toLowerCase()}class Po{constructor(e,t){this.property=e,this.attribute=t}}Po.prototype.space=null;Po.prototype.boolean=!1;Po.prototype.booleanish=!1;Po.prototype.overloadedBoolean=!1;Po.prototype.number=!1;Po.prototype.commaSeparated=!1;Po.prototype.spaceSeparated=!1;Po.prototype.commaOrSpaceSeparated=!1;Po.prototype.mustUseProperty=!1;Po.prototype.defined=!1;let q7e=0;const bt=Xf(),Hn=Xf(),Zie=Xf(),we=Xf(),ji=Xf(),zm=Xf(),oa=Xf();function Xf(){return 2**++q7e}const GL=Object.freeze(Object.defineProperty({__proto__:null,boolean:bt,booleanish:Hn,commaOrSpaceSeparated:oa,commaSeparated:zm,number:we,overloadedBoolean:Zie,spaceSeparated:ji},Symbol.toStringTag,{value:"Module"})),WM=Object.keys(GL);class $N extends Po{constructor(e,t,n,s){let r=-1;if(super(e,t),w7(this,"space",s),typeof n=="number")for(;++r<WM.length;){const a=WM[r];w7(this,WM[r],(n&GL[a])===GL[a])}}}$N.prototype.defined=!0;function w7(i,e,t){t&&(i[e]=t)}const Z7e={}.hasOwnProperty;function C0(i){const e={},t={};let n;for(n in i.properties)if(Z7e.call(i.properties,n)){const s=i.properties[n],r=new $N(n,i.transform(i.attributes||{},n),s,i.space);i.mustUseProperty&&i.mustUseProperty.includes(n)&&(r.mustUseProperty=!0),e[n]=r,t[WL(n)]=n,t[WL(r.attribute)]=n}return new wx(e,t,i.space)}const Jie=C0({space:"xlink",transform(i,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Qie=C0({space:"xml",transform(i,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function ene(i,e){return e in i?i[e]:e}function tne(i,e){return ene(i,e.toLowerCase())}const ine=C0({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:tne,properties:{xmlns:null,xmlnsXLink:null}}),nne=C0({transform(i,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Hn,ariaAutoComplete:null,ariaBusy:Hn,ariaChecked:Hn,ariaColCount:we,ariaColIndex:we,ariaColSpan:we,ariaControls:ji,ariaCurrent:null,ariaDescribedBy:ji,ariaDetails:null,ariaDisabled:Hn,ariaDropEffect:ji,ariaErrorMessage:null,ariaExpanded:Hn,ariaFlowTo:ji,ariaGrabbed:Hn,ariaHasPopup:null,ariaHidden:Hn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ji,ariaLevel:we,ariaLive:null,ariaModal:Hn,ariaMultiLine:Hn,ariaMultiSelectable:Hn,ariaOrientation:null,ariaOwns:ji,ariaPlaceholder:null,ariaPosInSet:we,ariaPressed:Hn,ariaReadOnly:Hn,ariaRelevant:null,ariaRequired:Hn,ariaRoleDescription:ji,ariaRowCount:we,ariaRowIndex:we,ariaRowSpan:we,ariaSelected:Hn,ariaSetSize:we,ariaSort:null,ariaValueMax:we,ariaValueMin:we,ariaValueNow:we,ariaValueText:null,role:null}}),J7e=C0({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:tne,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:zm,acceptCharset:ji,accessKey:ji,action:null,allow:null,allowFullScreen:bt,allowPaymentRequest:bt,allowUserMedia:bt,alt:null,as:null,async:bt,autoCapitalize:null,autoComplete:ji,autoFocus:bt,autoPlay:bt,blocking:ji,capture:null,charSet:null,checked:bt,cite:null,className:ji,cols:we,colSpan:null,content:null,contentEditable:Hn,controls:bt,controlsList:ji,coords:we|zm,crossOrigin:null,data:null,dateTime:null,decoding:null,default:bt,defer:bt,dir:null,dirName:null,disabled:bt,download:Zie,draggable:Hn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:bt,formTarget:null,headers:ji,height:we,hidden:bt,high:we,href:null,hrefLang:null,htmlFor:ji,httpEquiv:ji,id:null,imageSizes:null,imageSrcSet:null,inert:bt,inputMode:null,integrity:null,is:null,isMap:bt,itemId:null,itemProp:ji,itemRef:ji,itemScope:bt,itemType:ji,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:bt,low:we,manifest:null,max:null,maxLength:we,media:null,method:null,min:null,minLength:we,multiple:bt,muted:bt,name:null,nonce:null,noModule:bt,noValidate:bt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:bt,optimum:we,pattern:null,ping:ji,placeholder:null,playsInline:bt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:bt,referrerPolicy:null,rel:ji,required:bt,reversed:bt,rows:we,rowSpan:we,sandbox:ji,scope:null,scoped:bt,seamless:bt,selected:bt,shadowRootClonable:bt,shadowRootDelegatesFocus:bt,shadowRootMode:null,shape:null,size:we,sizes:null,slot:null,span:we,spellCheck:Hn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:we,step:null,style:null,tabIndex:we,target:null,title:null,translate:null,type:null,typeMustMatch:bt,useMap:null,value:Hn,width:we,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ji,axis:null,background:null,bgColor:null,border:we,borderColor:null,bottomMargin:we,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:bt,declare:bt,event:null,face:null,frame:null,frameBorder:null,hSpace:we,leftMargin:we,link:null,longDesc:null,lowSrc:null,marginHeight:we,marginWidth:we,noResize:bt,noHref:bt,noShade:bt,noWrap:bt,object:null,profile:null,prompt:null,rev:null,rightMargin:we,rules:null,scheme:null,scrolling:Hn,standby:null,summary:null,text:null,topMargin:we,valueType:null,version:null,vAlign:null,vLink:null,vSpace:we,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:bt,disableRemotePlayback:bt,prefix:null,property:null,results:we,security:null,unselectable:null}}),Q7e=C0({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:ene,properties:{about:oa,accentHeight:we,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:we,amplitude:we,arabicForm:null,ascent:we,attributeName:null,attributeType:null,azimuth:we,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:we,by:null,calcMode:null,capHeight:we,className:ji,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:we,diffuseConstant:we,direction:null,display:null,dur:null,divisor:we,dominantBaseline:null,download:bt,dx:null,dy:null,edgeMode:null,editable:null,elevation:we,enableBackground:null,end:null,event:null,exponent:we,externalResourcesRequired:null,fill:null,fillOpacity:we,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:zm,g2:zm,glyphName:zm,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:we,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:we,horizOriginX:we,horizOriginY:we,id:null,ideographic:we,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:we,k:we,k1:we,k2:we,k3:we,k4:we,kernelMatrix:oa,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:we,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:we,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:we,overlineThickness:we,paintOrder:null,panose1:null,path:null,pathLength:we,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ji,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:we,pointsAtY:we,pointsAtZ:we,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:oa,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:oa,rev:oa,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:oa,requiredFeatures:oa,requiredFonts:oa,requiredFormats:oa,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:we,specularExponent:we,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:we,strikethroughThickness:we,string:null,stroke:null,strokeDashArray:oa,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:we,strokeOpacity:we,strokeWidth:null,style:null,surfaceScale:we,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:oa,tabIndex:we,tableValues:null,target:null,targetX:we,targetY:we,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:oa,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:we,underlineThickness:we,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:we,values:null,vAlphabetic:we,vMathematical:we,vectorEffect:null,vHanging:we,vIdeographic:we,version:null,vertAdvY:we,vertOriginX:we,vertOriginY:we,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:we,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),e8e=/^data[-\w.:]+$/i,A7=/-[a-z]/g,t8e=/[A-Z]/g;function i8e(i,e){const t=WL(e);let n=e,s=Po;if(t in i.normal)return i.property[i.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&e8e.test(e)){if(e.charAt(4)==="-"){const r=e.slice(5).replace(A7,s8e);n="data"+r.charAt(0).toUpperCase()+r.slice(1)}else{const r=e.slice(4);if(!A7.test(r)){let a=r.replace(t8e,n8e);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}s=$N}return new s(n,e)}function n8e(i){return"-"+i.toLowerCase()}function s8e(i){return i.charAt(1).toUpperCase()}const r8e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},a8e=qie([Qie,Jie,ine,nne,J7e],"html"),zN=qie([Qie,Jie,ine,nne,Q7e],"svg");function o8e(i){return i.join(" ").trim()}var HN={exports:{}},k7=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,l8e=/\n/g,c8e=/^\s*/,u8e=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,h8e=/^:\s*/,d8e=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,p8e=/^[;\s]*/,f8e=/^\s+|\s+$/g,g8e=`
`,T7="/",E7="*",gp="",m8e="comment",y8e="declaration",_8e=function(i,e){if(typeof i!="string")throw new TypeError("First argument must be a string");if(!i)return[];e=e||{};var t=1,n=1;function s(f){var g=f.match(l8e);g&&(t+=g.length);var m=f.lastIndexOf(g8e);n=~m?f.length-m:n+f.length}function r(){var f={line:t,column:n};return function(g){return g.position=new a(f),c(),g}}function a(f){this.start=f,this.end={line:t,column:n},this.source=e.source}a.prototype.content=i;function o(f){var g=new Error(e.source+":"+t+":"+n+": "+f);if(g.reason=f,g.filename=e.source,g.line=t,g.column=n,g.source=i,!e.silent)throw g}function l(f){var g=f.exec(i);if(g){var m=g[0];return s(m),i=i.slice(m.length),g}}function c(){l(c8e)}function u(f){var g;for(f=f||[];g=h();)g!==!1&&f.push(g);return f}function h(){var f=r();if(!(T7!=i.charAt(0)||E7!=i.charAt(1))){for(var g=2;gp!=i.charAt(g)&&(E7!=i.charAt(g)||T7!=i.charAt(g+1));)++g;if(g+=2,gp===i.charAt(g-1))return o("End of comment missing");var m=i.slice(2,g-2);return n+=2,s(m),i=i.slice(g),n+=2,f({type:m8e,comment:m})}}function d(){var f=r(),g=l(u8e);if(g){if(h(),!l(h8e))return o("property missing ':'");var m=l(d8e),y=f({type:y8e,property:P7(g[0].replace(k7,gp)),value:m?P7(m[0].replace(k7,gp)):gp});return l(p8e),y}}function p(){var f=[];u(f);for(var g;g=d();)g!==!1&&(f.push(g),u(f));return f}return c(),p()};function P7(i){return i?i.replace(f8e,gp):gp}var v8e=_8e;function sne(i,e){var t=null;if(!i||typeof i!="string")return t;for(var n,s=v8e(i),r=typeof e=="function",a,o,l=0,c=s.length;l<c;l++)n=s[l],a=n.property,o=n.value,r?e(a,o,n):o&&(t||(t={}),t[a]=o);return t}HN.exports=sne;HN.exports.default=sne;var b8e=HN.exports;const x8e=Xe(b8e),KL={}.hasOwnProperty,S8e=/[A-Z]/g,C8e=/-([a-z])/g,w8e=new Set(["td","th"]);function A8e(i,e){const t=e.schema;let n=t;const s=i.properties||{};t.space==="html"&&i.tagName.toLowerCase()==="svg"&&(n=zN,e.schema=n);const r=e.all(i),a=[];let o,l,c;for(o in s)if(KL.call(s,o)){let h=s[o];const d=i8e(n,o);let p;if(h==null||h===!1||typeof h=="number"&&Number.isNaN(h)||!h&&d.boolean)continue;if(o=e.elementAttributeNameCase==="react"&&d.space?r8e[d.property]||d.property:d.attribute,Array.isArray(h)&&(h=d.commaSeparated?Y7e(h):o8e(h)),o==="style"){let f=typeof h=="object"?h:k8e(String(h),i.tagName);e.stylePropertyNameCase==="css"&&(f=T8e(f));const g=[];let m;for(m in f)KL.call(f,m)&&g.push({type:"Property",method:!1,shorthand:!1,computed:!1,key:_c(m)?{type:"Identifier",name:m}:{type:"Literal",value:m},value:{type:"Literal",value:String(f[m])},kind:"init"});c=g,p={type:"JSXExpressionContainer",expression:{type:"ObjectExpression",properties:g}}}else if(h===!0)p=null;else if(e.tableCellAlignToStyle&&w8e.has(i.tagName)&&o==="align"){l=String(h);continue}else p={type:"Literal",value:String(h)};_c(o,{jsx:!0})?a.push({type:"JSXAttribute",name:{type:"JSXIdentifier",name:o},value:p}):a.push({type:"JSXSpreadAttribute",argument:{type:"ObjectExpression",properties:[{type:"Property",method:!1,shorthand:!1,computed:!1,key:{type:"Literal",value:String(o)},value:p||{type:"Literal",value:!0},kind:"init"}]}})}if(l!==void 0){c||(c=[],a.push({type:"JSXAttribute",name:{type:"JSXIdentifier",name:"style"},value:{type:"JSXExpressionContainer",expression:{type:"ObjectExpression",properties:c}}}));const h=e.stylePropertyNameCase==="css"?rne("textAlign"):"textAlign";c.push({type:"Property",method:!1,shorthand:!1,computed:!1,key:_c(h)?{type:"Identifier",name:h}:{type:"Literal",value:h},value:{type:"Literal",value:l},kind:"init"})}e.schema=t;const u={type:"JSXElement",openingElement:{type:"JSXOpeningElement",attributes:a,name:e.createJsxElementName(i.tagName),selfClosing:r.length===0},closingElement:r.length>0?{type:"JSXClosingElement",name:e.createJsxElementName(i.tagName)}:null,children:r};return e.inherit(i,u),u}function k8e(i,e){const t={};try{x8e(i,n)}catch(s){const r=s;throw new Error("Could not parse `style` attribute on `"+e+"`",{cause:r})}return t;function n(s,r){let a=s;a.slice(0,2)!=="--"&&(a.slice(0,4)==="-ms-"&&(a="ms-"+a.slice(4)),a=a.replace(C8e,E8e)),t[a]=r}}function T8e(i){const e={};let t;for(t in i)KL.call(i,t)&&(e[rne(t)]=i[t]);return e}function rne(i){let e=i.replace(S8e,P8e);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function E8e(i,e){return e.toUpperCase()}function P8e(i){return"-"+i.toLowerCase()}const O8e={}.hasOwnProperty,M8e=[];function SA(i,e){const t=e?[...e].sort(VN):M8e;t.length>0&&ane(i,{comments:t,index:0})}function ane(i,e){if(e.index===e.comments.length)return;const t=[],n=[];let s;for(s in i)if(O8e.call(i,s)){const a=i[s];if(a&&typeof a=="object"&&s!=="comments")if(Array.isArray(a)){let o=-1;for(;++o<a.length;)a[o]&&typeof a[o].type=="string"&&t.push(a[o])}else typeof a.type=="string"&&t.push(a)}t.sort(VN),n.push(...O7(e,i,!1,{leading:!0,trailing:!1}));let r=-1;for(;++r<t.length;)ane(t[r],e);n.push(...O7(e,i,!0,{leading:!1,trailing:t.length>0})),n.length>0&&(i.comments=n)}function O7(i,e,t,n){const s=[];for(;i.comments[i.index]&&VN(i.comments[i.index],e,t)<1;)s.push(Object.assign({},i.comments[i.index++],n));return s}function VN(i,e,t){const n=t?"end":"start";return i.range&&e.range?i.range[0]-e.range[t?1:0]:i.loc&&i.loc.start&&e.loc&&e.loc[n]?i.loc.start.line-e.loc[n].line||i.loc.start.column-e.loc[n].column:"start"in i&&n in e?i.start-e[n]:Number.NaN}function M7(i,e){const t=i.data&&i.data.estree,n=t&&t.comments||[];let s;t&&(e.comments.push(...n),SA(t,t.comments),s=t.body[0]&&t.body[0].type==="ExpressionStatement"&&t.body[0].expression||void 0),s||(s={type:"JSXEmptyExpression"},e.patch(i,s));const r={type:"JSXExpressionContainer",expression:s};return e.inherit(i,r),r}function I7(i,e){const t=e.schema;let n=t;const s=i.attributes||[];let r=-1;i.name&&t.space==="html"&&i.name.toLowerCase()==="svg"&&(n=zN,e.schema=n);const a=e.all(i),o=[];for(;++r<s.length;){const c=s[r],u=c.value;let h;if(c.type==="mdxJsxAttribute"){if(u==null)h=null;else if(typeof u=="object"){const p=u.data&&u.data.estree,f=p&&p.comments||[];let g;p&&(e.comments.push(...f),SA(p,p.comments),g=p.body[0]&&p.body[0].type==="ExpressionStatement"&&p.body[0].expression||void 0),h={type:"JSXExpressionContainer",expression:g||{type:"JSXEmptyExpression"}},e.inherit(u,h)}else h={type:"Literal",value:String(u)};const d={type:"JSXAttribute",name:e.createJsxAttributeName(c.name),value:h};e.inherit(c,d),o.push(d)}else{const d=c.data&&c.data.estree,p=d&&d.comments||[];let f;d&&(e.comments.push(...p),SA(d,d.comments),f=d.body[0]&&d.body[0].type==="ExpressionStatement"&&d.body[0].expression&&d.body[0].expression.type==="ObjectExpression"&&d.body[0].expression.properties&&d.body[0].expression.properties[0]&&d.body[0].expression.properties[0].type==="SpreadElement"&&d.body[0].expression.properties[0].argument||void 0);const g={type:"JSXSpreadAttribute",argument:f||{type:"ObjectExpression",properties:[]}};e.inherit(c,g),o.push(g)}}e.schema=t;const l=i.name?{type:"JSXElement",openingElement:{type:"JSXOpeningElement",attributes:o,name:e.createJsxElementName(i.name),selfClosing:a.length===0},closingElement:a.length>0?{type:"JSXClosingElement",name:e.createJsxElementName(i.name)}:null,children:a}:{type:"JSXFragment",openingFragment:{type:"JSXOpeningFragment"},closingFragment:{type:"JSXClosingFragment"},children:a};return e.inherit(i,l),l}function I8e(i,e){const t=i.data&&i.data.estree,n=t&&t.comments||[];t&&(e.comments.push(...n),SA(t,n),e.esm.push(...t.body))}const R8e=/[ \t\n\f\r]/g;function L8e(i){return typeof i=="object"?i.type==="text"?R7(i.value):!1:R7(i)}function R7(i){return i.replace(R8e,"")===""}function D8e(i,e){const t=e.all(i),n=[];let s=-1,r;for(;++s<t.length;){const o=t[s];o.type==="JSXExpressionContainer"&&o.expression.type==="Literal"&&L8e(String(o.expression.value))?r&&r.push(o):(r&&n.push(...r),n.push(o),r=[])}const a={type:"JSXFragment",openingFragment:{type:"JSXOpeningFragment"},closingFragment:{type:"JSXClosingFragment"},children:n};return e.inherit(i,a),a}function F8e(i,e){const t=String(i.value||"");if(t){const n={type:"Literal",value:t};e.inherit(i,n);const s={type:"JSXExpressionContainer",expression:n};return e.patch(i,s),s}}const B8e={comment:X7e,doctype:j8e,element:A8e,mdxFlowExpression:M7,mdxJsxFlowElement:I7,mdxJsxTextElement:I7,mdxTextExpression:M7,mdxjsEsm:I8e,root:D8e,text:F8e};function j8e(){}const L7={}.hasOwnProperty;function N8e(i,e){const t=e||{};function n(s,...r){let a=n.invalid;const o=n.handlers;if(s&&L7.call(s,i)){const l=String(s[i]);a=L7.call(o,l)?o[l]:n.unknown}if(a)return a.call(this,s,...r)}return n.handlers=t.handlers||{},n.invalid=t.invalid,n.unknown=t.unknown,n}const $8e={}.hasOwnProperty,z8e=new Set(["table","tbody","thead","tfoot","tr"]);function H8e(i){const e=N8e("type",{invalid:V8e,unknown:U8e,handlers:{...B8e,...i.handlers}});return{elementAttributeNameCase:i.elementAttributeNameCase||"react",schema:i.space==="svg"?zN:a8e,stylePropertyNameCase:i.stylePropertyNameCase||"dom",tableCellAlignToStyle:i.tableCellAlignToStyle!==!1,comments:[],esm:[],all:W8e,createJsxAttributeName:K8e,createJsxElementName:X8e,handle:t,inherit:G8e,patch:one};function t(n){return e(n,this)}}function V8e(i){throw new Error("Cannot handle value `"+i+"`, expected node")}function U8e(i){throw new Error("Cannot handle unknown node `"+i.type+"`")}function W8e(i){const e=i.children||[];let t=-1;const n=[],s=this.schema.space==="html"&&i.type==="element"&&z8e.has(i.tagName.toLowerCase());for(;++t<e.length;){const r=e[t];if(s&&r.type==="text"&&r.value===`
`)continue;const a=this.handle(r);Array.isArray(a)?n.push(...a):a&&n.push(a)}return n}function G8e(i,e){const t=i.data;let n,s;if(one(i,e),t){for(s in t)$8e.call(t,s)&&s!=="estree"&&(n||(n={}),n[s]=t[s]);n&&(e.data=n)}}function one(i,e){const t=Bie(i);t&&t.start.offset!==void 0&&t.end.offset!==void 0&&(e.start=t.start.offset,e.end=t.end.offset,e.loc={start:{line:t.start.line,column:t.start.column-1},end:{line:t.end.line,column:t.end.column-1}},e.range=[t.start.offset,t.end.offset])}function K8e(i){const e=lne(i);if(e.type==="JSXMemberExpression")throw new Error("Member expressions in attribute names are not supported");return e}function X8e(i){return lne(i)}function lne(i){if(i.includes(".")){const e=i.split(".");let t=e.shift(),n={type:"JSXIdentifier",name:t};for(;t=e.shift();)n={type:"JSXMemberExpression",object:n,property:{type:"JSXIdentifier",name:t}};return n}if(i.includes(":")){const e=i.split(":");return{type:"JSXNamespacedName",namespace:{type:"JSXIdentifier",name:e[0]},name:{type:"JSXIdentifier",name:e[1]}}}return{type:"JSXIdentifier",name:i}}function Y8e(i,e){const t=H8e(e||{});let n=t.handle(i);const s=t.esm;if(n){n.type!=="JSXFragment"&&n.type!=="JSXElement"&&(n={type:"JSXFragment",openingFragment:{type:"JSXOpeningFragment"},closingFragment:{type:"JSXClosingFragment"},children:[n]},t.patch(i,n));const a={type:"ExpressionStatement",expression:n};t.patch(i,a),s.push(a)}const r={type:"Program",body:s,sourceType:"module",comments:t.comments};return t.patch(i,r),r}function q8e(i){return function(e){return Y8e(e,i)}}function Z8e(){return function(i){AP(i,"raw",function(e,t,n){if(n&&typeof t=="number")return n.children.splice(t,1),t})}}const J8e=/\s+/g,Q8e=/[\t\n\v\f\r ]+/g;function eVe(i,e){e?typeof e=="string"&&(e={style:e}):e={};const t=e.preserveLineEndings?tVe:iVe;return String(i).replace(e.style==="html"?Q8e:J8e,e.trim?nVe(t):t)}function tVe(i){const e=/\r?\n|\r/.exec(i);return e?e[0]:" "}function iVe(){return" "}function nVe(i){return e;function e(t,n,s){return n===0||n+t.length===s.length?"":i(t)}}function sVe(){return function(i){AP(i,function(e,t,n){let s=-1,r=!0,a=!1;if(n&&typeof t=="number"&&e.type==="paragraph"){const o=e.children;for(;++s<o.length;){const l=o[s];if(l.type==="mdxJsxTextElement"||l.type==="mdxTextExpression")a=!0;else if(!(l.type==="text"&&eVe(l.value,{style:"html",trim:!0})==="")){r=!1;break}}if(r&&a){s=-1;const l=[];for(;++s<o.length;){const c=o[s];c.type==="mdxJsxTextElement"&&(c.type="mdxJsxFlowElement"),c.type==="mdxTextExpression"&&(c.type="mdxFlowExpression"),c.type==="text"&&/^[\t\r\n ]+$/.test(String(c.value))||l.push(c)}return n.children.splice(t,1,...l),t}}if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement"){const o=e.data||(e.data={});o._mdxExplicitJsx=!0}})}}const rVe=["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"];let D7=!1;function cne(i){const e=i||{};e.format,(e.jsxRuntime==="classic"||e.pragma||e.pragmaFrag||e.pragmaImportSource)&&!D7&&(D7=!0,console.warn("Unexpected deprecated option `jsxRuntime: 'classic'`, `pragma`, `pragmaFrag`, or `pragmaImportSource`; see <https://mdxjs.com/migrating/v3/> on how to migrate"));const t=l7e().use(lHe);e.format!=="md"&&t.use(k9e);const n=e.remarkRehypeOptions||{};return t.use(sVe).use(e.remarkPlugins||[]).use(i7e,{...n,allowDangerousHtml:!0,passThrough:[...n.passThrough||[],...rVe]}).use(e.rehypePlugins||[]),e.format==="md"&&t.use(Z8e),t.use(q8e,e).use(m7e,e).use(S7e,e),e.jsx||t.use(x7e,e),t.use(K7e,e).use(e.recmaPlugins||[]),t}function une(i,e){const{file:t,options:n}=Ete(i,e);return cne(n).process(t)}function aVe(i,e){const{file:t,options:n}=Ete(i,e);return cne(n).processSync(t)}function hne(i){const{Fragment:e,baseUrl:t,development:n,jsx:s,jsxDEV:r,jsxs:a,useMDXComponents:o,...l}=i||{};if(!e)throw new Error("Expected `Fragment` given to `evaluate`");if(n){if(!r)throw new Error("Expected `jsxDEV` given to `evaluate`")}else{if(!s)throw new Error("Expected `jsx` given to `evaluate`");if(!a)throw new Error("Expected `jsxs` given to `evaluate`")}return{compiletime:{...l,development:n,outputFormat:"function-body",providerImportSource:o?"#":void 0},runtime:{Fragment:e,baseUrl:t,jsx:s,jsxDEV:r,jsxs:a,useMDXComponents:o}}}const oVe=Object.getPrototypeOf(dne).constructor;async function dne(i,e){return new oVe(String(i))(e)}function lVe(i,e){return new Function(String(i))(e)}async function cVe(i,e){const{compiletime:t,runtime:n}=hne(e);return dne(await une(i,t),n)}function uVe(i,e){const{compiletime:t,runtime:n}=hne(e);return lVe(aVe(i,t),n)}function hVe(i){if(typeof i!="string")throw new TypeError("Expected a string");return i.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function dVe(i,e,t){const s=CP((t||{}).ignore||[]),r=pVe(e);let a=-1;for(;++a<r.length;)Hie(i,"text",o);function o(c,u){let h=-1,d;for(;++h<u.length;){const p=u[h],f=d?d.children:void 0;if(s(p,f?f.indexOf(p):void 0,d))return;d=p}if(d)return l(c,u)}function l(c,u){const h=u[u.length-1],d=r[a][0],p=r[a][1];let f=0;const m=h.children.indexOf(c);let y=!1,b=[];d.lastIndex=0;let x=d.exec(c.value);for(;x;){const S=x.index,C={index:x.index,input:x.input,stack:[...u,c]};let w=p(...x,C);if(typeof w=="string"&&(w=w.length>0?{type:"text",value:w}:void 0),w===!1?d.lastIndex=S+1:(f!==S&&b.push({type:"text",value:c.value.slice(f,S)}),Array.isArray(w)?b.push(...w):w&&b.push(w),f=S+x[0].length,y=!0),!d.global)break;x=d.exec(c.value)}return y?(f<c.value.length&&b.push({type:"text",value:c.value.slice(f)}),h.children.splice(m,1,...b)):b=[c],m+b.length}}function pVe(i){const e=[];if(!Array.isArray(i))throw new TypeError("Expected find and replace tuple or list of tuples");const t=!i[0]||Array.isArray(i[0])?i:[i];let n=-1;for(;++n<t.length;){const s=t[n];e.push([fVe(s[0]),gVe(s[1])])}return e}function fVe(i){return typeof i=="string"?new RegExp(hVe(i),"g"):i}function gVe(i){return typeof i=="function"?i:function(){return i}}const GM="phrasing",KM=["autolink","link","image","label"];function mVe(){return{transforms:[CVe],enter:{literalAutolink:_Ve,literalAutolinkEmail:XM,literalAutolinkHttp:XM,literalAutolinkWww:XM},exit:{literalAutolink:SVe,literalAutolinkEmail:xVe,literalAutolinkHttp:vVe,literalAutolinkWww:bVe}}}function yVe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:GM,notInConstruct:KM},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:GM,notInConstruct:KM},{character:":",before:"[ps]",after:"\\/",inConstruct:GM,notInConstruct:KM}]}}function _Ve(i){this.enter({type:"link",title:null,url:"",children:[]},i)}function XM(i){this.config.enter.autolinkProtocol.call(this,i)}function vVe(i){this.config.exit.autolinkProtocol.call(this,i)}function bVe(i){this.config.exit.data.call(this,i);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(i)}function xVe(i){this.config.exit.autolinkEmail.call(this,i)}function SVe(i){this.exit(i)}function CVe(i){dVe(i,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,wVe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),AVe]],{ignore:["link","linkReference"]})}function wVe(i,e,t,n,s){let r="";if(!pne(s)||(/^w/i.test(e)&&(t=e+t,e="",r="http://"),!kVe(t)))return!1;const a=TVe(t+n);if(!a[0])return!1;const o={type:"link",title:null,url:r+e+a[0],children:[{type:"text",value:e+a[0]}]};return a[1]?[o,{type:"text",value:a[1]}]:o}function AVe(i,e,t,n){return!pne(n,!0)||/[-\d_]$/.test(t)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+t,children:[{type:"text",value:e+"@"+t}]}}function kVe(i){const e=i.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function TVe(i){const e=/[!"&'),.:;<>?\]}]+$/.exec(i);if(!e)return[i,void 0];i=i.slice(0,e.index);let t=e[0],n=t.indexOf(")");const s=cA(i,"(");let r=cA(i,")");for(;n!==-1&&s>r;)i+=t.slice(0,n+1),t=t.slice(n+1),n=t.indexOf(")"),r++;return[i,t]}function pne(i,e){const t=i.input.charCodeAt(i.index-1);return(i.index===0||yr(t)||bP(t))&&(!e||t!==47)}fne.peek=jVe;function EVe(){return{enter:{gfmFootnoteDefinition:OVe,gfmFootnoteDefinitionLabelString:MVe,gfmFootnoteCall:LVe,gfmFootnoteCallString:DVe},exit:{gfmFootnoteDefinition:RVe,gfmFootnoteDefinitionLabelString:IVe,gfmFootnoteCall:BVe,gfmFootnoteCallString:FVe}}}function PVe(){return{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition:NVe,footnoteReference:fne}}}function OVe(i){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},i)}function MVe(){this.buffer()}function IVe(i){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.label=e,t.identifier=_l(this.sliceSerialize(i)).toLowerCase()}function RVe(i){this.exit(i)}function LVe(i){this.enter({type:"footnoteReference",identifier:"",label:""},i)}function DVe(){this.buffer()}function FVe(i){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.label=e,t.identifier=_l(this.sliceSerialize(i)).toLowerCase()}function BVe(i){this.exit(i)}function fne(i,e,t,n){const s=t.createTracker(n);let r=s.move("[^");const a=t.enter("footnoteReference"),o=t.enter("reference");return r+=s.move(t.safe(t.associationId(i),{...s.current(),before:r,after:"]"})),o(),a(),r+=s.move("]"),r}function jVe(){return"["}function NVe(i,e,t,n){const s=t.createTracker(n);let r=s.move("[^");const a=t.enter("footnoteDefinition"),o=t.enter("label");return r+=s.move(t.safe(t.associationId(i),{...s.current(),before:r,after:"]"})),o(),r+=s.move("]:"+(i.children&&i.children.length>0?" ":"")),s.shift(4),r+=s.move(t.indentLines(t.containerFlow(i,s.current()),$Ve)),a(),r}function $Ve(i,e,t){return e===0?i:(t?"":"    ")+i}const zVe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];gne.peek=GVe;function HVe(){return{canContainEols:["delete"],enter:{strikethrough:UVe},exit:{strikethrough:WVe}}}function VVe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:zVe}],handlers:{delete:gne}}}function UVe(i){this.enter({type:"delete",children:[]},i)}function WVe(i){this.exit(i)}function gne(i,e,t,n){const s=t.createTracker(n),r=t.enter("strikethrough");let a=s.move("~~");return a+=t.containerPhrasing(i,{...s.current(),before:a,after:"~"}),a+=s.move("~~"),r(),a}function GVe(){return"~"}function KVe(i,e={}){const t=(e.align||[]).concat(),n=e.stringLength||YVe,s=[],r=[],a=[],o=[];let l=0,c=-1;for(;++c<i.length;){const f=[],g=[];let m=-1;for(i[c].length>l&&(l=i[c].length);++m<i[c].length;){const y=XVe(i[c][m]);if(e.alignDelimiters!==!1){const b=n(y);g[m]=b,(o[m]===void 0||b>o[m])&&(o[m]=b)}f.push(y)}r[c]=f,a[c]=g}let u=-1;if(typeof t=="object"&&"length"in t)for(;++u<l;)s[u]=F7(t[u]);else{const f=F7(t);for(;++u<l;)s[u]=f}u=-1;const h=[],d=[];for(;++u<l;){const f=s[u];let g="",m="";f===99?(g=":",m=":"):f===108?g=":":f===114&&(m=":");let y=e.alignDelimiters===!1?1:Math.max(1,o[u]-g.length-m.length);const b=g+"-".repeat(y)+m;e.alignDelimiters!==!1&&(y=g.length+y+m.length,y>o[u]&&(o[u]=y),d[u]=y),h[u]=b}r.splice(1,0,h),a.splice(1,0,d),c=-1;const p=[];for(;++c<r.length;){const f=r[c],g=a[c];u=-1;const m=[];for(;++u<l;){const y=f[u]||"";let b="",x="";if(e.alignDelimiters!==!1){const S=o[u]-(g[u]||0),C=s[u];C===114?b=" ".repeat(S):C===99?S%2?(b=" ".repeat(S/2+.5),x=" ".repeat(S/2-.5)):(b=" ".repeat(S/2),x=b):x=" ".repeat(S)}e.delimiterStart!==!1&&!u&&m.push("|"),e.padding!==!1&&!(e.alignDelimiters===!1&&y==="")&&(e.delimiterStart!==!1||u)&&m.push(" "),e.alignDelimiters!==!1&&m.push(b),m.push(y),e.alignDelimiters!==!1&&m.push(x),e.padding!==!1&&m.push(" "),(e.delimiterEnd!==!1||u!==l-1)&&m.push("|")}p.push(e.delimiterEnd===!1?m.join("").replace(/ +$/,""):m.join(""))}return p.join(`
`)}function XVe(i){return i==null?"":String(i)}function YVe(i){return i.length}function F7(i){const e=typeof i=="string"?i.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function qVe(i,e,t,n){const s=t.enter("blockquote"),r=t.createTracker(n);r.move("> "),r.shift(2);const a=t.indentLines(t.containerFlow(i,r.current()),ZVe);return s(),a}function ZVe(i,e,t){return">"+(t?"":" ")+i}function JVe(i,e){return B7(i,e.inConstruct,!0)&&!B7(i,e.notInConstruct,!1)}function B7(i,e,t){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return t;let n=-1;for(;++n<e.length;)if(i.includes(e[n]))return!0;return!1}function j7(i,e,t,n){let s=-1;for(;++s<t.unsafe.length;)if(t.unsafe[s].character===`
`&&JVe(t.stack,t.unsafe[s]))return/[ \t]/.test(n.before)?"":" ";return`\\
`}function QVe(i,e){const t=String(i);let n=t.indexOf(e),s=n,r=0,a=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;n!==-1;)n===s?++r>a&&(a=r):r=1,s=n+e.length,n=t.indexOf(e,s);return a}function eUe(i,e){return!!(e.options.fences===!1&&i.value&&!i.lang&&/[^ \r\n]/.test(i.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(i.value))}function tUe(i){const e=i.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function iUe(i,e,t,n){const s=tUe(t),r=i.value||"",a=s==="`"?"GraveAccent":"Tilde";if(eUe(i,t)){const h=t.enter("codeIndented"),d=t.indentLines(r,nUe);return h(),d}const o=t.createTracker(n),l=s.repeat(Math.max(QVe(r,s)+1,3)),c=t.enter("codeFenced");let u=o.move(l);if(i.lang){const h=t.enter(`codeFencedLang${a}`);u+=o.move(t.safe(i.lang,{before:u,after:" ",encode:["`"],...o.current()})),h()}if(i.lang&&i.meta){const h=t.enter(`codeFencedMeta${a}`);u+=o.move(" "),u+=o.move(t.safe(i.meta,{before:u,after:`
`,encode:["`"],...o.current()})),h()}return u+=o.move(`
`),r&&(u+=o.move(r+`
`)),u+=o.move(l),c(),u}function nUe(i,e,t){return(t?"":"    ")+i}function UN(i){const e=i.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function sUe(i,e,t,n){const s=UN(t),r=s==='"'?"Quote":"Apostrophe",a=t.enter("definition");let o=t.enter("label");const l=t.createTracker(n);let c=l.move("[");return c+=l.move(t.safe(t.associationId(i),{before:c,after:"]",...l.current()})),c+=l.move("]: "),o(),!i.url||/[\0- \u007F]/.test(i.url)?(o=t.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(t.safe(i.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(o=t.enter("destinationRaw"),c+=l.move(t.safe(i.url,{before:c,after:i.title?" ":`
`,...l.current()}))),o(),i.title&&(o=t.enter(`title${r}`),c+=l.move(" "+s),c+=l.move(t.safe(i.title,{before:c,after:s,...l.current()})),c+=l.move(s),o()),a(),c}function rUe(i){const e=i.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}mne.peek=aUe;function mne(i,e,t,n){const s=rUe(t),r=t.enter("emphasis"),a=t.createTracker(n);let o=a.move(s);return o+=a.move(t.containerPhrasing(i,{before:o,after:s,...a.current()})),o+=a.move(s),r(),o}function aUe(i,e,t){return t.options.emphasis||"*"}function oUe(i,e){let t=!1;return AP(i,function(n){if("value"in n&&/\r?\n|\r/.test(n.value)||n.type==="break")return t=!0,zL}),!!((!i.depth||i.depth<3)&&RN(i)&&(e.options.setext||t))}function lUe(i,e,t,n){const s=Math.max(Math.min(6,i.depth||1),1),r=t.createTracker(n);if(oUe(i,t)){const u=t.enter("headingSetext"),h=t.enter("phrasing"),d=t.containerPhrasing(i,{...r.current(),before:`
`,after:`
`});return h(),u(),d+`
`+(s===1?"=":"-").repeat(d.length-(Math.max(d.lastIndexOf("\r"),d.lastIndexOf(`
`))+1))}const a="#".repeat(s),o=t.enter("headingAtx"),l=t.enter("phrasing");r.move(a+" ");let c=t.containerPhrasing(i,{before:"# ",after:`
`,...r.current()});return/^[\t ]/.test(c)&&(c="&#x"+c.charCodeAt(0).toString(16).toUpperCase()+";"+c.slice(1)),c=c?a+" "+c:a,t.options.closeAtx&&(c+=" "+a),l(),o(),c}yne.peek=cUe;function yne(i){return i.value||""}function cUe(){return"<"}_ne.peek=uUe;function _ne(i,e,t,n){const s=UN(t),r=s==='"'?"Quote":"Apostrophe",a=t.enter("image");let o=t.enter("label");const l=t.createTracker(n);let c=l.move("![");return c+=l.move(t.safe(i.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),o(),!i.url&&i.title||/[\0- \u007F]/.test(i.url)?(o=t.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(t.safe(i.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(o=t.enter("destinationRaw"),c+=l.move(t.safe(i.url,{before:c,after:i.title?" ":")",...l.current()}))),o(),i.title&&(o=t.enter(`title${r}`),c+=l.move(" "+s),c+=l.move(t.safe(i.title,{before:c,after:s,...l.current()})),c+=l.move(s),o()),c+=l.move(")"),a(),c}function uUe(){return"!"}vne.peek=hUe;function vne(i,e,t,n){const s=i.referenceType,r=t.enter("imageReference");let a=t.enter("label");const o=t.createTracker(n);let l=o.move("![");const c=t.safe(i.alt,{before:l,after:"]",...o.current()});l+=o.move(c+"]["),a();const u=t.stack;t.stack=[],a=t.enter("reference");const h=t.safe(t.associationId(i),{before:l,after:"]",...o.current()});return a(),t.stack=u,r(),s==="full"||!c||c!==h?l+=o.move(h+"]"):s==="shortcut"?l=l.slice(0,-1):l+=o.move("]"),l}function hUe(){return"!"}bne.peek=dUe;function bne(i,e,t){let n=i.value||"",s="`",r=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(n);)s+="`";for(/[^ \r\n]/.test(n)&&(/^[ \r\n]/.test(n)&&/[ \r\n]$/.test(n)||/^`|`$/.test(n))&&(n=" "+n+" ");++r<t.unsafe.length;){const a=t.unsafe[r],o=t.compilePattern(a);let l;if(a.atBreak)for(;l=o.exec(n);){let c=l.index;n.charCodeAt(c)===10&&n.charCodeAt(c-1)===13&&c--,n=n.slice(0,c)+" "+n.slice(l.index+1)}}return s+n+s}function dUe(){return"`"}function xne(i,e){const t=RN(i);return!!(!e.options.resourceLink&&i.url&&!i.title&&i.children&&i.children.length===1&&i.children[0].type==="text"&&(t===i.url||"mailto:"+t===i.url)&&/^[a-z][a-z+.-]+:/i.test(i.url)&&!/[\0- <>\u007F]/.test(i.url))}Sne.peek=pUe;function Sne(i,e,t,n){const s=UN(t),r=s==='"'?"Quote":"Apostrophe",a=t.createTracker(n);let o,l;if(xne(i,t)){const u=t.stack;t.stack=[],o=t.enter("autolink");let h=a.move("<");return h+=a.move(t.containerPhrasing(i,{before:h,after:">",...a.current()})),h+=a.move(">"),o(),t.stack=u,h}o=t.enter("link"),l=t.enter("label");let c=a.move("[");return c+=a.move(t.containerPhrasing(i,{before:c,after:"](",...a.current()})),c+=a.move("]("),l(),!i.url&&i.title||/[\0- \u007F]/.test(i.url)?(l=t.enter("destinationLiteral"),c+=a.move("<"),c+=a.move(t.safe(i.url,{before:c,after:">",...a.current()})),c+=a.move(">")):(l=t.enter("destinationRaw"),c+=a.move(t.safe(i.url,{before:c,after:i.title?" ":")",...a.current()}))),l(),i.title&&(l=t.enter(`title${r}`),c+=a.move(" "+s),c+=a.move(t.safe(i.title,{before:c,after:s,...a.current()})),c+=a.move(s),l()),c+=a.move(")"),o(),c}function pUe(i,e,t){return xne(i,t)?"<":"["}Cne.peek=fUe;function Cne(i,e,t,n){const s=i.referenceType,r=t.enter("linkReference");let a=t.enter("label");const o=t.createTracker(n);let l=o.move("[");const c=t.containerPhrasing(i,{before:l,after:"]",...o.current()});l+=o.move(c+"]["),a();const u=t.stack;t.stack=[],a=t.enter("reference");const h=t.safe(t.associationId(i),{before:l,after:"]",...o.current()});return a(),t.stack=u,r(),s==="full"||!c||c!==h?l+=o.move(h+"]"):s==="shortcut"?l=l.slice(0,-1):l+=o.move("]"),l}function fUe(){return"["}function WN(i){const e=i.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function gUe(i){const e=WN(i),t=i.options.bulletOther;if(!t)return e==="*"?"-":"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(t===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+t+"`) to be different");return t}function mUe(i){const e=i.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function wne(i){const e=i.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function yUe(i,e,t,n){const s=t.enter("list"),r=t.bulletCurrent;let a=i.ordered?mUe(t):WN(t);const o=i.ordered?a==="."?")":".":gUe(t);let l=e&&t.bulletLastUsed?a===t.bulletLastUsed:!1;if(!i.ordered){const u=i.children?i.children[0]:void 0;if((a==="*"||a==="-")&&u&&(!u.children||!u.children[0])&&t.stack[t.stack.length-1]==="list"&&t.stack[t.stack.length-2]==="listItem"&&t.stack[t.stack.length-3]==="list"&&t.stack[t.stack.length-4]==="listItem"&&t.indexStack[t.indexStack.length-1]===0&&t.indexStack[t.indexStack.length-2]===0&&t.indexStack[t.indexStack.length-3]===0&&(l=!0),wne(t)===a&&u){let h=-1;for(;++h<i.children.length;){const d=i.children[h];if(d&&d.type==="listItem"&&d.children&&d.children[0]&&d.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(a=o),t.bulletCurrent=a;const c=t.containerFlow(i,n);return t.bulletLastUsed=a,t.bulletCurrent=r,s(),c}function _Ue(i){const e=i.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function vUe(i,e,t,n){const s=_Ue(t);let r=t.bulletCurrent||WN(t);e&&e.type==="list"&&e.ordered&&(r=(typeof e.start=="number"&&e.start>-1?e.start:1)+(t.options.incrementListMarker===!1?0:e.children.indexOf(i))+r);let a=r.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||i.spread))&&(a=Math.ceil(a/4)*4);const o=t.createTracker(n);o.move(r+" ".repeat(a-r.length)),o.shift(a);const l=t.enter("listItem"),c=t.indentLines(t.containerFlow(i,o.current()),u);return l(),c;function u(h,d,p){return d?(p?"":" ".repeat(a))+h:(p?r:r+" ".repeat(a-r.length))+h}}function bUe(i,e,t,n){const s=t.enter("paragraph"),r=t.enter("phrasing"),a=t.containerPhrasing(i,n);return r(),s(),a}const xUe=CP(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function SUe(i,e,t,n){return(i.children.some(function(a){return xUe(a)})?t.containerPhrasing:t.containerFlow).call(t,i,n)}function CUe(i){const e=i.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}Ane.peek=wUe;function Ane(i,e,t,n){const s=CUe(t),r=t.enter("strong"),a=t.createTracker(n);let o=a.move(s+s);return o+=a.move(t.containerPhrasing(i,{before:o,after:s,...a.current()})),o+=a.move(s+s),r(),o}function wUe(i,e,t){return t.options.strong||"*"}function AUe(i,e,t,n){return t.safe(i.value,n)}function kUe(i){const e=i.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function TUe(i,e,t){const n=(wne(t)+(t.options.ruleSpaces?" ":"")).repeat(kUe(t));return t.options.ruleSpaces?n.slice(0,-1):n}const kne={blockquote:qVe,break:j7,code:iUe,definition:sUe,emphasis:mne,hardBreak:j7,heading:lUe,html:yne,image:_ne,imageReference:vne,inlineCode:bne,link:Sne,linkReference:Cne,list:yUe,listItem:vUe,paragraph:bUe,root:SUe,strong:Ane,text:AUe,thematicBreak:TUe};function EUe(){return{enter:{table:PUe,tableData:N7,tableHeader:N7,tableRow:MUe},exit:{codeText:IUe,table:OUe,tableData:YM,tableHeader:YM,tableRow:YM}}}function PUe(i){const e=i._align;this.enter({type:"table",align:e.map(function(t){return t==="none"?null:t}),children:[]},i),this.data.inTable=!0}function OUe(i){this.exit(i),this.data.inTable=void 0}function MUe(i){this.enter({type:"tableRow",children:[]},i)}function YM(i){this.exit(i)}function N7(i){this.enter({type:"tableCell",children:[]},i)}function IUe(i){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,RUe));const t=this.stack[this.stack.length-1];t.type,t.value=e,this.exit(i)}function RUe(i,e){return e==="|"?e:i}function LUe(i){const e=i||{},t=e.tableCellPadding,n=e.tablePipeAlign,s=e.stringLength,r=t?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:d,table:a,tableCell:l,tableRow:o}};function a(p,f,g,m){return c(u(p,g,m),p.align)}function o(p,f,g,m){const y=h(p,g,m),b=c([y]);return b.slice(0,b.indexOf(`
`))}function l(p,f,g,m){const y=g.enter("tableCell"),b=g.enter("phrasing"),x=g.containerPhrasing(p,{...m,before:r,after:r});return b(),y(),x}function c(p,f){return KVe(p,{align:f,alignDelimiters:n,padding:t,stringLength:s})}function u(p,f,g){const m=p.children;let y=-1;const b=[],x=f.enter("table");for(;++y<m.length;)b[y]=h(m[y],f,g);return x(),b}function h(p,f,g){const m=p.children;let y=-1;const b=[],x=f.enter("tableRow");for(;++y<m.length;)b[y]=l(m[y],p,f,g);return x(),b}function d(p,f,g){let m=kne.inlineCode(p,f,g);return g.stack.includes("tableCell")&&(m=m.replace(/\|/g,"\\$&")),m}}function DUe(){return{exit:{taskListCheckValueChecked:$7,taskListCheckValueUnchecked:$7,paragraph:BUe}}}function FUe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:jUe}}}function $7(i){const e=this.stack[this.stack.length-2];e.type,e.checked=i.type==="taskListCheckValueChecked"}function BUe(i){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const t=this.stack[this.stack.length-1];t.type;const n=t.children[0];if(n&&n.type==="text"){const s=e.children;let r=-1,a;for(;++r<s.length;){const o=s[r];if(o.type==="paragraph"){a=o;break}}a===t&&(n.value=n.value.slice(1),n.value.length===0?t.children.shift():t.position&&n.position&&typeof n.position.start.offset=="number"&&(n.position.start.column++,n.position.start.offset++,t.position.start=Object.assign({},n.position.start)))}}this.exit(i)}function jUe(i,e,t,n){const s=i.children[0],r=typeof i.checked=="boolean"&&s&&s.type==="paragraph",a="["+(i.checked?"x":" ")+"] ",o=t.createTracker(n);r&&o.move(a);let l=kne.listItem(i,e,t,{...n,...o.current()});return r&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+a}}function NUe(){return[mVe(),EVe(),HVe(),EUe(),DUe()]}function $Ue(i){return{extensions:[yVe(),PVe(),VVe(),LUe(i),FUe()]}}const zUe={tokenize:KUe,partial:!0},Tne={tokenize:XUe,partial:!0},Ene={tokenize:YUe,partial:!0},Pne={tokenize:qUe,partial:!0},HUe={tokenize:ZUe,partial:!0},One={name:"wwwAutolink",tokenize:WUe,previous:Ine},Mne={name:"protocolAutolink",tokenize:GUe,previous:Rne},$u={name:"emailAutolink",tokenize:UUe,previous:Lne},Nc={};function VUe(){return{text:Nc}}let ep=48;for(;ep<123;)Nc[ep]=$u,ep++,ep===58?ep=65:ep===91&&(ep=97);Nc[43]=$u;Nc[45]=$u;Nc[46]=$u;Nc[95]=$u;Nc[72]=[$u,Mne];Nc[104]=[$u,Mne];Nc[87]=[$u,One];Nc[119]=[$u,One];function UUe(i,e,t){const n=this;let s,r;return a;function a(h){return!XL(h)||!Lne.call(n,n.previous)||GN(n.events)?t(h):(i.enter("literalAutolink"),i.enter("literalAutolinkEmail"),o(h))}function o(h){return XL(h)?(i.consume(h),o):h===64?(i.consume(h),l):t(h)}function l(h){return h===46?i.check(HUe,u,c)(h):h===45||h===95||Qs(h)?(r=!0,i.consume(h),l):u(h)}function c(h){return i.consume(h),s=!0,l}function u(h){return r&&s&&Zs(n.previous)?(i.exit("literalAutolinkEmail"),i.exit("literalAutolink"),e(h)):t(h)}}function WUe(i,e,t){const n=this;return s;function s(a){return a!==87&&a!==119||!Ine.call(n,n.previous)||GN(n.events)?t(a):(i.enter("literalAutolink"),i.enter("literalAutolinkWww"),i.check(zUe,i.attempt(Tne,i.attempt(Ene,r),t),t)(a))}function r(a){return i.exit("literalAutolinkWww"),i.exit("literalAutolink"),e(a)}}function GUe(i,e,t){const n=this;let s="",r=!1;return a;function a(h){return(h===72||h===104)&&Rne.call(n,n.previous)&&!GN(n.events)?(i.enter("literalAutolink"),i.enter("literalAutolinkHttp"),s+=String.fromCodePoint(h),i.consume(h),o):t(h)}function o(h){if(Zs(h)&&s.length<5)return s+=String.fromCodePoint(h),i.consume(h),o;if(h===58){const d=s.toLowerCase();if(d==="http"||d==="https")return i.consume(h),l}return t(h)}function l(h){return h===47?(i.consume(h),r?c:(r=!0,l)):t(h)}function c(h){return h===null||gA(h)||ei(h)||yr(h)||bP(h)?t(h):i.attempt(Tne,i.attempt(Ene,u),t)(h)}function u(h){return i.exit("literalAutolinkHttp"),i.exit("literalAutolink"),e(h)}}function KUe(i,e,t){let n=0;return s;function s(a){return(a===87||a===119)&&n<3?(n++,i.consume(a),s):a===46&&n===3?(i.consume(a),r):t(a)}function r(a){return a===null?t(a):e(a)}}function XUe(i,e,t){let n,s,r;return a;function a(c){return c===46||c===95?i.check(Pne,l,o)(c):c===null||ei(c)||yr(c)||c!==45&&bP(c)?l(c):(r=!0,i.consume(c),a)}function o(c){return c===95?n=!0:(s=n,n=void 0),i.consume(c),a}function l(c){return s||n||!r?t(c):e(c)}}function YUe(i,e){let t=0,n=0;return s;function s(a){return a===40?(t++,i.consume(a),s):a===41&&n<t?r(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?i.check(Pne,e,r)(a):a===null||ei(a)||yr(a)?e(a):(i.consume(a),s)}function r(a){return a===41&&n++,i.consume(a),s}}function qUe(i,e,t){return n;function n(o){return o===33||o===34||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===63||o===95||o===126?(i.consume(o),n):o===38?(i.consume(o),r):o===93?(i.consume(o),s):o===60||o===null||ei(o)||yr(o)?e(o):t(o)}function s(o){return o===null||o===40||o===91||ei(o)||yr(o)?e(o):n(o)}function r(o){return Zs(o)?a(o):t(o)}function a(o){return o===59?(i.consume(o),n):Zs(o)?(i.consume(o),a):t(o)}}function ZUe(i,e,t){return n;function n(r){return i.consume(r),s}function s(r){return Qs(r)?t(r):e(r)}}function Ine(i){return i===null||i===40||i===42||i===95||i===91||i===93||i===126||ei(i)}function Rne(i){return!Zs(i)}function Lne(i){return!(i===47||XL(i))}function XL(i){return i===43||i===45||i===46||i===95||Qs(i)}function GN(i){let e=i.length,t=!1;for(;e--;){const n=i[e][1];if((n.type==="labelLink"||n.type==="labelImage")&&!n._balanced){t=!0;break}if(n._gfmAutolinkLiteralWalkedInto){t=!1;break}}return i.length>0&&!t&&(i[i.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),t}const JUe={tokenize:aWe,partial:!0};function QUe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:nWe,continuation:{tokenize:sWe},exit:rWe}},text:{91:{name:"gfmFootnoteCall",tokenize:iWe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:eWe,resolveTo:tWe}}}}function eWe(i,e,t){const n=this;let s=n.events.length;const r=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let a;for(;s--;){const l=n.events[s][1];if(l.type==="labelImage"){a=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return o;function o(l){if(!a||!a._balanced)return t(l);const c=_l(n.sliceSerialize({start:a.end,end:n.now()}));return c.codePointAt(0)!==94||!r.includes(c.slice(1))?t(l):(i.enter("gfmFootnoteCallLabelMarker"),i.consume(l),i.exit("gfmFootnoteCallLabelMarker"),e(l))}}function tWe(i,e){let t=i.length;for(;t--;)if(i[t][1].type==="labelImage"&&i[t][0]==="enter"){i[t][1];break}i[t+1][1].type="data",i[t+3][1].type="gfmFootnoteCallLabelMarker";const n={type:"gfmFootnoteCall",start:Object.assign({},i[t+3][1].start),end:Object.assign({},i[i.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},i[t+3][1].end),end:Object.assign({},i[t+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const r={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},i[i.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},r.start),end:Object.assign({},r.end)},o=[i[t+1],i[t+2],["enter",n,e],i[t+3],i[t+4],["enter",s,e],["exit",s,e],["enter",r,e],["enter",a,e],["exit",a,e],["exit",r,e],i[i.length-2],i[i.length-1],["exit",n,e]];return i.splice(t,i.length-t+1,...o),i}function iWe(i,e,t){const n=this,s=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let r=0,a;return o;function o(h){return i.enter("gfmFootnoteCall"),i.enter("gfmFootnoteCallLabelMarker"),i.consume(h),i.exit("gfmFootnoteCallLabelMarker"),l}function l(h){return h!==94?t(h):(i.enter("gfmFootnoteCallMarker"),i.consume(h),i.exit("gfmFootnoteCallMarker"),i.enter("gfmFootnoteCallString"),i.enter("chunkString").contentType="string",c)}function c(h){if(r>999||h===93&&!a||h===null||h===91||ei(h))return t(h);if(h===93){i.exit("chunkString");const d=i.exit("gfmFootnoteCallString");return s.includes(_l(n.sliceSerialize(d)))?(i.enter("gfmFootnoteCallLabelMarker"),i.consume(h),i.exit("gfmFootnoteCallLabelMarker"),i.exit("gfmFootnoteCall"),e):t(h)}return ei(h)||(a=!0),r++,i.consume(h),h===92?u:c}function u(h){return h===91||h===92||h===93?(i.consume(h),r++,c):c(h)}}function nWe(i,e,t){const n=this,s=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let r,a=0,o;return l;function l(f){return i.enter("gfmFootnoteDefinition")._container=!0,i.enter("gfmFootnoteDefinitionLabel"),i.enter("gfmFootnoteDefinitionLabelMarker"),i.consume(f),i.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(f){return f===94?(i.enter("gfmFootnoteDefinitionMarker"),i.consume(f),i.exit("gfmFootnoteDefinitionMarker"),i.enter("gfmFootnoteDefinitionLabelString"),i.enter("chunkString").contentType="string",u):t(f)}function u(f){if(a>999||f===93&&!o||f===null||f===91||ei(f))return t(f);if(f===93){i.exit("chunkString");const g=i.exit("gfmFootnoteDefinitionLabelString");return r=_l(n.sliceSerialize(g)),i.enter("gfmFootnoteDefinitionLabelMarker"),i.consume(f),i.exit("gfmFootnoteDefinitionLabelMarker"),i.exit("gfmFootnoteDefinitionLabel"),d}return ei(f)||(o=!0),a++,i.consume(f),f===92?h:u}function h(f){return f===91||f===92||f===93?(i.consume(f),a++,u):u(f)}function d(f){return f===58?(i.enter("definitionMarker"),i.consume(f),i.exit("definitionMarker"),s.includes(r)||s.push(r),Bt(i,p,"gfmFootnoteDefinitionWhitespace")):t(f)}function p(f){return e(f)}}function sWe(i,e,t){return i.check(x0,e,i.attempt(JUe,e,t))}function rWe(i){i.exit("gfmFootnoteDefinition")}function aWe(i,e,t){const n=this;return Bt(i,s,"gfmFootnoteDefinitionIndent",5);function s(r){const a=n.events[n.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?e(r):t(r)}}function oWe(i){let t=(i||{}).singleTilde;const n={name:"strikethrough",tokenize:r,resolveAll:s};return t==null&&(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function s(a,o){let l=-1;for(;++l<a.length;)if(a[l][0]==="enter"&&a[l][1].type==="strikethroughSequenceTemporary"&&a[l][1]._close){let c=l;for(;c--;)if(a[c][0]==="exit"&&a[c][1].type==="strikethroughSequenceTemporary"&&a[c][1]._open&&a[l][1].end.offset-a[l][1].start.offset===a[c][1].end.offset-a[c][1].start.offset){a[l][1].type="strikethroughSequence",a[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},a[c][1].start),end:Object.assign({},a[l][1].end)},h={type:"strikethroughText",start:Object.assign({},a[c][1].end),end:Object.assign({},a[l][1].start)},d=[["enter",u,o],["enter",a[c][1],o],["exit",a[c][1],o],["enter",h,o]],p=o.parser.constructs.insideSpan.null;p&&xo(d,d.length,0,xP(p,a.slice(c+1,l),o)),xo(d,d.length,0,[["exit",h,o],["enter",a[l][1],o],["exit",a[l][1],o],["exit",u,o]]),xo(a,c-1,l-c+3,d),l=c+d.length-2;break}}for(l=-1;++l<a.length;)a[l][1].type==="strikethroughSequenceTemporary"&&(a[l][1].type="data");return a}function r(a,o,l){const c=this.previous,u=this.events;let h=0;return d;function d(f){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(f):(a.enter("strikethroughSequenceTemporary"),p(f))}function p(f){const g=yA(c);if(f===126)return h>1?l(f):(a.consume(f),h++,p);if(h<2&&!t)return l(f);const m=a.exit("strikethroughSequenceTemporary"),y=yA(f);return m._open=!y||y===2&&!!g,m._close=!g||g===2&&!!y,o(f)}}}class lWe{constructor(){this.map=[]}add(e,t,n){cWe(this,e,t,n)}consume(e){if(this.map.sort(function(r,a){return r[0]-a[0]}),this.map.length===0)return;let t=this.map.length;const n=[];for(;t>0;)t-=1,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push([...e]),e.length=0;let s=n.pop();for(;s;)e.push(...s),s=n.pop();this.map.length=0}}function cWe(i,e,t,n){let s=0;if(!(t===0&&n.length===0)){for(;s<i.map.length;){if(i.map[s][0]===e){i.map[s][1]+=t,i.map[s][2].push(...n);return}s+=1}i.map.push([e,t,n])}}function uWe(i,e){let t=!1;const n=[];for(;e<i.length;){const s=i[e];if(t){if(s[0]==="enter")s[1].type==="tableContent"&&n.push(i[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(i[e-1][1].type==="tableDelimiterMarker"){const r=n.length-1;n[r]=n[r]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(t=!0);e+=1}return n}function hWe(){return{flow:{null:{name:"table",tokenize:dWe,resolveAll:pWe}}}}function dWe(i,e,t){const n=this;let s=0,r=0,a;return o;function o(P){let O=n.events.length-1;for(;O>-1;){const j=n.events[O][1].type;if(j==="lineEnding"||j==="linePrefix")O--;else break}const M=O>-1?n.events[O][1].type:null,R=M==="tableHead"||M==="tableRow"?w:l;return R===w&&n.parser.lazy[n.now().line]?t(P):R(P)}function l(P){return i.enter("tableHead"),i.enter("tableRow"),c(P)}function c(P){return P===124||(a=!0,r+=1),u(P)}function u(P){return P===null?t(P):ze(P)?r>1?(r=0,n.interrupt=!0,i.exit("tableRow"),i.enter("lineEnding"),i.consume(P),i.exit("lineEnding"),p):t(P):St(P)?Bt(i,u,"whitespace")(P):(r+=1,a&&(a=!1,s+=1),P===124?(i.enter("tableCellDivider"),i.consume(P),i.exit("tableCellDivider"),a=!0,u):(i.enter("data"),h(P)))}function h(P){return P===null||P===124||ei(P)?(i.exit("data"),u(P)):(i.consume(P),P===92?d:h)}function d(P){return P===92||P===124?(i.consume(P),h):h(P)}function p(P){return n.interrupt=!1,n.parser.lazy[n.now().line]?t(P):(i.enter("tableDelimiterRow"),a=!1,St(P)?Bt(i,f,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):f(P))}function f(P){return P===45||P===58?m(P):P===124?(a=!0,i.enter("tableCellDivider"),i.consume(P),i.exit("tableCellDivider"),g):C(P)}function g(P){return St(P)?Bt(i,m,"whitespace")(P):m(P)}function m(P){return P===58?(r+=1,a=!0,i.enter("tableDelimiterMarker"),i.consume(P),i.exit("tableDelimiterMarker"),y):P===45?(r+=1,y(P)):P===null||ze(P)?S(P):C(P)}function y(P){return P===45?(i.enter("tableDelimiterFiller"),b(P)):C(P)}function b(P){return P===45?(i.consume(P),b):P===58?(a=!0,i.exit("tableDelimiterFiller"),i.enter("tableDelimiterMarker"),i.consume(P),i.exit("tableDelimiterMarker"),x):(i.exit("tableDelimiterFiller"),x(P))}function x(P){return St(P)?Bt(i,S,"whitespace")(P):S(P)}function S(P){return P===124?f(P):P===null||ze(P)?!a||s!==r?C(P):(i.exit("tableDelimiterRow"),i.exit("tableHead"),e(P)):C(P)}function C(P){return t(P)}function w(P){return i.enter("tableRow"),A(P)}function A(P){return P===124?(i.enter("tableCellDivider"),i.consume(P),i.exit("tableCellDivider"),A):P===null||ze(P)?(i.exit("tableRow"),e(P)):St(P)?Bt(i,A,"whitespace")(P):(i.enter("data"),T(P))}function T(P){return P===null||P===124||ei(P)?(i.exit("data"),A(P)):(i.consume(P),P===92?E:T)}function E(P){return P===92||P===124?(i.consume(P),T):T(P)}}function pWe(i,e){let t=-1,n=!0,s=0,r=[0,0,0,0],a=[0,0,0,0],o=!1,l=0,c,u,h;const d=new lWe;for(;++t<i.length;){const p=i[t],f=p[1];p[0]==="enter"?f.type==="tableHead"?(o=!1,l!==0&&(z7(d,e,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},f.start),end:Object.assign({},f.end)},d.add(t,0,[["enter",c,e]])):f.type==="tableRow"||f.type==="tableDelimiterRow"?(n=!0,h=void 0,r=[0,0,0,0],a=[0,t+1,0,0],o&&(o=!1,u={type:"tableBody",start:Object.assign({},f.start),end:Object.assign({},f.end)},d.add(t,0,[["enter",u,e]])),s=f.type==="tableDelimiterRow"?2:u?3:1):s&&(f.type==="data"||f.type==="tableDelimiterMarker"||f.type==="tableDelimiterFiller")?(n=!1,a[2]===0&&(r[1]!==0&&(a[0]=a[1],h=FS(d,e,r,s,void 0,h),r=[0,0,0,0]),a[2]=t)):f.type==="tableCellDivider"&&(n?n=!1:(r[1]!==0&&(a[0]=a[1],h=FS(d,e,r,s,void 0,h)),r=a,a=[r[1],t,0,0])):f.type==="tableHead"?(o=!0,l=t):f.type==="tableRow"||f.type==="tableDelimiterRow"?(l=t,r[1]!==0?(a[0]=a[1],h=FS(d,e,r,s,t,h)):a[1]!==0&&(h=FS(d,e,a,s,t,h)),s=0):s&&(f.type==="data"||f.type==="tableDelimiterMarker"||f.type==="tableDelimiterFiller")&&(a[3]=t)}for(l!==0&&z7(d,e,l,c,u),d.consume(e.events),t=-1;++t<e.events.length;){const p=e.events[t];p[0]==="enter"&&p[1].type==="table"&&(p[1]._align=uWe(e.events,t))}return i}function FS(i,e,t,n,s,r){const a=n===1?"tableHeader":n===2?"tableDelimiter":"tableData",o="tableContent";t[0]!==0&&(r.end=Object.assign({},Lg(e.events,t[0])),i.add(t[0],0,[["exit",r,e]]));const l=Lg(e.events,t[1]);if(r={type:a,start:Object.assign({},l),end:Object.assign({},l)},i.add(t[1],0,[["enter",r,e]]),t[2]!==0){const c=Lg(e.events,t[2]),u=Lg(e.events,t[3]),h={type:o,start:Object.assign({},c),end:Object.assign({},u)};if(i.add(t[2],0,[["enter",h,e]]),n!==2){const d=e.events[t[2]],p=e.events[t[3]];if(d[1].end=Object.assign({},p[1].end),d[1].type="chunkText",d[1].contentType="text",t[3]>t[2]+1){const f=t[2]+1,g=t[3]-t[2]-1;i.add(f,g,[])}}i.add(t[3]+1,0,[["exit",h,e]])}return s!==void 0&&(r.end=Object.assign({},Lg(e.events,s)),i.add(s,0,[["exit",r,e]]),r=void 0),r}function z7(i,e,t,n,s){const r=[],a=Lg(e.events,t);s&&(s.end=Object.assign({},a),r.push(["exit",s,e])),n.end=Object.assign({},a),r.push(["exit",n,e]),i.add(t+1,0,r)}function Lg(i,e){const t=i[e],n=t[0]==="enter"?"start":"end";return t[1][n]}const fWe={name:"tasklistCheck",tokenize:mWe};function gWe(){return{text:{91:fWe}}}function mWe(i,e,t){const n=this;return s;function s(l){return n.previous!==null||!n._gfmTasklistFirstContentOfListItem?t(l):(i.enter("taskListCheck"),i.enter("taskListCheckMarker"),i.consume(l),i.exit("taskListCheckMarker"),r)}function r(l){return ei(l)?(i.enter("taskListCheckValueUnchecked"),i.consume(l),i.exit("taskListCheckValueUnchecked"),a):l===88||l===120?(i.enter("taskListCheckValueChecked"),i.consume(l),i.exit("taskListCheckValueChecked"),a):t(l)}function a(l){return l===93?(i.enter("taskListCheckMarker"),i.consume(l),i.exit("taskListCheckMarker"),i.exit("taskListCheck"),o):t(l)}function o(l){return ze(l)?e(l):St(l)?i.check({tokenize:yWe},e,t)(l):t(l)}}function yWe(i,e,t){return Bt(i,n,"whitespace");function n(s){return s===null?t(s):e(s)}}function _We(i){return IN([VUe(),QUe(),oWe(i),hWe(),gWe()])}const vWe={};function H7(i){const e=this,t=i||vWe,n=e.data(),s=n.micromarkExtensions||(n.micromarkExtensions=[]),r=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),a=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);s.push(_We(t)),r.push(NUe()),a.push($Ue(t))}var V7=function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(a){a(r)})}return new(t||(t=Promise))(function(r,a){function o(u){try{c(n.next(u))}catch(h){a(h)}}function l(u){try{c(n.throw(u))}catch(h){a(h)}}function c(u){u.done?r(u.value):s(u.value).then(o,l)}c((n=n.apply(i,e||[])).next())})};class bWe extends tt{constructor(){super(...arguments),this.getOptions=()=>{var e,t,n,s;return{evaluateOptions:{remarkPlugins:[H7,...(e=this.getProp("remarkPlugins"))!==null&&e!==void 0?e:[]],rehypePlugins:(t=this.getProp("rehypePlugins"))!==null&&t!==void 0?t:[],format:this.getProp("format")},compileOptions:{format:this.getProp("format"),remarkPlugins:[H7,...(n=this.getProp("remarkPlugins"))!==null&&n!==void 0?n:[]],rehypePlugins:(s=this.getProp("rehypePlugins"))!==null&&s!==void 0?s:[]},runOptions:{}}},this.compile=e=>V7(this,void 0,void 0,function*(){return yield une(e,this.getOptions().compileOptions)}),this.evaluate=e=>V7(this,void 0,void 0,function*(){return(yield cVe(e,Object.assign(Object.assign(Object.assign({},this.getOptions().runOptions),this.getOptions().evaluateOptions),this._adapter.getRuntime()))).default}),this.evaluateSync=e=>uVe(e,Object.assign(Object.assign(Object.assign({},this.getOptions().runOptions),this.getOptions().evaluateOptions),this._adapter.getRuntime())).default}}const Al={PREFIX:`${ge}-markdownRender`},xWe=i=>H.createElement(On.Title,Object.assign({heading:1,className:`${Al.PREFIX}-component-header`},i)),SWe=i=>H.createElement(On.Title,Object.assign({heading:2,className:`${Al.PREFIX}-component-header`},i)),CWe=i=>H.createElement(On.Title,Object.assign({heading:3,className:`${Al.PREFIX}-component-header`},i)),wWe=i=>H.createElement(On.Title,Object.assign({heading:4,className:`${Al.PREFIX}-component-header`},i)),AWe=i=>H.createElement(On.Title,Object.assign({heading:5,className:`${Al.PREFIX}-component-header`},i)),kWe=i=>H.createElement(On.Title,Object.assign({heading:6,className:`${Al.PREFIX}-component-header`},i)),TWe=i=>H.createElement(On.Text,Object.assign({link:Object.assign({},i)},i)),EWe=i=>H.createElement("div",{className:`${Al.PREFIX}-component-image`},H.createElement(_0,Object.assign({fallback:H.createElement(MQ,null),width:"100%"},_n(i,"children"))),H.createElement("div",{className:`${Al.PREFIX}-component-image-alt`},i.alt)),PWe=i=>{var e;const{children:t}=i,n=l=>Array.isArray(l)?l:[l],s=n(ne(t[0],"props.children.props.children")),r=n(ne(t[1],"props.children")),a=s.map(l=>{var c;return((c=l==null?void 0:l.props)===null||c===void 0?void 0:c.children)||""}),o=[];for(let l=0;l<r.length;l++){let c={key:String(l)};(e=r[l])===null||e===void 0||e.props.children.forEach((u,h)=>{var d,p;c[a[h]]=(p=(d=u==null?void 0:u.props)===null||d===void 0?void 0:d.children)!==null&&p!==void 0?p:""}),o.push(c)}return H.createElement(Fc,Object.assign({dataSource:o,columns:a.map(l=>({title:l,dataIndex:l}))},_n(i,"children")))},OWe=i=>H.createElement(On.Paragraph,Object.assign({className:`${Al.PREFIX}-component-p`},i));var MWe=Z1;function IWe(i,e){var t=i.length;if(t)return e+=e<0?t:0,MWe(e,t)?i[e]:void 0}var RWe=IWe,LWe=RWe,DWe=h0;function FWe(i,e){return i&&i.length?LWe(i,DWe(e)):void 0}var BWe=FWe;const Dne=Xe(BWe);var Fne={exports:{}};(function(i){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var t=function(n){var s=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,r=0,a={},o={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function b(x){return x instanceof l?new l(x.type,b(x.content),x.alias):Array.isArray(x)?x.map(b):x.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(b){return Object.prototype.toString.call(b).slice(8,-1)},objId:function(b){return b.__id||Object.defineProperty(b,"__id",{value:++r}),b.__id},clone:function b(x,S){S=S||{};var C,w;switch(o.util.type(x)){case"Object":if(w=o.util.objId(x),S[w])return S[w];C={},S[w]=C;for(var A in x)x.hasOwnProperty(A)&&(C[A]=b(x[A],S));return C;case"Array":return w=o.util.objId(x),S[w]?S[w]:(C=[],S[w]=C,x.forEach(function(T,E){C[E]=b(T,S)}),C);default:return x}},getLanguage:function(b){for(;b;){var x=s.exec(b.className);if(x)return x[1].toLowerCase();b=b.parentElement}return"none"},setLanguage:function(b,x){b.className=b.className.replace(RegExp(s,"gi"),""),b.classList.add("language-"+x)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(C){var b=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(C.stack)||[])[1];if(b){var x=document.getElementsByTagName("script");for(var S in x)if(x[S].src==b)return x[S]}return null}},isActive:function(b,x,S){for(var C="no-"+x;b;){var w=b.classList;if(w.contains(x))return!0;if(w.contains(C))return!1;b=b.parentElement}return!!S}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(b,x){var S=o.util.clone(o.languages[b]);for(var C in x)S[C]=x[C];return S},insertBefore:function(b,x,S,C){C=C||o.languages;var w=C[b],A={};for(var T in w)if(w.hasOwnProperty(T)){if(T==x)for(var E in S)S.hasOwnProperty(E)&&(A[E]=S[E]);S.hasOwnProperty(T)||(A[T]=w[T])}var P=C[b];return C[b]=A,o.languages.DFS(o.languages,function(O,M){M===P&&O!=b&&(this[O]=A)}),A},DFS:function b(x,S,C,w){w=w||{};var A=o.util.objId;for(var T in x)if(x.hasOwnProperty(T)){S.call(x,T,x[T],C||T);var E=x[T],P=o.util.type(E);P==="Object"&&!w[A(E)]?(w[A(E)]=!0,b(E,S,null,w)):P==="Array"&&!w[A(E)]&&(w[A(E)]=!0,b(E,S,T,w))}}},plugins:{},highlightAll:function(b,x){o.highlightAllUnder(document,b,x)},highlightAllUnder:function(b,x,S){var C={callback:S,container:b,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",C),C.elements=Array.prototype.slice.apply(C.container.querySelectorAll(C.selector)),o.hooks.run("before-all-elements-highlight",C);for(var w=0,A;A=C.elements[w++];)o.highlightElement(A,x===!0,C.callback)},highlightElement:function(b,x,S){var C=o.util.getLanguage(b),w=o.languages[C];o.util.setLanguage(b,C);var A=b.parentElement;A&&A.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(A,C);var T=b.textContent,E={element:b,language:C,grammar:w,code:T};function P(M){E.highlightedCode=M,o.hooks.run("before-insert",E),E.element.innerHTML=E.highlightedCode,o.hooks.run("after-highlight",E),o.hooks.run("complete",E),S&&S.call(E.element)}if(o.hooks.run("before-sanity-check",E),A=E.element.parentElement,A&&A.nodeName.toLowerCase()==="pre"&&!A.hasAttribute("tabindex")&&A.setAttribute("tabindex","0"),!E.code){o.hooks.run("complete",E),S&&S.call(E.element);return}if(o.hooks.run("before-highlight",E),!E.grammar){P(o.util.encode(E.code));return}if(x&&n.Worker){var O=new Worker(o.filename);O.onmessage=function(M){P(M.data)},O.postMessage(JSON.stringify({language:E.language,code:E.code,immediateClose:!0}))}else P(o.highlight(E.code,E.grammar,E.language))},highlight:function(b,x,S){var C={code:b,grammar:x,language:S};if(o.hooks.run("before-tokenize",C),!C.grammar)throw new Error('The language "'+C.language+'" has no grammar.');return C.tokens=o.tokenize(C.code,C.grammar),o.hooks.run("after-tokenize",C),l.stringify(o.util.encode(C.tokens),C.language)},tokenize:function(b,x){var S=x.rest;if(S){for(var C in S)x[C]=S[C];delete x.rest}var w=new h;return d(w,w.head,b),u(b,w,x,w.head,0),f(w)},hooks:{all:{},add:function(b,x){var S=o.hooks.all;S[b]=S[b]||[],S[b].push(x)},run:function(b,x){var S=o.hooks.all[b];if(!(!S||!S.length))for(var C=0,w;w=S[C++];)w(x)}},Token:l};n.Prism=o;function l(b,x,S,C){this.type=b,this.content=x,this.alias=S,this.length=(C||"").length|0}l.stringify=function b(x,S){if(typeof x=="string")return x;if(Array.isArray(x)){var C="";return x.forEach(function(P){C+=b(P,S)}),C}var w={type:x.type,content:b(x.content,S),tag:"span",classes:["token",x.type],attributes:{},language:S},A=x.alias;A&&(Array.isArray(A)?Array.prototype.push.apply(w.classes,A):w.classes.push(A)),o.hooks.run("wrap",w);var T="";for(var E in w.attributes)T+=" "+E+'="'+(w.attributes[E]||"").replace(/"/g,"&quot;")+'"';return"<"+w.tag+' class="'+w.classes.join(" ")+'"'+T+">"+w.content+"</"+w.tag+">"};function c(b,x,S,C){b.lastIndex=x;var w=b.exec(S);if(w&&C&&w[1]){var A=w[1].length;w.index+=A,w[0]=w[0].slice(A)}return w}function u(b,x,S,C,w,A){for(var T in S)if(!(!S.hasOwnProperty(T)||!S[T])){var E=S[T];E=Array.isArray(E)?E:[E];for(var P=0;P<E.length;++P){if(A&&A.cause==T+","+P)return;var O=E[P],M=O.inside,R=!!O.lookbehind,j=!!O.greedy,I=O.alias;if(j&&!O.pattern.global){var D=O.pattern.toString().match(/[imsuy]*$/)[0];O.pattern=RegExp(O.pattern.source,D+"g")}for(var z=O.pattern||O,$=C.next,V=w;$!==x.tail&&!(A&&V>=A.reach);V+=$.value.length,$=$.next){var L=$.value;if(x.length>b.length)return;if(!(L instanceof l)){var Y=1,ae;if(j){if(ae=c(z,V,b,R),!ae||ae.index>=b.length)break;var le=ae.index,W=ae.index+ae[0].length,ce=V;for(ce+=$.value.length;le>=ce;)$=$.next,ce+=$.value.length;if(ce-=$.value.length,V=ce,$.value instanceof l)continue;for(var he=$;he!==x.tail&&(ce<W||typeof he.value=="string");he=he.next)Y++,ce+=he.value.length;Y--,L=b.slice(V,ce),ae.index-=V}else if(ae=c(z,0,L,R),!ae)continue;var le=ae.index,de=ae[0],te=L.slice(0,le),me=L.slice(le+de.length),Be=V+L.length;A&&Be>A.reach&&(A.reach=Be);var ve=$.prev;te&&(ve=d(x,ve,te),V+=te.length),p(x,ve,Y);var Re=new l(T,M?o.tokenize(de,M):de,I,de);if($=d(x,ve,Re),me&&d(x,$,me),Y>1){var Qe={cause:T+","+P,reach:Be};u(b,x,S,$.prev,V,Qe),A&&Qe.reach>A.reach&&(A.reach=Qe.reach)}}}}}}function h(){var b={value:null,prev:null,next:null},x={value:null,prev:b,next:null};b.next=x,this.head=b,this.tail=x,this.length=0}function d(b,x,S){var C=x.next,w={value:S,prev:x,next:C};return x.next=w,C.prev=w,b.length++,w}function p(b,x,S){for(var C=x.next,w=0;w<S&&C!==b.tail;w++)C=C.next;x.next=C,C.prev=x,b.length-=w}function f(b){for(var x=[],S=b.head.next;S!==b.tail;)x.push(S.value),S=S.next;return x}if(!n.document)return n.addEventListener&&(o.disableWorkerMessageHandler||n.addEventListener("message",function(b){var x=JSON.parse(b.data),S=x.language,C=x.code,w=x.immediateClose;n.postMessage(o.highlight(C,o.languages[S],S)),w&&n.close()},!1)),o;var g=o.util.currentScript();g&&(o.filename=g.src,g.hasAttribute("data-manual")&&(o.manual=!0));function m(){o.manual||o.highlightAll()}if(!o.manual){var y=document.readyState;y==="loading"||y==="interactive"&&g&&g.defer?document.addEventListener("DOMContentLoaded",m):window.requestAnimationFrame?window.requestAnimationFrame(m):window.setTimeout(m,16)}return o}(e);i.exports&&(i.exports=t),typeof Hg<"u"&&(Hg.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(s,r){var a={};a["language-"+r]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[r]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};o["language-"+r]={pattern:/[\s\S]+/,inside:t.languages[r]};var l={};l[s]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return s}),"i"),lookbehind:!0,greedy:!0,inside:o},t.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(n,s){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[s,"language-"+s],inside:t.languages[s]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,function(n){var s=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+s.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+s.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+s.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+s.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:s,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var r=n.languages.markup;r&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading",s=function(g,m){return" Error "+g+" while fetching file: "+m},r=" Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",l="loading",c="loaded",u="failed",h="pre[data-src]:not(["+o+'="'+c+'"]):not(['+o+'="'+l+'"])';function d(g,m,y){var b=new XMLHttpRequest;b.open("GET",g,!0),b.onreadystatechange=function(){b.readyState==4&&(b.status<400&&b.responseText?m(b.responseText):b.status>=400?y(s(b.status,b.statusText)):y(r))},b.send(null)}function p(g){var m=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(g||"");if(m){var y=Number(m[1]),b=m[2],x=m[3];return b?x?[y,Number(x)]:[y,void 0]:[y,y]}}t.hooks.add("before-highlightall",function(g){g.selector+=", "+h}),t.hooks.add("before-sanity-check",function(g){var m=g.element;if(m.matches(h)){g.code="",m.setAttribute(o,l);var y=m.appendChild(document.createElement("CODE"));y.textContent=n;var b=m.getAttribute("data-src"),x=g.language;if(x==="none"){var S=(/\.(\w+)$/.exec(b)||[,"none"])[1];x=a[S]||S}t.util.setLanguage(y,x),t.util.setLanguage(m,x);var C=t.plugins.autoloader;C&&C.loadLanguages(x),d(b,function(w){m.setAttribute(o,c);var A=p(m.getAttribute("data-range"));if(A){var T=w.split(/\r\n?|\n/g),E=A[0],P=A[1]==null?T.length:A[1];E<0&&(E+=T.length),E=Math.max(0,Math.min(E-1,T.length)),P<0&&(P+=T.length),P=Math.max(0,Math.min(P,T.length)),w=T.slice(E,P).join(`
`),m.hasAttribute("data-start")||m.setAttribute("data-start",String(E+1))}y.textContent=w,t.highlightElement(y)},function(w){m.setAttribute(o,u),y.textContent=w})}}),t.plugins.fileHighlight={highlight:function(m){for(var y=(m||document).querySelectorAll(h),b=0,x;x=y[b++];)t.highlightElement(x)}};var f=!1;t.fileHighlight=function(){f||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),f=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(Fne);var jWe=Fne.exports;const Bne=Xe(jWe);(function(){if(typeof Prism<"u"&&typeof document<"u"){var i="line-numbers",e=/\n(?!$)/g,t=Prism.plugins.lineNumbers={getLine:function(r,a){if(r.tagName==="PRE"&&r.classList.contains(i)){var o=r.querySelector(".line-numbers-rows");if(o){var l=parseInt(r.getAttribute("data-start"),10)||1,c=l+(o.children.length-1);a<l&&(a=l),a>c&&(a=c);var u=a-l;return o.children[u]}}},resize:function(r){s([r])},assumeViewportIndependence:!0},n=void 0;window.addEventListener("resize",function(){t.assumeViewportIndependence&&n===window.innerWidth||(n=window.innerWidth,s(Array.prototype.slice.call(document.querySelectorAll("pre.line-numbers"))))}),Prism.hooks.add("complete",function(r){if(r.code){var a=r.element,o=a.parentNode;if(o&&/pre/i.test(o.nodeName)&&!a.querySelector(".line-numbers-rows")&&Prism.util.isActive(a,i)){a.classList.remove(i),o.classList.add(i);var l,c=r.code.match(e),u=c?c.length+1:1,h=new Array(u+1).join("<span></span>");(l=document.createElement("span")).setAttribute("aria-hidden","true"),l.className="line-numbers-rows",l.innerHTML=h,o.hasAttribute("data-start")&&(o.style.counterReset="linenumber "+(parseInt(o.getAttribute("data-start"),10)-1)),r.element.appendChild(l),s([o]),Prism.hooks.run("line-numbers",r)}}}),Prism.hooks.add("line-numbers",function(r){r.plugins=r.plugins||{},r.plugins.lineNumbers=!0})}function s(r){if((r=r.filter(function(o){var l,c=(l=o,l?window.getComputedStyle?getComputedStyle(l):l.currentStyle||null:null)["white-space"];return c==="pre-wrap"||c==="pre-line"})).length!=0){var a=r.map(function(o){var l=o.querySelector("code"),c=o.querySelector(".line-numbers-rows");if(l&&c){var u=o.querySelector(".line-numbers-sizer"),h=l.textContent.split(e);u||((u=document.createElement("span")).className="line-numbers-sizer",l.appendChild(u)),u.innerHTML="0",u.style.display="block";var d=u.getBoundingClientRect().height;return u.innerHTML="",{element:o,lines:h,lineHeights:[],oneLinerHeight:d,sizer:u}}}).filter(Boolean);a.forEach(function(o){var l=o.sizer,c=o.lines,u=o.lineHeights,h=o.oneLinerHeight;u[c.length-1]=void 0,c.forEach(function(d,p){if(d&&d.length>1){var f=l.appendChild(document.createElement("span"));f.style.display="block",f.textContent=d}else u[p]=h})}),a.forEach(function(o){for(var l=o.sizer,c=o.lineHeights,u=0,h=0;h<c.length;h++)c[h]===void 0&&(c[h]=l.children[u++].getBoundingClientRect().height)}),a.forEach(function(o){var l=o.sizer,c=o.element.querySelector(".line-numbers-rows");l.style.display="none",l.innerHTML="",o.lineHeights.forEach(function(u,h){c.children[h].style.height=u+"px"})})}}})();Bne.manual=!0;class NWe extends tt{constructor(e){super(Object.assign({},e)),this.highlightCode=(t,n)=>{let s=t.className;const r=`language-${n}`;s.includes(r)||(s=K(s,r)),this.getProp("lineNumber")&&(s=K(s,"line-numbers")),t.className=s,Bne.highlightElement(t,!1)}}}const U7={PREFIX:`${ge}-codeHighlight`};class Lb extends Ve{constructor(e){super(e),this.codeRef=H.createRef(),this.foundation=new NWe(this.adapter),this.state={}}get adapter(){return Object.assign({},super.adapter)}componentDidMount(){super.componentDidMount(),this.codeRef.current&&this.foundation.highlightCode(this.codeRef.current,this.props.language)}componentDidUpdate(e,t,n){(this.codeRef.current&&e.code!==this.props.code||this.props.language!==this.props.language)&&this.foundation.highlightCode(this.codeRef.current,this.props.language)}render(){return H.createElement("div",Object.assign({style:this.props.style,className:K(this.props.className,U7.PREFIX,"semi-light-scrollbar",{[`${U7.PREFIX}-defaultTheme`]:this.props.defaultTheme})},this.getDataAttr(this.props)),H.createElement("pre",null,H.createElement("code",{ref:this.codeRef},this.props.code)))}}Lb.__SemiComponentName__="CodeHighlight";Lb.propTypes={className:v.string,style:v.any,code:v.string,language:v.string,lineNumber:v.bool,defaultTheme:v.bool};Lb.defaultProps=os(Lb.__SemiComponentName__,{lineNumber:!0,defaultTheme:!0});const YL=i=>{var e;const t=Dne((e=i.className)===null||e===void 0?void 0:e.split("-"),-1);return t?H.createElement(Lb,{code:i.children,language:t,lineNumber:!0}):H.createElement("span",{className:`${Al.PREFIX}-simple-code`},i.children)},jne=Object.freeze(Object.defineProperty({__proto__:null,a:TWe,code:YL,h1:xWe,h2:SWe,h3:CWe,h4:wWe,h5:AWe,h6:kWe,img:EWe,p:OWe,table:PWe},Symbol.toStringTag,{value:"Module"}));class ff extends Ve{constructor(e){super(e),this.foundation=new bWe(this.adapter),this.state={MDXContentComponent:this.foundation.evaluateSync(this.props.raw)}}componentDidUpdate(e,t,n){e.raw!==this.props.raw&&this.setState({MDXContentComponent:this.foundation.evaluateSync(this.props.raw)})}get adapter(){return Object.assign(Object.assign({},super.adapter),{getRuntime:()=>Ode})}render(){const e=this.state.MDXContentComponent;return H.createElement("div",Object.assign({className:K(Al.PREFIX,this.props.className),style:this.props.style},this.getDataAttr()),H.createElement(e,{components:Object.assign(Object.assign({},jne),this.props.components)}))}}ff.propTypes={className:v.string,style:v.object,format:v.string,components:v.any,raw:v.string,remarkPlugins:v.arrayOf(v.object),rehypePlugins:v.arrayOf(v.object)};ff.__SemiComponentName__="MarkdownRender";ff.defaultProps=os(ff.__SemiComponentName__,{format:"mdx"});ff.defaultComponents=jne;const Il={PREFIX:`${ge}-chat`,PREFIX_DIVIDER:`${ge}-chat-divider`,PREFIX_CHAT_BOX:`${ge}-chat-chatBox`,PREFIX_CHAT_BOX_ACTION:`${ge}-chat-chatBox-action`,PREFIX_INPUT_BOX:`${ge}-chat-inputBox`,PREFIX_ATTACHMENT:`${ge}-chat-attachment`,PREFIX_HINT:`${ge}-chat-hint`},$We={USER:"user",ASSISTANT:"assistant",SYSTEM:"system",DIVIDER:"divider"},zWe={LEFT_RIGHT:"leftRight",LEFT_ALIGN:"leftAlign"},HWe={LOADING:"loading",INCOMPLETE:"incomplete",COMPLETE:"complete",ERROR:"error"},VWe=["png","jpg","jpeg","gif","bmp","webp"],UWe="image/",WWe=300,GWe=100,KWe={BUBBLE:"bubble",NO_BUBBLE:"noBubble",USER_BUBBLE:"userBubble"},XWe={ENTER:"enter",SHIFT_PLUS_ENTER:"shift+enter"},zu={ROLE:$We,CHAT_ALIGN:zWe,MESSAGE_STATUS:HWe,PIC_SUFFIX_ARRAY:VWe,PIC_PREFIX:UWe,SCROLL_ANIMATION_TIME:WWe,SHOW_SCROLL_GAP:GWe,MODE:KWe,SEND_HOT_KEY:XWe},{SEND_HOT_KEY:W7}=zu;class YWe extends tt{constructor(e){super(Object.assign({},e)),this.onInputAreaChange=t=>{const n=this.getState("attachment");this._adapter.setInputValue(t),this._adapter.notifyInputChange({inputValue:t,attachment:n})},this.onAttachmentAdd=t=>{const{fileList:n}=t,{uploadProps:s}=this.getProps(),{onChange:r}=s;r&&r(t);const{content:a}=this.getStates();let o=[...n];this._adapter.setAttachment(o),this._adapter.notifyInputChange({inputValue:a,attachment:o})},this.onAttachmentDelete=t=>{const{content:n,attachment:s}=this.getStates(),r=s.filter(a=>a.uid!==t.uid);this._adapter.setAttachment(r),this._adapter.notifyInputChange({inputValue:n,attachment:r})},this.onSend=t=>{if(this.getDisableSend())return;const{content:n,attachment:s}=this.getStates();this._adapter.setInputValue(""),this._adapter.setAttachment([]),this._adapter.notifySend(n,s)},this.getDisableSend=()=>{const{content:t,attachment:n}=this.getStates(),{disableSend:s}=this.getProps();return s||t.length===0&&n.length===0},this.onEnterPress=t=>{const{sendHotKey:n}=this.getProps();n===W7.SHIFT_PLUS_ENTER&&t.shiftKey===!1||n===W7.ENTER&&t.shiftKey===!0||(jn(t),this.onSend(t))},this.onPaste=t=>{var n;const s=(n=t.clipboardData)===null||n===void 0?void 0:n.items,{manualUpload:r}=this.getProps();let a=[];if(s){for(const o of s)o.getAsFile()&&a.push(o.getAsFile());a.length&&(r(a),t.preventDefault(),t.stopPropagation())}}}}const{PREFIX_ATTACHMENT:il}=Il,{PIC_SUFFIX_ARRAY:qWe,PIC_PREFIX:ZWe}=zu,qL=k.memo(i=>{const{url:e,name:t,size:n,type:s}=i;return k.createElement("a",{href:e,target:"_blank",className:`${il}-file`,rel:"noreferrer"},k.createElement(LPe,{size:"extra-large",className:`${il}-file-icon`}),k.createElement("div",{className:`${il}-file-info`},k.createElement("span",{className:`${il}-file-title`},t),k.createElement("span",{className:`${il}-file-metadata`},k.createElement("span",{className:`${il}-file-type`},s),s?"  ":"",n)))}),ZL=k.memo(i=>{const{src:e}=i;return k.createElement(_0,{className:`${il}-img`,width:60,height:60,src:e})}),JWe=k.memo(i=>{const{attachment:e,onClear:t,showClear:n=!0,className:s}=i;return k.createElement("div",{className:K(il,{[s]:s})},e.map(r=>{var a,o,l,c;const{percent:u,status:h}=r,d=r==null?void 0:r.name.split(".").pop(),p=((o=(a=r==null?void 0:r.fileInstance)===null||a===void 0?void 0:a.type)===null||o===void 0?void 0:o.startsWith(ZWe))||qWe.includes(d),f=d??((c=(l=r==null?void 0:r.fileInstance)===null||l===void 0?void 0:l.type)===null||c===void 0?void 0:c.split("/").pop()),g=!(u===100||typeof u>"u")&&h==="uploading";return k.createElement("div",{className:`${il}-item`,key:r.uid},p?k.createElement(ZL,{src:r.url}):k.createElement(qL,{url:r.url,name:r.name,size:r.size,type:f}),n&&k.createElement(nx,{size:"large",className:`${il}-clear`,onClick:()=>{t&&t(r)}}),g&&k.createElement(Tb,{percent:u,type:"circle",size:"small",width:30,className:`${il}-process`,"aria-label":"upload progress"}))}))});var QWe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const{PREFIX_INPUT_BOX:jl}=Il,{SEND_HOT_KEY:eGe}=zu,tGe={minRows:1,maxRows:5};class KN extends Ve{constructor(e){super(e),this.onClick=()=>{var t;(t=this.inputAreaRef.current)===null||t===void 0||t.focus()},this.renderUploadButton=()=>{const{uploadProps:t,uploadRef:n,uploadTipProps:s}=this.props,{attachment:r}=this.state,{className:a,onChange:o,renderFileItem:l,children:c}=t,u=QWe(t,["className","onChange","renderFileItem","children"]),h=Object.assign(Object.assign({},u),{className:K(`${jl}-upload`,{[a]:a}),onChange:this.foundation.onAttachmentAdd}),d=k.createElement(mx,Object.assign({ref:n,fileList:r},h),c||k.createElement(it,{className:`${jl}-uploadButton`,icon:k.createElement($Pe,{size:"extra-large"}),theme:"borderless"}));return s?k.createElement(En,Object.assign({},s),k.createElement("span",null,d)):d},this.renderInputArea=()=>{const{content:t,attachment:n}=this.state,{placeholder:s,sendHotKey:r}=this.props;return k.createElement("div",{className:`${jl}-inputArea`},k.createElement(Mee,{placeholder:s,onEnterPress:this.foundation.onEnterPress,value:t,onChange:this.foundation.onInputAreaChange,ref:this.inputAreaRef,className:`${jl}-textarea`,autosize:tGe,disabledEnterStartNewLine:r===eGe.ENTER,onPaste:this.foundation.onPaste}),k.createElement(JWe,{attachment:n,onClear:this.foundation.onAttachmentDelete}))},this.renderClearButton=()=>{const{onClearContext:t}=this.props;return k.createElement(it,{className:`${jl}-clearButton`,theme:"borderless",icon:k.createElement(wQ,null),onClick:t})},this.renderSendButton=()=>{const t=this.foundation.getDisableSend();return k.createElement(it,{disabled:t,theme:"solid",type:"primary",className:`${jl}-sendButton`,icon:k.createElement(OPe,{size:"large",className:`${jl}-sendButton-icon`}),onClick:this.foundation.onSend})},this.inputAreaRef=k.createRef(),this.foundation=new YWe(this.adapter),this.state={content:"",attachment:[]}}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyInputChange:e=>{const{onInputChange:t}=this.props;t&&t(e)},setInputValue:e=>{this.setState({content:e})},setAttachment:e=>{this.setState({attachment:e})},notifySend:(e,t)=>{const{onSend:n}=this.props;n&&n(e,t)}})}render(){const{onClearContext:e,renderInputArea:t,onSend:n,style:s,className:r,showClearContext:a}=this.props,o=k.createElement("div",{className:K(jl,{[r]:r}),style:s},k.createElement("div",{className:`${jl}-inner`,onClick:this.onClick},a&&this.renderClearButton(),k.createElement("div",{className:`${jl}-container`},this.renderUploadButton(),this.renderInputArea(),this.renderSendButton())));return t?t({defaultNode:o,onClear:e,onSend:n}):o}}KN.propTypes={uploadProps:v.object};KN.defaultProps={uploadProps:{}};const{PREFIX_HINT:BS}=Il,iGe=k.memo(i=>{const{value:e,onHintClick:t,renderHintBox:n,className:s,style:r}=i;return k.createElement("section",{className:K(`${BS}s`,{[s]:!!s}),style:r},e.map((a,o)=>n?n({content:a,index:o,onHintClick:()=>{t==null||t(a)}}):k.createElement("div",{className:`${BS}-item`,key:o,onClick:()=>{t==null||t(a)}},k.createElement("div",{className:`${BS}-content`},a),k.createElement(wp,{className:`${BS}-icon`}))))}),{PREFIX_CHAT_BOX:G7}=Il,nGe=k.memo(i=>{const{role:e,customRenderFunc:t,continueSend:n}=i,s=H.useMemo(()=>{const{avatar:r,color:a}=e;return k.createElement(of,{className:K(`${G7}-avatar`,{[`${G7}-avatar-hidden`]:n}),src:r,size:"extra-small"})},[e]);return t&&typeof t=="function"?t({role:e,defaultAvatar:s}):s}),{PREFIX_CHAT_BOX:sGe}=Il,rGe=k.memo(i=>{const{role:e,message:t,customRenderFunc:n}=i,s=H.useMemo(()=>k.createElement("span",{className:`${sGe}-title`},e==null?void 0:e.name),[e]);return n&&typeof n=="function"?n({role:e,message:t,defaultTitle:s}):s});(function(i){var e=i.util.clone(i.languages.javascript),t=/(?:\s|\/\/.*(?!.)|\/\*(?:[^*]|\*(?!\/))\*\/)/.source,n=/(?:\{(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])*\})/.source,s=/(?:\{<S>*\.{3}(?:[^{}]|<BRACES>)*\})/.source;function r(l,c){return l=l.replace(/<S>/g,function(){return t}).replace(/<BRACES>/g,function(){return n}).replace(/<SPREAD>/g,function(){return s}),RegExp(l,c)}s=r(s).source,i.languages.jsx=i.languages.extend("markup",e),i.languages.jsx.tag.pattern=r(/<\/?(?:[\w.:-]+(?:<S>+(?:[\w.:$-]+(?:=(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s{'"/>=]+|<BRACES>))?|<SPREAD>))*<S>*\/?)?>/.source),i.languages.jsx.tag.inside.tag.pattern=/^<\/?[^\s>\/]*/,i.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s'">]+)/,i.languages.jsx.tag.inside.tag.inside["class-name"]=/^[A-Z]\w*(?:\.[A-Z]\w*)*$/,i.languages.jsx.tag.inside.comment=e.comment,i.languages.insertBefore("inside","attr-name",{spread:{pattern:r(/<SPREAD>/.source),inside:i.languages.jsx}},i.languages.jsx.tag),i.languages.insertBefore("inside","special-attr",{script:{pattern:r(/=<BRACES>/.source),alias:"language-javascript",inside:{"script-punctuation":{pattern:/^=(?=\{)/,alias:"punctuation"},rest:i.languages.jsx}}},i.languages.jsx.tag);var a=function(l){return l?typeof l=="string"?l:typeof l.content=="string"?l.content:l.content.map(a).join(""):""},o=function(l){for(var c=[],u=0;u<l.length;u++){var h=l[u],d=!1;if(typeof h!="string"&&(h.type==="tag"&&h.content[0]&&h.content[0].type==="tag"?h.content[0].content[0].content==="</"?c.length>0&&c[c.length-1].tagName===a(h.content[0].content[1])&&c.pop():h.content[h.content.length-1].content==="/>"||c.push({tagName:a(h.content[0].content[1]),openedBraces:0}):c.length>0&&h.type==="punctuation"&&h.content==="{"?c[c.length-1].openedBraces++:c.length>0&&c[c.length-1].openedBraces>0&&h.type==="punctuation"&&h.content==="}"?c[c.length-1].openedBraces--:d=!0),(d||typeof h=="string")&&c.length>0&&c[c.length-1].openedBraces===0){var p=a(h);u<l.length-1&&(typeof l[u+1]=="string"||l[u+1].type==="plain-text")&&(p+=a(l[u+1]),l.splice(u+1,1)),u>0&&(typeof l[u-1]=="string"||l[u-1].type==="plain-text")&&(p=a(l[u-1])+p,l.splice(u-1,1),u--),l[u]=new i.Token("plain-text",p,null,p)}h.content&&typeof h.content!="string"&&o(h.content)}};i.hooks.add("after-tokenize",function(l){l.language!=="jsx"&&l.language!=="tsx"||o(l.tokens)})})(Prism);(function(i){var e=i.util.clone(i.languages.typescript);i.languages.tsx=i.languages.extend("jsx",e),delete i.languages.tsx.parameter,delete i.languages.tsx["literal-property"];var t=i.languages.tsx.tag;t.pattern=RegExp(/(^|[^\w$]|(?=<\/))/.source+"(?:"+t.pattern.source+")",t.pattern.flags),t.lookbehind=!0})(Prism);const{PREFIX_CHAT_BOX:tp}=Il,aGe=i=>{const[e,t]=H.useState(!1),n=H.useMemo(()=>{var r;return Dne((r=i.className)===null||r===void 0?void 0:r.split("-"),-1)},[i.className]),s=H.useCallback(()=>{Kw(i.children),t(!0),setTimeout(()=>{t(!1)},2e3)},[i.children]);return n?k.createElement("div",{className:`${tp}-content-code semi-always-dark`},k.createElement("div",{className:`${tp}-content-code-topSlot`},k.createElement("span",{className:`${tp}-content-code-topSlot-type`},n),k.createElement("span",{className:`${tp}-content-code-topSlot-copy`},e?k.createElement("span",{className:`${tp}-content-code-topSlot-copy-wrapper`},k.createElement(oy,null),k.createElement(gi,{componentName:"Chat"},r=>r.copied)):k.createElement("button",{className:`${tp}-content-code-topSlot-copy-wrapper ${tp}-content-code-topSlot-toCopy`,onClick:s},k.createElement(CQ,null),k.createElement(gi,{componentName:"Chat"},r=>r.copy)))),YL(i)):YL(i)},{PREFIX_CHAT_BOX:bg}=Il,{MESSAGE_STATUS:K7,MODE:X7,ROLE:oGe}=zu,lGe=i=>{const{message:e={},customRenderFunc:t,role:n,customMarkDownComponents:s,mode:r}=i,{content:a,role:o,status:l}=e,c=H.useMemo(()=>Object.assign({code:aGe,SemiFile:qL,img:ZL},s),[s]),u=H.useMemo(()=>{const d=o===oGe.USER,p=r===X7.BUBBLE,f=r===X7.USER_BUBBLE&&d;return K(`${bg}-content`,{[`${bg}-content-${r}`]:p||f,[`${bg}-content-user`]:p&&d||f,[`${bg}-content-error`]:l===K7.ERROR&&(p||f)})},[o,l]),h=H.useMemo(()=>{if(l===K7.LOADING)return k.createElement("span",{className:`${bg}-content-loading`},k.createElement("span",{className:`${bg}-content-loading-item`}));{let d;return typeof a=="string"?d=k.createElement(ff,{format:"md",raw:a,components:c}):Array.isArray(a)&&(d=a.map((p,f)=>{var g;if(p.type==="text")return k.createElement(ff,{key:"index",format:"md",raw:p.text,components:c});if(p.type==="image_url")return k.createElement(ZL,{key:"index",src:p.image_url.url});if(p.type==="file_url"){const{name:m,size:y,url:b,type:x}=p.file_url,S=(g=m.split(".").pop())!==null&&g!==void 0?g:x==null?void 0:x.split("/").pop();return k.createElement(qL,{key:"index",url:m,name:m,size:y,type:S})}return null})),k.createElement(k.Fragment,null,d)}},[l,a]);return t?t({message:e,role:n,defaultContent:h,className:u}):k.createElement("div",{className:u},h)};class cGe extends tt{constructor(e){super(Object.assign({},e)),this.showDeletePopup=()=>{this._adapter.setVisible(!0),this._adapter.setShowAction(!0),this._adapter.registerClickOutsideHandler(this.hideDeletePopup)},this.hideDeletePopup=()=>{this._adapter.setVisible(!1),setTimeout(()=>{this._adapter.setShowAction(!1)},150),this._adapter.unregisterClickOutsideHandler()},this.destroy=()=>{this._adapter.unregisterClickOutsideHandler()},this.deleteMessage=()=>{this._adapter.notifyDeleteMessage()},this.copyMessage=()=>{this._adapter.notifyMessageCopy(),this._adapter.copyToClipboardAndToast()},this.likeMessage=()=>{this._adapter.notifyLikeMessage()},this.dislikeMessage=()=>{this._adapter.notifyDislikeMessage()},this.resetMessage=()=>{this._adapter.notifyResetMessage()}}}const{PREFIX_CHAT_BOX_ACTION:Go}=Il,{ROLE:Y7,MESSAGE_STATUS:jS}=zu;class Nne extends Ve{constructor(e){super(e),this.copyNode=()=>k.createElement(it,{key:"copy",theme:"borderless",icon:k.createElement(CQ,null),type:"tertiary",onClick:this.foundation.copyMessage,className:`${Go}-btn`}),this.likeNode=()=>{const{message:t={}}=this.props,{like:n}=t;return k.createElement(it,{key:"like",theme:"borderless",icon:n?k.createElement(U6,null):k.createElement(W6,null),type:"tertiary",className:`${Go}-btn`,onClick:this.foundation.likeMessage})},this.dislikeNode=()=>{const{message:t={}}=this.props,{dislike:n}=t;return k.createElement(it,{theme:"borderless",key:"dislike",icon:n?k.createElement(U6,{className:`${Go}-icon-flip`}):k.createElement(W6,{className:"semi-chat-chatBox-action-icon-flip"}),type:"tertiary",className:`${Go}-btn`,onClick:this.foundation.dislikeMessage})},this.resetNode=()=>k.createElement(it,{key:"reset",theme:"borderless",icon:k.createElement(LOe,{className:`${Go}-icon-redo`}),type:"tertiary",onClick:this.foundation.resetMessage,className:`${Go}-btn`}),this.deleteNode=()=>{const t=k.createElement(gi,{componentName:"Chat"},n=>n.deleteConfirm);return k.createElement(Cd,{trigger:"custom",visible:this.state.visible,key:"delete",title:t,onConfirm:this.foundation.deleteMessage,onCancel:this.foundation.hideDeletePopup,position:"top"},k.createElement("span",{ref:this.popconfirmTriggerRef,className:`${Go}-delete-wrap`},k.createElement(it,{theme:"borderless",icon:k.createElement(wQ,null),type:"tertiary",className:`${Go}-btn`,onClick:this.foundation.showDeletePopup})))},this.foundation=new cGe(this.adapter),this.copySuccessNode=null,this.state={visible:!1,showAction:!1},this.clickOutsideHandler=null,this.containerRef=k.createRef(),this.popconfirmTriggerRef=k.createRef()}componentDidMount(){this.copySuccessNode=k.createElement(gi,{componentName:"Chat"},e=>e.copySuccess)}componentWillUnmount(){this.foundation.destroy()}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyDeleteMessage:()=>{const{message:e,onMessageDelete:t}=this.props;t==null||t(e)},notifyMessageCopy:()=>{const{message:e,onMessageCopy:t}=this.props;t==null||t(e)},copyToClipboardAndToast:()=>{var e;const{message:t={},toast:n}=this.props;if(typeof t.content=="string")Kw(t.content);else if(Array.isArray(t.content)){const s=(e=t.content)===null||e===void 0?void 0:e.map(r=>r.text).join("");Kw(s)}n.success({content:this.copySuccessNode})},notifyLikeMessage:()=>{const{message:e,onMessageGoodFeedback:t}=this.props;t==null||t(e)},notifyDislikeMessage:()=>{const{message:e,onMessageBadFeedback:t}=this.props;t==null||t(e)},notifyResetMessage:()=>{const{message:e,onMessageReset:t}=this.props;t==null||t(e)},setVisible:e=>{this.setState({visible:e})},setShowAction:e=>{this.setState({showAction:e})},registerClickOutsideHandler:e=>{this.clickOutsideHandler&&this.adapter.unregisterClickOutsideHandler(),this.clickOutsideHandler=t=>{let n=this.popconfirmTriggerRef&&this.popconfirmTriggerRef.current;const s=t.target,r=t.composedPath&&t.composedPath()||[s];n&&!n.contains(s)&&!r.includes(n)&&e()},window.addEventListener("mousedown",this.clickOutsideHandler)},unregisterClickOutsideHandler:()=>{this.clickOutsideHandler&&(window.removeEventListener("mousedown",this.clickOutsideHandler),this.clickOutsideHandler=null)}})}render(){const{message:e={},lastChat:t}=this.props,{showAction:n}=this.state,{role:s,status:r=jS.COMPLETE}=e,a=r===jS.COMPLETE,o=s!==Y7.USER&&a,l=t&&s===Y7.ASSISTANT,c=r!==jS.LOADING&&r!==jS.INCOMPLETE,u=K(Go,{[`${Go}-show`]:l&&c||n,[`${Go}-hidden`]:!c}),{customRenderFunc:h}=this.props;if(h){const d=[];return a&&d.push(this.copyNode()),o&&d.push(this.likeNode()),o&&d.push(this.dislikeNode()),l&&d.push(this.resetNode()),d.push(this.deleteNode()),h({message:e,defaultActions:d,className:u})}return k.createElement("div",{className:u,ref:this.containerRef},a&&this.copyNode(),o&&this.likeNode(),o&&this.dislikeNode(),l&&this.resetNode(),this.deleteNode())}}Nne.propTypes={role:v.object,message:v.object,showReset:v.bool,onMessageBadFeedback:v.func,onMessageGoodFeedback:v.func,onMessageCopy:v.func,onChatsChange:v.func,onMessageDelete:v.func,onMessageReset:v.func,customRenderFunc:v.func};const{PREFIX_CHAT_BOX:qM}=Il,{ROLE:uGe,CHAT_ALIGN:hGe}=zu,dGe=k.memo(i=>{const{message:e,lastChat:t,align:n,toast:s,mode:r,roleConfig:a,onMessageBadFeedback:o,onMessageGoodFeedback:l,onMessageCopy:c,onChatsChange:u,onMessageDelete:h,onMessageReset:d,chatBoxRenderConfig:p={},customMarkDownComponents:f,previousMessage:g}=i,{renderChatBoxAvatar:m,renderChatBoxAction:y,renderChatBoxContent:b,renderChatBoxTitle:x,renderFullChatBox:S}=p,C=H.useMemo(()=>(e==null?void 0:e.role)===(g==null?void 0:g.role),[e.role,g]),w=H.useMemo(()=>{var M;let R={};return a&&(R=(M=a[e.role])!==null&&M!==void 0?M:{}),R},[e.role,a]),A=H.useMemo(()=>k.createElement(nGe,{continueSend:C,role:w,customRenderFunc:m}),[w,m]),T=H.useMemo(()=>k.createElement(rGe,{role:w,message:e,customRenderFunc:x}),[w,e,x]),E=H.useMemo(()=>k.createElement(lGe,{mode:r,role:w,message:e,customMarkDownComponents:f,customRenderFunc:b}),[e,w,b]),P=H.useMemo(()=>k.createElement(Nne,{toast:s,role:w,message:e,lastChat:t,onMessageBadFeedback:o,onMessageCopy:c,onChatsChange:u,onMessageDelete:h,onMessageGoodFeedback:l,onMessageReset:d,customRenderFunc:y}),[e,w,t,o,l,c,u,h,d,y]),O=H.useMemo(()=>K(qM,{[`${qM}-right`]:e.role===uGe.USER&&n===hGe.LEFT_RIGHT}),[e.role,n]);return typeof S!="function"?k.createElement("div",{className:O},A,k.createElement("div",{className:`${qM}-wrap`},!C&&T,E,P)):S({message:e,role:w,defaultNodes:{avatar:A,title:T,content:E,action:P},className:O})}),{PREFIX_DIVIDER:pGe,PREFIX:fGe}=Il,{ROLE:gGe}=zu,mGe=k.memo(i=>{const{chats:e,onMessageBadFeedback:t,onMessageCopy:n,mode:s,onChatsChange:r,onMessageDelete:a,onMessageGoodFeedback:o,onMessageReset:l,roleConfig:c,chatBoxRenderConfig:u,align:h,customMarkDownComponents:d,renderDivider:p}=i,[f,g]=ML.useToast();return k.createElement(k.Fragment,null,e.map((m,y)=>{const b=y===e.length-1;return m.role===gGe.DIVIDER?p?p(m):k.createElement(iA,{key:m.id,className:pGe},k.createElement(gi,{componentName:"Chat"},x=>x.clearContext)):k.createElement(dGe,{previousMessage:y?e[y-1]:void 0,toast:f,align:h,mode:s,key:m.id,message:m,roleConfig:c,onMessageBadFeedback:t,onMessageCopy:n,onChatsChange:r,onMessageDelete:a,onMessageGoodFeedback:o,onMessageReset:l,lastChat:b,customMarkDownComponents:d,chatBoxRenderConfig:u})}),k.createElement("div",{className:`${fGe}-toast`},g))}),{PIC_PREFIX:yGe,PIC_SUFFIX_ARRAY:_Ge,ROLE:NS,SCROLL_ANIMATION_TIME:vGe,SHOW_SCROLL_GAP:bGe}=zu;class xGe extends tt{constructor(e){super(Object.assign({},e)),this.init=()=>{this.scrollToBottomImmediately(),this._adapter.registerWheelEvent()},this.destroy=()=>{this.animation&&this.animation.destroy(),this._adapter.unRegisterWheelEvent()},this.stopGenerate=t=>{this._adapter.notifyStopGenerate(t)},this.scrollToBottomImmediately=()=>{const t=this._adapter.getContainerRef();t&&(t.scrollTop=t.scrollHeight)},this.scrollToBottomWithAnimation=()=>{const t=vGe,n=this._adapter.getContainerRef();if(!n)return;const s=n.scrollTop,r=n.scrollHeight;this.animation=new VQ({from:{scrollTop:s},to:{scrollTop:r}},{duration:t,easing:"easeInOutCubic"}),this.animation.on("frame",a=>{let{scrollTop:o}=a;n.scrollTop=o}),this.animation.start()},this.containerScroll=t=>{t.persist(),requestAnimationFrame(()=>{this.getScroll(t.target)})},this.getScroll=Hw(t=>{const n=t.scrollHeight,s=t.clientHeight,r=t.scrollTop,{backBottomVisible:a}=this.getStates();return n-r-s<=bGe?a&&this._adapter.setBackBottomVisible(!1):a||this._adapter.setBackBottomVisible(!0),scroll},100),this.clearContext=t=>{const{chats:n}=this.getStates();if(n[n.length-1].role===NS.DIVIDER)return;const s={role:NS.DIVIDER,id:Cp(),createAt:Date.now()},r=[...n,s];this._adapter.notifyChatsChange(r),this._adapter.notifyClearContext()},this.onMessageSend=(t,n)=>{let s;if(n&&n.length===0?s=t:(s=[],t&&s.push({type:"text",text:t}),(n??[]).map(r=>{var a;const{fileInstance:o,name:l="",url:c,size:u}=r,h=l.split(".").pop();((a=o==null?void 0:o.type)===null||a===void 0?void 0:a.startsWith(yGe))||_Ge.includes(h)?s.push({type:"image_url",image_url:{url:c}}):s.push({type:"file_url",file_url:{url:c,name:l,size:u,type:o==null?void 0:o.type}})})),s){const r={role:NS.USER,id:Cp(),createAt:Date.now(),content:s};this._adapter.notifyChatsChange([...this.getStates().chats,r])}this._adapter.setWheelScroll(!1),this._adapter.registerWheelEvent(),this._adapter.notifyMessageSend(t,n)},this.onHintClick=t=>{const{chats:n}=this.getStates(),s={role:NS.USER,id:Cp(),createAt:Date.now(),content:t},r=[...n,s];this._adapter.notifyChatsChange(r),this._adapter.notifyHintClick(t)},this.onInputChange=t=>{this._adapter.notifyInputChange(t)},this.deleteMessage=t=>{const{onMessageDelete:n,onChatsChange:s}=this.getProps(),{chats:r}=this.getStates();n==null||n(t);const a=r.filter(o=>o.id!==t.id);s==null||s(a)},this.likeMessage=t=>{const{chats:n}=this.getStates();this._adapter.notifyLikeMessage(t);const s=n.findIndex(o=>o.id===t.id),r=Object.assign(Object.assign({},n[s]),{like:!n[s].like,dislike:!1}),a=[...n];a.splice(s,1,r),this._adapter.notifyChatsChange(a)},this.dislikeMessage=t=>{const{chats:n}=this.getStates();this._adapter.notifyDislikeMessage(t);const s=n.findIndex(o=>o.id===t.id),r=Object.assign(Object.assign({},n[s]),{like:!1,dislike:!n[s].dislike}),a=[...n];a.splice(s,1,r),this._adapter.notifyChatsChange(a)},this.resetMessage=t=>{const{chats:n}=this.getStates(),s=n[n.length-1],r=Object.assign(Object.assign({},s),{status:"loading",content:"",id:Cp(),createAt:Date.now()}),a=n.slice(0,-1).concat(r);this._adapter.notifyChatsChange(a);const{onMessageReset:o}=this.getProps();o==null||o(t)},this.handleDragOver=t=>{this._adapter.setUploadAreaVisible(!0)},this.handleContainerDragOver=t=>{jn(t)},this.handleContainerDrop=t=>{var n;this._adapter.setUploadAreaVisible(!1),this._adapter.manualUpload((n=t==null?void 0:t.dataTransfer)===null||n===void 0?void 0:n.files),jn(t)},this.handleContainerDragLeave=t=>{jn(t);const n=this._adapter.getDropAreaElement();n!==t.target&&n.contains(t.target)||setTimeout(()=>{this._adapter.setUploadAreaVisible(!1)})}}}const Ua=Il.PREFIX,{CHAT_ALIGN:SGe,MODE:CGe,SEND_HOT_KEY:wGe,MESSAGE_STATUS:q7}=zu;class Db extends Ve{constructor(e){super(e),this.resetMessage=()=>{this.foundation.resetMessage(null)},this.clearContext=()=>{this.foundation.clearContext(null)},this.scrollToBottom=t=>{t?this.foundation.scrollToBottomWithAnimation():this.foundation.scrollToBottomImmediately()},this.sendMessage=(t,n)=>{this.foundation.onMessageSend(t,n)},this.containerScroll=t=>{this.scrollTargetRef.current=t.target,t.target===t.currentTarget&&this.foundation.containerScroll(t)},this.containerRef=H.createRef(),this.uploadRef=H.createRef(),this.dropAreaRef=H.createRef(),this.wheelEventHandler=null,this.foundation=new xGe(this.adapter),this.scrollTargetRef=H.createRef(),this.state={backBottomVisible:!1,chats:[],cacheHints:[],wheelScroll:!1,uploadAreaVisible:!1}}get adapter(){return Object.assign(Object.assign({},super.adapter),{getContainerRef:()=>{var e;return(e=this.containerRef)===null||e===void 0?void 0:e.current},setWheelScroll:e=>{this.setState({wheelScroll:e})},notifyChatsChange:e=>{const{onChatsChange:t}=this.props;t&&t(e)},notifyLikeMessage:e=>{const{onMessageGoodFeedback:t}=this.props;t&&t(e)},notifyDislikeMessage:e=>{const{onMessageBadFeedback:t}=this.props;t&&t(e)},notifyCopyMessage:e=>{const{onMessageCopy:t}=this.props;t&&t(e)},notifyClearContext:()=>{const{onClear:e}=this.props;e&&e()},notifyMessageSend:(e,t)=>{const{onMessageSend:n}=this.props;n&&n(e,t)},notifyInputChange:e=>{const{onInputChange:t}=this.props;t&&t(e)},setBackBottomVisible:e=>{this.setState(t=>t.backBottomVisible!==e?{backBottomVisible:e}:null)},registerWheelEvent:()=>{this.adapter.unRegisterWheelEvent();const e=this.containerRef.current;e&&(this.wheelEventHandler=t=>{var n;((n=this.scrollTargetRef)===null||n===void 0?void 0:n.current)===t.currentTarget&&(this.adapter.setWheelScroll(!0),this.adapter.unRegisterWheelEvent())},e.addEventListener("wheel",this.wheelEventHandler))},unRegisterWheelEvent:()=>{if(this.wheelEventHandler){const e=this.containerRef.current;if(e)e.removeEventListener("wheel",this.wheelEventHandler);else return;this.wheelEventHandler=null}},notifyStopGenerate:e=>{const{onStopGenerator:t}=this.props;t&&t(e)},notifyHintClick:e=>{const{onHintClick:t}=this.props;t&&t(e)},setUploadAreaVisible:e=>{this.setState({uploadAreaVisible:e})},manualUpload:e=>{const t=this.uploadRef.current;t&&t.insert(e)},getDropAreaElement:()=>{var e;return(e=this.dropAreaRef)===null||e===void 0?void 0:e.current}})}static getDerivedStateFromProps(e,t){const{chats:n,hints:s}=e,r={};return n!==t.chats&&(r.chats=n??[]),s!==t.cacheHints&&(r.cacheHints=s),Object.keys(r).length?r:null}componentDidMount(){this.foundation.init()}componentDidUpdate(e,t,n){const{chats:s,hints:r}=this.props,{chats:a,cacheHints:o}=t,{wheelScroll:l}=this.state;let c=!1;if(s!==a&&Array.isArray(s)&&Array.isArray(a)){const u=s[s.length-1],h=a[a.length-1];s.length>a.length?(a.length===0||u.id!==h.id)&&(c=!0):s.length===a.length&&(u.status!=="complete"||u.status!==h.status)&&(c=!0)}r!==o&&r.length>o.length&&(c=!0),!l&&c&&this.foundation.scrollToBottomImmediately()}componentWillUnmount(){this.foundation.destroy()}render(){const{topSlot:e,bottomSlot:t,roleConfig:n,hints:s,onChatsChange:r,onMessageCopy:a,renderInputArea:o,chatBoxRenderConfig:l,align:c,renderHintBox:u,style:h,className:d,showStopGenerate:p,customMarkDownComponents:f,mode:g,showClearContext:m,placeholder:y,inputBoxCls:b,inputBoxStyle:x,hintStyle:S,hintCls:C,uploadProps:w,uploadTipProps:A,sendHotKey:T,renderDivider:E}=this.props,{backBottomVisible:P,chats:O,wheelScroll:M,uploadAreaVisible:R}=this.state;let j=!1;const I=O.length>0&&O[O.length-1];let D=!1;if(I&&p){const z=(I==null?void 0:I.status)&&[q7.LOADING,q7.INCOMPLETE].includes(I==null?void 0:I.status);D=z,p&&(j=z)}return H.createElement("div",{className:K(`${Ua}`,d),style:h,onDragOver:this.foundation.handleDragOver},R&&H.createElement("div",{ref:this.dropAreaRef,className:`${Ua}-dropArea`,onDragOver:this.foundation.handleContainerDragOver,onDrop:this.foundation.handleContainerDrop,onDragLeave:this.foundation.handleContainerDragLeave},H.createElement("span",{className:`${Ua}-dropArea-text`},H.createElement(gi,{componentName:"Chat"},z=>z.dropAreaText))),H.createElement("div",{className:`${Ua}-inner`},e,H.createElement("div",{className:`${Ua}-content`},H.createElement("div",{className:K(`${Ua}-container`,{"semi-chat-container-scroll-hidden":!M}),onScroll:this.containerScroll,ref:this.containerRef},H.createElement(mGe,{align:c,mode:g,chats:O,roleConfig:n,customMarkDownComponents:f,onMessageDelete:this.foundation.deleteMessage,onChatsChange:r,onMessageBadFeedback:this.foundation.dislikeMessage,onMessageGoodFeedback:this.foundation.likeMessage,onMessageReset:this.foundation.resetMessage,onMessageCopy:a,chatBoxRenderConfig:l,renderDivider:E}),!!(s!=null&&s.length)&&H.createElement(iGe,{className:C,style:S,value:s,onHintClick:this.foundation.onHintClick,renderHintBox:u}))),P&&!j&&H.createElement("span",{className:`${Ua}-action`},H.createElement(it,{className:`${Ua}-action-content ${Ua}-action-backBottom`,icon:H.createElement(af,{size:"extra-large"}),type:"tertiary",onClick:this.foundation.scrollToBottomWithAnimation})),j&&H.createElement("span",{className:`${Ua}-action`},H.createElement(it,{className:`${Ua}-action-content ${Ua}-action-stop`,icon:H.createElement(rOe,{size:"extra-large"}),type:"tertiary",onClick:this.foundation.stopGenerate},H.createElement(gi,{componentName:"Chat"},z=>z.stop))),H.createElement(KN,{showClearContext:m,uploadRef:this.uploadRef,manualUpload:this.adapter.manualUpload,style:x,className:b,placeholder:y,disableSend:D,onClearContext:this.foundation.clearContext,onSend:this.foundation.onMessageSend,onInputChange:this.foundation.onInputChange,renderInputArea:o,uploadProps:w,uploadTipProps:A,sendHotKey:T}),t))}}Db.__SemiComponentName__="Chat";Db.propTypes={className:v.string,style:v.object,roleConfig:v.object,chats:v.array,hints:v.array,renderHintBox:v.func,onChatsChange:v.func,align:v.string,chatBoxRenderConfig:v.object,customMarkDownComponents:v.object,onClear:v.func,onMessageDelete:v.func,onMessageReset:v.func,onMessageCopy:v.func,onMessageGoodFeedback:v.func,onMessageBadFeedback:v.func,inputContentConvert:v.func,onMessageSend:v.func,InputBoxStyle:v.object,inputBoxCls:v.string,renderFullInputBox:v.func,placeholder:v.string,topSlot:v.node||v.array,bottomSlot:v.node||v.array,showStopGenerate:v.bool,showClearContext:v.bool,hintStyle:v.object,hintCls:v.string,uploadProps:v.object,uploadTipProps:v.object,mode:v.string};Db.defaultProps=os(Db.__SemiComponentName__,{align:SGe.LEFT_RIGHT,showStopGenerate:!1,mode:CGe.BUBBLE,showClearContext:!1,sendHotKey:wGe.ENTER});const AGe={PREFIX:`${ge}-hotKeys`},kGe={a:"KeyA",b:"KeyB",c:"KeyC",d:"KeyD",e:"KeyE",f:"KeyF",g:"KeyG",h:"KeyH",i:"KeyI",j:"KeyJ",k:"KeyK",l:"KeyL",m:"KeyM",n:"KeyN",o:"KeyO",p:"KeyP",q:"KeyQ",r:"KeyR",s:"KeyS",t:"KeyT",u:"KeyU",v:"KeyV",w:"KeyW",x:"KeyX",y:"KeyY",z:"KeyZ",0:"Digit0",1:"Digit1",2:"Digit2",3:"Digit3",4:"Digit4",5:"Digit5",6:"Digit6",7:"Digit7",8:"Digit8",9:"Digit9"," ":"Space",enter:"Enter",escape:"Escape",backspace:"Backspace",tab:"Tab","-":"Minus","=":"Equal","[":"BracketLeft","]":"BracketRight","\\":"Backslash",";":"Semicolon","'":"Quote","`":"Backquote",",":"Comma",".":"Period","/":"Slash","?":"Slash","!":"Digit1","@":"Digit2","#":"Digit3",$:"Digit4","%":"Digit5","^":"Digit6","&":"Digit7","*":"Digit8","(":"Digit9",")":"Digit0",arrowup:"ArrowUp",arrowdown:"ArrowDown",arrowleft:"ArrowLeft",arrowright:"ArrowRight",shift:"ShiftLeft",control:"ControlLeft",alt:"AltLeft",meta:"MetaLeft",capslock:"CapsLock",f1:"F1",f2:"F2",f3:"F3",f4:"F4",f5:"F5",f6:"F6",f7:"F7",f8:"F8",f9:"F9",f10:"F10",f11:"F11",f12:"F12",insert:"Insert",delete:"Delete",home:"Home",end:"End",pageup:"PageUp",pagedown:"PageDown",numlock:"NumLock",scrolllock:"ScrollLock",pause:"Pause",numpad0:"Numpad0",numpad1:"Numpad1",numpad2:"Numpad2",numpad3:"Numpad3",numpad4:"Numpad4",numpad5:"Numpad5",numpad6:"Numpad6",numpad7:"Numpad7",numpad8:"Numpad8",numpad9:"Numpad9",numpaddecimal:"NumpadDecimal",numpaddivide:"NumpadDivide",numpadmultiply:"NumpadMultiply",numpadsubtract:"NumpadSubtract",numpadadd:"NumpadAdd",numpadenter:"NumpadEnter"};function TGe(i){return kGe[i.toLowerCase()]||void 0}var qa;(function(i){i.A="a",i.B="b",i.C="c",i.D="d",i.E="e",i.F="f",i.G="g",i.H="h",i.I="i",i.J="j",i.K="k",i.L="l",i.M="m",i.N="n",i.O="o",i.P="p",i.Q="q",i.R="r",i.S="s",i.T="t",i.U="u",i.V="v",i.W="w",i.X="x",i.Y="y",i.Z="z",i.Digit0="0",i.Digit1="1",i.Digit2="2",i.Digit3="3",i.Digit4="4",i.Digit5="5",i.Digit6="6",i.Digit7="7",i.Digit8="8",i.Digit9="9",i.Space=" ",i.Enter="enter",i.Escape="escape",i.Backspace="backspace",i.Tab="tab",i.Minus="-",i.Equal="=",i.BracketLeft="[",i.BracketRight="]",i.Backslash="\\",i.Semicolon=";",i.Quote="'",i.Backquote="`",i.Comma=",",i.Period=".",i.Slash="/",i.Exclamation="!",i.At="@",i.Hash="#",i.Dollar="$",i.Percent="%",i.Caret="^",i.Ampersand="&",i.Asterisk="*",i.LeftParenthesis="(",i.RightParenthesis=")",i.ArrowUp="arrowup",i.ArrowDown="arrowdown",i.ArrowLeft="arrowleft",i.ArrowRight="arrowright",i.Shift="shift",i.Control="control",i.Alt="alt",i.Meta="meta",i.CapsLock="capslock",i.F1="f1",i.F2="f2",i.F3="f3",i.F4="f4",i.F5="f5",i.F6="f6",i.F7="f7",i.F8="f8",i.F9="f9",i.F10="f10",i.F11="f11",i.F12="f12",i.Insert="insert",i.Delete="delete",i.Home="home",i.End="end",i.PageUp="pageup",i.PageDown="pagedown",i.NumLock="numlock",i.ScrollLock="scrolllock",i.Pause="pause",i.Numpad0="numpad0",i.Numpad1="numpad1",i.Numpad2="numpad2",i.Numpad3="numpad3",i.Numpad4="numpad4",i.Numpad5="numpad5",i.Numpad6="numpad6",i.Numpad7="numpad7",i.Numpad8="numpad8",i.Numpad9="numpad9",i.NumpadDecimal="numpaddecimal",i.NumpadDivide="numpaddivide",i.NumpadMultiply="numpadmultiply",i.NumpadSubtract="numpadsubtract",i.NumpadAdd="numpadadd",i.NumpadEnter="numpadenter"})(qa||(qa={}));class EGe extends tt{constructor(e){super(Object.assign({},e)),this.isValidHotKeys=t=>{let n=0;const s=[qa.Meta,qa.Alt,qa.Shift,qa.Control];return t.forEach(r=>{if(r=r.toLowerCase(),!Object.values(qa).some(a=>a===r))throw new Error(`${r} is not a valid key`);s.includes(r)||(n+=1)}),n===1},this.handleKeyDown=t=>{const{mergeMetaCtrl:n,hotKeys:s,preventDefault:r}=this.getProps();let a=new Array(4).fill(!1),o=[t.metaKey,t.shiftKey,t.altKey,t.ctrlKey];const l=s==null?void 0:s.map(c=>(c=c.toLowerCase(),c===qa.Meta?(a[0]=!0,t.metaKey):c===qa.Shift?(a[1]=!0,t.shiftKey):c===qa.Alt?(a[2]=!0,t.altKey):c===qa.Control?(a[3]=!0,t.ctrlKey):t.code===TGe(c)));if(a.every((c,u)=>c===o[u])&&l.every(Boolean)){r&&t.preventDefault(),this._adapter.notifyHotKey(t);return}}}init(){const e=this._adapter.getListenerTarget();e==null||e.addEventListener("keydown",this.handleKeyDown);const t=this.getProps().hotKeys;if(!this.isValidHotKeys(t))throw new Error("HotKeys must have one common key and 0/some modifier key")}destroy(){const e=this._adapter.getListenerTarget();e==null||e.removeEventListener("keydown",this.handleKeyDown)}}var PGe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const o_=AGe.PREFIX;class Fb extends Ve{constructor(e){super(e),this.state={},this.foundation=new EGe(this.adapter)}componentDidMount(){this.foundation.init()}componentDidUpdate(e){}componentWillUnmount(){this.foundation.destroy()}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyHotKey:e=>{var t,n;(n=(t=this.props).onHotKey)===null||n===void 0||n.call(t,e)},getListenerTarget:()=>{var e,t,n;return(n=(t=(e=this.props).getListenerTarget)===null||t===void 0?void 0:t.call(e))!==null&&n!==void 0?n:document.body}})}render(){const e=this.props,{hotKeys:t,content:n,onClick:s,render:r,getListenerTarget:a,className:o,style:l}=e,c=PGe(e,["hotKeys","content","onClick","render","getListenerTarget","className","style"]);if(typeof r<"u")return r===null||typeof r=="function"&&r()===null?null:k.createElement("div",Object.assign({onClick:s,className:K(o_,o),style:l},this.getDataAttr(c)),typeof r=="function"?r():r);const u=n??t;return k.createElement("div",Object.assign({onClick:s,className:K(o_,o),style:l},this.getDataAttr(c)),u.map((h,d)=>d===0?k.createElement("span",{key:d},k.createElement("span",{className:o_+"-content"},h)):k.createElement("span",{key:d},k.createElement("span",{className:o_+"-split"},"+"),k.createElement("span",{className:o_+"-content"},h))))}}Fb.propTypes={preventDefault:v.bool,hotKeys:v.arrayOf(v.string),content:v.arrayOf(v.string),onClick:v.func,onHotKey:v.func,mergeMetaCtrl:v.bool,render:v.oneOfType([v.func,v.node]),getListenerTarget:v.func,className:v.string,style:v.object};Fb.defaultProps={preventDefault:!1,hotKeys:null,content:null,onClick:J,onHotKey:J,mergeMetaCtrl:!1,render:void 0,getListenerTarget:()=>document.body,className:"",style:null};Fb.Keys=qa;let zp=[],$S=[];const OGe=15,MGe=6e4;function IGe(){return"Notification"in window?Notification.permission==="granted"?(pt("getSystemToastPermissions","successfully",""),!0):Notification.permission!=="denied"?(Notification.requestPermission().then(i=>{i==="granted"?(console.log(""),pt("getSystemToastPermissions","successfully","")):(console.log(""),pt("getSystemToastPermissions","warning",""))}),!1):(console.log(""),pt("getSystemToastPermissions","warning",""),!1):(pt("getSystemToastPermissions","warning",""),console.log(""),!1)}function RGe(i,e,t="CCRS.png"){return IGe()?(new Notification(i,{body:e,icon:t}),!0):(console.log(""),!1)}function Ys(i,e,t=null,n=3,s="info",r=!0,a="normal"){const o=Date.now();if($S=$S.filter(u=>o-u<=MGe),$S.length>=OGe)return console.log(""),!1;const l={id:zp.length+1,time:Xy(),title:i,content:e};$S.push(o),console.log(l);let c={title:i,position:"top",content:e,duration:n,theme:a};switch(s){case"success":rc.success({...c,icon:t});break;case"info":rc.info({...c,icon:t});break;case"warning":rc.warning({...c,icon:t});break;case"error":rc.error({...c,icon:t});break}return r&&zp.push(l),$ne(),!0}function LGe(){return zp}function Z7(i=0){return i===0?zp.length=0:zp=zp.filter(e=>e.id!==i),$ne(),!0}const DGe=[];function $ne(){DGe.forEach(i=>i(zp))}function FGe(){const i=dt("uuid"),e=VC(Yh());e.on("new_message",t=>{pt("","successfully",t.message),Ys("Server Notify",t.message)}),e.on("register",t=>{t.message===""?pt("","successfully"):pt("","error",t.message)}),e.emit("register",{uuid:i})}const vs=[];for(let i=0;i<256;++i)vs.push((i+256).toString(16).slice(1));function BGe(i,e=0){return(vs[i[e+0]]+vs[i[e+1]]+vs[i[e+2]]+vs[i[e+3]]+"-"+vs[i[e+4]]+vs[i[e+5]]+"-"+vs[i[e+6]]+vs[i[e+7]]+"-"+vs[i[e+8]]+vs[i[e+9]]+"-"+vs[i[e+10]]+vs[i[e+11]]+vs[i[e+12]]+vs[i[e+13]]+vs[i[e+14]]+vs[i[e+15]]).toLowerCase()}let ZM;const jGe=new Uint8Array(16);function NGe(){if(!ZM){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ZM=crypto.getRandomValues.bind(crypto)}return ZM(jGe)}const $Ge=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),J7={randomUUID:$Ge};function zne(i,e,t){if(J7.randomUUID&&!e&&!i)return J7.randomUUID();i=i||{};const n=i.random||(i.rng||NGe)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,BGe(n)}let Bb=null;async function zGe(){Bb=await ai.languageModel.create({systemPrompt:"You are a Google Gemini named Canf, used to assist users in solving program problems.."}),console.log("AI session initialized:",Bb)}async function HGe(){Bb=await Bb.clone()}async function VGe(){try{const i=await ai.languageModel.capabilities();i.available==="readily"?(await zGe(),bi("ai_support","True"),pt("Chrome_AI_Support","successfully","The browser environment meets the requirements")):i.available==="no"&&(bi("ai_support","False"),pt("Chrome_AI_Support","warning","The browser environment does not meet the requirements"))}catch(i){bi("ai_support","False"),pt("Chrome_AI_Support","warning","Error:"+i+",It may be an unsupported browser.")}}async function Q7(i){try{const{available:e}=await ai.languageModel.capabilities();if(e!=="no"){const t=await Bb.prompt(i);return typeof t=="string"?t:(console.error("Invalid result format from session.prompt:",t),"Invalid result format from session.prompt:"+t)}else return"something was wrong"}catch(e){return console.error("Error in tryAskAI:",e),"something was wrong:"+e}}function UGe(){const i="127.0.0.1:5000",t="true",n="false",s="auto",r={api_isHTTPS:"/isHTTPS",api_clear:"/clear",api_getpicture:"/getpicture",api_start:"/start",api_upload:"/upload",api_test:"/test",api_info:"/info",api_command:"/command"},a=zne(),o="true";return FGe(),VGe().then(),dt("Language")===null&&bi("Language",2),dt("use_ai_page")===null&&bi("use_ai_page",n),dt("use_app_content_menu")===null&&bi("use_app_content_menu",o),dt("uuid")===null&&bi("uuid",a),dt("server_ip")===null&&bi("server_ip",i),dt("theme_color")===null&&bi("theme_color",s),dt("use_https")===null&&bi("use_https",t),dt("api_service")===null&&bi("api_service",r,!0),pt("QuickLoadingService:language Loading","successfully",dt("Language")),pt("QuickLoadingService:Server_ip","successfully",dt("server_ip")),pt("QuickLoadingService:api_service","successfully",Gfe().toString()),pt("QuickLoadingService:new_settings_page","successfully",dt("new_settings_page")),pt("QuickLoadingService:use_https","successfully",dt("use_https")),pt("QuickLoadingService:theme_color","successfully",dt("theme_color")),pt("QuickLoadingService:","successfully"),!0}const Hne=(i,e,t)=>{const n=i&&getComputedStyle(t??document.body).getPropertyValue(i)||e;return n&&!isNaN(n[0])?`rgba(${n})`:n},WGe=(i,e,t)=>{new MutationObserver(n=>{n.forEach(s=>{s.attributeName===e&&t(s)})}).observe(i,{attributes:!0})},GGe=(i,e,t,n)=>{var s;return(s=e==null?void 0:e.map((r,a)=>{const{scheme:o}=t[a];return Object.assign(Object.assign({},r),{scheme:r.scheme.map((l,c)=>Hne(typeof l=="object"?l[i]:l,o==null?void 0:o[c],n))})}))!==null&&s!==void 0?s:t},KGe=(i,e,t,n)=>{if(e){const s={};return Object.keys(e).forEach(r=>{const a=typeof e[r]=="object"?e[r][i]:e[r];s[r]=Hne(a,t[r],n)}),s}return t},Vne=i=>i;var Sn;(function(i){i["desktop-browser"]="desktop-browser",i["mobile-browser"]="mobile-browser",i.node="node",i.worker="worker",i.miniApp="miniApp",i.wx="wx",i.tt="tt",i.harmony="harmony",i["desktop-miniApp"]="desktop-miniApp",i.lynx="lynx"})(Sn||(Sn={}));var oe;(function(i){i.cartesianAxis="cartesianAxis",i.cartesianBandAxis="cartesianAxis-band",i.cartesianLinearAxis="cartesianAxis-linear",i.cartesianTimeAxis="cartesianAxis-time",i.cartesianLogAxis="cartesianAxis-log",i.cartesianSymlogAxis="cartesianAxis-symlog",i.polarAxis="polarAxis",i.polarBandAxis="polarAxis-band",i.polarLinearAxis="polarAxis-linear",i.crosshair="crosshair",i.cartesianCrosshair="cartesianCrosshair",i.polarCrosshair="polarCrosshair",i.dataZoom="dataZoom",i.geoCoordinate="geoCoordinate",i.indicator="indicator",i.discreteLegend="discreteLegend",i.continuousLegend="continuousLegend",i.colorLegend="colorLegend",i.sizeLegend="sizeLegend",i.mapLabel="mapLabel",i.markLine="markLine",i.markArea="markArea",i.markPoint="markPoint",i.polarMarkLine="polarMarkLine",i.polarMarkArea="polarMarkArea",i.polarMarkPoint="polarMarkPoint",i.geoMarkPoint="geoMarkPoint",i.tooltip="tooltip",i.title="title",i.player="player",i.scrollBar="scrollBar",i.label="label",i.totalLabel="totalLabel",i.brush="brush",i.poptip="poptip",i.customMark="customMark"})(oe||(oe={}));var Une={exports:{}};(function(i){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function s(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function r(l,c,u,h,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new s(u,h||l,d),f=t?t+c:c;return l._events[f]?l._events[f].fn?l._events[f]=[l._events[f],p]:l._events[f].push(p):(l._events[f]=p,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,h;if(this._eventsCount===0)return c;for(h in u=this._events)e.call(u,h)&&c.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=t?t+c:c,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var d=0,p=h.length,f=new Array(p);d<p;d++)f[d]=h[d].fn;return f},o.prototype.listenerCount=function(c){var u=t?t+c:c,h=this._events[u];return h?h.fn?1:h.length:0},o.prototype.emit=function(c,u,h,d,p,f){var g=t?t+c:c;if(!this._events[g])return!1;var m=this._events[g],y=arguments.length,b,x;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,h),!0;case 4:return m.fn.call(m.context,u,h,d),!0;case 5:return m.fn.call(m.context,u,h,d,p),!0;case 6:return m.fn.call(m.context,u,h,d,p,f),!0}for(x=1,b=new Array(y-1);x<y;x++)b[x-1]=arguments[x];m.fn.apply(m.context,b)}else{var S=m.length,C;for(x=0;x<S;x++)switch(m[x].once&&this.removeListener(c,m[x].fn,void 0,!0),y){case 1:m[x].fn.call(m[x].context);break;case 2:m[x].fn.call(m[x].context,u);break;case 3:m[x].fn.call(m[x].context,u,h);break;case 4:m[x].fn.call(m[x].context,u,h,d);break;default:if(!b)for(C=1,b=new Array(y-1);C<y;C++)b[C-1]=arguments[C];m[x].fn.apply(m[x].context,b)}}return!0},o.prototype.on=function(c,u,h){return r(this,c,u,h,!1)},o.prototype.once=function(c,u,h){return r(this,c,u,h,!0)},o.prototype.removeListener=function(c,u,h,d){var p=t?t+c:c;if(!this._events[p])return this;if(!u)return a(this,p),this;var f=this._events[p];if(f.fn)f.fn===u&&(!d||f.once)&&(!h||f.context===h)&&a(this,p);else{for(var g=0,m=[],y=f.length;g<y;g++)(f[g].fn!==u||d&&!f[g].once||h&&f[g].context!==h)&&m.push(f[g]);m.length?this._events[p]=m.length===1?m[0]:m:a(this,p)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&a(this,u)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,i.exports=o})(Une);var XGe=Une.exports;const Yf=Xe(XGe),w0=(i,e)=>Object.prototype.toString.call(i)===`[object ${e}]`,Ui=(i,e=!1)=>e?typeof i=="boolean":i===!0||i===!1||w0(i,"Boolean"),ee=i=>typeof i=="function",B=i=>i==null,F=i=>i!=null,Ke=i=>{const e=typeof i;return i!==null&&e==="object"||e==="function"},YGe=i=>typeof i=="object"&&i!==null,vc=function(i){if(!YGe(i)||!w0(i,"Object"))return!1;if(Object.getPrototypeOf(i)===null)return!0;let e=i;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(i)===e},Fi=i=>i===void 0,be=(i,e=!1)=>{const t=typeof i;return e?t==="string":t==="string"||w0(i,"String")},ie=i=>Array.isArray?Array.isArray(i):w0(i,"Array"),XN=function(i){return i!==null&&typeof i!="function"&&Number.isFinite(i.length)},qGe=i=>w0(i,"Date"),ye=(i,e=!1)=>{const t=typeof i;return e?t==="number":t==="number"||w0(i,"Number")},ZGe=i=>typeof i=="string"&&!isNaN(Number(i))&&!isNaN(parseFloat(i)),Z=i=>ye(i)&&Number.isFinite(i),Wne=i=>new RegExp(/^(http(s)?:\/\/)\w+[^\s]+(\.[^\s]+){1,}$/).test(i),Gne=i=>new RegExp(/^data:image\/(?:gif|png|jpeg|bmp|webp|svg\+xml)(?:;charset=utf-8)?;base64,(?:[A-Za-z0-9]|[+/])+={0,2}/g).test(i),JGe=i=>({}).toString.call(i).replace(/^\[object /,"").replace(/]$/,""),QGe=Object.prototype,eKe=function(i){const e=i&&i.constructor;return i===(typeof e=="function"&&e.prototype||QGe)},tKe=Object.prototype.hasOwnProperty;function Te(i){if(B(i))return!0;if(XN(i))return!i.length;const e=JGe(i);if(e==="Map"||e==="Set")return!i.size;if(eKe(i))return!Object.keys(i).length;for(const t in i)if(tKe.call(i,t))return!1;return!0}const et=(i,e,t)=>{const n=be(e)?e.split("."):e;for(let s=0;s<n.length;s++)i=i?i[n[s]]:void 0;return i===void 0?t:i},iKe=Object.prototype.hasOwnProperty,so=(i,e)=>i!=null&&iKe.call(i,e);function Ta(i,e,t){let n;if(!F(i)||typeof i!="object"||e)return i;const s=ie(i),r=i.length;n=s?new Array(r):typeof i=="object"?{}:Ui(i)||ye(i)||be(i)?i:qGe(i)?new Date(+i):void 0;const a=s?void 0:Object.keys(Object(i));let o=-1;if(n)for(;++o<(a||i).length;){const l=a?a[o]:o,c=i[l];n[l]=Ta(c,e)}return n}function YN(i,e,t=!1,n=!1){if(e){if(i===e)return;if(F(e)&&typeof e=="object"){const s=Object(e),r=[];for(const l in s)r.push(l);let{length:a}=r,o=-1;for(;a--;){const l=r[++o];!F(s[l])||typeof s[l]!="object"||n&&ie(i[l])?Kne(i,l,s[l]):nKe(i,e,l,t,n)}}}}function nKe(i,e,t,n=!1,s=!1){const r=i[t],a=e[t];let o=e[t],l=!0;if(ie(a)){if(n)o=[];else if(ie(r))o=r;else if(XN(r)){o=new Array(r.length);let c=-1;const u=r.length;for(;++c<u;)o[c]=r[c]}}else vc(a)?(o=r??{},typeof r!="function"&&typeof r=="object"||(o={})):l=!1;l&&YN(o,a,n,s),Kne(i,t,o)}function Kne(i,e,t){(t!==void 0&&!sKe(i[e],t)||t===void 0&&!(e in i))&&(i[e]=t)}function sKe(i,e){return i===e||Number.isNaN(i)&&Number.isNaN(e)}function se(i,...e){let t=-1;const n=e.length;for(;++t<n;)YN(i,e[t],!0);return i}function kc(i,e){if(!i||!vc(i))return i;const t={};return Object.keys(i).forEach(n=>{const s=i[n];let r=!1;e.forEach(a=>{(be(a)&&a===n||a instanceof RegExp&&n.match(a))&&(r=!0)}),r||(t[n]=s)}),t}function e8(i){return Object.prototype.toString.call(i)}function t8(i){return Object.keys(i)}function Pt(i,e,t){if(i===e)return!0;if(typeof i!=typeof e||i==null||e==null)return!1;if(Number.isNaN(i)&&Number.isNaN(e))return!0;if(e8(i)!==e8(e))return!1;if(ee(i))return!!(t!=null&&t.skipFunction);if(typeof i!="object")return!1;if(ie(i)){if(i.length!==e.length)return!1;for(let r=i.length-1;r>=0;r--)if(!Pt(i[r],e[r],t))return!1;return!0}if(!vc(i))return!1;const n=t8(i),s=t8(e);if(n.length!==s.length)return!1;n.sort(),s.sort();for(let r=n.length-1;r>=0;r--)if(n[r]!=s[r])return!1;for(let r=n.length-1;r>=0;r--){const a=n[r];if(!Pt(i[a],e[a],t))return!1}return!0}function rKe(i){if(!i)return[];if(Object.keys)return Object.keys(i);const e=[];for(const t in i)i.hasOwnProperty(t)&&e.push(t);return e}function aKe(i,e,t){const n=rKe(e);for(let s=0;s<n.length;s++){const r=n[s];(t?e[r]!=null:i[r]==null)&&(i[r]=e[r])}return i}function Yt(i,e,t=!0){if(i="prototype"in i?i.prototype:i,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames){const n=Object.getOwnPropertyNames(e);for(let s=0;s<n.length;s++){const r=n[s];r!=="constructor"&&(t?e[r]!=null:i[r]==null)&&(i[r]=e[r])}}else aKe(i,e,t)}function q(i){return F(i)?ie(i)?i:[i]:[]}function It(i){if(XN(i))return i[i.length-1]}const an=(i,e)=>{var t;if(i.length===0)return;let n=i[0];for(let s=1;s<i.length;s++){const r=i[s];((t=e==null?void 0:e(r,n))!==null&&t!==void 0?t:r-n>0)&&(n=r)}return n},Mn=(i,e)=>{var t;if(i.length===0)return;let n=i[0];for(let s=1;s<i.length;s++){const r=i[s];((t=e==null?void 0:e(r,n))!==null&&t!==void 0?t:r-n<0)&&(n=r)}return n};function zS(i,e){if(!ie(i)||!ie(e)||i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}function oKe(i){return i&&ie(i)?Array.from(new Set(q(i))):i}function Xne(i,e=Math.random){let t,n,s=i.length;for(;s;)t=Math.floor(e()*s),n=i[--s],i[s]=i[t],i[t]=n;return i}function JL(i){if(!ie(i))return[i];const e=[];for(const t of i)e.push(...JL(t));return e}function Yne(i,e,t){F(e)||(e=i,i=0),F(t)||(t=1);let n=-1;const s=0|Math.max(0,Math.ceil((e-i)/t)),r=new Array(s);for(;++n<s;)r[n]=i+n*t;return r}function qne(i,e){return i<e?-1:i>e?1:i>=e?0:NaN}function ac(i){return Number(i)}function lKe(i,e,t=ac){const n=i.length;if(!n)return;if(n<2)return t(i[0],0,i);const s=(n-1)*e,r=Math.floor(s),a=t(i[r],r,i);return a+(t(i[r+1],r+1,i)-a)*(s-r)}const cKe=typeof console<"u";function HS(i,e,t){const n=[e].concat([].slice.call(t));cKe&&console[i].apply(console,n)}var da;(function(i){i[i.None=0]="None",i[i.Error=1]="Error",i[i.Warn=2]="Warn",i[i.Info=3]="Info",i[i.Debug=4]="Debug"})(da||(da={}));let ii=class la{static getInstance(e,t){return la._instance&&ye(e)?la._instance.level(e):la._instance||(la._instance=new la(e,t)),la._instance}static setInstance(e){return la._instance=e}static setInstanceLevel(e){la._instance?la._instance.level(e):la._instance=new la(e)}static clearInstance(){la._instance=null}constructor(e=da.None,t){this._onErrorHandler=[],this._level=e,this._method=t}addErrorHandler(e){this._onErrorHandler.find(t=>t===e)||this._onErrorHandler.push(e)}removeErrorHandler(e){const t=this._onErrorHandler.findIndex(n=>n===e);t<0||this._onErrorHandler.splice(t,1)}callErrorHandler(...e){this._onErrorHandler.forEach(t=>t(...e))}canLogInfo(){return this._level>=da.Info}canLogDebug(){return this._level>=da.Debug}canLogError(){return this._level>=da.Error}canLogWarn(){return this._level>=da.Warn}level(e){return arguments.length?(this._level=+e,this):this._level}error(...e){var t;return this._level>=da.Error&&(this._onErrorHandler.length?this.callErrorHandler(...e):HS((t=this._method)!==null&&t!==void 0?t:"error","ERROR",e)),this}warn(...e){return this._level>=da.Warn&&HS(this._method||"warn","WARN",e),this}info(...e){return this._level>=da.Info&&HS(this._method||"log","INFO",e),this}debug(...e){return this._level>=da.Debug&&HS(this._method||"log","DEBUG",e),this}};ii._instance=null;function Zne(i,e,t=0,n){for(B(n)&&(n=i.length);t<n;){const s=t+n>>>1;qne(i[s],e)>0?n=s:t=s+1}return t}const i8=(i,e)=>Jne(0,i.length,t=>e(i[t])),Jne=(i,e,t)=>{let n=i,s=e;for(;n<s;){const r=Math.floor((n+s)/2);t(r)>=0?s=r:n=r+1}return n},uKe=(i,e)=>{let t=i;return t=i.sort(qne),lKe(t,.5)},hKe=1e-10,dKe=1e-10;function Nn(i,e,t=dKe,n=hKe){const s=n,r=t*Math.max(i,e);return Math.abs(i-e)<=Math.max(s,r)}function Zc(i,e,t,n){return i>e&&!Nn(i,e,t,n)}function Wl(i,e,t,n){return i<e&&!Nn(i,e,t,n)}const Ax=i=>{let e=null,t=null;return(...n)=>(e&&n.every((s,r)=>s===e[r])||(e=n,t=i(...n)),t)},zi=function(i,e,t){return i<e?e:i>t?t:i},hp=(i,e,t)=>{let[n,s]=i;s<n&&(n=i[1],s=i[0]);const r=s-n;return r>=t-e?[e,t]:(n=Math.min(Math.max(n,e),t-r),[n,n+r])};function gy(i,e){let t;return i>e&&(t=i,i=e,e=t),n=>Math.max(i,Math.min(e,n))}let CA=!1;try{CA=typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"}catch{CA=!1}function zd(i,e,t){let n,s,r,a,o,l,c=0,u=!1,h=!1,d=!0;const p=!e&&e!==0&&CA;if(typeof i!="function")throw new TypeError("Expected a function");function f(S){const C=n,w=s;return n=s=void 0,c=S,a=i.apply(w,C),a}function g(S,C){return p?(cancelAnimationFrame(o),requestAnimationFrame(S)):setTimeout(S,C)}function m(S){const C=S-l;return l===void 0||C>=e||C<0||h&&S-c>=r}function y(){const S=Date.now();if(m(S))return b(S);o=g(y,function(C){const w=C-c,A=e-(C-l);return h?Math.min(A,r-w):A}(S))}function b(S){return o=void 0,d&&n?f(S):(n=s=void 0,a)}function x(...S){const C=Date.now(),w=m(C);if(n=S,s=this,l=C,w){if(o===void 0)return function(A){return c=A,o=g(y,e),u?f(A):a}(l);if(h)return o=g(y,e),f(l)}return o===void 0&&(o=g(y,e)),a}return e=+e||0,Ke(t)&&(u=!!t.leading,h="maxWait"in t,h&&(r=Math.max(Z(t.maxWait)?t.maxWait:0,e)),d="trailing"in t?!!t.trailing:d),x.cancel=function(){o!==void 0&&function(S){if(p)return cancelAnimationFrame(S);clearTimeout(S)}(o),c=0,n=l=s=o=void 0},x.flush=function(){return o===void 0?a:b(Date.now())},x.pending=function(){return o!==void 0},x}CA=!1;function Hu(i,e,t){let n=!0,s=!0;if(typeof i!="function")throw new TypeError("Expected a function");return Ke(t)&&(n="leading"in t?!!t.leading:n,s="trailing"in t?!!t.trailing:s),zd(i,e,{leading:n,trailing:s,maxWait:e})}function ov(i,e){return t=>i*(1-t)+e*t}function pKe(i,e){return function(t){return Math.round(i*(1-t)+e*t)}}function fKe(i,e){const t=i.valueOf(),n=e.valueOf(),s=new Date;return r=>(s.setTime(t*(1-r)+n*r),s)}const QL=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,JM=new RegExp(QL.source,"g");function gKe(i){return function(){return i}}function mKe(i){return function(e){return i(e)+""}}function yKe(i,e){let t,n,s,r=QL.lastIndex=JM.lastIndex=0,a=-1;const o=[],l=[];for(i+="",e+="";(t=QL.exec(i))&&(n=JM.exec(e));)(s=n.index)>r&&(s=e.slice(r,s),o[a]?o[a]+=s:o[++a]=s),(t=t[0])===(n=n[0])?o[a]?o[a]+=n:o[++a]=n:(o[++a]=null,l.push({i:a,x:ov(t,n)})),r=JM.lastIndex;return r<e.length&&(s=e.slice(r),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?mKe(l[0].x):gKe(e):(e=l.length,function(c){for(let u,h=0;h<e;++h)o[(u=l[h]).i]=u.x(c);return o.join("")})}function mp(i){if(Z(i))return i;const e=+i;return Z(e)?e:0}function _Ke(i){return parseFloat("0."+Math.sin(i).toString().substring(6))}const Dt=1e-12,Qt=Math.PI,co=Qt/2,Ts=2*Qt,yt=2*Math.PI,At=Math.abs,Jt=Math.atan2,vi=Math.cos,br=Math.max,fs=Math.min,ti=Math.sin,So=Math.sqrt,xg=Math.pow;function vKe(i){return i>1?0:i<-1?Qt:Math.acos(i)}function n8(i){return i>=1?co:i<=-1?-co:Math.asin(i)}function s8(i,e,t,n,s){let r=t,a=n;return typeof i=="number"&&typeof t=="number"&&(r=(1-s)*i+s*t),typeof e=="number"&&typeof n=="number"&&(a=(1-s)*e+s*n),{x:r,y:a}}function eD(i,e){return i[0]*e[1]-i[1]*e[0]}function bKe(i,e){return At(i[0]-e[0])+At(i[1]-e[1])<1e-12}function Qne(i,e=10){return Math.round(i*e)/e}function my(i){const e=i.toString().split(/[eE]/),t=(e[0].split(".")[1]||"").length-(+e[1]||0);return t>0?t:0}function al(i,e){return Qne(i+e,10**Math.max(my(i),my(e)))}function tD(i,e){return Qne(i-e,10**Math.max(my(i),my(e)))}class sn{constructor(e=0,t=0,n,s){this.x=0,this.y=0,this.x=e,this.y=t,this.x1=n,this.y1=s}clone(){return new sn(this.x,this.y)}copyFrom(e){return this.x=e.x,this.y=e.y,this.x1=e.x1,this.y1=e.y1,this.defined=e.defined,this.context=e.context,this}set(e,t){return this.x=e,this.y=t,this}add(e){return ye(e)?(this.x+=e,void(this.y+=e)):(this.x+=e.x,this.y+=e.y,this)}sub(e){return ye(e)?(this.x-=e,void(this.y-=e)):(this.x-=e.x,this.y-=e.y,this)}multi(e){throw new Error("")}div(e){throw new Error("")}}class kn{static distancePP(e,t){return So(xg(e.x-t.x,2)+xg(e.y-t.y,2))}static distanceNN(e,t,n,s){return So(xg(e-n,2)+xg(t-s,2))}static distancePN(e,t,n){return So(xg(t-e.x,2)+xg(n-e.y,2))}static pointAtPP(e,t,n){return new sn((t.x-e.x)*n+e.x,(t.y-e.y)*n+e.y)}}function zt(i){return i*(Math.PI/180)}function yy(i){return 180*i/Math.PI}const xKe=(i=0)=>{if(i<0)for(;i<-Ts;)i+=Ts;else if(i>0)for(;i>Ts;)i-=Ts;return i},SKe=xKe;function ui(i,e,t){return e?{x:i.x+e*Math.cos(t),y:i.y+e*Math.sin(t)}:{x:i.x,y:i.y}}function jb(i,e={x:0,y:0},t=0,n=2*Math.PI){const{x:s,y:r}=i,{x:a,y:o}=e;let l=s-a,c=r-o;const u=Math.sqrt(l*l+c*c);if(u===0)return{radius:0,angle:0};l/=u,c/=u;let h=Math.atan2(c,l);if(h<t)for(;h<=t;)h+=2*Math.PI;if(h>n)for(;h>=n;)h-=2*Math.PI;return{radius:u,angle:h}}function ese(i,e){return Math.atan2(e.y-i.y,e.x-i.x)}function kd(i){for(;i<0;)i+=2*Math.PI;for(;i>=2*Math.PI;)i-=2*Math.PI;return i}function CKe(i,e){const t=Math.abs(e-i);if(t>=2*Math.PI||2*Math.PI-t<1e-6)return[0,Math.PI/2,Math.PI,1.5*Math.PI];const n=kd(Math.min(i,e)),s=n+t,r=[n,s];let a=Math.floor(n/Math.PI)*Math.PI/2;for(;a<s;)a>n&&r.push(a),a+=Math.PI/2;return r}function wKe(i,e,t,n){const{x:s,y:r}=e,a=CKe(t,n),{width:o,height:l}=i,c=[];return a.forEach(u=>{const h=Math.sin(u),d=Math.cos(u);h===1?c.push(l-r):h===-1?c.push(r):d===1?c.push(o-s):d===-1?c.push(s):(h>0?c.push(Math.abs((l-r)/h)):c.push(Math.abs(r/h)),d>0?c.push(Math.abs((o-s)/d)):c.push(Math.abs(s/d)))}),Math.min.apply(null,c)}function tse(i){return(i=kd(i))>0&&i<=Math.PI/2?2:i>Math.PI/2&&i<=Math.PI?3:i>Math.PI&&i<=3*Math.PI/2?4:1}function QM(i,e,t){i[0]=e[0]-t[0],i[1]=e[1]-t[1]}function ise(i,e,t,n){let s=i[0],r=e[0],a=t[0],o=n[0];return r<s&&([s,r]=[r,s]),o<a&&([o,a]=[a,o]),!(r<a||o<s)&&(s=i[1],r=e[1],a=t[1],o=n[1],r<s&&([s,r]=[r,s]),o<a&&([o,a]=[a,o]),!(r<a||o<s))}function AKe(i,e,t,n){if(!ise(i,e,t,n))return!1;const s=[0,0],r=[0,0],a=[0,0];if(QM(s,e,i),QM(r,n,t),bKe(s,r))return!0;QM(a,t,i);const o=eD(a,r)/eD(s,r);return o>=0&&o<=1&&[i[0]+s[0]*o,i[1]+s[1]*o]}function nse(i,e,t){if(i===null)return e;if(e===null)return i;const{x11:n,x12:s,y11:r,y12:a,x21:o,x22:l,y21:c,y22:u}=qN(i,e,t);return n>=l||s<=o||r>=u||a<=c?{x1:0,y1:0,x2:0,y2:0}:{x1:Math.max(n,o),y1:Math.max(r,c),x2:Math.min(s,l),y2:Math.min(a,u)}}var lm;(function(i){i[i.NONE=0]="NONE",i[i.BBOX1=1]="BBOX1",i[i.BBOX2=2]="BBOX2"})(lm||(lm={}));const qN=(i,e,t)=>{let n=i.x1,s=i.x2,r=i.y1,a=i.y2,o=e.x1,l=e.x2,c=e.y1,u=e.y2;return t&&(n>s&&([n,s]=[s,n]),r>a&&([r,a]=[a,r]),o>l&&([o,l]=[l,o]),c>u&&([c,u]=[u,c])),{x11:n,x12:s,y11:r,y12:a,x21:o,x22:l,y21:c,y22:u}};function kKe(i,e,t){if(!i||!e)return lm.NONE;const{x11:n,x12:s,y11:r,y12:a,x21:o,x22:l,y21:c,y22:u}=qN(i,e,t);return n>o&&s<l&&r>c&&a<u?lm.BBOX1:o>n&&l<s&&c>r&&u<a?lm.BBOX2:lm.NONE}function Nb(i,e,t){if(i&&e){if(!t)return!(i.x1>e.x2||i.x2<e.x1||i.y1>e.y2||i.y2<e.y1);const{x11:n,x12:s,y11:r,y12:a,x21:o,x22:l,y21:c,y22:u}=qN(i,e,!0);return!(n>l||s<o||r>u||a<c)}return!0}function ew(i,e,t){if(!e)return!0;if(!t)return i.x>=e.x1&&i.x<=e.x2&&i.y>=e.y1&&i.y<=e.y2;let n=e.x1,s=e.x2,r=e.y1,a=e.y2;return n>s&&([n,s]=[s,n]),r>a&&([r,a]=[a,r]),i.x>=n&&i.x<=s&&i.y>=r&&i.y<=a}function eI(i,e){return Math.abs(e[0]*i[0]+e[1]*i[1])}function cm({x:i,y:e},t,n={x:0,y:0}){return{x:(i-n.x)*Math.cos(t)-(e-n.y)*Math.sin(t)+n.x,y:(i-n.x)*Math.sin(t)+(e-n.y)*Math.cos(t)+n.y}}function iD(i){return{x:(i.x1+i.x2)/2,y:(i.y1+i.y2)/2}}function r8(i,e){const t=e?zt(i.angle):i.angle,n=iD(i);return[cm({x:i.x1,y:i.y1},t,n),cm({x:i.x2,y:i.y1},t,n),cm({x:i.x2,y:i.y2},t,n),cm({x:i.x1,y:i.y2},t,n)]}function sse(i,e,t=!1,n){const s=r8(i,t),r=r8(e,t),a=(x,S)=>[S.x-x.x,S.y-x.y],o=iD(i),l=iD(e),c=a(o,l),u=a(s[0],s[1]),h=a(s[1],s[2]),d=a(r[0],r[1]),p=a(r[1],r[2]),f=t?zt(i.angle):i.angle;let g=t?zt(90-i.angle):i.angle+co;const m=t?zt(e.angle):e.angle;let y=t?zt(90-e.angle):e.angle+co;g>yt&&(g-=yt),y>yt&&(y-=yt);const b=(x,S,C,w)=>{const A=[Math.cos(S),Math.sin(S)];return x+(eI(A,C)+eI(A,w))/2>eI(A,c)};return b((i.x2-i.x1)/2,f,d,p)&&b((i.y2-i.y1)/2,g,d,p)&&b((e.x2-e.x1)/2,m,u,h)&&b((e.y2-e.y1)/2,y,u,h)}let VS,US,WS,GS;function TKe(i){return VS=1/0,US=1/0,WS=-1/0,GS=-1/0,i.forEach(e=>{VS>e.x&&(VS=e.x),WS<e.x&&(WS=e.x),US>e.y&&(US=e.y),GS<e.y&&(GS=e.y)}),{x1:VS,y1:US,x2:WS,y2:GS}}const EKe=1e-8;function PKe(i,e,t,n,s){for(let r=0,a=s[s.length-1];r<s.length;r++){const o=s[r];if(ise([i,e],[t,n],[o.x,o.y],[a.x,a.y]))return!0;a=o}return!1}function ZN(i,e,t){let n=0,s=i[0];if(!s)return!1;for(let a=1;a<i.length;a++){const o=i[a];n+=a8(s.x,s.y,o.x,o.y,e,t),s=o}const r=i[0];return o8(s.x,r.x)&&o8(s.y,r.y)||(n+=a8(s.x,s.y,r.x,r.y,e,t)),n!==0}function a8(i,e,t,n,s,r){if(r>e&&r>n||r<e&&r<n||n===e)return 0;const a=(r-e)/(n-e);let o=n<e?1:-1;a!==1&&a!==0||(o=n<e?.5:-.5);const l=a*(t-i)+i;return l===s?1/0:l>s?o:0}function o8(i,e){return Math.abs(i-e)<EKe}function l8(i,e){for(let t=0;t<e.length;t++)if(ZN(i,e[t].x,e[t].y)||t>0&&PKe(e[t-1].x,e[t-1].y,e[t].x,e[t].y,i))return!0;return!1}const c8=i=>{let e=i.charCodeAt(0),t=i.length===2?i.charCodeAt(1):0,n=e;return 55296<=e&&e<=56319&&56320<=t&&t<=57343&&(e&=1023,t&=1023,n=e<<10|t,n+=65536),n===12288||65281<=n&&n<=65376||65504<=n&&n<=65510?"F":n===8361||65377<=n&&n<=65470||65474<=n&&n<=65479||65482<=n&&n<=65487||65490<=n&&n<=65495||65498<=n&&n<=65500||65512<=n&&n<=65518?"H":4352<=n&&n<=4447||4515<=n&&n<=4519||4602<=n&&n<=4607||9001<=n&&n<=9002||11904<=n&&n<=11929||11931<=n&&n<=12019||12032<=n&&n<=12245||12272<=n&&n<=12283||12289<=n&&n<=12350||12353<=n&&n<=12438||12441<=n&&n<=12543||12549<=n&&n<=12589||12593<=n&&n<=12686||12688<=n&&n<=12730||12736<=n&&n<=12771||12784<=n&&n<=12830||12832<=n&&n<=12871||12880<=n&&n<=13054||13056<=n&&n<=19903||19968<=n&&n<=42124||42128<=n&&n<=42182||43360<=n&&n<=43388||44032<=n&&n<=55203||55216<=n&&n<=55238||55243<=n&&n<=55291||63744<=n&&n<=64255||65040<=n&&n<=65049||65072<=n&&n<=65106||65108<=n&&n<=65126||65128<=n&&n<=65131||110592<=n&&n<=110593||127488<=n&&n<=127490||127504<=n&&n<=127546||127552<=n&&n<=127560||127568<=n&&n<=127569||131072<=n&&n<=194367||177984<=n&&n<=196605||196608<=n&&n<=262141?"W":32<=n&&n<=126||162<=n&&n<=163||165<=n&&n<=166||n===172||n===175||10214<=n&&n<=10221||10629<=n&&n<=10630?"Na":n===161||n===164||167<=n&&n<=168||n===170||173<=n&&n<=174||176<=n&&n<=180||182<=n&&n<=186||188<=n&&n<=191||n===198||n===208||215<=n&&n<=216||222<=n&&n<=225||n===230||232<=n&&n<=234||236<=n&&n<=237||n===240||242<=n&&n<=243||247<=n&&n<=250||n===252||n===254||n===257||n===273||n===275||n===283||294<=n&&n<=295||n===299||305<=n&&n<=307||n===312||319<=n&&n<=322||n===324||328<=n&&n<=331||n===333||338<=n&&n<=339||358<=n&&n<=359||n===363||n===462||n===464||n===466||n===468||n===470||n===472||n===474||n===476||n===593||n===609||n===708||n===711||713<=n&&n<=715||n===717||n===720||728<=n&&n<=731||n===733||n===735||768<=n&&n<=879||913<=n&&n<=929||931<=n&&n<=937||945<=n&&n<=961||963<=n&&n<=969||n===1025||1040<=n&&n<=1103||n===1105||n===8208||8211<=n&&n<=8214||8216<=n&&n<=8217||8220<=n&&n<=8221||8224<=n&&n<=8226||8228<=n&&n<=8231||n===8240||8242<=n&&n<=8243||n===8245||n===8251||n===8254||n===8308||n===8319||8321<=n&&n<=8324||n===8364||n===8451||n===8453||n===8457||n===8467||n===8470||8481<=n&&n<=8482||n===8486||n===8491||8531<=n&&n<=8532||8539<=n&&n<=8542||8544<=n&&n<=8555||8560<=n&&n<=8569||n===8585||8592<=n&&n<=8601||8632<=n&&n<=8633||n===8658||n===8660||n===8679||n===8704||8706<=n&&n<=8707||8711<=n&&n<=8712||n===8715||n===8719||n===8721||n===8725||n===8730||8733<=n&&n<=8736||n===8739||n===8741||8743<=n&&n<=8748||n===8750||8756<=n&&n<=8759||8764<=n&&n<=8765||n===8776||n===8780||n===8786||8800<=n&&n<=8801||8804<=n&&n<=8807||8810<=n&&n<=8811||8814<=n&&n<=8815||8834<=n&&n<=8835||8838<=n&&n<=8839||n===8853||n===8857||n===8869||n===8895||n===8978||9312<=n&&n<=9449||9451<=n&&n<=9547||9552<=n&&n<=9587||9600<=n&&n<=9615||9618<=n&&n<=9621||9632<=n&&n<=9633||9635<=n&&n<=9641||9650<=n&&n<=9651||9654<=n&&n<=9655||9660<=n&&n<=9661||9664<=n&&n<=9665||9670<=n&&n<=9672||n===9675||9678<=n&&n<=9681||9698<=n&&n<=9701||n===9711||9733<=n&&n<=9734||n===9737||9742<=n&&n<=9743||9748<=n&&n<=9749||n===9756||n===9758||n===9792||n===9794||9824<=n&&n<=9825||9827<=n&&n<=9829||9831<=n&&n<=9834||9836<=n&&n<=9837||n===9839||9886<=n&&n<=9887||9918<=n&&n<=9919||9924<=n&&n<=9933||9935<=n&&n<=9953||n===9955||9960<=n&&n<=9983||n===10045||n===10071||10102<=n&&n<=10111||11093<=n&&n<=11097||12872<=n&&n<=12879||57344<=n&&n<=63743||65024<=n&&n<=65039||n===65533||127232<=n&&n<=127242||127248<=n&&n<=127277||127280<=n&&n<=127337||127344<=n&&n<=127386||917760<=n&&n<=917999||983040<=n&&n<=1048573||1048576<=n&&n<=1114109?"A":"N"};function wA(i,e={},t){t||(t=1);const{fontStyle:n=e.fontStyle,fontVariant:s=e.fontVariant,fontWeight:r=e.fontWeight,fontSize:a=e.fontSize,fontFamily:o=e.fontFamily}=i;return(n?n+" ":"")+(s?s+" ":"")+(r?r+" ":"")+a*t+"px "+(o||"sans-serif")}class qs{constructor(e,t){this._numberCharSize=null,this._fullCharSize=null,this._letterCharSize=null,this._specialCharSizeMap={},this._canvas=null,this._context=null,this._contextSaved=!1,this._notSupportCanvas=!1,this._notSupportVRender=!1,this._userSpec={},this.specialCharSet=`-/: .,@%'"~`,this._option=e,this._userSpec=t??{},this.textSpec=this._initSpec(),F(e.specialCharSet)&&(this.specialCharSet=e.specialCharSet),this._standardMethod=F(e.getTextBounds)?this.fullMeasure.bind(this):this.measureWithNaiveCanvas.bind(this)}initContext(){if(this._notSupportCanvas)return!1;if(B(this._canvas)&&(F(this._option.getCanvasForMeasure)&&(this._canvas=this._option.getCanvasForMeasure()),B(this._canvas)&&typeof window<"u"&&window.document!==void 0&&globalThis&&F(globalThis.document)&&(this._canvas=globalThis.document.createElement("canvas"))),B(this._context)&&F(this._canvas)){const e=this._canvas.getContext("2d");F(e)&&(e.save(),e.font=wA(this.textSpec),this._contextSaved=!0,this._context=e)}return!B(this._context)||(this._notSupportCanvas=!0,!1)}_initSpec(){var e,t,n;const{defaultFontParams:s={}}=this._option,{fontStyle:r=s.fontStyle,fontVariant:a=s.fontVariant,fontWeight:o=(e=s.fontWeight)!==null&&e!==void 0?e:"normal",fontSize:l=(t=s.fontSize)!==null&&t!==void 0?t:12,fontFamily:c=(n=s.fontFamily)!==null&&n!==void 0?n:"sans-serif",align:u,textAlign:h=u??"center",baseline:d,textBaseline:p=d??"middle",ellipsis:f,limit:g}=this._userSpec;let{lineHeight:m=l}=this._userSpec;if(be(m)&&m[m.length-1]==="%"){const y=Number.parseFloat(m.substring(0,m.length-1))/100;m=l*y}return{fontStyle:r,fontVariant:a,fontFamily:c,fontSize:l,fontWeight:o,textAlign:h,textBaseline:p,ellipsis:f,limit:g,lineHeight:m}}measure(e,t){switch(t){case"vrender":case"canopus":return this.fullMeasure(e);case"canvas":return this.measureWithNaiveCanvas(e);case"simple":return this.quickMeasureWithoutCanvas(e);default:return this.quickMeasure(e)}}fullMeasure(e){if(B(e))return{width:0,height:0};if(B(this._option.getTextBounds)||!this._notSupportVRender)return this.measureWithNaiveCanvas(e);const{fontFamily:t,fontSize:n,fontWeight:s,textAlign:r,textBaseline:a,ellipsis:o,limit:l,lineHeight:c}=this.textSpec;let u;try{const h=this._option.getTextBounds({text:e,fontFamily:t,fontSize:n,fontWeight:s,textAlign:r,textBaseline:a,ellipsis:!!o,maxLineWidth:l||1/0,lineHeight:c});u={width:h.width(),height:h.height()}}catch{this._notSupportVRender=!0,u=this.measureWithNaiveCanvas(e)}return u}measureWithNaiveCanvas(e){return this._measureReduce(e,this._measureWithNaiveCanvas.bind(this))}_measureWithNaiveCanvas(e){var t;if(!this.initContext())return this._quickMeasureWithoutCanvas(e);const n=this._context.measureText(e),{fontSize:s,lineHeight:r}=this.textSpec;return{width:n.width,height:(t=r)!==null&&t!==void 0?t:s}}quickMeasure(e){return this._measureReduce(e,this._quickMeasure.bind(this))}_quickMeasure(e){const t={width:0,height:0};for(let n=0;n<e.length;n++){const s=e[n];let r=this._measureSpecialChar(s);B(r)&&qs.NUMBERS_CHAR_SET.includes(s)&&(r=this._measureNumberChar()),B(r)&&["F","W"].includes(c8(s))&&(r=this._measureFullSizeChar()),B(r)&&(r=this._measureLetterChar()),t.width+=r.width,t.height=Math.max(t.height,r.height)}return t}quickMeasureWithoutCanvas(e){return this._measureReduce(e,this._quickMeasureWithoutCanvas.bind(this))}_quickMeasureWithoutCanvas(e){var t;const n={width:0,height:0},{fontSize:s,lineHeight:r}=this.textSpec;for(let a=0;a<e.length;a++){const o=e[a],l=["F","W"].includes(c8(o))?1:.53;n.width+=l*s}return n.height=(t=r)!==null&&t!==void 0?t:s,n}_measureReduce(e,t){var n;const{fontSize:s,lineHeight:r}=this.textSpec,a={width:0,height:0};if(B(e))return a;if(ie(e)){const o=e.filter(F).map(l=>l.toString());return o.length===0?a:o.length===1?t(o[0]):{width:o.reduce((l,c)=>Math.max(l,t(c).width),0),height:o.length*(((n=r)!==null&&n!==void 0?n:s)+1)+1}}return t(e.toString())}_measureNumberChar(){if(B(this._numberCharSize)){const e=this._standardMethod(qs.NUMBERS_CHAR_SET);this._numberCharSize={width:e.width/qs.NUMBERS_CHAR_SET.length,height:e.height}}return this._numberCharSize}_measureFullSizeChar(){return B(this._fullCharSize)&&(this._fullCharSize=this._standardMethod(qs.FULL_SIZE_CHAR)),this._fullCharSize}_measureLetterChar(){if(B(this._letterCharSize)){const e=this._standardMethod(qs.ALPHABET_CHAR_SET);this._letterCharSize={width:e.width/qs.ALPHABET_CHAR_SET.length,height:e.height}}return this._letterCharSize}_measureSpecialChar(e){return F(this._specialCharSizeMap[e])?this._specialCharSizeMap[e]:this.specialCharSet.includes(e)?(this._specialCharSizeMap[e]=this._standardMethod(e),this._specialCharSizeMap[e]):null}release(){F(this._canvas)&&(this._canvas=null),F(this._context)&&(this._contextSaved&&(this._context.restore(),this._contextSaved=!1),this._context=null)}}qs.ALPHABET_CHAR_SET="abcdefghijklmnopqrstuvwxyz",qs.NUMBERS_CHAR_SET="0123456789",qs.FULL_SIZE_CHAR="";const rse=(i,e)=>{const{x1:t,x2:n,y1:s,y2:r}=i,a=Math.abs(n-t),o=Math.abs(r-s);let l=(t+n)/2,c=(s+r)/2,u=0,h=0;switch(e){case"top":case"inside-top":h=-.5;break;case"bottom":case"inside-bottom":h=.5;break;case"left":case"inside-left":u=-.5;break;case"right":case"inside-right":u=.5;break;case"top-right":u=.5,h=-.5;break;case"top-left":u=-.5,h=-.5;break;case"bottom-right":u=.5,h=.5;break;case"bottom-left":u=-.5,h=.5}return l+=u*a,c+=h*o,{x:l,y:c}};function JN(i,e,t){const{x1:n,y1:s,x2:r,y2:a}=e;return t.onlyTranslate()?(i!==e&&i.setValue(e.x1,e.y1,e.x2,e.y2),i.translate(t.e,t.f),e):(i.clear(),i.add(t.a*n+t.c*s+t.e,t.b*n+t.d*s+t.f),i.add(t.a*r+t.c*s+t.e,t.b*r+t.d*s+t.f),i.add(t.a*r+t.c*a+t.e,t.b*r+t.d*a+t.f),i.add(t.a*n+t.c*a+t.e,t.b*n+t.d*a+t.f),e)}class nr{constructor(e){e?this.setValue(e.x1,e.y1,e.x2,e.y2):this.clear()}clone(){return new nr(this)}clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this}empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE}equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2}setValue(e=0,t=0,n=0,s=0){return this.x1=e,this.y1=t,this.x2=n,this.y2=s,this}set(e=0,t=0,n=0,s=0){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),s<t?(this.y2=t,this.y1=s):(this.y1=t,this.y2=s),this}add(e=0,t=0){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this}expand(e=0){return ie(e)?(this.y1-=e[0],this.x2+=e[1],this.y2+=e[2],this.x1-=e[3]):(this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e),this}round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this}translate(e=0,t=0){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this}rotate(e=0,t=0,n=0){const s=this.rotatedPoints(e,t,n);return this.clear().add(s[0],s[1]).add(s[2],s[3]).add(s[4],s[5]).add(s[6],s[7])}scale(e=0,t=0,n=0,s=0){const r=this.scalePoints(e,t,n,s);return this.clear().add(r[0],r[1]).add(r[2],r[3])}union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this}intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this}encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2}alignsWith(e){return e&&(this.x1===e.x1||this.x2===e.x2||this.y1===e.y1||this.y2===e.y2)}intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)}contains(e=0,t=0){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)}containsPoint(e){return!(e.x<this.x1||e.x>this.x2||e.y<this.y1||e.y>this.y2)}width(){return this.empty()?0:this.x2-this.x1}height(){return this.empty()?0:this.y2-this.y1}scaleX(e=0){return this.x1*=e,this.x2*=e,this}scaleY(e=0){return this.y1*=e,this.y2*=e,this}transformWithMatrix(e){return JN(this,this,e),this}copy(e){return this.x1=e.x1,this.y1=e.y1,this.x2=e.x2,this.y2=e.y2,this}rotatedPoints(e,t,n){const{x1:s,y1:r,x2:a,y2:o}=this,l=Math.cos(e),c=Math.sin(e),u=t-t*l+n*c,h=n-t*c-n*l;return[l*s-c*r+u,c*s+l*r+h,l*s-c*o+u,c*s+l*o+h,l*a-c*r+u,c*a+l*r+h,l*a-c*o+u,c*a+l*o+h]}scalePoints(e,t,n,s){const{x1:r,y1:a,x2:o,y2:l}=this;return[e*r+(1-e)*n,t*a+(1-t)*s,e*o+(1-e)*n,t*l+(1-t)*s]}}class Qi extends nr{}class OKe extends nr{constructor(e,t=0){super(e),e&&(this.angle=t)}intersects(e){return sse(this,e)}setValue(e=0,t=0,n=0,s=0,r=0){return super.setValue(e,t,n,s),this.angle=r,this}}class Zi{constructor(e=1,t=0,n=0,s=1,r=0,a=0){this.a=e,this.b=t,this.c=n,this.d=s,this.e=r,this.f=a}equalToMatrix(e){return!(this.e!==e.e||this.f!==e.f||this.a!==e.a||this.d!==e.d||this.b!==e.b||this.c!==e.c)}equalTo(e,t,n,s,r,a){return!(this.e!==r||this.f!==a||this.a!==e||this.d!==s||this.b!==t||this.c!==n)}setValue(e,t,n,s,r,a){return this.a=e,this.b=t,this.c=n,this.d=s,this.e=r,this.f=a,this}reset(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}getInverse(){const e=this.a,t=this.b,n=this.c,s=this.d,r=this.e,a=this.f,o=new Zi,l=e*s-t*n;return o.a=s/l,o.b=-t/l,o.c=-n/l,o.d=e/l,o.e=(n*a-s*r)/l,o.f=-(e*a-t*r)/l,o}rotate(e){const t=Math.cos(e),n=Math.sin(e),s=this.a*t+this.c*n,r=this.b*t+this.d*n,a=this.a*-n+this.c*t,o=this.b*-n+this.d*t;return this.a=s,this.b=r,this.c=a,this.d=o,this}rotateByCenter(e,t,n){const s=Math.cos(e),r=Math.sin(e),a=(1-s)*t+r*n,o=(1-s)*n-r*t,l=s*this.a-r*this.b,c=r*this.a+s*this.b,u=s*this.c-r*this.d,h=r*this.c+s*this.d,d=s*this.e-r*this.f+a,p=r*this.e+s*this.f+o;return this.a=l,this.b=c,this.c=u,this.d=h,this.e=d,this.f=p,this}scale(e,t){return this.a*=e,this.b*=e,this.c*=t,this.d*=t,this}setScale(e,t){return this.b=this.b/this.a*e,this.c=this.c/this.d*t,this.a=e,this.d=t,this}transform(e,t,n,s,r,a){return this.multiply(e,t,n,s,r,a),this}translate(e,t){return this.e+=this.a*e+this.c*t,this.f+=this.b*e+this.d*t,this}transpose(){const{a:e,b:t,c:n,d:s,e:r,f:a}=this;return this.a=t,this.b=e,this.c=s,this.d=n,this.e=a,this.f=r,this}multiply(e,t,n,s,r,a){const o=this.a,l=this.b,c=this.c,u=this.d,h=o*e+c*t,d=l*e+u*t,p=o*n+c*s,f=l*n+u*s,g=o*r+c*a+this.e,m=l*r+u*a+this.f;return this.a=h,this.b=d,this.c=p,this.d=f,this.e=g,this.f=m,this}interpolate(e,t){const n=new Zi;return n.a=this.a+(e.a-this.a)*t,n.b=this.b+(e.b-this.b)*t,n.c=this.c+(e.c-this.c)*t,n.d=this.d+(e.d-this.d)*t,n.e=this.e+(e.e-this.e)*t,n.f=this.f+(e.f-this.f)*t,n}transformPoint(e,t){const{a:n,b:s,c:r,d:a,e:o,f:l}=this,c=n*a-s*r,u=a/c,h=-s/c,d=-r/c,p=n/c,f=(r*l-a*o)/c,g=-(n*l-s*o)/c,{x:m,y}=e;t.x=m*u+y*d+f,t.y=m*h+y*p+g}onlyTranslate(e=1){return this.a===e&&this.b===0&&this.c===0&&this.d===e}clone(){return new Zi(this.a,this.b,this.c,this.d,this.e,this.f)}toTransformAttrs(){const e=this.a,t=this.b,n=this.c,s=this.d,r=e*s-t*n,a={x:this.e,y:this.f,rotateDeg:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!==0||t!==0){const o=Math.sqrt(e*e+t*t);a.rotateDeg=t>0?Math.acos(e/o):-Math.acos(e/o),a.scaleX=o,a.scaleY=r/o,a.skewX=(e*n+t*s)/r,a.skewY=0}else if(n!==0||s!==0){const o=Math.sqrt(n*n+s*s);a.rotateDeg=Math.PI/2-(s>0?Math.acos(-n/o):-Math.acos(n/o)),a.scaleX=r/o,a.scaleY=o,a.skewX=0,a.skewY=(e*n+t*s)/r}return a.rotateDeg=yy(a.rotateDeg),a}}function MKe(i,e,t,n,s,r,a,o){const l=e.a,c=e.b,u=e.c,h=e.d,d=e.e,p=e.f,f=vi(a),g=ti(a);let m,y;o?(m=o[0],y=o[1]):(m=t,y=n);const b=m-t,x=y-n,S=l*f+u*g,C=c*f+h*g,w=u*f-l*g,A=h*f-c*g;i.a=s*S,i.b=s*C,i.c=r*w,i.d=r*A,i.e=d+l*m+u*y-S*b-w*x,i.f=p+c*m+h*y-C*b-A*x}class IKe{constructor(){this.CLEAN_THRESHOLD=1e3,this.L_TIME=1e3,this.R_COUNT=1,this.R_TIMESTAMP_MAX_SIZE=20}clearCache(e,t){const{CLEAN_THRESHOLD:n=this.CLEAN_THRESHOLD,L_TIME:s=this.L_TIME,R_COUNT:r=this.R_COUNT}=t;if(e.size<n)return 0;let a=0;const o=c=>{a++,e.delete(c)},l=Date.now();return e.forEach((c,u)=>{if(c.timestamp.length<r)return o(u);let h=0;for(;l-c.timestamp[c.timestamp.length-1-h]<s&&(h++,!(h>=r)););if(h<r)return o(u);for(;l-c.timestamp[0]>s;)c.timestamp.shift()}),a}addLimitedTimestamp(e,t,n){const{R_TIMESTAMP_MAX_SIZE:s=this.R_TIMESTAMP_MAX_SIZE}=n;e.timestamp.length>s&&e.timestamp.shift(),e.timestamp.push(t)}clearTimeStamp(e,t){const{L_TIME:n=this.L_TIME}=t,s=Date.now();e.forEach(r=>{for(;s-r.timestamp[0]>n;)r.timestamp.shift()})}clearItemTimestamp(e,t){const{L_TIME:n=this.L_TIME}=t,s=Date.now();for(;s-e.timestamp[0]>n;)e.timestamp.shift()}}function AA(i,e,t){e/=100,t/=100;const n=(1-Math.abs(2*t-1))*e,s=n*(1-Math.abs(i/60%2-1)),r=t-n/2;let a=0,o=0,l=0;return 0<=i&&i<60?(a=n,o=s,l=0):60<=i&&i<120?(a=s,o=n,l=0):120<=i&&i<180?(a=0,o=n,l=s):180<=i&&i<240?(a=0,o=s,l=n):240<=i&&i<300?(a=s,o=0,l=n):300<=i&&i<360&&(a=n,o=0,l=s),a=Math.round(255*(a+r)),o=Math.round(255*(o+r)),l=Math.round(255*(l+r)),{r:a,g:o,b:l}}function kP(i,e,t){i/=255,e/=255,t/=255;const n=Math.min(i,e,t),s=Math.max(i,e,t),r=s-n;let a=0,o=0,l=0;return a=r===0?0:s===i?(e-t)/r%6:s===e?(t-i)/r+2:(i-e)/r+4,a=Math.round(60*a),a<0&&(a+=360),l=(s+n)/2,o=r===0?0:r/(1-Math.abs(2*l-1)),o=+(100*o).toFixed(1),l=+(100*l).toFixed(1),{h:a,s:o,l}}const RKe=/^#([0-9a-f]{3,8})$/,u8={transparent:4294967040},tw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function KS(i){return((i=Math.max(0,Math.min(255,Math.round(i)||0)))<16?"0":"")+i.toString(16)}function ase(i){return ye(i)?new xr(i>>16,i>>8&255,255&i,1):ie(i)?new xr(i[0],i[1],i[2]):new xr(255,255,255)}function LKe(i){return ye(i)?new xr(i>>>24,i>>>16&255,i>>>8&255,255&i):ie(i)?new xr(i[0],i[1],i[2],i[3]):new xr(255,255,255,1)}function tI(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function iI(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}const h8=(i,e)=>{const t=RKe.exec(i);if(e||t){const n=parseInt(t[1],16),s=t[1].length;return s===3?new xr((n>>8&15)+((n>>8&15)<<4),(n>>4&15)+((n>>4&15)<<4),(15&n)+((15&n)<<4),1):s===6?ase(n):s===8?new xr(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):null}};class An{static Brighter(e,t=1){return t===1?e:new An(e).brighter(t).toRGBA()}static SetOpacity(e,t=1){return t===1?e:new An(e).setOpacity(t).toRGBA()}static getColorBrightness(e,t="hsl"){const n=e instanceof An?e:new An(e);switch(t){case"hsv":default:return n.getHSVBrightness();case"hsl":return n.getHSLBrightness();case"lum":return n.getLuminance();case"lum2":return n.getLuminance2();case"lum3":return n.getLuminance3()}}static parseColorString(e){if(F(u8[e]))return LKe(u8[e]);if(F(tw[e]))return ase(tw[e]);const t=`${e}`.trim().toLowerCase(),n=h8(t);if(n!==void 0)return n;if(/^(rgb|RGB|rgba|RGBA)/.test(t)){const s=t.replace(/(?:\(|\)|rgba|RGBA|rgb|RGB)*/g,"").split(",");return new xr(parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10),parseFloat(s[3]))}if(/^(hsl|HSL|hsla|HSLA)/.test(t)){const s=t.replace(/(?:\(|\)|hsla|HSLA|hsl|HSL)*/g,"").split(","),r=AA(parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10));return new xr(r.r,r.g,r.b,parseFloat(s[3]))}}constructor(e){const t=An.parseColorString(e);t?this.color=t:(console.warn(`Warn: ${e}Color`),this.color=new xr(255,255,255))}toRGBA(){return this.color.formatRgb()}toString(){return this.color.formatRgb()}toHex(){return this.color.formatHex()}toHsl(){return this.color.formatHsl()}brighter(e){const{r:t,g:n,b:s}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(t*e))),this.color.g=Math.max(0,Math.min(255,Math.floor(n*e))),this.color.b=Math.max(0,Math.min(255,Math.floor(s*e))),this}add(e){const{r:t,g:n,b:s}=this.color;return this.color.r+=Math.min(255,t+e.color.r),this.color.g+=Math.min(255,n+e.color.g),this.color.b+=Math.min(255,s+e.color.b),this}sub(e){return this.color.r=Math.max(0,this.color.r-e.color.r),this.color.g=Math.max(0,this.color.g-e.color.g),this.color.b=Math.max(0,this.color.b-e.color.b),this}multiply(e){const{r:t,g:n,b:s}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(t*e.color.r))),this.color.g=Math.max(0,Math.min(255,Math.floor(n*e.color.g))),this.color.b=Math.max(0,Math.min(255,Math.floor(s*e.color.b))),this}getHSVBrightness(){return Math.max(this.color.r,this.color.g,this.color.b)/255}getHSLBrightness(){return .5*(Math.max(this.color.r,this.color.g,this.color.b)/255+Math.min(this.color.r,this.color.g,this.color.b)/255)}setHsl(e,t,n){const s=this.color.opacity,r=kP(this.color.r,this.color.g,this.color.b),a=AA(B(e)?r.h:zi(e,0,360),B(t)?r.s:t>=0&&t<=1?100*t:t,B(n)?r.l:n<=1&&n>=0?100*n:n);return this.color=new xr(a.r,a.g,a.b,s),this}setRGB(e,t,n){return!B(e)&&(this.color.r=e),!B(t)&&(this.color.g=t),!B(n)&&(this.color.b=n),this}setHex(e){const t=`${e}`.trim().toLowerCase(),n=h8(t,!0);return n??this}setColorName(e){const t=tw[e.toLowerCase()];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}setScalar(e){return this.color.r=e,this.color.g=e,this.color.b=e,this}setOpacity(e=1){return this.color.opacity=e,this}getLuminance(){return(.2126*this.color.r+.7152*this.color.g+.0722*this.color.b)/255}getLuminance2(){return(.2627*this.color.r+.678*this.color.g+.0593*this.color.b)/255}getLuminance3(){return(.299*this.color.r+.587*this.color.g+.114*this.color.b)/255}clone(){return new An(this.color.toString())}copyGammaToLinear(e,t=2){return this.color.r=Math.pow(e.color.r,t),this.color.g=Math.pow(e.color.g,t),this.color.b=Math.pow(e.color.b,t),this}copyLinearToGamma(e,t=2){const n=t>0?1/t:1;return this.color.r=Math.pow(e.color.r,n),this.color.g=Math.pow(e.color.g,n),this.color.b=Math.pow(e.color.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.color.r=tI(e.color.r),this.color.g=tI(e.color.g),this.color.b=tI(e.color.b),this}copyLinearToSRGB(e){return this.color.r=iI(e.color.r),this.color.g=iI(e.color.g),this.color.b=iI(e.color.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}}class xr{constructor(e,t,n,s){this.r=isNaN(+e)?255:Math.max(0,Math.min(255,+e)),this.g=isNaN(+t)?255:Math.max(0,Math.min(255,+t)),this.b=isNaN(+n)?255:Math.max(0,Math.min(255,+n)),F(s)?this.opacity=isNaN(+s)?1:Math.max(0,Math.min(1,+s)):this.opacity=1}formatHex(){return`#${KS(this.r)+KS(this.g)+KS(this.b)+(this.opacity===1?"":KS(255*this.opacity))}`}formatRgb(){const e=this.opacity;return`${e===1?"rgb(":"rgba("}${this.r},${this.g},${this.b}${e===1?")":`,${e})`}`}formatHsl(){const e=this.opacity,{h:t,s:n,l:s}=kP(this.r,this.g,this.b);return`${e===1?"hsl(":"hsla("}${t},${n}%,${s}%${e===1?")":`,${e})`}`}toString(){return this.formatHex()}}function ose(i){let e="",t="",n="";const s=i[0]==="#"?1:0;for(let r=s;r<i.length;r++)i[r]!=="#"&&(r<s+2?e+=i[r]:r<s+4?t+=i[r]:r<s+6&&(n+=i[r]));return[parseInt(e,16),parseInt(t,16),parseInt(n,16)]}function DKe(i,e,t){return Number((1<<24)+(i<<16)+(e<<8)+t).toString(16).slice(1)}function FKe(i,e){const t=i.r,n=e.r,s=i.g,r=e.g,a=i.b,o=e.b,l=i.opacity,c=e.opacity;return u=>{const h=Math.round(t*(1-u)+n*u),d=Math.round(s*(1-u)+r*u),p=Math.round(a*(1-u)+o*u);return new xr(h,d,p,l*(1-u)+c*u)}}const BKe=Object.freeze(Object.defineProperty({__proto__:null,Color:An,DEFAULT_COLORS:tw,RGB:xr,hexToRgb:ose,hslToRgb:AA,interpolateRgb:FKe,rgbToHex:DKe,rgbToHsl:kP},Symbol.toStringTag,{value:"Module"}));function Cr(i){if(Z(i))return[i,i,i,i];if(ie(i)){const e=i.length;if(e===1){const t=i[0];return[t,t,t,t]}if(e===2){const[t,n]=i;return[t,n,t,n]}if(e===3){const[t,n,s]=i;return[t,n,s,n]}if(e===4)return i}if(Ke(i)){const{top:e=0,right:t=0,bottom:n=0,left:s=0}=i;return[e,t,n,s]}return[0,0,0,0]}function nD(i,e=0,t=0){if(!i)return{width:e,height:t};let n;try{n=window==null?void 0:window.getComputedStyle}catch{n=()=>({})}const s=n(i);if(/^(\d*\.?\d+)(px)$/.exec(s.width)){const r=parseFloat(s.width)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)||i.clientWidth-1,a=parseFloat(s.height)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)||i.clientHeight-1;return{width:r<=0?e:r,height:a<=0?t:a}}return{width:e,height:t}}function jKe(i){const{x:e,y:t}=i.getBoundingClientRect();return{x:e,y:t}}const NKe=(i="")=>{const e={};return i.split(";").forEach(t=>{if(t){const n=t.split(":");if(n.length===2){const s=n[0].trim(),r=n[1].trim();s&&r&&(e[s]=r)}}}),e},d8=i=>i.replace(/([A-Z])/g,"-$1").toLowerCase();var Rr=63710088e-1,$Ke={centimeters:Rr*100,centimetres:Rr*100,degrees:Rr/111325,feet:Rr*3.28084,inches:Rr*39.37,kilometers:Rr/1e3,kilometres:Rr/1e3,meters:Rr,metres:Rr,miles:Rr/1609.344,millimeters:Rr*1e3,millimetres:Rr*1e3,nauticalmiles:Rr/1852,radians:1,yards:Rr*1.0936};function p8(i,e,t){t===void 0&&(t={});var n={type:"Feature"};return(t.id===0||t.id)&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.properties=e||{},n.geometry=i,n}function lse(i,e){e===void 0&&(e={});var t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=i,t}function zKe(i,e){e===void 0&&(e="kilometers");var t=$Ke[e];if(!t)throw new Error(e+" units is invalid");return i/t}function HKe(i){return!!i&&i.constructor===Object}function VKe(i){return i.type==="Feature"?i.geometry:i}function UKe(i,e){if(!i||!e)return!1;const t=VKe(e),n=t.type,s=e.bbox;let r=t.coordinates;if(s&&ew(i,{x1:s[0],x2:s[1],y1:s[1],y2:s[3]},!0)===!0)return!1;n==="Polygon"&&(r=[r]);let a=!1;for(let o=0;o<r.length;++o)for(let l=0;l<r[o].length;++l)if(ZN(r[o][l].map(c=>({x:c[0],y:c[1]})),i.x,i.y))return a=!0,a;return a}function WKe(i,e,t,n={}){const s=zt(i[0]),r=zt(i[1]),a=zt(t),o=zKe(e,n.units),l=Math.asin(Math.sin(r)*Math.cos(o)+Math.cos(r)*Math.sin(o)*Math.cos(a)),c=s+Math.atan2(Math.sin(a)*Math.sin(o)*Math.cos(r),Math.cos(o)-Math.sin(r)*Math.sin(l));return{x:yy(c),y:yy(l)}}class ul{static getInstance(){return ul.instance||(ul.instance=new ul),ul.instance}constructor(){this.locale_shortWeekdays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.locale_periods=["AM","PM"],this.locale_weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.locale_shortMonths=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.numberRe=/^\s*\d+/,this.pads={"-":"",_:" ",0:"0"},this.requoteRe=/[\\^$*+?|[\]().{}]/g,this.locale_months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.formatShortWeekday=e=>this.locale_shortWeekdays[e.getDay()],this.formatWeekday=e=>this.locale_weekdays[e.getDay()],this.formatShortMonth=e=>this.locale_shortMonths[e.getMonth()],this.formatMonth=e=>this.locale_months[e.getMonth()],this.formatDayOfMonth=(e,t)=>this.pad(e.getDate(),t,2),this.formatHour24=(e,t)=>this.pad(e.getHours(),t,2),this.formatHour12=(e,t)=>this.pad(e.getHours()%12||12,t,2),this.formatMilliseconds=(e,t)=>this.pad(e.getMilliseconds(),t,3),this.formatMonthNumber=(e,t)=>this.pad(e.getMonth()+1,t,2),this.formatMinutes=(e,t)=>this.pad(e.getMinutes(),t,2),this.formatPeriod=e=>this.locale_periods[+(e.getHours()>=12)],this.formatSeconds=(e,t)=>this.pad(e.getSeconds(),t,2),this.formatFullYear=(e,t)=>this.pad(e.getFullYear()%1e4,t,4),this.formatUTCShortWeekday=e=>this.locale_shortWeekdays[e.getUTCDay()],this.formatUTCWeekday=e=>this.locale_weekdays[e.getUTCDay()],this.formatUTCShortMonth=e=>this.locale_shortMonths[e.getUTCMonth()],this.formatUTCMonth=e=>this.locale_months[e.getUTCMonth()],this.formatUTCDayOfMonth=(e,t)=>this.pad(e.getUTCDate(),t,2),this.formatUTCHour24=(e,t)=>this.pad(e.getUTCHours(),t,2),this.formatUTCHour12=(e,t)=>this.pad(e.getUTCHours()%12||12,t,2),this.formatUTCMilliseconds=(e,t)=>this.pad(e.getUTCMilliseconds(),t,3),this.formatUTCMonthNumber=(e,t)=>this.pad(e.getUTCMonth()+1,t,2),this.formatUTCMinutes=(e,t)=>this.pad(e.getUTCMinutes(),t,2),this.formatUTCPeriod=e=>this.locale_periods[+(e.getUTCHours()>=12)],this.formatUTCSeconds=(e,t)=>this.pad(e.getUTCSeconds(),t,2),this.formatUTCFullYear=(e,t)=>this.pad(e.getUTCFullYear()%1e4,t,4),this.formats={a:this.formatShortWeekday,A:this.formatWeekday,b:this.formatShortMonth,B:this.formatMonth,d:this.formatDayOfMonth,e:this.formatDayOfMonth,H:this.formatHour24,I:this.formatHour12,L:this.formatMilliseconds,m:this.formatMonthNumber,M:this.formatMinutes,p:this.formatPeriod,S:this.formatSeconds,Y:this.formatFullYear},this.utcFormats={a:this.formatUTCShortWeekday,A:this.formatUTCWeekday,b:this.formatUTCShortMonth,B:this.formatUTCMonth,d:this.formatUTCDayOfMonth,e:this.formatUTCDayOfMonth,H:this.formatUTCHour24,I:this.formatUTCHour12,L:this.formatUTCMilliseconds,m:this.formatUTCMonthNumber,M:this.formatUTCMinutes,p:this.formatUTCPeriod,S:this.formatUTCSeconds,Y:this.formatUTCFullYear},this.parseShortWeekday=(e,t,n)=>{const s=this.shortWeekdayRe.exec(t.slice(n));return s?(e.w=this.shortWeekdayLookup.get(s[0].toLowerCase()),n+s[0].length):-1},this.parseWeekday=(e,t,n)=>{const s=this.weekdayRe.exec(t.slice(n));return s?(e.w=this.weekdayLookup.get(s[0].toLowerCase()),n+s[0].length):-1},this.parseShortMonth=(e,t,n)=>{const s=this.shortMonthRe.exec(t.slice(n));return s?(e.m=this.shortMonthLookup.get(s[0].toLowerCase()),n+s[0].length):-1},this.parseMonth=(e,t,n)=>{const s=this.monthRe.exec(t.slice(n));return s?(e.m=this.monthLookup.get(s[0].toLowerCase()),n+s[0].length):-1},this.parseDayOfMonth=(e,t,n)=>{const s=this.numberRe.exec(t.slice(n,n+2));return s?(e.d=+s[0],n+s[0].length):-1},this.parseHour24=(e,t,n)=>{const s=this.numberRe.exec(t.slice(n,n+2));return s?(e.H=+s[0],n+s[0].length):-1},this.parseMilliseconds=(e,t,n)=>{const s=this.numberRe.exec(t.slice(n,n+3));return s?(e.L=+s[0],n+s[0].length):-1},this.parseMonthNumber=(e,t,n)=>{const s=this.numberRe.exec(t.slice(n,n+2));return s?(e.m=s-1,n+s[0].length):-1},this.parseMinutes=(e,t,n)=>{const s=this.numberRe.exec(t.slice(n,n+2));return s?(e.M=+s[0],n+s[0].length):-1},this.parsePeriod=(e,t,n)=>{const s=this.periodRe.exec(t.slice(n));return s?(e.p=this.periodLookup.get(s[0].toLowerCase()),n+s[0].length):-1},this.parseSeconds=(e,t,n)=>{const s=this.numberRe.exec(t.slice(n,n+2));return s?(e.S=+s[0],n+s[0].length):-1},this.parseFullYear=(e,t,n)=>{const s=this.numberRe.exec(t.slice(n,n+4));return s?(e.y=+s[0],n+s[0].length):-1},this.parses={a:this.parseShortWeekday,A:this.parseWeekday,b:this.parseShortMonth,B:this.parseMonth,d:this.parseDayOfMonth,e:this.parseDayOfMonth,H:this.parseHour24,I:this.parseHour24,L:this.parseMilliseconds,m:this.parseMonthNumber,M:this.parseMinutes,p:this.parsePeriod,S:this.parseSeconds,Y:this.parseFullYear},this.timeFormat=(e,t)=>this.newFormat(e,this.formats)(new Date(this.getFullTimeStamp(t))),this.timeUTCFormat=(e,t)=>this.newFormat(e,this.utcFormats)(new Date(this.getFullTimeStamp(t))),this.timeParse=(e,t)=>this.newParse(e,!1)(t+""),this.requoteF=this.requote.bind(this),this.periodRe=this.formatRe(this.locale_periods),this.periodLookup=this.formatLookup(this.locale_periods),this.weekdayRe=this.formatRe(this.locale_weekdays),this.weekdayLookup=this.formatLookup(this.locale_weekdays),this.shortWeekdayRe=this.formatRe(this.locale_shortWeekdays),this.shortWeekdayLookup=this.formatLookup(this.locale_shortWeekdays),this.monthRe=this.formatRe(this.locale_months),this.monthLookup=this.formatLookup(this.locale_months),this.shortMonthRe=this.formatRe(this.locale_shortMonths),this.shortMonthLookup=this.formatLookup(this.locale_shortMonths)}requote(e){return e.replace(this.requoteRe,"\\$&")}localDate(e){if(0<=e.y&&e.y<100){const t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}utcDate(e){if(0<=e.y&&e.y<100){const t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}newDate(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}formatRe(e){return new RegExp("^(?:"+e.map(this.requoteF).join("|")+")","i")}formatLookup(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}pad(e,t,n){const s=e<0?"-":"",r=(s?-e:e)+"",a=r.length;return s+(a<n?new Array(n-a+1).join(t)+r:r)}parseSpecifier(e,t,n,s){let r=0;const a=t.length,o=n.length;let l,c;for(;r<a;){if(s>=o)return-1;if(l=t.charCodeAt(r++),l===37){if(l=t.charAt(r++),c=this.parses[l in this.pads?t.charAt(r++):l],!c||(s=c(e,n,s))<0)return-1}else if(l!==n.charCodeAt(s++))return-1}return s}newParse(e,t){const n=this;return function(s){const r=n.newDate(1900,void 0,1);return n.parseSpecifier(r,e,s+="",0)!==s.length?null:"Q"in r?new Date(r.Q):"s"in r?new Date(1e3*r.s+("L"in r?r.L:0)):(t&&!("Z"in r)&&(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),r.m===void 0&&(r.m="q"in r?r.q:0),"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,n.utcDate(r)):n.localDate(r))}}newFormat(e,t){const n=this;return function(s){const r=[];let a=-1,o=0;const l=e.length;let c,u,h;for(s instanceof Date||(s=new Date(+s));++a<l;)e.charCodeAt(a)===37&&(r.push(e.slice(o,a)),(u=n.pads[c=e.charAt(++a)])?c=e.charAt(++a):u=c==="e"?" ":"0",h=t[c],c=h(s,u),r.push(c),o=a+1);return r.push(e.slice(o,a)),r.join("")}}getFullTimeStamp(e){const t=parseInt(e+"",10);return String(t).length===10?1e3*t:t}}function GKe(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function kA(i,e){const t=e?i.toExponential(e-1):i.toExponential(),n=t.indexOf("e");if(n<0)return null;const s=t.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+t.slice(n+1)]}function KKe(i,e){return function(t,n){let s=t.length;const r=[];let a=0,o=i[0],l=0;for(;s>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),r.push(t.substring(s-=o,s+o)),!((l+=o+1)>n));)o=i[a=(a+1)%i.length];return r.reverse().join(e)}}let cse;function XKe(i,e){const t=kA(i,e);if(!t)return i+"";const n=t[0],s=t[1],r=s-(cse=3*Math.max(-8,Math.min(8,Math.floor(s/3))))+1,a=n.length;return r===a?n:r>a?n+new Array(r-a+1).join("0"):r>0?n.slice(0,r)+"."+n.slice(r):"0."+new Array(1-r).join("0")+kA(i,Math.max(0,e+r-1))[0]}function f8(i,e){const t=kA(i,e);if(!t)return i+"";const n=t[0],s=t[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}function YKe(i){const e=i.length;let t,n=-1;e:for(let s=1;s<e;++s)switch(i[s]){case".":n=t=s;break;case"0":n===0&&(n=s),t=s;break;default:if(!+i[s])break e;n>0&&(n=0)}return n>0?i.slice(0,n)+i.slice(t+1):i}class qKe{constructor(e={}){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}toString(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}}const use=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function g8(i){let e;if(e=use.exec(i))return new qKe({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]});ii.getInstance().error("invalid format: "+i)}const m8=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];class Ep{constructor(){this.locale={thousands:",",grouping:[3],currency:["$",""]},this.group=this.locale.grouping===void 0||this.locale.thousands===void 0?e=>e:KKe([...this.locale.grouping].map(Number),`${this.locale.thousands}`),this.currencyPrefix=this.locale.currency===void 0?"":this.locale.currency[0]+"",this.currencySuffix=this.locale.currency===void 0?"":this.locale.currency[1]+"",this.decimal=this.locale.decimal===void 0?".":this.locale.decimal+"",this.numerals=this.locale.numerals===void 0?e=>e:JKe([...this.locale.numerals].map(String)),this.percent=this.locale.percent===void 0?"%":this.locale.percent+"",this.minus=this.locale.minus===void 0?"":this.locale.minus+"",this.nan=this.locale.nan===void 0?"NaN":this.locale.nan+"",this.formatter=e=>this.newFormat(e),this.format=(e,t)=>this.formatter(e)(t),this.formatPrefix=(e,t)=>this._formatPrefix(e,t)}static getInstance(){return Ep.instance||(Ep.instance=new Ep),Ep.instance}newFormat(e){const t=g8(e);let n=t.fill,s=t.align;const r=t.sign,a=t.symbol;let o=t.zero;const l=t.width;let c=t.comma,u=t.precision,h=t.trim,d=t.type;d==="n"?(c=!0,d="g"):y8[d]||(u===void 0&&(u=12),h=!0,d="g"),(o||n==="0"&&s==="=")&&(o=!0,n="0",s="=");const p=a==="$"?this.currencyPrefix:a==="#"&&/[boxX]/.test(d)?"0"+d.toLowerCase():"",f=a==="$"?this.currencySuffix:/[%p]/.test(d)?this.percent:"",g=y8[d],m=/[defgprstz%]/.test(d);u=u===void 0?6:/[gprs]/.test(d)?Math.max(1,Math.min(21,u)):Math.max(0,Math.min(20,u));const{nan:y,minus:b,decimal:x,group:S,numerals:C}=this;function w(A){let T,E,P,O=p,M=f,R=A;if(d==="c")M=g(R)+M,R="";else{R=+R;let D=R<0||1/R<0;if(R=isNaN(R)?y:g(Math.abs(R),u),h&&(R=YKe(R)),D&&+R==0&&r!=="+"&&(D=!1),O=(D?r==="("?r:b:r==="-"||r==="("?"":r)+O,M=(d==="s"?m8[8+cse/3]:"")+M+(D&&r==="("?")":""),m){for(T=-1,E=R.length;++T<E;)if(P=R.charCodeAt(T),48>P||P>57){M=(P===46?x+R.slice(T+1):R.slice(T))+M,R=R.slice(0,T);break}}}c&&!o&&(R=S(R,1/0));let j=O.length+R.length+M.length,I=j<l?new Array(l-j+1).join(n):"";switch(c&&o&&(R=S(I+R,I.length?l-M.length:1/0),I=""),s){case"<":R=O+R+M+I;break;case"=":R=O+I+R+M;break;case"^":R=I.slice(0,j=I.length>>1)+O+R+M+I.slice(j);break;default:R=I+O+R+M}return C(R)}return w.toString=function(){return e+""},w}_formatPrefix(e,t){const n=g8(e);n.type="f";const s=this.newFormat(n.toString()),r=3*Math.max(-8,Math.min(8,Math.floor(ZKe(t)/3))),a=Math.pow(10,-r),o=m8[8+r/3];return function(l){return s(a*l)+o}}}const y8={"%":(i,e)=>(100*i).toFixed(e),b:i=>Math.round(i).toString(2),c:i=>i+"",d:GKe,f:(i,e)=>i.toFixed(e),e:(i,e)=>i.toExponential(e),g:(i,e)=>i.toPrecision(e),o:i=>Math.round(i).toString(8),p:(i,e)=>f8(100*i,e),r:f8,s:XKe,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16),t:(i,e)=>Number.isInteger(i)?i.toFixed(2):Math.floor(i*Math.pow(10,e))/Math.pow(10,e)+"",z:(i,e)=>i%1==0?i+"":i.toFixed(e)};function ZKe(i){const e=kA(Math.abs(i));return e?e[1]:NaN}function JKe(i){return function(e){return e.replace(/[0-9]/g,t=>i[+t])}}const QKe=(i,e)=>{const{callback:t}=e;return t&&(i=i.filter(t)),i};function TP(){return new TA}function TA(){this.reset()}TA.prototype={constructor:TA,reset:function(){this.s=this.t=0},add:function(i){_8(XS,i,this.t),_8(this,XS.s,this.s),this.s?this.t+=XS.t:this.s=XS.t},valueOf:function(){return this.s}};var XS=new TA;function _8(i,e,t){var n=i.s=e+t,s=n-e,r=n-s;i.t=e-r+(t-s)}var mt=1e-6,eXe=1e-12,Mt=Math.PI,Tn=Mt/2,v8=Mt/4,Ea=Mt*2,Vs=180/Mt,fn=Mt/180,Si=Math.abs,A0=Math.atan,Lu=Math.atan2,Et=Math.cos,hse=Math.exp,EA=Math.log,nI=Math.pow,_t=Math.sin,mo=Math.sign||function(i){return i>0?1:i<0?-1:0},qr=Math.sqrt,QN=Math.tan;function dse(i){return i>1?0:i<-1?Mt:Math.acos(i)}function Ao(i){return i>1?Tn:i<-1?-Tn:Math.asin(i)}function yo(){}function PA(i,e){i&&x8.hasOwnProperty(i.type)&&x8[i.type](i,e)}var b8={Feature:function(i,e){PA(i.geometry,e)},FeatureCollection:function(i,e){for(var t=i.features,n=-1,s=t.length;++n<s;)PA(t[n].geometry,e)}},x8={Sphere:function(i,e){e.sphere()},Point:function(i,e){i=i.coordinates,e.point(i[0],i[1],i[2])},MultiPoint:function(i,e){for(var t=i.coordinates,n=-1,s=t.length;++n<s;)i=t[n],e.point(i[0],i[1],i[2])},LineString:function(i,e){sD(i.coordinates,e,0)},MultiLineString:function(i,e){for(var t=i.coordinates,n=-1,s=t.length;++n<s;)sD(t[n],e,0)},Polygon:function(i,e){S8(i.coordinates,e)},MultiPolygon:function(i,e){for(var t=i.coordinates,n=-1,s=t.length;++n<s;)S8(t[n],e)},GeometryCollection:function(i,e){for(var t=i.geometries,n=-1,s=t.length;++n<s;)PA(t[n],e)}};function sD(i,e,t){var n=-1,s=i.length-t,r;for(e.lineStart();++n<s;)r=i[n],e.point(r[0],r[1],r[2]);e.lineEnd()}function S8(i,e){var t=-1,n=i.length;for(e.polygonStart();++t<n;)sD(i[t],e,1);e.polygonEnd()}function Dg(i,e){i&&b8.hasOwnProperty(i.type)?b8[i.type](i,e):PA(i,e)}function rD(i){return[Lu(i[1],i[0]),Ao(i[2])]}function _y(i){var e=i[0],t=i[1],n=Et(t);return[n*Et(e),n*_t(e),_t(t)]}function YS(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]}function OA(i,e){return[i[1]*e[2]-i[2]*e[1],i[2]*e[0]-i[0]*e[2],i[0]*e[1]-i[1]*e[0]]}function sI(i,e){i[0]+=e[0],i[1]+=e[1],i[2]+=e[2]}function qS(i,e){return[i[0]*e,i[1]*e,i[2]*e]}function aD(i){var e=qr(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=e,i[1]/=e,i[2]/=e}function oD(i,e){function t(n,s){return n=i(n,s),e(n[0],n[1])}return i.invert&&e.invert&&(t.invert=function(n,s){return n=e.invert(n,s),n&&i.invert(n[0],n[1])}),t}function lD(i,e){return[Si(i)>Mt?i+Math.round(-i/Ea)*Ea:i,e]}lD.invert=lD;function pse(i,e,t){return(i%=Ea)?e||t?oD(w8(i),A8(e,t)):w8(i):e||t?A8(e,t):lD}function C8(i){return function(e,t){return e+=i,[e>Mt?e-Ea:e<-Mt?e+Ea:e,t]}}function w8(i){var e=C8(i);return e.invert=C8(-i),e}function A8(i,e){var t=Et(i),n=_t(i),s=Et(e),r=_t(e);function a(o,l){var c=Et(l),u=Et(o)*c,h=_t(o)*c,d=_t(l),p=d*t+u*n;return[Lu(h*s-p*r,u*t-d*n),Ao(p*s+h*r)]}return a.invert=function(o,l){var c=Et(l),u=Et(o)*c,h=_t(o)*c,d=_t(l),p=d*s-h*r;return[Lu(h*s+d*r,u*t+p*n),Ao(p*t-u*n)]},a}function tXe(i){i=pse(i[0]*fn,i[1]*fn,i.length>2?i[2]*fn:0);function e(t){return t=i(t[0]*fn,t[1]*fn),t[0]*=Vs,t[1]*=Vs,t}return e.invert=function(t){return t=i.invert(t[0]*fn,t[1]*fn),t[0]*=Vs,t[1]*=Vs,t},e}function iXe(i,e,t,n,s,r){if(t){var a=Et(e),o=_t(e),l=n*t;s==null?(s=e+n*Ea,r=e-l/2):(s=k8(a,s),r=k8(a,r),(n>0?s<r:s>r)&&(s+=n*Ea));for(var c,u=s;n>0?u>r:u<r;u-=l)c=rD([a,-o*Et(u),-o*_t(u)]),i.point(c[0],c[1])}}function k8(i,e){e=_y(e),e[0]-=i,aD(e);var t=dse(-e[1]);return((-e[2]<0?-t:t)+Ea-mt)%Ea}function fse(){var i=[],e;return{point:function(t,n,s){e.push([t,n,s])},lineStart:function(){i.push(e=[])},lineEnd:yo,rejoin:function(){i.length>1&&i.push(i.pop().concat(i.shift()))},result:function(){var t=i;return i=[],e=null,t}}}function iw(i,e){return Si(i[0]-e[0])<mt&&Si(i[1]-e[1])<mt}function ZS(i,e,t,n){this.x=i,this.z=e,this.o=t,this.e=n,this.v=!1,this.n=this.p=null}function gse(i,e,t,n,s){var r=[],a=[],o,l;if(i.forEach(function(f){if(!((g=f.length-1)<=0)){var g,m=f[0],y=f[g],b;if(iw(m,y)){if(!m[2]&&!y[2]){for(s.lineStart(),o=0;o<g;++o)s.point((m=f[o])[0],m[1]);s.lineEnd();return}y[0]+=2*mt}r.push(b=new ZS(m,f,null,!0)),a.push(b.o=new ZS(m,null,b,!1)),r.push(b=new ZS(y,f,null,!1)),a.push(b.o=new ZS(y,null,b,!0))}}),!!r.length){for(a.sort(e),T8(r),T8(a),o=0,l=a.length;o<l;++o)a[o].e=t=!t;for(var c=r[0],u,h;;){for(var d=c,p=!0;d.v;)if((d=d.n)===c)return;u=d.z,s.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(o=0,l=u.length;o<l;++o)s.point((h=u[o])[0],h[1]);else n(d.x,d.n.x,1,s);d=d.n}else{if(p)for(u=d.p.z,o=u.length-1;o>=0;--o)s.point((h=u[o])[0],h[1]);else n(d.x,d.p.x,-1,s);d=d.p}d=d.o,u=d.z,p=!p}while(!d.v);s.lineEnd()}}}function T8(i){if(e=i.length){for(var e,t=0,n=i[0],s;++t<e;)n.n=s=i[t],s.p=n,n=s;n.n=s=i[0],s.p=n}}var rI=TP();function aI(i){return Si(i[0])<=Mt?i[0]:mo(i[0])*((Si(i[0])+Mt)%Ea-Mt)}function nXe(i,e){var t=aI(e),n=e[1],s=_t(n),r=[_t(t),-Et(t),0],a=0,o=0;rI.reset(),s===1?n=Tn+mt:s===-1&&(n=-Tn-mt);for(var l=0,c=i.length;l<c;++l)if(h=(u=i[l]).length)for(var u,h,d=u[h-1],p=aI(d),f=d[1]/2+v8,g=_t(f),m=Et(f),y=0;y<h;++y,p=x,g=C,m=w,d=b){var b=u[y],x=aI(b),S=b[1]/2+v8,C=_t(S),w=Et(S),A=x-p,T=A>=0?1:-1,E=T*A,P=E>Mt,O=g*C;if(rI.add(Lu(O*T*_t(E),m*w+O*Et(E))),a+=P?A+T*Ea:A,P^p>=t^x>=t){var M=OA(_y(d),_y(b));aD(M);var R=OA(r,M);aD(R);var j=(P^A>=0?-1:1)*Ao(R[2]);(n>j||n===j&&(M[0]||M[1]))&&(o+=P^A>=0?1:-1)}}return(a<-mt||a<mt&&rI<-mt)^o&1}function mse(i,e){return i<e?-1:i>e?1:i>=e?0:NaN}function sXe(i){return i.length===1&&(i=rXe(i)),{left:function(e,t,n,s){for(n==null&&(n=0),s==null&&(s=e.length);n<s;){var r=n+s>>>1;i(e[r],t)<0?n=r+1:s=r}return n},right:function(e,t,n,s){for(n==null&&(n=0),s==null&&(s=e.length);n<s;){var r=n+s>>>1;i(e[r],t)>0?s=r:n=r+1}return n}}}function rXe(i){return function(e,t){return mse(i(e),t)}}sXe(mse);function yse(i){for(var e=i.length,t,n=-1,s=0,r,a;++n<e;)s+=i[n].length;for(r=new Array(s);--e>=0;)for(a=i[e],t=a.length;--t>=0;)r[--s]=a[t];return r}function _se(i,e,t,n){return function(s){var r=e(s),a=fse(),o=e(a),l=!1,c,u,h,d={point:p,lineStart:g,lineEnd:m,polygonStart:function(){d.point=y,d.lineStart=b,d.lineEnd=x,u=[],c=[]},polygonEnd:function(){d.point=p,d.lineStart=g,d.lineEnd=m,u=yse(u);var S=nXe(c,n);u.length?(l||(s.polygonStart(),l=!0),gse(u,oXe,S,t,s)):S&&(l||(s.polygonStart(),l=!0),s.lineStart(),t(null,null,1,s),s.lineEnd()),l&&(s.polygonEnd(),l=!1),u=c=null},sphere:function(){s.polygonStart(),s.lineStart(),t(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function p(S,C){i(S,C)&&s.point(S,C)}function f(S,C){r.point(S,C)}function g(){d.point=f,r.lineStart()}function m(){d.point=p,r.lineEnd()}function y(S,C){h.push([S,C]),o.point(S,C)}function b(){o.lineStart(),h=[]}function x(){y(h[0][0],h[0][1]),o.lineEnd();var S=o.clean(),C=a.result(),w,A=C.length,T,E,P;if(h.pop(),c.push(h),h=null,!!A){if(S&1){if(E=C[0],(T=E.length-1)>0){for(l||(s.polygonStart(),l=!0),s.lineStart(),w=0;w<T;++w)s.point((P=E[w])[0],P[1]);s.lineEnd()}return}A>1&&S&2&&C.push(C.pop().concat(C.shift())),u.push(C.filter(aXe))}}return d}}function aXe(i){return i.length>1}function oXe(i,e){return((i=i.x)[0]<0?i[1]-Tn-mt:Tn-i[1])-((e=e.x)[0]<0?e[1]-Tn-mt:Tn-e[1])}const E8=_se(function(){return!0},lXe,uXe,[-Mt,-Tn]);function lXe(i){var e=NaN,t=NaN,n=NaN,s;return{lineStart:function(){i.lineStart(),s=1},point:function(r,a){var o=r>0?Mt:-Mt,l=Si(r-e);Si(l-Mt)<mt?(i.point(e,t=(t+a)/2>0?Tn:-Tn),i.point(n,t),i.lineEnd(),i.lineStart(),i.point(o,t),i.point(r,t),s=0):n!==o&&l>=Mt&&(Si(e-n)<mt&&(e-=n*mt),Si(r-o)<mt&&(r-=o*mt),t=cXe(e,t,r,a),i.point(n,t),i.lineEnd(),i.lineStart(),i.point(o,t),s=0),i.point(e=r,t=a),n=o},lineEnd:function(){i.lineEnd(),e=t=NaN},clean:function(){return 2-s}}}function cXe(i,e,t,n){var s,r,a=_t(i-t);return Si(a)>mt?A0((_t(e)*(r=Et(n))*_t(t)-_t(n)*(s=Et(e))*_t(i))/(s*r*a)):(e+n)/2}function uXe(i,e,t,n){var s;if(i==null)s=t*Tn,n.point(-Mt,s),n.point(0,s),n.point(Mt,s),n.point(Mt,0),n.point(Mt,-s),n.point(0,-s),n.point(-Mt,-s),n.point(-Mt,0),n.point(-Mt,s);else if(Si(i[0]-e[0])>mt){var r=i[0]<e[0]?Mt:-Mt;s=t*r/2,n.point(-r,s),n.point(0,s),n.point(r,s)}else n.point(e[0],e[1])}function hXe(i){var e=Et(i),t=6*fn,n=e>0,s=Si(e)>mt;function r(u,h,d,p){iXe(p,i,t,d,u,h)}function a(u,h){return Et(u)*Et(h)>e}function o(u){var h,d,p,f,g;return{lineStart:function(){f=p=!1,g=1},point:function(m,y){var b=[m,y],x,S=a(m,y),C=n?S?0:c(m,y):S?c(m+(m<0?Mt:-Mt),y):0;if(!h&&(f=p=S)&&u.lineStart(),S!==p&&(x=l(h,b),(!x||iw(h,x)||iw(b,x))&&(b[2]=1)),S!==p)g=0,S?(u.lineStart(),x=l(b,h),u.point(x[0],x[1])):(x=l(h,b),u.point(x[0],x[1],2),u.lineEnd()),h=x;else if(s&&h&&n^S){var w;!(C&d)&&(w=l(b,h,!0))&&(g=0,n?(u.lineStart(),u.point(w[0][0],w[0][1]),u.point(w[1][0],w[1][1]),u.lineEnd()):(u.point(w[1][0],w[1][1]),u.lineEnd(),u.lineStart(),u.point(w[0][0],w[0][1],3)))}S&&(!h||!iw(h,b))&&u.point(b[0],b[1]),h=b,p=S,d=C},lineEnd:function(){p&&u.lineEnd(),h=null},clean:function(){return g|(f&&p)<<1}}}function l(u,h,d){var p=_y(u),f=_y(h),g=[1,0,0],m=OA(p,f),y=YS(m,m),b=m[0],x=y-b*b;if(!x)return!d&&u;var S=e*y/x,C=-e*b/x,w=OA(g,m),A=qS(g,S),T=qS(m,C);sI(A,T);var E=w,P=YS(A,E),O=YS(E,E),M=P*P-O*(YS(A,A)-1);if(!(M<0)){var R=qr(M),j=qS(E,(-P-R)/O);if(sI(j,A),j=rD(j),!d)return j;var I=u[0],D=h[0],z=u[1],$=h[1],V;D<I&&(V=I,I=D,D=V);var L=D-I,Y=Si(L-Mt)<mt,ae=Y||L<mt;if(!Y&&$<z&&(V=z,z=$,$=V),ae?Y?z+$>0^j[1]<(Si(j[0]-I)<mt?z:$):z<=j[1]&&j[1]<=$:L>Mt^(I<=j[0]&&j[0]<=D)){var W=qS(E,(-P+R)/O);return sI(W,A),[j,rD(W)]}}}function c(u,h){var d=n?i:Mt-i,p=0;return u<-d?p|=1:u>d&&(p|=2),h<-d?p|=4:h>d&&(p|=8),p}return _se(a,o,r,n?[0,-i]:[-Mt,i-Mt])}function dXe(i,e,t,n,s,r){var a=i[0],o=i[1],l=e[0],c=e[1],u=0,h=1,d=l-a,p=c-o,f;if(f=t-a,!(!d&&f>0)){if(f/=d,d<0){if(f<u)return;f<h&&(h=f)}else if(d>0){if(f>h)return;f>u&&(u=f)}if(f=s-a,!(!d&&f<0)){if(f/=d,d<0){if(f>h)return;f>u&&(u=f)}else if(d>0){if(f<u)return;f<h&&(h=f)}if(f=n-o,!(!p&&f>0)){if(f/=p,p<0){if(f<u)return;f<h&&(h=f)}else if(p>0){if(f>h)return;f>u&&(u=f)}if(f=r-o,!(!p&&f<0)){if(f/=p,p<0){if(f>h)return;f>u&&(u=f)}else if(p>0){if(f<u)return;f<h&&(h=f)}return u>0&&(i[0]=a+u*d,i[1]=o+u*p),h<1&&(e[0]=a+h*d,e[1]=o+h*p),!0}}}}}var M_=1e9,JS=-M_;function vse(i,e,t,n){function s(c,u){return i<=c&&c<=t&&e<=u&&u<=n}function r(c,u,h,d){var p=0,f=0;if(c==null||(p=a(c,h))!==(f=a(u,h))||l(c,u)<0^h>0)do d.point(p===0||p===3?i:t,p>1?n:e);while((p=(p+h+4)%4)!==f);else d.point(u[0],u[1])}function a(c,u){return Si(c[0]-i)<mt?u>0?0:3:Si(c[0]-t)<mt?u>0?2:1:Si(c[1]-e)<mt?u>0?1:0:u>0?3:2}function o(c,u){return l(c.x,u.x)}function l(c,u){var h=a(c,1),d=a(u,1);return h!==d?h-d:h===0?u[1]-c[1]:h===1?c[0]-u[0]:h===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,h=fse(),d,p,f,g,m,y,b,x,S,C,w,A={point:T,lineStart:M,lineEnd:R,polygonStart:P,polygonEnd:O};function T(I,D){s(I,D)&&u.point(I,D)}function E(){for(var I=0,D=0,z=p.length;D<z;++D)for(var $=p[D],V=1,L=$.length,Y=$[0],ae,W,ce=Y[0],he=Y[1];V<L;++V)ae=ce,W=he,Y=$[V],ce=Y[0],he=Y[1],W<=n?he>n&&(ce-ae)*(n-W)>(he-W)*(i-ae)&&++I:he<=n&&(ce-ae)*(n-W)<(he-W)*(i-ae)&&--I;return I}function P(){u=h,d=[],p=[],w=!0}function O(){var I=E(),D=w&&I,z=(d=yse(d)).length;(D||z)&&(c.polygonStart(),D&&(c.lineStart(),r(null,null,1,c),c.lineEnd()),z&&gse(d,o,I,r,c),c.polygonEnd()),u=c,d=p=f=null}function M(){A.point=j,p&&p.push(f=[]),C=!0,S=!1,b=x=NaN}function R(){d&&(j(g,m),y&&S&&h.rejoin(),d.push(h.result())),A.point=T,S&&u.lineEnd()}function j(I,D){var z=s(I,D);if(p&&f.push([I,D]),C)g=I,m=D,y=z,C=!1,z&&(u.lineStart(),u.point(I,D));else if(z&&S)u.point(I,D);else{var $=[b=Math.max(JS,Math.min(M_,b)),x=Math.max(JS,Math.min(M_,x))],V=[I=Math.max(JS,Math.min(M_,I)),D=Math.max(JS,Math.min(M_,D))];dXe($,V,i,e,t,n)?(S||(u.lineStart(),u.point($[0],$[1])),u.point(V[0],V[1]),z||u.lineEnd(),w=!1):z&&(u.lineStart(),u.point(I,D),w=!1)}b=I,x=D,S=z}return A}}function $b(i){return i}var oI=TP(),cD=TP(),bse,xse,uD,hD,ru={point:yo,lineStart:yo,lineEnd:yo,polygonStart:function(){ru.lineStart=pXe,ru.lineEnd=gXe},polygonEnd:function(){ru.lineStart=ru.lineEnd=ru.point=yo,oI.add(Si(cD)),cD.reset()},result:function(){var i=oI/2;return oI.reset(),i}};function pXe(){ru.point=fXe}function fXe(i,e){ru.point=Sse,bse=uD=i,xse=hD=e}function Sse(i,e){cD.add(hD*i-uD*e),uD=i,hD=e}function gXe(){Sse(bse,xse)}var vy=1/0,MA=vy,zb=-vy,IA=zb,RA={point:mXe,lineStart:yo,lineEnd:yo,polygonStart:yo,polygonEnd:yo,result:function(){var i=[[vy,MA],[zb,IA]];return zb=IA=-(MA=vy=1/0),i}};function mXe(i,e){i<vy&&(vy=i),i>zb&&(zb=i),e<MA&&(MA=e),e>IA&&(IA=e)}var dD=0,pD=0,I_=0,LA=0,DA=0,um=0,fD=0,gD=0,R_=0,Cse,wse,Ql,ec,uo={point:gf,lineStart:P8,lineEnd:O8,polygonStart:function(){uo.lineStart=vXe,uo.lineEnd=bXe},polygonEnd:function(){uo.point=gf,uo.lineStart=P8,uo.lineEnd=O8},result:function(){var i=R_?[fD/R_,gD/R_]:um?[LA/um,DA/um]:I_?[dD/I_,pD/I_]:[NaN,NaN];return dD=pD=I_=LA=DA=um=fD=gD=R_=0,i}};function gf(i,e){dD+=i,pD+=e,++I_}function P8(){uo.point=yXe}function yXe(i,e){uo.point=_Xe,gf(Ql=i,ec=e)}function _Xe(i,e){var t=i-Ql,n=e-ec,s=qr(t*t+n*n);LA+=s*(Ql+i)/2,DA+=s*(ec+e)/2,um+=s,gf(Ql=i,ec=e)}function O8(){uo.point=gf}function vXe(){uo.point=xXe}function bXe(){Ase(Cse,wse)}function xXe(i,e){uo.point=Ase,gf(Cse=Ql=i,wse=ec=e)}function Ase(i,e){var t=i-Ql,n=e-ec,s=qr(t*t+n*n);LA+=s*(Ql+i)/2,DA+=s*(ec+e)/2,um+=s,s=ec*i-Ql*e,fD+=s*(Ql+i),gD+=s*(ec+e),R_+=s*3,gf(Ql=i,ec=e)}function kse(i){this._context=i}kse.prototype={_radius:4.5,pointRadius:function(i){return this._radius=i,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(i,e){switch(this._point){case 0:{this._context.moveTo(i,e),this._point=1;break}case 1:{this._context.lineTo(i,e);break}default:{this._context.moveTo(i+this._radius,e),this._context.arc(i,e,this._radius,0,Ea);break}}},result:yo};var mD=TP(),lI,Tse,Ese,L_,D_,Hb={point:yo,lineStart:function(){Hb.point=SXe},lineEnd:function(){lI&&Pse(Tse,Ese),Hb.point=yo},polygonStart:function(){lI=!0},polygonEnd:function(){lI=null},result:function(){var i=+mD;return mD.reset(),i}};function SXe(i,e){Hb.point=Pse,Tse=L_=i,Ese=D_=e}function Pse(i,e){L_-=i,D_-=e,mD.add(qr(L_*L_+D_*D_)),L_=i,D_=e}function Ose(){this._string=[]}Ose.prototype={_radius:4.5,_circle:M8(4.5),pointRadius:function(i){return(i=+i)!==this._radius&&(this._radius=i,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(i,e){switch(this._point){case 0:{this._string.push("M",i,",",e),this._point=1;break}case 1:{this._string.push("L",i,",",e);break}default:{this._circle==null&&(this._circle=M8(this._radius)),this._string.push("M",i,",",e,this._circle);break}}},result:function(){if(this._string.length){var i=this._string.join("");return this._string=[],i}else return null}};function M8(i){return"m0,"+i+"a"+i+","+i+" 0 1,1 0,"+-2*i+"a"+i+","+i+" 0 1,1 0,"+2*i+"z"}function e5(i,e){var t=4.5,n,s;function r(a){return a&&(typeof t=="function"&&s.pointRadius(+t.apply(this,arguments)),Dg(a,n(s))),s.result()}return r.area=function(a){return Dg(a,n(ru)),ru.result()},r.measure=function(a){return Dg(a,n(Hb)),Hb.result()},r.bounds=function(a){return Dg(a,n(RA)),RA.result()},r.centroid=function(a){return Dg(a,n(uo)),uo.result()},r.projection=function(a){return arguments.length?(n=a==null?(i=null,$b):(i=a).stream,r):i},r.context=function(a){return arguments.length?(s=a==null?(e=null,new Ose):new kse(e=a),typeof t!="function"&&s.pointRadius(t),r):e},r.pointRadius=function(a){return arguments.length?(t=typeof a=="function"?a:(s.pointRadius(+a),+a),r):t},r.projection(i).context(e)}function EP(i){return function(e){var t=new yD;for(var n in i)t[n]=i[n];return t.stream=e,t}}function yD(){}yD.prototype={constructor:yD,point:function(i,e){this.stream.point(i,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function t5(i,e,t){var n=i.clipExtent&&i.clipExtent();return i.scale(150).translate([0,0]),n!=null&&i.clipExtent(null),Dg(t,i.stream(RA)),e(RA.result()),n!=null&&i.clipExtent(n),i}function PP(i,e,t){return t5(i,function(n){var s=e[1][0]-e[0][0],r=e[1][1]-e[0][1],a=Math.min(s/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),o=+e[0][0]+(s-a*(n[1][0]+n[0][0]))/2,l=+e[0][1]+(r-a*(n[1][1]+n[0][1]))/2;i.scale(150*a).translate([o,l])},t)}function i5(i,e,t){return PP(i,[[0,0],e],t)}function n5(i,e,t){return t5(i,function(n){var s=+e,r=s/(n[1][0]-n[0][0]),a=(s-r*(n[1][0]+n[0][0]))/2,o=-r*n[0][1];i.scale(150*r).translate([a,o])},t)}function s5(i,e,t){return t5(i,function(n){var s=+e,r=s/(n[1][1]-n[0][1]),a=-r*n[0][0],o=(s-r*(n[1][1]+n[0][1]))/2;i.scale(150*r).translate([a,o])},t)}var I8=16,CXe=Et(30*fn);function R8(i,e){return+e?AXe(i,e):wXe(i)}function wXe(i){return EP({point:function(e,t){e=i(e,t),this.stream.point(e[0],e[1])}})}function AXe(i,e){function t(n,s,r,a,o,l,c,u,h,d,p,f,g,m){var y=c-n,b=u-s,x=y*y+b*b;if(x>4*e&&g--){var S=a+d,C=o+p,w=l+f,A=qr(S*S+C*C+w*w),T=Ao(w/=A),E=Si(Si(w)-1)<mt||Si(r-h)<mt?(r+h)/2:Lu(C,S),P=i(E,T),O=P[0],M=P[1],R=O-n,j=M-s,I=b*R-y*j;(I*I/x>e||Si((y*R+b*j)/x-.5)>.3||a*d+o*p+l*f<CXe)&&(t(n,s,r,a,o,l,O,M,E,S/=A,C/=A,w,g,m),m.point(O,M),t(O,M,E,S,C,w,c,u,h,d,p,f,g,m))}}return function(n){var s,r,a,o,l,c,u,h,d,p,f,g,m={point:y,lineStart:b,lineEnd:S,polygonStart:function(){n.polygonStart(),m.lineStart=C},polygonEnd:function(){n.polygonEnd(),m.lineStart=b}};function y(T,E){T=i(T,E),n.point(T[0],T[1])}function b(){h=NaN,m.point=x,n.lineStart()}function x(T,E){var P=_y([T,E]),O=i(T,E);t(h,d,u,p,f,g,h=O[0],d=O[1],u=T,p=P[0],f=P[1],g=P[2],I8,n),n.point(h,d)}function S(){m.point=y,n.lineEnd()}function C(){b(),m.point=w,m.lineEnd=A}function w(T,E){x(s=T,E),r=h,a=d,o=p,l=f,c=g,m.point=x}function A(){t(h,d,u,p,f,g,r,a,s,o,l,c,I8,n),m.lineEnd=S,S()}return m}}var kXe=EP({point:function(i,e){this.stream.point(i*fn,e*fn)}});function TXe(i){return EP({point:function(e,t){var n=i(e,t);return this.stream.point(n[0],n[1])}})}function EXe(i,e,t,n,s){function r(a,o){return a*=n,o*=s,[e+i*a,t-i*o]}return r.invert=function(a,o){return[(a-e)/i*n,(t-o)/i*s]},r}function L8(i,e,t,n,s,r){var a=Et(r),o=_t(r),l=a*i,c=o*i,u=a/i,h=o/i,d=(o*t-a*e)/i,p=(o*e+a*t)/i;function f(g,m){return g*=n,m*=s,[l*g-c*m+e,t-c*g-l*m]}return f.invert=function(g,m){return[n*(u*g-h*m+d),s*(p-h*g-u*m)]},f}function Vu(i){return Mse(function(){return i})()}function Mse(i){var e,t=150,n=480,s=250,r=0,a=0,o=0,l=0,c=0,u,h=0,d=1,p=1,f=null,g=E8,m=null,y,b,x,S=$b,C=.5,w,A,T,E,P;function O(I){return T(I[0]*fn,I[1]*fn)}function M(I){return I=T.invert(I[0],I[1]),I&&[I[0]*Vs,I[1]*Vs]}O.stream=function(I){return E&&P===I?E:E=kXe(TXe(u)(g(w(S(P=I)))))},O.preclip=function(I){return arguments.length?(g=I,f=void 0,j()):g},O.postclip=function(I){return arguments.length?(S=I,m=y=b=x=null,j()):S},O.clipAngle=function(I){return arguments.length?(g=+I?hXe(f=I*fn):(f=null,E8),j()):f*Vs},O.clipExtent=function(I){return arguments.length?(S=I==null?(m=y=b=x=null,$b):vse(m=+I[0][0],y=+I[0][1],b=+I[1][0],x=+I[1][1]),j()):m==null?null:[[m,y],[b,x]]},O.scale=function(I){return arguments.length?(t=+I,R()):t},O.translate=function(I){return arguments.length?(n=+I[0],s=+I[1],R()):[n,s]},O.center=function(I){return arguments.length?(r=I[0]%360*fn,a=I[1]%360*fn,R()):[r*Vs,a*Vs]},O.rotate=function(I){return arguments.length?(o=I[0]%360*fn,l=I[1]%360*fn,c=I.length>2?I[2]%360*fn:0,R()):[o*Vs,l*Vs,c*Vs]},O.angle=function(I){return arguments.length?(h=I%360*fn,R()):h*Vs},O.reflectX=function(I){return arguments.length?(d=I?-1:1,R()):d<0},O.reflectY=function(I){return arguments.length?(p=I?-1:1,R()):p<0},O.precision=function(I){return arguments.length?(w=R8(A,C=I*I),j()):qr(C)},O.fitExtent=function(I,D){return PP(O,I,D)},O.fitSize=function(I,D){return i5(O,I,D)},O.fitWidth=function(I,D){return n5(O,I,D)},O.fitHeight=function(I,D){return s5(O,I,D)};function R(){var I=L8(t,0,0,d,p,h).apply(null,e(r,a)),D=(h?L8:EXe)(t,n-I[0],s-I[1],d,p,h);return u=pse(o,l,c),A=oD(e,D),T=oD(u,A),w=R8(A,C),j()}function j(){return E=P=null,O}return function(){return e=i.apply(this,arguments),O.invert=e.invert&&M,R()}}function r5(i){var e=0,t=Mt/3,n=Mse(i),s=n(e,t);return s.parallels=function(r){return arguments.length?n(e=r[0]*fn,t=r[1]*fn):[e*Vs,t*Vs]},s}function PXe(i){var e=Et(i);function t(n,s){return[n*e,_t(s)/e]}return t.invert=function(n,s){return[n/e,Ao(s*e)]},t}function OXe(i,e){var t=_t(i),n=(t+_t(e))/2;if(Si(n)<mt)return PXe(i);var s=1+t*(2*n-t),r=qr(s)/n;function a(o,l){var c=qr(s-2*n*_t(l))/n;return[c*_t(o*=n),r-c*Et(o)]}return a.invert=function(o,l){var c=r-l,u=Lu(o,Si(c))*mo(c);return c*n<0&&(u-=Mt*mo(o)*mo(c)),[u/n,Ao((s-(o*o+c*c)*n*n)/(2*n))]},a}function FA(){return r5(OXe).scale(155.424).center([0,33.6442])}function Ise(){return FA().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function MXe(i){var e=i.length;return{point:function(t,n){for(var s=-1;++s<e;)i[s].point(t,n)},sphere:function(){for(var t=-1;++t<e;)i[t].sphere()},lineStart:function(){for(var t=-1;++t<e;)i[t].lineStart()},lineEnd:function(){for(var t=-1;++t<e;)i[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<e;)i[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<e;)i[t].polygonEnd()}}}function IXe(){var i,e,t=Ise(),n,s=FA().rotate([154,0]).center([-2,58.5]).parallels([55,65]),r,a=FA().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,l,c={point:function(d,p){l=[d,p]}};function u(d){var p=d[0],f=d[1];return l=null,n.point(p,f),l||(r.point(p,f),l)||(o.point(p,f),l)}u.invert=function(d){var p=t.scale(),f=t.translate(),g=(d[0]-f[0])/p,m=(d[1]-f[1])/p;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?s:m>=.166&&m<.234&&g>=-.214&&g<-.115?a:t).invert(d)},u.stream=function(d){return i&&e===d?i:i=MXe([t.stream(e=d),s.stream(d),a.stream(d)])},u.precision=function(d){return arguments.length?(t.precision(d),s.precision(d),a.precision(d),h()):t.precision()},u.scale=function(d){return arguments.length?(t.scale(d),s.scale(d*.35),a.scale(d),u.translate(t.translate())):t.scale()},u.translate=function(d){if(!arguments.length)return t.translate();var p=t.scale(),f=+d[0],g=+d[1];return n=t.translate(d).clipExtent([[f-.455*p,g-.238*p],[f+.455*p,g+.238*p]]).stream(c),r=s.translate([f-.307*p,g+.201*p]).clipExtent([[f-.425*p+mt,g+.12*p+mt],[f-.214*p-mt,g+.234*p-mt]]).stream(c),o=a.translate([f-.205*p,g+.212*p]).clipExtent([[f-.214*p+mt,g+.166*p+mt],[f-.115*p-mt,g+.234*p-mt]]).stream(c),h()},u.fitExtent=function(d,p){return PP(u,d,p)},u.fitSize=function(d,p){return i5(u,d,p)},u.fitWidth=function(d,p){return n5(u,d,p)},u.fitHeight=function(d,p){return s5(u,d,p)};function h(){return i=e=null,u}return u.scale(1070)}function Rse(i){return function(e,t){var n=Et(e),s=Et(t),r=i(n*s);return[r*s*_t(e),r*_t(t)]}}function kx(i){return function(e,t){var n=qr(e*e+t*t),s=i(n),r=_t(s),a=Et(s);return[Lu(e*r,n*a),Ao(n&&t*r/n)]}}var Lse=Rse(function(i){return qr(2/(1+i))});Lse.invert=kx(function(i){return 2*Ao(i/2)});function RXe(){return Vu(Lse).scale(124.75).clipAngle(180-.001)}var Dse=Rse(function(i){return(i=dse(i))&&i/_t(i)});Dse.invert=kx(function(i){return i});function LXe(){return Vu(Dse).scale(79.4188).clipAngle(180-.001)}function OP(i,e){return[i,EA(QN((Tn+e)/2))]}OP.invert=function(i,e){return[i,2*A0(hse(e))-Tn]};function DXe(){return Fse(OP).scale(961/Ea)}function Fse(i){var e=Vu(i),t=e.center,n=e.scale,s=e.translate,r=e.clipExtent,a=null,o,l,c;e.scale=function(h){return arguments.length?(n(h),u()):n()},e.translate=function(h){return arguments.length?(s(h),u()):s()},e.center=function(h){return arguments.length?(t(h),u()):t()},e.clipExtent=function(h){return arguments.length?(h==null?a=o=l=c=null:(a=+h[0][0],o=+h[0][1],l=+h[1][0],c=+h[1][1]),u()):a==null?null:[[a,o],[l,c]]};function u(){var h=Mt*n(),d=e(tXe(e.rotate()).invert([0,0]));return r(a==null?[[d[0]-h,d[1]-h],[d[0]+h,d[1]+h]]:i===OP?[[Math.max(d[0]-h,a),o],[Math.min(d[0]+h,l),c]]:[[a,Math.max(d[1]-h,o)],[l,Math.min(d[1]+h,c)]])}return u()}function QS(i){return QN((Tn+i)/2)}function FXe(i,e){var t=Et(i),n=i===e?_t(i):EA(t/Et(e))/EA(QS(e)/QS(i)),s=t*nI(QS(i),n)/n;if(!n)return OP;function r(a,o){s>0?o<-Tn+mt&&(o=-Tn+mt):o>Tn-mt&&(o=Tn-mt);var l=s/nI(QS(o),n);return[l*_t(n*a),s-l*Et(n*a)]}return r.invert=function(a,o){var l=s-o,c=mo(n)*qr(a*a+l*l),u=Lu(a,Si(l))*mo(l);return l*n<0&&(u-=Mt*mo(a)*mo(l)),[u/n,2*A0(nI(s/c,1/n))-Tn]},r}function BXe(){return r5(FXe).scale(109.5).parallels([30,30])}function BA(i,e){return[i,e]}BA.invert=BA;function jXe(){return Vu(BA).scale(152.63)}function NXe(i,e){var t=Et(i),n=i===e?_t(i):(t-Et(e))/(e-i),s=t/n+i;if(Si(n)<mt)return BA;function r(a,o){var l=s-o,c=n*a;return[l*_t(c),s-l*Et(c)]}return r.invert=function(a,o){var l=s-o,c=Lu(a,Si(l))*mo(l);return l*n<0&&(c-=Mt*mo(a)*mo(l)),[c/n,s-mo(n)*qr(a*a+l*l)]},r}function $Xe(){return r5(NXe).scale(131.154).center([0,13.9389])}var lv=1.340264,cv=-.081106,uv=893e-6,hv=.003796,jA=qr(3)/2,zXe=12;function Bse(i,e){var t=Ao(jA*_t(e)),n=t*t,s=n*n*n;return[i*Et(t)/(jA*(lv+3*cv*n+s*(7*uv+9*hv*n))),t*(lv+cv*n+s*(uv+hv*n))]}Bse.invert=function(i,e){for(var t=e,n=t*t,s=n*n*n,r=0,a,o,l;r<zXe&&(o=t*(lv+cv*n+s*(uv+hv*n))-e,l=lv+3*cv*n+s*(7*uv+9*hv*n),t-=a=o/l,n=t*t,s=n*n*n,!(Si(a)<eXe));++r);return[jA*i*(lv+3*cv*n+s*(7*uv+9*hv*n))/Et(t),Ao(_t(t)/jA)]};function HXe(){return Vu(Bse).scale(177.158)}function jse(i,e){var t=Et(e),n=Et(i)*t;return[t*_t(i)/n,_t(e)/n]}jse.invert=kx(A0);function VXe(){return Vu(jse).scale(144.049).clipAngle(60)}function UXe(){var i=1,e=0,t=0,n=1,s=1,r=0,a,o,l=null,c,u,h,d=1,p=1,f=EP({point:function(S,C){var w=x([S,C]);this.stream.point(w[0],w[1])}}),g=$b,m,y;function b(){return d=i*n,p=i*s,m=y=null,x}function x(S){var C=S[0]*d,w=S[1]*p;if(r){var A=w*a-C*o;C=C*a+w*o,w=A}return[C+e,w+t]}return x.invert=function(S){var C=S[0]-e,w=S[1]-t;if(r){var A=w*a+C*o;C=C*a-w*o,w=A}return[C/d,w/p]},x.stream=function(S){return m&&y===S?m:m=f(g(y=S))},x.postclip=function(S){return arguments.length?(g=S,l=c=u=h=null,b()):g},x.clipExtent=function(S){return arguments.length?(g=S==null?(l=c=u=h=null,$b):vse(l=+S[0][0],c=+S[0][1],u=+S[1][0],h=+S[1][1]),b()):l==null?null:[[l,c],[u,h]]},x.scale=function(S){return arguments.length?(i=+S,b()):i},x.translate=function(S){return arguments.length?(e=+S[0],t=+S[1],b()):[e,t]},x.angle=function(S){return arguments.length?(r=S%360*fn,o=_t(r),a=Et(r),b()):r*Vs},x.reflectX=function(S){return arguments.length?(n=S?-1:1,b()):n<0},x.reflectY=function(S){return arguments.length?(s=S?-1:1,b()):s<0},x.fitExtent=function(S,C){return PP(x,S,C)},x.fitSize=function(S,C){return i5(x,S,C)},x.fitWidth=function(S,C){return n5(x,S,C)},x.fitHeight=function(S,C){return s5(x,S,C)},x}function Nse(i,e){var t=e*e,n=t*t;return[i*(.8707-.131979*t+n*(-.013791+n*(.003971*t-.001529*n))),e*(1.007226+t*(.015085+n*(-.044475+.028874*t-.005916*n)))]}Nse.invert=function(i,e){var t=e,n=25,s;do{var r=t*t,a=r*r;t-=s=(t*(1.007226+r*(.015085+a*(-.044475+.028874*r-.005916*a)))-e)/(1.007226+r*(.015085*3+a*(-.044475*7+.028874*9*r-.005916*11*a)))}while(Si(s)>mt&&--n>0);return[i/(.8707+(r=t*t)*(-.131979+r*(-.013791+r*r*r*(.003971-.001529*r)))),t]};function WXe(){return Vu(Nse).scale(175.295)}function $se(i,e){return[Et(e)*_t(i),_t(e)]}$se.invert=kx(Ao);function GXe(){return Vu($se).scale(249.5).clipAngle(90+mt)}function zse(i,e){var t=Et(e),n=1+Et(i)*t;return[t*_t(i)/n,_t(e)/n]}zse.invert=kx(function(i){return 2*A0(i)});function KXe(){return Vu(zse).scale(250).clipAngle(142)}function Hse(i,e){return[EA(QN((Tn+e)/2)),-i]}Hse.invert=function(i,e){return[-e,2*A0(hse(i))-Tn]};function XXe(){var i=Fse(Hse),e=i.center,t=i.rotate;return i.center=function(n){return arguments.length?e([-n[1],n[0]]):(n=e(),[n[1],-n[0]])},i.rotate=function(n){return arguments.length?t([n[0],n[1],n.length>2?n[2]+90:90]):(n=t(),[n[0],n[1],n[2]-90])},t([0,0,90]).scale(159.155)}function YXe(i){return i}function qXe(i){if(i==null)return YXe;var e,t,n=i.scale[0],s=i.scale[1],r=i.translate[0],a=i.translate[1];return function(o,l){l||(e=t=0);var c=2,u=o.length,h=new Array(u);for(h[0]=(e+=o[0])*n+r,h[1]=(t+=o[1])*s+a;c<u;)h[c]=o[c],++c;return h}}function ZXe(i,e){for(var t,n=i.length,s=n-e;s<--n;)t=i[s],i[s++]=i[n],i[n]=t}function JXe(i,e){return typeof e=="string"&&(e=i.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(t){return D8(i,t)})}:D8(i,e)}function D8(i,e){var t=e.id,n=e.bbox,s=e.properties==null?{}:e.properties,r=QXe(i,e);return t==null&&n==null?{type:"Feature",properties:s,geometry:r}:n==null?{type:"Feature",id:t,properties:s,geometry:r}:{type:"Feature",id:t,bbox:n,properties:s,geometry:r}}function QXe(i,e){var t=qXe(i.transform),n=i.arcs;function s(u,h){h.length&&h.pop();for(var d=n[u<0?~u:u],p=0,f=d.length;p<f;++p)h.push(t(d[p],p));u<0&&ZXe(h,f)}function r(u){return t(u)}function a(u){for(var h=[],d=0,p=u.length;d<p;++d)s(u[d],h);return h.length<2&&h.push(h[0]),h}function o(u){for(var h=a(u);h.length<4;)h.push(h[0]);return h}function l(u){return u.map(o)}function c(u){var h=u.type,d;switch(h){case"GeometryCollection":return{type:h,geometries:u.geometries.map(c)};case"Point":d=r(u.coordinates);break;case"MultiPoint":d=u.coordinates.map(r);break;case"LineString":d=a(u.arcs);break;case"MultiLineString":d=u.arcs.map(a);break;case"Polygon":d=l(u.arcs);break;case"MultiPolygon":d=u.arcs.map(l);break;default:return null}return{type:h,coordinates:d}}return c(e)}var Vse={exports:{}},Rl=function(i,e){this.p1=i,this.p2=e};Rl.prototype.rise=function(){return this.p2[1]-this.p1[1]};Rl.prototype.run=function(){return this.p2[0]-this.p1[0]};Rl.prototype.slope=function(){return this.rise()/this.run()};Rl.prototype.yIntercept=function(){return this.p1[1]-this.p1[0]*this.slope(this.p1,this.p2)};Rl.prototype.isVertical=function(){return!isFinite(this.slope())};Rl.prototype.isHorizontal=function(){return this.p1[1]==this.p2[1]};Rl.prototype._perpendicularDistanceHorizontal=function(i){return Math.abs(this.p1[1]-i[1])};Rl.prototype._perpendicularDistanceVertical=function(i){return Math.abs(this.p1[0]-i[0])};Rl.prototype._perpendicularDistanceHasSlope=function(i){var e=this.slope(),t=this.yIntercept();return Math.abs(e*i[0]-i[1]+t)/Math.sqrt(Math.pow(e,2)+1)};Rl.prototype.perpendicularDistance=function(i){return this.isVertical()?this._perpendicularDistanceVertical(i):this.isHorizontal()?this._perpendicularDistanceHorizontal(i):this._perpendicularDistanceHasSlope(i)};var eYe=Rl,tYe=eYe,_D=function(i,e){for(var t=0,n=0,s=1;s<=i.length-2;s++){var r=new tYe(i[0],i[i.length-1]).perpendicularDistance(i[s]);r>t&&(n=s,t=r)}if(t>e)var a=_D(i.slice(0,n),e),o=_D(i.slice(n,i.length),e),l=a.concat(o);else i.length>1?l=[i[0],i[i.length-1]]:l=[i[0]];return l},iYe=_D;(function(i){var e=iYe;i.exports=function(s,r,a){return a||(s=JSON.parse(JSON.stringify(s))),s.features?n(s,r):s.type&&s.type==="Feature"?t(s,r):new Error("FeatureCollection or individual Feature required")},i.exports.simplify=function(s,r){return e(s,r)};function t(s,r){var a=s.geometry,o=a.type;if(o==="LineString")a.coordinates=i.exports.simplify(a.coordinates,r);else if(o==="Polygon"||o==="MultiLineString")for(var l=0;l<a.coordinates.length;l++)a.coordinates[l]=i.exports.simplify(a.coordinates[l],r);else if(o==="MultiPolygon")for(var c=0;c<a.coordinates.length;c++)for(var u=0;u<a.coordinates[c].length;u++)a.coordinates[c][u]=i.exports.simplify(a.coordinates[c][u],r);return s}function n(s,r){for(var a=0;a<s.features.length;a++)s.features[a]=t(s.features[a],r);return s}})(Vse);var nYe=Vse.exports;const sYe=Xe(nYe),MP=function(i,...e){return aYe(Ta(i),...e)};function Use(i,e,t){const n=e[t];if(n===void 0)i[t]=null;else if(Ke(n)){Ke(i[t])||(i[t]={});for(const s in n)Use(i[t],n,s)}else i[t]=n}function rYe(i,e){if(Ke(e)&&i!==e)for(const t in e)Use(i,e,t)}function aYe(i,...e){i||(i={});let t=-1;const n=e.length;for(;++t<n;)rYe(i,e[t]);return i}const oYe={tolerance:.01},lYe=(i,e)=>{const t=MP(oYe,e),{tolerance:n}=t;return sYe(i,n)};var mf;(function(i){i.DSV="dsv",i.TREE="tree",i.GEO="geo",i.BYTE="bytejson",i.HEX="hex",i.GRAPH="graph",i.TABLE="table",i.GEO_GRATICULE="geo-graticule"})(mf||(mf={}));const cYe=(i,e)=>{const{fields:t,key:n,value:s,retains:r}=e,a=[];for(let o=0;o<i.length;o++)t.forEach(l=>{const c={};if(c[n]=l,c[s]=i[o][l],r)r.forEach(u=>{c[u]=i[o][u]});else for(const u in i[o])t.indexOf(u)===-1&&(c[u]=i[o][u]);a.push(c)});return a},Wse=(i,e)=>{var t,n;if(!(e!=null&&e.fields)||i.length===0)return i;const s=e.fields,r=i[0],a={},o=[];for(const l in s)if(Object.prototype.hasOwnProperty.call(s,l)){const c=s[l];if(!c.type){let h=r;l in r||(h=(t=i.find(d=>l in d))!==null&&t!==void 0?t:r),c.type=typeof h[l]=="number"?"linear":"ordinal"}let u;if(typeof c.sortIndex=="number"&&(u={key:l,type:c.type,index:c.sortIndex,sortIndex:{},sortIndexCount:0,sortReverse:c.sortReverse===!0},o.push(u)),((n=c.domain)===null||n===void 0?void 0:n.length)>0)if(c.type==="ordinal"){c._domainCache={},a[l]=c;const h={};c.domain.forEach((d,p)=>{h[d]=p,c._domainCache[d]=p}),u&&(u.sortIndex=h,u.sortIndexCount=c.domain.length)}else c.domain.length>=2&&(a[l]=c)}return Object.keys(a).length>0&&(i=i.filter(l=>{for(const c in a){const u=a[c];if(u.type==="ordinal"){if(!(l[c]in u._domainCache))return!1}else if(u.domain[0]>l[c]||u.domain[1]<l[c])return!1}return!0})),o.sort((l,c)=>l.index-c.index),i.sort((l,c)=>uYe(l,c,o)),i};function uYe(i,e,t){for(let n=0;n<t.length;n++){const s=t[n];let r=0;if(s.type==="ordinal"?(s.sortIndex[e[s.key]]===void 0&&(s.sortIndex[e[s.key]]=s.sortIndexCount++),s.sortIndex[i[s.key]]===void 0&&(s.sortIndex[i[s.key]]=s.sortIndexCount++),r=s.sortIndex[i[s.key]]-s.sortIndex[e[s.key]]):s.type==="linear"&&(r=i[s.key]-e[s.key]),s.sortReverse&&(r=-r),r!==0)return r}return 0}var F8={},cI={},uI=34,l_=10,hI=13;function Gse(i){return new Function("d","return {"+i.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function hYe(i,e){var t=Gse(i);return function(n,s){return e(t(n),s,i)}}function B8(i){var e=Object.create(null),t=[];return i.forEach(function(n){for(var s in n)s in e||t.push(e[s]=s)}),t}function Dr(i,e){var t=i+"",n=t.length;return n<e?new Array(e-n+1).join(0)+t:t}function dYe(i){return i<0?"-"+Dr(-i,6):i>9999?"+"+Dr(i,6):Dr(i,4)}function pYe(i){var e=i.getUTCHours(),t=i.getUTCMinutes(),n=i.getUTCSeconds(),s=i.getUTCMilliseconds();return isNaN(i)?"Invalid Date":dYe(i.getUTCFullYear())+"-"+Dr(i.getUTCMonth()+1,2)+"-"+Dr(i.getUTCDate(),2)+(s?"T"+Dr(e,2)+":"+Dr(t,2)+":"+Dr(n,2)+"."+Dr(s,3)+"Z":n?"T"+Dr(e,2)+":"+Dr(t,2)+":"+Dr(n,2)+"Z":t||e?"T"+Dr(e,2)+":"+Dr(t,2)+"Z":"")}function a5(i){var e=new RegExp('["'+i+`
\r]`),t=i.charCodeAt(0);function n(h,d){var p,f,g=s(h,function(m,y){if(p)return p(m,y-1);f=m,p=d?hYe(m,d):Gse(m)});return g.columns=f||[],g}function s(h,d){var p=[],f=h.length,g=0,m=0,y,b=f<=0,x=!1;h.charCodeAt(f-1)===l_&&--f,h.charCodeAt(f-1)===hI&&--f;function S(){if(b)return cI;if(x)return x=!1,F8;var w,A=g,T;if(h.charCodeAt(A)===uI){for(;g++<f&&h.charCodeAt(g)!==uI||h.charCodeAt(++g)===uI;);return(w=g)>=f?b=!0:(T=h.charCodeAt(g++))===l_?x=!0:T===hI&&(x=!0,h.charCodeAt(g)===l_&&++g),h.slice(A+1,w-1).replace(/""/g,'"')}for(;g<f;){if((T=h.charCodeAt(w=g++))===l_)x=!0;else if(T===hI)x=!0,h.charCodeAt(g)===l_&&++g;else if(T!==t)continue;return h.slice(A,w)}return b=!0,h.slice(A,f)}for(;(y=S())!==cI;){for(var C=[];y!==F8&&y!==cI;)C.push(y),y=S();d&&(C=d(C,m++))==null||p.push(C)}return p}function r(h,d){return h.map(function(p){return d.map(function(f){return u(p[f])}).join(i)})}function a(h,d){return d==null&&(d=B8(h)),[d.map(u).join(i)].concat(r(h,d)).join(`
`)}function o(h,d){return d==null&&(d=B8(h)),r(h,d).join(`
`)}function l(h){return h.map(c).join(`
`)}function c(h){return h.map(u).join(i)}function u(h){return h==null?"":h instanceof Date?pYe(h):e.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:n,parseRows:s,format:a,formatBody:o,formatRows:l,formatRow:c,formatValue:u}}var fYe=a5(","),gYe=fYe.parse,mYe=a5("	"),yYe=mYe.parse;const _Ye={delimiter:","},Kse=(i,e={},t)=>{t.type=mf.DSV;const n=MP(_Ye,e),{delimiter:s}=n;if(!be(s))throw new TypeError("Invalid delimiter: must be a string!");return a5(s).parse(i)},Xse=(i,e={},t)=>(t.type=mf.DSV,gYe(i)),Yse=(i,e={},t)=>(t.type=mf.DSV,yYe(i));function vYe(i){if(!i)throw new Error("geojson is required");switch(i.type){case"Feature":return qse(i);case"FeatureCollection":return bYe(i);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return o5(i);default:throw new Error("unknown GeoJSON type")}}function qse(i){var e={type:"Feature"};return Object.keys(i).forEach(function(t){switch(t){case"type":case"properties":case"geometry":return;default:e[t]=i[t]}}),e.properties=Zse(i.properties),e.geometry=o5(i.geometry),e}function Zse(i){var e={};return i&&Object.keys(i).forEach(function(t){var n=i[t];typeof n=="object"?n===null?e[t]=null:Array.isArray(n)?e[t]=n.map(function(s){return s}):e[t]=Zse(n):e[t]=n}),e}function bYe(i){var e={type:"FeatureCollection"};return Object.keys(i).forEach(function(t){switch(t){case"type":case"features":return;default:e[t]=i[t]}}),e.features=i.features.map(function(t){return qse(t)}),e}function o5(i){var e={type:i.type};return i.bbox&&(e.bbox=i.bbox),i.type==="GeometryCollection"?(e.geometries=i.geometries.map(function(t){return o5(t)}),e):(e.coordinates=Jse(i.coordinates),e)}function Jse(i){var e=i;return typeof e[0]!="object"?e.slice():e.map(function(t){return Jse(t)})}function F_(i){if(Array.isArray(i))return i;if(i.type==="Feature"){if(i.geometry!==null)return i.geometry.coordinates}else if(i.coordinates)return i.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function vD(i){for(var e=F_(i),t=0,n=1,s,r;n<e.length;)s=r||e[0],r=e[n],t+=(r[0]-s[0])*(r[1]+s[1]),n++;return t>0}function j8(i,e){if(i.type==="Feature")e(i,0);else if(i.type==="FeatureCollection")for(var t=0;t<i.features.length&&e(i.features[t],t)!==!1;t++);}function l5(i,e){var t,n,s,r,a,o,l,c,u,h,d=0,p=i.type==="FeatureCollection",f=i.type==="Feature",g=p?i.features.length:1;for(t=0;t<g;t++){for(o=p?i.features[t].geometry:f?i.geometry:i,c=p?i.features[t].properties:f?i.properties:{},u=p?i.features[t].bbox:f?i.bbox:void 0,h=p?i.features[t].id:f?i.id:void 0,l=o?o.type==="GeometryCollection":!1,a=l?o.geometries.length:1,s=0;s<a;s++){if(r=l?o.geometries[s]:o,r===null){if(e(null,d,c,u,h)===!1)return!1;continue}switch(r.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(r,d,c,u,h)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<r.geometries.length;n++)if(e(r.geometries[n],d,c,u,h)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}d++}}function xYe(i,e){l5(i,function(t,n,s,r,a){var o=t===null?null:t.type;switch(o){case null:case"Point":case"LineString":case"Polygon":return e(p8(t,s,{bbox:r,id:a}),n,0)===!1?!1:void 0}var l;switch(o){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<t.coordinates.length;c++){var u=t.coordinates[c],h={type:l,coordinates:u};if(e(p8(h,s),n,c)===!1)return!1}})}function SYe(i,e){if(e=e||{},!HKe(e))throw new Error("options is invalid");var t=e.reverse||!1,n=e.mutate||!1;if(!i)throw new Error("<geojson> is required");if(typeof t!="boolean")throw new Error("<reverse> must be a boolean");if(typeof n!="boolean")throw new Error("<mutate> must be a boolean");n===!1&&(i=vYe(i));var s=[];switch(i.type){case"GeometryCollection":return l5(i,function(r){nw(r,t)}),i;case"FeatureCollection":return j8(i,function(r){j8(nw(r,t),function(a){s.push(a)})}),lse(s)}return nw(i,t)}function nw(i,e){var t=i.type==="Feature"?i.geometry.type:i.type;switch(t){case"GeometryCollection":return l5(i,function(n){nw(n,e)}),i;case"LineString":return N8(F_(i),e),i;case"Polygon":return $8(F_(i),e),i;case"MultiLineString":return F_(i).forEach(function(n){N8(n,e)}),i;case"MultiPolygon":return F_(i).forEach(function(n){$8(n,e)}),i;case"Point":case"MultiPoint":return i}}function N8(i,e){vD(i)===e&&i.reverse()}function $8(i,e){vD(i[0])!==e&&i[0].reverse();for(var t=1;t<i.length;t++)vD(i[t])===e&&i[t].reverse()}function CYe(i){if(!i)throw new Error("geojson is required");var e=[];return xYe(i,function(t){e.push(t)}),lse(e)}const z8=e5(),Qse={centroid:!1,name:!1,bbox:!1,rewind:!1},H8=i=>{if(i.geometry.type.startsWith("Multi")){const e=CYe(i).features[0];return Object.assign(Object.assign({},e),e.properties)}return Object.assign(Object.assign({},i),i.properties)},wYe=i=>{const e=[];return i.forEach(t=>{t.type==="FeatureCollection"?t.features.forEach(n=>{e.push(H8(n))}):e.push(H8(t))}),e},ere=(i,e={},t)=>{t.type=mf.GEO;const n=MP(Qse,e),{centroid:s,name:r,bbox:a,rewind:o}=n;if(Array.isArray(i))return wYe(i);let l=i.features;return o&&(l=SYe(i,{reverse:!Ke(o)||o.reverse}).features),l.forEach(c=>{if(s){const u=z8.centroid(c);c.centroidX=u[0],c.centroidY=u[1]}if(r&&(c.name=c.properties.name),a){const u=z8.bounds(c);c.bbox=u}}),i.features=l,i},AYe={},kYe=(i,e,t)=>{t.type=mf.GEO;const n=MP(Qse,AYe,e),{object:s}=n;if(!be(s))throw new TypeError("Invalid object: must be a string!");const r=JXe(i,i.objects[s]);return ere(r,n,t)},IP=(i,e,t)=>{const n=!Ui(e==null?void 0:e.dependencyUpdate)||(e==null?void 0:e.dependencyUpdate);if(!i||!ie(i))throw new TypeError("Invalid data: must be DataView array!");return ie(t.rawData)&&t.rawData.forEach(s=>{s.target&&(s.target.removeListener("change",t.reRunAllTransform),s.target.removeListener("markRunning",t.markRunning))}),n&&i.forEach(s=>{s.target.addListener("change",t.reRunAllTransform),s.target.addListener("markRunning",t.markRunning)}),i};let dI=0;const TYe=1e8;function tre(i="dataset"){return dI>TYe&&(dI=0),i+"_"+dI++}class Td{constructor(e){var t;let n;this.options=e,this.isDataSet=!0,this.transformMap={},this.parserMap={},this.dataViewMap={},this.target=new Yf,n=e!=null&&e.name?e.name:tre("dataset"),this.name=n,this._logger=(t=e==null?void 0:e.logger)!==null&&t!==void 0?t:ii.getInstance()}setLogger(e){this._logger=e}getDataView(e){return this.dataViewMap[e]}setDataView(e,t){var n;this.dataViewMap[e]&&((n=this._logger)===null||n===void 0||n.error(`Error: dataView ${e} `)),this.dataViewMap[e]=t}removeDataView(e){this.dataViewMap[e]=null,delete this.dataViewMap[e]}registerParser(e,t){var n;this.parserMap[e]&&((n=this._logger)===null||n===void 0||n.warn(`Warn: transform ${e} `)),this.parserMap[e]=t}removeParser(e){this.parserMap[e]=null,delete this.parserMap[e]}getParser(e){return this.parserMap[e]||this.parserMap.default}registerTransform(e,t){var n;this.transformMap[e]&&((n=this._logger)===null||n===void 0||n.warn(`Warn: transform ${e} `)),this.transformMap[e]=t}removeTransform(e){this.transformMap[e]=null,delete this.transformMap[e]}getTransform(e){return this.transformMap[e]}multipleDataViewAddListener(e,t,n){this._callMap||(this._callMap=new Map);let s=this._callMap.get(n);s||(s=()=>{e.some(r=>r.isRunning)||n()}),e.forEach(r=>{r.target.addListener(t,s)}),this._callMap.set(n,s)}allDataViewAddListener(e,t){this.multipleDataViewAddListener(Object.values(this.dataViewMap),e,t)}multipleDataViewRemoveListener(e,t,n){if(this._callMap){const s=this._callMap.get(n);s&&e.forEach(r=>{r.target.removeListener(t,s)}),this._callMap.delete(n)}}multipleDataViewUpdateInParse(e){e.forEach(t=>{var n;return(n=this.getDataView(t.name))===null||n===void 0?void 0:n.markRunning()}),e.forEach(t=>{var n;return(n=this.getDataView(t.name))===null||n===void 0?void 0:n.parseNewData(t.data,t.options)})}multipleDataViewUpdateInRawData(e){e.forEach(t=>{var n;return(n=this.getDataView(t.name))===null||n===void 0?void 0:n.markRunning()}),e.forEach(t=>{var n;return(n=this.getDataView(t.name))===null||n===void 0?void 0:n.updateRawData(t.data,t.options)})}destroy(){this.transformMap=null,this.parserMap=null,this.dataViewMap=null,this._callMap=null,this.target.removeAllListeners()}}const pI="_data-view-diff-rank";let Rt=class ire{constructor(e,t){let n;this.dataSet=e,this.options=t,this.isDataView=!0,this.target=new Yf,this.parseOption=null,this.transformsArr=[],this.isRunning=!1,this.rawData={},this.history=!1,this.parserData={},this.latestData={},this._fields=null,this.reRunAllTransform=(s={pushHistory:!0,emitMessage:!0})=>(this.isRunning=!0,this.resetTransformData(),this.transformsArr.forEach(r=>{this.executeTransform(r,{pushHistory:s.pushHistory,emitMessage:!1}),this.isLastTransform(r)&&this.diffLastData()}),this.isRunning=!1,s.emitMessage!==!1&&this.target.emit("change",[]),this),this.markRunning=()=>{this.isRunning=!0,this.target.emit("markRunning",[])},n=t!=null&&t.name?t.name:tre("dataview"),this.name=n,t!=null&&t.history&&(this.history=t.history,this.historyData=[]),this.dataSet.setDataView(n,this),this.setFields(t==null?void 0:t.fields)}parse(e,t,n=!1){var s;this.isRunning=!0,n&&this.target.emit("beforeParse",[]),t&&(this.parseOption=t);const r=this.cloneParseData(e,t);if(t!=null&&t.type){const a=((s=this.dataSet.getParser(t.type))!==null&&s!==void 0?s:this.dataSet.getParser("bytejson"))(r,t.options,this);this.rawData=r,this.parserData=a,this.history&&this.historyData.push(r,a),this.latestData=a}else this.parserData=r,this.rawData=r,this.history&&this.historyData.push(r),this.latestData=r;return this.isRunning=!1,n&&this.target.emit("afterParse",[]),this}transform(e,t=!0){if(this.isRunning=!0,e&&e.type){let n=!0;if(e.type==="fields"){this._fields=e.options.fields;const s=this.transformsArr.findIndex(r=>r.type===e.type);s>=0&&(n=!1,this.transformsArr[s].options.fields=this._fields)}if(n&&this.transformsArr.push(e),t){const s=this.isLastTransform(e);this.executeTransform(e),s&&this.diffLastData()}}return this.sortTransform(),this.isRunning=!1,this}isLastTransform(e){return this.transformsArr[this.transformsArr.length-1]===e}sortTransform(){this.transformsArr.length>=2&&this.transformsArr.sort((e,t)=>{var n,s;return((n=e.level)!==null&&n!==void 0?n:0)-((s=t.level)!==null&&s!==void 0?s:0)})}executeTransform(e,t={pushHistory:!0,emitMessage:!0}){const{pushHistory:n,emitMessage:s}=t,r=this.dataSet.getTransform(e.type)(this.latestData,e.options);this.history&&n!==!1&&this.historyData.push(r),this.latestData=r,s!==!1&&this.target.emit("change",[])}resetTransformData(){this.latestData=this.parserData,this.history&&(this.historyData.length=0,this.historyData.push(this.rawData,this.parserData))}enableDiff(e){this._diffData=!0,this._diffKeys=e,this._diffMap=new Map,this._diffRank=0}disableDiff(){this._diffData=!1,this._diffMap=null,this._diffRank=null}resetDiff(){this._diffMap=new Map,this._diffRank=0}diffLastData(){var e;if(!this._diffData||!this.latestData.forEach||!(!((e=this._diffKeys)===null||e===void 0)&&e.length))return;const t=this._diffRank+1;if(this._diffRank===0)this.latestData.forEach(n=>{n[pI]=t,this._diffMap.set(this._diffKeys.reduce((s,r)=>s+n[r],""),n)}),this.latestDataAUD={add:Array.from(this.latestData),del:[],update:[]};else{let n;this.latestDataAUD={add:[],del:[],update:[]},this.latestData.forEach(s=>{s[pI]=t,n=this._diffKeys.reduce((r,a)=>r+s[a],""),this._diffMap.get(n)?this.latestDataAUD.update.push(s):this.latestDataAUD.add.push(s),this._diffMap.set(n,s)}),this._diffMap.forEach((s,r)=>{s[pI]<t&&(this.latestDataAUD.del.push(s),this._diffMap.delete(r))})}this._diffRank=t}cloneParseData(e,t){let n=!1;return e instanceof ire||(t==null?void 0:t.clone)!==!0||(n=!0),n?Ta(e):e}parseNewData(e,t){this.parse(e,t||this.parseOption),this.reRunAllTransform()}updateRawData(e,t){const n=this.cloneParseData(e,t);this.rawData=n,this.parserData=n,this.latestData=n,this.reRunAllTransform()}getFields(){var e;return this._fields?this._fields:((e=this.parseOption)===null||e===void 0?void 0:e.type)==="dataview"&&this.rawData.length===1&&this.rawData[0].getFields?this.rawData[0].getFields():null}setFields(e,t=!1){this._fields=e&&t?se({},this._fields,e):e;const n=this.transformsArr.find(s=>s.type==="fields");!B(this._fields)&&B(n)?(this.dataSet.registerTransform("fields",Wse),this.transform({type:"fields",options:{fields:this._fields}},!1)):n&&(n.options.fields=this._fields)}destroy(){this.dataSet.removeDataView(this.name),this._diffMap=null,this._diffRank=null,this.latestData=null,this.rawData=null,this.parserData=null,this.transformsArr=null,this.target=null}};class zn{static GenAutoIncrementId(){return zn.auto_increment_id++}}zn.auto_increment_id=0;class Ge{constructor(e){this.id=zn.GenAutoIncrementId(),this.registry=e}}const RP="named",nre="inject",sre="multi_inject",rre="inversify:tagged",are="inversify:paramtypes";class c5{constructor(e,t){this.key=e,this.value=t}toString(){return this.key===RP?`named: ${String(this.value).toString()} `:`tagged: { key:${this.key.toString()}, value: ${String(this.value)} }`}}const Hm=function(i){var e;return function(t){const n=typeof Symbol=="function",s=n&&Symbol.toPrimitive!==void 0?Symbol.toPrimitive:"@@toPrimitive",r=Object.getPrototypeOf(Function),a=Map,o=new WeakMap;function l(I,D,z,$){if(!w(z))throw new TypeError;return y(I,D,z,$)}function c(I,D,z){if(!w(D))throw new TypeError;return x(z)||(z=O(z)),p(I,D,z)}function u(I,D,z){if(!w(D))throw new TypeError;return x(z)||(z=O(z)),f(I,D,z)}function h(I,D,z){if(!w(D))throw new TypeError;return x(z)||(z=O(z)),g(I,D,z)}function d(I,D,z){let $=o.get(I);if(x($)){if(!z)return;$=new a,o.set(I,$)}let V=$.get(D);if(x(V)){if(!z)return;V=new a,$.set(D,V)}return V}function p(I,D,z){if(f(I,D,z))return!0;const $=j(D);return!S($)&&p(I,$,z)}function f(I,D,z){const $=d(D,z,!1);return!x($)&&E($.has(I))}function g(I,D,z){if(f(I,D,z))return m(I,D,z);const $=j(D);return S($)?void 0:g(I,$,z)}function m(I,D,z){const $=d(D,z,!1);if(!x($))return $.get(I)}function y(I,D,z,$){d(z,$,!0).set(I,D)}function b(I){if(I===null)return 1;switch(typeof I){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return I===null?1:6;default:return 6}}function x(I){return I===void 0}function S(I){return I===null}function C(I){return typeof I=="symbol"}function w(I){return typeof I=="object"?I!==null:typeof I=="function"}function A(I,D){switch(b(I)){case 0:case 1:case 2:case 3:case 4:case 5:return I}const z="string",$=R(I,s);if($!==void 0){const V=$.call(I,z);if(w(V))throw new TypeError;return V}return T(I)}function T(I,D){{const z=I.toString;if(M(z)){const V=z.call(I);if(!w(V))return V}const $=I.valueOf;if(M($)){const V=$.call(I);if(!w(V))return V}}throw new TypeError}function E(I){return!!I}function P(I){return""+I}function O(I){const D=A(I);return C(D)?D:P(D)}function M(I){return typeof I=="function"}function R(I,D){const z=I[D];if(z!=null){if(!M(z))throw new TypeError;return z}}function j(I){const D=Object.getPrototypeOf(I);if(typeof I!="function"||I===r||D!==r)return D;const z=I.prototype,$=z&&Object.getPrototypeOf(z);if($==null||$===Object.prototype)return D;const V=$.constructor;return typeof V!="function"||V===I?D:V}t("defineMetadata",l),t("hasMetadata",c),t("hasOwnMetadata",u),t("getMetadata",h)}((e=i,function(t,n){typeof e[t]!="function"&&Object.defineProperty(e,t,{configurable:!0,writable:!0,value:n})})),i}({});function EYe(i,e,t,n){const s=[n];let r={};Hm.hasOwnMetadata(i,e)&&(r=Hm.getMetadata(i,e));let a=r[t];a===void 0&&(a=[]),a.push(...s),r[t]=a,Hm.defineMetadata(i,r,e)}function PYe(i,e,t,n){EYe(rre,i,t.toString(),n)}function ore(i){return(e,t,n)=>{PYe(e,t,n,i)}}function lre(i){return e=>(t,n,s)=>ore(new c5(i,e))(t,n,s)}const rt=lre(nre),cre=lre(sre);function Oe(){return function(i){return Hm.defineMetadata(are,null,i),i}}function rs(i){return ore(new c5(RP,i))}const yf={Singleton:"Singleton",Transient:"Transient"},Oh={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};class u5{constructor(e,t){this.id=zn.GenAutoIncrementId(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=Oh.Invalid,this.constraint=n=>!0,this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.dynamicValue=null}clone(){const e=new u5(this.serviceIdentifier,this.scope);return e.activated=e.scope===yf.Singleton&&this.activated,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.provider=this.provider,e.constraint=this.constraint,e.cache=this.cache,e}}class OYe{getConstructorMetadata(e){return{compilerGeneratedMetadata:Hm.getMetadata(are,e),userGeneratedMetadata:Hm.getMetadata(rre,e)||{}}}getPropertiesMetadata(e){throw new Error("")}}const MYe=i=>e=>{const t=n=>{if(n==null)return!1;if(n.key===i&&n.value===e)return!0;if(n.constructorArgsMetadata==null)return!1;const s=n.constructorArgsMetadata;for(let r=0;r<s.length;r++)if(s[r].key===i&&s[r].value===e)return!0;return!1};return t.metaData=new c5(i,e),t},IYe=MYe(RP);class eC{constructor(e){this._binding=e}inRequestScope(){throw new Error("")}inSingletonScope(){return this._binding.scope=yf.Singleton,this}inTransientScope(){return this._binding.scope=yf.Transient,this}whenTargetNamed(e){return this._binding.constraint=IYe(e),this}}class RYe{constructor(e){this._binding=e}to(e){return this._binding.type=Oh.Instance,this._binding.implementationType=e,new eC(this._binding)}toSelf(){const e=this._binding.serviceIdentifier;return this.to(e)}toDynamicValue(e){return this._binding.type=Oh.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new eC(this._binding)}toConstantValue(e){return this._binding.type=Oh.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=yf.Singleton,new eC(this._binding)}toFactory(e){return this._binding.type=Oh.Factory,this._binding.factory=e,this._binding.scope=yf.Singleton,new eC(this._binding)}toService(e){this.toDynamicValue(t=>t.container.get(e))}}class LYe{constructor(e){const t=e||{};t.defaultScope=t.defaultScope||yf.Transient,this.options=t,this.id=zn.GenAutoIncrementId(),this._bindingDictionary=new Map,this._metadataReader=new OYe}load(e){const t=this._getContainerModuleHelpersFactory()(e.id);e.registry(t.bindFunction,t.unbindFunction,t.isboundFunction,t.rebindFunction)}get(e){const t=this._getNotAllArgs(e,!1);return this._get(t)}getAll(e){const t=this._getAllArgs(e);return this._get(t)}getTagged(e,t,n){const s=this._getNotAllArgs(e,!1,t,n);return this._get(s)}getNamed(e,t){return this.getTagged(e,RP,t)}isBound(e){return this._bindingDictionary.has(e)}bind(e){const t=this.options.defaultScope,n=new u5(e,t),s=this._bindingDictionary.get(e)||[];return s.push(n),this._bindingDictionary.set(e,s),new RYe(n)}unbind(e){this._bindingDictionary.delete(e)}rebind(e){return this.unbind(e),this.bind(e)}_getContainerModuleHelpersFactory(){const e=(a,o)=>{a._binding.moduleId=o},t=a=>o=>{const l=this.bind(o);return e(l,a),l},n=()=>a=>this.unbind(a),s=()=>a=>this.isBound(a),r=a=>o=>{const l=this.rebind(o);return e(l,a),l};return a=>({bindFunction:t(a),isboundFunction:s(),rebindFunction:r(a),unbindFunction:n(),unbindAsyncFunction:o=>null})}_getNotAllArgs(e,t,n,s){return{avoidConstraints:!1,isMultiInject:t,serviceIdentifier:e,key:n,value:s}}_getAllArgs(e){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:e}}_get(e){const t=[];return this._bindingDictionary.get(e.serviceIdentifier).filter(n=>n.constraint(e)).forEach(n=>{t.push(this._resolveFromBinding(n))}),e.isMultiInject||t.length!==1?t:t[0]}_getChildRequest(e){const t=e.implementationType,{userGeneratedMetadata:n}=this._metadataReader.getConstructorMetadata(t),s=Object.keys(n),r=[];for(let a=0;a<s.length;a++){const o=n[a],l={};o.forEach(p=>{l[p.key]=p.value});const c={inject:l[nre],multiInject:l[sre]},u=c.inject||c.multiInject,h={serviceIdentifier:u,constructorArgsMetadata:o},d={injectIdentifier:u,metadata:o,bindings:this._bindingDictionary.get(u).filter(p=>p.constraint(h))};r.push(d)}return r}_resolveFromBinding(e){const t=this._getResolvedFromBinding(e);return this._saveToScope(e,t),t}_getResolvedFromBinding(e){let t;switch(e.type){case Oh.ConstantValue:case Oh.Function:t=e.cache;break;case Oh.Instance:t=this._resolveInstance(e,e.implementationType);break;default:t=e.dynamicValue({container:this})}return t}_resolveInstance(e,t){if(e.activated)return e.cache;const n=this._getChildRequest(e);return this._createInstance(t,n)}_createInstance(e,t){return t.length?new e(...this._resolveRequests(t)):new e}_resolveRequests(e){return e.map(t=>t.bindings.length>1?t.bindings.map(n=>this._resolveFromBinding(n)):this._resolveFromBinding(t.bindings[0]))}_saveToScope(e,t){e.scope===yf.Singleton&&(e.cache=t,e.activated=!0)}}const $n=Symbol("ContributionProvider");class ure{constructor(e,t){this.serviceIdentifier=e,this.container=t}getContributions(){return this.caches||(this.caches=[],this.container&&this.container.isBound(this.serviceIdentifier)&&this.caches.push(...this.container.getAll(this.serviceIdentifier))),this.caches}}function Es(i,e){i($n).toDynamicValue(({container:t})=>new ure(e,t)).inSingletonScope().whenTargetNamed(e)}function DYe(i,e){i($n).toDynamicValue(({container:t})=>new ure(e,t)).whenTargetNamed(e)}class FYe{constructor(e,t){this._args=e,this.name=t,this.taps=[]}tap(e,t){this._tap("sync",e,t)}unTap(e,t){const n=typeof e=="string"?e.trim():e.name;n&&(this.taps=this.taps.filter(s=>!(s.name===n&&(!t||s.fn===t))))}_parseOptions(e,t,n){let s;if(typeof t=="string")s={name:t.trim()};else if(typeof t!="object"||t===null)throw new Error("Invalid tap options");if(typeof s.name!="string"||s.name==="")throw new Error("Missing name for tap");return s=Object.assign({type:e,fn:n},s),s}_tap(e,t,n){this._insert(this._parseOptions(e,t,n))}_insert(e){let t;typeof e.before=="string"?t=new Set([e.before]):Array.isArray(e.before)&&(t=new Set(e.before));let n=0;typeof e.stage=="number"&&(n=e.stage);let s=this.taps.length;for(;s>0;){s--;const r=this.taps[s];this.taps[s+1]=r;const a=r.stage||0;if(t){if(t.has(r.name)){t.delete(r.name);continue}if(t.size>0)continue}if(!(a>n)){s++;break}}this.taps[s]=e}}class ga extends FYe{call(...e){this.taps.map(t=>t.fn).forEach(t=>t(...e))}}const LP=Symbol.for("EnvContribution"),h5=Symbol.for("VGlobal");var BYe=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},jYe=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},V8=function(i,e){return function(t,n){e(t,n,i)}};let bD=class{get env(){return this._env}get devicePixelRatio(){return this._env||this.setEnv("browser"),this.envContribution.getDevicePixelRatio()}get supportEvent(){return this._env||this.setEnv("browser"),this.envContribution.supportEvent}set supportEvent(i){this._env||this.setEnv("browser"),this.envContribution.supportEvent=i}get supportsTouchEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsTouchEvents}set supportsTouchEvents(i){this._env||this.setEnv("browser"),this.envContribution.supportsTouchEvents=i}get supportsPointerEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsPointerEvents}set supportsPointerEvents(i){this._env||this.setEnv("browser"),this.envContribution.supportsPointerEvents=i}get supportsMouseEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsMouseEvents}set supportsMouseEvents(i){this._env||this.setEnv("browser"),this.envContribution.supportsMouseEvents=i}get applyStyles(){return this._env||this.setEnv("browser"),this.envContribution.applyStyles}set applyStyles(i){this._env||this.setEnv("browser"),this.envContribution.applyStyles=i}constructor(i){this.contributions=i,this.id=zn.GenAutoIncrementId(),this.hooks={onSetEnv:new ga(["lastEnv","env","global"])},this.measureTextMethod="native",this.optimizeVisible=!1}bindContribution(i){const e=[];if(this.contributions.getContributions().forEach(t=>{const n=t.configure(this,i);n&&n.then&&e.push(n)}),e.length)return Promise.all(e)}getDynamicCanvasCount(){return this._env||this.setEnv("browser"),this.envContribution.getDynamicCanvasCount()}getStaticCanvasCount(){return this._env||this.setEnv("browser"),this.envContribution.getStaticCanvasCount()}setEnv(i,e){if(e&&e.force===!0||this._env!==i)return this.deactiveCurrentEnv(),this.activeEnv(i,e)}deactiveCurrentEnv(){this.envContribution&&this.envContribution.release()}activeEnv(i,e){const t=this._env;this._env=i;const n=this.bindContribution(e);if(n&&n.then)return n.then(()=>{this.envParams=e,this.hooks.onSetEnv.call(t,i,this)});this.envParams=e,this.hooks.onSetEnv.call(t,i,this)}setActiveEnvContribution(i){this.envContribution=i}createCanvas(i){return this._env||this.setEnv("browser"),this.envContribution.createCanvas(i)}createOffscreenCanvas(i){return this._env||this.setEnv("browser"),this.envContribution.createOffscreenCanvas(i)}releaseCanvas(i){return this._env||this.setEnv("browser"),this.envContribution.releaseCanvas(i)}addEventListener(i,e,t){return this._env||this.setEnv("browser"),this.envContribution.addEventListener(i,e,t)}removeEventListener(i,e,t){return this._env||this.setEnv("browser"),this.envContribution.removeEventListener(i,e,t)}dispatchEvent(i){return this._env||this.setEnv("browser"),this.envContribution.dispatchEvent(i)}getRequestAnimationFrame(){return this._env||this.setEnv("browser"),this.envContribution.getRequestAnimationFrame()}getCancelAnimationFrame(){return this._env||this.setEnv("browser"),this.envContribution.getCancelAnimationFrame()}getElementById(i){return this._env||this.setEnv("browser"),this.envContribution.getElementById?this.envContribution.getElementById(i):null}getRootElement(){return this._env||this.setEnv("browser"),this.envContribution.getRootElement?this.envContribution.getRootElement():null}getDocument(){return this._env||this.setEnv("browser"),this.envContribution.getDocument?this.envContribution.getDocument():null}mapToCanvasPoint(i,e){return this._env||this.setEnv("browser"),this.envContribution.mapToCanvasPoint?this.envContribution.mapToCanvasPoint(i,e):null}loadImage(i){return this._env||this.setEnv("browser"),this.envContribution.loadImage(i)}loadSvg(i){return this._env||this.setEnv("browser"),this.envContribution.loadSvg(i)}loadJson(i){return this._env||this.setEnv("browser"),this.envContribution.loadJson(i)}loadArrayBuffer(i){return this._env||this.setEnv("browser"),this.envContribution.loadArrayBuffer(i)}loadBlob(i){return this._env||this.setEnv("browser"),this.envContribution.loadBlob(i)}isChrome(){return this._isChrome!=null||(this._env||this.setEnv("browser"),this._isChrome=this._env==="browser"&&navigator.userAgent.indexOf("Chrome")>-1),this._isChrome}isSafari(){return this._isSafari!=null||(this._env||this.setEnv("browser"),this._isSafari=this._env==="browser"&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)),this._isSafari}getNativeAABBBounds(i){return this._env||this.setEnv("browser"),this.envContribution.getNativeAABBBounds(i)}removeDom(i){return this._env||this.setEnv("browser"),this.envContribution.removeDom(i)}createDom(i){return this._env||this.setEnv("browser"),this.envContribution.createDom(i)}updateDom(i,e){return this._env||this.setEnv("browser"),this.envContribution.updateDom(i,e)}getElementTop(i,e=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementTop(i,e)}getElementLeft(i,e=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementLeft(i,e)}getElementTopLeft(i,e=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementTopLeft(i,e)}};bD=BYe([Oe(),V8(0,rt($n)),V8(0,rs(LP)),jYe("design:paramtypes",[Object])],bD);const NYe=Ts-1e-8;class d5{constructor(e){this.init(e)}init(e){this.bounds=e}arc(e,t,n,s,r,a){if(Math.abs(r-s)>NYe)return this.bounds.add(e-n,t-n),void this.bounds.add(e+n,t+n);let o,l,c,u,h=1/0,d=-1/0,p=1/0,f=-1/0;function g(m){c=n*Math.cos(m),u=n*Math.sin(m),c<h&&(h=c),c>d&&(d=c),u<p&&(p=u),u>f&&(f=u)}if(g(s),g(r),r!==s)if((s%=Ts)<0&&(s+=Ts),(r%=Ts)<0&&(r+=Ts),r<s&&(a=!a,o=s,s=r,r=o),a)for(r-=Ts,o=s-s%co,l=0;l<4&&o>r;++l,o-=co)g(o);else for(o=s-s%co+co,l=0;l<4&&o<r;++l,o+=co)g(o);this.bounds.add(e+h,t+p),this.bounds.add(e+d,t+f)}arcTo(e,t,n,s,r){this.bounds.add(e,t)}bezierCurveTo(e,t,n,s,r,a){this.bounds.add(e,t),this.bounds.add(n,s),this.bounds.add(r,a)}closePath(){}ellipse(){throw new Error("ellipse")}lineTo(e,t){this.bounds.add(e,t)}moveTo(e,t){this.bounds.add(e,t)}quadraticCurveTo(e,t,n,s){this.bounds.add(e,t),this.bounds.add(n,s)}rect(e,t,n,s){this.bounds.add(e,t),this.bounds.add(e+n,t+s)}clear(){this.bounds.clear()}release(...e){}}class $Ye{constructor(){this.curves=[],this.bounds=new Qi}getCurveLengths(){return this.curves.map(e=>e.getLength())}getPointAt(e){return{x:0,y:0}}getLength(){return 0}getBounds(){return this.bounds}}const zYe=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,HYe={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7},qt={A:0,AT:1,C:2,Z:3,E:4,L:5,M:6,Q:7,R:8};let fI,U8,tC,W8,gI,iC;function VYe(i){if(!i)return[];const e=i.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);if(e===null)return[];let t,n;const s=[];for(let r=0,a=e.length;r<a;r++)if(fI=e[r],U8=fI.slice(1),tC=fI[0],t=[tC],n=U8.match(zYe),n!==null){for(let o=0,l=n.length;o<l;o++)W8=n[o],gI=parseFloat(W8),Number.isNaN(gI)||t.push(gI);if(iC=HYe[tC],t.length-1>iC){let o,l=tC;for(let c=1,u=t.length;c<u;c+=iC){o=[l];for(let h=c,d=c+iC;h<d;h++)o.push(t[h]);s.push(o),l==="m"?l="l":l==="M"&&(l="L")}}else s.push(t)}else s.push(t);return s}var ci;(function(i){i[i.NONE=0]="NONE",i[i.UPDATE_BOUNDS=1]="UPDATE_BOUNDS",i[i.UPDATE_SHAPE=2]="UPDATE_SHAPE",i[i.CLEAR_SHAPE=253]="CLEAR_SHAPE",i[i.UPDATE_SHAPE_AND_BOUNDS=3]="UPDATE_SHAPE_AND_BOUNDS",i[i.INIT=179]="INIT",i[i.CLEAR_BOUNDS=254]="CLEAR_BOUNDS",i[i.UPDATE_GLOBAL_MATRIX=32]="UPDATE_GLOBAL_MATRIX",i[i.CLEAR_GLOBAL_MATRIX=223]="CLEAR_GLOBAL_MATRIX",i[i.UPDATE_LOCAL_MATRIX=16]="UPDATE_LOCAL_MATRIX",i[i.CLEAR_LOCAL_MATRIX=239]="CLEAR_LOCAL_MATRIX",i[i.UPDATE_GLOBAL_LOCAL_MATRIX=48]="UPDATE_GLOBAL_LOCAL_MATRIX",i[i.UPDATE_LAYOUT=128]="UPDATE_LAYOUT",i[i.CLEAR_LAYOUT=127]="CLEAR_LAYOUT"})(ci||(ci={}));var by;(function(i){i[i.GLOBAL=1]="GLOBAL",i[i.LOCAL=16]="LOCAL",i[i.GLOBAL_ACCURATE=3]="GLOBAL_ACCURATE",i[i.LOCAL_ACCURATE=48]="LOCAL_ACCURATE"})(by||(by={}));var pn;(function(i){i[i.INIT=0]="INIT",i[i.DEFAULT=1]="DEFAULT",i[i.STATE=2]="STATE",i[i.ANIMATE_BIND=10]="ANIMATE_BIND",i[i.ANIMATE_PLAY=11]="ANIMATE_PLAY",i[i.ANIMATE_START=12]="ANIMATE_START",i[i.ANIMATE_UPDATE=13]="ANIMATE_UPDATE",i[i.ANIMATE_END=14]="ANIMATE_END",i[i.TRANSLATE=20]="TRANSLATE",i[i.TRANSLATE_TO=21]="TRANSLATE_TO",i[i.SCALE=22]="SCALE",i[i.SCALE_TO=23]="SCALE_TO",i[i.ROTATE=24]="ROTATE",i[i.ROTATE_TO=25]="ROTATE_TO"})(pn||(pn={}));var Hs;(function(i){i[i.INITIAL=0]="INITIAL",i[i.RUNNING=1]="RUNNING",i[i.PAUSED=2]="PAUSED",i[i.END=3]="END"})(Hs||(Hs={}));var xy;(function(i){i[i.NORMAL=0]="NORMAL",i[i.SET_ATTR_IMMEDIATELY=1]="SET_ATTR_IMMEDIATELY"})(xy||(xy={}));var hm;(function(i){i.wait="wait",i.from="from",i.to="to",i.customAnimate="customAnimate"})(hm||(hm={}));var yi;(function(i){i[i.ROW=1]="ROW",i[i.COLUMN=2]="COLUMN"})(yi||(yi={}));var NA;(function(i){i[i.CubicBezierCurve=0]="CubicBezierCurve",i[i.QuadraticBezierCurve=1]="QuadraticBezierCurve",i[i.ArcCurve=2]="ArcCurve",i[i.LineCurve=3]="LineCurve",i[i.EllipseCurve=4]="EllipseCurve",i[i.MoveCurve=5]="MoveCurve"})(NA||(NA={}));var qn;(function(i){i[i.beforeFillStroke=0]="beforeFillStroke",i[i.afterFillStroke=1]="afterFillStroke"})(qn||(qn={}));function UYe(i,e,t,n,s,r,a,o,l){const c=zt(a),u=Math.sin(c),h=Math.cos(c),d=h*(o-i)*.5+u*(l-e)*.5,p=h*(l-e)*.5-u*(o-i)*.5;let f=d*d/((t=Math.abs(t))*t)+p*p/((n=Math.abs(n))*n);f>1&&(f=Math.sqrt(f),t*=f,n*=f);const g=h/t,m=u/t,y=-u/n,b=h/n,x=g*o+m*l,S=y*o+b*l,C=g*i+m*e,w=y*i+b*e;let A=1/((C-x)*(C-x)+(w-S)*(w-S))-.25;A<0&&(A=0);let T=Math.sqrt(A);r===s&&(T=-T);const E=.5*(x+C)-T*(w-S),P=.5*(S+w)+T*(C-x),O=Math.atan2(S-P,x-E);let M=Math.atan2(w-P,C-E)-O;M<0&&r===1?M+=Ts:M>0&&r===0&&(M-=Ts);const R=Math.ceil(Math.abs(M/(co+.001))),j=[];for(let I=0;I<R;++I){const D=O+I*M/R,z=O+(I+1)*M/R;j[I]=[E,P,D,z,t,n,u,h]}return j}function WYe(i){const e=i[0],t=i[1],n=i[2],s=i[3],r=i[4],a=i[5],o=i[6],l=i[7],c=l*r,u=-o*a,h=o*r,d=l*a,p=Math.cos(n),f=Math.sin(n),g=Math.cos(s),m=Math.sin(s),y=.5*(s-n),b=Math.sin(.5*y),x=8/3*b*b/Math.sin(y),S=e+p-x*f,C=t+f+x*p,w=e+g,A=t+m,T=w+x*m,E=A-x*g;return[c*S+u*C,h*S+d*C,c*T+u*E,h*T+d*E,c*w+u*A,h*w+d*A]}function G8(i,e,t,n){const s=UYe(n[5],n[6],n[0],n[1],n[3],n[4],n[2],e,t);for(let r=0;r<s.length;++r){const a=WYe(s[r]);i.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}const GYe=(i,e,t,n,s,r,a)=>{const o=Math.abs(t-e),l=o>.5*Math.PI?Math.ceil(2*o/Math.PI):1,c=(t-e)/l;for(let u=0;u<l;u++){const h=e+c*u,d=e+c*(u+1),p=4*Math.tan(Math.abs(c)/4)/3,f=d<h?-1:1,g=Math.cos(h),m=Math.sin(h),y=Math.cos(d),b=Math.sin(d),x=g*r+n,S=m*a+s,C=y*r+n,w=b*a+s,A=r*p*f,T=a*p*f;i.push(x-A*m,S+T*g,C+A*b,w-T*y,C,w)}},KYe=[(i,e,t,n,s,r,a)=>e.arc(i[1]*s+t,i[2]*r+n,i[3]*(s+r)/2,i[4],i[5],i[6],a),(i,e,t,n,s,r,a)=>e.arcTo(i[1]*s+t,i[2]*r+n,i[3]*s+t,i[4]*r+n,i[5]*(s+r)/2,a),(i,e,t,n,s,r,a)=>e.bezierCurveTo(i[1]*s+t,i[2]*r+n,i[3]*s+t,i[4]*r+n,i[5]*s+t,i[6]*r+n,a),(i,e,t,n)=>e.closePath(),(i,e,t,n,s,r)=>e.ellipse(i[1]*s+t,i[2]*r+n,i[3]*s,i[4]*r,i[5],i[6],i[7],i[8]),(i,e,t,n,s,r,a)=>e.lineTo(i[1]*s+t,i[2]*r+n,a),(i,e,t,n,s,r,a)=>e.moveTo(i[1]*s+t,i[2]*r+n,a),(i,e,t,n,s,r,a)=>e.quadraticCurveTo(i[1]*s+t,i[2]*r+n,i[3]*s+t,i[4]*r+n,a),(i,e,t,n,s,r,a)=>e.rect(i[1]*s+t,i[2]*r+n,i[3]*s,i[4]*r,a)];function Ed(i,e,t=0,n=0,s=1,r=1,a){for(let o=0;o<i.length;o++){const l=i[o];KYe[l[0]](l,e,t,n,s,r,a)}}class hre{getLength(e){return e!=null?this.calcProjLength(e):(Number.isFinite(this.length)||(this.length=this.calcLength()),this.length)}}function XYe(i,e){let t=0;const n=i.length;for(let s=0;s<n;s++){const r=i[s],a=e[s],o=i[(s+1)%n],l=e[(s+1)%n];t+=kn.distanceNN(r,a,o,l)}return t/2}function YYe(i,e,t,n,s){return XYe([i.x,e.x,t.x,n.x],[i.y,e.y,t.y,n.y])}function K8(i,e,t,n,s){const r=1-s;return r*r*r*i+3*e*s*r*r+3*t*s*s*r+n*s*s*s}function dre(i,e,t,n,s){const r=K8(i.x,e.x,t.x,n.x,s),a=K8(i.y,e.y,t.y,n.y,s);return new sn(r,a)}function xD(i,e){const{p0:t,p1:n,p2:s,p3:r}=i,a=dre(t,n,s,r,e),o=kn.pointAtPP(t,n,e),l=kn.pointAtPP(n,s,e),c=kn.pointAtPP(s,r,e),u=kn.pointAtPP(o,l,e),h=kn.pointAtPP(l,c,e);return[new SD(t,o,u,a),new SD(a,h,c,r)]}class SD extends hre{constructor(e,t,n,s){super(),this.type=NA.CubicBezierCurve,this.p0=e,this.p1=t,this.p2=n,this.p3=s}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y+this.p2.x+this.p2.y+this.p3.x+this.p3.y)}getPointAt(e){if(this.defined!==!1)return dre(this.p0,this.p1,this.p2,this.p3,e);throw new Error("definedfalsegetPointAt")}calcLength(){return this._validPoint()?YYe(this.p0,this.p1,this.p2,this.p3):60}calcProjLength(e){return e===yi.ROW?At(this.p0.x-this.p3.x):e===yi.COLUMN?At(this.p0.y-this.p3.y):0}getAngleAt(e){const t=br(e-.01,0),n=fs(e+.01,1),s=this.getPointAt(t),r=this.getPointAt(n);return Jt(r.y-s.y,r.x-s.x)}}function X8(i,e){const{p0:t,p1:n}=i,s=kn.pointAtPP(t,n,e);return[new CD(t,s),new CD(s,n)]}class CD extends hre{constructor(e,t){super(),this.type=NA.LineCurve,this.p0=e,this.p1=t}getPointAt(e){if(this.defined!==!1)return kn.pointAtPP(this.p0,this.p1,e);throw new Error("definedfalsegetPointAt")}getAngleAt(e){return this.angle==null&&(this.angle=Jt(this.p1.y-this.p0.y,this.p1.x-this.p0.x)),this.angle}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y)}calcLength(){return this._validPoint()?kn.distancePP(this.p0,this.p1):60}calcProjLength(e){return e===yi.ROW?At(this.p0.x-this.p1.x):e===yi.COLUMN?At(this.p0.y-this.p1.y):0}}class p5{get endX(){return this._lastX}get endY(){return this._lastY}constructor(e,t){this.init(e,t)}init(e,t){this._lastX=this._lastY=this._startX=this._startY=0,this.curveType=e,this.direction=t,this.curves=[]}bezierCurveTo(e,t,n,s,r,a,o,l){const c=new SD(new sn(this._lastX,this._lastY),new sn(e,t),new sn(n,s),new sn(r,a));c.originP1=this._lastOriginP,c.originP2=l,c.defined=o,this.curves.push(c),this._lastX=r,this._lastY=a,this._lastOriginP=l}closePath(){if(this.curves.length<2)return;const e=this.curves[this.curves.length-1];this.lineTo(this._startX,this._startY,e.defined,this._startOriginP)}ellipse(){throw new Error("SegContextellipse")}lineTo(e,t,n,s){const r=this.addLinearCurve(e,t,n,this._lastOriginP,s);this.curves.push(r),this._lastX=e,this._lastY=t,this._lastOriginP=s}moveTo(e,t,n){return this._lastX=this._startX=e,this._lastY=this._startY=t,this._lastOriginP=n,this._startOriginP=n,this}quadraticCurveTo(e,t,n,s){throw new Error("SegContextquadraticCurveTo")}clear(){this.curves=[],this.length=NaN}tryUpdateLength(e){return this.getLength(e)}addLinearCurve(e,t,n,s,r){const a=new CD(new sn(this._lastX,this._lastY),new sn(e,t));return a.originP1=s,a.originP2=r,a.defined=n,a}getPointAt(e){throw new Error("")}getCurveLengths(){return[]}getLength(e){var t,n;if(e===yi.COLUMN){if(!this.curves.length)return 0;const s=this.curves[0],r=this.curves[this.curves.length-1],a=(t=r.p3)!==null&&t!==void 0?t:r.p1;return At(s.p0.y-a.y)}if(e===yi.ROW){if(!this.curves.length)return 0;const s=this.curves[0],r=this.curves[this.curves.length-1],a=(n=r.p3)!==null&&n!==void 0?n:r.p1;return At(s.p0.x-a.x)}return Number.isFinite(this.length)||(this.length=this.curves.reduce((s,r)=>s+r.getLength(),0)),this.length}}class qYe extends p5{bezierCurveTo(e,t,n,s,r,a,o,l){return super.bezierCurveTo(t,e,s,n,a,r,o,l)}lineTo(e,t,n,s){return super.lineTo(t,e,n,s)}moveTo(e,t,n){return super.moveTo(t,e,n)}clear(){return super.clear()}}function qf(i,e,t=1){let n=!1;for(let s=0,r=e.length;s<=r;s++)s>=r===n&&((n=!n)?i.lineStart():i.lineEnd()),n&&i.point(e[s])}function k0(i,e,t){const n=e??(At(t[t.length-1].x-t[0].x)>At(t[t.length-1].y-t[0].y)?yi.ROW:yi.COLUMN);return i==="monotoneY"?new qYe(i,n):new p5(i,n)}class pre{constructor(e,t){this.context=e,t&&(this.startPoint=t)}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this.context.closePath(),this._line=1-this._line}point(e){const t=e.x,n=e.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(t,n,this._lastDefined!==!1&&e.defined!==!1,e):this.context.moveTo(t,n,e);break;case 1:this._point=2;default:this.context.lineTo(t,n,this._lastDefined!==!1&&e.defined!==!1,e)}this._lastDefined=e.defined}tryUpdateLength(){return this.context.tryUpdateLength()}}function Tx(i,e={}){const{direction:t,startPoint:n}=e;if(i.length<2-+!!n)return null;const s=k0("linear",t,i);return ZYe(new pre(s,n),i),s}function ZYe(i,e){return qf(i,e,1)}function Y8(i,e,t,n,s){i.context.bezierCurveTo((2*i._x0+i._x1)/3,(2*i._y0+i._y1)/3,(i._x0+2*i._x1)/3,(i._y0+2*i._y1)/3,(i._x0+4*i._x1+e)/6,(i._y0+4*i._y1+t)/6,n,i.lastPoint1)}class JYe{constructor(e,t){this.context=e,this.startPoint=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){this._point===2&&Y8(this,6*this._x1-(this._x0+4*this._x1),6*this._y1-(this._y0+4*this._y1),this._lastDefined1!==!1&&this._lastDefined2!==!1,this.lastPoint1),(this._line||this._line!==0&&this._point===1)&&this.context.closePath(),this._line=1-this._line}point(e){const t=e.x,n=e.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(t,n,this._lastDefined1!==!1&&this._lastDefined2!==!1,e):this.context.moveTo(t,n,e);break;case 1:this._point=2;break;default:Y8(this,t,n,this._lastDefined1!==!1&&this._lastDefined2!==!1)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._lastDefined1=this._lastDefined2,this._lastDefined2=e.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=e}tryUpdateLength(){return this.context.tryUpdateLength()}}function QYe(i,e){return qf(i,e,2)}function eqe(i,e={}){const{direction:t,startPoint:n}=e;if(i.length<2-+!!n)return null;if(i.length<3-+!!n)return Tx(i,e);const s=k0("basis",t,i);return QYe(new JYe(s,n),i),s}function q8(i){return i<0?-1:1}function Z8(i,e,t){const n=i._x1-i._x0,s=e-i._x1,r=(i._y1-i._y0)/(n||Number(s<0&&-0)),a=(t-i._y1)/(s||Number(n<0&&-0)),o=(r*s+a*n)/(n+s);return(q8(r)+q8(a))*Math.min(Math.abs(r),Math.abs(a),.5*Math.abs(o))||0}function J8(i,e){const t=i._x1-i._x0;return t?(3*(i._y1-i._y0)/t-e)/2:e}function mI(i,e,t,n,s){const r=i._x0,a=i._y0,o=i._x1,l=i._y1,c=(o-r)/3;i.context.bezierCurveTo(r+c,a+c*e,o-c,l-c*t,o,l,n,i.lastPoint1)}class fre{constructor(e,t){this.context=e,this.startPoint=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){switch(this._point){case 2:this.context.lineTo(this._x1,this._y1,this._lastDefined1!==!1&&this._lastDefined2!==!1,this.lastPoint1);break;case 3:mI(this,this._t0,J8(this,this._t0),this._lastDefined1!==!1&&this._lastDefined2!==!1,this.lastPoint1)}(this._line||this._line!==0&&this._point===1)&&this.context.closePath(),this._line=1-this._line}point(e){let t=NaN;const n=e.x,s=e.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(n,s,this._lastDefined1!==!1&&this._lastDefined2!==!1,e):this.context.moveTo(n,s,e);break;case 1:this._point=2;break;case 2:this._point=3,mI(this,J8(this,t=Z8(this,n,s)),t,this._lastDefined1!==!1&&this._lastDefined2!==!1);break;default:mI(this,this._t0,t=Z8(this,n,s),this._lastDefined1!==!1&&this._lastDefined2!==!1)}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=s,this._t0=t,this._lastDefined1=this._lastDefined2,this._lastDefined2=e.defined!==!1,this.lastPoint0=this.lastPoint1,this.lastPoint1=e}tryUpdateLength(){return this.context.tryUpdateLength()}}class tqe extends fre{constructor(e,t){super(e,t)}point(e){return super.point({y:e.x,x:e.y,defined:e.defined})}}function iqe(i,e){return qf(i,e,2)}function nqe(i,e={}){const{direction:t,startPoint:n}=e;if(i.length<2-+!!n)return null;if(i.length<3-+!!n)return Tx(i,e);const s=k0("monotoneX",t,i);return iqe(new fre(s,n),i),s}function sqe(i,e){return qf(i,e,2)}function rqe(i,e={}){const{direction:t,startPoint:n}=e;if(i.length<2-+!!n)return null;if(i.length<3-+!!n)return Tx(i,e);const s=k0("monotoneY",t,i);return sqe(new tqe(s,n),i),s}let aqe=class{constructor(e,t=.5,n){this.context=e,this._t=t,this.startPoint=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x=this._y=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){0<this._t&&this._t<1&&this._point===2&&this.context.lineTo(this._x,this._y,this._lastDefined!==!1,this.lastPoint),(this._line||this._line!==0&&this._point===1)&&this.context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)}point(e){const t=e.x,n=e.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(t,n,this._lastDefined!==!1&&e.defined!==!1,e):this.context.moveTo(t,n,e);break;case 1:this._point=2;default:if(this._t<=0)this.context.lineTo(this._x,n,this._lastDefined!==!1&&e.defined!==!1,this.lastPoint),this.context.lineTo(t,n,this._lastDefined!==!1&&e.defined!==!1,e);else{const s=this._x*(1-this._t)+t*this._t;this.context.lineTo(s,this._y,this._lastDefined!==!1&&e.defined!==!1,this.lastPoint),this.context.lineTo(s,n,this._lastDefined!==!1&&e.defined!==!1,e)}}this._lastDefined=e.defined,this._x=t,this._y=n,this.lastPoint=e}tryUpdateLength(){return this.context.tryUpdateLength()}};function yI(i,e,t={}){const{direction:n,startPoint:s}=t;if(i.length<2-+!!s)return null;const r=new p5("step",n??(At(i[i.length-1].x-i[0].x)>At(i[i.length-1].y-i[0].y)?yi.ROW:yi.COLUMN));return oqe(new aqe(r,e,s),i),r}function oqe(i,e){return qf(i,e,1)}class lqe extends pre{lineEnd(){this.context.closePath()}}function cqe(i,e={}){const{direction:t,startPoint:n}=e;if(i.length<2-+!!n)return null;const s=k0("linear",t,i);return uqe(new lqe(s,n),i),s}function uqe(i,e){return qf(i,e,1)}function gre(i,e,t,n,s){let r=i._x1,a=i._y1,o=i._x2,l=i._y2;if(i._l01_a>Dt){const c=2*i._l01_2a+3*i._l01_a*i._l12_a+i._l12_2a,u=3*i._l01_a*(i._l01_a+i._l12_a);r=(r*c-i._x0*i._l12_2a+i._x2*i._l01_2a)/u,a=(a*c-i._y0*i._l12_2a+i._y2*i._l01_2a)/u}if(i._l23_a>Dt){const c=2*i._l23_2a+3*i._l23_a*i._l12_a+i._l12_2a,u=3*i._l23_a*(i._l23_a+i._l12_a);o=(o*c+i._x1*i._l23_2a-e*i._l12_2a)/u,l=(l*c+i._y1*i._l23_2a-t*i._l12_2a)/u}i.context.bezierCurveTo(r,a,o,l,i._x2,i._y2,n,i.lastPoint1)}class hqe{constructor(e,t=.5,n){this.context=e,this.startPoint=n,this._alpha=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}lineEnd(){switch(this._point){case 2:this.context.lineTo(this._x2,this._y2,this._lastDefined1!==!1&&this._lastDefined2!==!1,this.lastPoint1);break;case 3:this.point({x:this._x2,y:this._y2})}(this._line||this._line!==0&&this._point===1)&&this.context.closePath(),this._line=1-this._line}point(e){const{x:t,y:n}=e;if(this._point){const s=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(s*s+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(t,n,this._lastDefined1!==!1&&this._lastDefined2!==!1):this.context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:gre(this,t,n,this._lastDefined1!==!1&&this._lastDefined2!==!1)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n,this._lastDefined1=this._lastDefined2,this._lastDefined2=e.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=e}tryUpdateLength(){return this.context.tryUpdateLength()}}function mre(i,e){return function(t,n,s={}){const{direction:r,startPoint:a}=s;if(t.length<2-+!!a)return null;if(t.length<3-+!!a)return Tx(t,s);const o=k0(i,r,t),l=new e(o,n,a);return qf(l,t,2),o}}const dqe=mre("catmullRom",hqe);class pqe{constructor(e,t=.5,n){this.context=e,this.startPoint=n,this._alpha=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}lineEnd(){switch(this._point){case 1:this.context.moveTo(this._x3,this._y3,this.lastPoint1),this.context.closePath();break;case 2:this.context.lineTo(this._x3,this._y3,this._lastDefined1!==!1&&this._lastDefined2!==!1,this.lastPoint1),this.context.closePath();break;case 3:this.point({x:this._x3,y:this._y3}),this.point({x:this._x4,y:this._y4}),this.point({x:this._x5,y:this._y5})}}point(e){const{x:t,y:n}=e;if(this._point){const s=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(s*s+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this.context.moveTo(this._x4=t,this._y4=n,e);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:gre(this,t,n,this._lastDefined1!==!1&&this._lastDefined2!==!1)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n,this._lastDefined1=this._lastDefined2,this._lastDefined2=e.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=e}tryUpdateLength(){return this.context.tryUpdateLength()}}const fqe=mre("catmullRomClosed",pqe);function Pp(i,e,t){var n,s;switch(e){case"linear":default:return Tx(i,t);case"basis":return eqe(i,t);case"monotoneX":return nqe(i,t);case"monotoneY":return rqe(i,t);case"step":return yI(i,.5,t);case"stepBefore":return yI(i,0,t);case"stepAfter":return yI(i,1,t);case"catmullRom":return dqe(i,(n=t==null?void 0:t.curveTension)!==null&&n!==void 0?n:.5,t);case"catmullRomClosed":return fqe(i,(s=t==null?void 0:t.curveTension)!==null&&s!==void 0?s:.5,t);case"linearClosed":return cqe(i,t)}}class Bn extends $Ye{constructor(e){super(),this.commandList=[],e&&(this._ctx=e),this._boundsContext=new d5(this.bounds)}setCtx(e){this._ctx=e}moveTo(e,t){return this.commandList.push([qt.M,e,t]),this._ctx&&this._ctx.moveTo(e,t),this}lineTo(e,t){return this.commandList.push([qt.L,e,t]),this._ctx&&this._ctx.lineTo(e,t),this}quadraticCurveTo(e,t,n,s){return this.commandList.push([qt.Q,e,t,n,s]),this._ctx&&this._ctx.quadraticCurveTo(e,t,n,s),this}bezierCurveTo(e,t,n,s,r,a){return this.commandList.push([qt.C,e,t,n,s,r,a]),this._ctx&&this._ctx.bezierCurveTo(e,t,n,s,r,a),this}arcTo(e,t,n,s,r){return this.commandList.push([qt.AT,e,t,n,s,r]),this._ctx&&this._ctx.arcTo(e,t,n,s,r),this}ellipse(e,t,n,s,r,a,o,l){return this.commandList.push([qt.E,e,t,n,s,r,a,o,l]),this._ctx&&this._ctx.ellipse(e,t,n,s,r,a,o,l),this}rect(e,t,n,s){return this.commandList.push([qt.R,e,t,n,s]),this._ctx&&this._ctx.rect(e,t,n,s),this}arc(e,t,n,s,r,a){return this.commandList.push([qt.A,e,t,n,s,r,a]),this._ctx&&this._ctx.arc(e,t,n,s,r,a),this}closePath(){return this.commandList.push([qt.Z]),this._ctx&&this._ctx.closePath(),this}addCurve(e){this.curves.push(e)}clear(){this.transformCbList=null,this.commandList.length=0,this.curves.length=0}beginPath(){this.clear()}toString(){if(!this.toStringCbList){const n=[];n[qt.M]=s=>`M${s[1]} ${s[2]}`,n[qt.L]=s=>`L${s[1]} ${s[2]}`,n[qt.Q]=s=>`Q${s[1]} ${s[2]} ${s[3]} ${s[4]}`,n[qt.C]=s=>`C${s[1]} ${s[2]} ${s[3]} ${s[4]} ${s[5]} ${s[6]}`,n[qt.A]=s=>{const r=[];GYe(r,s[4],s[5],s[1],s[2],s[3],s[3]);let a="";for(let o=0;o<r.length;o+=6)a+=`C${r[o]} ${r[o+1]} ${r[o+2]} ${r[o+3]} ${r[o+4]} ${r[o+5]}`;return a},n[qt.R]=s=>`M${s[1]} ${s[2]} h${s[3]} v${s[4]} H${s[1]}Z`,n[qt.Z]=s=>"Z",this.toStringCbList=n}const e=this.toStringCbList;let t="";return this.commandList.forEach(n=>{t+=e[n[0]](n)}),t}fromString(e,t,n,s,r){this.clear();const a=VYe(e);return this._runCommandStrList(a,t,n,s,r),this._updateBounds(),this}fromLine(e){const{points:t,curveType:n,clipRangeByDimension:s}=e.attribute;if(!t)return;const r=Pp(t,n);s==="x"?this.direction=yi.ROW:s==="y"?this.direction=yi.COLUMN:s==="auto"&&(this.direction=r.direction),this.curves=r.curves}fromCustomPath2D(e,t,n,s,r){return this.clear(),this._runCommandList(e.commandList,t,n,s,r),this._updateBounds(),this}transform(e,t,n,s){const r=this.commandList;if(!this.transformCbList){const a=[];a[qt.M]=this.moveToTransform,a[qt.L]=this.lineToTransform,a[qt.Q]=this.quadraticCurveToTransform,a[qt.C]=this.bezierCurveToTransform,a[qt.AT]=this.arcToTransform,a[qt.E]=this.ellipseTransform,a[qt.R]=this.rectTransform,a[qt.A]=this.arcTransform,a[qt.Z]=this.closePathTransform,this.transformCbList=a}r.forEach(a=>{this.transformCbList[a[0]](a,e,t,n,s)}),this._updateBounds()}moveToTransform(e,t,n,s,r){e[1]=e[1]*s+t,e[2]=e[2]*r+n}lineToTransform(e,t,n,s,r){e[1]=e[1]*s+t,e[2]=e[2]*r+n}quadraticCurveToTransform(e,t,n,s,r){e[1]=e[1]*s+t,e[2]=e[2]*r+n,e[3]=e[3]*s+t,e[4]=e[4]*r+n}bezierCurveToTransform(e,t,n,s,r){e[1]=e[1]*s+t,e[2]=e[2]*r+n,e[3]=e[3]*s+t,e[4]=e[4]*r+n,e[5]=e[5]*s+t,e[6]=e[6]*r+n}arcToTransform(e,t,n,s,r){e[1]=e[1]*s+t,e[2]=e[2]*r+n,e[3]=e[3]*s+t,e[4]=e[4]*r+n,e[5]=e[5]*(s+r)/2}ellipseTransform(e,t,n,s,r){e[1]=e[1]*s+t,e[2]=e[2]*r+n,e[3]=e[3]*s,e[4]=e[4]*r}rectTransform(e,t,n,s,r){e[1]=e[1]*s+t,e[2]=e[2]*r+n,e[3]=e[3]*s,e[4]=e[4]*r}arcTransform(e,t,n,s,r){e[1]=e[1]*s+t,e[2]=e[2]*r+n,e[3]=e[3]*(s+r)/2}closePathTransform(){}_runCommandStrList(e,t=0,n=0,s=1,r=1){let a,o,l,c,u,h=null,d=0,p=0,f=0,g=0;for(let m=0,y=e.length;m<y;++m){switch(a=e[m],s===1&&r===1||(a=gqe(a,s,r)),a[0]){case"l":d+=a[1],p+=a[2],this.lineTo(d+t,p+n);break;case"L":d=a[1],p=a[2],this.lineTo(d+t,p+n);break;case"h":d+=a[1],this.lineTo(d+t,p+n);break;case"H":d=a[1],this.lineTo(d+t,p+n);break;case"v":p+=a[1],this.lineTo(d+t,p+n);break;case"V":p=a[1],this.lineTo(d+t,p+n);break;case"m":d+=a[1],p+=a[2],this.moveTo(d+t,p+n);break;case"M":d=a[1],p=a[2],this.moveTo(d+t,p+n);break;case"c":o=d+a[5],l=p+a[6],f=d+a[3],g=p+a[4],this.bezierCurveTo(d+a[1]+t,p+a[2]+n,f+t,g+n,o+t,l+n),d=o,p=l;break;case"C":d=a[5],p=a[6],f=a[3],g=a[4],this.bezierCurveTo(a[1]+t,a[2]+n,f+t,g+n,d+t,p+n);break;case"s":o=d+a[3],l=p+a[4],f=2*d-f,g=2*p-g,this.bezierCurveTo(f+t,g+n,d+a[1]+t,p+a[2]+n,o+t,l+n),f=d+a[1],g=p+a[2],d=o,p=l;break;case"S":o=a[3],l=a[4],f=2*d-f,g=2*p-g,this.bezierCurveTo(f+t,g+n,a[1]+t,a[2]+n,o+t,l+n),d=o,p=l,f=a[1],g=a[2];break;case"q":o=d+a[3],l=p+a[4],f=d+a[1],g=p+a[2],this.quadraticCurveTo(f+t,g+n,o+t,l+n),d=o,p=l;break;case"Q":o=a[3],l=a[4],this.quadraticCurveTo(a[1]+t,a[2]+n,o+t,l+n),d=o,p=l,f=a[1],g=a[2];break;case"t":o=d+a[1],l=p+a[2],h[0].match(/[QqTt]/)===null?(f=d,g=p):h[0]==="t"?(f=2*d-c,g=2*p-u):h[0]==="q"&&(f=2*d-f,g=2*p-g),c=f,u=g,this.quadraticCurveTo(f+t,g+n,o+t,l+n),d=o,p=l,f=d+a[1],g=p+a[2];break;case"T":o=a[1],l=a[2],f=2*d-f,g=2*p-g,this.quadraticCurveTo(f+t,g+n,o+t,l+n),d=o,p=l;break;case"a":G8(this,d+t,p+n,[a[1],a[2],a[3],a[4],a[5],a[6]+d+t,a[7]+p+n]),d+=a[6],p+=a[7];break;case"A":G8(this,d+t,p+n,[a[1],a[2],a[3],a[4],a[5],a[6]+t,a[7]+n]),d=a[6],p=a[7];break;case"z":case"Z":this.closePath()}h=a}}_runCommandList(e,t=0,n=0,s=1,r=1){if(t!==0||n!==0||s!==1||r!==1)for(let a=0,o=e.length;a<o;++a){const l=e[a].slice();switch(l[0]){case qt.L:this.lineToTransform(l,t,n,s,r);break;case qt.M:this.moveToTransform(l,t,n,s,r);break;case qt.C:this.bezierCurveToTransform(l,t,n,s,r);break;case qt.Q:this.quadraticCurveToTransform(l,t,n,s,r);break;case qt.A:this.arcToTransform(l,t,n,s,r);break;case qt.E:this.ellipseTransform(l,t,n,s,r);break;case qt.R:this.rectTransform(l,t,n,s,r);break;case qt.AT:this.arcToTransform(l,t,n,s,r);break;case qt.Z:this.closePath()}}else this.commandList=e.map(a=>a.slice())}_updateBounds(){this.bounds.clear(),Ed(this.commandList,this._boundsContext)}release(){this.commandList=[],this._boundsContext=null,this._ctx=null}getLength(){if(this.direction===yi.COLUMN){if(!this.curves.length)return 0;const e=this.curves[0],t=this.curves[this.curves.length-1];return At(e.p0.y-t.p1.y)}if(this.direction===yi.ROW){if(!this.curves.length)return 0;const e=this.curves[0],t=this.curves[this.curves.length-1];return At(e.p0.x-t.p1.x)}return this.curves.reduce((e,t)=>e+t.getLength(),0)}getAttrAt(e){if(!this.curves)return{pos:{x:0,y:0},angle:0};let t,n=0;for(let r=0;r<this.curves.length;r++){t=this.curves[r];const a=t.getLength(this.direction);if(n+a>=e)break;n+=a}const s=(e-n)/t.getLength(this.direction);return{pos:t.getPointAt(s),angle:t.getAngleAt(s)}}}const Wa=["l",0,0,0,0,0,0,0];function gqe(i,e,t){const n=Wa[0]=i[0];if(n==="a"||n==="A")Wa[1]=e*i[1],Wa[2]=t*i[2],Wa[3]=i[3],Wa[4]=i[4],Wa[5]=i[5],Wa[6]=e*i[6],Wa[7]=t*i[7];else if(n==="h"||n==="H")Wa[1]=e*i[1];else if(n==="v"||n==="V")Wa[1]=t*i[1];else for(let s=1,r=i.length;s<r;++s)Wa[s]=(s%2==1?e:t)*i[s];return Wa}const mqe={alignSelf:"auto"},es={x:0,y:0,z:0,dx:0,dy:0,dz:0,scrollX:0,scrollY:0,scaleX:1,scaleY:1,scaleZ:1,angle:0,alpha:0,beta:0,scaleCenter:[0,0],anchor:[0,0],anchor3d:[0,0],postMatrix:new Zi},yre={fillOpacity:1,fill:!1,shadowBlur:0,shadowColor:"black",shadowOffsetX:0,shadowOffsetY:0},_I={strokeOpacity:1,lineDash:[],lineDashOffset:0,lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,strokeBoundsBuffer:2,stroke:!1},_re=Object.assign({outerBorder:Object.assign(Object.assign({},_I),{distance:0}),innerBorder:Object.assign(Object.assign({},_I),{distance:0})},_I),bc={text:"",maxLineWidth:1/0,textAlign:"left",textBaseline:"alphabetic",fontSize:16,fontFamily:`PingFang SC,Microsoft Yahei,system-ui,-apple-system,segoe ui,
    Roboto,Helvetica,Arial,sans-serif, apple color emoji,segoe ui emoji,segoe ui symbol`,fontWeight:"",ellipsis:"",fontVariant:"",fontStyle:"",lineHeight:void 0,underline:0,lineThrough:0,scaleIn3d:!1,direction:"horizontal",wordBreak:"break-all",ignoreBuf:!1,verticalMode:0,wrap:!1,whiteSpace:"no-wrap",heightLimit:1/0,lineClamp:1/0,suffixPosition:"end",underlineDash:[],underlineOffset:0,disableAutoClipedPoptip:void 0},yqe={pickStrokeBuffer:0},_qe=Object.assign(Object.assign(Object.assign(Object.assign({forceBoundsWidth:void 0,forceBoundsHeight:void 0,opacity:1,background:null,backgroundOpacity:1,backgroundCornerRadius:0,texture:null,textureColor:"black",textureSize:10,texturePadding:2,backgroundMode:"no-repeat",backgroundFit:!0,blur:0,cursor:null,html:null,react:null},yre),_re),mqe),yqe),vre={connectedType:"none",connectedStyle:{},connectedX:NaN,connectedY:NaN},vqe={_debug_bounds:!1},Ji=Object.assign(Object.assign(Object.assign({strokeSeg:null,renderable:!0,pickable:!0,shadowGraphic:void 0,childrenPickable:!0,fillPickable:!0,strokePickable:!0,visible:!0,zIndex:0,layout:null,boundsPadding:0,fillStrokeOrder:0,renderStyle:"default",pickMode:"accurate",customPickShape:null,boundsMode:"accurate",keepDirIn3d:!0,shadowRootIdx:1,globalZIndex:1,globalCompositeOperation:"",overflow:"hidden",shadowPickMode:"graphic"},vqe),_qe),es),bqe=Object.assign(Object.assign({},Ji),{startAngle:0,endAngle:yt,innerRadius:0,outerRadius:1,innerPadding:0,outerPadding:0,cornerRadius:0,padRadius:0,padAngle:0,cap:!1,forceShowCap:!1}),xqe=Object.assign(Object.assign(Object.assign({},Ji),vre),{points:[],segments:[],curveType:"linear",clipRange:1,closePath:!1,curveTension:1}),Sqe=Object.assign(Object.assign({},Ji),{radius:1,startAngle:0,endAngle:yt}),Cqe=Object.assign(Object.assign({},Ji),{width:0,height:0,cornerRadius:0,path:[],clip:!1,visibleAll:!0,display:"relative",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start",alignContent:"flex-start",baseOpacity:1}),wqe=Object.assign(Object.assign({},Ji),{path:"",width:0,height:0,cornerRadius:0,clip:!1}),Aqe=Object.assign(Object.assign(Object.assign({},Ji),vre),{points:[],segments:[],curveType:"linear",clipRange:1,clipRangeByDimension:"default",closePath:!1,curveTension:1}),kqe=Object.assign(Object.assign({},Ji),{path:new Bn,fillStrokeOrder:1,customPath:()=>{ii.getInstance().warn("")}}),Tqe=Object.assign(Object.assign({},Ji),{points:[],cornerRadius:0,closePath:!0}),Eqe=Object.assign(Object.assign({},Ji),{width:0,height:0,x1:0,y1:0,strokeBoundsBuffer:0,cornerRadius:0});Object.assign(Object.assign({},Ji),{width:0,height:0,x1:0,y1:0,cornerRadius:0,length:0});const Pqe=Object.assign(Object.assign({},Ji),{symbolType:"circle",size:10,keepDirIn3d:!0}),bre=Object.assign(Object.assign(Object.assign({},Ji),bc),{strokeBoundsBuffer:0,keepDirIn3d:!0}),Gc=Object.assign(Object.assign(Object.assign({},Ji),bc),{editable:!1,width:300,height:300,ellipsis:!0,wordBreak:"break-word",verticalDirection:"top",textAlign:"left",textBaseline:"top",layoutDirection:"horizontal",textConfig:[],disableAutoWrapLine:!1,maxHeight:void 0,maxWidth:void 0,singleLine:!1}),Vb=Object.assign(Object.assign({repeatX:"no-repeat",repeatY:"no-repeat",image:"",width:0,height:0},Ji),{fill:!0,cornerRadius:0}),Oqe=Object.assign(Object.assign({},Vb),{backgroundShowMode:"never",backgroundWidth:0,backgroundHeight:0,textAlign:"left",textBaseline:"middle",direction:"horizontal",margin:0,id:"",width:20,height:20,backgroundFill:"rgba(101, 117, 168, 0.1)",backgroundFillOpacity:1,backgroundStroke:!1,backgroundStrokeOpacity:1,backgroundRadius:4,opacity:1});class Mqe{}const ue=new Mqe,f5={horizontal:{width:"width",height:"height",left:"left",top:"top",x:"x",y:"y",bottom:"bottom"},vertical:{width:"height",height:"width",left:"top",top:"left",x:"y",y:"x",bottom:"right"}},xre={fontSize:16,fontFamily:"sans-serif",fill:!0,stroke:!1,fontWeight:"normal",lineHeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",script:"normal"},$A=/\w|\(|\)|-/,Sre=/[.?!,;:/]/,Iqe=/\S/,Cre=(i,e)=>{let t=e.fontSize||16;switch(e.script){case"super":case"sub":t*=.8}i.setTextStyle({textAlign:"left",textBaseline:e.textBaseline||"alphabetic",fontStyle:e.fontStyle||"",fontWeight:e.fontWeight||"",fontSize:t,fontFamily:e.fontFamily||"sans-serif"})};function Rqe(i,e){const t=e&&e.fill||xre.fill;if(!t)return void(i.globalAlpha=0);const{fillOpacity:n=1,opacity:s=1}=e;i.globalAlpha=n*s,i.fillStyle=t,Cre(i,e)}function Lqe(i,e){const t=e&&e.stroke||xre.stroke;if(!t)return void(i.globalAlpha=0);const{strokeOpacity:n=1,opacity:s=1}=e;i.globalAlpha=n*s,i.lineWidth=e&&typeof e.lineWidth=="number"?e.lineWidth:1,i.strokeStyle=t,Cre(i,e)}function wD(i,e,t,n,s){if(!e||e<=0)return 0;const r=ue.graphicUtil.textMeasure;let a=n,o=i.slice(0,a),l=Math.floor(r.measureText(o,t).width),c=i.slice(0,a+1),u=Math.floor(r.measureText(c,t).width);for(;l>e||u<=e;){if(l>e?a--:a++,a>i.length){a=i.length;break}if(a<0){a=0;break}o=i.slice(0,a),l=Math.floor(r.measureText(o,t).width),c=i.slice(0,a+1),u=Math.floor(r.measureText(c,t).width)}return s&&(a=sw(i,a)),a}function sw(i,e,t=!1){let n=e;for(;$A.test(i[n-1])&&$A.test(i[n])||Sre.test(i[n]);)if(n--,n<=0)return t?Dqe(i,e):e;return n}function Dqe(i,e){let t=e;for(;$A.test(i[t-1])&&$A.test(i[t])||Sre.test(i[t]);)if(t++,t>=i.length)return t;return t}function dm(i,e){const t=ue.graphicUtil.textMeasure.measureText(i,e),n={ascent:0,height:0,descent:0,width:0};return typeof t.actualBoundingBoxAscent!="number"||typeof t.actualBoundingBoxDescent!="number"?(n.width=Math.floor(t.width),n.height=e.fontSize||0,n.ascent=n.height,n.descent=0):(n.width=Math.floor(t.width),n.height=Math.floor(t.actualBoundingBoxAscent+t.actualBoundingBoxDescent),n.ascent=Math.floor(t.actualBoundingBoxAscent),n.descent=n.height-n.ascent),n}var Fqe=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};let AD=class{configure(i,e){this.canvas=i.canvas,this.context=i.context,i.bindTextMeasure(this)}measureTextWidth(i,e){return this.context?(this.context.setTextStyleWithoutAlignBaseline(e),this.context.measureText(i).width):this.estimate(i,e).width}estimate(i,{fontSize:e=bre.fontSize}){let t=0,n=0;for(let s=0;s<i.length;s++)i.charCodeAt(s)<128?t++:n++;return{width:~~(.8*t*e+n*e),height:e}}measureTextPixelHeight(i,e){var t;if(!this.context)return(t=e.fontSize)!==null&&t!==void 0?t:bc.fontSize;this.context.setTextStyleWithoutAlignBaseline(e);const n=this.context.measureText(i);return Math.abs(n.actualBoundingBoxAscent-n.actualBoundingBoxDescent)}measureTextBoundHieght(i,e){var t;if(!this.context)return(t=e.fontSize)!==null&&t!==void 0?t:bc.fontSize;this.context.setTextStyleWithoutAlignBaseline(e);const n=this.context.measureText(i);return Math.abs(n.fontBoundingBoxAscent-n.fontBoundingBoxDescent)}measureText(i,e){return this.context?(this.context.setTextStyleWithoutAlignBaseline(e),this.context.measureText(i)):this.estimate(i,e)}clipTextVertical(i,e,t,n){if(i.length===0)return{verticalList:i,width:0};const{fontSize:s=12}=e;i.forEach(l=>{l.width=l.direction===0?s:this.measureTextWidth(l.text,e)});const r=[];let a=0,o=0;for(;o<i.length&&a+i[o].width<t;o++)a+=i[o].width,r.push(i[o]);if(i[o]&&i[o].text.length>1){const l=this._clipText(i[o].text,e,t-a,0,i[o].text.length-1,"end",!1);if(n&&l.str!==i[o].text){let c="",u=0;for(let p=0;p<o;p++){const f=i[p];c+=f.text,u+=f.text.length}c+=i[o].text;const h=u+l.str.length;let d=sw(c,h);d-=u,d!==l.str.length-1&&(l.str=l.str.substring(0,d),l.width=this.measureTextWidth(l.str,e))}r.push(Object.assign(Object.assign({},i[o]),{text:l.str,width:l.width})),a+=l.width}return{verticalList:r,width:a}}clipText(i,e,t,n,s){if(i.length===0)return{str:"",width:0};let r=this.measureTextWidth(i,e);if(r<=t)return{str:i,width:r};if(r=this.measureTextWidth(i[0],e),r>t)return{str:"",width:0};const a=this._clipText(i,e,t,0,i.length-1,"end",!1);if(n&&a.str!==i){let o=sw(i,a.str.length,s);o!==a.str.length&&(o>a.str.length&&(a.wordBreaked=o,o=a.str.length),a.str=i.substring(0,o),a.width=this.measureTextWidth(a.str,e))}return a}_clipText(i,e,t,n,s,r,a){let o;if(r==="start")o=this._clipTextStart(i,e,t,n,s),a&&(o.result=a+o.str);else if(r==="middle"){const l=this._clipTextMiddle(i,e,t,"","",0,0,1);o={str:"none",width:l.width,result:l.left+a+l.right}}else o=this._clipTextEnd(i,e,t,n,s),a&&(o.result=o.str+a);return o}_clipTextEnd(i,e,t,n,s){const r=Math.floor((n+s)/2),a=i.substring(0,r+1),o=this.measureTextWidth(a,e);let l;if(o>t){if(a.length<=1)return{str:"",width:0};const c=i.substring(0,r);return l=this.measureTextWidth(c,e),l<=t?{str:c,width:l}:this._clipTextEnd(i,e,t,n,r)}if(o<t){if(r>=i.length-1)return{str:i,width:this.measureTextWidth(i,e)};const c=i.substring(0,r+2);return l=this.measureTextWidth(c,e),l>=t?{str:a,width:o}:this._clipTextEnd(i,e,t,r,s)}return{str:a,width:o}}_clipTextStart(i,e,t,n,s){const r=Math.ceil((n+s)/2),a=i.substring(r-1,i.length-1),o=this.measureTextWidth(a,e);let l;if(o>t){if(a.length<=1)return{str:"",width:0};const c=i.substring(r,i.length-1);return l=this.measureTextWidth(c,e),l<=t?{str:c,width:l}:this._clipTextStart(i,e,t,r,i.length-1)}if(o<t){if(r<=0)return{str:i,width:this.measureTextWidth(i,e)};const c=i.substring(r-2,i.length-1);return l=this.measureTextWidth(c,e),l>=t?{str:a,width:o}:this._clipTextStart(i,e,t,n,r)}return{str:a,width:o}}_clipTextMiddle(i,e,t,n,s,r,a,o){const l=i.substring(0,o),c=this.measureTextWidth(l,e);if(c+a>t)return{left:n,right:s,width:r+a};const u=i.substring(i.length-o,i.length),h=this.measureTextWidth(u,e);return c+h>t?{left:l,right:s,width:c+a}:this._clipTextMiddle(i,e,t,l,u,c,h,o+1)}clipTextWithSuffixVertical(i,e,t,n,s,r){if(n==="")return this.clipTextVertical(i,e,t,s);if(i.length===0)return{verticalList:i,width:0};const a=this.clipTextVertical(i,e,t,s);if(a.verticalList.length===i.length&&a.verticalList[a.verticalList.length-1].width===i[i.length-1].width)return a;const o=this.measureTextWidth(n,e);if(o>t)return a;let l;if(t-=o,r==="start"){const c=this.revertVerticalList(i);l=this.clipTextVertical(c,e,t,s);const u=this.revertVerticalList(l.verticalList);u.unshift({text:n,direction:1,width:o}),l.verticalList=u}else if(r==="middle"){const c=this.clipTextVertical(i,e,t/2,s),u=this.revertVerticalList(i),h=this.clipTextVertical(u,e,t/2,s);c.verticalList.push({text:n,direction:1,width:o}),this.revertVerticalList(h.verticalList).forEach(d=>c.verticalList.push(d)),l={verticalList:c.verticalList,width:c.width+h.width}}else l=this.clipTextVertical(i,e,t,s),l.verticalList.push({text:n,direction:1,width:o});return l.width+=o,l}revertVerticalList(i){return i.reverse().map(e=>{const t=e.text.split("").reverse().join("");return Object.assign(Object.assign({},e),{text:t})})}clipTextWithSuffix(i,e,t,n,s,r,a=!1){if(n==="")return this.clipText(i,e,t,s);if(i.length===0)return{str:"",width:0};const o=this.measureTextWidth(i,e);if(!a&&o<=t)return{str:i,width:o};const l=this.measureTextWidth(n,e);if(l>t)return{str:"",width:0};if(a&&o+l<=t)return{str:i+n,width:o+l};t-=l;const c=this._clipText(i,e,t,0,i.length-1,r,n);if(s&&c.str!==i){const u=sw(i,c.str.length);u!==c.str.length&&(c.result=i.substring(0,u),c.width=this.measureTextWidth(c.str,e))}else a&&c.str===i&&(c.result=i+n);return c.str=c.result,c.width+=l,c}};AD=Fqe([Oe()],AD);var Bqe=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};const kD=Symbol.for("TextMeasureContribution");let TD=class extends AD{};TD=Bqe([Oe()],TD);const We=new LYe,wre=Symbol.for("CanvasFactory"),jqe=Symbol.for("Context2dFactory");function ED(i){return We.getNamed(wre,ue.global.env)(i)}class Nqe{constructor(){this.pools=[],this.allocatedCanvas=[]}shareCanvas(){return this.allocatedCanvas.length?this.allocatedCanvas[0]:this.getCommonCanvas()}getCommonCanvas(){return this._commonCanvas||(this._commonCanvas=this.allocate({width:100,height:100,dpr:2})),this._commonCanvas}allocate(e){if(!this.pools.length){const n=ED(Object.assign({nativeCanvas:ue.global.createCanvas(e)},e));return this.allocatedCanvas.push(n),n}const t=this.pools.pop();return t.resize(e.width,e.height),t.dpr=e.dpr,t}allocateByObj(e){if(!this.pools.length){const n={width:e.width/e.dpr,height:e.height/e.dpr,dpr:e.dpr},s=ED(Object.assign({nativeCanvas:ue.global.createCanvas(n)},n));return this.allocatedCanvas.push(s),s}const t=this.pools.pop();return t.width=e.width,t.height=e.height,t}free(e){this.pools.push(e)}get length(){return this.pools.length}release(...e){this.pools=[]}}const Sy=new Nqe;var $qe=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},zqe=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};const zA=Symbol.for("VWindow"),g5=Symbol.for("WindowHandlerContribution");let PD=class{get width(){if(this._handler){const i=this._handler.getWH();return this._width=i.width}return this._width}get height(){if(this._handler){const i=this._handler.getWH();return this._height=i.height}return this._height}get dpr(){return this._handler.getDpr()}constructor(){this.hooks={onChange:new ga(["x","y","width","height"])},this.active=()=>{const i=this.global;!i.env||this.actived||(We.getNamed(g5,i.env).configure(this,i),this.actived=!0)},this._uid=zn.GenAutoIncrementId(),this.global=ue.global,this.postInit()}postInit(){this.global.hooks.onSetEnv.tap("window",this.active),this.active()}get style(){var i;return(i=this._handler.getStyle())!==null&&i!==void 0?i:{}}set style(i){this._handler.setStyle(i)}create(i){var e,t;this._handler.createWindow(i);const n=this._handler.getWH();this._width=n.width,this._height=n.height,i.viewBox?this.setViewBox(i.viewBox):i.canvasControled!==!1?this.setViewBox({x1:0,y1:0,x2:this._width,y2:this._height}):this.setViewBox({x1:0,y1:0,x2:(e=i.width)!==null&&e!==void 0?e:this._width,y2:(t=i.height)!==null&&t!==void 0?t:this._height}),this.title=this._handler.getTitle(),this.resizable=!0}setWindowHandler(i){this._handler=i}setDpr(i){return this._handler.setDpr(i)}resize(i,e){return this._handler.resizeWindow(i,e)}configure(){throw new Error("")}release(){return this.global.hooks.onSetEnv.unTap("window",this.active),this._handler.releaseWindow()}getContext(){return this._handler.getContext()}getNativeHandler(){return this._handler.getNativeHandler()}getImageBuffer(i){return this._handler.getImageBuffer?this._handler.getImageBuffer(i):null}addEventListener(i,e,t){return this._handler.addEventListener(i,e,t)}removeEventListener(i,e,t){return this._handler.removeEventListener(i,e,t)}dispatchEvent(i){return this._handler.dispatchEvent(i)}getBoundingClientRect(){return this._handler.getBoundingClientRect()}getContainer(){return this._handler.container}clearViewBox(i){this._handler.clearViewBox(i)}setViewBox(i){this._handler.setViewBox(i)}setViewBoxTransform(i,e,t,n,s,r){this._handler.setViewBoxTransform(i,e,t,n,s,r)}getViewBox(){return this._handler.getViewBox()}getViewBoxTransform(){return this._handler.getViewBoxTransform()}pointTransform(i,e){const t=this._handler.getViewBox(),n={x:i,y:e};return this._handler.getViewBoxTransform().transformPoint({x:i,y:e},n),n.x-=t.x1,n.y-=t.y1,n}hasSubView(){const i=this._handler.getViewBox();return!(i.x1===0&&i.y1===0&&Nn(this.width,i.width())&&Nn(this.height,i.height()))}isVisible(i){return this._handler.isVisible(i)}onVisibleChange(i){return this._handler.onVisibleChange(i)}getTopLeft(i){return this._handler.getTopLeft(i)}};PD=$qe([Oe(),zqe("design:paramtypes",[])],PD);var Are=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},kre=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},Q8=function(i,e){return function(t,n){e(t,n,i)}};let OD=class{get canvas(){return this.tryInitCanvas(),this._canvas}get context(){return this.tryInitCanvas(),this._context}constructor(i){this.contributions=i,this.configured=!1,this.global=ue.global,this.global.hooks.onSetEnv.tap("graphic-util",(e,t,n)=>{this.configured=!1,this.configure(n,t)})}get textMeasure(){return this._textMeasure||this.configure(this.global,this.global.env),this._textMeasure}configure(i,e){this.configured||(this.contributions.getContributions().forEach(t=>{t.configure(this,e)}),this.configured=!0)}tryInitCanvas(){if(!this._canvas){const i=Sy.shareCanvas();this._canvas=i,this._context=i.getContext("2d")}}bindTextMeasure(i){this._textMeasure=i}measureText(i,e,t="native"){var n;this.configure(this.global,this.global.env);const s=this.global.measureTextMethod;this.global.measureTextMethod=t;const r={width:this._textMeasure.measureTextWidth(i,e),height:(n=e.fontSize)!==null&&n!==void 0?n:bc.fontSize};return this.global.measureTextMethod=s,r}createTextMeasureInstance(i,e,t){return this.configure(this.global,this.global.env),new qs(Object.assign({defaultFontParams:{fontFamily:bc.fontFamily,fontSize:bc.fontSize},getCanvasForMeasure:t||(()=>this.canvas),getTextBounds:void 0,specialCharSet:`-/: .,@%'"~`+qs.ALPHABET_CHAR_SET+qs.ALPHABET_CHAR_SET.toUpperCase()},e??{}),i)}drawGraphicToCanvas(i,e,t){if(!e.defaultLayer)return null;const n=We.get(zA),s=i.AABBBounds,r=s.width(),a=s.height(),o=-s.x1,l=-s.y1;n.create({viewBox:{x1:o,y1:l,x2:s.x2,y2:s.y2},width:r,height:a,canvas:t,dpr:e.window.dpr,canvasControled:!0,offscreen:!0,title:""});const c=e.params.optimize.disableCheckGraphicWidthOutRange;e.params.optimize.disableCheckGraphicWidthOutRange=!0,e.defaultLayer.getNativeHandler().drawTo(n,[i],{transMatrix:n.getViewBoxTransform(),viewBox:n.getViewBox(),stage:e,layer:e.defaultLayer,renderService:e.renderService,background:"transparent",clear:!0,updateBounds:!1}),e.params.optimize.disableCheckGraphicWidthOutRange=c;const u=n.getNativeHandler();return u.nativeCanvas?u.nativeCanvas:null}};OD=Are([Oe(),Q8(0,rt($n)),Q8(0,rs(kD)),kre("design:paramtypes",[Object])],OD);var fh;(function(i){i[i.transform=0]="transform",i[i.matrix=1]="matrix"})(fh||(fh={}));const Ln=new Zi;let MD=class{constructor(){this.matrix=new Zi}init(i){return this.mode=fh.transform,this.originTransform=i,this.matrix.reset(),this}fromMatrix(i,e){return this.mode=fh.matrix,this.outSourceMatrix=i,this.outTargetMatrix=e,this}scaleMatrix(i,e,t){const n=this.outSourceMatrix;if(Ln.setValue(n.a,n.b,n.c,n.d,n.e,n.f),this.outTargetMatrix.reset(),t){const{x:s,y:r}=t;this.outTargetMatrix.translate(s,r),this.outTargetMatrix.scale(i,e),this.outTargetMatrix.translate(-s,-r)}else this.outTargetMatrix.scale(i,e);return this.outTargetMatrix.multiply(Ln.a,Ln.b,Ln.c,Ln.d,Ln.e,Ln.f),this}rotateMatrix(i,e){const t=this.outSourceMatrix;if(Ln.setValue(t.a,t.b,t.c,t.d,t.e,t.f),this.outTargetMatrix.reset(),e){const{x:n,y:s}=e;this.outTargetMatrix.translate(n,s),this.outTargetMatrix.rotate(i),this.outTargetMatrix.translate(-n,-s)}else this.outTargetMatrix.rotate(i);return this.outTargetMatrix.multiply(Ln.a,Ln.b,Ln.c,Ln.d,Ln.e,Ln.f),this}scale(i,e,t){return this.mode===fh.matrix?this.scaleMatrix(i,e,t):this}rotate(i,e){return this.mode===fh.matrix?this.rotateMatrix(i,e):this}translateMatrix(i,e){const t=this.outSourceMatrix;return Ln.setValue(t.a,t.b,t.c,t.d,t.e,t.f),this.outTargetMatrix.reset(),this.outTargetMatrix.translate(i,e),this.outTargetMatrix.multiply(Ln.a,Ln.b,Ln.c,Ln.d,Ln.e,Ln.f),this}translate(i,e){return this.mode===fh.matrix?this.translateMatrix(i,e):this}simplify(i){return this.mode===fh.matrix?this.simplifyMatrix(i):this}simplifyMatrix(i){return this}};MD=Are([Oe(),kre("design:paramtypes",[])],MD);const pr={arc:bqe,area:xqe,circle:Sqe,line:Aqe,path:kqe,symbol:Pqe,text:bre,rect:Eqe,polygon:Tqe,richtext:Gc,richtextIcon:Oqe,image:Vb,group:Cqe,glyph:wqe},vI=Object.keys(pr);function Hqe(){return{arc:Object.assign({},pr.arc),area:Object.assign({},pr.area),circle:Object.assign({},pr.circle),line:Object.assign({},pr.line),path:Object.assign({},pr.path),symbol:Object.assign({},pr.symbol),text:Object.assign({},pr.text),rect:Object.assign({},pr.rect),polygon:Object.assign({},pr.polygon),richtext:Object.assign({},pr.richtext),richtextIcon:Object.assign({},pr.richtextIcon),image:Object.assign({},pr.image),group:Object.assign({},pr.group),glyph:Object.assign({},pr.glyph)}}function nC(i,e){Object.keys(e).forEach(t=>{i[t]=e[t]})}const eV=Hqe();class Ub{constructor(){this.initTheme(),this.dirty=!1}initTheme(){this._defaultTheme={},vI.forEach(e=>{this._defaultTheme[e]=Object.create(eV[e])}),this.combinedTheme=this._defaultTheme}getTheme(e){if(!e)return this.combinedTheme;if(!this.dirty)return this.combinedTheme;let t={};const n=this.getParentWithTheme(e);return n&&(t=n.theme),this.applyTheme(e,t),this.combinedTheme}getParentWithTheme(e){for(;e.parent;)if((e=e.parent).theme)return e;return null}applyTheme(e,t,n=!1){if(this.dirty){const s=this.getParentWithTheme(e);if(s){const r=s.theme;(r.dirty||n)&&r.applyTheme(s,t,!0)}this.userTheme?this.doCombine(s&&s.theme.combinedTheme):(s?this.combinedTheme=s.theme.combinedTheme:(this.combinedTheme=this._defaultTheme,ii.getInstance().warn("")),this.dirty=!1)}return this.combinedTheme}doCombine(e){const t=this.userTheme,n=this.combinedTheme;vI.forEach(s=>{const r=Object.create(eV[s]);e&&e[s]&&nC(r,e[s]),n[s]&&nC(r,n[s]),t[s]&&nC(r,t[s]),this.combinedTheme[s]=r}),t.common&&vI.forEach(s=>{nC(this.combinedTheme[s],t.common)}),this.dirty=!1}setTheme(e,t){let n=this.userTheme;n?Object.keys(e).forEach(s=>{n[s]?Object.assign(n[s],e[s]):n[s]=Object.assign({},e[s])}):n=e,this.userTheme=n,this.dirty=!0,this.dirtyChildren(t)}resetTheme(e,t){this.userTheme=e,this.dirty=!0,this.dirtyChildren(t)}dirtyChildren(e){e.forEachChildren(t=>{t.isContainer&&(t.theme&&(t.theme.dirty=!0),this.dirtyChildren(t))})}}const Tre=new Ub;function Ye(i,e){return i.glyphHost?Ye(i.glyphHost):e?(i.isContainer,e):Vqe(i)||i.attachedThemeGraphic&&Ye(i.attachedThemeGraphic)||Tre.getTheme()}function Vqe(i){let e;if(e=i.isContainer?i:i.parent,e){for(;e&&!e.theme;)e=e.parent;return e?(e.theme||e.createTheme(),e.theme.getTheme(e)):Tre.getTheme()}return null}var Uqe=function(i,e,t,n){return new(t||(t=Promise))(function(s,r){function a(c){try{l(n.next(c))}catch(u){r(u)}}function o(c){try{l(n.throw(c))}catch(u){r(u)}}function l(c){var u;c.done?s(c.value):(u=c.value,u instanceof t?u:new t(function(h){h(u)})).then(a,o)}l((n=n.apply(i,e||[])).next())})};class Wqe extends Yf{get previousSibling(){return this._prev}get nextSibling(){return this._next}get children(){return this.getChildren()}get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}get count(){return this._count}get childrenCount(){return this._idMap?this._idMap.size:0}constructor(){super(),this._uid=zn.GenAutoIncrementId(),this._firstChild=null,this._lastChild=null,this.parent=null,this._count=1}forEachChildren(e,t=!1){if(t){let n=this._lastChild,s=0;for(;n;){if(e(n,s++))return;n=n._prev}}else{let n=this._firstChild,s=0;for(;n;){if(e(n,s++))return;n=n._next}}}forEachChildrenAsync(e,t=!1){return Uqe(this,void 0,void 0,function*(){if(t){let n=this._lastChild,s=0;for(;n;){let r=e(n,s++);if(r.then&&(r=yield r),r)return;n=n._prev}}else{let n=this._firstChild,s=0;for(;n;){let r=e(n,s++);if(r.then&&(r=yield r),r)return;n=n._next}}})}forEach(e){return this.forEachChildren(e)}appendChild(e,t=!0){if(this._uid===e._uid)return null;if(!t&&e.isAncestorsOf(this))throw new Error("Node::appendChildappend");return e.parent&&e.parent.removeChild(e),e.parent=this,this._lastChild?(this._lastChild._next=e,e._prev=this._lastChild,this._lastChild=e):(this._firstChild=this._lastChild=e,e._prev=e._next=null),this._idMap||(this._idMap=new Map),this._idMap.set(e._uid,e),this.setCount(e.count),this._structEdit=!0,e}appendChildArrHighPerformance(e,t=!1){return console.error(""),e}insertBefore(e,t){if(!t)return this.appendChild(e);if(this._uid===e._uid)return null;if(e.isAncestorsOf(this))throw new Error("Node::insertBeforeinsert");return t.parent!==this?null:(e.parent&&e.parent.removeChild(e),e.parent=this,e._prev=t._prev,t._prev?t._prev._next=e:this._firstChild=e,t._prev=e,e._next=t,this._idMap||(this._idMap=new Map),this._idMap.set(e._uid,e),this._structEdit=!0,this.setCount(e.count),e)}insertAfter(e,t){if(!t)return this.appendChild(e);if(this._uid===e._uid)return null;if(e.isAncestorsOf(this))throw new Error("Node::insertAfterinsert");return t.parent!==this?null:(e.parent&&e.parent.removeChild(e),e.parent=this,t._next?(t._next._prev=e,e._next=t._next):this._lastChild=e,t._next=e,e._prev=t,this._idMap||(this._idMap=new Map),this._idMap.set(e._uid,e),this._structEdit=!0,this.setCount(e.count),e)}insertInto(e,t){if(!this._ignoreWarn&&this._nodeList&&ii.getInstance().warn("insertIntoKeepIdxinsertInto"),t>=this.childrenCount)return this.appendChild(e);if(this._uid===e._uid)return null;if(e.isAncestorsOf(this))throw new Error("Node::insertBeforeinsert");if(e.parent&&e.parent.removeChild(e),e.parent=this,t===0)e._next=this._firstChild,this._firstChild&&(this._firstChild._prev=e),e._prev=null,this._firstChild=e;else{let n=this._firstChild;for(let s=0;s<t;s++){if(!n)return null;s>0&&(n=n._next)}if(!n)return null;e._next=n._next,e._prev=n,n._next=e,e._next&&(e._next._prev=e)}return this._idMap||(this._idMap=new Map),this._idMap.set(e._uid,e),this._structEdit=!0,this.setCount(e.count),e}insertIntoKeepIdx(e,t){if(this._nodeList||(this._nodeList=this.children),this._nodeList[t]){const r=this._nodeList[t];return this._nodeList.splice(t,0,e),this.insertBefore(e,r)}let n;this._nodeList[t]=e;for(let r=t-1;r>=0&&(n=this._nodeList[r],!n);r--);if(n)return n._next?this.insertBefore(e,n._next):this.appendChild(e);this._ignoreWarn=!0;const s=this.insertInto(e,0);return this._ignoreWarn=!1,s}removeChild(e){if(!this._idMap||!this._idMap.has(e._uid))return null;if(this._idMap.delete(e._uid),this._nodeList){const t=this._nodeList.findIndex(n=>n===e);t>=0&&this._nodeList.splice(t,1)}return e._prev?e._prev._next=e._next:this._firstChild=e._next,e._next?e._next._prev=e._prev:this._lastChild=e._prev,e.parent=null,e._prev=null,e._next=null,this._structEdit=!0,this.setCount(-e.count),e}delete(){this.parent&&this.parent.removeChild(this)}removeAllChild(e){if(!this._idMap)return;this._nodeList&&(this._nodeList.length=0);let t=this._firstChild;for(;t;){const n=t._next;t.parent=null,t._prev=null,t._next=null,t=t._next,t=n}this._firstChild=null,this._lastChild=null,this._idMap.clear(),this._structEdit=!0,this.setCount(1-this._count)}replaceChild(e,t){throw new Error("")}find(e,t=!1){let n=null;return this.forEachChildren((s,r)=>!(s===this||!e(s,r))&&(n=s,!0)),t&&this.forEachChildren(s=>{if(s.isContainer){const r=s.find(e,!0);if(r)return n=r,!0}return!1}),n}findAll(e,t=!1){let n=[];return this.forEachChildren((s,r)=>{s!==this&&e(s,r)&&n.push(s)}),t&&this.forEachChildren(s=>{if(s.isContainer){const r=s.findAll(e,!0);r.length&&(n=n.concat(r))}}),n}getElementById(e){return this.find(t=>t.id===e,!0)}findChildById(e){return this.getElementById(e)}findChildByUid(e){return this._idMap&&this._idMap.get(e)||null}getElementsByName(e){return this.findAll(t=>t.name===e,!0)}findChildrenByName(e){return this.getElementsByName(e)}getElementsByType(e){return this.findAll(t=>t.type===e,!0)}getChildByName(e,t=!1){return this.find(n=>n.name===e,t)}getChildAt(e){let t=this._firstChild;if(!t)return null;for(let n=0;n<e;n++){if(!t._next)return null;t=t._next}return t}at(e){return this.getChildAt(e)}containNode(e){if(!this._idMap)return!1;if(this._idMap.has(e._uid))return!0;let t=this._firstChild;for(;t;){if(t.containNode(e))return!0;t=t._next}return!1}getRootNode(){let e=this.parent;for(;e!=null&&e.parent;)e=e.parent;return e||this}hasChildNodes(){return this._firstChild!==null}addChild(e){return this.appendChild(e)}add(e){return this.appendChild(e)}getChildren(){const e=[];let t=this._firstChild;for(;t;)e.push(t),t=t._next;return e}isChildOf(e){return!!this.parent&&this.parent._uid===e._uid}isParentOf(e){return e.isChildOf(this)}isDescendantsOf(e){let t=this.parent;if(!t)return!1;do{if(t._uid===e._uid)return!0;t=t.parent}while(t!==null);return!1}isAncestorsOf(e){return e.isDescendantsOf(this)}getAncestor(e){throw new Error("")}setAllDescendantsProps(e,t){let n=this._firstChild;for(;n;)n[e]=t,n.setAllDescendantsProps(e,t),n=n._next}setCount(e){this._count+=e;let t=this.parent;if(t)do t._count+=e,t=t.parent;while(t!==null)}clone(){throw new Error("")}cloneTo(e){throw new Error("")}getParent(){return this.parent}del(e){return this.removeChild(e)}addEventListener(e,t,n){const s=Ui(n,!0)&&n||Ke(n)&&n.capture,r=Ke(n)&&n.once,a=ee(t)?void 0:t;return e=s?`${e}capture`:e,t=ee(t)?t:t.handleEvent,r?super.once(e,t,a):super.on(e,t,a),this}on(e,t,n){return this.addEventListener(e,t,n)}removeEventListener(e,t,n){const s=Ui(n,!0)&&n||Ke(n)&&n.capture,r=ee(t)?void 0:t;e=s?`${e}capture`:e,t=ee(t)?t:t.handleEvent;const a=Ke(n)&&n.once;return super.off(e,t,r,a),this}off(e,t,n){return this.removeEventListener(e,t,n)}once(e,t,n){return Ke(n)?(n.once=!0,this.addEventListener(e,t,n)):this.addEventListener(e,t,{once:!0})}removeAllEventListeners(){return super.removeAllListeners(),this}removeAllListeners(){return this.removeAllEventListeners()}dispatchEvent(e,...t){return super.emit(e.type,e,...t),!e.defaultPrevented}emit(e,t){return this.dispatchEvent(e,t)}release(){this.removeAllListeners()}}class Ex{get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get x(){return this.canvas.x}get y(){return this.canvas.y}get canvasX(){return this.canvas.x}get canvasY(){return this.canvas.y}get viewX(){return this.viewport.x}get viewY(){return this.viewport.y}constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Ex.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer={x:0,y:0},this.page={x:0,y:0},this.canvas={x:0,y:0},this.viewport={x:0,y:0},this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}composedPath(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.composedDetailPath(),this.path}composedDetailPath(){return this.pickParams&&this.pickParams.graphic?(this.detailPath=this.path.slice(),this._composedDetailPath(this.pickParams)):this.detailPath=this.path.slice(),this.detailPath}_composedDetailPath(e){if(e&&e.graphic){const t=this.pickParams.graphic;if(t.stage){const n=t.stage.eventSystem.manager.propagationPath(t);this.detailPath.push(n),this._composedDetailPath(e.params)}}}preventDefault(){try{this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault()}catch{this.nativeEvent.preventDefault&&ee(this.nativeEvent.preventDefault)&&this.nativeEvent.preventDefault()}this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){try{this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.stopPropagation()}catch{this.nativeEvent.stopPropagation&&ee(this.nativeEvent.stopPropagation)&&this.nativeEvent.stopPropagation()}this.propagationStopped=!0}initEvent(){}initUIEvent(){}clone(){throw new Error("Method not implemented.")}}class HA extends Ex{constructor(){super(...arguments),this.client={x:0,y:0},this.movement={x:0,y:0},this.offset={x:0,y:0},this.global={x:0,y:0},this.screen={x:0,y:0}}get clientX(){return this.client.x}get clientY(){return this.client.y}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,n,s,r,a,o,l,c,u,h,d,p,f,g){throw new Error("Method not implemented.")}}class ha extends HA{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}clone(){var e,t,n;const s=new ha(this.manager);s.eventPhase=s.NONE,s.currentTarget=null,s.path=[],s.detailPath=[],s.target=null,s.nativeEvent=this.nativeEvent,s.originalEvent=this.originalEvent,(e=this.manager)===null||e===void 0||e.copyPointerData(this,s),(t=this.manager)===null||t===void 0||t.copyMouseData(this,s),(n=this.manager)===null||n===void 0||n.copyData(this,s),s.target=this.target,s.path=this.composedPath().slice();const r=this.composedDetailPath();return s.detailPath=r&&r.slice(),s.type=this.type,s}}class td extends HA{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}clone(){var e,t,n;const s=new td(this.manager);s.eventPhase=s.NONE,s.currentTarget=null,s.path=[],s.detailPath=[],s.target=null,s.nativeEvent=this.nativeEvent,s.originalEvent=this.originalEvent,(e=this.manager)===null||e===void 0||e.copyWheelData(this,s),(t=this.manager)===null||t===void 0||t.copyMouseData(this,s),(n=this.manager)===null||n===void 0||n.copyData(this,s),s.target=this.target,s.path=this.composedPath().slice();const r=this.composedDetailPath();return s.detailPath=r&&r.slice(),s.type=this.type,s}}td.DOM_DELTA_PIXEL=0,td.DOM_DELTA_LINE=1,td.DOM_DELTA_PAGE=2;let DP=class extends Ex{constructor(e,t){super(),this.type=e,this.detail=t}};const Ere="*",Op=typeof performance=="object"&&performance.now?performance:Date;function sh(i){return i==="mouse"||i==="pen"}class Gqe{constructor(e,t){this.dispatch=new Yf,this.cursorTarget=null,this.pauseNotify=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.onPointerDown=(n,s)=>{if(!(n instanceof ha))return void ii.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const r=this.createPointerEvent(n,n.type,s);if(this.dispatchEvent(r,"pointerdown"),r.pointerType==="touch")this.dispatchEvent(r,"touchstart");else if(sh(r.pointerType)){const a=r.button===2;this.dispatchEvent(r,a?"rightdown":"mousedown")}this.trackingData(n.pointerId).pressTargetsByButton[n.button]=r.composedPath(),this.freeEvent(r)},this.onPointerMove=(n,s)=>{var r,a;if(!(n instanceof ha))return void ii.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const o=this.createPointerEvent(n,n.type,s),l=sh(o.pointerType),c=this.trackingData(n.pointerId),u=this.findMountedTarget(c.overTargets);if(c.overTargets&&u&&u!==this.rootTarget&&u!==o.target){const h=n.type==="mousemove"?"mouseout":"pointerout",d=this.createPointerEvent(n,h,u||void 0);if(this.dispatchEvent(d,"pointerout"),l&&this.dispatchEvent(d,"mouseout"),!o.composedPath().includes(u)){const p=this.createPointerEvent(n,"pointerleave",u||void 0);for(p.eventPhase=p.AT_TARGET;p.target&&!o.composedPath().includes(p.target);)p.currentTarget=p.target,this.notifyTarget(p),l&&this.notifyTarget(p,"mouseleave"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(d)}if(u!==o.target){const h=n.type==="mousemove"?"mouseover":"pointerover",d=this.clonePointerEvent(o,h);this.dispatchEvent(d,"pointerover"),l&&this.dispatchEvent(d,"mouseover");let p=u==null?void 0:u.parent;for(;p&&p!==this.rootTarget.parent&&p!==o.target;)p=p.parent;if(!p||p===this.rootTarget.parent){const f=this.clonePointerEvent(o,"pointerenter");f.eventPhase=f.AT_TARGET;let g=f.target;const m=new Set;let y=u;for(;y&&y!==this.rootTarget;)m.add(y),y=y.parent;for(;g&&g!==u&&g!==this.rootTarget.parent;)m.has(g)||(f.currentTarget=g,this.notifyTarget(f),l&&this.notifyTarget(f,"mouseenter")),g=g.parent;this.freeEvent(f)}this.freeEvent(d)}this.dispatchEvent(o,"pointermove"),o.pointerType==="touch"&&this.dispatchEvent(o,"touchmove"),l&&(this.dispatchEvent(o,"mousemove"),this.cursorTarget=o.target,this.cursor=((a=(r=o.target)===null||r===void 0?void 0:r.attribute)===null||a===void 0?void 0:a.cursor)||this.rootTarget.getCursor()),c.overTargets=o.composedPath(),this.freeEvent(o)},this.onPointerOver=(n,s)=>{var r,a;if(!(n instanceof ha))return void ii.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const o=this.trackingData(n.pointerId),l=this.createPointerEvent(n,n.type,s),c=sh(l.pointerType);this.dispatchEvent(l,"pointerover"),c&&this.dispatchEvent(l,"mouseover"),l.pointerType==="mouse"&&(this.cursorTarget=l.target,this.cursor=((a=(r=l.target)===null||r===void 0?void 0:r.attribute)===null||a===void 0?void 0:a.cursor)||this.rootTarget.getCursor());const u=this.clonePointerEvent(l,"pointerenter");for(u.eventPhase=u.AT_TARGET;u.target&&u.target!==this.rootTarget.parent;)u.currentTarget=u.target,this.notifyTarget(u),c&&this.notifyTarget(u,"mouseenter"),u.target=u.target.parent;o.overTargets=l.composedPath(),this.freeEvent(l),this.freeEvent(u)},this.onPointerOut=(n,s)=>{if(!(n instanceof ha))return void ii.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const r=this.trackingData(n.pointerId);if(r.overTargets){const a=sh(n.pointerType),o=this.findMountedTarget(r.overTargets),l=this.createPointerEvent(n,"pointerout",o||void 0);this.dispatchEvent(l),a&&this.dispatchEvent(l,"mouseout");const c=this.createPointerEvent(n,"pointerleave",o||void 0);for(c.eventPhase=c.AT_TARGET;c.target&&c.target!==this.rootTarget.parent;)c.currentTarget=c.target,this.notifyTarget(c),a&&this.notifyTarget(c,"mouseleave"),c.target=c.target.parent;r.overTargets=[],this.freeEvent(l),this.freeEvent(c)}this.cursorTarget=null,this.cursor=""},this.onPointerUp=(n,s)=>{var r;if(!(n instanceof ha))return void ii.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const a=Op.now(),o=this.createPointerEvent(n,n.type,s);if(this.dispatchEvent(o,"pointerup"),o.pointerType==="touch")this.dispatchEvent(o,"touchend");else if(sh(o.pointerType)){const h=o.button===2;this.dispatchEvent(o,h?"rightup":"mouseup")}const l=this.trackingData(n.pointerId),c=this.findMountedTarget(l.pressTargetsByButton[n.button]);let u=c;if(c&&!o.composedPath().includes(c)){let h=c;for(;h&&!o.composedPath().includes(h);){if(o.currentTarget=h,this.notifyTarget(o,"pointerupoutside"),o.pointerType==="touch")this.notifyTarget(o,"touchendoutside");else if(sh(o.pointerType)){const d=o.button===2;this.notifyTarget(o,d?"rightupoutside":"mouseupoutside")}h=h.parent}delete l.pressTargetsByButton[n.button],u=h}if(u){const h=this.clonePointerEvent(o,"click");h.target=u,h.path=[],h.detailPath=[],l.clicksByButton[n.button]||(l.clicksByButton[n.button]={clickCount:0,target:h.target,timeStamp:a});const d=l.clicksByButton[n.button];d.target===h.target&&a-d.timeStamp<((r=this._config.clickInterval)!==null&&r!==void 0?r:200)?++d.clickCount:d.clickCount=1,d.target=h.target,d.timeStamp=a,h.detail=d.clickCount,sh(h.pointerType)?(this.dispatchEvent(h,"click"),d.clickCount===2&&this.dispatchEvent(h,"dblclick")):h.pointerType==="touch"&&(this.dispatchEvent(h,"tap"),d.clickCount===2&&this.dispatchEvent(h,"dbltap")),this.dispatchEvent(h,"pointertap"),this.freeEvent(h)}this.freeEvent(o)},this.onPointerUpOutside=(n,s)=>{if(!(n instanceof ha))return void ii.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const r=this.trackingData(n.pointerId),a=this.findMountedTarget(r.pressTargetsByButton[n.button]),o=this.createPointerEvent(n,n.type,s);if(a){let l=a;for(;l;)o.currentTarget=l,this.notifyTarget(o,"pointerupoutside"),o.pointerType==="touch"?this.notifyTarget(o,"touchendoutside"):sh(o.pointerType)&&this.notifyTarget(o,o.button===2?"rightupoutside":"mouseupoutside"),l=l.parent;delete r.pressTargetsByButton[n.button]}this.freeEvent(o)},this.onWheel=(n,s)=>{if(!(n instanceof td))return void ii.getInstance().warn("EventManager cannot map a non-wheel event as a wheel event");const r=this.createWheelEvent(n,s);this.dispatchEvent(r),this.freeEvent(r)},this.rootTarget=e,this.mappingTable={},this._config=Object.assign({clickInterval:200},t),this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((n,s)=>n.priority-s.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){var t,n,s,r,a,o,l;if(!this.rootTarget)return;const c=this.mappingTable[e.type];let u;const h=`${e.canvasX}-${e.canvasY}`;if(!((t=this._prePointTargetCache)===null||t===void 0)&&t[h]&&(!((s=(n=this._prePointTargetCache)===null||n===void 0?void 0:n[h])===null||s===void 0)&&s.stage)&&((a=(r=this._prePointTargetCache)===null||r===void 0?void 0:r[h])===null||a===void 0?void 0:a.stage.renderCount)===((o=this._prePointTargetCache)===null||o===void 0?void 0:o.stageRenderCount)?u=this._prePointTargetCache[h]:(u=this.pickTarget(e.viewX,e.viewY,e),e.pickParams||(this._prePointTargetCache={[h]:u,stageRenderCount:(l=u==null?void 0:u.stage.renderCount)!==null&&l!==void 0?l:-1})),c)for(let d=0,p=c.length;d<p;d++)c[d].fn(e,u);else ii.getInstance().warn(`[EventManager]: Event mapping not defined for ${e.type}`)}propagate(e,t){if(!e.target)return;const n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let s=0,r=n.length-1;s<r;s++)if(e.currentTarget=n[s],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!e.propagationStopped&&!e.propagationImmediatelyStopped){e.eventPhase=e.BUBBLING_PHASE;for(let s=n.length-2;s>=0;s--)if(e.currentTarget=n[s],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}propagationPath(e){const t=[e];for(let n=0;n<2048&&e!==this.rootTarget&&e.parent;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}notifyTarget(e,t){if(this.pauseNotify)return;t=t??e.type;const n=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,n),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let n=1;n<e.length&&e[n].parent===t;n++)t=e[n];return t}createPointerEvent(e,t,n){var s,r;const a=this.allocateEvent(ha);return this.copyPointerData(e,a),this.copyMouseData(e,a),this.copyData(e,a),a.nativeEvent=e.nativeEvent,a.originalEvent=e,a.target=n||this.pickTarget((s=a.viewX)!==null&&s!==void 0?s:a.global.x,(r=a.viewY)!==null&&r!==void 0?r:a.global.y,a),typeof t=="string"&&(a.type=t),a}createWheelEvent(e,t){var n,s;const r=this.allocateEvent(td);return this.copyWheelData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=t||this.pickTarget((n=r.viewX)!==null&&n!==void 0?n:r.global.x,(s=r.viewY)!==null&&s!==void 0?s:r.global.y,r),r}clonePointerEvent(e,t){const n=this.allocateEvent(ha);n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice();const s=e.composedDetailPath();return n.detailPath=s&&s.slice(),n.type=t??n.type,n}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof ha&&t instanceof ha&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof HA&&t instanceof HA&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.ctrlKey=e.ctrlKey,t.shiftKey=e.shiftKey,t.metaKey=e.metaKey,["client","movement","canvas","screen","global","offset","viewport"].forEach(n=>{t[n].x=e[n].x,t[n].y=e[n].y}))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=Op.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.x=e.layer.x,t.layer.y=e.layer.y,t.page.x=e.page.x,t.page.y=e.page.y,t.pickParams=e.pickParams}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){var t;this.eventPool.has(e)||this.eventPool.set(e,[]);const n=((t=this.eventPool.get(e))===null||t===void 0?void 0:t.pop())||new e(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=[],n.detailPath=[],n.target=null,n}freeEvent(e){var t;if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventManager!");const n=e.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),(t=this.eventPool.get(n))===null||t===void 0||t.push(e)}notifyListeners(e,t){const n=e.currentTarget._events[t];if(n)if("fn"in n)n.once&&e.currentTarget.removeEventListener(t,n.fn,{once:!0}),n.fn.call(n.context,e);else for(let s=0,r=n.length;s<r&&!e.propagationImmediatelyStopped;s++)n[s].once&&e.currentTarget.removeEventListener(t,n[s].fn,{once:!0}),n[s].fn.call(n[s].context,e);this.emitDelegation(e,t)}emitDelegation(e,t){const n=e.currentTarget._events[Ere];if(n)if("fn"in n)n.fn.call(n.context,e,t);else for(let s=0,r=n.length;s<r&&!e.propagationImmediatelyStopped;s++)n[s].fn.call(n[s].context,e,t)}pickTarget(e,t,n){let s;const r=this.rootTarget.pick(e,t);return s=r&&r.graphic?r.graphic:r&&r.group?r.group:this.rootTarget.AABBBounds.contains(e,t)?this.rootTarget:null,n&&(n.pickParams=r.params),s}release(){this.dispatch.removeAllListeners(),this.eventPool.clear(),this.rootTarget=null,this.mappingTable=null,this.mappingState=null,this.cursorTarget=null}}const Kqe={dispatchEvent(i){var e;if(!(i instanceof Ex))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return i.defaultPrevented=!1,i.path=[],i.detailPath&&(i.detailPath=[]),i.target=this,(e=i==null?void 0:i.manager)===null||e===void 0||e.dispatchEvent(i),!i.defaultPrevented},emit(i,e){return this.dispatchEvent(new DP(i,e))}},Xqe={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class Yqe{constructor(e){this.resolution=1,this.onPointerDown=u=>{if(this.supportsTouchEvents&&u.pointerType==="touch")return;const h=this.normalizeToPointerData(u);this.autoPreventDefault&&h[0].isNormalized&&(u.cancelable||!("cancelable"in u))&&u.preventDefault();for(let d=0,p=h.length;d<p;d++){const f=h[d],g=this.bootstrapEvent(this.rootPointerEvent,f);this.manager.mapEvent(g)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerMove=u=>{if(this.supportsTouchEvents&&u.pointerType==="touch"||this.isEventOutsideOfTargetElement(u))return;const h=this.normalizeToPointerData(u);for(let d=0,p=h.length;d<p;d++){const f=this.bootstrapEvent(this.rootPointerEvent,h[d]);this.manager.mapEvent(f)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerUp=u=>{if(this.supportsTouchEvents&&u.pointerType==="touch")return;const h=this.isEventOutsideOfTargetViewPort(u)?"outside":"",d=this.normalizeToPointerData(u);for(let p=0,f=d.length;p<f;p++){const g=this.bootstrapEvent(this.rootPointerEvent,d[p]);g.type+=h,this.manager.mapEvent(g)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerOverOut=u=>{if(this.supportsTouchEvents&&u.pointerType==="touch")return;const h=this.normalizeToPointerData(u);for(let d=0,p=h.length;d<p;d++){const f=this.bootstrapEvent(this.rootPointerEvent,h[d]);this.manager.mapEvent(f)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onWheel=u=>{const h=this.normalizeWheelEvent(u);this.manager.mapEvent(h)};const{targetElement:t,resolution:n,rootNode:s,global:r,autoPreventDefault:a=!1,clickInterval:o,supportsTouchEvents:l=r.supportsTouchEvents,supportsPointerEvents:c=r.supportsPointerEvents}=e;this.manager=new Gqe(s,{clickInterval:o}),this.globalObj=r,this.supportsPointerEvents=c,this.supportsTouchEvents=l,this.supportsMouseEvents=r.supportsMouseEvents,this.applyStyles=r.applyStyles,this.autoPreventDefault=a,this.eventsAdded=!1,this.rootPointerEvent=new ha,this.rootWheelEvent=new td,this.cursorStyles={default:"inherit",pointer:"pointer"},this.resolution=n,this.setTargetElement(t)}release(){this.removeEvents(),this.manager&&this.manager.release(),this.domElement=null,this.manager=null,this.globalObj=null}setCursor(e,t){if(!t&&!this.manager.rootTarget.window._handler.canvas.controled)return;e||(e="default");const{applyStyles:n,domElement:s}=this;if(this.currentCursor===e)return;this.currentCursor=e;const r=this.cursorStyles[e];r?typeof r=="string"&&n?s.style.cursor=r:typeof r=="function"?r(e):typeof r=="object"&&n&&Object.assign(s.style,r):n&&be(e)&&!so(this.cursorStyles,e)&&(s.style.cursor=e)}setTargetElement(e){this.removeEvents(),this.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;const{globalObj:e,domElement:t}=this;this.supportsPointerEvents?(e.getDocument()?(e.getDocument().addEventListener("pointermove",this.onPointerMove,!0),e.getDocument().addEventListener("pointerup",this.onPointerUp,!0)):(t.addEventListener("pointermove",this.onPointerMove,!0),t.addEventListener("pointerup",this.onPointerUp,!0)),t.addEventListener("pointerdown",this.onPointerDown,!0),t.addEventListener("pointerleave",this.onPointerOverOut,!0),t.addEventListener("pointerover",this.onPointerOverOut,!0)):(e.getDocument()?(e.getDocument().addEventListener("mousemove",this.onPointerMove,!0),e.getDocument().addEventListener("mouseup",this.onPointerUp,!0)):(t.addEventListener("mousemove",this.onPointerMove,!0),t.addEventListener("mouseup",this.onPointerUp,!0)),t.addEventListener("mousedown",this.onPointerDown,!0),t.addEventListener("mouseout",this.onPointerOverOut,!0),t.addEventListener("mouseover",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(t.addEventListener("touchstart",this.onPointerDown,!0),t.addEventListener("touchend",this.onPointerUp,!0),t.addEventListener("touchmove",this.onPointerMove,!0)),t.addEventListener("wheel",this.onWheel,{capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;const{globalObj:e,domElement:t}=this;this.supportsPointerEvents?(e.getDocument()?(e.getDocument().removeEventListener("pointermove",this.onPointerMove,!0),e.getDocument().removeEventListener("pointerup",this.onPointerUp,!0)):(t.removeEventListener("pointermove",this.onPointerMove,!0),t.removeEventListener("pointerup",this.onPointerUp,!0)),t.removeEventListener("pointerdown",this.onPointerDown,!0),t.removeEventListener("pointerleave",this.onPointerOverOut,!0),t.removeEventListener("pointerover",this.onPointerOverOut,!0)):(e.getDocument()?(e.getDocument().removeEventListener("mousemove",this.onPointerMove,!0),e.getDocument().removeEventListener("mouseup",this.onPointerUp,!0)):(t.removeEventListener("mousemove",this.onPointerMove,!0),t.removeEventListener("mouseup",this.onPointerUp,!0)),t.removeEventListener("mousedown",this.onPointerDown,!0),t.removeEventListener("mouseout",this.onPointerOverOut,!0),t.removeEventListener("mouseover",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(t.removeEventListener("touchstart",this.onPointerDown,!0),t.removeEventListener("touchend",this.onPointerUp,!0),t.removeEventListener("touchmove",this.onPointerMove,!0)),t.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapToViewportPoint(e){return this.domElement.pointTransform?this.domElement.pointTransform(e.x,e.y):e}mapToCanvasPoint(e){var t,n;const s=(t=this.globalObj)===null||t===void 0?void 0:t.mapToCanvasPoint(e,this.domElement);if(s)return s;let r=0,a=0;if(e.changedTouches){const l=(n=e.changedTouches[0])!==null&&n!==void 0?n:{};r=l.clientX||0,a=l.clientY||0}else r=e.clientX||0,a=e.clientY||0;const o=this.domElement.getBoundingClientRect();return{x:r-o.left,y:a-o.top}}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e.changedTouches&&e.changedTouches.length)for(let n=0,s=e.changedTouches.length;n<s;n++){const r=e.changedTouches[n];Fi(r.button)&&(r.button=0),Fi(r.buttons)&&(r.buttons=1),Fi(r.isPrimary)&&(r.isPrimary=e.touches.length===1&&e.type==="touchstart"),Fi(r.width)&&(r.width=r.radiusX||1),Fi(r.height)&&(r.height=r.radiusY||1),Fi(r.tiltX)&&(r.tiltX=0),Fi(r.tiltY)&&(r.tiltY=0),Fi(r.pointerType)&&(r.pointerType="touch"),Fi(r.pointerId)&&(r.pointerId=r.identifier||0),Fi(r.pressure)&&(r.pressure=r.force||.5),Fi(r.twist)&&(r.twist=0),Fi(r.tangentialPressure)&&(r.tangentialPressure=0),Fi(r.layerX)&&(r.layerX=r.offsetX=r.clientX),Fi(r.layerY)&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,r.type=e.type,t.push(r)}else if(this.globalObj.supportsMouseEvents&&(!(e instanceof MouseEvent)||this.supportsPointerEvents&&e instanceof PointerEvent))t.push(e);else{const n=e;Fi(n.isPrimary)&&(n.isPrimary=!0),Fi(n.width)&&(n.width=1),Fi(n.height)&&(n.height=1),Fi(n.tiltX)&&(n.tiltX=0),Fi(n.tiltY)&&(n.tiltY=0),Fi(n.pointerType)&&(n.pointerType="mouse"),Fi(n.pointerId)&&(n.pointerId=1),Fi(n.pressure)&&(n.pressure=.5),Fi(n.twist)&&(n.twist=0),Fi(n.tangentialPressure)&&(n.tangentialPressure=0),n.isNormalized=!0,t.push(n)}return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;this.transferMouseData(t,e),t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ;const{x:n,y:s}=this.mapToCanvasPoint(e);t.canvas.x=n,t.canvas.y=s,t.global.x=n,t.global.y=s,t.offset.x=n,t.offset.y=s;const{x:r,y:a}=this.mapToViewportPoint(t);return t.viewport.x=r,t.viewport.y=a,t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t);const{x:n,y:s}=this.mapToCanvasPoint(t);e.canvas.x=n,e.canvas.y=s,e.global.x=n,e.global.y=s,e.offset.x=n,e.offset.y=s;const{x:r,y:a}=this.mapToViewportPoint(e);return e.viewport.x=r,e.viewport.y=a,e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=Xqe[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=Op.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.shiftKey=t.shiftKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null}isEventOutsideOfTargetViewPort(e){if(this.isEventOutsideOfTargetElement(e))return!0;if(this.domElement.getViewBox){const t=this.mapToViewportPoint(this.mapToCanvasPoint(e)),n=this.domElement.getViewBox(),s=n.width(),r=n.height();return!(t.x<s&&t.y<r&&t.x>0&&t.y>0)}return!1}isEventOutsideOfTargetElement(e){let t=e.target;return e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]),t!==(this.domElement.getNativeHandler?this.domElement.getNativeHandler().nativeCanvas:this.domElement)}pauseTriggerEvent(){this.manager.pauseNotify=!0}resumeTriggerEvent(){this.manager.pauseNotify=!1}}var Ya;(function(i){i[i.INITIAL=0]="INITIAL",i[i.RUNNING=1]="RUNNING",i[i.PAUSE=2]="PAUSE"})(Ya||(Ya={}));class dv{static Avaliable(){return!!ue.global.getRequestAnimationFrame()}avaliable(){return dv.Avaliable()}tick(e,t){ue.global.getRequestAnimationFrame()(()=>{this.released||t(this)})}release(){this.released=!0}getTime(){return Date.now()}}class VA{static Avaliable(){return!0}avaliable(){return VA.Avaliable()}tick(e,t){this.timerId=setTimeout(()=>{t(this)},e)}release(){this.timerId>0&&(clearTimeout(this.timerId),this.timerId=-1)}getTime(){return Date.now()}}class qqe{set mode(e){this._mode!==e&&(this._mode=e,this.setupTickHandler())}get mode(){return this._mode}constructor(e=[]){this.handleTick=(t,n)=>{const{once:s=!1}=n??{};this.ifCanStop()?this.stop():(this._handlerTick(t),s||t.tick(this.interval,this.handleTick))},this._handlerTick=t=>{const n=this.tickerHandler.getTime();let s=0;this.lastFrameTime>=0&&(s=n-this.lastFrameTime),this.lastFrameTime=n,this.status===Ya.RUNNING&&(this.tickCounts++,this.timelines.forEach(r=>{r.tick(s)}))},this.init(),this.lastFrameTime=-1,this.tickCounts=0,this.timelines=e,this.autoStop=!0}init(){this.interval=NaN,this.status=Ya.INITIAL,ue.global.hooks.onSetEnv.tap("default-ticker",()=>{this.initHandler()}),ue.global.env&&this.initHandler()}addTimeline(e){this.timelines.push(e)}remTimeline(e){this.timelines=this.timelines.filter(t=>t!==e)}initHandler(){if(this._mode)return null;const e=[{mode:"raf",cons:dv},{mode:"timeout",cons:VA}];for(let t=0;t<e.length;t++)if(e[t].cons.Avaliable()){this.mode=e[t].mode;break}return null}setupTickHandler(){let e;switch(this._mode){case"raf":e=new dv;break;case"timeout":e=new VA;break;default:ii.getInstance().warn(""),e=new dv}return!!e.avaliable()&&(this.tickerHandler&&this.tickerHandler.release(),this.tickerHandler=e,!0)}setInterval(e){this.interval=e}getInterval(){return this.interval}setFPS(e){this.setInterval(1e3/e)}getFPS(){return 1e3/this.interval}tick(e){this.tickerHandler.tick(e,t=>{this.handleTick(t,{once:!0})})}tickTo(e){this.tickerHandler.tickTo&&this.tickerHandler.tickTo(e,t=>{this.handleTick(t,{once:!0})})}pause(){return this.status!==Ya.INITIAL&&(this.status=Ya.PAUSE,!0)}resume(){return this.status!==Ya.INITIAL&&(this.status=Ya.RUNNING,!0)}ifCanStop(){return!!(this.autoStop&&(!this.timelines.length||this.timelines.reduce((e,t)=>e+t.animateCount,0)===0))}start(e=!1){return this.status===Ya.RUNNING||!this.tickerHandler||!e&&(this.status===Ya.PAUSE||!this.timelines.length||this.timelines.reduce((t,n)=>t+n.animateCount,0)===0)?!1:(this.status=Ya.RUNNING,this.tickerHandler.tick(0,this.handleTick),!0)}stop(){this.status=Ya.INITIAL,this.setupTickHandler(),this.lastFrameTime=-1}}class gt{constructor(){}static linear(e){return e}static none(){return this.linear}static get(e){return e<-1?e=-1:e>1&&(e=1),function(t){return e===0?t:e<0?t*(t*-e+1+e):t*((2-t)*e+(1-e))}}static getPowIn(e){return function(t){return Math.pow(t,e)}}static getPowOut(e){return function(t){return 1-Math.pow(1-t,e)}}static getPowInOut(e){return function(t){return(t*=2)<1?.5*Math.pow(t,e):1-.5*Math.abs(Math.pow(2-t,e))}}static getBackIn(e){return function(t){return t*t*((e+1)*t-e)}}static getBackOut(e){return function(t){return--t*t*((e+1)*t+e)+1}}static getBackInOut(e){return e*=1.525,function(t){return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}}static sineIn(e){return 1-Math.cos(e*Math.PI/2)}static sineOut(e){return Math.sin(e*Math.PI/2)}static sineInOut(e){return-(Math.cos(Math.PI*e)-1)/2}static expoIn(e){return e===0?0:Math.pow(2,10*e-10)}static expoOut(e){return e===1?1:1-Math.pow(2,-10*e)}static expoInOut(e){return e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}static circIn(e){return-(Math.sqrt(1-e*e)-1)}static circOut(e){return Math.sqrt(1- --e*e)}static circInOut(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}static bounceOut(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}static bounceIn(e){return 1-gt.bounceOut(1-e)}static bounceInOut(e){return e<.5?.5*gt.bounceIn(2*e):.5*gt.bounceOut(2*e-1)+.5}static getElasticIn(e,t){return function(n){if(n===0||n===1)return n;const s=t/yt*Math.asin(1/e);return-e*Math.pow(2,10*(n-=1))*Math.sin((n-s)*yt/t)}}static getElasticOut(e,t){return function(n){if(n===0||n===1)return n;const s=t/yt*Math.asin(1/e);return e*Math.pow(2,-10*n)*Math.sin((n-s)*yt/t)+1}}static getElasticInOut(e,t){return function(n){const s=t/yt*Math.asin(1/e);return(n*=2)<1?e*Math.pow(2,10*(n-=1))*Math.sin((n-s)*yt/t)*-.5:e*Math.pow(2,-10*(n-=1))*Math.sin((n-s)*yt/t)*.5+1}}}gt.quadIn=gt.getPowIn(2),gt.quadOut=gt.getPowOut(2),gt.quadInOut=gt.getPowInOut(2),gt.cubicIn=gt.getPowIn(3),gt.cubicOut=gt.getPowOut(3),gt.cubicInOut=gt.getPowInOut(3),gt.quartIn=gt.getPowIn(4),gt.quartOut=gt.getPowOut(4),gt.quartInOut=gt.getPowInOut(4),gt.quintIn=gt.getPowIn(5),gt.quintOut=gt.getPowOut(5),gt.quintInOut=gt.getPowInOut(5),gt.backIn=gt.getBackIn(1.7),gt.backOut=gt.getBackOut(1.7),gt.backInOut=gt.getBackInOut(1.7),gt.elasticIn=gt.getElasticIn(1,.3),gt.elasticOut=gt.getElasticOut(1,.3),gt.elasticInOut=gt.getElasticInOut(1,.3*1.5);class Pre{constructor(){this.id=zn.GenAutoIncrementId(),this.animateHead=null,this.animateTail=null,this.animateCount=0,this.paused=!1}addAnimate(e){this.animateTail?(this.animateTail.nextAnimate=e,e.prevAnimate=this.animateTail,this.animateTail=e,e.nextAnimate=null):(this.animateHead=e,this.animateTail=e),this.animateCount++}pause(){this.paused=!0}resume(){this.paused=!1}tick(e){if(this.paused)return;let t=this.animateHead;for(this.animateCount=0;t;)t.status===Hs.END?this.removeAnimate(t):t.status===Hs.RUNNING||t.status===Hs.INITIAL?(this.animateCount++,t.advance(e)):t.status===Hs.PAUSED&&this.animateCount++,t=t.nextAnimate}clear(){let e=this.animateHead;for(;e;)e.release(),e=e.nextAnimate;this.animateHead=null,this.animateTail=null,this.animateCount=0}removeAnimate(e,t=!0){e._onRemove&&e._onRemove.forEach(n=>n()),e===this.animateHead?(this.animateHead=e.nextAnimate,e===this.animateTail?this.animateTail=null:this.animateHead.prevAnimate=null):e===this.animateTail?(this.animateTail=e.prevAnimate,this.animateTail.nextAnimate=null):(e.prevAnimate.nextAnimate=e.nextAnimate,e.nextAnimate.prevAnimate=e.prevAnimate),t&&e.release()}}const Ore=new Pre;class Ba{constructor(e,t,n,s,r){this.from=e,this.to=t,this.duration=n,this.easing=s,this.params=r,this.updateCount=0}bind(e,t){this.target=e,this.subAnimate=t,this.onBind()}onBind(){}onFirstRun(){}onStart(){}onEnd(){}getEndProps(){return this.to}getFromProps(){return this.from}getMergedEndProps(){var e;const t=this.getEndProps();return t?this._endProps===t?this._mergedEndProps:(this._endProps=t,void(this._mergedEndProps=Object.assign({},(e=this.step.prev.getLastProps())!==null&&e!==void 0?e:{},t))):this.step.prev?this.step.prev.getLastProps():t}update(e,t,n){if(this.updateCount===0){this.onFirstRun();const s=this.step.getLastProps();Object.keys(s).forEach(r=>{this.subAnimate.animate.validAttr(r)&&(n[r]=s[r])})}this.updateCount+=1,this.onUpdate(e,t,n),e&&this.onEnd()}}class Zqe extends Ba{constructor(e){super(null,null,0,"linear"),this.cb=e}onUpdate(e,t,n){}onStart(){this.cb()}}let UA=class B_{constructor(e=zn.GenAutoIncrementId(),t=Ore,n){this.id=e,this.timeline=t,this.status=Hs.INITIAL,this.tailAnimate=new tV(this),this.subAnimates=[this.tailAnimate],this.timeScale=1,this.rawPosition=-1,this._startTime=0,this._duringTime=0,this.timeline.addAnimate(this),this.slience=n}setTimeline(e){e!==this.timeline&&(this.timeline.removeAnimate(this,!1),e.addAnimate(this))}getStartTime(){return this._startTime}getDuration(){return this.subAnimates.reduce((e,t)=>e+t.totalDuration,0)}after(e){const t=e.getDuration();return this._startTime=t,this}afterAll(e){let t=-1/0;return e.forEach(n=>{t=br(n.getDuration(),t)}),this._startTime=t,this}parallel(e){return this._startTime=e.getStartTime(),this}static AddInterpolate(e,t){B_.interpolateMap.set(e,t)}play(e){if(this.tailAnimate.play(e),this.target){const t=this.target.stage;t&&t.renderNextFrame()}return this.subAnimates.length===1&&this.tailAnimate.totalDuration===e.duration&&this.trySetAttribute(e.getFromProps(),e.mode),this}trySetAttribute(e,t=B_.mode){e&&t&xy.SET_ATTR_IMMEDIATELY&&this.target.setAttributes&&this.target.setAttributes(e,!1,{type:pn.ANIMATE_PLAY})}runCb(e){const t=new Zqe(()=>{e(this,t.step.prev)});return this.tailAnimate.play(t),this}customInterpolate(e,t,n,s,r,a){const o=B_.interpolateMap.get(e)||B_.interpolateMap.get("");return!!o&&o(e,t,n,s,r,a)}pause(){this.status===Hs.RUNNING&&(this.status=Hs.PAUSED)}resume(){this.status===Hs.PAUSED&&(this.status=Hs.RUNNING)}to(e,t,n,s){if(this.tailAnimate.to(e,t,n,s),this.target){const r=this.target.stage;r&&r.renderNextFrame()}return this}from(e,t,n,s){if(this.tailAnimate.from(e,t,n,s),this.target){const r=this.target.stage;r&&r.renderNextFrame()}return this}wait(e){if(this.tailAnimate.wait(e),this.target){const t=this.target.stage;t&&t.renderNextFrame()}return this}startAt(e){if(this.tailAnimate.startAt(e),this.target){const t=this.target.stage;t&&t.renderNextFrame()}return this}loop(e){if(this.tailAnimate.loop=e,this.target){const t=this.target.stage;t&&t.renderNextFrame()}return this}reversed(e){if(this.tailAnimate.reversed=e,this.target){const t=this.target.stage;t&&t.renderNextFrame()}return this}bounce(e){if(this.tailAnimate.bounce=e,this.target){const t=this.target.stage;t&&t.renderNextFrame()}return this}subAnimate(){const e=new tV(this,this.tailAnimate);return this.tailAnimate=e,this.subAnimates.push(e),e.bind(this.target),this}getStartProps(){return this.subAnimates[0].getStartProps()}getEndProps(){return this.tailAnimate.getEndProps()}depreventAttr(e){this._preventAttrs&&this._preventAttrs.delete(e)}preventAttr(e){this._preventAttrs||(this._preventAttrs=new Set),this._preventAttrs.add(e)}preventAttrs(e){e.forEach(t=>this.preventAttr(t))}validAttr(e){return!this._preventAttrs||!this._preventAttrs.has(e)}bind(e){return this.target=e,this.target.onAnimateBind&&!this.slience&&this.target.onAnimateBind(this),this.subAnimates.forEach(t=>{t.bind(e)}),this}advance(e){if(this._duringTime<this._startTime){if(this._duringTime+e*this.timeScale<this._startTime)return void(this._duringTime+=e*this.timeScale);e=this._duringTime+e*this.timeScale-this._startTime,this._duringTime=this._startTime}this.status===Hs.INITIAL&&(this.status=Hs.RUNNING,this._onStart&&this._onStart.forEach(t=>t())),this.setPosition(Math.max(this.rawPosition,0)+e*this.timeScale)&&this.status===Hs.RUNNING&&(this.status=Hs.END,this._onEnd&&this._onEnd.forEach(t=>t()))}setPosition(e){let t,n=0;const s=this.rawPosition,r=this.subAnimates.reduce((o,l)=>o+l.totalDuration,0);e<0&&(e=0);const a=e>=r;if(a&&(e=r),e===s)return a;for(let o=0;o<this.subAnimates.length&&(t=this.subAnimates[o],!(n+t.totalDuration>=e));o++)n+=t.totalDuration,t=void 0;return this.rawPosition=e,t.setPosition(e-n),a}onStart(e){this._onStart||(this._onStart=[]),this._onStart.push(e)}onEnd(e){this._onEnd||(this._onEnd=[]),this._onEnd.push(e)}onRemove(e){this._onRemove||(this._onRemove=[]),this._onRemove.push(e)}onFrame(e){this._onFrame||(this._onFrame=[]),this._onFrame.push(e)}release(){this.status=Hs.END}stop(e){e||this.target.onStop(),e==="start"?this.target.onStop(this.getStartProps()):e==="end"?this.target.onStop(this.getEndProps()):this.target.onStop(e),this.release()}};UA.mode=xy.NORMAL,UA.interpolateMap=new Map;class tV{get totalDuration(){return this.calcAttr(),this._totalDuration+this._startAt}constructor(e,t){this.rawPosition=-1,this.position=0,this.loop=0,this.duration=0,this.animate=e,this.stepHead=new iV(0,0,t?Object.assign({},t.stepTail.props):{}),this.stepTail=this.stepHead,this.dirty=!0,this._startAt=0}calcAttr(){this.dirty&&(this._totalDuration=this.duration*(this.loop+1))}bind(e){return this.target=e,this}play(e){let t=e.duration;(t==null||t<0)&&(t=0);const n=e.easing,s=typeof n=="string"?gt[n]:n,r=this._addStep(t,null,s);return r.type=hm.customAnimate,this._appendProps(e.getEndProps(),r,!1),this._appendCustomAnimate(e,r),this}to(e,t,n,s){(t==null||t<0)&&(t=0);const r=typeof n=="string"?gt[n]:n,a=this._addStep(t,null,r);return a.type=hm.to,this._appendProps(e,a,!!s&&s.tempProps),a.propKeys||(a.propKeys=Object.keys(a.props)),s&&s.noPreventAttrs||this.target.animates.forEach(o=>{o.id!==this.animate.id&&o.preventAttrs(a.propKeys)}),this}from(e,t,n,s){this.to(e,0,n,s);const r={};this.stepTail.propKeys||(this.stepTail.propKeys=Object.keys(this.stepTail.props)),this.stepTail.propKeys.forEach(a=>{r[a]=this.getLastPropByName(a,this.stepTail)}),this.to(r,t,n,s),this.stepTail.type=hm.from}startAt(e){return e<0&&(e=0),this._startAt=e,this}getStartProps(){var e;return(e=this.stepHead)===null||e===void 0?void 0:e.props}getEndProps(){return this.stepTail.props}getLastStep(){return this._lastStep}wait(e){if(e>0){const t=this._addStep(+e,null);t.type=hm.wait,t.prev.customAnimate?t.props=t.prev.customAnimate.getEndProps():t.props=t.prev.props,this.target.onAddStep&&this.target.onAddStep(t)}return this}_addStep(e,t,n){const s=new iV(this.duration,e,t,n);return this.duration+=e,this.stepTail.append(s),this.stepTail=s,s}_appendProps(e,t,n){t.props=n?e:Object.assign({},e);let s=t.prev;const r=t.props;for(t.propKeys||(t.propKeys=Object.keys(t.props)),t.propKeys.forEach(o=>{t.props[o]===void 0&&(t.props[o]=this.target.getDefaultAttribute(o))});s.prev;)s.props&&(s.propKeys||(s.propKeys=Object.keys(s.props)),s.propKeys.forEach(o=>{r[o]===void 0&&(r[o]=s.props[o])})),t.propKeys=Object.keys(t.props),s=s.prev;const a=this.stepHead.props;t.propKeys||(t.propKeys=Object.keys(r)),t.propKeys.forEach(o=>{if(a[o]===void 0){const l=this.animate.getStartProps();a[o]=l[o]=this.target.getComputedAttribute(o)}}),this.target.onAddStep&&this.target.onAddStep(t)}_appendCustomAnimate(e,t){t.customAnimate=e,e.step=t,e.bind(this.target,this)}setPosition(e){var t;const n=this.duration,s=this.loop,r=this.rawPosition;let a,o,l=!1;const c=(t=this._startAt)!==null&&t!==void 0?t:0;if(e<0&&(e=0),e<c)return this.rawPosition=e,!1;if(e-=c,n<=0&&(l=!0,n<0)||(a=Math.floor(e/n),o=e-a*n,l=e>=s*n+n,l&&(o=n,a=s,e=o*a+n),e===r))return l;const u=!this.reversed!=!(this.bounce&&a%2);return u&&(o=n-o),this._deltaPosition=o-this.position,this.position=o,this.rawPosition=e+c,this.updatePosition(l,u),l}updatePosition(e,t){if(!this.stepHead)return;let n=this.stepHead.next;const s=this.position,r=this.duration;if(this.target&&n){let a=n.next;for(;a&&a.position<=s;)n=a,a=n.next;let o=e?r===0?1:s/r:(s-n.position)/n.duration;n.easing&&(o=n.easing(o)),this.tryCallCustomAnimateLifeCycle(n,this._lastStep||(t?this.stepTail:this.stepHead),t),this.updateTarget(n,o,e),this._lastStep=n,this.animate._onFrame&&this.animate._onFrame.forEach(l=>l(n,o))}}tryCallCustomAnimateLifeCycle(e,t,n){if(e!==t)if(n){let s=t.prev;for(;s&&s!==e;)s.customAnimate&&(s.customAnimate.onStart&&s.customAnimate.onStart(),s.customAnimate.onEnd&&s.customAnimate.onEnd()),s=e.prev;t&&t.customAnimate&&t.customAnimate.onEnd&&t.customAnimate.onEnd(),e&&e.customAnimate&&e.customAnimate.onStart&&e.customAnimate.onStart()}else{let s=t.next;for(;s&&s!==e;)s.customAnimate&&(s.customAnimate.onStart&&s.customAnimate.onStart(),s.customAnimate.onEnd&&s.customAnimate.onEnd()),s=s.next;t&&t.customAnimate&&t.customAnimate.onEnd&&t.customAnimate.onEnd(),e&&e.customAnimate&&e.customAnimate.onStart&&e.customAnimate.onStart()}}getLastPropByName(e,t){let n=t.prev;for(;n;){if(n.props&&n.props[e]!==void 0)return n.props[e];if(n.customAnimate){const s=n.customAnimate.getEndProps()[e];if(s!==void 0)return s}n=n.prev}return ii.getInstance().warn("step"),t.props[e]}updateTarget(e,t,n){e.props==null&&e.customAnimate==null||this.target.onStep(this,this.animate,e,t,n)}}class iV{constructor(e,t,n,s){this.duration=t,this.position=e,this.props=n,this.easing=s}append(e){e.prev=this,e.next=this.next,this.next=e}getLastProps(){let e=this.prev;for(;e;){if(e.props)return e.props;if(e.customAnimate)return e.customAnimate.getMergedEndProps();e=e.prev}return null}}const nV={duration:200,easing:"cubicOut"};var sV;(function(i){i[i.Top=1]="Top",i[i.Right=2]="Right",i[i.Bottom=4]="Bottom",i[i.Left=8]="Left",i[i.ALL=15]="ALL"})(sV||(sV={}));const Vc=[!1,!1,!1,!1],Jqe=i=>{var e;let t=!0;if(Ui(i,!0)){for(let n=0;n<4;n++)Vc[n]=i,t&&(t=!((e=Vc[n])!==null&&e!==void 0&&!e));t=i}else if(Array.isArray(i))for(let n=0;n<4;n++)Vc[n]=!!i[n],t&&(t=!!Vc[n]);else Vc[0]=!1,Vc[1]=!1,Vc[2]=!1,Vc[3]=!1;return{isFullStroke:t,stroke:Vc}},c_=[0,0,0,0],WA=i=>i?ie(i)?i.length===0?0:i.length===1?i[0]:i.length===2?(c_[0]=i[0],c_[2]=i[0],c_[1]=i[1],c_[3]=i[1],c_):i:i:0,Sg=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],sC=[1,2,3,0,1,2,3,0];function ID(i,e,t,n){for(;i>=yt;)i-=yt;for(;i<0;)i+=yt;for(;i>e;)e+=yt;Sg[0].x=t,Sg[1].y=t,Sg[2].x=-t,Sg[3].y=-t;const s=Math.ceil(i/co)%4,r=Math.ceil(e/co)%4;if(n.add(vi(i)*t,ti(i)*t),n.add(vi(e)*t,ti(e)*t),s!==r||e-i>Qt){let a=!1;for(let o=0;o<sC.length;o++)if(a||s!==sC[o]){if(a&&r===sC[o])break;if(a){const l=Sg[sC[o]];n.add(l.x,l.y)}}else{a=!0;const l=Sg[s];n.add(l.x,l.y)}}}function RD(i,e,t){const{x:n,y:s}=s8(i.x,i.y,e.x,e.y,t),{x:r,y:a}=s8(i.x1,i.y1,e.x1,e.y1,t),o=new sn(n,s,r,a);return o.defined=e.defined,o}function m5(i,e,t){if(!i||!e)return[];Array.isArray(i)||(i=[i]),Array.isArray(e)||(e=[e]);let n=[];if(i.length>e.length){n=e.map(s=>{const r=new sn(s.x,s.y,s.x1,s.y1);return r.defined=s.defined,r});for(let s=0;s<e.length;s++)n[s]=RD(i[s],e[s],t)}else{n=e.map(s=>{const r=new sn(s.x,s.y,s.x1,s.y1);return r.defined=s.defined,r});for(let s=0;s<i.length;s++)n[s]=RD(i[s],e[s],t)}return n}function rC(i,e){if(ie(i)){let t;for(let n=0;n<i.length&&t===void 0;n++)t=i[n][e];return t}return i[e]}class FP{constructor(e=FP.TimeOut){this.durations=[],this.timeout=e,this.lastDate=0,this.durationsListThreshold=30}call(e){return this.lastDate=Date.now(),setTimeout(()=>{this.appendDuration(Date.now()-this.lastDate),e(0)},this.timeout,!0)}clear(e){clearTimeout(e)}appendDuration(e){this.durations.push(e),this.durations.length>this.durationsListThreshold&&this.durations.shift(),this.timeout=Math.min(Math.max(this.durations.reduce((t,n)=>t+n,0)/this.durations.length,1e3/60),1e3/30)}}FP.TimeOut=1e3/60;const rV=new FP,au=(i,e)=>be(i)&&i[i.length-1]==="%"?e*(Number.parseFloat(i.substring(0,i.length-1))/100):i;class Qqe extends Ba{constructor(e,t,n,s,r){super(e,t,n,s,r)}getEndProps(){return this.valid===!1?{}:{text:this.to}}onBind(){var e,t,n,s,r,a,o,l;this.fromNumber=ye((e=this.from)===null||e===void 0?void 0:e.text)?(t=this.from)===null||t===void 0?void 0:t.text:Number.parseFloat((n=this.from)===null||n===void 0?void 0:n.text),this.toNumber=ye((s=this.to)===null||s===void 0?void 0:s.text)?(r=this.to)===null||r===void 0?void 0:r.text:Number.parseFloat((a=this.to)===null||a===void 0?void 0:a.text),Number.isFinite(this.toNumber)||(this.fromNumber=0),Number.isFinite(this.toNumber)||(this.valid=!1),this.valid!==!1&&(this.decimalLength=(l=(o=this.params)===null||o===void 0?void 0:o.fixed)!==null&&l!==void 0?l:Math.max(my(this.fromNumber),my(this.toNumber)))}onEnd(){}onUpdate(e,t,n){this.valid!==!1&&(n.text=e?this.toNumber:(this.fromNumber+(this.toNumber-this.fromNumber)*t).toFixed(this.decimalLength))}}var aV;(function(i){i[i.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",i[i.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",i[i.TOP_TO_BOTTOM=2]="TOP_TO_BOTTOM",i[i.BOTTOM_TO_TOP=3]="BOTTOM_TO_TOP",i[i.STROKE=4]="STROKE"})(aV||(aV={}));class Mre extends Ba{constructor(e,t,n,s,r){var a,o;super(e,t,n,s,r),this.newPointAnimateType=(a=r==null?void 0:r.newPointAnimateType)!==null&&a!==void 0?a:"grow",this.clipRangeByDimension=(o=r==null?void 0:r.clipRangeByDimension)!==null&&o!==void 0?o:"x"}getPoints(e,t=!1){if(e.points)return e.points;if(e.segments){const n=[];return this.segmentsCache||(this.segmentsCache=[]),e.segments.map(s=>{var r,a;s.points&&n.push(...s.points),t&&this.segmentsCache.push((a=(r=s.points)===null||r===void 0?void 0:r.length)!==null&&a!==void 0?a:0)}),n}return[]}onBind(){const e=this.getPoints(this.from),t=this.getPoints(this.to,!0);this.fromPoints=e?Array.isArray(e)?e:[e]:[],this.toPoints=t?Array.isArray(t)?t:[t]:[];const n=new Map;this.fromPoints.forEach(c=>{c.context&&n.set(c.context,c)});let s,r,a=1/0,o=-1/0;for(let c=0;c<this.toPoints.length;c+=1)if(n.has(this.toPoints[c].context)){a=c,s=n.get(this.toPoints[c].context);break}for(let c=this.toPoints.length-1;c>=0;c-=1)if(n.has(this.toPoints[c].context)){o=c,r=n.get(this.toPoints[c].context);break}this.newPointAnimateType==="clip"&&this.toPoints.length!==0&&(Number.isFinite(o)?(this.clipRange=this.toPoints[o][this.clipRangeByDimension]/this.toPoints[this.toPoints.length-1][this.clipRangeByDimension],Z(this.clipRange)?this.clipRange=zi(this.clipRange,0,1):this.clipRange=0):this.clipRange=0);let l=this.toPoints[0];this.interpolatePoints=this.toPoints.map((c,u)=>{const h=n.get(c.context);return h?(l=h,[h,c]):this.newPointAnimateType==="appear"||this.newPointAnimateType==="clip"?[c,c]:u<a&&s?[s,c]:u>o&&r?[r,c]:[l,c]}),this.points=this.interpolatePoints.map(c=>{const u=c[0],h=c[1],d=new sn(u.x,u.y,u.x1,u.y1);return d.defined=h.defined,d.context=h.context,d})}onUpdate(e,t,n){if(this.points=this.points.map((s,r)=>{const a=RD(this.interpolatePoints[r][0],this.interpolatePoints[r][1],t);return a.context=s.context,a}),this.clipRange&&(n.clipRange=this.clipRange+(1-this.clipRange)*t),this.segmentsCache&&this.to.segments){let s=0;n.segments=this.to.segments.map((r,a)=>{const o=s+this.segmentsCache[a],l=this.points.slice(s,o);return s=o,Object.assign(Object.assign({},r),{points:l})})}else n.points=this.points}}class Ire extends Ba{constructor(e,t,n,s,r){super(null,null,n,s,r),this.clipFromAttribute=e,this.clipToAttribute=t,this._group=r==null?void 0:r.group,this._clipGraphic=r==null?void 0:r.clipGraphic}onBind(){this._group&&this._clipGraphic&&(this._lastClip=this._group.attribute.clip,this._lastPath=this._group.attribute.path,this._group.setAttributes({clip:!0,path:[this._clipGraphic]},!1,{type:pn.ANIMATE_BIND}))}onEnd(){this._group&&this._group.setAttributes({clip:this._lastClip,path:this._lastPath},!1,{type:pn.ANIMATE_END})}onUpdate(e,t,n){if(!this._clipGraphic)return;const s={};Object.keys(this.clipFromAttribute).forEach(r=>{s[r]=this.clipFromAttribute[r]+(this.clipToAttribute[r]-this.clipFromAttribute[r])*t}),this._clipGraphic.setAttributes(s,!1,{type:pn.ANIMATE_UPDATE,animationState:{ratio:t,end:e}})}}class eZe extends Ire{constructor(e,t,n,s,r){var a,o,l,c,u,h,d,p,f,g,m,y;const b=(o=(a=r==null?void 0:r.group)===null||a===void 0?void 0:a.attribute)!==null&&o!==void 0?o:{},x=(l=b.width)!==null&&l!==void 0?l:0,S=(c=b.height)!==null&&c!==void 0?c:0,C=(u=r==null?void 0:r.animationType)!==null&&u!==void 0?u:"in",w=(h=r==null?void 0:r.startAngle)!==null&&h!==void 0?h:0,A=(d=r==null?void 0:r.orient)!==null&&d!==void 0?d:"clockwise";let T=0,E=0;A==="anticlockwise"?(E=C==="in"?w+2*Math.PI:w,E=w+2*Math.PI):(T=w,E=C==="out"?w+2*Math.PI:w);const P=ue.graphicService.creator.arc({x:(f=(p=r==null?void 0:r.center)===null||p===void 0?void 0:p.x)!==null&&f!==void 0?f:x/2,y:(m=(g=r==null?void 0:r.center)===null||g===void 0?void 0:g.y)!==null&&m!==void 0?m:S/2,outerRadius:(y=r==null?void 0:r.radius)!==null&&y!==void 0?y:(x+S)/2,innerRadius:0,startAngle:T,endAngle:E,fill:!0});let O,M;A==="anticlockwise"?(O={startAngle:w+2*Math.PI},M={startAngle:w}):(O={endAngle:w},M={endAngle:w+2*Math.PI}),super(C==="in"?O:M,C==="in"?M:O,n,s,{group:r==null?void 0:r.group,clipGraphic:P})}}class oV extends Ire{constructor(e,t,n,s,r){var a,o,l,c,u,h,d,p,f;const g=(o=(a=r==null?void 0:r.group)===null||a===void 0?void 0:a.attribute)!==null&&o!==void 0?o:{},m=(c=(l=r==null?void 0:r.width)!==null&&l!==void 0?l:g.width)!==null&&c!==void 0?c:0,y=(h=(u=r==null?void 0:r.height)!==null&&u!==void 0?u:g.height)!==null&&h!==void 0?h:0,b=(d=r==null?void 0:r.animationType)!==null&&d!==void 0?d:"in",x=(p=r==null?void 0:r.direction)!==null&&p!==void 0?p:"x",S=(f=r==null?void 0:r.orient)!==null&&f!==void 0?f:"positive",C=ue.graphicService.creator.rect({x:0,y:0,width:b==="in"&&x==="x"?0:m,height:b==="in"&&x==="y"?0:y,fill:!0});let w={},A={};x==="y"?S==="negative"?(w={y,height:0},A={y:0,height:y}):(w={height:0},A={height:y}):S==="negative"?(w={x:m,width:0},A={x:0,width:m}):(w={width:0},A={width:m}),super(b==="in"?w:A,b==="in"?A:w,n,s,{group:r==null?void 0:r.group,clipGraphic:C})}}class tZe extends Ba{onStart(){const{center:e,r:t}=typeof this.params=="function"?this.params():this.params,n=this.target.getComputedAttribute("x"),s=this.target.getComputedAttribute("y"),r=this.target.getComputedAttribute("z"),a=Math.acos((s-e.y)/t);let o=Math.acos((n-e.x)/t/Math.sin(a));r-e.z<0&&(o=yt-o),this.theta=o,this.phi=a}onBind(){}onEnd(){}onUpdate(e,t,n){if(this.phi==null||this.theta==null)return;const{center:s,r,cb:a}=typeof this.params=="function"?this.params():this.params,o=2*Math.PI*t,l=this.theta+o,c=this.phi,u=r*Math.sin(c)*Math.cos(l)+s.x,h=r*Math.cos(c)+s.y,d=r*Math.sin(c)*Math.sin(l)+s.z;for(n.x=u,n.y=h,n.z=d,n.alpha=l+Qt/2;n.alpha>yt;)n.alpha-=yt;n.alpha=yt-n.alpha,n.zIndex=-1e4*n.z,a&&a(n)}}class iZe extends Ba{constructor(e,t){super(null,null,e,"linear"),this.customAnimates=t}initAnimates(){this.customAnimates.forEach(e=>{e.step=this.step,e.subAnimate=this.subAnimate,e.target=this.target})}getEndProps(){const e={};return this.customAnimates.forEach(t=>{Object.assign(e,t.getEndProps())}),e}onBind(){this.initAnimates(),this.customAnimates.forEach(e=>{e.onBind()})}onEnd(){this.customAnimates.forEach(e=>{e.onEnd()})}onStart(){this.customAnimates.forEach(e=>{e.onStart()})}onUpdate(e,t,n){this.updating||(this.updating=!0,this.customAnimates.forEach(s=>{const r=s.easing;t=(typeof r=="string"?gt[r]:r)(t),s.onUpdate(e,t,n)}),this.updating=!1)}}const nZe=i=>{if(!i)return{x:0,y:0,width:0,height:0};let e=B(i.width)?i.x1-i.x:i.width,t=B(i.height)?i.y1-i.y:i.height,n=0,s=0;return e<0?(n=e,e=-e):Number.isNaN(e)&&(e=0),t<0?(s=t,t=-t):Number.isNaN(t)&&(t=0),{x:n,y:s,width:e,height:t}};var wa;(function(i){i[i.Color255=0]="Color255",i[i.Color1=1]="Color1"})(wa||(wa={}));class dn{static Get(e,t=wa.Color1,n=[0,0,0,1]){if(t===wa.Color1){const a=dn.store1[e];if(a)return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n;const o=An.parseColorString(e);if(o){const l=[o.r/255,o.g/255,o.b/255,o.opacity];dn.store1[e]=l,dn.store255[e]=[o.r,o.g,o.b,o.opacity],n[0]=l[0],n[1]=l[1],n[2]=l[2],n[3]=l[3]}return n}const s=dn.store255[e];if(s)return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n;const r=An.parseColorString(e);return r&&(dn.store1[e]=[r.r/255,r.g/255,r.b/255,r.opacity],dn.store255[e]=[r.r,r.g,r.b,r.opacity],n[0]=r.r,n[1]=r.g,n[2]=r.b,n[3]=r.opacity),n}static Set(e,t,n){if(t===wa.Color1){if(dn.store1[e])return;dn.store1[e]=n,dn.store255[e]=[Math.floor(255*n[0]),Math.floor(255*n[1]),Math.floor(255*n[2]),Math.floor(255*n[3])]}else{if(dn.store255[e])return;dn.store255[e]=n,dn.store1[e]=[n[0]/255,n[1]/255,n[2]/255,n[3]]}}}dn.store255={},dn.store1={};function aC(i,e=!1){return Array.isArray(i)&&ye(i[0])?e?`rgb(${Math.round(i[0])},${Math.round(i[1])},${Math.round(i[2])},${i[3].toFixed(2)})`:`rgb(${Math.round(i[0])},${Math.round(i[1])},${Math.round(i[2])})`:i}function Vm(i,e,t,n,s){return Array.isArray(i)&&!ye(i[0])||Array.isArray(e)&&!ye(e[0])?new Array(4).fill(0).map((r,a)=>lV(ie(i)?i[a]:i,ie(e)?e[a]:e,t,n)):lV(i,e,t,n,s)}function lV(i,e,t,n,s){if(!i||!e)return i&&aC(i)||e&&aC(e)||!1;let r,a,o=!1,l=!1;if(Array.isArray(i)?r=i:typeof i=="string"?r=dn.Get(i,wa.Color255):o=!0,Array.isArray(e)?a=e:typeof e=="string"?a=dn.Get(e,wa.Color255):l=!0,o!==l){const c=o?i:e,u=o?e:i,h=Object.assign(Object.assign({},c),{stops:c.stops.map(d=>Object.assign(Object.assign({},d),{color:aC(u)}))});return o?Vm(c,h,t,n,s):Vm(h,c,t,n,s)}if(o){if(i.gradient===e.gradient){const c=i,u=e,h=c.stops,d=u.stops;if(h.length!==d.length)return!1;if(c.gradient==="linear")return sZe(c,u,t);if(c.gradient==="radial")return rZe(c,u,t);if(c.gradient==="conical")return aZe(c,u,t)}return!1}return s&&s(r,a),aC(oZe(r,a,t),n)}function sZe(i,e,t){const n=i.stops,s=e.stops;return{gradient:"linear",x0:i.x0+(e.x0-i.x0)*t,x1:i.x1+(e.x1-i.x1)*t,y0:i.y0+(e.y0-i.y0)*t,y1:i.y1+(e.y1-i.y1)*t,stops:new Array(n.length).fill(0).map((r,a)=>({color:y5(n[a].color,s[a].color,t),offset:n[a].offset+(s[a].offset-n[a].offset)*t}))}}function rZe(i,e,t){const n=i.stops,s=e.stops;return{gradient:"radial",x0:i.x0+(e.x0-i.x0)*t,x1:i.x1+(e.x1-i.x1)*t,y0:i.y0+(e.y0-i.y0)*t,y1:i.y1+(e.y1-i.y1)*t,r0:i.r0+(e.r0-i.r0)*t,r1:i.r1+(e.r1-i.r1)*t,stops:new Array(n.length).fill(0).map((r,a)=>({color:y5(n[a].color,s[a].color,t),offset:n[a].offset+(s[a].offset-n[a].offset)*t}))}}function aZe(i,e,t){const n=i.stops,s=e.stops;return{gradient:"conical",startAngle:i.startAngle+(e.startAngle-i.startAngle)*t,endAngle:i.endAngle+(e.endAngle-i.endAngle)*t,x:i.x+(e.x-i.x)*t,y:i.y+(e.y-i.y)*t,stops:new Array(n.length).fill(0).map((r,a)=>({color:y5(n[a].color,s[a].color,t),offset:n[a].offset+(s[a].offset-n[a].offset)*t}))}}function oZe(i,e,t){return[i[0]+(e[0]-i[0])*t,i[1]+(e[1]-i[1])*t,i[2]+(e[2]-i[2])*t,i[3]+(e[3]-i[3])*t]}const Uc=[0,0,0,0],u_=[0,0,0,0];function y5(i,e,t){return dn.Get(i,wa.Color255,Uc),dn.Get(e,wa.Color255,u_),`rgba(${Math.round(Uc[0]+(u_[0]-Uc[0])*t)},${Math.round(Uc[1]+(u_[1]-Uc[1])*t)},${Math.round(Uc[2]+(u_[2]-Uc[2])*t)},${Uc[3]+(u_[3]-Uc[3])*t})`}class lZe extends Ba{getEndProps(){return{}}onBind(){this.target.setTheme({common:{opacity:0}})}onEnd(){this.target.setTheme({common:{opacity:1}})}onUpdate(e,t,n){this.target.setTheme({common:{opacity:t}})}}class cZe extends Ba{getEndProps(){return{}}onBind(){this.target.setTheme({common:{opacity:1}})}onEnd(){this.target.setTheme({common:{opacity:0}})}onUpdate(e,t,n){this.target.setTheme({common:{opacity:1-t}})}}class di{static GetImage(e,t){var n;const s=di.cache.get(e);s?s.loadState==="fail"?ue.global.getRequestAnimationFrame()(()=>{t.imageLoadFail(e)}):s.loadState==="init"||s.loadState==="loading"?(n=s.waitingMark)===null||n===void 0||n.push(t):t&&t.imageLoadSuccess(e,s.data):di.loadImage(e,t)}static GetSvg(e,t){var n;let s=di.cache.get(e);s?s.loadState==="fail"?ue.global.getRequestAnimationFrame()(()=>{t.imageLoadFail(e)}):s.loadState==="init"||s.loadState==="loading"?(n=s.waitingMark)===null||n===void 0||n.push(t):t&&t.imageLoadSuccess(e,s.data):(s={type:"image",loadState:"init"},di.cache.set(e,s),s.dataPromise=ue.global.loadSvg(e),s.dataPromise?(s.waitingMark=[t],s.dataPromise.then(r=>{var a;s.loadState=r!=null&&r.data?"success":"fail",s.data=r==null?void 0:r.data,(a=s.waitingMark)===null||a===void 0||a.map((o,l)=>{r!=null&&r.data?(s.loadState="success",s.data=r.data,o.imageLoadSuccess(e,r.data)):(s.loadState="fail",o.imageLoadFail(e))}),s.waitingMark&&(s.waitingMark=[])})):(s.loadState="fail",t.imageLoadFail(e)))}static GetFile(e,t){let n=di.cache.get(e);return n?n.loadState==="init"||n.loadState==="fail"?Promise.reject():n.loadState==="loading"?n.dataPromise.then(s=>s.data):Promise.resolve(n.data):(n={type:t,loadState:"init"},di.cache.set(e,n),t==="arrayBuffer"?n.dataPromise=ue.global.loadArrayBuffer(e):t==="blob"?n.dataPromise=ue.global.loadBlob(e):t==="json"&&(n.dataPromise=ue.global.loadJson(e)),n.dataPromise.then(s=>s.data))}static loading(){setTimeout(()=>{if(!di.isLoading&&di.toLoadAueue.length){di.isLoading=!0;const e=di.toLoadAueue.splice(0,10),t=[];e.forEach(n=>{const{url:s,marks:r}=n,a={type:"image",loadState:"init"};if(di.cache.set(s,a),a.dataPromise=ue.global.loadImage(s),a.dataPromise){a.waitingMark=r;const o=a.dataPromise.then(l=>{var c;a.loadState=l!=null&&l.data?"success":"fail",a.data=l==null?void 0:l.data,(c=a.waitingMark)===null||c===void 0||c.map((u,h)=>{l!=null&&l.data?(a.loadState="success",a.data=l.data,u.imageLoadSuccess(s,l.data)):(a.loadState="fail",u.imageLoadFail(s))}),a.waitingMark&&(a.waitingMark=[])});t.push(o)}else a.loadState="fail",r.forEach(o=>o.imageLoadFail(s))}),Promise.all(t).then(()=>{di.isLoading=!1,this.onLoadSuccessCb.forEach(n=>n()),di.loading()}).catch(n=>{console.error(n),di.isLoading=!1,this.onLoadSuccessCb.forEach(s=>s()),di.loading()})}},0)}static loadImage(e,t){const n=cV(e,di.toLoadAueue);if(n!==-1)return di.toLoadAueue[n].marks.push(t),void di.loading();di.toLoadAueue.push({url:e,marks:[t]}),di.loading()}static improveImageLoading(e){const t=cV(e,di.toLoadAueue);if(t!==-1){const n=di.toLoadAueue.splice(t,1);di.toLoadAueue.unshift(n[0])}}static onLoadSuccess(e){this.onLoadSuccessCb.push(e)}}function cV(i,e){for(let t=0;t<e.length;t++)if(e[t].url===i)return t;return-1}di.cache=new Map,di.isLoading=!1,di.toLoadAueue=[],di.onLoadSuccessCb=[];const uZe=new Zi,uV=new Qi,Pa=["lineWidth","scaleX","scaleY","angle","anchor","visible"],hV=["x","y"],dV=["scaleX","scaleY"],pV=["angle"],h_=new sn,Ls={strokeSeg:1,boundsPadding:2,pickMode:1,boundsMode:1,customPickShape:1,pickable:1,childrenPickable:1,visible:1,zIndex:1,layout:1,keepDirIn3d:1,globalZIndex:1,outerBorder:1,innerBorder:1,lineDash:1,lineCap:1,lineJoin:1,miterLimit:2,strokeBoundsBuffer:2,scaleCenter:1,anchor:1,anchor3d:1,postMatrix:1,backgroundMode:2,background:1,texture:1,cursor:1,html:1};class sr extends Wqe{static mixin(e){const t=Object.keys(e);for(let n=0;n<t.length;++n){const s=t[n];Object.defineProperty(sr.prototype,s,Object.getOwnPropertyDescriptor(e,s))}}get AABBBounds(){return this.tryUpdateAABBBounds(this.attribute.boundsMode==="imprecise")}get OBBBounds(){return this.tryUpdateOBBBounds()}get globalAABBBounds(){return this.tryUpdateGlobalAABBBounds()}get transMatrix(){return this.tryUpdateLocalTransMatrix(!0)}get globalTransMatrix(){return this.tryUpdateGlobalTransMatrix(!0)}constructor(e={}){var t;super(),this._AABBBounds=new Qi,this._updateTag=ci.INIT,this.attribute=e,this.valid=this.isValid(),this.updateAABBBoundsStamp=0,e.background?this.loadImage((t=e.background.background)!==null&&t!==void 0?t:e.background,!0):e.shadowGraphic&&this.setShadowGraphic(e.shadowGraphic)}setMode(e){e==="3d"?this.set3dMode():this.set2dMode()}set3dMode(){this.in3dMode=!0}set2dMode(){this.in3dMode=!1}getOffsetXY(e,t=!1){var n,s;const{dx:r=e.dx,dy:a=e.dy}=this.attribute;if(t&&this.parent){const o=this.parent.attribute;h_.x=r+((n=o.scrollX)!==null&&n!==void 0?n:0),h_.y=a+((s=o.scrollY)!==null&&s!==void 0?s:0)}else h_.x=r,h_.y=a;return h_}onAnimateBind(e){this._emitCustomEvent("animate-bind",e)}tryUpdateAABBBounds(e){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;if(!this.valid)return this._AABBBounds.clear(),this._AABBBounds;ue.graphicService.beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);const t=this.doUpdateAABBBounds(e);return ue.graphicService.afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,!0),t}tryUpdateOBBBounds(){return this._OBBBounds||(this._OBBBounds=new OKe),this.tryUpdateAABBBounds(),this.updateOBBBoundsStamp===this.updateAABBBoundsStamp?this._OBBBounds:(this.updateOBBBoundsStamp=this.updateAABBBoundsStamp,this.valid?this.doUpdateOBBBounds():(this._OBBBounds.clear(),this._OBBBounds))}combindShadowAABBBounds(e){if(this.shadowRoot){const t=this.shadowRoot.AABBBounds.clone();e.union(t)}}doUpdateOBBBounds(){return this._OBBBounds}doUpdateAABBBounds(e){this.updateAABBBoundsStamp++;const t=this.getGraphicTheme();this._AABBBounds.clear();const n=this.attribute,s=this.updateAABBBounds(n,t,this._AABBBounds,e),{boundsPadding:r=t.boundsPadding}=n,a=WA(r);return a&&s.expand(a),this.clearUpdateBoundTag(),s}updatePathProxyAABBBounds(e){const t=typeof this.pathProxy=="function"?this.pathProxy(this.attribute):this.pathProxy;if(!t)return!1;const n=new d5(e);return Ed(t.commandList,n,0,0),!0}tryUpdateGlobalAABBBounds(){const e=this.AABBBounds;return this._globalAABBBounds?this._globalAABBBounds.setValue(e.x1,e.y1,e.x2,e.y2):this._globalAABBBounds=e.clone(),this._globalAABBBounds.empty()||this.parent&&this._globalAABBBounds.transformWithMatrix(this.parent.globalTransMatrix),this._globalAABBBounds}tryUpdateGlobalTransMatrix(e=!0){if(this._globalTransMatrix){if(this.parent){const t=this.parent.globalTransMatrix;this._globalTransMatrix.setValue(t.a,t.b,t.c,t.d,t.e,t.f)}}else this._globalTransMatrix=this.parent?this.parent.globalTransMatrix.clone():this.transMatrix.clone();return this.shouldUpdateGlobalMatrix()&&this.doUpdateGlobalMatrix(),this._globalTransMatrix}shouldUpdateGlobalMatrix(){return!0}tryUpdateLocalTransMatrix(e=!0){return this._transMatrix||(this._transMatrix=new Zi),this.shouldUpdateLocalMatrix()&&(this.doUpdateLocalMatrix(),e&&this.clearUpdateLocalPositionTag()),this._transMatrix}shouldUpdateAABBBounds(){return this.shadowRoot?(!!(this._updateTag&ci.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds())&&ue.graphicService.validCheck(this.attribute,this.getGraphicTheme(),this._AABBBounds,this):!!(this._updateTag&ci.UPDATE_BOUNDS)&&ue.graphicService.validCheck(this.attribute,this.getGraphicTheme(),this._AABBBounds,this)}shouldSelfChangeUpdateAABBBounds(){return this.shadowRoot?!!(this._updateTag&ci.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds():!!(this._updateTag&ci.UPDATE_BOUNDS)}shouldUpdateLocalMatrix(){return!!(this._updateTag&ci.UPDATE_LOCAL_MATRIX)}isValid(){var e,t;const n=this.attribute;return Number.isFinite(((e=n.x)!==null&&e!==void 0?e:0)+((t=n.y)!==null&&t!==void 0?t:0))}_validNumber(e){return e==null||Number.isFinite(e)}shouldUpdateShape(){return!!(this._updateTag&ci.UPDATE_SHAPE)}clearUpdateShapeTag(){this._updateTag&=ci.CLEAR_SHAPE}containsPoint(e,t,n,s){if(!s)return!1;if(n===by.GLOBAL){const r=new sn(e,t);this.parent&&this.parent.globalTransMatrix.transformPoint(r,r),e=r.x,t=r.y}return s.containsPoint(this,{x:e,y:t})}setAttributes(e,t=!1,n){(e=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(e,this.attribute,null,n)||e).background?this.loadImage(e.background,!0):e.shadowGraphic&&this.setShadowGraphic(e.shadowGraphic),this._setAttributes(e,t,n)}_setAttributes(e,t=!1,n){const s=Object.keys(e);for(let r=0;r<s.length;r++){const a=s[r];this.attribute[a]=e[a]}this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!t&&!this.needUpdateTags(s)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(n)}setAttribute(e,t,n,s){var r;const a=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({[e]:t},this.attribute,e,s);a?this._setAttributes(a,n,s):B((r=this.normalAttrs)===null||r===void 0?void 0:r[e])?(this.attribute[e]=t,this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!n&&!this.needUpdateTag(e)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(s)):this.normalAttrs[e]=t,e==="background"?this.loadImage(t,!0):e==="shadowGraphic"&&this.setShadowGraphic(t)}needUpdateTags(e,t=Pa){for(let n=0;n<t.length;n++){const s=t[n];if(e.indexOf(s)!==-1)return!0}return!1}needUpdateTag(e,t=Pa){for(let n=0;n<t.length;n++)if(e===t[n])return!0;return!1}initAttributes(e){const t={type:pn.INIT};e=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(e,this.attribute,null,t)||e,this.attribute=e,e.background?this.loadImage(e.background,!0):e.shadowGraphic&&this.setShadowGraphic(e.shadowGraphic),this._updateTag=ci.INIT,this.valid=this.isValid(),this.onAttributeUpdate(t)}translate(e,t){var n,s;if(e===0&&t===0)return this;const r={type:pn.TRANSLATE},a=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({x:e,y:t},this.attribute,hV,r);a&&(e=a.x,t=a.y,delete a.x,delete a.y,this._setAttributes(a));const o=this.attribute,l=o.postMatrix;return l?ue.transformUtil.fromMatrix(l,l).translate(e,t):(o.x=((n=o.x)!==null&&n!==void 0?n:es.x)+e,o.y=((s=o.y)!==null&&s!==void 0?s:es.y)+t),this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r),this}translateTo(e,t){const n=this.attribute;if(n.x===e&&n.y===t)return this;const s={type:pn.TRANSLATE_TO},r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({x:e,y:t},this.attribute,hV,s);return r?(this._setAttributes(r,!1,s),this):(n.x=e,n.y=t,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(s),this)}scale(e,t,n){var s,r;if(e===1&&t===1)return this;const a={type:pn.SCALE},o=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({scaleX:e,scaleY:t,scaleCenter:n},this.attribute,dV,a);o&&(e=o.scaleX,t=o.scaleY,delete o.scaleX,delete o.scaleY,this._setAttributes(o));const l=this.attribute;if(n){let{postMatrix:c}=this.attribute;c||(c=new Zi,l.postMatrix=c),ue.transformUtil.fromMatrix(c,c).scale(e,t,n)}else l.scaleX=((s=l.scaleX)!==null&&s!==void 0?s:es.scaleX)*e,l.scaleY=((r=l.scaleY)!==null&&r!==void 0?r:es.scaleY)*t;return this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(a),this}scaleTo(e,t){const n=this.attribute;if(n.scaleX===e&&n.scaleY===t)return this;const s={type:pn.SCALE_TO},r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({scaleX:e,scaleY:t},this.attribute,dV,s);return r?(this._setAttributes(r,!1,s),this):(n.scaleX=e,n.scaleY=t,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(s),this)}rotate(e,t){var n;if(e===0)return this;const s={type:pn.ROTATE},r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({angle:e,rotateCenter:t},this.attribute,pV,s);r&&(delete r.angle,this._setAttributes(r,!1,s));const a=this.attribute;if(t){let{postMatrix:o}=this.attribute;o||(o=new Zi,a.postMatrix=o),ue.transformUtil.fromMatrix(o,o).rotate(e,t)}else a.angle=((n=a.angle)!==null&&n!==void 0?n:es.angle)+e;return this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(s),this}rotateTo(e){const t=this.attribute;if(t.angle===e)return this;const n={type:pn.ROTATE_TO},s=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(e,this.attribute,pV,n);return s?(this._setAttributes(s,!1,n),this):(t.angle=e,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(n),this)}skewTo(e,t){return this}animate(e){this.animates||(this.animates=new Map);const t=new UA(e==null?void 0:e.id,this.stage&&this.stage.getTimeline(),e==null?void 0:e.slience);if(t.bind(this),e){const{onStart:n,onFrame:s,onEnd:r,onRemove:a}=e;n!=null&&t.onStart(n),s!=null&&t.onFrame(s),r!=null&&t.onEnd(r),a!=null&&t.onRemove(a),t.interpolateFunc=e.interpolate}return this.animates.set(t.id,t),t.onRemove(()=>{this.animates.delete(t.id)}),t}onAttributeUpdate(e){e&&e.skipUpdateCallback||(ue.graphicService.onAttributeUpdate(this),this._emitCustomEvent("afterAttributeUpdate",e))}update(e){e?(e.bounds&&this.tryUpdateAABBBounds(this.attribute.boundsMode==="imprecise"),e.trans&&this.tryUpdateLocalTransMatrix()):(this.tryUpdateAABBBounds(this.attribute.boundsMode==="imprecise"),this.tryUpdateLocalTransMatrix())}hasState(e){return!(!this.currentStates||!this.currentStates.length)&&(!!B(e)||this.currentStates.includes(e))}getState(e){var t;return(t=this.states)===null||t===void 0?void 0:t[e]}applyStateAttrs(e,t,n,s){var r,a,o,l;if(n){const c=Object.keys(e),u=this.getNoWorkAnimateAttr(),h={};let d;c.forEach(f=>{u[f]?(d||(d={}),d[f]=e[f]):h[f]=s&&e[f]===void 0?this.getDefaultAttribute(f):e[f]});const p=this.animate({slience:!0});p.stateNames=t,p.to(h,(a=(r=this.stateAnimateConfig)===null||r===void 0?void 0:r.duration)!==null&&a!==void 0?a:nV.duration,(l=(o=this.stateAnimateConfig)===null||o===void 0?void 0:o.easing)!==null&&l!==void 0?l:nV.easing),d&&this.setAttributes(d,!1,{type:pn.STATE})}else this.stopStateAnimates(),this.setAttributes(e,!1,{type:pn.STATE})}updateNormalAttrs(e){const t={};this.normalAttrs?(Object.keys(e).forEach(n=>{n in this.normalAttrs?(t[n]=this.normalAttrs[n],delete this.normalAttrs[n]):t[n]=this.getNormalAttribute(n)}),Object.keys(this.normalAttrs).forEach(n=>{e[n]=this.normalAttrs[n]})):Object.keys(e).forEach(n=>{t[n]=this.getNormalAttribute(n)}),this.normalAttrs=t}stopStateAnimates(e="end"){this.animates&&this.animates.forEach(t=>{t.stateNames&&(t.stop(e),this.animates.delete(t.id))})}getNormalAttribute(e){let t=this.attribute[e];return this.animates&&this.animates.forEach(n=>{if(n.stateNames){const s=n.getEndProps();so(s,e)&&(t=s[e])}}),t}clearStates(e){this.hasState()&&this.normalAttrs?(this.currentStates=[],this.applyStateAttrs(this.normalAttrs,this.currentStates,e,!0)):this.currentStates=[],this.normalAttrs=null}removeState(e,t){if((this.currentStates?this.currentStates.indexOf(e):-1)>=0){const n=this.currentStates.filter(s=>s!==e);this.useStates(n,t)}}toggleState(e,t){if(this.hasState(e))this.removeState(e,t);else if((this.currentStates?this.currentStates.indexOf(e):-1)<0){const n=this.currentStates?this.currentStates.slice():[];n.push(e),this.useStates(n,t)}}addState(e,t,n){var s;if(this.currentStates&&this.currentStates.includes(e)&&(t||this.currentStates.length===1))return;const r=t&&(!((s=this.currentStates)===null||s===void 0)&&s.length)?this.currentStates.concat([e]):[e];this.useStates(r,n)}useStates(e,t){var n;if(!e.length)return void this.clearStates(t);if(!(((n=this.currentStates)===null||n===void 0?void 0:n.length)!==e.length||e.some((r,a)=>this.currentStates[a]!==r)))return;const s={};e.forEach(r=>{var a;const o=this.stateProxy?this.stateProxy(r,e):(a=this.states)===null||a===void 0?void 0:a[r];o&&Object.assign(s,o)}),this.updateNormalAttrs(s),this.currentStates=e,this.applyStateAttrs(s,e,t)}addUpdateBoundTag(){this._updateTag|=ci.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}addUpdateShapeTag(){this._updateTag|=ci.UPDATE_SHAPE}addUpdateShapeAndBoundsTag(){this._updateTag|=ci.UPDATE_SHAPE_AND_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}updateShapeAndBoundsTagSetted(){return(this._updateTag&ci.UPDATE_SHAPE_AND_BOUNDS)===ci.UPDATE_SHAPE_AND_BOUNDS}clearUpdateBoundTag(){this._updateTag&=ci.CLEAR_BOUNDS}addUpdatePositionTag(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=ci.UPDATE_GLOBAL_LOCAL_MATRIX}addUpdateGlobalPositionTag(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=ci.UPDATE_GLOBAL_MATRIX}clearUpdateLocalPositionTag(){this._updateTag&=ci.CLEAR_LOCAL_MATRIX}clearUpdateGlobalPositionTag(){this._updateTag&=ci.CLEAR_GLOBAL_MATRIX}addUpdateLayoutTag(){this._updateTag|=ci.UPDATE_LAYOUT}clearUpdateLayoutTag(){this._updateTag&=ci.CLEAR_LAYOUT}needUpdateLayout(){return!!(this._updateTag&ci.UPDATE_LAYOUT)}getAnchor(e,t){const n=[0,0],s=()=>{if(t.b)return t.b;const{scaleX:r,scaleY:a,angle:o}=this.attribute;return uV.copy(this._AABBBounds),this.setAttributes({scaleX:1,scaleY:1,angle:0}),t.b=this.AABBBounds.clone(),this._AABBBounds.copy(uV),this.setAttributes({scaleX:r,scaleY:a,angle:o}),t.b};if(typeof e[0]=="string"){const r=parseFloat(e[0])/100,a=s();n[0]=a.x1+(a.x2-a.x1)*r}else n[0]=e[0];if(typeof e[1]=="string"){const r=parseFloat(e[1])/100,a=s();n[1]=a.y1+(a.y2-a.y1)*r}else n[1]=e[1];return n}doUpdateLocalMatrix(){const{x:e=es.x,y:t=es.y,scaleX:n=es.scaleX,scaleY:s=es.scaleY,angle:r=es.angle,scaleCenter:a,anchor:o,postMatrix:l}=this.attribute;let c=[0,0];const u={};if(o&&(c=this.getAnchor(o,u)),!a||n===1&&s===1)MKe(this._transMatrix,this._transMatrix.reset(),e,t,n,s,r,o&&c);else{const d=this._transMatrix;d.reset(),d.translate(c[0],c[1]),d.rotate(r),d.translate(-c[0],-c[1]),d.translate(e,t),c=this.getAnchor(a,u),ue.transformUtil.fromMatrix(d,d).scale(n,s,{x:c[0],y:c[1]})}const h=this.getOffsetXY(es);if(this._transMatrix.e+=h.x,this._transMatrix.f+=h.y,l){const d=uZe.setValue(l.a,l.b,l.c,l.d,l.e,l.f),p=this._transMatrix;d.multiply(p.a,p.b,p.c,p.d,p.e,p.f),p.setValue(d.a,d.b,d.c,d.d,d.e,d.f)}}doUpdateGlobalMatrix(){if(this.parent){this._globalTransMatrix.multiply(this.transMatrix.a,this.transMatrix.b,this.transMatrix.c,this.transMatrix.d,this.transMatrix.e,this.transMatrix.f);const{scrollX:e=0,scrollY:t=0}=this.parent.attribute;this._globalTransMatrix.translate(e,t)}}setStage(e,t){if(this.stage!==e){if(this.stage=e,this.layer=t,this.setStageToShadowRoot(e,t),this.animates&&this.animates.size){const n=e.getTimeline();this.animates.forEach(s=>{s.setTimeline(n)})}this._onSetStage&&this._onSetStage(this,e,t),ue.graphicService.onSetStage(this,e)}}setStageToShadowRoot(e,t){this.shadowRoot&&this.shadowRoot.setStage(e,t)}onAddStep(e){}onStop(e){e&&this.setAttributes(e,!1,{type:pn.ANIMATE_END})}onStep(e,t,n,s,r){const a={};if(n.customAnimate)n.customAnimate.update(r,s,a);else{const o=n.props,l=n.parsedProps,c=n.propKeys;this.stepInterpolate(e,t,a,n,s,r,o,void 0,l,c)}this.setAttributes(a,!1,{type:pn.ANIMATE_UPDATE,animationState:{ratio:s,end:r,step:n,isFirstFrameOfStep:e.getLastStep()!==n}}),this.stage&&this.stage.renderNextFrame()}stepInterpolate(e,t,n,s,r,a,o,l,c,u){u||(u=Object.keys(o),s.propKeys=u),a?s.propKeys.forEach(h=>{t.validAttr(h)&&(n[h]=o[h])}):u.forEach(h=>{var d;if(!t.validAttr(h))return;const p=o[h],f=(d=l&&l[h])!==null&&d!==void 0?d:e.getLastPropByName(h,s);if(p==null||f==null||p===f)return void(n[h]=p);let g;g=t.interpolateFunc&&t.interpolateFunc(h,r,f,p,n),g||(g=t.customInterpolate(h,r,f,p,this,n),g||this.defaultInterpolate(p,f,h,n,c,r)||this._interpolate(h,r,f,p,n))}),s.parsedProps=c}defaultInterpolate(e,t,n,s,r,a){if(Number.isFinite(e))return s[n]=t+(e-t)*a,!0;if(n==="fill"){r||(r={});const o=r.fillColorArray,l=Vm(t,o??e,a,!1,(c,u)=>{r.fillColorArray=u});return l&&(s[n]=l),!0}if(n==="stroke"){r||(r={});const o=r.strokeColorArray,l=Vm(t,o??e,a,!1,(c,u)=>{r.strokeColorArray=u});return l&&(s[n]=l),!0}if(n==="shadowColor"){r||(r={});const o=r.shadowColorArray,l=Vm(t,o??e,a,!0,(c,u)=>{r.shadowColorArray=u});return l&&(s[n]=l),!0}return!1}_interpolate(e,t,n,s,r){}getDefaultAttribute(e){return this.getGraphicTheme()[e]}getComputedAttribute(e){var t;return(t=this.attribute[e])!==null&&t!==void 0?t:this.getDefaultAttribute(e)}onSetStage(e,t=!1){this._onSetStage=e,t&&this.stage&&e(this,this.stage)}attachShadow(e){return e&&(e.shadowHost=this),this.shadowRoot=e??ue.graphicService.creator.shadowRoot(this),this.addUpdateBoundTag(),this.shadowRoot.setStage(this.stage,this.layer),this.shadowRoot}detachShadow(){this.shadowRoot&&(this.addUpdateBoundTag(),this.shadowRoot=null)}toJson(){return{attribute:this.attribute,_uid:this._uid,type:this.type,name:this.name,children:this.children.map(e=>e.toJson())}}createPathProxy(e){return be(e,!0)?this.pathProxy=new Bn().fromString(e):this.pathProxy=new Bn,this.pathProxy}loadImage(e,t=!1){if(!e||t&&hZe(e))return;const n=e;this.resources||(this.resources=new Map);const s={data:"init",state:null};this.resources.set(n,s),typeof e=="string"?(s.state="loading",e.startsWith("<svg")?(di.GetSvg(e,this),this.backgroundImg=this.backgroundImg||t):(Wne(e)||e.includes("/")||Gne(e))&&(di.GetImage(e,this),this.backgroundImg=this.backgroundImg||t)):Ke(e)?(s.state="success",s.data=e,this.backgroundImg=this.backgroundImg||t):s.state="fail"}setShadowGraphic(e){e?this.attachShadow().add(e):this.detachShadow()}imageLoadSuccess(e,t,n){if(!this.resources)return;const s=this.resources.get(e);s&&(s.state="success",s.data=t,n&&n(),this.addUpdateBoundTag(),this.stage&&this.stage.renderNextFrame())}imageLoadFail(e,t){if(!this.resources)return;const n=this.resources.get(e);n&&(n.state="fail",t&&t())}_stopAnimates(e){e&&e.forEach(t=>{t.stop()})}stopAnimates(e=!1){this._stopAnimates(this.animates),this.shadowRoot&&this.shadowRoot.stopAnimates(!0),this.isContainer&&e&&this.forEachChildren(t=>{t.stopAnimates(e)})}release(){this.releaseStatus="released",ue.graphicService.onRelease(this)}_emitCustomEvent(e,t){var n,s;if(this._events&&e in this._events){const r=new DP(e,t);r.bubbles=!1,r.manager=(s=(n=this.stage)===null||n===void 0?void 0:n.eventSystem)===null||s===void 0?void 0:s.manager,this.dispatchEvent(r)}}}function hZe(i){return!(!i.fill&&!i.stroke)}sr.mixin(Kqe);function dZe(i,e){const t=[];let n=e.exec(i);for(;n;){const s=[];s.startIndex=e.lastIndex-n[0].length;const r=n.length;for(let a=0;a<r;a++)s.push(n[a]);t.push(s),n=e.exec(i)}return t}class bI{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}function fV(i,e,t,n){const s=i.indexOf(e,t);if(s===-1)throw new Error(n);return s+e.length-1}function pZe(i,e,t=">"){let n,s="";for(let r=e;r<i.length;r++){let a=i[r];if(n)a===n&&(n="");else if(a==='"'||a==="'")n=a;else if(a===t[0]){if(!t[1])return{data:s,index:r};if(i[r+1]===t[1])return{data:s,index:r}}else a==="	"&&(a=" ");s+=a}}function gV(i,e,t,n=">"){const s=pZe(i,e+1,n);if(!s)return;let r=s.data;const a=s.index,o=r.search(/\s/);let l=r,c=!0;return o!==-1&&(l=r.substr(0,o).replace(/\s\s*$/,""),r=r.substr(o+1)),{tagName:l,tagExp:r,closeIndex:a,attrExpPresent:c,rawTagName:l}}const fZe=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");class gZe{constructor(e){this.currentNode=null,this.options=e,this.tagsNodeStack=[],this.docTypeEntities={}}addChild(e,t,n){const s=t.tagname;typeof s=="string"&&(t.tagname=s),e.addChild(t)}buildAttributesMap(e,t,n){const s={};if(!e)return;const r=dZe(e,fZe),a=r.length;for(let o=0;o<a;o++){const l=r[o][1],c=r[o][4],u=l;l&&(s[u]=c===void 0||(isNaN(c)?c:Number(c)))}return s}parseXml(e){e=e.replace(/\r\n?/g,`
`);const t=new bI("!xml");let n=t,s="",r="";for(let a=0;a<e.length;a++)if(e[a]==="<")if(e[a+1]==="/"){const o=fV(e,">",a,"Closing Tag is not closed."),l=r.lastIndexOf(".");r=r.substring(0,l),n=this.tagsNodeStack.pop(),n&&n.child&&s&&n.child[n.child.length-1][":@"]&&(n.child[n.child.length-1][":@"].text=s),s="",a=o}else if(e[a+1]==="?")a=gV(e,a,!1,"?>").closeIndex+1;else if(e.substr(a+1,3)==="!--")a=fV(e,"-->",a+4,"Comment is not closed.");else{const o=gV(e,a);let l=o.tagName,c=o.tagExp;const u=o.attrExpPresent,h=o.closeIndex;if(l!==t.tagname&&(r+=r?"."+l:l),c.length>0&&c.lastIndexOf("/")===c.length-1){l[l.length-1]==="/"?(l=l.substr(0,l.length-1),r=r.substr(0,r.length-1),c=l):c=c.substr(0,c.length-1);const d=new bI(l);l!==c&&u&&(d[":@"]=this.buildAttributesMap(c,r,l)),this.addChild(n,d,r),r=r.substr(0,r.lastIndexOf("."))}else{const d=new bI(l);this.tagsNodeStack.push(n),l!==c&&u&&(d[":@"]=this.buildAttributesMap(c,r,l)),this.addChild(n,d,r),n=d}s="",a=h}else s+=e[a];return t.child}}function mZe(i,e){return Rre(i)}function Rre(i,e){const t={};for(let n=0;n<i.length;n++){const s=i[n],r=yZe(s);if(r!==void 0&&s[r]){const a=Rre(s[r]);vZe(a),s[":@"]&&_Ze(a,s[":@"]),t[r]!==void 0&&t.hasOwnProperty(r)?(Array.isArray(t[r])||(t[r]=[t[r]]),t[r].push(a)):t[r]=a}}return t}function yZe(i){const e=Object.keys(i);for(let t=0;t<e.length;t++){const n=e[t];if(n!==":@")return n}}function _Ze(i,e,t){if(e){const n=Object.keys(e),s=n.length;for(let r=0;r<s;r++){const a=n[r];i[a]=e[a]}}}function vZe(i){return Object.keys(i).length===0}class BP{constructor(e){this.options=Object.assign({},BP.defaultOptions,e)}valid(e){return e.startsWith("<")}parse(e){if(!this.valid)return!1;const t=new gZe(this.options).parseXml(e);return mZe(t,this.options)}}BP.defaultOptions={};function bZe(i){return i.startsWith("<svg")||i.startsWith("<?xml")}var xZe=function(i,e,t,n){return new(t||(t=Promise))(function(s,r){function a(c){try{l(n.next(c))}catch(u){r(u)}}function o(c){try{l(n.throw(c))}catch(u){r(u)}}function l(c){var u;c.done?s(c.value):(u=c.value,u instanceof t?u:new t(function(h){h(u)})).then(a,o)}l((n=n.apply(i,e||[])).next())})};function SZe(i){return xZe(this,void 0,void 0,function*(){const e=[],t=i.getChildren();yield new Promise(n=>{ue.global.getRequestAnimationFrame()(()=>{n(null)})}),t.forEach(n=>{n.subLayers.size&&n.subLayers.forEach(s=>{s.drawContribution&&s.drawContribution.hooks&&s.drawContribution.rendering&&e.push(new Promise(r=>{s.drawContribution.hooks.completeDraw.tap("outWait",()=>{s.drawContribution.hooks.completeDraw.taps=s.drawContribution.hooks.completeDraw.taps.filter(a=>a.name!=="outWait"),r(null)})}))})}),yield Promise.all(e)})}function GA(i,e,t,n=0){return i.expand(e+(n/2+(t?CZe(t,e):0))),i}function CZe(i,e){return i?e:0}let wZe=0;function rr(){return wZe++}var Hp;(function(i){i[i.HORIZONTAL=0]="HORIZONTAL",i[i.VERTICAL=1]="VERTICAL"})(Hp||(Hp={}));function mV(i){const e=[];let t=0,n="";for(let s=0;s<i.length;s++)TZe(i[s])?t?n+=i[s]:(t=1,n=i[s]):(t&&(e.push({text:n,direction:Hp.VERTICAL}),n="",t=0),e.push({text:i[s],direction:Hp.HORIZONTAL}));return n&&e.push({text:n,direction:Hp.VERTICAL}),e}const AZe=["","","","","","","","","",""],Lre=new Map;AZe.forEach(i=>Lre.set(i,!0));const kZe=[""],Dre=new Map;function TZe(i){if(Lre.has(i))return!0;if(Dre.has(i))return!1;let e=!1;return i.codePointAt(0)<256&&(e=!0),e}kZe.forEach(i=>Dre.set(i,!0));const jP=rr(),NP=rr(),Px=rr(),$P=rr(),_5=rr(),v5=rr(),zP=rr(),Ox=rr(),HP=rr(),VP=rr(),b5=rr(),x5=rr(),S5=rr(),C5=rr(),UP=rr(),WP=rr(),Fre=Symbol.for("GraphicService"),Bre=Symbol.for("GraphicCreator"),jre={"stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-width":"lineWidth","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity",stroke:"stroke",fill:"fill"},EZe=Object.keys(jre);var yV;(function(i){i[i.LESS_GROUP=0]="LESS_GROUP",i[i.MORE_GROUP=1]="MORE_GROUP"})(yV||(yV={}));let T0=class LD extends sr{constructor(e){super(e),this.type="group",this.parent=null,this.isContainer=!0,this.numberType=v5,this._childUpdateTag=ci.UPDATE_BOUNDS}setMode(e){e==="3d"?this.set3dMode():this.set2dMode()}set3dMode(){this.in3dMode=!0}set2dMode(){this.in3dMode=!1}setTheme(e){return this.theme||(this.theme=new Ub),this.theme.setTheme(e,this)}createTheme(){this.theme||(this.theme=new Ub)}visibleAll(e){this.setAttribute("visible",e),this.forEachChildren(t=>{t.isContainer&&t.visibleAll?t.visibleAll(e):t.setAttribute("visible",e)})}hideAll(){this.visibleAll(!1)}showAll(){this.visibleAll(!0)}containsPoint(e,t,n){if(n===by.GLOBAL){const s=new sn(e,t);return this.parent&&this.parent.globalTransMatrix.transformPoint(s,s),this.AABBBounds.contains(s.x,s.y)}return this.AABBBounds.contains(e,t)}shouldUpdateAABBBounds(){return!!super.shouldUpdateAABBBounds()||!!(this._childUpdateTag&ci.UPDATE_BOUNDS)}tryUpdateAABBBounds(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;ue.graphicService.beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);const e=this.shouldSelfChangeUpdateAABBBounds(),t=this.doUpdateAABBBounds();return this.addUpdateLayoutTag(),ue.graphicService.afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,e),t}doUpdateLocalMatrix(){const{x:e=es.x,y:t=es.y,dx:n=es.dx,dy:s=es.dy,scaleX:r=es.scaleX,scaleY:a=es.scaleY,angle:o=es.angle,postMatrix:l}=this.attribute;if(e!==0||t!==0||n!==0||s!==0||r!==1||a!==1||o!==0||l)return super.doUpdateLocalMatrix();this._transMatrix.reset()}getGraphicTheme(){return Ye(this).group}updateAABBBounds(e,t,n){const s=n;n=n.clone();const{width:r,height:a,path:o,clip:l=t.clip,display:c}=e;return o&&o.length?o.forEach(u=>{n.union(u.AABBBounds)}):r!=null&&a!=null&&n.set(0,0,Math.max(0,r),Math.max(0,a)),l||this.forEachChildren(u=>{n.union(u.AABBBounds)}),ue.graphicService.updateTempAABBBounds(n),ue.graphicService.transformAABBBounds(e,n,t,!1,this),s.copy(n),s}doUpdateAABBBounds(){this.updateAABBBoundsStamp++;const e=super.doUpdateAABBBounds();return this.parent&&this.parent.addChildUpdateBoundTag(),this._emitCustomEvent("AAABBBoundsChange"),e}clearUpdateBoundTag(){this._updateTag&=ci.CLEAR_BOUNDS,this._childUpdateTag&=ci.CLEAR_BOUNDS}addUpdateBoundTag(){this._updateTag|=ci.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag()}addChildUpdateBoundTag(){this._childUpdateTag&ci.UPDATE_BOUNDS||(this._childUpdateTag|=ci.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag())}getTheme(){return this.theme.getTheme(this)}incrementalAppendChild(e){const t=super.appendChild(e);return this.stage&&t&&(t.stage=this.stage,t.layer=this.layer),this.addUpdateBoundTag(),ue.graphicService.onAddIncremental(e,this,this.stage),t}incrementalClearChild(){super.removeAllChild(),this.addUpdateBoundTag(),ue.graphicService.onClearIncremental(this,this.stage)}_updateChildToStage(e){return this.stage&&e&&e.setStage(this.stage,this.layer),this.addUpdateBoundTag(),e}appendChild(e,t=!0){const n=super.appendChild(e);return t&&this.stage&&n&&n.setStage(this.stage,this.layer),this.addUpdateBoundTag(),n}insertBefore(e,t){return this._updateChildToStage(super.insertBefore(e,t))}insertAfter(e,t){return this._updateChildToStage(super.insertAfter(e,t))}insertInto(e,t){return this._updateChildToStage(super.insertInto(e,t))}removeChild(e){const t=super.removeChild(e);return e.stage=null,ue.graphicService.onRemove(e),this.addUpdateBoundTag(),t}removeAllChild(e=!1){this.forEachChildren(t=>{ue.graphicService.onRemove(t),e&&t.isContainer&&t.removeAllChild(e)}),super.removeAllChild(),this.addUpdateBoundTag()}setStage(e,t){this.stage!==e&&(this.stage=e,this.layer=t,this.setStageToShadowRoot(e,t),this._onSetStage&&this._onSetStage(this,e,t),ue.graphicService.onSetStage(this,e),this.forEachChildren(n=>{n.setStage(e,this.layer)}))}addUpdatePositionTag(){super.addUpdatePositionTag(),this.forEachChildren(e=>{e.isContainer&&e.addUpdateGlobalPositionTag()})}addUpdateGlobalPositionTag(){super.addUpdateGlobalPositionTag(),this.forEachChildren(e=>{e.isContainer&&e.addUpdateGlobalPositionTag()})}tryUpdateGlobalTransMatrix(e=!0){if(this.shouldUpdateGlobalMatrix()){if(this._globalTransMatrix){if(this.parent){const t=this.parent.globalTransMatrix;this._globalTransMatrix.setValue(t.a,t.b,t.c,t.d,t.e,t.f)}}else this._globalTransMatrix=this.parent?this.parent.globalTransMatrix.clone():this.transMatrix.clone();this.doUpdateGlobalMatrix(),e&&this.clearUpdateGlobalPositionTag()}return this._globalTransMatrix}shouldUpdateGlobalMatrix(){return!!(this._updateTag&ci.UPDATE_GLOBAL_MATRIX)}_getChildByName(e,t){return this.find(n=>n.name===e,t)}createOrUpdateChild(e,t,n){let s=this._getChildByName(e);return s?s.setAttributes(t):(s=ue.graphicService.creator[n](t),s.name=e,this.add(s)),s}clone(){return new LD(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return LD.NOWORK_ANIMATE_ATTR}};T0.NOWORK_ANIMATE_ATTR=Ls;function w5(i){return new T0(i)}class PZe extends T0{get offscreen(){return this.layerHandler.offscreen}get layerMode(){return this.layerHandler.type}get width(){return this.stage?this.stage.width:0}get height(){return this.stage?this.stage.height:0}get viewWidth(){return this.stage?this.stage.viewWidth:0}get viewHeight(){return this.stage?this.stage.viewHeight:0}get dirtyBound(){throw new Error("")}get dpr(){return this._dpr}constructor(e,t,n,s){var r;super({}),this.stage=e,this.global=t,this.window=n,this.main=s.main,this.layerHandler=s.layerHandler,this.layerHandler.init(this,n,{main:s.main,canvasId:s.canvasId,width:this.viewWidth,height:this.viewHeight,zIndex:(r=s.zIndex)!==null&&r!==void 0?r:0}),this.layer=this,this.subLayers=new Map,this.theme=new Ub,this.background="rgba(0, 0, 0, 0)",this.afterDrawCbs=[]}combineSubLayer(e=!0){const t=Array.from(this.subLayers.values()).sort((n,s)=>n.zIndex-s.zIndex);this.layerHandler.merge(t.map(n=>(n.layer.subLayers.size&&n.layer.combineSubLayer(e),n.layer.getNativeHandler()))),e&&t.forEach(n=>{n.group&&(n.group.incremental=0)}),t.forEach(n=>{ue.layerService.releaseLayer(this.stage,n.layer)}),this.subLayers.clear()}getNativeHandler(){return this.layerHandler}setStage(e,t){super.setStage(e,this)}pick(e,t){throw new Error("")}tryRenderSecondaryLayer(e,t){this.layerHandler.secondaryHandlers&&this.layerHandler.secondaryHandlers.length&&this.layerHandler.secondaryHandlers.forEach(n=>{n.layer.renderCount=this.renderCount,n.layer.render(e,t)})}render(e,t){var n;this.layerHandler.render([this],{renderService:e.renderService,stage:this.stage,layer:this,viewBox:e.viewBox,transMatrix:e.transMatrix,background:(n=e.background)!==null&&n!==void 0?n:this.background,updateBounds:e.updateBounds},t),this.afterDrawCbs.forEach(s=>s(this)),this.tryRenderSecondaryLayer(e,t)}resize(e,t){this.layerHandler.resize(e,t)}resizeView(e,t){this.layerHandler.resizeView(e,t)}setDpr(e){this.layerHandler.setDpr(e)}afterDraw(e){this.afterDrawCbs.push(e)}startAnimate(e){throw new Error("")}setToFrame(e){throw new Error("")}prepare(e,t){}release(){super.release(),this.layerHandler.release(),this.subLayers&&this.subLayers.forEach(e=>{ue.layerService.releaseLayer(this.stage,e.layer)})}drawTo(e,t){var n;this.layerHandler.drawTo(e,[this],Object.assign({background:(n=t.background)!==null&&n!==void 0?n:this.background,renderService:t.renderService,viewBox:t.viewBox,transMatrix:t.transMatrix,stage:this.stage,layer:this},t)),this.afterDrawCbs.forEach(s=>s(this))}}const Nre=Symbol.for("TransformUtil"),$re=Symbol.for("GraphicUtil"),A5=Symbol.for("LayerService"),zre=Symbol.for("StaticLayerHandlerContribution"),OZe=Symbol.for("DynamicLayerHandlerContribution"),MZe=Symbol.for("VirtualLayerHandlerContribution");var j_,IZe=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},RZe=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let N_=j_=class{static GenerateLayerId(){return`${j_.idprefix}_${j_.prefix_count++}`}constructor(){this.layerMap=new Map,this.global=ue.global}tryInit(){this.inited||(this.staticLayerCountInEnv=this.global.getStaticCanvasCount(),this.dynamicLayerCountInEnv=this.global.getDynamicCanvasCount(),this.inited=!0)}getStageLayer(i){return this.layerMap.get(i)}getRecommendedLayerType(i){return i||(this.staticLayerCountInEnv!==0?"static":this.dynamicLayerCountInEnv!==0?"dynamic":"virtual")}getLayerHandler(i){let e;return e=i==="static"?We.get(zre):i==="dynamic"?We.get(OZe):We.get(MZe),e}createLayer(i,e={main:!1}){var t;this.tryInit();let n=this.getRecommendedLayerType(e.layerMode);n=e.main||e.canvasId?"static":n;const s=this.getLayerHandler(n),r=new PZe(i,this.global,i.window,Object.assign(Object.assign({main:!1},e),{layerMode:n,canvasId:(t=e.canvasId)!==null&&t!==void 0?t:j_.GenerateLayerId(),layerHandler:s})),a=this.layerMap.get(i)||[];return a.push(r),this.layerMap.set(i,a),this.staticLayerCountInEnv--,r}prepareStageLayer(i){let e;i.forEachChildren(t=>{const n=t.getNativeHandler();n.type==="virtual"?(n.mainHandler=e,e.secondaryHandlers.push(n)):(e=n,e.secondaryHandlers=[])})}releaseLayer(i,e){e.release();const t=this.layerMap.get(i)||[];this.layerMap.set(i,t.filter(n=>n!==e))}layerCount(i){return(this.layerMap.get(i)||[]).length}restLayerCount(i){return this.global.env==="browser"?10:0}releaseStage(i){this.layerMap.delete(i)}};N_.idprefix="visactor_layer",N_.prefix_count=0,N_=j_=IZe([Oe(),RZe("design:paramtypes",[])],N_);const LZe=new Ge(i=>{i(h5).to(bD).inSingletonScope(),i(zA).to(PD),i($re).to(OD).inSingletonScope(),i(Nre).to(MD).inSingletonScope(),i(A5).to(N_).inSingletonScope()});function Zf(i,e){return!(!i&&!e)}function E0(i,e){let t;return t=ie(i)?i.some(n=>n||n===void 0):!!i,t&&e>0}function _f(i,e,t){return t&&i*e>0}function k5(i,e,t,n,s){return s&&i*e>0&&t!==0&&n!==0}function T5(i,e){return i*e>0}function E5(i,e,t,n){return i*e>0&&t!==0&&n!==0}function DZe(i,e,t,n,s,r,a,o){if(!i.pathProxy)return!1;const l=Ye(i,r==null?void 0:r.theme)[i.type.replace("3d","")],{fill:c=l.fill,stroke:u=l.stroke,opacity:h=l.opacity,fillOpacity:d=l.fillOpacity,lineWidth:p=l.lineWidth,strokeOpacity:f=l.strokeOpacity,visible:g=l.visible,x:m=l.x,y=l.y}=i.attribute,b=_f(h,d,c),x=T5(h,f),S=Zf(c),C=E0(u,p);if(!g||!S&&!C||!(b||x||a||o))return!0;e.beginPath();const w=typeof i.pathProxy=="function"?i.pathProxy(i.attribute):i.pathProxy;return Ed(w.commandList,e,t,n),e.setShadowBlendStyle&&e.setShadowBlendStyle(i,i.attribute,l),C&&x&&(e.setStrokeStyle(i,i.attribute,t-m,n-y,l),e.stroke()),S&&b&&(e.setCommonStyle(i,i.attribute,t-m,n-y,l),e.fill()),!0}function FZe(i,e,t,n,s,r,a,o){const l=t-i,c=n-e,u=a-s,h=o-r;let d=h*l-u*c;return d*d<Dt?[]:(d=(u*(e-r)-h*(i-s))/d,[i+d*l,e+d*c])}function Mh(i,e,t,n,s,r,a){const o=i-t,l=e-n,c=(a?r:-r)/Math.sqrt(o*o+l*l),u=c*l,h=-c*o,d=i+u,p=e+h,f=t+u,g=n+h,m=(d+f)/2,y=(p+g)/2,b=f-d,x=g-p,S=b*b+x*x,C=s-r,w=d*g-f*p,A=(x<0?-1:1)*Math.sqrt(Math.max(0,C*C*S-w*w));let T=(w*x-b*A)/S,E=(-w*b-x*A)/S;const P=(w*x+b*A)/S,O=(-w*b+x*A)/S,M=T-m,R=E-y,j=P-m,I=O-y;return M*M+R*R>j*j+I*I&&(T=P,E=O),{cx:T,cy:E,x01:-u,y01:-h,x11:T*(s/C-1),y11:E*(s/C-1)}}function Hre(i,e,t,n,s){const r=At(t-e),a=i.getParsedCornerRadius(),o=ie(a),{outerDeltaAngle:l,innerDeltaAngle:c,outerStartAngle:u,outerEndAngle:h,innerEndAngle:d,innerStartAngle:p}=i.getParsePadAngle(e,t),f=o?a[0]:a,g=o?a[1]:a,m=o?a[2]:a,y=o?a[3]:a,b=Math.max(g,f),x=Math.max(m,y);let S=b,C=x;const w=s*vi(u),A=s*ti(u),T=n*vi(d),E=n*ti(d);let P,O,M,R;if((x>Dt||b>Dt)&&(P=s*vi(h),O=s*ti(h),M=n*vi(p),R=n*ti(p),r<Qt)){const j=FZe(w,A,M,R,P,O,T,E);if(j){const I=w-j[0],D=A-j[1],z=P-j[0],$=O-j[1],V=1/ti(vKe((I*z+D*$)/(So(I*I+D*D)*So(z*z+$*$)))/2),L=So(j[0]*j[0]+j[1]*j[1]);C=fs(x,(n-L)/(V-1)),S=fs(b,(s-L)/(V+1))}}return{outerDeltaAngle:l,xors:w,yors:A,xirs:M,yirs:R,xore:P,yore:O,xire:T,yire:E,limitedOcr:S,limitedIcr:C,outerCornerRadiusStart:f,outerCornerRadiusEnd:g,maxOuterCornerRadius:b,maxInnerCornerRadius:x,outerStartAngle:u,outerEndAngle:h,innerDeltaAngle:c,innerEndAngle:d,innerStartAngle:p,innerCornerRadiusStart:y,innerCornerRadiusEnd:m}}function DD(i,e,t,n,s,r,a){const{startAngle:o,endAngle:l}=i.getParsedAngle(),c=At(l-o),u=l>o;let h=!1;if(s<r){const d=s;s=r,r=d}if(s<=Dt)e.moveTo(t,n);else if(c>=yt-Dt)e.moveTo(t+s*vi(o),n+s*ti(o)),e.arc(t,n,s,o,l,!u),r>Dt&&(e.moveTo(t+r*vi(l),n+r*ti(l)),e.arc(t,n,r,l,o,u));else{const{outerDeltaAngle:d,xors:p,yors:f,xirs:g,yirs:m,limitedOcr:y,outerCornerRadiusStart:b,outerCornerRadiusEnd:x,maxOuterCornerRadius:S,xore:C,yore:w,xire:A,yire:T,outerStartAngle:E,outerEndAngle:P,limitedIcr:O,innerDeltaAngle:M,innerEndAngle:R,innerStartAngle:j,innerCornerRadiusStart:I,innerCornerRadiusEnd:D,maxInnerCornerRadius:z}=Hre(i,o,l,r,s);if(d<.001)a&&(a[3]||a[1])&&e.moveTo(t+p,n+f),h=!0;else if(y>Dt){const $=fs(b,y),V=fs(x,y),L=Mh(g,m,p,f,s,$,Number(u)),Y=Mh(C,w,A,T,s,V,Number(u));y<S&&$===V?!a||a[0]?(e.moveTo(t+L.cx+L.x01,n+L.cy+L.y01),e.arc(t+L.cx,n+L.cy,y,Jt(L.y01,L.x01),Jt(Y.y01,Y.x01),!u)):e.moveTo(t+L.cx+y*vi(Jt(Y.y01,Y.x01)),n+L.cy+y*ti(Jt(Y.y01,Y.x01))):!a||a[0]?(e.moveTo(t+L.cx+L.x01,n+L.cy+L.y01),$>0&&e.arc(t+L.cx,n+L.cy,$,Jt(L.y01,L.x01),Jt(L.y11,L.x11),!u),e.arc(t,n,s,Jt(L.cy+L.y11,L.cx+L.x11),Jt(Y.cy+Y.y11,Y.cx+Y.x11),!u),V>0&&e.arc(t+Y.cx,n+Y.cy,V,Jt(Y.y11,Y.x11),Jt(Y.y01,Y.x01),!u)):V>0?e.moveTo(t+Y.cx+V*vi(Jt(Y.y01,Y.x01)),n+Y.cy+V*ti(Jt(Y.y01,Y.x01))):e.moveTo(t+C,n+s*ti(P))}else!a||a[0]?(e.moveTo(t+p,n+f),e.arc(t,n,s,E,P,!u)):e.moveTo(t+s*vi(P),n+s*ti(P));if(!(r>Dt)||M<.001)!a||a[1]?e.lineTo(t+A,n+T):e.moveTo(t+A,n+T),h=!0;else if(O>Dt){const $=fs(I,O),V=fs(D,O),L=Mh(A,T,C,w,r,-V,Number(u)),Y=Mh(p,f,g,m,r,-$,Number(u));if(!a||a[1]?e.lineTo(t+L.cx+L.x01,n+L.cy+L.y01):e.moveTo(t+L.cx+L.x01,n+L.cy+L.y01),O<z&&$===V){const ae=Jt(Y.y01,Y.x01);!a||a[2]?e.arc(t+L.cx,n+L.cy,O,Jt(L.y01,L.x01),ae,!u):e.moveTo(t+L.cx+vi(ae),n+L.cy+ti(ae))}else!a||a[2]?(V>0&&e.arc(t+L.cx,n+L.cy,V,Jt(L.y01,L.x01),Jt(L.y11,L.x11),!u),e.arc(t,n,r,Jt(L.cy+L.y11,L.cx+L.x11),Jt(Y.cy+Y.y11,Y.cx+Y.x11),u),$>0&&e.arc(t+Y.cx,n+Y.cy,$,Jt(Y.y11,Y.x11),Jt(Y.y01,Y.x01),!u)):$>0?e.moveTo(t+Y.cx+$*vi(Jt(Y.y01,Y.x01)),n+Y.cy+$*ti(Jt(Y.y01,Y.x01))):e.moveTo(t+g,n+m)}else!a||a[1]?e.lineTo(t+A,n+T):e.moveTo(t+A,n+T),!a||a[2]?e.arc(t,n,r,R,j,u):e.moveTo(t+r*vi(j),n+r*ti(j))}return a?a[3]&&e.lineTo(t+s*vi(o),n+s*ti(o)):e.closePath(),h}class Ja{static GetCanvas(){try{return Ja.canvas||(Ja.canvas=ue.global.createCanvas({})),Ja.canvas}catch{return null}}static GetCtx(){if(!Ja.ctx){const e=Ja.GetCanvas();Ja.ctx=e.getContext("2d")}return Ja.ctx}}class yp extends IKe{static getInstance(){return yp._instance||(yp._instance=new yp),yp._instance}constructor(e=[],t=100){super(),this.cacheParams={CLEAN_THRESHOLD:100,L_TIME:1e3},this.dataMap=new Map;const n=Ja.GetCanvas(),s=Ja.GetCtx();if(n.width=t,n.height=1,!s)return;if(s.translate(0,0),!s)throw new Error("ctx");const r=s.createLinearGradient(0,0,t,0);e.forEach(a=>{r.addColorStop(a[0],a[1])}),s.fillStyle=r,s.fillRect(0,0,t,1),this.rgbaSet=s.getImageData(0,0,t,1).data}getColor(e){const t=this.rgbaSet.slice(4*e,4*e+4);return`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]/255})`}GetOrCreate(e,t,n,s,r=[],a=100){let o=`${e}${t}${n}${s}`;r.forEach(c=>o+=c.join()),o+=a;let l=this.dataMap.get(o);return l||(l={data:new yp(r,a),timestamp:[]},this.addLimitedTimestamp(l,Date.now(),{}),this.dataMap.set(o,l)),this.clearCache(this.dataMap,this.cacheParams),l.data}}class Us{static GetSize(e){for(let t=0;t<Us.ImageSize.length;t++)if(Us.ImageSize[t]>=e)return Us.ImageSize[t];return e}static Get(e,t,n,s,r,a,o){const l=Us.GenKey(e,t,n,s,r),c=Us.cache[l];if(!c||c.length===0)return null;for(let u=0;u<c.length;u++)if(c[u].width>=a&&c[u].height>=o)return c[u].pattern;return null}static Set(e,t,n,s,r,a,o,l){const c=Us.GenKey(e,t,n,s,r);Us.cache[c]?Us.cache[c].push({width:o,height:l,pattern:a}):Us.cache[c]=[{width:o,height:l,pattern:a}]}static GenKey(e,t,n,s,r){return`${t},${n},${s},${r},${e.join()}`}}Us.cache={},Us.ImageSize=[20,40,80,160,320,640,1280,2560];function BZe(i,e,t,n){const{stops:s,startAngle:r,endAngle:a}=n;for(;t<0;)t+=yt;for(;t>yt;)t-=yt;if(t<r||t>a)return s[0].color;let o,l,c=(t-r)/(a-r);for(let u=0;u<s.length;u++)if(s[u].offset>=c){o=s[u-1],l=s[u];break}return c=(c-o.offset)/(l.offset-o.offset),Vm(o.color,l.color,c,!1)}function jZe(i,e,t,n,s,r,a,o,l){const c=Math.floor(180*s/Math.PI),u=Ja.GetCanvas(),h=Ja.GetCtx();if(!h)return null;const d=Us.GetSize(o),p=Us.GetSize(l);let f=Us.Get(e,t,n,r,a,d,p);if(f)return f;const g=Math.sqrt(Math.max(Math.max(Math.pow(t,2)+Math.pow(n,2),Math.pow(d-t,2)+Math.pow(n,2)),Math.max(Math.pow(d-t,2)+Math.pow(p-n,2),Math.pow(t,2)+Math.pow(p-n,2)))),m=c+1,y=s/Math.max(1,m-1),b=yp.getInstance().GetOrCreate(t,n,d,p,e,m),x=2*Math.PI*g/360;u.width=d,u.height=p,h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,d,p),h.translate(t,n),h.rotate(r);for(let C=0,w=m-1;C<w&&!(r+C*y>a);C++){const A=b.getColor(C);h.beginPath(),h.rotate(y),h.moveTo(0,0),h.lineTo(g,-2*x),h.lineTo(g,0),h.fillStyle=A,h.closePath(),h.fill()}const S=h.getImageData(0,0,d,p);return u.width=S.width,u.height=S.height,h.putImageData(S,0,0),f=i.createPattern(u,"no-repeat"),f&&Us.Set(e,t,n,r,a,f,d,p),f}const FD=Symbol.for("ArcRenderContribution"),BD=Symbol.for("AreaRenderContribution"),jD=Symbol.for("CircleRenderContribution"),Vre=Symbol.for("GroupRenderContribution"),ND=Symbol.for("ImageRenderContribution"),$D=Symbol.for("PathRenderContribution"),zD=Symbol.for("PolygonRenderContribution"),$_=Symbol.for("RectRenderContribution"),HD=Symbol.for("SymbolRenderContribution"),VD=Symbol.for("TextRenderContribution"),P5=Symbol.for("InteractiveSubRenderContribution");function NZe(i,e){return i==="top"?Math.ceil(.79*e):i==="middle"?Math.round(.3*e):i==="bottom"?Math.round(-.21*e):0}function tu(i,e){return i==="end"||i==="right"?-e:i==="center"?-e/2:0}function iu(i,e,t,n=0){return i==="middle"?-e/2:i==="top"?0:i==="bottom"?n-e:i&&i!=="alphabetic"?0:(t||(t=e),-(e-t)/2-.79*t)}function $Ze(i){const e={},t=n=>/^\d+(\.\d+)?$/.test(`${n}`)?`${n}px`:`${n}`;return["textAlign","fontFamily","fontVariant","fontStyle","fontWeight"].forEach(n=>{i[n]&&(e[d8(n)]=i[n])}),["fontSize","lineHeight"].forEach(n=>{const s=d8(n);B(i[n])||(e[s]=t(i[n]))}),F(i.maxLineWidth)&&(e["max-width"]=t(i.maxLineWidth)),i.underline?e["text-decoration"]="underline":i.lineThrough&&(e["text-decoration"]="line-through"),i.fill&&be(i.fill)&&(e.color=i.fill),e}function O5(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function zZe(i,e,t){const n=Math.sin(t),s=Math.cos(t),r=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11];return e!==i&&(i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i[4]=r*s+c*n,i[5]=a*s+u*n,i[6]=o*s+h*n,i[7]=l*s+d*n,i[8]=c*s-r*n,i[9]=u*s-a*n,i[10]=h*s-o*n,i[11]=d*s-l*n,i}function HZe(i,e,t){const n=Math.sin(t),s=Math.cos(t),r=e[0],a=e[1],o=e[2],l=e[3],c=e[8],u=e[9],h=e[10],d=e[11];return e!==i&&(i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i[0]=r*s-c*n,i[1]=a*s-u*n,i[2]=o*s-h*n,i[3]=l*s-d*n,i[8]=r*n+c*s,i[9]=a*n+u*s,i[10]=o*n+h*s,i[11]=l*n+d*s,i}function VZe(i,e,t){const n=Math.sin(t),s=Math.cos(t),r=e[0],a=e[1],o=e[2],l=e[3],c=e[4],u=e[5],h=e[6],d=e[7];return e!==i&&(i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i[0]=r*s+c*n,i[1]=a*s+u*n,i[2]=o*s+h*n,i[3]=l*s+d*n,i[4]=c*s-r*n,i[5]=u*s-a*n,i[6]=h*s-o*n,i[7]=d*s-l*n,i}function d_(i,e,t){const n=t[0],s=t[1],r=t[2];let a,o,l,c,u,h,d,p,f,g,m,y;return e===i?(i[12]=e[0]*n+e[4]*s+e[8]*r+e[12],i[13]=e[1]*n+e[5]*s+e[9]*r+e[13],i[14]=e[2]*n+e[6]*s+e[10]*r+e[14],i[15]=e[3]*n+e[7]*s+e[11]*r+e[15]):(a=e[0],o=e[1],l=e[2],c=e[3],u=e[4],h=e[5],d=e[6],p=e[7],f=e[8],g=e[9],m=e[10],y=e[11],i[0]=a,i[1]=o,i[2]=l,i[3]=c,i[4]=u,i[5]=h,i[6]=d,i[7]=p,i[8]=f,i[9]=g,i[10]=m,i[11]=y,i[12]=a*n+u*s+f*r+e[12],i[13]=o*n+h*s+g*r+e[13],i[14]=l*n+d*s+m*r+e[14],i[15]=c*n+p*s+y*r+e[15]),i}function UD(i,e){i[0]=e.a,i[1]=e.b,i[2]=0,i[3]=0,i[4]=e.c,i[5]=e.d,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=e.e,i[13]=e.f,i[14]=0,i[15]=1}function UZe(i,e,t){const n=t[0],s=t[1],r=t[2];return i[0]=e[0]*n,i[1]=e[1]*n,i[2]=e[2]*n,i[3]=e[3]*n,i[4]=e[4]*s,i[5]=e[5]*s,i[6]=e[6]*s,i[7]=e[7]*s,i[8]=e[8]*r,i[9]=e[9]*r,i[10]=e[10]*r,i[11]=e[11]*r,i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i}function vf(i,e,t){const n=e[0],s=e[1],r=e[2],a=e[3],o=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],p=e[10],f=e[11],g=e[12],m=e[13],y=e[14],b=e[15];let x=t[0],S=t[1],C=t[2],w=t[3];return i[0]=x*n+S*o+C*h+w*g,i[1]=x*s+S*l+C*d+w*m,i[2]=x*r+S*c+C*p+w*y,i[3]=x*a+S*u+C*f+w*b,x=t[4],S=t[5],C=t[6],w=t[7],i[4]=x*n+S*o+C*h+w*g,i[5]=x*s+S*l+C*d+w*m,i[6]=x*r+S*c+C*p+w*y,i[7]=x*a+S*u+C*f+w*b,x=t[8],S=t[9],C=t[10],w=t[11],i[8]=x*n+S*o+C*h+w*g,i[9]=x*s+S*l+C*d+w*m,i[10]=x*r+S*c+C*p+w*y,i[11]=x*a+S*u+C*f+w*b,x=t[12],S=t[13],C=t[14],w=t[15],i[12]=x*n+S*o+C*h+w*g,i[13]=x*s+S*l+C*d+w*m,i[14]=x*r+S*c+C*p+w*y,i[15]=x*a+S*u+C*f+w*b,i}function WZe(i,e,t,n){let s,r,a,o,l,c,u,h,d,p;const f=e[0],g=e[1],m=e[2],y=n[0],b=n[1],x=n[2],S=t[0],C=t[1],w=t[2];return Math.abs(f-S)<Dt&&Math.abs(g-C)<Dt&&Math.abs(m-w)<Dt?O5(i):(u=f-S,h=g-C,d=m-w,p=1/Math.hypot(u,h,d),u*=p,h*=p,d*=p,s=b*d-x*h,r=x*u-y*d,a=y*h-b*u,p=Math.hypot(s,r,a),p?(p=1/p,s*=p,r*=p,a*=p):(s=0,r=0,a=0),o=h*a-d*r,l=d*s-u*a,c=u*r-h*s,p=Math.hypot(o,l,c),p?(p=1/p,o*=p,l*=p,c*=p):(o=0,l=0,c=0),i[0]=s,i[1]=o,i[2]=u,i[3]=0,i[4]=r,i[5]=l,i[6]=h,i[7]=0,i[8]=a,i[9]=c,i[10]=d,i[11]=0,i[12]=-(s*f+r*g+a*m),i[13]=-(o*f+l*g+c*m),i[14]=-(u*f+h*g+d*m),i[15]=1,i)}function GZe(i,e,t,n,s,r,a){const o=1/(e-t),l=1/(n-s),c=1/(r-a);return i[0]=-2*o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*l,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*c,i[11]=0,i[12]=(e+t)*o,i[13]=(s+n)*l,i[14]=(a+r)*c,i[15]=1,i}function ua(i,e,t){const n=e[0],s=e[1],r=e[2];let a=t[3]*n+t[7]*s+t[11]*r+t[15];return a=a||1,i[0]=(t[0]*n+t[4]*s+t[8]*r+t[12])/a,i[1]=(t[1]*n+t[5]*s+t[9]*r+t[13])/a,i[2]=(t[2]*n+t[6]*s+t[10]*r+t[14])/a,i}function _V(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}class KZe{constructor(){this.pools=[]}allocate(e,t,n,s,r,a){if(!this.pools.length)return new Zi(e,t,n,s,r,a);const o=this.pools.pop();return o.a=e,o.b=t,o.c=n,o.d=s,o.e=r,o.f=a,o}allocateByObj(e){if(!this.pools.length)return new Zi(e.a,e.b,e.c,e.d,e.e,e.f);const t=this.pools.pop();return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.e=e.e,t.f=e.f,t}free(e){this.pools.push(e)}get length(){return this.pools.length}release(...e){this.pools=[]}}class M5{constructor(){this.pools=[]}static identity(e){return O5(e)}allocate(){if(!this.pools.length)return _V();const e=this.pools.pop();return M5.identity(e),e}allocateByObj(e){let t;t=this.pools.length?this.pools.pop():_V();for(let n=0;n<t.length;n++)t[n]=e[n];return t}free(e){e&&this.pools.push(e)}get length(){return this.pools.length}release(...e){this.pools=[]}}const ba=new KZe,Mi=new M5;var XZe=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},YZe=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},qZe=function(i,e){return function(t,n){e(t,n,i)}};function Ure(i,e,t){var n;const{x:s=t.x,y:r=t.y,z:a=t.z,dx:o=t.dx,dy:l=t.dy,dz:c=t.dz,scaleX:u=t.scaleX,scaleY:h=t.scaleY,scaleZ:d=t.scaleZ,alpha:p=t.alpha,beta:f=t.beta,angle:g=t.angle,anchor3d:m=e.attribute.anchor,anchor:y}=e.attribute,b=[0,0,0];if(m){if(typeof m[0]=="string"){const x=parseFloat(m[0])/100,S=e.AABBBounds;b[0]=S.x1+(S.x2-S.x1)*x}else b[0]=m[0];if(typeof m[1]=="string"){const x=parseFloat(m[1])/100,S=e.AABBBounds;b[1]=S.x1+(S.x2-S.x1)*x}else b[1]=m[1];b[2]=(n=m[2])!==null&&n!==void 0?n:0}if(O5(i),d_(i,i,[s+o,r+l,a+c]),d_(i,i,[b[0],b[1],b[2]]),zZe(i,i,f),HZe(i,i,p),d_(i,i,[-b[0],-b[1],b[2]]),UZe(i,i,[u,h,d]),g){const x=Mi.allocate(),S=[0,0];if(y){if(typeof m[0]=="string"){const C=parseFloat(m[0])/100,w=e.AABBBounds;S[0]=w.x1+(w.x2-w.x1)*C}else S[0]=m[0];if(typeof m[1]=="string"){const C=parseFloat(m[1])/100,w=e.AABBBounds;S[1]=w.x1+(w.x2-w.x1)*C}else S[1]=m[1]}d_(x,x,[S[0],S[1],0]),VZe(x,x,g),d_(x,x,[-S[0],-S[1],0]),vf(i,i,x)}}function ZZe(i){const{alpha:e,beta:t}=i.attribute;return e||t}let WD=class{constructor(i){this.creator=i,this.hooks={onAttributeUpdate:new ga(["graphic"]),onSetStage:new ga(["graphic","stage"]),onRemove:new ga(["graphic"]),onRelease:new ga(["graphic"]),onAddIncremental:new ga(["graphic","group","stage"]),onClearIncremental:new ga(["graphic","group","stage"]),beforeUpdateAABBBounds:new ga(["graphic","stage","willUpdate","aabbBounds"]),afterUpdateAABBBounds:new ga(["graphic","stage","aabbBounds","globalAABBBounds","selfChange"])},this.tempAABBBounds1=new Qi,this.tempAABBBounds2=new Qi}onAttributeUpdate(i){this.hooks.onAttributeUpdate.taps.length&&this.hooks.onAttributeUpdate.call(i)}onSetStage(i,e){this.hooks.onSetStage.taps.length&&this.hooks.onSetStage.call(i,e)}onRemove(i){this.hooks.onRemove.taps.length&&this.hooks.onRemove.call(i)}onRelease(i){this.hooks.onRelease.taps.length&&this.hooks.onRelease.call(i)}onAddIncremental(i,e,t){this.hooks.onAddIncremental.taps.length&&this.hooks.onAddIncremental.call(i,e,t)}onClearIncremental(i,e){this.hooks.onClearIncremental.taps.length&&this.hooks.onClearIncremental.call(i,e)}beforeUpdateAABBBounds(i,e,t,n){this.hooks.beforeUpdateAABBBounds.taps.length&&this.hooks.beforeUpdateAABBBounds.call(i,e,t,n)}afterUpdateAABBBounds(i,e,t,n,s){this.hooks.afterUpdateAABBBounds.taps.length&&this.hooks.afterUpdateAABBBounds.call(i,e,t,n,s)}updatePathProxyAABBBounds(i,e){const t=typeof e.pathProxy=="function"?e.pathProxy(e.attribute):e.pathProxy;if(!t)return!1;const n=new d5(i);return Ed(t.commandList,n,0,0),!0}updateHTMLTextAABBBounds(i,e,t,n){const{textAlign:s,textBaseline:r}=i;if(i.forceBoundsHeight!=null){const a=ye(i.forceBoundsHeight)?i.forceBoundsHeight:i.forceBoundsHeight(),o=iu(r,a,a);t.set(t.x1,o,t.x2,o+a)}if(i.forceBoundsWidth!=null){const a=ye(i.forceBoundsWidth)?i.forceBoundsWidth:i.forceBoundsWidth(),o=tu(s,a);t.set(o,t.y1,o+a,t.y2)}}combindShadowAABBBounds(i,e){if(e&&e.shadowRoot){const t=e.shadowRoot.AABBBounds;i.union(t)}}transformAABBBounds(i,e,t,n,s){if(!e.empty()){const{scaleX:o=t.scaleX,scaleY:l=t.scaleY,stroke:c=t.stroke,shadowBlur:u=t.shadowBlur,lineWidth:h=t.lineWidth,pickStrokeBuffer:d=t.pickStrokeBuffer,strokeBoundsBuffer:p=t.strokeBoundsBuffer}=i,f=this.tempAABBBounds1,g=this.tempAABBBounds2;if(c&&h){const m=(h+d)/Math.abs(o+l);GA(f,m,n,p),e.union(f),f.setValue(g.x1,g.y1,g.x2,g.y2)}if(u){const{shadowOffsetX:m=t.shadowOffsetX,shadowOffsetY:y=t.shadowOffsetY}=i,b=u/Math.abs(o+l)*2;GA(f,b,!1,p+1),f.translate(m,y),e.union(f)}}if(this.combindShadowAABBBounds(e,s),e.empty())return;let r=!0;const a=s.transMatrix;s&&s.isContainer&&(r=!(a.a===1&&a.b===0&&a.c===0&&a.d===1&&a.e===0&&a.f===0)),r&&JN(e,e,a)}validCheck(i,e,t,n){if(!n||i.forceBoundsHeight!=null||i.forceBoundsWidth!=null||n.shadowRoot)return!0;if(!n.valid)return t.clear(),!1;const{visible:s=e.visible}=i;return!!s||(t.clear(),!1)}updateTempAABBBounds(i){const e=this.tempAABBBounds1,t=this.tempAABBBounds2;return e.setValue(i.x1,i.y1,i.x2,i.y2),t.setValue(i.x1,i.y1,i.x2,i.y2),{tb1:e,tb2:t}}};WD=XZe([Oe(),qZe(0,rt(Bre)),YZe("design:paramtypes",[Object])],WD);const xn={x:0,y:0,z:0,lastModelMatrix:null};class Er{init(e){e&&(this._renderContribitions=e.getContributions()),this._renderContribitions||(this._renderContribitions=[]),this.builtinContributions&&this.builtinContributions.forEach(t=>this._renderContribitions.push(t)),this._renderContribitions.length&&(this._renderContribitions.sort((t,n)=>n.order-t.order),this._beforeRenderContribitions=this._renderContribitions.filter(t=>t.time===qn.beforeFillStroke),this._afterRenderContribitions=this._renderContribitions.filter(t=>t.time===qn.afterFillStroke))}beforeRenderStep(e,t,n,s,r,a,o,l,c,u,h,d,p){this._beforeRenderContribitions&&this._beforeRenderContribitions.forEach(f=>{f.supportedAppName&&e.stage&&e.stage.params&&e.stage.params.context&&e.stage.params.context.appName&&!(Array.isArray(f.supportedAppName)?f.supportedAppName:[f.supportedAppName]).includes(e.stage.params.context.appName)||f.drawShape(e,t,n,s,r,a,o,l,c,u,h,d,p)})}afterRenderStep(e,t,n,s,r,a,o,l,c,u,h,d,p){this._afterRenderContribitions&&this._afterRenderContribitions.forEach(f=>{f.supportedAppName&&e.stage&&e.stage.params&&e.stage.params.context&&e.stage.params.context.appName&&!(Array.isArray(f.supportedAppName)?f.supportedAppName:[f.supportedAppName]).includes(e.stage.params.context.appName)||f.drawShape(e,t,n,s,r,a,o,l,c,u,h,d,p)})}valid(e,t,n,s){const{fill:r=t.fill,background:a,stroke:o=t.stroke,opacity:l=t.opacity,fillOpacity:c=t.fillOpacity,lineWidth:u=t.lineWidth,strokeOpacity:h=t.strokeOpacity,visible:d=t.visible}=e.attribute,p=_f(l,c,r),f=T5(l,h),g=Zf(r,a),m=E0(o,u);return!(!e.valid||!d)&&!(!g&&!m)&&!!(p||f||n||s||a)&&{fVisible:p,sVisible:f,doFill:g,doStroke:m}}transform(e,t,n,s=!1){const{x:r=t.x,y:a=t.y,z:o=t.z,scaleX:l=t.scaleX,scaleY:c=t.scaleY,angle:u=t.angle,postMatrix:h}=e.attribute,d=n.modelMatrix,p=n.camera;xn.x=r,xn.y=a,xn.z=o,xn.lastModelMatrix=d;const f=p&&(s||ZZe(e)),g=f?e.transMatrix.onlyTranslate()&&!h:l===1&&c===1&&u===0&&!h;if(f){const m=Mi.allocate(),y=Mi.allocate();Ure(y,e,t),vf(m,d||m,y),xn.x=0,xn.y=0,xn.z=0,n.modelMatrix=m,n.setTransform(1,0,0,1,0,0,!0),Mi.free(y)}if(g&&!d){const m=e.getOffsetXY(t);xn.x+=m.x,xn.y+=m.y,xn.z=o,n.setTransformForCurrent()}else if(f)xn.x=0,xn.y=0,xn.z=0,n.setTransform(1,0,0,1,0,0,!0);else if(p&&n.project){const m=e.getOffsetXY(t);xn.x+=m.x,xn.y+=m.y,this.transformWithoutTranslate(n,xn.x,xn.y,xn.z,l,c,u)}else n.transformFromMatrix(e.transMatrix,!0),xn.x=0,xn.y=0,xn.z=0;return xn}transformUseContext2d(e,t,n,s){const r=s.camera;if(this.camera=r,r){const a=e.AABBBounds,o=a.x2-a.x1,l=a.y2-a.y1,c=s.project(0,0,n),u=s.project(o,0,n),h=s.project(o,l,n),d={x:0,y:0},p={x:o,y:0},f={x:o,y:l};s.camera=null;const g=1/(d.x*(f.y-p.y)-p.x*f.y+f.x*p.y+(p.x-f.x)*d.y),m=-(d.y*(h.x-u.x)-p.y*h.x+f.y*u.x+(p.y-f.y)*c.x)*g,y=(p.y*h.y+d.y*(u.y-h.y)-f.y*u.y+(f.y-p.y)*c.y)*g,b=(d.x*(h.x-u.x)-p.x*h.x+f.x*u.x+(p.x-f.x)*c.x)*g,x=-(p.x*h.y+d.x*(u.y-h.y)-f.x*u.y+(f.x-p.x)*c.y)*g,S=(d.x*(f.y*u.x-p.y*h.x)+d.y*(p.x*h.x-f.x*u.x)+(f.x*p.y-p.x*f.y)*c.x)*g,C=(d.x*(f.y*u.y-p.y*h.y)+d.y*(p.x*h.y-f.x*u.y)+(f.x*p.y-p.x*f.y)*c.y)*g;s.setTransform(m,y,b,x,S,C,!0)}}restoreTransformUseContext2d(e,t,n,s){this.camera&&(s.camera=this.camera)}transformWithoutTranslate(e,t,n,s,r,a,o){const l=e.project(t,n,s);e.translate(l.x,l.y,!1),e.scale(r,a,!1),e.rotate(o,!1),e.translate(-l.x,-l.y,!1),e.setTransformForCurrent()}_draw(e,t,n,s,r){const{context:a}=s;if(!a)return;const{renderable:o}=e.attribute;if(o===!1)return;a.highPerformanceSave();const l=this.transform(e,t,a,n),{x:c,y:u,z:h,lastModelMatrix:d}=l;this.z=h,DZe(e,a,c,u,s,r)||(this.drawShape(e,a,c,u,s,r),this.z=0,a.modelMatrix!==d&&Mi.free(a.modelMatrix),a.modelMatrix=d),a.highPerformanceRestore()}}const JZe=function(){const i={linearGradient:/^(linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,fromAngleValue:/^from\s*(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/(^\#[0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^(rgb\(\d{1,3},\s*\d{1,3},\s*\d{1,3}\))/i,rgbaColor:/^(rgba\(\d{1,3},\s*\d{1,3},\s*\d{1,3},\s*((\d\.\d+)|\d{1,3})\))/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/};let e="";function t(S){const C=new Error(e+": "+S);throw C.source=e,C}function n(){const S=p(s);return e.length>0&&t("Invalid input not EOF"),S}function s(){return r("linear",i.linearGradient,a)||r("radial",i.radialGradient,l)||r("conic",i.conicGradient,o)}function r(S,C,w){return function(A,T){const E=b(A);if(E){b(i.startCall)||t("Missing (");const P=T(E);return b(i.endCall)||t("Missing )"),P}}(C,function(A){const T=w();return T&&(b(i.comma)||t("Missing comma before color stops")),{type:S,orientation:T,colorStops:p(f)}})}function a(){return y("directional",i.sideOrCorner,1)||y("angular",i.angleValue,1)}function o(){return y("angular",i.fromAngleValue,1)}function l(){let S,C,w=c();return w&&(S=[],S.push(w),C=e,b(i.comma)&&(w=c(),w?S.push(w):e=C)),S}function c(){let S=function(){const C=y("shape",/^(circle)/i,0);return C&&(C.style=m()||u()),C}()||function(){const C=y("shape",/^(ellipse)/i,0);return C&&(C.style=g()||u()),C}();if(S)S.at=h();else{const C=u();if(C){S=C;const w=h();w&&(S.at=w)}else{const w=d();w&&(S={type:"default-radial",at:w})}}return S}function u(){return y("extent-keyword",i.extentKeywords,1)}function h(){if(y("position",/^at/,0)){const S=d();return S||t("Missing positioning value"),S}}function d(){const S={x:g(),y:g()};if(S.x||S.y)return{type:"position",value:S}}function p(S){let C=S();const w=[];if(C)for(w.push(C);b(i.comma);)C=S(),C?w.push(C):t("One extra comma");return w}function f(){const S=y("hex",i.hexColor,1)||y("rgba",i.rgbaColor,1)||y("rgb",i.rgbColor,1)||y("literal",i.literalColor,0);return S||t("Expected color definition"),S.length=g(),S}function g(){return y("%",i.percentageValue,1)||y("position-keyword",i.positionKeywords,1)||m()}function m(){return y("px",i.pixelValue,1)||y("em",i.emValue,1)}function y(S,C,w){const A=b(C);if(A)return{type:S,value:A[w]}}function b(S){const C=/^[\n\r\t\s]+/.exec(e);C&&x(C[0].length);const w=S.exec(e);return w&&x(w[0].length),w}function x(S){e=e.substr(S)}return function(S){return e=S.toString(),n()}}();class pm{static IsGradient(e){return!(typeof e=="string"&&!e.includes("gradient"))}static IsGradientStr(e){return typeof e=="string"&&e.includes("gradient")}static Parse(e){if(pm.IsGradientStr(e))try{const t=JZe(e)[0];if(t){if(t.type==="linear")return pm.ParseLinear(t);if(t.type==="radial")return pm.ParseRadial(t);if(t.type==="conic")return pm.ParseConic(t)}}catch{return e}return e}static ParseConic(e){const{orientation:t,colorStops:n=[]}=e,s=Qt/2,r=parseFloat(t.value)/180*Qt-s;return{gradient:"conical",x:.5,y:.5,startAngle:r,endAngle:r+yt,stops:n.map(a=>({color:a.value,offset:parseFloat(a.length.value)/100}))}}static ParseRadial(e){const{colorStops:t=[]}=e;return{gradient:"radial",x0:.5,y0:.5,x1:.5,y1:.5,r0:0,r1:1,stops:t.map(n=>({color:n.value,offset:parseFloat(n.length.value)/100}))}}static ParseLinear(e){const{orientation:t,colorStops:n=[]}=e,s=Qt/2;let r=t.type==="angular"?parseFloat(t.value)/180*Qt:0;for(;r<0;)r+=yt;for(;r>yt;)r-=yt;let a=0,o=0,l=0,c=0;return r<s?(a=0,o=1,l=Math.sin(r),c=Math.cos(r)):r<Qt?(a=0,o=0,l=Math.cos(r-s),c=Math.sin(r-s)):r<Qt+s?(a=1,o=0,l=a-Math.sin(r-Qt),c=Math.cos(r-Qt)):(a=1,l=a-Math.cos(r-s-Qt),c-=Math.sin(r-s-Qt)),{gradient:"linear",x0:a,y0:o,x1:l,y1:c,stops:n.map(u=>({color:u.value,offset:parseFloat(u.length.value)/100}))}}}function Uu(i,e,t){let n=e;const{a:s,b:r,c:a,d:o}=i.currentMatrix,l=Math.sign(s)*Math.sqrt(s*s+r*r),c=Math.sign(o)*Math.sqrt(a*a+o*o);return l+c===0?0:(n=n/Math.abs(l+c)*2*t,n)}function GD(i,e,t,n=0,s=0){if(!e||e===!0)return"black";let r,a;if(ie(e))for(let o=0;o<e.length&&(a=e[o],!a);o++);else a=e;if(a=pm.Parse(a),typeof a=="string")return a;if(t.AABBBounds&&(!t.attribute||t.attribute.scaleX!==0||t.attribute.scaleY!==0)){const o=t.AABBBounds;let l=o.x2-o.x1,c=o.y2-o.y1,u=o.x1-n,h=o.y1-s;if(t.attribute){const{scaleX:d=1,scaleY:p=1}=t.attribute;l/=d,c/=p,u/=d,h/=p}a.gradient==="linear"?r=QZe(i,a,u,h,l,c):a.gradient==="conical"?r=tJe(i,a,u,h,l,c):a.gradient==="radial"&&(r=eJe(i,a,u,h,l,c))}return r||"orange"}function QZe(i,e,t,n,s,r){var a,o,l,c;const u=i.createLinearGradient(t+((a=e.x0)!==null&&a!==void 0?a:0)*s,n+((o=e.y0)!==null&&o!==void 0?o:0)*r,t+((l=e.x1)!==null&&l!==void 0?l:1)*s,n+((c=e.y1)!==null&&c!==void 0?c:0)*r);return e.stops.forEach(h=>{u.addColorStop(h.offset,h.color)}),u}function eJe(i,e,t,n,s,r){var a,o,l,c,u,h;const d=i.createRadialGradient(t+((a=e.x0)!==null&&a!==void 0?a:.5)*s,n+((o=e.y0)!==null&&o!==void 0?o:.5)*r,Math.max(s,r)*((l=e.r0)!==null&&l!==void 0?l:0),t+((c=e.x1)!==null&&c!==void 0?c:.5)*s,n+((u=e.y1)!==null&&u!==void 0?u:.5)*r,Math.max(s,r)*((h=e.r1)!==null&&h!==void 0?h:.5));return e.stops.forEach(p=>{d.addColorStop(p.offset,p.color)}),d}function tJe(i,e,t,n,s,r){var a,o;const l=i.createConicGradient(t+((a=e.x)!==null&&a!==void 0?a:0)*s,n+((o=e.y)!==null&&o!==void 0?o:0)*r,e.startAngle,e.endAngle);return e.stops.forEach(c=>{l.addColorStop(c.offset,c.color)}),l.GetPattern(s+t,r+n,void 0)}var iJe=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},nJe=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},vV=function(i,e){return function(t,n){e(t,n,i)}};class Mx{constructor(){this.time=qn.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,n,s,r,a,o,l,c,u,h,d,p){var f;const{background:g,backgroundOpacity:m=(f=e.attribute.fillOpacity)!==null&&f!==void 0?f:c.backgroundOpacity,opacity:y=c.opacity,backgroundMode:b=c.backgroundMode,backgroundFit:x=c.backgroundFit}=e.attribute;if(g)if(e.backgroundImg&&e.resources){const S=e.resources.get(g);if(S.state!=="success"||!S.data)return;if(t.save(),e.parent&&!e.transMatrix.onlyTranslate()){const w=Ye(e.parent).group,{scrollX:A=w.scrollX,scrollY:T=w.scrollY}=e.parent.attribute;t.setTransformFromMatrix(e.parent.globalTransMatrix,!0),t.translate(A,T)}t.clip();const C=e.AABBBounds;t.setCommonStyle(e,e.attribute,n,s,c),t.globalAlpha=m*y,this.doDrawImage(t,S.data,C,b,x),t.restore(),e.transMatrix.onlyTranslate()||t.setTransformForCurrent()}else t.highPerformanceSave(),t.setCommonStyle(e,e.attribute,n,s,c),t.globalAlpha=m*y,t.fillStyle=g,t.fill(),t.highPerformanceRestore()}doDrawImage(e,t,n,s,r){if(s==="no-repeat")e.drawImage(t,n.x1,n.y1,n.width(),n.height());else{const a=n.width(),o=n.height();let l=a,c=o;if(r&&s!=="repeat"&&(t.width||t.height)){const d=t.width,p=t.height;s==="repeat-x"?(l=d*(o/p),c=o):s==="repeat-y"&&(c=p*(a/d),l=a);const f=e.dpr,g=Sy.allocate({width:l,height:c,dpr:f}),m=g.getContext("2d");m&&(m.inuse=!0,m.clearMatrix(),m.setTransformForCurrent(!0),m.clearRect(0,0,l,c),m.drawImage(t,0,0,l,c),t=g.nativeCanvas),Sy.free(g)}const u=e.dpr,h=e.createPattern(t,s);h.setTransform&&h.setTransform(new DOMMatrix([1/u,0,0,1/u,0,0])),e.fillStyle=h,e.translate(n.x1,n.y1),e.fillRect(0,0,a,o),e.translate(-n.x1,-n.y1)}}}const Jf=new Mx;let ko=class{constructor(i){this.subRenderContribitions=i,this.time=qn.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(i,e,t,n,s,r,a,o,l,c,u,h,d){this._subRenderContribitions||(this._subRenderContribitions=this.subRenderContribitions.getContributions()),this._subRenderContribitions.forEach(p=>{p.render(i,e,t,n,s,r,a,o,l,c,u,h,d)})}};ko=iJe([Oe(),vV(0,rt($n)),vV(0,rs(P5)),nJe("design:paramtypes",[Object])],ko);class I5{constructor(){this.time=qn.afterFillStroke,this.useStyle=!0,this.order=10}createCommonPattern(e,t,n,s,r){const a=(e-2*t)/2,o=s.dpr,l=Sy.allocate({width:e,height:e,dpr:o}),c=l.getContext("2d");if(!c)return null;c.inuse=!0,c.clearMatrix(),c.setTransformForCurrent(!0),c.clearRect(0,0,e,e),r(a,c);const u=s.createPattern(l.nativeCanvas,"repeat");return u.setTransform&&u.setTransform(new DOMMatrix([1/o,0,0,1/o,0,0])),Sy.free(l),u}createCirclePattern(e,t,n,s){return this.createCommonPattern(e,t,n,s,(r,a)=>{a.fillStyle=n,a.arc(r,r,r,0,yt),a.fill()})}createDiamondPattern(e,t,n,s){return this.createCommonPattern(e,t,n,s,(r,a)=>{const o=e/2,l=o;a.fillStyle=n,a.moveTo(o,l-r),a.lineTo(r+o,l),a.lineTo(o,l+r),a.lineTo(o-r,l),a.closePath(),a.fill()})}createRectPattern(e,t,n,s){return this.createCommonPattern(e,t,n,s,(r,a)=>{const o=t,l=o;a.fillStyle=n,a.fillRect(o,l,2*r,2*r)})}createVerticalLinePattern(e,t,n,s){return this.createCommonPattern(e,t,n,s,(r,a)=>{const o=t;a.fillStyle=n,a.fillRect(o,0,2*r,e)})}createHorizontalLinePattern(e,t,n,s){return this.createCommonPattern(e,t,n,s,(r,a)=>{const o=t;a.fillStyle=n,a.fillRect(0,o,e,2*r)})}createBiasLRLinePattern(e,t,n,s){return this.createCommonPattern(e,t,n,s,(r,a)=>{a.strokeStyle=n,a.lineWidth=r,a.moveTo(0,0),a.lineTo(e,e);const o=e/2,l=-o;a.moveTo(o,l),a.lineTo(o+e,l+e),a.moveTo(-o,-l),a.lineTo(-o+e,-l+e),a.stroke()})}createBiasRLLinePattern(e,t,n,s){return this.createCommonPattern(e,t,n,s,(r,a)=>{a.strokeStyle=n,a.lineWidth=r,a.moveTo(e,0),a.lineTo(0,e);const o=e/2,l=o;a.moveTo(e+o,l),a.lineTo(o,l+e),a.moveTo(e-o,-l),a.lineTo(-o,-l+e),a.stroke()})}createGridPattern(e,t,n,s){return this.createCommonPattern(e,t,n,s,(r,a)=>{const o=t,l=o;a.fillStyle=n,a.fillRect(o,l,r,r),a.fillRect(o+r,l+r,r,r)})}initTextureMap(e,t){this.textureMap=new Map}drawShape(e,t,n,s,r,a,o,l,c,u,h,d,p){this.textureMap||this.initTextureMap(t,e.stage);const{texture:f=c.texture,textureColor:g=c.textureColor,textureSize:m=c.textureSize,texturePadding:y=c.texturePadding}=e.attribute;f&&this.drawTexture(f,e,t,n,s,c,g,m,y)}drawTexture(e,t,n,s,r,a,o,l,c){let u=this.textureMap.get(e);if(!u)switch(e){case"circle":u=this.createCirclePattern(l,c,o,n);break;case"diamond":u=this.createDiamondPattern(l,c,o,n);break;case"rect":u=this.createRectPattern(l,c,o,n);break;case"vertical-line":u=this.createVerticalLinePattern(l,c,o,n);break;case"horizontal-line":u=this.createHorizontalLinePattern(l,c,o,n);break;case"bias-lr":u=this.createBiasLRLinePattern(l,c,o,n);break;case"bias-rl":u=this.createBiasRLLinePattern(l,c,o,n);break;case"grid":u=this.createGridPattern(l,c,o,n)}u&&(n.highPerformanceSave(),n.setCommonStyle(t,t.attribute,s,r,a),n.fillStyle=u,n.fill(),n.highPerformanceRestore())}}const P0=new I5;class sJe{constructor(){this.time=qn.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,n,s,r,a,o,l,c,u,h,d){const{outerBorder:p,innerBorder:f}=e.attribute,g=p&&p.visible!==!1,m=f&&f.visible!==!1;if(!g&&!m)return;const{innerPadding:y=c.innerPadding,outerPadding:b=c.outerPadding,startAngle:x=c.startAngle,endAngle:S=c.endAngle,opacity:C=c.opacity,x:w=c.x,y:A=c.y,scaleX:T=c.scaleX,scaleY:E=c.scaleY}=e.attribute;let{innerRadius:P=c.innerRadius,outerRadius:O=c.outerRadius}=e.attribute;O+=b,P-=y;const M=(R,j)=>{const I=!(!R||!R.stroke),{distance:D=c[j].distance}=R,z=Uu(t,D,t.dpr),$=D/O,V=j==="outerBorder"?1:-1;if(e.setAttributes({outerRadius:O+V*z,innerRadius:P-V*z,startAngle:x-V*$,endAngle:S+V*$}),t.beginPath(),DD(e,t,n,s,O+V*z,P-V*z),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,c),d)d(t,R,c[j]);else if(I){const L=c[j].opacity;c[j].opacity=C,t.setStrokeStyle(e,R,(w-n)/T,(A-s)/E,c[j]),c[j].opacity=L,t.stroke()}};g&&M(p,"outerBorder"),m&&M(f,"innerBorder"),e.setAttributes({outerRadius:O,innerRadius:P,startAngle:x,endAngle:S})}}const rJe=new sJe,aJe=P0,oJe=Jf;class lJe{constructor(){this.time=qn.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,n,s,r,a,o,l,c,u,h,d){const{outerBorder:p,innerBorder:f}=e.attribute,g=p&&p.visible!==!1,m=f&&f.visible!==!1;if(!g&&!m)return;const{radius:y=c.radius,startAngle:b=c.startAngle,endAngle:x=c.endAngle,opacity:S=c.opacity,x:C=c.x,y:w=c.y,scaleX:A=c.scaleX,scaleY:T=c.scaleY}=e.attribute,E=(P,O)=>{const M=!(!P||!P.stroke),{distance:R=c[O].distance}=P,j=Uu(t,R,t.dpr),I=O==="outerBorder"?1:-1;if(t.beginPath(),t.arc(n,s,y+I*j,b,x),t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,c),d)d(t,P,c[O]);else if(M){const D=c[O].opacity;c[O].opacity=S,t.setStrokeStyle(e,P,(C-n)/A,(w-s)/T,c[O]),c[O].opacity=D,t.stroke()}};g&&E(p,"outerBorder"),m&&E(f,"innerBorder")}}const cJe=new lJe,uJe=P0,hJe=Jf;class dJe extends Mx{constructor(){super(...arguments),this.time=qn.beforeFillStroke}drawShape(e,t,n,s,r,a,o,l,c,u,h,d){const{background:p,backgroundMode:f=c.backgroundMode,backgroundFit:g=c.backgroundFit}=e.attribute;if(p)if(e.backgroundImg&&e.resources){const m=e.resources.get(p);if(m.state!=="success"||!m.data)return;t.highPerformanceSave(),t.setTransformFromMatrix(e.parent.globalTransMatrix,!0);const y=e.AABBBounds;this.doDrawImage(t,m.data,y,f,g),t.highPerformanceRestore(),t.setTransformForCurrent()}else t.highPerformanceSave(),t.fillStyle=p,t.fill(),t.highPerformanceRestore()}}const pJe=new dJe,oC=Qt/2;function Hd(i,e,t,n,s,r,a){let o;if(n<0&&(e+=n,n=-n),s<0&&(t+=s,s=-s),ye(r,!0))o=[r=At(r),r,r,r];else if(Array.isArray(r)){const w=r;let A,T;switch(w.length){case 0:o=[0,0,0,0];break;case 1:A=At(w[0]),o=[A,A,A,A];break;case 2:case 3:A=At(w[0]),T=At(w[1]),o=[A,T,A,T];break;default:o=w,o[0]=At(o[0]),o[1]=At(o[1]),o[2]=At(o[2]),o[3]=At(o[3])}}else o=[0,0,0,0];if(n<0||o[0]+o[1]+o[2]+o[3]<1e-12)return i.rect(e,t,n,s);const[l,c,u,h]=[[e,t],[e+n,t],[e+n,t+s],[e,t+s]],d=Math.min(n/2,s/2),p=[Math.min(d,o[0]),Math.min(d,o[1]),Math.min(d,o[2]),Math.min(d,o[3])],f=[l[0]+p[0],l[1]],g=[l[0],l[1]+p[0]],m=[c[0]-p[1],c[1]],y=[c[0],c[1]+p[1]],b=[u[0]-p[2],u[1]],x=[u[0],u[1]-p[2]],S=[h[0]+p[3],h[1]],C=[h[0],h[1]-p[3]];if(i.moveTo(f[0],f[1]),a&&a[0]?a[0](f[0],f[1],m[0],m[1]):i.lineTo(m[0],m[1]),!zS(m,y)){a&&a[0]&&i.moveTo(m[0],m[1]);const w=m[0],A=m[1]+p[1];i.arc(w,A,p[1],-oC,0,!1)}if(a&&a[1]?a[1](y[0],y[1],x[0],x[1]):i.lineTo(x[0],x[1]),!zS(b,x)){const w=x[0]-p[2],A=x[1];a&&a[1]&&i.moveTo(x[0],x[1]),i.arc(w,A,p[2],0,oC,!1)}if(a&&a[2]?a[2](b[0],b[1],S[0],S[1]):i.lineTo(S[0],S[1]),!zS(S,C)){const w=S[0],A=S[1]-p[3];a&&a[2]&&i.moveTo(S[0],S[1]),i.arc(w,A,p[3],oC,Qt,!1)}if(a&&a[3]?a[3](C[0],C[1],g[0],g[1]):i.lineTo(g[0],g[1]),!zS(f,g)){const w=f[0],A=f[1]+p[0];a&&a[3]&&i.moveTo(g[0],g[1]),i.arc(w,A,p[0],Qt,Qt+oC,!1)}return!a&&i.closePath(),i}var Wre=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};class Gre{constructor(){this.time=qn.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,n,s,r,a,o,l,c,u,h,d){const{outerBorder:p,innerBorder:f}=e.attribute,g=p&&p.visible!==!1,m=f&&f.visible!==!1;if(!g&&!m)return;const{cornerRadius:y=c.cornerRadius,opacity:b=c.opacity,x=c.x,y:S=c.y,scaleX:C=c.scaleX,scaleY:w=c.scaleY,x1:A,y1:T}=e.attribute;let{width:E,height:P}=e.attribute;E=(E??A-n)||0,P=(P??T-s)||0;const O=(M,R)=>{const j=!(!M||!M.stroke),I=R==="outerBorder"?-1:1,{distance:D=c[R].distance}=M,z=Uu(t,D,t.dpr),$=n+I*z,V=s+I*z,L=2*z;if(y===0||ie(y)&&y.every(Y=>Y===0)?(t.beginPath(),t.rect($,V,E-I*L,P-I*L)):(t.beginPath(),Hd(t,$,V,E-I*L,P-I*L,y)),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,c),d)d(t,M,c[R]);else if(j){const Y=c[R].opacity;c[R].opacity=b,t.setStrokeStyle(e,M,(x-n)/C,(S-s)/w,c[R]),c[R].opacity=Y,t.stroke()}};g&&O(p,"outerBorder"),m&&O(f,"innerBorder")}}let KA=class{constructor(){this.time=qn.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(i,e,t,n,s,r,a,o,l,c,u,h,d){const{stroke:p=l.stroke}=i.attribute;Array.isArray(p)&&p.some(f=>f===!1)&&(d.doStroke=!1)}};KA=Wre([Oe()],KA);let XA=class{constructor(){this.time=qn.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(i,e,t,n,s,r,a,o,l,c,u,h){const{x1:d,y1:p,x:f=l.x,y:g=l.y,stroke:m=l.stroke,cornerRadius:y=l.cornerRadius}=i.attribute;let{width:b,height:x}=i.attribute;if(b=(b??d-f)||0,x=(x??p-g)||0,Array.isArray(m)&&m.some(S=>S===!1)){if(e.setStrokeStyle(i,i.attribute,t,n,l),!(y===0||ie(y)&&y.every(S=>S===0))){let S,C=0;return Hd(e,t,n,b,x,y,new Array(4).fill(0).map((w,A)=>(T,E,P,O)=>{m[A]&&(C===A-1&&m[A]===S||(e.setStrokeStyle(i,Object.assign(Object.assign({},i.attribute),{stroke:m[A]}),t,n,l),e.beginPath(),e.moveTo(T,E),S=m[A]),C=A,e.lineTo(P,O),e.stroke(),A===3&&e.beginPath())})),void e.stroke()}if(e.beginPath(),e.moveTo(t,n),m[0]?e.lineTo(t+b,n):e.moveTo(t+b,n),m[1]?e.lineTo(t+b,n+x):e.moveTo(t+b,n+x),m[2]?e.lineTo(t,n+x):e.moveTo(t,n+x),m[3]){const S=m[0]?n-e.lineWidth/2:n;e.lineTo(t,S)}else e.moveTo(t,n);e.stroke()}}};XA=Wre([Oe()],XA);const fJe=new Gre,gJe=P0,mJe=Jf;class yJe extends Mx{constructor(){super(...arguments),this.time=qn.beforeFillStroke}drawShape(e,t,n,s,r,a,o,l,c,u,h,d){const{background:p,backgroundMode:f=c.backgroundMode,backgroundFit:g=c.backgroundFit}=e.attribute;if(p)if(e.backgroundImg){const m=e.resources.get(p);if(m.state!=="success"||!m.data)return;if(t.save(),e.parent&&!e.transMatrix.onlyTranslate()){const b=Ye(e.parent).group,{scrollX:x=b.scrollX,scrollY:S=b.scrollY}=e.parent.attribute;t.setTransformFromMatrix(e.parent.globalTransMatrix,!0),t.translate(x,S)}const y=e.AABBBounds;this.doDrawImage(t,m.data,y,f,g),t.restore(),e.transMatrix.onlyTranslate()||t.setTransformForCurrent()}else if(Ke(p)){const{stroke:m,fill:y,lineWidth:b=1,cornerRadius:x=0,expandX:S=0,expandY:C=0}=p;if(!m&&!y)return;t.beginPath();const{x:w,y:A,width:T,height:E}=_Je(e);x?Hd(t,w-S,A-C,T+2*S,E+2*C,x):t.rect(w-S,A-C,T+2*S,E+2*C),t.globalAlpha=1,y&&(t.fillStyle=y,t.fill()),m&&b>0&&(t.lineWidth=b,t.strokeStyle=m,t.stroke())}else{t.beginPath();const m=e.AABBBounds;t.rect(n,s,m.width(),m.height()),t.fillStyle=p,t.globalAlpha=1,t.fill()}}}function _Je(i){const e=WA(i.attribute.boundsPadding),t=i.AABBBounds;let n=t.x1,s=t.y1,r=t.width(),a=t.height();return ye(e)?(n+=e,s+=e,r-=2*e,a-=2*e):(n+=e[3],s+=e[0],r-=e[1]+e[3],a-=e[0]+e[2]),{x:n,y:s,width:r,height:a}}class vJe extends Gre{constructor(){super(...arguments),this.time=qn.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,n,s,r,a,o,l,c,u,h,d){return super.drawShape(e,t,n,s,r,a,o,l,c,u,h,d)}}const bJe=new vJe,xJe=new yJe;class SJe{constructor(){this.time=qn.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,n,s,r,a,o,l,c,u,h,d){const p=e.getParsedPath();if(!p)return;const{outerBorder:f,innerBorder:g}=e.attribute,m=f&&f.visible!==!1,y=g&&g.visible!==!1;if(!m&&!y)return;const{size:b=c.size,opacity:x=c.opacity,x:S=c.x,y:C=c.y,scaleX:w=c.scaleX,scaleY:A=c.scaleY}=e.attribute,T=(E,P)=>{const O=!(!E||!E.stroke),{distance:M=c[P].distance}=E,R=Uu(t,M,t.dpr),j=P==="outerBorder"?1:-1;if(t.beginPath(),p.drawOffset(t,b,n,s,j*R)===!1&&t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,c),d)d(t,E,c[P]);else if(O){const I=c[P].opacity;c[P].opacity=x,t.setStrokeStyle(e,E,(S-n)/w,(C-s)/A,c[P]),c[P].opacity=I,t.stroke()}};m&&T(f,"outerBorder"),y&&T(g,"innerBorder")}}const CJe=new SJe,wJe=P0,AJe=Jf;class kJe extends I5{constructor(){super(...arguments),this.time=qn.afterFillStroke}drawShape(e,t,n,s,r,a,o,l,c,u,h,d,p){var f,g,m,y;this.textureMap||this.initTextureMap(t,e.stage);const{attribute:b=e.attribute}=p||{},{texture:x=(f=e.attribute.texture)!==null&&f!==void 0?f:rC(c,"texture"),textureColor:S=(g=e.attribute.textureColor)!==null&&g!==void 0?g:rC(c,"textureColor"),textureSize:C=(m=e.attribute.textureSize)!==null&&m!==void 0?m:rC(c,"textureSize"),texturePadding:w=(y=e.attribute.texturePadding)!==null&&y!==void 0?y:rC(c,"texturePadding")}=b;x&&this.drawTexture(x,e,t,n,s,c,S,C,w)}}var TJe=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},EJe=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},bV=function(i,e){return function(t,n){e(t,n,i)}};let YA=class extends Er{constructor(i){super(),this.arcRenderContribitions=i,this.numberType=jP,this.builtinContributions=[rJe,oJe,aJe],this.init(i)}drawArcTailCapPath(i,e,t,n,s,r,a,o){const l=o-a,c=i.getParsedAngle(),u=c.startAngle;let h=c.endAngle;h=o;const d=h>u;let p=!1;if(s<r){const z=s;s=r,r=z}const{outerDeltaAngle:f,xors:g,yors:m,xirs:y,yirs:b,limitedOcr:x,outerCornerRadiusStart:S,outerCornerRadiusEnd:C,maxOuterCornerRadius:w,xore:A,yore:T,xire:E,yire:P,limitedIcr:O,innerDeltaAngle:M,innerStartAngle:R,innerCornerRadiusStart:j,innerCornerRadiusEnd:I,maxInnerCornerRadius:D}=Hre(i,u,h,r,s);if(x>Dt){const z=fs(S,x),$=fs(C,x),V=Mh(y,b,g,m,s,z,Number(d)),L=Mh(A,T,E,P,s,$,Number(d));if(x<w&&z===$)e.moveTo(t+V.cx+V.x01,n+V.cy+V.y01),e.arc(t+V.cx,n+V.cy,x,Jt(V.y01,V.x01),Jt(L.y01,L.x01),!d);else{const Y=h-l-.03,ae=Jt(L.y11,L.x11);e.arc(t,n,s,Y,ae,!d),$>0&&e.arc(t+L.cx,n+L.cy,$,Jt(L.y11,L.x11),Jt(L.y01,L.x01),!d)}}else e.moveTo(t+g,n+m);if(!(r>Dt)||M<.001)e.lineTo(t+E,n+P),p=!0;else if(O>Dt){const z=fs(j,O),$=fs(I,O),V=Mh(E,P,A,T,r,-$,Number(d)),L=Mh(g,m,y,b,r,-z,Number(d));if(e.lineTo(t+V.cx+V.x01,n+V.cy+V.y01),O<D&&z===$){const Y=Jt(L.y01,L.x01);e.arc(t+V.cx,n+V.cy,O,Jt(V.y01,V.x01),Y,!d)}else{$>0&&e.arc(t+V.cx,n+V.cy,$,Jt(V.y01,V.x01),Jt(V.y11,V.x11),!d);const Y=Jt(V.cy+V.y11,V.cx+V.x11),ae=h-l-.03;e.arc(t,n,r,Y,ae,d)}}else e.lineTo(t+r*vi(R),n+r*ti(R));return p}drawShape(i,e,t,n,s,r,a,o){const l=Ye(i,r==null?void 0:r.theme).arc,{fill:c=l.fill,stroke:u=l.stroke,x:h=l.x,y:d=l.y,fillStrokeOrder:p=l.fillStrokeOrder}=i.attribute,f=this.valid(i,l,a,o);if(!f)return;const{fVisible:g,sVisible:m,doFill:y,doStroke:b}=f,{outerPadding:x=l.outerPadding,innerPadding:S=l.innerPadding,cap:C=l.cap,forceShowCap:w=l.forceShowCap}=i.attribute;let{outerRadius:A=l.outerRadius,innerRadius:T=l.innerRadius}=i.attribute;A+=x,T-=S;let E=0;const P=(Ui(C)&&C||C[0])&&c.gradient==="conical";if(P){const{sc:j,startAngle:I,endAngle:D}=i.getParsedAngle();At(D-I)<yt-Dt&&(E=j||0,c.startAngle-=E,c.endAngle-=E)}let O=!1;const{isFullStroke:M,stroke:R}=Jqe(u);if(y||M){e.beginPath(),DD(i,e,t,n,A,T),O=!0,e.setShadowBlendStyle&&e.setShadowBlendStyle(i,i.attribute,l),this.beforeRenderStep(i,e,t,n,y,b,g,m,l,s,a,o);const j=()=>{y&&(a?a(e,i.attribute,l):g&&(e.setCommonStyle(i,i.attribute,h-t,d-n,l),e.fill()))},I=()=>{b&&M&&(o?o(e,i.attribute,l):m&&(e.setStrokeStyle(i,i.attribute,h-t,d-n,l),e.stroke()))};p?(I(),j()):(j(),I())}if(!M&&b&&(e.beginPath(),DD(i,e,t,n,A,T,R),O||this.beforeRenderStep(i,e,t,n,y,b,g,m,l,s,a,o),o?o(e,i.attribute,l):m&&(e.setStrokeStyle(i,i.attribute,t,n,l),e.stroke())),(Ui(C)&&C||C[1])&&w){const{startAngle:j,endAngle:I}=i.getParsedAngle();if(At(I-j)>=yt-Dt){e.beginPath();const D=Math.abs(A-T)/2/A,{endAngle:z=l.endAngle,fill:$=l.fill}=i.attribute,V=z;this.drawArcTailCapPath(i,e,t,n,A,T,V,V+D),O||this.beforeRenderStep(i,e,t,n,y,b,g,m,l,s,a,o);const L=()=>{if(y){const ae=$;if(ae.gradient==="conical"){const W=BZe(0,0,z,ae);a||_f&&(e.setCommonStyle(i,i.attribute,t,n,l),e.fillStyle=W,e.fill())}}},Y=()=>{b&&(o||m&&(e.setStrokeStyle(i,i.attribute,t,n,l),e.stroke()))};L(),Y()}}this.afterRenderStep(i,e,t,n,y,b,g,m,l,s,a,o),P&&(c.startAngle+=E,c.endAngle+=E)}draw(i,e,t,n){const s=Ye(i,n==null?void 0:n.theme).arc;this._draw(i,s,!1,t,n)}};YA=TJe([Oe(),bV(0,rt($n)),bV(0,rs(FD)),EJe("design:paramtypes",[Object])],YA);var PJe=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},OJe=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},xV=function(i,e){return function(t,n){e(t,n,i)}};let qA=class extends Er{constructor(i){super(),this.circleRenderContribitions=i,this.numberType=$P,this.builtinContributions=[cJe,hJe,uJe],this.init(i)}drawShape(i,e,t,n,s,r,a,o){const l=Ye(i,r==null?void 0:r.theme).circle,{radius:c=l.radius,startAngle:u=l.startAngle,endAngle:h=l.endAngle,x:d=l.x,y:p=l.y,fillStrokeOrder:f=l.fillStrokeOrder}=i.attribute,g=this.valid(i,l,a,o);if(!g)return;const{fVisible:m,sVisible:y,doFill:b,doStroke:x}=g;e.beginPath(),e.arc(t,n,c,u,h),e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(i,i.attribute,l),this.beforeRenderStep(i,e,t,n,b,x,m,y,l,s,a,o);const S=()=>{b&&(a?a(e,i.attribute,l):m&&(e.setCommonStyle(i,i.attribute,d-t,p-n,l),e.fill()))},C=()=>{x&&(o?o(e,i.attribute,l):y&&(e.setStrokeStyle(i,i.attribute,d-t,p-n,l),e.stroke()))};f?(C(),S()):(S(),C()),this.afterRenderStep(i,e,t,n,b,x,m,y,l,s,a,o)}draw(i,e,t,n){const s=Ye(i,n==null?void 0:n.theme).circle;this._draw(i,s,!1,t,n)}};qA=PJe([Oe(),xV(0,rt($n)),xV(0,rs(jD)),OJe("design:paramtypes",[Object])],qA);function ZA(i,e,t,n){if(!e.p1)return;const{offsetX:s=0,offsetY:r=0,offsetZ:a=0}=n||{};if(t===1)e.p2&&e.p3?i.bezierCurveTo(s+e.p1.x,r+e.p1.y,s+e.p2.x,r+e.p2.y,s+e.p3.x,r+e.p3.y,a):i.lineTo(s+e.p1.x,r+e.p1.y,a);else if(e.p2&&e.p3){const[o]=xD(e,t);i.bezierCurveTo(s+o.p1.x,r+o.p1.y,s+o.p2.x,r+o.p2.y,s+o.p3.x,r+o.p3.y,a)}else{const o=e.getPointAt(t);i.lineTo(s+o.x,r+o.y,a)}}function SV(i,e,t,n,s,r,a){var o;let l=e.p0,c=n;if(t&&t.originP1===t.originP2&&(l=t.p0),e.defined)n||(i.lineTo(l.x+s,l.y+r,a),c=!n);else{const{originP1:u,originP2:h}=e;let d;if(u&&u.defined!==!1?d=l:u&&h.defined!==!1&&(d=(o=e.p3)!==null&&o!==void 0?o:e.p1),n){c=!n;const p=d?d.x:e.p0.x,f=d?d.y:e.p0.y;i.moveTo(p+s,f+r,a)}else d&&(c=!n,i.lineTo(d.x+s,d.y+r,a))}return c}function KD(i,e,t,n,s){const{offsetX:r=0,offsetY:a=0,offsetZ:o=0,mode:l="none",drawConnect:c=!1}=s||{};if(c&&l==="none"||!e)return;let u=!0;const{curves:h}=e;if(t>=1){if(c){let y,b=!0;h.forEach((x,S)=>{x.originP1!==x.originP2&&(b=SV(i,x,y,b,r,a,o)),y=x})}else h.forEach(y=>{y.defined?(u&&i.moveTo(y.p0.x+r,y.p0.y+a,o),ZA(i,y,1,s),u=!1):u=!0});return}if(t<=0)return;let d;n==="x"?d=yi.ROW:n==="y"?d=yi.COLUMN:n==="auto"&&(d=e.direction);const p=t*e.tryUpdateLength(d);let f=0,g=!0,m=null;for(let y=0,b=h.length;y<b;y++){const x=h[y],S=x.getLength(d),C=(p-f)/S;if(f+=S,C<0)break;if(c){if(x.originP1===x.originP2){m=x;continue}g=SV(i,x,m,g,r,a,o),m=x}else{if(!x.defined){u=!0;continue}u&&i.moveTo(x.p0.x+r,x.p0.y+a,o),ZA(i,x,fs(C,1),s),u=!1}}}function MJe(i,e,t,n){const{offsetX:s=0,offsetY:r=0}=n||{},a=e?e.points[e.points.length-1]:t.points[0];i.moveTo(a.x+s,a.y+r),t.points.forEach(o=>{o.defined!==!1?i.lineTo(o.x+s,o.y+r):i.moveTo(o.x+s,o.y+r)})}function IJe(i,e,t,n){const{offsetX:s=0,offsetY:r=0}=n||{},{points:a}=t,o=[];for(let l=0;l<a.length;l++)a[l].defined;o.push(a),o.forEach((l,c)=>{var u,h,d,p;const f=e&&c===0?e.points[e.points.length-1]:l[0];i.moveTo(f.x+s,f.y+r),l.forEach(g=>{g.defined!==!1?i.lineTo(g.x+s,g.y+r):i.moveTo(g.x+s,g.y+r)});for(let g=l.length-1;g>=0;g--){const m=l[g];i.lineTo((u=m.x1)!==null&&u!==void 0?u:m.x,(h=m.y1)!==null&&h!==void 0?h:m.y)}i.lineTo((d=f.x1)!==null&&d!==void 0?d:f.x,(p=f.y1)!==null&&p!==void 0?p:f.y),i.closePath()})}var RJe=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};let Wb=class extends Er{constructor(){super(...arguments),this.numberType=Ox}draw(i,e,t,n){const s=Ye(i,n==null?void 0:n.theme).line;this._draw(i,s,!1,t,n)}drawSegmentItem(i,e,t,n,s,r,a,o,l,c,u,h,d,p,f){var g,m,y,b,x;if(!e)return;i.beginPath();const S=(g=this.z)!==null&&g!==void 0?g:0;KD(i.camera?i:i.nativeContext,e,l,c,{offsetX:u,offsetY:h,offsetZ:S}),d.cache&&!ie(d.cache)&&d.cache.curves.every(O=>O.defined)&&d.attribute.curveType&&d.attribute.curveType.includes("Closed")&&i.closePath(),i.setShadowBlendStyle&&i.setShadowBlendStyle(d,a,o);const{x:C=0,x:w=0}=a;t!==!1&&(p?p(i,a,o):s&&(i.setCommonStyle(d,a,C-u,w-h,o),i.fill())),n!==!1&&(f?f(i,a,o):r&&(i.setStrokeStyle(d,a,C-u,w-h,o),i.stroke()));let{connectedType:A,connectedX:T,connectedY:E,connectedStyle:P}=a;if(ie(o)?(A=(m=A??o[0].connectedType)!==null&&m!==void 0?m:o[1].connectedType,T=(y=T??o[0].connectedX)!==null&&y!==void 0?y:o[1].connectedX,E=(b=E??o[0].connectedY)!==null&&b!==void 0?b:o[1].connectedY,P=(x=P??o[0].connectedStyle)!==null&&x!==void 0?x:o[1].connectedStyle):(A=A??o.connectedType,T=T??o.connectedX,E=E??o.connectedY,P=P??o.connectedStyle),A!=="connect"&&A!=="zero"&&(A="none"),A!=="none"){i.beginPath(),KD(i.camera?i:i.nativeContext,e,l,c,{offsetX:u,offsetY:h,offsetZ:S,drawConnect:!0,mode:A,zeroX:T,zeroY:E});const O=[];ie(o)?o.forEach(M=>O.push(M)):O.push(o),O.push(a),t!==!1&&(p?p(i,a,o):s&&(i.setCommonStyle(d,P,C-u,w-h,O),i.fill())),n!==!1&&(f?f(i,a,o):r&&(i.setStrokeStyle(d,P,C-u,w-h,O),i.stroke()))}return!1}drawLinearLineHighPerformance(i,e,t,n,s,r,a,o,l,c,u,h,d){var p;e.beginPath();const f=(p=this.z)!==null&&p!==void 0?p:0,{points:g}=i.attribute,m=g[0];e.moveTo(m.x+a,m.y+o,f);for(let x=1;x<g.length;x++){const S=g[x];e.lineTo(S.x+a,S.y+o,f)}e.setShadowBlendStyle&&e.setShadowBlendStyle(i,i.attribute,l);const{x:y=0,x:b=0}=i.attribute;t!==!1&&(h?h(e,i.attribute,l):s&&(e.setCommonStyle(i,i.attribute,y-a,b-o,l),e.fill())),n!==!1&&(d?d(e,i.attribute,l):r&&(e.setStrokeStyle(i,i.attribute,y-a,b-o,l),e.stroke()))}drawShape(i,e,t,n,s,r,a,o){const l=Ye(i,r==null?void 0:r.theme).line,{fill:c=l.fill,stroke:u=l.stroke,fillOpacity:h=l.fillOpacity,strokeOpacity:d=l.strokeOpacity,segments:p,points:f,closePath:g,curveTension:m=l.curveTension}=i.attribute;if(!this.valid(i,l,a,o))return;let{curveType:y=l.curveType}=i.attribute;g&&y==="linear"&&(y="linearClosed");const{clipRange:b=l.clipRange,clipRangeByDimension:x=l.clipRangeByDimension}=i.attribute;if(b===1&&!p&&!f.some(S=>S.defined===!1)&&y==="linear")return this.drawLinearLineHighPerformance(i,e,!!c,!!u,h,d,t,n,l,s,r,a,o);if(i.shouldUpdateShape()){const{points:S,segments:C}=i.attribute,w=S;if(C&&C.length){let A,T;if(i.cache=C.map((E,P)=>{if(E.points.length<=1&&P===0)return E.points[0]&&(T={endX:E.points[0].x,endY:E.points[0].y,curves:[{defined:E.points[0].defined!==!1}]}),null;P===1?A={x:T.endX,y:T.endY,defined:T.curves[T.curves.length-1].defined}:P>1&&(A.x=T.endX,A.y=T.endY,A.defined=T.curves[T.curves.length-1].defined);const O=Pp(E.points,y,{startPoint:A,curveTension:m});return T=O,O}).filter(E=>!!E),y==="linearClosed"){let E;for(let P=0;P<i.cache.length;P++){const O=i.cache[P];for(let M=0;M<O.curves.length;M++)if(O.curves[M].defined){E=O.curves[M].p0;break}if(E)break}i.cache[i.cache.length-1]&&i.cache[i.cache.length-1].lineTo(E.x,E.y,!0)}}else{if(!S||!S.length)return i.cache=null,void i.clearUpdateShapeTag();i.cache=Pp(w,y,{curveTension:m})}i.clearUpdateShapeTag()}if(Array.isArray(i.cache)){const S=i.attribute.segments.filter(C=>C.points.length);if(S[0].points.length===1&&S.shift(),b===1){let C=!1;i.cache.forEach((w,A)=>{C||(C=this.drawSegmentItem(e,w,!!c,!!u,h,d,S[A],[l,i.attribute],b,x,t,n,i,a,o))})}else{const C=i.cache.reduce((E,P)=>E+P.getLength(),0),w=b*C;let A=0,T=!1;i.cache.forEach((E,P)=>{if(T)return;const O=E.getLength(),M=(w-A)/O;A+=O,M>0&&(T=this.drawSegmentItem(e,E,!!c,!!u,h,d,S[P],[l,i.attribute],fs(M,1),x,t,n,i,a,o))})}}else this.drawSegmentItem(e,i.cache,!!c,!!u,h,d,i.attribute,l,b,x,t,n,i,a,o)}};Wb=RJe([Oe()],Wb);function LJe(i,e,t,n){var s;const{drawConnect:r=!1,mode:a="none"}=n||{};if(r&&a==="none")return;const{top:o,bottom:l}=e;if(o.curves.length!==l.curves.length)return;if(t>=1){const w=[],A=[];let T=!0;if(r){let E,P,O=!0;const M=o.curves.length;o.curves.forEach((R,j)=>{const I=l.curves[M-j-1];let D=R,z=I;if(R.originP1===R.originP2)return E=R,void(P=I);if(E&&E.originP1===E.originP2&&(D=E,z=P),R.defined)O||(w.push(D),A.push(z),Cg(i,w,A,n),w.length=0,A.length=0,O=!O);else{const{originP1:$,originP2:V}=R;let L,Y;$&&$.defined!==!1?(L=D,Y=z):$&&V.defined!==!1&&(L=R,Y=I),O?(O=!O,w.push(L||R),A.push(Y||I)):L&&(O=!O,w.push(L||R),A.push(Y||I),Cg(i,w,A,n),w.length=0,A.length=0)}E=R}),Cg(i,w,A,n)}else{for(let E=0,P=o.curves.length;E<P;E++){const O=o.curves[E];T!==O.defined?(T?(lC(i,w,A,n),w.length=0,A.length=0):(w.push(O),A.push(l.curves[P-E-1])),T=!T):T&&(w.push(O),A.push(l.curves[P-E-1]))}lC(i,w,A,n)}return}if(t<=0)return;let{direction:c}=n||{};const{curves:u}=o,h=(s=u[u.length-1].p3)!==null&&s!==void 0?s:u[u.length-1].p1,d=At(h.x-u[0].p0.x),p=At(h.y-u[0].p0.y);c=c??(d>p?yi.ROW:yi.COLUMN),Number.isFinite(d)||(c=yi.COLUMN),Number.isFinite(p)||(c=yi.ROW);const f=t*(c===yi.ROW?d:p);let g=0,m=!0;const y=[],b=[];let x,S,C=!0;for(let w=0,A=o.curves.length;w<A;w++){const T=o.curves[w],E=T.getLength(c),P=(f-g)/E;if(P<0)break;if(g+=E,r){const O=l.curves[A-w-1];let M=T,R=O;if(T.originP1===T.originP2){x=T,S=O;continue}if(x&&x.originP1===x.originP2&&(M=x,R=S),T.defined)C||(y.push(M),b.push(R),Cg(i,y,b,n),y.length=0,b.length=0,C=!C);else{const{originP1:j,originP2:I}=T;let D,z;j&&j.defined!==!1?(D=M,z=R):j&&I.defined!==!1&&(D=T,z=O),C?(C=!C,y.push(D||T),b.push(z||O)):D&&(C=!C,y.push(D||T),b.push(z||O),Cg(i,y,b,n),y.length=0,b.length=0)}x=T}else{let O=null,M=null;m!==T.defined?(m?(lC(i,y,b,n),y.length=0,b.length=0):(O=T,M=l.curves[A-w-1]),m=!m):m&&(O=T,M=l.curves[A-w-1]),O&&M&&(P<1&&(O=O.p2&&O.p3?xD(O,P)[0]:X8(O,P)[0],M=M.p2&&M.p3?xD(M,1-P)[1]:X8(M,1-P)[1]),O.defined=m,M.defined=m,y.push(O),b.push(M)),O=null,M=null}}r?Cg(i,y,b,n):lC(i,y,b,n)}function Cg(i,e,t,n){if(e.length<2)return;const{offsetX:s=0,offsetY:r=0,offsetZ:a=0,mode:o}=n||{};let l=e[0];i.moveTo(l.p0.x+s,l.p0.y+r,a),l=e[e.length-1];let c=l.p3||l.p1;i.lineTo(c.x+s,c.y+r,a),l=t[t.length-1],i.lineTo(l.p0.x+s,l.p0.y+r,a),l=t[0],c=l.p3||l.p1,i.lineTo(c.x+s,c.y+r,a),i.closePath()}function lC(i,e,t,n){const{offsetX:s=0,offsetY:r=0,offsetZ:a=0}=n||{};let o=!0;e.forEach(l=>{l.defined?(o&&i.moveTo(l.p0.x+s,l.p0.y+r,a),ZA(i,l,1,n),o=!1):o=!0}),o=!0;for(let l=t.length-1;l>=0;l--){const c=t[l];c.defined?(o&&i.lineTo(c.p0.x+s,c.p0.y+r,a),ZA(i,c,1,n),o=!1):o=!0}i.closePath()}const DJe=new kJe,FJe=Jf;var BJe=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},jJe=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},CV=function(i,e){return function(t,n){e(t,n,i)}};let Gb=class extends Er{constructor(i){super(),this.areaRenderContribitions=i,this.numberType=Px,this.builtinContributions=[DJe,FJe],this.init(i)}drawLinearAreaHighPerformance(i,e,t,n,s,r,a,o,l,c,u,h,d){var p,f,g;const{points:m}=i.attribute;if(m.length<2)return;e.beginPath();const y=(p=this.z)!==null&&p!==void 0?p:0,b=m[0];e.moveTo(b.x+a,b.y+o,y);for(let C=1;C<m.length;C++){const w=m[C];e.lineTo(w.x+a,w.y+o,y)}for(let C=m.length-1;C>=0;C--){const w=m[C];e.lineTo(((f=w.x1)!==null&&f!==void 0?f:w.x)+a,((g=w.y1)!==null&&g!==void 0?g:w.y)+o,y)}e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(i,i.attribute,l),this.beforeRenderStep(i,e,a,o,!!s,!1,t,!1,l,c,h,null,{attribute:i.attribute});const{x=0,x:S=0}=i.attribute;t!==!1&&(h?h(e,i.attribute,l):s&&(e.setCommonStyle(i,i.attribute,x-a,S-o,l),e.fill())),this.afterRenderStep(i,e,a,o,!!s,!1,t,!1,l,c,h,null,{attribute:i.attribute}),(()=>{var C,w;if(n){const{stroke:A=l&&l.stroke}=i.attribute;if(ie(A)&&(A[0]||A[2])&&A[1]===!1){if(e.beginPath(),A[0]){e.moveTo(b.x+a,b.y+o,y);for(let T=1;T<m.length;T++){const E=m[T];e.lineTo(E.x+a,E.y+o,y)}}else if(A[2]){const T=m[m.length-1];e.moveTo(T.x+a,T.y+o,y);for(let E=m.length-2;E>=0;E--){const P=m[E];e.lineTo(((C=P.x1)!==null&&C!==void 0?C:P.x)+a,((w=P.y1)!==null&&w!==void 0?w:P.y)+o,y)}}}d?d(e,i.attribute,l):(e.setStrokeStyle(i,i.attribute,x-a,S-o,l),e.stroke())}})()}drawShape(i,e,t,n,s,r,a,o){var l,c,u,h,d,p;const f=Ye(i,r==null?void 0:r.theme).area,{fill:g=f.fill,stroke:m=f.stroke,fillOpacity:y=f.fillOpacity,z:b=f.z,strokeOpacity:x=f.strokeOpacity,curveTension:S=f.curveTension}=i.attribute,C=this.valid(i,f,a,o);if(!C)return;const{doFill:w}=C,A=C.doStroke&&C.sVisible,{clipRange:T=f.clipRange,closePath:E,points:P,segments:O}=i.attribute;let{curveType:M=f.curveType}=i.attribute;if(E&&M==="linear"&&(M="linearClosed"),T===1&&!O&&!P.some(R=>R.defined===!1)&&M==="linear")return this.drawLinearAreaHighPerformance(i,e,!!g,A,y,x,t,n,f,s,r,a,o);if(i.shouldUpdateShape()){if(O&&O.length){let R,j;const I=O.map(($,V)=>{if($.points.length<=1&&V===0)return $.points[0]&&(j={endX:$.points[0].x,endY:$.points[0].y}),null;V===1?R={x:j.endX,y:j.endY}:V>1&&(R.x=j.endX,R.y=j.endY);const L=Pp($.points,M,{startPoint:R,curveTension:S});return j=L,L}).filter($=>!!$);let D;const z=[];for(let $=O.length-1;$>=0;$--){const V=O[$].points,L=[];for(let Y=V.length-1;Y>=0;Y--)L.push({x:(l=V[Y].x1)!==null&&l!==void 0?l:V[Y].x,y:(c=V[Y].y1)!==null&&c!==void 0?c:V[Y].y});if($!==0){const Y=O[$-1].points,ae=Y[Y.length-1];ae&&L.push({x:(u=ae.x1)!==null&&u!==void 0?u:ae.x,y:(h=ae.y1)!==null&&h!==void 0?h:ae.y})}L.length>1&&(D=Pp(L,M==="stepBefore"?"stepAfter":M==="stepAfter"?"stepBefore":M,{curveTension:S}),z.unshift(D))}i.cacheArea=z.map(($,V)=>({top:I[V],bottom:$}))}else{if(!P||!P.length)return i.cacheArea=null,void i.clearUpdateShapeTag();{const R=P,j=[];for(let z=P.length-1;z>=0;z--)j.push({x:(d=P[z].x1)!==null&&d!==void 0?d:P[z].x,y:(p=P[z].y1)!==null&&p!==void 0?p:P[z].y});const I=Pp(R,M,{curveTension:S}),D=Pp(j,M==="stepBefore"?"stepAfter":M==="stepAfter"?"stepBefore":M,{curveTension:S});i.cacheArea={top:I,bottom:D}}}i.clearUpdateShapeTag()}if(Array.isArray(i.cacheArea)){const R=i.attribute.segments.filter(j=>j.points.length);if(R[0].points.length===1&&R.shift(),T===1){let j=!1;i.cacheArea.forEach((I,D)=>{j||(j=this.drawSegmentItem(e,I,w,y,A,x,R[D],[f,i.attribute],T,t,n,b,i,s,a,o))})}else{const j=i.cacheArea.reduce(($,V)=>$+V.top.getLength(),0),I=T*j;let D=0,z=!1;i.cacheArea.forEach(($,V)=>{if(z)return;const L=$.top.getLength(),Y=(I-D)/L;D+=L,Y>0&&(z=this.drawSegmentItem(e,$,w,y,A,x,R[V],[f,i.attribute],fs(Y,1),t,n,b,i,s,a,o))})}}else this.drawSegmentItem(e,i.cacheArea,w,y,A,x,i.attribute,f,T,t,n,b,i,s,a,o)}draw(i,e,t,n){const s=Ye(i,n==null?void 0:n.theme).area;this._draw(i,s,!1,t,n)}drawSegmentItem(i,e,t,n,s,r,a,o,l,c,u,h,d,p,f,g){let m=!1;return m=m||this._drawSegmentItem(i,e,t,n,s,r,a,o,l,c,u,h,d,p,!1,f,g),m=m||this._drawSegmentItem(i,e,t,n,s,r,a,o,l,c,u,h,d,p,!0,f,g),m}_drawSegmentItem(i,e,t,n,s,r,a,o,l,c,u,h,d,p,f,g,m){var y,b,x,S;if(!(e&&e.top&&e.bottom&&e.top.curves&&e.top.curves.length&&e.bottom.curves&&e.bottom.curves.length))return;let{connectedType:C,connectedX:w,connectedY:A,connectedStyle:T}=a;const E=[];if(f&&(ie(o)?(C=(y=C??o[0].connectedType)!==null&&y!==void 0?y:o[1].connectedType,w=(b=w??o[0].connectedX)!==null&&b!==void 0?b:o[1].connectedX,A=(x=A??o[0].connectedY)!==null&&x!==void 0?x:o[1].connectedY,T=(S=T??o[0].connectedStyle)!==null&&S!==void 0?S:o[1].connectedStyle):(C=C??o.connectedType,w=w??o.connectedX,A=A??o.connectedY,T=T??o.connectedStyle),C!=="connect"&&C!=="zero"&&(C="none"),ie(o)?o.forEach(V=>E.push(V)):E.push(o),E.push(a)),f&&C==="none")return!1;i.beginPath();const{points:P,segments:O}=d.attribute;let M,R,j=yi.ROW;if(O){const V=O[O.length-1];R=O[0].points[0],M=V.points[V.points.length-1]}else R=P[0],M=P[P.length-1];const I=At(M.x-R.x),D=At(M.y-R.y);j=M.x1==null?yi.ROW:M.y1==null?yi.COLUMN:Number.isFinite(I+D)?I>D?yi.ROW:yi.COLUMN:yi.ROW,LJe(i.camera?i:i.nativeContext,e,l,{offsetX:c,offsetY:u,offsetZ:h,direction:j,drawConnect:f,mode:C,zeroX:w,zeroY:A}),this.beforeRenderStep(d,i,c,u,!!n,!1,t,!1,o,p,g,null,{attribute:a}),i.setShadowBlendStyle&&i.setShadowBlendStyle(d,a,o);const{x:z=0,x:$=0}=a;return t!==!1&&(g?g(i,a,o):n&&(i.setCommonStyle(d,f?T:a,z-c,$-u,f?E:o),i.fill())),this.afterRenderStep(d,i,c,u,!!n,!1,t,!1,o,p,g,null,{attribute:a}),(()=>{if(s!==!1)if(m)m(i,a,o);else{const{stroke:V=o&&o[1]&&o[1].stroke}=a;ie(V)&&(V[0]||V[2])&&V[1]===!1&&(i.beginPath(),KD(i.camera?i:i.nativeContext,V[0]?e.top:e.bottom,l,j===yi.ROW?"x":"y",{offsetX:c,offsetY:u,offsetZ:h,drawConnect:f,mode:C,zeroX:w,zeroY:A})),i.setStrokeStyle(d,f?T:a,z-c,$-u,f?E:o),i.stroke()}})(),!1}};Gb=BJe([Oe(),CV(0,rt($n)),CV(0,rs(BD)),jJe("design:paramtypes",[Object])],Gb);const NJe=P0,$Je=Jf;var zJe=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},HJe=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},wV=function(i,e){return function(t,n){e(t,n,i)}};let JA=class extends Er{constructor(i){super(),this.pathRenderContribitions=i,this.numberType=HP,this.builtinContributions=[$Je,NJe],this.init(i)}drawShape(i,e,t,n,s,r,a,o){var l,c,u;const h=(l=this.tempTheme)!==null&&l!==void 0?l:Ye(i,r==null?void 0:r.theme).path,{x:d=h.x,y:p=h.y,fillStrokeOrder:f=h.fillStrokeOrder}=i.attribute,g=(c=this.z)!==null&&c!==void 0?c:0,m=this.valid(i,h,a,o);if(!m)return;const{fVisible:y,sVisible:b,doFill:x,doStroke:S}=m;if(e.beginPath(),i.pathShape)Ed(i.pathShape.commandList,e,t,n,1,1,g);else{const A=(u=i.attribute.path)!==null&&u!==void 0?u:h.path;Ed(A.commandList,e,t,n,1,1,g)}e.setShadowBlendStyle&&e.setShadowBlendStyle(i,i.attribute,h),this.beforeRenderStep(i,e,t,n,x,S,y,b,h,s,a,o);const C=()=>{S&&(o?o(e,i.attribute,h):b&&(e.setStrokeStyle(i,i.attribute,d-t,p-n,h),e.stroke()))},w=()=>{x&&(a?a(e,i.attribute,h):y&&(e.setCommonStyle(i,i.attribute,d-t,p-n,h),e.fill()))};f?(C(),w()):(w(),C()),this.afterRenderStep(i,e,t,n,x,S,y,b,h,s,a,o)}draw(i,e,t,n){const s=Ye(i,n==null?void 0:n.theme).path;this.tempTheme=s,this._draw(i,s,!1,t,n),this.tempTheme=null}};JA=zJe([Oe(),wV(0,rt($n)),wV(0,rs($D)),HJe("design:paramtypes",[Object])],JA);var VJe=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},UJe=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},AV=function(i,e){return function(t,n){e(t,n,i)}};let QA=class extends Er{constructor(i){super(),this.rectRenderContribitions=i,this.type="rect",this.numberType=x5,this.builtinContributions=[fJe,mJe,gJe],this.init(i)}drawShape(i,e,t,n,s,r,a,o){var l;const c=(l=this.tempTheme)!==null&&l!==void 0?l:Ye(i,r==null?void 0:r.theme).rect,{fill:u=c.fill,background:h,stroke:d=c.stroke,cornerRadius:p=c.cornerRadius,opacity:f=c.opacity,fillOpacity:g=c.fillOpacity,lineWidth:m=c.lineWidth,strokeOpacity:y=c.strokeOpacity,visible:b=c.visible,x1:x,y1:S,x:C=c.x,y:w=c.y,fillStrokeOrder:A=c.fillStrokeOrder}=i.attribute;let{width:T,height:E}=i.attribute;T=(T??x-C)||0,E=(E??S-w)||0;const P=k5(f,g,T,E,u),O=E5(f,y,T,E),M=Zf(u,h),R=E0(d,m);if(!i.valid||!b||!M&&!R||!(P||O||a||o||h))return;p===0||ie(p)&&p.every(z=>z===0)?(e.beginPath(),e.rect(t,n,T,E)):(e.beginPath(),Hd(e,t,n,T,E,p));const j={doFill:M,doStroke:R};e.setShadowBlendStyle&&e.setShadowBlendStyle(i,i.attribute,c),this.beforeRenderStep(i,e,t,n,M,R,P,O,c,s,a,o,j);const I=()=>{j.doFill&&(a?a(e,i.attribute,c):P&&(e.setCommonStyle(i,i.attribute,C-t,w-n,c),e.fill()))},D=()=>{j.doStroke&&(o?o(e,i.attribute,c):O&&(e.setStrokeStyle(i,i.attribute,C-t,w-n,c),e.stroke()))};A?(D(),I()):(I(),D()),this.afterRenderStep(i,e,t,n,M,R,P,O,c,s,a,o)}draw(i,e,t,n){const s=Ye(i,n==null?void 0:n.theme).rect;this.tempTheme=s,this._draw(i,s,!1,t,n),this.tempTheme=null}};QA=VJe([Oe(),AV(0,rt($n)),AV(0,rs($_)),UJe("design:paramtypes",[Object])],QA);var WJe=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},GJe=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},kV=function(i,e){return function(t,n){e(t,n,i)}};let ek=class extends Er{constructor(i){super(),this.symbolRenderContribitions=i,this.numberType=UP,this.builtinContributions=[CJe,AJe,wJe],this.init(i)}drawShape(i,e,t,n,s,r,a,o){var l;const c=Ye(i,r==null?void 0:r.theme).symbol,{size:u=c.size,x:h=c.x,y:d=c.y,scaleX:p=c.scaleX,scaleY:f=c.scaleY,fillStrokeOrder:g=c.fillStrokeOrder}=i.attribute,m=this.valid(i,c,a,o);if(!m)return;const{fVisible:y,sVisible:b,doFill:x,doStroke:S}=m,C=i.getParsedPath();if(!C)return;const{keepDirIn3d:w=c.keepDirIn3d}=i.attribute,A=(l=this.z)!==null&&l!==void 0?l:0;e.beginPath();const T=(O,M)=>{var R,j,I;if(i._parsedPath.svgCache){const $=Object.assign({},M);$.fill=(R=M.fill)!==null&&R!==void 0?R:i.attribute.fill,$.opacity=(j=M.opacity)!==null&&j!==void 0?j:i.attribute.opacity,$.fillOpacity=i.attribute.fillOpacity,$.stroke=(I=M.stroke)!==null&&I!==void 0?I:i.attribute.stroke,M=$}const D=()=>{M.fill&&(a?a(e,i.attribute,c):(e.setCommonStyle(i,M,h-t,d-n,c),e.fill()))},z=()=>{M.stroke&&(o?o(e,i.attribute,c):(e.setStrokeStyle(i,M,(h-t)/p,(d-n)/f,c),e.stroke()))};g?(z(),D()):(D(),z())};if(w&&e.camera&&e.project){const O=e.project(t,n,A),M=e.camera;e.camera=null,C.draw(e,ie(u)?[u[0]*p,u[1]*f]:u*p,O.x,O.y,void 0,T)===!1&&e.closePath(),e.camera=M}else C.draw(e,u,t,n,A,T)===!1&&e.closePath();e.setShadowBlendStyle&&e.setShadowBlendStyle(i,i.attribute,c),this.beforeRenderStep(i,e,t,n,x,S,y,b,c,s,a,o);const E=()=>{x&&!C.isSvg&&(a?a(e,i.attribute,c):y&&(e.setCommonStyle(i,i.attribute,h-t,d-n,c),e.fill()))},P=()=>{S&&!C.isSvg&&(o?o(e,i.attribute,c):b&&(e.setStrokeStyle(i,i.attribute,(h-t)/p,(d-n)/f,c),e.stroke()))};g?(P(),E()):(E(),P()),this.afterRenderStep(i,e,t,n,x,S,y,b,c,s,a,o)}draw(i,e,t,n){const s=Ye(i,n==null?void 0:n.theme).symbol;this._draw(i,s,!1,t,n)}};ek=WJe([Oe(),kV(0,rt($n)),kV(0,rs(HD)),GJe("design:paramtypes",[Object])],ek);class KJe{constructor(){this.pools=[];for(let e=0;e<10;e++)this.pools.push(new Qi)}allocate(e,t,n,s){if(!this.pools.length)return new Qi().setValue(e,t,n,s);const r=this.pools.pop();return r.x1=e,r.y1=t,r.x2=n,r.y2=s,r}allocateByObj(e){if(!this.pools.length)return new Qi(e);const t=this.pools.pop();return t.x1=e.x1,t.y1=e.y1,t.x2=e.x2,t.y2=e.y2,t}free(e){this.pools.push(e)}get length(){return this.pools.length}release(...e){this.pools=[]}}const tk=new KJe;class XJe{constructor(){this.store=new Map}RegisterGraphicCreator(e,t){this.store.set(e,t),this[e]=t}CreateGraphic(e,t){const n=this.store.get(e);return n?n(t):null}}const Ae=new XJe;let cC,uC;function GP(i){return cC||(cC=Ae.CreateGraphic("text",{})),cC.initAttributes(i),cC.AABBBounds}function YJe(i){return uC||(uC=Ae.CreateGraphic("richtext",{})),uC.setAttributes(i),uC.AABBBounds}class qJe extends Mx{constructor(){super(...arguments),this.time=qn.beforeFillStroke}drawShape(e,t,n,s,r,a,o,l,c,u,h,d){var p,f,g,m,y,b,x,S,C,w;const{backgroundMode:A=c.backgroundMode,backgroundFit:T=c.backgroundFit}=e.attribute;let E,{background:P}=e.attribute;if(!P)return;const O=()=>{e.type==="richtext"&&(t.restore(),t.save(),E&&t.setTransformFromMatrix(E,!0,1))};let M;e.type==="richtext"&&(E=t.currentMatrix.clone(),t.restore(),t.save(),t.setTransformForCurrent());const R=Ke(P)&&P.background,j=e.transMatrix.onlyTranslate();if(R){const I=e.AABBBounds,D=((p=P.x)!==null&&p!==void 0?p:I.x1)+((f=P.dx)!==null&&f!==void 0?f:0),z=((g=P.y)!==null&&g!==void 0?g:I.y1)+((m=P.dy)!==null&&m!==void 0?m:0),$=(y=P.width)!==null&&y!==void 0?y:I.width(),V=(b=P.height)!==null&&b!==void 0?b:I.height();if(M=tk.allocate(D,z,D+$,z+V),P=P.background,!j){const L=M.width(),Y=M.height();M.set(((x=P.x)!==null&&x!==void 0?x:0)+((S=P.dx)!==null&&S!==void 0?S:0),((C=P.y)!==null&&C!==void 0?C:0)+((w=P.dy)!==null&&w!==void 0?w:0),L,Y)}}else M=e.AABBBounds,j||(M=GP(Object.assign(Object.assign({},e.attribute),{angle:0,scaleX:1,scaleY:1,x:0,y:0,dx:0,dy:0})).clone());if(e.backgroundImg&&e.resources){const I=e.resources.get(P);if(I.state!=="success"||!I.data)return void O();t.highPerformanceSave(),j&&t.setTransformFromMatrix(e.parent.globalTransMatrix,!0),t.setCommonStyle(e,e.attribute,n,s,c),this.doDrawImage(t,I.data,M,A,T),t.highPerformanceRestore(),t.setTransformForCurrent()}else{const{backgroundCornerRadius:I}=e.attribute;t.highPerformanceSave(),t.setCommonStyle(e,e.attribute,n,s,c),t.fillStyle=P,I?(Hd(t,M.x1,M.y1,M.width(),M.height(),I),t.fill()):t.fillRect(M.x1,M.y1,M.width(),M.height()),t.highPerformanceRestore()}R&&tk.free(M),O()}}const Kre=new qJe;var ZJe=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},JJe=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},TV=function(i,e){return function(t,n){e(t,n,i)}};let XD=class extends Er{constructor(i){super(),this.textRenderContribitions=i,this.numberType=WP,this.builtinContributions=[Kre],this.init(i)}drawShape(i,e,t,n,s,r,a,o){var l,c,u;const h=Ye(i,r==null?void 0:r.theme).text,{text:d,underline:p=h.underline,lineThrough:f=h.lineThrough,keepDirIn3d:g=h.keepDirIn3d,direction:m=h.direction,fontSize:y=h.fontSize,verticalMode:b=h.verticalMode,x=h.x,y:S=h.y}=i.attribute;let{textAlign:C=h.textAlign,textBaseline:w=h.textBaseline}=i.attribute;if(!b&&m==="vertical"){const D=C;C=(l=i.getBaselineMapAlign()[w])!==null&&l!==void 0?l:"left",w=(c=i.getAlignMapBaseline()[D])!==null&&c!==void 0?c:"top"}const A=(u=au(i.attribute.lineHeight,y))!==null&&u!==void 0?u:y,T=this.valid(i,h,a,o);if(!T)return;const{fVisible:E,sVisible:P,doFill:O,doStroke:M}=T,R=!g,j=this.z||0;e.beginPath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(i,i.attribute,h),this.beforeRenderStep(i,e,t,n,O,M,E,P,h,s,a,o),R&&this.transformUseContext2d(i,h,j,e);const I=(D,z,$,V)=>{let L=t+z;const Y=n+$;if(V){e.highPerformanceSave(),L+=y;const ae=ba.allocate(1,0,0,1,0,0);ae.rotateByCenter(Math.PI/2,L,Y),e.transformFromMatrix(ae,!0),ba.free(ae)}M&&(o?o(e,i.attribute,h):P&&(e.setStrokeStyle(i,i.attribute,x-t,S-n,h),e.strokeText(D,L,Y,j))),O&&(a?a(e,i.attribute,h):E&&(e.setCommonStyle(i,i.attribute,x-t,S-n,h),e.fillText(D,L,Y,j),this.drawUnderLine(p,f,i,L,Y,j,h,e))),V&&(e.highPerformanceRestore(),e.setTransformForCurrent())};if(i.isMultiLine)if(e.setTextStyleWithoutAlignBaseline(i.attribute,h,j),m==="horizontal"){const{multilineLayout:D}=i;if(!D)return void e.highPerformanceRestore();const{xOffset:z,yOffset:$}=D.bbox;M&&(o?o(e,i.attribute,h):P&&(e.setStrokeStyle(i,i.attribute,x-t,S-n,h),D.lines.forEach(V=>{e.strokeText(V.str,(V.leftOffset||0)+z+t,(V.topOffset||0)+$+n,j)}))),O&&(a?a(e,i.attribute,h):E&&(e.setCommonStyle(i,i.attribute,x-t,S-n,h),D.lines.forEach(V=>{e.fillText(V.str,(V.leftOffset||0)+z+t,(V.topOffset||0)+$+n,j),this.drawUnderLine(p,f,i,(V.leftOffset||0)+z+t,(V.topOffset||0)+$+n-NZe("bottom",y)-.05*y,j,h,e,{width:V.width})})))}else{i.tryUpdateAABBBounds();const D=i.cache,{verticalList:z}=D;e.textAlign="left",e.textBaseline="top";const $=A*z.length;let V=0;z.forEach(ae=>{const W=ae.reduce((ce,he)=>ce+(he.width||0),0);V=br(W,V)});let L=0,Y=0;w==="bottom"?Y=-$:w==="middle"&&(Y=-$/2),C==="center"?L-=V/2:C==="right"&&(L-=V),z.forEach((ae,W)=>{const ce=ae.reduce((de,te)=>de+(te.width||0),0),he=V-ce;let le=L;C==="center"?le+=he/2:C==="right"&&(le+=he),ae.forEach(de=>{const{text:te,width:me,direction:Be}=de;I(te,$-(W+1)*A+Y,le,Be),le+=me})})}else if(m==="horizontal"){e.setTextStyle(i.attribute,h,j);const D=i.clipedText;let z=0;A!==y&&(w==="top"?z=(A-y)/2:w==="middle"||w==="bottom"&&(z=-(A-y)/2)),I(D,0,z,0)}else{i.tryUpdateAABBBounds();const D=i.cache;if(D){e.setTextStyleWithoutAlignBaseline(i.attribute,h,j);const{verticalList:z}=D;let $=0;const V=z[0].reduce((Y,ae)=>Y+(ae.width||0),0);let L=0;w==="bottom"?L=-A:w==="middle"&&(L=-A/2),C==="center"?$-=V/2:C==="right"&&($-=V),e.textAlign="left",e.textBaseline="top",z[0].forEach(Y=>{const{text:ae,width:W,direction:ce}=Y;I(ae,L,$,ce),$+=W})}}R&&this.restoreTransformUseContext2d(i,h,j,e),this.afterRenderStep(i,e,t,n,O,M,E,P,h,s,a,o)}draw(i,e,t,n){const s=Ye(i,n==null?void 0:n.theme).text,{keepDirIn3d:r=s.keepDirIn3d}=i.attribute,a=!r;this._draw(i,s,a,t,n)}drawUnderLine(i,e,t,n,s,r,a,o,l){if(e+i<=0)return;const{textAlign:c=a.textAlign,textBaseline:u=a.textBaseline,fontSize:h=a.fontSize,fill:d=a.fill,opacity:p=a.opacity,underlineOffset:f=a.underlineOffset,underlineDash:g=a.underlineDash,fillOpacity:m=a.fillOpacity}=t.attribute,y=!B(l),b=y?l.width:t.clipedWidth,x=y?0:tu(c,b),S=iu(y?"alphabetic":u,h,h),C={lineWidth:0,stroke:d,opacity:p,strokeOpacity:m};let w=y?-3:0;if(i){C.lineWidth=i,o.setStrokeStyle(t,C,n,s,a),g&&o.setLineDash(g),o.beginPath();const A=s+S+h+f+w;o.moveTo(n+x,A,r),o.lineTo(n+x+b,A,r),o.stroke()}if(y&&(w=-1),e){C.lineWidth=e,o.setStrokeStyle(t,C,n,s,a),o.beginPath();const A=s+S+h/2+w;o.moveTo(n+x,A,r),o.lineTo(n+x+b,A,r),o.stroke()}}};XD=ZJe([Oe(),TV(0,rt($n)),TV(0,rs(VD)),JJe("design:paramtypes",[Object])],XD);function Xre(i,e,t,n){i.moveTo(e[0].x+t,e[0].y+n);for(let s=1;s<e.length;s++)i.lineTo(e[s].x+t,e[s].y+n)}function QJe(i,e,t,n,s,r=!0){var a;if(e.length<3)return void Xre(i,e,t,n);let o=0,l=e.length-1;r||(o+=1,l-=1,i.moveTo(e[0].x+t,e[0].y+n));for(let c=o;c<=l;c++){const u=e[c===0?l:(c-1)%e.length],h=e[c%e.length],d=e[(c+1)%e.length],p=h.x-u.x,f=h.y-u.y,g=h.x-d.x,m=h.y-d.y,y=(Math.atan2(f,p)-Math.atan2(m,g))/2,b=Math.abs(Math.tan(y));let x=Array.isArray(s)?(a=s[c%e.length])!==null&&a!==void 0?a:0:s,S=x/b;const C=hC(p,f),w=hC(g,m),A=Math.min(C,w);S>A&&(S=A,x=A*b);const T=xI(h,S,C,p,f),E=xI(h,S,w,g,m),P=2*h.x-T.x-E.x,O=2*h.y-T.y-E.y,M=hC(P,O),R=xI(h,hC(S,x),M,P,O);let j=Math.atan2(T.y-R.y,T.x-R.x);const I=Math.atan2(E.y-R.y,E.x-R.x);let D=I-j;D<0&&(j=I,D=-D),D>Math.PI&&(D-=Math.PI),c===0?i.moveTo(T.x+t,T.y+n):i.lineTo(T.x+t,T.y+n),D&&i.arcTo(h.x+t,h.y+n,E.x+t,E.y+n,x),i.lineTo(E.x+t,E.y+n)}r||i.lineTo(e[l+1].x+t,e[l+1].y+n)}function hC(i,e){return Math.sqrt(i*i+e*e)}function xI(i,e,t,n,s){const r=e/t;return{x:i.x-n*r,y:i.y-s*r}}const eQe=P0,tQe=Jf;var iQe=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},nQe=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},EV=function(i,e){return function(t,n){e(t,n,i)}};let YD=class extends Er{constructor(i){super(),this.polygonRenderContribitions=i,this.numberType=VP,this.builtinContributions=[tQe,eQe],this.init(i)}drawShape(i,e,t,n,s,r,a,o){const l=Ye(i,r==null?void 0:r.theme).polygon,{points:c=l.points,cornerRadius:u=l.cornerRadius,x:h=l.x,y:d=l.y,closePath:p=l.closePath,fillStrokeOrder:f=l.fillStrokeOrder}=i.attribute,g=this.valid(i,l,a,o);if(!g)return;const{fVisible:m,sVisible:y,doFill:b,doStroke:x}=g;e.beginPath(),u<=0||ie(u)&&u.every(w=>w===0)?Xre(e.camera?e:e.nativeContext,c,t,n):QJe(e.camera?e:e.nativeContext,c,t,n,u,p),p&&e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(i,i.attribute,l),this.beforeRenderStep(i,e,t,n,b,x,m,y,l,s,a,o);const S=()=>{b&&(a?a(e,i.attribute,l):m&&(e.setCommonStyle(i,i.attribute,h-t,d-n,l),e.fill()))},C=()=>{x&&(o?o(e,i.attribute,l):y&&(e.setStrokeStyle(i,i.attribute,h-t,d-n,l),e.stroke()))};f?(C(),S()):(S(),C()),this.afterRenderStep(i,e,t,n,b,x,m,y,l,s,a,o)}draw(i,e,t,n){const s=Ye(i,n==null?void 0:n.theme).polygon;this._draw(i,s,!1,t,n)}};YD=iQe([Oe(),EV(0,rt($n)),EV(0,rs(zD)),nQe("design:paramtypes",[Object])],YD);var sQe=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},rQe=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},PV=function(i,e){return function(t,n){e(t,n,i)}};let qD=class{constructor(i){this.groupRenderContribitions=i,this.numberType=v5}drawShape(i,e,t,n,s,r,a,o){const l=Ye(i,r==null?void 0:r.theme).group,{fill:c=l.fill,background:u,stroke:h=l.stroke,opacity:d=l.opacity,width:p=l.width,height:f=l.height,clip:g=l.clip,fillOpacity:m=l.fillOpacity,strokeOpacity:y=l.strokeOpacity,cornerRadius:b=l.cornerRadius,path:x=l.path,lineWidth:S=l.lineWidth,visible:C=l.visible,fillStrokeOrder:w=l.fillStrokeOrder,x:A=l.x,y:T=l.y}=i.attribute,E=k5(d,m,p,f,c),P=E5(d,y,p,f),O=Zf(c,u),M=E0(h,S);if(!i.valid||!C||!g&&(!O&&!M||!(E||P||a||o||u)))return;if(x&&x.length&&s.drawContribution){const D=e.disableFill,z=e.disableStroke,$=e.disableBeginPath;e.disableFill=!0,e.disableStroke=!0,e.disableBeginPath=!0,x.forEach(V=>{s.drawContribution.getRenderContribution(V).draw(V,s.renderService,s,r)}),e.disableFill=D,e.disableStroke=z,e.disableBeginPath=$}else b===0||ie(b)&&b.every(D=>D===0)?(e.beginPath(),e.rect(t,n,p,f)):(e.beginPath(),Hd(e,t,n,p,f,b));this._groupRenderContribitions||(this._groupRenderContribitions=this.groupRenderContribitions.getContributions()||[],this._groupRenderContribitions.push(pJe));const R={doFill:O,doStroke:M};this._groupRenderContribitions.forEach(D=>{D.time===qn.beforeFillStroke&&D.drawShape(i,e,t,n,O,M,E,P,l,s,a,o,R)}),g&&e.clip(),e.setShadowBlendStyle&&e.setShadowBlendStyle(i,i.attribute,l);const j=()=>{R.doFill&&(a?a(e,i.attribute,l):E&&(e.setCommonStyle(i,i.attribute,A-t,T-n,l),e.fill()))},I=()=>{R.doStroke&&(o?o(e,i.attribute,l):P&&(e.setStrokeStyle(i,i.attribute,A-t,T-n,l),e.stroke()))};w?(I(),j()):(j(),I()),this._groupRenderContribitions.forEach(D=>{D.time===qn.afterFillStroke&&D.drawShape(i,e,t,n,O,M,E,P,l,s,a,o)})}draw(i,e,t,n){const{context:s}=t;if(!s)return;const{clip:r,baseOpacity:a=1}=i.attribute;r?s.save():s.highPerformanceSave();const o=s.baseGlobalAlpha;s.baseGlobalAlpha*=a;const l=Ye(i,n==null?void 0:n.theme).group,c=s.modelMatrix;if(s.camera){const p=Mi.allocate(),f=Mi.allocate();Ure(f,i,l),vf(p,c||p,f),s.modelMatrix=p,Mi.free(f),s.setTransform(1,0,0,1,0,0,!0)}else s.transformFromMatrix(i.transMatrix,!0);s.beginPath(),n.skipDraw?this.drawShape(i,s,0,0,t,n,()=>!1,()=>!1):this.drawShape(i,s,0,0,t);const{scrollX:u=l.scrollX,scrollY:h=l.scrollY}=i.attribute;let d;(u||h)&&s.translate(u,h),n&&n.drawingCb&&(d=n.drawingCb()),s.modelMatrix!==c&&Mi.free(s.modelMatrix),s.modelMatrix=c,s.baseGlobalAlpha=o,d&&d.then?d.then(()=>{r?s.restore():s.highPerformanceRestore()}):r?s.restore():s.highPerformanceRestore()}};qD=sQe([Oe(),PV(0,rt($n)),PV(0,rs(Vre)),rQe("design:paramtypes",[Object])],qD);var aQe=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},oQe=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},OV=function(i,e){return function(t,n){e(t,n,i)}};const lQe=["","repeat-x","repeat-y","repeat"];let ZD=class extends Er{constructor(i){super(),this.imageRenderContribitions=i,this.numberType=zP,this.builtinContributions=[bJe,xJe],this.init(i)}drawShape(i,e,t,n,s,r,a,o){const l=Ye(i).image,{width:c=l.width,height:u=l.height,repeatX:h=l.repeatX,repeatY:d=l.repeatY,x:p=l.x,y:f=l.y,cornerRadius:g=l.cornerRadius,fillStrokeOrder:m=l.fillStrokeOrder,image:y}=i.attribute,b=this.valid(i,l,a);if(!b)return;const{fVisible:x,sVisible:S,doFill:C,doStroke:w}=b;e.setShadowBlendStyle&&e.setShadowBlendStyle(i,l),this.beforeRenderStep(i,e,t,n,C,!1,x,!1,l,s,a);const A=()=>{if(C){if(a)a(e,i.attribute,l);else if(x){if(!y||!i.resources)return;const E=i.resources.get(y);if(E.state!=="success")return;let P=!1;g===0||ie(g)&&g.every(M=>M===0)||(e.beginPath(),Hd(e,t,n,c,u,g),e.save(),e.clip(),P=!0),e.setCommonStyle(i,i.attribute,t,n,l);let O=0;if(h==="repeat"&&(O|=1),d==="repeat"&&(O|=2),O){const M=e.createPattern(E.data,lQe[O]);e.fillStyle=M,e.translate(t,n,!0),e.fillRect(0,0,c,u),e.translate(-t,-n,!0)}else e.drawImage(E.data,t,n,c,u);P&&e.restore()}}},T=()=>{w&&(o?o(e,i.attribute,l):S&&(e.setStrokeStyle(i,i.attribute,p-t,f-n,l),e.stroke()))};m?(T(),A()):(A(),T()),this.afterRenderStep(i,e,t,n,C,!1,x,!1,l,s,a)}draw(i,e,t){const{image:n}=i.attribute;if(!n||!i.resources)return;const s=i.resources.get(n);if(s.state==="loading"&&be(n))return void di.improveImageLoading(n);if(s.state!=="success")return;const{context:r}=e.drawParams;if(!r)return;const a=Ye(i).image;this._draw(i,a,!1,t)}};ZD=aQe([Oe(),OV(0,rt($n)),OV(0,rs(ND)),oQe("design:paramtypes",[Object])],ZD);const Yre=Symbol.for("IncrementalDrawContribution"),ik=Symbol.for("ArcRender"),JD=Symbol.for("Arc3dRender"),nk=Symbol.for("AreaRender"),sk=Symbol.for("CircleRender"),as=Symbol.for("GraphicRender"),MV=Symbol.for("GroupRender"),rk=Symbol.for("LineRender"),ak=Symbol.for("PathRender"),ok=Symbol.for("PolygonRender"),lk=Symbol.for("RectRender"),QD=Symbol.for("Rect3DRender"),ck=Symbol.for("SymbolRender"),eF=Symbol.for("TextRender"),tF=Symbol.for("RichTextRender"),iF=Symbol.for("Pyramid3dRender"),uk=Symbol.for("GlyphRender"),IV=Symbol.for("ImageRender"),R5=Symbol.for("DrawContribution"),qre=(i,e,t,n)=>{let s,r=!1,a=!1;if(e.forEachChildren(o=>(r=o.numberType===NP,!r)),e.forEachChildren(o=>(a=!!o.findFace,!a)),r){const o=e.getChildren(),l=[...o];l.sort((c,u)=>{var h,d,p,f;let g=((d=(h=c.attribute.startAngle)!==null&&h!==void 0?h:0+c.attribute.endAngle)!==null&&d!==void 0?d:0)/2,m=((f=(p=u.attribute.startAngle)!==null&&p!==void 0?p:0+u.attribute.endAngle)!==null&&f!==void 0?f:0)/2;for(;g<0;)g+=yt;for(;m<0;)m+=yt;return m-g}),l.forEach(c=>{c._next=null,c._prev=null}),e.removeAllChild(),e.update(),l.forEach(c=>{e.appendChild(c)}),n.hack_pieFace="outside",s=t(r,a),s&&s.graphic||(n.hack_pieFace="inside",s=t(r,a)),s&&s.graphic||(n.hack_pieFace="top",s=t(r,a)),e.removeAllChild(),o.forEach(c=>{c._next=null,c._prev=null}),o.forEach(c=>{e.appendChild(c)})}else if(a){const o=e.getChildren(),l=o.map(c=>({ave_z:c.findFace().vertices.map(u=>{var h;return i.view(u[0],u[1],(h=u[2]+c.attribute.z)!==null&&h!==void 0?h:0)[2]}).reduce((u,h)=>u+h,0),g:c}));l.sort((c,u)=>u.ave_z-c.ave_z),e.removeAllChild(),l.forEach(c=>{c.g._next=null,c.g._prev=null}),e.update(),l.forEach(c=>{e.add(c.g)}),s=t(r,a),e.removeAllChild(),o.forEach(c=>{c._next=null,c._prev=null}),e.update(),o.forEach(c=>{e.add(c)})}else s=t(r,a);return s};var cQe=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},uQe=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};const hk=Symbol.for("DrawItemInterceptor"),RV=new Qi,LV=new Qi;class hQe{constructor(){this.order=1}afterDrawItem(e,t,n,s,r){return e.attribute.shadowRootIdx==null&&e.shadowRoot&&e.shadowRoot.attribute.shadowRootIdx<0||(e.attribute.shadowRootIdx>0||!e.attribute.shadowRootIdx||e.shadowRoot&&e.shadowRoot.attribute.shadowRootIdx>0)&&this.drawItem(e,t,n,s,r),!1}beforeDrawItem(e,t,n,s,r){return e.attribute.shadowRootIdx==null&&e.shadowRoot&&e.shadowRoot.attribute.shadowRootIdx>0||(e.attribute.shadowRootIdx<0||e.shadowRoot&&e.shadowRoot.attribute.shadowRootIdx<0)&&this.drawItem(e,t,n,s,r),!1}drawItem(e,t,n,s,r){if(!e.shadowRoot)return!1;const{context:a}=n;if(a.highPerformanceSave(),a.transformFromMatrix(e.transMatrix,!0),s.dirtyBounds&&s.backupDirtyBounds){RV.copy(s.dirtyBounds),LV.copy(s.backupDirtyBounds);const o=e.globalTransMatrix.getInverse();s.dirtyBounds.copy(s.backupDirtyBounds).transformWithMatrix(o),s.backupDirtyBounds.copy(s.dirtyBounds)}return s.renderGroup(e.shadowRoot,n,ba.allocate(1,0,0,1,0,0)),a.highPerformanceRestore(),s.dirtyBounds&&s.backupDirtyBounds&&(s.dirtyBounds.copy(RV),s.backupDirtyBounds.copy(LV)),!0}}class dQe{constructor(){this.order=1}afterDrawItem(e,t,n,s,r){return e.attribute._debug_bounds&&this.drawItem(e,t,n,s,r),!1}drawItem(e,t,n,s,r){if(!e.attribute._debug_bounds)return!1;const{context:a}=n;a.highPerformanceSave(),e.parent&&a.setTransformFromMatrix(e.parent.globalTransMatrix,!0),e.glyphHost&&e.glyphHost.parent&&a.setTransformFromMatrix(e.glyphHost.parent.globalTransMatrix,!0);const o=e.AABBBounds;return e.attribute._debug_bounds!==!0&&e.attribute._debug_bounds(a,e),a.strokeRect(o.x1,o.y1,o.width(),o.height()),a.highPerformanceRestore(),!0}}let dk=class{constructor(){this.order=1,this.interceptors=[new hQe,new fQe,new pQe,new dQe]}afterDrawItem(i,e,t,n,s){for(let r=0;r<this.interceptors.length;r++)if(this.interceptors[r].afterDrawItem&&this.interceptors[r].afterDrawItem(i,e,t,n,s))return!0;return!1}beforeDrawItem(i,e,t,n,s){if((!i.in3dMode||t.in3dInterceptor)&&!i.shadowRoot&&!(i.baseGraphic||i.attribute.globalZIndex||i.interactiveGraphic))return!1;for(let r=0;r<this.interceptors.length;r++)if(this.interceptors[r].beforeDrawItem&&this.interceptors[r].beforeDrawItem(i,e,t,n,s))return!0;return!1}};dk=cQe([Oe(),uQe("design:paramtypes",[])],dk);class pQe{constructor(){this.order=1}beforeDrawItem(e,t,n,s,r){return!this.processing&&(e.baseGraphic?this.beforeDrawInteractive(e,t,n,s,r):this.beforeSetInteractive(e,t,n,s,r))}beforeSetInteractive(e,t,n,s,r){let a=e.interactiveGraphic;if(e.attribute.globalZIndex){a||(a=e.clone(),e.interactiveGraphic=a,a.baseGraphic=e),a.setAttributes({globalZIndex:0,zIndex:e.attribute.globalZIndex},!1,{skipUpdateCallback:!0}),n.stage.tryInitInteractiveLayer();const o=n.stage.getLayer("_builtin_interactive");return o&&this.getShadowRoot(o).add(a),!0}if(a){n.stage.tryInitInteractiveLayer();const o=n.stage.getLayer("_builtin_interactive");o&&this.getShadowRoot(o).removeChild(a),e.interactiveGraphic=null,a.baseGraphic=null}return!1}beforeDrawInteractive(e,t,n,s,r){const a=e.baseGraphic;let o=!!a.stage,l=a.parent;for(;o&&l&&l.stage!==l;)o=!!l.stage,l=l.parent;if(!o){const c=n.stage.getLayer("_builtin_interactive");return c&&this.getShadowRoot(c).removeChild(e),!0}if(a){this.processing=!0;const{context:c}=n;return c.highPerformanceSave(),c.setTransformFromMatrix(a.parent.globalTransMatrix,!0),a.isContainer?s.renderGroup(a,n,a.parent.globalTransMatrix):s.renderItem(a,n),c.highPerformanceRestore(),this.processing=!1,!0}return!1}getShadowRoot(e){var t;let n=e.getElementById("_interactive_group");return n||(n=Ae.CreateGraphic("group",{}),n.id="_interactive_group",e.add(n)),(t=n.shadowRoot)!==null&&t!==void 0?t:n.attachShadow()}}class fQe{constructor(){this.order=1}beforeDrawItem(e,t,n,s,r){if(!e.in3dMode||n.in3dInterceptor)return!1;n.in3dInterceptor=!0;const{context:a,stage:o}=t.drawParams;a.canvas,a.save(),this.initCanvasCtx(a),a.camera=o.camera;const l=a.currentMatrix;l.a/=a.dpr,l.b/=a.dpr,l.c/=a.dpr,l.d/=a.dpr,l.e/=a.dpr,l.f/=a.dpr;const c=Mi.allocate();UD(c,l);const u=a.modelMatrix;if(u){if(c){const h=Mi.allocate();a.modelMatrix=vf(h,u,c)}}else a.modelMatrix=c;return a.setTransform(1,0,0,1,0,0,!0),e.isContainer?qre(a,e,(h,d)=>s.renderGroup(e,n,e.parent.globalTransMatrix,!h&&d),n):s.renderItem(e,n),a.camera=null,a.restore(),a.modelMatrix!==u&&Mi.free(a.modelMatrix),a.modelMatrix=u,n.in3dInterceptor=!1,!0}initCanvasCtx(e){e.setTransformForCurrent()}}var gQe=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},mQe=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},yQe=function(i,e){return function(t,n){e(t,n,i)}};const Zre=Symbol.for("RenderService");let nF=class{constructor(i){this.drawContribution=i}prepare(i){i&&this.renderTreeRoots.forEach(e=>{this._prepare(e,i)})}_prepare(i,e){i.forEachChildren(t=>{this._prepare(t,e)}),i.update({bounds:e,trans:!0})}prepareRenderList(){}beforeDraw(i){}draw(i){this.drawContribution.draw(this,Object.assign({},this.drawParams))}afterDraw(i){this.drawContribution.afterDraw&&this.drawContribution.afterDraw(this,Object.assign({},this.drawParams))}render(i,e){this.renderTreeRoots=i,this.drawParams=e;const t=e.updateBounds;this.prepare(t),this.prepareRenderList(),this.beforeDraw(e),this.draw(e),this.afterDraw(e),this.drawParams=null}};nF=gQe([Oe(),yQe(0,rt(R5)),mQe("design:paramtypes",[Object])],nF);const _Qe=new Ge(i=>{i(Zre).to(nF)}),Um=Symbol.for("PickerService"),DV=Symbol.for("GlobalPickerService"),Ix=(i,e,t)=>{const{outerBorder:n,shadowBlur:s=e.shadowBlur}=i;if(n){const r=e.outerBorder,{distance:a=r.distance,lineWidth:o=r.lineWidth}=n;t.expand(a+(s+o)/2)}return t},FV=["radius","startAngle","endAngle",...Pa];class Kb extends sr{constructor(e={radius:1}){super(e),this.type="circle",this.numberType=$P}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{startAngle:e,endAngle:t,radius:n}=this.attribute;return this._validNumber(e)&&this._validNumber(t)&&this._validNumber(n)}getGraphicTheme(){return Ye(this).circle}updateAABBBounds(e,t,n,s){this.updatePathProxyAABBBounds(n)||(s?this.updateCircleAABBBoundsImprecise(e,t,n):this.updateCircleAABBBoundsAccurate(e,t,n));const{tb1:r,tb2:a}=ue.graphicService.updateTempAABBBounds(n);return Ix(e,t,r),n.union(r),r.setValue(a.x1,a.y1,a.x2,a.y2),ue.graphicService.transformAABBBounds(e,n,t,!1,this),n}updateCircleAABBBoundsImprecise(e,t,n){const{radius:s=t.radius}=e;return n.set(-s,-s,s,s),n}updateCircleAABBBoundsAccurate(e,t,n){const{startAngle:s=t.startAngle,endAngle:r=t.endAngle,radius:a=t.radius}=e;return r-s>yt-Dt?n.set(-a,-a,a,a):ID(s,r,a,n),n}needUpdateTags(e){return super.needUpdateTags(e,FV)}needUpdateTag(e){return super.needUpdateTag(e,FV)}toCustomPath(){var e,t,n;const s=this.attribute,r=(e=s.radius)!==null&&e!==void 0?e:this.getDefaultAttribute("radius"),a=(t=s.startAngle)!==null&&t!==void 0?t:this.getDefaultAttribute("startAngle"),o=(n=s.endAngle)!==null&&n!==void 0?n:this.getDefaultAttribute("endAngle"),l=new Bn;return l.arc(0,0,r,a,o),l}clone(){return new Kb(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return Kb.NOWORK_ANIMATE_ATTR}}Kb.NOWORK_ANIMATE_ATTR=Ls;function vQe(i){return new Kb(i)}class BV{constructor(e,t,n){this.fontFamily=e,this.textOptions=t,this.textMeasure=n}LayoutBBox(e,t,n){if(t==="left"||t==="start")e.xOffset=0;else if(t==="center")e.xOffset=e.width/-2;else{if(t!=="right"&&t!=="end")throw new Error("textAlign");e.xOffset=-e.width}return e.yOffset=n==="top"?0:n==="middle"?e.height/-2:n==="alphabetic"?-.79*e.height:-e.height,e}GetLayout(e,t,n,s,r,a,o,l,c){const u=[],h=[t,n],d=[0,0];for(;e.length>0;){const{str:f}=this.textMeasure.clipTextWithSuffix(e,this.textOptions,t,o,l,c);u.push({str:f,width:this.textMeasure.measureTextWidth(f,this.textOptions)}),e=e.substring(f.length)}s==="left"||s==="start"||(s==="center"?d[0]=h[0]/-2:s!=="right"&&s!=="end"||(d[0]=-h[0])),r==="top"||(r==="middle"?d[1]=h[1]/-2:r==="bottom"&&(d[1]=-h[1]));const p={xOffset:d[0],yOffset:d[1],width:h[0],height:h[1]};return this.layoutWithBBox(p,u,s,r,a)}GetLayoutByLines(e,t,n,s,r="",a,o,l="end"){e=e.map(d=>d.toString());const c=[],u=[0,0];if(typeof o=="number"&&o!==1/0){let d;for(let p=0,f=e.length;p<f;p++)d=Math.min(this.textMeasure.measureTextWidth(e[p],this.textOptions),o),c.push({str:this.textMeasure.clipTextWithSuffix(e[p],this.textOptions,d,r,a,l).str,width:d});u[0]=o}else{let d,p;o=0;for(let f=0,g=e.length;f<g;f++)p=e[f],d=this.textMeasure.measureTextWidth(p,this.textOptions),o=Math.max(o,d),c.push({str:p,width:d});u[0]=o}u[1]=c.length*s,u[0]=c.reduce((d,p)=>Math.max(d,p.width),0);const h={xOffset:0,yOffset:0,width:u[0],height:u[1]};return this.LayoutBBox(h,t,n),this.layoutWithBBox(h,c,t,n,s)}layoutWithBBox(e,t,n,s,r){const a=[0,0],o=t.length*r;s==="top"||(s==="middle"?a[1]=(e.height-o)/2:s==="bottom"&&(a[1]=e.height-o));for(let l=0;l<t.length;l++)this.lineOffset(e,t[l],n,s,r,a);return{bbox:e,lines:t,fontFamily:this.fontFamily,fontSize:this.textOptions.fontSize,fontWeight:this.textOptions.fontWeight,lineHeight:r,textAlign:n,textBaseline:s}}lineOffset(e,t,n,s,r,a){return n==="left"||n==="start"?t.leftOffset=0:n==="center"?t.leftOffset=(e.width-t.width)/2:n!=="right"&&n!=="end"||(t.leftOffset=e.width-t.width),t.topOffset=(r-this.textOptions.fontSize)/2+.79*this.textOptions.fontSize+a[1],a[1]+=r,t}}const jV=["text","maxLineWidth","textAlign","textBaseline","heightLimit","lineClamp","fontSize","fontFamily","fontWeight","ellipsis","lineHeight","direction","wordBreak","heightLimit","lineClamp",...Pa];let rw=class Hl extends sr{get font(){const e=this.getGraphicTheme();return this._font||(this._font=wA(this.attribute,e)),this._font}get clipedText(){var e;const t=this.attribute,n=this.getGraphicTheme();if(!this.isSimplify())return;const{maxLineWidth:s=n.maxLineWidth}=t;return Number.isFinite(s)?(this.tryUpdateAABBBounds(),this.cache.clipedText):((e=t.text)!==null&&e!==void 0?e:n.text).toString()}get clipedWidth(){if(this.isSimplify())return this.tryUpdateAABBBounds(),this.cache.clipedWidth}get cliped(){var e,t;const n=this.getGraphicTheme(),s=this.attribute,{maxLineWidth:r=n.maxLineWidth,text:a,whiteSpace:o=n.whiteSpace}=s;if(!Number.isFinite(r))return!1;if(this.tryUpdateAABBBounds(),(t=(e=this.cache)===null||e===void 0?void 0:e.layoutData)===null||t===void 0?void 0:t.lines){let l="";return this.cache.layoutData.lines.forEach(c=>{l+=c.str}),(Array.isArray(a)?a.join(""):a)!==l}return s.direction==="vertical"&&this.cache.verticalList&&this.cache.verticalList[0]?this.cache.verticalList[0].map(l=>l.text).join("")!==s.text.toString():this.clipedText!=null&&this.clipedText!==s.text.toString()}get multilineLayout(){if(this.isMultiLine)return this.tryUpdateAABBBounds(),this.cache.layoutData}isSimplify(){return!this.isMultiLine&&this.attribute.direction!=="vertical"}get isMultiLine(){return Array.isArray(this.attribute.text)||this.attribute.whiteSpace==="normal"}constructor(e={text:"",fontSize:16}){super(e),this.type="text",this.numberType=WP,this.cache={}}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{text:e}=this.attribute;return ie(e)?!e.every(t=>t==null||t===""):e!=null&&e!==""}getGraphicTheme(){return Ye(this).text}doUpdateOBBBounds(){const e=this.getGraphicTheme();this._OBBBounds.clear();const t=this.attribute,{angle:n=e.angle}=t;if(!n){const c=this.AABBBounds;return this._OBBBounds.setValue(c.x1,c.y1,c.x2,c.y2),this._OBBBounds}this.obbText||(this.obbText=new Hl({})),this.obbText.setAttributes(Object.assign(Object.assign({},t),{angle:0}));const s=this.obbText.AABBBounds,{x:r,y:a}=t,o={x:(s.x1+s.x2)/2,y:(s.y1+s.y2)/2},l=cm(o,n,{x:r,y:a});return this._OBBBounds.copy(s),this._OBBBounds.translate(l.x-o.x,l.y-o.y),this._OBBBounds.angle=n,this._OBBBounds}updateAABBBounds(e,t,n){const{text:s=t.text}=this.attribute;Array.isArray(s)?this.updateMultilineAABBBounds(s):this.updateSingallineAABBBounds(s);const{tb1:r}=ue.graphicService.updateTempAABBBounds(n),{scaleX:a=t.scaleX,scaleY:o=t.scaleY,shadowBlur:l=t.shadowBlur,strokeBoundsBuffer:c=t.strokeBoundsBuffer}=e;if(l){const u=l/Math.abs(a+o);GA(r,u,!0,c),n.union(r)}return ue.graphicService.combindShadowAABBBounds(n,this),e.forceBoundsHeight==null&&e.forceBoundsWidth==null||ue.graphicService.updateHTMLTextAABBBounds(e,t,n),JN(n,n,this.transMatrix),n}updateWrapAABBBounds(e){var t,n,s,r;const a=this.getGraphicTheme(),{fontFamily:o=a.fontFamily,textAlign:l=a.textAlign,textBaseline:c=a.textBaseline,fontSize:u=a.fontSize,ellipsis:h=a.ellipsis,maxLineWidth:d,stroke:p=a.stroke,lineWidth:f=a.lineWidth,wordBreak:g=a.wordBreak,fontWeight:m=a.fontWeight,ignoreBuf:y=a.ignoreBuf,suffixPosition:b=a.suffixPosition,heightLimit:x=0,lineClamp:S}=this.attribute,C=(t=au(this.attribute.lineHeight,this.attribute.fontSize||a.fontSize))!==null&&t!==void 0?t:this.attribute.fontSize||a.fontSize,w=y?0:2;if(!this.shouldUpdateShape()&&(!((n=this.cache)===null||n===void 0)&&n.layoutData)){const I=this.cache.layoutData.bbox;return this._AABBBounds.set(I.xOffset,I.yOffset,I.xOffset+I.width,I.yOffset+I.height),p&&this._AABBBounds.expand(f/2),this._AABBBounds}const A=ue.graphicUtil.textMeasure,T=new BV(o,{fontSize:u,fontWeight:m,fontFamily:o},A),E=ie(e)?e.map(I=>I.toString()):[e.toString()],P=[],O=[0,0];let M=1/0;if(x>0&&(M=Math.max(Math.floor(x/C),1)),S&&(M=Math.min(M,S)),typeof d=="number"&&d!==1/0){if(d>0)for(let D=0;D<E.length;D++){const z=E[D];let $=!0;if(D===M-1){const Y=T.textMeasure.clipTextWithSuffix(z,T.textOptions,d,h,!1,b,D!==E.length-1);P.push({str:Y.str,width:Y.width});break}const V=T.textMeasure.clipText(z,T.textOptions,d,g!=="break-all",g==="keep-all");if(z!==""&&V.str===""||V.wordBreaked){if(h){const Y=T.textMeasure.clipTextWithSuffix(z,T.textOptions,d,h,!1,b);V.str=(s=Y.str)!==null&&s!==void 0?s:"",V.width=(r=Y.width)!==null&&r!==void 0?r:0}else V.str="",V.width=0;$=!1}P.push({str:V.str,width:V.width});let L=V.str.length;if(!V.wordBreaked||z!==""&&V.str===""||($=!0,L=V.wordBreaked),V.str.length!==z.length){if($){let Y=z.substring(L);g==="keep-all"&&(Y=Y.replace(/^\s+/g,"")),E.splice(D+1,0,Y)}}}let I=0;P.forEach(D=>{I=Math.max(I,D.width)}),O[0]=I}else{let I,D,z=0;for(let $=0,V=E.length;$<V;$++){if($===M-1){const L=T.textMeasure.clipTextWithSuffix(E[$],T.textOptions,d,h,!1,b);P.push({str:L.str,width:L.width}),z=Math.max(z,L.width);break}D=E[$],I=T.textMeasure.measureTextWidth(D,T.textOptions,g==="break-word"),z=Math.max(z,I),P.push({str:D,width:I})}O[0]=z}O[1]=P.length*(C+w);const R={xOffset:0,yOffset:0,width:O[0],height:O[1]};T.LayoutBBox(R,l,c);const j=T.layoutWithBBox(R,P,l,c,C);return this.cache.layoutData=j,this.clearUpdateShapeTag(),this._AABBBounds.set(R.xOffset,R.yOffset,R.xOffset+R.width,R.yOffset+R.height),p&&this._AABBBounds.expand(f/2),this._AABBBounds}updateSingallineAABBBounds(e){const t=this.getGraphicTheme(),{direction:n=t.direction,underlineOffset:s=t.underlineOffset}=this.attribute,r=n==="horizontal"?this.updateHorizontalSinglelineAABBBounds(e):this.updateVerticalSinglelineAABBBounds(e);return n==="horizontal"&&s&&this._AABBBounds.add(this._AABBBounds.x1,this._AABBBounds.y2+s),r}updateMultilineAABBBounds(e){const t=this.getGraphicTheme(),{direction:n=t.direction,underlineOffset:s=t.underlineOffset}=this.attribute,r=n==="horizontal"?this.updateHorizontalMultilineAABBBounds(e):this.updateVerticalMultilineAABBBounds(e);return n==="horizontal"&&s&&this._AABBBounds.add(this._AABBBounds.x1,this._AABBBounds.y2+s),r}updateHorizontalSinglelineAABBBounds(e){var t,n;const s=this.getGraphicTheme(),{wrap:r=s.wrap}=this.attribute;if(r)return this.updateWrapAABBBounds([e]);const a=ue.graphicUtil.textMeasure;let o,l;const c=this.attribute,{maxLineWidth:u=s.maxLineWidth,ellipsis:h=s.ellipsis,textAlign:d=s.textAlign,textBaseline:p=s.textBaseline,fontFamily:f=s.fontFamily,fontSize:g=s.fontSize,fontWeight:m=s.fontWeight,stroke:y=s.stroke,lineWidth:b=s.lineWidth,ignoreBuf:x=s.ignoreBuf,whiteSpace:S=s.whiteSpace,suffixPosition:C=s.suffixPosition}=c;if(S==="normal")return this.updateWrapAABBBounds(e);const w=x?0:Math.max(2,.075*g),A=c.fontSize||s.fontSize,T=(t=au(c.lineHeight,A))!==null&&t!==void 0?t:A+w;if(!this.shouldUpdateShape()&&this.cache){o=(n=this.cache.clipedWidth)!==null&&n!==void 0?n:0;const M=tu(d,o),R=iu(p,T,g);return this._AABBBounds.set(M,R,M+o,R+T),y&&this._AABBBounds.expand(b/2),this._AABBBounds}if(Number.isFinite(u)){if(h){const M=h===!0?s.ellipsis:h,R=a.clipTextWithSuffix(e.toString(),{fontSize:g,fontWeight:m,fontFamily:f},u,M,!1,C);l=R.str,o=R.width}else{const M=a.clipText(e.toString(),{fontSize:g,fontWeight:m,fontFamily:f},u,!1);l=M.str,o=M.width}this.cache.clipedText=l,this.cache.clipedWidth=o}else o=a.measureTextWidth(e.toString(),{fontSize:g,fontWeight:m,fontFamily:f}),this.cache.clipedText=e.toString(),this.cache.clipedWidth=o;this.clearUpdateShapeTag();const E=tu(d,o);let P=T;ue.global&&ue.global.isSafari()&&(P+=.2*g);const O=iu(p,P,g,w);return this._AABBBounds.set(E,O,E+o,O+P),y&&this._AABBBounds.expand(b/2),this._AABBBounds}getBaselineMapAlign(){return Hl.baselineMapAlign}getAlignMapBaseline(){return Hl.alignMapBaseline}updateVerticalSinglelineAABBBounds(e){var t,n,s;const r=this.getGraphicTheme(),a=ue.graphicUtil.textMeasure;let o;const l=this.attribute,{ignoreBuf:c=r.ignoreBuf}=l,u=c?0:2,{maxLineWidth:h=r.maxLineWidth,ellipsis:d=r.ellipsis,fontSize:p=r.fontSize,fontWeight:f=r.fontWeight,fontFamily:g=r.fontFamily,stroke:m=r.stroke,lineWidth:y=r.lineWidth,verticalMode:b=r.verticalMode,suffixPosition:x=r.suffixPosition}=l,S=(t=au(l.lineHeight,l.fontSize||r.fontSize))!==null&&t!==void 0?t:(l.fontSize||r.fontSize)+u;let{textAlign:C=r.textAlign,textBaseline:w=r.textBaseline}=l;if(!b){const P=C;C=(n=Hl.baselineMapAlign[w])!==null&&n!==void 0?n:"left",w=(s=Hl.alignMapBaseline[P])!==null&&s!==void 0?s:"top"}if(!this.shouldUpdateShape()&&this.cache){o=this.cache.clipedWidth;const P=tu(C,o),O=iu(w,S,p);return this._AABBBounds.set(O,P,O+S,P+o),m&&this._AABBBounds.expand(y/2),this._AABBBounds}let A=[mV(e.toString())];if(Number.isFinite(h)){if(d){const P=d===!0?r.ellipsis:d,O=a.clipTextWithSuffixVertical(A[0],{fontSize:p,fontWeight:f,fontFamily:g},h,P,!1,x);A=[O.verticalList],o=O.width}else{const P=a.clipTextVertical(A[0],{fontSize:p,fontWeight:f,fontFamily:g},h,!1);A=[P.verticalList],o=P.width}this.cache.verticalList=A,this.cache.clipedWidth=o}else o=0,A[0].forEach(P=>{const O=P.direction===Hp.HORIZONTAL?p:a.measureTextWidth(P.text,{fontSize:p,fontWeight:f,fontFamily:g});o+=O,P.width=O}),this.cache.verticalList=A,this.cache.clipedWidth=o;this.clearUpdateShapeTag();const T=tu(C,o),E=iu(w,S,p);return this._AABBBounds.set(E,T,E+S,T+o),m&&this._AABBBounds.expand(y/2),this._AABBBounds}updateHorizontalMultilineAABBBounds(e){var t,n;const s=this.getGraphicTheme(),{wrap:r=s.wrap}=this.attribute;if(r)return this.updateWrapAABBBounds(e);const a=this.attribute,{fontFamily:o=s.fontFamily,textAlign:l=s.textAlign,textBaseline:c=s.textBaseline,fontSize:u=s.fontSize,fontWeight:h=s.fontWeight,ellipsis:d=s.ellipsis,maxLineWidth:p,stroke:f=s.stroke,lineWidth:g=s.lineWidth,whiteSpace:m=s.whiteSpace,suffixPosition:y=s.suffixPosition}=a,b=(t=au(a.lineHeight,a.fontSize||s.fontSize))!==null&&t!==void 0?t:a.fontSize||s.fontSize;if(m==="normal")return this.updateWrapAABBBounds(e);if(!this.shouldUpdateShape()&&(!((n=this.cache)===null||n===void 0)&&n.layoutData)){const w=this.cache.layoutData.bbox;return this._AABBBounds.set(w.xOffset,w.yOffset,w.xOffset+w.width,w.yOffset+w.height),f&&this._AABBBounds.expand(g/2),this._AABBBounds}const x=ue.graphicUtil.textMeasure,S=new BV(o,{fontSize:u,fontWeight:h,fontFamily:o},x).GetLayoutByLines(e,l,c,b,d===!0?s.ellipsis:d||void 0,!1,p,y),{bbox:C}=S;return this.cache.layoutData=S,this.clearUpdateShapeTag(),this._AABBBounds.set(C.xOffset,C.yOffset,C.xOffset+C.width,C.yOffset+C.height),f&&this._AABBBounds.expand(g/2),this._AABBBounds}updateVerticalMultilineAABBBounds(e){var t,n,s;const r=this.getGraphicTheme(),a=ue.graphicUtil.textMeasure;let o;const l=this.attribute,{ignoreBuf:c=r.ignoreBuf}=l,u=c?0:2,{maxLineWidth:h=r.maxLineWidth,ellipsis:d=r.ellipsis,fontFamily:p=r.fontFamily,fontSize:f=r.fontSize,fontWeight:g=r.fontWeight,stroke:m=r.stroke,lineWidth:y=r.lineWidth,verticalMode:b=r.verticalMode,suffixPosition:x=r.suffixPosition}=l,S=(t=au(l.lineHeight,l.fontSize||r.fontSize))!==null&&t!==void 0?t:(l.fontSize||r.fontSize)+u;let{textAlign:C=r.textAlign,textBaseline:w=r.textBaseline}=l;if(!b){const O=C;C=(n=Hl.baselineMapAlign[w])!==null&&n!==void 0?n:"left",w=(s=Hl.alignMapBaseline[O])!==null&&s!==void 0?s:"top"}if(o=0,!this.shouldUpdateShape()&&this.cache){this.cache.verticalList.forEach(j=>{const I=j.reduce((D,z)=>D+z.width,0);o=br(I,o)});const O=tu(C,o),M=this.cache.verticalList.length*S,R=iu(w,M,f);return this._AABBBounds.set(R,O,R+M,O+o),m&&this._AABBBounds.expand(y/2),this._AABBBounds}const A=e.map(O=>mV(O.toString()));A.forEach((O,M)=>{if(Number.isFinite(h))if(d){const R=d===!0?r.ellipsis:d,j=a.clipTextWithSuffixVertical(O,{fontSize:f,fontWeight:g,fontFamily:p},h,R,!1,x);A[M]=j.verticalList,o=j.width}else{const R=a.clipTextVertical(O,{fontSize:f,fontWeight:g,fontFamily:p},h,!1);A[M]=R.verticalList,o=R.width}else o=0,O.forEach(R=>{const j=R.direction===Hp.HORIZONTAL?f:a.measureTextWidth(R.text,{fontSize:f,fontWeight:g,fontFamily:p});o+=j,R.width=j})}),this.cache.verticalList=A,this.clearUpdateShapeTag(),this.cache.verticalList.forEach(O=>{const M=O.reduce((R,j)=>R+j.width,0);o=br(M,o)});const T=tu(C,o),E=this.cache.verticalList.length*S,P=iu(w,E,f);return this._AABBBounds.set(P,T,P+E,T+o),m&&this._AABBBounds.expand(y/2),this._AABBBounds}needUpdateTags(e,t=jV){return super.needUpdateTags(e,t)}needUpdateTag(e,t=jV){return super.needUpdateTag(e,t)}clone(){return new Hl(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return Hl.NOWORK_ANIMATE_ATTR}};rw.NOWORK_ANIMATE_ATTR=Object.assign({ellipsis:1,wordBreak:1,direction:1,textAlign:1,textBaseline:1,fontFamily:1,fontWeight:1},Ls),rw.baselineMapAlign={top:"left",bottom:"right",middle:"center"},rw.alignMapBaseline={left:"top",right:"bottom",center:"middle"};function Cy(i){return new rw(i)}class Rn{bounds(e,t){if(ye(e)){const n=e/2;t.x1=-n,t.x2=n,t.y1=-n,t.y2=n}else t.x1=-e[0]/2,t.x2=e[0]/2,t.y1=-e[1]/2,t.y2=e[1]/2}}function NV(i,e,t,n,s){return s?i.arc(t,n,e,0,Ts,!1,s):i.arc(t,n,e,0,Ts),!1}class bQe extends Rn{constructor(){super(...arguments),this.type="circle",this.pathStr="M0.5,0A0.5,0.5,0,1,1,-0.5,0A0.5,0.5,0,1,1,0.5,0"}draw(e,t,n,s,r){return NV(e,t/2,n,s,r)}drawOffset(e,t,n,s,r,a){return NV(e,t/2+r,n,s,a)}drawToSvgPath(e,t,n,s){const r=e/2;return`M ${t-r}, ${n} a ${r},${r} 0 1,0 ${2*r},0 a ${r},${r} 0 1,0 -${2*r},0`}}const xQe=new bQe;function SQe(i,e,t,n,s){return i.moveTo(-3*e+t,-e+n,s),i.lineTo(-e+t,-e+n,s),i.lineTo(-e+t,-3*e+n,s),i.lineTo(e+t,-3*e+n,s),i.lineTo(e+t,-e+n,s),i.lineTo(3*e+t,-e+n,s),i.lineTo(3*e+t,e+n,s),i.lineTo(e+t,e+n,s),i.lineTo(e+t,3*e+n,s),i.lineTo(-e+t,3*e+n,s),i.lineTo(-e+t,e+n,s),i.lineTo(-3*e+t,e+n,s),i.closePath(),!0}function CQe(i,e,t,n,s,r){return i.moveTo(-3*e+t-s,-e+n-s,r),i.lineTo(-e+t-s,-e+n-s,r),i.lineTo(-e+t-s,-3*e+n-s,r),i.lineTo(e+t+s,-3*e+n-s,r),i.lineTo(e+t+s,-e+n-s,r),i.lineTo(3*e+t+s,-e+n-s,r),i.lineTo(3*e+t+s,e+n+s,r),i.lineTo(e+t+s,e+n+s,r),i.lineTo(e+t+s,3*e+n+s,r),i.lineTo(-e+t-s,3*e+n+s,r),i.lineTo(-e+t-s,e+n+s,r),i.lineTo(-3*e+t-s,e+n+s,r),i.closePath(),!0}class wQe extends Rn{constructor(){super(...arguments),this.type="cross",this.pathStr="M-0.5,-0.2L-0.5,0.2L-0.2,0.2L-0.2,0.5L0.2,0.5L0.2,0.2L0.5,0.2L0.5,-0.2L0.2,-0.2L0.2,-0.5L-0.2,-0.5L-0.2,-0.2Z"}draw(e,t,n,s,r){return SQe(e,t/6,n,s,r)}drawOffset(e,t,n,s,r,a){return CQe(e,t/6,n,s,r,a)}}const AQe=new wQe;function SI(i,e,t,n,s){return i.moveTo(t,n-e,s),i.lineTo(e+t,n,s),i.lineTo(t,n+e,s),i.lineTo(t-e,n,s),i.closePath(),!0}class kQe extends Rn{constructor(){super(...arguments),this.type="diamond",this.pathStr="M-0.5,0L0,-0.5L0.5,0L0,0.5Z"}draw(e,t,n,s,r){return SI(e,t/2,n,s,r)}drawFitDir(e,t,n,s,r){return SI(e,t/2,n,s,r)}drawOffset(e,t,n,s,r,a){return SI(e,t/2+r,n,s,a)}}const TQe=new kQe;function $V(i,e,t,n){const s=2*e;return i.rect(t-e,n-e,s,s),!1}class EQe extends Rn{constructor(){super(...arguments),this.type="square",this.pathStr="M-0.5,-0.5h1v1h-1Z"}draw(e,t,n,s){return $V(e,t/2,n,s)}drawOffset(e,t,n,s,r){return $V(e,t/2+r,n,s)}}const PQe=new EQe;function zV(i,e,t,n,s=0){return i.moveTo(t+e+2*s,e+n+s),i.lineTo(t-e-2*s,e+n+s),i.lineTo(t,n-e-2*s),i.closePath(),!0}class Jre extends Rn{constructor(){super(...arguments),this.type="triangleUp",this.pathStr="M0.5,0.5 L-0.5,0.5 L0,-0.5 Z"}draw(e,t,n,s){return zV(e,t/2,n,s)}drawOffset(e,t,n,s,r){return zV(e,t/2,n,s,r)}}const OQe=new Jre;class MQe extends Jre{constructor(){super(...arguments),this.type="triangle"}}const IQe=new MQe,Qre=Math.sin(Math.PI/10)/Math.sin(7*Math.PI/10),RQe=Math.sin(Ts/10)*Qre,LQe=-Math.cos(Ts/10)*Qre;function HV(i,e,t,n){const s=RQe*e,r=LQe*e;i.moveTo(t,-e+n),i.lineTo(s+t,r+n);for(let a=1;a<5;++a){const o=Ts*a/5,l=Math.cos(o),c=Math.sin(o);i.lineTo(c*e+t,-l*e+n),i.lineTo(l*s-c*r+t,c*s+l*r+n)}return i.closePath(),!0}class DQe extends Rn{constructor(){super(...arguments),this.type="star",this.pathStr="M0 -1L0.22451398828979266 -0.3090169943749474L0.9510565162951535 -0.30901699437494745L0.3632712640026804 0.1180339887498948L0.5877852522924732 0.8090169943749473L8.326672684688674e-17 0.3819660112501051L-0.587785252292473 0.8090169943749476L-0.3632712640026804 0.11803398874989487L-0.9510565162951536 -0.30901699437494723L-0.22451398828979274 -0.30901699437494734Z"}draw(e,t,n,s){return HV(e,t/2,n,s)}drawOffset(e,t,n,s,r){return HV(e,t/2+r,n,s)}}const FQe=new DQe,BQe=So(3);function VV(i,e,t,n){const s=e,r=s/BQe,a=r/5,o=e;return i.moveTo(0+t,-s+n),i.lineTo(r/2+t,n),i.lineTo(a/2+t,n),i.lineTo(a/2+t,o+n),i.lineTo(-a/2+t,o+n),i.lineTo(-a/2+t,n),i.lineTo(-r/2+t,n),i.closePath(),!0}class jQe extends Rn{constructor(){super(...arguments),this.type="arrow",this.pathStr="M-0.07142857142857142,0.5L0.07142857142857142,0.5L0.07142857142857142,-0.0625L0.2,-0.0625L0,-0.5L-0.2,-0.0625L-0.07142857142857142,-0.0625Z"}draw(e,t,n,s){return VV(e,t/2,n,s)}drawOffset(e,t,n,s,r){return VV(e,t/2+r,n,s)}}const NQe=new jQe;function UV(i,e,t,n){const s=2*e;return i.moveTo(t,-e+n),i.lineTo(s/3/2+t,e+n),i.lineTo(-s/3/2+t,e+n),i.closePath(),!0}class $Qe extends Rn{constructor(){super(...arguments),this.type="wedge",this.pathStr="M0,-0.5773502691896257L-0.125,0.28867513459481287L0.125,0.28867513459481287Z"}draw(e,t,n,s){return UV(e,t/2,n,s)}drawOffset(e,t,n,s,r){return UV(e,t/2+r,n,s)}}const zQe=new $Qe;function WV(i,e,t,n){return i.moveTo(-e+t,n),i.lineTo(t,e+n),!1}class HQe extends Rn{constructor(){super(...arguments),this.type="stroke",this.pathStr=""}draw(e,t,n,s){return WV(e,t/2,n,s)}drawOffset(e,t,n,s,r){return WV(e,t/2+r,n,s)}}const VQe=new HQe,Ga=-.5,Ka=So(3)/2,GV=1/So(12);function KV(i,e,t,n){const s=e/2,r=e*GV,a=s,o=e*GV+e,l=-a,c=o;return i.moveTo(s+t,r+n),i.lineTo(a+t,o+n),i.lineTo(l+t,c+n),i.lineTo(Ga*s-Ka*r+t,Ka*s+Ga*r+n),i.lineTo(Ga*a-Ka*o+t,Ka*a+Ga*o+n),i.lineTo(Ga*l-Ka*c+t,Ka*l+Ga*c+n),i.lineTo(Ga*s+Ka*r+t,Ga*r-Ka*s+n),i.lineTo(Ga*a+Ka*o+t,Ga*o-Ka*a+n),i.lineTo(Ga*l+Ka*c+t,Ga*c-Ka*l+n),i.closePath(),!1}class UQe extends Rn{constructor(){super(...arguments),this.type="wye",this.pathStr="M0.25 0.14433756729740646L0.25 0.6443375672974064L-0.25 0.6443375672974064L-0.25 0.14433756729740643L-0.6830127018922193 -0.10566243270259357L-0.4330127018922193 -0.5386751345948129L0 -0.28867513459481287L0.4330127018922193 -0.5386751345948129L0.6830127018922193 -0.10566243270259357Z"}draw(e,t,n,s){return KV(e,t/2,n,s)}drawOffset(e,t,n,s,r){return KV(e,t/2+r,n,s)}}const WQe=new UQe;function XV(i,e,t,n,s){return i.moveTo(-e+t-2*s,n),i.lineTo(e+t+s,e+n+2*s),i.lineTo(e+t+s,n-e-2*s),i.closePath(),!0}class GQe extends Rn{constructor(){super(...arguments),this.type="triangleLeft",this.pathStr="M-0.5,0 L0.5,0.5 L0.5,-0.5 Z"}draw(e,t,n,s){return XV(e,t/2,n,s,0)}drawOffset(e,t,n,s,r){return XV(e,t/2,n,s,r)}}const KQe=new GQe;function YV(i,e,t,n,s=0){return i.moveTo(t-e-s,e+n+2*s),i.lineTo(e+t+2*s,n),i.lineTo(t-e-s,n-e-2*s),i.closePath(),!0}class XQe extends Rn{constructor(){super(...arguments),this.type="triangleRight",this.pathStr="M-0.5,0.5 L0.5,0 L-0.5,-0.5 Z"}draw(e,t,n,s){return YV(e,t/2,n,s)}drawOffset(e,t,n,s,r){return YV(e,t/2,n,s,r)}}const YQe=new XQe;function qV(i,e,t,n,s=0){return i.moveTo(t-e-2*s,n-e-s),i.lineTo(t+e+2*s,n-e-s),i.lineTo(t,n+e+2*s),i.closePath(),!0}class qQe extends Rn{constructor(){super(...arguments),this.type="triangleDown",this.pathStr="M-0.5,-0.5 L0.5,-0.5 L0,0.5 Z"}draw(e,t,n,s){return qV(e,t/2,n,s)}drawOffset(e,t,n,s,r){return qV(e,t/2,n,s,r)}}const ZQe=new qQe,sF=So(3);function ZV(i,e,t,n){const s=e*sF;return i.moveTo(t,n+-s/3*2),i.lineTo(e+t,n+s),i.lineTo(t-e,n+s),i.closePath(),!0}class JQe extends Rn{constructor(){super(...arguments),this.type="thinTriangle",this.pathStr="M0,-0.5773502691896257L-0.5,0.28867513459481287L0.5,0.28867513459481287Z"}draw(e,t,n,s){return ZV(e,t/2/sF,n,s)}drawOffset(e,t,n,s,r){return ZV(e,t/2/sF+r,n,s)}}const QQe=new JQe;function JV(i,e,t,n){const s=2*e;return i.moveTo(e+t,n-s),i.lineTo(t-e,n),i.lineTo(e+t,s+n),!0}class eet extends Rn{constructor(){super(...arguments),this.type="arrow2Left",this.pathStr="M 0.25 -0.5 L -0.25 0 l 0.25 0.5"}draw(e,t,n,s){return JV(e,t/4,n,s)}drawOffset(e,t,n,s,r){return JV(e,t/4+r,n,s)}}const tet=new eet;function QV(i,e,t,n){const s=2*e;return i.moveTo(t-e,n-s),i.lineTo(t+e,n),i.lineTo(t-e,s+n),!0}class iet extends Rn{constructor(){super(...arguments),this.type="arrow2Right",this.pathStr="M -0.25 -0.5 l 0.25 0 l -0.25 0.5"}draw(e,t,n,s){return QV(e,t/4,n,s)}drawOffset(e,t,n,s,r){return QV(e,t/4+r,n,s)}}const net=new iet;function eU(i,e,t,n){const s=2*e;return i.moveTo(t-s,n+e),i.lineTo(t,n-e),i.lineTo(t+s,n+e),!0}class set extends Rn{constructor(){super(...arguments),this.type="arrow2Up",this.pathStr="M -0.5 0.25 L 0 -0.25 l 0.5 0.25"}draw(e,t,n,s){return eU(e,t/4,n,s)}drawOffset(e,t,n,s,r){return eU(e,t/4+r,n,s)}}const ret=new set;function tU(i,e,t,n){const s=2*e;return i.moveTo(t-s,n-e),i.lineTo(t,n+e),i.lineTo(t+s,n-e),!0}class aet extends Rn{constructor(){super(...arguments),this.type="arrow2Down",this.pathStr="M -0.5 -0.25 L 0 0.25 l 0.5 -0.25"}draw(e,t,n,s){return tU(e,t/4,n,s)}drawOffset(e,t,n,s,r){return tU(e,t/4+r,n,s)}}const oet=new aet;function iU(i,e,t,n,s){return i.moveTo(t,n-e),i.lineTo(t,n+e),!0}class cet extends Rn{constructor(){super(...arguments),this.type="lineV",this.pathStr="M0,-0.5L0,0.5"}draw(e,t,n,s,r){return iU(e,t/2,n,s)}drawOffset(e,t,n,s,r,a){return iU(e,t/2+r,n,s)}drawToSvgPath(e,t,n,s){const r=e/2;return`M ${t}, ${n-r} L ${t},${n+r}`}}const uet=new cet;function nU(i,e,t,n,s){return i.moveTo(t-e,n),i.lineTo(t+e,n),!0}class het extends Rn{constructor(){super(...arguments),this.type="lineH",this.pathStr="M-0.5,0L0.5,0"}draw(e,t,n,s,r){return nU(e,t/2,n,s)}drawOffset(e,t,n,s,r,a){return nU(e,t/2+r,n,s)}drawToSvgPath(e,t,n,s){const r=e/2;return`M ${t-r}, ${n} L ${t+r},${n}`}}const det=new het;function sU(i,e,t,n,s){return i.moveTo(t-e,n-e),i.lineTo(t+e,n+e),i.moveTo(t+e,n-e),i.lineTo(t-e,n+e),!0}class pet extends Rn{constructor(){super(...arguments),this.type="close",this.pathStr="M-0.5,-0.5L0.5,0.5,M0.5,-0.5L-0.5,0.5"}draw(e,t,n,s,r){return sU(e,t/2,n,s)}drawOffset(e,t,n,s,r,a){return sU(e,t/2+r,n,s)}drawToSvgPath(e,t,n,s){const r=e/2;return`M ${t-r}, ${n-r} L ${t+r},${n+r} M ${t+r}, ${n-r} L ${t-r},${n+r}`}}const fet=new pet;function rU(i,e,t,n){return i.rect(t-e[0]/2,n-e[1]/2,e[0],e[1]),!1}function aU(i,e,t,n){const s=e,r=e/2;return i.rect(t-s/2,n-r/2,s,r),!1}class get extends Rn{constructor(){super(...arguments),this.type="rect",this.pathStr="M -0.5,0.25 L 0.5,0.25 L 0.5,-0.25,L -0.5,-0.25 Z"}draw(e,t,n,s){return ye(t)?aU(e,t,n,s):rU(e,t,n,s)}drawOffset(e,t,n,s,r){return ye(t)?aU(e,t+2*r,n,s):rU(e,[t[0]+2*r,t[1]+2*r],n,s)}}const met=new get,p_=new Qi;class oU{constructor(e,t,n=!1){this.pathStr="",this.type=e,ie(t)?this.svgCache=t:this.path=t,this.isSvg=n}drawOffset(e,t,n,s,r,a,o){return this.isSvg?!!this.svgCache&&(this.svgCache.forEach(l=>{e.beginPath(),Ed(l.path.commandList,e,n,s,t,t),o&&o(l.path,l.attribute)}),!1):(Ed(this.path.commandList,e,n,s,t+r,t+r),!1)}draw(e,t,n,s,r,a){return this.drawOffset(e,t,n,s,0,r,a)}bounds(e,t){if(this.isSvg)return this.svgCache?(t.clear(),void this.svgCache.forEach(({path:n})=>{p_.x1=n.bounds.x1*e,p_.y1=n.bounds.y1*e,p_.x2=n.bounds.x2*e,p_.y2=n.bounds.y2*e,t.union(p_)})):void 0;this.path.bounds&&(t.x1=this.path.bounds.x1*e,t.y1=this.path.bounds.y1*e,t.x2=this.path.bounds.x2*e,t.y2=this.path.bounds.y2*e)}}const yet=[xQe,AQe,TQe,PQe,QQe,IQe,FQe,NQe,zQe,VQe,WQe,KQe,YQe,OQe,ZQe,tet,net,ret,oet,met,uet,det,fet],pk={};yet.forEach(i=>{pk[i.type]=i});const _et={arrowLeft:"M 0.25 -0.5 L -0.25 0 l 0.5 0.5",arrowRight:"M -0.25 -0.5 l 0.5 0.5 l -0.5 0.5",rectRound:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",roundLine:"M 1.2392 -0.258 L -1.3432 -0.258 C -1.4784 -0.258 -1.588 -0.1436 -1.588 -0.002 c 0 0.1416 0.1096 0.256 0.2448 0.256 l 2.5824 0 c 0.1352 0 0.2448 -0.1144 0.2448 -0.256 C 1.484 -0.1436 1.3744 -0.258 1.2392 -0.258 z"},vet=(i,e,t)=>{const{outerBorder:n,shadowBlur:s=e.shadowBlur,strokeBoundsBuffer:r=e.strokeBoundsBuffer}=i;if(n){const a=e.outerBorder,{distance:o=a.distance,lineWidth:l=a.lineWidth}=n;GA(t,o+(s+l)/2,!0,r)}return t},dC=new Qi,lU=["symbolType","size",...Pa];let Xb=class Fg extends sr{constructor(e={symbolType:"circle"}){super(e),this.type="symbol",this.numberType=UP}getParsedPath(){return this.shouldUpdateShape()&&(this.doUpdateParsedPath(),this.clearUpdateShapeTag()),this._parsedPath}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{size:e}=this.attribute;return ie(e)?e.length===2&&e.every(this._validNumber):this._validNumber(e)}doUpdateParsedPath(){const e=this.getGraphicTheme();let{symbolType:t=e.symbolType}=this.attribute,n=pk[t];if(n)return this._parsedPath=n,n;if(n=Fg.userSymbolMap[t],n)return this._parsedPath=n,n;if(t=_et[t]||t,bZe(t)===!0){const l=new BP,{svg:c}=l.parse(t);if(!c)return null;const u=ie(c.path)?c.path:[c.path];dC.clear();const h=[];u.forEach(g=>{const m=new Bn().fromString(g.d),y={};EZe.forEach(b=>{g[b]&&(y[jre[b]]=g[b])}),h.push({path:m,attribute:y}),dC.union(m.bounds)});const d=dC.width(),p=dC.height(),f=1/br(d,p);return h.forEach(g=>g.path.transform(0,0,f,f)),this._parsedPath=new oU(t,h,!0),Fg.userSymbolMap[t]=this._parsedPath,this._parsedPath}const s=new Bn().fromString(t),r=s.bounds.width(),a=s.bounds.height(),o=1/br(r,a);return s.transform(0,0,o,o),this._parsedPath=new oU(t,s),Fg.userSymbolMap[t]=this._parsedPath,this._parsedPath}getGraphicTheme(){return Ye(this).symbol}updateAABBBounds(e,t,n,s){this.updatePathProxyAABBBounds(n)||(s?this.updateSymbolAABBBoundsImprecise(e,t,n):this.updateSymbolAABBBoundsAccurate(e,t,n));const{tb1:r,tb2:a}=ue.graphicService.updateTempAABBBounds(n);vet(e,t,r),n.union(r),r.setValue(a.x1,a.y1,a.x2,a.y2);const{lineJoin:o=t.lineJoin}=e;return ue.graphicService.transformAABBBounds(e,n,t,o==="miter",this),n}updateSymbolAABBBoundsImprecise(e,t,n){const{size:s=t.size}=e;if(ie(s))n.set(-s[0]/2,-s[1]/2,s[0]/2,s[1]/2);else{const r=s/2;n.set(-r,-r,r,r)}return n}updateSymbolAABBBoundsAccurate(e,t,n){const{size:s=t.size}=e;return this.getParsedPath().bounds(s,n),n}needUpdateTags(e){return super.needUpdateTags(e,lU)}needUpdateTag(e){return super.needUpdateTag(e,lU)}toCustomPath(){const e=this.getParsedPath(),t=this.attribute.size,n=ie(t)?t:[t,t];return e.path?new Bn().fromCustomPath2D(e.path,0,0,n[0],n[1]):new Bn().fromString(e.pathStr,0,0,n[0],n[1])}clone(){return new Fg(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return Fg.NOWORK_ANIMATE_ATTR}};Xb.userSymbolMap={},Xb.NOWORK_ANIMATE_ATTR=Object.assign({symbolType:1},Ls);function KP(i){return new Xb(i)}const cU=["segments","points","curveType","curveTension",...Pa];let eae=class rF extends sr{constructor(e={}){super(e),this.type="line",this.numberType=Ox}isValid(){return super.isValid()&&this._isValid()}_isValid(){if(this.pathProxy)return!0;const{points:e,segments:t}=this.attribute;return t?t.length!==0:!!e&&!(e.length<=1)}_interpolate(e,t,n,s,r){e==="points"&&(r.points=m5(n,s,t))}getGraphicTheme(){return Ye(this).line}updateAABBBounds(e,t,n){this.updatePathProxyAABBBounds(n)||(e.segments?this.updateLineAABBBoundsBySegments(e,t,n):this.updateLineAABBBoundsByPoints(e,t,n)),ue.graphicService.updateTempAABBBounds(n);const{lineJoin:s=t.lineJoin}=e;return ue.graphicService.transformAABBBounds(e,n,t,s==="miter",this),n}updateLineAABBBoundsByPoints(e,t,n,s){const{points:r=t.points,connectedType:a}=e,o=n;return r.forEach(l=>{l.defined===!1&&a!=="zero"&&a!=="connect"||o.add(l.x,l.y)}),o}updateLineAABBBoundsBySegments(e,t,n,s){const{segments:r=t.segments,connectedType:a}=e,o=n;return r.forEach(l=>{l.points.forEach(c=>{c.defined===!1&&a!=="zero"&&a!=="connect"||o.add(c.x,c.y)})}),o}needUpdateTags(e){return super.needUpdateTags(e,cU)}needUpdateTag(e){return super.needUpdateTag(e,cU)}toCustomPath(){const e=this.attribute,t=new Bn,n=e.segments,s=r=>{if(r&&r.length){let a=!0;r.forEach(o=>{o.defined!==!1&&(a?t.moveTo(o.x,o.y):t.lineTo(o.x,o.y),a=!1)})}};return n&&n.length?n.forEach(r=>{s(r.points)}):e.points&&s(e.points),t}clone(){return new rF(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return rF.NOWORK_ANIMATE_ATTR}};eae.NOWORK_ANIMATE_ATTR=Object.assign({segments:1,curveType:1},Ls);function L5(i){return new eae(i)}const uU=["width","x1","y1","height","cornerRadius",...Pa];class wy extends sr{constructor(e){super(e),this.type="rect",this.numberType=x5}isValid(){return super.isValid()&&this._isValid()}_isValid(){return!0}getGraphicTheme(){return Ye(this).rect}updateAABBBounds(e,t,n){if(!this.updatePathProxyAABBBounds(n)){let{width:a,height:o}=e;const{x1:l,y1:c,x:u,y:h}=e;a=a??l-u,o=o??c-h,(isFinite(a)||isFinite(o)||isFinite(u)||isFinite(h))&&n.set(0,0,a||0,o||0)}const{tb1:s,tb2:r}=ue.graphicService.updateTempAABBBounds(n);return Ix(e,t,s),n.union(s),s.setValue(r.x1,r.y1,r.x2,r.y2),ue.graphicService.transformAABBBounds(e,n,t,!1,this),n}needUpdateTags(e){return super.needUpdateTags(e,uU)}needUpdateTag(e){return super.needUpdateTag(e,uU)}toCustomPath(){const e=this.attribute,{x:t,y:n,width:s,height:r}=nZe(e),a=new Bn;return a.moveTo(t,n),a.rect(t,n,s,r),a}clone(){return new wy(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return wy.NOWORK_ANIMATE_ATTR}}wy.NOWORK_ANIMATE_ATTR=Ls;function Rx(i){return new wy(i)}const hU=[[0,0,0],[1,0,0],[1,1,0],[0,1,0],[0,0,1],[1,0,1],[1,1,1],[0,1,1]];class XP extends wy{constructor(e){super(e),this.type="rect3d",this.numberType=S5}findFace(){const e={polygons:[],vertices:[],edges:[]},t=this.getGraphicTheme(),{x1:n,y1:s,x:r,y:a,length:o=fs(t.width,t.height)}=this.attribute;let{width:l,height:c}=this.attribute;l=l??n-r,c=c??s-a;for(let u=0;u<hU.length;u++){const h=hU[u];e.vertices.push([h[0]*l,h[1]*c,h[2]*o])}return e.polygons.push({polygon:[0,1,5,4],normal:[0,-1,0]}),e.polygons.push({polygon:[2,3,7,6],normal:[0,1,0]}),e.polygons.push({polygon:[4,7,3,0],normal:[-1,0,0]}),e.polygons.push({polygon:[1,2,6,5],normal:[1,0,0]}),e.polygons.push({polygon:[0,1,2,3],normal:[0,0,-1]}),e.polygons.push({polygon:[4,5,6,7],normal:[0,0,1]}),e.edges=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[3,7],[1,5],[2,6]],e}getNoWorkAnimateAttr(){return XP.NOWORK_ANIMATE_ATTR}}XP.NOWORK_ANIMATE_ATTR=Ls;function tae(i){return new XP(i)}class Yb extends sr{constructor(e){super(e),this.type="glyph",this.numberType=_5,this.subGraphic=[],this._onInit&&this._onInit(this),this.valid=this.isValid()}setSubGraphic(e){this.detachSubGraphic(),this.subGraphic=e,e.forEach(t=>{t.glyphHost=this,Object.setPrototypeOf(t.attribute,this.attribute)}),this.valid=this.isValid(),this.addUpdateBoundTag()}detachSubGraphic(){this.subGraphic.forEach(e=>{e.glyphHost=null,Object.setPrototypeOf(e.attribute,{})})}getSubGraphic(){return this.subGraphic}onInit(e){this._onInit=e}onUpdate(e){this._onUpdate=e}isValid(){return!0}setAttribute(e,t,n,s){super.setAttribute(e,t,n,s),this.subGraphic.forEach(r=>{r.addUpdateShapeAndBoundsTag(),r.addUpdatePositionTag()})}setAttributes(e,t=!1,n){super.setAttributes(e,t,n),this.subGraphic.forEach(s=>{s.addUpdateShapeAndBoundsTag(),s.addUpdatePositionTag()})}translate(e,t){return super.translate(e,t),this.subGraphic.forEach(n=>{n.addUpdatePositionTag(),n.addUpdateBoundTag()}),this}translateTo(e,t){return super.translateTo(e,t),this.subGraphic.forEach(n=>{n.addUpdatePositionTag(),n.addUpdateBoundTag()}),this}scale(e,t,n){return super.scale(e,t,n),this.subGraphic.forEach(s=>{s.addUpdatePositionTag(),s.addUpdateBoundTag()}),this}scaleTo(e,t){return super.scaleTo(e,t),this.subGraphic.forEach(n=>{n.addUpdatePositionTag(),n.addUpdateBoundTag()}),this}rotate(e){return super.rotate(e),this.subGraphic.forEach(t=>{t.addUpdatePositionTag(),t.addUpdateBoundTag()}),this}rotateTo(e){return super.rotate(e),this.subGraphic.forEach(t=>{t.addUpdatePositionTag(),t.addUpdateBoundTag()}),this}getGraphicTheme(){return Ye(this).glyph}updateAABBBounds(e,t,n){return this.getSubGraphic().forEach(s=>{n.union(s.AABBBounds)}),n}doUpdateAABBBounds(){this.updateAABBBoundsStamp++,this._AABBBounds.clear();const e=this.updateAABBBounds(this.attribute,this.getGraphicTheme(),this._AABBBounds);return this.clearUpdateBoundTag(),e}needUpdateTags(e){return!1}needUpdateTag(e){return!1}useStates(e,t){var n;if(!e.length)return void this.clearStates(t);if(!(((n=this.currentStates)===null||n===void 0?void 0:n.length)!==e.length||e.some((a,o)=>this.currentStates[o]!==a)))return;this.stopStateAnimates();const s={},r=this.subGraphic.map(()=>({}));e.forEach(a=>{var o;const l=this.glyphStateProxy?this.glyphStateProxy(a,e):this.glyphStates[a];l&&(Object.assign(s,l.attributes),!((o=l.subAttributes)===null||o===void 0)&&o.length&&r.forEach((c,u)=>{Object.assign(c,l.subAttributes[u])}))}),this.subGraphic.forEach((a,o)=>{a.updateNormalAttrs(r[o]),a.applyStateAttrs(r[o],e,t)}),this.updateNormalAttrs(s),this.currentStates=e,this.applyStateAttrs(s,e,t)}clearStates(e){this.stopStateAnimates(),this.hasState()&&this.normalAttrs?(this.currentStates=[],this.subGraphic.forEach(t=>{t.applyStateAttrs(t.normalAttrs,this.currentStates,e,!0),t.normalAttrs=null}),this.applyStateAttrs(this.normalAttrs,this.currentStates,e,!0)):this.currentStates=[],this.normalAttrs=null}clone(){const e=new Yb(Object.assign({},this.attribute));return e.setSubGraphic(this.subGraphic.map(t=>t.clone())),e}getNoWorkAnimateAttr(){return Yb.NOWORK_ANIMATE_ATTR}}Yb.NOWORK_ANIMATE_ATTR=Ls;function iae(i){return new Yb(i)}class bet{constructor(e,t,n,s,r,a,o,l,c,u,h,d,p,f){this.left=e,this.top=t,this.width=n,this.height=s,this.actualHeight=0,this.bottom=t+s,this.right=e+n,this.ellipsis=r,this.wordBreak=a,this.verticalDirection=o,this.lines=[],this.globalAlign=l,this.globalBaseline=c,this.layoutDirection=u,this.directionKey=f5[this.layoutDirection],this.isWidthMax=h,this.isHeightMax=d,this.singleLine=p,f?(f.clear(),this.icons=f):this.icons=new Map}draw(e,t){const{width:n,height:s}=this.getActualSize(),r=this.isWidthMax?Math.min(this.width,n):this.width||n||0;let a=this.isHeightMax?Math.min(this.height,s):this.height||s||0;a=Math.min(a,s);let o=0;switch(this.globalBaseline){case"top":o=0;break;case"middle":o=-a/2;break;case"bottom":o=-a}let l=0;this.globalAlign==="right"||this.globalAlign==="end"?l=-r:this.globalAlign==="center"&&(l=-r/2);let c=this[this.directionKey.height];this.singleLine&&(c=this.lines[0].height+1);let u=!1;if(this.verticalDirection==="middle")if(this.actualHeight>=c&&c!==0)for(let h=0;h<this.lines.length;h++){const{top:d,height:p}=this.lines[h];if(d+p<this[this.directionKey.top]||d+p>this[this.directionKey.top]+c)return u;let f=!1;this.ellipsis&&this.lines[h+1]&&this.lines[h+1].top+this.lines[h+1].height>this[this.directionKey.top]+c&&(f=!0,u=!0),this.lines[h].draw(e,f,this.lines[h][this.directionKey.left]+l,this.lines[h][this.directionKey.top]+o,this.ellipsis,t)}else{const h=Math.floor((c-this.actualHeight)/2);this.layoutDirection==="vertical"?l+=h:o+=h;for(let d=0;d<this.lines.length;d++)this.lines[d].draw(e,!1,this.lines[d][this.directionKey.left]+l,this.lines[d][this.directionKey.top]+o,this.ellipsis,t)}else if(this.verticalDirection==="bottom"&&this.layoutDirection!=="vertical")for(let h=0;h<this.lines.length;h++){const{top:d,height:p}=this.lines[h],f=c-this.lines[h].top-this.lines[h].height;if(c===0)this.lines[h].draw(e,!1,l,f+o,this.ellipsis,t);else{if(f+p>this[this.directionKey.top]+c||f<this[this.directionKey.top])return u;{let g=!1;this.ellipsis&&this.lines[h+1]&&f-this.lines[h+1].height<this[this.directionKey.top]&&(g=!0,u=!0),this.lines[h].draw(e,g,l,f+o,this.ellipsis,t)}}}else{this.verticalDirection==="bottom"&&this.layoutDirection==="vertical"&&this.singleLine&&this.isWidthMax&&(l+=this.lines[0].height+1);for(let h=0;h<this.lines.length;h++){this.verticalDirection==="bottom"&&this.layoutDirection==="vertical"&&(l-=this.lines[h].height+this.lines[h].top);const{top:d,height:p}=this.lines[h];if(c===0)this.lines[h].draw(e,!1,this.lines[h][this.directionKey.left]+l,this.lines[h][this.directionKey.top]+o,this.ellipsis,t);else{if(d+p<this[this.directionKey.top]||d+p>this[this.directionKey.top]+c)return u;{let f=!1;this.ellipsis&&this.lines[h+1]&&this.lines[h+1].top+this.lines[h+1].height>this[this.directionKey.top]+c&&(f=!0,u=!0),this.lines[h].draw(e,f,this.lines[h][this.directionKey.left]+l,this.lines[h][this.directionKey.top]+o,this.ellipsis,t)}}}}return u}getActualSize(){return this.ellipsis?this.getActualSizeWidthEllipsis():this.getRawActualSize()}getRawActualSize(){let e=0,t=0;for(let n=0;n<this.lines.length;n++){const s=this.lines[n];s.actualWidth>e&&(e=s.actualWidth),t+=s.height}return{width:this.layoutDirection==="vertical"?t:e,height:this.layoutDirection==="vertical"?e:t}}getActualSizeWidthEllipsis(){let e=0,t=0;const{width:n,height:s}=this.getRawActualSize();this.width,this.height;let r=this[this.directionKey.height];if(this.singleLine&&(r=this.lines[0].height+1),this.verticalDirection==="middle")if(this.actualHeight>=r&&r!==0)for(let a=0;a<this.lines.length;a++){const{top:o,height:l}=this.lines[a];if(!(o+l<this[this.directionKey.top]||o+l>this[this.directionKey.top]+r))if(this.ellipsis&&this.lines[a+1]&&this.lines[a+1].top+this.lines[a+1].height>this[this.directionKey.top]+r){const c=this.ellipsis===!0?"...":this.ellipsis||"",u=this.lines[a].getWidthWithEllips(c);u>e&&(e=u),t+=this.lines[a].height}else this.lines[a].actualWidth>e&&(e=this.lines[a].actualWidth),t+=this.lines[a].height}else{Math.floor((r-this.actualHeight)/2);for(let a=0;a<this.lines.length;a++)this.lines[a].actualWidth>e&&(e=this.lines[a].actualWidth),t+=this.lines[a].height}else if(this.verticalDirection==="bottom")for(let a=0;a<this.lines.length;a++){const{top:o,height:l}=this.lines[a],c=r-this.lines[a].top-this.lines[a].height;if(r===0)this.lines[a].actualWidth>e&&(e=this.lines[a].actualWidth),t+=this.lines[a].height;else if(!(c+l>this[this.directionKey.top]+r||c<this[this.directionKey.top]))if(this.ellipsis&&this.lines[a+1]&&c-this.lines[a+1].height<this[this.directionKey.top]){const u=this.ellipsis===!0?"...":this.ellipsis||"",h=this.lines[a].getWidthWithEllips(u);h>e&&(e=h),t+=this.lines[a].height}else this.lines[a].actualWidth>e&&(e=this.lines[a].actualWidth),t+=this.lines[a].height}else for(let a=0;a<this.lines.length;a++){const{top:o,height:l}=this.lines[a];if(r===0)this.lines[a].actualWidth>e&&(e=this.lines[a].actualWidth),t+=this.lines[a].height;else if(!(o+l<this[this.directionKey.top]||o+l>this[this.directionKey.top]+r))if(this.ellipsis&&this.lines[a+1]&&this.lines[a+1].top+this.lines[a+1].height>this[this.directionKey.top]+r){const c=this.ellipsis===!0?"...":this.ellipsis||"",u=this.lines[a].getWidthWithEllips(c);u>e&&(e=u),t+=this.lines[a].height}else this.lines[a].actualWidth>e&&(e=this.lines[a].actualWidth),t+=this.lines[a].height}return{width:this.layoutDirection==="vertical"?t:e,height:this.layoutDirection==="vertical"?e:t}}}class qb{constructor(e,t,n){this.fontSize=n.fontSize||16,this.textBaseline=n.textBaseline||"alphabetic";const s=au(n.lineHeight,this.fontSize);this.lineHeight=typeof s=="number"?s>this.fontSize?s:this.fontSize:Math.floor(1.2*this.fontSize),this.height=this.lineHeight;const{ascent:r,height:a,descent:o,width:l}=dm(e,n);let c=0,u=0,h=0;this.height>a&&(c=(this.height-a)/2,u=Math.ceil(c),h=Math.floor(c)),this.textBaseline==="top"?(this.ascent=c,this.descent=a-c):this.textBaseline==="bottom"?(this.ascent=a-c,this.descent=c):this.textBaseline==="middle"?(this.ascent=this.height/2,this.descent=this.height/2):(this.ascent=r+u,this.descent=o+h),this.length=e.length,this.width=l||0,this.text=e||"",this.newLine=t||!1,this.character=n,this.left=0,this.top=0,this.ellipsis="normal",this.ellipsisWidth=0,this.ellipsisOtherParagraphWidth=0,n.direction==="vertical"&&(this.direction=n.direction,this.widthOrigin=this.width,this.heightOrigin=this.height,this.width=this.heightOrigin,this.height=this.widthOrigin,this.lineHeight=this.height),this.ellipsisStr="..."}updateWidth(){const{width:e}=dm(this.text,this.character);this.width=e,this.direction==="vertical"&&(this.widthOrigin=this.width,this.width=this.heightOrigin,this.height=this.widthOrigin)}draw(e,t,n,s,r){let a=this.text,o=this.left+n;t+=this.top;let l=this.direction;if(this.verticalEllipsis)a=this.ellipsisStr,l="vertical",t-=this.ellipsisWidth/2;else{if(this.ellipsis==="hide")return;if(this.ellipsis==="add")a+=this.ellipsisStr,r!=="right"&&r!=="end"||(o-=this.ellipsisWidth);else if(this.ellipsis==="replace"){const c=wD(a,(l==="vertical"?this.height:this.width)-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,a.length-1);if(a=a.slice(0,c),a+=this.ellipsisStr,r==="right"||r==="end"){const{width:u}=dm(this.text.slice(c),this.character);l==="vertical"||(o-=this.ellipsisWidth-u)}}}switch(this.character.script){case"super":t-=this.ascent*(1/3);break;case"sub":t+=this.descent/2}l==="vertical"&&(e.save(),e.rotateAbout(Math.PI/2,o,t),e.translate(-this.heightOrigin||-this.lineHeight/2,-this.descent/2),e.translate(o,t),o=0,t=0),this.character.stroke&&(Lqe(e,this.character),e.strokeText(a,o,t)),Rqe(e,this.character),this.character.fill&&e.fillText(a,o,t),this.character.fill&&(typeof this.character.lineThrough=="boolean"||typeof this.character.underline=="boolean"?(this.character.underline&&e.fillRect(o,1+t,this.widthOrigin||this.width,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1),this.character.lineThrough&&e.fillRect(o,1+t-this.ascent/2,this.widthOrigin||this.width,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)):this.character.textDecoration==="underline"?e.fillRect(o,1+t,this.widthOrigin||this.width,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1):this.character.textDecoration==="line-through"&&e.fillRect(o,1+t-this.ascent/2,this.widthOrigin||this.width,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)),l==="vertical"&&e.restore()}getWidthWithEllips(e){let t=this.text;const n=e==="vertical"?this.height:this.width;if(this.ellipsis==="hide")return n;if(this.ellipsis==="add")return n+this.ellipsisWidth;if(this.ellipsis==="replace"){const s=wD(t,n-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,t.length-1);t=t.slice(0,s),t+=this.ellipsisStr;const{width:r}=dm(this.text.slice(s),this.character);return n+this.ellipsisWidth-r}return n}}function xet(i,e){const t=i.text.slice(0,e),n=i.text.slice(e);return[new qb(t,i.newLine,i.character),new qb(n,!0,i.character)]}const dU=["width","height","image",...Pa];let D5=class aF extends sr{constructor(e){super(e),this.type="image",this.numberType=zP,this.loadImage(this.attribute.image)}get width(){var e;return(e=this.attribute.width)!==null&&e!==void 0?e:0}set width(e){this.attribute.width===e&&(this.attribute.width=e,this.addUpdateShapeAndBoundsTag())}get height(){var e;return(e=this.attribute.height)!==null&&e!==void 0?e:0}set height(e){this.attribute.height===e&&(this.attribute.height=e,this.addUpdateShapeAndBoundsTag())}get repeatX(){var e;return(e=this.attribute.repeatX)!==null&&e!==void 0?e:"no-repeat"}set repeatX(e){this.attribute.repeatX===e&&(this.attribute.repeatX=e)}get repeatY(){var e;return(e=this.attribute.repeatY)!==null&&e!==void 0?e:"no-repeat"}set repeatY(e){this.attribute.repeatY===e&&(this.attribute.repeatY=e)}get image(){return this.attribute.image}set image(e){e!==this.attribute.image&&(this.attribute.image=e,this.loadImage(this.attribute.image))}imageLoadSuccess(e,t,n){super.imageLoadSuccess(e,t,()=>{this.successCallback&&this.successCallback()})}imageLoadFail(e,t){super.imageLoadFail(e,()=>{this.failCallback&&this.failCallback()})}setAttributes(e,t,n){return e.image&&this.loadImage(e.image),super.setAttributes(e,t,n)}setAttribute(e,t,n,s){return e==="image"&&this.loadImage(t),super.setAttribute(e,t,n,s)}getGraphicTheme(){return Ye(this).image}updateAABBBounds(e,t,n){if(!this.updatePathProxyAABBBounds(n)){const{width:a=t.width,height:o=t.height}=e;n.set(0,0,a,o)}const{tb1:s,tb2:r}=ue.graphicService.updateTempAABBBounds(n);return Ix(e,t,s),n.union(s),s.setValue(r.x1,r.y1,r.x2,r.y2),ue.graphicService.transformAABBBounds(e,n,t,!1,this),n}getDefaultAttribute(e){return Vb[e]}needUpdateTags(e){return super.needUpdateTags(e,dU)}needUpdateTag(e){return super.needUpdateTag(e,dU)}clone(){return new aF(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return aF.NOWORK_ANIMATE_ATTR}};D5.NOWORK_ANIMATE_ATTR=Object.assign({image:1,repeatX:1,repeatY:1},Ls);function F5(i){return new D5(i)}class nu extends D5{constructor(e){if(super(e),this._x=0,this._y=0,this._hovered=!1,this._marginArray=[0,0,0,0],e.backgroundShowMode==="always"&&(this._hovered=!0),e.margin){const t=WA(e.margin);this._marginArray=typeof t=="number"?[t,t,t,t]:t}this.onBeforeAttributeUpdate=(t,n,s)=>{if(ie(s)&&s.indexOf("margin")!==-1||s==="margin")if(n.margin){const r=WA(n.margin);this._marginArray=typeof r=="number"?[r,r,r,r]:r}else this._marginArray=[0,0,0,0]}}get width(){var e;return((e=this.attribute.width)!==null&&e!==void 0?e:0)+this._marginArray[1]+this._marginArray[3]}get height(){var e;return((e=this.attribute.height)!==null&&e!==void 0?e:0)+this._marginArray[0]+this._marginArray[2]}tryUpdateAABBBounds(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;this.doUpdateAABBBounds();const{width:e=Vb.width,height:t=Vb.height}=this.attribute,{backgroundWidth:n=e,backgroundHeight:s=t}=this.attribute,r=(n-e)/2,a=(s-t)/2;return this._AABBBounds.expand([0,2*r,2*a,0]),this._AABBBounds}setHoverState(e){this.attribute.backgroundShowMode==="hover"&&this._hovered!==e&&(this._hovered=e)}}class Cet{constructor(e,t,n,s,r,a,o,l){this.left=e,this.width=t,this.baseline=n,this.ascent=s,this.descent=r,this.top=n-s,this.paragraphs=a.map(u=>u),this.textAlign=(this.paragraphs[0]instanceof nu?this.paragraphs[0].attribute.textAlign:this.paragraphs[0].character.textAlign)||"left",this.direction=o,this.directionKey=f5[this.direction],this.actualWidth=0;let c=0;this.paragraphs.forEach((u,h)=>{if(h===0&&u instanceof qb){const d=Iqe.exec(u.text);(d==null?void 0:d.index)!==0&&(u.text=u.text.slice(d==null?void 0:d.index),u.updateWidth())}this.actualWidth+=u[this.directionKey.width],c=Math.max(u[this.directionKey.height],c)}),this.height=c,this.blankWidth=l?0:this.width-this.actualWidth,this.calcOffset(t,l)}calcOffset(e,t){const n=this.directionKey,s=this.height;let r=this.left,a=0;this.actualWidth<e&&!t&&(this.textAlign==="right"||this.textAlign==="end"?r=e-this.actualWidth:this.textAlign==="center"?r=(e-this.actualWidth)/2:this.textAlign==="justify"&&(this.paragraphs.length<2?r=(e-this.actualWidth)/2:a=(e-this.actualWidth)/(this.paragraphs.length-1))),this.paragraphs.map(function(o){o instanceof nu?(o["_"+n.x]=r,r+=o[n.width]+a,o["_"+n.y]=o.attribute.textBaseline==="top"?0:o.attribute.textBaseline==="bottom"?s-o.height:(s-o.height)/2):(o[n.left]=r,r+=o[n.width]+a)})}draw(e,t,n,s,r,a){if(r&&(t||this.paragraphs.some(o=>o.overflow))){let o=!0,l=!1;for(let u=this.paragraphs.length-1;u>=0;u--){const h=this.paragraphs[u];if(h.overflow)o=o&&h.text==="";else if(o){l=!0;break}}let c=0;if(!l)for(let u=this.paragraphs.length-1;u>=0;u--){const h=this.paragraphs[u];if(h.overflow){if(h.text==="")break;continue}if(h instanceof nu)break;if(this.direction==="vertical"&&h.direction!=="vertical"){h.verticalEllipsis=!0;break}const d=r===!0?"...":r||"";h.ellipsisStr=d;const{width:p}=dm(d,h.character),f=p||0;if(f<=this.blankWidth+c){t&&(h.ellipsis="add");break}if(f<=this.blankWidth+c+h.width){h.ellipsis="replace",h.ellipsisWidth=f,h.ellipsisOtherParagraphWidth=this.blankWidth+c;break}h.ellipsis="hide",c+=h.width}}this.paragraphs.map((o,l)=>{if(o instanceof nu)return o.setAttributes({x:n+o._x,y:s+o._y}),void a(o,e,n+o._x,s+o._y,this.ascent);o.draw(e,s+this.ascent,n,l===0,this.textAlign)})}getWidthWithEllips(e){let t=0;for(let s=this.paragraphs.length-1;s>=0;s--){const r=this.paragraphs[s];if(r instanceof nu)break;const{width:a}=dm(e,r.character),o=a||0;if(o<=this.blankWidth+t){r.ellipsis="add",r.ellipsisWidth=o;break}if(o<=this.blankWidth+t+r.width){r.ellipsis="replace",r.ellipsisWidth=o,r.ellipsisOtherParagraphWidth=this.blankWidth+t;break}r.ellipsis="hide",t+=r.width}let n=0;return this.paragraphs.map((s,r)=>{n+=s instanceof nu?s.width:s.getWidthWithEllips(this.direction)}),n}}class wet{constructor(e){this.frame=e,this.width=this.frame.width,this.height=this.frame.height,this.lineWidth=0,this.y=this.frame.top,this.maxAscent=0,this.maxDescent=0,this.maxAscentForBlank=0,this.maxDescentForBlank=0,this.lineBuffer=[],this.direction=e.layoutDirection,this.directionKey=f5[this.direction]}store(e){if(e instanceof nu){this.frame.icons.set(e.richtextId,e),this.lineBuffer.push(e),this.lineWidth+=e[this.directionKey.width];let t=0,n=0;e.attribute.textBaseline==="top"?(t=0,n=e.height):e.attribute.textBaseline==="bottom"?(t=e.height,n=0):(t=e.height/2,n=e.height/2),this.maxAscent=Math.max(this.maxAscent,t),this.maxDescent=Math.max(this.maxDescent,n)}else this.lineBuffer.push(e),e.text.length!==0?(this.lineWidth+=e[this.directionKey.width],this.maxAscent=Math.max(this.maxAscent,e.ascent),this.maxDescent=Math.max(this.maxDescent,e.descent)):(this.maxAscentForBlank=Math.max(this.maxAscentForBlank,e.ascent),this.maxDescentForBlank=Math.max(this.maxDescentForBlank,e.descent))}send(){if(this.lineBuffer.length===0)return;const e=this.maxAscent===0?this.maxAscentForBlank:this.maxAscent,t=this.maxDescent===0?this.maxDescentForBlank:this.maxDescent,n=new Cet(this.frame.left,this[this.directionKey.width],this.y+e,e,t,this.lineBuffer,this.direction,this.direction==="horizontal"?this.frame.isWidthMax:this.frame.isHeightMax);this.frame.lines.push(n),this.frame.actualHeight+=n.height,this.y+=n.height,this.lineBuffer.length=0,this.lineWidth=this.maxAscent=this.maxDescent=this.maxAscentForBlank=this.maxDescentForBlank=0}deal(e,t=!1){e instanceof nu?this.direction==="horizontal"&&this.width===0||this.direction==="vertical"&&this.height===0||this.lineWidth+e[this.directionKey.width]<=this[this.directionKey.width]?this.store(e):this.lineBuffer.length===0?(this.store(e),this.send()):(this.send(),this.deal(e)):typeof this.width!="number"||this.width<0||(e.newLine&&this.send(),e.text.length!==0&&(this.direction==="horizontal"&&this.width===0||this.direction==="vertical"&&this.height===0||this.lineWidth+e[this.directionKey.width]<=this[this.directionKey.width]?this.store(e):this.lineWidth===this[this.directionKey.width]?(this.send(),this.deal(e)):this.cut(e,t)))}cut(e,t){const n=this[this.directionKey.width]-this.lineWidth||0,s=Math.ceil(n/e[this.directionKey.width]*e.length)||0,r=wD(e.text,n,e.character,s,this.frame.wordBreak==="break-word");if(r!==0){const[a,o]=xet(e,r);this.store(a),t?this.send():this.deal(o)}else this.lineBuffer.length!==0&&(this.send(),this.deal(e))}}const pU=["width","height","ellipsis","wordBreak","verticalDirection","maxHeight","maxWidth","textAlign","textBaseline","textConfig","layoutDirection","fill","stroke","fontSize",...Pa];class Zb extends sr{constructor(e){super(e),this.type="richtext",this._currentHoverIcon=null,this.numberType=C5,this.onBeforeAttributeUpdate=(t,n,s)=>{for(const r in t)if(r==="hoverIconId"){if(t[r]===n[r])continue;const a=this._frameCache.icons.get(t[r]);this.updateHoverIconState(a)}}}get width(){var e;return(e=this.attribute.width)!==null&&e!==void 0?e:Gc.width}set width(e){this.attribute.width!==e&&(this.attribute.width=e,this.addUpdateShapeAndBoundsTag())}get height(){var e;return(e=this.attribute.height)!==null&&e!==void 0?e:Gc.height}set height(e){this.attribute.height!==e&&(this.attribute.height=e,this.addUpdateShapeAndBoundsTag())}get maxWidth(){return this.attribute.maxWidth}set maxWidth(e){this.attribute.maxWidth!==e&&(this.attribute.maxWidth=e,this.addUpdateShapeAndBoundsTag())}get maxHeight(){return this.attribute.maxHeight}set maxHeight(e){this.attribute.maxHeight!==e&&(this.attribute.maxHeight=e,this.addUpdateShapeAndBoundsTag())}get ellipsis(){var e;return(e=this.attribute.ellipsis)!==null&&e!==void 0?e:Gc.ellipsis}set ellipsis(e){this.attribute.ellipsis!==e&&(this.attribute.ellipsis=e,this.addUpdateShapeAndBoundsTag())}get wordBreak(){var e;return(e=this.attribute.wordBreak)!==null&&e!==void 0?e:Gc.wordBreak}set wordBreak(e){this.attribute.wordBreak!==e&&(this.attribute.wordBreak=e,this.addUpdateShapeAndBoundsTag())}get verticalDirection(){var e;return(e=this.attribute.verticalDirection)!==null&&e!==void 0?e:Gc.verticalDirection}set verticalDirection(e){this.attribute.verticalDirection!==e&&(this.attribute.verticalDirection=e,this.addUpdateShapeAndBoundsTag())}get textAlign(){var e;return(e=this.attribute.textAlign)!==null&&e!==void 0?e:Gc.textAlign}set textAlign(e){this.attribute.textAlign!==e&&(this.attribute.textAlign=e,this.addUpdateShapeAndBoundsTag())}get textBaseline(){var e;return(e=this.attribute.textBaseline)!==null&&e!==void 0?e:Gc.textBaseline}set textBaseline(e){this.attribute.textBaseline!==e&&(this.attribute.textBaseline=e,this.addUpdateShapeAndBoundsTag())}get textConfig(){var e;return(e=this.attribute.textConfig)!==null&&e!==void 0?e:Gc.textConfig}set textConfig(e){this.attribute.textConfig=e,this.addUpdateShapeAndBoundsTag()}getGraphicTheme(){return Ye(this).richtext}updateAABBBounds(e,t,n){const{width:s=t.width,height:r=t.height,maxWidth:a=t.maxWidth,maxHeight:o=t.maxHeight,textAlign:l=t.textAlign,textBaseline:c=t.textBaseline}=e;if(s>0&&r>0)n.set(0,0,s,r);else{const d=this.getFrameCache(),{width:p,height:f}=d.getActualSize();let g=s||p||0,m=r||f||0;m=typeof o=="number"&&m>o?o:m||0,g=typeof a=="number"&&g>a?a:g||0,n.set(0,0,g,m)}let u=0;switch(c){case"top":u=0;break;case"middle":u=-n.height()/2;break;case"bottom":u=-n.height()}let h=0;switch(l){case"left":h=0;break;case"center":h=-n.width()/2;break;case"right":h=-n.width()}return n.translate(h,u),ue.graphicService.updateTempAABBBounds(n),e.forceBoundsHeight==null&&e.forceBoundsWidth==null||ue.graphicService.updateHTMLTextAABBBounds(e,t,n),ue.graphicService.transformAABBBounds(e,n,t,!1,this),n}needUpdateTags(e){return super.needUpdateTags(e,pU)}needUpdateTag(e){return super.needUpdateTag(e,pU)}getFrameCache(){return this.shouldUpdateShape()&&(this.doUpdateFrameCache(),this.clearUpdateShapeTag()),this._frameCache}get cliped(){const e=this.getFrameCache();if(e.actualHeight>e.height)return!0;const{disableAutoWrapLine:t}=this.attribute;if(t)for(let n=0;n<e.lines.length;n++){const s=e.lines[n];for(let r=0;r<s.paragraphs.length;r++){const a=s.paragraphs[r];if(a.overflow&&a.text!=="")return!0}}return!1}combinedStyleToCharacter(e){const{fill:t,stroke:n,fontSize:s,fontFamily:r,fontStyle:a,fontWeight:o,lineWidth:l,opacity:c,fillOpacity:u,strokeOpacity:h}=this.attribute;return Object.assign({fill:t,stroke:n,fontSize:s,fontFamily:r,fontStyle:a,fontWeight:o,lineWidth:l,opacity:c,fillOpacity:u,strokeOpacity:h},e)}doUpdateFrameCache(e){var t;const{textConfig:n=[],maxWidth:s,maxHeight:r,width:a,height:o,ellipsis:l,wordBreak:c,verticalDirection:u,textAlign:h,textBaseline:d,layoutDirection:p,singleLine:f,disableAutoWrapLine:g}=this.attribute,m=[],y=e??n;for(let T=0;T<y.length;T++)if("image"in y[T]){const E=this.combinedStyleToCharacter(y[T]);E.lineWidth=void 0;const P=E.id&&this._frameCache&&this._frameCache.icons&&this._frameCache.icons.get(E.id);if(P)m.push(P);else{const O=new nu(E);O.successCallback=()=>{var M;this.addUpdateBoundTag(),(M=this.stage)===null||M===void 0||M.renderNextFrame()},O.richtextId=E.id,m.push(O)}}else{const E=this.combinedStyleToCharacter(y[T]);if(ye(E.text)&&(E.text=`${E.text}`),E.text&&E.text.includes(`
`)){const P=E.text.split(`
`);for(let O=0;O<P.length;O++)m.push(new qb(P[O],O!==0,E))}else E.text&&m.push(new qb(E.text,!1,E))}const b=typeof s=="number"&&Number.isFinite(s)&&s>0,x=typeof r=="number"&&Number.isFinite(r)&&r>0,S=typeof a=="number"&&Number.isFinite(a)&&a>0&&(!b||a<=s),C=typeof o=="number"&&Number.isFinite(o)&&o>0&&(!x||o<=r),w=new bet(0,0,(S?a:b?s:0)||0,(C?o:x?r:0)||0,l,c,u,h,d,p||"horizontal",!S&&b,!C&&x,f||!1,(t=this._frameCache)===null||t===void 0?void 0:t.icons),A=new wet(w);if(g){let T=0,E=!1;for(let P=0;P<m.length;P++){const O=m[P];E?(O.overflow=!0,O.left=1/0,O.top=1/0,!O.newLine&&w.lines[w.lines.length-1].paragraphs.push(O)):A.deal(O,!0),w.lines.length!==T&&(T=w.lines.length,A.lineBuffer.length=0,O.overflow=!0,O.left=1e3,O.top=1e3,w.lines[w.lines.length-1].paragraphs.push(O),E=!0),O.newLine&&(E=!1,A.lineWidth=0),A.send()}}else for(let T=0;T<m.length;T++)A.deal(m[T]);if(A.send(),!(w.layoutDirection==="horizontal"?S:C)){const T=w.getActualSizeWidthEllipsis();let E=w.layoutDirection==="horizontal"?T.width:T.height;(w.layoutDirection==="horizontal"?b:x)&&(E=Math.min(E,w.layoutDirection==="horizontal"?s:r)),w.lines.forEach(function(P){P.calcOffset(E,!1)})}this._frameCache=w}clone(){return new Zb(Object.assign({},this.attribute))}setStage(e,t){super.setStage(e,t),this.getFrameCache().icons.forEach(n=>{n.setStage(e,t)})}bindIconEvent(){this.addEventListener("pointermove",e=>{const t=this.pickIcon(e.global);t&&t===this._currentHoverIcon||(t?this.setAttribute("hoverIconId",t.richtextId):!t&&this._currentHoverIcon&&this.setAttribute("hoverIconId",void 0))}),this.addEventListener("pointerleave",e=>{this._currentHoverIcon&&this.setAttribute("hoverIconId",void 0)})}updateHoverIconState(e){var t,n,s,r,a;e?((t=this._currentHoverIcon)===null||t===void 0||t.setHoverState(!1),this._currentHoverIcon=e,this._currentHoverIcon.setHoverState(!0),(n=this.stage)===null||n===void 0||n.setCursor(e.attribute.cursor),(s=this.stage)===null||s===void 0||s.renderNextFrame()):(this._currentHoverIcon.setHoverState(!1),this._currentHoverIcon=null,(r=this.stage)===null||r===void 0||r.setCursor(),(a=this.stage)===null||a===void 0||a.renderNextFrame())}pickIcon(e){const t=this.getFrameCache(),{e:n,f:s}=this.globalTransMatrix;let r;return t.icons.forEach((a,o)=>{var l,c;const u=a.AABBBounds.clone();u.translate(a._marginArray[3],a._marginArray[0]),u.containsPoint({x:e.x-n,y:e.y-s})&&(r=a,r.globalX=((l=r.attribute.x)!==null&&l!==void 0?l:0)+n+a._marginArray[3],r.globalY=((c=r.attribute.y)!==null&&c!==void 0?c:0)+s+a._marginArray[0])}),r}getNoWorkAnimateAttr(){return Zb.NOWORK_ANIMATE_ATTR}}Zb.NOWORK_ANIMATE_ATTR=Object.assign({ellipsis:1,wordBreak:1,verticalDirection:1,textAlign:1,textBaseline:1,textConfig:1,layoutDirection:1},Ls);function nae(i){return new Zb(i)}const fU=["path","customPath",...Pa];class Jb extends sr{constructor(e){super(e),this.type="path",this.numberType=HP}get pathShape(){return this.tryUpdateAABBBounds(),this.getParsedPathShape()}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{path:e}=this.attribute;return e!=null&&e!==""}getParsedPathShape(){const e=this.getGraphicTheme();if(!this.valid)return e.path;const t=this.attribute;return t.path instanceof Bn?t.path:(B(this.cache)&&this.doUpdatePathShape(),this.cache instanceof Bn?this.cache:e.path)}getGraphicTheme(){return Ye(this).path}updateAABBBounds(e,t,n){if(!this.updatePathProxyAABBBounds(n)){const o=this.getParsedPathShape();n.union(o.getBounds())}const{tb1:s,tb2:r}=ue.graphicService.updateTempAABBBounds(n);Ix(e,t,s),n.union(s),s.setValue(r.x1,r.y1,r.x2,r.y2);const{lineJoin:a=t.lineJoin}=e;return ue.graphicService.transformAABBBounds(e,n,t,a==="miter",this),n}doUpdateAABBBounds(e){return this.doUpdatePathShape(),super.doUpdateAABBBounds(e)}doUpdatePathShape(){const e=this.attribute;be(e.path,!0)?this.cache=new Bn().fromString(e.path):e.customPath&&(this.cache=new Bn,e.customPath(this.cache,this))}needUpdateTags(e){return super.needUpdateTags(e,fU)}needUpdateTag(e){return super.needUpdateTag(e,fU)}toCustomPath(){return new Bn().fromCustomPath2D(this.getParsedPathShape(),0,0)}clone(){return new Jb(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return Jb.NOWORK_ANIMATE_ATTR}}Jb.NOWORK_ANIMATE_ATTR=Object.assign({path:1,customPath:1},Ls);function sae(i){return new Jb(i)}const gU=["segments","points","curveType","curveTension",...Pa];class Qb extends sr{constructor(e){super(e),this.type="area",this.numberType=Px}isValid(){return super.isValid()&&this._isValid()}_isValid(){if(this.pathProxy)return!0;const{points:e,segments:t}=this.attribute;return t?t.length!==0:!!e&&e.length!==0}getGraphicTheme(){return Ye(this).area}updateAABBBounds(e,t,n){this.updatePathProxyAABBBounds(n)||(e.segments?this.updateAreaAABBBoundsBySegments(e,t,n):this.updateAreaAABBBoundsByPoints(e,t,n)),ue.graphicService.updateTempAABBBounds(n);const{lineJoin:s=t.lineJoin}=e;return ue.graphicService.transformAABBBounds(e,n,t,s==="miter",this),n}updateAreaAABBBoundsByPoints(e,t,n,s){const{points:r=t.points}=e,a=n;return r.forEach(o=>{var l,c;a.add(o.x,o.y),a.add((l=o.x1)!==null&&l!==void 0?l:o.x,(c=o.y1)!==null&&c!==void 0?c:o.y)}),a}updateAreaAABBBoundsBySegments(e,t,n,s){const{segments:r=t.segments}=e,a=n;return r.forEach(o=>{o.points.forEach(l=>{var c,u;a.add(l.x,l.y),a.add((c=l.x1)!==null&&c!==void 0?c:l.x,(u=l.y1)!==null&&u!==void 0?u:l.y)})}),a}_interpolate(e,t,n,s,r){e==="points"&&(r.points=m5(n,s,t))}needUpdateTags(e){return super.needUpdateTags(e,gU)}needUpdateTag(e){return super.needUpdateTag(e,gU)}toCustomPath(){const e=new Bn,t=this.attribute,n=t.segments,s=r=>{if(r&&r.length){let a=!0;const o=[];if(r.forEach(l=>{var c,u;l.defined!==!1&&(a?e.moveTo(l.x,l.y):e.lineTo(l.x,l.y),o.push({x:(c=l.x1)!==null&&c!==void 0?c:l.x,y:(u=l.y1)!==null&&u!==void 0?u:l.y}),a=!1)}),o.length){for(let l=o.length-1;l>=0;l--)e.lineTo(o[l].x,o[l].y);e.closePath()}}};return t.points?s(t.points):n&&n.length&&n.forEach(r=>{s(r.points)}),e}clone(){return new Qb(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return Qb.NOWORK_ANIMATE_ATTR}}Qb.NOWORK_ANIMATE_ATTR=Object.assign({segments:1,curveType:1},Ls);function rae(i){return new Qb(i)}const mU=["innerRadius","outerRadius","startAngle","endAngle","cornerRadius","padAngle","padRadius","cap",...Pa];class Ay extends sr{constructor(e){super(e),this.type="arc",this.numberType=jP}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{startAngle:e,endAngle:t,outerRadius:n,innerRadius:s}=this.attribute;return this._validNumber(e)&&this._validNumber(t)&&this._validNumber(n)&&this._validNumber(s)}getParsedCornerRadius(){const e=this.getGraphicTheme(),{cornerRadius:t=e.cornerRadius,innerPadding:n=e.innerPadding,outerPadding:s=e.outerPadding}=this.attribute;let{outerRadius:r=e.outerRadius,innerRadius:a=e.innerRadius}=this.attribute;if(r+=s,a-=n,t===0||t==="0%")return 0;const o=Math.abs(r-a),l=c=>Math.min(ye(c,!0)?c:o*parseFloat(c)/100,o/2);if(ie(t)){const c=t.map(u=>l(u)||0);return c.length===0?[c[0],c[0],c[0],c[0]]:c.length===2?[c[0],c[1],c[0],c[1]]:(c.length===3&&c.push(0),c)}return l(t)}getParsedAngle(){const e=this.getGraphicTheme();let{startAngle:t=e.startAngle,endAngle:n=e.endAngle}=this.attribute;const{cap:s=e.cap}=this.attribute,r=n-t>=0?1:-1,a=n-t;if(t=SKe(t),n=t+a,s&&At(a)<yt-Dt){let o=1,l=1;s.length&&(o=Number(s[0]),l=Number(s[1]));let{outerRadius:c=e.outerRadius,innerRadius:u=e.innerRadius}=this.attribute;const{outerPadding:h=e.outerPadding,innerPadding:d=e.innerPadding}=this.attribute;c+=h,u-=d;const p=Math.abs(c-u)/2,f=p/c;if(p>Dt&&c>Dt)return{startAngle:t-r*f*o,endAngle:n+r*f*l,sc:r*f*o,ec:r*f*l}}return{startAngle:t,endAngle:n}}getParsePadAngle(e,t){const n=this.getGraphicTheme(),{innerPadding:s=n.innerPadding,outerPadding:r=n.outerPadding,padAngle:a=n.padAngle}=this.attribute;let{outerRadius:o=n.outerRadius,innerRadius:l=n.innerRadius}=this.attribute;o+=r,l-=s;const{padRadius:c=So(o*o+l*l)}=this.attribute,u=At(t-e);let h=e,d=t,p=e,f=t;const g=a/2;let m=u,y=u;if(g>Dt&&c>Dt){const b=t>e?1:-1;let x=n8(Number(c)/l*ti(g)),S=n8(Number(c)/o*ti(g));return(m-=2*x)>Dt?(x*=b,p+=x,f-=x):(m=0,p=f=(e+t)/2),(y-=2*S)>Dt?(S*=b,h+=S,d-=S):(y=0,h=d=(e+t)/2),{outerStartAngle:h,outerEndAngle:d,innerStartAngle:p,innerEndAngle:f,innerDeltaAngle:m,outerDeltaAngle:y}}return{outerStartAngle:h,outerEndAngle:d,innerStartAngle:p,innerEndAngle:f,innerDeltaAngle:m,outerDeltaAngle:y}}getGraphicTheme(){return Ye(this).arc}updateAABBBounds(e,t,n,s){this.updatePathProxyAABBBounds(n)||(s?this.updateArcAABBBoundsImprecise(e,t,n):this.updateArcAABBBoundsAccurate(e,t,n));const{tb1:r,tb2:a}=ue.graphicService.updateTempAABBBounds(n);Ix(e,t,r),n.union(r),r.setValue(a.x1,a.y1,a.x2,a.y2);const{lineJoin:o=t.lineJoin}=e;return ue.graphicService.transformAABBBounds(e,n,t,o==="miter",this),n}updateArcAABBBoundsImprecise(e,t,n){let{outerRadius:s=t.outerRadius,innerRadius:r=t.innerRadius}=e;const{outerPadding:a=t.outerPadding,innerPadding:o=t.innerPadding}=e;return s+=a,r-=o,s<r&&(s=r),n.set(-s,-s,s,s),n}updateArcAABBBoundsAccurate(e,t,n){let{outerRadius:s=t.outerRadius,innerRadius:r=t.innerRadius}=e;const{outerPadding:a=t.outerPadding,innerPadding:o=t.innerPadding}=e;if(s+=a,r-=o,s<r){const u=s;s=r,r=u}let{endAngle:l=t.endAngle,startAngle:c=t.startAngle}=e;if(c>l){const u=c;c=l,l=u}return s<=Dt?n.set(0,0,0,0):Math.abs(l-c)>yt-Dt?n.set(-s,-s,s,s):(ID(c,l,s,n),ID(c,l,r,n)),n}needUpdateTags(e){return super.needUpdateTags(e,mU)}needUpdateTag(e){return super.needUpdateTag(e,mU)}toCustomPath(){var e,t,n,s;const r=this.attribute,{startAngle:a,endAngle:o}=this.getParsedAngle();let l=((e=r.innerRadius)!==null&&e!==void 0?e:0)-((t=r.innerPadding)!==null&&t!==void 0?t:0),c=((n=r.outerRadius)!==null&&n!==void 0?n:0)-((s=r.outerPadding)!==null&&s!==void 0?s:0);const u=At(o-a),h=o>a;if(c<l){const p=c;c=l,l=p}const d=new Bn;if(c<=Dt)d.moveTo(0,0);else if(u>=yt-Dt)d.moveTo(0+c*vi(a),0+c*ti(a)),d.arc(0,0,c,a,o,!h),l>Dt&&(d.moveTo(0+l*vi(o),0+l*ti(o)),d.arc(0,0,l,o,a,h));else{const p=c*vi(a),f=c*ti(a),g=l*vi(o),m=l*ti(o);d.moveTo(0+p,0+f),d.arc(0,0,c,a,o,!h),d.lineTo(0+g,0+m),d.arc(0,0,l,o,a,h),d.closePath()}return d}clone(){return new Ay(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return Ay.NOWORK_ANIMATE_ATTR}}Ay.NOWORK_ANIMATE_ATTR=Object.assign({cap:1},Ls);function B5(i){return new Ay(i)}class YP extends Ay{constructor(e){super(e),this.type="arc3d",this.numberType=NP}updateAABBBounds(e,t,n){const s=this.stage;if(!s||!s.camera)return n;const{outerRadius:r=t.outerRadius,height:a=0}=e,o=r+a;return n.setValue(-o,-o,o,o),ue.graphicService.updateTempAABBBounds(n),ue.graphicService.transformAABBBounds(e,n,t,!1,this),n}getNoWorkAnimateAttr(){return YP.NOWORK_ANIMATE_ATTR}}YP.NOWORK_ANIMATE_ATTR=Object.assign({cap:1},Ls);function aae(i){return new YP(i)}const yU=["points","cornerRadius",...Pa];class ky extends sr{constructor(e){super(e),this.type="polygon",this.numberType=VP}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{points:e}=this.attribute;return e&&e.length>=2}getGraphicTheme(){return Ye(this).polygon}updateAABBBounds(e,t,n){this.updatePathProxyAABBBounds(n)||this.updatePolygonAABBBoundsImprecise(e,t,n),ue.graphicService.updateTempAABBBounds(n);const{lineJoin:s=t.lineJoin}=e;return ue.graphicService.transformAABBBounds(e,n,t,s==="miter",this),n}updatePolygonAABBBoundsImprecise(e,t,n){const{points:s=t.points}=e;return s.forEach(r=>{n.add(r.x,r.y)}),n}_interpolate(e,t,n,s,r){e==="points"&&(r.points=m5(n,s,t))}needUpdateTags(e){return super.needUpdateTags(e,yU)}needUpdateTag(e){return super.needUpdateTag(e,yU)}toCustomPath(){const e=this.attribute.points,t=new Bn;return e.forEach((n,s)=>{s===0?t.moveTo(n.x,n.y):t.lineTo(n.x,n.y)}),t.closePath(),t}clone(){return new ky(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return ky.NOWORK_ANIMATE_ATTR}}ky.NOWORK_ANIMATE_ATTR=Ls;function oae(i){return new ky(i)}class qP extends ky{constructor(e){super(e),this.type="pyramid3d",this.numberType=b5}updateAABBBounds(e,t,n){const s=this.stage;return!s||!s.camera||(this.findFace().vertices.forEach(r=>{const a=r[0],o=r[1];n.add(a,o)}),ue.graphicService.updateTempAABBBounds(n),ue.graphicService.transformAABBBounds(e,n,t,!1,this)),n}findFace(){const{points:e}=this.attribute,t=e.map((o,l)=>{const c=l===3?e[0]:e[l+1],u=o.x-c.x;return u===0?0:(o.y-c.y)/u}),n=e.map(o=>({p:o,d:0}));let s=!1,r=0;for(let o=0;o<t.length-1;o++){for(let l=o+1;l<t.length;l++){if(t[o]===t[l]){s=!0;const c=kn.distancePP(n[o].p,n[o+1].p);n[o].d=c,n[o+1].d=c,r=br(r,c);const u=kn.distancePP(n[l].p,n[l+1].p);n[l].d=u,n[l+1].d=u,r=br(r,u)}if(s)break}if(s)break}for(let o=e.length-1;o>=0;o--){const l=e[o];n.unshift({p:l,d:0})}for(let o=0;o<e.length;o++){const l=(r-n[o+e.length].d)/2;n[o].d+=l,n[o+e.length].d+=l}const a={polygons:[],vertices:[],edges:[]};return n.forEach(o=>{a.vertices.push([o.p.x,o.p.y,o.d])}),a.polygons.push({polygon:[0,4,5,1],normal:[0,-1,0]}),a.polygons.push({polygon:[7,6,2,3],normal:[0,1,0]}),a.polygons.push({polygon:[0,4,7,3],normal:[-1,0,0]}),a.polygons.push({polygon:[1,5,6,2],normal:[1,0,0]}),a.polygons.push({polygon:[0,1,2,3],normal:[0,0,-1]}),a.polygons.push({polygon:[4,5,6,7],normal:[0,0,1]}),a.edges=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[3,7],[1,5],[2,6]],a}_isValid(){return super._isValid()&&this.attribute.points.length===4}getNoWorkAnimateAttr(){return qP.NOWORK_ANIMATE_ATTR}}qP.NOWORK_ANIMATE_ATTR=Ls;function lae(i){return new qP(i)}class Aet extends T0{constructor(e){super({x:0,y:0}),this.type="shadowroot",this.shadowHost=e}clearUpdateBoundTag(){super.clearUpdateBoundTag(),this.shadowHost&&this.shadowHost.clearUpdateBoundTag()}addUpdateBoundTag(){super.addUpdateBoundTag(),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}addUpdateShapeAndBoundsTag(){super.addUpdateShapeAndBoundsTag(),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}tryUpdateGlobalTransMatrix(e=!0){if(this.shouldUpdateGlobalMatrix()){const t=this.transMatrix;this._globalTransMatrix?this._globalTransMatrix.setValue(t.a,t.b,t.c,t.d,t.e,t.f):this._globalTransMatrix=t.clone(),this.doUpdateGlobalMatrix(),e&&this.clearUpdateGlobalPositionTag()}return this._globalTransMatrix}doUpdateGlobalMatrix(){if(this.shadowHost){const e=this.shadowHost.globalTransMatrix;this._globalTransMatrix.multiply(e.a,e.b,e.c,e.d,e.e,e.f)}}tryUpdateGlobalAABBBounds(){return this._globalAABBBounds?this._globalAABBBounds.setValue(this._AABBBounds.x1,this._AABBBounds.y1,this._AABBBounds.x2,this._AABBBounds.y2):this._globalAABBBounds=this._AABBBounds.clone(),this.shadowHost&&this._globalAABBBounds.transformWithMatrix(this.shadowHost.globalTransMatrix),this._globalAABBBounds}}function ket(i){return new Aet(i)}var j5=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};const fm=Symbol.for("PickItemInterceptor");let fk=class{constructor(){this.order=1}afterPickItem(i,e,t,n,s){return i.attribute.shadowRootIdx>0||!i.attribute.shadowRootIdx?this._pickItem(i,e,t,n,s):null}beforePickItem(i,e,t,n,s){return i.attribute.shadowRootIdx<0?this._pickItem(i,e,t,n,s):null}_pickItem(i,e,t,n,s){var r;if(!i.shadowRoot)return null;const{parentMatrix:a}=s||{};if(!a)return null;const o=e.pickContext;o.highPerformanceSave();const l=(r=Ye(i))===null||r===void 0?void 0:r[i.type],{shadowPickMode:c=l==null?void 0:l.shadowPickMode}=i.attribute,u=i.shadowRoot,h=ba.allocateByObj(a),d=new sn(h.a*t.x+h.c*t.y+h.e,h.b*t.x+h.d*t.y+h.f),p=e.pickGroup(u,d,h,n);return o.highPerformanceRestore(),!p.graphic&&p.group&&c==="full"&&(p.graphic=p.group),p}};fk=j5([Oe()],fk);let gk=class{constructor(){this.order=1}beforePickItem(i,e,t,n,s){const r=i.baseGraphic;if(r&&r.parent){const a=new sn(t.x,t.y),o=e.pickContext;o.highPerformanceSave();const l=r.parent.globalTransMatrix;l.transformPoint(a,a);const c=r.isContainer?e.pickGroup(r,a.clone(),l,n):e.pickItem(r,a.clone(),l,n);return o.highPerformanceRestore(),c}return null}};gk=j5([Oe()],gk);let mk=class{constructor(){this.order=1}beforePickItem(i,e,t,n,s){if(!i.in3dMode||n.in3dInterceptor)return null;const r=e.pickContext,a=i.stage;if(!r||!a)return null;if(n.in3dInterceptor=!0,r.save(),this.initCanvasCtx(r),r.camera=a.camera,i.isContainer){const o=qre(r,i,()=>e.pickGroup(i,t,s.parentMatrix,n),n);return r.camera=null,n.in3dInterceptor=!1,r.restore(),o}return r.restore(),null}initCanvasCtx(i){i.setTransformForCurrent()}};mk=j5([Oe()],mk);const Tet=new Ge((i,e,t)=>{t(Um)||(i(DV).toSelf(),i(Um).toService(DV)),i(mk).toSelf().inSingletonScope(),i(fm).toService(mk),i(fk).toSelf().inSingletonScope(),i(fm).toService(fk),i(gk).toSelf().inSingletonScope(),i(fm).toService(gk),Es(i,fm)}),Eet=new Ge(i=>{i(Fre).to(WD).inSingletonScope(),i(Bre).toConstantValue(Ae)}),e1=Symbol.for("AutoEnablePlugins"),cae=Symbol.for("PluginService");var Pet=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},Oet=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},_U=function(i,e){return function(t,n){e(t,n,i)}};let oF=class{constructor(i){this.autoEnablePlugins=i,this.onStartupFinishedPlugin=[],this.onRegisterPlugin=[],this.actived=!1}active(i,e){this.stage=i,this.actived=!0;const{pluginList:t}=e;t&&We.isBound(e1)&&this.autoEnablePlugins.getContributions().forEach(n=>{t.includes(n.name)&&this.register(n)})}findPluginsByName(i){const e=[];return this.onStartupFinishedPlugin.forEach(t=>{t.name===i&&e.push(t)}),this.onRegisterPlugin.forEach(t=>{t.name===i&&e.push(t)}),e}register(i){i.activeEvent==="onStartupFinished"?this.onStartupFinishedPlugin.push(i):i.activeEvent==="onRegister"&&(this.onRegisterPlugin.push(i),i.activate(this))}unRegister(i){i.activeEvent==="onStartupFinished"?this.onStartupFinishedPlugin.splice(this.onStartupFinishedPlugin.indexOf(i),1):i.activeEvent==="onRegister"&&this.onRegisterPlugin.splice(this.onStartupFinishedPlugin.indexOf(i),1),i.deactivate(this)}release(...i){this.onStartupFinishedPlugin.forEach(e=>{e.deactivate(this)}),this.onStartupFinishedPlugin=[],this.onRegisterPlugin.forEach(e=>{e.deactivate(this)}),this.onRegisterPlugin=[]}};oF=Pet([Oe(),_U(0,rt($n)),_U(0,rs(e1)),Oet("design:paramtypes",[Object])],oF);const Met=new Ge(i=>{i(cae).to(oF),DYe(i,e1)}),Iet=new Ge(i=>{Es(i,LP)}),Ret=new Ge(i=>{i(kD).to(TD).inSingletonScope(),Es(i,kD)});var Let=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},Det=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let yk=class{constructor(){this.type="static",this.offscreen=!1,this.global=ue.global}setDpr(i){this.canvas.dpr=i}init(i,e,t){if(this.layer=i,this.window=e,t.main)this.main=!0,this.context=e.getContext(),this.canvas=this.context.getCanvas();else{let n;this.main=!1,t.canvasId&&(n=this.global.getElementById(t.canvasId)),n||(n=this.global.createCanvas({width:e.width,height:e.height})),n.style&&(n.style["pointer-events"]="none");const s=e.getContext().getCanvas().nativeCanvas,r=ED({nativeCanvas:n,width:e.width,height:e.height,dpr:e.dpr,id:t.canvasId,canvasControled:!0,container:e.getContainer(),x:s.offsetLeft,y:s.offsetTop});r.applyPosition(),this.canvas=r,this.context=r.getContext()}}resize(i,e){this.canvas.resize(i,e)}resizeView(i,e){}render(i,e,t){var n;if(!this.main){const s=this.window.getContext().getCanvas().nativeCanvas;!s||this.canvas.x===s.offsetLeft&&this.canvas.y===s.offsetTop||(this.canvas.x=s.offsetLeft,this.canvas.y=s.offsetTop,this.canvas.applyPosition())}e.renderService.render(i,Object.assign(Object.assign({context:this.context,clear:(n=e.background)!==null&&n!==void 0?n:"#ffffff"},e),t))}merge(i){i.forEach(e=>{const t=e.getContext().canvas.nativeCanvas;this.context.drawImage(t,0,0)})}prepare(i,e){}drawTo(i,e,t){var n;const s=i.getContext();t.renderService.render(e,Object.assign(Object.assign({context:s},t),{clear:t.clear?(n=t.background)!==null&&n!==void 0?n:"#fff":void 0}))}getContext(){return this.context}release(){this.canvas.release()}};yk=Let([Oe(),Det("design:paramtypes",[])],yk);const Fet=new Ge(i=>{i(yk).toSelf(),i(zre).toService(yk)});function Bet(i){i.load(Iet),i.load(Ret),i.load(Fet)}var jet=function(i,e,t,n){return new(t||(t=Promise))(function(s,r){function a(c){try{l(n.next(c))}catch(u){r(u)}}function o(c){try{l(n.throw(c))}catch(u){r(u)}}function l(c){var u;c.done?s(c.value):(u=c.value,u instanceof t?u:new t(function(h){h(u)})).then(a,o)}l((n=n.apply(i,e||[])).next())})};function uae(i,e,t){const n={},s=[];return i.forEachChildren(r=>{const{zIndex:a=e}=r.attribute;n[a]?n[a].push(r):(n[a]=[r],s.push(a))},t),s.sort((r,a)=>t?a-r:r-a),{childMap:n,zIdxArray:s}}function hae(i,e,t,n=!1,s=!1){let r=!1;if(s)r=!0;else{let a;i.forEachChildren((o,l)=>{const{zIndex:c=e}=o.attribute;if(l===0)a=c;else if(a!==c)return r=!0,!0;return!1},n)}if(r){const{childMap:a,zIdxArray:o}=uae(i,e,n);let l=!1;for(let c=0;c<o.length&&!l;c++){const u=a[o[c]];s&&u.sort((h,d)=>{var p,f;return(n?-1:1)*(((p=d.attribute.z)!==null&&p!==void 0?p:0)-((f=h.attribute.z)!==null&&f!==void 0?f:0))});for(let h=0;h<u.length;h++)if(t(u[h],h)){l=!0;break}}}else i.forEachChildren(t,n)}function vU(i,e,t,n=!1){return jet(this,void 0,void 0,function*(){yield i.forEachChildrenAsync(t,n)})}function Net(i,e,t,n=!1){let s=!1;i.forEachChildren((o,l)=>{const{zIndex:c=t}=o.attribute;if(l!==0){if(c!==void 0)return s=!0,!0}return!1},n);let r=null,a=!1;if(s){const{childMap:o,zIdxArray:l}=uae(i,t,n);let c=!1;for(let u=0;u<l.length&&!c;u++){const h=o[l[u]];for(let d=0;d<h.length;d++){if(a){c=!0,r=h[d];break}h[d]._uid!==e||(a=!0)}}}else i.forEachChildren(o=>a?(r=o,!0):(o._uid===e&&(a=!0),!1),n);return r}var $et=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},zet=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},CI=function(i,e){return function(t,n){e(t,n,i)}};let _k=class{constructor(i,e){this.contributions=i,this.drawItemInterceptorContributions=e,this.currentRenderMap=new Map,this.defaultRenderMap=new Map,this.styleRenderMap=new Map,this.dirtyBounds=new nr,this.backupDirtyBounds=new nr,this.global=ue.global,this.layerService=ue.layerService,this.init()}init(){this.contributions.forEach(i=>{if(i.style){const e=this.styleRenderMap.get(i.style)||new Map;e.set(i.numberType,i),this.styleRenderMap.set(i.style,e)}else this.defaultRenderMap.set(i.numberType,i)}),this.InterceptorContributions=this.drawItemInterceptorContributions.getContributions().sort((i,e)=>i.order-e.order)}prepareForDraw(i,e){e.updateBounds?this.useDirtyBounds=!0:this.useDirtyBounds=!e.stage.params.optimize.disableCheckGraphicWidthOutRange}draw(i,e){this.prepareForDraw(i,e),e.drawContribution=this,this.currentRenderMap=this.styleRenderMap.get(e.renderStyle)||this.defaultRenderMap,this.currentRenderService=i;const{context:t,stage:n,viewBox:s,transMatrix:r}=e;if(!t)return;const a=this.dirtyBounds.setValue(0,0,s.width(),s.height());if(n.dirtyBounds&&!n.dirtyBounds.empty()){const l=nse(a,n.dirtyBounds,!1);a.x1=Math.floor(l.x1),a.y1=Math.floor(l.y1),a.x2=Math.ceil(l.x2),a.y2=Math.ceil(l.y2)}const o=t.dpr%1;(o||o!==.5)&&(a.x1=Math.floor(a.x1*t.dpr)/t.dpr,a.y1=Math.floor(a.y1*t.dpr)/t.dpr,a.x2=Math.ceil(a.x2*t.dpr)/t.dpr,a.y2=Math.ceil(a.y2*t.dpr)/t.dpr),this.backupDirtyBounds.copy(a),t.inuse=!0,t.setClearMatrix(r.a,r.b,r.c,r.d,r.e,r.f),t.clearMatrix(),t.setTransformForCurrent(!0),t.translate(s.x1,s.y1,!0),t.beginPath(),t.rect(a.x1,a.y1,a.width(),a.height()),t.clip(),n.camera&&(this.dirtyBounds.setValue(-1/0,-1/0,1/0,1/0),this.backupDirtyBounds.setValue(-1/0,-1/0,1/0,1/0)),this.clearScreen(i,t,e),t.save(),i.renderTreeRoots.sort((l,c)=>{var u,h;return((u=l.attribute.zIndex)!==null&&u!==void 0?u:Ji.zIndex)-((h=c.attribute.zIndex)!==null&&h!==void 0?h:Ji.zIndex)}).forEach(l=>{l.isContainer?this.renderGroup(l,e,ba.allocate(1,0,0,1,0,0)):this.renderItem(l,e)}),t.restore(),t.setClearMatrix(1,0,0,1,0,0),t.inuse=!1,t.draw()}doRegister(){throw new Error("")}_findNextGraphic(i){let e=i.parent,t=i._uid;for(;e;){const n=Net(e,t,Ji.zIndex);if(n)return n;t=e._uid,e=e.parent}return null}renderGroup(i,e,t,n){if(e.break||i.attribute.visibleAll===!1)return;if(i.incremental&&(e.startAtId==null||e.startAtId===i._uid))return e.break=!0,void this._increaseRender(i,e);if(this.useDirtyBounds&&!Nb(i.AABBBounds,this.dirtyBounds,!1))return;let s,r=t;if(this.useDirtyBounds){s=tk.allocateByObj(this.dirtyBounds);const a=i.transMatrix;r=ba.allocateByObj(t).multiply(a.a,a.b,a.c,a.d,a.e,a.f),this.dirtyBounds.copy(this.backupDirtyBounds).transformWithMatrix(r.getInverse())}this.renderItem(i,e,{drawingCb:()=>{var a;n?i.forEachChildren(o=>{e.break||(o.isContainer?this.renderGroup(o,e,r):this.renderItem(o,e))}):hae(i,Ji.zIndex,o=>{e.break||(o.isContainer?this.renderGroup(o,e,r):this.renderItem(o,e))},!1,!!(!((a=e.context)===null||a===void 0)&&a.camera))}}),this.useDirtyBounds&&(this.dirtyBounds.copy(s),tk.free(s),ba.free(r))}_increaseRender(i,e){const{layer:t,stage:n}=e,{subLayers:s}=t;let r=s.get(i._uid);r||(r={layer:this.layerService.createLayer(n),zIndex:s.size,group:i},s.set(i._uid,r));const a=r.layer.getNativeHandler().getContext(),o=r.drawContribution||We.get(Yre);o.dirtyBounds.setValue(-1/0,-1/0,1/0,1/0),o.backupDirtyBounds.setValue(-1/0,-1/0,1/0,1/0),o.draw(this.currentRenderService,Object.assign(Object.assign({},e),{drawContribution:o,clear:"transparent",layer:r.layer,context:a,startAtId:i._uid,break:!1})),r.drawContribution=o;const l=this._findNextGraphic(i);if(l)if(l.isContainer&&l.incremental)this._increaseRender(l,e);else{let c=s.get(l._uid);c||(c={layer:this.layerService.createLayer(n),zIndex:s.size},s.set(l._uid,c));const u=c.layer.getNativeHandler().getContext();this.draw(this.currentRenderService,Object.assign(Object.assign({},e),{drawContribution:o,clear:"transparent",layer:c.layer,context:u,startAtId:l._uid,break:!1}))}}getRenderContribution(i){let e;return e||(e=this.selectRenderByNumberType(i.numberType,i)),e||(e=this.selectRenderByType(i.type)),e}renderItem(i,e,t){if(this.InterceptorContributions.length)for(let o=0;o<this.InterceptorContributions.length;o++){const l=this.InterceptorContributions[o];if(l.beforeDrawItem&&l.beforeDrawItem(i,this.currentRenderService,e,this,t))return}const n=this.getRenderContribution(i);if(!n)return;let s,r=!1;if(i.parent){const{scrollX:o=0,scrollY:l=0}=i.parent.attribute;if(r=!(!o&&!l),r){s=this.dirtyBounds.clone();const c=i.globalTransMatrix.getInverse();this.dirtyBounds.copy(this.backupDirtyBounds).transformWithMatrix(c),this.dirtyBounds.translate(-o,-l)}}if(this.useDirtyBounds&&!i.isContainer&&!Nb(i.AABBBounds,this.dirtyBounds,!1))return void(r&&this.dirtyBounds.copy(s));const a=e.startAtId!=null&&i._uid!==e.startAtId;if(i._uid===e.startAtId&&(e.startAtId=null),t&&(t.skipDraw=a),a?i.isContainer&&n.draw(i,this.currentRenderService,e,t):n.draw(i,this.currentRenderService,e,t),r&&this.dirtyBounds.copy(s),this.InterceptorContributions.length)for(let o=0;o<this.InterceptorContributions.length;o++){const l=this.InterceptorContributions[o];if(l.afterDrawItem&&l.afterDrawItem(i,this.currentRenderService,e,this))return}}selectRenderByType(i){return ii.getInstance().warn(""),null}selectRenderByNumberType(i,e){let t;if(e.attribute.renderStyle){const n=this.styleRenderMap.get(e.attribute.renderStyle);t=n&&n.get(i)}return t||this.currentRenderMap.get(i)||this.defaultRenderMap.get(i)}clearScreen(i,e,t){var n,s;const{clear:r,viewBox:a}=t,o=a.width(),l=a.height();if(r){e.clearRect(0,0,o,l);const c=(n=i.drawParams)===null||n===void 0?void 0:n.stage;if(c&&(e.globalAlpha=(s=c.attribute.opacity)!==null&&s!==void 0?s:1),c&&c.backgroundImg&&c.resources){const u=c.resources.get(r);u&&u.state==="success"&&u.data&&e.drawImage(u.data,0,0,o,l)}else e.fillStyle=GD(e,r,{AABBBounds:{x1:0,y1:0,x2:0+o,y2:0+l}},0,0),e.fillRect(0,0,o,l)}}afterDraw(i,e){}};_k=$et([Oe(),CI(0,cre(as)),CI(1,rt($n)),CI(1,rs(hk)),zet("design:paramtypes",[Array,Object])],_k);var Het=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};let vk=class extends Wb{constructor(){super(...arguments),this.numberType=Ox}drawShape(i,e,t,n,s,r,a,o){if(i.incremental&&s.multiGraphicOptions){const{startAtIdx:l,length:c}=s.multiGraphicOptions,{segments:u=[]}=i.attribute;if(l>u.length)return;const h=Ye(i).line,{fill:d=h.fill,stroke:p=h.stroke,opacity:f=h.opacity,fillOpacity:g=h.fillOpacity,strokeOpacity:m=h.strokeOpacity,lineWidth:y=h.lineWidth,visible:b=h.visible}=i.attribute,x=_f(f,g,d),S=T5(f,m),C=Zf(d),w=E0(p,y);if(!i.valid||!b||!C&&!w||!(x||S||a||o))return;const{context:A}=s;for(let T=l;T<l+c;T++)this.drawIncreaseSegment(i,A,u[T-1],u[T],i.attribute.segments[T],[h,i.attribute],t,n)}else super.drawShape(i,e,t,n,s,r,a,o)}drawIncreaseSegment(i,e,t,n,s,r,a,o){n&&(e.beginPath(),MJe(e.nativeContext,t,n,{offsetX:a,offsetY:o}),e.setShadowBlendStyle&&e.setShadowBlendStyle(i,s,r),e.setStrokeStyle(i,s,a,o,r),e.stroke())}};vk=Het([Oe()],vk);var Vet=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};let bk=class extends Gb{constructor(){super(...arguments),this.numberType=Px}drawShape(i,e,t,n,s,r,a){if(i.incremental&&s.multiGraphicOptions){const{startAtIdx:o,length:l}=s.multiGraphicOptions,{segments:c=[]}=i.attribute;if(o>c.length)return;const u=Ye(i).area,{fill:h=u.fill,fillOpacity:d=u.fillOpacity,opacity:p=u.opacity,visible:f=u.visible}=i.attribute,g=_f(p,d,h),m=Zf(h);if(!i.valid||!f||!m||!g&&!a)return;for(let y=o;y<o+l;y++)this.drawIncreaseSegment(i,e,c[y-1],c[y],i.attribute.segments[y],[u,i.attribute],t,n)}else super.drawShape(i,e,t,n,s,r,a)}drawIncreaseSegment(i,e,t,n,s,r,a,o){n&&(e.beginPath(),IJe(e.camera?e:e.nativeContext,t,n,{offsetX:a,offsetY:o}),e.setShadowBlendStyle&&e.setShadowBlendStyle(i,s,r),e.setCommonStyle(i,s,a,o,r),e.fill())}};bk=Vet([Oe()],bk);var gm,Uet=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},Wet=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},f_=function(i,e){return function(t,n){e(t,n,i)}},Nl=function(i,e,t,n){return new(t||(t=Promise))(function(s,r){function a(c){try{l(n.next(c))}catch(u){r(u)}}function o(c){try{l(n.throw(c))}catch(u){r(u)}}function l(c){var u;c.done?s(c.value):(u=c.value,u instanceof t?u:new t(function(h){h(u)})).then(a,o)}l((n=n.apply(i,e||[])).next())})};(function(i){i[i.NORMAL=0]="NORMAL",i[i.STOP=1]="STOP"})(gm||(gm={}));let lF=class extends _k{constructor(i,e,t,n){super(i,n),this.contributions=i,this.lineRender=e,this.areaRender=t,this.drawItemInterceptorContributions=n,this.rendering=!1,this.currFrameStartAt=0,this.currentIdx=0,this.status=gm.NORMAL,this.checkingForDrawPromise=null,this.hooks={completeDraw:new ga([])},this.defaultRenderMap.set(this.lineRender.numberType,this.lineRender),this.defaultRenderMap.set(this.areaRender.numberType,this.areaRender)}draw(i,e){return Nl(this,void 0,void 0,function*(){if(this.checkingForDrawPromise)return;this.lastRenderService=i,this.lastDrawContext=e,this.checkingForDrawPromise=this.checkForDraw(e);const t=yield this.checkingForDrawPromise;if(this.checkingForDrawPromise=null,t)return;this.currentRenderService=i;const{context:n,viewBox:s}=e;n&&(n.inuse=!0,n.clearMatrix(),n.setTransformForCurrent(!0),n.save(),e.restartIncremental&&this.clearScreen(this.currentRenderService,n,e),n.translate(s.x1,s.y1,!0),n.save(),i.renderTreeRoots.sort((r,a)=>{var o,l;return((o=r.attribute.zIndex)!==null&&o!==void 0?o:Ji.zIndex)-((l=a.attribute.zIndex)!==null&&l!==void 0?l:Ji.zIndex)}).forEach(r=>{this.renderGroup(r,e)}),this.hooks.completeDraw.tap("top-draw",()=>{n.restore(),n.restore(),n.draw(),n.inuse=!1,this.rendering=!1}))})}_increaseRender(i,e){return Nl(this,void 0,void 0,function*(){this.rendering=!0,yield this._renderIncrementalGroup(i,e)})}_renderIncrementalGroup(i,e){return Nl(this,void 0,void 0,function*(){this.count=i.count,yield new Promise(t=>{this.renderItem(i,e,{drawingCb:()=>Nl(this,void 0,void 0,function*(){if(i.count!==2)yield vU(i,Ji.zIndex,(n,s)=>{if(this.status===gm.STOP)return!0;if(n.isContainer||s<this.currentIdx)return!1;const r=this.currFrameStartAt+i.incremental;return s<r&&(this.currentIdx=s+1,this.renderItem(n,e)),s===r-1&&(this.currFrameStartAt=this.currentIdx,this.waitToNextFrame())}),t(!1);else{const n=i.getChildAt(0);if(n.incremental&&n.attribute.segments)for(n.incrementalAt||(n.incrementalAt=0);n.incrementalAt<n.attribute.segments.length;)e.multiGraphicOptions={startAtIdx:n.incrementalAt,length:n.incremental},this.renderItem(n,e),n.incrementalAt+=n.incremental,yield this.waitToNextFrame();else this.renderItem(n,e);t(!1)}})})}),this.hooks.completeDraw.call()})}waitToNextFrame(){return Nl(this,void 0,void 0,function*(){return new Promise(i=>{this.global.getRequestAnimationFrame()(()=>{i(!1)})})})}checkForDraw(i){return Nl(this,void 0,void 0,function*(){let e=this.rendering;return i.restartIncremental&&(e=!1,yield this.forceStop(),this.resetToInit()),e})}forceStop(){return Nl(this,void 0,void 0,function*(){this.rendering&&(this.status=gm.STOP,yield new Promise(i=>{this.hooks.completeDraw.tap("stopCb",()=>{this.status=gm.NORMAL,this.hooks.completeDraw.taps=this.hooks.completeDraw.taps.filter(e=>e.name!=="stopCb"),i(!1)})}))})}resetToInit(){this.currFrameStartAt=0,this.currentIdx=0}renderGroup(i,e){return Nl(this,void 0,void 0,function*(){if(!e.break&&i.attribute.visibleAll!==!1)return i.incremental&&e.startAtId===i._uid?(yield this._increaseRender(i,e),void(e.break=!0)):void(yield new Promise(t=>{this.renderItem(i,e,{drawingCb:()=>Nl(this,void 0,void 0,function*(){yield vU(i,Ji.zIndex,n=>Nl(this,void 0,void 0,function*(){e.break||n.isContainer&&(yield this.renderGroup(n,e))})),t(!1)})})}))})}};lF=Uet([Oe(),f_(0,cre(as)),f_(1,rt(vk)),f_(2,rt(bk)),f_(3,rt($n)),f_(3,rs(hk)),Wet("design:paramtypes",[Array,Object,Object,Object])],lF);const Get=new Ge(i=>{i(Mx).toSelf().inSingletonScope(),i(I5).toSelf().inSingletonScope(),i(R5).to(_k),i(Yre).to(lF),i(MV).to(qD).inSingletonScope(),i(as).toService(MV),Es(i,Vre),i(ko).toSelf().inSingletonScope(),Es(i,P5),Es(i,as),i(dk).toSelf().inSingletonScope(),i(hk).toService(dk),Es(i,hk)});function Ket(i){i.load(Get)}function xk(){xk.__loaded||(xk.__loaded=!0,We.load(LZe),We.load(Eet),We.load(_Qe),We.load(Tet),We.load(Met),Bet(We),Ket(We))}xk.__loaded=!1,xk();const st=We.get(h5);ue.global=st;const Xet=We.get($re);ue.graphicUtil=Xet;const Yet=We.get(Nre);ue.transformUtil=Yet;const qet=We.get(Fre);ue.graphicService=qet;const Zet=We.get(A5);ue.layerService=Zet;class Jet{constructor(){this.name="AutoRenderPlugin",this.activeEvent="onRegister",this._uid=zn.GenAutoIncrementId(),this.key=this.name+this._uid,this.handleChange=e=>{e.glyphHost&&(e=e.glyphHost),e.stage===this.pluginService.stage&&e.stage!=null&&e.stage.renderNextFrame()}}activate(e){this.pluginService=e,ue.graphicService.hooks.onAttributeUpdate.tap(this.key,this.handleChange),ue.graphicService.hooks.onSetStage.tap(this.key,this.handleChange),ue.graphicService.hooks.onRemove.tap(this.key,this.handleChange)}deactivate(e){const t=n=>n.filter(s=>s.name!==this.key);ue.graphicService.hooks.onAttributeUpdate.taps=t(ue.graphicService.hooks.onAttributeUpdate.taps),ue.graphicService.hooks.onSetStage.taps=t(ue.graphicService.hooks.onSetStage.taps),ue.graphicService.hooks.onRemove.taps=t(ue.graphicService.hooks.onRemove.taps)}}class Qet{constructor(){this.name="IncrementalAutoRenderPlugin",this.activeEvent="onRegister",this.nextFrameRenderGroupSet=new Set,this.willNextFrameRender=!1,this.nextUserParams={},this._uid=zn.GenAutoIncrementId(),this.key=this.name+this._uid}activate(e){this.pluginService=e,ue.graphicService.hooks.onAddIncremental.tap(this.key,(t,n,s)=>{t.glyphHost&&(t=t.glyphHost),t.stage===e.stage&&t.stage!=null&&(this.nextUserParams.startAtId=n._uid,this.renderNextFrame(n))}),ue.graphicService.hooks.onClearIncremental.tap(this.key,(t,n)=>{t.stage===e.stage&&t.stage!=null&&(this.nextUserParams.startAtId=t._uid,this.nextUserParams.restartIncremental=!0,this.renderNextFrame(t))})}deactivate(e){ue.graphicService.hooks.onAddIncremental.taps=ue.graphicService.hooks.onAddIncremental.taps.filter(t=>t.name!==this.key),ue.graphicService.hooks.onClearIncremental.taps=ue.graphicService.hooks.onClearIncremental.taps.filter(t=>t.name!==this.key)}renderNextFrame(e){this.nextFrameRenderGroupSet.add(e),this.willNextFrameRender||(this.willNextFrameRender=!0,ue.global.getRequestAnimationFrame()(()=>{this._doRenderInThisFrame(),this.willNextFrameRender=!1}))}_doRenderInThisFrame(){const e=this.pluginService.stage;this.nextFrameRenderGroupSet.size&&(this.nextFrameRenderGroupSet.forEach(t=>{const n=t.layer;if(!n||!t.layer.subLayers)return;const s=t.layer.subLayers.get(t._uid);s&&s.drawContribution&&s.drawContribution.draw(e.renderService,Object.assign({stage:e,layer:n,viewBox:e.window.getViewBox(),transMatrix:e.window.getViewBoxTransform(),clear:"transparent",renderService:e.renderService,updateBounds:!1,startAtId:t._uid,context:s.layer.getNativeHandler().getContext()},this.nextUserParams))}),this.nextUserParams={},this.nextFrameRenderGroupSet.clear())}}const bU=new Qi;class ett{constructor(){this.name="DirtyBoundsPlugin",this.activeEvent="onRegister",this._uid=zn.GenAutoIncrementId(),this.key=this.name+this._uid}activate(e){this.pluginService=e,e.stage.hooks.afterRender.tap(this.key,t=>{t&&t===this.pluginService.stage&&t.dirtyBounds.clear()}),ue.graphicService.hooks.beforeUpdateAABBBounds.tap(this.key,(t,n,s,r)=>{t.glyphHost&&(t=t.glyphHost),n&&n===this.pluginService.stage&&n.renderCount&&(t.isContainer&&!t.shouldSelfChangeUpdateAABBBounds()||s&&(bU.setValue(r.x1,r.y1,r.x2,r.y2),n.dirty(bU,t.parent&&t.parent.globalTransMatrix)))}),ue.graphicService.hooks.afterUpdateAABBBounds.tap(this.key,(t,n,s,r,a)=>{n&&n===this.pluginService.stage&&n.renderCount&&(t.isContainer&&!a||n.dirty(r.globalAABBBounds))}),ue.graphicService.hooks.onRemove.tap(this.key,t=>{const n=t.stage;n&&n===this.pluginService.stage&&n.renderCount&&n&&n.dirty(t.globalAABBBounds)})}deactivate(e){ue.graphicService.hooks.beforeUpdateAABBBounds.taps=ue.graphicService.hooks.beforeUpdateAABBBounds.taps.filter(t=>t.name!==this.key),ue.graphicService.hooks.afterUpdateAABBBounds.taps=ue.graphicService.hooks.afterUpdateAABBBounds.taps.filter(t=>t.name!==this.key),e.stage.hooks.afterRender.taps=e.stage.hooks.afterRender.taps.filter(t=>t.name!==this.key),ue.graphicService.hooks.onRemove.taps=ue.graphicService.hooks.onRemove.taps.filter(t=>t.name!==this.key)}}const N5=new qqe;N5.addTimeline(Ore);N5.setFPS(60);let Bg;function ttt(){if(Bg==null)try{const i=document.createElement("canvas"),e=i.getContext("2d");Bg=!!(window&&i.getBoundingClientRect&&requestAnimationFrame&&window.devicePixelRatio&&e&&e.isPointInPath&&e.isPointInStroke),Bg&&(Bg=!!document.createElement)}catch{Bg=!1}}function $5(){ttt();const i=ue.global&&ue.global.env;return i?i==="browser":Bg}let ro=class cF{static registerPlugin(e,t){cF._pluginClasses[e]=t}static getPlugin(e){return cF._pluginClasses[e]}};ro._pluginClasses={};const xU={WIDTH:500,HEIGHT:500,X:0,Y:0,BACKGROUND:"white"};class itt extends T0{set viewBox(e){this.window.setViewBox(e)}get viewBox(){return this.window.getViewBox()}get x(){return this.window.getViewBox().x1}set x(e){const t=this.window.getViewBox();t.translate(e-t.x1,0),this.window.setViewBox(t)}get y(){return this.window.getViewBox().y1}set y(e){const t=this.window.getViewBox();t.translate(0,e-t.y1),this.window.setViewBox(t)}get width(){return this.window.width}set width(e){this.resize(e,this.height)}get viewWidth(){return this.window.getViewBox().width()}set viewWidth(e){this.resizeView(e,this.viewHeight)}get viewHeight(){return this.window.getViewBox().height()}set viewHeight(e){this.resizeView(this.viewWidth,e)}get height(){return this.window.height}set height(e){this.resize(this.width,e)}get dpr(){return this.window.dpr}set dpr(e){this.setDpr(e)}get background(){var e;return(e=this._background)!==null&&e!==void 0?e:xU.BACKGROUND}set background(e){this._background=e}get defaultLayer(){return this.at(0)}get eventSystem(){return this._eventSystem}constructor(e={}){var t;super({}),this._onVisibleChange=n=>{if(!(this._skipRender<0))if(n){if(this.dirtyBounds){const s=this.window.getViewBox();this.dirtyBounds.setValue(s.x1,s.y1,s.width(),s.height())}this._skipRender>1&&this.renderNextFrame(),this._skipRender=0}else this._skipRender=1},this.beforeRender=n=>{this._beforeRender&&this._beforeRender(n)},this.afterRender=n=>{this.renderCount++,this._afterRender&&this._afterRender(n),this._afterNextRenderCbs&&this._afterNextRenderCbs.forEach(s=>s(n)),this._afterNextRenderCbs=null},this.params=e,this.theme=new Ub,this.hooks={beforeRender:new ga(["stage"]),afterRender:new ga(["stage"])},this.global=ue.global,!this.global.env&&$5()&&this.global.setEnv("browser"),this.window=We.get(zA),this.renderService=We.get(Zre),this.pluginService=We.get(cae),this.layerService=We.get(A5),this.pluginService.active(this,e),this.window.create({width:e.width,height:e.height,viewBox:e.viewBox,container:e.container,dpr:e.dpr||this.global.devicePixelRatio,canvasControled:e.canvasControled!==!1,title:e.title||"",canvas:e.canvas}),this.state="normal",this.renderCount=0,this.tryInitEventSystem(),this._background=(t=e.background)!==null&&t!==void 0?t:xU.BACKGROUND,this.appendChild(this.layerService.createLayer(this,{main:!0})),this.nextFrameRenderLayerSet=new Set,this.willNextFrameRender=!1,this.stage=this,this.renderStyle=e.renderStyle,e.autoRender&&this.enableAutoRender(),e.disableDirtyBounds===!1&&this.enableDirtyBounds(),e.enableHtmlAttribute&&this.enableHtmlAttribute(e.enableHtmlAttribute),e.ReactDOM&&this.enableReactAttribute(e.ReactDOM),e.enableLayout&&this.enableLayout(),this.hooks.beforeRender.tap("constructor",this.beforeRender),this.hooks.afterRender.tap("constructor",this.afterRender),this._beforeRender=e.beforeRender,this._afterRender=e.afterRender,this.ticker=e.ticker||N5,this.supportInteractiveLayer=e.interactiveLayer!==!1,this.timeline=new Pre,this.ticker.addTimeline(this.timeline),this.timeline.pause(),e.optimize||(e.optimize={}),this.optmize(e.optimize),e.background&&be(this._background)&&this._background.includes("/")&&this.setAttributes({background:this._background})}pauseRender(e=-1){this._skipRender=e}resumeRender(){this._skipRender=0}tryInitEventSystem(){this.global.supportEvent&&!this._eventSystem&&(this._eventSystem=new Yqe(Object.assign({targetElement:this.window,resolution:this.window.dpr||this.global.devicePixelRatio,rootNode:this,global:this.global,supportsPointerEvents:this.params.supportsPointerEvents,supportsTouchEvents:this.params.supportsTouchEvents},this.params.event)))}preventRender(e){e?this._skipRender=-1/0:this.params.optimize.skipRenderWithOutRange!==!1?this._skipRender=this.window.isVisible()?0:1:this._skipRender=0}optmize(e){this.optmizeRender(e.skipRenderWithOutRange),this.params.optimize=e}optmizeRender(e=!1){e&&(this._skipRender=this._skipRender<0?this._skipRender:this.window.isVisible()?0:1,this.window.onVisibleChange(this._onVisibleChange))}getTimeline(){return this.timeline}get3dOptions(e){const{center:t={x:this.width/2,y:this.height/2,z:0,dx:0,dy:0,dz:0},light:n={},alpha:s=0,beta:r=0,camera:a,fieldRatio:o=1,fieldDepth:l}=e;return Object.assign(Object.assign({},e),{center:t,light:n,alpha:s,beta:r,camera:a,fieldRatio:o,fieldDepth:l})}set3dOptions(e){var t,n,s,r,a,o;this.option3d=e;const l=this.get3dOptions(e),{light:c,center:u,camera:h,alpha:d,beta:p,fieldRatio:f,fieldDepth:g}=l,{dir:m=[1,1,-1],color:y="white",ambient:b}=c,x=((t=u.x)!==null&&t!==void 0?t:this.width/2)+((n=u.dx)!==null&&n!==void 0?n:0),S=((s=u.y)!==null&&s!==void 0?s:this.height/2)+((r=u.dy)!==null&&r!==void 0?r:0),C=[x,S,((a=u.z)!==null&&a!==void 0?a:0)+((o=u.dz)!==null&&o!==void 0?o:0)];let w=0,A=0,T=0;h||(w=Math.sin(d)+x,A=Math.sin(p)+S,T=Math.cos(d)*Math.cos(p)*1);const E=ro.getPlugin("DirectionalLight");E&&(this.light=new E(m,y,b));const P={left:0,right:this.width,top:0,bottom:this.height,fieldRatio:f,fieldDepth:g,viewParams:{pos:[w,A,T],center:C,up:[0,1,0]}};if(this.camera)this.camera.params=P;else{const O=ro.getPlugin("OrthoCamera");O&&(this.camera=new O(P))}e.enableView3dTransform&&this.enableView3dTransform()}setBeforeRender(e){this._beforeRender=e}setAfterRender(e){this._afterRender=e}afterNextRender(e){this._afterNextRenderCbs||(this._afterNextRenderCbs=[]),this._afterNextRenderCbs.push(e)}enableView3dTransform(){if(this.view3dTranform)return;this.view3dTranform=!0;const e=ro.getPlugin("ViewTransform3dPlugin");e&&this.pluginService.register(new e)}disableView3dTranform(){this.view3dTranform&&(this.view3dTranform=!1,this.pluginService.findPluginsByName("ViewTransform3dPlugin").forEach(e=>{this.pluginService.unRegister(e)}))}enableAutoRender(){this.autoRender||(this.autoRender=!0,this.pluginService.register(new Jet))}disableAutoRender(){this.autoRender&&(this.autoRender=!1,this.pluginService.findPluginsByName("AutoRenderPlugin").forEach(e=>{this.pluginService.unRegister(e)}))}enableIncrementalAutoRender(){this.increaseAutoRender||(this.increaseAutoRender=!0,this.pluginService.register(new Qet))}disableIncrementalAutoRender(){this.increaseAutoRender&&(this.increaseAutoRender=!1,this.pluginService.findPluginsByName("IncrementalAutoRenderPlugin").forEach(e=>{this.pluginService.unRegister(e)}))}enableDirtyBounds(){if(this.dirtyBounds)return;this.dirtyBounds=new nr;let e=this.pluginService.findPluginsByName("DirtyBoundsPlugin")[0];e?e.activate(this.pluginService):(e=new ett,this.pluginService.register(e))}disableDirtyBounds(){this.dirtyBounds&&(this.dirtyBounds=null,this.pluginService.findPluginsByName("DirtyBoundsPlugin").forEach(e=>{this.pluginService.unRegister(e)}))}enableLayout(){if(this._enableLayout)return;this._enableLayout=!0;const e=ro.getPlugin("FlexLayoutPlugin");e&&this.pluginService.register(new e)}disableLayout(){this._enableLayout&&(this._enableLayout=!1,this.pluginService.findPluginsByName("FlexLayoutPlugin").forEach(e=>{this.pluginService.unRegister(e)}))}enableHtmlAttribute(e){if(this.htmlAttribute)return;const t=ro.getPlugin("HtmlAttributePlugin");t&&(this.htmlAttribute=e,this.pluginService.register(new t))}disableHtmlAttribute(){this.htmlAttribute&&(this.htmlAttribute=!1,this.pluginService.findPluginsByName("HtmlAttributePlugin").forEach(e=>{this.pluginService.unRegister(e)}))}enableReactAttribute(e){if(this.reactAttribute)return;const t=ro.getPlugin("ReactAttributePlugin");t&&(this.reactAttribute=e,this.pluginService.register(new t))}disableReactAttribute(){this.reactAttribute&&(this.reactAttribute=!1,this.pluginService.findPluginsByName("ReactAttributePlugin").forEach(e=>{this.pluginService.unRegister(e)}))}getPluginsByName(e){return this.pluginService.findPluginsByName(e)}tryUpdateAABBBounds(){const e=this.window.getViewBox();return this._AABBBounds.setValue(e.x1,e.y1,e.x2,e.y2),this._AABBBounds}combineLayer(e,t){throw new Error("")}createLayer(e,t){if(this.releaseStatus==="released")return;const n=this.layerService.createLayer(this,{main:!1,layerMode:t,canvasId:e});return this.appendChild(n),n}sortLayer(e){const t=this.children;t.sort(e),this.removeAllChild(),t.forEach(n=>{this.appendChild(n)})}removeLayer(e){return this.removeChild(this.findChildByUid(e))}tryInitInteractiveLayer(){this.releaseStatus!=="released"&&this.supportInteractiveLayer&&!this.interactiveLayer&&(this.interactiveLayer=this.createLayer(),this.interactiveLayer.name="_builtin_interactive",this.interactiveLayer.attribute.pickable=!1,this.nextFrameRenderLayerSet.add(this.interactiveLayer))}clearViewBox(e){this.window.clearViewBox(e)}render(e,t){if(this.releaseStatus==="released")return;this.ticker.start(),this.timeline.resume();const n=this.state;this.state="rendering",this.layerService.prepareStageLayer(this),this._skipRender||(this.lastRenderparams=t,this.hooks.beforeRender.call(this),this._skipRender||(this.renderLayerList(this.children),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear()),this.hooks.afterRender.call(this)),this.state=n,this._skipRender&&this._skipRender++}combineLayersToWindow(){if(this.global.env==="harmony"){const e=this.window.getContext().nativeContext;this.forEachChildren((t,n)=>{if(n>0){const s=t.getNativeHandler().getContext().canvas.nativeCanvas.nativeCanvas._c.transferToImageBitmap();e.transferFromImageBitmap(s)}})}}renderNextFrame(e,t){this.nextFrameRenderLayerSet.size!==this.childrenCount&&(e||this).forEach(n=>{this.nextFrameRenderLayerSet.add(n)}),this.willNextFrameRender||(this.willNextFrameRender=!0,this.global.getRequestAnimationFrame()(()=>{this._doRenderInThisFrame(),this.willNextFrameRender=!1}))}_doRenderInThisFrame(){if(this.releaseStatus==="released")return;this.timeline.resume(),this.ticker.start();const e=this.state;this.state="rendering",this.layerService.prepareStageLayer(this),this.nextFrameRenderLayerSet.size&&!this._skipRender&&(this.hooks.beforeRender.call(this),this._skipRender||(this.renderLayerList(Array.from(this.nextFrameRenderLayerSet.values()),this.lastRenderparams||{}),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear()),this.hooks.afterRender.call(this)),this.state=e,this._skipRender&&this._skipRender++}renderLayerList(e,t){const n=[];for(let s=0;s<e.length;s++){let r=e[s];r.layerMode==="virtual"&&(r=r.getNativeHandler().mainHandler.layer),n.includes(r)||n.push(r)}n.forEach(s=>{s.renderCount>this.renderCount||(s.renderCount=this.renderCount+1,s===this.interactiveLayer&&this.dirtyBounds&&this.dirtyBounds.clear(),s.render({renderService:this.renderService,background:s===this.defaultLayer?this.background:void 0,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty()),viewBox:this.window.getViewBox(),transMatrix:this.window.getViewBoxTransform()},Object.assign({renderStyle:this.renderStyle},t)))}),this.interactiveLayer&&!e.includes(this.interactiveLayer)&&(this.dirtyBounds&&this.dirtyBounds.clear(),this.interactiveLayer.render({renderService:this.renderService,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty()),viewBox:this.window.getViewBox(),transMatrix:this.window.getViewBoxTransform()},Object.assign({renderStyle:this.renderStyle},t)))}resizeWindow(e,t,n=!0){this.window.resize(e,t),n&&this.render()}resize(e,t,n=!0){this.releaseStatus!=="released"&&(this.window.hasSubView()||this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+e,this.viewBox.y1+t),this.window.resize(e,t),this.forEachChildren(s=>{s.resize(e,t)}),this.camera&&this.option3d&&this.set3dOptions(this.option3d),n&&this.render())}resizeView(e,t,n=!0){this.releaseStatus!=="released"&&(this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+e,this.viewBox.y1+t),this.forEachChildren(s=>{s.resizeView(e,t)}),this.camera&&(this.camera.params=Object.assign(Object.assign({},this.camera.params),{right:this.width,bottom:this.height})),n&&this.render())}setViewBox(e,t,n,s,r){let a=!0;typeof e=="object"?(this.viewBox.setValue(e.x1,e.y1,e.x2,e.y2),t===!1&&(a=!1)):(this.viewBox.setValue(e,t,e+n,t+s),r===!1&&(a=!1)),this.forEachChildren(o=>{o.resizeView(this.viewBox.width(),this.viewBox.height())}),a&&this.render()}setDpr(e,t=!0){this.forEachChildren(n=>{n.setDpr(e)}),t&&this.render()}setOrigin(e,t){throw new Error("")}export(e){throw new Error("")}pick(e,t){if(this.releaseStatus==="released")return;const n=this.getPickerService().pick(this.children,new sn(e,t),{bounds:this.AABBBounds});return!(!(n!=null&&n.graphic)&&!(n!=null&&n.group))&&n}startAnimate(e){throw new Error("")}setToFrame(e){throw new Error("")}release(){super.release(),this.hooks.beforeRender.unTap("constructor",this.beforeRender),this.hooks.afterRender.unTap("constructor",this.afterRender),this.eventSystem&&this.eventSystem.release(),this.layerService.releaseStage(this),this.pluginService.release(),this.forEach(e=>{e.release()}),this.interactiveLayer&&(this.interactiveLayer.forEachChildren(e=>{e.setStage&&e.setStage(null,null),this.interactiveLayer.removeChild(e)}),this.interactiveLayer.release()),this.window.release(),this.ticker.remTimeline(this.timeline),this.renderService.renderTreeRoots=[]}setStage(e){}dirty(e,t){this.releaseStatus!=="released"&&(t&&e.transformWithMatrix(t),this.dirtyBounds.empty()&&this.dirtyBounds.setValue(e.x1,e.y1,e.x2,e.y2),this.dirtyBounds.union(e))}getLayer(e){return this.children.filter(t=>t.name===e)[0]}renderTo(e){this.releaseStatus!=="released"&&this.forEachChildren((t,n)=>{t.drawTo(e,{renderService:this.renderService,viewBox:e.getViewBox(),transMatrix:e.getViewBoxTransform(),background:t===this.defaultLayer?this.background:void 0,clear:n===0,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty())})})}renderToNewWindow(e=!0,t){if(this.releaseStatus==="released")return;const n=We.get(zA),s=t?-t.x1:0,r=t?-t.y1:0,a=t?t.x2:this.viewWidth,o=t?t.y2:this.viewHeight,l=t?t.width():this.viewWidth,c=t?t.height():this.viewHeight;return n.create({viewBox:{x1:s,y1:r,x2:a,y2:o},width:l,height:c,dpr:this.window.dpr,canvasControled:!0,offscreen:!0,title:""}),this.renderTo(n),n}toCanvas(e=!0,t){if(this.releaseStatus==="released")return;const n=this.renderToNewWindow(e,t).getNativeHandler();return n.nativeCanvas?n.nativeCanvas:null}setCursor(e){this._cursor=e,this.eventSystem.setCursor(e,"ignore")}getCursor(){return this._cursor}eventPointTransform(e){const t=this.global.mapToCanvasPoint(e,this.window.getContext().canvas.nativeCanvas);return this.stage.window.pointTransform(t.x,t.y)}pauseTriggerEvent(){this._eventSystem&&this._eventSystem.pauseTriggerEvent()}resumeTriggerEvent(){this._eventSystem&&this._eventSystem.resumeTriggerEvent()}getPickerService(){return this.pickerService||(this.pickerService=We.get(Um)),this.pickerService}}function ntt(i){return new itt(i)}const wI={WIDTH:500,HEIGHT:500,DPR:1};class z5{get displayWidth(){return this._pixelWidth/this._dpr}get displayHeight(){return this._pixelHeight/this._dpr}get id(){return this._id}get x(){return this._x}set x(e){this._x=e}get y(){return this._y}set y(e){this._y=e}get nativeCanvas(){return this._nativeCanvas}get width(){return this._pixelWidth}set width(e){this._pixelWidth=e,this._displayWidth=e/(this._dpr||1)}get height(){return this._pixelHeight}set height(e){this._pixelHeight=e,this._displayHeight=e/(this._dpr||1)}getContext(e){return this._context}get visiable(){return this._visiable}set visiable(e){this._visiable=e,e?this.show():this.hide()}get dpr(){return this._dpr}set dpr(e){this._dpr=e,this.resize(this._displayWidth,this._displayHeight)}constructor(e){var t;const{nativeCanvas:n,width:s=wI.WIDTH,height:r=wI.HEIGHT,dpr:a=wI.DPR,x:o,y:l,id:c,canvasControled:u=!0}=e;this._x=o??0,this._y=l??0,this._pixelWidth=s*a,this._pixelHeight=r*a,this._visiable=e.visiable!==!1,this.controled=u,this._displayWidth=s,this._displayHeight=r,this._dpr=a,this._nativeCanvas=n,this._id=(t=n.id)!==null&&t!==void 0?t:c,c&&(n.id=c),this.init(e)}getNativeCanvas(){return this._nativeCanvas}hide(){}show(){}applyPosition(){}resetStyle(e){}resize(e,t){}toDataURL(e,t){return""}readPixels(e,t,n,s){return this._context.getImageData(e,t,n,s)}convertToBlob(e){throw new Error("")}transferToImageBitmap(){throw new Error("")}release(...e){this.controled&&this._nativeCanvas.parentElement&&this._nativeCanvas.parentElement.removeChild(this._nativeCanvas)}}z5.env="browser";var stt=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};let Sk=class{configure(i,...e){i.env===this.type&&i.setActiveEnvContribution(this)}getNativeAABBBounds(i){return new Qi}removeDom(i){return!1}createDom(i){return null}updateDom(i,e){return!1}getDynamicCanvasCount(){return 999}getStaticCanvasCount(){return 999}getElementById(i){return document.getElementById(i)}getRootElement(){return document.body}loadJson(i){const e=fetch(i).then(t=>t.json());return e.then(t=>({data:t,state:"success"})).catch(()=>({data:null,state:"fail"})),e}loadArrayBuffer(i){return fetch(i).then(e=>e.arrayBuffer()).then(e=>({data:e,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadBlob(i){return fetch(i).then(e=>e.blob()).then(e=>({data:e,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}getElementTop(i,e){return 0}getElementLeft(i,e){return 0}getElementTopLeft(i,e){return{top:0,left:0}}};Sk=stt([Oe()],Sk);var rtt=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},att=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let Ck=class{constructor(){this._uid=zn.GenAutoIncrementId(),this.viewBox=new Qi,this.modelMatrix=new Zi(1,0,0,1,0,0)}onChange(i){this._onChangeCb=i}configure(i,e){e.env===this.type&&i.setWindowHandler(this)}release(...i){this.releaseWindow()}isVisible(i){return!0}onVisibleChange(i){}getTopLeft(i){return{top:0,left:0}}setViewBox(i){this.viewBox.setValue(i.x1,i.y1,i.x2,i.y2)}getViewBox(){return this.viewBox}setViewBoxTransform(i,e,t,n,s,r){this.modelMatrix.setValue(i,e,t,n,s,r)}getViewBoxTransform(){return this.modelMatrix}};Ck=rtt([Oe(),att("design:paramtypes",[])],Ck);class ott{constructor(e,t,n=.8){this.dir=e,this.color=t,this.colorRgb=dn.Get(t,wa.Color1),this.ambient=n;const s=So(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);this.formatedDir=[e[0]/s,e[1]/s,e[2]/s]}computeColor(e,t){const n=this.formatedDir,s=fs(br((e[0]*n[0]+e[1]*n[1]+e[2]*n[2])*(1-this.ambient/2),0)+this.ambient,1);let r;r=be(t)?dn.Get(t,wa.Color1):t;const a=this.colorRgb;return`rgb(${a[0]*r[0]*s}, ${a[1]*r[1]*s}, ${a[2]*r[2]*s})`}}const H5=()=>{ro.registerPlugin("DirectionalLight",ott)};class ltt{set params(e){this._params=Object.assign({},e),this._projectionMatrixCached=this.forceGetProjectionMatrix(),this._viewMatrixCached=this.forceGetViewMatrix()}get params(){return Object.assign({},this._params)}constructor(e){this.params=e}getViewMatrix(){return this._viewMatrixCached||(this._viewMatrixCached=Mi.allocate()),this._viewMatrixCached}forceGetViewMatrix(){this._viewMatrixCached||(this._viewMatrixCached=Mi.allocate());const{pos:e,center:t,up:n}=this.params.viewParams;return WZe(this._viewMatrixCached,e,t,n),this._vp||(this._vp=Mi.allocate()),this._vp=vf(this._vp,this.getProjectionMatrix(),this.getViewMatrix()),this._viewMatrixCached}getProjectionMatrix(){return this._projectionMatrixCached||(this._projectionMatrixCached=Mi.allocate()),this._projectionMatrixCached}forceGetProjectionMatrix(){this._projectionMatrixCached||(this._projectionMatrixCached=Mi.allocate());const{left:e,top:t,right:n,bottom:s}=this._params;return GZe(this._projectionMatrixCached,e,n,s,t,0,-2e6),this._vp||(this._vp=Mi.allocate()),this._vp=vf(this._vp,this.getProjectionMatrix(),this.getViewMatrix()),this._projectionMatrixCached}getField(){const{fieldRatio:e=.8,fieldDepth:t,left:n,right:s}=this._params;return(t??s-n)*e}getProjectionScale(e){const t=this.getField();return t/(t+e)}view(e,t,n){const s=[0,0,0];return ua(s,[e,t,n],this._viewMatrixCached),s}vp(e,t,n){const s=[0,0,0],{pos:r}=this._params.viewParams;ua(s,[e,t,n],this._viewMatrixCached),e=s[0],t=s[1],n=s[2];const a=this.getProjectionScale(n);return{x:e*a+r[0],y:t*a+r[1]}}}const V5=()=>{ro.registerPlugin("OrthoCamera",ltt)};var ctt=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},utt=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},SU=function(i,e){return function(t,n){e(t,n,i)}};let uF=class{constructor(i){this.pickItemInterceptorContributions=i,this.type="default",this.global=ue.global}_init(){this.InterceptorContributions=this.pickItemInterceptorContributions.getContributions().sort((i,e)=>i.order-e.order)}pick(i,e,t){let n={graphic:null,group:null};t.pickerService=this;const s=t.bounds.width(),r=t.bounds.height();if(!new Qi().setValue(0,0,s,r).containsPoint(e))return n;this.pickContext&&(this.pickContext.inuse=!0),t.pickContext=this.pickContext,this.pickContext&&this.pickContext.clearMatrix(!0,1);const a=new Zi(1,0,0,1,0,0);let o;for(let l=i.length-1;l>=0&&(n=i[l].isContainer?this.pickGroup(i[l],e,a,t):this.pickItem(i[l],e,a,t),!n.graphic);l--)o||(o=n.group);if(n.graphic||(n.group=o),this.pickContext&&(this.pickContext.inuse=!1),n.graphic){let l=n.graphic;for(;l.parent;)l=l.parent;l.shadowHost&&(n.params={shadowTarget:n.graphic},n.graphic=l.shadowHost)}return n}containsPoint(i,e,t){var n;return!!(!((n=this.pickItem(i,e,null,t??{pickContext:this.pickContext,pickerService:this}))===null||n===void 0)&&n.graphic)}pickGroup(i,e,t,n){let s={group:null,graphic:null};if(i.attribute.visibleAll===!1)return s;const r=n.pickContext,a=r.modelMatrix;if(r.camera){const p=i.transMatrix,f=Mi.allocate();if(UD(f,p),a){if(f){const g=Mi.allocate();r.modelMatrix=vf(g,a,f),Mi.free(f)}}else UD(f,i.globalTransMatrix),r.modelMatrix=f}if(this.InterceptorContributions.length)for(let p=0;p<this.InterceptorContributions.length;p++){const f=this.InterceptorContributions[p];if(f.beforePickItem){const g=f.beforePickItem(i,this,e,n,{parentMatrix:t});if(g)return r.modelMatrix!==a&&Mi.free(r.modelMatrix),r.modelMatrix=a,g}}const o=i.transMatrix,l=ba.allocateByObj(t),c=new sn(e.x,e.y);l.transformPoint(c,c);const u=i.AABBBounds.containsPoint(c);if(!u&&!i.stage.camera)return s;const h=this.pickItem(i,c.clone(),t,n);h&&h.graphic&&(s.graphic=h.graphic,s.params=h.params);const d=i.attribute.pickable!==!1&&u;return l.multiply(o.a,o.b,o.c,o.d,o.e,o.f),i.attribute.childrenPickable===!1||h&&h.graphic||hae(i,Ji.zIndex,p=>{if(p.isContainer){const f=new sn(e.x,e.y),g=Ye(i).group,{scrollX:m=g.scrollX,scrollY:y=g.scrollY}=i.attribute;f.x-=m,f.y-=y,s=this.pickGroup(p,f,l,n)}else{const f=new sn(e.x,e.y);l.transformPoint(f,f);const g=Ye(i).group,{scrollX:m=g.scrollX,scrollY:y=g.scrollY}=i.attribute;f.x-=m,f.y-=y;const b=this.pickItem(p,f,t,n);b&&b.graphic&&(s.graphic=b.graphic,s.params=b.params)}return!!s.graphic||!!s.group},!0,!!r.camera),r.modelMatrix!==a&&Mi.free(r.modelMatrix),r.modelMatrix=a,s.graphic||s.group||!d||i.stage.camera||(s.group=i),ba.free(l),s}selectPicker(i){return this.pickerMap.get(i.numberType)||null}};uF=ctt([Oe(),SU(0,rt($n)),SU(0,rs(fm)),utt("design:paramtypes",[Object])],uF);function htt(i,e){let t,n,s=i[0].x,r=i[0].y;const a=[i[0]];for(let o=1,l=i.length;o<l;o++)t=i[o].x-s,n=i[o].y-r,t*t+n*n>e&&(s=i[o].x,r=i[o].y,a.push(i[o]));return i[i.length-1].x===s&&i[i.length-1].y===r||a.push(i[i.length-1]),a}function dtt(i,e,t){return i.length<=10?i:i=htt(i,e!==void 0?e*e:1)}let CU=!1;const ptt=new Ge(i=>{CU||(CU=!0,i(YA).toSelf().inSingletonScope(),i(ik).to(YA).inSingletonScope(),i(as).toService(ik),i(FD).toService(ko),Es(i,FD))});let wU=!1;const ftt=new Ge(i=>{wU||(wU=!0,i(QA).toSelf().inSingletonScope(),i(lk).to(QA).inSingletonScope(),i(as).toService(lk),i(XA).toSelf(),i(KA).toSelf(),i($_).toService(XA),i($_).toService(KA),i($_).toService(ko),Es(i,$_))});let AU=!1;const gtt=new Ge(i=>{AU||(AU=!0,i(Wb).toSelf().inSingletonScope(),i(vk).toSelf().inSingletonScope(),i(rk).to(Wb).inSingletonScope(),i(as).toService(rk))});let kU=!1;const mtt=new Ge(i=>{kU||(kU=!0,i(Gb).toSelf().inSingletonScope(),i(nk).to(Gb).inSingletonScope(),i(as).toService(nk),i(BD).toService(ko),Es(i,BD),i(bk).toSelf().inSingletonScope())});let TU=!1;const ytt=new Ge(i=>{TU||(TU=!0,i(ek).toSelf().inSingletonScope(),i(ck).to(ek).inSingletonScope(),i(as).toService(ck),i(HD).toService(ko),Es(i,HD))});let EU=!1;const _tt=new Ge(i=>{EU||(EU=!0,i(qA).toSelf().inSingletonScope(),i(sk).to(qA).inSingletonScope(),i(as).toService(sk),i(jD).toService(ko),Es(i,jD))});let PU=!1;const vtt=new Ge(i=>{PU||(PU=!0,i(eF).to(XD).inSingletonScope(),i(as).toService(eF),i(VD).toService(ko),Es(i,VD))});let OU=!1;const btt=new Ge(i=>{OU||(OU=!0,i(JA).toSelf().inSingletonScope(),i(ak).to(JA).inSingletonScope(),i(as).toService(ak),i($D).toService(ko),Es(i,$D))});let MU=!1;const xtt=new Ge(i=>{MU||(MU=!0,i(ok).to(YD).inSingletonScope(),i(as).toService(ok),i(zD).toService(ko),Es(i,zD))});var Stt=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};let hF=class{constructor(){this.numberType=_5}drawShape(i,e,t,n,s,r,a,o){s.drawContribution&&i.getSubGraphic().forEach(l=>{const c=s.drawContribution.getRenderContribution(l);c&&c.drawShape&&c.drawShape(l,e,t,n,s,r,a,o)})}draw(i,e,t,n){const{context:s}=t;if(!s||(s.highPerformanceSave(),!t.drawContribution))return;const r=Ye(i),a=i.getSubGraphic();a.length&&a.forEach(o=>{t.drawContribution.renderItem(o,t,{theme:r})}),s.highPerformanceRestore()}};hF=Stt([Oe()],hF);let IU=!1;const Ctt=new Ge(i=>{IU||(IU=!0,i(uk).to(hF).inSingletonScope(),i(as).toService(uk))});var wtt=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},Att=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let dF=class extends Er{constructor(){super(),this.numberType=C5,this.builtinContributions=[Kre],this.init()}drawShape(i,e,t,n,s){const r=Ye(i).richtext,{strokeOpacity:a=r.strokeOpacity,opacity:o=r.opacity,fillOpacity:l=r.fillOpacity,visible:c=r.visible}=i.attribute;if(!i.valid||!c)return;const u=_f(o,l,!0),h=_f(o,a,!0);u&&(e.translate(t,n),this.beforeRenderStep(i,e,t,n,u,h,u,h,r,s),i.getFrameCache().draw(e,this.drawIcon),this.afterRenderStep(i,e,t,n,u,h,u,h,r,s))}drawIcon(i,e,t,n,s){var r;const a=Ye(i).richtextIcon,{width:o=a.width,height:l=a.height,opacity:c=a.opacity,image:u,backgroundFill:h=a.backgroundFill,backgroundFillOpacity:d=a.backgroundFillOpacity,backgroundStroke:p=a.backgroundStroke,backgroundStrokeOpacity:f=a.backgroundStrokeOpacity,backgroundRadius:g=a.backgroundRadius,margin:m}=i.attribute,{backgroundWidth:y=o,backgroundHeight:b=l}=i.attribute;if(m&&(t+=i._marginArray[3],n+=i._marginArray[0]),i._hovered){const S=(y-o)/2,C=(b-l)/2;g===0?(e.beginPath(),e.rect(t-S,n-C,y,b)):(e.beginPath(),Hd(e,t-S,n-C,y,b,g)),h&&(e.globalAlpha=d,e.fillStyle=h,e.fill()),p&&(e.globalAlpha=f,e.strokeStyle=p,e.stroke())}const x=u&&((r=i==null?void 0:i.resources)===null||r===void 0?void 0:r.get(u));x&&x.state==="success"&&(e.globalAlpha=c,e.drawImage(x.data,t,n,o,l))}draw(i,e,t){const n=Ye(i).richtext;this._draw(i,n,!1,t)}};dF=wtt([Oe(),Att("design:paramtypes",[])],dF);let RU=!1;const ktt=new Ge(i=>{RU||(RU=!0,i(tF).to(dF).inSingletonScope(),i(as).toService(tF))});let LU=!1;const Ttt=new Ge(i=>{LU||(LU=!0,i(IV).to(ZD).inSingletonScope(),i(as).toService(IV),i(ND).toService(ko),Es(i,ND))});class dae extends Er{stroke(e,t,n,s,r){const a=s.vertices;s.edges.forEach(o=>{const l=a[o[0]],c={x:e+l[0],y:t+l[1],z:n+l[2]},u=a[o[1]],h={x:e+u[0],y:t+u[1],z:n+u[2]};r.beginPath(),r.moveTo(c.x,c.y,c.z),r.lineTo(h.x,h.y,h.z),r.stroke()})}fill(e,t,n,s,r,a,o,l,c,u,h){const d=dn.Get(a,wa.Color255),p=s.vertices,f=p.map(m=>o.view(m[0],m[1],m[2])[2]),g=[];s.polygons.forEach((m,y)=>{if(r&&!r[y])return;g.push({faceIdx:y,polygon:m});const{polygon:b}=m,x=f[b[0]],S=f[b[1]],C=f[b[2]],w=f[b[3]];m.ave_z=x+S+C+w}),g.sort((m,y)=>y.polygon.ave_z-m.polygon.ave_z),g.forEach(m=>{const{polygon:y,normal:b}=m.polygon,x=p[y[0]],S=p[y[1]],C=p[y[2]],w=p[y[3]],A={x:e+x[0],y:t+x[1],z:n+x[2]},T={x:e+S[0],y:t+S[1],z:n+S[2]},E={x:e+C[0],y:t+C[1],z:n+C[2]},P={x:e+w[0],y:t+w[1],z:n+w[2]};o.beginPath(),o.moveTo(A.x,A.y,A.z),o.lineTo(T.x,T.y,T.z),o.lineTo(E.x,E.y,E.z),o.lineTo(P.x,P.y,P.z),o.closePath(),h?h(o,c&&c.attribute,u):(o.fillStyle=l?l.computeColor(b,d):a,o.fill())})}}var Ett=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};let pF=class extends dae{constructor(){super(...arguments),this.type="rect3d",this.numberType=S5}drawShape(i,e,t,n,s,r,a,o){var l;const c=Ye(i,r==null?void 0:r.theme).rect,{fill:u=c.fill,stroke:h=c.stroke,x1:d,y1:p,x:f,y:g,opacity:m=c.opacity,fillOpacity:y=c.fillOpacity,lineWidth:b=c.lineWidth,strokeOpacity:x=c.strokeOpacity,visible:S=c.visible}=i.attribute;let{width:C,height:w}=i.attribute;C=(C??d-f)||0,w=(w??p-g)||0;const A=(l=this.z)!==null&&l!==void 0?l:0,T=k5(m,y,C,w,u),E=E5(m,x,C,w),P=Zf(u),O=E0(h,b);if(!i.valid||!S||!P&&!O||!(T||E||a||o))return;const{light:M}=s.stage||{},R=i.findFace();if(u!==!1){e.setCommonStyle(i,i.attribute,t,n,c);let j=u;typeof j!="string"&&(j="black"),this.fill(t,n,A,R,null,j,e,M,null,null,a)}h!==!1&&(e.setStrokeStyle(i,i.attribute,t,n,c),this.stroke(t,n,A,R,e))}draw(i,e,t){const n=Ye(i).rect;this._draw(i,n,!1,t)}};pF=Ett([Oe()],pF);let DU=!1;const Ptt=new Ge(i=>{DU||(DU=!0,i(QD).to(pF).inSingletonScope(),i(as).toService(QD))});var Ott=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};function Mtt(i,e,t,n,s,r,a){const{startAngle:o,endAngle:l}=i.getParsedAngle(),c=At(l-o),u=l>o;let h=!1;if(r<a){const d=r;r=a,a=d}if(r<=Dt)e.moveTo(t,n,s);else if(c>=yt-Dt)e.moveTo(t+r*vi(o),n+r*ti(o),s),e.arc(t,n,r,o,l,!u,s),a>Dt&&(e.moveTo(t+a*vi(l),n+a*ti(l),s),e.arc(t,n,a,l,o,u,s));else{const{outerDeltaAngle:d,innerDeltaAngle:p,outerStartAngle:f,outerEndAngle:g,innerEndAngle:m,innerStartAngle:y}=i.getParsePadAngle(o,l),b=r*vi(f),x=r*ti(f),S=a*vi(m),C=a*ti(m);d<.001?h=!0:(e.moveTo(t+b,n+x,s),e.arc(t,n,r,f,g,!u,s)),!(a>Dt)||p<.001?(e.lineTo(t+S,n+C,s),h=!0):(e.lineTo(t+S,n+C,s),e.arc(t,n,a,m,y,u,s))}return e.closePath(),h}function Itt(i,e,t,n,s,r,a,o){const{startAngle:l,endAngle:c}=i.getParsedAngle(),u=At(c-l),h=c>l;let d=!1;if(a<=Dt)e.moveTo(t,n,s);else if(u>=yt-Dt)e.moveTo(t+a*vi(l),n+a*ti(l),s),e.arc(t,n,a,l,c,!h,s),e.lineTo(t+a*vi(c),n+a*ti(c),r),e.arc(t,n,a,c,l,h,r);else{const{innerouterDeltaAngle:p,innerouterStartAngle:f,innerouterEndAngle:g}=o(l,c),m=a*vi(f),y=a*ti(f),b=a*vi(g),x=a*ti(g);p<.001?d=!0:(e.moveTo(t+m,n+y,s),e.arc(t,n,a,f,g,!h,s),e.lineTo(t+b,n+x,r),e.arc(t,n,a,g,f,h,r))}return e.closePath(),d}let fF=class extends Er{constructor(){super(...arguments),this.numberType=NP}drawShape(i,e,t,n,s,r,a,o){var l;const c=Ye(i,r==null?void 0:r.theme).arc,{fill:u=c.fill}=i.attribute,h=this.valid(i,c,a,o);if(!h)return;const{fVisible:d,sVisible:p,doFill:f,doStroke:g}=h,m=(l=this.z)!==null&&l!==void 0?l:0,{outerPadding:y=c.outerPadding,innerPadding:b=c.innerPadding,height:x=10}=i.attribute;let{outerRadius:S=c.outerRadius,innerRadius:C=c.innerRadius}=i.attribute;S+=y,C-=b;const w=dn.Get(u,wa.Color255),{light:A}=s.stage||{},T=s.hack_pieFace,E={top:m,bottom:m+x},P={top:[0,1,0],bottom:[0,-1,0],outside:[1,0,-1],inside:[1,0,-1]};T==="bottom"||T==="top"?(e.beginPath(),Mtt(i,e,t,n,E[T],S,C),e.setShadowBlendStyle&&e.setShadowBlendStyle(i,i.attribute,c),f&&(a?a(e,i.attribute,c):d&&(e.setCommonStyle(i,i.attribute,t,n,c),e.fillStyle=A?A.computeColor(P[T],w):u,e.fill())),g&&(o?o(e,i.attribute,c):p&&(e.setStrokeStyle(i,i.attribute,t,n,c),e.stroke()))):T!=="outside"&&T!=="inside"||(T==="inside"&&(e.save(),e.beginPath(),e.arc(t,n,C,0,yt,!0,E.top),e.clip()),e.beginPath(),Itt(i,e,t,n,E.top,E.bottom,T==="outside"?S:C,(O,M)=>{const{outerDeltaAngle:R,innerDeltaAngle:j,outerStartAngle:I,outerEndAngle:D,innerEndAngle:z,innerStartAngle:$}=i.getParsePadAngle(O,M);return T==="outside"?{innerouterDeltaAngle:R,innerouterEndAngle:D,innerouterStartAngle:I}:{innerouterDeltaAngle:j,innerouterEndAngle:z,innerouterStartAngle:$}}),e.setShadowBlendStyle&&e.setShadowBlendStyle(i,i.attribute,c),f&&(a?a(e,i.attribute,c):d&&(e.setCommonStyle(i,i.attribute,t,n,c),e.fillStyle=A?A.computeColor(P[T],w):u,e.fill())),g&&(o?o(e,i.attribute,c):p&&(e.setStrokeStyle(i,i.attribute,t,n,c),e.stroke())),T==="inside"&&e.restore())}draw(i,e,t,n){const s=Ye(i,n==null?void 0:n.theme).arc;this._draw(i,s,!1,t,n)}};fF=Ott([Oe()],fF);let FU=!1;const Rtt=new Ge(i=>{FU||(FU=!0,i(JD).to(fF).inSingletonScope(),i(as).toService(JD))});var Ltt=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};let gF=class extends dae{constructor(){super(...arguments),this.type="pyramid3d",this.numberType=b5}drawShape(i,e,t,n,s,r,a,o){var l;const c=Ye(i,r==null?void 0:r.theme).polygon,{fill:u=c.fill,stroke:h=c.stroke,face:d=[!0,!0,!0,!0,!0,!0]}=i.attribute,p=(l=this.z)!==null&&l!==void 0?l:0;if(!this.valid(i,c,a,o))return;const{light:f}=s.stage||{},g=i.findFace();if(u!==!1){e.setCommonStyle(i,i.attribute,t,n,c);let m=u;typeof m!="string"&&(m="black"),this.fill(t,n,p,g,d,m,e,f,i,c,a)}h!==!1&&(e.setStrokeStyle(i,i.attribute,t,n,c),this.stroke(t,n,p,g,e))}draw(i,e,t){const n=Ye(i).polygon;this._draw(i,n,!1,t)}};gF=Ltt([Oe()],gF);let BU=!1;const Dtt=new Ge(i=>{BU||(BU=!0,i(iF).to(gF).inSingletonScope(),i(as).toService(iF))});function Ftt(){Ae.RegisterGraphicCreator("arc",B5)}function Btt(){Ae.RegisterGraphicCreator("arc3d",aae)}function jtt(){Ae.RegisterGraphicCreator("area",rae)}function Ntt(){Ae.RegisterGraphicCreator("circle",vQe)}function $tt(){Ae.RegisterGraphicCreator("glyph",iae)}function ztt(){Ae.RegisterGraphicCreator("group",w5)}function Htt(){Ae.RegisterGraphicCreator("image",F5)}function Vtt(){Ae.RegisterGraphicCreator("line",L5)}function Utt(){Ae.RegisterGraphicCreator("path",sae)}function Wtt(){Ae.RegisterGraphicCreator("polygon",oae)}function Gtt(){Ae.RegisterGraphicCreator("pyramid3d",lae)}function Ktt(){Ae.RegisterGraphicCreator("rect",Rx)}function Xtt(){Ae.RegisterGraphicCreator("rect3d",tae)}function Ytt(){Ae.RegisterGraphicCreator("richtext",nae)}function qtt(){Ae.RegisterGraphicCreator("symbol",KP)}function Ztt(){Ae.RegisterGraphicCreator("text",Cy)}function Jtt(){Ae.RegisterGraphicCreator("shadowRoot",ket)}class pae{constructor(){this.name="HtmlAttributePlugin",this.activeEvent="onRegister",this._uid=zn.GenAutoIncrementId(),this.key=this.name+this._uid,this.htmlMap={},this.renderId=0}activate(e){this.pluginService=e,e.stage.hooks.afterRender.tap(this.key,t=>{t&&t===this.pluginService.stage&&this.drawHTML(e.stage.renderService)})}deactivate(e){e.stage.hooks.afterRender.taps=e.stage.hooks.afterRender.taps.filter(t=>t.name!==this.key),ue.graphicService.hooks.onRemove.unTap(this.key),ue.graphicService.hooks.onRelease.unTap(this.key),this.release()}getWrapContainer(e,t,n){let s;return s=t?typeof t=="string"?ue.global.getElementById(t):t:e.window.getContainer(),{wrapContainer:ue.global.createDom(Object.assign({tagName:"div",parent:s},n)),nativeContainer:s}}parseDefaultStyleFromGraphic(e){const t=e.type==="text"&&e.attribute?e.attribute:Ye(e).text;return $Ze(t)}getTransformOfText(e){const t=Ye(e).text,{textAlign:n=t.textAlign,textBaseline:s=t.textBaseline}=e.attribute,r=e.globalTransMatrix.toTransformAttrs(),{rotateDeg:a,scaleX:o,scaleY:l}=r,c={left:"0",start:"0",end:"-100%",center:"-50%",right:"-100%",top:"0",middle:"-50%",bottom:"-100%",alphabetic:"-79%"},u={left:"0",start:"0",end:"100%",center:"50%",right:"100%",top:"0",middle:"50%",bottom:"100%",alphabetic:"79%"};return{textAlign:n,transform:`translate(${c[n]},${c[s]}) rotate(${a}deg) scaleX(${o}) scaleY(${l})`,transformOrigin:`${u[n]} ${u[s]}`}}updateStyleOfWrapContainer(e,t,n,s,r){const{pointerEvents:a}=r;let o=this.parseDefaultStyleFromGraphic(e);o.display=e.attribute.visible!==!1?"block":"none",o.pointerEvents=a===!0?"all":a||"none",n.style.position||(n.style.position="absolute",s.style.position="relative");let l=0,c=0;const u=e.globalAABBBounds;let h=r.anchorType;if(B(h)&&(h=e.type==="text"?"position":"boundsLeftTop"),h==="boundsLeftTop"&&(h="top-left"),h==="position"||u.empty()){const y=e.globalTransMatrix;l=y.e,c=y.f}else{const y=rse(u,h);l=y.x,c=y.y}const d=ue.global.getElementTopLeft(s,!1),p=t.window.getTopLeft(!1),f=t.viewBox,g=l+p.left-d.left+f.x1,m=c+p.top-d.top+f.y1;if(o.left=`${g}px`,o.top=`${m}px`,e.type==="text"&&h==="position"&&(o=Object.assign(Object.assign({},o),this.getTransformOfText(e))),ee(r.style)){const y=r.style({top:m,left:g,width:u.width(),height:u.height()},e,n);y&&(o=Object.assign(Object.assign({},o),y))}else Ke(r.style)?o=Object.assign(Object.assign({},o),r.style):be(r.style)&&r.style&&(o=Object.assign(Object.assign({},o),NKe(r.style)));ue.global.updateDom(n,{width:r.width,height:r.width,style:o})}clearCacheContainer(){this.htmlMap&&Object.keys(this.htmlMap).forEach(e=>{this.htmlMap[e]&&this.htmlMap[e].renderId!==this.renderId&&this.removeElement(e)}),this.renderId+=1}drawHTML(e){ue.global.env==="browser"&&(e.renderTreeRoots.sort((t,n)=>{var s,r;return((s=t.attribute.zIndex)!==null&&s!==void 0?s:Ji.zIndex)-((r=n.attribute.zIndex)!==null&&r!==void 0?r:Ji.zIndex)}).forEach(t=>{this.renderGroupHTML(t)}),this.clearCacheContainer())}renderGroupHTML(e){this.renderGraphicHTML(e),e.forEachChildren(t=>{t.isContainer?this.renderGroupHTML(t):this.renderGraphicHTML(t)})}removeElement(e){if(!this.htmlMap||!this.htmlMap[e])return;const{wrapContainer:t}=this.htmlMap[e];t&&ue.global.removeDom(t),this.htmlMap[e]=null}renderGraphicHTML(e){var t;const{html:n}=e.attribute;if(!n)return;const s=e.stage;if(!s)return;const{dom:r,container:a}=n;if(!r)return;const o=B(n.id)?`${(t=e.id)!==null&&t!==void 0?t:e._uid}_react`:n.id;if(this.htmlMap&&this.htmlMap[o]&&a&&a!==this.htmlMap[o].container&&this.removeElement(o),this.htmlMap&&this.htmlMap[o])typeof r=="string"?this.htmlMap[o].wrapContainer.innerHTML=r:r!==this.htmlMap[o].wrapContainer.firstChild&&(this.htmlMap[o].wrapContainer.removeChild(this.htmlMap[o].wrapContainer.firstChild),this.htmlMap[o].wrapContainer.appendChild(r));else{const{wrapContainer:u,nativeContainer:h}=this.getWrapContainer(s,a);u&&(typeof r=="string"?u.innerHTML=r:u.appendChild(r),this.htmlMap||(this.htmlMap={}),this.htmlMap[o]={wrapContainer:u,nativeContainer:h,container:a,renderId:this.renderId})}if(!this.htmlMap||!this.htmlMap[o])return;const{wrapContainer:l,nativeContainer:c}=this.htmlMap[o];this.updateStyleOfWrapContainer(e,s,l,c,n),this.htmlMap[o].renderId=this.renderId}release(){ue.global.env==="browser"&&this.removeAllDom(this.pluginService.stage.defaultLayer)}removeAllDom(e){this.htmlMap&&(Object.keys(this.htmlMap).forEach(t=>{this.removeElement(t)}),this.htmlMap=null)}}const Qtt=()=>{ro.registerPlugin("HtmlAttributePlugin",pae)};class eit extends pae{constructor(){super(...arguments),this.name="ReactAttributePlugin",this.activeEvent="onRegister",this._uid=zn.GenAutoIncrementId(),this.key=this.name+this._uid,this.htmlMap={}}removeElement(e){if(!this.htmlMap||!this.htmlMap[e])return;const{root:t,wrapContainer:n,unmount:s}=this.htmlMap[e];t?ue.global.getRequestAnimationFrame()(()=>{t.unmount()}):s&&s(),n&&ue.global.removeDom(n),this.htmlMap[e]=null}renderGraphicHTML(e){var t;const{react:n}=e.attribute;if(!n)return;const s=e.stage;if(!s)return;const r=s.params.ReactDOM,{element:a,container:o}=n;if(!a||!r||!r.createRoot&&!r.render)return;const l=B(n.id)?`${(t=e.id)!==null&&t!==void 0?t:e._uid}_react`:n.id;if(this.htmlMap&&this.htmlMap[l]&&o&&o!==this.htmlMap[l].container&&this.removeElement(l),this.htmlMap&&this.htmlMap[l])r.createRoot?this.htmlMap[l].root.render(a):r.render(a,this.htmlMap[l].wrapContainer);else{const{wrapContainer:h,nativeContainer:d}=this.getWrapContainer(s,o);if(h)if(this.htmlMap||(this.htmlMap={}),r.createRoot){const p=r.createRoot(h);p.render(a),this.htmlMap[l]={root:p,wrapContainer:h,nativeContainer:d,container:o,renderId:this.renderId}}else r.render(a,h),this.htmlMap[l]={wrapContainer:h,nativeContainer:d,container:o,renderId:this.renderId,unmount:()=>{r.unmountComponentAtNode(h)}}}if(!this.htmlMap||!this.htmlMap[l])return;const{wrapContainer:c,nativeContainer:u}=this.htmlMap[l];this.updateStyleOfWrapContainer(e,s,c,u,n),this.htmlMap[l].renderId=this.renderId}}const tit=()=>{ro.registerPlugin("ReactAttributePlugin",eit)};class iit{constructor(){this.name="ViewTransform3dPlugin",this.activeEvent="onRegister",this._uid=zn.GenAutoIncrementId(),this.key=this.name+this._uid,this.onMouseDown=e=>{this.option3d||(this.option3d=this.pluginService.stage.option3d),this.option3d&&(this.mousedown=!0,this.pageX=e.page.x,this.pageY=e.page.y)},this.onMouseUp=e=>{this.option3d||(this.option3d=this.pluginService.stage.option3d),this.option3d&&(this.mousedown=!1)},this.onMouseMove=e=>{var t,n;const s=this.pluginService.stage;if(this.option3d||(this.option3d=s.option3d),this.option3d&&this.mousedown)if(this.pageX&&this.pageY){const r=e.page.x-this.pageX,a=e.page.y-this.pageY;this.pageX=e.page.x,this.pageY=e.page.y;const o=r/100,l=a/100;this.option3d.alpha=((t=this.option3d.alpha)!==null&&t!==void 0?t:0)+o,this.option3d.beta=((n=this.option3d.beta)!==null&&n!==void 0?n:0)+l,s.set3dOptions(this.option3d),s.renderNextFrame()}else this.pageX=e.page.x,this.pageY=e.page.y}}activate(e){this.pluginService=e;const t=e.stage;this.option3d=t.option3d,t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("mouseup",this.onMouseUp),t.addEventListener("mousemove",this.onMouseMove)}deactivate(e){const t=e.stage;t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mousemove",this.onMouseMove)}}const nit=()=>{ro.registerPlugin("ViewTransform3dPlugin",iit)};function mF(i){const e=[];for(let t=0;t<i.length;t++){const n=i[t];t===0&&e.push(n[0]),e.push(n[1])}return e}const Yr=(i,e)=>(ee(wk.warnHandler)&&wk.warnHandler.call(null,i,e),ii.getInstance().warn(`[VChart warn]: ${i}`)),t1=(i,e,t)=>{{if(!ee(wk.errorHandler))throw new Error(i);wk.errorHandler.call(null,i,e)}},wk={silent:!1,warnHandler:!1,errorHandler:!1},fae=$5(),Ih=fae&&globalThis?globalThis.document:void 0;function vl(i){return(i==="desktop-browser"||i==="mobile-browser")&&fae}function Pd(i){return Vd(i)||i==="mobile-browser"}function Vd(i){return i.includes("miniApp")||i==="lynx"||i==="wx"||i==="harmony"}let AI=0;function Qf(){return AI>=9999999&&(AI=0),AI++}function Ty(i){return i!=null&&i!==""&&(!!ye(i)||+i==+i)}function sit(i){if(Z(i))return i;const e=+i;return Z(e)?e:0}function mm(i){return!(!i||i.length===0)&&!B(i[0])&&!B(i[0].dataId)&&ie(i[0].fields)}const rit=(i,e,t)=>(i.fields=e||[],i.fname=t,i),ait=i=>e=>et(e,i),oit=i=>i,lit=i=>0,Vp=i=>{ii.getInstance().error(i)},cit=i=>{const e=[],t=i.length;let n,s,r,a=null,o=0,l="";i+="";const c=()=>{e.push(l+i.substring(n,s)),l="",n=s+1};for(n=0,s=0;s<t;s+=1)if(r=i[s],r==="\\")l+=i.substring(n,s),l+=i.substring(++s,++s),n=s;else if(r===a)c(),a=null,o=-1;else{if(a)continue;n===o&&r==='"'||n===o&&r==="'"?(n=s+1,a=r):r!=="."||o?r==="["?(s>n&&c(),n=s+1,o=n):r==="]"&&(o||Vp("Access path missing open bracket: "+i),o>0&&c(),o=0,n=s+1):s>n?c():n=s+1}return o&&Vp("Access path missing closing bracket: "+i),a&&Vp("Access path missing closing quote: "+i),s>n&&(s+=1,c()),e},jU=(i,e,t={})=>{if(ee(i))return i;const n=cit(i),s=n.length===1?n[0]:i;return rit((t&&t.get||ait)(n),[s],s)},Tc=(i,e,t={})=>{if(ie(i)){const n=i.map(s=>jU(s,e,t));return s=>n.map(r=>r(s))}return jU(i,e,t)},NU=(i,e)=>{const t=ee(e)?e:r=>r;let n,s;if(i&&i.length){const r=i.length;for(let a=0;a<r;a+=1){let o=t(i[a]);B(o)||!ye(o=+o)||Number.isNaN(o)||(B(n)?(n=o,s=o):(n=Math.min(n,o),s=Math.max(s,o)))}return[n,s]}return[n,s]},Qo=(i,e)=>B(i)?e:be(i)?e*parseFloat(i)/100:i;function uit(i,e,t,n){const s=n-i*i,r=Math.abs(s)<1e-24?0:(t-i*e)/s;return[e-r*i,r]}function gae(i,e,t,n){let s,r,a=-1;i.forEach(o=>{s=e(o),r=t(o),!B(s)&&(s=+s)>=s&&!B(r)&&(r=+r)>=r&&n(s,r,++a)})}function hit(i,e,t,n,s){let r=0,a=0;return gae(i,e,t,(o,l)=>{const c=l-s(o),u=l-n;r+=c*c,a+=u*u}),1-r/a}function dit(i,e=n=>n.x,t=n=>n.y){let n=0,s=0,r=0,a=0,o=0;gae(i,e,t,(u,h)=>{++o,n+=(u-n)/o,s+=(h-s)/o,r+=(u*h-r)/o,a+=(u*u-a)/o});const l=uit(n,s,r,a),c=u=>l[0]+l[1]*u;return{coef:l,predict:c,rSquared:hit(i,e,t,s,c)}}function ks(i){return i==="horizontal"}function $U(i){return i==="vertical"}const kI={triangleForward:mit,triangleUpright:zU,triangle:zU,diamond:pit,square:git,star:fit,cardioid:yit,circle:_it,pentagon:vit};function pit(){return function(i){const e=i%(2*Math.PI/4);return 1/(Math.cos(e)+Math.sin(e))}}function fit(){return function(i){const e=(i+.955)%(2*Math.PI/10);return(i+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-e)+3.07768*Math.sin(2*Math.PI/10-e)):1/(Math.cos(e)+3.07768*Math.sin(e))}}function git(){return function(i){return Math.min(1/Math.abs(Math.cos(i)),1/Math.abs(Math.sin(i)))}}function zU(){return function(i){const e=(i+3*Math.PI/2)%(2*Math.PI/3);return 1/(Math.cos(e)+Math.sqrt(3)*Math.sin(e))}}function mit(){return function(i){const e=i%(2*Math.PI/3);return 1/(Math.cos(e)+Math.sqrt(3)*Math.sin(e))}}function yit(){return function(i){return 1+Math.sin(i)}}function _it(){return function(){return 1}}function vit(){return function(i){const e=(i+.955)%(2*Math.PI/5);return 1/(Math.cos(e)+.726543*Math.sin(e))}}function U5(i,e){const t=e[0],n=e[1];let s=1;const r=[e[0]>>1,e[1]>>1];switch(i){case"cardioid":r[1]=~~(n/2.7*.4),s=Math.floor(Math.min(t/2.3,n/2.6));break;case"triangleForward":s=n/Math.sqrt(.75)>t?Math.floor(t/2):Math.floor(n/(2*Math.sqrt(.75)));break;case"triangle":case"triangleUpright":r[1]=~~(n/1.5),s=Math.floor(Math.min(n/1.5,t/2));break;case"circle":case"diamond":case"square":case"star":case"pentagon":s=Math.floor(Math.min(t/2,n/2));break;default:s=Math.floor(Math.max(t/2,n/2))}return{maxRadius:s,center:r}}const mae=i=>kI[i]?kI[i]():kI.circle(),yF=i=>{if(!i||i==="#fff")return(n,s,r)=>{const a=n.width;return n.data[s*a*4+4*r+3]===0||n.data[s*a*4+4*r+0]===255&&n.data[s*a*4+4*r+1]===255&&n.data[s*a*4+4*r+2]===255};const e=st.createCanvas({width:1,height:1}).getContext("2d",{willReadFrequently:!0});e.fillStyle=i,e.fillRect(0,0,1,1);const t=e.getImageData(0,0,1,1).data;return(n,s,r)=>{const a=n.width;return[0,1,2,3].every(o=>n.data[4*(s*a+r)+o]===t[o])}},yae=(i,e,t,n)=>{const{backgroundColor:s="#fff"}=i,r=st.createCanvas({width:e,height:t,dpr:1}),a=r.getContext("2d",{willReadFrequently:!0});return a.fillStyle=s,a.fillRect(0,0,r.width,r.height),i.type==="text"?bit(i,r.width,r.height,a):i.type==="geometric"&&Cit(i,r.width,r.height,a),r},bit=(i,e,t,n)=>{const{fontFamily:s="sans-serif",fontWeight:r="normal",fontStyle:a="normal",fontVariant:o="normal",fill:l,text:c,hollow:u}=i;let h=12;n.font=`${a} ${o} ${r} ${h}px ${s}`,n.textAlign="center",n.textBaseline="middle",n.fillStyle=l??"black";const d=n.measureText(c),p=a!=="normal"?1.1:1,f=F(d.actualBoundingBoxRight)&&F(d.actualBoundingBoxLeft)?Math.ceil(p*(Math.abs(d.actualBoundingBoxRight)+Math.abs(d.actualBoundingBoxLeft))):0,g=Math.max(Math.ceil(d.width),f,h);if(u&&(n.globalCompositeOperation="xor"),g>e){const m=Math.min(e/g,t/h);n.fillText(c,e/2,t/2),n.scale(m,m)}else h=Math.floor(h*e/g),h=Math.min(h,t),n.font=`${a} ${o} ${r} ${h}px ${s}`,n.fillText(c,Math.floor(e/2),Math.floor(t/2))},ip=(i,e,t=0,n)=>{const s=2*Math.PI/n;return new Array(n).fill(0).map((r,a)=>ui(i,e,t+a*s))},xit=(i,e,t=0,n)=>{const s=2*Math.PI/n,r=mae("cardioid");return new Array(n).fill(0).map((a,o)=>{const l=t+o*s,c=e*r(l);return ui(i,c,l)})},wg=(i,e)=>{i.beginPath(),e.forEach((t,n)=>{n===0?i.moveTo(t.x,t.y):i.lineTo(t.x,t.y)}),i.closePath(),i.fill()},Sit=(i,e)=>{let t;i.beginPath(),e.forEach((n,s)=>{s===0?i.moveTo(n.x,n.y):i.bezierCurveTo(n.x,n.y,t.x,t.y,n.x,n.y),t=n}),i.closePath(),i.fill()},Cit=(i,e,t,n)=>{const{fill:s,hollow:r}=i,{center:a,maxRadius:o}=U5(i.shape,[e,t]);n.fillStyle=s??"black",r&&(n.globalCompositeOperation="xor");const l=a[0],c=a[1];if(i.shape==="cardioid")Sit(n,xit({x:l,y:c},o,0,100));else if(i.shape==="circle")n.beginPath(),n.arc(l,c,o,0,2*Math.PI,!0),n.fill();else if(i.shape==="diamond")wg(n,ip({x:l,y:c},o,-Math.PI/2,4));else if(i.shape==="square")wg(n,ip({x:l,y:c},o,-Math.PI/4,4));else if(i.shape==="pentagon")wg(n,ip({x:l,y:c},o,Math.PI/2,5));else if(i.shape==="triangle"||i.shape==="triangleUpright")wg(n,ip({x:l,y:c},o,-Math.PI/2,3));else if(i.shape==="triangleForward")wg(n,ip({x:l,y:c},o,0,3));else if(i.shape==="star"){const u=ip({x:l,y:c},o,-Math.PI/2,5),h=ip({x:l,y:c},o/(2*Math.cos(Math.PI/5)),-Math.PI/2+Math.PI/5,5),d=[];for(let p=0;p<5;p++)d.push(u[p]),d.push(h[p]);wg(n,d)}else n.fillRect(0,0,e,t)},HU=["x","y","dx","dy","scaleX","scaleY","angle","anchor","postMatrix","visible","clip","pickable","childrenPickable","zIndex","cursor"];class Zn extends T0{constructor(e,t){super(e),t!=null&&t.mode&&(this.mode=t.mode,this.setMode(t.mode)),t!=null&&t.skipDefault&&(this.skipDefault=!0),this.setTheme({common:{strokeBoundsBuffer:0}}),this.attribute=e,this.onSetStage(()=>{this.render(),this.bindEvents()})}setAttribute(e,t,n){vc(this.attribute[e])&&vc(t)&&!ee(this.attribute[e])&&!ee(t)?se(this.attribute[e],t):this.attribute[e]=t,HU.includes(e)||this.render(),this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!n&&!this.needUpdateTag(e)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.onAttributeUpdate()}setAttributes(e,t){const n=Object.keys(e);this._mergeAttributes(e,n),n.every(s=>HU.includes(s))||this.render(),this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!t&&!this.needUpdateTags(n)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.onAttributeUpdate()}_mergeAttributes(e,t){B(t)&&(t=Object.keys(e));for(let n=0;n<t.length;n++){const s=t[n];!vc(this.attribute[s])||ee(this.attribute[s])||ee(e[s])?this.attribute[s]=e[s]:se(this.attribute[s],e[s])}}bindEvents(){}_getNodeId(e){var t;return`${(t=this.id)!==null&&t!==void 0?t:this._uid}-${this.name}-${e}`}_dispatchEvent(e,t){var n;const s=new DP(e,t);s.manager=(n=this.stage)===null||n===void 0?void 0:n.eventSystem.manager,this.dispatchEvent(s)}}const Wu=Symbol.for("MathPickerContribution"),VU=Symbol.for("MathArcPicker"),UU=Symbol.for("MathAreaPicker"),WU=Symbol.for("MathCirclePicker"),Ak=Symbol.for("MathImagePicker"),GU=Symbol.for("MathLinePicker"),KU=Symbol.for("MathPathPicker"),XU=Symbol.for("MathRectPicker"),YU=Symbol.for("MathSymbolPicker"),qU=Symbol.for("MathTextPicker"),ZU=Symbol.for("MathPolygonPicker"),JU=Symbol.for("MathGlyphPicker"),QU=Symbol.for("CanvasArcPicker"),eW=Symbol.for("CanvasArc3dPicker"),tW=Symbol.for("CanvasAreaPicker"),iW=Symbol.for("CanvasCirclePicker"),nW=Symbol.for("CanvasImagePicker"),sW=Symbol.for("CanvasLinePicker"),rW=Symbol.for("CanvasPathPicker"),aW=Symbol.for("CanvasRectPicker"),oW=Symbol.for("CanvasRect3dPicker"),lW=Symbol.for("CanvasSymbolPicker"),cW=Symbol.for("CanvasTextPicker"),uW=Symbol.for("CanvasPolygonPicker"),hW=Symbol.for("CanvasPyramid3dPicker"),dW=Symbol.for("CanvasRichTextPicker"),pW=Symbol.for("CanvasGlyphPicker"),fW=Symbol.for("CanvasGroupPicker"),ms=Symbol.for("CanvasPickerContribution"),gW=(i,e)=>{const t=e.x-i.x,n=e.y-i.y;return Math.abs(t)>Math.abs(n)?t>0?"right":"left":n>0?"down":"up"},pC=(i,e)=>{const t=Math.abs(e.x-i.x),n=Math.abs(e.y-i.y);return Math.sqrt(t*t+n*n)},wit=i=>{const e=i.length;if(e===1)return{x:Math.round(i[0].x),y:Math.round(i[0].y)};let t=0,n=0,s=0;for(;s<e;)t+=i[s].x,n+=i[s].y,s++;return{x:Math.round(t/e),y:Math.round(n/e)}};class Ait extends Yf{constructor(e,t={}){var n,s,r,a,o,l,c,u,h,d;super(),this.cachedEvents=[],this.startPoints=[],this.processEvent={},this.throttleTimer=0,this.emitThrottles=[],this.lastTapTarget=null,this.onStart=p=>{this.reset(),this.startTime=Op.now();const{cachedEvents:f,startPoints:g}=this;p&&f.push(p.clone()),g.length=f.length;for(let m=0;m<f.length;m++){const{x:y,y:b}=f[m],x={x:y,y:b};g[m]=x}if(g.length!==1)this.startDistance=pC(g[0],g[1]),this.center=wit([g[0],g[1]]);else{const m=f[0];this.pressTimeout=setTimeout(()=>{m.direction="none",m.deltaX=0,m.deltaY=0,m.points=g,this.triggerStartEvent("press",m),this.triggerEvent("press",m),this.eventType="press",this.direction="none"},this.config.press.time)}},this.onMove=p=>{this.clearPressTimeout();const{startPoints:f,cachedEvents:g}=this;if(!f.length)return;const m=p.clone(),{x:y,y:b,pointerId:x}=m;for(let E=0,P=g.length;E<P;E++)if(x===g[E].pointerId){g[E]=m;break}const S={x:y,y:b},C=g.map(E=>({x:E.x,y:E.y})),w=Op.now();if(this.prevMoveTime=this.lastMoveTime,this.prevMovePoint=this.lastMovePoint,this.lastMoveTime=w,this.lastMovePoint=S,f.length===1){const E=f[0],P=y-E.x,O=b-E.y,M=this.direction||gW(E,S);this.direction=M;const R=this.getEventType(S);return m.direction=M,m.deltaX=P,m.deltaY=O,m.points=C,this.triggerStartEvent(R,m),void this.triggerEvent(R,m)}const{startDistance:A}=this,T=pC(C[0],C[1]);m.scale=T/A,m.center=this.center,m.points=C,this.triggerStartEvent("pinch",m),this.triggerEvent("pinch",m)},this.onEnd=p=>{const f=p.clone(),{cachedEvents:g,startPoints:m}=this,y=g.map(b=>({x:b.x,y:b.y}));if(f.points=y,this.triggerEndEvent(f),g.length===1){const b=Op.now(),x=this.lastMoveTime;if(b-x<100){const S=x-(this.prevMoveTime||this.startTime);if(S>0){const C=this.prevMovePoint||m[0],w=this.lastMovePoint||m[0],A=pC(C,w),T=A/S;T>this.config.swipe.velocity&&A>this.config.swipe.threshold&&(f.velocity=T,f.direction=gW(C,w),this.triggerEvent("swipe",f))}}b-this.lastTapTime<this.config.tap.interval&&p.target===this.lastTapTarget?this.tapCount++:this.tapCount=1,this.lastTapTime=b,this.lastTapTarget=p.target,this.tapCount===1?this.triggerEvent("tap",f):this.tapCount===2&&(this.triggerEvent("doubletap",f),this.tapCount=0)}for(let b=0,x=g.length;b<x;b++)if(g[b].pointerId===f.pointerId){g.splice(b,1),m.splice(b,1);break}this.reset(),g.length>0&&this.onStart()},this.element=e,this.tapCount=0,this.lastTapTime=0,this.config={press:{time:(s=(n=t==null?void 0:t.press)===null||n===void 0?void 0:n.time)!==null&&s!==void 0?s:251,threshold:(a=(r=t==null?void 0:t.press)===null||r===void 0?void 0:r.threshold)!==null&&a!==void 0?a:9},swipe:{threshold:(l=(o=t==null?void 0:t.swipe)===null||o===void 0?void 0:o.threshold)!==null&&l!==void 0?l:10,velocity:(u=(c=t==null?void 0:t.swipe)===null||c===void 0?void 0:c.velocity)!==null&&u!==void 0?u:.3},tap:{interval:(d=(h=t==null?void 0:t.tap)===null||h===void 0?void 0:h.interval)!==null&&d!==void 0?d:300}},this.initEvents()}initEvents(){const{element:e}=this;e&&(e.addEventListener("pointerdown",this.onStart),e.addEventListener("pointermove",this.onMove),e.addEventListener("pointerup",this.onEnd),e.addEventListener("pointerupoutside",this.onEnd))}removeEvents(){const{element:e}=this;e&&(e.removeEventListener("pointerdown",this.onStart),e.removeEventListener("pointermove",this.onMove),e.removeEventListener("pointerup",this.onEnd),e.removeEventListener("pointerupoutside",this.onEnd))}release(){this.removeEvents(),this.element=null}getEventType(e){const{eventType:t,startTime:n,startPoints:s}=this;if(t)return t;let r;return r=Op.now()-n>this.config.press.time&&pC(s[0],e)<this.config.press.threshold?"press":"pan",this.eventType=r,r}enable(e){this.processEvent[e]=!0}isProcess(e){return this.processEvent[e]}pushEvent(e,t){const{emitThrottles:n}=this,s={type:e,ev:t};for(let r=0,a=n.length;r<a;r++)if(n[r].type===e)return void n.splice(r,1,s);n.push(s)}clearPressTimeout(){this.pressTimeout&&(clearTimeout(this.pressTimeout),this.pressTimeout=null)}reset(){this.clearPressTimeout(),this.startTime=0,this.startDistance=0,this.direction=null,this.eventType=null,this.prevMoveTime=0,this.prevMovePoint=null,this.lastMoveTime=0,this.lastMovePoint=null}triggerEvent(e,t){this.pushEvent(e,t);const{throttleTimer:n,emitThrottles:s}=this;n||(this.throttleTimer=ue.global.getRequestAnimationFrame()(()=>{for(let r=0,a=s.length;r<a;r++){const{type:o,ev:l}=s[r];this.emitEvent(o,l)}this.throttleTimer=0,this.emitThrottles.length=0}))}triggerStartEvent(e,t){this.isProcess(e)||(this.enable(e),this.triggerEvent(`${e}start`,t))}triggerEndEvent(e){const t=this.processEvent;Object.keys(t).forEach(n=>{this.triggerEvent(`${n}end`,e),n==="press"&&this.triggerEvent(`${n}up`,e),delete t[n]})}emitEvent(e,t){const n=this.element._events[Ere];if(n)if("fn"in n)n.fn.call(n.context,t,e);else for(let s=0,r=n.length;s<r&&!t.propagationImmediatelyStopped;s++)n[s].fn.call(n[s].context,t,e);this.emit(e,t)}}var kit=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},Tit=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};const ht=[0,0,0],Eit=(i,e,t,n,s,r,a,o)=>{if(o)for(;t>e;)t-=yt;else for(;t<e;)t+=yt;const l=Qt/3*(t>e?1:-1);let c=e,u=c;for(;u!==t;){u=l>0?Math.min(u+l,t):Math.max(u+l,t);const h=Math.abs(u-c),d=4*Math.tan(h/4)/3,p=u<c?-1:1,f=Math.cos(c),g=Math.sin(c),m=Math.cos(u),y=Math.sin(u),b=f*r+n,x=g*a+s,S=m*r+n,C=y*a+s,w=r*d*p,A=a*d*p;i.push([b-w*g,x+A*f,S+w*y,C-A*m,S,C]),c=u}};let Wm=class{set fillStyle(i){this.nativeContext.fillStyle=i}get fillStyle(){return this.nativeContext.fillStyle}set font(i){this.nativeContext.font=i}get font(){return this.nativeContext.font}set globalAlpha(i){this.nativeContext.globalAlpha=i*this.baseGlobalAlpha}get globalAlpha(){return this.nativeContext.globalAlpha}set lineCap(i){this.nativeContext.lineCap=i}get lineCap(){return this.nativeContext.lineCap}set lineDashOffset(i){this.nativeContext.lineDashOffset=i}get lineDashOffset(){return this.nativeContext.lineDashOffset}set lineJoin(i){this.nativeContext.lineJoin=i}get lineJoin(){return this.nativeContext.lineJoin}set lineWidth(i){this.nativeContext.lineWidth=i}get lineWidth(){return this.nativeContext.lineWidth}set miterLimit(i){this.nativeContext.miterLimit=i}get miterLimit(){return this.nativeContext.miterLimit}set shadowBlur(i){this.nativeContext.shadowBlur=i}get shadowBlur(){return this.nativeContext.shadowBlur}set shadowColor(i){this.nativeContext.shadowColor=i}get shadowColor(){return this.nativeContext.shadowColor}set shadowOffsetX(i){this.nativeContext.shadowOffsetX=i}get shadowOffsetX(){return this.nativeContext.shadowOffsetX}set shadowOffsetY(i){this.nativeContext.shadowOffsetY=i}get shadowOffsetY(){return this.nativeContext.shadowOffsetY}set strokeStyle(i){this.nativeContext.strokeStyle=i}get strokeStyle(){return this.nativeContext.strokeStyle}set textAlign(i){this.nativeContext.textAlign=i}get textAlign(){return this.nativeContext.textAlign}set textBaseline(i){this.nativeContext.textBaseline=i}get textBaseline(){return this.nativeContext.textBaseline}get inuse(){return!!this._inuse}set inuse(i){i!==!!this._inuse&&(this._inuse=i,i?(this.nativeContext.save(),this.reset()):this.nativeContext.restore())}constructor(i,e){this.fillAttributes=Object.assign(Object.assign({},yre),{opacity:1}),this.strokeAttributes=Object.assign(Object.assign({},_re),{opacity:1}),this.textAttributes=Object.assign(Object.assign({},bc),{opacity:1}),this._clearShadowStyle=!1,this._clearFilterStyle=!1,this._clearGlobalCompositeOperationStyle=!1;const t=i.nativeCanvas.getContext("2d");if(!t)throw new Error("2d");this.nativeContext=t,this.canvas=i,this.matrix=new Zi(1,0,0,1,0,0),this.stack=[],this.dpr=e,this.applyedMatrix=new Zi(1,0,0,1,0,0),this._clearMatrix=new Zi(1,0,0,1,0,0),this.baseGlobalAlpha=1}reset(){this.stack.length&&ii.getInstance().warn("bugmatrix"),this.matrix.setValue(1,0,0,1,0,0),this.applyedMatrix=new Zi(1,0,0,1,0,0),this.stack.length=0,this.nativeContext.setTransform(1,0,0,1,0,0)}getCanvas(){return this.canvas}getContext(){return this.nativeContext}setTransformForCurrent(i=!1){!i&&this.applyedMatrix.equalToMatrix(this.matrix)||(this.applyedMatrix.setValue(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f),this.nativeContext.setTransform(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f))}get currentMatrix(){return this.matrix}cloneMatrix(i){return ba.allocateByObj(i)}clear(){this.save(),this.resetTransform(),this.nativeContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.restore()}restore(){this.nativeContext.restore(),this.stack.length>0&&(ba.free(this.matrix),this.matrix=this.stack.pop(),this.setTransformForCurrent(!0))}highPerformanceRestore(){this.stack.length>0&&(ba.free(this.matrix),this.matrix=this.stack.pop())}rotate(i,e=!0){this.matrix.rotate(i),e&&this.setTransformForCurrent()}save(){const i=this.cloneMatrix(this.matrix);this.stack.push(i),this.nativeContext.save()}highPerformanceSave(){const i=this.cloneMatrix(this.matrix);this.stack.push(i)}scale(i,e,t=!0){this.matrix.scale(i,e),t&&this.setTransformForCurrent()}setScale(i,e,t=!0){this.matrix.setScale(i,e),t&&this.setTransformForCurrent()}scalePoint(i,e,t,n,s=!0){this.translate(t,n,!1),this.scale(i,e,!1),this.translate(-t,-n,!1),s&&this.setTransformForCurrent()}setTransform(i,e,t,n,s,r,a=!0,o=this.dpr){this.matrix.setValue(o*i,o*e,o*t,o*n,o*s,o*r),a&&this.setTransformForCurrent()}setTransformFromMatrix(i,e=!0,t=this.dpr){this.matrix.setValue(i.a*t,i.b*t,i.c*t,i.d*t,i.e*t,i.f*t),e&&this.setTransformForCurrent()}resetTransform(i=!0,e=this.dpr){this.setTransform(e,0,0,e,0,0),i&&this.setTransformForCurrent()}transform(i,e,t,n,s,r,a=!0){this.matrix.multiply(i,e,t,n,s,r),a&&this.setTransformForCurrent()}transformFromMatrix(i,e){this.matrix.multiply(i.a,i.b,i.c,i.d,i.e,i.f),e&&this.setTransformForCurrent()}translate(i,e,t=!0){this.matrix.translate(i,e),t&&this.setTransformForCurrent()}rotateDegrees(i,e=!0){const t=i*Math.PI/180;this.rotate(t,e)}rotateAbout(i,e,t,n=!0){this.translate(e,t,!1),this.rotate(i,!1),this.translate(-e,-t,!1),n&&this.setTransformForCurrent()}rotateDegreesAbout(i,e,t,n=!0){this.translate(e,t,!1),this.rotateDegrees(i,!1),this.translate(-e,-t,!1),n&&this.setTransformForCurrent()}beginPath(){this.disableBeginPath||this.nativeContext.beginPath()}clip(i,e){i?typeof i=="string"?this.nativeContext.clip(i):this.nativeContext.clip(i,e):this.nativeContext.clip()}arc(i,e,t,n,s,r,a){if(a=a||0,this.camera){const o=[];Eit(o,n,s,i,e,t,t,r);for(let l=0;l<o.length;++l){const c=o[l];this.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5],a)}}else this.nativeContext.arc(i,e,Math.max(0,t),n,s,r)}arcTo(i,e,t,n,s){this.nativeContext.arcTo(i,e,t,n,s)}bezierCurveTo(i,e,t,n,s,r,a){if(a=a||0,this.camera){let o=a,l=a;this.modelMatrix&&(ua(ht,[i,e,a],this.modelMatrix),i=ht[0],e=ht[1],o=ht[2],ua(ht,[t,n,a],this.modelMatrix),t=ht[0],n=ht[1],l=ht[2],ua(ht,[s,r,a],this.modelMatrix),s=ht[0],r=ht[1],a=ht[2]);let c=this.camera.vp(s,r,a);s=c.x,r=c.y,c=this.camera.vp(i,e,o),i=c.x,e=c.y,c=this.camera.vp(t,n,l),t=c.x,n=c.y}this.nativeContext.bezierCurveTo(i,e,t,n,s,r)}closePath(){this.nativeContext.closePath()}ellipse(i,e,t,n,s,r,a,o){o==null?this.nativeContext.ellipse(i,e,t,n,s,r,a):this.nativeContext.ellipse(i,e,t,n,s,r,a,o)}lineTo(i,e,t){if(t=t||0,this.camera){this.modelMatrix&&(ua(ht,[i,e,t],this.modelMatrix),i=ht[0],e=ht[1],t=ht[2]);const n=this.camera.vp(i,e,t);i=n.x,e=n.y}this.nativeContext.lineTo(i,e)}moveTo(i,e,t){if(t=t||0,this.camera){this.modelMatrix&&(ua(ht,[i,e,t],this.modelMatrix),i=ht[0],e=ht[1],t=ht[2]);const n=this.camera.vp(i,e,t);i=n.x,e=n.y}this.nativeContext.moveTo(i,e)}quadraticCurveTo(i,e,t,n,s){if(s=s||0,this.camera){let r=s;this.modelMatrix&&(ua(ht,[i,e,s],this.modelMatrix),i=ht[0],e=ht[1],r=ht[2],ua(ht,[t,n,s],this.modelMatrix),t=ht[0],n=ht[1],s=ht[2]);let a=this.camera.vp(t,n,s);t=a.x,n=a.y,a=this.camera.vp(i,e,r),i=a.x,e=a.y}this.nativeContext.quadraticCurveTo(i,e,t,n)}rect(i,e,t,n,s){s=s||0,this.camera?(this.moveTo(i,e,s),this.lineTo(i+t,e,s),this.lineTo(i+t,e+n,s),this.lineTo(i,e+n,s),this.closePath()):this.nativeContext.rect(i,e,t,n)}createImageData(){const i=arguments;return i.length===2?this.nativeContext.createImageData(i[0],i[1]):i.length===1?this.nativeContext.createImageData(i[0]):null}createLinearGradient(i,e,t,n){return isFinite(i+e+t+n)||(i=0,e=0,t=0,n=0),this.nativeContext.createLinearGradient(i,e,t,n)}createPattern(i,e){return i.width===0||i.height===0?null:this.nativeContext.createPattern(i,e)}createRadialGradient(i,e,t,n,s,r){return this.nativeContext.createRadialGradient(i,e,t,n,s,r)}createConicGradient(i,e,t,n){let s,r=!1;const a=this;return{stops:[],addColorStop(o,l){this.stops.push([o,l]),r=!0},GetPattern(o,l,c){return r&&(c||(c=n-t),s=jZe(a,this.stops,i,e,c,t,n,o,l),r=!1),s}}}fill(i,e){this.disableFill||(i?this.nativeContext.fill(i):this.nativeContext.fill())}fillRect(i,e,t,n){this.nativeContext.fillRect(i,e,t,n)}clearRect(i,e,t,n){this.nativeContext.clearRect(i,e,t,n)}project(i,e,t){if(t=t||0,this.camera){this.modelMatrix&&(ua(ht,[i,e,t],this.modelMatrix),i=ht[0],e=ht[1],t=ht[2]);const n=this.camera.vp(i,e,t);i=n.x,e=n.y}return{x:i,y:e}}view(i,e,t){return t=t||0,this.camera?(this.modelMatrix&&(ua(ht,[i,e,t],this.modelMatrix),i=ht[0],e=ht[1],t=ht[2]),this.camera.view(i,e,t)):[i,e,t]}fillText(i,e,t,n){if(n=n||0,this.camera){this.modelMatrix&&(ua(ht,[e,t,n],this.modelMatrix),e=ht[0],t=ht[1],n=ht[2]);const s=this.camera.vp(e,t,n);e=s.x,t=s.y}this.nativeContext.fillText(i,e,t)}getImageData(i,e,t,n){return this.nativeContext.getImageData(i,e,t,n)}getLineDash(){return this.nativeContext.getLineDash()}isPointInPath(i,e){return this.nativeContext.isPointInPath(i,e)}isPointInStroke(i,e){return this.nativeContext.isPointInStroke(i,e)}measureText(i,e=ue.global.measureTextMethod){var t,n;if(!e||e==="native")return this.nativeContext.measureText(i);this.mathTextMeasure||(this.mathTextMeasure=ue.graphicUtil.createTextMeasureInstance({},{},()=>this.canvas.nativeCanvas));const s=(t=this.fontFamily)!==null&&t!==void 0?t:bc.fontFamily,r=(n=this.fontSize)!==null&&n!==void 0?n:bc.fontSize;return this.mathTextMeasure.textSpec.fontFamily===s&&this.mathTextMeasure.textSpec.fontSize===r||(this.mathTextMeasure.textSpec.fontFamily=s,this.mathTextMeasure.textSpec.fontSize=r,this.mathTextMeasure._numberCharSize=null,this.mathTextMeasure._fullCharSize=null,this.mathTextMeasure._letterCharSize=null,this.mathTextMeasure._specialCharSizeMap={}),this.mathTextMeasure.measure(i,e)}putImageData(i,e,t){this.nativeContext.putImageData(i,e,t)}setLineDash(i){const e=arguments,t=this.nativeContext;this.nativeContext.setLineDash?e[0]&&t.setLineDash(e[0]):"mozDash"in t?t.mozDash=e[0]:"webkitLineDash"in t&&(t.webkitLineDash=e[0])}stroke(i){this.disableStroke||(i?this.nativeContext.stroke(i):this.nativeContext.stroke())}strokeRect(i,e,t,n){this.nativeContext.strokeRect(i,e,t,n)}strokeText(i,e,t,n){if(n=n||0,this.camera){this.modelMatrix&&(ua(ht,[e,t,n],this.modelMatrix),e=ht[0],t=ht[1],n=ht[2]);const s=this.camera.vp(e,t,n);e=s.x,t=s.y}this.nativeContext.strokeText(i,e,t)}drawImage(){const i=this.nativeContext,e=arguments;e.length===3?i.drawImage(e[0],e[1],e[2]):e.length===5?i.drawImage(e[0],e[1],e[2],e[3],e[4]):e.length===9&&i.drawImage(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}setCommonStyle(i,e,t,n,s){if(Array.isArray(s)){if(s.length<=1)return this._setCommonStyle(i,e,t,n,s[0]);const r=Object.create(s[0]);return s.forEach((a,o)=>{o!==0&&Object.assign(r,a)}),this._setCommonStyle(i,e,t,n,r)}return this._setCommonStyle(i,e,t,n,s)}_setCommonStyle(i,e,t,n,s){const r=this.nativeContext;s||(s=this.fillAttributes);const{fillOpacity:a=s.fillOpacity,opacity:o=s.opacity,fill:l=s.fill}=e;r.globalAlpha=a*o*this.baseGlobalAlpha,a>1e-12&&o>1e-12&&(r.fillStyle=GD(this,l,i,t,n))}setShadowBlendStyle(i,e,t){if(Array.isArray(t)){if(t.length<=1)return this._setShadowBlendStyle(i,t[0]);const n=Object.create(t[0]);return t.forEach((s,r)=>{r!==0&&Object.assign(n,s)}),this._setShadowBlendStyle(i,e,n)}return this._setShadowBlendStyle(i,e,t)}_setShadowBlendStyle(i,e,t){const n=this.nativeContext;t||(t=this.fillAttributes);const{opacity:s=t.opacity,shadowBlur:r=t.shadowBlur,shadowColor:a=t.shadowColor,shadowOffsetX:o=t.shadowOffsetX,shadowOffsetY:l=t.shadowOffsetY,blur:c=t.blur,globalCompositeOperation:u=t.globalCompositeOperation}=e;s<=1e-12||(r||o||l?(n.shadowBlur=r*this.dpr,n.shadowColor=a,n.shadowOffsetX=o*this.dpr,n.shadowOffsetY=l*this.dpr,this._clearShadowStyle=!0):this._clearShadowStyle&&(n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0),c?(n.filter=`blur(${c}px)`,this._clearFilterStyle=!0):this._clearFilterStyle&&(n.filter="blur(0px)",this._clearFilterStyle=!1),u?(n.globalCompositeOperation=u,this._clearGlobalCompositeOperationStyle=!0):this._clearGlobalCompositeOperationStyle&&(n.globalCompositeOperation="source-over",this._clearGlobalCompositeOperationStyle=!1))}setStrokeStyle(i,e,t,n,s){if(Array.isArray(s)){if(s.length<=1)return this._setStrokeStyle(i,e,t,n,s[0]);const r=Object.create(s[0]);return s.forEach((a,o)=>{o!==0&&Object.assign(r,a)}),this._setStrokeStyle(i,e,t,n,r)}return this._setStrokeStyle(i,e,t,n,s)}_setStrokeStyle(i,e,t,n,s){const r=this.nativeContext;s||(s=this.strokeAttributes);const{strokeOpacity:a=s.strokeOpacity,opacity:o=s.opacity}=e;if(r.globalAlpha=a*o*this.baseGlobalAlpha,a>1e-12&&o>1e-12){const{lineWidth:l=s.lineWidth,stroke:c=s.stroke,lineJoin:u=s.lineJoin,lineDash:h=s.lineDash,lineCap:d=s.lineCap,miterLimit:p=s.miterLimit}=e;r.lineWidth=Uu(this,l,this.dpr),r.strokeStyle=GD(this,c,i,t,n),r.lineJoin=u,h&&r.setLineDash(h),r.lineCap=d,r.miterLimit=p}}setTextStyleWithoutAlignBaseline(i,e,t){const n=this.nativeContext;e||(e=this.textAttributes);const{scaleIn3d:s=e.scaleIn3d}=i;i.font?n.font=i.font:n.font=wA(i,e,s&&this.camera&&this.camera.getProjectionScale(t));const{fontFamily:r=e.fontFamily,fontSize:a=e.fontSize}=i;this.fontFamily=r,this.fontSize=a,n.textAlign="left",n.textBaseline="alphabetic"}setTextStyle(i,e,t){var n,s;const r=this.nativeContext;e||(e=this.textAttributes),i.font?r.font=i.font:r.font=wA(i,e,this.camera&&this.camera.getProjectionScale(t));const{fontFamily:a=e.fontFamily,fontSize:o=e.fontSize}=i;this.fontFamily=a,this.fontSize=o,r.textAlign=(n=i.textAlign)!==null&&n!==void 0?n:e.textAlign,r.textBaseline=(s=i.textBaseline)!==null&&s!==void 0?s:e.textBaseline}draw(){}clearMatrix(i=!0,e=this.dpr){this.setTransformFromMatrix(this._clearMatrix,i,e)}setClearMatrix(i,e,t,n,s,r){this._clearMatrix.setValue(i,e,t,n,s,r)}onlyTranslate(i=this.dpr){return this.matrix.a===i&&this.matrix.b===0&&this.matrix.c===0&&this.matrix.d===i}release(...i){this.stack.forEach(e=>ba.free(e)),this.stack.length=0}};Wm.env="browser",Wm=kit([Oe(),Tit("design:paramtypes",[Object,Number])],Wm);var Pit=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},Oit=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let Gm=class extends z5{constructor(i){super(i)}init(i){const{container:e}=i;if(typeof e=="string"){const t=ue.global.getElementById(e);t&&(this._container=t)}else this._container=e;this._context=new Wm(this,this._dpr),this.initStyle()}initStyle(){if(!this.controled)return;const{nativeCanvas:i}=this;i.width=this._pixelWidth,i.height=this._pixelHeight,!i.style||this.setCanvasStyle(i,this._x,this._y,this._displayWidth,this._displayHeight),this._container&&this._container.appendChild(i),this.visiable||this.hide()}hide(){this._nativeCanvas&&(this._nativeCanvas.style.display="none")}show(){this._nativeCanvas&&(this._nativeCanvas.style.display="block")}applyPosition(){const i=this._nativeCanvas;i.style.position="absolute",i.style.top=`${this._y}px`,i.style.left=`${this._x}px`}resetStyle(i){if(!this.controled)return;const{width:e=this._displayWidth,height:t=this._displayHeight,dpr:n=this._dpr,x:s=this._x,y:r=this._y}=i,{nativeCanvas:a}=this;a.width=e*n,a.height=t*n,!a.style||this.setCanvasStyle(a,s,r,e,t),i.id&&(a.id=i.id),this.visiable||this.hide()}setCanvasStyle(i,e,t,n,s){this.controled&&(i.style.width=`${n}px`,i.style.height=`${s}px`)}toDataURL(i,e){return i==="image/jpeg"?this._nativeCanvas.toDataURL(i,e):i==="image/png"?this._nativeCanvas.toDataURL(i):this._nativeCanvas.toDataURL(i,e)}resize(i,e){this.controled&&(this._pixelWidth=i*this._dpr,this._pixelHeight=e*this._dpr,this._displayWidth=i,this._displayHeight=e,this._nativeCanvas.style&&(this._nativeCanvas.style.width=`${i}px`,this._nativeCanvas.style.height=`${e}px`),this._nativeCanvas.width=this._pixelWidth,this._nativeCanvas.height=this._pixelHeight,this._context.dpr=this._dpr)}};Gm.env="browser",Gm=Pit([Oe(),Oit("design:paramtypes",[Object])],Gm);function _ae(i,e){return new Ge(t=>{t(wre).toDynamicValue(()=>n=>new i(n)).whenTargetNamed(i.env),t(jqe).toDynamicValue(()=>(n,s)=>new e(n,s)).whenTargetNamed(e.env)})}const Mit=_ae(Gm,Wm);var Iit=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},Rit=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},g_=function(i,e){return function(t,n){e(t,n,i)}};let ym=class extends uF{constructor(i,e,t){super(t),this.contributions=i,this.drawContribution=e,this.pickItemInterceptorContributions=t,this.global.hooks.onSetEnv.tap("canvas-picker-service",(n,s,r)=>{this.configure(r,s)}),this.configure(this.global,this.global.env),this.pickerMap=new Map,this.init()}init(){this.contributions.getContributions().forEach(i=>{this.pickerMap.set(i.numberType,i)}),super._init()}configure(i,e){this.pickCanvas=Sy.shareCanvas(),this.pickContext=this.pickCanvas.getContext("2d")}pickItem(i,e,t,n){if(i.attribute.pickable===!1)return null;if(this.InterceptorContributions.length)for(let l=0;l<this.InterceptorContributions.length;l++){const c=this.InterceptorContributions[l];if(c.beforePickItem){const u=c.beforePickItem(i,this,e,n,{parentMatrix:t});if(u)return u}}const s=this.pickerMap.get(i.numberType);if(!s)return null;const r=s.contains(i,e,n),a=r?i:null,o={graphic:a,params:r};if(a)return o;if(this.InterceptorContributions.length)for(let l=0;l<this.InterceptorContributions.length;l++){const c=this.InterceptorContributions[l];if(c.afterPickItem){const u=c.afterPickItem(i,this,e,n,{parentMatrix:t});if(u)return u}}return o}};ym=Iit([Oe(),g_(0,rt($n)),g_(0,rs(ms)),g_(1,rt(R5)),g_(2,rt($n)),g_(2,rs(fm)),Rit("design:paramtypes",[Object,Object,Object])],ym);var Lit=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};let _F=class{constructor(){this.type="group",this.numberType=v5}contains(i,e,t){return!1}};_F=Lit([Oe()],_F);const kk=new Ge((i,e,t,n)=>{kk.__vloaded||(kk.__vloaded=!0,i(fW).to(_F).inSingletonScope(),i(ms).toService(fW),Es(i,ms))});kk.__vloaded=!1;const Dit=new Ge((i,e,t,n)=>{t(ym)||i(ym).toSelf().inSingletonScope(),t(Um)?n(Um).toService(ym):i(Um).toService(ym)});function Fit(i){i.load(kk),i.load(Dit)}var z_,Bit=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},jit=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let bh=z_=class extends Ck{get container(){return this.canvas.nativeCanvas.parentElement}static GenerateCanvasId(){return`${z_.idprefix}_${z_.prefix_count++}`}constructor(){super(),this.type="browser",this._canvasIsIntersecting=!0,this.global=ue.global,this.viewBox=new Qi,this.modelMatrix=new Zi(1,0,0,1,0,0)}getTitle(){return this.canvas.id&&this.canvas.id.toString()}getWH(){return{width:this.canvas.width/(this.canvas.dpr||1),height:this.canvas.height/(this.canvas.dpr||1)}}getXY(){return this.canvas.nativeCanvas.getBoundingClientRect()}createWindow(i){i.canvas?this.createWindowByCanvas(i):this.createWindowByConfig(i),this.postInit()}postInit(){if(this.global.optimizeVisible)try{this.observerCanvas()}catch{console.error("IntersectionObserver")}}isElementVisible(i){const e=i.getBoundingClientRect(),t=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight;return!(e.right<0||e.bottom<0||e.left>t||e.top>n)}observerCanvas(){this._canvasIsIntersecting=this.isElementVisible(this.canvas.nativeCanvas);const i=new IntersectionObserver((e,t)=>{e.forEach(n=>{this._canvasIsIntersecting!==n.isIntersecting?(this._canvasIsIntersecting=n.isIntersecting,this._onVisibleChangeCb&&this._onVisibleChangeCb(n.isIntersecting)):this._canvasIsIntersecting=n.isIntersecting})});i&&i.observe(this.canvas.nativeCanvas)}createWindowByConfig(i){const e=this.global.createCanvas({width:i.width,height:i.height});let t;if(t=typeof i.container=="string"?this.global.getElementById(i.container):i.container?i.container:this.global.getRootElement(),!t)throw new Error("containerId");i.offscreen?t=null:t.appendChild(e);const n={width:i.width,height:i.height,dpr:i.dpr,nativeCanvas:e,container:t,id:z_.GenerateCanvasId(),canvasControled:!0};this.canvas=new Gm(n)}createWindowByCanvas(i){var e;let t;if(typeof i.canvas=="string"){if(t=this.global.getElementById(i.canvas),!t)throw new Error("canvasId canvasdom")}else t=i.canvas;if(!t)throw new Error("canvas");let n=i.width,s=i.height;if(n==null||s==null||!i.canvasControled){const a=t.getBoundingClientRect();n=a.width,s=a.height}let r=i.dpr;r==null&&(r=(e=t.getContext("2d").pixelRatio)!==null&&e!==void 0?e:t.width/n),this.canvas=new Gm({width:n,height:s,dpr:r,nativeCanvas:t,canvasControled:i.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(i,e){this.canvas.resize(i,e)}setDpr(i){this.canvas.dpr=i}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}addEventListener(i,e,t){return this.canvas.nativeCanvas.addEventListener(i,e,t)}removeEventListener(i,e,t){return this.canvas.nativeCanvas.removeEventListener(i,e,t)}dispatchEvent(i){return this.canvas.nativeCanvas.dispatchEvent(i)}getStyle(){var i;return(i=this.canvas.nativeCanvas.style)!==null&&i!==void 0?i:{}}setStyle(i){this.canvas.nativeCanvas.style=i}getBoundingClientRect(){const i=this.canvas.nativeCanvas,e=this.getWH();return i.parentElement?this.canvas.nativeCanvas.getBoundingClientRect():{x:0,y:0,width:e.width,height:e.height,left:0,top:0,right:0,bottom:0}}clearViewBox(i){const e=this.viewBox,t=this.getContext(),n=this.getDpr();t.nativeContext.save(),t.nativeContext.setTransform(n,0,0,n,0,0),t.clearRect(e.x1,e.y1,e.x2-e.x1,e.y2-e.y1),i&&(t.fillStyle=i,t.fillRect(e.x1,e.y1,e.x2-e.x1,e.y2-e.y1)),t.nativeContext.restore()}isVisible(i){return this._canvasIsIntersecting}onVisibleChange(i){this._onVisibleChangeCb=i}getTopLeft(i){return this.global.getElementTopLeft(this.canvas.nativeCanvas,i)}};bh.env="browser",bh.idprefix="visactor_window",bh.prefix_count=0,bh=z_=Bit([Oe(),jit("design:paramtypes",[])],bh);const Nit=new Ge(i=>{i(bh).toSelf(),i(g5).toDynamicValue(e=>e.container.get(bh)).whenTargetNamed(bh.env)});var $it=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},zit=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};class Hit{get x1(){return this.dom.getBoundingClientRect().left}get x2(){return this.dom.getBoundingClientRect().right}get y1(){return this.dom.getBoundingClientRect().top}get y2(){return this.dom.getBoundingClientRect().bottom}get width(){return this.dom.getBoundingClientRect().width}get height(){return this.dom.getBoundingClientRect().height}constructor(e){this.dom=e}}function mW(i,e=!1){const t=document.createElement("img");if(t.crossOrigin="anonymous",e){const n=new Blob([i],{type:"image/svg+xml"});i=window.URL.createObjectURL(n)}return t.src=i,t.complete?Promise.resolve(t):new Promise((n,s)=>{t.onload=()=>{n(t)},t.onerror=()=>{s(new Error(""))}})}let Tk=class extends Sk{constructor(){super(),this.type="browser",this.supportEvent=!0;try{this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.supportsMouseEvents=!!globalThis.MouseEvent}catch{this.supportsTouchEvents=!1,this.supportsPointerEvents=!1,this.supportsPointerEvents=!1}this.applyStyles=!0}mapToCanvasPoint(i,e){var t,n;let s=0,r=0,a=0,o=0;if(i.changedTouches){const l=(t=i.changedTouches[0])!==null&&t!==void 0?t:{};s=l.clientX||0,r=l.clientY||0,a=s,o=r}else s=i.clientX||0,r=i.clientY||0,a=i.offsetX||0,o=i.offsetY||0;if(e){const l=s,c=r,u=e.getBoundingClientRect(),h=(n=e.getNativeHandler)===null||n===void 0?void 0:n.call(e).nativeCanvas;let d,p;return h&&(d=u.width/h.offsetWidth,p=u.height/h.offsetHeight),{x:(l-u.left)/(Z(d)?d:1),y:(c-u.top)/(Z(p)?p:1)}}return{x:a,y:o}}getNativeAABBBounds(i){let e=i;if(typeof i=="string"&&(e=new DOMParser().parseFromString(i,"text/html").firstChild,e.lastChild&&(e=e.lastChild.firstChild)),e.getBoundingClientRect){const t=e.getBoundingClientRect();return new Hit(t)}return new Qi}removeDom(i){return i.parentElement.removeChild(i),!0}updateDom(i,e){const{width:t,height:n,style:s}=e;return s&&(be(s)?i.setAttribute("style",s):Object.keys(s).forEach(r=>{i.style[r]=s[r]})),t!=null&&(i.style.width=`${t}px`),n!=null&&(i.style.height=`${n}px`),!0}createDom(i){const{tagName:e="div",parent:t}=i,n=document.createElement(e);if(this.updateDom(n,i),t){const s=be(t)?this.getElementById(t):t;s&&s.appendChild&&s.appendChild(n)}return n}loadImage(i){return mW(i,!1).then(e=>({data:e,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadSvg(i){return mW(i,!0).then(e=>({data:e,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}createCanvas(i){var e,t;const n=document.createElement("canvas");i.id&&(n.id=(e=i.id)!==null&&e!==void 0?e:zn.GenAutoIncrementId().toString());const s=(t=i.dpr)!==null&&t!==void 0?t:window.devicePixelRatio;return i.width&&i.height&&(n.style.width=`${i.width}px`,n.style.height=`${i.height}px`,n.width=i.width*s,n.height=i.height*s),n}createOffscreenCanvas(i){var e;const t=(e=i.dpr)!==null&&e!==void 0?e:window.devicePixelRatio;return new OffscreenCanvas(i.width*t,i.height*t)}releaseCanvas(i){let e;e=typeof i=="string"?document.getElementById(i):i,e&&e.parentElement&&e.parentElement.removeChild(e)}getDevicePixelRatio(){return window.devicePixelRatio}getRequestAnimationFrame(){return window.requestAnimationFrame}getCancelAnimationFrame(){return window.cancelAnimationFrame}addEventListener(i,e,t){return document.addEventListener(i,e,t)}removeEventListener(i,e,t){return document.removeEventListener(i,e,t)}dispatchEvent(i){return document.dispatchEvent(i)}getElementById(i){return document.getElementById(i)}getRootElement(){return document.body}getDocument(){return document}release(...i){}getElementTop(i,e){let t=i.offsetTop,n=i.offsetParent;for(;n!==null;)t+=n.offsetTop,n=n.offsetParent;return t}getElementLeft(i,e){let t=i.offsetLeft,n=i.offsetParent;for(;n!==null;)t+=n.offsetLeft,n=n.offsetParent;return t}getElementTopLeft(i,e){let t=i.offsetTop,n=i.offsetLeft,s=i.offsetParent;for(;s!==null;)t+=s.offsetTop,n+=s.offsetLeft,s=s.offsetParent;return{top:t,left:n}}};Tk=$it([Oe(),zit("design:paramtypes",[])],Tk);const Ek=new Ge(i=>{Ek.isBrowserBound||(Ek.isBrowserBound=!0,i(Tk).toSelf().inSingletonScope(),i(LP).toService(Tk))});Ek.isBrowserBound=!1;function Pk(i,e=!0){Pk.__loaded||(Pk.__loaded=!0,i.load(Ek),i.load(Mit),i.load(Nit),e&&Fit(i))}Pk.__loaded=!1;class Ll{contains(e,t,n){if(!e.AABBBounds.containsPoint(t))return!1;if(e.attribute.pickMode==="imprecise")return!0;const{pickContext:s}=n??{};if(!s)return!1;const r=e.getGraphicTheme();s.highPerformanceSave();let{x:a=r.x,y:o=r.y}=e.attribute;if(e.transMatrix.onlyTranslate()){const c=e.getOffsetXY(r);a+=c.x,o+=c.y,s.setTransformForCurrent()}else a=0,o=0,s.transformFromMatrix(e.transMatrix,!0);let l=!1;return this.canvasRenderer.drawShape(e,s,a,o,{},null,(c,u,h)=>!!l||(l=c.isPointInPath(t.x,t.y),l),(c,u,h)=>{if(l)return!0;const d=u.lineWidth||h.lineWidth,p=u.pickStrokeBuffer||h.pickStrokeBuffer;return s.lineWidth=Uu(s,d+p,s.dpr),l=c.isPointInStroke(t.x,t.y),l}),s.highPerformanceRestore(),l}}var Vit=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},Uit=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},Wit=function(i,e){return function(t,n){e(t,n,i)}};let vF=class extends Ll{constructor(i){super(),this.canvasRenderer=i,this.type="arc",this.numberType=jP}};vF=Vit([Oe(),Wit(0,rt(ik)),Uit("design:paramtypes",[Object])],vF);let yW=!1;const Git=new Ge((i,e,t,n)=>{yW||(yW=!0,i(VU).to(vF).inSingletonScope(),i(Wu).toService(VU))});var Kit=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},Xit=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},Yit=function(i,e){return function(t,n){e(t,n,i)}};let bF=class extends Ll{constructor(i){super(),this.canvasRenderer=i,this.type="area",this.numberType=Px}};bF=Kit([Oe(),Yit(0,rt(nk)),Xit("design:paramtypes",[Object])],bF);let _W=!1;const qit=new Ge((i,e,t,n)=>{_W||(_W=!0,i(UU).to(bF).inSingletonScope(),i(Wu).toService(UU))});var Zit=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},Jit=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},Qit=function(i,e){return function(t,n){e(t,n,i)}};let xF=class extends Ll{constructor(i){super(),this.canvasRenderer=i,this.type="circle",this.numberType=$P}};xF=Zit([Oe(),Qit(0,rt(sk)),Jit("design:paramtypes",[Object])],xF);let vW=!1;const ent=new Ge((i,e,t,n)=>{vW||(vW=!0,i(WU).to(xF).inSingletonScope(),i(Wu).toService(WU))});class vae{constructor(){this.type="glyph",this.numberType=_5}contains(e,t,n){if(!e.AABBBounds.containsPoint(t))return!1;if(e.attribute.pickMode==="imprecise")return!0;const{pickContext:s}=n??{};if(!s)return!1;const r=n==null?void 0:n.pickerService;if(r){let a=!1;return e.getSubGraphic().forEach(o=>{if(a)return;const l=r.pickItem(o,t,null,n);a=!(!l||!l.graphic)}),a}return!1}}var tnt=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},int=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},nnt=function(i,e){return function(t,n){e(t,n,i)}};let Ok=class extends vae{constructor(i){super(),this.canvasRenderer=i}};Ok=tnt([Oe(),nnt(0,rt(uk)),int("design:paramtypes",[Object])],Ok);let bW=!1;const snt=new Ge((i,e,t,n)=>{bW||(bW=!0,i(JU).to(Ok).inSingletonScope(),i(Ok).toService(JU))});var rnt=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};let Ey=class{constructor(){this.type="image",this.numberType=zP}contains(i,e,t){const{pickContext:n}=t??{};return!!n&&!!i.AABBBounds.containsPoint(e)}};Ey=rnt([Oe()],Ey);let xW=!1;const ant=new Ge((i,e,t,n)=>{xW||(xW=!0,i(Ak).to(Ey).inSingletonScope(),i(Ey).toService(Ak))});var ont=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},lnt=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},cnt=function(i,e){return function(t,n){e(t,n,i)}};let SF=class extends Ll{constructor(i){super(),this.canvasRenderer=i,this.type="line",this.numberType=Ox}};SF=ont([Oe(),cnt(0,rt(rk)),lnt("design:paramtypes",[Object])],SF);let SW=!1;const unt=new Ge((i,e,t,n)=>{SW||(SW=!0,i(GU).to(SF).inSingletonScope(),i(Wu).toService(GU))});var hnt=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},dnt=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},pnt=function(i,e){return function(t,n){e(t,n,i)}};let CF=class extends Ll{constructor(i){super(),this.canvasRenderer=i,this.type="polygon",this.numberType=VP}};CF=hnt([Oe(),pnt(0,rt(ok)),dnt("design:paramtypes",[Object])],CF);let CW=!1;const fnt=new Ge((i,e,t,n)=>{CW||(CW=!0,i(ZU).to(CF).inSingletonScope(),i(Wu).toService(ZU))});var gnt=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},mnt=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},ynt=function(i,e){return function(t,n){e(t,n,i)}};let wF=class extends Ll{constructor(i){super(),this.canvasRenderer=i,this.type="path",this.numberType=HP}};wF=gnt([Oe(),ynt(0,rt(ak)),mnt("design:paramtypes",[Object])],wF);let wW=!1;const _nt=new Ge((i,e,t,n)=>{wW||(wW=!0,i(KU).to(wF).inSingletonScope(),i(Wu).toService(KU))}),TI=new Qi;class bae{constructor(){this.type="rect",this.numberType=x5}contains(e,t,n){if(!e.AABBBounds.containsPoint(t))return!1;if(e.attribute.pickMode==="imprecise")return!0;const{pickContext:s}=n??{};if(!s)return!1;const r=e.getGraphicTheme(),{cornerRadius:a=r.cornerRadius}=e.attribute;let{x:o=r.x,y:l=r.y}=e.attribute;s.highPerformanceSave();let c=!0;if(e.transMatrix.onlyTranslate()){const h=e.getOffsetXY(r);o+=h.x,l+=h.y,s.setTransformForCurrent()}else o=0,l=0,c=!1,s.transformFromMatrix(e.transMatrix,!0);let u=!0;if(!c||e.shadowRoot||ye(a,!0)&&a!==0||ie(a)&&a.some(h=>h!==0))u=!1,this.canvasRenderer.drawShape(e,s,o,l,{},null,(h,d,p)=>!!u||(u=h.isPointInPath(t.x,t.y),u),(h,d,p)=>{if(u)return!0;const f=d.lineWidth||p.lineWidth,g=d.pickStrokeBuffer||p.pickStrokeBuffer;return s.lineWidth=Uu(s,f+g,s.dpr),u=h.isPointInStroke(t.x,t.y),u});else{const{fill:h=r.fill,stroke:d=r.stroke,lineWidth:p=r.lineWidth}=e.attribute;if(h)u=!0;else if(d){const f=e.AABBBounds;TI.setValue(f.x1,f.y1,f.x2,f.y2),TI.expand(-p/2),u=!TI.containsPoint(t)}}return s.highPerformanceRestore(),u}}var vnt=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},bnt=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},xnt=function(i,e){return function(t,n){e(t,n,i)}};let AF=class extends bae{constructor(i){super(),this.canvasRenderer=i}};AF=vnt([Oe(),xnt(0,rt(lk)),bnt("design:paramtypes",[Object])],AF);let AW=!1;const Snt=new Ge((i,e,t,n)=>{AW||(AW=!0,i(XU).to(AF).inSingletonScope(),i(Wu).toService(XU))});let kW=!1;const Cnt=new Ge((i,e,t,n)=>{kW||(kW=!0,i(Ak).to(Ey).inSingletonScope(),i(Ey).toService(Ak))});var wnt=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},Ant=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},knt=function(i,e){return function(t,n){e(t,n,i)}};let kF=class extends Ll{constructor(i){super(),this.canvasRenderer=i,this.type="symbol",this.numberType=UP}};kF=wnt([Oe(),knt(0,rt(ck)),Ant("design:paramtypes",[Object])],kF);let TW=!1;const Tnt=new Ge((i,e,t,n)=>{TW||(TW=!0,i(YU).to(kF).inSingletonScope(),i(Wu).toService(YU))});var Ent=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};let TF=class{constructor(){this.type="text",this.numberType=WP}contains(i,e,t){return!!i.AABBBounds.containsPoint(e)}};TF=Ent([Oe()],TF);let EW=!1;const Pnt=new Ge((i,e,t,n)=>{EW||(EW=!0,i(qU).to(TF).inSingletonScope(),i(Wu).toService(qU))});var Ont=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},Mnt=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let pv=class extends Wm{constructor(i,e){super(i,e);const t=i.nativeCanvas.getContext("2d");if(!t)throw new Error("2d");this.nativeContext=t,this.canvas=i,this.matrix=new Zi(1,0,0,1,0,0),this.stack=[],this.dpr=e??1}release(...i){}};pv.env="node",pv=Ont([Oe(),Mnt("design:paramtypes",[Object,Number])],pv);var Int=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},Rnt=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let Km=class extends z5{constructor(i){super(i)}init(){this._context=new pv(this,this._dpr),this.nativeCanvas.width=this._pixelWidth,this.nativeCanvas.height=this._pixelHeight}release(...i){this._nativeCanvas.release&&ee(this._nativeCanvas.release)&&this._nativeCanvas.release()}};Km.env="node",Km=Int([Oe(),Rnt("design:paramtypes",[Object])],Km);const Lnt=_ae(Km,pv);var Dnt=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},Fnt=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},Bnt=function(i,e){return function(t,n){e(t,n,i)}};let Xm=class extends Ck{get container(){return null}constructor(i){super(),this.global=i,this.type="node"}getTitle(){return""}getWH(){return{width:this.canvas.displayWidth,height:this.canvas.displayHeight}}getXY(){return{x:0,y:0}}createWindow(i){i.canvas?this.createWindowByCanvas(i):this.createWindowByConfig(i)}createWindowByConfig(i){const e=this.global.createCanvas({width:i.width,height:i.height}),t={width:i.width,height:i.height,dpr:i.dpr,nativeCanvas:e,id:zn.GenAutoIncrementId().toString(),canvasControled:!0};this.canvas=new Km(t)}createWindowByCanvas(i){const e=i.canvas;let t=i.width,n=i.height;t!=null&&n!=null&&i.canvasControled||(t=e.width,n=e.height),this.canvas=new Km({width:t,height:n,dpr:1,nativeCanvas:e,canvasControled:i.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(i,e){this.canvas.resize(i,e)}setDpr(i){this.canvas.dpr=i}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}getImageBuffer(i="image/png"){return this.canvas.nativeCanvas.toBuffer(i)}addEventListener(i,e,t){}dispatchEvent(i){return!0}removeEventListener(i,e,t){}getStyle(){}setStyle(i){}getBoundingClientRect(){return null}clearViewBox(i){}};Xm.env="node",Xm=Dnt([Oe(),Bnt(0,rt(h5)),Fnt("design:paramtypes",[Object])],Xm);const jnt=new Ge(i=>{i(Xm).toSelf(),i(g5).toDynamicValue(e=>e.container.get(Xm)).whenTargetNamed(Xm.env)});var Nnt=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};let Mk=class extends Sk{constructor(){super(...arguments),this.type="node",this._lastTime=0,this.supportEvent=!1}configure(i,e){i.env===this.type&&(i.setActiveEnvContribution(this),this.pkg=e)}getDynamicCanvasCount(){return 0}getStaticCanvasCount(){return 999}loadJson(i){const e=fetch(i).then(t=>t.json());return e.then(t=>({data:t,state:"success"})).catch(()=>({data:null,state:"fail"})),e}loadArrayBuffer(i){return fetch(i).then(e=>e.arrayBuffer()).then(e=>({data:e,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadImage(i){const{loadImage:e}=this.pkg;return e?e(i).then(t=>({loadState:t?"success":"fail",data:t})).catch(()=>({loadState:"fail",data:null})):Promise.reject(new Error("node-canvas loadImage could not be found!"))}loadSvg(i){const e=this.pkg.Resvg;if(!e)return Promise.reject(new Error("@resvg/resvg-js svgParser could not be found!"));const t=new e(i).render().asPng();return this.loadImage(t)}createCanvas(i){return this.pkg.createCanvas(i.width,i.height)}releaseCanvas(i){}getDevicePixelRatio(){return 1}getRequestAnimationFrame(){return function(i){return rV.call(i)}}getCancelAnimationFrame(){return i=>{rV.clear(i)}}addEventListener(i,e,t){}removeEventListener(i,e,t){}getElementById(i){return null}getRootElement(){return null}dispatchEvent(i){}release(...i){}createOffscreenCanvas(i){}};Mk=Nnt([Oe()],Mk);const Ik=new Ge(i=>{Ik.isNodeBound||(Ik.isNodeBound=!0,i(Mk).toSelf().inSingletonScope(),i(LP).toService(Mk))});Ik.isNodeBound=!1;function Rk(i,e=!0){Rk.__loaded||(Rk.__loaded=!0,i.load(Ik),i.load(Lnt),i.load(jnt))}Rk.__loaded=!1;var $nt=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},znt=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},Hnt=function(i,e){return function(t,n){e(t,n,i)}};let EF=class extends Ll{constructor(i){super(),this.canvasRenderer=i,this.type="arc",this.numberType=jP}};EF=$nt([Oe(),Hnt(0,rt(ik)),znt("design:paramtypes",[Object])],EF);let PW=!1;const Vnt=new Ge((i,e,t,n)=>{PW||(PW=!0,i(QU).to(EF).inSingletonScope(),i(ms).toService(QU))});var Unt=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},Wnt=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},Gnt=function(i,e){return function(t,n){e(t,n,i)}};let PF=class extends bae{constructor(i){super(),this.canvasRenderer=i}};PF=Unt([Oe(),Gnt(0,rt(lk)),Wnt("design:paramtypes",[Object])],PF);let OW=!1;const Knt=new Ge((i,e,t,n)=>{OW||(OW=!0,i(aW).to(PF).inSingletonScope(),i(ms).toService(aW))});class xae extends Er{contains(e,t,n){if(!e.AABBBounds.containsPoint(t))return!1;if(e.attribute.pickMode==="imprecise")return!0;const{pickContext:s}=n??{};if(!s)return!1;s.highPerformanceSave();const r=e.getGraphicTheme(),a=this.transform(e,r,s),{x:o,y:l,z:c,lastModelMatrix:u}=a;let h=t;if(s.camera){h=t.clone();const p=e.parent.globalTransMatrix;h.x=p.a*t.x+p.c*t.y+p.e,h.y=p.b*t.x+p.d*t.y+p.f}this.canvasRenderer.z=c;let d=!1;return this.canvasRenderer.drawShape(e,s,o,l,{},null,p=>!!d||(d=p.isPointInPath(h.x,h.y),d),(p,f,g)=>{if(d)return!0;const m=f.lineWidth||g.lineWidth,y=f.pickStrokeBuffer||g.pickStrokeBuffer;return s.lineWidth=Uu(s,m+y,s.dpr),d=p.isPointInStroke(h.x,h.y),d}),this.canvasRenderer.z=0,s.modelMatrix!==u&&Mi.free(s.modelMatrix),s.modelMatrix=u,s.highPerformanceRestore(),d}}var Xnt=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},Ynt=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},qnt=function(i,e){return function(t,n){e(t,n,i)}};let OF=class extends xae{constructor(i){super(),this.canvasRenderer=i,this.type="line",this.numberType=Ox}};OF=Xnt([Oe(),qnt(0,rt(rk)),Ynt("design:paramtypes",[Object])],OF);let MW=!1;const Znt=new Ge((i,e,t,n)=>{MW||(MW=!0,i(sW).to(OF).inSingletonScope(),i(ms).toService(sW))});var Jnt=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},Qnt=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},est=function(i,e){return function(t,n){e(t,n,i)}};let MF=class extends Ll{constructor(i){super(),this.canvasRenderer=i,this.type="area",this.numberType=Px}};MF=Jnt([Oe(),est(0,rt(nk)),Qnt("design:paramtypes",[Object])],MF);let IW=!1;const tst=new Ge((i,e,t,n)=>{IW||(IW=!0,i(tW).to(MF).inSingletonScope(),i(ms).toService(tW))});class Lx extends Er{contains(e,t,n){const{pickContext:s}=n??{};if(!s)return!1;const r=e.getGraphicTheme();s.highPerformanceSave();const a=this.transform(e,r,s),{x:o,y:l,z:c,lastModelMatrix:u}=a;let h=t;if(s.camera){h=t.clone();const p=e.parent.globalTransMatrix;h.x=p.a*t.x+p.c*t.y+p.e,h.y=p.b*t.x+p.d*t.y+p.f}this.canvasRenderer.z=c;let d=!1;return this.canvasRenderer.drawShape(e,s,o,l,n,null,(p,f,g)=>!!d||(d=p.isPointInPath(h.x,h.y),d)),this.canvasRenderer.z=0,s.modelMatrix!==u&&Mi.free(s.modelMatrix),s.modelMatrix=u,s.highPerformanceRestore(),d}}var ist=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},nst=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},sst=function(i,e){return function(t,n){e(t,n,i)}};let IF=class extends Lx{constructor(i){super(),this.canvasRenderer=i,this.type="symbol",this.numberType=UP}contains(i,e,t){const{pickContext:n}=t??{};if(!n)return!1;const s=i.getParsedPath();if(!n.camera){if(!i.AABBBounds.containsPoint(e))return!1;if(s.isSvg||i.attribute.pickMode==="imprecise")return!0}n.highPerformanceSave();const r=i.getGraphicTheme(),a=this.transform(i,r,n),{x:o,y:l,z:c,lastModelMatrix:u}=a;let h=e;if(n.camera){h=e.clone();const p=i.parent.globalTransMatrix;h.x=p.a*e.x+p.c*e.y+p.e,h.y=p.b*e.x+p.d*e.y+p.f}this.canvasRenderer.z=c;let d=!1;return this.canvasRenderer.drawShape(i,n,o,l,{},null,(p,f,g)=>!!d||(d=p.isPointInPath(h.x,h.y),d),(p,f,g)=>{if(d)return!0;const m=f.lineWidth||g.lineWidth,y=f.pickStrokeBuffer||g.pickStrokeBuffer;return n.lineWidth=Uu(n,m+y,n.dpr),d=p.isPointInStroke(h.x,h.y),d}),this.canvasRenderer.z=0,n.modelMatrix!==u&&Mi.free(n.modelMatrix),n.modelMatrix=u,n.highPerformanceRestore(),d}};IF=ist([Oe(),sst(0,rt(ck)),nst("design:paramtypes",[Object])],IF);let RW=!1;const rst=new Ge((i,e,t,n)=>{RW||(RW=!0,i(lW).to(IF).inSingletonScope(),i(ms).toService(lW))});var ast=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},ost=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},lst=function(i,e){return function(t,n){e(t,n,i)}};let RF=class extends Ll{constructor(i){super(),this.canvasRenderer=i,this.type="circle",this.numberType=$P}};RF=ast([Oe(),lst(0,rt(sk)),ost("design:paramtypes",[Object])],RF);let LW=!1;const cst=new Ge((i,e,t,n)=>{LW||(LW=!0,i(iW).to(RF).inSingletonScope(),i(ms).toService(iW))});var ust=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},hst=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},dst=function(i,e){return function(t,n){e(t,n,i)}};let LF=class extends Lx{constructor(i){super(),this.canvasRenderer=i,this.type="text",this.numberType=WP}contains(i,e,t){const{pickContext:n}=t??{};if(!n)return!1;const s=i.AABBBounds;if(!n.camera)return!!s.containsPoint(e);n.highPerformanceSave();const r=i.getGraphicTheme(),{keepDirIn3d:a=r.keepDirIn3d}=i.attribute,o=!a,l=this.transform(i,r,n,o),{x:c,y:u,z:h,lastModelMatrix:d}=l;this.canvasRenderer.z=h;let p=e;if(n.camera){p=e.clone();const g=i.parent.globalTransMatrix;p.x=g.a*e.x+g.c*e.y+g.e,p.y=g.b*e.x+g.d*e.y+g.f}let f=!1;return this.canvasRenderer.drawShape(i,n,c,u,{},null,(g,m,y)=>{if(f)return!0;const{fontSize:b=r.fontSize,textBaseline:x=r.textBaseline,textAlign:S=r.textAlign}=i.attribute,C=i.AABBBounds,w=C.height(),A=C.width(),T=iu(x,w,b),E=tu(S,A);return g.rect(E+c,T+u,A,w,h),f=g.isPointInPath(p.x,p.y),f},(g,m,y)=>f),this.canvasRenderer.z=0,n.modelMatrix!==d&&Mi.free(n.modelMatrix),n.modelMatrix=d,n.highPerformanceRestore(),f}};LF=ust([Oe(),dst(0,rt(eF)),hst("design:paramtypes",[Object])],LF);let DW=!1;const pst=new Ge((i,e,t,n)=>{DW||(DW=!0,i(cW).to(LF).inSingletonScope(),i(ms).toService(cW))});var fst=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},gst=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},mst=function(i,e){return function(t,n){e(t,n,i)}};let DF=class extends xae{constructor(i){super(),this.canvasRenderer=i,this.type="path",this.numberType=HP}};DF=fst([Oe(),mst(0,rt(ak)),gst("design:paramtypes",[Object])],DF);let FW=!1;const yst=new Ge((i,e,t,n)=>{FW||(FW=!0,i(rW).to(DF).inSingletonScope(),i(ms).toService(rW))});var _st=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},vst=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},bst=function(i,e){return function(t,n){e(t,n,i)}};let FF=class extends Ll{constructor(i){super(),this.canvasRenderer=i,this.type="polygon",this.numberType=VP}};FF=_st([Oe(),bst(0,rt(ok)),vst("design:paramtypes",[Object])],FF);let BW=!1;const xst=new Ge((i,e,t,n)=>{BW||(BW=!0,i(uW).to(FF).inSingletonScope(),i(ms).toService(uW))});var Sst=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},Cst=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},wst=function(i,e){return function(t,n){e(t,n,i)}};let BF=class extends vae{constructor(i){super(),this.canvasRenderer=i}};BF=Sst([Oe(),wst(0,rt(uk)),Cst("design:paramtypes",[Object])],BF);let jW=!1;const Ast=new Ge((i,e,t,n)=>{jW||(jW=!0,i(pW).to(BF).inSingletonScope(),i(ms).toService(pW))});var kst=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},Tst=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},Est=function(i,e){return function(t,n){e(t,n,i)}};let jF=class{constructor(i){this.canvasRenderer=i,this.type="richtext",this.numberType=C5}contains(i,e,t){return!!i.AABBBounds.containsPoint(e)}};jF=kst([Oe(),Est(0,rt(tF)),Tst("design:paramtypes",[Object])],jF);let NW=!1;const Pst=new Ge((i,e,t,n)=>{NW||(NW=!0,i(dW).to(jF).inSingletonScope(),i(ms).toService(dW))});var Ost=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};let NF=class{constructor(){this.type="image",this.numberType=zP}contains(i,e,t){const{pickContext:n}=t??{};return!!n&&!!i.AABBBounds.containsPoint(e)}};NF=Ost([Oe()],NF);let $W=!1;const Mst=new Ge((i,e,t,n)=>{$W||($W=!0,i(nW).to(NF).inSingletonScope(),i(ms).toService(nW))});var Ist=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},Rst=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},Lst=function(i,e){return function(t,n){e(t,n,i)}};let $F=class extends Lx{constructor(i){super(),this.canvasRenderer=i,this.type="rect3d",this.numberType=S5,this.themeType="rect"}};$F=Ist([Oe(),Lst(0,rt(QD)),Rst("design:paramtypes",[Object])],$F);let zW=!1;const Dst=new Ge((i,e,t,n)=>{zW||(zW=!0,i(oW).to($F).inSingletonScope(),i(ms).toService(oW))});var Fst=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},Bst=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},jst=function(i,e){return function(t,n){e(t,n,i)}};let zF=class extends Lx{constructor(i){super(),this.canvasRenderer=i,this.type="arc3d",this.numberType=NP,this.themeType="arc"}};zF=Fst([Oe(),jst(0,rt(JD)),Bst("design:paramtypes",[Object])],zF);let HW=!1;const Nst=new Ge((i,e,t,n)=>{HW||(HW=!0,i(eW).to(zF).inSingletonScope(),i(ms).toService(eW))});var $st=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a},zst=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},Hst=function(i,e){return function(t,n){e(t,n,i)}};let HF=class extends Lx{constructor(i){super(),this.canvasRenderer=i,this.type="pyramid3d",this.numberType=b5,this.themeType="polygon"}};HF=$st([Oe(),Hst(0,rt(iF)),zst("design:paramtypes",[Object])],HF);let VW=!1;const Vst=new Ge((i,e,t,n)=>{VW||(VW=!0,i(hW).to(HF).inSingletonScope(),i(ms).toService(hW))}),Oo=$5();function Lk(){Lk.__loaded||(Lk.__loaded=!0,Ftt(),We.load(ptt),We.load(Oo?Vnt:Git))}Lk.__loaded=!1;const O0=Lk;function Dk(){Dk.__loaded||(Dk.__loaded=!0,Btt(),H5(),V5(),We.load(Rtt),We.load(Nst))}Dk.__loaded=!1;const Ust=Dk;function Fk(){Fk.__loaded||(Fk.__loaded=!0,jtt(),We.load(mtt),We.load(Oo?tst:qit))}Fk.__loaded=!1;const Sae=Fk;function Bk(){Bk.__loaded||(Bk.__loaded=!0,Ntt(),We.load(_tt),We.load(Oo?cst:ent))}Bk.__loaded=!1;const Wst=Bk;function jk(){jk.__loaded||(jk.__loaded=!0,$tt(),We.load(Ctt),We.load(Oo?Ast:snt))}jk.__loaded=!1;const Gst=jk;function Nk(){Nk.__loaded||(Nk.__loaded=!0,ztt())}Nk.__loaded=!1;const on=Nk;function $k(){$k.__loaded||($k.__loaded=!0,Htt(),We.load(Ttt),We.load(Oo?Mst:ant))}$k.__loaded=!1;const Cae=$k;function zk(){zk.__loaded||(zk.__loaded=!0,Vtt(),We.load(gtt),We.load(Oo?Znt:unt))}zk.__loaded=!1;const Gu=zk;function Hk(){Hk.__loaded||(Hk.__loaded=!0,Utt(),We.load(btt),We.load(Oo?yst:_nt))}Hk.__loaded=!1;const Dx=Hk;function Vk(){Vk.__loaded||(Vk.__loaded=!0,Wtt(),We.load(xtt),We.load(Oo?xst:fnt))}Vk.__loaded=!1;const ZP=Vk;function Uk(){Uk.__loaded||(Uk.__loaded=!0,Gtt(),H5(),V5(),We.load(Dtt),We.load(Vst))}Uk.__loaded=!1;const Kst=Uk;function Wk(){Wk.__loaded||(Wk.__loaded=!0,Ktt(),We.load(ftt),We.load(Oo?Knt:Snt))}Wk.__loaded=!1;const Ku=Wk;function Gk(){Gk.__loaded||(Gk.__loaded=!0,Xtt(),We.load(Ptt),We.load(Dst))}Gk.__loaded=!1;const Xst=Gk;function Kk(){Kk.__loaded||(Kk.__loaded=!0,Ytt(),We.load(ktt),We.load(Oo?Pst:Cnt))}Kk.__loaded=!1;const Ud=Kk;function Xk(){Xk.__loaded||(Xk.__loaded=!0,Jtt())}Xk.__loaded=!1;const Ds=Xk;function Yk(){Yk.__loaded||(Yk.__loaded=!0,qtt(),We.load(ytt),We.load(Oo?rst:Tnt))}Yk.__loaded=!1;const Mo=Yk;function qk(){qk.__loaded||(qk.__loaded=!0,Ztt(),We.load(vtt),We.load(Oo?pst:Pnt))}qk.__loaded=!1;const $c=qk;function wae(){on(),Ku()}const Py=-.5*Math.PI,Oy=1.5*Math.PI,fv="PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol",Yst=14;var mn;(function(i){i.selected="selected",i.selectedReverse="selected_reverse",i.hover="hover",i.hoverReverse="hover_reverse"})(mn||(mn={}));const nt={[mn.selectedReverse]:{},[mn.selected]:{},[mn.hover]:{},[mn.hoverReverse]:{}},Zk={container:"",width:30,height:30,style:{}},qst="scrollDrag",UW={debounce:zd,throttle:Hu};wae();let Jk=class Aae extends Zn{constructor(e,t){super(t!=null&&t.skipDefault?e:se({},Aae.defaultAttributes,e)),this.name="scrollbar",this._onRailPointerDown=n=>{const{viewX:s,viewY:r}=n,{direction:a,width:o,height:l,range:c}=this.attribute,u=this._sliderSize,[h,d]=this._getScrollRange();let p;if(a==="vertical"){const f=r-this._viewPosition.y,g=zi(f-u/2,h,d);p=f/l,this._slider.setAttribute("y",g,!0)}else{const f=s-this._viewPosition.x,g=zi(f-u/2,h,d);p=f/o,this._slider.setAttribute("x",g,!0)}this.setScrollRange([p-(c[1]-c[0])/2,p+(c[1]-c[0])/2],!1),this.stage&&!this.stage.autoRender&&this.stage.renderNextFrame()},this._onSliderPointerDown=n=>{const{stopSliderDownPropagation:s=!0}=this.attribute;s&&n.stopPropagation();const{direction:r}=this.attribute,{x:a,y:o}=this.stage.eventPointTransform(n);this._prePos=r==="horizontal"?a:o,this._dispatchEvent("scrollDown",{pos:this._prePos,event:n}),st.env==="browser"?(st.addEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),st.addEventListener("pointerup",this._onSliderPointerUp)):(this.stage.addEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),this.stage.addEventListener("pointerup",this._onSliderPointerUp),this.stage.addEventListener("pointerupoutside",this._onSliderPointerUp))},this._computeScrollValue=n=>{const{direction:s}=this.attribute,{x:r,y:a}=this.stage.eventPointTransform(n);let o,l,c=0;const{width:u,height:h}=this.getSliderRenderBounds();return s==="vertical"?(l=a,c=l-this._prePos,o=c/h):(l=r,c=l-this._prePos,o=c/u),[l,o]},this._onSliderPointerMove=n=>{const{stopSliderMovePropagation:s=!0}=this.attribute;s&&n.stopPropagation();const r=this.getScrollRange(),[a,o]=this._computeScrollValue(n);this.setScrollRange([r[0]+o,r[1]+o],!0),this._prePos=a},this._onSliderPointerMoveWithDelay=this.attribute.delayTime===0?this._onSliderPointerMove:UW[this.attribute.delayType](this._onSliderPointerMove,this.attribute.delayTime),this._onSliderPointerUp=n=>{n.preventDefault();const{realTime:s=!0,range:r,limitRange:a=[0,1]}=this.attribute,o=this.getScrollRange(),[l,c]=this._computeScrollValue(n),u=[o[0]+c,o[1]+c];this._dispatchEvent("scrollUp",{pre:r,value:hp(u,a[0],a[1])}),st.env==="browser"?(st.removeEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),st.removeEventListener("pointerup",this._onSliderPointerUp)):(this.stage.removeEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),this.stage.removeEventListener("pointerup",this._onSliderPointerUp),this.stage.removeEventListener("pointerupoutside",this._onSliderPointerUp))}}setScrollRange(e,t=!0){const{direction:n="horizontal",limitRange:s=[0,1],range:r,realTime:a=!0}=this.attribute,o=hp(e,s[0],s[1]);if(t){const l=this._getSliderPos(o);if(this._slider){const c=l[1]-l[0];this._sliderSize=c,n==="horizontal"?this._slider.setAttributes({x:l[0],width:c},!0):this._slider.setAttributes({y:l[0],height:c},!0),this.stage&&!this.stage.autoRender&&this.stage.renderNextFrame()}}this.attribute.range=o,a&&this._dispatchEvent(qst,{pre:r,value:o})}getScrollRange(){return this.attribute.range}bindEvents(){if(this.attribute.disableTriggerEvent)return;const{delayType:e="throttle",delayTime:t=0}=this.attribute;this._rail&&this._rail.addEventListener("pointerdown",UW[e](this._onRailPointerDown,t)),this._slider&&this._slider.addEventListener("pointerdown",this._onSliderPointerDown)}render(){this._reset();const{direction:e="horizontal",width:t,height:n,range:s,limitRange:r=[0,1],railStyle:a,sliderStyle:o,padding:l=2}=this.attribute,c=this.createOrUpdateChild("scrollbar-container",{},"group"),u=c.createOrUpdateChild("scrollbar-rail",Object.assign({x:0,y:0,width:t,height:n},a),"rect");this._rail=u;const h=this.getSliderRenderBounds(),d=this._getSliderPos(hp(s,r[0],r[1])),p=d[1]-d[0];let f;this._sliderSize=p,f=e==="horizontal"?{x:d[0],y:h.y1,width:p,height:h.height}:{x:h.x1,y:d[0],width:h.width,height:p};const g=c.createOrUpdateChild("slider",Object.assign(Object.assign(Object.assign(Object.assign({},f),{cornerRadius:this._getDefaultSliderCornerRadius()}),o),{boundsPadding:Cr(l),pickMode:"imprecise"}),"rect");this._slider=g,this._container=c;const m=this._container.AABBBounds;this._viewPosition={x:m.x1,y:m.y1}}getSliderRenderBounds(){if(this._sliderRenderBounds)return this._sliderRenderBounds;const{width:e,height:t,padding:n=2}=this.attribute,[s,r,a,o]=Cr(n),l={x1:o,y1:s,x2:e-r,y2:t-a,width:Math.max(0,e-(o+r)),height:Math.max(0,t-(s+a))};return this._sliderRenderBounds=l,l}_getDefaultSliderCornerRadius(){const{direction:e,round:t}=this.attribute;if(t){const{width:n,height:s}=this.getSliderRenderBounds();return e==="horizontal"?s:n}return 0}_getSliderPos(e){const{direction:t}=this.attribute,{width:n,height:s,x1:r,y1:a}=this.getSliderRenderBounds();return t==="horizontal"?[n*e[0]+r,n*e[1]+r]:[s*e[0]+a,s*e[1]+a]}_getScrollRange(){if(this._sliderLimitRange)return this._sliderLimitRange;const{limitRange:e=[0,1],direction:t}=this.attribute,[n,s]=hp(e,0,1),{width:r,height:a,x1:o,y1:l}=this.getSliderRenderBounds(),c=this._sliderSize;return t==="horizontal"?hp([o+n*r,o+s*r],o,r-c):hp([l+n*a,l+s*a],l,a-c)}_reset(){this._sliderRenderBounds=null,this._sliderLimitRange=null}};Jk.defaultAttributes={direction:"horizontal",round:!0,sliderSize:20,sliderStyle:{fill:"rgba(0, 0, 0, .5)"},railStyle:{fill:"rgba(0, 0, 0, .0)"},padding:2,scrollRange:[0,1],delayType:"throttle",delayTime:0,realTime:!0};function hl(i,e){i.forEachChildren(t=>{const n=e(t);t.isContainer&&!n&&hl(t,e)})}const en=i=>!B(i)&&i.visible!==!1;function Zst(i,e){if(!e)return[];const t=i.find(n=>n.name===e,!0);return t?t.getChildren():[]}function Jst(i,e){if(!e)return[];const t=i.find(n=>n.name===e,!0);return t?t.findAll(n=>n.type!=="group",!0):[]}function Qst(i){const e=[i[0]];for(let t=1;t<i.length;t++)i[t].x===i[t-1].x&&i[t].y===i[t-1].y||e.push(i[t]);return e}function Qk(i){return i>=0&&i<Math.PI/2||i>3*Math.PI/2&&i<=2*Math.PI}function Gl(i,e,t){return Math.abs(i-e)<t}function kae(i,e,t){return i?{textAlign:"right",textBaseline:"middle"}:{textAlign:e<Math.PI&&t.toLocaleLowerCase().includes("top")||e>Math.PI&&t.toLocaleLowerCase().includes("bottom")?"left":e<Math.PI&&t.toLocaleLowerCase().includes("bottom")||e>Math.PI&&t.toLocaleLowerCase().includes("top")?"right":"center",textBaseline:e<Math.PI&&t.includes("inside")||e>Math.PI&&!t.includes("inside")?"bottom":"top"}}const ert=["#ffffff","#000000"];function WW(i,e,t,n,s,r){if(typeof i!="string"||typeof e!="string")return i;const a=new An(i).toHex(),o=new An(e).toHex();return W5(a,o,t,n,r)?a:trt(a,o,t,n,s,r)}function trt(i,e,t,n,s,r){const a=[];s&&(s instanceof Array?a.push(...s):a.push(s)),a.push(...ert);for(const o of a)if(i!==o&&W5(o,e,t,n,r))return o}function W5(i,e,t,n,s){if(s==="lightness"){const r=An.getColorBrightness(new An(e));return An.getColorBrightness(new An(i))<.5?r>=.5:r<.5}return n?EI(i,e)>n:t==="largeText"?EI(i,e)>3:EI(i,e)>4.5}function EI(i,e){const t=GW(i),n=GW(e);return((t>n?t:n)+.05)/((t>n?n:t)+.05)}function GW(i){const e=ose(i),t=e[0]/255,n=e[1]/255,s=e[2]/255;let r,a,o;return r=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),a=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),o=s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4),.2126*r+.7152*a+.0722*o}function fC(i,e,t,n){let s;switch(i){case"base":s=e;break;case"invertBase":s=t;break;case"similarBase":s=n}return s}function Tae(i,e){return[i[0]*e,i[1]*e]}function Eae(i){const[e,t]=i;return Math.sqrt(e*e+t*t)}function irt(i){let e=Eae(i);return e>0&&(e=1/e),[i[0]*e,i[1]*e]}function nrt(i,e){const[t,n]=i,[s,r]=e,a=Math.sqrt((t*t+n*n)*(s*s+r*r)),o=a&&(t*s+n*r)/a;return Math.acos(Math.min(Math.max(o,-1),1))}function srt(i,e,t){const n=nrt(i,e),s=eD(i,e)>=0;return t?s?2*Math.PI-n:n:s?n:2*Math.PI-n}const Ym=(i,e,t,n)=>new qs(Object.assign({defaultFontParams:Object.assign({fontFamily:fv,fontSize:Yst},n),getTextBounds:t?void 0:GP,specialCharSet:`-/: .,@%'"~`+qs.ALPHABET_CHAR_SET+qs.ALPHABET_CHAR_SET.toUpperCase()},e??{}),i);function JP(i,e,t={}){if(!i)return{width:0,height:0};const n=GP({text:i,fontFamily:e.fontFamily||t.fontFamily||fv,fontSize:e.fontSize||t.fontSize||12,fontWeight:e.fontWeight||t.fontWeight,textAlign:e.textAlign||"center",textBaseline:e.textBaseline,ellipsis:!!e.ellipsis,maxLineWidth:e.maxLineWidth||1/0,lineHeight:e.fontSize||t.fontSize||12});return{width:n.width(),height:n.height()}}function rrt(i,e="type"){return Pae(i,e)==="rich"}function Pae(i,e="type"){var t,n;return Ke(i.text)&&"type"in i.text?(t=i.text.type)!==null&&t!==void 0?t:"text":e in i&&(n=i[e])!==null&&n!==void 0?n:"text"}function Oae(i){var e,t;return F(i.maxLineWidth)&&(i.maxWidth=i.maxLineWidth,delete i.maxLineWidth),i.width=(e=i.width)!==null&&e!==void 0?e:0,i.height=(t=i.height)!==null&&t!==void 0?t:0,i.textConfig=i.text.text||i.text,i}function art(i){const{text:e,_originText:t}=i,{text:n}=e;return i.html=n,i.text=t,i.renderable=!1,i}function ort(i){const{text:e,_originText:t}=i,{text:n}=e;return i.react=n,i.text=t,i.renderable=!1,i}function i1(i,e="type"){const t=Pae(i,e);return t==="rich"?Ae.richtext(Oae(i)):(t==="html"?i=art(i):t==="react"&&(i=ort(i)),Ae.text(i))}function KW(i,e,t,n,s){i==="right"?t==="center"?e.setAttribute("x",n-s/2):t==="right"||t==="end"?e.setAttribute("x",n):e.setAttribute("x",n-s):t==="center"?e.setAttribute("x",n+s/2):t==="right"||t==="end"?e.setAttribute("x",n+s):e.setAttribute("x",n)}const PI=(i,e)=>{const t=Math.atan2(i,e);return t<0?t+2*Math.PI:t};function Mae(i,e){const{x1:t,y1:n,x2:s,y2:r}=e,{x1:a,y1:o,x2:l,y2:c}=i.AABBBounds;let u=0,h=0;return a<t&&(u=t-a),o<n&&(h=n-o),l>s&&(u=s-l),c>r&&(h=r-c),{dx:u,dy:h}}function G5(i,e){const{dx:t,dy:n}=Mae(i,e),{dx:s=0,dy:r=0}=i.attribute;t&&i.setAttribute("dx",t+s),n&&i.setAttribute("dy",n+r)}function QP(){on(),Ku(),Mo(),Ud(),$c()}var XW=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};QP();class Oa extends Zn{getBgRect(){return this._bgRect}getTextShape(){return this._textShape}constructor(e,t){super(t!=null&&t.skipDefault?e:se({},Oa.defaultAttributes,e)),this.name="tag",this._tagStates=[],this._rectStates=[],this._symbolStates=[],this._textStates=[]}render(){var e,t,n;this.cacheStates();const{text:s="",textStyle:r={},shape:a={},panel:o={},space:l=4,minWidth:c,maxWidth:u,padding:h=4,visible:d,state:p,type:f,textAlwaysCenter:g,containerTextAlign:m}=this.attribute,y=Cr(h),b=this.createOrUpdateChild("tag-content",{x:0,y:0,zIndex:1},"group");let x,S=-y[3],C=-y[0],w=y[1]+y[3],A=y[0]+y[2],T=0,E=0;const{visible:P}=a,O=XW(a,["visible"]);if(Ui(P)){const I=(O==null?void 0:O.size)||10,D=ye(I)?I:Math.max(I[0],I[1]);x=b.createOrUpdateChild("tag-shape",Object.assign(Object.assign({symbolType:"circle",size:I,strokeBoundsBuffer:0},O),{visible:P,x:D/2,y:D/2}),"symbol"),Te(p==null?void 0:p.shape)||(x.states=p.shape),P&&(E=D+l)}let M;if(w+=E,T+=E,rrt({text:s})||f==="rich"){const I=Object.assign(Object.assign(Object.assign({},Oae(Object.assign({type:f,text:s},r))),r),{visible:F(s)&&d!==!1,x:T,y:0});M=b.createOrUpdateChild("tag-text",I,"richtext"),w+=M.AABBBounds.width(),A+=M.AABBBounds.height(),S+=M.AABBBounds.x1,C+=M.AABBBounds.y1}else{const I=Object.assign(Object.assign({text:Ke(s)&&"type"in s&&s.type==="text"?s.text:s,visible:F(s)&&d!==!1,lineHeight:r==null?void 0:r.fontSize},r),{x:T,y:0});B(I.lineHeight)&&(I.lineHeight=r.fontSize),M=b.createOrUpdateChild("tag-text",I,"text"),Te(p==null?void 0:p.text)||(M.states=p.text);const D=JP(I.text,r,(t=(e=this.stage)===null||e===void 0?void 0:e.getTheme())===null||t===void 0?void 0:t.text),z=D.width,$=D.height;w+=z;const V=(n=a.size)!==null&&n!==void 0?n:10,L=ye(V)?V:Math.max(V[0],V[1]);A+=Math.max($,a.visible?L:0);const{textAlign:Y,textBaseline:ae}=r;(F(c)||F(u))&&(F(c)&&w<c&&(w=c),F(u)&&w>u&&(w=u,M.setAttribute("maxLineWidth",u-y[1]-y[2]))),S=0,C=0;let W=0;Y==="left"||Y==="start"?W=1:Y==="right"||Y==="end"?W=-1:Y==="center"&&(W=0),W?W<0?(S-=w,x&&x.setAttribute("x",(x.attribute.x||0)-z),b.setAttribute("x",-y[1]-E)):W>0&&b.setAttribute("x",y[3]):(S-=w/2,x&&x.setAttribute("x",(x.attribute.x||0)-z/2),b.setAttribute("x",-E/2));const ce=m==="right"||m==="end",he=m==="left"||m==="start";if((m?m==="center":g)&&W){const le=w-y[1]-y[3],de=z+E,te=W===1?(le-de)/2+E+z/2:y[0]+E-(w/2+de/2-E)+z/2;if(M.setAttributes({x:te,textAlign:"center"}),x){const me=te-z/2-E+L/2;x.setAttributes({x:me})}}if(he&&W!==1){const le=w-y[1]-y[3],de=W===0?-le/2+E/2:-w+y[3]+y[1]+E,te=de+E;if(M.setAttributes({x:te,textAlign:"left"}),x){const me=de+L/2;x.setAttributes({x:me})}}if(ce&&W!==-1){const le=w-y[1]-y[3],de=W===0?le/2+E/2:le;if(M.setAttributes({x:de,textAlign:"right"}),x){const te=de-z-E+L/2;x.setAttributes({x:te})}}ae==="middle"?(C-=A/2,x&&x.setAttribute("y",0)):ae==="bottom"?(C-=A,x&&x.setAttribute("y",-$/2),b.setAttribute("y",-y[2])):ae==="top"&&(b.setAttribute("y",y[0]),x&&x.setAttribute("y",$/2))}const{visible:R}=o,j=XW(o,["visible"]);if(d&&Ui(R)){const I=this.createOrUpdateChild("tag-panel",Object.assign(Object.assign({},j),{visible:R&&!!s,width:w,height:A,x:S,y:C}),"rect");if(Te(p==null?void 0:p.panel)||(I.states=p.panel),j.customShape){const D=j.customShape;I.pathProxy=z=>D(this,z,new Bn)}this._bgRect=I}this._textShape=M,this._symbol=x,this.resetStates()}initAttributes(e,t){e=t!=null&&t.skipDefault?e:se({},Oa.defaultAttributes,e),super.initAttributes(e),this.render()}addState(e,t,n){super.addState(e,t,n),this._textShape&&this._textShape.addState(e,t,n),this._bgRect&&this._bgRect.addState(e,t,n),this._symbol&&this._symbol.addState(e,t,n)}removeState(e,t){super.removeState(e,t),this._textShape&&this._textShape.removeState(e,t),this._bgRect&&this._bgRect.removeState(e,t),this._symbol&&this._symbol.removeState(e,t)}cacheStates(){var e,t,n,s,r,a,o,l,c,u,h,d,p,f;this._tagStates=(t=(e=this.currentStates)===null||e===void 0?void 0:e.slice())!==null&&t!==void 0?t:[],this._rectStates=(r=(s=(n=this._bgRect)===null||n===void 0?void 0:n.currentStates)===null||s===void 0?void 0:s.slice())!==null&&r!==void 0?r:[],this._symbolStates=(l=(o=(a=this._symbol)===null||a===void 0?void 0:a.currentStates)===null||o===void 0?void 0:o.slice())!==null&&l!==void 0?l:[],this._textStates=(h=(u=(c=this._textShape)===null||c===void 0?void 0:c.currentStates)===null||u===void 0?void 0:u.slice())!==null&&h!==void 0?h:[],this.clearStates(),(d=this._bgRect)===null||d===void 0||d.clearStates(),(p=this._symbol)===null||p===void 0||p.clearStates(),(f=this._textShape)===null||f===void 0||f.clearStates()}resetStates(){var e,t,n;this._tagStates.length&&this.useStates(this._tagStates),this._rectStates.length&&((e=this._bgRect)===null||e===void 0||e.useStates(this._rectStates)),this._symbolStates.length&&((t=this._symbol)===null||t===void 0||t.useStates(this._symbolStates)),this._textStates.length&&((n=this._textShape)===null||n===void 0||n.useStates(this._textStates))}}Oa.defaultAttributes={visible:!0,textStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},space:4,padding:4,shape:{fill:"#000"}};const Iae={visible:!0,position:"auto",titleStyle:{fontSize:16,fill:"#08979c"},contentStyle:{fontSize:12,fill:"green"},panel:{visible:!0,fill:"#e6fffb",size:12,space:0,stroke:"#87e8de",lineWidth:1,cornerRadius:4}},Rae={poptip:se({},Iae)};function lrt(){on(),$c(),Mo(),Ku()}function crt(i){se(Rae.poptip,Iae,i)}var urt=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};const YW=new Qi;lrt();class n1 extends Zn{constructor(e,t){super(t!=null&&t.skipDefault?e:se({},n1.defaultAttributes,e)),this.name="poptip",this.positionList=["top","tl","tr","bottom","bl","br","left","lt","lb","right","rt","rb"]}render(){var e,t,n,s,r,a,o,l;const{titleStyle:c={},position:u,contentStyle:h={},panel:d={},space:p=4,minWidth:f=0,maxWidth:g=1/0,padding:m=4,maxWidthPercent:y,visible:b,state:x,dx:S=0,dy:C=0}=this.attribute;let{title:w="",content:A=""}=this.attribute;w=this.attribute.titleFormatMethod?this.attribute.titleFormatMethod(w):w,A=this.attribute.contentFormatMethod?this.attribute.contentFormatMethod(A):A;const T=Cr(m),E=this.createOrUpdateChild("poptip-content",{x:0,y:0,zIndex:1},"group"),P=g-T[1]-T[3],O=F(w)&&b!==!1,M=Object.assign(Object.assign({text:ie(w)?w:[w],visible:O,wrap:!0},c),{x:T[3],y:T[0],maxLineWidth:P,textAlign:"left",textBaseline:"top"}),R=E.createOrUpdateChild("poptip-title",M,"text");Te(x==null?void 0:x.title)||(R.states=x.title);const j=R.AABBBounds,I=j.height(),D=j.width();let z=I+p;O||(z=0);const $=F(A)&&b!==!1,V=Object.assign(Object.assign({text:ie(A)?A:[A],visible:$,wrap:!0},h),{x:T[3],y:T[0]+z,maxLineWidth:P,textAlign:"left",textBaseline:"top"}),L=E.createOrUpdateChild("poptip-content",V,"text");Te(x==null?void 0:x.content)||(L.states=x.content);const Y=L.AABBBounds,ae=Y.height(),W=Y.width();$&&(z+=ae);let ce=br(D+T[1]+T[3],W+T[1]+T[3]);ce>g?ce=g:ce<f&&(ce=f);let he=T[0]+T[2]+z;const{visible:le}=d,de=urt(d,["visible"]),te=(e=de.size)!==null&&e!==void 0?e:12,me=ie(te)?[te[0]+((t=de.space)!==null&&t!==void 0?t:0),te[1]+((n=de.space)!==null&&n!==void 0?n:0)]:te+((s=de.space)!==null&&s!==void 0?s:0),Be=(r=de.lineWidth)!==null&&r!==void 0?r:1,ve=this.stage?[(a=this.stage.viewWidth)!==null&&a!==void 0?a:this.stage.width,(o=this.stage.viewHeight)!==null&&o!==void 0?o:this.stage.height]:void 0;if(ve){const Ue=this.AABBBounds,je=(l=this.attribute.x)!==null&&l!==void 0?l:Ue.x1,ut=ve[0]-Ue.x1;let vt=Math.max(je,ut);const si=(ie(te)?te[0]:12)+3;if(vt=Math.min(vt-si,vt*y),vt<ce){ce=vt;const Me=T[1]+T[3];R.setAttribute("maxLineWidth",vt-Me),L.setAttribute("maxLineWidth",vt-Me),he=T[0]+T[2],O&&(he+=R.AABBBounds.height()+p),he+=L.AABBBounds.height()}}const Re=u==="auto";let Qe,Lt=-1/0;for(let Ue=0;Ue<this.positionList.length+1;Ue++){const je=Re?this.positionList[Ue===this.positionList.length?Qe:Ue]:u,{angle:ut,offset:vt,rectOffset:si}=this.getAngleAndOffset(je,ce,he,ie(me)?me:[me,me-Be]);if(Ui(le)){const Me=(ie(te)?te[0]:te)/4,Ot=E.createOrUpdateChild("poptip-symbol-panel",Object.assign(Object.assign({},de),{visible:le&&($||O),x:Me,y:0,strokeBoundsBuffer:-1,boundsPadding:-2,anchor:[0,0],symbolType:"arrow2Left",angle:ut,dx:vt[0],dy:vt[1],size:te,zIndex:-9}),"symbol");Te(x==null?void 0:x.panel)||(Ot.states=x.panel);const Gi=E.createOrUpdateChild("poptip-rect-panel",Object.assign(Object.assign({},de),{visible:le&&($||O),x:0,y:0,width:ce,height:he,zIndex:-8}),"rect");Te(x==null?void 0:x.panel)||(Gi.states=x.panel)}if(E.setAttributes({x:-vt[0]+S,y:-vt[1]+C}),!Re||!ve)break;{YW.setValue(0,0,ce,he).transformWithMatrix(E.globalTransMatrix);const Me=YW,Ot=new nr().setValue(0,0,ve[0],ve[1]);if(kKe(Me,Ot,!1))break;{const Gi=nse(Me,Ot,!1),Jn=(Gi.x2-Gi.x1)*(Gi.y2-Gi.y1);Jn>Lt&&(Lt=Jn,Qe=Ue)}}}}getAngleAndOffset(e,t,n,s){const r=s[1]/2;switch(e){case"tl":return{angle:Qt/2*3,offset:[t/4,n+r],rectOffset:[-t/4,-n-s[1]]};case"top":return{angle:Qt/2*3,offset:[t/2,n+r],rectOffset:[0,-n-s[1]]};case"tr":return{angle:Qt/2*3,offset:[t/4*3,n+r],rectOffset:[t/4*3,-n-s[1]]};case"rt":return{angle:0,offset:[-r,n/5],rectOffset:[t/4*3,-n-s[1]]};case"right":return{angle:0,offset:[-r,n/2],rectOffset:[t/4*3,-n-s[1]]};case"rb":return{angle:0,offset:[-r,n/5*4],rectOffset:[t/4*3,-n-s[1]]};case"bl":return{angle:Qt/2,offset:[t/4,-r],rectOffset:[-t/4,-n-s[1]]};case"bottom":return{angle:Qt/2,offset:[t/2,-r],rectOffset:[0,-n-s[1]]};case"br":return{angle:Qt/2,offset:[t/4*3,-r],rectOffset:[t/4*3,-n-s[1]]};case"lt":return{angle:Qt,offset:[t+r,n/5],rectOffset:[-t/4,-n-s[1]]};case"left":return{angle:Qt,offset:[t+r,n/2],rectOffset:[0,-n-s[1]]};case"lb":return{angle:Qt,offset:[t+r,n/5*4],rectOffset:[t/4*3,-n-s[1]]}}}}n1.defaultAttributes={position:"rt",visible:!0,title:null,content:null,titleStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},contentStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},maxWidthPercent:.8,space:8,padding:10};var hrt=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};function drt(i,e){return se(i,Rae.poptip,e),i}let gv=class{render(i,e,t,n,s,r,a,o,l,c,u,h,d){var p,f;if(i._showPoptip===1){const{visible:g,visibleCb:m}=i.attribute.poptip||{};if(g===!1||m&&m(i)===!1)return;const y={};se(y,n1.defaultAttributes,i.attribute.poptip?i.attribute.poptip:{}),this.poptipComponent?this.poptipComponent.initAttributes(y):this.poptipComponent=new n1(y);let b=i.attribute.poptip||{};if(i.type==="text"&&b.title==null&&b.content==null){const C={};drt(C,b),b=C,b.content=(p=b.content)!==null&&p!==void 0?p:i.attribute.text}const x=i.globalTransMatrix;this.poptipComponent.setAttributes(Object.assign(Object.assign({visibleAll:!0,pickable:!1,childrenPickable:!1},b),{x:x.e,y:x.f})),c.stage.tryInitInteractiveLayer();const S=c.stage.getLayer("_builtin_interactive");S&&S.add(this.poptipComponent)}else i._showPoptip===2&&(i._showPoptip=0,this.poptipComponent&&(this.poptipComponent.setAttributes({visibleAll:!1}),(f=this.poptipComponent.parent)===null||f===void 0||f.removeChild(this.poptipComponent),this.poptipComponent=null))}};gv=hrt([Oe()],gv);var Lae=function(i,e,t,n){var s,r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var o=i.length-1;o>=0;o--)(s=i[o])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};class Dae{constructor(){this.activeEvent="onRegister",this._uid=zn.GenAutoIncrementId(),this.poptip=e=>{const t=e.target;this.needHide(t)?this.unpoptip(e):t!==this.activeGraphic&&(this.needShow(t)&&(t.setAttributes({}),t._showPoptip=1),this.activeGraphic&&(this.activeGraphic.setAttributes({}),this.activeGraphic._showPoptip=2),this.setActiveGraphic(t,!0))},this.unpoptip=e=>{this.activeGraphic&&(this.activeGraphic.setAttributes({}),this.activeGraphic._showPoptip=2,this.setActiveGraphic(null,!0))}}activate(e){this.pluginService=e;const{stage:t}=this.pluginService;t.addEventListener("pointerover",this.poptip)}needHide(e){return e.isContainer||!e.attribute}needShow(e){return!!e.attribute.poptip}setActiveGraphic(e,t){this.activeGraphic=e,this.pluginService.stage.renderNextFrame()}deactivate(e){const{stage:t}=this.pluginService;t.removeEventListener("pointerover",this.poptip)}}let mv=class extends Dae{constructor(){super(...arguments),this.name="poptip",this.key=this.name+this._uid}};mv=Lae([Oe()],mv);let yv=class extends Dae{constructor(){super(...arguments),this.name="poptipForText",this.key=this.name+this._uid,this.pointerlave=i=>{const{stage:e}=this.pluginService;i.target===e&&this.unpoptip(i)}}activate(i){super.activate(i);const{stage:e}=this.pluginService;e.addEventListener("pointerleave",this.pointerlave)}needHide(i){return i.type!=="text"||!i.cliped||i.isContainer||!i.attribute||i.attribute.disableAutoClipedPoptip}needShow(i){return!0}deactivate(i){const{stage:e}=this.pluginService;super.deactivate(i),e.removeEventListener("pointerleave",this.pointerlave)}};yv=Lae([Oe()],yv);const prt=new Ge((i,e,t,n)=>{t(gv)||(i(gv).toSelf().inSingletonScope(),i(P5).toService(gv)),t(mv)||(i(mv).toSelf(),i(e1).toService(mv)),t(yv)||(i(yv).toSelf(),i(e1).toService(yv))});function frt(){We.load(prt)}class Fx extends Zn{constructor(){super(...arguments),this.name="crosshair"}render(){this.renderCrosshair(this)}}function grt(){on(),Gu()}function mrt(){on(),O0()}function yrt(){on(),Dx()}function _rt(){on(),Ku()}function vrt(){on(),O0()}grt();class Bx extends Fx{constructor(e,t){super(t!=null&&t.skipDefault?e:se({},Bx.defaultAttributes,e))}renderCrosshair(e){const{start:t,end:n,lineStyle:s}=this.attribute;return e.createOrUpdateChild("crosshair-line",Object.assign({points:[t,n]},s),"line")}setLocation(e){const{start:t,end:n}=e;this.setAttributes({start:t,end:n})}}Bx.defaultAttributes={lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}};_rt();class eO extends Fx{constructor(e,t){super(t!=null&&t.skipDefault?e:se({},eO.defaultAttributes,e))}renderCrosshair(e){const{start:t,end:n,rectStyle:s}=this.attribute;return e.createOrUpdateChild("crosshair-rect",Object.assign({x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y},s),"rect")}setLocation(e){const{start:t,end:n}=e;this.setAttributes({start:t,end:n})}}eO.defaultAttributes={rectStyle:{fill:"#b2bacf",opacity:.2}};mrt();class tO extends Fx{constructor(e,t){super(t!=null&&t.skipDefault?e:se({},tO.defaultAttributes,e))}renderCrosshair(e){const{center:t,radius:n,lineStyle:s}=this.attribute;return e.createOrUpdateChild("crosshair-circle",Object.assign(Object.assign(Object.assign(Object.assign({},t),{outerRadius:n}),this.attribute),s),"arc")}setLocation(e){const{center:t}=this.attribute,n=kn.distancePP(e,t);this.setAttribute("radius",n)}}tO.defaultAttributes={lineStyle:{stroke:["#b2bacf",!1,!1,!1],lineWidth:1,lineDash:[2]}};vrt();class iO extends Fx{constructor(e,t){super(t!=null&&t.skipDefault?e:se({},iO.defaultAttributes,e))}renderCrosshair(e){const{center:t,radius:n,innerRadius:s=0,sectorStyle:r}=this.attribute,{startAngle:a,endAngle:o}=this.attribute;return e.createOrUpdateChild("crosshair-sector",Object.assign(Object.assign(Object.assign({},t),{outerRadius:n,innerRadius:s,startAngle:a,endAngle:o}),r),"arc")}setLocation(e){const{center:t,startAngle:n=Py,endAngle:s=Oy}=this.attribute,r=s-n,a=yy(ese(t,e));this.setAttributes({startAngle:a-r/2,endAngle:a+r/2})}}iO.defaultAttributes={sectorStyle:{fill:"#b2bacf",opacity:.2}};yrt();class nO extends Fx{constructor(e,t){super(t!=null&&t.skipDefault?e:se({},nO.defaultAttributes,e))}renderCrosshair(e){const{center:t,radius:n,sides:s=6,lineStyle:r}=this.attribute,{startAngle:a,endAngle:o}=this.attribute,l=(o-a)%(2*Math.PI)==0,c=(o-a)/s;let u;for(let h=0;h<=s;h++){const d=ui(t,n,a+c*h);h===0?u=`M${d.x},${d.y}`:u+=`L${d.x},${d.y}`,h===s&&l&&(u+="Z")}return e.createOrUpdateChild("crosshair-polygon",Object.assign({path:u},r),"path")}setLocation(e){const{center:t}=this.attribute,n=kn.distancePP(e,t);this.setAttribute("radius",n)}}nO.defaultAttributes={lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}};const gh=new Uint32Array(33),nl=new Uint32Array(33);nl[0]=0,gh[0]=~nl[0];for(let i=1;i<=32;++i)nl[i]=nl[i-1]<<1|1,gh[i]=~nl[i];function brt(i,e){const t=new Uint32Array(~~((i*e+32)/32));function n(r,a){t[r]|=a}function s(r,a){t[r]&=a}return{array:t,get:(r,a)=>{const o=a*i+r;return t[o>>>5]&1<<(31&o)},set:(r,a)=>{const o=a*i+r;n(o>>>5,1<<(31&o))},clear:(r,a)=>{const o=a*i+r;s(o>>>5,~(1<<(31&o)))},getRange:({x1:r,y1:a,x2:o,y2:l})=>{if(o<0||l<0||r>i||a>e)return!0;let c,u,h,d,p=l;for(;p>=a;--p)if(c=p*i+r,u=p*i+o,h=c>>>5,d=u>>>5,h===d){if(t[h]&gh[31&c]&nl[1+(31&u)])return!0}else{if(t[h]&gh[31&c]||t[d]&nl[1+(31&u)])return!0;for(let f=h+1;f<d;++f)if(t[f])return!0}return!1},setRange:({x1:r,y1:a,x2:o,y2:l})=>{if(o<0||l<0||r>i||a>e)return;let c,u,h,d,p;for(;a<=l;++a)if(c=a*i+r,u=a*i+o,h=c>>>5,d=u>>>5,h===d)n(h,gh[31&c]&nl[1+(31&u)]);else for(n(h,gh[31&c]),n(d,nl[1+(31&u)]),p=h+1;p<d;++p)n(p,4294967295)},clearRange:({x1:r,y1:a,x2:o,y2:l})=>{let c,u,h,d,p;for(;a<=l;++a)if(c=a*i+r,u=a*i+o,h=c>>>5,d=u>>>5,h===d)s(h,nl[31&c]|gh[1+(31&u)]);else for(s(h,nl[31&c]),s(d,gh[1+(31&u)]),p=h+1;p<d;++p)s(p,0)},outOfBounds:({x1:r,y1:a,x2:o,y2:l})=>r<0||a<0||l>=e||o>=i,toImageData:r=>{const a=r.createImageData(i,e),o=a.data;for(let l=0;l<e;++l)for(let c=0;c<i;++c){const u=l*i+c,h=4*u,d=t[u>>>5]&1<<(31&u);o[h+0]=255*d,o[h+1]=255*d,o[h+2]=255*d,o[h+3]=31}return a}}}function Fae(i,e,t={top:0,left:0,right:0,bottom:0}){const{top:n=0,left:s=0,right:r=0,bottom:a=0}=t,o=Math.max(1,Math.sqrt(i*e/1e6)),l=~~((i+s+r+o)/o),c=~~((e+n+a+o)/o),u=h=>~~(h/o);return u.bitmap=()=>brt(l,c),u.x=h=>~~((h+s)/o),u.y=h=>~~((h+n)/o),u.ratio=o,u.padding=t,u.width=i,u.height=e,u}function Bae(i,e){const{x1:t,x2:n,y1:s,y2:r}=e,a=zi(t,0,i.width),o=zi(n,0,i.width),l=zi(s,0,i.height),c=zi(r,0,i.height);return{x1:i.x(a),x2:i.x(o),y1:i.y(l),y2:i.y(c)}}function Kl(i,e,t=!1){return t?Bae(i,e):{x1:i.x(e.x1),x2:i.x(e.x2),y1:i.y(e.y1),y2:i.y(e.y2)}}function H_(i,e,t,n=!0,s=0){let r=t;s>0&&(r={x1:t.x1-s,x2:t.x2+s,y1:t.y1-s,y2:t.y2+s}),r=Kl(i,r);const a=e.outOfBounds(r);return(!n||!a)&&(a&&(r=Bae(i,r)),!e.getRange(r))}function OI(i,e,t,n=[],s=!0,r=0){const a=n.filter(o=>F(o));for(let o=0;o<a.length;o++){const l=t.clone();if(l.setAttributes(a[o]),l.update(),H_(i,e,l.AABBBounds,s,r))return e.setRange(Kl(i,l.AABBBounds,!0)),a[o]}return!1}function xrt(i,e,t,n,s,r,a){var o,l;const c=(o=n.overlap)===null||o===void 0?void 0:o.clampForce,u=(l=n.overlap)===null||l===void 0?void 0:l.overlapPadding;if(t.type==="bound"||t.type==="position"){if(ee(a)){const h=((ee(t.position)?t.position(s.attribute):t.position)||wrt(n.type)).map(d=>a(s.AABBBounds,r,d,n.offset));return OI(i,e,s,h,c,u)}return!1}if(t.type==="moveY"){const h=(t.offset?ee(t.offset)?t.offset(s.attribute):t.offset:[]).map(d=>({x:s.attribute.x,y:s.attribute.y+d}));return OI(i,e,s,h,c,u)}if(t.type==="moveX"){const h=(t.offset?ee(t.offset)?t.offset(s.attribute):t.offset:[]).map(d=>({x:s.attribute.x+d,y:s.attribute.y}));return OI(i,e,s,h,c,u)}return!1}const Srt=["top","bottom","right","left","top-right","bottom-right","top-left","bottom-left"],Crt=["top","inside-top","inside"];function wrt(i){return i==="rect"?Crt:Srt}function qW(i,e,t){const{x1:n,x2:s,y1:r,y2:a}=i.AABBBounds,o=Math.min(n,s),l=Math.max(n,s),c=Math.min(r,a),u=Math.max(r,a);let h=0,d=0;return o<0&&l-o<=e?h=-o:l>e&&o-(l-e)>=0&&(h=e-l),c<0&&u-c<=t?d=-c:u>t&&c-(u-t)>=0&&(d=t-u),{dx:h,dy:d}}const Art=(i={})=>{var e,t,n;return{from:{opacity:0,fillOpacity:0,strokeOpacity:0},to:{opacity:(e=i.opacity)!==null&&e!==void 0?e:1,fillOpacity:(t=i.fillOpacity)!==null&&t!==void 0?t:1,strokeOpacity:(n=i.strokeOpacity)!==null&&n!==void 0?n:1}}},krt=(i={})=>{var e,t,n;return{from:{opacity:(e=i.opacity)!==null&&e!==void 0?e:1,fillOpacity:(t=i.fillOpacity)!==null&&t!==void 0?t:1,strokeOpacity:(n=i.strokeOpacity)!==null&&n!==void 0?n:1},to:{opacity:0,fillOpacity:0,strokeOpacity:0}}},ZW={fadeIn:Art,fadeOut:krt};function JW(i,e){var t,n;return(n=(t=ZW[e])===null||t===void 0?void 0:t.call(ZW,i))!==null&&n!==void 0?n:{from:{},to:{}}}function Trt(i,e,t){if(!ie(t)){const{duration:n,easing:s,increaseEffect:r=!0}=t;return i.animate().to(e.attribute,n,s),void(r&&i.type==="text"&&e.type==="text"&&QW(i,e,n,s))}t.forEach(n=>{const{duration:s,easing:r,increaseEffect:a=!0,channel:o}=n,{to:l}=Ert(i,e,o,n.options);Te(l)||i.animate().to(l,s,r),a&&i.type==="text"&&e.type==="text"&&QW(i,e,s,r)})}const Ert=(i,e,t,n)=>{const s=Object.assign({},i.attribute),r=Object.assign({},e.attribute);return q(n==null?void 0:n.excludeChannels).forEach(a=>{delete r[a]}),Object.keys(r).forEach(a=>{t&&!t.includes(a)&&delete r[a]}),{from:s,to:r}};function QW(i,e,t,n){i.attribute.text!==e.attribute.text&&Z(Number(i.attribute.text)*Number(e.attribute.text))&&i.animate().play(new Qqe({text:i.attribute.text},{text:e.attribute.text},t,n))}const MI={mode:"same-time",duration:300,easing:"linear"};function np(i){return i===3||i===4}function Prt(i){return i===1||i===2}function Ort(i,e,t,n,s,r){if(i===0&&e===0||r<=0)return[];if(i===0){const d=-t/e,p=r**2-(d-s)**2;return p<0?[]:p===0?[{x:n,y:d}]:[{x:Math.sqrt(p)+n,y:d},{x:-Math.sqrt(p)+n,y:d}]}if(e===0){const d=-t/i,p=r**2-(d-n)**2;return p<0?[]:p===0?[{x:d,y:s}]:[{x:d,y:Math.sqrt(p)+s},{x:d,y:-Math.sqrt(p)+s}]}const a=(e/i)**2+1,o=2*((t/i+n)*(e/i)-s),l=o**2-4*a*((t/i+n)**2+s**2-r**2);if(l<0)return[];const c=(-o+Math.sqrt(l))/(2*a),u=(-o-Math.sqrt(l))/(2*a),h=-(e*c+t)/i;return l===0?[{x:h,y:c}]:[{x:h,y:c},{x:-(e*u+t)/i,y:u}]}function Mrt(i,e){return e>2*i?NaN:2*Math.asin(e/2/i)}function Irt(i,e){const{x1:t,y1:n,x2:s,y2:r}=i,{x1:a,y1:o,x2:l,y2:c}=e;return!(t<=a&&s<=a||t>=l&&s>=l||n<=o&&r<=o||n>=c&&r>=c)}const Rrt=(i,e,t="top",n=0)=>{if(!i)return;const{x1:s,y1:r,x2:a,y2:o}=i,l=Math.abs(a-s),c=Math.abs(o-r),u=(e.x1+e.x2)/2,h=(e.y1+e.y2)/2;let d=0,p=0,f=0,g=0;e&&(f=Math.abs(e.x1-e.x2)/2,g=Math.abs(e.y1-e.y2)/2);const m={"top-right":-235,"top-left":235,"bottom-right":45,"bottom-left":-45};switch(t){case"top":p=-1;break;case"bottom":p=1;break;case"left":d=-1;break;case"right":d=1;break;case"bottom-left":case"bottom-right":case"top-left":case"top-right":d=Math.sin(m[t]*(Math.PI/180)),p=Math.cos(m[t]*(Math.PI/180));break;case"center":d=0,p=0}return{x:u+d*(n+f)+Math.sign(d)*(l/2),y:h+p*(n+g)+Math.sign(p)*(c/2)}},Lrt=i=>{if(!i||!i.attribute)return[];const{points:e,segments:t}=i.attribute;if(t&&t.length){const n=[];return t.forEach(s=>{s.points.forEach(r=>{n.push(r)})}),n}return e};function Drt(i,e,t="end",n=0){if(!i||!e)return{x:1/0,y:1/0};const{x1:s,x2:r}=i,a=Math.abs(r-s),o=e.x1;let l=o;return t==="end"?l=o+a/2+n:t==="start"&&(l=o-a/2-n),{x:l,y:e.y1}}function Frt(i,e){if(!i||!e||Nb(i,e,!0))return;const t=Math.min(i.x1,i.x2),n=Math.min(i.y1,i.y2),s=Math.min(e.x1,e.x2),r=Math.min(e.y1,e.y2),a=Math.abs(i.x2-t)/2,o=Math.abs(i.y2-n)/2,l=Math.abs(e.x2-s)/2,c=Math.abs(e.y2-r)/2,u=t+a,h=n+o,d=s+l,p=r+c,f=d-u,g=p-h;return[eG(f,g,u,h,a,o),eG(-f,-g,d,p,l,c)]}function eG(i,e,t,n,s,r){return Math.abs(e/i)<r/s?{x:t+(i>0?s:-s),y:n+e*s/Math.abs(i)}:{x:t+i*r/Math.abs(e),y:n+(e>0?r:-r)}}function Brt(i){return i==="left"?0:i==="right"?1:.5}function jrt(){on(),$c(),Ud(),Gu()}function Nrt(i,e={}){const{maxIterations:t=10,maxError:n=.1,padding:s=1,maxY:r=Number.MAX_VALUE}=e,a=i.length;if(a<=1)return i;const o=([g,m],[y,b])=>b>g&&m>y,l=new Map,c=g=>l.get(g).y0,u=g=>l.get(g).y,h=g=>l.get(g).height,d=g=>l.get(g).x1,p=g=>l.get(g).x2,f=(g,m)=>{l.get(g).y=m};for(const g of i){const{y1:m,y2:y,x1:b,x2:x}=g.AABBBounds;l.set(g,{y0:m,y:m,height:y-m,x1:b,x2:x})}for(let g=0;g<t;g++){i.sort((y,b)=>u(y)-u(b));let m=0;for(let y=0;y<a-1;y++){const b=i[y];let x,S=y+1;for(;(x=i[S])&&!o([d(b),p(b)],[d(x),p(x)]);)S+=1;if(x){const C=u(b),w=h(b),A=u(x),T=A-(C+w);if(T<s){const E=(s-T)/2;m=Math.max(m,E),A+E+h(x)>r?f(b,C-(s-T)):C-E<0?f(x,A+(s-T)):(f(b,C-E),f(x,A+E))}}}if(m<n)break}for(const g of i){const m=g.attribute.y+u(g)-c(g);g.setAttribute("y",m)}return i}var $rt=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};jrt();class Wd extends Zn{setBitmap(e){this._bitmap=e}setBitmapTool(e){this._bmpTool=e}constructor(e,t){const{data:n}=e,s=$rt(e,["data"]);super(t!=null&&t.skipDefault?e:Object.assign({data:n},se({},Wd.defaultAttributes,s))),this.name="label",this._onHover=r=>{const a=r.target;a===this._lastHover||Te(a.states)||(a.addState(mn.hover,!0),hl(this,o=>{o===a||Te(o.states)||o.addState(mn.hoverReverse,!0)}),this._lastHover=a)},this._onUnHover=r=>{this._lastHover&&(hl(this,a=>{Te(a.states)||(a.removeState(mn.hoverReverse),a.removeState(mn.hover))}),this._lastHover=null)},this._onClick=r=>{const a=r.target;if(this._lastSelect===a&&a.hasState("selected"))return this._lastSelect=null,void hl(this,o=>{Te(o.states)||(o.removeState(mn.selectedReverse),o.removeState(mn.selected))});Te(a.states)||(a.addState(mn.selected,!0),hl(this,o=>{o===a||Te(o.states)||o.addState(mn.selectedReverse,!0)}),this._lastSelect=a)},this._handleRelatedGraphicSetState=r=>{var a,o,l,c,u;if(((a=r.detail)===null||a===void 0?void 0:a.type)===pn.STATE||((o=r.detail)===null||o===void 0?void 0:o.type)===pn.ANIMATE_UPDATE&&(!((l=r.detail.animationState)===null||l===void 0)&&l.isFirstFrameOfStep)){const h=(u=(c=r.target)===null||c===void 0?void 0:c.currentStates)!==null&&u!==void 0?u:[],d=this._isCollectionBase?[...this._graphicToText.values()]:[this._graphicToText.get(r.target)];this.updateStatesOfLabels(d,h)}}}labeling(e,t,n,s){}_getLabelLinePoints(e,t){return Frt(e.AABBBounds,t==null?void 0:t.AABBBounds)}_createLabelLine(e,t){const n=this._getLabelLinePoints(e,t);if(n){const s=Ae.line({points:n}),{line:r={}}=e.attribute;if(r.customShape){const a=r.customShape;s.pathProxy=o=>a({text:e,baseMark:t},o,new Bn)}return t&&t.attribute.fill&&s.setAttribute("stroke",t.attribute.fill),this.attribute.line&&!Te(this.attribute.line.style)&&s.setAttributes(this.attribute.line.style),this._setStatesOfLabelLine(s),s}}render(){if(this._prepare(),B(this._idToGraphic)||this._isCollectionBase&&B(this._idToPoint))return;const{overlap:e,smartInvert:t,dataFilter:n,customLayoutFunc:s,customOverlapFunc:r}=this.attribute;let a=this.attribute.data;ee(n)&&(a=n(a));let o=this._initText(a);o=ee(s)?s(a,o,this.getRelatedGraphic.bind(this),this._isCollectionBase?l=>this._idToPoint.get(l.id):null):this._layout(o),ee(r)?o=r(o,this.getRelatedGraphic.bind(this),this._isCollectionBase?l=>this._idToPoint.get(l.id):null):e!==!1&&(o=this._overlapping(o)),ee(this.attribute.onAfterOverlapping)&&this.attribute.onAfterOverlapping(o,this.getRelatedGraphic.bind(this),this._isCollectionBase?l=>this._idToPoint.get(l.id):null),o&&o.length&&o.forEach(l=>{this._bindEvent(l),this._setStatesOfText(l)}),t!==!1&&this._smartInvert(o),this._renderLabels(o)}_bindEvent(e){if(this.attribute.disableTriggerEvent||!e)return;const{hover:t,select:n}=this.attribute;t&&(e.addEventListener("pointermove",this._onHover),e.addEventListener("pointerout",this._onUnHover)),n&&e.addEventListener("pointerdown",this._onClick)}_setStatesOfText(e){if(!e)return;const t=this.attribute.state;t&&!Te(t)&&(e.states=t)}_setStatesOfLabelLine(e){if(!e)return;const t=this.attribute.labelLineState;t&&!Te(t)&&(e.states=t)}_createLabelText(e){var t,n;const s=Object.assign(Object.assign({},(n=(t=this.stage)===null||t===void 0?void 0:t.getTheme())===null||n===void 0?void 0:n.text),e);return i1(s,"textType")}_prepare(){var e,t;const n=[];let s;if(s=ee(this.attribute.getBaseMarks)?this.attribute.getBaseMarks():Zst(this.getRootNode(),this.attribute.baseMarkGroupName),s.forEach(a=>{a.releaseStatus!=="willRelease"&&n.push(a)}),(e=this._idToGraphic)===null||e===void 0||e.clear(),(t=this._idToPoint)===null||t===void 0||t.clear(),this._baseMarks=n,this._isCollectionBase=this.attribute.type==="line-data",!n||n.length===0)return;const{data:r}=this.attribute;if(r&&r.length!==0){if(this._idToGraphic||(this._idToGraphic=new Map),this._isCollectionBase){this._idToPoint||(this._idToPoint=new Map);let a=0;for(let o=0;o<n.length;o++){const l=n[o],c=Lrt(l);if(c&&c.length)for(let u=0;u<c.length;u++){const h=r[a];h&&c[u]&&(F(h.id)||(h.id=`vrender-component-${this.name}-${a}`),this._idToPoint.set(h.id,c[u]),this._idToGraphic.set(h.id,l)),a++}}}else for(let a=0;a<n.length;a++){const o=r[a],l=n[a];o&&l&&(F(o.id)||(o.id=`vrender-component-${this.name}-${a}`),this._idToGraphic.set(o.id,l))}if(this.attribute.animation!==!1){const{animation:a,animationEnter:o,animationExit:l,animationUpdate:c}=this.attribute,u=Ke(a)?a:{};this._animationConfig={enter:o!==!1&&se({},MI,u,o??{}),exit:l!==!1&&se({},MI,u,l??{}),update:c!==!1&&(ie(c)?c:se({},MI,u,c??{}))}}else this._animationConfig={enter:!1,exit:!1,update:!1}}}getRelatedGraphic(e){return this._idToGraphic.get(e.id)}_initText(e=[]){const{textStyle:t={}}=this.attribute,n=[];for(let s=0;s<e.length;s++){const r=e[s],a=this.getRelatedGraphic(r);if(!a)continue;const o=Object.assign(Object.assign({fill:this._isCollectionBase?ie(a.attribute.stroke)?a.attribute.stroke.find(c=>!!c&&c!==!0):a.attribute.stroke:a.attribute.fill},t),r),l=this._createLabelText(o);n.push(l)}return n}_layout(e){const{position:t,offset:n}=this.attribute;for(let s=0;s<e.length;s++){const r=e[s];if(!r)return;const a=r.attribute,o=this.getRelatedGraphic(a);if(!o)continue;r.attachedThemeGraphic=this;const l=this.getGraphicBounds(r);r.attachedThemeGraphic=null;const c=ee(t)?t(a):t,u=this._isCollectionBase?this.getGraphicBounds(null,this._idToPoint.get(a.id),c):this.getGraphicBounds(o,{x:a.x,y:a.y},c),h=this.labeling(l,u,c,n);h&&r.setAttributes(h)}return e}_overlapping(e){var t,n,s;if(e.length===0)return[];const r=Ke(this.attribute.overlap)?this.attribute.overlap:{},a=this.getBaseMarkGroup(),o=(t=r.size)!==null&&t!==void 0?t:{width:(n=a==null?void 0:a.AABBBounds.width())!==null&&n!==void 0?n:0,height:(s=a==null?void 0:a.AABBBounds.height())!==null&&s!==void 0?s:0};if(o.width===0||o.height===0)return e;const{strategy:l,priority:c}=r,u=this._bmpTool||Fae(o.width,o.height),h=this._bitmap||u.bitmap();return c&&(e=e.sort((d,p)=>c(p.attribute.data)-c(d.attribute.data))),(l==null?void 0:l.type)==="shiftY"?this._overlapGlobal(e,r,u,h):this._overlapByStrategy(e,r,u,h)}_overlapGlobal(e,t,n,s){let r=e.filter(u=>u.attribute.visible&&u.attribute.opacity!==0);const{clampForce:a=!0,hideOnHit:o=!0,overlapPadding:l,strategy:c}=t;if(a)for(let u=0;u<r.length;u++){const h=e[u],{dx:d=0,dy:p=0}=qW(h,n.width,n.height);d===0&&p===0||h.setAttributes({x:h.attribute.x+d,y:h.attribute.y+p})}r=Nrt(r,Object.assign({maxY:n.height},c));for(let u=0;u<r.length;u++){const h=r[u],d=h.AABBBounds,p=Kl(n,d,!0);H_(n,s,d,a,l)?s.setRange(p):o?h.setAttributes({visible:!1}):s.setRange(p)}return r}_overlapByStrategy(e,t,n,s){var r;const{avoidBaseMark:a,strategy:o=[],hideOnHit:l=!0,clampForce:c=!0,avoidMarks:u=[],overlapPadding:h}=t,d=[],p=o.some(f=>f.type==="bound");a&&((r=this._baseMarks)===null||r===void 0||r.forEach(f=>{f.AABBBounds&&s.setRange(Kl(n,f.AABBBounds,!0))})),u.length>0&&u.forEach(f=>{be(f)?Jst(this.getRootNode(),f).forEach(g=>{g.AABBBounds&&s.setRange(Kl(n,g.AABBBounds,!0))}):f.AABBBounds&&s.setRange(Kl(n,f.AABBBounds,!0))});for(let f=0;f<e.length;f++){if(e[f].attribute.visible===!1)continue;const g=e[f],m=this.getRelatedGraphic(g.attribute);if(g.update(),!Nb(m.AABBBounds,{x1:0,x2:n.width,y1:0,y2:n.height},!0))continue;if(H_(n,s,g.AABBBounds,c,h)){if(!p){s.setRange(Kl(n,g.AABBBounds,!0)),d.push(g);continue}if(p&&m&&m.AABBBounds&&this._canPlaceInside(g.AABBBounds,m.AABBBounds)){s.setRange(Kl(n,g.AABBBounds,!0)),d.push(g);continue}}let y=!1;for(let b=0;b<o.length;b++)if(y=xrt(n,s,o[b],this.attribute,g,this._isCollectionBase?this.getGraphicBounds(null,this._idToPoint.get(e[f].attribute.id)):this.getGraphicBounds(m,e[f].attribute),this.labeling),y!==!1){g.setAttributes({x:y.x,y:y.y}),d.push(g);break}if(!y&&c){const{dx:b=0,dy:x=0}=qW(g,n.width,n.height);if(b===0&&x===0){if(H_(n,s,g.AABBBounds)){s.setRange(Kl(n,g.AABBBounds,!0)),d.push(g);continue}}else if(H_(n,s,{x1:g.AABBBounds.x1+b,x2:g.AABBBounds.x2+b,y1:g.AABBBounds.y1+x,y2:g.AABBBounds.y2+x})){g.setAttributes({x:g.attribute.x+b,y:g.attribute.y+x}),s.setRange(Kl(n,g.AABBBounds,!0)),d.push(g);continue}}!y&&!l&&d.push(g)}return d}getBaseMarkGroup(){const{baseMarkGroupName:e}=this.attribute;if(e)return this.getRootNode().find(t=>t.name===e,!0)}getGraphicBounds(e,t={}){if(e){if(e.attribute.visible!==!1)return e.AABBBounds;const{x:r,y:a}=e.attribute;return{x1:r,x2:r,y1:a,y2:a}}const{x:n,y:s}=t;return{x1:n,x2:n,y1:s,y2:s}}_renderLabels(e){var t;const{syncState:n}=this.attribute,s=new Map,r=this._graphicToText||new Map,a=[],o=[],{visible:l}=(t=this.attribute.line)!==null&&t!==void 0?t:{};e&&e.forEach((c,u)=>{var h;const d=this.getRelatedGraphic(c.attribute),p=this._isCollectionBase?c.attribute.id:d,f=r!=null&&r.get(p)?"update":"enter";let g;if(l&&(g=this._createLabelLine(c,d)),n&&this.updateStatesOfLabels([g?{text:c,labelLine:g}:{text:c}],(h=d.currentStates)!==null&&h!==void 0?h:[]),f==="enter")a.push(c),s.set(p,g?{text:c,labelLine:g}:{text:c}),this._addLabel({text:c,labelLine:g},a,o,u);else if(f==="update"){const m=r.get(p);r.delete(p),s.set(p,m),this._updateLabel(m,{text:c,labelLine:g})}}),this._removeLabel(r),this._graphicToText=s}_addLabel(e,t,n,s){const{text:r,labelLine:a}=e,o=this.getRelatedGraphic(r.attribute);if(this._syncStateWithRelatedGraphic(o),this._enableAnimation!==!1&&this._animationConfig.enter!==!1){if(o){const{from:l,to:c}=JW(r.attribute,"fadeIn");r&&this.add(r),a&&(n.push(a),this.add(a)),this._animationConfig.enter.duration>0&&o.once("animate-bind",u=>{r.setAttributes(l),a&&a.setAttributes(l);const h=this._afterRelatedGraphicAttributeUpdate(r,t,a,n,s,o,c,this._animationConfig.enter);o.on("afterAttributeUpdate",h)})}}else r&&this.add(r),a&&this.add(a)}_updateLabel(e,t){const{text:n,labelLine:s}=e,{text:r,labelLine:a}=t;if(this._enableAnimation!==!1&&this._animationConfig.update!==!1){const{duration:o,easing:l}=this._animationConfig.update;Trt(n,r,this._animationConfig.update),s&&a&&e.labelLine.animate().to(a.attribute,o,l)}else e.text.setAttributes(r.attribute),s&&a&&e.labelLine.setAttributes(a.attribute)}_removeLabel(e){const t=n=>{this.removeChild(n.text),n.labelLine&&this.removeChild(n.labelLine)};if(this._enableAnimation!==!1&&this._animationConfig.exit!==!1){const{duration:n,easing:s}=this._animationConfig.exit;e.forEach(r=>{var a;(a=r.text)===null||a===void 0||a.animate().to(JW(r.text.attribute,"fadeOut").to,n,s).onEnd(()=>{t(r)})})}else e.forEach(n=>{t(n)})}updateStatesOfLabels(e,t){e.forEach(n=>{n&&(n.text&&n.text.useStates(t),n.labelLine&&n.labelLine.useStates(t))})}_syncStateWithRelatedGraphic(e){this.attribute.syncState&&e&&e.on("afterAttributeUpdate",this._handleRelatedGraphicSetState)}_afterRelatedGraphicAttributeUpdate(e,t,n,s,r,a,o,{mode:l,duration:c,easing:u,delay:h}){const d=p=>{var f,g,m;const{detail:y}=p;if(!y)return{};const b=(f=y.animationState)===null||f===void 0?void 0:f.step;if(!(y.type===pn.ANIMATE_UPDATE&&b&&!(b.type==="wait"&&((g=b.prev)===null||g===void 0?void 0:g.type)==null)))return{};if(y.type===pn.ANIMATE_END)return e.setAttributes(o),void(n&&n.setAttributes(o));const x=()=>{a&&(a.onAnimateBind=void 0,a.removeEventListener("afterAttributeUpdate",d))};switch(l){case"after":y.animationState.end&&(e.animate({onStart:x}).wait(h).to(o,c,u),n&&n.animate().wait(h).to(o,c,u));break;case"after-all":r===t.length-1&&y.animationState.end&&(t.forEach(S=>{S.animate({onStart:x}).wait(h).to(o,c,u)}),s.forEach(S=>{S.animate().wait(h).to(o,c,u)}));break;default:if(this._isCollectionBase){const S=this._idToPoint.get(e.attribute.id);!S||e.animates&&e.animates.has("label-animate")||!a.containsPoint(S.x,S.y,by.LOCAL,(m=this.stage)===null||m===void 0?void 0:m.getPickerService())||(e.animate({onStart:x}).wait(h).to(o,c,u),n&&n.animate().wait(h).to(o,c,u))}else y.animationState.isFirstFrameOfStep&&(e.animate({onStart:x}).wait(h).to(o,c,u),n&&n.animate().wait(h).to(o,c,u))}};return d}_smartInvert(e){var t,n,s,r,a;const o=Ke(this.attribute.smartInvert)?this.attribute.smartInvert:{},{textType:l,contrastRatiosThreshold:c,alternativeColors:u,mode:h,interactInvertType:d}=o,p=(t=o.fillStrategy)!==null&&t!==void 0?t:"invertBase",f=(n=o.strokeStrategy)!==null&&n!==void 0?n:"base",g=(s=o.brightColor)!==null&&s!==void 0?s:"#ffffff",m=(r=o.darkColor)!==null&&r!==void 0?r:"#000000",y=(a=o.outsideEnable)!==null&&a!==void 0&&a;if(p!=="null"||f!=="null")for(let b=0;b<e.length;b++){const x=e[b];if(!x)continue;const S=this.getRelatedGraphic(x.attribute),C=S.attribute.fill,w=x.attribute.fill,A=WW(w,C,l,c,u,h),T=W5(A,g)?g:m,E=this._canPlaceInside(x.AABBBounds,S.AABBBounds),P=!E&&x.AABBBounds&&S.AABBBounds&&S.AABBBounds.intersects(x.AABBBounds);if(E||y||P&&d==="inside"){const O=fC(p,C,A,T);if(O&&x.setAttributes({fill:O}),x.attribute.lineWidth===0||x.attribute.strokeOpacity===0)continue;const M=fC(f,C,A,T);M&&x.setAttributes({stroke:M})}else if(P&&d!=="none"){if(x.attribute.lineWidth===0||x.attribute.strokeOpacity===0)continue;if(x.attribute.stroke){x.setAttributes({fill:WW(x.attribute.fill,x.attribute.stroke,l,c,u,h)});continue}const O=fC(p,C,A,T);O&&x.setAttributes({fill:O});const M=fC(f,C,A,T);M&&x.setAttributes({stroke:M})}}}_canPlaceInside(e,t){return!(!e||!t)&&t.encloses(e)}setLocation(e){this.translateTo(e.x,e.y)}disableAnimation(){this._enableAnimation=!1}enableAnimation(){this._enableAnimation=!0}}Wd.defaultAttributes={textStyle:{fontSize:12,textAlign:"center",textBaseline:"middle",boundsPadding:[-2,-1,-2,-1]},offset:0,pickable:!1};const jae={},My=(i,e)=>{jae[i]=e},zrt=i=>jae[i];var Hrt=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};class s1 extends Wd{constructor(e,t){const{data:n}=e,s=Hrt(e,["data"]);super(t!=null&&t.skipDefault?e:Object.assign({data:n},se({},s1.defaultAttributes,s))),this.name="symbol-label"}labeling(e,t,n="top",s=0){return Rrt(e,t,n,s)}}s1.defaultAttributes={textStyle:{fill:"#000"},position:"top",offset:5};const sO=()=>{My("symbol",s1),My("line-data",s1)};var Vrt=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};class r1 extends Wd{constructor(e,t){const{data:n}=e,s=Vrt(e,["data"]);super(t!=null&&t.skipDefault?e:Object.assign({data:n},se({},r1.defaultAttributes,s)))}labeling(e,t,n="top",s=0){if(!e||!t)return;const{x1:r,y1:a,x2:o,y2:l}=e,c=Math.abs(o-r),u=Math.abs(l-a),{x:h,y:d}=rse(t,n);let p=0,f=0;const g=n.includes("inside");switch(n.includes("top")?f=g?1:-1:n.includes("bottom")?f=g?-1:1:n.includes("left")?p=g?1:-1:n.includes("right")&&(p=g?-1:1),n){case"top-right":case"bottom-right":p=-1;break;case"top-left":case"bottom-left":p=1}return{x:h+p*s+p*c/2,y:d+f*s+f*u/2}}}r1.tag="rect-label",r1.defaultAttributes={textStyle:{fill:"#000"},position:"top",offset:5};const Urt=()=>{My("rect",r1)};var Wrt=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};let VF=class Nae extends Wd{constructor(e,t){const{data:n}=e,s=Wrt(e,["data"]);super(t!=null&&t.skipDefault?e:Object.assign({data:n},se({},Nae.defaultAttributes,s))),this.name="line-label"}getGraphicBounds(e,t={},n="end"){if(!e||e.type!=="line"&&e.type!=="area")return super.getGraphicBounds(e,t);let s=e.attribute.points;const r=e.attribute.segments;!s&&r&&r.length&&(s=r.reduce((o,l)=>{var c;return o.concat((c=l.points)!==null&&c!==void 0?c:[])},[])),s&&s.length!==0||(s=[t]);const a=n==="start"?0:s.length-1;return s[a]?{x1:s[a].x,x2:s[a].x,y1:s[a].y,y2:s[a].y}:void 0}labeling(e,t,n="end",s=0){return Drt(e,t,n,s)}};VF.defaultAttributes={textStyle:{fill:"#000"},position:"end",offset:6};const $ae=()=>{My("line",VF),My("area",VF)};var Grt=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};class Krt{constructor(e,t,n,s,r,a,o,l,c){this.refDatum=e,this.center=t,this.outerCenter=n,this.quadrant=s,this.radian=r,this.middleAngle=a,this.innerRadius=o,this.outerRadius=l,this.circleCenter=c,this.labelVisible=!0}getLabelBounds(){return this.labelPosition&&this.labelSize?{x1:this.labelPosition.x-this.labelSize.width/2,y1:this.labelPosition.y-this.labelSize.height/2,x2:this.labelPosition.x+this.labelSize.width/2,y2:this.labelPosition.y+this.labelSize.height/2}:{x1:0,x2:0,y1:0,y2:0}}}class rO extends Wd{constructor(e,t){const{data:n}=e,s=Grt(e,["data"]);super(t!=null&&t.skipDefault?e:Object.assign({data:n},se({},rO.defaultAttributes,s))),this.name="arc-label",this._ellipsisWidth=0,this._arcLeft=new Map,this._arcRight=new Map,this._line2MinLength=0,this._alignOffset=0}_overlapping(e){return e}labeling(e,t,n="outside",s=0){if(e&&t)return{x:0,y:0}}_layout(e){var t,n,s;if(!e||!e.length)return;const r=super._layout(e),a=r.map(d=>this.getGraphicBounds(d)),o=Object.assign(Object.assign({},this.attribute.textStyle),{text:""});let l=1/0;if(o.ellipsis!==!1){const d=this._createLabelText(o),p=this.getGraphicBounds(d);l=p.x2-p.x1}const c=r.map(d=>d.attribute),u=Array.from(this._idToGraphic.values());this._line2MinLength=ee(this.attribute.line.line2MinLength)?this.attribute.line.line2MinLength(e,u,this.attribute):this.attribute.line.line2MinLength,this._alignOffset=(t=ee(this.attribute.layout.alignOffset)?this.attribute.layout.alignOffset(e,u,this.attribute):this.attribute.layout.alignOffset)!==null&&t!==void 0?t:0;const h=this.layoutArcLabels(this.attribute.position,this.attribute,u,c,a,l);for(let d=0;d<c.length;d++){const p=c[d],f=h.find(g=>{var m;return((m=g.refDatum)===null||m===void 0?void 0:m.id)===p.id});if(f){const g={visible:f.labelVisible,x:f.labelPosition.x,y:f.labelPosition.y,angle:f.angle,points:f.pointA&&f.pointB&&f.pointC?[f.pointA,f.pointB,f.pointC]:void 0,line:f.labelLine};r[d].type==="richtext"?g.width=(n=f.labelLimit)!==null&&n!==void 0?n:r[d].attribute.width:g.maxLineWidth=(s=f.labelLimit)!==null&&s!==void 0?s:r[d].attribute.maxLineWidth,r[d].setAttributes(g)}}return r}layoutArcLabels(e,t,n,s,r,a){this._arcLeft.clear(),this._arcRight.clear(),this._ellipsisWidth=a;let o=0;n.forEach(h=>{h.attribute.outerRadius>o&&(o=h.attribute.outerRadius)}),s.forEach((h,d)=>{var p,f;const g=this._idToGraphic.get(h.id).attribute,m={x:(p=g==null?void 0:g.x)!==null&&p!==void 0?p:0,y:(f=g==null?void 0:g.y)!==null&&f!==void 0?f:0};if(!B(s[d])&&!B(r[d])){const y=s[d]?s[d]:null,b=r[d]?r[d]:{x1:0,x2:0,y1:0,y2:0},x=(g.startAngle+g.endAngle)/2,S=g.endAngle-g.startAngle,C=tse(g.endAngle-S/2),w=ui(m,g.outerRadius,x),A=ui(m,o+t.line.line1MinLength,x),T=new Krt(y,w,A,C,S,x,g.innerRadius,g.outerRadius,m);T.pointA=ui(m,this.computeDatumRadius(2*m.x,2*m.y,g.outerRadius),T.middleAngle),T.labelSize={width:b.x2-b.x1,height:b.y2-b.y1},Prt(T.quadrant)?this._arcRight.set(T.refDatum,T):np(T.quadrant)&&this._arcLeft.set(T.refDatum,T)}});const l=Array.from(this._arcLeft.values()),c=Array.from(this._arcRight.values()),u=[];switch(e){case"inside":case"inside-inner":case"inside-outer":case"inside-center":u.push(...this._layoutInsideLabels(c,t,n)),u.push(...this._layoutInsideLabels(l,t,n));break;default:u.push(...this._layoutOutsideLabels(c,t,n)),u.push(...this._layoutOutsideLabels(l,t,n))}return u}_layoutInsideLabels(e,t,n){var s,r;const a=t,o=a.spaceWidth,l=(s=a.position)!==null&&s!==void 0?s:"inside",c=(r=a.offsetRadius)!==null&&r!==void 0?r:-o;return e.forEach(u=>{var h,d,p;const{labelSize:f,radian:g}=u,m=u.innerRadius,y=u.outerRadius;let b;if(g<Mrt(y,f.height))b=0;else{let T;T=g>=Math.PI?m:Math.max(m,f.height/2/Math.tan(g/2)),b=y-T-o}a.rotate!==!0&&(b=y-o);const x=this._getFormatLabelText(u.refDatum,b);u.labelText=x;const S=Math.min(b,u.labelSize.width),C=this._computeAlign(u,t);let w,A=0;if(l==="inside"&&(A=C==="left"?S:C==="right"?0:S/2),w=l==="inside-inner"?m-c+A:l==="inside-center"?m+(y-m)/2:y+c-A,u.labelPosition=ui(u.circleCenter,w,u.middleAngle),u.labelLimit=S,Zc(S,0)||(u.labelVisible=!1),a.rotate!==!1){u.angle=(d=(h=t.textStyle)===null||h===void 0?void 0:h.angle)!==null&&d!==void 0?d:u.middleAngle;let T=(p=a.offsetAngle)!==null&&p!==void 0?p:0;["inside-inner","inside-outer"].includes(l)&&(T+=Math.PI/2),u.angle+=T}}),e}_layoutOutsideLabels(e,t,n){var s,r,a;const o=(s=n[0].attribute.x)!==null&&s!==void 0?s:0,l=2*((r=n[0].attribute.y)!==null&&r!==void 0?r:0),c=t.layout,u=t.spaceWidth;if(e.forEach(d=>{const p=np(d.quadrant)?-1:1;d.labelPosition={x:d.outerCenter.x+p*(d.labelSize.width/2+this._line2MinLength+u),y:d.outerCenter.y}}),e.sort((d,p)=>d.labelPosition.y-p.labelPosition.y),t.coverEnable!==!1||c.strategy==="none"){for(const d of e){const{labelPosition:p,labelSize:f}=d;d.labelLimit=f.width,d.pointB=np(d.quadrant)?{x:p.x+f.width/2+this._line2MinLength+u,y:p.y}:{x:p.x-f.width/2-this._line2MinLength-u,y:p.y},this._computeX(d,t,n)}t.coverEnable===!1&&c.strategy==="none"&&this._coverLabels(e)}else{const d=l/(((a=t.textStyle)===null||a===void 0?void 0:a.fontSize)||16);this._adjustY(e,d,t,n);const{minY:p,maxY:f}=e.reduce((y,b)=>{const{y1:x,y2:S}=b.getLabelBounds();return y.minY=Math.max(0,Math.min(x,y.minY)),y.maxY=Math.min(l,Math.max(S,y.maxY)),y},{minY:1/0,maxY:-1/0}),g=Math.max(Math.abs(l/2-p),Math.abs(f-l/2)),m=this._computeLayoutRadius(g,t,n);for(const y of e)this._computePointB(y,m,t,n),this._computeX(y,t,n)}const h=2*o;return e.forEach(d=>{var p,f;d.labelVisible&&(Wl(d.pointB.x,this._line2MinLength+u)||Zc(d.pointB.x,h-this._line2MinLength-u))&&(d.labelVisible=!1),d.angle=(f=(p=t.textStyle)===null||p===void 0?void 0:p.angle)!==null&&f!==void 0?f:0,t.offsetAngle&&(d.angle+=t.offsetAngle),d.labelLine=Object.assign(Object.assign({},t.line),{visible:d.labelVisible})}),e}_computeX(e,t,n){var s;const r=e.circleCenter,a=0,o=this.attribute.width;this.attribute.height;let l=0;n.forEach(E=>{E.attribute.outerRadius>l&&(l=E.attribute.outerRadius)});const c=this.computeLayoutOuterRadius(l,t.width,t.height),u=t.line.line1MinLength,h=(s=t.layout)===null||s===void 0?void 0:s.align,d=t.spaceWidth,{labelPosition:p,quadrant:f,pointB:g}=e;Z(g.x*g.y)||(e.pointC={x:NaN,y:NaN},p.x=NaN,e.labelLimit=0);const m=this.computeRadius(c,t.width,t.height),y=np(f)?-1:1;let b=0,x=(y>0?o-g.x:g.x-a)+this._alignOffset-this._line2MinLength-d;h==="labelLine"&&(b=(m+u+this._line2MinLength)*y+r.x,x=(y>0?o-b:b-a)-d);const S=this._getFormatLabelText(e.refDatum,x);e.labelText=S;let C=Math.min(x,e.labelSize.width);switch(h){case"labelLine":break;case"edge":b=y>0?o-C-d:a+C+d;break;default:b=g.x+y*this._line2MinLength}C=Math.max(this._ellipsisWidth,C);const w=C<e.labelSize.width-1;e.labelLimit=w?C:null,e.pointC={x:b,y:p.y};const A=this._computeAlign(e,t),T=Brt(A)*(w?C:e.labelSize.width);h==="edge"?(p.x=(y>0?o:a)-y*T+y*this._alignOffset,e.pointC.x+=y*this._alignOffset):p.x=b+y*(this._alignOffset+d+T)}_computeAlign(e,t){var n,s,r,a,o,l;const c=t,u=(s=(n=c.textStyle)===null||n===void 0?void 0:n.textAlign)!==null&&s!==void 0?s:(r=c.textStyle)===null||r===void 0?void 0:r.align,h=(o=(a=c.layout)===null||a===void 0?void 0:a.textAlign)!==null&&o!==void 0?o:(l=c.layout)===null||l===void 0?void 0:l.align;return c.position!=="inside"?B(u)||u==="auto"?h==="edge"?np(e.quadrant)?"left":"right":np(e.quadrant)?"right":"left":u:B(u)||u==="auto"?"center":u}_getFormatLabelText(e,t){var n;return(n=e==null?void 0:e.text)!==null&&n!==void 0?n:""}_adjustY(e,t,n,s){var r;s[0].attribute.x;const a=2*((r=s[0].attribute.y)!==null&&r!==void 0?r:0),o=n.layout;if(o.strategy==="vertical"){let l,c=0;const u=e.length;if(u<=0)return;for(let d=0;d<u;d++){const{y1:p}=e[d].getLabelBounds();if(l=p-c,Wl(l,0)){const g=this._shiftY(e,d,u-1,-l);this._shiftY(e,g,0,l/2)}const{y2:f}=e[d].getLabelBounds();c=f}const{y1:h}=e[0].getLabelBounds();l=h-0,Wl(l,0)&&this._shiftY(e,0,u-1,-l);for(let d=e.length-1;d>=0&&e[d].getLabelBounds().y2>a;d--)e[d].labelVisible=!1}else if(o.strategy!=="none"){const l=e.map((h,d)=>({arc:h,originIndex:d,priorityIndex:0}));l.sort((h,d)=>d.arc.radian-h.arc.radian),l.forEach((h,d)=>{h.priorityIndex=d,h.arc.labelVisible=!1});let c=1/0,u=-1/0;for(let h=0;h<t&&h<e.length;h++){this._storeY(e);const d=l[h].arc;this._computeYRange(d,n,s),d.labelVisible=!0;const p=d.labelPosition.y,{lastIndex:f,nextIndex:g}=this._findNeighborIndex(e,l[h]),m=e[f],y=e[g];if(f===-1&&g!==-1){const C=y.labelPosition.y;p>C?d.labelPosition.y=C-y.labelSize.height/2-d.labelSize.height/2:this._twoWayShift(e,d,y,g)}else if(f!==-1&&g===-1){const C=m.labelPosition.y;p<C?d.labelPosition.y=C+m.labelSize.height/2+d.labelSize.height/2:this._twoWayShift(e,m,d,l[h].originIndex)}else if(f!==-1&&g!==-1){const C=m.labelPosition.y,w=y.labelPosition.y;p>w?(d.labelPosition.y=w-y.labelSize.height/2-d.labelSize.height/2,this._twoWayShift(e,m,d,l[h].originIndex)):p<C?(d.labelPosition.y=C+m.labelSize.height/2+d.labelSize.height/2,this._twoWayShift(e,d,y,g)):(this._twoWayShift(e,m,d,l[h].originIndex),this._twoWayShift(e,d,y,g))}const b=Math.min(c,l[h].originIndex),x=Math.max(u,l[h].originIndex);let S;if(S=e[x].getLabelBounds().y2-a,Zc(S,0)&&this._shiftY(e,x,0,-S),S=e[b].getLabelBounds().y1-0,Wl(S,0)&&this._shiftY(e,b,e.length-1,-S),S=e[x].getLabelBounds().y2-a,Zc(S,0)){d.labelVisible=!1,this._restoreY(e);break}o.tangentConstraint&&!this._checkYRange(e)?(d.labelVisible=!1,this._restoreY(e)):(c=b,u=x)}}}_shiftY(e,t,n,s){const r=t<n?1:-1;let a=t;for(;a!==-1;){e[a].labelPosition.y+=s;const o=this._findNextVisibleIndex(e,a,n,r);if(o>=0&&o<e.length){const{y1:l,y2:c}=e[a].getLabelBounds(),{y1:u,y2:h}=e[o].getLabelBounds();if(r>0&&c<u||r<0&&l>h)return a}a=o}return n}_findNextVisibleIndex(e,t,n,s){const r=(n-t)*s;for(let a=1;a<=r;a++){const o=t+a*s;if(e[o].labelVisible)return o}return-1}_computePointB(e,t,n,s){const r=n;let a=0;s.forEach(c=>{c.attribute.outerRadius>a&&(a=c.attribute.outerRadius)});const o=this.computeLayoutOuterRadius(a,n.width,n.height),l=r.line.line1MinLength;if(r.layout.strategy==="none")e.pointB={x:e.outerCenter.x,y:e.outerCenter.y};else{const c=e.circleCenter,u=this.computeRadius(o,n.width,n.height),{labelPosition:h,quadrant:d}=e,p=t-Math.max(u+l,e.outerRadius),f=Math.sqrt(t**2-Math.abs(c.y-h.y)**2)-p;Z(f)?e.pointB={x:c.x+f*(np(d)?-1:1),y:h.y}:e.pointB={x:NaN,y:NaN}}}_storeY(e){for(const t of e)t.labelVisible&&(t.lastLabelY=t.labelPosition.y)}_computeYRange(e,t,n){const s=e.circleCenter,r={width:2*s.x,height:2*s.y};let a=0;n.forEach(C=>{C.attribute.outerRadius>a&&(a=C.attribute.outerRadius)});const o=this.computeLayoutOuterRadius(a,t.width,t.height),l=t.line.line1MinLength,{width:c,height:u}=r,h=this.computeRadius(o,t.width,t.height),d=this._computeLayoutRadius(u/2,t,n),p=Math.abs(e.center.x-c/2),f=e.center.y-u/2;let g,m,y;if(Nn(c/2,p))g=0,m=1,y=-f;else if(Nn(u/2,f))g=1,m=0,y=-p;else{const C=-1/(f/p);g=C,m=-1,y=f-C*p}const b=Ort(g,m,y,l+h-d,0,d);if(b.length<2)return;let x,S;b[0].x>b[1].x&&b.reverse(),b[0].x<0?Nn(b[0].y,b[1].y)?Zc(e.middleAngle,-Math.PI)&&Wl(e.middleAngle,0)||Zc(e.middleAngle,Math.PI)&&Wl(e.middleAngle,2*Math.PI)?(x=0,S=b[1].y+u/2):(x=b[1].y+u/2,S=u):b[0].y<b[1].y?(x=0,S=b[1].y+u/2):(x=b[1].y+u/2,S=r.height):(x=Math.min(b[0].y,b[1].y)+u/2,S=Math.max(b[0].y,b[1].y)+u/2),e.labelYRange=[x,S]}_computeLayoutRadius(e,t,n){const s=t,r=s.layoutArcGap,a=s.line.line1MinLength;let o=0;n.forEach(h=>{h.attribute.outerRadius>o&&(o=h.attribute.outerRadius)});const l=this.computeLayoutOuterRadius(o,t.width,t.height),c=this.computeRadius(l,t.width,t.height)+a,u=c-r;return Math.max((u**2+e**2)/(2*u),c)}_findNeighborIndex(e,t){const n=t.originIndex;let s=-1,r=-1;for(let a=n-1;a>=0;a--)if(e[a].labelVisible){s=a;break}for(let a=n+1;a<e.length;a++)if(e[a].labelVisible){r=a;break}return{lastIndex:s,nextIndex:r}}_twoWayShift(e,t,n,s){const r=n.getLabelBounds().y1-t.getLabelBounds().y2;if(Wl(r,0)){const a=this._shiftY(e,s,e.length-1,-r);this._shiftY(e,a,0,r/2)}}_restoreY(e){for(const t of e)t.labelVisible&&(t.labelPosition.y=t.lastLabelY)}_checkYRange(e){for(const t of e){const{labelYRange:n,labelPosition:s}=t;if(t.labelVisible&&n&&(Wl(s.y,n[0])||Zc(s.y,n[1])))return!1}return!0}_coverLabels(e){if(e.length<=1)return;let t=e[0].getLabelBounds();for(let n=1;n<e.length;n++){const s=e[n].getLabelBounds();Irt(t,s)?e[n].labelVisible=!1:t=s}}_getLabelLinePoints(e,t){return e.attribute.points}_createLabelLine(e,t){var n,s,r,a,o;const{line:l={},visible:c}=e.attribute,u=super._createLabelLine(e,t);return u&&(u.setAttributes({visible:(r=(n=l.visible&&c)!==null&&n!==void 0?n:(s=e.attribute)===null||s===void 0?void 0:s.visible)===null||r===void 0||r,lineWidth:(o=(a=l.style)===null||a===void 0?void 0:a.lineWidth)!==null&&o!==void 0?o:1}),l.smooth&&u.setAttributes({curveType:"basis"})),u}computeRadius(e,t,n,s){return this.computeLayoutRadius(t||0,n||0)*e*(B(s)?1:s)}computeLayoutRadius(e,t){return Math.min(e/2,t/2)}_canPlaceInside(e,t){return this.attribute.position==="inside"||this.attribute.position==="inside-center"}computeLayoutOuterRadius(e,t,n){return e/(Math.min(t,n)/2)}computeDatumRadius(e,t,n){const s=this.computeLayoutOuterRadius(n,e,t);return this.computeLayoutRadius(e||0,t||0)*s}}rO.defaultAttributes={coverEnable:!1,spaceWidth:5,layoutArcGap:6,textStyle:{visible:!0,fontSize:14,fontWeight:"normal",fillOpacity:1,boundsPadding:[-1,0,-1,0],ellipsis:!0},position:"outside",line:{visible:!0,line1MinLength:20,line2MinLength:10},layout:{align:"arc",strategy:"priority",tangentConstraint:!0}};const Xrt=()=>{My("arc",rO)};var Yrt=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};class aO extends Zn{constructor(e,t){const{dataLabels:n}=e,s=Yrt(e,["dataLabels"]);super(t!=null&&t.skipDefault?e:Object.assign({dataLabels:n},se({},aO.defaultAttributes,s))),this.name="data-label"}render(){var e;const{dataLabels:t,size:n}=this.attribute;if(!t||t.length===0)return;const{width:s=0,height:r=0,padding:a}=n||{};if(!s||!r||!Z(r*s))return;this._componentMap||(this._componentMap=new Map);const o=Fae(s,r,a),l=o.bitmap(),c=new Map,u=this._componentMap;for(let h=0;h<t.length;h++){const d=t[h],p=zrt(d.type)||Wd;if(p){const{baseMarkGroupName:f,type:g}=d,m=(e=d.id)!==null&&e!==void 0?e:`${f}-${g}-${h}`;d.type==="arc"&&(d.width=n.width,d.height=n.height);let y=this._componentMap.get(m);y?(y.setBitmapTool(o),y.setBitmap(l),y.setAttributes(d),c.set(m,y)):(y=new p(d),y.setBitmap(l),y.setBitmapTool(o),this.add(y),c.set(m,y))}}u.forEach((h,d)=>{c.get(d)||this.removeChild(h)}),this._componentMap=c}setLocation(e){this.translateTo(e.x,e.y)}disableAnimation(){this._componentMap.forEach(e=>{e.disableAnimation()})}enableAnimation(){this._componentMap.forEach(e=>{e.enableAnimation()})}}aO.defaultAttributes={pickable:!1};function K5(){on(),Gu(),ZP(),Mo()}function X5(){on(),Gu(),O0(),Mo()}K5();class Du extends Zn{getStartAngle(){return kd(this._startAngle)}getEndAngle(){return kd(this._endAngle)}getMainSegmentPoints(){return this._mainSegmentPoints}constructor(e,t){super(t!=null&&t.skipDefault?e:se({},Du.defaultAttributes,e)),this.name="segment",this.key="segment",this.lines=[]}render(){this.removeAllChild(!0),this._reset();const{startSymbol:e,endSymbol:t,lineStyle:n,state:s,visible:r=!0,multiSegment:a,mainSegmentIndex:o}=this.attribute;if(!r)return;this._computeLineAngle();const l=this._getMainSegmentPoints(),c=this._renderSymbol(e,l,"start"),u=this._renderSymbol(t,l,"end");if(this.startSymbol=c,this.endSymbol=u,a){const h=[...this.attribute.points];if(Z(o))h[o]=this._clipPoints(h[o]);else{const d=this._clipPoints(JL(h));h[0][0]=d[0],h[h.length-1][h[h.length-1].length-1]=d[d.length-1]}h.forEach((d,p)=>{var f,g;const m=Ae.line(Object.assign(Object.assign({points:d},ie(n)?(f=n[p])!==null&&f!==void 0?f:n[n.length-1]:n),{fill:!1}));m.name=`${this.name}-line`,m.id=this._getNodeId("line"+p),Te(s==null?void 0:s.line)||(m.states=ie(s.line)?(g=s.line[p])!==null&&g!==void 0?g:s.line[s.line.length-1]:s.line),this.add(m),this.lines.push(m)})}else{let h=Ae.line;q(n)[0].cornerRadius&&(h=Ae.polygon);const d=h(Object.assign(Object.assign({points:this._clipPoints(this.attribute.points)},q(n)[0]),{fill:!1,closePath:!1}));d.name=`${this.name}-line`,d.id=this._getNodeId("line"),Te(s==null?void 0:s.line)||(d.states=[].concat(s.line)[0]),this.add(d),this.lines.push(d)}}_computeStartRotate(e){return e+Math.PI/2}_computeEndRotate(e){return e+Math.PI/2}_renderSymbol(e,t,n){if(!t.length)return;const{autoRotate:s=!0}=e;let r;if(e&&e.visible){const a=this.getStartAngle(),o=this.getEndAngle(),{state:l}=this.attribute,c=t[0],u=t[t.length-1],{refX:h=0,refY:d=0,refAngle:p=0,style:f,symbolType:g,size:m=12}=e;let y,b;n==="start"?(y={x:c.x+(Z(a)?h*Math.cos(a)+d*Math.cos(a-Math.PI/2):0),y:c.y+(Z(a)?h*Math.sin(a)+d*Math.sin(a-Math.PI/2):0)},b=this._computeStartRotate(this._startAngle)):(y={x:u.x+(Z(o)?h*Math.cos(o)+d*Math.cos(o-Math.PI/2):0),y:u.y+(Z(o)?h*Math.sin(o)+d*Math.sin(o-Math.PI/2):0)},b=this._computeEndRotate(this._endAngle)),r=Ae.symbol(Object.assign(Object.assign(Object.assign({},y),{symbolType:g,size:m,angle:s?b+p:0,strokeBoundsBuffer:0}),f)),r.name=`${this.name}-${n}-symbol`,r.id=this._getNodeId(`${n}-symbol`),Te(l==null?void 0:l.symbol)||(r.states=l.symbol),n==="start"?Te(l==null?void 0:l.startSymbol)||(r.states=l.startSymbol):Te(l==null?void 0:l.endSymbol)||(r.states=l.endSymbol),this.add(r)}return r}_getMainSegmentPoints(){if(this._mainSegmentPoints)return this._mainSegmentPoints;const{points:e,multiSegment:t,mainSegmentIndex:n}=this.attribute;let s;return s=t?Z(n)?e[n]:JL(e):e,this._mainSegmentPoints=s,s}_clipPoints(e){const{startSymbol:t={},endSymbol:n={}}=this.attribute;let s=e;if(t.visible){const r=t.clip?t.size||10:0;s=[{x:e[0].x-r/2*(Math.cos(this._startAngle)||0),y:e[0].y-r/2*(Math.sin(this._startAngle)||0)},...s.slice(1)]}if(n.visible){const r=n.clip?n.size||10:0,a={x:e[e.length-1].x-r/2*(Math.cos(this._endAngle)||0),y:e[e.length-1].y-r/2*(Math.sin(this._endAngle)||0)};s=[...s.slice(0,s.length-1),a]}return s}_computeLineAngle(){const e=this._getMainSegmentPoints();if(e.length<=1)return;const t=e[0],n=e[1],s=e[e.length-2],r=e[e.length-1],a=[t.x-n.x,t.y-n.y],o=Math.atan2(a[1],a[0]),l=[r.x-s.x,r.y-s.y],c=Math.atan2(l[1],l[0]);this._startAngle=o,this._endAngle=c}_reset(){this.startSymbol=null,this.endSymbol=null,this._startAngle=null,this._endAngle=null,this._mainSegmentPoints=null}}Du.defaultAttributes={visible:!0,lineStyle:{lineWidth:1,stroke:"#000"},startSymbol:{visible:!1,autoRotate:!0,symbolType:"triangle",size:12,refX:0,refY:0,refAngle:0,style:{fill:"#000",zIndex:1}},endSymbol:{visible:!1,autoRotate:!0,symbolType:"triangle",size:12,refX:0,refY:0,refAngle:0,style:{fill:"#000",zIndex:1}}};X5();class UF extends Du{constructor(e,t){super(t!=null&&t.skipDefault?e:se({},Du.defaultAttributes,e)),this.name="arc-segment",this.key="arc-segment",this.isReverseArc=!1}getStartAngle(){const e=this.isReverseArc?this._startAngle+Math.PI/2:this._startAngle-Math.PI/2;return e<0?e+2*Math.PI:e>2*Math.PI?e-2*Math.PI:e}getEndAngle(){const e=this.isReverseArc?this._endAngle-Math.PI/2:this._endAngle+Math.PI/2;return e<0?e+2*Math.PI:e>2*Math.PI?e-2*Math.PI:e}getMainSegmentPoints(){return this._mainSegmentPoints}_computeStartRotate(e){return this.isReverseArc?e+Math.PI:e}_computeEndRotate(e){return this.isReverseArc?e:e+Math.PI}render(){this.removeAllChild(!0),this._reset();const{startSymbol:e,endSymbol:t,lineStyle:n,state:s,visible:r=!0,radius:a,startAngle:o,endAngle:l,center:c}=this.attribute;if(!r)return;this._startAngle=o,this._endAngle=l,this.isReverseArc=o>l;const u={x:c.x+a*Math.cos(this._startAngle),y:c.y+a*Math.sin(this._startAngle)},h={x:c.x+a*Math.cos(this._endAngle),y:c.y+a*Math.sin(this._endAngle)};this._mainSegmentPoints=[u,h];const d=this._renderSymbol(e,this._mainSegmentPoints,"start"),p=this._renderSymbol(t,this._mainSegmentPoints,"end");this.startSymbol=d,this.endSymbol=p;const f=Ae.arc(Object.assign({x:c.x,y:c.y,startAngle:o,endAngle:l,innerRadius:a,outerRadius:a},n));f.name=`${this.name}-line`,f.id=this._getNodeId("arc"),Te(s==null?void 0:s.line)||(f.states=[].concat(s.line)[0]),this.add(f),this.line=f}}var Wn;(function(i){i.innerView="inner-view",i.axisContainer="axis-container",i.labelContainer="axis-label-container",i.tickContainer="axis-tick-container",i.tick="axis-tick",i.subTick="axis-sub-tick",i.label="axis-label",i.title="axis-title",i.gridContainer="axis-grid-container",i.grid="axis-grid",i.gridRegion="axis-grid-region",i.line="axis-line",i.background="axis-background",i.axisLabelBackground="axis-label-background",i.axisBreak="axis-break",i.axisBreakSymbol="axis-break-symbol"})(Wn||(Wn={}));var _m;(function(i){i.selected="selected",i.selectedReverse="selected_reverse",i.hover="hover",i.hoverReverse="hover_reverse"})(_m||(_m={}));const Yl={[_m.selectedReverse]:{},[_m.selected]:{},[_m.hover]:{},[_m.hoverReverse]:{}},qrt=999,eT={title:{space:4,padding:0,textStyle:{fontSize:12,fill:"#333333",fontWeight:"normal",fillOpacity:1}},label:{visible:!0,inside:!1,space:4,padding:0,style:{fontSize:12,fill:"#333",fontWeight:"normal",fillOpacity:1}},tick:{visible:!0,inside:!1,alignWithLabel:!0,length:4,style:{lineWidth:1,stroke:"#000",strokeOpacity:1}},subTick:{visible:!1,inside:!1,count:4,length:2,style:{lineWidth:1,stroke:"#999",strokeOpacity:1}},line:{visible:!0,style:{lineWidth:1,stroke:"#000",strokeOpacity:1}}},tG={size:8,stroke:"#000",lineWidth:1,zIndex:1};function Zrt(i,e){return{x:i.x+e[0],y:i.y+e[1]}}function Jrt(i={}){var e,t;const{style:n={},angle:s=.5*Math.PI}=i,r=se({},tG,n),a=(e=r.size)!==null&&e!==void 0?e:tG.size;return Object.assign(Object.assign({},r),{symbolType:(t=r.symbolType)!==null&&t!==void 0?t:`M ${-a/2} ${a*Math.sin(s)} L ${a/2} ${-a*Math.sin(s)}`,symbolSize:a})}function zae(i){const e={};return hl(i,t=>{t.type!=="group"&&t.id&&(e[t.id]=t)}),e}function Y5(i,e){return{x:i.x+e[0],y:i.y+e[1]}}function WF(i,e,t,n=!1,s=!1){const r=[e.x-t.x,e.y-t.y];return Tae(r,(n?-1:1)*(s?-1:1)*i/Eae(r))}function Qrt(i){let e="center",t="middle";return e=(i=kd(i))>=Math.PI*(5/3)||i<=Math.PI*(1/3)?"left":i>=Math.PI*(2/3)&&i<=Math.PI*(4/3)?"right":"center",t=i>=Math.PI*(7/6)&&i<=Math.PI*(11/6)?"bottom":i>=Math.PI*(1/6)&&i<=Math.PI*(5/6)?"top":"middle",{align:e,baseline:t}}function eat(i,e,t,n,s){const r=ui({x:0,y:0},t,i),a=Y5(r,WF(n,r,e,s));return Zrt(a,WF(n||1,a,e,s))}function Hae(i,e,t,n,s){const r=[],a=s-n;for(let o=0;o<e;o++){const l=n+o*a/e;r.push(ui(i,t,l))}return r}function Mp(i,e){let t="";return i.length===0||(i.forEach((n,s)=>{s===0?t=`M${n.x},${n.y}`:t+=`L${n.x},${n.y}`}),e&&(t+="Z")),t}function dl(i,e,t){let n=i.OBBBounds,s=e.OBBBounds;return n&&s&&!n.empty()&&!s.empty()?n.intersects(s):(n=i.AABBBounds,s=e.AABBBounds,t>Math.max(s.x1-n.x2,n.x1-s.x2,s.y1-n.y2,n.y1-s.y2))}function GF(i,e){for(let t,n=1,s=i.length,r=i[0];n<s;r=t,++n)if(t=i[n],dl(r,t,e))return!0;return!1}const Vae=(i,e,t)=>{const n=i.target;return n!==t&&n.name&&!Te(n.states)?(n.addState(mn.hover,!0),hl(e,s=>{s!==n&&s.name&&!Te(s.states)&&s.addState(mn.hoverReverse,!0)}),n):t},Uae=(i,e,t)=>t&&(hl(e,n=>{n.name&&!Te(n.states)&&(n.removeState(mn.hoverReverse),n.removeState(mn.hover))}),null),Wae=(i,e,t)=>{const n=i.target;return t===n&&n.hasState(mn.selected)?(hl(e,s=>{s.name&&!Te(s.states)&&(s.removeState(mn.selectedReverse),s.removeState(mn.selected))}),null):n.name&&!Te(n.states)?(n.addState(mn.selected,!0),hl(e,s=>{s!==n&&s.name&&!Te(s.states)&&s.addState(mn.selectedReverse,!0)}),n):t};class Gae extends Zn{constructor(){super(...arguments),this.name="axis",this.data=[],this.tickLineItems=[],this.subTickLineItems=[],this.axisLabelLayerSize={},this.axisLabelsContainer=null,this._onHover=e=>{this._lastHover=Vae(e,this.axisContainer,this._lastHover)},this._onUnHover=e=>{this._lastHover=Uae(e,this.axisContainer,this._lastHover)},this._onClick=e=>{this._lastSelect=Wae(e,this.axisContainer,this._lastSelect)}}getInnerView(){return this._innerView}getPrevInnerView(){return this._prevInnerView}getBoundsWithoutRender(e){const t=Ta(this.attribute);se(this.attribute,e);const n=Ae.group({x:this.attribute.x,y:this.attribute.y});return this.add(n),this._renderInner(n),this.removeChild(n),this.attribute=t,n.AABBBounds}render(){this._prevInnerView=this._innerView&&zae(this._innerView),this.removeAllChild(!0),this._innerView=Ae.group({x:0,y:0,pickable:!1}),this.add(this._innerView),this._renderInner(this._innerView),this._bindEvent()}_bindEvent(){if(this.attribute.disableTriggerEvent)return;const{hover:e,select:t}=this.attribute;e&&(this._innerView.addEventListener("pointermove",this._onHover),this._innerView.addEventListener("pointerout",this._onUnHover)),t&&this._innerView.addEventListener("pointerdown",this._onClick)}_renderInner(e){const{title:t,label:n,tick:s,line:r,items:a}=this.attribute,o=Ae.group({x:0,y:0,zIndex:1,pickable:!1});if(o.name=Wn.axisContainer,o.id=this._getNodeId("container"),o.setMode(this.mode),this.axisContainer=o,e.add(o),r&&r.visible&&this.renderLine(o),a&&a.length&&(this.data=this._transformItems(a[0]),s&&s.visible&&this.renderTicks(o),n&&n.visible)){const l=Ae.group({x:0,y:0,pickable:!1});l.name=Wn.labelContainer,l.id=this._getNodeId("label-container"),this.axisLabelsContainer=l,o.add(l),a.forEach((c,u)=>{const h=this.renderLabels(l,c,u),d=h.getChildren();this.beforeLabelsOverlap(d,c,h,u,a.length),this.handleLabelsOverlap(d,c,h,u,a.length),this.afterLabelsOverlap(d,c,h,u,a.length);let p=0,f=0,g="center",m="middle",y=0;d.forEach((b,x)=>{var S;const C=b.attribute,w=(S=C.angle)!==null&&S!==void 0?S:0,A=b.AABBBounds;let T=A.width(),E=A.height();w&&(T=Math.abs(T*Math.cos(w)),E=Math.abs(E*Math.sin(w))),p=Math.max(p,T),f=Math.max(f,E),g=C.textAlign,m=C.textBaseline,x===0&&(y=C.x)}),this.axisLabelLayerSize[u]={width:p,height:f,labelPos:y,textAlign:g,textBaseline:m}})}t&&t.visible&&this.renderTitle(o)}renderTicks(e){const t=this.getTickLineItems(),n=Ae.group({x:0,y:0,pickable:!1});n.name=Wn.tickContainer,n.id=this._getNodeId("tick-container"),e.add(n),t.forEach((r,a)=>{var o;const l=Ae.line(Object.assign({},this._getTickLineAttribute("tick",r,a,t)));if(l.name=Wn.tick,l.id=this._getNodeId(r.id),Te((o=this.attribute.tick)===null||o===void 0?void 0:o.state))l.states=nt;else{const c=this.data[a],u=se({},nt,this.attribute.tick.state);Object.keys(u).forEach(h=>{ee(u[h])&&(u[h]=u[h](c.rawValue,a,c,this.data))}),l.states=u}n.add(l)}),this.tickLineItems=t;const{subTick:s}=this.attribute;if(s&&s.visible){const r=this.getSubTickLineItems();r.length&&r.forEach((a,o)=>{const l=Ae.line(Object.assign({},this._getTickLineAttribute("subTick",a,o,t)));if(l.name=Wn.subTick,l.id=this._getNodeId(`${o}`),Te(s.state))l.states=nt;else{const c=se({},nt,s.state);Object.keys(c).forEach(u=>{ee(c[u])&&(c[u]=c[u](a.value,o,a,t))}),l.states=c}n.add(l)}),this.subTickLineItems=r}}renderLabels(e,t,n){const{dataFilter:s}=this.attribute.label;s&&ee(s)&&(t=s(t,n));const r=this._transformItems(t),a=Ae.group({x:0,y:0,pickable:!1});return a.name=`${Wn.labelContainer}-layer-${n}`,a.id=this._getNodeId(`label-container-layer-${n}`),e.add(a),r.forEach((o,l)=>{var c;const u=this._getLabelAttribute(o,l,r,n),h=i1(u);if(h.name=Wn.label,h.id=this._getNodeId(`layer${n}-label-${o.id}`),Te((c=this.attribute.label)===null||c===void 0?void 0:c.state))h.states=nt;else{const d=se({},nt,this.attribute.label.state);Object.keys(d).forEach(p=>{ee(d[p])&&(d[p]=d[p](o,l,r,n))}),h.states=d}a.add(h)}),a}renderTitle(e){const t=this.getTitleAttribute(),n=new Oa(Object.assign({},t));n.name=Wn.title,n.id=this._getNodeId("title"),e.add(n)}getVerticalCoord(e,t,n){return Y5(e,this.getVerticalVector(t,n,e))}getTickLineItems(){const{tick:e}=this.attribute,t=this.data,n=[],{alignWithLabel:s,inside:r=!1,length:a,dataFilter:o}=e;let l=1;return t.length>=2&&(l=t[1].value-t[0].value),(o&&ee(o)?o(t):t).forEach(c=>{let u=c.point,h=c.value;if(!s){const p=c.value-l/2;if(this.isInValidValue(p))return;u=this.getTickCoord(p),h=p}const d=this.getVerticalCoord(u,a,r);if(this.mode==="3d"){const p=this.getVerticalVector(a,r,u);let f=0,g=0;At(p[0])>At(p[1])?f=Qt/2*(d.x>u.x?1:-1):g=Qt/2*(d.y>u.y?-1:1),n.push({start:u,end:d,value:h,id:`tick-${c.id}`,anchor:[u.x,u.y],alpha:f,beta:g})}else n.push({start:u,end:d,value:h,id:`tick-${c.id}`})}),n}getSubTickLineItems(){const{subTick:e}=this.attribute,t=[],{count:n=4,inside:s=!1,length:r=2}=e,a=this.tickLineItems,o=a.length;if(o>=2)for(let l=0;l<o-1;l++){const c=a[l],u=a[l+1];for(let h=0;h<n;h++){const d=(h+1)/(n+1),p=(1-d)*c.value+d*u.value,f=this.getTickCoord(p),g=this.getVerticalCoord(f,r,s);t.push({start:f,end:g,value:p,id:`sub-tick-${p}`})}}return t}_getTickLineAttribute(e,t,n,s){let r=et(this.attribute,`${e}.style`);const a=this.data[n];r=ee(r)?se({},et(eT,`${e}.style`),e==="tick"?r(a.rawValue,n,a,this.data):r(t.value,n,t,s)):r;const{start:o,end:l,anchor:c,alpha:u,beta:h}=t;return Object.assign({points:[o,l],anchor:c,alpha:u,beta:h},r)}_getLabelAttribute(e,t,n,s){var r,a;const{space:o=4,inside:l=!1,formatMethod:c,type:u="text",text:h}=this.attribute.label;let d=o,p=0;!((r=this.attribute.tick)===null||r===void 0)&&r.visible&&this.attribute.tick.inside===l&&(p=this.attribute.tick.length||4),!((a=this.attribute.subTick)===null||a===void 0)&&a.visible&&this.attribute.subTick.inside===l&&(p=Math.max(p,this.attribute.subTick.length||2)),d+=p;const f=this.getRelativeVector(e.point);s>0&&(f[1]===0?d+=(this.axisLabelLayerSize[s-1].height+et(this.attribute,"label.space",4))*s:d+=(this.axisLabelLayerSize[s-1].width+et(this.attribute,"label.space",4))*s);const g=this.getVerticalCoord(e.point,d,l),m=this.getVerticalVector(d||1,l,g),y=c?c(`${e.label}`,e,t,n,s):e.label;let{style:b}=this.attribute.label;b=ee(b)?se({},eT.label.style,b(e,t,n,s)):b;const x=this.getLabelAlign(m,l,b.angle);return b=se(x,b),ee(b.text)&&(b.text=b.text({label:e.label,value:e.rawValue,index:e.index,layer:s})),Object.assign(Object.assign(Object.assign({},this.getLabelPosition(g,m,y,b)),{text:h??y,_originText:e.label,lineHeight:b==null?void 0:b.fontSize,type:u}),b)}getLabelPosition(e,t,n,s){return e}_transformItems(e){const t=[];return e.forEach(n=>{var s;t.push(Object.assign(Object.assign({},n),{point:this.getTickCoord(n.value),id:(s=n.id)!==null&&s!==void 0?s:n.label}))}),t}release(){super.release(),this._prevInnerView=null,this._innerView=null}}const iG={parity:function(i){return i.filter((e,t)=>t%2?e.setAttribute("opacity",0):1)},greedy:function(i,e){let t;return i.filter((n,s)=>s&&dl(t,n,e)?n.setAttribute("opacity",0):(t=n,1))}};function tat(i){let e;return e=i.OBBBounds.empty()?i.AABBBounds:i.OBBBounds,e.width()>1&&e.height()>1}function iat(i){return i.forEach(e=>e.setAttribute("opacity",1)),i}function nG(i,e,t,n,s=!1){if(t&&!i.attribute.opacity){const r=e.length;if(r>1){i.setAttribute("opacity",1);for(let a=0;a<r;a++){const o=s?e[r-1-a]:e[a];if(!n(o))break;o.setAttribute("opacity",0)}}}}function Kae(i,e){if(Te(i))return;const t=i.filter(tat);if(Te(t))return;let n;n=iat(t);const{method:s="parity",separation:r=0}=e,a=ee(s)?s:iG[s]||iG.parity;if(n.length>=3&&GF(n,r)){do n=a(n,r);while(n.length>=3&&GF(n,r));const o=(d,p,f=!0)=>f&&d<3||p,l=o(n.length,e.firstVisible,!1);let c=o(n.length,e.lastVisible);const u=t[0],h=It(t);dl(u,h,r)&&l&&c&&(h.setAttribute("opacity",0),c=!1),nG(u,n,l,d=>dl(d,u,r)),nG(h,n,c,d=>dl(d,h,r)||!(!l||d===u)&&dl(d,u,r),!0)}t.forEach(o=>{o.setAttribute("visible",!!o.attribute.opacity)})}function nat(i){const e=i.AABBBounds;return{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,centerX:i.attribute.x,centerY:i.attribute.y,angle:i.attribute.angle}}function sat(i){i.forEach(e=>{if(e.rotatedBounds||!e.attribute.angle)return;const t=nat(e),n=cm({x:e.attribute.x,y:e.attribute.y},t.angle,{x:t.centerX,y:t.centerY}),s=n.x-t.centerX,r=n.y-t.centerY;t.x1+=s,t.x2+=s,t.y1+=r,t.y2+=r,t.centerX+=s,t.centerY+=r,e.rotatedBounds=t})}function rat(i,e){var t,n;return!((t=i.OBBBounds)===null||t===void 0)&&t.empty()||!((n=e.OBBBounds)===null||n===void 0)&&n.empty()?Nb(i.AABBBounds,e.AABBBounds,!1)&&(!i.rotatedBounds||!e.rotatedBounds||sse(i.rotatedBounds,e.rotatedBounds,!0)):i.OBBBounds.intersects(e.OBBBounds)}const Xae=Math.sin(Math.PI/10);function Yae(i){const e=!B(i)&&i!==0,t=e?Math.cos(i):1;return e&&Math.abs(t)<=Xae}function qae(i){const e=!B(i)&&i!==0,t=e?Math.sin(i):0;return!e||Math.abs(t)<=Xae}function aat(i,e){if(Te(i))return;const{orient:t,labelRotateAngle:n=[0,45,90]}=e;if(n.length===0||i.some(a=>!!a.attribute.angle))return;let s=0,r=0;for(n&&n.length>0&&(r=n.length);s<r;){const a=n[s++];if(i.forEach(o=>{o.attribute.angle=zt(a)}),lat(t,i),!oat(i))break}}function oat(i){for(let e=1;e<i.length;e++)if(rat(i[e-1],i[e]))return!0;return!1}function lat(i,e){i!=="bottom"&&i!=="top"||uat(i,e),i!=="left"&&i!=="right"||cat(i,e),sat(e)}function oO(i=0){if(i<0)for(;i<0;)i+=2*Math.PI;if(i>0)for(;i>=2*Math.PI;)i-=2*Math.PI;return i}function cat(i,e){e.forEach((t,n)=>{t.attribute.angle&&t.setAttributes(Object.assign(Object.assign({},Jae(i,t.attribute.angle)),{angle:oO(t.attribute.angle)}))})}function uat(i,e){e.forEach(t=>{t.attribute.angle&&t.setAttributes(Object.assign(Object.assign({},Zae(i,t.attribute.angle)),{angle:oO(t.attribute.angle)}))})}function Zae(i,e=0){let t=["center","left","left","left","center","right","right","right","left"],n=["top","top","middle","bottom","bottom","bottom","middle","top","top"];i==="top"&&(t=["center","right","right","right","center","left","left","left","right"],n=["bottom","bottom","middle","top","top","top","middle","bottom","bottom"]);const s=(e=oO(e))/(.5*Math.PI);let r;return r=s===Math.floor(s)?2*Math.floor(s):2*Math.floor(s)+1,{textAlign:t[r],textBaseline:n[r]}}function Jae(i,e=0){let t=["right","right","center","left","left","left","center","right","right"],n=["middle","middle","top","top","middle","middle","bottom","bottom","middle"];i==="right"&&(t=["left","left","center","right","right","right","center","left","left"],n=["middle","middle","bottom","bottom","middle","middle","top","middle","middle"]);const s=(e=oO(e))/(.5*Math.PI);let r;return r=s===Math.floor(s)?2*Math.floor(s):2*Math.floor(s)+1,{textAlign:t[r],textBaseline:n[r]}}function hat(i){return Z(i)?{left:i,right:i}:Ke(i)?{left:i.left||0,right:i.right||0}:{left:0,right:0}}function dat(i,e){const{limitLength:t,verticalLimitLength:n,ellipsis:s="...",orient:r,axisLength:a}=e;if(Te(i)||!Z(t))return;const o=hat(e.overflowLimitLength),l=i[0],c=l.attribute.angle,u=!B(c),h=u?Math.cos(c):1,d=u?Math.sin(c):0,p=qae(c),f=Yae(c),g=r==="top"||r==="bottom",m=l.attribute.direction,y=!p&&!f&&g&&(i.length<2||i.some(b=>Math.abs(b.AABBBounds.width()-l.AABBBounds.width())>=2))&&l.AABBBounds.width()>Math.abs(t/d);i.forEach(b=>{var x;if(g&&(f&&Math.floor(b.AABBBounds.height())<=t||p&&Math.floor(b.AABBBounds.width())<=n)||!g&&(m==="vertical"&&Math.floor(b.AABBBounds.height())<=n||m!=="vertical"&&(p&&Math.floor(b.AABBBounds.width())<=t||f&&Math.floor(b.AABBBounds.height())<=n)))return;let S=null;if(p||f)S=g?p?n:t:m==="vertical"||f?n:t;else if(g){const{x1:C,x2:w}=b.AABBBounds,A=d/h,T=Math.abs(t/d);if(y&&A>0&&C<=a+o.right&&t/A+C>a+o.right){const E=(a-C+o.right)/Math.abs(h);S=Math.min(E,T)}else if(y&&A<0&&w>=-o.left&&t/A+w<-o.left){const E=(w+o.left)/Math.abs(h);S=Math.min(E,T)}else S=T}else S=Math.abs(t/h);Z(b.attribute.maxLineWidth)&&(S=Z(S)?Math.min(b.attribute.maxLineWidth,S):b.attribute.maxLineWidth),b.setAttributes({maxLineWidth:S,ellipsis:(x=b.attribute.ellipsis)!==null&&x!==void 0?x:s})})}function pat(i,e){const{limitLength:t,axisLength:n,ellipsis:s="...",orient:r}=e;if(Te(i)||!Z(t))return;const a=i[0].attribute.angle,o=qae(a),l=Yae(a),c=r==="top"||r==="bottom";let u=n/i.length;i.forEach((h,d)=>{var p,f,g,m,y;if(c){if(l&&Math.floor(h.AABBBounds.height())<=t)return;if(o){const S=sG(h.attribute.x,(p=i[d+1])===null||p===void 0?void 0:p.attribute.x,(f=i[d-1])===null||f===void 0?void 0:f.attribute.x);Z(S)&&(u=fs(u,S))}}else{if(l){const S=sG(h.attribute.y,(g=i[d+1])===null||g===void 0?void 0:g.attribute.y,(m=i[d-1])===null||m===void 0?void 0:m.attribute.y);Z(S)&&(u=fs(u,S))}if(o&&Math.floor(h.AABBBounds.width())<=t)return}let b=null,x=null;c?l?(b=t,x=u):(b=u,x=t):l?(b=u,x=t):(b=t,x=u),h.setAttributes({maxLineWidth:b,ellipsis:(y=h.attribute.ellipsis)!==null&&y!==void 0?y:s,whiteSpace:"normal",heightLimit:x})})}function sG(i,e,t){let n;return Z(e)&&(n=Math.abs(e-i)),Z(t)&&(n=Z(n)?Math.min(Math.abs(i-t),n):Math.abs(i-t)),n}function fat(i,e,t,n,s){n==="left"||n==="right"?s==="left"?i.forEach(r=>{var a;r.setAttributes({dx:((a=r.attribute.dx)!==null&&a!==void 0?a:0)+e-r.AABBBounds.x1})}):s==="right"?i.forEach(r=>{var a;r.setAttributes({dx:((a=r.attribute.dx)!==null&&a!==void 0?a:0)+e+t-r.AABBBounds.x2})}):s==="center"&&i.forEach(r=>{var a;r.setAttributes({dx:((a=r.attribute.dx)!==null&&a!==void 0?a:0)+e+t/2-(r.AABBBounds.x1+r.AABBBounds.x2)/2})}):n!=="bottom"&&n!=="top"||(s==="top"?i.forEach(r=>{var a;r.setAttributes({dy:((a=r.attribute.dy)!==null&&a!==void 0?a:0)+e-r.AABBBounds.y1})}):s==="bottom"?i.forEach(r=>{var a;r.setAttributes({dy:((a=r.attribute.dy)!==null&&a!==void 0?a:0)+e+t-r.AABBBounds.y2})}):s==="middle"&&i.forEach(r=>{var a;r.setAttributes({dy:((a=r.attribute.dy)!==null&&a!==void 0?a:0)+e+t/2-(r.AABBBounds.y1+r.AABBBounds.y2)/2})}))}class Qae{isInValidValue(e){return e<0||e>1}getTickCoord(e){const{start:t}=this.attribute,n=this.getRelativeVector();return{x:t.x+n[0]*e,y:t.y+n[1]*e}}getRelativeVector(e){const{start:t,end:n}=this.attribute;return[n.x-t.x,n.y-t.y]}getVerticalVector(e,t=!1,n){const{verticalFactor:s=1}=this.attribute,r=this.getRelativeVector(),a=irt(r),o=[a[1],-1*a[0]];return Tae(o,e*(t?1:-1)*s)}}function eoe(){on(),Gu(),Ud(),$c()}function gat(){eoe(),Ku()}function mat(){eoe(),Wst()}function yat(){on(),Dx()}function _at(){on(),Dx()}var rG=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};gat();class a1 extends Gae{constructor(e,t){super(t!=null&&t.skipDefault?e:se({},a1.defaultAttributes,e),t)}_renderInner(e){var t;if(this._breaks=null,this.attribute.breaks&&this.attribute.breaks.length){const s=[];for(let r=0;r<this.attribute.breaks.length;r++){const a=this.attribute.breaks[r],{range:o,breakSymbol:l,rawRange:c}=a;s.push({startPoint:this.getTickCoord(o[0]),endPoint:this.getTickCoord(o[1]),range:o,breakSymbol:l,rawRange:c})}this._breaks=s}super._renderInner(e),this._breaks&&this._breaks.length&&this._breaks.forEach((s,r)=>{const{startPoint:a,endPoint:o,breakSymbol:l,rawRange:c}=s;if((l==null?void 0:l.visible)!==!1){const u=Ae.group({zIndex:qrt});u.name=Wn.axisBreak,u.id=this._getNodeId(`${Wn.axisBreak}-${r}`),u.data=c;const h=Jrt(l),d=Ae.symbol(Object.assign({x:a.x,y:a.y},h));d.name=Wn.axisBreakSymbol;const p=Ae.symbol(Object.assign({x:o.x,y:o.y},h));p.name=Wn.axisBreakSymbol,u.add(d),u.add(p),e.add(u)}});const{panel:n}=this.attribute;if(n&&n.visible){const s=this.axisContainer,r=s.AABBBounds,a=Ae.rect(Object.assign({x:r.x1,y:r.y1,width:r.width(),height:r.height()},n.style));a.name=Wn.background,a.id=this._getNodeId("background"),a.states=se({},Yl,(t=n.state)!==null&&t!==void 0?t:{}),s.insertBefore(a,s.firstChild)}}renderLine(e){const{start:t,end:n,line:s}=this.attribute,r=s,{startSymbol:a,endSymbol:o,style:l,state:c}=r,u=rG(r,["startSymbol","endSymbol","style","state"]),h=Object.assign({startSymbol:a,endSymbol:o,lineStyle:l},u);if(this._breaks&&this._breaks.length){const p=[];let f=t;this._breaks.forEach(g=>{const{startPoint:m,endPoint:y}=g;p.push([f,m]),f=y}),p.push([f,n]),h.points=p,h.multiSegment=!0}else h.points=[t,n];Te(c)||(h.state={line:se({},Yl,c),symbol:se({},Yl,c)});const d=new Du(h);d.name=Wn.line,d.id=this._getNodeId("line"),e.add(d)}getTextAlign(e){let t="center";return Nn(e[0],0)?Nn(e[1],0)?Object.is(e[1],-0)?t="start":Object.is(e[0],-0)&&(t="end"):t="center":e[0]>0?t="start":e[0]<0&&(t="end"),t}getTitleAttribute(){var e,t,n;const s=this.attribute.title,{position:r="middle",space:a=4,textStyle:o={},autoRotate:l=!0,shape:c,background:u,state:h={},maxWidth:d}=s,p=rG(s,["position","space","textStyle","autoRotate","shape","background","state","maxWidth"]);let f=.5;r==="start"?f=0:r==="end"&&(f=1);const{verticalFactor:g=1}=this.attribute,m=-1*g,y=this.getTickCoord(f),b=this.getRelativeVector();let x=0;if(!((e=this.attribute.label)===null||e===void 0)&&e.visible&&this.attribute.label.inside===!1){const R=+et(this.attribute,"label.space",4);x+=R;const j=Object.keys(this.axisLabelLayerSize).length;if(b[1]===0){const I=this.axisLabelsContainer?this.axisLabelsContainer.AABBBounds.height():0;isFinite(I)?x+=I+(j-1)*R:x=0}else if(b[0]===0)if(this.axisLabelsContainer&&this.axisLabelsContainer.AABBBounds&&!this.axisLabelsContainer.AABBBounds.empty()){const I=this.axisLabelLayerSize[0].labelPos,D=this.axisLabelsContainer.AABBBounds;x+=(m===1?D.x2>I?Math.min(D.x2-I,D.width()):0:D.x1<I?Math.min(I-D.x1,D.width()):0)+(j-1)*R}else x=0;else Object.keys(this.axisLabelLayerSize).forEach((I,D)=>{x+=this.axisLabelLayerSize[I].width+(D>0?R:0)})}let S=0;!((t=this.attribute.tick)===null||t===void 0)&&t.visible&&this.attribute.tick.inside===!1&&(S=this.attribute.tick.length||4),!((n=this.attribute.subTick)===null||n===void 0)&&n.visible&&this.attribute.subTick.inside===!1&&(S=Math.max(S,this.attribute.subTick.length||2));const C=S+x+a,w=this.getVerticalCoord(y,C,!1),A=this.getVerticalVector(C,!1,{x:0,y:0});let T,E,{angle:P}=p;if(T=r==="start"?"start":r==="end"?"end":"center",B(P)&&l){P=srt(b,[1,0],!0);const{verticalFactor:R=1}=this.attribute;E=-1*R===1?"bottom":"top"}else T=this.getTextAlign(A),E=this.getTextBaseline(A,!1);let O=d;if(B(O)){const{verticalLimitSize:R,verticalMinSize:j,orient:I}=this.attribute,D=Math.min(R||1/0,j||1/0);if(Z(D))if(I==="bottom"||I==="top")if(P!==Math.PI/2){const z=Math.abs(Math.cos(P??0));O=z<1e-6?1/0:this.attribute.end.x/z}else O=D-C;else if(P&&P!==0){const z=Math.abs(Math.sin(P));O=z<1e-6?1/0:this.attribute.end.y/z}else O=D-C}const M=Object.assign(Object.assign(Object.assign({},w),p),{maxWidth:O,textStyle:Object.assign({textAlign:T,textBaseline:E},o),state:{text:se({},Yl,h.text),shape:se({},Yl,h.shape),panel:se({},Yl,h.background)}});return M.angle=P,c&&c.visible&&(M.shape=Object.assign({visible:!0},c.style),c.space&&(M.space=c.space)),u&&u.visible&&(M.panel=Object.assign({visible:!0},u.style)),M}getTextBaseline(e,t){let n="middle";const{verticalFactor:s=1}=this.attribute,r=(t?1:-1)*s;return Nn(e[1],0)?n=!Nn(e[0],0)||Object.is(e[0],-0)||Object.is(e[1],-0)?"middle":r===1?"bottom":"top":e[1]>0?n="top":e[1]<0&&(n="bottom"),n}getLabelAlign(e,t,n){const s=this.attribute.orient;if(["top","bottom","right","left"].includes(s)||e[0]===0&&e[1]===0){if(s==="top"||s==="bottom")return Zae(t?s==="bottom"?"top":"bottom":s,n);if(s==="left"||s==="right")return Jae(t?s==="left"?"right":"left":s,n)}return{textAlign:this.getTextAlign(e),textBaseline:this.getTextBaseline(e,t)}}beforeLabelsOverlap(e,t,n,s,r){var a,o,l,c;const{flush:u=!1}=this.attribute.label||{};if(u&&e.length){const{orient:h,start:d,end:p}=this.attribute,f=h==="bottom"||h==="top",g=e[0],m=It(e),y=f?g.attribute.x>m.attribute.x:g.attribute.y<m.attribute.y;if(f){const b=y?m:g,x=y?g:m,S=d.x,C=p.x,w=b.AABBBounds.x1,A=x.AABBBounds.x2;w<S&&(b.attribute.angle?b.setAttributes({dx:((a=b.attribute.dx)!==null&&a!==void 0?a:0)+S-w}):b.setAttributes({x:S,textAlign:"left"})),A>C&&(x.attribute.angle?x.setAttributes({dx:((o=x.attribute.dx)!==null&&o!==void 0?o:0)+C-A}):x.setAttributes({x:C,textAlign:"right"}))}else{const b=y?m:g,x=y?g:m,S=b.AABBBounds.y2,C=x.AABBBounds.y1,w=d.y,A=p.y;C<w&&(x.attribute.angle?x.setAttributes({dy:((l=x.attribute.dy)!==null&&l!==void 0?l:0)+w-C}):x.setAttributes({y:w,textBaseline:"top"})),S>A&&(b.attribute.angle?b.setAttributes({dy:((c=b.attribute.dy)!==null&&c!==void 0?c:0)+A-S}):b.setAttributes({y:A,textBaseline:"bottom"}))}}}handleLabelsOverlap(e,t,n,s,r){if(Te(e))return;const{verticalLimitSize:a,label:o,orient:l}=this.attribute,c=this._getAxisLabelLimitLength(a,r),{layoutFunc:u,autoRotate:h,autoRotateAngle:d,autoLimit:p,limitEllipsis:f,autoHide:g,autoHideMethod:m,autoHideSeparation:y,lastVisible:b,firstVisible:x,autoWrap:S,overflowLimitLength:C}=o;if(ee(u))u(e,t,s,this);else{if(h)aat(e,{labelRotateAngle:d,orient:l});else if(S){const w=Math.abs(l==="left"||l==="right"?this.attribute.start.y-this.attribute.end.y:this.attribute.start.x-this.attribute.end.x);pat(e,{orient:l,limitLength:c,axisLength:w,ellipsis:f})}if(!S&&p&&Z(c)&&c>0){const w=l==="left"||l==="right",A=Math.abs(w?this.attribute.start.y-this.attribute.end.y:this.attribute.start.x-this.attribute.end.x),T=w?A/e.length:g||h?1/0:A/e.length;dat(e,{limitLength:c,verticalLimitLength:T,ellipsis:f,orient:l,axisLength:A,overflowLimitLength:C})}g&&Kae(e,{orient:l,method:m,separation:y,lastVisible:b,firstVisible:x})}}afterLabelsOverlap(e,t,n,s,r){const{verticalLimitSize:a,orient:o}=this.attribute,l=o==="bottom"||o==="top",c=n.AABBBounds;let u=l?c.height():c.width();const{verticalMinSize:h}=this.attribute;if(Z(h)&&(!Z(a)||h<=a)){const d=this._getAxisLabelLimitLength(h,r);let p,f;u=Math.max(u,d),o==="left"?(p=c.x2-u,f=c.y1):o==="right"?(p=c.x1,f=c.y1):o==="top"?(p=c.x1,f=c.y2-u):o==="bottom"&&(p=c.x1,f=c.y1);const g=Ae.rect({x:p,y:f,width:l?c.width():u,height:l?u:c.height(),pickable:!1});g.name=Wn.axisLabelBackground,g.id=this._getNodeId("axis-label-background"),n.insertBefore(g,n.firstChild)}if(F(this.attribute.label.containerAlign)){let d;o==="left"?d=c.x2-u:o==="right"?d=c.x1:o==="top"?d=c.y2-u:o==="bottom"&&(d=c.y1),fat(e,d,u,o,this.attribute.label.containerAlign)}}_getAxisLabelLimitLength(e,t){var n,s,r,a,o;const{label:l,title:c,line:u,tick:h}=this.attribute,d=(n=l.space)!==null&&n!==void 0?n:4;let p=e,f=0,g=0;const m=u&&u.visible?(s=u.style.lineWidth)!==null&&s!==void 0?s:1:0,y=h&&h.visible?(r=h.length)!==null&&r!==void 0?r:4:0;if(c&&c.visible&&typeof c.text=="string"){f=JP(c.text,c.textStyle,(o=(a=this.stage)===null||a===void 0?void 0:a.getTheme())===null||o===void 0?void 0:o.text).height;const b=Cr(c.padding);g=c.space+b[0]+b[2]}return p&&(p=(p-d-g-f-m-y)/t),p}release(){super.release(),this._breaks=null}}a1.defaultAttributes=eT,Yt(a1,Qae);class toe{isInValidValue(e){const{startAngle:t=Py,endAngle:n=Oy}=this.attribute;return Math.abs(n-t)%(2*Math.PI)==0?e>1:e<0||e>1}getTickCoord(e){const{startAngle:t=Py,endAngle:n=Oy,center:s,radius:r,inside:a=!1,innerRadius:o=0}=this.attribute;return ui(s,a&&o>0?o:r,t+(n-t)*e)}getVerticalVector(e,t=!1,n){return WF(e,n,this.attribute.center,t,this.attribute.inside)}getRelativeVector(e){const{center:t}=this.attribute;return[e.y-t.y,-1*(e.x-t.x)]}}function ioe(i,e){const t=i.length;return{prevLabel:e>=1?i[e-1]:i[t-1],nextLabel:e<t-1?i[e+1]:i[0]}}function m_(i,e,t){var n;i.setAttributes({maxLineWidth:e,ellipsis:(n=i.attribute.ellipsis)!==null&&n!==void 0?n:t})}function aG(i,e,t){const n=[];if(i.length>=3){const{prevLabel:a,nextLabel:o}=ioe(i,e);n.push(a,o)}else i.length===2&&n.push(i[e===0?1:0]);const s=i[e];let r=Math.min(Math.abs(s.attribute.y-t.y1),Math.abs(s.attribute.y-t.y2));n.forEach(a=>{r=Math.min(r,Math.abs(a.attribute.y-s.attribute.y))}),r>0&&s.setAttributes({whiteSpace:"normal",heightLimit:r})}function vat(i,e){const{ellipsis:t,inside:n,bounds:s,autoWrap:r,center:a}=e;n||i.forEach((o,l)=>{const{x:c,y:u}=o.attribute,h=o.AABBBounds;if(Nn(c,a.x)){if(u>s.y2||u<s.y1)return void m_(o,0,t);const d=s.x2-s.x1;if(i.length>=3){const{prevLabel:p,nextLabel:f}=ioe(i,l);let g=p.attribute.x,m=f.attribute.x;g>m&&(g=f.attribute.x,m=p.attribute.x);const y=g===m?d:c>=g&&c<=m?m-g:Math.min(Math.abs(g-c),Math.abs(m-c));o.AABBBounds.width()>y&&m_(o,y,t)}else o.AABBBounds.width()>d&&m_(o,d,t)}else c>a.x&&h.x2>s.x2?(m_(o,s.x2-c,t),r&&aG(i,l,s)):c<a.x&&h.x1<s.x1&&(m_(o,c-s.x1,t),r&&aG(i,l,s))})}var bat=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};mat();class o1 extends Gae{constructor(e,t){super(t!=null&&t.skipDefault?e:se({},o1.defaultAttributes,e))}renderLine(e){const{startAngle:t=Py,endAngle:n=Oy,radius:s,center:r,innerRadius:a=0,line:o={},inside:l=!1,sides:c}=this.attribute;let u,h=s,d=a;if(l&&a>0&&(h=a,d=0),Z(c)&&c>=3){const p=Hae(r,c,h,t,n);u=Ae.path(Object.assign(Object.assign({},o.style),{path:Mp(p,!0)}))}else{const p=Object.assign(Object.assign(Object.assign({},r),{startAngle:t,endAngle:n,radius:h,innerRadius:d}),o.style);u=Ae.circle(p)}u.name=Wn.line,u.id=this._getNodeId("line"),Te(o.state)||(u.states=se({},Yl,o.state)),e.add(u)}getTitleAttribute(){var e,t,n;const{center:s,radius:r,innerRadius:a=0}=this.attribute,o=this.attribute.title,{space:l=4,textStyle:c={},shape:u,background:h,state:d={}}=o,p=bat(o,["space","textStyle","shape","background","state"]);let f=s,g=0;!((e=this.attribute.label)===null||e===void 0)&&e.visible&&this.attribute.label.inside===!1&&(g=et(this.attribute.label,"style.fontSize",12)+et(this.attribute.label,"space",4));let m=0;!((t=this.attribute.tick)===null||t===void 0)&&t.visible&&this.attribute.tick.inside===!1&&(m=this.attribute.tick.length||4),!((n=this.attribute.subTick)===null||n===void 0)&&n.visible&&this.attribute.subTick.inside===!1&&(m=Math.max(m,this.attribute.subTick.length||2));const y=r+m+g+l;let b="middle",{position:x}=this.attribute.title;B(x)&&(x=a===0?"end":"middle"),x==="start"?(b="bottom",f={x:s.x,y:s.y-y}):x==="end"&&(b="top",f={x:s.x,y:s.y+y});const S=Object.assign(Object.assign(Object.assign({},f),p),{textStyle:Object.assign({textBaseline:b,textAlign:"center"},c),state:{text:se({},Yl,d.text),shape:se({},Yl,d.shape),panel:se({},Yl,d.background)}}),{angle:C}=p;return S.angle=C,u&&u.visible&&(S.shape=Object.assign({visible:!0},u.style),u.space&&(S.space=u.space)),h&&h.visible&&(S.panel=Object.assign({visible:!0},h.style)),S}getSubTickLineItems(){var e,t;const{subTick:n}=this.attribute,s=[],{count:r=4,inside:a=!1,length:o=2}=n,l=this.tickLineItems,c=l.length;if(c>=2){const u=this.data[1].value-this.data[0].value,h=(t=(e=this.attribute)===null||e===void 0?void 0:e.tick)===null||t===void 0?void 0:t.alignWithLabel;for(let d=0;d<c;d++){const p=l[d],f=l[d+1];for(let g=0;g<r;g++){const m=(g+1)/(r+1),y=(1-m)*p.value+m*(f?f.value:h?1:p.value+u),b=this.getTickCoord(y),x=this.getVerticalCoord(b,o,a);s.push({start:b,end:x,value:y})}}}return s}beforeLabelsOverlap(e,t,n,s,r){}handleLabelsOverlap(e,t,n,s,r){if(Te(e))return;const{inside:a,radius:o,center:l,size:c,label:u,orient:h}=this.attribute,d=c?{x1:0,y1:0,x2:c.width,y2:c.height}:{x1:l.x-o,y1:l.y-o,x2:l.x+o,y2:l.y+o},{layoutFunc:p,autoLimit:f,limitEllipsis:g,autoHide:m,autoHideMethod:y,autoHideSeparation:b,autoWrap:x}=u;ee(p)?p(e,t,s,this):((f||x)&&vat(e,{inside:a,autoWrap:x,bounds:d,ellipsis:g,center:l}),m&&Kae(e,{orient:h,method:y,separation:b}))}afterLabelsOverlap(e,t,n,s,r){}getTextBaseline(e){return Math.abs(e[1]/e[0])<.3?"middle":e[1]<0?"bottom":e[1]>0?"top":"middle"}getLabelAlign(e,t,n){return Nn(e[0],0)?{textAlign:"center",textBaseline:e[1]>0?"top":"bottom"}:e[0]<0?{textAlign:"right",textBaseline:this.getTextBaseline(e)}:e[0]>0?{textAlign:"left",textBaseline:this.getTextBaseline(e)}:{textAlign:"center",textBaseline:"middle"}}getLabelPosition(e,t,n,s){return e}}o1.defaultAttributes=eT,Yt(o1,toe);class xat extends Ba{constructor(){super(...arguments),this.mode=xy.NORMAL}onBind(){const e=this.target.getInnerView(),t=this.target.getPrevInnerView();t&&(this._newElementAttrMap={},hl(e,n=>{var s,r,a,o,l,c;if(n.type!=="group"&&n.id){const u=t[n.id];if(u){if(!Pt(n.attribute,u.attribute)){const h=Ta(n.attribute);this._newElementAttrMap[n.id]={state:"update",node:n,attrs:Object.assign(Object.assign({},h),{opacity:(s=h.opacity)!==null&&s!==void 0?s:1,fillOpacity:(r=h.fillOpacity)!==null&&r!==void 0?r:1,strokeOpacity:(a=h.strokeOpacity)!==null&&a!==void 0?a:1})},n.setAttributes(u.attribute)}}else{const h={opacity:(o=n.attribute.opacity)!==null&&o!==void 0?o:1,fillOpacity:(l=n.attribute.fillOpacity)!==null&&l!==void 0?l:1,strokeOpacity:(c=n.attribute.strokeOpacity)!==null&&c!==void 0?c:1};this._newElementAttrMap[n.id]={state:"enter",node:n,attrs:h},n.setAttributes({opacity:0,fillOpacity:0,strokeOpacity:0})}}}))}onStart(){let e=this.duration,t=this.easing;this._newElementAttrMap&&Object.keys(this._newElementAttrMap).forEach(n=>{var s;const{node:r,attrs:a,state:o}=this._newElementAttrMap[n];if(o==="enter"){const{enter:l={}}=(s=this.params)!==null&&s!==void 0?s:{};e=Z(l.duration)?l.duration:e,t=l.easing?l.easing:t}r.type==="path"?r.animate({interpolate:(l,c,u,h,d)=>l==="path"&&(d.path=yKe(u,h)(c),!0)}).to(a,e,t):r.animate().to(a,e,t)})}onUpdate(e,t,n){}}const _u=i=>i.map((e,t)=>({index:t,value:e})),oG=(i,e,t=0)=>{const n=new Qi(i).expand(t/2),s=new Qi(e).expand(t/2);return n.intersects(s)},lG=12,gC=(i,e,t,n)=>t<i?Math.max(i-e/2,t):t>i?Math.min(i-e/2,t-e):t<n?t:t-e,noe=(i,e,t)=>{var n;const{labelStyle:s,axisOrientType:r,labelFlush:a,labelFormatter:o,startAngle:l=0}=t;let c=(n=s.angle)!==null&&n!==void 0?n:0;s.direction==="vertical"&&(c+=zt(90));const u=["bottom","top"].includes(r),h=["left","right"].includes(r);let d=1,p=0;u||(h?(d=0,p=1):l&&(d=Math.cos(l),p=-Math.sin(l)));const f=Ym(s),g=i.range();return e.map((y,b)=>{var x,S;const C=o?o(y):`${y}`,{width:w,height:A}=f.quickMeasure(C),T=Math.max(w,12),E=Math.max(A,12),P=i.scale(y),O=d*P,M=p*P;let R,j,I=O,D=M;a&&u&&b===0?I=gC(O,T,g[0],g[g.length-1]):a&&u&&b===e.length-1?I=gC(O,T,g[g.length-1],g[0]):R=(x=s.textAlign)!==null&&x!==void 0?x:"center",R==="right"?I-=T:R==="center"&&(I-=T/2),a&&h&&b===0?D=gC(M,E,g[0],g[g.length-1]):a&&h&&b===e.length-1?D=gC(M,E,g[g.length-1],g[0]):j=(S=s.textBaseline)!==null&&S!==void 0?S:"middle",j==="bottom"?D-=E:j==="middle"&&(D-=E/2);const z=new Qi().set(I,D,I+T,D+E);return c&&z.rotate(c,O,M),z})},Sat=i=>["bottom","top","z"].includes(i);var rn;(function(i){i.Identity="identity",i.Linear="linear",i.Log="log",i.Pow="pow",i.Sqrt="sqrt",i.Symlog="symlog",i.Time="time",i.Quantile="quantile",i.Quantize="quantize",i.Threshold="threshold",i.Ordinal="ordinal",i.Point="point",i.Band="band"})(rn||(rn={}));const soe={};Object.values(rn).forEach(i=>{soe[i]=!0});function $t(i){switch(i){case rn.Linear:case rn.Log:case rn.Pow:case rn.Sqrt:case rn.Symlog:case rn.Time:return!0;default:return!1}}function KF(i){return!!soe[i]}function ys(i){switch(i){case rn.Ordinal:case rn.Point:case rn.Band:return!0;default:return!1}}function jg(i){return i}const Cat=i=>i<0?-Math.sqrt(-i):Math.sqrt(i),wat=i=>i<0?-i*i:i*i,Aat=i=>-Math.log(-i),kat=i=>-Math.exp(-i),Tat=i=>isFinite(i)?Math.pow(10,i):i<0?0:i,cG=i=>i===10?Tat:i===Math.E?Math.exp:e=>Math.pow(i,e),uG=i=>i===Math.E?Math.log:i===10?Math.log10:i===2?Math.log2:(i=Math.log(i),e=>Math.log(e)/i),hG=i=>e=>Math.sign(e)*Math.log1p(Math.abs(e/i)),dG=i=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*i;function XF(i,e){if(i=Number(i),e=Number(e),e-=i)return n=>(n-i)/e;const t=Number.isNaN(e)?NaN:.5;return()=>t}function pG(i,e,t){const n=i[0],s=i[1],r=e[0],a=e[1];let o,l;return s<n?(o=XF(s,n),l=t(a,r)):(o=XF(n,s),l=t(r,a)),c=>l(o(c))}function q5(i,e,t){let n;return n=i===1?i+2*t:i-e+2*t,i?n>0?n:1:0}function YF(i,e,t,n){return t===1&&(t=0),q5(i,t,n)*(e/(1-t))}function Eat(i,e,t,n,s){const r=q5(i,t,n);let a=e/Math.max(1,r||1);s&&(a=Math.floor(a));let o=a*(1-t);return s&&(o=Math.round(o)),o}function roe(i,e){const t=(i[1]-i[0])/(e[1]-e[0]),n=i[0]-t*e[0];return[n,t+n]}function Pat(i,e,t){const n=Math.min(i.length,e.length)-1,s=new Array(n),r=new Array(n);let a=-1;for(i[n]<i[0]&&(i=i.slice().reverse(),e=e.slice().reverse());++a<n;)s[a]=XF(i[a],i[a+1]),r[a]=t(e[a],e[a+1]);return function(o){const l=Zne(i,o,1,n)-1;return r[l](s[l](o))}}const Oat=(i,e)=>{const t=i.slice();let n=0,s=t.length-1,r=t[n],a=t[s];return a<r&&([n,s]=[s,n],[r,a]=[a,r]),t[n]=e.floor(r),t[s]=e.ceil(a),t},aoe=(i,e=!1)=>{const t=Math.floor(Math.log10(i)),n=i/Math.pow(10,t);let s;return s=e?n<1.5?1:n<3?2:n<7?5:10:n<=1?1:n<=2?2:n<=5?5:10,s*Math.pow(10,t)},Mat=(i,e)=>{let t,n;return e[0]<e[1]?(t=e[0],n=e[1]):(t=e[1],n=e[0]),Math.min(Math.max(i,t),n)};class ooe{constructor(){this._rangeFactorStart=null,this._rangeFactorEnd=null}_calculateWholeRange(e){return this._wholeRange?this._wholeRange:F(this._rangeFactorStart)&&F(this._rangeFactorEnd)&&e.length===2?(this._wholeRange=roe(e,[this._rangeFactorStart,this._rangeFactorEnd]),this._wholeRange):e}rangeFactor(e,t,n){return e?(e.length===2&&e.every(s=>s>=0&&s<=1)&&(this._wholeRange=null,e[0]===0&&e[1]===1?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorStart=e[0],this._rangeFactorEnd=e[1])),this):n?(this._wholeRange=null,this._rangeFactorStart=null,this._rangeFactorEnd=null,this):F(this._rangeFactorStart)&&F(this._rangeFactorEnd)?[this._rangeFactorStart,this._rangeFactorEnd]:null}rangeFactorStart(e,t){var n;return B(e)?this._rangeFactorStart:(e>=0&&e<=1&&(this._wholeRange=null,e!==0||!B(this._rangeFactorEnd)&&this._rangeFactorEnd!==1?(this._rangeFactorStart=e,this._rangeFactorEnd=(n=this._rangeFactorEnd)!==null&&n!==void 0?n:1):(this._rangeFactorStart=null,this._rangeFactorEnd=null)),this)}rangeFactorEnd(e,t){var n;return B(e)?this._rangeFactorEnd:(e>=0&&e<=1&&(this._wholeRange=null,e!==0||!B(this._rangeFactorStart)&&this._rangeFactorStart!==0?(this._rangeFactorEnd=e,this._rangeFactorStart=(n=this._rangeFactorStart)!==null&&n!==void 0?n:0):(this._rangeFactorStart=null,this._rangeFactorEnd=null)),this)}generateFishEyeTransform(){var e;if(!this._fishEyeOptions)return void(this._fishEyeTransform=null);const{distortion:t=2,radiusRatio:n=.1,radius:s}=this._fishEyeOptions,r=this.range(),a=r[0],o=r[r.length-1],l=Math.min(a,o),c=Math.max(a,o),u=zi((e=this._fishEyeOptions.focus)!==null&&e!==void 0?e:0,l,c),h=B(s)?(c-l)*n:s;let d=Math.exp(t);d=d/(d-1)*h;const p=t/h;this._fishEyeTransform=f=>{const g=Math.abs(f-u);if(g>=h)return f;if(g<=1e-6)return u;const m=d*(1-Math.exp(-g*p))/g*.75+.25;return u+(f-u)*m}}unknown(e){return arguments.length?(this._unknown=e,this):this._unknown}get(e,t){var n;return(n=this==null?void 0:this[e])!==null&&n!==void 0?n:t}}const qF=Symbol("implicit");class bf extends ooe{specified(e){var t;return e?(this._specified=Object.assign((t=this._specified)!==null&&t!==void 0?t:{},e),this):Object.assign({},this._specified)}_getSpecifiedValue(e){if(this._specified)return this._specified[e]}constructor(){super(),this.type=rn.Ordinal,this._index=new Map,this._domain=[],this._ordinalRange=[],this._unknown=qF}clone(){const e=new bf().domain(this._domain).range(this._ordinalRange).unknown(this._unknown);return this._specified&&e.specified(this._specified),e}calculateVisibleDomain(e){return F(this._rangeFactorStart)&&F(this._rangeFactorEnd)&&e.length===2?[this.invert(e[0]),this.invert(e[1])]:this._domain}scale(e){const t=`${e}`,n=this._getSpecifiedValue(t);if(n!==void 0)return n;let s=this._index.get(t);if(!s){if(this._unknown!==qF)return this._unknown;s=this._domain.push(e),this._index.set(t,s)}const r=this._ordinalRange[(s-1)%this._ordinalRange.length];return this._fishEyeTransform?this._fishEyeTransform(r):r}invert(e){let t=0;for(;t<this._ordinalRange.length&&this._ordinalRange[t]!==e;)t++;return this._domain[(t-1)%this._domain.length]}domain(e){if(!e)return this._domain.slice();this._domain=[],this._index=new Map;for(const t of e){const n=`${t}`;this._index.has(n)||this._index.set(n,this._domain.push(t))}return this}range(e){if(!e)return this._ordinalRange.slice();const t=Array.from(e);return this._ordinalRange=t,this}index(e){var t;return this._index&&(t=this._index.get(`${e}`))!==null&&t!==void 0?t:-1}}function loe(i,e,t,n){const s=[];let r=i;for(;r<=e;)s.push(r),r+=t;return n&&s.reverse(),s}function fG(i,e,t,n){let s,r;if(e=Math.floor(+e),i=Math.floor(+i),!(t=Math.floor(+t)))return[];if(i===e)return[i];if(s=e<i){const o=i;i=e,e=o}let a=gy(1,e-i+1)(t);if(r=Math.floor((e-i+1)/a),!n)for(;Math.ceil((e-i+1)/r)>t&&a>1;)a-=1,r=Math.floor((e-i)/a);return loe(i,e,r,s)}function Iat(i,e,t){let n;if(e=Math.floor(+e),i=Math.floor(+i),t=gy(1,e-i+1)(Math.floor(+t)),n=e<i){const s=i;i=e,e=s}return loe(i,e,t,n)}class eg extends bf{constructor(e){super(),this.type=rn.Band,this._range=[0,1],this._step=void 0,this._bandwidth=void 0,this._isFixed=!1,this._round=!1,this._paddingInner=0,this._paddingOuter=0,this._align=.5,this._unknown=void 0,delete this.unknown,this.rescale(e)}rescale(e,t){if(e)return this;this._wholeRange=null;const n=this._calculateWholeRange(this._range,t),s=super.domain().length,r=n[1]<n[0];let a=n[Number(r)-0];const o=n[1-Number(r)],l=q5(s,this._paddingInner,this._paddingOuter);return this._step=(o-a)/Math.max(1,l||1),this._round&&(this._step=Math.floor(this._step)),a+=(o-a-this._step*(s-this._paddingInner))*this._align,this.isBandwidthFixed()||(this._bandwidth=this._step*(1-this._paddingInner)),this._round&&(a=Math.round(a),this.isBandwidthFixed()||(this._bandwidth=Math.round(this._bandwidth))),this._bandRangeState={reverse:r,start:r?a+this._step*(s-1):a,count:s},this.generateFishEyeTransform(),this}scale(e){if(!this._bandRangeState)return;const t=`${e}`,n=this._getSpecifiedValue(t);if(n!==void 0)return n;let s=this._index.get(t);if(!s){if(this._unknown!==qF)return this._unknown;s=this._domain.push(e),this._index.set(t,s)}const{count:r,start:a,reverse:o}=this._bandRangeState,l=a+(o?-1:1)*((s-1)%r)*this._step;return this._fishEyeTransform?this._fishEyeTransform(l):l}_calculateWholeRange(e,t){if(this._wholeRange)return this._wholeRange;if((this._minBandwidth||this._maxBandwidth)&&!this._isBandwidthFixedByUser()){let n;if(F(this._rangeFactorStart)&&F(this._rangeFactorEnd)&&e.length===2){const r=roe(e,[this._rangeFactorStart,this._rangeFactorEnd]);n=Math.abs(r[1]-r[0])}else n=Math.abs(e[1]-e[0]);const s=Eat(super.domain().length,n,this._paddingInner,this._paddingOuter,this._round);s<this._minBandwidth?(this._bandwidth=this._minBandwidth,this._isFixed=!0):s>this._maxBandwidth?(this._bandwidth=this._maxBandwidth,this._isFixed=!0):(this._bandwidth=s,this._isFixed=!1)}if(this.isBandwidthFixed()){const n=YF(super.domain().length,this._bandwidth,this._paddingInner,this._paddingOuter)*Math.sign(e[1]-e[0]),s=Math.min((e[1]-e[0])/n,1);if(F(this._rangeFactorStart)&&F(this._rangeFactorEnd)){if(n>0){const o=e[0]-n*this._rangeFactorStart,l=o+n;this._wholeRange=[o,l]}else{const o=e[1]+n*(1-this._rangeFactorEnd),l=o-n;this._wholeRange=[l,o]}const r=this._rangeFactorStart+s<=1,a=this._rangeFactorEnd-s>=0;t==="rangeFactorStart"&&r?this._rangeFactorEnd=this._rangeFactorStart+s:t==="rangeFactorEnd"&&a?this._rangeFactorStart=this._rangeFactorEnd-s:e[0]<=e[1]?r?this._rangeFactorEnd=this._rangeFactorStart+s:a?this._rangeFactorStart=this._rangeFactorEnd-s:(this._rangeFactorStart=0,this._rangeFactorEnd=s):a?this._rangeFactorStart=this._rangeFactorEnd-s:r?this._rangeFactorEnd=this._rangeFactorStart+s:(this._rangeFactorStart=1-s,this._rangeFactorEnd=1)}else this._rangeFactorStart=0,this._rangeFactorEnd=s,this._wholeRange=[e[0],e[0]+n];return this._wholeRange}return super._calculateWholeRange(e)}calculateWholeRangeSize(){const e=this._calculateWholeRange(this._range);return Math.abs(e[1]-e[0])}calculateVisibleDomain(e){const t=this._domain;if(F(this._rangeFactorStart)&&F(this._rangeFactorEnd)&&t.length){const n=this._getInvertIndex(e[0]),s=this._getInvertIndex(e[1]);return t.slice(Math.min(n,s),Math.max(n,s)+1)}return t}domain(e,t){return e?(super.domain(e),this.rescale(t)):super.domain()}range(e,t){return e?(this._range=[ac(e[0]),ac(e[1])],this.rescale(t)):this._range}rangeRound(e,t){return this._range=[ac(e[0]),ac(e[1])],this._round=!0,this.rescale(t)}ticks(e=10){const t=this.calculateVisibleDomain(this._range);return e===-1?t:fG(0,t.length-1,e,!1).map(n=>t[n])}tickData(e=10){return this.ticks(e).map((t,n)=>({index:n,tick:t,value:(this.scale(t)-this._range[0]+this._bandwidth/2)/(this._range[1]-this._range[0])}))}forceTicks(e=10){const t=this.calculateVisibleDomain(this._range);return fG(0,t.length-1,e,!0).filter(n=>n<t.length).map(n=>t[n])}stepTicks(e){const t=this.calculateVisibleDomain(this._range);return Iat(0,t.length-1,e).map(n=>t[n])}_getInvertIndex(e){let t=0;const n=this.step()/2,s=this.bandwidth()/2,r=this._domain.length,a=this.range(),o=a[0]>a[a.length-1];for(t=0;t<r;t++){const l=this.scale(this._domain[t])+s;if(t===0&&(!o&&!Zc(e,l+n)||o&&!Wl(e,l-n))||t===r-1||!Wl(e,l-n)&&!Zc(e,l+n))break}return t>=0&&t<=r-1?t:r-1}invert(e){return this._domain[this._getInvertIndex(e)]}padding(e,t){return e!==void 0?(this._paddingOuter=Math.max(0,Math.min(Array.isArray(e)?Math.min.apply(null,e):e)),this._paddingInner=this._paddingOuter,this.rescale(t)):this._paddingInner}paddingInner(e,t){return e!==void 0?(this._paddingInner=Math.max(0,Math.min(1,e)),this.rescale(t)):this._paddingInner}paddingOuter(e,t){return e!==void 0?(this._paddingOuter=Math.max(0,Math.min(1,e)),this.rescale(t)):this._paddingOuter}step(){return this._step}round(e,t){return e!==void 0?(this._round=e,this.rescale(t)):this._round}align(e,t){return e!==void 0?(this._align=Math.max(0,Math.min(1,e)),this.rescale(t)):this._align}rangeFactor(e,t){return e?(super.rangeFactor(e),this.rescale(t)):super.rangeFactor()}rangeFactorStart(e,t){return B(e)?super.rangeFactorStart():(super.rangeFactorStart(e),this.rescale(t,"rangeFactorStart"))}rangeFactorEnd(e,t){return B(e)?super.rangeFactorEnd():(super.rangeFactorEnd(e),this.rescale(t,"rangeFactorEnd"))}bandwidth(e,t){return e?(e==="auto"?(this._bandwidth=void 0,this._isFixed=!1):(this._bandwidth=e,this._isFixed=!0),this._userBandwidth=e,this.rescale(t)):this._bandwidth}maxBandwidth(e,t){return e?(this._maxBandwidth=e==="auto"?void 0:e,this.rescale(t)):this._maxBandwidth}minBandwidth(e,t){return e?(this._minBandwidth=e==="auto"?void 0:e,this.rescale(t)):this._minBandwidth}fishEye(e,t,n){return e||n?(this._fishEyeOptions=e,this._fishEyeTransform=null,this.rescale(t)):this._fishEyeOptions}isBandwidthFixed(){return this._isFixed&&!!this._bandwidth}_isBandwidthFixedByUser(){return this._isFixed&&this._userBandwidth&&ye(this._userBandwidth)}clone(){var e,t,n;return new eg(!0).domain(this._domain,!0).range(this._range,!0).round(this._round,!0).paddingInner(this._paddingInner,!0).paddingOuter(this._paddingOuter,!0).align(this._align,!0).bandwidth((e=this._userBandwidth)!==null&&e!==void 0?e:"auto",!0).maxBandwidth((t=this._maxBandwidth)!==null&&t!==void 0?t:"auto",!0).minBandwidth((n=this._maxBandwidth)!==null&&n!==void 0?n:"auto")}}const{interpolateRgb:II}=BKe;function Rat(i,e){const t=typeof e;let n;if(B(e)||t==="boolean")return()=>e;if(t==="number")return ov(i,e);if(t==="string"){if(n=An.parseColorString(e)){const s=II(An.parseColorString(i),n);return r=>s(r).formatRgb()}return ov(Number(i),Number(e))}return e instanceof xr?II(i,e):e instanceof An?II(i.color,e.color):e instanceof Date?fKe(i,e):ov(Number(i),Number(e))}class coe extends ooe{constructor(e=jg,t=jg){super(),this._unknown=void 0,this.transformer=e,this.untransformer=t,this._forceAlign=!0,this._domain=[0,1],this._range=[0,1],this._clamp=jg,this._piecewise=pG,this._interpolate=Rat}calculateVisibleDomain(e){var t;return F(this._rangeFactorStart)&&F(this._rangeFactorEnd)&&e.length===2?[this.invert(e[0]),this.invert(e[1])]:(t=this._niceDomain)!==null&&t!==void 0?t:this._domain}fishEye(e,t,n){return e||n?(this._fishEyeOptions=e,this._fishEyeTransform=null,this.rescale(t)):this._fishEyeOptions}scale(e){var t;if(e=Number(e),Number.isNaN(e)||this._domainValidator&&!this._domainValidator(e))return this._unknown;this._output||(this._output=this._piecewise(((t=this._niceDomain)!==null&&t!==void 0?t:this._domain).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));const n=this._output(this.transformer(this._clamp(e)));return this._fishEyeTransform?this._fishEyeTransform(n):n}invert(e){var t;return this._input||(this._input=this._piecewise(this._calculateWholeRange(this._range),((t=this._niceDomain)!==null&&t!==void 0?t:this._domain).map(this.transformer),ov)),this._clamp(this.untransformer(this._input(e)))}domain(e,t){var n;if(!e)return((n=this._niceDomain)!==null&&n!==void 0?n:this._domain).slice();this._domainValidator=null,this._niceType=null,this._niceDomain=null;const s=Array.from(e,ac);return this._domain=s,this.rescale(t)}range(e,t){if(!e)return this._range.slice();const n=Array.from(e);return this._range=n,this.rescale(t)}rangeRound(e,t){const n=Array.from(e);return this._range=n,this._interpolate=pKe,this.rescale(t)}rescale(e){var t;if(e)return this;const n=(t=this._niceDomain)!==null&&t!==void 0?t:this._domain,s=n.length,r=this._range.length;let a=Math.min(s,r);if(s&&s<r&&this._forceAlign){const o=r-s+1,l=n[s-1],c=s>=2?(l-n[s-2])/o:0;for(let u=1;u<=o;u++)n[s-2+u]=l-c*(o-u);a=r}return this._autoClamp&&(this._clamp=gy(n[0],n[a-1])),this._piecewise=a>2?Pat:pG,this._output=this._input=null,this._wholeRange=null,this.generateFishEyeTransform(),this}clamp(e,t,n){return arguments.length?(t?(this._autoClamp=!1,this._clamp=t):(this._autoClamp=!!e,this._clamp=e?void 0:jg),this.rescale(n)):this._clamp!==jg}interpolate(e,t){return arguments.length?(this._interpolate=e,this.rescale(t)):this._interpolate}ticks(e=10){return[]}tickData(e=10){const t=this.ticks(e);return(t??[]).map((n,s)=>({index:s,tick:n,value:(this.scale(n)-this._range[0])/(this._range[1]-this._range[0])}))}rangeFactor(e,t){return e?(super.rangeFactor(e),this._output=this._input=null,this):super.rangeFactor()}rangeFactorStart(e,t){return B(e)?super.rangeFactorStart():(super.rangeFactorStart(e),this._output=this._input=null,this)}rangeFactorEnd(e,t){return B(e)?super.rangeFactorEnd():(super.rangeFactorEnd(e),this._output=this._input=null,this)}forceAlignDomainRange(e){return arguments.length?(this._forceAlign=e,this):this._forceAlign}}const Lat=Math.sqrt(50),Dat=Math.sqrt(10),Fat=Math.sqrt(2),mC=[1,2,5,10],gG=(i,e,t)=>{let n=1,s=i;const r=Math.floor((e-1)/2),a=Math.abs(i);return i>=0&&i<=Number.MIN_VALUE?s=0:i<0&&i>=-Number.MIN_VALUE?s=-(e-1):!t&&a<1?n=uoe(a).step:(t||a>1)&&(s=Math.floor(i)-r*n),n>0?(i>0?s=Math.max(s,0):i<0&&(s=Math.min(s,-(e-1)*n)),Yne(0,e).map(o=>s+o*n)):i>0?tT(0,-(e-1)/n,n):tT((e-1)/n,0,n)},Bat=Ax((i,e,t,n)=>{let s,r,a,o,l=-1;if(t=+t,(i=+i)==(e=+e))return[i];if(Math.abs(i-e)<=Number.MIN_VALUE&&t>0)return[i];if((s=e<i)&&(r=i,i=e,e=r),o=Z5(i,e,t).step,!isFinite(o))return[];if(o>0){let c=Math.round(i/o),u=Math.round(e/o);for(c*o<i&&++c,u*o>e&&--u,a=new Array(r=u-c+1);++l<r;)a[l]=(c+l)*o}else if(o<0&&(n!=null&&n.noDecimals)){o=1;const c=Math.ceil(i),u=Math.floor(e);if(!(c<=u))return[];for(a=new Array(r=u-c+1);++l<r;)a[l]=c+l}else{o=-o;let c=Math.round(i*o),u=Math.round(e*o);for(c/o<i&&++c,u/o>e&&--u,a=new Array(r=u-c+1);++l<r;)a[l]=(c+l)/o}return s&&a.reverse(),a}),tT=(i,e,t)=>{let n,s,r=-1;if(t>0){let a=Math.floor(i/t),o=Math.ceil(e/t);for((a+1)*t<i&&++a,(o-1)*t>e&&--o,s=new Array(n=o-a+1);++r<n;)s[r]=(a+r)*t}else{t=-t;let a=Math.floor(i*t),o=Math.ceil(e*t);for((a+1)/t<i&&++a,(o-1)/t>e&&--o,s=new Array(n=o-a+1);++r<n;)s[r]=(a+r)/t}return s},jat=(i,e,t)=>{let n;const s=i[0],r=i[i.length-1],a=e-i.length;if(r<=0){const c=[];for(n=a;n>=1;n--)c.push(s-n*t);return c.concat(i)}if(s>=0){for(n=1;n<=a;n++)i.push(r+n*t);return i}let o=[];const l=[];for(n=1;n<=a;n++)n%2==0?o=[s-Math.floor(n/2)*t].concat(o):l.push(r+Math.ceil(n/2)*t);return o.concat(i).concat(l)},iT=Ax((i,e,t,n)=>{let s,r,a;if(t=+t,(i=+i)==(e=+e)||Math.abs(i-e)<=Number.MIN_VALUE&&t>0)return gG(i,t,n==null?void 0:n.noDecimals);(s=e<i)&&(a=i,i=e,e=a);const o=Z5(i,e,t);let l=o.step;if(!isFinite(l))return[];if(l>0){let c=1;const{power:u,gap:h}=o,d=h===10?2*10**u:1*10**u;for(;c<=5&&(r=tT(i,e,l),r.length>t+1)&&t>2;)l+=d,c+=1;t>2&&r.length<t-1&&(r=jat(r,t,l))}else n!=null&&n.noDecimals&&l<0&&(l=1),r=tT(i,e,l);return s&&r.reverse(),r}),uoe=i=>{const e=Math.floor(Math.log(i)/Math.LN10),t=i/10**e;let n=mC[0];return t>=Lat?n=mC[3]:t>=Dat?n=mC[2]:t>=Fat&&(n=mC[1]),e>=0?{step:n*10**e,gap:n,power:e}:{step:-(10**-e)/n,gap:n,power:e}};function Z5(i,e,t){const n=(e-i)/Math.max(0,t);return uoe(n)}function hoe(i,e,t){let n;if(t=+t,(i=+i)==(e=+e)&&t>0)return[i];if(t<=0||(n=Nat(i,e,t))===0||!isFinite(n))return[];const s=new Array(t);for(let r=0;r<t;r++)s[r]=i+r*n;return s}function Nat(i,e,t){return(e-i)/Math.max(1,t-1)}function $at(i,e,t){let n,s,r=-1;if(t=+t,(s=(e=+e)<(i=+i))&&(n=i,i=e,e=n),!isFinite(t)||e-i<=t)return[i];const a=Math.floor((e-i)/t+1),o=new Array(a);for(;++r<a;)o[r]=i+r*t;return s&&o.reverse(),o}function RI(i,e=10){let t,n,s=0,r=i.length-1,a=i[s],o=i[r],l=10;for(o<a&&(n=a,a=o,o=n,n=s,s=r,r=n);l-- >0;){if(n=Z5(a,o,e).step,n===t)return i[s]=a,i[r]=o,i;if(n>0)a=Math.floor(a/n)*n,o=Math.ceil(o/n)*n;else{if(!(n<0))break;a=Math.ceil(a*n)/n,o=Math.floor(o*n)/n}t=n}}function doe(i,e){const t=ye(e.forceMin),n=ye(e.forceMax);let s=null;const r=[];let a=null;const o=t&&n?l=>l>=e.forceMin&&l<=e.forceMax:t?l=>l>=e.forceMin:n?l=>l<=e.forceMax:null;return t?r[0]=e.forceMin:ye(e.min)&&e.min<=Math.min(i[0],i[i.length-1])&&(r[0]=e.min),n?r[1]=e.forceMax:ye(e.max)&&e.max>=Math.max(i[0],i[i.length-1])&&(r[1]=e.max),ye(r[0])&&ye(r[1])?(a=i.slice(),a[0]=r[0],a[a.length-1]=r[1]):s=ye(r[0])||ye(r[1])?ye(r[0])?"max":"min":"all",{niceType:s,niceDomain:a,niceMinMax:r,domainValidator:o}}const LI=(i,e,t)=>Math.abs(e-i)<1?+t.toFixed(1):Math.round(+t),poe=Ax((i,e,t,n,s,r,a)=>{let o=i,l=e;const c=l<o;c&&([o,l]=[l,o]);let u,h,d=s(o),p=s(l),f=[];if(!(n%1)&&p-d<t){if(d=Math.floor(d),p=Math.ceil(p),o>0){for(;d<=p;++d)for(u=1;u<n;++u)if(h=d<0?u/r(-d):u*r(d),!(h<o)){if(h>l)break;f.push(h)}}else for(;d<=p;++d)for(u=n-1;u>=1;--u)if(h=d>0?u/r(-d):u*r(d),!(h<o)){if(h>l)break;f.push(h)}2*f.length<t&&(f=iT(o,l,t))}else f=iT(d,p,Math.min(p-d,t)).map(r);return f=f.filter(g=>g!==0),a!=null&&a.noDecimals&&(f=Array.from(new Set(f.map(g=>Math.floor(g))))),c?f.reverse():f}),foe=Ax((i,e,t,n,s,r)=>{const a=[],o={},l=s(i),c=s(e);let u=[];if(Number.isInteger(n))u=iT(l,c,t);else{const h=(c-l)/(t-1);for(let d=0;d<t;d++)u.push(l+d*h)}return u.forEach(h=>{const d=r(h),p=Number.isInteger(n)?LI(i,e,d):LI(i,e,aoe(d)),f=LI(i,e,Mat(p,[i,e]));!o[f]&&!isNaN(f)&&u.length>1&&(o[f]=1,a.push(f))}),a}),nT=Ax((i,e,t,n,s)=>hoe(n(i),n(e),t).map(r=>aoe(s(r))));class Ma extends coe{constructor(){super(...arguments),this.type=rn.Linear}clone(){return new Ma().domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate)}tickFormat(){return()=>{}}d3Ticks(e=10,t){const n=this.calculateVisibleDomain(this._range);return Bat(n[0],n[n.length-1],e,t)}ticks(e=10,t){var n;if(ee(t==null?void 0:t.customTicks))return t.customTicks(this,e);if(F(this._rangeFactorStart)&&F(this._rangeFactorEnd)&&(this._rangeFactorStart>0||this._rangeFactorEnd<1)&&this._range.length===2||!this._niceType)return this.d3Ticks(e,t);const s=(n=this._niceDomain)!==null&&n!==void 0?n:this._domain,r=this._domain,a=s[0],o=s[s.length-1];let l=iT(r[0],r[r.length-1],e,t);if(!l.length)return l;if(this._domainValidator)l=l.filter(this._domainValidator);else if((l[0]!==a||l[l.length-1]!==o)&&this._niceType){const c=s.slice();if(this._niceType==="all"?(c[0]=l[0],c[c.length-1]=l[l.length-1],this._niceDomain=c,this.rescale()):this._niceType==="min"&&l[0]!==a?(c[0]=l[0],this._niceDomain=c,this.rescale()):this._niceType==="max"&&l[l.length-1]!==o&&(c[c.length-1]=l[l.length-1],this._niceDomain=c,this.rescale()),this._niceType!=="all"){const u=Math.min(c[0],c[c.length-1]),h=Math.max(c[0],c[c.length-1]);l=l.filter(d=>d>=u&&d<=h)}}return l}forceTicks(e=10){const t=this.calculateVisibleDomain(this._range);return hoe(t[0],t[t.length-1],e)}stepTicks(e){const t=this.calculateVisibleDomain(this._range);return $at(t[0],t[t.length-1],e)}nice(e=10,t){var n,s;const r=this._domain;let a=[];if(t){const o=doe(r,t);if(a=o.niceMinMax,this._domainValidator=o.domainValidator,this._niceType=o.niceType,o.niceDomain)return this._niceDomain=o.niceDomain,this.rescale(),this}else this._niceType="all";if(this._niceType){const o=RI(r.slice(),e);this._niceType==="min"?o[o.length-1]=(n=a[1])!==null&&n!==void 0?n:o[o.length-1]:this._niceType==="max"&&(o[0]=(s=a[0])!==null&&s!==void 0?s:o[0]),this._niceDomain=o,this.rescale()}return this}niceMin(e=10){this._niceType="min";const t=this._domain[this._domain.length-1],n=RI(this.domain(),e);return n&&(n[n.length-1]=t,this._niceDomain=n,this.rescale()),this}niceMax(e=10){this._niceType="max";const t=this._domain[0],n=RI(this._domain.slice(),e);return n&&(n[0]=t,this._niceDomain=n,this.rescale()),this}}class goe{nice(e=10,t){var n,s,r,a;const o=this._domain;let l=[],c=null;if(t){const u=doe(o,t);if(l=u.niceMinMax,this._domainValidator=u.domainValidator,c=u.niceType,u.niceDomain)return this._niceDomain=u.niceDomain,this.rescale(),this}else c="all";if(c){const u=Oat(o.slice(),(s=(n=this.getNiceConfig)===null||n===void 0?void 0:n.call(this))!==null&&s!==void 0?s:{floor:h=>Math.floor(h),ceil:h=>Math.ceil(h)});return c==="min"?u[u.length-1]=(r=l[1])!==null&&r!==void 0?r:u[u.length-1]:c==="max"&&(u[0]=(a=l[0])!==null&&a!==void 0?a:u[0]),this._niceDomain=u,this.rescale(),this}return this}niceMin(){const e=this._domain[this._domain.length-1];this.nice();const t=this._domain.slice();return this._domain&&(t[t.length-1]=e,this._niceDomain=t,this.rescale()),this}niceMax(){const e=this._domain[0];this.nice();const t=this._domain.slice();return this._domain&&(t[0]=e,this._niceDomain=t,this.rescale()),this}}function mG(i){return e=>-i(-e)}function yG(i=Number.EPSILON){return e=>Math.max(e,i)}function zat(i=Number.EPSILON){return e=>Math.min(e,-i)}class lO extends coe{constructor(){super(uG(10),cG(10)),this.type=rn.Log,this._limit=yG(),this._logs=this.transformer,this._pows=this.untransformer,this._domain=[1,10],this._base=10}clone(){return new lO().domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).base(this._base)}rescale(e){var t;if(e)return this;super.rescale();const n=uG(this._base),s=cG(this._base);return((t=this._niceDomain)!==null&&t!==void 0?t:this._domain)[0]<0?(this._logs=mG(n),this._pows=mG(s),this._limit=zat(),this.transformer=Aat,this.untransformer=kat):(this._logs=n,this._pows=s,this._limit=yG(),this.transformer=this._logs,this.untransformer=s),this}scale(e){var t;if(e=Number(e),Number.isNaN(e)||this._domainValidator&&!this._domainValidator(e))return this._unknown;this._output||(this._output=this._piecewise(((t=this._niceDomain)!==null&&t!==void 0?t:this._domain).map(this._limit).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));const n=this._output(this.transformer(this._limit(this._clamp(e))));return this._fishEyeTransform?this._fishEyeTransform(n):n}base(e,t){return arguments.length?(this._base=e,this.rescale(t)):this._base}tickFormat(){return jg}d3Ticks(e=10,t){const n=this.domain(),s=this._limit(n[0]),r=this._limit(n[n.length-1]);return poe(s,r,e,this._base,this.transformer,this.untransformer,t)}ticks(e=10){const t=this.calculateVisibleDomain(this._range);return foe(this._limit(t[0]),this._limit(t[t.length-1]),e,this._base,this.transformer,this.untransformer)}forceTicks(e=10){const t=this.calculateVisibleDomain(this._range);return nT(t[0],t[t.length-1],e,this.transformer,this.untransformer)}stepTicks(e){const t=this.calculateVisibleDomain(this._range);return nT(this._limit(t[0]),this._limit(t[t.length-1]),e,this.transformer,this.untransformer)}getNiceConfig(){return{floor:e=>this._pows(Math.floor(this._logs(this._limit(e)))),ceil:e=>Math.abs(e)>=1?Math.ceil(e):this._pows(Math.ceil(this._logs(this._limit(e))))}}}Yt(lO,goe);class Hat extends eg{constructor(e){super(!1),this.type=rn.Point,this._padding=0,this.paddingInner(1,e),this.padding=this.paddingOuter,this.paddingInner=void 0,this.paddingOuter=void 0}}class sT extends Ma{constructor(){super(Cat,wat),this.type=rn.Sqrt}clone(){return new sT().domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate)}}class cO extends Ma{constructor(){super(hG(1),dG(1)),this.type=rn.Symlog,this._const=1}clone(){return new cO().domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).constant(this._const)}constant(e,t){return arguments.length?(this._const=e,this.transformer=hG(e),this.untransformer=dG(e),this.rescale(t)):this._const}d3Ticks(e=10,t){const n=this.domain(),s=n[0],r=n[n.length-1];return poe(s,r,e,this._const,this.transformer,this.untransformer,t)}ticks(e=10){const t=this.calculateVisibleDomain(this._range);return foe(t[0],t[t.length-1],e,this._const,this.transformer,this.untransformer)}forceTicks(e=10){const t=this.calculateVisibleDomain(this._range);return nT(t[0],t[t.length-1],e,this.transformer,this.untransformer)}stepTicks(e){const t=this.calculateVisibleDomain(this._range);return nT(t[0],t[t.length-1],e,this.transformer,this.untransformer)}}Yt(cO,goe);class J5{constructor(){this.type=rn.Threshold,this._range=[0,1],this._domain=[.5],this.n=1}unknown(e){return arguments.length?(this._unknown=e,this):this._unknown}scale(e){return!B(e)&&Z(+e)?this._range[Zne(this._domain,e,0,this.n)]:this._unknown}invertExtent(e){const t=this._range.indexOf(e);return[this._domain[t-1],this._domain[t]]}domain(e){return e?(this._domain=Array.from(e),this.n=Math.min(this._domain.length,this._range.length-1),this):this._domain.slice()}range(e){return e?(this._range=Array.from(e),this.n=Math.min(this._domain.length,this._range.length-1),this):this._range.slice()}clone(){return new J5().domain(this._domain).range(this._range).unknown(this._unknown)}}function DI(i,e,t,n){let s;const{breakData:r}=i;if(r&&r()){const{breakDomains:a}=r(),o=e.domain();s=[];for(let l=0;l<o.length-1;l++)n(t,[o[l],o[l+1]]).forEach(c=>{a.some(u=>c>=u[0]&&c<=u[1])||s.push(c)});e.domain(o)}else s=n(t);return s}function _G(i,e,t,n,s=!1){if(t&&!e.includes(i)){let r=e.length;if(r>1){s?e.push(i):e.unshift(i);for(let a=0;a<r;a++){const o=s?r-1-a:a;if(!n(e[o]))break;e.splice(o,1),a--,r--}}}}const jx=(i,e)=>{var t,n;if(!$t(i.type))return _u(i.domain());const s=i.range(),r=Math.abs(s[s.length-1]-s[0]);if(r<2)return _u([i.domain()[0]]);const{tickCount:a,forceTickCount:o,tickStep:l,noDecimals:c=!1,labelStyle:u,breakData:h}=e;let d;if(F(l))d=i.stepTicks(l);else if(F(o))d=DI(e,i,o,(f,g)=>g&&g.length?i.domain(g,!0).forceTicks(f):i.forceTicks(f));else if(e.tickMode==="d3"){const f=(t=ee(a)?a({axisLength:r,labelStyle:u}):a)!==null&&t!==void 0?t:5;d=DI(e,i,f,(g,m)=>m&&m.length?i.domain(m,!0).d3Ticks(g,{noDecimals:c}):i.d3Ticks(g,{noDecimals:c}))}else{const f=(n=ee(a)?a({axisLength:r,labelStyle:u}):a)!==null&&n!==void 0?n:5,g=ee(e.tickMode)?e.tickMode:void 0;d=DI(e,i,f,(m,y)=>y&&y.length?i.domain(y,!0).ticks(m,{noDecimals:c,customTicks:g}):i.ticks(m,{noDecimals:c,customTicks:g}))}const p=i.domain();if(e.labelFirstVisible&&p[0]!==d[0]&&!d.includes(p[0])&&d.unshift(p[0]),e.labelLastVisible&&p[p.length-1]!==d[d.length-1]&&!d.includes(p[p.length-1])&&d.push(p[p.length-1]),e.sampling&&d.length>1&&(e.coordinateType==="cartesian"||e.coordinateType==="polar"&&e.axisOrientType==="radius")){const{labelGap:f=4,labelFlush:g}=e;let m=noe(i,d,e).map((T,E)=>({AABBBounds:T,value:d[E]}));const y=[...m],b=y[0],x=It(y),S=h&&h()?vG.greedy:vG.parity;for(;m.length>=3&&GF(m,f);)m=S(m,f);const C=e.labelFirstVisible;let w=e.labelLastVisible;dl(b,x,f)&&m.includes(x)&&m.length>1&&C&&w&&(m.splice(m.indexOf(x),1),w=!1),_G(b,m,C,T=>dl(T,b,f)),_G(x,m,w,T=>dl(T,x,f)||!(!C||T===b)&&dl(T,b,f),!0);const A=m.map(T=>T.value);A.length<3&&g&&(A.length>1&&A.pop(),It(A)!==It(d)&&A.push(It(d))),d=A}return _u(d)},vG={parity:function(i){return i.filter((e,t)=>t%2==0)},greedy:function(i,e){let t;return i.filter((n,s)=>(!s||!dl(t,n,e))&&(t=n,!0))}},bG=(i,e,t,n)=>noe(i,e,t).map(s=>n?[s.x1,s.x2,s.width()]:[s.y1,s.y2,s.height()]),xG=(i,e,t=0)=>Math.max(i[0],e[0])-t/2<=Math.min(i[1],e[1])+t/2,SG=(i,e)=>i[1]<e[0]?e[0]-i[1]:e[1]<i[0]?i[0]-e[1]:0,Vat=(i,e)=>{var t;const n=i.domain();if(!n.length)return[];const{tickCount:s,forceTickCount:r,tickStep:a,labelGap:o=4,axisOrientType:l,labelStyle:c}=e,u=Sat(l),h=i.range(),d=i.calculateWholeRangeSize();if(d<2)return e.labelLastVisible?_u([n[n.length-1]]):_u([n[0]]);let p;if(F(a))p=i.stepTicks(a);else if(F(r))p=i.forceTicks(r);else if(F(s)){const f=ee(s)?s({axisLength:d,labelStyle:c}):s;p=i.ticks(f)}else if(e.sampling){const f=((t=e.labelStyle.fontSize)!==null&&t!==void 0?t:12)+2,g=Mn(h),m=an(h);if(n.length<=d/f){const y=(m-g)/n.length,b=bG(i,n,e,u),x=Math.min(...b.map(C=>C[2])),S=Uat(n,b,o,e.labelLastVisible,Math.floor(x/y),!1);p=i.stepTicks(S.step),e.labelLastVisible&&(S.delCount&&(p=p.slice(0,p.length-S.delCount)),p.push(n[n.length-1]))}else{const y=[n[0],n[Math.floor(n.length/2)],n[n.length-1]],b=bG(i,y,e,u);let x=null;b.forEach(C=>{x?x[2]<C[2]&&(x=C):x=C});const S=m-g-o>0?Math.ceil(n.length*(o+x[2])/(m-g-o)):n.length-1;p=i.stepTicks(S),!e.labelLastVisible||p.length&&p[p.length-1]===n[n.length-1]||(p.length&&Math.abs(i.scale(p[p.length-1])-i.scale(n[n.length-1]))<x[2]&&(p=p.slice(0,-1)),p.push(n[n.length-1]))}}else p=i.domain();return _u(p)},Uat=(i,e,t,n,s,r)=>{let a=0,o=0,l=-1,c=Number.MAX_VALUE;const u=p=>{let f=!0,g=0;do g+p<i.length&&xG(e[g],e[g+p],t)&&(f=!1),g+=p;while(f&&g<i.length);return f},h=Jne(s,i.length,p=>u(p)?1:-1);let d=h;do if(d>h&&!r&&!u(d))d++;else{if(!n){o=d;break}{const p=i.length-1;let f,g=0;f=i.length%d>0?i.length-i.length%d+d:i.length;do{if(f-=d,f!==p&&!xG(e[f],e[p],t))break;g++}while(f>0);if(f===p){o=d,a=g;break}{const m=Math.floor(i.length/d)-g+1;if(m<l)break;{l=m;const y=SG(e[f],e[p]),b=f-d>=0?SG(e[f-d],e[f]):y,x=Math.abs(y-b);if(x<c&&(c=x,o=d,a=g),y<=b)break}}}d++}while(d<=i.length);return{step:o,delCount:a}},Wat=(i,e,t)=>{var n;const{labelStyle:s,getRadius:r,labelOffset:a,labelFormatter:o,inside:l}=t,c=r==null?void 0:r(),u=(n=s.angle)!==null&&n!==void 0?n:0,h=Ym(s);return e.map(d=>{const p=o?o(d):`${d}`,{width:f,height:g}=h.quickMeasure(p),m=Math.max(f,lG),y=Math.max(g,lG),b=i.scale(d),x={x:0,y:0};let S=0,C=0;const w={align:s.textAlign,baseline:s.textBaseline},{x:A,y:T}=eat(b,x,c,a,l);return w.align||(Nn(A,x.x)?w.baseline||(w.baseline=T>x.y?"top":"bottom"):A>x.x?w.align="left":A<x.x&&(w.align="right")),S=A+(w.align==="right"?-m:w.align==="left"?0:-m/2),C=T+(w.baseline==="bottom"?-y:w.baseline==="top"?0:-y/2),new Qi().set(S,C,S+m,C+y).rotate(u,S+m/2,C+y/2)})},Gat=(i,e)=>{const{tickCount:t,forceTickCount:n,tickStep:s,getRadius:r,labelOffset:a,labelGap:o=0,labelStyle:l}=e,c=r==null?void 0:r();if(!c)return _u(i.domain());let u;if(F(s))u=i.stepTicks(s);else if(F(n))u=i.forceTicks(n);else if(F(t)){const h=i.range(),d=Math.abs(h[h.length-1]-h[0]),p=ee(t)?t({axisLength:d,labelStyle:l}):t;u=i.ticks(p)}else if(e.sampling){const h=i.domain(),d=i.range(),p=Wat(i,h,e),f=Mn(d),g=an(d),m=Math.abs(g-f)*(c+a)/h.length,{step:y,delCount:b}=Kat(h,p,o,Math.floor(p.reduce((x,S)=>Math.min(x,S.width(),S.height()),Number.MAX_VALUE)/m));u=i.stepTicks(y),u=u.slice(0,u.length-b)}else u=i.domain();return _u(u)},Kat=(i,e,t,n)=>{let s=n;do{let a=!0;s++;let o=0;do o+s<i.length&&oG(e[o],e[o+s],t)&&(a=!1),o+=s;while(a&&o<i.length);if(a)break}while(s<=i.length);let r=0;if(i.length>2){let a=i.length-i.length%s;for(a>=i.length&&(a-=s);a>0&&oG(e[0],e[a]);)r++,a-=s}return{step:s,delCount:r}};function ZF(i,e,t,n){let s="";if(!i||e.length===0)return s;const r=e[0],a=kn.distancePP(i,r),o=t?0:1;return n?s+=`M${i.x},${i.y-a}A${a},${a},0,0,${o},${i.x},${i.y+a}A${a},${a},0,0,${o},${i.x},${i.y-a}Z`:e.forEach((l,c)=>{c===0?s=`M${l.x},${l.y}`:s+=`A${a},${a},0,0,${o},${l.x},${l.y}`}),s}function Xat(i,e,t){const{type:n,closed:s}=t,r=e.slice(0).reverse();let a="",o="";if(n==="line"&&t.smoothLink&&t.center){const l=i[0],c=r[0],u=t.center;a=Mp(i,!!s),o=Mp(r,!!s);const h=kn.distancePP(c,u),d=kn.distancePP(l,u);a+=`A${h},${h},0,0,1,${c.x},${c.y}L${c.x},${c.y}`,o+=`A${d},${d},0,0,0,${l.x},${l.y}`}else if(n==="circle"){const{center:l}=t;a=ZF(l,i,!1,!!s),o=ZF(l,r,!0,!!s)}else n!=="line"&&n!=="polygon"||(a=Mp(i,!!s),o=Mp(r,!!s));return s?a+=o:(o="L"+o.substring(1),a+=o,a+="Z"),a}class Od extends Zn{constructor(){super(...arguments),this.name="axis-grid",this.data=[]}getInnerView(){return this._innerView}getPrevInnerView(){return this._prevInnerView}render(){this._prevInnerView=this._innerView&&zae(this._innerView),this.removeAllChild(!0),this._innerView=Ae.group({x:0,y:0,pickable:!1}),this.add(this._innerView);const{items:e,visible:t}=this.attribute;e&&e.length&&t!==!1&&(this.data=this._transformItems(e),this._renderGrid(this._innerView))}getVerticalCoord(e,t,n){return Y5(e,this.getVerticalVector(t,n,e))}_transformItems(e){const t=[];return e.forEach(n=>{var s;t.push(Object.assign(Object.assign({},n),{point:this.getTickCoord(n.value),id:(s=n.id)!==null&&s!==void 0?s:n.label}))}),t}_renderGrid(e){const{visible:t}=this.attribute.subGrid||{};t&&this._renderGridByType(!0,e),this._renderGridByType(!1,e)}_renderGridByType(e,t){const n=se({},this.attribute,this.getGridAttribute(e)),{type:s,items:r,style:a,closed:o,alternateColor:l,depth:c=0}=n,u=e?`${Wn.grid}-sub`:`${Wn.grid}`;if(r.forEach((h,d)=>{const{id:p,points:f}=h;let g="";if(s==="line"||s==="polygon")g=Mp(f,!!o);else if(s==="circle"){const{center:y}=this.attribute;g=ZF(y,f,!1,!!o)}const m=Ae.path(Object.assign({path:g,z:c},ee(a)?se({},this.skipDefault?null:Od.defaultAttributes.style,a(h,d)):a));m.name=`${u}-line`,m.id=this._getNodeId(`${u}-path-${p}`),t.add(m)}),c&&s==="line"&&r.forEach((h,d)=>{const{id:p,points:f}=h,g=[];g.push(f[0]);const m=f[1].x-f[0].x,y=f[1].y-f[0].y,b=Math.sqrt(m*m+y*y),x=c/b;g.push({x:f[0].x+m*x,y:f[0].y+y*x});const S=Mp(g,!!o),C=At(g[0].x-g[1].x),w=At(g[0].y-g[1].y),A=Ae.path(Object.assign({path:S,z:0,alpha:C>w?(f[1].x-f[0].x>0?-1:1)*Qt/2:0,beta:C<w?-Qt/2:0,anchor3d:C>w?[g[0].x,0]:[0,g[0].y]},ee(a)?se({},this.skipDefault?null:Od.defaultAttributes.style,a(h,d)):a));A.name=`${u}-line`,A.id=this._getNodeId(`${u}-path-${p}`),t.add(A)}),r.length>1&&l){const h=ie(l)?l:[l,"transparent"],d=S=>h[S%h.length],p=this.attribute.items,f=p[0],g=p[p.length-1],m=!Nn(f.value,0)&&!Nn(g.value,0),y=!Nn(f.value,1)&&!Nn(g.value,1),b=[],x=f.value>g.value;(x&&y||!x&&m)&&b.push(this.getGridPointsByValue(x?1:0)),r.forEach(S=>{b.push(S.points)}),(x&&m||!x&&y)&&b.push(this.getGridPointsByValue(x?0:1));for(let S=0;S<b.length-1;S++){const C=Xat(b[S],b[S+1],n),w=Ae.path({path:C,fill:d(S)});w.name=`${u}-region`,w.id=this._getNodeId(`${u}-region-${S}`),t.add(w)}}}_getNodeId(e){return`${this.id}-${e}`}_parseTickSegment(){let e=1;return this.data.length>=2&&(e=this.data[1].value-this.data[0].value),e}_getPointsOfSubGrid(e,t){const n=this.data.length,s=[];return n>=2&&this.data.forEach(r=>{let a=r.value;if(!t){const o=r.value-e/2;if(this.isInValidValue(o))return;a=o}s.push({value:a})}),s}release(){super.release(),this._prevInnerView=null,this._innerView=null}}Od.defaultAttributes={style:{lineWidth:1,stroke:"#999",strokeOpacity:1,lineDash:[4,4]},subGrid:{visible:!1,style:{lineWidth:1,stroke:"#999",strokeOpacity:1,lineDash:[4,4]}}};yat();class moe extends Od{constructor(e,t){super(t!=null&&t.skipDefault?e:se({},Od.defaultAttributes,e),t)}_getGridPoint(e,t){let n;if(e==="line"){const{length:s}=this.attribute;n=[t,this.getVerticalCoord(t,s,!0)]}else if(e==="circle"||e==="polygon"){const{center:s,sides:r=6,startAngle:a=Py,endAngle:o=Oy}=this.attribute,l=kn.distancePP(s,t);n=Hae(s,r,l,a,o)}return n}getGridPointsByValue(e){const t=this.getTickCoord(e);return this._getGridPoint(this.attribute.type,t)}getGridAttribute(e){const{type:t,alignWithLabel:n=!0}=this.attribute,s=this._parseTickSegment();let r,a=[];if(e){r=se({},this.attribute,this.attribute.subGrid);const o=[],{count:l=4}=r;if(this.data.length>=2){const c=this._getPointsOfSubGrid(s,n);for(let u=0;u<c.length-1;u++){const h=c[u],d=c[u+1];o.push({id:`sub-${u}-0`,points:this.getGridPointsByValue(h.value),datum:{}});for(let p=0;p<l;p++){const f=(p+1)/(l+1),g=(1-f)*h.value+f*d.value;o.push({id:`sub-${u}-${p+1}`,points:this.getGridPointsByValue(g),datum:{}})}u===c.length-2&&o.push({id:`sub-${u}-${l+1}`,points:this.getGridPointsByValue(d.value),datum:{}})}a=o}}else{r=this.attribute;const o=[];this.data.forEach(l=>{let{point:c}=l;if(!n){const u=l.value-s/2;if(this.isInValidValue(u))return;c=this.getTickCoord(u)}o.push({id:l.label,datum:l,points:this._getGridPoint(t,c)})}),a=o}return Object.assign(Object.assign({},r),{items:a})}}Yt(moe,Qae);var Yat=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};_at();class yoe extends Od{constructor(e,t){super(t!=null&&t.skipDefault?e:se({},Od.defaultAttributes,e),t)}getGridPointsByValue(e){const t=this.getTickCoord(e),{radius:n,innerRadius:s=0}=this.attribute;return[t,this.getVerticalCoord(t,n-s,!0)]}getGridAttribute(e){let t,n=[];const s=this.attribute,{radius:r,innerRadius:a=0,startAngle:o=Py,endAngle:l=Oy,center:c,subGrid:u}=s,h=Yat(s,["radius","innerRadius","startAngle","endAngle","center","subGrid"]),{alignWithLabel:d=!0}=h||{},p=r-a,f=this._parseTickSegment();if(e){t=se({},h,u);const g=[],{count:m=4}=u||{},y=this.data.length;if(y>=2){const b=this._getPointsOfSubGrid(f,d);for(let x=0;x<y;x++){const S=b[x],C=b[x+1];g.push({id:`sub-${x}-0`,points:[this.getTickCoord(S.value),this.getVerticalCoord(this.getTickCoord(S.value),p,!0)],datum:{}});for(let w=0;w<m;w++){const A=(w+1)/(m+1),T=(1-A)*S.value+A*(C?C.value:d?1:S.value+f),E=this.getTickCoord(T),P=this.getVerticalCoord(E,p,!0);g.push({id:`sub-${x}-${w+1}`,points:[E,P],datum:{}})}}Math.abs(l-o)%(2*Math.PI)==0&&g.push(g[0]),n=g}}else{t=h;const g=[];let m;m=Math.abs(l-o)%(2*Math.PI)==0?[...this.data].concat(this.data[0]):this.data,m.forEach(y=>{let{point:b}=y;if(!d){const S=y.value-f/2;if(this.isInValidValue(S))return;b=this.getTickCoord(S)}const x=this.getVerticalCoord(b,p,!0);g.push({id:y.id,points:[b,x],datum:y})}),n=g}return Object.assign(Object.assign({},t),{items:n,center:c,type:"line"})}}Yt(yoe,toe);const CG="M -0.0544 0.25 C -0.0742 0.25 -0.0901 0.234 -0.0901 0.2143 L -0.0901 -0.1786 C -0.0901 -0.1983 -0.0742 -0.2143 -0.0544 -0.2143 L -0.0187 -0.2143 L -0.0187 -0.5 L 0.017 -0.5 L 0.017 -0.2143 L 0.0527 -0.2143 C 0.0724 -0.2143 0.0884 -0.1983 0.0884 -0.1786 L 0.0884 0.2143 C 0.0884 0.234 0.0724 0.25 0.0527 0.25 L 0.017 0.25 L 0.017 0.5 L -0.0187 0.5 L -0.0187 0.25 L -0.0544 0.25 Z M -0.0187 -0.1429 L -0.0544 -0.1429 L -0.0544 0.1786 L -0.0187 0.1786 L -0.0187 -0.1429 Z M 0.0527 -0.1429 L 0.017 -0.1429 L 0.017 0.1786 L 0.0527 0.1786 L 0.0527 -0.1429 Z",qat={orient:"bottom",showDetail:"auto",brushSelect:!0,zoomLock:!1,minSpan:0,maxSpan:1,delayType:"throttle",delayTime:0,realTime:!0,backgroundStyle:{fill:"white",stroke:"#D1DBEE",lineWidth:1,cornerRadius:2},dragMaskStyle:{fill:"#B0C8F9",fillOpacity:.2},backgroundChartStyle:{area:{visible:!0,stroke:"#D1DBEE",lineWidth:1,fill:"#F6F8FC"},line:{visible:!0,stroke:"#D1DBEE",lineWidth:1}},selectedBackgroundStyle:{fill:"#B0C8F9",fillOpacity:.5},selectedBackgroundChartStyle:{area:{visible:!0,stroke:"#B0C8F9",lineWidth:1,fill:"#fbb934"},line:{visible:!0,stroke:"#fbb934",lineWidth:1}},middleHandlerStyle:{visible:!0,background:{size:8,style:{fill:"white",stroke:"#B0C8F9",cornerRadius:2}},icon:{size:6,fill:"white",stroke:"#B0C8F9",symbolType:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",lineWidth:.5}},startHandlerStyle:{visible:!0,triggerMinSize:0,symbolType:CG,fill:"white",stroke:"#B0C8F9",lineWidth:.5},endHandlerStyle:{visible:!0,triggerMinSize:0,symbolType:CG,fill:"white",stroke:"#B0C8F9",lineWidth:.5},startTextStyle:{padding:4,textStyle:{fontSize:10,fill:"#6F6F6F"}},endTextStyle:{padding:4,textStyle:{fontSize:10,fill:"#6F6F6F"}}},rh={horizontal:{angle:0,strokeBoundsBuffer:0,boundsPadding:2,pickMode:"imprecise",cursor:"ew-resize"},vertical:{angle:Math.PI/180*90,cursor:"ns-resize",boundsPadding:2,pickMode:"imprecise",strokeBoundsBuffer:0}};var fr;(function(i){i.startHandler="startHandler",i.endHandler="endHandler",i.middleHandler="middleHandler",i.background="background"})(fr||(fr={}));function Zat(){QP(),Ku(),Mo(),Sae(),Gu()}var wG=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};const Jat={debounce:zd,throttle:Hu};Zat();let _oe=class voe extends Zn{setPropsFromAttrs(){const{start:e,end:t,orient:n,previewData:s,previewPointsX:r,previewPointsY:a,previewPointsX1:o,previewPointsY1:l}=this.attribute;e&&(this.state.start=e),t&&(this.state.end=t);const{width:c,height:u}=this.getLayoutAttrFromConfig();this._spanCache=this.state.end-this.state.start,this._isHorizontal=n==="top"||n==="bottom",this._layoutCache.max=this._isHorizontal?c:u,this._layoutCache.attPos=this._isHorizontal?"x":"y",this._layoutCache.attSize=this._isHorizontal?"width":"height",s&&(this._previewData=s),ee(r)&&(this._previewPointsX=r),ee(a)&&(this._previewPointsY=a),ee(o)&&(this._previewPointsX1=o),ee(l)&&(this._previewPointsY1=l)}constructor(e,t){super(t!=null&&t.skipDefault?e:se({},voe.defaultAttributes,e)),this.name="dataZoom",this._previewData=[],this._activeState=!1,this._activeCache={startPos:{x:0,y:0},lastPos:{x:0,y:0}},this._layoutCache={attPos:"x",attSize:"width",max:0},this.state={start:0,end:1},this._statePointToData=r=>r,this._onHandlerPointerDown=(r,a)=>{r.stopPropagation(),a==="start"?(this._activeTag=fr.startHandler,this._activeItem=this._startHandlerMask):a==="end"?(this._activeTag=fr.endHandler,this._activeItem=this._endHandlerMask):a==="middleRect"?(this._activeTag=fr.middleHandler,this._activeItem=this._middleHandlerRect):a==="middleSymbol"?(this._activeTag=fr.middleHandler,this._activeItem=this._middleHandlerSymbol):a==="background"&&(this._activeTag=fr.background,this._activeItem=this._background),this._activeState=!0,this._activeCache.startPos=this.eventPosToStagePos(r),this._activeCache.lastPos=this.eventPosToStagePos(r),st.env==="browser"&&(st.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),st.addEventListener("pointerup",this._onHandlerPointerUp)),this.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0})},this._pointerMove=r=>{r.stopPropagation();const{start:a,end:o,brushSelect:l,realTime:c=!0}=this.attribute,u=this.eventPosToStagePos(r),{attPos:h,max:d}=this._layoutCache,p=(u[h]-this._activeCache.lastPos[h])/d;let{start:f,end:g}=this.state;this._activeState&&(this._activeTag===fr.middleHandler?this.moveZoomWithMiddle((this.state.start+this.state.end)/2+p):this._activeTag===fr.startHandler?f+p>g?(f=g,g=f+p,this._activeTag=fr.endHandler):f+=p:this._activeTag===fr.endHandler&&(g+p<f?(g=f,f=g+p,this._activeTag=fr.startHandler):g+=p),this._activeCache.lastPos=u,l&&this.renderDragMask()),f=Math.min(Math.max(f,0),1),g=Math.min(Math.max(g,0),1),a===f&&o===g||(this.setStateAttr(f,g,!0),c&&this._dispatchEvent("change",{start:f,end:g,tag:this._activeTag}))},this._onHandlerPointerMove=this.attribute.delayTime===0?this._pointerMove:Jat[this.attribute.delayType](this._pointerMove,this.attribute.delayTime),this._onHandlerPointerUp=r=>{r.preventDefault();const{start:a,end:o,brushSelect:l,realTime:c=!0}=this.attribute;if(this._activeState&&this._activeTag===fr.background){const u=this.eventPosToStagePos(r);this.backgroundDragZoom(this._activeCache.startPos,u)}this._activeState=!1,l&&this.renderDragMask(),a===this.state.start&&o===this.state.end||(this.setStateAttr(this.state.start,this.state.end,!0),this._dispatchEvent("change",{start:this.state.start,end:this.state.end,tag:this._activeTag})),st.env==="browser"&&(st.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),st.removeEventListener("pointerup",this._onHandlerPointerUp)),this.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),this.removeEventListener("pointerup",this._onHandlerPointerUp)};const{position:n,showDetail:s}=e;this._activeCache.startPos=n,this._activeCache.lastPos=n,this._showText=s!=="auto"&&s,this.setPropsFromAttrs()}setAttributes(e,t){super.setAttributes(e,t),this.setPropsFromAttrs()}bindEvents(){if(this.attribute.disableTriggerEvent)return void this.setAttribute("childrenPickable",!1);const{showDetail:e,brushSelect:t}=this.attribute;this._startHandlerMask&&this._startHandlerMask.addEventListener("pointerdown",s=>this._onHandlerPointerDown(s,"start")),this._endHandlerMask&&this._endHandlerMask.addEventListener("pointerdown",s=>this._onHandlerPointerDown(s,"end")),this._middleHandlerSymbol&&this._middleHandlerSymbol.addEventListener("pointerdown",s=>this._onHandlerPointerDown(s,"middleSymbol")),this._middleHandlerRect&&this._middleHandlerRect.addEventListener("pointerdown",s=>this._onHandlerPointerDown(s,"middleRect"));const n=t?"background":"middleRect";this._selectedBackground&&this._selectedBackground.addEventListener("pointerdown",s=>this._onHandlerPointerDown(s,n)),t&&this._background&&this._background.addEventListener("pointerdown",s=>this._onHandlerPointerDown(s,"background")),t&&this._previewGroup&&this._previewGroup.addEventListener("pointerdown",s=>this._onHandlerPointerDown(s,"background")),this._selectedPreviewGroup&&this._selectedPreviewGroup.addEventListener("pointerdown",s=>this._onHandlerPointerDown(s,n)),this.addEventListener("pointerup",this._onHandlerPointerUp),this.addEventListener("pointerupoutside",this._onHandlerPointerUp),e==="auto"&&(this.addEventListener("pointerenter",this._onHandlerPointerEnter),this.addEventListener("pointerleave",this._onHandlerPointerLeave))}dragMaskSize(){const{position:e}=this.attribute,{attPos:t,max:n}=this._layoutCache;return this._activeCache.lastPos[t]-e[t]>n?n+e[t]-this._activeCache.startPos[t]:this._activeCache.lastPos[t]-e[t]<0?e[t]-this._activeCache.startPos[t]:this._activeCache.lastPos[t]-this._activeCache.startPos[t]}setStateAttr(e,t,n){const{zoomLock:s=!1,minSpan:r=0,maxSpan:a=1}=this.attribute,o=t-e;o!==this._spanCache&&(s||o<r||o>a)||(this._spanCache=o,this.state.start=e,this.state.end=t,n&&this.setAttributes({start:e,end:t}))}eventPosToStagePos(e){return this.stage.eventPointTransform(e)}_onHandlerPointerEnter(e){e.stopPropagation(),this._showText=!0,this.renderText()}_onHandlerPointerLeave(e){e.stopPropagation(),this._showText=!1,this.renderText()}backgroundDragZoom(e,t){const{attPos:n,max:s}=this._layoutCache,{position:r}=this.attribute,a=e[n]-r[n],o=t[n]-r[n],l=Math.min(Math.max(Math.min(a,o)/s,0),1),c=Math.min(Math.max(Math.max(a,o)/s,0),1);Math.abs(l-c)<.01?this.moveZoomWithMiddle(l):this.setStateAttr(l,c,!1)}moveZoomWithMiddle(e){let t=e-(this.state.start+this.state.end)/2;t!==0&&(t>0?this.state.end+t>1&&(t=1-this.state.end):t<0&&this.state.start+t<0&&(t=-this.state.start),this.setStateAttr(this.state.start+t,this.state.end+t,!1))}renderDragMask(){const{dragMaskStyle:e}=this.attribute,{position:t,width:n,height:s}=this.getLayoutAttrFromConfig();this._isHorizontal?this._dragMask=this._container.createOrUpdateChild("dragMask",Object.assign({x:zi(this.dragMaskSize()<0?this._activeCache.lastPos.x:this._activeCache.startPos.x,t.x,t.x+n),y:t.y,width:this._activeState&&this._activeTag===fr.background&&Math.abs(this.dragMaskSize())||0,height:s},e),"rect"):this._dragMask=this._container.createOrUpdateChild("dragMask",Object.assign({x:t.x,y:zi(this.dragMaskSize()<0?this._activeCache.lastPos.y:this._activeCache.startPos.y,t.y,t.y+s),width:n,height:this._activeState&&this._activeTag===fr.background&&Math.abs(this.dragMaskSize())||0},e),"rect")}isTextOverflow(e,t,n){if(!t)return!1;if(this._isHorizontal){if(n==="start"){if(t.x1<e.x1)return!0}else if(t.x2>e.x2)return!0}else if(n==="start"){if(t.y1<e.y1)return!0}else if(t.y2>e.y2)return!0;return!1}setTextAttr(e,t){var n,s,r,a,o,l,c,u;const{startTextStyle:h,endTextStyle:d}=this.attribute,{formatMethod:p}=h,f=wG(h,["formatMethod"]),{formatMethod:g}=d,m=wG(d,["formatMethod"]),{start:y,end:b}=this.state;this._startValue=this._statePointToData(y),this._endValue=this._statePointToData(b);const{position:x,width:S,height:C}=this.getLayoutAttrFromConfig(),w=p?p(this._startValue):this._startValue,A=g?g(this._endValue):this._endValue,T={x1:x.x,y1:x.y,x2:x.x+S,y2:x.y+C};let E,P,O,M;this._isHorizontal?(E={x:x.x+y*S,y:x.y+C/2},P={x:x.x+b*S,y:x.y+C/2},O={textAlign:this.isTextOverflow(T,e,"start")?"left":"right",textBaseline:(s=(n=f==null?void 0:f.textStyle)===null||n===void 0?void 0:n.textBaseline)!==null&&s!==void 0?s:"middle"},M={textAlign:this.isTextOverflow(T,t,"end")?"right":"left",textBaseline:(a=(r=m==null?void 0:m.textStyle)===null||r===void 0?void 0:r.textBaseline)!==null&&a!==void 0?a:"middle"}):(E={x:x.x+S/2,y:x.y+y*C},P={x:x.x+S/2,y:x.y+b*C},O={textAlign:(l=(o=f==null?void 0:f.textStyle)===null||o===void 0?void 0:o.textAlign)!==null&&l!==void 0?l:"center",textBaseline:this.isTextOverflow(T,e,"start")?"top":"bottom"},M={textAlign:(u=(c=m==null?void 0:m.textStyle)===null||c===void 0?void 0:c.textAlign)!==null&&u!==void 0?u:"center",textBaseline:this.isTextOverflow(T,t,"end")?"bottom":"top"}),this._startText=this.maybeAddLabel(this._container,se({},f,{text:w,x:E.x,y:E.y,visible:this._showText,pickable:!1,childrenPickable:!1,textStyle:O}),`data-zoom-start-text-${x}`),this._endText=this.maybeAddLabel(this._container,se({},m,{text:A,x:P.x,y:P.y,visible:this._showText,pickable:!1,childrenPickable:!1,textStyle:M}),`data-zoom-end-text-${x}`)}renderText(){let e=null,t=null;this.setTextAttr(e,t),e=this._startText.AABBBounds,t=this._endText.AABBBounds,this.setTextAttr(e,t),e=this._startText.AABBBounds,t=this._endText.AABBBounds;const{x1:n,x2:s,y1:r,y2:a}=e,{dx:o=0,dy:l=0}=this.attribute.startTextStyle;if(new nr().set(n,r,s,a).intersects(t)){const c=this.attribute.orient==="bottom"||this.attribute.orient==="right"?-1:1;this._isHorizontal?this._startText.setAttribute("dy",l+c*Math.abs(t.y1-t.y2)):this._startText.setAttribute("dx",o+c*Math.abs(t.x1-t.x2))}else this._isHorizontal?this._startText.setAttribute("dy",l):this._startText.setAttribute("dx",o)}getLayoutAttrFromConfig(){var e,t,n,s,r,a;if(this._layoutAttrFromConfig)return this._layoutAttrFromConfig;const{position:o,size:l,orient:c,middleHandlerStyle:u={},startHandlerStyle:h={},endHandlerStyle:d={},backgroundStyle:p={}}=this.attribute,{width:f,height:g}=l,m=(t=(e=u.background)===null||e===void 0?void 0:e.size)!==null&&t!==void 0?t:10;let y,b,x;u.visible?this._isHorizontal?(y=f,b=g-m,x={x:o.x,y:o.y+m}):(y=f-m,b=g,x={x:o.x+(c==="left"?m:0),y:o.y}):(y=f,b=g,x=o);const S=(n=h.size)!==null&&n!==void 0?n:this._isHorizontal?b:y,C=(s=d.size)!==null&&s!==void 0?s:this._isHorizontal?b:y;return h.visible&&(this._isHorizontal?(y-=(S+C)/2,x={x:x.x+S/2,y:x.y}):(b-=(S+C)/2,x={x:x.x,y:x.y+S/2})),b+=(r=p.lineWidth/2)!==null&&r!==void 0?r:1,y+=(a=p.lineWidth/2)!==null&&a!==void 0?a:1,this._layoutAttrFromConfig={position:x,width:y,height:b},this._layoutAttrFromConfig}render(){var e,t,n,s,r,a,o,l,c,u,h,d,p,f,g,m,y,b,x,S,C,w,A,T,E,P,O,M,R,j,I,D,z,$;this._layoutAttrFromConfig=null;const{orient:V,backgroundStyle:L,backgroundChartStyle:Y={},selectedBackgroundStyle:ae={},selectedBackgroundChartStyle:W={},middleHandlerStyle:ce={},startHandlerStyle:he={},endHandlerStyle:le={},brushSelect:de,zoomLock:te}=this.attribute,{start:me,end:Be}=this.state,{position:ve,width:Re,height:Qe}=this.getLayoutAttrFromConfig(),Lt=(e=he.triggerMinSize)!==null&&e!==void 0?e:40,Ue=(t=le.triggerMinSize)!==null&&t!==void 0?t:40,je=this.createOrUpdateChild("dataZoom-container",{},"group");if(this._container=je,this._background=je.createOrUpdateChild("background",Object.assign(Object.assign({x:ve.x,y:ve.y,width:Re,height:Qe,cursor:de?"crosshair":"auto"},L),{pickable:!te&&((n=L.pickable)===null||n===void 0||n)}),"rect"),!((s=Y.line)===null||s===void 0)&&s.visible&&this.setPreviewAttributes("line",je),!((r=Y.area)===null||r===void 0)&&r.visible&&this.setPreviewAttributes("area",je),de&&this.renderDragMask(),this._isHorizontal?this._selectedBackground=je.createOrUpdateChild("selectedBackground",Object.assign(Object.assign({x:ve.x+me*Re,y:ve.y,width:(Be-me)*Re,height:Qe,cursor:de?"crosshair":"move"},ae),{pickable:!te&&((a=W.pickable)===null||a===void 0||a)}),"rect"):this._selectedBackground=je.createOrUpdateChild("selectedBackground",Object.assign(Object.assign({x:ve.x,y:ve.y+me*Qe,width:Re,height:(Be-me)*Qe,cursor:de?"crosshair":"move"},ae),{pickable:!te&&((o=ae.pickable)===null||o===void 0||o)}),"rect"),!((l=W.line)===null||l===void 0)&&l.visible&&this.setSelectedPreviewAttributes("line",je),!((c=W.area)===null||c===void 0)&&c.visible&&this.setSelectedPreviewAttributes("area",je),this._isHorizontal){if(ce.visible){const Ot=((u=ce.background)===null||u===void 0?void 0:u.size)||10;this._middleHandlerRect=je.createOrUpdateChild("middleHandlerRect",Object.assign(Object.assign({x:ve.x+me*Re,y:ve.y-Ot,width:(Be-me)*Re,height:Ot},(h=ce.background)===null||h===void 0?void 0:h.style),{pickable:!te&&((f=(p=(d=ce.background)===null||d===void 0?void 0:d.style)===null||p===void 0?void 0:p.pickable)===null||f===void 0||f)}),"rect"),this._middleHandlerSymbol=je.createOrUpdateChild("middleHandlerSymbol",Object.assign(Object.assign({x:ve.x+(me+Be)/2*Re,y:ve.y-Ot/2,strokeBoundsBuffer:0,angle:0,symbolType:(m=(g=ce.icon)===null||g===void 0?void 0:g.symbolType)!==null&&m!==void 0?m:"square"},ce.icon),{pickable:!te&&((y=ce.icon.pickable)===null||y===void 0||y)}),"symbol")}this._startHandler=je.createOrUpdateChild("startHandler",Object.assign(Object.assign(Object.assign({x:ve.x+me*Re,y:ve.y+Qe/2,size:Qe,symbolType:(b=he.symbolType)!==null&&b!==void 0?b:"square"},rh.horizontal),he),{pickable:!te&&((x=he.pickable)===null||x===void 0||x)}),"symbol"),this._endHandler=je.createOrUpdateChild("endHandler",Object.assign(Object.assign(Object.assign({x:ve.x+Be*Re,y:ve.y+Qe/2,size:Qe,symbolType:(S=le.symbolType)!==null&&S!==void 0?S:"square"},rh.horizontal),le),{pickable:!te&&((C=le.pickable)===null||C===void 0||C)}),"symbol");const ut=Math.max(this._startHandler.AABBBounds.width(),Lt),vt=Math.max(this._startHandler.AABBBounds.height(),Lt),si=Math.max(this._endHandler.AABBBounds.width(),Ue),Me=Math.max(this._endHandler.AABBBounds.height(),Ue);this._startHandlerMask=je.createOrUpdateChild("startHandlerMask",Object.assign(Object.assign({x:ve.x+me*Re-ut/2,y:ve.y+Qe/2-vt/2,width:ut,height:vt,fill:"white",fillOpacity:0,zIndex:999},rh.horizontal),{pickable:!te}),"rect"),this._endHandlerMask=je.createOrUpdateChild("endHandlerMask",Object.assign(Object.assign({x:ve.x+Be*Re-si/2,y:ve.y+Qe/2-Me/2,width:si,height:Me,fill:"white",fillOpacity:0,zIndex:999},rh.horizontal),{pickable:!te}),"rect")}else{if(ce.visible){const Ot=((w=ce.background)===null||w===void 0?void 0:w.size)||10;this._middleHandlerRect=je.createOrUpdateChild("middleHandlerRect",Object.assign(Object.assign({x:V==="left"?ve.x-Ot:ve.x+Re,y:ve.y+me*Qe,width:Ot,height:(Be-me)*Qe},(A=ce.background)===null||A===void 0?void 0:A.style),{pickable:!te&&((P=(E=(T=ce.background)===null||T===void 0?void 0:T.style)===null||E===void 0?void 0:E.pickable)===null||P===void 0||P)}),"rect"),this._middleHandlerSymbol=je.createOrUpdateChild("middleHandlerSymbol",Object.assign(Object.assign({x:V==="left"?ve.x-Ot/2:ve.x+Re+Ot/2,y:ve.y+(me+Be)/2*Qe,angle:Math.PI/180*90,symbolType:(M=(O=ce.icon)===null||O===void 0?void 0:O.symbolType)!==null&&M!==void 0?M:"square",strokeBoundsBuffer:0},ce.icon),{pickable:!te&&((j=(R=ce.icon)===null||R===void 0?void 0:R.pickable)===null||j===void 0||j)}),"symbol")}this._startHandler=je.createOrUpdateChild("startHandler",Object.assign(Object.assign(Object.assign({x:ve.x+Re/2,y:ve.y+me*Qe,size:Re,symbolType:(I=he.symbolType)!==null&&I!==void 0?I:"square"},rh.vertical),he),{pickable:!te&&((D=he.pickable)===null||D===void 0||D)}),"symbol"),this._endHandler=je.createOrUpdateChild("endHandler",Object.assign(Object.assign(Object.assign({x:ve.x+Re/2,y:ve.y+Be*Qe,size:Re,symbolType:(z=le.symbolType)!==null&&z!==void 0?z:"square"},rh.vertical),le),{pickable:!te&&(($=le.pickable)===null||$===void 0||$)}),"symbol");const ut=Math.max(this._startHandler.AABBBounds.width(),Lt),vt=Math.max(this._startHandler.AABBBounds.height(),Lt),si=Math.max(this._endHandler.AABBBounds.width(),Ue),Me=Math.max(this._endHandler.AABBBounds.height(),Ue);this._startHandlerMask=je.createOrUpdateChild("startHandlerMask",Object.assign(Object.assign({x:ve.x+Re/2+ut/2,y:ve.y+me*Qe-vt/2,width:Me,height:si,fill:"white",fillOpacity:0,zIndex:999},rh.vertical),{pickable:!te}),"rect"),this._endHandlerMask=je.createOrUpdateChild("endHandlerMask",Object.assign(Object.assign({x:ve.x+Re/2+si/2,y:ve.y+Be*Qe-Me/2,width:Me,height:si,fill:"white",fillOpacity:0,zIndex:999},rh.vertical),{pickable:!te}),"rect")}this._showText&&this.renderText()}computeBasePoints(){const{orient:e}=this.attribute,{position:t,width:n,height:s}=this.getLayoutAttrFromConfig();let r,a;return this._isHorizontal?(r=[{x:t.x,y:t.y+s}],a=[{x:t.x+n,y:t.y+s}]):e==="left"?(r=[{x:t.x+n,y:t.y}],a=[{x:t.x+n,y:t.y+s}]):(r=[{x:t.x,y:t.y+s}],a=[{x:t.x,y:t.y}]),{basePointStart:r,basePointEnd:a}}simplifyPoints(e){var t;if(e.length>1e4){const n=(t=this.attribute.tolerance)!==null&&t!==void 0?t:this._previewData.length/1e4;return dtt(e,n)}return e}getPreviewLinePoints(){let e=this._previewData.map(s=>({x:this._previewPointsX&&this._previewPointsX(s),y:this._previewPointsY&&this._previewPointsY(s)}));if(e.length===0)return e;e=this.simplifyPoints(e);const{basePointStart:t,basePointEnd:n}=this.computeBasePoints();return t.concat(e).concat(n)}getPreviewAreaPoints(){let e=this._previewData.map(s=>({x:this._previewPointsX&&this._previewPointsX(s),y:this._previewPointsY&&this._previewPointsY(s),x1:this._previewPointsX1&&this._previewPointsX1(s),y1:this._previewPointsY1&&this._previewPointsY1(s)}));if(e.length===0)return e;e=this.simplifyPoints(e);const{basePointStart:t,basePointEnd:n}=this.computeBasePoints();return t.concat(e).concat(n)}setPreviewAttributes(e,t){this._previewGroup||(this._previewGroup=t.createOrUpdateChild("previewGroup",{pickable:!1},"group")),e==="line"?this._previewLine=this._previewGroup.createOrUpdateChild("previewLine",{},"line"):this._previewArea=this._previewGroup.createOrUpdateChild("previewArea",{curveType:"basis"},"area");const{backgroundChartStyle:n={}}=this.attribute;e==="line"&&this._previewLine.setAttributes(Object.assign({points:this.getPreviewLinePoints(),curveType:"basis",pickable:!1},n.line)),e==="area"&&this._previewArea.setAttributes(Object.assign({points:this.getPreviewAreaPoints(),curveType:"basis",pickable:!1},n.area))}setSelectedPreviewAttributes(e,t){this._selectedPreviewGroupClip||(this._selectedPreviewGroupClip=t.createOrUpdateChild("selectedPreviewGroupClip",{pickable:!1},"group"),this._selectedPreviewGroup=this._selectedPreviewGroupClip.createOrUpdateChild("selectedPreviewGroup",{},"group")),e==="line"?this._selectedPreviewLine=this._selectedPreviewGroup.createOrUpdateChild("selectedPreviewLine",{},"line"):this._selectedPreviewArea=this._selectedPreviewGroup.createOrUpdateChild("selectedPreviewArea",{curveType:"basis"},"area");const{selectedBackgroundChartStyle:n={}}=this.attribute,{start:s,end:r}=this.state,{position:a,width:o,height:l}=this.getLayoutAttrFromConfig();this._selectedPreviewGroupClip.setAttributes({x:this._isHorizontal?a.x+s*o:a.x,y:this._isHorizontal?a.y:a.y+s*l,width:this._isHorizontal?(r-s)*o:o,height:this._isHorizontal?l:(r-s)*l,clip:!0,pickable:!1}),this._selectedPreviewGroup.setAttributes({x:-(this._isHorizontal?a.x+s*o:a.x),y:-(this._isHorizontal?a.y:a.y+s*l),width:this._isHorizontal?(r-s)*o:o,height:this._isHorizontal?l:(r-s)*l,pickable:!1}),e==="line"&&this._selectedPreviewLine.setAttributes(Object.assign({points:this.getPreviewLinePoints(),curveType:"basis",pickable:!1},n.line)),e==="area"&&this._selectedPreviewArea.setAttributes(Object.assign({points:this.getPreviewAreaPoints(),curveType:"basis",pickable:!1},n.area))}maybeAddLabel(e,t,n){let s=this.find(r=>r.name===n,!0);return s?s.setAttributes(t):(s=new Oa(t),s.name=n),e.add(s),s}setStartAndEnd(e,t){const{start:n,end:s}=this.attribute;F(e)&&F(t)&&(e!==this.state.start||t!==this.state.end)&&(this.state.start=e,this.state.end=t,n===this.state.start&&s===this.state.end||(this.setStateAttr(e,t,!0),this._dispatchEvent("change",{start:e,end:t,tag:this._activeTag})))}setPreviewData(e){this._previewData=e}setText(e,t){t==="start"?this._startText.setAttribute("text",e):this._endText.setAttribute("text",e)}getStartValue(){return this._startValue}getEndTextValue(){return this._endValue}getMiddleHandlerSize(){var e,t,n,s;const{middleHandlerStyle:r={}}=this.attribute,a=(t=(e=r.background)===null||e===void 0?void 0:e.size)!==null&&t!==void 0?t:10,o=(s=(n=r.icon)===null||n===void 0?void 0:n.size)!==null&&s!==void 0?s:10;return Math.max(a,...q(o))}setPreviewPointsX(e){ee(e)&&(this._previewPointsX=e)}setPreviewPointsY(e){ee(e)&&(this._previewPointsY=e)}setPreviewPointsX1(e){ee(e)&&(this._previewPointsX1=e)}setPreviewPointsY1(e){ee(e)&&(this._previewPointsY1=e)}setStatePointToData(e){ee(e)&&(this._statePointToData=e)}};_oe.defaultAttributes=qat;var JF;(function(i){i.start="start",i.startTop="startTop",i.startBottom="startBottom",i.insideStart="insideStart",i.insideStartTop="insideStartTop",i.insideStartBottom="insideStartBottom",i.middle="middle",i.insideMiddleTop="insideMiddleTop",i.insideMiddleBottom="insideMiddleBottom",i.end="end",i.endTop="endTop",i.endBottom="endBottom",i.insideEnd="insideEnd",i.insideEndTop="insideEndTop",i.insideEndBottom="insideEndBottom"})(JF||(JF={}));var QF;(function(i){i.left="left",i.right="right",i.top="top",i.bottom="bottom",i.middle="middle",i.insideLeft="insideLeft",i.insideRight="insideRight",i.insideTop="insideTop",i.insideBottom="insideBottom"})(QF||(QF={}));var ps;(function(i){i.arcInnerStart="arcInnerStart",i.arcInnerEnd="arcInnerEnd",i.arcInnerMiddle="arcInnerMiddle",i.arcOuterStart="arcOuterStart",i.arcOuterEnd="arcOuterEnd",i.arcOuterMiddle="arcOuterMiddle",i.center="center"})(ps||(ps={}));var eB;(function(i){i.top="top",i.bottom="bottom",i.middle="middle",i.insideTop="insideTop",i.insideBottom="insideBottom",i.insideMiddle="insideMiddle"})(eB||(eB={}));function Nx(){on(),QP()}function Qat(){Nx(),K5()}function eot(){Nx(),X5()}function tot(){Nx(),ZP()}function iot(){Nx(),O0()}function not(){Nx(),K5(),X5(),Mo(),Cae(),Gu()}class uO extends Zn{constructor(){super(...arguments),this.name="marker",this._onHover=e=>{this._lastHover=Vae(e,this._container,this._lastHover)},this._onUnHover=e=>{this._lastHover=Uae(e,this._container,this._lastHover)},this._onClick=e=>{this._lastSelect=Wae(e,this._container,this._lastSelect)}}transAnimationConfig(){var e,t,n;if(this.attribute.animation!==!1){const s=Ke(this.attribute.animation)?this.attribute.animation:{};this._animationConfig={enter:se({},this.defaultUpdateAnimation,s,(e=this.attribute.animationEnter)!==null&&e!==void 0?e:{}),exit:se({},this.defaultExitAnimation,s,(t=this.attribute.animationExit)!==null&&t!==void 0?t:{}),update:se({},this.defaultUpdateAnimation,s,(n=this.attribute.animationUpdate)!==null&&n!==void 0?n:{})}}}setAttribute(e,t,n){super.setAttribute(e,t,n),e==="visible"&&this.render()}_bindEvent(){var e,t,n;if(!this.attribute.interactive)return;const{hover:s,select:r}=this.attribute;s&&((e=this._container)===null||e===void 0||e.addEventListener("pointermove",this._onHover),(t=this._container)===null||t===void 0||t.addEventListener("pointerout",this._onUnHover)),r&&((n=this._container)===null||n===void 0||n.addEventListener("pointerdown",this._onClick))}_releaseEvent(){var e,t,n;(e=this._container)===null||e===void 0||e.removeEventListener("pointermove",this._onHover),(t=this._container)===null||t===void 0||t.removeEventListener("pointerout",this._onUnHover),(n=this._container)===null||n===void 0||n.removeEventListener("pointerdown",this._onClick)}_initContainer(){var e,t;const{limitRect:n={},clipInRange:s}=this.attribute;let r;if(s){const a=Ae.group(Object.assign(Object.assign({},n),{clip:!0,pickable:!1}));r=Ae.group({x:-((e=n.x)!==null&&e!==void 0?e:0),y:-((t=n.y)!==null&&t!==void 0?t:0),pickable:!1}),a.add(r),this._containerClip=a,this.add(a)}else r=Ae.group({x:0,y:0,pickable:!1}),this.add(r);r.name="marker-container",this._container=r}_updateContainer(){var e,t;const{limitRect:n={},clipInRange:s}=this.attribute;this._containerClip&&this._containerClip.setAttributes(Object.assign({},n)),this._container.setAttributes({x:s?-((e=n.x)!==null&&e!==void 0?e:0):0,y:s?-((t=n.y)!==null&&t!==void 0?t:0):0})}render(){var e;this.transAnimationConfig(),this.setAttribute("pickable",!1);const t=(e=this.attribute.visible)===null||e===void 0||e;this.attribute.interactive===!1&&this.setAttribute("childrenPickable",!1),t&&this.isValidPoints()?this._container?(this._updateContainer(),this.updateMarker(),this.markerAnimate("update")):(this._initContainer(),this.initMarker(this._container),this.markerAnimate("enter")):(this.markerAnimate("exit"),this._container=null,this.removeAllChild(!0)),this._releaseEvent(),this._bindEvent()}release(){this.markerAnimate("exit"),super.release(),this._releaseEvent(),this._container=null}}function Gn(i,e,t,n){var s,r,a,o,l;if(!i)return;(s=i==null?void 0:i.animates)===null||s===void 0||s.forEach(h=>h.stop("end"));const c=(a=(r=i.attribute)===null||r===void 0?void 0:r.fillOpacity)!==null&&a!==void 0?a:1,u=(l=(o=i.attribute)===null||o===void 0?void 0:o.strokeOpacity)!==null&&l!==void 0?l:1;i.setAttributes({fillOpacity:0,strokeOpacity:0}),i.animate().wait(e).to({fillOpacity:c,strokeOpacity:u},t,n)}function boe(i,e,t,n){i&&(Gn(i.startSymbol,e,t,n),i.lines.forEach(s=>Gn(s,e,t,n)),Gn(i.line,e,t,n),Gn(i.endSymbol,e,t,n))}function hO(i,e,t,n){i&&(Gn(i.getTextShape(),e,t,n),Gn(i.getBgRect(),e,t,n))}function oc(i,e,t,n){var s,r,a,o;i&&(i.setAttributes({fillOpacity:(r=(s=i.attribute)===null||s===void 0?void 0:s.fillOpacity)!==null&&r!==void 0?r:1,strokeOpacity:(o=(a=i.attribute)===null||a===void 0?void 0:a.strokeOpacity)!==null&&o!==void 0?o:1}),i.animate().wait(e).to({fillOpacity:0,strokeOpacity:0},t,n))}function xoe(i,e,t,n){i&&(oc(i.startSymbol,e,t,n),i.lines.forEach(s=>oc(s,e,t,n)),oc(i.line,e,t,n),oc(i.endSymbol,e,t,n))}function dO(i,e,t,n){i&&(oc(i.getTextShape(),e,t,n),oc(i.getBgRect(),e,t,n))}function AG(i,e,t,n,s){const r=.1*t,a=.7*t,o=.1*t,l=.1*t;Gn(i.startSymbol,n,r,s),i.lines.forEach(c=>c.setAttribute("clipRange",0)),i.lines.forEach((c,u)=>{const h=a/i.lines.length;c.animate().wait(n+r+u*h).to({clipRange:1},h,s)}),Gn(i.endSymbol,n+r+a,o,s),Gn(e.getTextShape(),n+r+a+o,l,s),Gn(e.getBgRect(),n+r+a+o,l,s)}function kG(i,e,t,n,s){boe(i,n,t,s),hO(e,n,t,s)}function TG(i,e,t,n,s){Gn(i,n,t,s),hO(e,n,t,s)}function EG(i,e,t,n,s){Gn(i,n,t,s),hO(e,n,t,s)}function PG(i,e,t,n,s,r){var a;boe(i,s,n,r),Gn(e,s,n,r),!((a=t.getTextShape)===null||a===void 0)&&a.call(t)?hO(t,s,n,r):Gn(t,s,n,r)}function sot(i,e,t,n,s){xoe(i,n,t,s),dO(e,n,t,s)}function rot(i,e,t,n,s){oc(i,n,t,s),dO(e,n,t,s)}function aot(i,e,t,n,s){oc(i,n,t,s),dO(e,n,t,s)}function oot(i,e,t,n,s,r){var a;xoe(i,s,n,r),oc(e,s,n,r),!((a=t.getTextShape)===null||a===void 0)&&a.call(t)?dO(t,s,n,r):oc(t,s,n,r)}function OG(i,e,t,n,s,r){var a;const o=.1*n,l=.65*n,c=.05*n,u=.1*n,h=.1*n;Gn(i.startSymbol,s,o,r),i.lines.forEach(d=>d.setAttribute("clipRange",0)),i.lines.forEach((d,p)=>{const f=l/i.lines.length;d.animate().wait(s+o+p*f).to({clipRange:1},f,r)}),Gn(e,s+o+l,c,r),Gn(i.endSymbol,s+o+l+c,u,r),!((a=t.getTextShape)===null||a===void 0)&&a.call(t)?(Gn(t.getTextShape(),s+o+l+c+u,h,r),Gn(t.getBgRect(),s+o+l+u,h,r)):Gn(t,s+o+l+u,h,r)}function Soe(i,e,t,n){const{enter:s,update:r,exit:a}=t;if(n==="enter"){const{type:o,duration:l,delay:c,easing:u}=s;o==="clipIn"?AG(i,e,l,c,u):o==="fadeIn"&&kG(i,e,l,c,u)}else if(n==="update"){const{type:o,duration:l,delay:c,easing:u}=r;o==="clipIn"?AG(i,e,l,c,u):o==="fadeIn"&&kG(i,e,l,c,u)}else if(n==="exit"){const{duration:o,delay:l,easing:c}=a;sot(i,e,o,l,c)}}function lot(i,e,t,n){const{enter:s,update:r,exit:a}=t;if(n==="enter"){const{type:o,duration:l,delay:c,easing:u}=s;o==="fadeIn"&&TG(i,e,l,c,u)}else if(n==="update"){const{type:o,duration:l,delay:c,easing:u}=r;o==="fadeIn"&&TG(i,e,l,c,u)}else if(n==="exit"){const{duration:o,delay:l,easing:c}=a;rot(i,e,o,l,c)}}function cot(i,e,t,n){const{enter:s,update:r,exit:a}=t;if(n==="enter"){const{type:o,duration:l,delay:c,easing:u}=s;o==="fadeIn"&&EG(i,e,l,c,u)}else if(n==="update"){const{type:o,duration:l,delay:c,easing:u}=r;o==="fadeIn"&&EG(i,e,l,c,u)}else if(n==="exit"){const{duration:o,delay:l,easing:c}=a;aot(i,e,o,l,c)}}function uot(i,e,t,n){const[s,r]=i,{enter:a,update:o,exit:l}=t;if(n==="enter"){const{type:c,duration:u,delay:h,easing:d}=a;c==="fadeIn"?PG(s,r,e,u,h,d):c==="callIn"&&OG(s,r,e,u,h,d)}else if(n==="update"){const{type:c,duration:u,delay:h,easing:d}=o;c==="fadeIn"?PG(s,r,e,u,h,d):c==="callIn"&&OG(s,r,e,u,h,d)}else if(n==="exit"){const{duration:c,delay:u,easing:h}=l;oot(s,r,e,c,u,h)}}const hot={type:"clipIn",duration:500,easing:"linear",delay:0},Coe={type:"fadeIn",duration:500,easing:"linear",delay:0},dot={type:"callIn",duration:500,easing:"linear",delay:0},pO={type:"fadeOut",duration:500,easing:"linear",delay:0};class woe extends uO{constructor(){super(...arguments),this.name="markCommonLine",this.defaultUpdateAnimation=hot,this.defaultExitAnimation=pO}getLine(){return this._line}getLabel(){return this._label}setLabelPos(){const{label:e={},limitRect:t}=this.attribute,{position:n,confine:s,autoRotate:r}=e,a=this.getPointAttrByPosition(n),o=n.toString().toLocaleLowerCase().includes("start")?this._line.getStartAngle()||0:this._line.getEndAngle()||0;if(this._label.setAttributes(Object.assign(Object.assign({},a.position),{angle:r?this.getRotateByAngle(a.angle):0,textStyle:Object.assign(Object.assign({},this.getTextStyle(n,o,r)),e.textStyle)})),t&&s){const{x:l,y:c,width:u,height:h}=t;G5(this._label,{x1:l,y1:c,x2:l+u,y2:c+h})}}initMarker(e){const{label:t,state:n}=this.attribute,s=this.createSegment();s.name="mark-common-line-line",this._line=s,e.add(s);const r=new Oa(Object.assign(Object.assign({},t),{state:{panel:se({},nt,n==null?void 0:n.labelBackground),text:se({},nt,n==null?void 0:n.label)}}));r.name="mark-common-line-label",this._label=r,e.add(r),this.setLabelPos()}updateMarker(){const{label:e,state:t}=this.attribute;this.setLineAttributes(),this._label&&(this._label.setAttributes(Object.assign(Object.assign({dx:0,dy:0},e),{state:{panel:se({},nt,t==null?void 0:t.labelBackground),text:se({},nt,t==null?void 0:t.label)}})),this.setLabelPos())}}const Xl=.001,pot={interactive:!0,startSymbol:{visible:!1,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},endSymbol:{visible:!0,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},label:{position:JF.end,refX:0,refY:0,refAngle:0,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}},MG={postiveXAxis:{start:{textAlign:"left",textBaseline:"middle"},startTop:{textAlign:"left",textBaseline:"bottom"},startBottom:{textAlign:"left",textBaseline:"top"},insideStart:{textAlign:"right",textBaseline:"middle"},insideStartTop:{textAlign:"right",textBaseline:"bottom"},insideStartBottom:{textAlign:"right",textBaseline:"top"},middle:{textAlign:"center",textBaseline:"middle"},insideMiddleTop:{textAlign:"center",textBaseline:"bottom"},insideMiddleBottom:{textAlign:"center",textBaseline:"top"},end:{textAlign:"left",textBaseline:"middle"},endTop:{textAlign:"left",textBaseline:"bottom"},endBottom:{textAlign:"left",textBaseline:"top"},insideEnd:{textAlign:"right",textBaseline:"middle"},insideEndTop:{textAlign:"right",textBaseline:"bottom"},insideEndBottom:{textAlign:"right",textBaseline:"top"}},negativeXAxis:{start:{textAlign:"right",textBaseline:"middle"},startTop:{textAlign:"right",textBaseline:"bottom"},startBottom:{textAlign:"right",textBaseline:"top"},insideStart:{textAlign:"left",textBaseline:"middle"},insideStartTop:{textAlign:"left",textBaseline:"bottom"},insideStartBottom:{textAlign:"left",textBaseline:"top"},middle:{textAlign:"center",textBaseline:"middle"},insideMiddleTop:{textAlign:"center",textBaseline:"bottom"},insideMiddleBottom:{textAlign:"center",textBaseline:"top"},end:{textAlign:"right",textBaseline:"middle"},endTop:{textAlign:"right",textBaseline:"bottom"},endBottom:{textAlign:"right",textBaseline:"top"},insideEnd:{textAlign:"left",textBaseline:"middle"},insideEndTop:{textAlign:"left",textBaseline:"bottom"},insideEndBottom:{textAlign:"left",textBaseline:"top"}}},fot={interactive:!0,startSymbol:{visible:!1,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},endSymbol:{visible:!0,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},label:{position:ps.arcOuterMiddle,refX:0,refY:0,refAngle:0,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}},got={interactive:!0,label:{position:QF.right,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},areaStyle:{fill:"#b2bacf",visible:!0}},mot={interactive:!0,label:{position:ps.arcOuterMiddle,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},areaStyle:{fill:"#b2bacf",visible:!0}},Aoe={arcInnerStart:{textAlign:"center",textBaseline:"bottom"},arcInnerEnd:{textAlign:"center",textBaseline:"bottom"},arcInnerMiddle:{textAlign:"center",textBaseline:"bottom"},arcOuterStart:{textAlign:"center",textBaseline:"top"},arcOuterEnd:{textAlign:"center",textBaseline:"top"},arcOuterMiddle:{textAlign:"center",textBaseline:"top"},center:{textAlign:"center",textBaseline:"middle"}},yot={left:{textAlign:"right",textBaseline:"middle"},insideLeft:{textAlign:"left",textBaseline:"middle"},right:{textAlign:"left",textBaseline:"middle"},insideRight:{textAlign:"right",textBaseline:"middle"},top:{textAlign:"center",textBaseline:"bottom"},insideTop:{textAlign:"center",textBaseline:"top"},bottom:{textAlign:"center",textBaseline:"top"},insideBottom:{textAlign:"center",textBaseline:"bottom"},middle:{textAlign:"center",textBaseline:"middle"}},_ot={interactive:!0,targetSymbol:{visible:!1,offset:0,style:{symbolType:"circle",size:20,fill:!1,stroke:"rgba(46, 47, 50)"}},itemLine:{visible:!0,decorativeLine:{visible:!1,length:30},startSymbol:{visible:!0,clip:!0,symbolType:"circle",size:20,style:{fill:!1,stroke:"rgba(46, 47, 50)"}},endSymbol:{visible:!1,clip:!0,symbolType:"triangle",size:12,style:{fill:!1,stroke:"rgba(46, 47, 50)"}},lineStyle:{stroke:"#000",lineWidth:1}},itemContent:{type:"text",position:"middle",refX:10,symbolStyle:{symbolType:"star",fill:"rgb(48, 115, 242)",fillOpacity:.8,size:20},textStyle:{dx:0,dy:0},imageStyle:{width:80,height:80},richTextStyle:{width:100,height:100}}},IG={postiveXAxis:{top:{textAlign:"left",textBaseline:"bottom"},bottom:{textAlign:"left",textBaseline:"top"},middle:{textAlign:"left",textBaseline:"middle"},insideTop:{textAlign:"right",textBaseline:"bottom"},insideBottom:{textAlign:"right",textBaseline:"top"},insideMiddle:{textAlign:"right",textBaseline:"middle"}},negativeXAxis:{top:{textAlign:"right",textBaseline:"bottom"},bottom:{textAlign:"right",textBaseline:"top"},middle:{textAlign:"right",textBaseline:"middle"},insideTop:{textAlign:"left",textBaseline:"bottom"},insideBottom:{textAlign:"left",textBaseline:"top"},insideMiddle:{textAlign:"left",textBaseline:"middle"}}};Qat();function koe(){id._animate=Soe}class id extends woe{markerAnimate(e){id._animate&&this._animationConfig&&id._animate(this._line,this._label,this._animationConfig,e)}constructor(e,t){super(t!=null&&t.skipDefault?e:se({},id.defaultAttributes,e)),this.name="markLine"}getPointAttrByPosition(e){var t;const{label:n={}}=this.attribute,{refX:s=0,refY:r=0}=n,a=this._line.getMainSegmentPoints(),o=(t=this._line.getEndAngle())!==null&&t!==void 0?t:0,l=o,c=s*Math.cos(l)+r*Math.cos(l-Math.PI/2),u=s*Math.sin(l)+r*Math.sin(l-Math.PI/2);return e.includes("start")||e.includes("Start")?{position:{x:a[0].x+c,y:a[0].y+u},angle:l}:e.includes("middle")||e.includes("Middle")?{position:{x:(a[0].x+a[a.length-1].x)/2+c,y:(a[0].y+a[a.length-1].y)/2+u},angle:l}:{position:{x:a[a.length-1].x+c,y:a[a.length-1].y+u},angle:l}}getRotateByAngle(e){var t;return(Qk(e)?e:e-Math.PI)+((t=this.attribute.label.refAngle)!==null&&t!==void 0?t:0)}getTextStyle(e,t,n){return Gl(Math.abs(t),Math.PI/2,Xl)||Gl(Math.abs(t),3*Math.PI/2,Xl)?kae(n,t,e):Qk(t)?MG.postiveXAxis[e]:MG.negativeXAxis[e]}createSegment(){const{points:e,startSymbol:t,endSymbol:n,lineStyle:s,mainSegmentIndex:r,multiSegment:a,state:o}=this.attribute;return new Du({points:e,startSymbol:t,endSymbol:n,lineStyle:s,mainSegmentIndex:r,multiSegment:a,pickable:!1,state:{line:se({},nt,o==null?void 0:o.line),startSymbol:se({},nt,o==null?void 0:o.lineStartSymbol),endSymbol:se({},nt,o==null?void 0:o.lineEndSymbol)}})}setLineAttributes(){const{points:e,startSymbol:t,endSymbol:n,lineStyle:s,mainSegmentIndex:r,multiSegment:a,state:o}=this.attribute;this._line&&this._line.setAttributes({points:e,startSymbol:t,endSymbol:n,lineStyle:s,mainSegmentIndex:r,multiSegment:a,state:{line:se({},nt,o==null?void 0:o.line),startSymbol:se({},nt,o==null?void 0:o.lineStartSymbol),endSymbol:se({},nt,o==null?void 0:o.lineEndSymbol)}})}isValidPoints(){const{points:e}=this.attribute;if(!e||e.length<2)return!1;let t=!0;return e.forEach(n=>{if(n.length)n.forEach(s=>{Z(s.x)&&Z(s.y)||(t=!1)});else if(!Z(n.x)||!Z(n.y))return void(t=!1)}),t}}id.defaultAttributes=pot;tot();function Toe(){nd._animate=lot}class nd extends uO{markerAnimate(e){nd._animate&&this._animationConfig&&nd._animate(this._area,this._label,this._animationConfig,e)}getArea(){return this._area}getLabel(){return this._label}constructor(e,t){super(t!=null&&t.skipDefault?e:se({},nd.defaultAttributes,e)),this.name="markArea",this.defaultUpdateAnimation=Coe,this.defaultExitAnimation=pO}getPointAttrByPosition(e){const{x1:t,x2:n,y1:s,y2:r}=this._area.AABBBounds;return e.includes("left")||e.includes("Left")?{x:t,y:(s+r)/2}:e.includes("right")||e.includes("Right")?{x:n,y:(s+r)/2}:e.includes("top")||e.includes("Top")?{x:(t+n)/2,y:s}:e.includes("bottom")||e.includes("Bottom")?{x:(t+n)/2,y:r}:{x:(t+n)/2,y:(s+r)/2}}setLabelPos(){var e;if(this._label&&this._area){const{label:t={}}=this.attribute,n=(e=t.position)!==null&&e!==void 0?e:"middle",s=this.getPointAttrByPosition(n);if(this._label.setAttributes(Object.assign(Object.assign({},s),{textStyle:Object.assign(Object.assign({},yot[n]),t.textStyle)})),this.attribute.limitRect&&t.confine){const{x:r,y:a,width:o,height:l}=this.attribute.limitRect;G5(this._label,{x1:r,y1:a,x2:r+o,y2:a+l})}}}initMarker(e){const{points:t,label:n,areaStyle:s,state:r}=this.attribute,a=Ae.polygon(Object.assign({points:t},s));a.states=se({},nt,r==null?void 0:r.area),a.name="mark-area-polygon",this._area=a,e.add(a);const o=new Oa(Object.assign(Object.assign({},n),{state:{panel:se({},nt,r==null?void 0:r.labelBackground),text:se({},nt,r==null?void 0:r.label)}}));o.name="mark-area-label",this._label=o,e.add(o),this.setLabelPos()}updateMarker(){const{points:e,label:t,areaStyle:n,state:s}=this.attribute;this._area&&(this._area.setAttributes(Object.assign({points:e},n)),this._area.states=se({},nt,s==null?void 0:s.area)),this._label&&this._label.setAttributes(Object.assign(Object.assign({dx:0,dy:0},t),{state:{panel:se({},nt,s==null?void 0:s.labelBackground),text:se({},nt,s==null?void 0:s.label)}})),this.setLabelPos()}isValidPoints(){const{points:e}=this.attribute;if(!e||e.length<3)return!1;let t=!0;return e.forEach(n=>{Z(n.x)&&Z(n.y)||(t=!1)}),t}}nd.defaultAttributes=got;eot();function vot(){Up._animate=Soe}class Up extends woe{markerAnimate(e){Up._animate&&this._animationConfig&&Up._animate(this._line,this._label,this._animationConfig,e)}constructor(e,t){super(t!=null&&t.skipDefault?e:se({},Up.defaultAttributes,e,{label:{autoRotate:!0}})),this.name="markArcLine"}getPointAttrByPosition(e){const{center:t,radius:n,startAngle:s,endAngle:r,label:a}=this.attribute,{refX:o=0,refY:l=0}=a;let c;switch(e){case ps.arcInnerStart:c=s;case ps.arcOuterStart:c=s;break;case ps.arcInnerEnd:c=r;case ps.arcOuterEnd:c=r;break;case ps.center:case ps.arcInnerMiddle:case ps.arcOuterMiddle:default:c=(s+r)/2}return{position:{x:t.x+(n+l)*Math.cos(c)+o*Math.cos(c-Math.PI/2),y:t.y+(n+l)*Math.sin(c)+o*Math.sin(c-Math.PI/2)},angle:c}}getTextStyle(e){return Aoe[e]}getRotateByAngle(e){var t;return e-Math.PI/2+((t=this.attribute.label.refAngle)!==null&&t!==void 0?t:0)}createSegment(){const{center:e,radius:t,startAngle:n,endAngle:s,startSymbol:r,endSymbol:a,lineStyle:o,state:l}=this.attribute;return new UF({center:e,radius:t,startAngle:n,endAngle:s,startSymbol:r,endSymbol:a,lineStyle:o,state:{line:se({},nt,l==null?void 0:l.line),startSymbol:se({},nt,l==null?void 0:l.lineStartSymbol),endSymbol:se({},nt,l==null?void 0:l.lineEndSymbol)}})}setLineAttributes(){const{center:e,radius:t,startAngle:n,endAngle:s,startSymbol:r,endSymbol:a,lineStyle:o,state:l}=this.attribute;this._line&&this._line.setAttributes({center:e,radius:t,startAngle:n,endAngle:s,startSymbol:r,endSymbol:a,lineStyle:o,state:{line:se({},nt,l==null?void 0:l.line),startSymbol:se({},nt,l==null?void 0:l.lineStartSymbol),endSymbol:se({},nt,l==null?void 0:l.lineEndSymbol)}})}isValidPoints(){return!0}}Up.defaultAttributes=fot;iot();function bot(){Wp._animate=cot}class Wp extends uO{markerAnimate(e){Wp._animate&&this._animationConfig&&Wp._animate(this._area,this._label,this._animationConfig,e)}getArea(){return this._area}getLabel(){return this._label}constructor(e,t){super(t!=null&&t.skipDefault?e:se({},Wp.defaultAttributes,e,{label:{autoRotate:!0}})),this.name="markArcArea",this.defaultUpdateAnimation=Coe,this.defaultExitAnimation=pO}getPointAttrByPosition(e){const{center:t,innerRadius:n,outerRadius:s,startAngle:r,endAngle:a,label:o}=this.attribute,{refX:l=0,refY:c=0}=o;let u,h;switch(e){case ps.center:u=(n+s)/2,h=(r+a)/2;break;case ps.arcInnerStart:u=n,h=r;break;case ps.arcOuterStart:u=s,h=r;break;case ps.arcInnerEnd:u=n,h=a;break;case ps.arcOuterEnd:u=s,h=a;break;case ps.arcInnerMiddle:u=n,h=(r+a)/2;break;case ps.arcOuterMiddle:u=s,h=(r+a)/2;break;default:u=n,h=(r+a)/2}return{position:{x:t.x+(u+c)*Math.cos(h)+l*Math.cos(h-Math.PI/2),y:t.y+(u+c)*Math.sin(h)+l*Math.sin(h-Math.PI/2)},angle:h}}setLabelPos(){var e;if(this._label&&this._area){const{label:t={}}=this.attribute,{position:n="arcInnerMiddle",autoRotate:s}=t,r=this.getPointAttrByPosition(n);if(this._label.setAttributes(Object.assign(Object.assign({},r.position),{angle:s?r.angle-Math.PI/2+((e=t.refAngle)!==null&&e!==void 0?e:0):0,textStyle:Object.assign(Object.assign({},Aoe[n]),t.textStyle)})),this.attribute.limitRect&&t.confine){const{x:a,y:o,width:l,height:c}=this.attribute.limitRect;G5(this._label,{x1:a,y1:o,x2:a+l,y2:o+c})}}}initMarker(e){const{center:t,innerRadius:n,outerRadius:s,startAngle:r,endAngle:a,areaStyle:o,label:l,state:c}=this.attribute,u=Ae.arc(Object.assign({x:t.x,y:t.y,innerRadius:n,outerRadius:s,startAngle:r,endAngle:a},o));u.states=se({},nt,c==null?void 0:c.area),u.name="polar-mark-area-area",this._area=u,e.add(u);const h=new Oa(Object.assign(Object.assign({},l),{state:{panel:se({},nt,c==null?void 0:c.labelBackground),text:se({},nt,c==null?void 0:c.label)}}));h.name="mark-area-label",this._label=h,e.add(h),this.setLabelPos()}updateMarker(){const{center:e,innerRadius:t,outerRadius:n,startAngle:s,endAngle:r,areaStyle:a,label:o,state:l}=this.attribute;this._area&&(this._area.setAttributes(Object.assign({x:e.x,y:e.y,innerRadius:t,outerRadius:n,startAngle:s,endAngle:r},a)),this._area.states=se({},nt,l==null?void 0:l.area)),this._label&&(this._label.setAttributes(Object.assign(Object.assign({dx:0,dy:0},o),{state:{panel:se({},nt,l==null?void 0:l.labelBackground),text:se({},nt,l==null?void 0:l.label)}})),this.setLabelPos())}isValidPoints(){return!0}}Wp.defaultAttributes=mot;not();function Q5(){sd._animate=uot}class sd extends uO{markerAnimate(e){sd._animate&&this._animationConfig&&sd._animate([this._line,this._decorativeLine],this._item,this._animationConfig,e)}constructor(e,t){super(t!=null&&t.skipDefault?e:se({},sd.defaultAttributes,e)),this.name="markPoint",this.defaultUpdateAnimation=dot,this.defaultExitAnimation=pO,this._isArcLine=!1,this._isStraightLine=!1}setLabelPos(){}getTextAlignAttr(e,t,n,s,r){return Gl(Math.abs(s),Math.PI/2,Xl)||Gl(Math.abs(s),3*Math.PI/2,Xl)?kae(e,s,r):Qk(s)?IG.postiveXAxis[r]:IG.negativeXAxis[r]}setItemAttributes(e,t,n,s,r){var a,o;if(!e)return;const{autoRotate:l=!0,refX:c=0,refY:u=0,refAngle:h=0,textStyle:d={},richTextStyle:p={},imageStyle:f={},position:g=eB.middle}=t,{state:m}=this.attribute,y=((a=this._line)===null||a===void 0?void 0:a.getEndAngle())||0,b=c*Math.cos(y)+u*Math.cos(y-Math.PI/2),x=c*Math.sin(y)+u*Math.sin(y-Math.PI/2);if(r==="text"){const C=s.x-n.x,w=s.y-n.y;e.setAttributes(Object.assign(Object.assign({},d),{textStyle:Object.assign(Object.assign({},this.getTextAlignAttr(l,C,w,y,(o=t.position)!==null&&o!==void 0?o:"end")),d.textStyle),state:{panel:se({},nt,m==null?void 0:m.textBackground),text:se({},nt,m==null?void 0:m.text)}}))}else r==="richText"?(e.setAttributes({dx:this.getItemDx(e,g,p)+(p.dx||0),dy:this.getItemDy(e,g,p)+(p.dy||0)}),e.states=se({},nt,m==null?void 0:m.richText)):r==="image"&&(e.setAttributes({dx:this.getItemDx(e,g,f)+(f.dx||0),dy:this.getItemDy(e,g,f)+(f.dy||0)}),e.states=se({},nt,m==null?void 0:m.image));const S=Qk(y)?y:y-Math.PI;e.setAttributes({x:s.x+(b||0),y:s.y+(x||0),angle:l&&S+h})}getItemDx(e,t,n){var s,r;const a=(r=(s=e==null?void 0:e.AABBBounds)===null||s===void 0?void 0:s.width())!==null&&r!==void 0?r:(n==null?void 0:n.width)||0;return t.includes("inside")?-a:0}getItemDy(e,t,n){var s,r;const a=(r=(s=e==null?void 0:e.AABBBounds)===null||s===void 0?void 0:s.height())!==null&&r!==void 0?r:(n==null?void 0:n.height)||0;return t.includes("top")||t.includes("Top")?-a:t.includes("middle")||t.includes("Middle")?-a/2:0}initItem(e,t,n){const{state:s}=this.attribute,{type:r="text",symbolStyle:a,richTextStyle:o,imageStyle:l,renderCustomCallback:c}=e;let u;return r==="symbol"?(u=Ae.symbol(Object.assign(Object.assign({},n),a)),u.states=se({},nt,s==null?void 0:s.symbol)):r==="text"?u=new Oa(Object.assign(Object.assign({},n),{state:{panel:se({},nt,s==null?void 0:s.textBackground),text:se({},nt,s==null?void 0:s.text)}})):r==="richText"?(u=Ae.richtext(Object.assign(Object.assign({},n),o)),u.states=se({},nt,s==null?void 0:s.richText)):r==="image"?(u=Ae.image(Object.assign(Object.assign({},n),l)),u.states=se({},nt,s==null?void 0:s.image)):r==="custom"&&c&&(u=c(),u.states=se({},nt,s==null?void 0:s.customMark)),u.name=`mark-point-${r}`,this.setItemAttributes(u,e,t,n,r),u}getItemLineAttr(e,t,n){let s=[],r={x:0,y:0},a=0,o=0,l=0;const{type:c="type-s",arcRatio:u=.8}=e,h=n.x-t.x,d=n.y-t.y;if(this._isStraightLine=Gl(h,0,Xl)||Gl(d,0,Xl),this._isArcLine){const{x:p,y:f}=t,{x:g,y:m}=n,y=(p+g)/2,b=(f+m)/2,x=f===m?0:-(p-g)/(f-m),S=y+u*(m>f?-1:1)*y,C=(w=>x*(w-y)+b)(S);o=PI(f-C,p-S),l=PI(m-C,g-S),r={x:S,y:C},u>0?l<o&&(l+=2*Math.PI):o<l&&(o+=2*Math.PI),a=Math.sqrt((S-p)*(S-p)+(C-f)*(C-f))}else s=c!=="type-do"||this._isStraightLine?c!=="type-po"||this._isStraightLine?c!=="type-op"||this._isStraightLine?[t,n]:[t,{x:t.x,y:n.y},n]:[t,{x:n.x,y:t.y},n]:[t,{x:(t.x+n.x)/2,y:n.y},n];return s=Qst(s),{points:s,center:r,radius:a,startAngle:o,endAngle:l}}reDrawLine(e,t){this._line.release();const{startSymbol:n,endSymbol:s,lineStyle:r,type:a="type-s"}=e,{state:o}=this.attribute,l=this._isArcLine?UF:Du;this._container.removeChild(this._line),this._line=new l(Object.assign(Object.assign({},t),{pickable:!1,startSymbol:n,endSymbol:s,lineStyle:r,visible:e.visible,state:{line:se({},nt,o==null?void 0:o.line),startSymbol:se({},nt,o==null?void 0:o.lineStartSymbol),endSymbol:se({},nt,o==null?void 0:o.lineEndSymbol)}})),this._container.add(this._line)}setItemLineAttr(e,t,n){if(this._line){const{startSymbol:s,endSymbol:r,lineStyle:a,type:o="type-s"}=e,{state:l}=this.attribute,c=this.getItemLineAttr(e,t,n);this._isArcLine&&this._line.key==="arc-segment"||!this._isArcLine&&this._line.key==="segment"?this._line.setAttributes(Object.assign(Object.assign({},c),{startSymbol:s,endSymbol:r,lineStyle:a,visible:e.visible,state:{line:se({},nt,l==null?void 0:l.line),startSymbol:se({},nt,l==null?void 0:l.lineStartSymbol),endSymbol:se({},nt,l==null?void 0:l.lineEndSymbol)}})):this.reDrawLine(e,c)}}getDecorativeLineAttr(e){var t;const n=((t=e==null?void 0:e.decorativeLine)===null||t===void 0?void 0:t.length)||10,s=this._line.getEndAngle()||0;return{startPointOffsetX:n/2*Math.cos(s-Math.PI/2),startPointOffsetY:n/2*Math.sin(s-Math.PI/2),endPointOffsetX:-n/2*Math.cos(s-Math.PI/2),endPointOffsetY:-n/2*Math.sin(s-Math.PI/2)}}setDecorativeLineAttr(e,t,n){var s;if(this._decorativeLine){const{lineStyle:r}=e,{startPointOffsetX:a,startPointOffsetY:o,endPointOffsetX:l,endPointOffsetY:c}=this.getDecorativeLineAttr(e);this._decorativeLine.setAttributes(Object.assign(Object.assign({points:[{x:t.x+a,y:t.y+o},{x:t.x+l,y:t.y+c}]},r),{visible:n})),this._decorativeLine.states=se({},nt,(s=this.attribute.state)===null||s===void 0?void 0:s.line)}}setTargetItemAttributes(e,t){var n,s;this._targetItem&&(this._targetItem.setAttributes(Object.assign({x:t.x,y:t.y,visible:(n=e.visible)!==null&&n!==void 0&&n,size:e.size},e.style)),this._targetItem.states=se({},nt,(s=this.attribute.state)===null||s===void 0?void 0:s.targetItem))}setAllOfItemsAttr(e,t){var n;const{position:s,itemLine:r={},itemContent:a={},limitRect:o,targetSymbol:l}=this.attribute,{type:c="text",confine:u}=a;if(o&&u){const{x:h,y:d,width:p,height:f}=o,{dx:g,dy:m}=Mae(this._item,{x1:h,y1:d,x2:h+p,y2:d+f});t.x=t.x+g,t.y=t.y+m}this.setTargetItemAttributes(l,s),this.setItemLineAttr(r,e,t),this.setItemAttributes(this._item,a,e,t,c),this.setDecorativeLineAttr(r,t,(n=r.decorativeLine)===null||n===void 0?void 0:n.visible)}computeNewPositionAfterTargetItem(e){var t,n;const{itemContent:s={},targetSymbol:r}=this.attribute,{offsetX:a=0,offsetY:o=0}=s,{offset:l=0,style:c,visible:u=!1,size:h}=r,d=u?(n=(t=c.size)!==null&&t!==void 0?t:h)!==null&&n!==void 0?n:20:0,p=PI(o,a);return{newPosition:{x:e.x+(d/2+l)*Math.cos(p),y:e.y+(d/2+l)*Math.sin(p)},newItemPosition:{x:e.x+(d/2+l)*Math.cos(p)+a,y:e.y+(d/2+l)*Math.sin(p)+o}}}initMarker(e){const{position:t,itemContent:n={},itemLine:s}=this.attribute,{type:r="type-s",arcRatio:a=.8}=s,{offsetX:o=0,offsetY:l=0}=n;this._isStraightLine=Gl(o,0,Xl)||Gl(l,0,Xl),this._isArcLine=r==="type-arc"&&a!==0&&!this._isStraightLine;const{newPosition:c,newItemPosition:u}=this.computeNewPositionAfterTargetItem(t),h=new(this._isArcLine?UF:Du)({points:[],pickable:!1,center:{x:0,y:0},radius:0,startAngle:0,endAngle:0});h.name="mark-point-line",this._line=h,e.add(h);const d=Ae.line({points:[]});d.name="mark-point-decorativeLine",this._decorativeLine=d,e.add(d);const p=Ae.symbol({});p.name="mark-point-targetItem",this._targetItem=p,e.add(this._targetItem);const f=this.initItem(n,c,u);this._item=f,e.add(f),this.setAllOfItemsAttr(c,u)}updateMarker(){const{position:e,itemContent:t={},itemLine:n}=this.attribute,{type:s="text"}=t,{type:r="type-s",arcRatio:a=.8}=n,{offsetX:o=0,offsetY:l=0}=t;this._isStraightLine=Gl(o,0,Xl)||Gl(l,0,Xl);const c=r==="type-arc"&&a!==0&&!this._isStraightLine,{newPosition:u,newItemPosition:h}=this.computeNewPositionAfterTargetItem(e);c!==this._isArcLine?(this._isArcLine=c,this.reDrawLine(n,{points:[{x:0,y:0}],pickable:!1,center:{x:0,y:0},radius:0,startAngle:0,endAngle:0})):this._isArcLine=c,this.setItemAttributes(this._item,t,u,h,s),this.setAllOfItemsAttr(u,h)}isValidPoints(){const{position:e}=this.attribute;return!(!Z(e.x)||!Z(e.y))}}sd.defaultAttributes=_ot;function Eoe(){on(),Mo(),$c()}const Poe={space:8,style:{fill:"rgb(47, 69, 84)",cursor:"pointer",size:15},state:{disable:{fill:"rgb(170, 170, 170)",cursor:"not-allowed"},hover:{}}};Eoe();class l1 extends Zn{getCurrent(){return this._current}constructor(e,t){super(t!=null&&t.skipDefault?e:se({},l1.defaultAttributes,e)),this.name="pager",this._current=1,this._onHover=n=>{const s=n.target;s.hasState("disable")||s.addState("hover")},this._onUnHover=n=>{n.target.removeState("hover")},this._onClick=n=>{const s=n.target;if(s.name==="preHandler"){if(this._current===1)return;this._current-=1,this._current===1?s.addState("disable"):s.removeState("disable"),this._dispatchEvent("toPrev",{current:this._current,total:this._total,direction:"pre",event:n})}if(s.name==="nextHandler"){if(this._current===this._total)return;this._current+=1,this._current===this._total?s.addState("disable"):s.removeState("disable"),this._dispatchEvent("toNext",{current:this._current,total:this._total,direction:"next",event:n})}this._current>1&&this.preHandler.removeState("disable"),this._current<this._total&&this.nextHandler.removeState("disable"),this.text.setAttribute("text",this._getPageText(this._current))}}render(){var e,t,n;this._reset();const{layout:s="horizontal",handler:r=Poe,total:a,defaultCurrent:o=1,textStyle:l,padding:c=0}=this.attribute;this._current=o;const u=Cr(c),h=s==="horizontal",d=Ae.group({x:0,y:0}),p=r.style||{},f=p.size||15,g=(e=r.space)!==null&&e!==void 0?e:8,m=r.state||{};let{preShape:y,nextShape:b}=r;y||(y=h?"triangleLeft":"triangleUp"),b||(b=h?"triangleRight":"triangleDown");const x=Ae.symbol(Object.assign(Object.assign({strokeBoundsBuffer:0,pickMode:"imprecise"},p),{x:0,y:0,symbolType:y,size:f}));x.states=m,x.name="preHandler",this.preHandler=x,d.add(x);const{width:S,height:C}=JP(this._getPageText(a),Object.assign({textAlign:"center",textBaseline:"middle"},l),(n=(t=this.stage)===null||t===void 0?void 0:t.getTheme())===null||n===void 0?void 0:n.text),w=ye(f)?f:f[0],A=ye(f)?f:f[1],T=Ae.text(Object.assign({x:h?w/2+g+S/2:0,y:h?0:A/2+g+C/2,text:this._getPageText(o),textAlign:"center",textBaseline:"middle",lineHeight:l==null?void 0:l.fontSize},l));this.text=T,d.add(T);const E=Ae.symbol(Object.assign(Object.assign({strokeBoundsBuffer:0,pickMode:"imprecise"},p),{x:h?w+2*g+S:0,y:h?0:A+2*g+C,symbolType:b,size:f}));E.name="nextHandler",E.states=m,this.nextHandler=E,d.add(E),this._total===1?(x.addState("disable"),E.addState("disable")):this._current===1?x.addState("disable"):this._current===a&&E.addState("disable");const P=d.AABBBounds,O=P.width(),M=P.height();d.translateTo(0-P.x1+u[3],0-P.y1+u[0]),this.add(d),this.attribute.width=O+u[1]+u[3],this.attribute.height=M+u[0]+u[2],this._bindEvents()}_bindEvents(){this.attribute.disableTriggerEvent||(this.preHandler&&(this.preHandler.addEventListener("pointerenter",this._onHover),this.preHandler.addEventListener("pointerleave",this._onUnHover),this.preHandler.addEventListener("pointerdown",this._onClick)),this.nextHandler&&(this.nextHandler.addEventListener("pointerenter",this._onHover),this.nextHandler.addEventListener("pointerleave",this._onUnHover),this.nextHandler.addEventListener("pointerdown",this._onClick)))}_reset(){this.removeAllChild(!0),this._current=1,this._total=this.attribute.total,this.preHandler=this.nextHandler=this.text=null}_getPageText(e){const{pageFormatter:t}=this.attribute;return t?ee(t)?t(e,this._total):`${t}`.replace("{current}",`${e}`).replace("{total}",`${this._total}`):`${e}/${this._total}`}setTotal(e){e!==this.attribute.total&&(this._total=e,this._current!==1&&this._current<=e?this.setAttributes({total:e,defaultCurrent:this._current}):this.setAttribute("total",e))}}l1.defaultAttributes={handler:Poe,textStyle:{fill:"rgb(51, 51, 51)",fontSize:12}};const rT=10,Ooe=8,Moe=8,xot=8,aw=16,ow=8,$x=12,tB=12;var He;(function(i){i.selected="selected",i.unSelected="unSelected",i.selectedHover="selectedHover",i.unSelectedHover="unSelectedHover",i.focus="focus"})(He||(He={}));var Gs;(function(i){i.legendItemHover="legendItemHover",i.legendItemUnHover="legendItemUnHover",i.legendItemClick="legendItemClick",i.legendItemAttributeUpdate="legendItemAttributeUpdate"})(Gs||(Gs={}));var Ss;(function(i){i.innerView="innerView",i.title="legendTitle",i.item="legendItem",i.itemShape="legendItemShape",i.itemLabel="legendItemLabel",i.itemValue="legendItemValue",i.focus="legendItemFocus"})(Ss||(Ss={}));class e4 extends Zn{constructor(){super(...arguments),this.name="legend",this._title=null}render(){this.removeAllChild(!0);const{interactive:e=!0,title:t,padding:n=0}=this.attribute,s=Cr(n),r=Ae.group({x:s[3],y:s[0],pickable:e,childrenPickable:e});r.name=Ss.innerView,this.add(r),this._innerView=r,t!=null&&t.visible&&this._renderTitle(t),this._renderContent(),this._adjustLayout(),e&&this._bindEvents();const a=this._innerView.AABBBounds;this.attribute.width=a.width()+s[1]+s[3],this.attribute.height=a.height()+s[0]+s[2]}_renderTitle(e){const{text:t="",textStyle:n,padding:s=0,background:r,minWidth:a,maxWidth:o,shape:l}=e,c={x:0,y:0,text:t,textStyle:n,padding:Cr(s),minWidth:a,maxWidth:o};l&&l.visible&&(c.shape=Object.assign({visible:!0},l.style),F(l.space)&&(c.space=l.space)),r&&r.visible&&(c.panel=Object.assign({visible:!0},r.style));const u=new Oa(c);u.name=Ss.title,this._title=u,this._innerView.add(u)}_adjustLayout(){var e;if(this._title){const t=this._innerView.AABBBounds.width(),n=this._title.AABBBounds.width(),s=(e=this.attribute.title)===null||e===void 0?void 0:e.align;s==="center"?this._title.setAttribute("x",(t-n)/2):s==="end"&&this._title.setAttribute("x",t-n)}}}function fO(){on(),$c(),Ku(),Mo()}function t4(){on(),QP()}function Sot(){t4(),Eoe(),wae()}function Cot(){t4(),fO()}function wot(){t4(),fO(),Dx()}var RG=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};const Aot={[He.focus]:{},[He.selected]:{},[He.selectedHover]:{},[He.unSelected]:{},[He.unSelectedHover]:{}};Sot();let Ioe=class Roe extends e4{constructor(e,t){super(t!=null&&t.skipDefault?e:se({},Roe.defaultAttributes,e)),this.name="discreteLegend",this._itemsContainer=null,this._itemHeightByUser=void 0,this._itemHeight=0,this._itemMaxWidth=0,this._onHover=n=>{const s=n.target;if(s&&s.name&&s.name.startsWith(Ss.item)){const r=s.delegate;if(this._lastActiveItem){if(this._lastActiveItem.id===r.id)return;this._unHover(this._lastActiveItem,n)}this._hover(r,n)}else this._lastActiveItem&&(this._unHover(this._lastActiveItem,n),this._lastActiveItem=null)},this._onUnHover=n=>{this._lastActiveItem&&(this._unHover(this._lastActiveItem,n),this._lastActiveItem=null)},this._onClick=n=>{var s,r,a,o;const l=n.target;if(l&&l.name&&l.name.startsWith(Ss.item)){const c=l.delegate,{selectMode:u="multiple"}=this.attribute;if(l.name===Ss.focus||u==="focus"){const h=c.hasState(He.focus);c.toggleState(He.focus),h?(s=this._itemsContainer)===null||s===void 0||s.getChildren().forEach(d=>{this._removeLegendItemState(d,[He.unSelected,He.unSelectedHover,He.focus],n),this._setLegendItemState(d,He.selected,n)}):(this._setLegendItemState(c,He.selected,n),this._removeLegendItemState(c,[He.unSelected,He.unSelectedHover],n),(r=this._itemsContainer)===null||r===void 0||r.getChildren().forEach(d=>{c!==d&&(this._removeLegendItemState(d,[He.selected,He.selectedHover,He.focus],n),this._setLegendItemState(d,He.unSelected,n))}))}else{(a=this._itemsContainer)===null||a===void 0||a.getChildren().forEach(f=>{f.removeState(He.focus)});const{allowAllCanceled:h=!0}=this.attribute,d=c.hasState(He.selected),p=this._getSelectedLegends();if(u==="multiple"){if(h===!1&&d&&p.length===1)return void this._dispatchLegendEvent(Gs.legendItemClick,c,n);d?(this._removeLegendItemState(c,[He.selected,He.selectedHover],n),this._setLegendItemState(c,He.unSelected,n)):(this._setLegendItemState(c,He.selected,n),this._removeLegendItemState(c,[He.unSelected,He.unSelectedHover],n))}else this._setLegendItemState(c,He.selected,n),this._removeLegendItemState(c,[He.unSelected,He.unSelectedHover],n),(o=this._itemsContainer)===null||o===void 0||o.getChildren().forEach(f=>{c!==f&&(this._removeLegendItemState(f,[He.selected,He.selectedHover],n),this._setLegendItemState(f,He.unSelected,n))})}this._dispatchLegendEvent(Gs.legendItemClick,c,n)}}}render(){super.render(),this._lastActiveItem=null}setSelected(e){var t;((t=this._itemsContainer)===null||t===void 0?void 0:t.getChildren()).forEach(n=>{const s=n.data;e.includes(s.label)?(this._setLegendItemState(n,He.selected),this._removeLegendItemState(n,[He.unSelected,He.unSelectedHover])):(this._removeLegendItemState(n,[He.selected,He.selectedHover]),this._setLegendItemState(n,He.unSelected))})}_renderItems(){const{item:e={},maxCol:t=1,maxRow:n=2,maxWidth:s,maxHeight:r,defaultSelected:a,lazyload:o,autoPage:l}=this.attribute,{spaceCol:c=aw,spaceRow:u=ow}=e,h=this._itemsContainer,{items:d,isHorizontal:p,startIndex:f,isScrollbar:g}=this._itemContext,m=g?1:p?n:t;let y,{doWrap:b,maxWidthInCol:x,startX:S,startY:C,pages:w}=this._itemContext,A=0;for(let T=f,E=d.length;T<E&&!(o&&w>this._itemContext.currentPage*m);T++){o&&(this._itemContext.startIndex=T+1),y=d[T],y.id||(y.id=y.label),y.index=T;let P=!0;ie(a)&&(P=a.includes(y.label));const O=this._renderEachItem(y,P,T,d),M=O.attribute.width,R=O.attribute.height;this._itemHeight=Math.max(this._itemHeight,R),x=Math.max(M,x),this._itemMaxWidth=Math.max(M,this._itemMaxWidth),p?(F(s)&&(g&&l?(w=Math.ceil((S+M)/s),b=w>1):S+M>s&&(b=!0,S>0&&(w+=1,S=0,C+=R+u))),S===0&&C===0||O.setAttributes({x:S,y:C}),S+=c+M):(F(r)&&(g&&l?(w=Math.ceil((C+R)/r),b=w>1):r<=R?(w+=1,b=!0,C=0,T>0&&(S+=A+c)):r<C+R&&(w+=1,b=!0,C=0,S+=x+c,x=0)),S===0&&C===0||O.setAttributes({x:S,y:C}),C+=u+R),h.add(O),A=M}return this._itemContext.doWrap=b,this._itemContext.startX=S,this._itemContext.startY=C,this._itemContext.maxWidthInCol=x,this._itemContext.pages=w,this._itemContext.maxPages=m,g&&(this._itemContext.totalPage=w),o||(this._itemContext.startIndex=d.length),this._itemContext}_renderContent(){const{item:e={},items:t,reversed:n,maxWidth:s}=this.attribute;if(e.visible===!1||Te(t))return;let r=t;n&&(r=t==null?void 0:t.reverse());const a=Ae.group({x:0,y:0});this._itemsContainer=a;const{layout:o,autoPage:l}=this.attribute,c=o==="horizontal",{maxWidth:u,width:h,height:d}=e,p=[];F(u)&&p.push(u),F(h)&&p.push(h),p.length&&(F(s)&&p.push(s),this._itemWidthByUser=Mn(p)),F(d)&&(this._itemHeightByUser=d);const f=this.attribute.pager;this._itemContext={currentPage:f&&f.defaultCurrent||1,doWrap:!1,maxWidthInCol:0,maxPages:1,pages:1,startX:0,startY:0,startIndex:0,items:r,isHorizontal:c,totalPage:1/0,isScrollbar:f&&f.type==="scrollbar"},this._itemContext=this._renderItems();let g=!1;this._itemContext.doWrap&&l&&this._itemContext.pages>this._itemContext.maxPages&&(g=this._renderPagerComponent()),g||(a.setAttribute("y",this._title?this._title.AABBBounds.height()+et(this.attribute,"title.space",8):0),this._innerView.add(a))}_bindEvents(){if(this.attribute.disableTriggerEvent||!this._itemsContainer)return;const{hover:e=!0,select:t=!0}=this.attribute;e&&(this._itemsContainer.addEventListener("pointermove",this._onHover),this._itemsContainer.addEventListener("pointerleave",this._onUnHover)),t&&this._itemsContainer.addEventListener("pointerdown",this._onClick)}_autoEllipsis(e,t,n,s){var r,a;const{label:o,value:l}=this.attribute.item,c=s.AABBBounds,u=n.AABBBounds,h=c.width(),d=u.width();let p=!1;e==="labelFirst"?d>t?p=!0:s.setAttribute("maxLineWidth",t-d):e==="valueFirst"?h>t?p=!0:n.setAttribute("maxLineWidth",t-h):h+d>t&&(p=!0),p&&(s.setAttribute("maxLineWidth",Math.max(t*((r=o.widthRatio)!==null&&r!==void 0?r:.5),t-d)),n.setAttribute("maxLineWidth",Math.max(t*((a=l.widthRatio)!==null&&a!==void 0?a:.5),t-h)))}_renderEachItem(e,t,n,s){var r,a;const{id:o,label:l,value:c,shape:u}=e,{padding:h=0,focus:d,focusIconStyle:p,align:f,autoEllipsisStrategy:g}=this.attribute.item,{shape:m,label:y,value:b,background:x}=this.attribute.item,S=this._handleStyle(m,e,t,n,s),C=this._handleStyle(y,e,t,n,s),w=this._handleStyle(b,e,t,n,s),A=this._handleStyle(x,e,t,n,s),T=Cr(h);let E;x.visible===!1?(E=Ae.group({x:0,y:0,cursor:(r=A.style)===null||r===void 0?void 0:r.cursor}),this._appendDataToShape(E,Ss.item,e,E)):(E=Ae.group(Object.assign({x:0,y:0},A.style)),this._appendDataToShape(E,Ss.item,e,E,A.state)),E.id=`${o??l}-${n}`,E.addState(t?He.selected:He.unSelected);const P=Ae.group({x:0,y:0,pickable:!1});E.add(P);let O,M=0,R=0,j=0;if(m&&m.visible!==!1){const he=et(S,"style.size",rT);R=ie(he)?he[0]||0:he,j=et(m,"space",Ooe);const le=Ae.symbol(Object.assign(Object.assign({x:0,y:0,symbolType:"circle",strokeBoundsBuffer:0},u),S.style));Object.keys(S.state||{}).forEach(de=>{const te=S.state[de].fill||S.state[de].stroke;u.fill&&B(S.state[de].fill)&&te&&(S.state[de].fill=te),u.stroke&&B(S.state[de].stroke)&&te&&(S.state[de].stroke=te)}),this._appendDataToShape(le,Ss.itemShape,e,E,S.state),le.addState(t?He.selected:He.unSelected),P.add(le)}let I=0;if(d){const he=et(p,"size",rT);O=Ae.symbol(Object.assign(Object.assign({x:0,y:-he/2-1,strokeBoundsBuffer:0,boundsPadding:T},p),{visible:!0,pickMode:"imprecise"})),this._appendDataToShape(O,Ss.focus,e,E),I=he}const D=y.formatMethod?y.formatMethod(l,e,n):l,z=Object.assign(Object.assign({x:R/2+j,y:0,textAlign:"start",textBaseline:"middle",lineHeight:(a=C.style)===null||a===void 0?void 0:a.fontSize},C.style),{text:D,_originText:y.formatMethod?l:void 0}),$=i1(z);this._appendDataToShape($,Ss.itemLabel,e,E,C.state),$.addState(t?He.selected:He.unSelected),P.add($);const V=et(y,"space",Moe);if(F(c)){const he=et(b,"space",d?xot:0),le=b.formatMethod?b.formatMethod(c,e,n):c,de=Object.assign(Object.assign({x:0,y:0,textAlign:"start",textBaseline:"middle",lineHeight:w.style.fontSize},w.style),{text:le,_originText:b.formatMethod?c:void 0}),te=i1(de);if(this._appendDataToShape(te,Ss.itemValue,e,E,w.state),te.addState(t?He.selected:He.unSelected),this._itemWidthByUser){const me=this._itemWidthByUser-T[1]-T[3]-R-j-V-I-he;this._autoEllipsis(g,me,$,te),b.alignRight?te.setAttributes({textAlign:"right",x:this._itemWidthByUser-R/2-T[1]-T[3]-I-he}):te.setAttribute("x",V+($.AABBBounds.empty()?0:$.AABBBounds.x2))}else te.setAttribute("x",V+($.AABBBounds.empty()?0:$.AABBBounds.x2));M=he+(te.AABBBounds.empty()?0:te.AABBBounds.x2),P.add(te)}else this._itemWidthByUser&&$.setAttribute("maxLineWidth",this._itemWidthByUser-T[1]-T[3]-R-j-I),M=V+($.AABBBounds.empty()?0:$.AABBBounds.x2);O&&(O.setAttribute("x",M),P.add(O));const L=P.AABBBounds,Y=L.width();if(f==="right"){const he=L.x2,le=L.x1;P.forEachChildren((de,te)=>{de.type!=="symbol"&&de.attribute.textAlign!=="right"||de===O?de.setAttribute("x",le+he-de.attribute.x-de.AABBBounds.width()):de.type!=="symbol"?de.setAttributes({x:le+he-de.attribute.x,textAlign:"left"}):de.setAttribute("x",le+he-de.attribute.x)})}const ae=L.height(),W=F(this.attribute.item.width)?this.attribute.item.width:Y+T[1]+T[3],ce=this._itemHeightByUser||ae+T[0]+T[2];return E.attribute.width=W,E.attribute.height=ce,O&&O.setAttribute("visible",!1),P.translateTo(-L.x1+T[3],-L.y1+T[0]),E}_createPager(e){var t,n;const{disableTriggerEvent:s,maxRow:r}=this.attribute,a=o=>o<=99?99:o<=999?999:9999;return this._itemContext.isHorizontal?new l1(Object.assign(Object.assign({layout:r===1?"horizontal":"vertical",total:a(this._itemContext.pages)},se({handler:{preShape:"triangleUp",nextShape:"triangleDown"}},e)),{defaultCurrent:(t=this.attribute.pager)===null||t===void 0?void 0:t.defaultCurrent,disableTriggerEvent:s})):new l1(Object.assign({layout:"horizontal",total:a(this._itemContext.pages),disableTriggerEvent:s,defaultCurrent:(n=this.attribute.pager)===null||n===void 0?void 0:n.defaultCurrent},e))}_createScrollbar(e,t){const{disableTriggerEvent:n}=this.attribute;return this._itemContext.isHorizontal?new Jk(Object.assign(Object.assign({direction:"horizontal",disableTriggerEvent:n,range:[0,.5],height:12},e),{width:t})):new Jk(Object.assign(Object.assign({direction:"vertical",width:12,range:[0,.5]},e),{height:t,disableTriggerEvent:n}))}_updatePositionOfPager(e,t,n){const{pager:s}=this.attribute,{totalPage:r,isHorizontal:a}=this._itemContext,o=s&&s.position||"middle";if(this._pagerComponent.setTotal(r),a){let l;l=o==="start"?e:o==="end"?e+n-this._pagerComponent.AABBBounds.height()/2:e+n/2-this._pagerComponent.AABBBounds.height()/2,this._pagerComponent.setAttributes({x:t-this._pagerComponent.AABBBounds.width(),y:l})}else{let l;l=o==="start"?0:o==="end"?t-this._pagerComponent.AABBBounds.width():(t-this._pagerComponent.AABBBounds.width())/2,this._pagerComponent.setAttributes({x:l,y:n-this._pagerComponent.AABBBounds.height()})}}_updatePositionOfScrollbar(e,t,n){const{currentPage:s,totalPage:r,isHorizontal:a}=this._itemContext;this._pagerComponent.setScrollRange([(s-1)/r,s/r]),a?this._pagerComponent.setAttributes({x:0,y:n+t}):this._pagerComponent.setAttributes({x:e,y:n})}_bindEventsOfPager(e,t){const n=this.attribute.pager||{},{animation:s=!0,animationDuration:r=450,animationEasing:a="quadIn"}=n,o=this._itemContext.isScrollbar?u=>{const{value:h}=u.detail;let d;return h[0]===0?d=1:h[1]===1?d=this._itemContext.totalPage:(d=h[0]*this._itemContext.totalPage,n.scrollByPosition?d+=1:d=Math.floor(d)+1),d}:u=>u.detail.current,l=u=>{const h=this._pagerComponent,d=h.getScrollRange(),{direction:p}=h.attribute,{width:f,height:g}=h.getSliderRenderBounds(),m=p==="vertical"?u.deltaY/g:u.deltaX/f;h.setScrollRange([d[0]+m,d[1]+m],!0)},c=u=>{const h=o(u);if(h!==this._itemContext.currentPage){if(this._itemContext.currentPage=h,this._itemContext&&this._itemContext.startIndex<this._itemContext.items.length){this._renderItems();const d=Math.ceil(this._itemContext.pages/this._itemContext.maxPages);this._itemContext.totalPage=d,this._pagerComponent.setScrollRange([(h-1)/d,h/d])}s?this._itemsContainer.animate().to({[t]:-(h-1)*e},r,a):this._itemsContainer.setAttribute(t,-(h-1)*e)}};this._itemContext.isScrollbar?(this._pagerComponent.addEventListener("scrollDrag",c),this._pagerComponent.addEventListener("scrollUp",c),this.attribute.pager.roamScroll&&(this.addEventListener("wheel",h=>h.nativeEvent.preventDefault()),this.addEventListener("wheel",Hu(l,50)))):(this._pagerComponent.addEventListener("toPrev",c),this._pagerComponent.addEventListener("toNext",c))}_renderPager(){const e=this._title?this._title.AABBBounds.height()+et(this.attribute,"title.space",8):0,{maxWidth:t,maxHeight:n,maxCol:s=1,maxRow:r=2,item:a={},pager:o={}}=this.attribute,{spaceCol:l=aw,spaceRow:c=ow}=a,u=this._itemsContainer,{space:h=tB,defaultCurrent:d=1}=o,p=RG(o,["space","defaultCurrent"]),{isHorizontal:f}=this._itemContext;let g,m=0,y=0,b=0,x=0,S=0,C=0,w=1;if(f){if(y=(r-1)*c+this._itemHeight*r,m=t,g=this._createPager(p),this._pagerComponent=g,this._innerView.add(g),b=t-g.AABBBounds.width()-h,b<=0)return this._innerView.removeChild(g),!1;u.getChildren().forEach((E,P)=>{const{width:O,height:M}=E.attribute;b<S+O&&(S=0,C+=M+c,w+=1),P>0&&E.setAttributes({x:S,y:C}),S+=l+O}),this._itemContext.startX=S,this._itemContext.startY=C,this._itemContext.pages=w;const T=Math.ceil(w/r);this._itemContext.totalPage=T,this._updatePositionOfPager(e,m,y)}else{if(m=this._itemMaxWidth*s+(s-1)*l,y=n,b=m,g=this._createPager(p),this._pagerComponent=g,this._innerView.add(g),x=n-g.AABBBounds.height()-h-e,x<=0)return this._innerView.removeChild(g),!1;u.getChildren().forEach((E,P)=>{const{height:O}=E.attribute;x<C+O&&(C=0,S+=this._itemMaxWidth+l,w+=1),P>0&&E.setAttributes({x:S,y:C}),C+=c+O});const T=Math.ceil(w/s);this._itemContext.totalPage=T,this._updatePositionOfPager(e,m,y)}d>1&&(f?u.setAttribute("y",-(d-1)*(y+c)):u.setAttribute("x",-(d-1)*(m+l)));const A=Ae.group({x:0,y:e,width:f?b:m,height:f?y:x,clip:!0,pickable:!1});return A.add(u),this._innerView.add(A),this._bindEventsOfPager(f?y+c:m+l,f?"y":"x"),!0}_renderScrollbar(){const e=this._title?this._title.AABBBounds.height()+et(this.attribute,"title.space",8):0,{maxWidth:t,maxHeight:n,item:s={},pager:r={}}=this.attribute,{spaceCol:a=aw,spaceRow:o=ow}=s,l=this._itemsContainer,{space:c=tB,defaultCurrent:u=1}=r,h=RG(r,["space","defaultCurrent"]),{isHorizontal:d}=this._itemContext;let p,f=0,g=0,m=0,y=0,b=1;if(d)f=t,g=t,m=this._itemHeight,p=this._createScrollbar(h,f),this._pagerComponent=p,this._innerView.add(p),this._updatePositionOfScrollbar(g,m,e);else{if(f=n,p=this._createScrollbar(h,f),this._pagerComponent=p,this._innerView.add(p),m=n-e,g=this._itemMaxWidth,m<=0)return this._innerView.removeChild(p),!1;const S=l.getChildren(),C=S.map(w=>w.attribute.height);if(C.length===1||C.every(w=>w===C[0])){const w=C[0],A=m,T=Math.floor(A/(o+w));m=T*(o+w),b=Math.ceil(S.length/T)}else S.forEach((w,A)=>{const{height:T}=w.attribute,E=b,P=y;b=Math.floor((y+T)/m)+1,y+=o+T,E!==b&&A===l.getChildren().length-1&&y-m>=1/3*T&&(m=P+T,b-=1)});this._itemContext.totalPage=b,this._itemContext.pages=b,this._updatePositionOfScrollbar(g,m,e)}u>1&&(d?l.setAttribute("x",-(u-1)*(g+a)):l.setAttribute("y",-(u-1)*(m+o)));const x=Ae.group({x:0,y:e,width:g,height:m,clip:!0,pickable:!1});return x.add(l),this._innerView.add(x),this._bindEventsOfPager(d?g:m,d?"x":"y"),!0}_renderPagerComponent(){return this._itemContext.isScrollbar?this._renderScrollbar():this._renderPager(),!0}_hover(e,t){this._lastActiveItem=e,e.hasState(He.selected)?this._setLegendItemState(e,He.selectedHover,t):this._setLegendItemState(e,He.unSelectedHover,t);const n=e.getChildren()[0].find(s=>s.name===Ss.focus,!1);n&&n.setAttribute("visible",!0),this._dispatchLegendEvent(Gs.legendItemHover,e,t)}_unHover(e,t){let n=!1;(e.hasState(He.unSelectedHover)||e.hasState(He.selectedHover))&&(n=!0),e.removeState(He.unSelectedHover),e.removeState(He.selectedHover),e.getChildren()[0].getChildren().forEach(r=>{n||!r.hasState(He.unSelectedHover)&&!r.hasState(He.selectedHover)||(n=!0),r.removeState(He.unSelectedHover),r.removeState(He.selectedHover)});const s=e.getChildren()[0].find(r=>r.name===Ss.focus,!1);s&&s.setAttribute("visible",!1),n&&this._dispatchLegendEvent(Gs.legendItemAttributeUpdate,e,t),this._dispatchLegendEvent(Gs.legendItemUnHover,e,t)}_setLegendItemState(e,t,n){let s=!1;e.hasState(t)||(s=!0),e.addState(t,!0),e.getChildren()[0].getChildren().forEach(r=>{r.name!==Ss.focus&&(s||r.hasState(t)||(s=!0),r.addState(t,!0))}),s&&this._dispatchLegendEvent(Gs.legendItemAttributeUpdate,e,n)}_removeLegendItemState(e,t,n){let s=!1;t.forEach(r=>{!s&&e.hasState(r)&&(s=!0),e.removeState(r)}),e.getChildren()[0].getChildren().forEach(r=>{r.name!==Ss.focus&&t.forEach(a=>{!s&&r.hasState(a)&&(s=!0),r.removeState(a)})}),s&&this._dispatchLegendEvent(Gs.legendItemAttributeUpdate,e,n)}_getSelectedLegends(){var e;const t=[];return(e=this._itemsContainer)===null||e===void 0||e.getChildren().forEach(n=>{n.hasState(He.selected)&&t.push(n.data)}),t}_appendDataToShape(e,t,n,s,r={}){e.name=t,e.data=n,e.delegate=s,e.states=se({},Aot,r)}_dispatchLegendEvent(e,t,n){const s=this._getSelectedLegends();s.sort((a,o)=>a.index-o.index);const r=s.map(a=>a.label);this._dispatchEvent(e,{item:t,data:t.data,selected:t.hasState(He.selected),currentSelectedItems:s,currentSelected:r,event:n})}_handleStyle(e,t,n,s,r){const a={};return e.style&&(ee(e.style)?a.style=e.style(t,n,s,r):a.style=e.style),e.state&&(a.state={},Object.keys(e.state).forEach(o=>{e.state[o]&&(ee(e.state[o])?a.state[o]=e.state[o](t,n,s,r):a.state[o]=e.state[o])})),a}release(){super.release(),this.removeAllEventListeners()}};Ioe.defaultAttributes={layout:"horizontal",title:{align:"start",space:$x,textStyle:{fontSize:12,fontWeight:"bold",fill:"#2C3542"}},item:{spaceCol:aw,spaceRow:ow,shape:{space:Ooe,style:{size:rT,cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{opacity:.5}}},label:{space:Moe,style:{fontSize:12,fill:"#2C3542",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},value:{alignRight:!1,style:{fontSize:12,fill:"#ccc",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},background:{style:{cursor:"pointer"}},focus:!1,focusIconStyle:{size:rT,symbolType:"M8 1C11.866 1 15 4.13401 15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1ZM8.75044 2.55077L8.75 3.75H7.25L7.25006 2.5507C4.81247 2.88304 2.88304 4.81247 2.5507 7.25006L3.75 7.25V8.75L2.55077 8.75044C2.8833 11.1878 4.81264 13.117 7.25006 13.4493L7.25 12.25H8.75L8.75044 13.4492C11.1876 13.1167 13.1167 11.1876 13.4492 8.75044L12.25 8.75V7.25L13.4493 7.25006C13.117 4.81264 11.1878 2.8833 8.75044 2.55077ZM8 5.5C9.38071 5.5 10.5 6.61929 10.5 8C10.5 9.38071 9.38071 10.5 8 10.5C6.61929 10.5 5.5 9.38071 5.5 8C5.5 6.61929 6.61929 5.5 8 5.5ZM8 7C7.44772 7 7 7.44772 7 8C7 8.55228 7.44772 9 8 9C8.55228 9 9 8.55228 9 8C9 7.44772 8.55228 7 8 7Z",fill:"#333",cursor:"pointer"}},autoPage:!0,pager:{space:tB,handler:{style:{size:10},space:4}},hover:!0,select:!0,selectMode:"multiple",allowAllCanceled:!0};var xs;(function(i){i.innerView="innerView",i.railContainer="sliderRailContainer",i.rail="sliderRail",i.startText="sliderStartText",i.endText="sliderEndText",i.startHandler="sliderStartHandler",i.startHandlerText="startHandlerText",i.endHandler="sliderEndHandler",i.endHandlerText="sliderEndHandlerText",i.track="sliderTrack",i.trackContainer="sliderTrackContainer"})(xs||(xs={}));function FI(i){return ie(i)?i:[i,i]}function yC(i){return i?"ew-resize":"ns-resize"}fO();class M0 extends Zn{get track(){return this._track}get currentValue(){return this._currentValue}get startHandler(){return this._startHandler}get endHandler(){return this._endHandler}get tooltipShape(){return this._tooltipShape}constructor(e,t){super(t!=null&&t.skipDefault?e:se({},M0.defaultAttributes,e)),this.name="slider",this._isHorizontal=!0,this._startHandler=null,this._endHandler=null,this._startHandlerText=null,this._endHandlerText=null,this._currentHandler=null,this._currentValue={},this._onTooltipShow=n=>{this._isChanging||this._tooltipState&&this._tooltipState.isActive||(this._tooltipState?this._tooltipState.isActive=!0:this._tooltipState={isActive:!0},this._onTooltipUpdate(n),this._dispatchTooltipEvent("sliderTooltipShow"))},this._onTooltipUpdate=n=>{if(this._isChanging||!this._tooltipState||!this._tooltipState.isActive)return;const s=this._isHorizontal?this._rail.globalAABBBounds.width():this._rail.globalAABBBounds.height(),r=zi(this._isHorizontal?(n.viewX-this._rail.globalAABBBounds.x1)/s:(n.viewY-this._rail.globalAABBBounds.y1)/s,0,1);r!==this._tooltipState.pos&&(this._tooltipState.pos=r,this._tooltipState.value=this.calculateValueByPos(r*s),this._updateTooltip(),this._dispatchTooltipEvent("sliderTooltipUpdate"))},this._onTooltipHide=()=>{const{tooltip:n}=this.attribute;n&&n.alwaysShow||(this._tooltipState=null,this._tooltipShape&&this._tooltipShape.setAttribute("visible",!1),this._tooltipText&&this._tooltipText.setAttribute("visible",!1),this._dispatchTooltipEvent("sliderTooltipHide"))},this._onHandlerPointerdown=n=>{n.stopPropagation(),this._isChanging=!0;const{x:s,y:r}=this.stage.eventPointTransform(n);this._currentHandler=n.target,this._prePos=this._isHorizontal?s:r,st.env==="browser"?(st.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),st.addEventListener("pointerup",this._onHandlerPointerUp)):(this.stage.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),this.stage.addEventListener("pointerup",this._onHandlerPointerUp),this.stage.addEventListener("pointerupoutside",this._onHandlerPointerUp))},this._onHandlerPointerMove=n=>{var s,r;n.stopPropagation(),this._isChanging=!0;const{railWidth:a,railHeight:o,min:l,max:c}=this.attribute;if(c===l)return;const{x:u,y:h}=this.stage.eventPointTransform(n);let d,p,f,g=0;this._isHorizontal?(d=u,g=d-this._prePos,p=(r=this._currentHandler)===null||r===void 0?void 0:r.attribute.x,f=a):(d=h,g=d-this._prePos,p=(s=this._currentHandler)===null||s===void 0?void 0:s.attribute.y,f=o);const m=zi(p+g,0,f),y=this.calculateValueByPos(m);this._currentHandler.type==="text"?this._updateHandlerText(this._currentHandler,m,y):this._updateHandler(this._currentHandler,m,y),this._updateTrack(),this._prePos=d,this._dispatchChangeEvent()},this._onHandlerPointerUp=n=>{n.preventDefault(),this._isChanging=!1,this._currentHandler=null,st.env==="browser"?(st.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),st.removeEventListener("pointerup",this._onHandlerPointerUp)):(this.stage.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),this.stage.removeEventListener("pointerup",this._onHandlerPointerUp),this.stage.removeEventListener("pointerupoutside",this._onHandlerPointerUp))},this._onTrackPointerdown=n=>{n.stopPropagation(),this._isChanging=!0;const{x:s,y:r}=this.stage.eventPointTransform(n);this._prePos=this._isHorizontal?s:r,st.env==="browser"?(st.addEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),st.addEventListener("pointerup",this._onTrackPointerUp)):(this.stage.addEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),this.stage.addEventListener("pointerup",this._onTrackPointerUp),this.stage.addEventListener("pointerupoutside",this._onTrackPointerUp))},this._onTrackPointerMove=n=>{n.stopPropagation(),this._isChanging=!0;const{railWidth:s,railHeight:r,min:a,max:o,inverse:l}=this.attribute;if(o===a)return;const{startHandler:c,endHandler:u}=this._getHandlers();let h,d,p;const{x:f,y:g}=this.stage.eventPointTransform(n);this._isHorizontal?(h=f,d=this._track.attribute.width,p=s):(h=g,d=this._track.attribute.height,p=r);const m=h-this._prePos;if(c){const y=this._isHorizontal?c.attribute.x:c.attribute.y,b=l?zi(y+m,d,p):zi(y+m,0,p-d),x=this.calculateValueByPos(b);this._updateHandler(c,b,x)}if(u){const y=this._isHorizontal?u.attribute.x:u.attribute.y,b=l?zi(y+m,0,p-d):zi(y+m,d,p),x=this.calculateValueByPos(b),S=c==null?void 0:c.attribute;this._updateHandler(u,b,x),this._track.setAttributes(this._isHorizontal?{x:Math.min(S.x,u.attribute.x),width:Math.abs(S.x-u.attribute.x)}:{y:Math.min(S.y,u.attribute.y),height:Math.abs(S.y-u.attribute.y)})}this._prePos=h,this._dispatchChangeEvent()},this._onTrackPointerUp=n=>{n.preventDefault(),this._isChanging=!1,st.env==="browser"?(st.removeEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),st.removeEventListener("pointerup",this._onTrackPointerUp)):(this.stage.removeEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),this.stage.removeEventListener("pointerup",this._onTrackPointerUp),this.stage.removeEventListener("pointerupoutside",this._onTrackPointerUp))},this._onRailPointerDown=n=>{n.stopPropagation(),this._isChanging=!0;const{railWidth:s,railHeight:r,min:a,max:o}=this.attribute;if(o===a)return;const l=this._startHandler,c=this._endHandler;let u,h,d;this._isHorizontal?(u=n.viewX-this._rail.globalAABBBounds.x1,h=l==null?void 0:l.attribute.x,d=c==null?void 0:c.attribute.x):(u=n.viewY-this._rail.globalAABBBounds.y1,h=l==null?void 0:l.attribute.y,d=c==null?void 0:c.attribute.y);const p=this.calculateValueByPos(u);if(F(d)){const f=Math.abs(u-h)>Math.abs(u-d)?c:l;this._updateHandler(f,u,p)}else this._updateHandler(l,u,p);this._updateTrack(),this._dispatchChangeEvent()}}calculatePosByValue(e,t){const{layout:n,railWidth:s,railHeight:r,min:a,max:o,inverse:l}=this.attribute;let c=0;return c=a===o?t==="start"?0:t==="end"?1:0:(e-a)/(o-a),(l?1-c:c)*(n==="vertical"?r:s)}calculateValueByPos(e){const{layout:t,railWidth:n,railHeight:s,min:r,max:a,inverse:o}=this.attribute,l=t==="vertical"?s:n;return r+(a-r)*(o?1-e/l:e/l)}setValue(e){const{min:t,max:n}=this.attribute;if(n===t)return;const[s,r]=q(e),{startHandler:a,endHandler:o}=this._getHandlers();a&&this._updateHandler(a,this.calculatePosByValue(s),s),o&&this._updateHandler(o,this.calculatePosByValue(r),r),this._updateTrack()}render(){var e,t;this.removeAllChild(!0);const{layout:n="horizontal",railWidth:s,railHeight:r,startText:a,endText:o,min:l,max:c,showHandler:u=!0,showTooltip:h}=this.attribute;let{value:d}=this.attribute;B(d)&&(d=[l,c]),this._currentValue={startValue:FI(d)[0],endValue:FI(d)[1]};const p=n==="horizontal";this._isHorizontal=p;const f=Ae.group({x:0,y:0});f.name=xs.innerView,this.add(f),this._innerView=f;let g,m=0;if(a&&a.visible){g=Ae.text(Object.assign({x:p?0:s/2,y:p?r/2:0,textAlign:p?"start":"center",textBaseline:p?"middle":"top",text:a.text,lineHeight:(e=a.style)===null||e===void 0?void 0:e.fontSize},a.style)),g.name=xs.startText,f.add(g);const S=F(a.space)?a.space:0;m+=(p?g.AABBBounds.width():g.AABBBounds.height())+S}const y=Ae.group({x:p?m:0,y:p?0:m});f.add(y);const b=Ae.group({x:0,y:0});let x;if(b.name=xs.railContainer,this._railContainer=b,y.add(b),this._mainContainer=y,this._renderRail(b),m+=p?s:r,o&&o.visible){const S=F(o.space)?o.space:0;x=Ae.text(Object.assign({x:p?m+S:s/2,y:p?r/2:m+S,textAlign:p?"start":"center",textBaseline:p?"middle":"top",text:o.text,lineHeight:(t=o.style)===null||t===void 0?void 0:t.fontSize},o.style)),x.name=xs.endText,f.add(x)}this._renderTrack(b),u&&(this._renderHandlers(y),this._bindEvents()),h&&(this._renderTooltip(),this._bindTooltipEvents())}_renderRail(e){const{railWidth:t,railHeight:n,railStyle:s,slidable:r}=this.attribute;let a="default";r!==!1&&(a="pointer");const o=Ae.rect(Object.assign({x:0,y:0,width:t,height:n,cursor:a},s));return o.name=xs.rail,e.add(o),this._rail=o,o}_renderHandlers(e){const{range:t,min:n,max:s,handlerSize:r=14,handlerStyle:a,handlerText:o,railHeight:l,railWidth:c,slidable:u}=this.attribute;let{value:h}=this.attribute;B(h)&&(h=[n,s]);const d=o&&o.visible,p=this._isHorizontal,[f,g]=FI(h),m=this.calculatePosByValue(f,t?"start":"end"),y=this._renderHandler(Object.assign({x:p?m:c/2,y:p?l/2:m,size:r,strokeBoundsBuffer:0,cursor:u===!1?"default":yC(p)},a));if(y.name=xs.startHandler,this._startHandler=y,e.add(y),this._currentValue.startPos=m,d){const b=this._renderHandlerText(f,t?"start":"end");b.name=xs.startHandlerText,e.add(b),this._startHandlerText=b}if(t){const b=this.calculatePosByValue(g,"end"),x=this._renderHandler(Object.assign({x:p?b:c/2,y:p?l/2:b,size:r,strokeBoundsBuffer:0,cursor:u===!1?"default":yC(p)},a));if(x.name=xs.endHandler,this._endHandler=x,e.add(x),this._currentValue.endPos=b,d){const S=this._renderHandlerText(g,"end");S.name=xs.endHandlerText,e.add(S),this._endHandlerText=S}}}_renderTrack(e){const{range:t,min:n,max:s,railHeight:r,railWidth:a,trackStyle:o,railStyle:l,slidable:c,value:u}=this.attribute;let h,d;if(B(u))t?(h=n,d=s):h=d=n;else if(t){const S=hp(u,n,s);h=S[0],d=S[1]}else h=n,d=zi(u,n,s);const p=this._isHorizontal;t||(h=n);const f=Ae.group({x:0,y:0,width:a,height:r,cornerRadius:l==null?void 0:l.cornerRadius,clip:!0,pickable:!1});f.name=xs.trackContainer;const g=Ke(t)&&t.draggableTrack===!0;let m;m=c===!1?"default":t===!1||g===!1?"pointer":yC(p);const y=this.calculatePosByValue(h,"start"),b=this.calculatePosByValue(d,t?"end":"start"),x=Ae.rect(Object.assign({x:p?Math.min(y,b):0,y:p?0:Math.min(y,b),width:p?Math.abs(b-y):a,height:p?r:Math.abs(b-y),cursor:m},o));x.name=xs.track,this._track=x,f.add(x),e.add(f)}_renderHandler(e){return Ae.symbol(e)}_renderHandlerText(e,t){var n,s,r;const{align:a,handlerSize:o=14,handlerText:l={},railHeight:c,railWidth:u,slidable:h}=this.attribute,d=this._isHorizontal,p=this.calculatePosByValue(e,t),f=(n=l.space)!==null&&n!==void 0?n:4,g={text:l.formatter?l.formatter(e):e.toFixed((s=l.precision)!==null&&s!==void 0?s:0),lineHeight:(r=l.style)===null||r===void 0?void 0:r.lineHeight,cursor:h===!1?"default":yC(d)};return d?a==="top"?(g.textBaseline="bottom",g.textAlign="center",g.x=p,g.y=(c-o)/2-f):(g.textBaseline="top",g.textAlign="center",g.x=p,g.y=(c+o)/2+f):a==="left"?(g.textBaseline="middle",g.textAlign="end",g.x=(u-o)/2-f,g.y=p):(g.textBaseline="middle",g.textAlign="start",g.x=(u+o)/2+f,g.y=p),Ae.text(Object.assign(Object.assign({},g),l.style))}_renderTooltip(){var e;const{tooltip:t,railHeight:n,railWidth:s,align:r}=this.attribute;t&&t.alwaysShow?this._tooltipState={value:this._currentValue.startValue,pos:this._currentValue.startPos}:this._tooltipState=null;const a=this._isHorizontal?0:s/2,o=this._isHorizontal?n/2:0;if(t&&t.shape){const d=Ae.symbol(Object.assign({pickable:!1,visible:!!this._tooltipState,x:a,y:o,symbolType:"circle"},t.shapeStyle));this._tooltipShape=d,this._mainContainer.add(d)}const l=t&&t.text||{},c=(e=l.space)!==null&&e!==void 0?e:6,u={pickable:!1,visible:!!this._tooltipState,text:""};this._isHorizontal?(u.x=a,u.y=r==="top"?o-n/2-c:o+n/2+c,u.textAlign="center",u.textBaseline=r==="top"?"bottom":"top"):(u.y=o,u.x=r==="left"?a-s/2-c:o+s/2+c,u.textAlign=r==="left"?"end":"start",u.textBaseline="middle");const h=Ae.text(Object.assign(Object.assign({},u),l.style));this._mainContainer.add(h),this._tooltipText=h,this._tooltipState&&this._updateTooltip()}_updateTooltip(){var e,t;if(!this._tooltipShape&&!this._tooltipText||!this._tooltipState)return;const{railWidth:n,railHeight:s}=this.attribute,r=this._isHorizontal?n:s,a=this._tooltipState.pos*r,o=this._isHorizontal?"x":"y";this._tooltipShape&&this._tooltipShape.setAttributes({visible:!0,[o]:a});const{align:l}=this.attribute;if(this._tooltipText){const c=this.attribute.tooltip&&this.attribute.tooltip.text||{};this._tooltipText.setAttributes({visible:!0,[o]:a,text:c.formatter?c.formatter(this._tooltipState.value):this._isHorizontal||l!=="left"?` ${this._tooltipState.value.toFixed((t=c.precision)!==null&&t!==void 0?t:0)}`:`${this._tooltipState.value.toFixed((e=c.precision)!==null&&e!==void 0?e:0)} `})}}_bindEvents(){if(this.attribute.disableTriggerEvent)return;const{slidable:e,range:t}=this.attribute;e&&(this._startHandler&&this._startHandler.addEventListener("pointerdown",this._onHandlerPointerdown),this._startHandlerText&&this._startHandlerText.addEventListener("pointerdown",this._onHandlerPointerdown),this._endHandler&&this._endHandler.addEventListener("pointerdown",this._onHandlerPointerdown),this._endHandlerText&&this._endHandlerText.addEventListener("pointerdown",this._onHandlerPointerdown),Ke(t)&&t.draggableTrack&&this._track.addEventListener("pointerdown",this._onTrackPointerdown),this._railContainer.addEventListener("pointerdown",this._onRailPointerDown))}_bindTooltipEvents(){this.attribute.disableTriggerEvent||(this._mainContainer.addEventListener("pointerenter",this._onTooltipShow),this._mainContainer.addEventListener("pointermove",this._onTooltipUpdate),this._mainContainer.addEventListener("pointerleave",this._onTooltipHide))}_updateTrack(){const{inverse:e,railWidth:t,railHeight:n}=this.attribute,s=this._startHandler,r=this._endHandler;if(this._isHorizontal){const a=s==null?void 0:s.attribute.x;if(r){const o=r==null?void 0:r.attribute.x;this._track.setAttributes({x:Math.min(a,o),width:Math.abs(a-o)})}else e?this._track.setAttributes({x:a,width:t-a}):this._track.setAttributes({width:a})}else{const a=s==null?void 0:s.attribute.y;if(r){const o=r==null?void 0:r.attribute.y;this._track.setAttributes({y:Math.min(a,o),height:Math.abs(a-o)})}else e?this._track.setAttributes({y:a,height:n-a}):this._track.setAttributes({height:a})}}_updateHandler(e,t,n){var s;const r=this._isHorizontal;e.setAttribute(r?"x":"y",t);const a=e.name===xs.startHandler?this._startHandlerText:this._endHandlerText;if(a){const{handlerText:o={}}=this.attribute;a.setAttributes({text:o.formatter?o.formatter(n):n.toFixed((s=o.precision)!==null&&s!==void 0?s:0),[r?"x":"y"]:t})}e.name===xs.startHandler?(this._currentValue.startValue=n,this._currentValue.startPos=t):(this._currentValue.endValue=n,this._currentValue.endPos=t)}_updateHandlerText(e,t,n){var s;const r=this._isHorizontal,{handlerText:a={}}=this.attribute;e.setAttributes({[r?"x":"y"]:t,text:a.formatter?a.formatter(n):n.toFixed((s=a.precision)!==null&&s!==void 0?s:0)});const o=e.name===xs.startHandlerText?this._startHandler:this._endHandler;o&&o.setAttributes({[r?"x":"y"]:t}),e.name===xs.startHandlerText?(this._currentValue.startValue=n,this._currentValue.startPos=t):(this._currentValue.endValue=n,this._currentValue.endPos=t)}_dispatchChangeEvent(){const e=!!this.attribute.range,t=this._currentValue;this._dispatchEvent("change",{value:e?[Math.min(t.endValue,t.startValue),Math.max(t.endValue,t.startValue)]:t.startValue,position:e?[Math.min(t.endPos,t.startPos),Math.max(t.endPos,t.startPos)]:t.startPos})}_dispatchTooltipEvent(e){this._dispatchEvent("sliderTooltip",{type:e,position:this._tooltipState&&this._tooltipState.pos,value:this._tooltipState&&this._tooltipState.value})}_getHandlers(){const{inverse:e}=this.attribute;let t=this._startHandler,n=this._endHandler;return n?(this._isHorizontal?(!e&&n.attribute.x<(t==null?void 0:t.attribute.x)||e&&n.attribute.x>(t==null?void 0:t.attribute.x))&&([t,n]=[n,t]):(!e&&n.attribute.y<(t==null?void 0:t.attribute.y)||e&&n.attribute.y>(t==null?void 0:t.attribute.y))&&([t,n]=[n,t]),{startHandler:t,endHandler:n}):{startHandler:t,endHandler:n}}}M0.defaultAttributes={slidable:!0,layout:"horizontal",align:"bottom",height:8,showHandler:!0,handlerSize:14,handlerStyle:{symbolType:"circle",fill:"#fff",stroke:"#91caff",lineWidth:2},tooltip:{shapeStyle:{symbolType:"circle",fill:"#fff",stroke:"#91caff",lineWidth:2},text:{style:{fill:"#2C3542",fontSize:12}}},railStyle:{fill:"rgba(0,0,0,.04)"},trackStyle:{fill:"#91caff"},showValue:!0,valueStyle:{fill:"#2C3542",fontSize:12},startText:{style:{fill:"#2C3542",fontSize:12}},endText:{style:{fill:"#2C3542",fontSize:12}},handlerText:{visible:!0,space:4,precision:0,style:{fill:"#2C3542",fontSize:12}}};Cot();class gO extends e4{constructor(e,t){super(t!=null&&t.skipDefault?e:se({},gO.defaultAttributes,e)),this.name="colorLegend",this._onSliderToolipChange=n=>{const s=this._slider.tooltipShape;if(s&&n.detail&&!B(n.detail.value)){const r=this._colorScale.scale(n.detail.value);s.setAttribute("fill",r)}this.dispatchEvent(n)},this._onSliderChange=n=>{this._updateColor(),this.dispatchEvent(n)}}setSelected(e){this._slider&&(this._slider.setValue(e),this._updateColor())}_renderContent(){const{colors:e,slidable:t,layout:n,align:s,min:r,max:a,value:o,railWidth:l,railHeight:c,showHandler:u=!0,handlerSize:h,handlerStyle:d,railStyle:p,trackStyle:f,startText:g,endText:m,handlerText:y,showTooltip:b,tooltip:x,inverse:S,disableTriggerEvent:C}=this.attribute,w=[],A=(a-r)/(e.length-1);for(let E=0;E<e.length;E++)w.push(r+A*E);this._colorScale=new Ma().domain(w,!0).range(e),this._color=this._getTrackColor();const T=new M0({x:0,y:0,range:{draggableTrack:!0},slidable:t,layout:n,align:s,min:r,max:a,value:o,railWidth:l,railHeight:c,showHandler:u,handlerSize:h,handlerStyle:d,railStyle:p,trackStyle:Object.assign({fill:this._color},f),startText:g,endText:m,handlerText:y,showTooltip:b,tooltip:x,disableTriggerEvent:C,inverse:S});this._innerView.add(T),this._slider=T,T.translateTo(0-T.AABBBounds.x1,(this._title?this._title.AABBBounds.height()+et(this.attribute,"title.space",$x):0)-T.AABBBounds.y1),this._updateColor()}_bindEvents(){this.attribute.disableTriggerEvent||this._slider&&(this._slider.addEventListener("change",this._onSliderChange),this._slider.addEventListener("sliderTooltip",this._onSliderToolipChange))}_getTrackColor(){const{colors:e,layout:t,inverse:n}=this.attribute;if(Te(e))return;const s=e.length;if(s===1)return e[0];const r=[];for(let l=0;l<s;l++){const c=l/(s-1);r.push({offset:c,color:e[l]})}const a=t==="horizontal",o={gradient:"linear",stops:r,x0:0,y0:0,x1:a?1:0,y1:a?0:1};return n&&(a?(o.x0=1,o.x1=0):(o.y0=1,o.y1=0)),o}_updateColor(){var e;const{layout:t="horizontal",colors:n,railWidth:s,railHeight:r}=this.attribute,{startHandler:a,endHandler:o,track:l,attribute:c}=this._slider,{startValue:u,endValue:h,startPos:d,endPos:p}=this._slider.currentValue,f=(e=c.handlerStyle)===null||e===void 0?void 0:e.fill;if(a&&!f){const m=this._colorScale.scale(u);a.setAttribute("fill",m)}if(o&&!f){const m=this._colorScale.scale(h);o.setAttribute("fill",m)}const g=t==="horizontal"?s:r;if(Math.abs(d-p)!==g&&n&&n.length>1){const m=this._color.stops,y=Math.min(d,p),b=Math.max(d,p),x=y/g,S=b/g,C=S-x,w=m.filter(M=>M.offset>x&&M.offset<S),A=Math.min(u,h),T=Math.max(u,h),E=this._colorScale.scale(A),P=this._colorScale.scale(T),O=[{offset:0,color:E}];w.forEach(M=>{O.push({offset:(M.offset-x)/C,color:M.color})}),O.push({offset:1,color:P}),l.setAttribute("fill",Object.assign(Object.assign({},this._color),{stops:O}))}}}gO.defaultAttributes={layout:"horizontal",title:{align:"start",space:$x,textStyle:{fontSize:12,fontWeight:"bold",fill:"rgba(46, 47, 50, 1)"}},handlerSize:10,handlerStyle:{fill:null,lineWidth:4,stroke:"#fff",outerBorder:{distance:2,lineWidth:1,stroke:"#ccc"}},tooltip:{shapeStyle:{lineWidth:4,stroke:"#fff"}}};function kot(i="bottom"){let e=0;return i==="top"?`
    M${e},-6L${e-3.5},-2.5
    v5
    h7
    v-5
    Z
`:i==="left"?(e=1,`
    M${e-6},0L${e-6+2.5},-3.5
    h5
    v7
    h-5
    Z
`):i==="right"?(e=-1,`
    M${e+6},0L${e+6-2.5},-3.5
    h-5
    v7
    h5
    Z
  `):`
    M${e},6L${e-3.5},2.5
    v-5
    h7
    v5
    Z
`}wot();class mO extends e4{constructor(e,t){super(t!=null&&t.skipDefault?e:se({},mO.defaultAttributes,e)),this.name="sizeLegend",this._onSliderChange=n=>{this.dispatchEvent(n)},this._onSliderToolipChange=n=>{this.dispatchEvent(n)}}setSelected(e){this._slider&&this._slider.setValue(e)}_renderContent(){const{slidable:e,layout:t,align:n,min:s,max:r,value:a,railWidth:o,railHeight:l,showHandler:c=!0,handlerSize:u,handlerStyle:h,railStyle:d,trackStyle:p,startText:f,endText:g,handlerText:m,showTooltip:y,tooltip:b,sizeBackground:x,disableTriggerEvent:S,inverse:C}=this.attribute,w=Ae.group({x:0,y:0});this._innerView.add(w);const A=new M0({x:0,y:0,zIndex:1,range:{draggableTrack:!0},slidable:e,layout:t,align:n,min:s,max:r,value:a,railWidth:o,railHeight:l,showHandler:c,handlerSize:u,handlerStyle:Object.assign({symbolType:kot(n)},h),railStyle:d,trackStyle:p,startText:f,endText:g,handlerText:m,showTooltip:y,tooltip:b,disableTriggerEvent:S,inverse:C});w.add(A);let T,E=0;t==="horizontal"?n==="top"?(T=`M0,0L${o},0L${C?0:o},12Z`,E=l):(T=`M0,12L${o},12L${C?0:o},0Z`,A.setAttribute("y",12)):n==="left"?T=`M${o},0L${o+12},${C?0:l}L${o},${l}Z`:(T=`M0,${C?0:l}L12,${l}L12,0Z`,A.setAttribute("x",12));const P=Ae.path(Object.assign(Object.assign({x:0,y:E,path:T},x),{zIndex:0}));w.add(P);const O=this._title?this._title.AABBBounds.height()+et(this.attribute,"title.space",$x):0;w.translate(0-w.AABBBounds.x1,O-w.AABBBounds.y1),this._slider=A}_bindEvents(){this.attribute.disableTriggerEvent||this._slider&&(this._slider.addEventListener("change",this._onSliderChange),this._slider.addEventListener("sliderTooltip",this._onSliderToolipChange))}}mO.defaultAttributes={layout:"horizontal",title:{align:"start",space:$x,textStyle:{fontSize:12,fontWeight:"bold",fill:"rgba(46, 47, 50, 1)"}},handlerSize:10,handlerStyle:{lineWidth:1,stroke:"#ccc",fill:"#fff"},sizeBackground:{fill:"rgba(20,20,20,0.1)"}};function Tot(){on(),$c(),Ud()}Tot();let Loe=class Doe extends Zn{constructor(e,t){super(t!=null&&t.skipDefault?e:se({},Doe.defaultAttributes,e)),this.name="title"}render(){var e,t,n,s,r,a,o,l,c,u,h,d,p,f,g,m,y,b;const{textType:x,text:S,subtextType:C,textStyle:w={},subtext:A,subtextStyle:T={},width:E,height:P,minWidth:O,maxWidth:M,minHeight:R,maxHeight:j,align:I,verticalAlign:D,padding:z=0}=this.attribute,$=Cr(z),V=this.createOrUpdateChild("title-container",{x:$[3],y:$[0],zIndex:1},"group");if(this.attribute.visible!==!1&&w.visible!==!1){const{width:le,height:de,maxHeight:te,maxWidth:me,x:Be=0,y:ve=0,ellipsis:Re=!0,wordBreak:Qe="break-word",maxWidth:Lt,lineClamp:Ue}=w;if(x==="rich"||F(w.character)){const je=Object.assign({x:Be,y:ve,width:(e=le??E)!==null&&e!==void 0?e:0,height:(t=de??P)!==null&&t!==void 0?t:0,ellipsis:Re==null||Re,wordBreak:Qe??"break-word",maxHeight:te??j,maxWidth:me??Lt,textConfig:(n=w.character)!==null&&n!==void 0?n:S},w);this._mainTitle=V.createOrUpdateChild("mainTitle",je,"richtext")}else if(x==="html"){const je=Object.assign({html:Object.assign(Object.assign({dom:S},Zk),w),x:Be,y:ve,width:(s=le??E)!==null&&s!==void 0?s:0,height:(r=de??P)!==null&&r!==void 0?r:0,ellipsis:Re,wordBreak:Qe,maxHeight:te??j,maxWidth:me??Lt,textConfig:[]},w);this._mainTitle=V.createOrUpdateChild("mainTitle",je,"richtext")}else F(S)&&(this._mainTitle=V.createOrUpdateChild("mainTitle",Object.assign(Object.assign({text:ie(S)?S:[S],whiteSpace:"normal"},w),{maxLineWidth:(o=(a=w.maxLineWidth)!==null&&a!==void 0?a:le)!==null&&o!==void 0?o:E,heightLimit:de??j,lineClamp:Ue,ellipsis:Re,x:Be,y:ve}),"text"))}const L=this._mainTitle?this._mainTitle.AABBBounds.height():0,Y=this._mainTitle?this._mainTitle.AABBBounds.width():0;if(this.attribute.visible!==!1&&T.visible!==!1){const{width:le,height:de,maxWidth:te,maxHeight:me,x:Be=0,y:ve=0,ellipsis:Re=!0,wordBreak:Qe="break-word",lineClamp:Lt}=T,Ue=Math.max(Number.MIN_VALUE,j-L);if(C==="rich"||F(T.character)){const je=Object.assign({x:Be,y:ve,width:(l=le??E)!==null&&l!==void 0?l:0,height:(c=de??P)!==null&&c!==void 0?c:0,ellipsis:Re,wordBreak:Qe,maxHeight:me??Ue,maxWidth:te??M,textConfig:(u=T.character)!==null&&u!==void 0?u:A},T);this._subTitle=V.createOrUpdateChild("subTitle",je,"richtext")}else if(C==="html"){const je=Object.assign({html:Object.assign(Object.assign({dom:A},Zk),T),x:Be,y:ve,width:(h=le??E)!==null&&h!==void 0?h:0,height:(d=de??P)!==null&&d!==void 0?d:0,ellipsis:Re,wordBreak:Qe,maxHeight:me??Ue,maxWidth:te??M,textConfig:[]},T);this._subTitle=V.createOrUpdateChild("subTitle",je,"richtext")}else F(A)&&(this._subTitle=V.createOrUpdateChild("subTitle",Object.assign(Object.assign({text:ie(A)?A:[A],whiteSpace:"normal"},T),{maxLineWidth:(p=T.maxLineWidth)!==null&&p!==void 0?p:E,heightLimit:(f=T.heightLimit)!==null&&f!==void 0?f:Ue,lineClamp:Lt,ellipsis:Re,x:0,y:L}),"text"))}const ae=this._subTitle?this._subTitle.AABBBounds.height():0,W=this._subTitle?this._subTitle.AABBBounds.width():0;let ce=Math.max(Y,W),he=L+((g=T.height)!==null&&g!==void 0?g:ae);if(F(E)&&(ce=E),F(P)&&(he=P),F(O)&&ce<O&&(ce=O),F(M)&&ce>M&&(ce=M),F(R)&&he<R&&(he=R),F(j)&&he>j&&(he=j),V.attribute.width=ce,V.attribute.height=he,V.attribute.boundsPadding=$,this._mainTitle){if(F(I)||F(w.align)){const le=w.align?w.align:I,de=(m=w.width)!==null&&m!==void 0?m:Y;le==="left"?(this._mainTitle.setAttribute("x",0),this._mainTitle.setAttribute("textAlign","left")):le==="center"?(this._mainTitle.setAttribute("x",de/2),this._mainTitle.setAttribute("textAlign","center")):le==="right"&&(this._mainTitle.setAttribute("x",de),this._mainTitle.setAttribute("textAlign","right"))}if(F(D)||F(w.verticalAlign)){const le=w.verticalAlign?w.verticalAlign:D,de=w.height?w.height:he;le==="top"?(this._mainTitle.setAttribute("y",0),this._mainTitle.setAttribute("textBaseline","top")):le==="middle"?(this._mainTitle.setAttribute("y",de/2),this._mainTitle.setAttribute("textBaseline","middle")):le==="bottom"&&(this._mainTitle.setAttribute("y",de),this._mainTitle.setAttribute("textBaseline","bottom"))}}if(this._subTitle){if(F(I)||F(T.align)){const le=T.align?T.align:I,de=(y=T.width)!==null&&y!==void 0?y:W;le==="left"?(this._subTitle.setAttribute("x",0),this._subTitle.setAttribute("textAlign","left")):le==="center"?(this._subTitle.setAttribute("x",de/2),this._subTitle.setAttribute("textAlign","center")):le==="right"&&(this._subTitle.setAttribute("x",de),this._subTitle.setAttribute("textAlign","right"))}if(F(D)||F(w.verticalAlign)){const le=T.verticalAlign?T.verticalAlign:D,de=L,te=(b=T.height)!==null&&b!==void 0?b:0;le==="top"?(this._subTitle.setAttribute("y",de),this._subTitle.setAttribute("textBaseline","top")):le==="middle"?(this._subTitle.setAttribute("y",de+te/2),this._subTitle.setAttribute("textBaseline","middle")):le==="bottom"&&(this._subTitle.setAttribute("y",de+te),this._subTitle.setAttribute("textBaseline","bottom"))}}}};Loe.defaultAttributes={textStyle:{ellipsis:"...",fill:"#333",fontSize:20,fontWeight:"bold",textAlign:"left",textBaseline:"top"},subtextStyle:{ellipsis:"...",fill:"#6F6F6F",fontSize:16,fontWeight:"normal",textAlign:"left",textBaseline:"top"}};const Eot={title:{style:{text:"",fontSize:20,fill:"black",fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}},content:{style:{text:"",fontSize:16,fill:"black",fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}}};function Pot(){on(),$c(),Ud()}Pot();let Oot=class extends Zn{constructor(){super(...arguments),this.name="indicator"}_renderText(e,t,n,s,r,a){if(t.visible!==!1){const o=se({},et(Eot,r),t.style,{visible:t.visible});o.lineHeight=F(o.lineHeight)?o.lineHeight:o.fontSize,t.formatMethod&&(o._originText=o.text,o.text=t.formatMethod(o.text,o));const l=i1(o);return l.name=a,e.appendChild(l),t.autoFit&&Z(n)&&this._setLocalAutoFit(n,l,t),t.autoLimit&&Z(s)&&l.setAttribute("maxLineWidth",n),l}}render(){var e,t;if(this.removeAllChild(!0),this.attribute.visible!==!0)return;const{title:n={},content:s,size:r,limitRatio:a=1/0}=this.attribute,o=Math.min(r.width,r.height)*a,l=this.createOrUpdateChild("indicator-container",{x:0,y:0,zIndex:1,pickable:(e=this.attribute.pickable)===null||e===void 0||e},"group");if(F(n)&&(this._title=this._renderText(l,n,o,a,"title.style","indicator-title")),F(s)){const u=q(s),h=[];u.forEach((d,p)=>{d.visible!==!1&&h.push(this._renderText(l,d,o,a,"content.style","indicator-content-"+p))}),this._content=h}this._setGlobalAutoFit(o),this._setYPosition();const c=(t=l==null?void 0:l.AABBBounds.height())!==null&&t!==void 0?t:0;l.setAttribute("y",r.height/2-c/2),l.setAttribute("x",r.width/2)}_setLocalAutoFit(e,t,n){var s,r,a,o,l,c,u,h,d;if(((s=n.fitStrategy)!==null&&s!==void 0?s:"default")!=="default")return;const p=JP((a=(r=n.style)===null||r===void 0?void 0:r.text)!==null&&a!==void 0?a:"",(o=n.style)!==null&&o!==void 0?o:{},(c=(l=this.stage)===null||l===void 0?void 0:l.getTheme())===null||c===void 0?void 0:c.text).width;if(p>0){const f=e*((u=n.fitPercent)!==null&&u!==void 0?u:.5)/p,g=Math.floor(((d=(h=n.style)===null||h===void 0?void 0:h.fontSize)!==null&&d!==void 0?d:20)*f);t.setAttribute("fontSize",g),t.setAttribute("lineHeight",F(n.style.lineHeight)?n.style.lineHeight:g)}}_setGlobalAutoFit(e){var t,n,s,r,a,o,l;const c=e/2,u=[];let h=0;const d=(t=this.attribute.title)!==null&&t!==void 0?t:{};d.autoFit&&d.fitStrategy==="inscribed"?(this._title.setAttribute("fontSize",12),u.push({text:this._title,spec:(n=this.attribute.title)!==null&&n!==void 0?n:{}})):h+=(o=(a=(r=(s=this._title)===null||s===void 0?void 0:s.AABBBounds)===null||r===void 0?void 0:r.height)===null||a===void 0?void 0:a.call(r))!==null&&o!==void 0?o:0;const p=(l=d.space)!==null&&l!==void 0?l:0;if(h+=p,q(this.attribute.content).filter(C=>C.visible!==!1).forEach((C,w)=>{var A,T,E,P;const O=this._content[w];C.autoFit&&C.fitStrategy==="inscribed"?(O.setAttribute("fontSize",12),u.push({text:O,spec:C})):h+=(E=(T=(A=O==null?void 0:O.AABBBounds)===null||A===void 0?void 0:A.height)===null||T===void 0?void 0:T.call(A))!==null&&E!==void 0?E:0;const M=(P=C.space)!==null&&P!==void 0?P:0;h+=M}),u.length<=0)return;const f=12/u.reduce((C,w)=>Math.max(C,w.text.AABBBounds.width()),0)*u.length,g=h/2,m=f**2+1,y=2*g*f,b=g**2-c**2,x=2*(f*((-y+Math.sqrt(y**2-4*m*b))/(2*m))+g),S=(x-h)/u.length;Z(x)&&u.forEach(C=>{var w;const A=(w=C.spec.style)===null||w===void 0?void 0:w.lineHeight;C.text.setAttribute("fontSize",S),C.text.setAttribute("lineHeight",F(A)?A:S)})}_setYPosition(){var e,t,n,s,r,a;let o=0;const l=(s=(n=(t=(e=this._title)===null||e===void 0?void 0:e.AABBBounds)===null||t===void 0?void 0:t.height)===null||n===void 0?void 0:n.call(t))!==null&&s!==void 0?s:0,c=(a=(r=this.attribute.title)===null||r===void 0?void 0:r.space)!==null&&a!==void 0?a:0;q(this.attribute.content).filter(u=>u.visible!==!1).forEach((u,h)=>{var d;const p=this._content[h];p.setAttribute("y",l+c+o);const f=(d=u.space)!==null&&d!==void 0?d:0;o+=p.AABBBounds.height()+f})}};const Mot="M 414.5 0.0238 c 228.9128 0 414.4762 185.5634 414.4762 414.4762 s -185.5634 414.4762 -414.4762 414.4762 S 0.0238 643.4128 0.0238 414.5 S 185.5872 0.0238 414.5 0.0238 z m 0 73.1429 C 225.9865 73.1667 73.1667 225.9865 73.1667 414.5 s 152.8198 341.3333 341.3333 341.3333 s 341.3333 -152.8198 341.3333 -341.3333 S 603.0135 73.1667 414.5 73.1667 z m -73.1429 161.4994 a 48.7619 48.7619 0 0 1 25.9901 7.5093 l 201.7524 127.1223 a 48.7619 48.7619 0 0 1 0.3657 82.2613 l -201.7524 129.6335 A 48.7619 48.7619 0 0 1 292.5952 540.1838 v -256.7314 a 48.7619 48.7619 0 0 1 48.7619 -48.7619 z m 24.381 92.9402 v 167.9116 l 131.9497 -84.7726 L 365.7381 327.6063 z",Iot="M 414.5 0.0238 c 228.9128 0 414.4762 185.5634 414.4762 414.4762 s -185.5634 414.4762 -414.4762 414.4762 S 0.0238 643.4128 0.0238 414.5 S 185.5872 0.0238 414.5 0.0238 z m 0 73.1429 C 225.9865 73.1667 73.1667 225.9865 73.1667 414.5 s 152.8198 341.3333 341.3333 341.3333 s 341.3333 -152.8198 341.3333 -341.3333 S 603.0135 73.1667 414.5 73.1667 z m -48.7619 195.0476 v 316.9524 h -73.1429 V 268.2143 h 73.1429 z m 158.4762 0 v 316.9524 h -73.1429 V 268.2143 h 73.1429 z",Rot="M 521.29 734.276 L 230.929 448.019 L 521.29 161.762 c 37.685 -37.153 38.003 -97.625 0.707 -134.384 c -37.297 -36.758 -98.646 -36.435 -136.331 0.718 l -357.43 352.378 c -0.155 0.153 -0.297 0.314 -0.451 0.468 c -0.084 0.082 -0.172 0.157 -0.256 0.239 c -18.357 18.092 -27.581 41.929 -27.743 65.902 c -0.004 0.311 -0.017 0.623 -0.018 0.934 c 0.001 0.316 0.014 0.632 0.018 0.948 c 0.165 23.97 9.389 47.803 27.743 65.892 c 0.083 0.082 0.171 0.157 0.255 0.239 c 0.154 0.154 0.296 0.315 0.452 0.468 l 357.43 352.378 c 37.685 37.153 99.034 37.476 136.331 0.718 c 37.297 -36.758 36.979 -97.231 -0.707 -134.384 z",Lot="M 734.276 28.71 L 448.019 319.071 L 161.762 28.71 c -37.153 -37.685 -97.625 -38.003 -134.384 -0.707 c -36.758 37.297 -36.435 98.646 0.718 136.331 l 352.378 357.43 c 0.153 0.155 0.314 0.297 0.468 0.451 c 0.082 0.084 0.157 0.172 0.239 0.256 c 18.092 18.357 41.929 27.581 65.902 27.743 c 0.311 0.004 0.623 0.017 0.934 0.018 c 0.316 -0.001 0.632 -0.014 0.948 -0.018 c 23.97 -0.165 47.803 -9.389 65.892 -27.743 c 0.082 -0.083 0.157 -0.171 0.239 -0.255 c 0.154 -0.154 0.315 -0.296 0.468 -0.452 l 352.378 -357.43 c 37.153 -37.685 37.476 -99.034 0.718 -136.331 c -36.758 -37.297 -97.231 -36.979 -134.384 0.707 z",Dot="m 161.724 521.29 l 286.257 -290.361 l 286.257 290.361 c 37.153 37.685 97.625 38.003 134.384 0.707 c 36.758 -37.297 36.435 -98.646 -0.718 -136.331 l -352.378 -357.43 c -0.153 -0.155 -0.314 -0.297 -0.468 -0.451 c -0.082 -0.084 -0.157 -0.172 -0.239 -0.256 c -18.092 -18.357 -41.929 -27.581 -65.902 -27.743 c -0.311 -0.004 -0.623 -0.017 -0.934 -0.018 c -0.316 0.001 -0.632 0.014 -0.948 0.018 c -23.97 0.165 -47.803 9.389 -65.892 27.743 c -0.082 0.083 -0.157 0.171 -0.239 0.255 c -0.154 0.154 -0.315 0.296 -0.468 0.452 l -352.378 357.43 c -37.153 37.685 -37.476 99.034 -0.718 136.331 c 36.758 37.297 97.231 36.979 134.384 -0.707 z",Fot="M 30 163 L 320.361 449.257 L 30 735.514 c -37.685 37.153 -38.003 97.625 -0.707 134.384 c 37.297 36.758 98.646 36.435 136.331 -0.718 l 357.43 -352.378 c 0.155 -0.153 0.297 -0.314 0.451 -0.468 c 0.084 -0.082 0.172 -0.157 0.256 -0.239 c 18.357 -18.092 27.581 -41.929 27.743 -65.902 c 0.004 -0.311 0.017 -0.623 0.018 -0.934 c -0.001 -0.316 -0.014 -0.632 -0.018 -0.948 c -0.165 -23.97 -9.389 -47.803 -27.743 -65.892 c -0.083 -0.082 -0.171 -0.157 -0.255 -0.239 c -0.154 -0.154 -0.296 -0.315 -0.452 -0.468 l -357.43 -352.378 c -37.685 -37.153 -99.034 -37.476 -136.331 -0.718 c -37.297 36.758 -36.979 97.231 0.707 134.384 z";class BI extends Xb{constructor(e){super(e)}}var Ur;(function(i){i.OnPlay="onPlay",i.OnPause="onPause",i.OnForward="onForward",i.OnBackward="onBackward"})(Ur||(Ur={}));var vm;(function(i){i.Start="start",i.Pause="pause",i.Forward="forward",i.Backward="backward"})(vm||(vm={}));class ou extends Zn{constructor(e,t){super(t!=null&&t.skipDefault?e:se({},ou.defaultAttributes,e)),this._isPaused=!0,this.updateAttributes=()=>{this._startAttr={style:Object.assign(Object.assign(Object.assign({symbolType:Mot},ou.defaultControllerAttr),{visible:this.attribute.start.visible}),this.attribute.start.style)},this._pauseAttr={style:Object.assign(Object.assign(Object.assign({symbolType:Iot},ou.defaultControllerAttr),{visible:this.attribute.pause.visible}),this.attribute.pause.style)},this._forwardAttr={style:Object.assign(Object.assign(Object.assign({},ou.defaultControllerAttr),{visible:this.attribute.forward.visible}),this.attribute.forward.style)},this._backwardAttr={style:Object.assign(Object.assign(Object.assign({},ou.defaultControllerAttr),{visible:this.attribute.backward.visible}),this.attribute.backward.style)},this.updateLayout()},this.updateLayout=()=>{var n,s,r,a;this._layout=this.attribute.layout,this._layout==="horizontal"?(this._backwardAttr.style.symbolType=(n=this._backwardAttr.style.symbolType)!==null&&n!==void 0?n:Rot,this._forwardAttr.style.symbolType=(s=this._forwardAttr.style.symbolType)!==null&&s!==void 0?s:Fot):this._layout==="vertical"&&(this._backwardAttr.style.symbolType=(r=this._backwardAttr.style.symbolType)!==null&&r!==void 0?r:Dot,this._forwardAttr.style.symbolType=(a=this._forwardAttr.style.symbolType)!==null&&a!==void 0?a:Lot)},this._initPlay=()=>{B(this._playController)&&(this._playController=new BI(Object.assign({},this._startAttr.style)),this.add(this._playController))},this._initBackward=()=>{B(this._backwardController)&&(this._backwardController=new BI(Object.assign({},this._backwardAttr.style)),this.add(this._backwardController))},this._initForward=()=>{B(this._forwardController)&&(this._forwardController=new BI(Object.assign({},this._forwardAttr.style)),this.add(this._forwardController))},this._initEvents=()=>{this.attribute.disableTriggerEvent||(this._playController.addEventListener("pointerdown",n=>{n.stopPropagation(),this._isPaused===!0?this.play():this.pause()}),this._backwardController.addEventListener("pointerdown",n=>{n.stopPropagation(),this.backward()}),this._forwardController.addEventListener("pointerdown",n=>{n.stopPropagation(),this.forward()}))},this.renderPlay=()=>{this._isPaused?this._playController.setAttributes(Object.assign({symbolType:this._playController.getComputedAttribute("symbolType")},this._startAttr.style)):this._playController.setAttributes(Object.assign({symbolType:this._playController.getComputedAttribute("symbolType")},this._pauseAttr.style))},this.renderBackward=()=>{this._backwardController.setAttributes(this._backwardAttr.style)},this.renderForward=()=>{this._forwardController.setAttributes(this._forwardAttr.style)},this.play=()=>{this._dispatchEvent(Ur.OnPlay)},this.pause=()=>{this._dispatchEvent(Ur.OnPause)},this.forward=()=>{this._dispatchEvent(Ur.OnForward)},this.backward=()=>{this._dispatchEvent(Ur.OnBackward)},this.togglePlay=()=>{this._playController.setAttributes(this._startAttr.style),this._isPaused=!0},this.togglePause=()=>{this._playController.setAttributes(this._pauseAttr.style),this._isPaused=!1},this.updateAttributes(),this._initPlay(),this._initBackward(),this._initForward(),this._initEvents()}render(){this.updateAttributes(),this.renderPlay(),this.renderBackward(),this.renderForward()}}ou.defaultControllerAttr={visible:!0,x:0,y:0,size:20,fill:"#91caff",pickMode:"imprecise",cursor:"pointer"},ou.defaultAttributes={[vm.Start]:{},[vm.Pause]:{},[vm.Backward]:{},[vm.Forward]:{}};const _C={visible:!0,style:{x:0,y:0,dx:0,dy:0,size:20},order:0,space:10},jI=[200,10];var Md;(function(i){i.Default="default",i.Reverse="reverse"})(Md||(Md={}));var tn;(function(i){i.change="change",i.play="play",i.pause="pause",i.backward="backward",i.forward="forward",i.end="end",i.OnChange="change",i.OnPlay="play",i.OnPause="pause",i.OnBackward="backward",i.OnForward="forward",i.OnEnd="end"})(tn||(tn={}));const Bot=({direction:i,maxIndex:e,dataIndex:t})=>i===Md.Default&&t===e,jot=({direction:i,minIndex:e,dataIndex:t})=>i===Md.Reverse&&t===e,Not=({direction:i,maxIndex:e,minIndex:t,dataIndex:n})=>Bot({direction:i,maxIndex:e,dataIndex:n})||jot({direction:i,minIndex:t,dataIndex:n}),$ot=({direction:i,minIndex:e,dataIndex:t})=>i===Md.Default&&t===e,zot=({direction:i,maxIndex:e,dataIndex:t})=>i===Md.Reverse&&t===e,Hot=({direction:i,maxIndex:e,minIndex:t,dataIndex:n})=>$ot({direction:i,minIndex:t,dataIndex:n})||zot({direction:i,maxIndex:e,dataIndex:n}),$l=i=>i==="top"||i==="bottom",Vot=(i,e,t,n)=>i==="default"?Math.min(e+1,n):Math.max(e-1,t);class zx extends Zn{getMinIndex(){return this._minIndex}getMaxIndex(){return this._maxIndex}getDataIndex(){return this._dataIndex}constructor(e,t){super(t!=null&&t.skipDefault?e:se({},zx.defaultAttributes,e)),this._data=[],this._dataIndex=0,this._layoutInfo={},this._updateSliderAttrs=()=>{var n,s;let r;Z(this._handlerStyle.size)?r=this._handlerStyle.size:this._handlerStyle.size&&this._handlerStyle.size.length&&(r=br(this._handlerStyle.size[0],this._handlerStyle.size[1]));const a={visible:this._sliderVisible,min:this._minIndex,max:this._maxIndex,value:this._dataIndex,railWidth:this._railStyle.width,railHeight:this._railStyle.height,railStyle:this._railStyle,trackStyle:this._trackStyle,handlerSize:Z(r)?r:void 0,handlerStyle:this._handlerStyle,dy:this.attribute.slider.dy,dx:this.attribute.slider.dx,slidable:!0,range:!1,handlerText:{visible:!1},startText:{visible:!1},endText:{visible:!1},disableTriggerEvent:this.attribute.disableTriggerEvent};if($l(this._orient)){const o=Math.max(0,this._layoutInfo.slider.size),l=(n=this._railStyle.height)!==null&&n!==void 0?n:jI[1];a.layout="horizontal",a.railHeight=l,a.railWidth=o,a.x=this._layoutInfo.slider.x,a.y=this._layoutInfo.slider.y}else{const o=Math.max(0,this._layoutInfo.slider.size),l=(s=this._railStyle.width)!==null&&s!==void 0?s:jI[1];a.layout="vertical",a.railWidth=l,a.railHeight=o,a.x=this._layoutInfo.slider.x,a.y=this._layoutInfo.slider.y}return a},this._initSlider=()=>{const n=this._updateSliderAttrs();this._slider=new M0(n),this._sliderVisible&&this.add(this._slider)},this._updateControllerAttrs=()=>{const n={start:this._start,pause:this._pause,forward:this._forward,backward:this._backward,disableTriggerEvent:this.attribute.disableTriggerEvent};return n.layout=$l(this._orient)?"horizontal":"vertical",n.start=Object.assign(Object.assign({},n.start),{style:Object.assign(Object.assign({},n.start.style),{x:this._layoutInfo.start.x,y:this._layoutInfo.start.y})}),n.pause=Object.assign(Object.assign({},n.pause),{style:Object.assign(Object.assign({},n.pause.style),{x:this._layoutInfo.start.x,y:this._layoutInfo.start.y})}),n.backward=Object.assign(Object.assign({},n.backward),{style:Object.assign(Object.assign({},n.backward.style),{x:this._layoutInfo.backward.x,y:this._layoutInfo.backward.y})}),n.forward=Object.assign(Object.assign({},n.forward),{style:Object.assign(Object.assign({},n.forward.style),{x:this._layoutInfo.forward.x,y:this._layoutInfo.forward.y})}),n},this._initController=()=>{const n=this._updateControllerAttrs();this._controller=new ou(n),this._controllerVisible&&this.add(this._controller)},this._initAttributes(),this._initDataIndex(),this._initLayoutInfo(),this._initController(),this._initSlider()}_initAttributes(){this._size=this.attribute.size,this._orient=this.attribute.orient,this._data=this.attribute.data,this._minIndex=0,this._maxIndex=this._data.length-1;const{slider:e={},controller:t={}}=this.attribute;this._sliderVisible=e.visible,this._railStyle=Object.assign({},e.railStyle),this._trackStyle=Object.assign({},e.trackStyle),this._handlerStyle=Object.assign({},e.handlerStyle),this._controllerVisible=t.visible,this._start=Object.assign({},t.start),this._pause=Object.assign({},t.pause),this._forward=Object.assign({},t.forward),this._backward=Object.assign({},t.backward)}_initDataIndex(){var e;this._dataIndex=(e=this.attribute.dataIndex)!==null&&e!==void 0?e:0}_initLayoutInfo(){var e,t,n;const s=[this._start,this._backward,this._forward].sort((d,p)=>d.order-p.order),r=s.filter(d=>d.position!=="end"),a=s.filter(d=>d.position==="end"),o=(e=$l(this._orient)?this._railStyle.height:this._railStyle.width)!==null&&e!==void 0?e:jI[1],l=s.reduce((d,p)=>{const f=p.style.size,g=ye(f)?f:br(f[0],f[1]);return d+p.space+g},0),c=this._sliderVisible?($l(this._orient)?(t=this._size)===null||t===void 0?void 0:t.width:(n=this._size)===null||n===void 0?void 0:n.height)-l:0,u=c-this.attribute.slider.space,h=r.reduce((d,p)=>{const{key:f,space:g,style:{size:m}}=p,y=ye(m)?m:br(m[0],m[1]);return this._layoutInfo[f]=Object.assign(Object.assign({},this._layoutInfo[f]),{size:y,x:$l(this._orient)?d+g:(this._size.width-y)/2,y:$l(this._orient)?(this._size.height-y)/2:d+g}),d+g+y},0);this._layoutInfo.slider=Object.assign(Object.assign({},this._layoutInfo.slider),{size:u,x:$l(this._orient)?h+this.attribute.slider.space:(this._size.width-o)/2,y:$l(this._orient)?(this._size.height-o)/2:h+this.attribute.slider.space}),a.reduce((d,p)=>{const{key:f,space:g,style:{size:m}}=p,y=ye(m)?m:br(m[0],m[1]);return this._layoutInfo[f]=Object.assign(Object.assign({},this._layoutInfo[f]),{size:y,x:$l(this._orient)?d+g:(this._size.width-y)/2,y:$l(this._orient)?(this._size.height-y)/2:d+g}),d+g+y},h+c)}render(){this._initLayoutInfo(),this.renderSlider(),this.renderController()}renderSlider(){const e=this._updateSliderAttrs();this._slider.setAttributes(e)}renderController(){const e=this._updateControllerAttrs();this._controller.setAttributes(e)}dispatchCustomEvent(e,t){this._dispatchEvent(e,{eventType:e,index:t,value:this._data[t]})}}zx.defaultAttributes={visible:!0,data:[],interval:1e3,orient:"bottom",align:"center",size:{height:20,width:300},slider:{visible:!0,space:10,dx:0,dy:0,railStyle:{cornerRadius:5},trackStyle:{},handlerStyle:{}},controller:{visible:!0,start:Object.assign(Object.assign({},_C),{key:"start",position:"start",space:0}),pause:Object.assign(Object.assign({},_C),{key:"pause",position:"start"}),forward:Object.assign(Object.assign({},_C),{key:"forward",position:"end"}),backward:Object.assign(Object.assign({},_C),{key:"backward",position:"start"})}};function Foe(){fO(),on(),Mo()}function Uot(){Foe()}function Wot(){Foe()}Uot();class Got extends zx{constructor(e,t){super(t!=null&&t.skipDefault?e:se({},e)),this._activeIndex=-1,this._isReachEnd=!1,this._initAttributes=()=>{var n,s,r;super._initAttributes(),this._alternate=(n=this.attribute.alternate)!==null&&n!==void 0&&n,this._interval=(s=this.attribute.interval)!==null&&s!==void 0?s:1e3,this._direction=(r=this.attribute.direction)!==null&&r!==void 0?r:Md.Default},this._initDataIndex=()=>{var n;this._dataIndex=B(this.attribute.dataIndex)?this._direction==="default"?this._minIndex:this._maxIndex:(n=this.attribute.dataIndex)!==null&&n!==void 0?n:0,this._slider.setAttribute("value",this._dataIndex)},this._initEvents=()=>{this.attribute.disableTriggerEvent||(this._controller.addEventListener(Ur.OnPlay,n=>{n.stopPropagation(),this.play()}),this._controller.addEventListener(Ur.OnPause,n=>{n.stopPropagation(),this.pause()}),this._controller.addEventListener(Ur.OnForward,n=>{n.stopPropagation(),this.forward()}),this._controller.addEventListener(Ur.OnBackward,n=>{n.stopPropagation(),this.backward()}),this._slider.addEventListener("change",n=>{const s=Math.floor(n.detail.value)+.5;this._dataIndex=n.detail.value>=s?Math.ceil(n.detail.value):Math.floor(n.detail.value),this._slider.setValue(this._dataIndex),this.dispatchCustomEvent(tn.change)}))},this.play=()=>{this._isPlaying||this._data.length!==1&&(this._controller.togglePause(),this._isPlaying=!0,(Not({dataIndex:this._dataIndex,maxIndex:this._maxIndex,minIndex:this._minIndex,direction:this._direction})||Hot({dataIndex:this._dataIndex,maxIndex:this._maxIndex,minIndex:this._minIndex,direction:this._direction}))&&(this._direction===Md.Default?this._updateDataIndex(this._minIndex):this._updateDataIndex(this._maxIndex)),this.dispatchCustomEvent(tn.play),this._isReachEnd=!1,this._tickTime=Date.now(),this._rafId=st.getRequestAnimationFrame()(this._play.bind(this,!0)))},this._play=n=>{const s=Date.now();if(this._isReachEnd&&s-this._tickTime>=this._interval)return this._isReachEnd=!1,void this._playEnd();n&&this._activeIndex!==this._dataIndex?(this.dispatchCustomEvent(tn.change),this._activeIndex=this._dataIndex):s-this._tickTime>=this._interval&&(this._tickTime=s,this._updateDataIndex(Vot(this._direction,this._dataIndex,this._minIndex,this._maxIndex)),this._activeIndex=this._dataIndex,this.dispatchCustomEvent(tn.change)),(this._direction==="default"&&this._dataIndex>=this._maxIndex||this._direction==="reverse"&&this._dataIndex<=this._minIndex)&&(this._isReachEnd=!0),this._rafId=st.getRequestAnimationFrame()(this._play.bind(this,!1))},this._updateDataIndex=n=>{this._dataIndex=n,this._slider.setValue(this._dataIndex)},this._playEnd=()=>{this._isPlaying=!1,this._controller.togglePlay(),st.getCancelAnimationFrame()(this._rafId),this._activeIndex=-1,this.dispatchCustomEvent(tn.end)},this.pause=()=>{this._isPlaying&&(this._isPlaying=!1,st.getCancelAnimationFrame()(this._rafId),this._controller.togglePlay(),this.dispatchCustomEvent(tn.pause))},this.backward=()=>{const{loop:n=!1}=this.attribute;let s;s=n?this._dataIndex-1<this._minIndex?this._maxIndex:this._dataIndex-1:Math.max(this._dataIndex-1,this._minIndex),this._updateDataIndex(s),this.dispatchCustomEvent(tn.change),this.dispatchCustomEvent(tn.backward)},this.forward=()=>{const{loop:n=!1}=this.attribute;let s;s=n?this._dataIndex+1>this._maxIndex?this._minIndex:this._dataIndex+1:Math.min(this._dataIndex+1,this._maxIndex),this._updateDataIndex(s),this.dispatchCustomEvent(tn.change),this.dispatchCustomEvent(tn.forward)},this._initAttributes(),this._initDataIndex(),this._initEvents()}setAttributes(e,t){super.setAttributes(e,t),this._initAttributes()}dispatchCustomEvent(e){super.dispatchCustomEvent(e,this._dataIndex)}}var Kot=function(i,e,t,n){return new(t||(t=Promise))(function(s,r){function a(c){try{l(n.next(c))}catch(u){r(u)}}function o(c){try{l(n.throw(c))}catch(u){r(u)}}function l(c){var u;c.done?s(c.value):(u=c.value,u instanceof t?u:new t(function(h){h(u)})).then(a,o)}l((n=n.apply(i,e||[])).next())})};Wot();class Xot extends zx{constructor(e){super(e),this._isPlaying=!1,this._startTime=Date.now(),this._initAttributes=()=>{var t;super._initAttributes(),this._maxIndex=this._data.length,this._slider.setAttribute("max",this._maxIndex),this._isPlaying=!1,this._elapsed=0,this._interval=(t=this.attribute.interval)!==null&&t!==void 0?t:1e3;const n=this._data.length;this.attribute.totalDuration&&this._data.length?(this._totalDuration=this.attribute.totalDuration,this._interval=this._totalDuration/(n??1)):(this._totalDuration=this._interval*n,this._interval=this.attribute.interval)},this._initDataIndex=()=>{var t;this._dataIndex=(t=this.attribute.dataIndex)!==null&&t!==void 0?t:this._minIndex},this._initEvents=()=>{this.attribute.disableTriggerEvent||(this._controller.addEventListener(Ur.OnPlay,t=>{t.stopPropagation(),this.play()}),this._controller.addEventListener(Ur.OnPause,t=>{t.stopPropagation(),this.pause()}),this._controller.addEventListener(Ur.OnForward,t=>{t.stopPropagation(),this.forward()}),this._controller.addEventListener(Ur.OnBackward,t=>{t.stopPropagation(),this.backward()}),this._slider.addEventListener("change",t=>{var n;t.stopPropagation();const s=(n=t.detail)===null||n===void 0?void 0:n.value,r=s/this._maxIndex;this._elapsed=r*this._totalDuration,this._startTime=Date.now()-this._elapsed,this._dispatchChange(s)}))},this._getSliderValue=()=>{const t=this._elapsed/this._totalDuration;return Math.min(t*this._maxIndex,this._maxIndex)},this._updateSlider=()=>{const t=this._getSliderValue();this._dataIndex=Math.floor(t),this._slider.setValue(Math.min(t,this._maxIndex)),this._dispatchChange(Math.floor(t))},this._dispatchChange=t=>{const n=Math.floor(t);n!==this._activeIndex&&(this._dataIndex=n,this._activeIndex=n,n!==this._maxIndex&&this.dispatchCustomEvent(tn.change))},this.play=()=>Kot(this,void 0,void 0,function*(){this._isPlaying||(this._controller.togglePause(),this._isPlaying=!0,this._elapsed>=this._totalDuration&&(this._elapsed=0),this._startTime=Date.now()-this._elapsed,this.dispatchCustomEvent(tn.play),this._rafId=st.getRequestAnimationFrame()(this._play.bind(this)))}),this._play=()=>{this._elapsed=Date.now()-this._startTime;const t=this._getSliderValue();this._updateSlider(),t>=this._maxIndex?this._playEnd():this._rafId=st.getRequestAnimationFrame()(this._play.bind(this))},this._playEnd=()=>{this._isPlaying=!1,st.getCancelAnimationFrame()(this._rafId),this._controller.togglePlay(),this.dispatchCustomEvent(tn.end)},this.pause=()=>{this._isPlaying&&(this._isPlaying=!1,this._elapsed=Date.now()-this._startTime,st.getCancelAnimationFrame()(this._rafId),this._controller.togglePlay(),this.dispatchCustomEvent(tn.pause))},this.backward=()=>{const t=Date.now(),n=1*this._interval,s=this._elapsed-n;s<=0?(this._elapsed=0,this._startTime=t):(this._elapsed=s,this._startTime=this._startTime+this._interval),this._updateSlider(),this.dispatchCustomEvent(tn.backward)},this.forward=()=>{const t=Date.now(),n=1*this._interval,s=this._elapsed+n;s>=this._totalDuration?(this._startTime=t-this._totalDuration,this._elapsed=this._totalDuration):(this._startTime=this._startTime-n,this._elapsed=s),this._updateSlider(),this.dispatchCustomEvent(tn.forward)},this._initAttributes(),this._initDataIndex(),this._initEvents()}dispatchCustomEvent(e){super.dispatchCustomEvent(e,this._dataIndex)}render(){super.render()}}var Ks;(function(i){i.drawStart="drawStart",i.drawEnd="drawEnd",i.drawing="drawing",i.moving="moving",i.moveStart="moveStart",i.moveEnd="moveEnd",i.brushClear="brushClear"})(Ks||(Ks={}));const Kc={trigger:"pointerdown",updateTrigger:"pointermove",endTrigger:"pointerup",resetTrigger:"pointerupoutside",hasMask:!0,brushMode:"single",brushType:"rect",brushStyle:{fill:"#B0C8F9",fillOpacity:.2,stroke:"#B0C8F9",strokeWidth:2},brushMoved:!0,removeOnClick:!0,delayType:"throttle",delayTime:10,interactiveRange:{y1:-1/0,y2:1/0,x1:-1/0,x2:1/0}},Yot=5;function qot(){on(),ZP()}const Zot={debounce:zd,throttle:Hu};qot();let Boe=class joe extends Zn{constructor(e,t){super(t!=null&&t.skipDefault?e:se({},joe.defaultAttributes,e)),this.name="brush",this._activeDrawState=!1,this._cacheDrawPoints=[],this._isDrawedBeforeEnd=!1,this._activeMoveState=!1,this._operatingMaskMoveDx=0,this._operatingMaskMoveDy=0,this._operatingMaskMoveRangeX=[-1/0,1/0],this._operatingMaskMoveRangeY=[-1/0,1/0],this._brushMaskAABBBoundsDict={},this._onBrushStart=n=>{var s;if(this._outOfInteractiveRange(n))return;n.stopPropagation();const r=(s=this.attribute.brushMoved)===null||s===void 0||s;this._activeMoveState=r&&this._isPosInBrushMask(n),this._activeDrawState=!this._activeMoveState,this._activeDrawState&&this._initDraw(n),this._activeMoveState&&this._initMove(n)},this._onBrushing=n=>{this._outOfInteractiveRange(n)||((this._activeDrawState||this._activeMoveState)&&n.stopPropagation(),this._activeDrawState&&this._drawing(n),this._activeMoveState&&this._moving(n))},this._onBrushingWithDelay=this.attribute.delayTime===0?this._onBrushing:Zot[this.attribute.delayType](this._onBrushing,this.attribute.delayTime),this._onBrushEnd=n=>{var s;if(!this._activeDrawState&&!this._activeMoveState)return;n.preventDefault();const{removeOnClick:r=!0}=this.attribute;this._activeDrawState&&!this._isDrawedBeforeEnd&&r?(!((s=this._operatingMask)===null||s===void 0)&&s._AABBBounds.empty()&&this._dispatchEvent(Ks.brushClear,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:n}),this._container.incrementalClearChild(),this._brushMaskAABBBoundsDict={}):(this._activeDrawState&&this._dispatchEvent(Ks.drawEnd,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:n}),this._activeMoveState&&this._dispatchEvent(Ks.moveEnd,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:n})),this._activeDrawState=!1,this._activeMoveState=!1,this._isDrawedBeforeEnd=!1,this._operatingMask&&this._operatingMask.setAttribute("pickable",!1)}}_bindBrushEvents(){if(this.attribute.disableTriggerEvent)return;const{trigger:e=Kc.trigger,updateTrigger:t=Kc.updateTrigger,endTrigger:n=Kc.endTrigger,resetTrigger:s=Kc.resetTrigger}=this.attribute;this.stage.addEventListener(e,this._onBrushStart),this.stage.addEventListener(t,this._onBrushingWithDelay),this.stage.addEventListener(n,this._onBrushEnd),this.stage.addEventListener(s,this._onBrushEnd)}_isPosInBrushMask(e){const t=this.eventPosToStagePos(e),n=this._container.getChildren();for(let s=0;s<n.length;s++){const{points:r=[],dx:a=0,dy:o=0}=n[s].attribute,l=r.map(c=>({x:c.x+a,y:c.y+o}));if(ZN(l,t.x,t.y))return this._operatingMask=n[s],!0}return!1}_initDraw(e){const{brushMode:t}=this.attribute,n=this.eventPosToStagePos(e);this._cacheDrawPoints=[n],this._isDrawedBeforeEnd=!1,t==="single"&&(this._brushMaskAABBBoundsDict={},this._container.incrementalClearChild()),this._addBrushMask(),this._dispatchEvent(Ks.drawStart,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:e})}_initMove(e){var t,n;this._cacheMovePoint=this.eventPosToStagePos(e),this._operatingMaskMoveDx=(t=this._operatingMask.attribute.dx)!==null&&t!==void 0?t:0,this._operatingMaskMoveDy=(n=this._operatingMask.attribute.dy)!==null&&n!==void 0?n:0;const{interactiveRange:s}=this.attribute,{minY:r=-1/0,maxY:a=1/0,minX:o=-1/0,maxX:l=1/0}=s,{x1:c,x2:u,y1:h,y2:d}=this._operatingMask.globalAABBBounds,p=o-c,f=l-u,g=r-h,m=a-d;this._operatingMaskMoveRangeX=[p,f],this._operatingMaskMoveRangeY=[g,m],this._operatingMask.setAttribute("pickable",!0),this._dispatchEvent(Ks.moveStart,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:e})}_drawing(e){var t,n;const s=this.eventPosToStagePos(e),{sizeThreshold:r=Yot,brushType:a}=this.attribute,o=this._cacheDrawPoints.length;if(o>0){const p=(t=this._cacheDrawPoints[this._cacheDrawPoints.length-1])!==null&&t!==void 0?t:{};if(s.x===p.x&&s.y===p.y)return}a==="polygon"||o<=1?this._cacheDrawPoints.push(s):this._cacheDrawPoints[o-1]=s;const l=this._computeMaskPoints();this._operatingMask.setAttribute("points",l);const{x1:c=0,x2:u=0,y1:h=0,y2:d=0}=(n=this._operatingMask)===null||n===void 0?void 0:n._AABBBounds;this._isDrawedBeforeEnd=!this._operatingMask._AABBBounds.empty()&&(Math.abs(u-c)>r||Math.abs(h-d)>r),this._isDrawedBeforeEnd&&(this._brushMaskAABBBoundsDict[this._operatingMask.name]=this._operatingMask.AABBBounds,this._dispatchEvent(Ks.drawing,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:e}))}_moving(e){const t=this._cacheMovePoint,n=this.eventPosToStagePos(e);if(n.x===(t==null?void 0:t.x)&&n.y===(t==null?void 0:t.y))return;const s=n.x-t.x,r=n.y-t.y,a=Math.min(this._operatingMaskMoveRangeX[1],Math.max(this._operatingMaskMoveRangeX[0],s))+this._operatingMaskMoveDx,o=Math.min(this._operatingMaskMoveRangeY[1],Math.max(this._operatingMaskMoveRangeY[0],r))+this._operatingMaskMoveDy;this._operatingMask.setAttributes({dx:a,dy:o}),this._brushMaskAABBBoundsDict[this._operatingMask.name]=this._operatingMask.AABBBounds,this._dispatchEvent(Ks.moving,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:e})}_computeMaskPoints(){const{brushType:e,xRange:t=[0,0],yRange:n=[0,0]}=this.attribute;let s=[];const r=this._cacheDrawPoints[0],a=this._cacheDrawPoints[this._cacheDrawPoints.length-1];return s=e==="rect"?[r,{x:a.x,y:r.y},a,{x:r.x,y:a.y}]:e==="x"?[{x:r.x,y:n[0]},{x:a.x,y:n[0]},{x:a.x,y:n[1]},{x:r.x,y:n[1]}]:e==="y"?[{x:t[0],y:r.y},{x:t[0],y:a.y},{x:t[1],y:a.y},{x:t[1],y:r.y}]:Ta(this._cacheDrawPoints),s}_addBrushMask(){var e;const{brushStyle:t,hasMask:n}=this.attribute,s=Ae.polygon(Object.assign(Object.assign({points:Ta(this._cacheDrawPoints),cursor:"move",pickable:!1},t),{opacity:n?(e=t.opacity)!==null&&e!==void 0?e:1:0}));s.name=`brush-${Date.now()}`,this._operatingMask=s,this._container.add(s),this._brushMaskAABBBoundsDict[s.name]=s.AABBBounds}_outOfInteractiveRange(e){const{interactiveRange:t}=this.attribute,{minY:n=-1/0,maxY:s=1/0,minX:r=-1/0,maxX:a=1/0}=t,o=this.eventPosToStagePos(e);return o.x>a||o.x<r||o.y>s||o.y<n}eventPosToStagePos(e){return this.stage.eventPointTransform(e)}render(){this._bindBrushEvents();const e=this.createOrUpdateChild("brush-container",{},"group");this._container=e}releaseBrushEvents(){const{delayType:e="throttle",delayTime:t=0,trigger:n=Kc.trigger,updateTrigger:s=Kc.updateTrigger,endTrigger:r=Kc.endTrigger,resetTrigger:a=Kc.resetTrigger}=this.attribute;this.stage.removeEventListener(n,this._onBrushStart),this.stage.removeEventListener(s,this._onBrushingWithDelay),this.stage.removeEventListener(r,this._onBrushEnd),this.stage.removeEventListener(a,this._onBrushEnd)}};Boe.defaultAttributes=Kc;const LG=(i,...e)=>{const t=[i.shape,...e.map(r=>r==null?void 0:r.shape)],n=[i.key,...e.map(r=>r==null?void 0:r.key)],s=[i.value,...e.map(r=>r==null?void 0:r.value)];return se(i,...e,{shape:t.every(B)?void 0:se({},...t),key:n.every(B)?void 0:se({},...n),value:s.every(B)?void 0:se({},...s)})},Ag=i=>{const{width:e,height:t,wordBreak:n="break-word",textAlign:s,textBaseline:r,text:a}=i;return Array.isArray(a)?{width:e,height:t,wordBreak:n,textAlign:s,textBaseline:r,singleLine:!1,textConfig:q(a).map(o=>Object.assign(Object.assign({},i),{text:o}))}:{width:e,height:t,wordBreak:n,textAlign:s,textBaseline:r,singleLine:!1,textConfig:a==null?void 0:a.text}},Jot={panel:{visible:!0,cornerRadius:[3,3,3,3],fill:"white",shadow:!0,shadowBlur:12,shadowColor:"rgba(0, 0, 0, 0.1)",shadowOffsetX:0,shadowOffsetY:4,shadowSpread:0,stroke:"white"},titleStyle:{value:{fill:"#4E5969",fontFamily:fv,fontSize:14,lineHeight:18,textAlign:"left",textBaseline:"middle"},spaceRow:6},contentStyle:{shape:{fill:"black",size:8,symbolType:"circle",spacing:6},key:{fill:"#4E5969",fontFamily:fv,fontSize:12,lineHeight:18,textAlign:"left",textBaseline:"middle",spacing:26},value:{fill:"#4E5969",fontFamily:fv,fontSize:12,lineHeight:18,textAlign:"right",textBaseline:"middle",spacing:0},spaceRow:6},padding:10,positionX:"right",positionY:"bottom",offsetX:10,offsetY:10,parentBounds:new Qi().setValue(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),autoCalculatePosition:!0,autoMeasure:!0,pickable:!1,childrenPickable:!1,zIndex:500},Qot=["pointerX","pointerY","offsetX","offsetY","positionX","positionY","parentBounds"];function elt(){on(),Ku(),Mo(),$c(),Ud()}elt();let Noe=class ca extends Zn{constructor(e,t){super(t!=null&&t.skipDefault?e:se({},ca.defaultAttributes,e),t),this.name="tooltip"}render(){var e;const{visible:t,content:n,panel:s,keyWidth:r,valueWidth:a,hasContentShape:o,autoCalculatePosition:l,autoMeasure:c,align:u}=this.attribute;if(!t)return void this.hideAll();c&&ca.measureTooltip(this.attribute),l&&ca.calculateTooltipPosition(this.attribute);const h=Cr(this.attribute.padding);this._tooltipPanel=this.createOrUpdateChild("tooltip-background",Object.assign({visible:!0},s),"rect"),this._tooltipTitleContainer=this.createOrUpdateChild("tooltip-title",{visible:!0,x:h[3],y:h[0]},"group");const d=ca.getTitleAttr(this.attribute);this._tooltipTitleSymbol=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-shape",se({symbolType:"circle"},d.shape,{visible:en(d)&&en(d.shape)}),"symbol"),typeof d.value.text!="object"||d.value.text===null||d.value.text.type!=="rich"&&d.value.text.type!=="html"?d.value.multiLine?this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({visible:en(d)&&en(d.value)},Ag(d.value)),"richtext"):this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({text:(e=d.value.text)!==null&&e!==void 0?e:"",visible:en(d)&&en(d.value)},d.value),"text"):d.value.text.type==="rich"?this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({visible:en(d)&&en(d.value)},Ag(d.value)),"richtext"):d.value.text.type==="html"&&(this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({html:Object.assign(Object.assign({dom:d.value.text.text},Zk),d.value),visible:en(d)&&en(d.value),width:d.value.width,height:d.value.height,wordBreak:d.value.wordBreak,textAlign:d.value.textAlign,textBaseline:d.value.textBaseline,singleLine:!1,textConfig:[]},d.value),"richtext"));const p=en(d.shape)?d.shape.size+d.shape.spacing:0,{textAlign:f,textBaseline:g}=d.value,m=s.width-h[3]-h[0]-p;f==="center"?this._tooltipTitle.setAttribute("x",p+m/2):f==="right"||f==="end"?this._tooltipTitle.setAttribute("x",p+m):this._tooltipTitle.setAttribute("x",p),g==="bottom"?this._tooltipTitle.setAttribute("y",d.height):g==="middle"?this._tooltipTitle.setAttribute("y",d.height/2):this._tooltipTitle.setAttribute("y",0);const y=en(d)?d.height+d.spaceRow:0;if(this._tooltipContent=this.createOrUpdateChild("tooltip-content",{visible:!0},"group"),this._tooltipContent.removeAllChild(!0),n&&n.length){this._tooltipContent.setAttribute("x",h[3]),this._tooltipContent.setAttribute("y",h[0]+y);let b=0;n.forEach((x,S)=>{const C=ca.getContentAttr(this.attribute,S);if(!en(C))return;const w=`tooltip-content-${S}`,A=this._tooltipContent.createOrUpdateChild(w,{visible:!0,x:0,y:b},"group"),T=C.shape.size+C.shape.spacing;let E=u==="right"?(o?T:0)+(en(C.key)?r+C.key.spacing:0)+(en(C.value)?a:0):0;this._createShape(u==="right"?E-C.shape.size/2:E+C.shape.size/2,C,A,w),o&&(u==="right"?E-=T:E+=T);const P=this._createKey(C,A,w);P&&(KW(u,P,C.key.textAlign,E,r),P.setAttribute("y",0),u==="right"?E-=r+C.key.spacing:E+=r+C.key.spacing);const O=this._createValue(C,A,w);if(O){let M="right";F(C.value.textAlign)?M=C.value.textAlign:en(C.key)||u==="right"||(M="left"),O.setAttribute("textAlign",M),KW(u,O,M,E,a),O.setAttribute("y",0)}b+=C.height+C.spaceRow})}}_createShape(e,t,n,s){var r;if(en(t.shape))return n.createOrUpdateChild(`${s}-shape`,Object.assign({visible:!0,x:e,y:t.shape.size/2+(((r=au(t.key.lineHeight,t.key.fontSize))!==null&&r!==void 0?r:t.key.fontSize)-t.shape.size)/2},t.shape),"symbol")}_createKey(e,t,n){var s;if(en(e.key)){let r;return r=e.key.multiLine?t.createOrUpdateChild(`${n}-key`,Object.assign(Object.assign({visible:!0},Ag(e.key)),{textBaseline:"top"}),"richtext"):typeof e.key.text!="object"||e.key.text===null||e.key.text.type!=="rich"&&e.key.text.type!=="html"?t.createOrUpdateChild(`${n}-key`,Object.assign(Object.assign({visible:!0,text:(s=e.key.text)!==null&&s!==void 0?s:""},e.key),{textBaseline:"top"}),"text"):e.key.text.type==="rich"?t.createOrUpdateChild(`${n}-value`,Object.assign(Object.assign({visible:!0},Ag(e.key)),{textBaseline:"top"}),"richtext"):t.createOrUpdateChild(`${n}-value`,{html:Object.assign(Object.assign({dom:e.key.text.text},Zk),e.key)},"richtext"),r}}_createValue(e,t,n){var s;if(en(e.value)){let r;return r=e.value.multiLine?t.createOrUpdateChild(`${n}-value`,Object.assign(Object.assign({visible:!0},Ag(e.value)),{textBaseline:"top"}),"richtext"):typeof e.value.text!="object"||e.value.text===null||e.value.text.type!=="rich"&&e.value.text.type!=="html"?t.createOrUpdateChild(`${n}-value`,Object.assign(Object.assign({visible:!0,text:(s=e.value.text)!==null&&s!==void 0?s:""},e.value),{textBaseline:"top"}),"text"):e.value.text.type==="rich"?t.createOrUpdateChild(`${n}-value`,Object.assign(Object.assign({visible:!0},Ag(e.value)),{textBaseline:"top"}),"richtext"):t.createOrUpdateChild(`${n}-value`,{html:Object.assign({dom:e.value.text.text,container:"",width:30,height:30,style:{}},e.value)},"richtext"),r}}setAttributes(e,t){const n=Object.keys(e);this.attribute.autoCalculatePosition&&n.every(s=>Qot.includes(s))?(this._mergeAttributes(e,n),B(this.attribute.panel.width)&&this.attribute.autoMeasure&&ca.measureTooltip(this.attribute),ca.calculateTooltipPosition(this.attribute),super.setAttributes({x:this.attribute.x,y:this.attribute.y},t)):super.setAttributes(e,t)}static calculateTooltipPosition(e){const{width:t=0,height:n=0}=e.panel,{offsetX:s,offsetY:r,pointerX:a,pointerY:o,positionX:l,positionY:c,parentBounds:u}=e;let h=a,d=o;return l==="left"?h-=t+s:l==="center"?h-=t/2:h+=s,c==="top"?d-=n+r:c==="middle"?d-=n/2:d+=r,h+t>u.x2&&(h-=t+s),d+n>u.y2&&(d-=n+r),h<u.x1&&(h=u.x1),d<u.y1&&(d=u.y1),e.x=h,e.y=d,e}static measureTooltip(e){const{content:t,contentStyle:n}=e,s=Cr(e.padding),r=ca.getTitleAttr(e);let a=0,o=s[0]+s[2],l=0;const{value:c,shape:u}=r,{visible:h=!1,symbolType:d=""}=u??{};if(F(c)&&typeof r.value.text!="object"){const{width:p,height:f}=Ym(c).quickMeasure(c.text);a=p,l=f}if(h&&pk[d]&&(a+=u.size+u.spacing,l=Math.max(u.size,l)),e.title&&(e.title.width=a,e.title.height=l),en(r)&&(o+=l+r.spaceRow),t&&t.length){const p=[];if(t.forEach((f,g)=>{const m=ca.getContentAttr(e,g);(f.key||f.value)&&en(m)&&p.push([f,m])}),p.length){let f=!1;const g=[],m=[],y=[];p.forEach(([C,w],A)=>{var T;const{key:E,value:P,shape:O,spaceRow:M}=w,R=en(O),j=(T=O==null?void 0:O.symbolType)!==null&&T!==void 0?T:"",I=Ym(E),D=Ym(P);let z=0;if(en(E)){const{width:$,height:V}=I.quickMeasure(E.text);m.push($),z=Math.max(z,V)}if(en(P)){const{width:$,height:V}=D.quickMeasure(P.text);y.push($),z=Math.max(z,V)}R&&pk[j]&&(f=!0,g.push(O.size),z=Math.max(O.size,z)),C.height=z,o+=z,A<p.length-1&&(o+=M??n.spaceRow)});const b=g.length?Math.max(...g):0,x=m.length?Math.max(...m):0,S=y.length?Math.max(...y):0;a=Math.max(x+S+n.key.spacing+n.value.spacing+(f?b+n.shape.spacing:0),a),t.forEach(C=>{C.width=a}),e.hasContentShape=f,e.keyWidth=x,e.valueWidth=S}}return e.panel.width=a+s[1]+s[3],e.panel.height=o,e}static getTitleAttr(e){return LG({},ca.defaultAttributes.titleStyle,ca.defaultAttributes.title,e.titleStyle,e.title)}static getContentAttr(e,t){return LG({},ca.defaultAttributes.contentStyle,e.contentStyle,e.content[t])}};Noe.defaultAttributes=Jot;const aT=Nn;function tlt(i,e){let t=0,n=2*Math.PI;const s=F(i),r=F(e);for(s||r?r?s?(t=i,n=e):(t=e-2*Math.PI,n=e):(t=i,n=i+2*Math.PI):(t=0,n=2*Math.PI);n<=t;)n+=2*Math.PI;for(;t>2*Math.PI;)t-=2*Math.PI,n-=2*Math.PI;for(;n<0;)t+=2*Math.PI,n+=2*Math.PI;return{startAngle:t,endAngle:n}}function ilt(i,e,t){return i.x1>e||i.x2<e||i.y1>t||i.y2<t}function $oe(i,e){const t=[];return i.forEach(n=>{const s=+n[e];Z(s)&&t.push(s)}),t.length===0?null:Mn(t)}function i4(i,e){const t=[];return i.forEach(n=>{const s=+n[e];Z(s)&&t.push(s)}),t.length===0?null:an(t)}function zoe(i,e){return i.reduce((t,n)=>{const s=e?+n[e]:+n;return Z(s)&&(t+=s),t},0)}function Hoe(i,e){let t=0,n=0;return i.forEach(s=>{const r=e?+s[e]:+s;Z(r)&&(t+=r,n++)}),t/n}function Voe(i,e){const t=Hoe(i,e);return i.length<=1?0:i.reduce((s,r)=>s+(e?+r[e]:+r-t)**2,0)/(i.length-1)}function nlt(i,e){return Math.sqrt(Voe(i,e))}function slt(i,e){return uKe(i.map(t=>t[e]))}function rlt(i,e,t){const{predict:n}=dit(i,l=>l[e],l=>l[t]),s=$oe(i,e),r=i4(i,e),a=n(s),o=n(r);return[{[e]:s,[t]:a},{[e]:r,[t]:o}]}function alt(i){let e="center",t="middle";return e=(i=kd(i))>=Math.PI*(7/6)&&i<=Math.PI*(11/6)?"right":i>=Math.PI*(1/6)&&i<=Math.PI*(5/6)?"left":"center",t=i>=Math.PI*(5/3)||i<=Math.PI*(1/3)?"bottom":i>=Math.PI*(2/3)&&i<=Math.PI*(4/3)?"top":"middle",{align:e,baseline:t}}function DG(i,e){const t=oT(i),n=oT(e),s=Math.asin((i.x*e.y-e.x*i.y)/t/n),r=Math.acos((i.x*e.x+i.y*e.y)/t/n);return s<0?-r:r}function oT(i,e={x:0,y:0}){return kn.distancePP(i,e)}function olt(i,e=2){const t=i.reduce((c,u)=>c+(isNaN(u)?0:u),0);if(t===0)return 0;const n=Math.pow(10,e),s=i.map(c=>(isNaN(c)?0:c)/t*n*100),r=100*n,a=s.map(c=>Math.floor(c));let o=a.reduce((c,u)=>c+u,0);const l=s.map((c,u)=>c-a[u]);for(;o<r;){let c=Number.NEGATIVE_INFINITY,u=null;for(let h=0;h<l.length;h++)l[h]>c&&(c=l[h],u=h);++a[u],l[u]=0,++o}return a.map(c=>c/n)}function FG(i){return Z(i.x)&&Z(i.y)}function Vi(i,e,t){let n=!1;if(e&&ee(e)){for(const s of i)for(const r of s.getSeries(t))if(n=!!e.call(null,r),n)return n}return n}function Uoe(i,e){const t=[];for(const n of i)for(const s of n.getSeries(e))t.push(s);return t}const n4=(i,e)=>{for(let t=0;t<i.length;t++){const n=i[t].getSeries();for(let s=0;s<n.length;s++){const r=n[s];if(e&&r&&r.coordinate===e||!e&&r)return r}}return null};function lw(i){return function(e){let t;return t=ie(i)?i.reduce((n,s)=>n==null?void 0:n[s],e):e==null?void 0:e[i],t}}var re;(function(i){i.area="area",i.line="line",i.bar="bar",i.bar3d="bar3d",i.rangeColumn="rangeColumn",i.rangeColumn3d="rangeColumn3d",i.rangeArea="rangeArea",i.dot="dot",i.geo="geo",i.link="link",i.map="map",i.pie="pie",i.pie3d="pie3d",i.radar="radar",i.rose="rose",i.scatter="scatter",i.circularProgress="circularProgress",i.wordCloud="wordCloud",i.wordCloud3d="wordCloud3d",i.funnel="funnel",i.funnel3d="funnel3d",i.linearProgress="linearProgress",i.boxPlot="boxPlot",i.sankey="sankey",i.gaugePointer="gaugePointer",i.gauge="gauge",i.treemap="treemap",i.sunburst="sunburst",i.circlePacking="circlePacking",i.waterfall="waterfall",i.heatmap="heatmap",i.correlation="correlation",i.liquid="liquid",i.venn="venn",i.mosaic="mosaic"})(re||(re={}));var BG;(function(i){i.label="label",i.point="point",i.line="line",i.area="area",i.bar="bar",i.bar3d="bar3d",i.boxPlot="boxPlot",i.outlier="outlier",i.circlePacking="circlePacking",i.group="group",i.gridBackground="gridBackground",i.grid="grid",i.dot="dot",i.title="title",i.subTitle="subTitle",i.symbol="symbol",i.funnel="funnel",i.funnel3d="funnel3d",i.transform="transform",i.transform3d="transform3d",i.transformLabel="transformLabel",i.outerLabel="outerLabel",i.outerLabelLine="outerLabelLine",i.pin="pin",i.pinBackground="pinBackground",i.pointer="pointer",i.segment="segment",i.track="track",i.cell="cell",i.cellBackground="cellBackground",i.link="link",i.arrow="arrow",i.pie="pie",i.pie3d="pie3d",i.labelLine="labelLine",i.progress="progress",i.minLabel="minLabel",i.maxLabel="maxLabel",i.rose="rose",i.node="node",i.sunburst="sunburst",i.nonLeaf="nonLeaf",i.leaf="leaf",i.nonLeafLabel="nonLeafLabel",i.leaderLine="leaderLine",i.stackLabel="stackLabel",i.word="word",i.fillingWord="fillingWord",i.wordMask="wordMask",i.nodePoint="nodePoint",i.ripplePoint="ripplePoint",i.centerPoint="centerPoint",i.centerLabel="centerLabel",i.barBackground="barBackground",i.lineLabel="lineLabel",i.areaLabel="areaLabel",i.liquidGroup="liquidGroup",i.liquid="liquid",i.liquidBackground="liquidBackground",i.liquidOutline="liquidOutline",i.circle="circle",i.overlap="overlap",i.overlapLabel="overlapLabel"})(BG||(BG={}));function Woe(i){var e,t;const{type:n}=i;return n===re.sankey?(e=i.direction)!==null&&e!==void 0?e:"horizontal":(t=i.direction)!==null&&t!==void 0?t:"vertical"}const llt={primaryFontColor:"titleFontColor",tertiaryFontColor:"labelFontColor",axisLabelFontColor:"axisFontColor",axisMarkerFontColor:"labelReverseFontColor",dataZoomHandleStrokeColor:"dataZoomHandlerStrokeColor",sliderHandleColor:"dataZoomHandlerFillColor",sliderRailColor:"dataZoomBackgroundColor",sliderTrackColor:"dataZoomSelectedColor",playerControllerColor:"dataZoomSelectedColor",popupBackgroundColor:"tooltipBackgroundColor",hoverBackgroundColor:"axisGridColor"},clt={titleFontColor:"primaryFontColor",labelFontColor:"tertiaryFontColor",axisFontColor:"axisLabelFontColor",labelReverseFontColor:"axisMarkerFontColor",dataZoomHandlerStrokeColor:"dataZoomHandleStrokeColor",dataZoomHandlerFillColor:"sliderHandleColor",dataZoomBackgroundColor:"sliderRailColor",dataZoomSelectedColor:"sliderTrackColor",tooltipBackgroundColor:"popupBackgroundColor"};function ult(i,e){const t=llt[e];if(t&&i[t])return i[t];if(i[e])return i[e];const n=clt[e];return n?i[n]:void 0}function c1(i,e){var t;if(!i)return[];const n=Goe(i,e);if(!n||ie(n))return(t=n)!==null&&t!==void 0?t:[];if(Ke(n)){const{dataScheme:s}=n;return s?s4(s)?s.map(r=>Object.assign(Object.assign({},r),{scheme:r.scheme.map(a=>lT(a)?nB(i,a,e):a).filter(F)})):s.map(r=>lT(r)?nB(i,r,e):r).filter(F):[]}return[]}function iB(i,e){var t,n;return s4(i)?(n=(t=i.find(s=>F(s.isAvailable)?ee(s.isAvailable)?s.isAvailable(e):!!s.isAvailable:!F(s.maxDomainLength)||(e==null?void 0:e.length)<=s.maxDomainLength))===null||t===void 0?void 0:t.scheme)!==null&&n!==void 0?n:i[i.length-1].scheme:i}function nB(i,e,t){var n;const s=Goe(i,t);if(!s)return;let r;const{palette:a}=s;if(Ke(a)&&(r=(n=ult(a,e.key))!==null&&n!==void 0?n:e.default),!r)return;if(B(e.a)&&B(e.l)||!be(r))return r;let o=new An(r);if(F(e.l)){const{r:l,g:c,b:u}=o.color,{h,s:d}=kP(l,c,u),p=AA(h,d,e.l),f=new An(`rgb(${p.r}, ${p.g}, ${p.b})`);f.setOpacity(o.color.opacity),o=f}return F(e.a)&&o.setOpacity(e.a),o.toRGBA()}const hlt=(i,e,t)=>{if(e&&lT(i)){const n=nB(e,i,t);if(n)return n}return i};function lT(i){return i&&i.type==="palette"&&!!i.key}function s4(i){return!(!ie(i)||i.length===0)&&i.every(e=>F(e.scheme))}function dlt(i){return ie(i)?{dataScheme:i}:i}function Goe(i,e){var t,n;const{type:s}=e??{};let r;if(!e||B(s))r=i==null?void 0:i.default;else{const a=Woe(e);r=(n=(t=i==null?void 0:i[`${s}_${a}`])!==null&&t!==void 0?t:i==null?void 0:i[s])!==null&&n!==void 0?n:i==null?void 0:i.default}return r}class Hx extends bf{range(e){return e?(this._range=e,this._resetRange(),this):super.range()}domain(e){return e?(super.domain(e),this._resetRange(),this):super.domain()}_resetRange(){if(!s4(this._range))return void super.range(this._range);const e=iB(this._range,this._domain);super.range(e)}}const plt={linear:Ma,band:eg,point:Hat,ordinal:bf,threshold:J5,colorOrdinal:Hx};function sB(i){const e=plt[i];return e?new e:null}function flt(i,e){if("scale"in i&&i.scale)return be(i.scale)&&(e!=null&&e.globalScale)?e.globalScale.registerMarkAttributeScale(i,e.seriesId):i.scale;const t=sB(i.type);return t&&glt(t,i),t}function glt(i,e){i&&e&&(e.domain&&i.domain(e.domain),e.range&&i.range(e.range),e.specified&&i.specified&&i.specified(e.specified))}function Kt(i,e){if(!e)return i;const t=e.range(),n=Math.min(t[0],t[t.length-1]),s=Math.max(t[0],t[t.length-1]);return Math.min(Math.max(n,i),s)}function jG(i){return F(i==null?void 0:i.field)&&F(i==null?void 0:i.scale)}function r4(i){switch(i){case"left":case"right":case"top":case"bottom":return!0;default:return!1}}function Aa(i){return!!be(i)&&!!i.endsWith("%")&&Ty(i.substring(0,i.length-1))}function mlt(i){return!!Ke(i)&&("percent"in i||"offset"in i)}function Un(i,e,t,n=0){var s,r;return ye(i)?i:Aa(i)?Number(i.substring(0,i.length-1))*e/100:ee(i)?i(t):Ke(i)?e*((s=i.percent)!==null&&s!==void 0?s:0)+((r=i.offset)!==null&&r!==void 0?r:0):n}function Koe(i,e,t){var n,s,r,a;const o={top:0,bottom:0,left:0,right:0};return Object.values(i).every(l=>ye(l))?(o.top=(n=i.top)!==null&&n!==void 0?n:0,o.right=(s=i.right)!==null&&s!==void 0?s:0,o.bottom=(r=i.bottom)!==null&&r!==void 0?r:0,o.left=(a=i.left)!==null&&a!==void 0?a:0,o):([{orients:["left","right"],size:e.width},{orients:["top","bottom"],size:e.height}].forEach(l=>{l.orients.forEach(c=>{o[c]=Un(i[c],l.size,t)})}),o)}function ylt(i,e){return i?{width:Math.ceil(Math.min(i.x2-i.x1,e.width)),height:Math.ceil(Math.min(i.y2-i.y1,e.height))}:{width:0,height:0}}function Fu(i){let e={};return ie(i)?(B(i[0])||(e.top=e.left=e.bottom=e.right=i[0]),B(i[1])||(e.left=e.right=i[1]),B(i[2])||(e.bottom=i[2]),B(i[3])||(e.left=i[3]),e):ye(i)||Aa(i)||ee(i)||mlt(i)?(e.top=e.left=e.bottom=e.right=i,e):(Ke(i)&&(e=Object.assign({},i)),e)}function NG(i,e,t){return t?{x:i.x+e.x,y:i.y+e.y}:i}const bm=(i,e)=>{const t=Number(i),n=i.toString();return isNaN(t)&&n[n.length-1]==="%"?e*(Number(n.slice(0,n.length-1))/100):t},Xoe=[{maxDomainLength:10,scheme:["#1664FF","#1AC6FF","#FF8A00","#3CC780","#7442D4","#FFC400","#304D77","#B48DEB","#009488","#FF7DDA"]},{scheme:["#1664FF","#B2CFFF","#1AC6FF","#94EFFF","#FF8A00","#FFCE7A","#3CC780","#B9EDCD","#7442D4","#DDC5FA","#FFC400","#FAE878","#304D77","#8B959E","#B48DEB","#EFE3FF","#009488","#59BAA8","#FF7DDA","#FFCFEE"]}],_lt={default:{dataScheme:Xoe,palette:{backgroundColor:"#ffffff",borderColor:"#e3e5e8",shadowColor:"rgba(33,37,44,0.1)",hoverBackgroundColor:"#f1f2f5",sliderRailColor:"#f1f3f4",sliderHandleColor:"#ffffff",sliderTrackColor:"#0040ff",popupBackgroundColor:"#ffffff",primaryFontColor:"#21252c",secondaryFontColor:"#606773",tertiaryFontColor:"#89909d",axisLabelFontColor:"#89909d",disableFontColor:"#bcc1cb",axisMarkerFontColor:"#ffffff",axisGridColor:"#f1f2f5",axisDomainColor:"#d9dde4",dataZoomHandleStrokeColor:"#aeb5be",dataZoomChartColor:"#c9ced8",playerControllerColor:"#0040ff",scrollBarSliderColor:"rgba(0,0,0,0.3)",axisMarkerBackgroundColor:"#21252c",markLabelBackgroundColor:"#f1f2f5",markLineStrokeColor:"#606773",dangerColor:"#e33232",warningColor:"#ffc528",successColor:"#07a35a",infoColor:"#3073f2",discreteLegendPagerTextColor:"rgb(51, 51, 51)",discreteLegendPagerHandlerColor:"rgb(47, 69, 84)",discreteLegendPagerHandlerDisableColor:"rgb(170, 170, 170)",emptyCircleColor:"#e3e5e8",linearProgressTrackColor:"#E7EBED"}}},vlt={label:{visible:!1,offset:5,position:"top",style:{stroke:{type:"palette",key:"backgroundColor"},lineWidth:2}},point:{style:{symbolType:"circle"}},seriesMark:"area"},blt={label:{visible:!1,position:"outside",offset:5,style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}}},xlt={bar3d:{style:{length:3}},label:{visible:!1,style:{offset:12,position:"outside"}}},Slt={outerRadius:.8,innerRadius:.6,progress:{style:{fillOpacity:1}},track:{style:{fillOpacity:.2}},tickMask:{visible:!1,angle:3,offsetAngle:0,forceAlign:!0}},Clt={dot:{style:{size:10,fillOpacity:1}},symbol:{style:{size:10}},title:{style:{textAlign:"left",textBaseline:"middle",fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}},subTitle:{style:{textAlign:"left",textBaseline:"top",fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}}},Yoe=i=>{const e={label:{style:{fill:"white",textBaseline:"middle",lineWidth:2}},outerLabel:{style:{fontSize:{type:"token",key:"l4FontSize"},fill:{type:"palette",key:"secondaryFontColor"}},line:{style:{stroke:{type:"palette",key:"axisDomainColor"}}}},transformLabel:{style:{fontSize:{type:"token",key:"l4FontSize"},fill:{type:"palette",key:"secondaryFontColor"},textBaseline:"middle"}}};return e[i?"transform3d":"transform"]={style:{fill:{type:"palette",key:"axisGridColor"}}},e},wlt=Yoe(),Alt=Yoe(!0),klt={outerRadius:.8,innerRadius:.6,padAngle:1.146,segment:{style:{fillOpacity:1}},tickMask:{visible:!1,angle:3,offsetAngle:0,forceAlign:!0}},Tlt="M-0.020059 -0.978425 C-0.018029 -0.9888053 -0.013378 -1 0 -1 C0.01342 -1 0.01812 -0.989146 0.0201 -0.978425 C0.02161 -0.9702819 0.0692 -0.459505 0.09486 -0.184807 C0.10298 -0.097849 0.1089 -0.034548 0.11047 -0.018339 C0.11698 0.04908 0.07373 0.11111 0.00002 0.11111 C-0.07369 0.11111 -0.117184 0.04991 -0.110423 -0.018339 C-0.103662 -0.086591 -0.022089 -0.9680447 -0.020059 -0.978425Z",$G="M1 0 C1 0.55228 0.55228 1 0 1 C-0.552285 1 -1 0.55228 -1 0 C-1 -0.552285 -0.552285 -1 0 -1 C0.55228 -1 1 -0.552285 1 0Z",Elt={pointer:{type:"path",width:.4,height:.4,style:{path:Tlt}},pin:{width:.025,height:.025,style:{path:$G,fill:"#888"}},pinBackground:{width:.06,height:.06,style:{path:$G,fill:"#ddd"}}},Plt={label:{visible:!1,position:"top",offset:5,style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}},point:{style:{symbolType:"circle"}}},Olt={bandWidth:30,progress:{style:{fillOpacity:1}},track:{style:{fill:{type:"palette",key:"linearProgressTrackColor"},fillOpacity:1}}},Mlt={arrow:{style:{size:10}}},Ilt={defaultFillColor:"#f3f3f3",area:{style:{lineWidth:.5,strokeOpacity:1,stroke:"black",fillOpacity:1}},label:{interactive:!1,style:{fontSize:{type:"token",key:"l6FontSize"},lineHeight:{type:"token",key:"l6LineHeight"},textBaseline:"middle",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"},stroke:{type:"palette",key:"backgroundColor"}}}},Rlt={outerRadius:.6,pie:{style:{fillOpacity:1}},label:{visible:!1,interactive:!0,position:"outside",style:{fontWeight:"normal",stroke:{type:"palette",key:"backgroundColor"},fillOpacity:1}},innerLabel:{style:{lineWidth:2}},emptyCircle:{style:{fill:{type:"palette",key:"emptyCircleColor"},fillOpacity:1}}},Llt={outerRadius:.6,pie3d:{style:{height:10,fillOpacity:1}},label:{visible:!1,interactive:!0,position:"outside"}},Dlt={label:{visible:!1,offset:5,style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}},point:{style:{symbolType:"circle"}}},Flt={point:{style:{size:8,symbolType:"circle",lineWidth:0,fillOpacity:.8}},label:{visible:!1,offset:5,position:"top",style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}}},Blt={seriesFieldName:{total:"total",increase:"increase",decrease:"decrease"},leaderLine:{style:{stroke:"black",lineWidth:1,lineDash:[4,4]}},stackLabel:{visible:!0,offset:12,position:"withChange",style:{fill:"black",fontSize:{type:"token",key:"l4FontSize"}}},label:{visible:!1,offset:12,position:"inside",style:{lineWidth:2}}},jlt={word:{padding:1,style:{textAlign:"center",textBaseline:"alphabetic"}}},Nlt={word:{padding:1,style:{textAlign:"center",textBaseline:"alphabetic"}}},$lt={gapWidth:1,nodePadding:[5],nonLeaf:{visible:!1,style:{fillOpacity:.5}},label:{style:{fill:"white",textBaseline:"middle",textAlign:"center",fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}},nonLeafLabel:{padding:24,style:{fill:"black",stroke:{type:"palette",key:"backgroundColor"},lineWidth:2,fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},textBaseline:"middle",textAlign:"center"}}},Ie="__VCHART",xm=500,Sm=500,NI=`${Ie}_ARC_TRANSFORM_VALUE`,zlt=`${Ie}_ARC_RATIO`,zG=`${Ie}_ARC_START_ANGLE`,HG=`${Ie}_ARC_END_ANGLE`,Hlt=`${Ie}_ARC_K`,du=`${Ie}_ARC_MIDDLE_ANGLE`,Vlt=`${Ie}_ARC_QUADRANT`,Ult=`${Ie}_ARC_RADIAN`,yO=-Math.PI/2,a4=3*Math.PI/2,o4=-90,qoe=270,cT=.6,Wlt={innerRadius:0,outerRadius:1,startAngle:o4,endAngle:qoe,gap:0,labelLayout:{align:"center",offset:0,rotate:"radial"},sunburst:{style:{stroke:{type:"palette",key:"backgroundColor"},fillOpacity:1,cursor:"pointer"}},label:{visible:!0,style:{cursor:"pointer",fill:{type:"palette",key:"primaryFontColor"},fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}}},Glt={label:{visible:!1,offset:5,position:"inside",style:{lineWidth:2,fill:{type:"palette",key:"axisMarkerFontColor"}},minLabel:{position:"end"},maxLabel:{position:"start"}}},Klt={layoutPadding:5,circlePacking:{visible:!0,style:{cursor:"pointer",stroke:{type:"palette",key:"backgroundColor"}}},label:{visible:!0,style:{cursor:"pointer",fill:"black",stroke:{type:"palette",key:"backgroundColor"},lineWidth:2,fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}}},Xlt={cell:{style:{shape:"square",fillOpacity:1}},cellBackground:{visible:!1}},Ylt={link:{style:{fillOpacity:.15,round:!0}}},qlt={rose:{style:{fillOpacity:1}},label:{style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"},textAlign:"center",textBaseline:"middle"}}},Zlt={boxPlot:{style:{lineWidth:1}},label:{style:{lineWidth:2}}},Jlt={centerLabel:{visible:!0,position:"center",style:{fill:"#fff",text:""}},label:{visible:!0,position:"bottom",style:{fill:"#000"}}},Qlt={outlinePadding:10,liquidBackground:{style:{lineWidth:0,fillOpacity:.2}},liquidOutline:{style:{lineWidth:2}}},ect={circle:{style:{opacity:.8},state:{hover:{opacity:1}}},overlap:{style:{opacity:.8},state:{hover:{opacity:1,stroke:"white",lineWidth:2}}},label:{visible:!0,style:{fill:"white",textBaseline:"middle",textAlign:"center",fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"}}},overlapLabel:{visible:!0,style:{textBaseline:"middle",textAlign:"center",fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}}},tct={label:{visible:!1,position:"center",style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}},bar:{style:{lineWidth:1,stroke:{type:"palette",key:"backgroundColor"}}}},ict={scatter:Flt,line:Plt,area:vlt,bar:blt,bar3d:xlt,pie:Rlt,pie3d:Llt,map:Ilt,radar:Dlt,dot:Clt,link:Mlt,wordCloud:jlt,wordCloud3d:Nlt,funnel:wlt,funnel3d:Alt,linearProgress:Olt,circularProgress:Slt,waterfall:Blt,gauge:klt,gaugePointer:Elt,treemap:$lt,sunburst:Wlt,rangeColumn:Glt,circlePacking:Klt,heatmap:Xlt,sankey:Ylt,rose:qlt,boxPlot:Zlt,correlation:Jlt,liquid:Qlt,venn:ect,mosaic:tct},nct={text:{style:{fontSize:{type:"token",key:"l4FontSize"},fontWeight:"normal",fillOpacity:1}}},sct={label:{style:{fontSize:{type:"token",key:"l4FontSize"},fontWeight:"normal",fillOpacity:1,lineJoin:"bevel"}},area:{style:{fillOpacity:.2}},line:{style:{lineWidth:2,lineCap:"round",lineJoin:"round"}},point:{style:{size:8,stroke:{type:"palette",key:"backgroundColor"},lineWidth:1,fillOpacity:1}},word:{style:{fontWeight:null,fontSize:null}},fillingWord:{style:{fontWeight:null,fontSize:null}},sunburst:{style:{lineWidth:1,stroke:{type:"palette",key:"backgroundColor"}}},circlePacking:{style:{lineWidth:1,stroke:{type:"palette",key:"backgroundColor"}}},funnel3d:{style:{stroke:!1}},barBackground:{visible:!1,style:{fill:{type:"palette",key:"primaryFontColor",a:.06},stroke:"transparent"}}},rct={domainLine:{visible:!0},grid:{visible:!1},subGrid:{visible:!1},tick:{visible:!0},subTick:{visible:!1}},Zoe={label:{space:8},title:{space:8},maxHeight:"30%",unit:{visible:!1,style:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"axisLabelFontColor"},fontWeight:"normal",fillOpacity:1}}},act={label:{space:12,autoLimit:!0},title:{space:12,autoRotate:!0},maxWidth:"30%",unit:{visible:!1,style:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"axisLabelFontColor"},fontWeight:"normal",fillOpacity:1}}},oct=Object.assign(Object.assign({},Zoe),{label:{space:0}}),lct={domainLine:{visible:!0,style:{lineWidth:1,stroke:{type:"palette",key:"axisDomainColor"},strokeOpacity:1}},grid:{visible:!0,style:{lineWidth:1,stroke:{type:"palette",key:"axisGridColor"},strokeOpacity:1,lineDash:[]}},subGrid:{visible:!1,style:{lineWidth:1,stroke:{type:"palette",key:"axisGridColor"},strokeOpacity:1,lineDash:[4,4]}},tick:{visible:!0,inside:!1,tickSize:4,alignWithLabel:!0,style:{lineWidth:1,stroke:{type:"palette",key:"axisDomainColor"},strokeOpacity:1}},subTick:{visible:!1,tickSize:2,style:{lineWidth:1,stroke:{type:"palette",key:"axisDomainColor"},strokeOpacity:1}},label:{visible:!0,inside:!1,space:10,style:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"axisLabelFontColor"},fontWeight:"normal",fillOpacity:1}},title:{space:10,padding:0,style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"secondaryFontColor"},fontWeight:"normal",fillOpacity:1}}},cct={domainLine:{visible:!1},grid:{visible:!0},subGrid:{visible:!1},tick:{visible:!1},subTick:{visible:!1}},uct={grid:{smooth:!0,visible:!0},subGrid:{smooth:!0,visible:!1}},hct={grid:{visible:!0,style:{lineDash:[6,6]}},label:{space:5}},dct={style:{fill:"#B0C8F9",fillOpacity:.2,stroke:"#B0C8F9",lineWidth:2},brushMode:"single",brushType:"rect",brushMoved:!0,removeOnClick:!0,delayType:"throttle",delayTime:0},pct={trigger:"hover",bandField:{visible:!1,line:{type:"rect",visible:!0,style:{fill:{type:"palette",key:"axisGridColor"},opacity:.7,lineWidth:0,stroke:{type:"palette",key:"markLineStrokeColor"},lineDash:[2,3]}},label:{visible:!1,style:{fontWeight:"normal",fill:{type:"palette",key:"axisMarkerFontColor"},fontSize:{type:"token",key:"l5FontSize"}},labelBackground:{padding:{bottom:0,top:0,left:2,right:2},style:{fill:{type:"palette",key:"axisMarkerBackgroundColor"},cornerRadius:1}}}},linearField:{visible:!1,line:{type:"line",visible:!0,style:{stroke:{type:"palette",key:"markLineStrokeColor"},fill:"transparent",opacity:.7,lineDash:[2,3]}},label:{visible:!1,style:{fontWeight:"normal",fill:{type:"palette",key:"axisMarkerFontColor"},fontSize:{type:"token",key:"l5FontSize"}},labelBackground:{padding:{bottom:0,top:0,left:2,right:2},style:{fill:{type:"palette",key:"axisMarkerBackgroundColor"},cornerRadius:1}}}}},fct=`M-0.5-2.4h0.9c0.4,0,0.7,0.3,0.7,0.7v3.3c0,0.4-0.3,0.7-0.7,0.7h-0.9c-0.4,0-0.7-0.3-0.7-0.7v-3.3
C-1.2-2-0.9-2.4-0.5-2.4z M-0.4-1.4L-0.4-1.4c0,0,0,0.1,0,0.1v2.6c0,0.1,0,0.1,0,0.1l0,0c0,0,0-0.1,0-0.1v-2.6
C-0.4-1.4-0.4-1.4-0.4-1.4z M0.3-1.4L0.3-1.4c0,0,0,0.1,0,0.1v2.6c0,0.1,0,0.1,0,0.1l0,0c0,0,0-0.1,0-0.1v-2.6
C0.3-1.4,0.3-1.4,0.3-1.4z;`,VG=()=>({style:{symbolType:fct,fill:{type:"palette",key:"sliderHandleColor"},scaleX:1.2,scaleY:1.2,stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},lineWidth:1}}),UG=i=>({area:{style:{visible:i,stroke:!1,fill:{type:"palette",key:"dataZoomChartColor"}}},line:{style:{visible:i,stroke:{type:"palette",key:"dataZoomChartColor"},lineWidth:1}}}),gct={padding:[12,0],showDetail:"auto",brushSelect:!1,middleHandler:{visible:!1,background:{size:6,style:{stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},cornerRadius:2}},icon:{style:{size:4,fill:{type:"palette",key:"sliderHandleColor"},stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},symbolType:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",lineWidth:.5}}},background:{size:20,style:{fill:{type:"palette",key:"sliderRailColor"},lineWidth:0}},selectedBackground:{style:{fill:{type:"palette",key:"sliderTrackColor"},fillOpacity:.1,outerBorder:{stroke:{type:"palette",key:"sliderTrackColor"},strokeOpacity:.2,distance:-.5,lineWidth:1}}},selectedBackgroundChart:UG(!1),startHandler:VG(),endHandler:VG(),startText:{padding:8,style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}}},endText:{padding:8,style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}}},backgroundChart:UG(!0)},WG=(i,e)=>({fontSize:{type:"token",key:i},fill:{type:"palette",key:e},fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}),mct={title:{visible:!0,autoLimit:!1,autoFit:!1,style:WG("l1FontSize","primaryFontColor")},content:{visible:!0,style:WG("l2FontSize","tertiaryFontColor")}},Joe={orient:"right",position:"middle",padding:[16,24],title:{visible:!1,padding:0,textStyle:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"primaryFontColor"}},space:12},handler:{visible:!0},startText:{style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}},space:6},endText:{style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}},space:6},handlerText:{style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}},space:6}},GG=i=>{const e={width:200,height:8,style:{fill:{type:"palette",key:"sliderRailColor"}}};return i?(e.width=200,e.height=8):(e.width=8,e.height=200),Object.assign(Object.assign({},Joe),{rail:e,handler:{style:{symbolType:"circle",lineWidth:0,outerBorder:{lineWidth:2,distance:.8,stroke:"#ffffff"},shadowBlur:12,shadowOffsetX:0,shadowOffsetY:4,shadowColor:{type:"palette",key:"shadowColor"}}}})},yct={horizontal:GG(!0),vertical:GG(!1)},_ct={orient:"bottom",position:"middle",padding:[16,24],title:{visible:!1,padding:0,textStyle:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"primaryFontColor"},fontWeight:"normal"},space:12},pager:{textStyle:{fill:{type:"palette",key:"discreteLegendPagerTextColor"}},handler:{style:{fill:{type:"palette",key:"discreteLegendPagerHandlerColor"}},state:{disable:{fill:{type:"palette",key:"discreteLegendPagerHandlerDisableColor"}}}}},item:{visible:!0,spaceCol:10,spaceRow:6,padding:2,background:{state:{selectedHover:{fill:{type:"palette",key:"hoverBackgroundColor"}},unSelectedHover:{fill:{type:"palette",key:"hoverBackgroundColor"}}}},shape:{space:6,style:{lineWidth:0,fillOpacity:1,opacity:1},state:{unSelected:{fillOpacity:.2,opacity:1}}},label:{space:6,style:{fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"},fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},opacity:1},state:{unSelected:{fill:{type:"palette",key:"disableFontColor"},opacity:1}}}},allowAllCanceled:!1},KG=i=>{const e={style:{fill:{type:"palette",key:"sliderRailColor"}}};return i?(e.width=200,e.height=4):(e.height=200,e.width=4),Object.assign(Object.assign({},Joe),{sizeBackground:{fill:{type:"palette",key:"dataZoomChartColor"}},track:{style:{fill:{type:"palette",key:"sliderTrackColor",a:.8}}},rail:e,handler:{style:{symbolType:"circle",lineWidth:0,outerBorder:{lineWidth:2,distance:.8,stroke:{type:"palette",key:"sliderTrackColor"}},fill:{type:"palette",key:"sliderHandleColor"}}}})},vct={horizontal:KG(!0),vertical:KG(!1)},bct={visible:!0,offset:12,position:"top",space:10,nameLabel:{visible:!0,style:{textBaseline:"middle",textAlign:"left",fill:"black",fontSize:{type:"token",key:"l6FontSize"}}},valueLabel:{visible:!0,style:{textBaseline:"middle",textAlign:"left",fill:"black",fontSize:{type:"token",key:"l6FontSize"}}},background:{visible:!0,padding:{top:4,bottom:4,left:6,right:6},style:{cornerRadius:2,lineWidth:1,fill:"white",stroke:"grey"}},leader:{visible:!1,style:{lineWidth:1,stroke:"red"}}},XG={area:{style:{fill:{type:"palette",key:"axisDomainColor",a:.25}}},label:{style:{fontSize:{type:"token",key:"l4FontSize"},fontWeight:"normal",fontStyle:"normal",fill:{type:"palette",key:"primaryFontColor"}},labelBackground:{padding:{top:2,bottom:2,right:4,left:4},style:{cornerRadius:3,fill:{type:"palette",key:"markLabelBackgroundColor"}}}}},YG=i=>({visible:i,symbolType:"triangle",size:10,style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}}),qG={line:{style:{lineDash:[3,3],stroke:{type:"palette",key:"markLineStrokeColor"}}},startSymbol:YG(!1),endSymbol:YG(!0),label:{refY:5,style:{fontSize:{type:"token",key:"l4FontSize"},fontWeight:"normal",fontStyle:"normal",fill:{type:"palette",key:"primaryFontColor"}},labelBackground:{padding:{top:2,bottom:2,right:4,left:4},style:{cornerRadius:3,fill:{type:"palette",key:"markLabelBackgroundColor"}}}}},$I={itemLine:{decorativeLine:{visible:!1},startSymbol:{size:5,visible:!0,style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}},endSymbol:{style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}},line:{style:{stroke:{type:"palette",key:"markLineStrokeColor"}}}},itemContent:{offsetY:-50}},xct={visible:!0,position:"start",padding:{top:20,bottom:20},slider:{space:10,trackStyle:{fill:{type:"palette",key:"sliderTrackColor"},fillOpacity:.8},railStyle:{fill:{type:"palette",key:"sliderRailColor"}},handlerStyle:{size:15,stroke:{type:"palette",key:"backgroundColor"},lineWidth:2,fill:{type:"palette",key:"playerControllerColor"}}},controller:{start:{order:0,space:10,position:"start",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}},pause:{order:0,space:10,position:"start",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}},backward:{order:0,space:10,position:"start",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}},forward:{order:0,space:10,position:"start",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}}}},Sct={padding:{top:4,bottom:20},textStyle:{fontSize:{type:"token",key:"l3FontSize"},lineHeight:{type:"token",key:"l3LineHeight"},fill:{type:"palette",key:"primaryFontColor"}},subtextStyle:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fill:{type:"palette",key:"tertiaryFontColor"}}},Cct={offset:{x:10,y:10},panel:{padding:{top:10,left:10,right:10,bottom:10},backgroundColor:{type:"palette",key:"popupBackgroundColor"},border:{color:{type:"palette",key:"popupBackgroundColor"},width:0,radius:3},shadow:{x:0,y:4,blur:12,spread:0,color:{type:"palette",key:"shadowColor"}}},spaceRow:6,titleLabel:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fontColor:{type:"palette",key:"primaryFontColor"},fontWeight:"bold",textBaseline:"middle",spacing:0},shape:{size:8,spacing:6},keyLabel:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fontColor:{type:"palette",key:"secondaryFontColor"},textBaseline:"middle",spacing:26},valueLabel:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fontColor:{type:"palette",key:"primaryFontColor"},fontWeight:"bold",textBaseline:"middle",spacing:0}},wct={visible:!0,position:"auto",padding:8,titleStyle:{fontSize:{type:"token",key:"l5FontSize"},fontWeight:"bold",fill:{type:"palette",key:"primaryFontColor"}},contentStyle:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"primaryFontColor"}},panel:{visible:!0,fill:{type:"palette",key:"popupBackgroundColor"},cornerRadius:3,lineWidth:0,shadowBlur:12,shadowOffsetX:0,shadowOffsetY:4,shadowColor:{type:"palette",key:"shadowColor"},size:0,space:12}},Act={visible:!1,offset:5,overlap:{clampForce:!0,strategy:[]},smartInvert:!1,animation:!1,style:{fontSize:{type:"token",key:"l4FontSize"},fill:{type:"palette",key:"primaryFontColor"}}},kct={horizontal:{height:10,slider:{style:{fill:{type:"palette",key:"scrollBarSliderColor"}}}},vertical:{width:10,slider:{style:{fill:{type:"palette",key:"scrollBarSliderColor"}}}}},Tct={discreteLegend:_ct,colorLegend:yct,sizeLegend:vct,axis:lct,axisBand:rct,axisLinear:cct,axisX:Zoe,axisY:act,axisZ:oct,axisAngle:hct,axisRadius:uct,markLine:qG,markArea:XG,markPoint:$I,polarMarkLine:qG,polarMarkArea:XG,polarMarkPoint:$I,geoMarkPoint:$I,tooltip:Cct,dataZoom:gct,crosshair:pct,player:xct,brush:dct,indicator:mct,title:Sct,mapLabel:bct,poptip:wct,totalLabel:Act,scrollBar:kct};function Ect(i,e){return i&&e.key in i?i[e.key]:e.default}function Pct(i){return i&&i.type==="token"&&!!i.key}const uT={fontFamily:"PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol",fontSize:14,l1FontSize:32,l1LineHeight:"150%",l2FontSize:20,l2LineHeight:"140%",l3FontSize:16,l3LineHeight:"150%",l4FontSize:14,l4LineHeight:"150%",l5FontSize:12,l5LineHeight:"130%",l6FontSize:10,l6LineHeight:"120%"},rB={name:"light",background:{type:"palette",key:"backgroundColor"},padding:20,fontFamily:{type:"token",key:"fontFamily"},colorScheme:_lt,token:uT,mark:nct,markByName:sct,series:ict,component:Tct,animationThreshold:2e3},Oct={default:{dataScheme:Xoe,palette:{backgroundColor:"#202226",borderColor:"#404349",shadowColor:"rgba(0,0,0,0.1)",hoverBackgroundColor:"#404349",sliderRailColor:"#404349",sliderHandleColor:"#202226",sliderTrackColor:"#4284FF",popupBackgroundColor:"#404349",primaryFontColor:"#fdfdfd",secondaryFontColor:"#bbbdc3",tertiaryFontColor:"#888c93",axisLabelFontColor:"#888c93",disableFontColor:"#55595f",axisMarkerFontColor:"#202226",axisGridColor:"#404349",axisDomainColor:"#4b4f54",dataZoomHandleStrokeColor:"#bbbdc3",dataZoomChartColor:"#55595F",playerControllerColor:"#4284FF",scrollBarSliderColor:"rgba(255,255,255,0.3)",axisMarkerBackgroundColor:"#fdfdfd",markLabelBackgroundColor:"#404349",markLineStrokeColor:"#bbbdc3",dangerColor:"#eb4b4b",warningColor:"#f0bd30",successColor:"#14b267",infoColor:"#4284ff",discreteLegendPagerTextColor:"#BBBDC3",discreteLegendPagerHandlerColor:"#BBBDC3",discreteLegendPagerHandlerDisableColor:"#55595F",emptyCircleColor:"#bbbdc3",linearProgressTrackColor:"#404349"}}},ZG={name:"dark",colorScheme:Oct,component:{dataZoom:{selectedBackground:{style:{fillOpacity:.4,outerBorder:{strokeOpacity:.4}}}}}},cw=(i,e,t)=>{if(B(e))return i;const n=e[0];return B(n)?i:e.length===1?(i[n]=t,i):(B(i[n])&&(typeof e[1]=="number"?i[n]=[]:i[n]={}),cw(i[n],e.slice(1),t))},Mct=(i,e,t)=>{if(!B(e))return et(i,e,t)};function Pe(i,...e){let t=-1;const n=e.length;for(;++t<n;){const s=e[t];YN(i,s,!0,!0)}return i}function JG(i,e,t,n){Object.keys(i).forEach(s=>{if(Ke(e))e.type===s&&(ie(i[s])?i[s].length>=e.index&&(i[s][e.index]=n?Pe({},i[s][e.index],t):t):i[s]=n?Pe({},i[s],t):t);else if(ie(i[s])){const r=i[s].findIndex(a=>a.id===e);r>=0&&(i[s][r]=n?Pe({},i[s][r],t):t)}else i.id===e&&(i[s]=n?Pe({},i[s],t):t)})}let X=class Tt{static registerChart(e,t){Tt._charts[e]=t}static registerSeries(e,t){Tt._series[e]=t}static registerComponent(e,t,n){Tt._components[e]={cmp:t,alwaysCheck:n}}static registerMark(e,t){Tt._marks[e]=t}static registerRegion(e,t){Tt._regions[e]=t}static registerTransform(e,t){Tt.transforms[e]=t}static registerLayout(e,t){Tt._layout[e]=t}static registerAnimation(e,t){Tt._animations[e]=t}static registerImplement(e,t){Tt._implements[e]=t}static registerChartPlugin(e,t){Tt._chartPlugin[e]=t}static registerComponentPlugin(e,t){Tt._componentPlugin[e]=t}static createChart(e,t,n){return Tt._charts[e]?new Tt._charts[e](t,n):null}static createChartSpecTransformer(e,t){if(!Tt._charts[e])return null;const n=Tt._charts[e];return new n.transformerConstructor(Object.assign({seriesType:n.seriesType},t))}static createRegion(e,t,n){return Tt._regions[e]?new Tt._regions[e](t,n):null}static createRegionSpecTransformer(e,t){return Tt._regions[e]?new Tt._regions[e].transformerConstructor(t):null}static createSeries(e,t,n){return Tt._series[e]?new Tt._series[e](t,n):null}static createSeriesSpecTransformer(e,t){return Tt._series[e]?new Tt._series[e].transformerConstructor(t):null}static createMark(e,t,n){if(!Tt._marks[e])return null;const s=new Tt._marks[e](t,n);return s.type==="group"&&s.setMarkConfig({interactive:!1}),s}static getComponents(){return Object.values(Tt._components)}static getComponentInKey(e){return Tt._components[e].cmp}static getLayout(){return Object.values(Tt._layout)}static getLayoutInKey(e){return Tt._layout[e]}static getSeries(){return Object.values(Tt._series)}static getSeriesInType(e){return Tt._series[e]}static getRegionInType(e){return Tt._regions[e]}static getAnimationInKey(e){return Tt._animations[e]}static getImplementInKey(e){return Tt._implements[e]}static getSeriesMarkMap(e){return Tt._series[e]?Tt._series[e].mark:{}}static getChartPlugins(){return Object.values(Tt._chartPlugin)}static getComponentPlugins(){return Object.values(Tt._componentPlugin)}static getComponentPluginInType(e){return Tt._componentPlugin[e]}static registerFormatter(e){this._formatter=e}static getFormatter(){return this._formatter}};X._charts={},X._series={},X._components={},X._marks={},X._regions={},X._animations={},X._implements={},X._chartPlugin={},X._componentPlugin={},X.transforms={fields:Wse,filter:QKe,fold:cYe},X.dataParser={csv:Xse,dsv:Kse,tsv:Yse},X._layout={};function uw(i,...e){return Pe(QG(i),...e.map(QG))}function QG(i){var e;if(!i)return i;const t=Ict(i.colorScheme);return Object.assign({},i,{colorScheme:t,token:(e=i.token)!==null&&e!==void 0?e:{},series:Object.assign({},i.series)})}function Ict(i){return i&&(i=Object.keys(i).reduce((e,t)=>{const n=i[t];return e[t]=dlt(n),e},{})),i}function Rct(i,e,t,n){const s=X.getSeriesMarkMap(e);if(!s)return i;const r={};return Object.values(s).forEach(({type:a,name:o})=>{r[o]=Pe({},t==null?void 0:t[q(a)[0]],n==null?void 0:n[o],i==null?void 0:i[o])}),Object.assign(Object.assign({},i),r)}const Lct=["animationThreshold","colorScheme","name","padding"];function _O(i,e,t,n){if(!i)return i;e||(e=i.colorScheme),t||(t=i.token);const s={};return Object.keys(i).forEach(r=>{const a=i[r];Lct.includes(r)?s[r]=a:vc(a)?lT(a)?s[r]=hlt(a,e,n):Pct(a)?s[r]=Ect(t,a):s[r]=_O(a,e,t,n):s[r]=a}),s}const u1={[rB.name]:rB},Vx=rB.name,Iy=new Map(Object.keys(u1).map(i=>[i,u1[i]])),l4=new Map(Object.keys(u1).map(i=>[i,_O(u1[i])])),hT=new Map(Object.keys(u1).map(i=>[i,i===Vx])),c4=(i,e)=>{if(!i)return;const t=Bct(e);Iy.set(i,t),l4.set(i,_O(t)),hT.set(i,!0)},Qoe=(i=Vx,e=!1)=>(hT.has(i)&&!hT.get(i)&&c4(i,Iy.get(i)),e?l4.get(i):Iy.get(i)),Dct=i=>Iy.delete(i)&&l4.delete(i)&&hT.delete(i),Fct=i=>!!be(i)&&Iy.has(i),Bct=i=>{var e;const t=(e=i.type)!==null&&e!==void 0?e:Vx,n=Qoe(t);return uw({},n,i)};class ho{static registerInstance(e){ho.instances.set(e.id,e)}static unregisterInstance(e){ho.instances.delete(e.id)}static getInstance(e){return ho.instances.get(e)}static instanceExist(e){return ho.instances.has(e)}static forEach(e,t=[],n){const s=q(t);return ho.instances.forEach((r,a,o)=>{s.includes(a)||e(r,a,o)},n)}}ho.instances=new Map;let vu=class dp{static registerTheme(e,t){c4(e,t)}static getTheme(e,t=!1){return Qoe(e,t)}static removeTheme(e){return Dct(e)}static themeExist(e){return Fct(e)}static getDefaultTheme(){return dp.themes.get(Vx)}static setCurrentTheme(e){dp.themeExist(e)&&(dp._currentThemeName=e,ho.forEach(t=>t==null?void 0:t.setCurrentTheme(e)))}static getCurrentTheme(e=!1){return dp.getTheme(dp._currentThemeName,e)}static getCurrentThemeName(){return dp._currentThemeName}};vu.themes=Iy,vu._currentThemeName=Vx;function ah(i,e){return be(i)?vu.themeExist(i)?vu.getTheme(i,e):{}:Ke(i)?i:{}}function aB(i,e={data:t=>t}){if(!i)return i;if(i.constructor===Object){const t={};for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n)){if(e[n]){t[n]=e[n](i[n]);continue}t[n]=aB(i[n],e)}return t}return ie(i)?i.map(t=>aB(t,e)):i}function oB(i,e){if(!i)return i;if(vc(i)){const t={};for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n)){if(be(i[n])&&e.getFunction(i[n])){t[n]=e.getFunction(i[n]);continue}t[n]=oB(i[n],e)}return t}return ie(i)?i.map(t=>oB(t,e)):i}const jct=(i,e,t)=>Ym(i,e,t,{fontFamily:uT.fontFamily,fontSize:uT.fontSize}),Nct=(i,e,t,n)=>jct(e,t,n).measure(i),Ps=`${Ie}_DEFAULT_DATA_INDEX`,kl=`${Ie}_DEFAULT_DATA_KEY`,Wr=`${Ie}_DEFAULT_DATA_SERIES_FIELD`,eK=`${Ie}_DEFAULT_SERIES_STYLE_NAME`,$ct=`${Ie}_STACK_KEY`,To=`${Ie}_STACK_START`,Zr=`${Ie}_STACK_END`,xf=`${Ie}_STACK_START_PERCENT`,Id=`${Ie}_STACK_END_PERCENT`,lB=`${Ie}_STACK_START_OffsetSilhouette`,cB=`${Ie}_STACK_END_OffsetSilhouette`,ele=`${Ie}_STACK_TOTAL`,zct=`${Ie}_STACK_TOTAL_PERCENT`,h1=`${Ie}_STACK_TOTAL_TOP`,tle=`${Ie}_STACK_TOTAL_BOTTOM`,hw=`${Ie}_SEGMENT_START`,zI=`${Ie}_SEGMENT_END`;function qm(i,e){for(let t=0;t<e.length;t++){const n=e[t],s=Hct(i,n.key);s?s.operations=[...new Set(s.operations.concat(n.operations))]:i.push(n)}return i}function Hct(i,e){return i.find(t=>t.key===e)}function dT(i,e){var t;if(!i)return e??null;const n=i.getFields();return n&&n[e]?(t=n[e].alias)!==null&&t!==void 0?t:e:e??null}function ile(i,e,t){const n=i.getStackSort(),s={};let r=null;return n&&(r={},i.getSeries().forEach(a=>{const o=a.getSeriesField();if(o){const l=a.getRawDataStatisticsByField(o);l.values&&(r[o]||(r[o]={lastIndex:0,sort:{}}),l.values.forEach((c,u)=>{c in r[o].sort||(r[o].sort[c]=r[o].lastIndex,r[o].lastIndex++)}))}})),i.getSeries().forEach(a=>{var o;const l=a.getStackData(),c=a.getStackValue(),u=a.getStackValueField(),h=!t||t(a);l&&u&&h&&(s[c]=(o=s[c])!==null&&o!==void 0?o:{groupField:l.groupField,nodes:{}},ale(a,l,s[c],u,e,r))}),n?nle(s):s}function nle(i,e){var t;for(const n in i)!((t=i[n].sortDatums)===null||t===void 0)&&t.length?(i[n].sortDatums.sort((s,r)=>s.index-r.index),i[n].values=i[n].sortDatums.map(s=>s.datum)):nle(i[n].nodes);return i}function sle(i,e){if("values"in i&&i.values.length){const t=zoe(i.values,e),n=i4(i.values,Id);i.values.forEach(s=>{s[ele]=t,s[zct]=n})}else for(const t in i.nodes)sle(i.nodes[t],e)}function Vct(i){if(!i.values.length)return;const e=i.values[i.values.length-1][Zr]/2;for(let t=0;t<i.values.length;t++)i.values[t][lB]=i.values[t][To]-e,i.values[t][cB]=i.values[t][Zr]-e}function rle(i,e,t,n,s={key:$ct,start:To,end:Zr,startPercent:xf,endPercent:Id,max:h1,min:tle}){const r=n&&F(s.min),a=n&&F(s.max);if(i.values.length>0){let o=0,l=0,c=1,u=0,h=null,d=null;const p=i.values.length;for(let f=0;f<p;f++){const g=i.values[e?p-1-f:f];u=g[s.end],u>=0?(g[s.start]=o,o+=g[s.end],g[s.end]=o):(g[s.start]=l,l+=g[s.end],g[s.end]=l),g[s.key]=i.key,a&&(delete g[s.max],(!d||g[s.end]>d[s.end])&&(d=g)),r&&(delete g[s.min],(!h||g[s.start]<h[s.start])&&(h=g))}if(a&&d&&(d[s.max]=!0),r&&h&&(h[s.min]=!0),t)for(let f=0;f<p;f++){const g=i.values[e?p-1-f:f];u=g[s.end];const m=u>=0?o:l;c=u>=0?1:-1,g[s.startPercent]=m===0?0:Math.min(1,g[s.start]/m)*c,g[s.endPercent]=m===0?0:Math.min(1,g[s.end]/m)*c}}for(const o in i.nodes)rle(i.nodes[o],e,t,n,s)}function ale(i,e,t,n,s,r,a){var o;if("values"in e)if(s&&e.values.forEach(l=>l[Zr]=sit(l[n])),t.series.push({s:i,values:e.values}),r){const l=i.getSeriesField();e.values.forEach(c=>{t.sortDatums.push({series:i,datum:c,index:l?r[l].sort[c[l]]:0})})}else t.values.push(...e.values);else for(const l in e.nodes){const c=a?`${a}_${l}`:l;t.nodes[l]||(t.nodes[l]={values:[],series:[],nodes:{},sortDatums:[],key:c},F((o=e.nodes[l])===null||o===void 0?void 0:o.groupField)&&(t.nodes[l].groupField=e.nodes[l].groupField)),ale(i,e.nodes[l],t.nodes[l],n,s,r,c)}}const ole=(i,e,t="key",n="children")=>{for(let s=0;s<i.length;s++){const r=i[s];if(r[t]===e)return r;if(r[n]){const a=ole(r[n],e,t,n);if(a)return a}}return null},lle=(i,e,t="key",n="children")=>{for(let s=0;s<i.length;s++){const r=i[s];if(r[n])for(let a=0;a<r[n].length;a++){const o=r[n][a];if(o[t]===e)return r;const l=lle([o],e,t,n);if(l)return l}}return null},Uct=(i,e,t="key",n="children")=>{const s=[],r=(a,o)=>{for(const l of a){if(l[t]===e)return s.push(...o,l[t].toString()),!0;if(l[n]){const c=r(l[n],[...o,l[t]]);if(c===!0)return c}}return!1};return r(i,[]),s};function Wct(i,e="value",t="children"){return!!Ke(i)&&!!i.hasOwnProperty(t)&&Array.isArray(i[t])}function cle(i,e,t,n="value",s="children"){return Array.isArray(i)?i.map(r=>{const a=Object.assign({},r);return Array.isArray(a[s])&&(a[s]=cle(a[s],e,t,n,s)),a}).filter(r=>+r[n]>=e&&+r[n]<=t||r[s]&&r[s].length>0):i}function ol(i={}){const e=Object.assign({},i);if(ee(i.style)?e.style=(t,n,s,r)=>Le(i.style(t,n,s,r)):Te(i.style)||(e.style=Le(i.style)),!Te(i.state)){const t={};Object.keys(i.state).forEach(n=>{ee(i.state[n])?t[n]=(s,r,a,o)=>Le(i.state[n](s,r,a,o)):Te(i.state[n])||(t[n]=Le(i.state[n]))}),e.state=t}return e}function kg(i){if(Te(i))return null;const e={};return Object.keys(i).forEach(t=>{ee(i[t])?e[t]=(n,s,r,a)=>Le(i[t](n,s,r,a)):Te(i[t])||(e[t]=Le(i[t]))}),e}function Gct(i){if(Te(i))return null;const e={};return Object.keys(i).forEach(t=>{ee(i[t])?e[t]=(n,s,r,a)=>Le(i[t](n.rawValue,s,n,r,a)):Te(i[t])||(e[t]=Le(i[t]))}),e}function tK(i,e){if(Te(i))return null;const t={};return Object.keys(i).forEach(n=>{ee(i[n])?t[n]=i[n](e):t[n]=i[n]}),Le(t)}function Le(i){return i!=null&&i.angle&&(i.angle=zt(i.angle)),i}var Rh;(function(i){i.enter="enter",i.update="update",i.exit="exit",i.group="group",i.connectNulls="connectNulls"})(Rh||(Rh={}));var Ft;(function(i){i.enter="enter",i.update="update",i.exit="exit",i.unChange="unChange"})(Ft||(Ft={}));var _e;(function(i){i.arc="arc",i.arc3d="arc3d",i.area="area",i.image="image",i.line="line",i.path="path",i.rect="rect",i.rect3d="rect3d",i.rule="rule",i.shape="shape",i.symbol="symbol",i.text="text",i.richtext="richtext",i.polygon="polygon",i.pyramid3d="pyramid3d",i.circle="circle",i.cell="cell",i.interval="interval",i.group="group",i.glyph="glyph",i.component="component",i.largeRects="largeRects",i.largeSymbols="largeSymbols"})(_e||(_e={}));var $i;(function(i){i.axis="axis",i.grid="grid",i.legend="legend",i.slider="slider",i.label="label",i.datazoom="datazoom",i.player="player",i.title="title",i.scrollbar="scrollbar"})($i||($i={}));var iK;(function(i){i[i.player=1]="player",i[i.rollUp=2]="rollUp",i[i.drillDown=3]="drillDown",i[i.slider=4]="slider",i[i.datazoom=5]="datazoom",i[i.legend=6]="legend",i[i.scrollbar=7]="scrollbar",i[i.brush=8]="brush",i[i.normal=9]="normal"})(iK||(iK={}));var lc;(function(i){i.lineAxis="lineAxis",i.circleAxis="circleAxis"})(lc||(lc={}));var Qn;(function(i){i.lineAxisGrid="lineAxisGrid",i.circleAxisGrid="circleAxisGrid"})(Qn||(Qn={}));var nK;(function(i){i.discreteLegend="discreteLegend",i.colorLegend="colorLegend",i.sizeLegend="sizeLegend"})(nK||(nK={}));var sK;(function(i){i.lineCrosshair="lineCrosshair",i.rectCrosshair="rectCrosshair",i.sectorCrosshair="sectorCrosshair",i.circleCrosshair="circleCrosshair",i.polygonCrosshair="polygonCrosshair",i.ringCrosshair="ringCrosshair"})(sK||(sK={}));var rK;(function(i){i.symbolLabel="symbolLabel",i.rectLabel="rectLabel",i.lineLabel="lineLabel",i.dataLabel="dataLabel"})(rK||(rK={}));var aK;(function(i){i.continuousPlayer="continuousPlayer",i.discretePlayer="discretePlayer"})(aK||(aK={}));var su;(function(i){i.before="before",i.layouting="layouting",i.reevaluate="reevaluate",i.after="after"})(su||(su={}));var Ee;(function(i){i.BEFORE_EVALUATE_DATA="beforeEvaluateData",i.AFTER_EVALUATE_DATA="afterEvaluateData",i.BEFORE_EVALUATE_SCALE="beforeEvaluateScale",i.AFTER_EVALUATE_SCALE="afterEvaluateScale",i.BEFORE_PARSE_VIEW="beforeParseView",i.AFTER_PARSE_VIEW="afterParseView",i.BEFORE_TRANSFORM="beforeTransform",i.AFTER_TRANSFORM="afterTransform",i.BEFORE_CREATE_VRENDER_STAGE="beforeCreateVRenderStage",i.AFTER_CREATE_VRENDER_STAGE="afterCreateVRenderStage",i.BEFORE_CREATE_VRENDER_LAYER="beforeCreateVRenderLayer",i.AFTER_CREATE_VRENDER_LAYER="afterCreateVRenderLayer",i.BEFORE_STAGE_RESIZE="beforeStageResize",i.AFTER_STAGE_RESIZE="afterStageResize",i.BEFORE_VRENDER_DRAW="beforeVRenderDraw",i.AFTER_VRENDER_DRAW="afterVRenderDraw",i.BEFORE_MARK_JOIN="beforeMarkJoin",i.AFTER_MARK_JOIN="afterMarkJoin",i.BEFORE_MARK_UPDATE="beforeMarkUpdate",i.AFTER_MARK_UPDATE="afterMarkUpdate",i.BEFORE_MARK_STATE="beforeMarkState",i.AFTER_MARK_STATE="afterMarkState",i.BEFORE_MARK_ENCODE="beforeMarkEncode",i.AFTER_MARK_ENCODE="afterMarkEncode",i.BEFORE_DO_LAYOUT="beforeDoLayout",i.AFTER_DO_LAYOUT="afterDoLayout",i.BEFORE_MARK_LAYOUT_END="beforeMarkLayoutEnd",i.AFTER_MARK_LAYOUT_END="afterMarkLayoutEnd",i.BEFORE_DO_RENDER="beforeDoRender",i.AFTER_DO_RENDER="afterDoRender",i.BEFORE_MARK_RENDER_END="beforeMarkRenderEnd",i.AFTER_MARK_RENDER_END="afterMarkRenderEnd",i.BEFORE_CREATE_VRENDER_MARK="beforeCreateVRenderMark",i.AFTER_CREATE_VRENDER_MARK="afterCreateVRenderMark",i.BEFORE_ADD_VRENDER_MARK="beforeAddVRenderMark",i.AFTER_ADD_VRENDER_MARK="afterAddVRenderMark",i.AFTER_VRENDER_NEXT_RENDER="afterVRenderNextRender",i.BEFORE_ELEMENT_UPDATE_DATA="beforeElementUpdateData",i.AFTER_ELEMENT_UPDATE_DATA="afterElementUpdateData",i.BEFORE_ELEMENT_STATE="beforeElementState",i.AFTER_ELEMENT_STATE="afterElementState",i.BEFORE_ELEMENT_ENCODE="beforeElementEncode",i.AFTER_ELEMENT_ENCODE="afterElementEncode",i.ANIMATION_START="animationStart",i.ANIMATION_END="animationEnd",i.ELEMENT_ANIMATION_START="elementAnimationStart",i.ELEMENT_ANIMATION_END="elementAnimationEnd",i.ALL_ANIMATION_START="allAnimationStart",i.ALL_ANIMATION_END="allAnimationEnd"})(Ee||(Ee={}));var uB;(function(i){i.signal="signal",i.data="data",i.scale="scale",i.coordinate="coordinate",i.mark="mark"})(uB||(uB={}));var wr;(function(i){i.active="active",i.selected="selected",i.highlight="highlight",i.blur="blur"})(wr||(wr={}));const rd="__vgrammar_scene_item__",ule=[_e.line,_e.area],Kct=[_e.arc3d,_e.rect3d,_e.pyramid3d],Br="key",dw=[{}],Xct=["key"],Yct=!0,qct=!0,Zct=!1,Jct=null,Qct=!0,oK="VGRAMMAR_IMMEDIATE_ANIMATION",lK=0,hle=1e3,hB=0,cK=0,uK=!1,dB=!1,pB="quintInOut",hK={stopWhenStateChange:!1,immediatelyApply:!0},eut="VGRAMMAR_ANIMATION_PARAMETERS",Sf="_mo_hide_";function dle(i,e){return q(i).reduce((t,n)=>{const s=be(n)?e.getGrammarById(n):n;return s&&t.push(s),t},[])}function tut(i){return!ee(i)&&!!(i!=null&&i.signal)}function iut(i){return!ee(i)&&!!(i!=null&&i.callback)}function Ws(i,e){if(B(i))return[];if(tut(i)){const t=i.signal;if(be(t))return q(e.getGrammarById(t));if((t==null?void 0:t.grammarType)==="signal")return[t]}else if(iut(i))return dle(i.dependency,e);return[]}function Ip(i){return ee(i)||(i==null?void 0:i.signal)||!!(i!=null&&i.callback)}function Xn(i,e,t,n){if(B(i))return i;if(ee(i))return n?i.call(null,t,n,e):i.call(null,t,e);if(i.signal){const s=i.signal;return be(s)?e==null?void 0:e[s]:s.output()}return i.callback?n?i.callback.call(null,t,n,e):i.callback.call(null,t,e):i}function nut(i,e){if(B(i))return i;if(ee(i))return i.call(null,e);if(i.signal){const t=i.signal;return be(t)?e==null?void 0:e[t]:t.output()}return i.callback?i.callback.call(null,e):i}function d1(i,e){return Ux(i)?i.output():e[i]}function sut(i){return i&&(i.signal||i.callback)}const Ux=i=>i&&!B(i.grammarType),_v=i=>ee(i)?i:e=>e[i];function vO(i){return!!(i!=null&&i.scale)}function u4(i){return!!(i!=null&&i.field)}function sp(i,e){if(!i)return[];let t=[];return i.scale&&(t=Ux(i.scale)?[i.scale]:q(e.getScaleById(i.scale))),t.concat(Ws(i,e))}function pT(i,e){switch(e){case"line":return i.some(t=>["x","y","defined"].includes(t));case"area":return i.some(t=>["x","y","x1","y1","defined"].includes(t));case"largeRects":return i.some(t=>["x","y","width","y1"].includes(t));case"largeSymbols":return i.some(t=>["x","y"].includes(t))}return!1}function rut(i){const{x:e,y:t,x1:n,y1:s}=i;return Z(e)&&Z(t)&&Z(n)&&Z(s)?[{x:e,y:t},{x:n,y:s}]:[]}function aut(i,e,t,n){return!i||!i.length||i.length===1&&!e?[]:i.some(s=>pT(Object.keys(s.nextAttrs),"line"))?i.map((s,r)=>{var a;const o=s.nextAttrs,{x:l,y:c,x1:u,y1:h,defined:d}=(a=t==null?void 0:t[r])!==null&&a!==void 0?a:{};return B(o.x)&&(o.x=l),B(o.y)&&(o.y=c),B(o.defined)&&d===!1&&(o.defined=!1),o.context=s.key,n&&(B(o.x1)&&(o.x1=u),B(o.y1)&&(o.y1=h)),o}):t??[]}function out(i,e,t=[]){if(!i||!i.length||i.length===1&&!e)return[];const n=new Float32Array(4*i.length);return i.forEach((s,r)=>{var a,o,l,c;const u=s.nextAttrs,h=(a=u.x)!==null&&a!==void 0?a:t[4*r],d=(o=u.y)!==null&&o!==void 0?o:t[4*r+1],p=(l=u.width)!==null&&l!==void 0?l:t[4*r+2],f=(c=u.y1)!==null&&c!==void 0?c:t[4*r+3];n[4*r]=h,n[4*r+1]=d,n[4*r+2]=p,n[4*r+3]=f-d}),n}function lut(i,e,t=[]){if(!i||!i.length||i.length===1&&!e)return[];const n=new Float32Array(2*i.length);return i.forEach((s,r)=>{var a,o;const l=s.nextAttrs,c=(a=l.x)!==null&&a!==void 0?a:t[2*r],u=(o=l.y)!==null&&o!==void 0?o:t[2*r+1];n[2*r]=c,n[2*r+1]=u}),n}function cut(i,e){if(["x","y","dx","dy"].includes(e))return!0;switch(i){case _e.arc:return["innerRadius","outerRadius","startAngle","endAngle"].includes(e);case _e.group:case _e.rect:case _e.image:return["width","height","y1"].includes(e);case _e.path:case _e.shape:return["path","customPath"].includes(e);case _e.line:return e==="defined";case _e.area:return["x1","y1","defined"].includes(e);case _e.rule:return["x1","y1"].includes(e);case _e.symbol:return e==="size";case _e.polygon:return e==="points";case _e.text:return e==="text"}return!1}function uut(i){return[_e.line,_e.area,_e.largeRects,_e.largeSymbols].includes(i)}function Jc(i,e,t,n,s){t&&(Ip(t)?e.forEach(r=>{const a=Xn(t,n,r.datum,i);Object.assign(r.nextAttrs,a)}):Object.keys(t).forEach(r=>{var a,o;const l=t[r],c=s&&!cut(i.mark.markType,r)?[e[0]]:e;if(vO(l)){const u=d1(l.scale,n),h=(a=l==null?void 0:l.offset)!==null&&a!==void 0?a:0,d=!B(l.band)&&u.bandwidth?u.bandwidth()*l.band:null,p=be(l==null?void 0:l.field),f=p?Tc(l.field):null;let g=p?null:B(l==null?void 0:l.value)?0:(o=u.scale)===null||o===void 0?void 0:o.call(u,l.value);c.forEach(m=>{var y;p&&(g=(y=u.scale)===null||y===void 0?void 0:y.call(u,f(m.datum))),m.nextAttrs[r]=ye(g)||ye(d)?g+h+d:g})}else if(u4(l)){const u=Tc(l.field);c.forEach(h=>{h.nextAttrs[r]=u(h.datum)})}else c.forEach(u=>{u.nextAttrs[r]=Xn(l,n,u.datum,i)})}))}function ad(i,e,t,n){if(!i)return null;if(Ip(i))return Xn(i,n,e,t);const s={};return Object.keys(i).forEach(r=>{var a,o,l;const c=i[r];if(vO(c)){const u=d1(c.scale,n),h=(a=c==null?void 0:c.offset)!==null&&a!==void 0?a:0,d=!B(c.band)&&u.bandwidth?u.bandwidth()*c.band:null,p=be(c==null?void 0:c.field),f=p?Tc(c.field):null,g=p?(o=u.scale)===null||o===void 0?void 0:o.call(u,f(e)):B(c==null?void 0:c.value)?0:(l=u.scale)===null||l===void 0?void 0:l.call(u,c.value);s[r]=ye(g)||ye(d)?g+h+d:g}else if(u4(c)){const u=Tc(c.field);s[r]=u(e)}else s[r]=Xn(c,n,e,t)}),s}class hut{constructor(e,t,n,s){this.channelEncoder={},this.marks=e,t&&this.registerChannelEncoder(t),n&&this.registerDefaultEncoder(n),this.progressiveChannels&&this.registerProgressiveChannels(s)}getMarks(){return this.marks}registerChannelEncoder(e,t){return be(e)?this.channelEncoder[e]=t:Object.assign(this.channelEncoder,e),this}registerFunctionEncoder(e){return this.functionEncoder=e,this}registerDefaultEncoder(e){return this.defaultEncoder=e,this}registerProgressiveChannels(e){return this.progressiveChannels=q(e),this}getChannelEncoder(){return this.channelEncoder}getFunctionEncoder(){return this.functionEncoder}getDefaultEncoder(){return this.defaultEncoder}getProgressiveChannels(){return this.progressiveChannels}}class Q{static registerPlotMarks(e,t){Q._plotMarks[e]=t}static createPlotMark(e,t){return Q._plotMarks[e]?new Q._plotMarks[e](t):null}static registerMark(e,t){Q._marks[e]=t}static createMark(e,t,n){return Q._marks[e]?new Q._marks[e](t,e,n):null}static hasMark(e){return!!Q._marks[e]}static getMark(e){return Q._marks[e]}static registerComponent(e,t){Q._components[e]=t}static createComponent(e,t,n,s){const r=Q._components[e];return r?new r(t,n,s):null}static hasComponent(e){return!!Q._components[e]}static registerGraphicComponent(e,t){Q._graphicComponents[e]=t}static createGraphicComponent(e,t,n){const s=Q._graphicComponents[e];return s?s(t,n):null}static registerTransform(e,t,n){Q._transforms[e]=Object.assign(t,{type:e,isBuiltIn:!!n})}static getTransform(e){return Q._transforms[e]}static unregisterRuntimeTransforms(){Object.keys(Q._transforms).forEach(e=>{Q._transforms[e]&&!Q._transforms[e].isBuiltIn&&(Q._transforms[e]=null)})}static registerGrammar(e,t,n){Q._grammars[e]={grammarClass:t,specKey:n??e}}static createGrammar(e,t,n){var s;const r=(s=Q._grammars[e])===null||s===void 0?void 0:s.grammarClass;return r?new r(t,n):null}static getGrammars(){return this._grammars}static getGlyph(e){return Q._glyphs[e]}static createInteraction(e,t,n){const s=Q._interactions[e];return s?new s(t,n):null}static hasInteraction(e){return!!Q._interactions[e]}}Q._plotMarks={},Q._marks={},Q._components={},Q._graphicComponents={},Q._transforms={},Q._grammars={},Q._glyphs={},Q._animations={},Q._interactions={},Q._graphics={},Q._stageEventPlugins={},Q.registerGlyph=(i,e,t,n,s)=>(Q._glyphs[i]=new hut(e,t,n,s),Q._glyphs[i]),Q.registerAnimationType=(i,e)=>{Q._animations[i]=e},Q.getAnimationType=i=>Q._animations[i],Q.registerInteraction=(i,e)=>{Q._interactions[i]=e},Q.registerGraphic=(i,e)=>{Q._graphics[i]=e},Q.getGraphicType=i=>Q._graphics[i],Q.createGraphic=(i,e)=>{const t=Q._graphics[i];return t?t(e):null},Q.registerDefaultLayout=i=>{Q.defaultLayout=i},Q.getDefaultLayout=()=>Q.defaultLayout,Q.registerStageEventPlugin=(i,e)=>{Q._stageEventPlugins[i]=e},Q.getStageEventPlugin=i=>Q._stageEventPlugins[i];const dut=i=>!!_e[i];function vv(i,e,t={}){var n;const s=Q.getGraphicType(e)?Q.createGraphic(e,t):Q.createGraphicComponent(e,t,{skipDefault:(n=i==null?void 0:i.spec)===null||n===void 0?void 0:n.skipTheme});return s||ii.getInstance().error(`create ${e} graphic failed!`),s}function put(i,e,t={}){if(!Q.getGraphicType(_e.glyph))return;const n=Q.createGraphic(_e.glyph,t),s=e.getMarks(),r=Object.keys(s).map(a=>{if(Q.getGraphicType(s[a])){const o=Q.createGraphic(s[a]);if(o)return o.name=a,o}});return n.setSubGraphic(r),n}const fT=i=>{i&&(i[rd]=null,i.release(),i.parent&&i.parent.removeChild(i))},dK=["fillOpacity"],pK=(i,e,t)=>{var n;return e==="fillOpacity"?(i.fillOpacity=(n=t.fillOpacity)!==null&&n!==void 0?n:1,["fillOpacity"]):[]};function fut(i,e,t,n,s,r){const a=s.getGraphicAttribute(i,!1,r);if(a)return e.forEach(l=>{l in n&&(a[l]=n[l])}),a;const o={};return e.forEach(l=>{o[l]=n[l]}),t[i]=o,o}const Wx={rect3d:[{channels:["x","y","z","x1","y1","width","height","length"],transform:(i,e,t)=>{var n,s,r,a,o,l,c,u,h,d,p,f;Z(e.width)||!Z(e.x1)&&Z(t.width)?(i.x=Math.min((n=t.x)!==null&&n!==void 0?n:0,(s=t.x1)!==null&&s!==void 0?s:1/0),i.width=t.width):Z(e.x1)||!Z(e.width)&&Z(t.x1)?(i.x=Math.min(t.x,t.x1),i.width=Math.abs(t.x1-t.x)):(i.x=Math.min((r=t.x)!==null&&r!==void 0?r:0,(a=t.x1)!==null&&a!==void 0?a:1/0),i.width=t.width),Z(e.height)||!Z(e.y1)&&Z(t.height)?(i.y=Math.min((o=t.y)!==null&&o!==void 0?o:0,(l=t.y1)!==null&&l!==void 0?l:1/0),i.height=t.height):Z(e.y1)||!Z(e.height)&&Z(t.y1)?(i.y=Math.min(t.y,t.y1),i.height=Math.abs(t.y1-t.y)):(i.y=Math.min((c=t.y)!==null&&c!==void 0?c:0,(u=t.y1)!==null&&u!==void 0?u:1/0),i.height=t.height),Z(e.length)||!Z(e.z1)&&Z(t.length)?(i.z=Math.min((h=t.z)!==null&&h!==void 0?h:0,(d=t.z1)!==null&&d!==void 0?d:1/0),i.length=t.length):Z(e.z1)||!Z(e.length)&&Z(t.z1)?(i.z=Math.min(t.z,t.z1),i.length=Math.abs(t.z1-t.z)):(i.z=Math.min((p=t.z)!==null&&p!==void 0?p:0,(f=t.z1)!==null&&f!==void 0?f:1/0),i.length=t.length)},storedAttrs:"sizeAttrs"}],[_e.text]:[{channels:["text","limit","autoLimit","maxLineWidth","textType"],transform:(i,e,t)=>{var n,s;const r=(n=t.limit)!==null&&n!==void 0?n:1/0,a=(s=t.autoLimit)!==null&&s!==void 0?s:1/0,o=Math.min(r,a),l=vc(t.text)&&!B(t.text.text),c=l?t.text.text:t.text;i.maxLineWidth=o===1/0?t.maxLineWidth:o,(l||t.textType)&&(t.text.type==="rich"||t.textType==="rich")?i.textConfig=c:i.text=c},storedAttrs:"limitAttrs"}],[_e.rule]:[{channels:["x","y","x1","y1"],transform:(i,e,t)=>{const n=rut(t);i.points=n,i.x=0,i.y=0},storedAttrs:"pointAttrs"}],[_e.symbol]:[{channels:["shape","symbolType"],transform:(i,e,t)=>{var n;i.symbolType=(n=e.shape)!==null&&n!==void 0?n:e.symbolType}},{channels:["image","fill","background"],transform:(i,e,t)=>{e.image?(i.background=e.image,i.fill=!1):t.image?(i.background=t.image,i.fill=!1):(i.fill=t.fill,i.background=t.background)},storedAttrs:"imageAttrs"}]};function gut(i,e){var t;return((t=Wx[i])!==null&&t!==void 0?t:[]).reduce((n,s)=>(s.channels.forEach(r=>{so(e,r)&&(n[r]=e[r])}),n),{})}const gT=(i,e,t,n)=>{const s={},r=e?Object.keys(e):[],a=be(i)?Wx[i]:i;if(a&&a.length){const o=[];r.forEach(l=>{let c=!1;a.forEach((u,h)=>{if(u.channels.includes(l)){if(!o[h])if(u.storedAttrs){const d=fut(u.storedAttrs,u.channels,s,e,t,n);u.transform(s,e,d)}else u.transform(s,e,null);o[h]=!0,c=!0}}),c||(dK.includes(l)?pK(s,l,e):s[l]=e[l])})}else r.forEach(o=>{dK.includes(o)?pK(s,o,e):s[o]=e[o]});return s},mut=(i,e)=>{var t,n;if(i===e)return!0;const s=(t=i&&i.length)!==null&&t!==void 0?t:0;return s===((n=e&&e.length)!==null&&n!==void 0?n:0)&&s!==0&&i.every((r,a)=>!r&&!e[a]||r&&e[a]&&r.color===e[a].color&&r.offset===e[a].offset)},yut=(i,e)=>{if(i===e)return!0;if(typeof i!=typeof e||be(i)||i.gradient!==e.gradient)return!1;const t=Object.keys(i),n=Object.keys(e);return t.length===n.length&&t.every(s=>s==="stops"?mut(i[s],e[s]):i[s]===e[s])},_ut=(i,e)=>i.length===e.length&&i.join("-")===e.join("-"),vut=(i,e,t)=>!(!B(i)||!B(e))||!B(i)&&!B(e)&&(t==="lineDash"?_ut(i,e):t==="stroke"||t==="fill"?yut(i,e):i===e),but=["fill","fillOpacity","background","texture","texturePadding","textureSize","textureColor"],ple=["stroke","strokeOpacity","lineDash","lineDashOffset","lineCap","lineJoin","lineWidth","miterLimit"],xut=but.concat(ple);function fB(i,e,t){var n;if(!i||i.length<=1)return null;const s=((n=t==null?void 0:t.mark)===null||n===void 0?void 0:n.markType)==="area"?xut:ple,r=[];let a=null;return i.forEach((o,l)=>{a&&s.every(c=>vut(a[c],o[c],c))||(r.length&&(r[r.length-1].endIndex=l),a=o,r.push({attrs:a,startIndex:l}))}),r.length>=2?r.map(o=>{const l=h4(o.attrs);return l.points=e.slice(o.startIndex,B(o.endIndex)?e.length:o.endIndex),l}):null}function Sut(i,e,t){if(!i||i.length<=1)return null;const n=!!t&&t.mark.getSpec().enableSegments;let s,r,a=[],o=null;if(i.forEach((l,c)=>{o=e[c],o&&o.defined!==!1?(s||(r={items:[],points:[]},a.push(r)),r.points.push(o),r.items.push(l),s===!1&&(r.isConnect=!0,r={items:[],points:[]},a.push(r)),s=!0):s=!1}),a=a.filter(l=>l.points.length>0),a.length>=2){const l=[];return a.forEach(c=>{if(c.isConnect)return void l.push({points:c.points,isConnect:!0});if(n){const h=fB(c.items,c.points,t);if(h)return void h.forEach(d=>{l.push(d)})}const u=h4(c.items[0]);u.points=c.points,l.push(u)}),l}return n?fB(i,e,t):null}function Cut(i){return i?i.reduce((e,t)=>e.concat(t.points),[]):null}function h4(i){const e={};if(!i)return e;const t=["x","y","x1","y1","defined","size","width","height","context"];return Object.keys(i).forEach(n=>{t.includes(n)||(e[n]=i[n])}),e}function wut(i,e){var t;if(!i||!i.segments||!i.segments.length)return i;const n=((t=e==null?void 0:e.mark)===null||t===void 0?void 0:t.markType)==="area"?["fillOpacity","strokeOpacity"]:["strokeOpacity"],s={};return Object.keys(i).forEach(r=>{n.includes(r)||(s[r]=i[r])}),s}let fle=class{constructor(e){this.data=null,this.states=[],this.diffState=Ft.enter,this.isReserved=!1,this.runtimeStatesEncoder=null,this.items=[],this.getStateAttrs=(t,n)=>{var s,r,a,o;const l=!B((s=this.runtimeStatesEncoder)===null||s===void 0?void 0:s[t]),c=l?Object.assign(Object.assign({},(r=this.mark.getSpec().encode)===null||r===void 0?void 0:r[t]),this.runtimeStatesEncoder[t]):(a=this.mark.getSpec().encode)===null||a===void 0?void 0:a[t];if(!c)return{};if(ee(c))return c(this.getDatum(),this,t,n);if(!l&&(!((o=this.graphicItem.states)===null||o===void 0)&&o[t]))return this.graphicItem.states[t];const u=this.items.map(d=>Object.assign({},d,{nextAttrs:{}}));Jc(this,u,c,this.mark.parameters());const h=this.transformElementItems(u,this.mark.markType);return this.graphicItem.states?this.graphicItem.states[t]||(this.graphicItem.states[t]=h):this.graphicItem.states={[t]:h},h},this.mark=e}initGraphicItem(e={}){if(this.graphicItem)return;const t=this.mark.getAttributeTransforms();this.graphicItem=this.mark.addGraphicItem(t?gT(t,e,this):e,this.groupKey),this.graphicItem&&(this.graphicItem[rd]=this,t&&(this.graphicItem.onBeforeAttributeUpdate=n=>this.mark?gT(t,n,this):n),this.clearGraphicAttributes(),this.mark.needAnimate()&&(this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(Object.assign({},e)),this.setFinalGraphicAttributes(Object.assign({},e))))}updateGraphicItem(){var e;if(!this.graphicItem)return;this.diffState===Ft.exit?this.graphicItem.releaseStatus="willRelease":this.graphicItem.releaseStatus=void 0;const t=(e=this.mark.animate)===null||e===void 0?void 0:e.getAnimationConfigs("state");t&&t.length!==0&&(this.graphicItem.stateAnimateConfig=t[0].originConfig)}getGraphicItem(){return this.graphicItem}removeGraphicItem(){var e,t;this.graphicItem&&((t=(e=this.graphicItem.animates)===null||e===void 0?void 0:e.forEach)===null||t===void 0||t.call(e,n=>n.stop())),this.graphicItem&&(fT(this.graphicItem),this.graphicItem[rd]=null,this.graphicItem=null)}resetGraphicItem(){this.graphicItem&&(this.graphicItem=null)}getBounds(){var e;return(e=this.graphicItem)===null||e===void 0?void 0:e.AABBBounds}getStates(){return this.states}updateData(e,t,n){var s;this.mark.emit(Ee.BEFORE_ELEMENT_UPDATE_DATA,{groupKey:e,data:t,key:n},this),this.data=t;const r=_v(n);return this.items=t.map(a=>({datum:a,key:r(a),view:this.mark.view,nextAttrs:{}})),this.groupKey=e,this.key=this.mark.isCollectionMark()?e:(s=this.items)===null||s===void 0?void 0:s[0].key,this.mark.emit(Ee.AFTER_ELEMENT_UPDATE_DATA,{groupKey:e,data:t,key:n},this),this.items}state(e,t){var n;const s=this.mark.isCollectionMark(),r=this.states,a=q(Xn(e,t,this.getDatum(),this)),o=(n=this.mark.getSpec())===null||n===void 0?void 0:n.stateSort;o&&a.length&&a.sort(o);const l=a.length!==r.length||a.some((c,u)=>c!==r[u]);this.states=a,!s&&l&&this.diffState===Ft.unChange&&(this.diffState=Ft.update)}encodeGraphic(e){this.coordinateTransformEncode(this.items);const t=this.transformElementItems(this.items,this.mark.markType);e&&Object.assign(t,e),this.graphicItem?(this.graphicItem.clearStates(),this.graphicItem.states={},this.graphicItem.stateProxy=null,Sf in this.graphicItem.attribute&&"visible"in t&&delete this.graphicItem.attribute[Sf],this.applyGraphicAttributes(t)):this.initGraphicItem(t),this.diffState!==Ft.enter&&this.diffState!==Ft.update||!this.states.length||this.useStates(this.states),this.mark.markType===_e.shape&&(this.graphicItem.datum=this.items[0].datum),this.items.forEach(n=>{n.nextAttrs={}}),this._setCustomizedShape()}_setCustomizedShape(){var e;if(!this.graphicItem)return;const t=(e=this.mark.getSpec())===null||e===void 0?void 0:e.setCustomizedShape;t&&(this.graphicItem.pathProxy=n=>t(this.data,n,new Bn))}encodeItems(e,t,n=!1,s){const r=this.mark.isCollectionMark(),a=t[Rh.update],o=t[Rh.enter],l=t[Rh.exit],c=this.mark.isLargeMode()||r&&!this.mark.getSpec().enableSegments;this.diffState===Ft.enter?(o&&Jc(this,e,o,s,c),a&&Jc(this,e,a,s,c)):this.diffState===Ft.update?((r&&o||n)&&Jc(this,e,o,s,c),a&&Jc(this,e,a,s,c)):this.diffState===Ft.exit&&l&&(n&&Jc(this,e,o,s,c),Jc(this,e,l,s,c))}coordinateTransformEncode(e){if(!this.mark.coord||this.mark.markType==="arc"||this.mark.disableCoordinateTransform===!0)return;const t=this.mark.coord.output();e.forEach(n=>{const s=n.nextAttrs,r=t.convert(s);Object.assign(s,r)})}hasStateAnimation(){var e;const t=(e=this.mark.animate)===null||e===void 0?void 0:e.getAnimationConfigs("state");return t&&t.length>0}clearStates(e){const t=Ui(e)?e:this.hasStateAnimation();this.states=[],this.graphicItem&&this.graphicItem.clearStates(t),this.runtimeStatesEncoder&&(this.runtimeStatesEncoder={})}_updateRuntimeStates(e,t){this.runtimeStatesEncoder||(this.runtimeStatesEncoder={}),this.runtimeStatesEncoder[e]=t}hasState(e){return this.states&&e&&this.states.includes(e)}updateStates(e){if(!this.graphicItem)return!1;let t=this.states.slice();const n=this.mark.getSpec().encode;let s=!1,r=!1;return Object.keys(e).forEach(a=>{var o;if(!a)return;const l=e[a];if(Ke(l)&&!Pt(l,(o=this.runtimeStatesEncoder)===null||o===void 0?void 0:o[a]))t.includes(a)?s=!0:t.push(a),this._updateRuntimeStates(a,l),r=!0;else if(l)!t.includes(a)&&(n!=null&&n[a])&&(t.push(a),r=!0);else if(t.length){const c=t.filter(u=>u!==a);c.length!==t.length&&(r=!0,t=c),this.runtimeStatesEncoder&&this.runtimeStatesEncoder[a]&&(this.runtimeStatesEncoder[a]=null)}}),s&&this.graphicItem.clearStates(),!!r&&(this.useStates(t),!0)}addState(e,t){var n;if(!this.graphicItem)return!1;if(t&&be(e)&&!Pt(t,(n=this.runtimeStatesEncoder)===null||n===void 0?void 0:n[e])){const a=this.states.slice();return a.includes(e)?this.graphicItem.clearStates():a.push(e),this._updateRuntimeStates(e,t),this.useStates(a),!0}const s=this.mark.getSpec().encode,r=q(e).reduce((a,o)=>(o&&!a.includes(o)&&(s!=null&&s[o])&&a.push(o),a),this.states.slice());return r.length!==this.states.length&&(this.useStates(r),!0)}removeState(e){if(!this.graphicItem)return!1;const t=q(e);if(!t.length)return!1;const n=this.states.filter(s=>!t.includes(s));return n.length!==this.states.length&&(this.runtimeStatesEncoder&&t.forEach(s=>{this.runtimeStatesEncoder[s]=null}),this.useStates(n),!0)}useStates(e,t){var n;if(!this.graphicItem)return!1;this.mark.emit(Ee.BEFORE_ELEMENT_STATE,{states:e},this);const s=(n=this.mark.getSpec())===null||n===void 0?void 0:n.stateSort;s&&e.sort(s),this.states=e;const r=Ui(t)?t:this.hasStateAnimation();return this.graphicItem.stateProxy=this.getStateAttrs,this.graphicItem.useStates(this.states,r),this.mark.emit(Ee.AFTER_ELEMENT_STATE,{states:e},this),!0}diffAttributes(e){const t={},n=this.getFinalGraphicAttributes();for(const s in e)so(n,s)&&Pt(n[s],e[s])||(t[s]=e[s]);return t}transformElementItems(e,t,n){var s,r,a,o,l;const c=e[0];if(!c.nextAttrs||Object.keys(c.nextAttrs).length===0)return{};let u=c.nextAttrs;if(uut(t)&&e&&e.length&&B((s=c.nextAttrs)===null||s===void 0?void 0:s.points)&&(n===!0||pT(Object.keys(c.nextAttrs),this.mark.markType))){const h=this.mark.getSpec(),d=this.getGraphicAttribute("points",!1),p=this.getGraphicAttribute("segments",!1),f=h.enableSegments,g=(r=this.mark.getSpec().encode)===null||r===void 0?void 0:r[Rh.connectNulls],m=e.map(b=>b.nextAttrs),y=this.mark.isProgressive();if(u=h4(u),t===_e.line||t===_e.area){const b=aut(e,!0,d,t===_e.area);if(y)u.segments=((l=(o=(a=this.graphicItem)===null||a===void 0?void 0:a.attribute)===null||o===void 0?void 0:o.segments)!==null&&l!==void 0?l:[]).concat([{points:b}]);else if(g){if(u.segments=Sut(m,b,this),u.segments&&u.segments.some(x=>x.isConnect)){const x=ad(g,this.getDatum(),this,this.mark.parameters());x&&u.segments.forEach(S=>{S.isConnect&&Object.assign(S,x)})}u.points=b}else if(f){const x=b&&b.length!==0?b:Cut(p),S=fB(m,x,this);S?(u.segments=S,u.points=null):(u.segments=null,u.points=x),u=wut(u,this)}else u.points=b,u.segments=null}else t===_e.largeRects?u.points=out(e,!0,d):t===_e.largeSymbols&&(u.points=lut(e,!0,d))}return u}applyGraphicAttributes(e){var t,n,s;if(!Te(e))if(this.mark.needAnimate()){const r=this.diffAttributes(e),a=(t=this.getPrevGraphicAttributes())!==null&&t!==void 0?t:{},o=(n=this.getFinalGraphicAttributes())!==null&&n!==void 0?n:{};Object.keys(r).forEach(h=>{a[h]=this.getGraphicAttribute(h),o[h]=r[h]}),this.setNextGraphicAttributes(r),this.setPrevGraphicAttributes(a),this.setFinalGraphicAttributes(o);const l=(s=this.mark.animate)===null||s===void 0?void 0:s.getElementAnimators(this).filter(h=>{var d;return!(!((d=h.animationOptions.timeline.controlOptions)===null||d===void 0)&&d.ignoreLoopFinalAttributes)||!h.animationOptions.timeline.loop}),c=(l||[]).reduce((h,d)=>Object.assign(h,d.getEndAttributes()),{}),u=Object.assign({},c,o);this.graphicItem.setAttributes(u)}else this.graphicItem.setAttributes(e)}getGraphicAttribute(e,t=!1){var n;if(!this.graphicItem)return;if(t){let a;const o=this.getPrevGraphicAttributes();if(!B(a=et(o,e)))return a}const s=this.mark.getAttributeTransforms();let r=[e];if(s&&s.length){const a=s.find(o=>o.storedAttrs&&o.channels.includes(e));a&&(r=[a.storedAttrs,e])}return et((n=this.graphicItem)===null||n===void 0?void 0:n.attribute,r)}setGraphicAttribute(e,t,n=!0){if(!this.graphicItem)return;const s=this.getFinalGraphicAttributes(),r=this.getPrevGraphicAttributes();n&&s&&(s[e]=t),r&&!so(r,e)&&(r[e]=this.graphicItem.attribute[e]),this.graphicItem.setAttribute(e,t)}setGraphicAttributes(e,t=!0){if(!this.graphicItem)return;const n=this.getFinalGraphicAttributes(),s=this.getPrevGraphicAttributes();Object.keys(e).forEach(r=>{n&&t&&(n[r]=e[r]),s&&!so(s,r)&&(s[r]=this.graphicItem.attribute[r])}),this.graphicItem.setAttributes(e)}getFinalGraphicAttributes(){return this.graphicItem.finalAttrs}setFinalGraphicAttributes(e){this.graphicItem.finalAttrs=e}getPrevGraphicAttributes(){return this.graphicItem.prevAttrs}setPrevGraphicAttributes(e){this.graphicItem.prevAttrs=e}getNextGraphicAttributes(){return this.graphicItem.nextAttrs}getFinalAnimationAttribute(e){var t,n;return(n=(t=this.getFinalGraphicAttributes())===null||t===void 0?void 0:t[e])!==null&&n!==void 0?n:this.getGraphicAttribute(e)}getFinalAnimationAttributes(){var e;return(e=this.getFinalGraphicAttributes())!==null&&e!==void 0?e:this.graphicItem.attribute}setNextGraphicAttributes(e){this.graphicItem.nextAttrs=e}clearChangedGraphicAttributes(){this.graphicItem&&(this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(null))}clearGraphicAttributes(){this.graphicItem&&(this.graphicItem.prevAttrs&&this.setPrevGraphicAttributes(null),this.graphicItem.nextAttrs&&this.setNextGraphicAttributes(null),this.graphicItem.finalAttrs&&this.setFinalGraphicAttributes(null))}remove(){this.graphicItem&&(fT(this.graphicItem),this.graphicItem=null)}release(){this.removeGraphicItem(),this.mark=null,this.data=null,this.items=null}getItemAttribute(e){var t,n;if(!((t=this.items)===null||t===void 0)&&t.length)return this.mark.isCollectionMark()?B(e)?this.items.map(s=>s.nextAttrs):this.items.map(s=>{var r;return(r=s.nextAttrs)===null||r===void 0?void 0:r[e]}):B(e)?this.items[0].nextAttrs:(n=this.items[0].nextAttrs)===null||n===void 0?void 0:n[e]}setItemAttributes(e){var t;!((t=this.items)===null||t===void 0)&&t.length&&(this.mark.isCollectionMark()?ie(e)&&this.items.forEach((n,s)=>{Object.assign(n.nextAttrs,e[s])}):Object.assign(this.items[0].nextAttrs,e))}getItem(){var e,t;return this.mark&&this.mark.isCollectionMark()?(e=this.items)!==null&&e!==void 0?e:[]:(t=this.items)===null||t===void 0?void 0:t[0]}getDatum(){var e,t;return this.mark&&this.mark.isCollectionMark()?(e=this.data)!==null&&e!==void 0?e:[]:(t=this.data)===null||t===void 0?void 0:t[0]}};class Gd{constructor(e,t){this.references=new Map,this.view=e,this.depend(t==null?void 0:t.dependency)}getStartState(){return null}depend(e){this.references.clear(),q(e).map(t=>be(t)?this.view.getGrammarById(t):t).filter(t=>!B(t)).forEach(t=>{var n;this.references.set(t,((n=this.references.get(t))!==null&&n!==void 0?n:0)+1)})}parameters(){const e={};return this.references.forEach((t,n)=>{F(n.id())&&(e[n.id()]=n.output())}),e}bind(){const e=this.getEvents();(e??[]).forEach(t=>{t.type&&t.handler&&(ie(t.type)?t.type.forEach(n=>{n&&n!=="none"&&this.view.addEventListener(n,t.handler)}):t.type!=="none"&&this.view.addEventListener(t.type,t.handler))})}unbind(){const e=this.getEvents();(e??[]).forEach(t=>{t.type&&t.handler&&(ie(t.type)?t.type.forEach(n=>{n&&n!=="none"&&this.view.removeEventListener(n,t.handler)}):t.type!=="none"&&this.view.removeEventListener(t.type,t.handler))})}start(e){}reset(e){}dispatchEvent(e,t){this.view.emit(`${this.type}:${e}`,t),e==="start"&&this.options.onStart?this.options.onStart(t):e==="reset"&&this.options.onReset?this.options.onReset(t):e==="update"&&this.options.onUpdate?this.options.onUpdate(t):e==="end"&&this.options.onEnd&&this.options.onEnd(t)}}class Cf extends Gd{constructor(e,t){super(e,t),this.type=Cf.type,this.handleStart=n=>{this.start(n.element)},this.handleReset=n=>{this.reset(n.element)},this.options=Object.assign({},Cf.defaultOptions,t),this._marks=e.getMarksBySelector(this.options.selector)}getEvents(){return[{type:this.options.trigger,handler:this.handleStart},{type:this.options.triggerOff,handler:this.handleReset}]}getStartState(){return this.options.state}start(e){e&&this._marks&&this._marks.includes(e.mark)&&e.addState(this.options.state)}reset(e){e&&this._marks&&this._marks.includes(e.mark)&&e.removeState(this.options.state)}}Cf.type="element-active",Cf.defaultOptions={state:wr.active,trigger:"pointerover",triggerOff:"pointerout"};const d4=i=>i.filterField?e=>{var t;return(t=e.getDatum())===null||t===void 0?void 0:t[i.filterField]}:e=>e[i.filterType],gle=(i,e)=>{if(!e||!i)return null;const t={};return i.forEach(n=>{const s=n&&n.getSpec(),r=s&&s.encode;r&&e.forEach(a=>{a&&r[a]&&(t[a]||(t[a]=[]),t[a].push(n))})}),t},Aut=i=>{const e=q(i),t=[],n=[];return e.forEach(s=>{s==="empty"?t.push("view"):be(s)&&s!=="none"?s.includes("view:")?(n.push(s.replace("view:","")),t.push("view")):(n.push(s),t.push("self")):ye(s)&&t.push("timeout")}),{eventNames:n,resetType:t}};class od extends Gd{constructor(e,t){super(e,t),this.type=od.type,this._resetType=[],this.clearPrevElements=()=>{const{state:n,reverseState:s}=this.options;this._statedElements&&this._statedElements.length&&(this.clearAllStates(n,s),this.dispatchEvent("reset",{elements:this._statedElements,options:this.options}),this._statedElements=[])},this.handleStart=n=>{this.start(n.element)},this.handleReset=n=>{this.reset(n.element)},this.options=Object.assign({},od.defaultOptions,t),this._marks=e.getMarksBySelector(this.options.selector),this._stateMarks=gle(this._marks,[this.options.state,this.options.reverseState])}getStartState(){return this.options.state}getEvents(){const e=this.options.triggerOff,t=this.options.trigger,n=[{type:t,handler:this.handleStart}],{eventNames:s,resetType:r}=Aut(e);return s.forEach(a=>{a&&(ie(t)?!t.includes(a):a!==t)&&n.push({type:a,handler:this.handleReset})}),this._resetType=r,n}start(e){const{state:t,reverseState:n,isMultiple:s}=this.options;if(e&&this._marks&&this._marks.includes(e.mark))if(e.hasState(t)){if(this._resetType.includes("self")){const r=this._statedElements&&this._statedElements.filter(a=>a!==e);r&&r.length?this._statedElements=this.updateStates(r,this._statedElements,t,n):this.clearPrevElements()}}else this._timer&&clearTimeout(this._timer),e.addState(t),this._statedElements=this.updateStates(s&&this._statedElements?[...this._statedElements,e]:[e],this._statedElements,t,n),this.dispatchEvent("start",{elements:this._statedElements,options:this.options}),this._resetType.includes("timeout")&&(this._timer=setTimeout(()=>{this.clearPrevElements()},this.options.triggerOff));else this._resetType.includes("view")&&this._statedElements&&this._statedElements.length&&this.clearPrevElements()}reset(e){if(!this._statedElements||!this._statedElements.length)return;const t=e&&this._marks&&this._marks.includes(e.mark);(this._resetType.includes("view")&&!t||this._resetType.includes("self")&&t)&&this.clearPrevElements()}}od.type="element-select",od.defaultOptions={state:wr.selected,trigger:"click"};class ld extends Gd{constructor(e,t){super(e,t),this.type=ld.type,this.handleStart=n=>{this.start(n.element)},this.handleReset=n=>{this.reset(n.element)},this.options=Object.assign({},ld.defaultOptions,t),this._marks=e.getMarksBySelector(this.options.selector),this._stateMarks=gle(this._marks,[this.options.highlightState,this.options.blurState])}getStartState(){return this.options.highlightState}getEvents(){const e=this.options.triggerOff,t=[{type:this.options.trigger,handler:this.handleStart}];let n=e;return be(e)&&e.includes("view:")?(n=e.replace("view:",""),this._resetType="view"):this._resetType="self",t.push({type:n,handler:this.handleReset}),t}clearPrevElements(){const{highlightState:e,blurState:t}=this.options;this._lastElement&&(this.clearAllStates(e,t),this.dispatchEvent("reset",{elements:[this._lastElement],options:this.options}),this._lastElement=null,this._statedElements=null)}start(e){if(e&&this._marks&&this._marks.includes(e.mark)){const{highlightState:t,blurState:n}=this.options;if(this._lastElement===e)return;this._statedElements=this.updateStates([e],this._statedElements,t,n),this._lastElement=e,this.dispatchEvent("start",{elements:[e],options:this.options})}else this._lastElement&&this._resetType==="view"&&this.clearPrevElements()}reset(e){if(!this._statedElements||!this._statedElements.length)return;const t=e&&this._marks&&this._marks.includes(e.mark);this._resetType!=="view"||t?this._resetType==="self"&&t&&this.clearPrevElements():this.clearPrevElements()}}ld.type="element-highlight",ld.defaultOptions={highlightState:wr.highlight,blurState:wr.blur,trigger:"pointerover",triggerOff:"pointerout"};class wf extends Gd{constructor(e,t){super(e,t),this.type=wf.type,this.handleStart=n=>{this.start(n.element)},this.handleReset=n=>{n.element&&this._marks&&this._marks.includes(n.element.mark)&&this.clearPrevElements()},this.options=Object.assign({},wf.defaultOptions,t),this._marks=e.getMarksBySelector(this.options.selector)}getStartState(){return this.options.highlightState}getEvents(){return[{type:this.options.trigger,handler:this.handleStart},{type:this.options.triggerOff,handler:this.handleReset}]}clearPrevElements(){const e=[this.options.highlightState,this.options.blurState];this._marks.forEach(t=>{t.elements.forEach(n=>{n.removeState(e)})})}start(e){if(e&&this._marks&&this._marks.includes(e.mark)){const t=e.key;if(B(t))return;this._marks.forEach(n=>{n.elements.forEach(s=>{s.key===t?s.updateStates({[this.options.blurState]:!1,[this.options.highlightState]:!0}):s.updateStates({[this.options.blurState]:!0,[this.options.highlightState]:!1})})})}}reset(e){if(e&&this._marks&&this._marks.includes(e.mark)){const t=e.key;if(B(t))return;this._marks.forEach(n=>{n.elements.forEach(s=>{s.key===t?s.updateStates({[this.options.blurState]:!1,[this.options.highlightState]:!0}):s.updateStates({[this.options.blurState]:!0,[this.options.highlightState]:!1})})})}}}wf.type="element-highlight-by-key",wf.defaultOptions={highlightState:wr.highlight,blurState:wr.blur,trigger:"pointerover",triggerOff:"pointerout"};class Af extends Gd{constructor(e,t){super(e,t),this.type=Af.type,this.handleStart=n=>{this.start(n.element)},this.handleReset=n=>{this.reset(n.element)},this.options=Object.assign({},Af.defaultOptions,t),this._marks=e.getMarksBySelector(this.options.selector)}getStartState(){return this.options.highlightState}getEvents(){return[{type:this.options.trigger,handler:this.handleStart},{type:this.options.triggerOff,handler:this.handleReset}]}clearPrevElements(){const e=[this.options.highlightState,this.options.blurState];this._marks.forEach(t=>{t.elements.forEach(n=>{n.removeState(e)})})}start(e){if(e&&this._marks&&this._marks.includes(e.mark)){const t=e.groupKey;if(B(t))return;this._marks.forEach(n=>{n.elements.forEach(s=>{s.groupKey===t?s.updateStates({[this.options.blurState]:!1,[this.options.highlightState]:!0}):s.updateStates({[this.options.blurState]:!0,[this.options.highlightState]:!1})})})}}reset(e){e&&this._marks&&this._marks.includes(e.mark)&&this.clearPrevElements()}}Af.type="element-highlight-by-group",Af.defaultOptions={highlightState:wr.highlight,blurState:wr.blur,trigger:"pointerover",triggerOff:"pointerout"};class kf extends Gd{constructor(e,t){super(e,t),this.type=kf.type,this.handleStart=n=>{var s,r;this.start((r=(s=n.detail)===null||s===void 0?void 0:s.data)===null||r===void 0?void 0:r.id)},this.handleReset=n=>{this.reset()},this.options=Object.assign({},kf.defaultOptions,t),this._marks=e.getMarksBySelector(this.options.selector)}getEvents(){return[{type:Gs.legendItemHover,handler:this.handleStart},{type:Gs.legendItemUnHover,handler:this.handleReset}]}getStartState(){return this.options.state}start(e){const t=e;if(B(t))return;const n=d4(this.options);this._marks.forEach(s=>{s.elements.forEach(r=>{n(r)===t?r.addState(this.options.state):r.removeState(this.options.state)})})}reset(){this._marks.forEach(e=>{e.elements.forEach(t=>{t.removeState(this.options.state)})})}}kf.type="element-active-by-legend",kf.defaultOptions={state:wr.active,filterType:"groupKey"};class Tf extends Gd{constructor(e,t){super(e,t),this.type=Tf.type,this.handleStart=(n,s)=>{var r,a;this.start((a=(r=n.detail)===null||r===void 0?void 0:r.data)===null||a===void 0?void 0:a.id)},this.handleReset=n=>{this.reset()},this.options=Object.assign({},Tf.defaultOptions,t),this._marks=e.getMarksBySelector(this.options.selector)}getStartState(){return this.options.highlightState}getEvents(){return[{type:Gs.legendItemHover,handler:this.handleStart},{type:Gs.legendItemUnHover,handler:this.handleReset}]}start(e){if(B(e))return;const t=d4(this.options);this._marks.forEach(n=>{n.elements.forEach(s=>{t(s)===e?s.updateStates({[this.options.blurState]:!1,[this.options.highlightState]:!0}):s.updateStates({[this.options.blurState]:!0,[this.options.highlightState]:!1})})})}reset(){const e=[this.options.blurState,this.options.highlightState];this._marks.forEach(t=>{t.elements.forEach(n=>{n.removeState(e)})})}}Tf.type="element-highlight-by-legend",Tf.defaultOptions={highlightState:wr.highlight,blurState:wr.blur,filterType:"groupKey"};class Ef extends Gd{constructor(e,t){super(e,t),this.type=Ef.type,this.handleStart=(n,s)=>{if(this.options.shouldStart?this.options.shouldStart(n):this._filterByName(n)){const r=this._parseTargetKey(n,s);this.start(r)}},this.handleReset=n=>{(this.options.shouldReset?this.options.shouldReset(n):this._filterByName(n))&&this.reset()},this.options=Object.assign({},Ef.defaultOptions,t),this._marks=e.getMarksBySelector(this.options.selector)}getStartState(){return this.options.highlightState}getEvents(){return[{type:this.options.trigger,handler:this.handleStart},{type:this.options.triggerOff,handler:this.handleReset}]}_filterByName(e){var t;const n=q(this.options.graphicName);return((t=e==null?void 0:e.target)===null||t===void 0?void 0:t.name)&&n.includes(e.target.name)}_parseTargetKey(e,t){return this.options.parseData?this.options.parseData(e):e.target.type==="text"?e.target.attribute.text:null}start(e){if(B(e))return;const t=d4(this.options);this._marks.forEach(n=>{n.elements.forEach(s=>{t(s)===e?s.updateStates({[this.options.blurState]:!1,[this.options.highlightState]:!0}):s.updateStates({[this.options.blurState]:!0,[this.options.highlightState]:!1})})})}reset(){const e=[this.options.blurState,this.options.highlightState];this._marks.forEach(t=>{t.elements.forEach(n=>{n.removeState(e)})})}}Ef.type="element-highlight-by-name",Ef.defaultOptions={trigger:"pointerover",triggerOff:"pointerout",highlightState:wr.highlight,blurState:wr.blur,filterType:"groupKey"};function fK(i){if(i)return i.type===rn.Band?i.bandwidth():i.type===rn.Point?i.step():void 0}class mle{updateStates(e,t,n,s){return e&&e.length?(n&&s?t&&t.length?(this.toggleReverseStateOfElements(e,t,s),this.toggleStateOfElements(e,t,n)):this.addBothStateOfElements(e,n,s):n&&(t&&t.length?this.toggleStateOfElements(e,t,n):this.addStateOfElements(e,n)),e):null}toggleReverseStateOfElements(e,t,n){t.forEach(s=>{n&&this._stateMarks[n]&&this._stateMarks[n].includes(s.mark)&&s.addState(n)}),e.forEach(s=>{n&&this._stateMarks[n]&&this._stateMarks[n].includes(s.mark)&&s.removeState(n)})}toggleStateOfElements(e,t,n){t.forEach(s=>{n&&this._stateMarks[n]&&this._stateMarks[n].includes(s.mark)&&s.removeState(n)}),e.forEach(s=>{n&&this._stateMarks[n]&&this._stateMarks[n].includes(s.mark)&&s.addState(n)})}addBothStateOfElements(e,t,n){this._marks.forEach(s=>{var r;const a=n&&this._stateMarks[n]&&this._stateMarks[n].includes(s),o=t&&this._stateMarks[t]&&this._stateMarks[t].includes(s);(a||o)&&((r=s.elements)===null||r===void 0||r.forEach(l=>{e&&e.includes(l)?o&&l.addState(t):a&&l.addState(n)}))})}addStateOfElements(e,t){this._marks.forEach(n=>{var s;const r=t&&this._stateMarks[t]&&this._stateMarks[t].includes(n);r&&((s=n.elements)===null||s===void 0||s.forEach(a=>{e&&e.includes(a)&&r&&a.addState(t)}))})}clearAllStates(e,t){this._statedElements&&this._statedElements.length&&this._marks.forEach(n=>{n&&n.elements&&(t&&this._stateMarks[t]&&this._stateMarks[t].includes(n)&&n.elements.forEach(s=>{s.removeState(t)}),e&&this._stateMarks[e]&&this._stateMarks[e].includes(n)&&n.elements.forEach(s=>{this._statedElements.includes(s)&&s.removeState(e)}))})}}const kut=()=>{Q.registerInteraction(Cf.type,Cf)},Tut=()=>{Yt(od,mle),Q.registerInteraction(od.type,od)},Eut=()=>{Yt(ld,mle),Q.registerInteraction(ld.type,ld)},Put=()=>{Q.registerInteraction(wf.type,wf)},Out=()=>{Q.registerInteraction(Af.type,Af)},Mut=()=>{Q.registerInteraction(kf.type,kf)},Iut=()=>{Q.registerInteraction(Tf.type,Tf)},Rut=()=>{Q.registerInteraction(Ef.type,Ef)},gK=(i,e)=>Ux(i)?i.output():i&&Ke(i)?ee(i.callback)?t=>i.callback(t,e):ee(i.value)?i.value(e):i:i,Lut=(i,e)=>i&&(Ke(i)?Object.keys(i).reduce((t,n)=>{const s=i[n];return t[n]=gK(s,e),t},{}):i.map(t=>gK(t,e)));let Dut=-1;class bO extends Yf{constructor(e){super(),this.spec={},this.references=new Map,this.targets=[],this.transforms=[],this.view=e,this.uid=++Dut}parse(e){return this.id(e.id),this.name(e.name),this.depend(e.dependency),this}depend(e){var t;if(!((t=this.spec)===null||t===void 0)&&t.dependency){const s=q(this.spec.dependency).map(r=>be(r)?this.view.getGrammarById(r):r);this.detach(s)}this.spec.dependency=e;const n=q(e).map(s=>be(s)?this.view.getGrammarById(s):s);return this.attach(n),this.commit(),this}addEventListener(e,t,n){let s=t;return n&&n.trap===!1||(s=t,s.raw=t),n&&n.target&&(s.target=n.target),this.on(e,s),this}removeEventListener(e,t){return t?this.off(e,t):this.off(e),this}emit(e,...t){var n,s;return(s=(n=this.view)===null||n===void 0?void 0:n.emit)===null||s===void 0||s.call(n,e,...t),super.emit(e,...t)}emitGrammarEvent(e,...t){return super.emit(e,...t)}evaluateTransform(e,t,n){if(!e||!e.length)return t;let s=t,r=0;const a=e.length;for(;r<a;){const o=e[r];this.emit(Ee.BEFORE_TRANSFORM,o.type),s=o.transform(o.isRawOptions?o.options:Lut(o.options,n),s,n,this.view),r++,this.emit(Ee.AFTER_TRANSFORM,o.type)}return s}set(e){return!1}id(e){return arguments.length?(this.view.grammars.unrecord(this),this._id=e,this.view.grammars.record(this),this):this._id}name(e){return arguments.length?(this._name=e,this):this._name}attach(e,t=1){return q(e).filter(n=>!B(n)).forEach(n=>{var s;B(e)||(n.targets.includes(this)||n.targets.push(this),this.references.set(n,((s=this.references.get(n))!==null&&s!==void 0?s:0)+t))}),this}detach(e,t=1){return q(e).filter(n=>!B(n)).forEach(n=>{const s=this.references.get(n)-t;s>0?this.references.set(n,s-1):(this.references.delete(n),n.targets.includes(this)&&(n.targets=n.targets.filter(r=>r!==this)))}),this}detachAll(){this.references.forEach((e,t)=>{this.detach(t,e)})}link(e){this.grammarSource=e}run(){var e;const t=(e=this.grammarSource)===null||e===void 0?void 0:e.output(),n=this.parameters();return this.evaluate(t,n)}commit(){this.view.commit(this)}parameters(){const e={};return this.references.forEach((t,n)=>{F(n.id())&&(e[n.id()]=n.output())}),e}getSpec(){return this.spec}reuse(e){return this}clear(){this.spec=null,this.view=null}release(){this.clear()}setFunctionSpec(e,t){return B(this.spec[t])||this.detach(Ws(this.spec[t],this.view)),this.spec[t]=e,this.attach(Ws(e,this.view)),this.commit(),this}}const mK=(i,e,t)=>{var n;if(i==="callback"&&ee(e))return{references:[],value:{callback:e,dependency:[]}};if(!B(e.data)){const s=t.getDataById(e.data);return{references:[s],value:s}}if(!B(e.customized)){const s=t.getCustomizedById(e.customized);return{references:[s],value:s}}if(!B(e.scale)){const s=t.getScaleById(e.scale);return{references:[s],value:s}}if(sut(e)){const s=Ws(e,t);return{references:s,value:e.callback?{value:e.callback,dependency:s}:(n=s==null?void 0:s[0])!==null&&n!==void 0?n:e}}return{value:e}},Fut=(i,e,t)=>{if(B(e))return{value:e};if(ie(e)){const n=e.map(s=>mK(i,s,t));return{references:n.reduce((s,r)=>(r.references&&s.concat(r.references),s),[]),value:n.map(s=>s.value)}}return mK(i,e,t)},But=(i,e)=>{const t=Q.getTransform(i.type);if(!t)return;const n={};let s=[];return Object.keys(i).forEach(r=>{var a;if(r==="type")return;const o=i[r];if(r==="dependency")return void((o==null?void 0:o.length)&&(s=s.concat(dle(o,e))));const l=Fut(r,o,e);l&&(!((a=l.references)===null||a===void 0)&&a.length&&(s=s.concat(l.references)),n[r]=l.value)}),{markPhase:t.markPhase,transform:t.transform,canProgressive:t.canProgressive,type:t.type,options:n,references:s}},mT=(i,e)=>{if(i!=null&&i.length){const t=[];let n=[];return i.forEach(s=>{var r;const a=But(s,e);a&&(!((r=a.references)===null||r===void 0)&&r.length&&(n=n.concat(a.references)),t.push(a))}),{transforms:t,refs:n}}return null},jut=(i,e={},t)=>{if(!be(i))return q(i);try{return q(JSON.parse(i))}catch{return[]}},yK={csv:Xse,dsv:Kse,tsv:Yse,json:jut},Nut=(i,e)=>{if(!e||!yK[e.type])return q(i);const t=e.type==="dsv"?{delimiter:e.delimiter}:{};return yK[e.type](i,t,new Rt(new Td))};class $ut extends bO{constructor(e,t,n){super(e),this.grammarType="data",this.spec={},this._dataIDKey=`VGRAMMAR_DATA_ID_KEY_${this.uid}`,this._loadTasks=[],this._postFilters=[],this.ingest=s=>{const r=nut(s.format,this.parameters());return this._input=Nut(s.values,r),this._input},this.load=s=>{if(s.values)return this.ingest(s)},this.relay=s=>s[0],this._loadTasks=[],B(t)||this.values(t,n)}parse(e){return super.parse(e),this._isLoaded=!1,this.source(e.source,e.format,!1),this.url(e.url,e.format,!1),this.values(e.values,e.format,!1),this.transform(e.transform),this.parseLoad(e),this.commit(),this}parseDataSource(e){const t=[],n=[],s=e.format?Ws(e.format,this.view)[0]:null;if(s&&t.push(s),e.values){const r=Ws(e.values,this.view)[0];r&&t.push(r),n.push({type:"ingest",transform:this.ingest,isRawOptions:!0,options:{values:e.values,format:e.format}})}else if(e.url){const r=Ws(e.url,this.view)[0];r&&t.push(r),n.push({type:"load",transform:this.load,options:{url:r??e.url,format:s??e.format}})}else if(e.source){const r=[];q(e.source).forEach(a=>{const o=Ux(a)?a:this.view.getDataById(a);o&&(t.push(o),r.push(o))}),r.length&&(n.push({type:"relay",transform:this.relay,options:r}),this.grammarSource=r[0])}return{transforms:n,refs:t}}evaluate(e,t){this.view.emit(Ee.BEFORE_EVALUATE_DATA);const n=this._isLoaded?this.transforms:this._loadTasks.concat(this.transforms);this.grammarSource&&(this._input=e);const s=this.evaluateTransform(n,this._input,t),r=this._evaluateFilter(s,t);return this.setValues(r),this._isLoaded=!0,this.view.emit(Ee.AFTER_EVALUATE_DATA),this}output(){return this._values}getDataIDKey(){return this._dataIDKey}values(e,t,n=!0){const s=Object.assign({},this.spec,{values:e,format:t});return B(e)||(s.url=void 0,s.source=void 0),n?this.parseLoad(s):this}url(e,t,n=!0){const s=Object.assign({},this.spec,{url:e,format:t});return B(e)||(s.values=void 0,s.source=void 0),n?this.parseLoad(s):this}source(e,t,n=!0){const s=Object.assign({},this.spec,{source:e,format:t});return B(e)||(s.values=void 0,s.url=void 0),n?this.parseLoad(s):this}parseLoad(e){this.detach(this.parseDataSource(this.spec).refs),this.spec=e;const t=this.parseDataSource(this.spec);return this.attach(t.refs),this._loadTasks=t.transforms,this._isLoaded=!1,this.commit(),this}setValues(e){this._values=q(e).map((t,n)=>{const s=t===Object(t)?t:{data:t};return s[this._dataIDKey]=n,s})}field(e){return this._values.map(t=>t[e])}transform(e){const t=mT(this.spec.transform,this.view);t&&(this.detach(t.refs),this.transforms=[]),this.spec.transform=e;const n=mT(this.spec.transform,this.view);return n&&(this.attach(n.refs),this.transforms=n.transforms),this.commit(),this}getValue(){return this._values}getInput(){return this._input}addDataFilter(e){return this._postFilters=this._postFilters.concat(q(e)),this._postFilters.sort((t,n)=>{var s,r;return((s=t.rank)!==null&&s!==void 0?s:0)-((r=n.rank)!==null&&r!==void 0?r:0)}),this}removeDataFilter(e){const t=q(e);return this._postFilters=this._postFilters.filter(n=>!t.includes(n)),this}_evaluateFilter(e,t){return this._postFilters.reduce((n,s)=>s.filter(n,t),e)}reuse(e){return e.grammarType!==this.grammarType||(this._isLoaded=!1,this._values=e.output()),this}clear(){super.clear(),this._input=null,this._values=null}}function pw(i,e,t,n){let s,r;const a=i[e];for(;e>t&&(r=Math.floor((e-1)/2),s=i[r],a&&s&&n(a,s)<0);)i[e]=s,e=r;return i[e]=a}function HI(i,e,t,n){const s=e,r=i.length,a=i[e];let o,l=2*e+1;for(;l<r;)o=l+1,o<r&&n(i[l],i[o])>=0&&(l=o),i[e]=i[l],l=2*(e=l)+1;return i[e]=a,pw(i,e,s,n)}class zut{constructor(e){this.compare=e,this.nodes=[]}size(){return this.nodes.length}last(){return this.nodes[0]}validate(){for(let e=this.nodes.length-1;e>0;e-=1){const t=Math.floor((e-1)/2);if(this.compare(this.nodes[t],this.nodes[e])>0)return!1}return!0}push(e){if(this.nodes.includes(e)){const t=this.nodes.indexOf(e);return pw(this.nodes,t,0,this.compare),HI(this.nodes,t,null,this.compare)}return this.nodes.push(e),pw(this.nodes,this.nodes.length-1,0,this.compare)}remove(e){if(this.nodes.includes(e)){const t=this.nodes.indexOf(e);this.nodes=this.nodes.slice(0,t).concat(this.nodes.slice(t+1)),pw(this.nodes,t,0,this.compare),HI(this.nodes,t,null,this.compare)}}pop(){const e=this.nodes.pop();let t;return this.nodes.length?(t=this.nodes[0],this.nodes[0]=e,HI(this.nodes,0,null,this.compare)):t=e,t}clear(){this.nodes=[]}}class _K{constructor(e){this.list=[],this.ids={},this.idFunc=e||oit}add(e){const t=this.idFunc(e);return this.ids[t]||(this.ids[t]=1,this.list.push(e)),this}remove(e){const t=this.idFunc(e);return this.ids[t]&&(this.ids[t]=0,this.list=this.list.filter(n=>n!==e)),this}forEach(e,t){t?this.list.slice().reverse().forEach(e):this.list.forEach(e)}filter(e){return this.list.filter(e)}get length(){return this.list.length}getElementByIndex(e){return this.list[e]}}class Hut{constructor(){this.grammars=[],this.logger=ii.getInstance(),this._curRank=0,this._committed=new _K(e=>e.uid),this._heap=new zut((e,t)=>(e==null?void 0:e.qrank)-(t==null?void 0:t.qrank)),this._beforeRunner=null,this._afterRunner=null,this._updateCounter=0,this._finishFirstRender=!1}add(e){if(e)return this._setRankOfGrammar(e),this.commit(e),!this.grammars.includes(e)&&(this.grammars.push(e),!0)}remove(e){e&&(this._committed.remove(e),this._heap.remove(e),this.grammars=this.grammars.filter(t=>t!==e))}_setRankOfGrammar(e){e&&(e.rank=++this._curRank)}_reRank(e){const t=[e];for(;t.length;){const n=t.pop();this._setRankOfGrammar(n);const s=n.targets;s&&s.forEach(r=>{t.push(r),r===e&&this.logger.error("Cycle detected in dataflow graph.")})}}_enqueue(e){e&&(e.qrank=e.rank,this._heap.push(e))}_logGrammarRunInfo(e){if(this.logger.canLogError()){const t=[{key:"id",value:e.id()},{key:"name",value:e.name()}].reduce((n,s,r)=>B(s.value)?n:`${n}${r?" , ":""}${s.key}: ${s.value}`,"");this.logger.debug("Run Operator: ",e,t)}}hasCommitted(){return!!this._committed.length}commit(e){return this._committed.add(e),this}_beforeEvaluate(){this.grammars.forEach(e=>{e.targets.some(t=>(t==null?void 0:t.rank)<(e==null?void 0:e.rank))&&this._reRank(e)}),this._committed.forEach(e=>this._enqueue(e)),this._committed=new _K(e=>e.uid)}_enqueueTargets(e){e.targets&&e.targets.length&&this._finishFirstRender&&e.targets.forEach(t=>this._enqueue(t))}evaluate(){if(this._beforeRunner&&this._beforeRunner(this),!this._committed.length)return this.logger.info("Dataflow invoked, but nothing to do."),!1;this._updateCounter+=1;let e,t,n=0;for(this.logger.canLogInfo()&&(t=Date.now(),this.logger.debug(`-- START PROPAGATION (${this._updateCounter}) -----`)),this._beforeEvaluate();this._heap.size()>0;)e=this._heap.pop(),e&&(e.rank===e.qrank?(e.run(),this._logGrammarRunInfo(e),this._enqueueTargets(e),n+=1):this._enqueue(e));return this.logger.canLogInfo()&&(t=Date.now()-t,this.logger.info(`> ${n} grammars updated; ${t} ms`)),this._afterRunner&&this._afterRunner(this),this._finishFirstRender=!0,!0}runBefore(e){this._beforeRunner=e}runAfter(e){this._afterRunner=e}release(){this._heap&&(this._heap.clear(),this._heap=null),this.logger=null,this._committed=null}}const VI=(i,e,t,n,s)=>{const r=a=>{if(s||!a||n&&!n(a)||t.call(null,a),a.markType===_e.group){const o=a[e];o&&o.forEach(l=>{r(l)})}s&&(!a||n&&!n(a)||t.call(null,a))};r(i)};class Vut{constructor(e){this.handleAfterNextRender=()=>{this._stage&&!this._viewOptions.disableDirtyBounds&&this._stage.enableDirtyBounds(),this._view.emit(Ee.AFTER_VRENDER_DRAW),this._view.emit(Ee.AFTER_VRENDER_NEXT_RENDER)},this._view=e}initialize(e,t,n,s){return this._width=e,this._height=t,this._viewOptions=n,this._eventConfig=s,this.initStage(),this}stage(){var e;return(e=this._stage)!==null&&e!==void 0?e:null}gestureController(){var e;return(e=this._gestureController)!==null&&e!==void 0?e:null}canvas(){return this._stage?this._stage.window.getNativeHandler().nativeCanvas:null}context(){return this._stage?this._stage.window.getContext().nativeContext:null}combineIncrementalLayers(){return this._stage&&SZe(this._stage).then(()=>{this._stage&&this._stage.defaultLayer.combineSubLayer()}),this}background(e){if(this._stage)return this._stage.background=e,this}setDpr(e,t){var n,s;return(s=(n=this._stage)===null||n===void 0?void 0:n.setDpr)===null||s===void 0||s.call(n,e),t&&this.renderNextFrame(),this}shouldResize(e,t){return e!==this._width||t!==this._height}resize(e,t){return this._view.emit(Ee.BEFORE_STAGE_RESIZE),this.shouldResize(e,t)&&(this._width=e,this._height=t,this._stage&&this._stage.resize(e,t)),this._view.emit(Ee.AFTER_STAGE_RESIZE),this}setViewBox(e,t=!0){return this._stage?(!e||this._viewBox&&e.x1===this._viewBox.x1&&e.x2===this._viewBox.x2&&e.y1===this._viewBox.y1&&e.y2===this._viewBox.y2||(this._viewBox=e,this._stage.setViewBox(e.x1,e.y1,e.x2-e.x1,e.y2-e.y1,t)),this):this}render(e=!1){return this._view.emit(Ee.BEFORE_VRENDER_DRAW),this.initStage(),this._stage.disableDirtyBounds(),this._stage.afterNextRender(this.handleAfterNextRender),e&&(this._stage.render(),this._view.emit(Ee.AFTER_VRENDER_DRAW)),this}renderNextFrame(){return this.initStage(),this._stage.renderNextFrame(),this}toCanvas(){return this._stage?this._stage.toCanvas():null}preventRender(e){this._stage&&this._stage.preventRender(e)}release(){var e;this._view.traverseMarkTree(t=>{t.release()}),this._dragController&&this._dragController.release(),this._gestureController&&this._gestureController.release(),this._stage!==((e=this._viewOptions)===null||e===void 0?void 0:e.stage)&&this._stage.release(),this._stage=null,this._layer=null,this._dragController=null,this._gestureController=null}createStage(){var e,t,n,s,r;this._view.emit(Ee.BEFORE_CREATE_VRENDER_STAGE);const a=this._viewOptions,o=(e=a.stage)!==null&&e!==void 0?e:ntt({width:this._width,height:this._height,renderStyle:a.renderStyle,viewBox:a.viewBox,dpr:a.dpr,canvas:a.renderCanvas,canvasControled:a.canvasControled,container:a.container,title:a.rendererTitle,beforeRender:a.beforeRender,afterRender:a.afterRender,disableDirtyBounds:!0,autoRender:!0,pluginList:a.pluginList,enableHtmlAttribute:a.enableHtmlAttribute,optimize:a.optimize,ticker:a.ticker,supportsTouchEvents:a.supportsTouchEvents,supportsPointerEvents:a.supportsPointerEvents,ReactDOM:a.ReactDOM});!((t=a.options3d)===null||t===void 0)&&t.enable&&o.set3dOptions(a.options3d),o.enableIncrementalAutoRender(),this._viewBox=a.viewBox,this._view.emit(Ee.AFTER_CREATE_VRENDER_STAGE),this._view.emit(Ee.BEFORE_CREATE_VRENDER_LAYER);const l=(n=a.layer)!==null&&n!==void 0?n:o.defaultLayer;if(this._view.emit(Ee.AFTER_CREATE_VRENDER_LAYER),!((s=this._eventConfig)===null||s===void 0)&&s.drag&&Q.getStageEventPlugin("drag")&&(this._dragController=new(Q.getStageEventPlugin("drag"))(o)),((r=this._eventConfig)===null||r===void 0?void 0:r.gesture)&&Q.getStageEventPlugin("gesture")){const c=Ke(this._eventConfig.gesture)?this._eventConfig.gesture:{};this._gestureController=new(Q.getStageEventPlugin("gesture"))(o,c)}return{stage:o,layer:l}}initStage(){if(!this._stage){const{stage:e,layer:t}=this.createStage();this._stage=e,this._layer=t;const n=this._view.background();this.background(n)}}}const Uut="window",yT="view",Wut="browser",Lh="width",Dh="height",bv="viewWidth",xv="viewHeight",Yo="padding",p4="viewBox",Sv="autoFit",Gut="@",Kut="#";function yle(i,e,t,n){var s,r;let a=(s=e.target)===null||s===void 0?void 0:s[rd];if(!a&&n===yT){let o=e.target;const l=(r=i.rootMark)===null||r===void 0?void 0:r.graphicItem;for(;o!=null&&o.parent&&o.parent!==l;)if(o=o.parent,o[rd]){a=o[rd];break}}return e.element=a,e}class Xut extends bO{constructor(){super(...arguments),this.grammarType="signal",this.spec={value:null,update:null}}parse(e){return super.parse(e),this.value(e.value),this.update(e.update),this.commit(),this}evaluate(e,t){return this._signal=this.spec.update?Xn(this.spec.update,t,this._signal):this.spec.value,this.spec.value=this._signal,this}output(){return this._signal}getValue(){return this.output()}set(e){if(ie(e)&&ie(this.value)&&e.length===this.value.length){for(let t=0;t<e.length;t++)if(this.value[t]!==e[t])return this._signal=e,this.spec.value=e,!0;return!1}return this._signal!==e&&(this._signal=e,this.spec.value=e,!0)}update(e){return B(e)||this.value(void 0),this.setFunctionSpec(e,"update")}value(e){return B(e)||this.update(void 0),this.spec.value=e,this.commit(),this}reuse(e){return e.grammarType!==this.grammarType||(this._signal=e.output()),this}clear(){super.clear(),this._signal=null}}let Yut=-1;const vK=[Lh,Dh,Yo,bv,xv,p4,Sv],qut=(i,e,t)=>{var n,s,r,a,o;return[{id:Lh,value:(n=i[Lh])!==null&&n!==void 0?n:0},{id:Dh,value:(s=i[Dh])!==null&&s!==void 0?s:0},{id:Yo,value:Cm((a=(r=i[Yo])!==null&&r!==void 0?r:e[Yo])!==null&&a!==void 0?a:t==null?void 0:t.padding)},{id:bv,update:{callback:(l,c)=>{const u=Cm(c[Yo]);return c[Lh]-u.left-u.right},dependency:[Lh,Yo]}},{id:xv,update:{callback:(l,c)=>{const u=Cm(c[Yo]);return c[Dh]-u.top-u.bottom},dependency:[Dh,Yo]}},{id:p4,update:{callback:(l,c)=>{const u=Cm(c[Yo]);return(l||new nr).setValue(u.left,u.top,u.left+c[bv],u.top+c[xv])},dependency:[bv,xv,Yo]}},{id:Sv,value:(o=i[Sv])!==null&&o!==void 0?o:e[Sv]}]},Cm=i=>{var e,t,n,s;return ye(i)?{top:i,bottom:i,left:i,right:i}:{top:(e=i==null?void 0:i.top)!==null&&e!==void 0?e:0,bottom:(t=i==null?void 0:i.bottom)!==null&&t!==void 0?t:0,left:(n=i==null?void 0:i.left)!==null&&n!==void 0?n:0,right:(s=i==null?void 0:i.right)!==null&&s!==void 0?s:0}},Zut=i=>{var e;const t=(n,s)=>{var r,a;n.group=s;const o=(r=n.id)!==null&&r!==void 0?r:"VGRAMMAR_MARK_"+ ++Yut;n.id=o,((a=n.marks)!==null&&a!==void 0?a:[]).forEach(l=>t(l,o))};return((e=i.marks)!==null&&e!==void 0?e:[]).forEach(n=>t(n,"root")),i},Jut=i=>{var e,t,n,s,r;const{reuse:a=Yct,morph:o=qct,morphAll:l=Zct,animation:c={},enableExitAnimation:u=Qct}=i??{};return{reuse:a,morph:o,morphAll:l,animation:{easing:(e=c.easing)!==null&&e!==void 0?e:pB,delay:(t=c.delay)!==null&&t!==void 0?t:hB,duration:(n=c.duration)!==null&&n!==void 0?n:hle,oneByOne:(s=c.oneByOne)!==null&&s!==void 0?s:dB,splitPath:(r=c.splitPath)!==null&&r!==void 0?r:Jct},enableExitAnimation:u}};function Qut(i){i.mode&&st.setEnv(i.mode,i.modeParams||{})}function Fh(i,e,t){const n=new Map;if(!i||i.length===0)return{keys:[],data:n};if(!e)return n.set(Br,t?i.slice().sort(t):i.slice()),{keys:Xct,data:n};const s=_v(e);if(i.length===1){const a=s(i[0]);return n.set(a,[i[0]]),{keys:[a],data:n}}const r=new Set;return i.forEach(a=>{var o;const l=s(a),c=(o=n.get(l))!==null&&o!==void 0?o:[];c.push(a),n.set(l,c),r.add(l)}),t&&r.forEach(a=>{n.get(a).sort(t)}),{keys:Array.from(r),data:n}}class _le{constructor(e,t,n){this.prevData=e!=null&&e.length?Fh(e,t??null,n):null}setCurrentData(e){this.currentData=e}getCurrentData(){return this.currentData}doDiff(){if(this.callback)if(this.currentData&&this.prevData){const e=new Map(this.prevData.data);this.currentData.keys.forEach(t=>{this.callback(t,this.currentData.data.get(t),e.get(t)),e.delete(t)}),this.prevData.keys.forEach(t=>{e.has(t)&&this.callback(t,null,e.get(t))})}else this.currentData?this.currentData.keys.forEach(e=>{this.callback(e,this.currentData.data.get(e),null)}):this.prevData&&this.prevData.keys.forEach(e=>{this.callback(e,null,this.prevData.data.get(e))})}setCallback(e){this.callback=e}updateToCurrent(){this.prevData=this.currentData,this.currentData=null}reset(){this.prevData=null}}function eht(i,e,t){const n={enter:[],exit:[],update:[]},s=new _le(i,t);return s.setCallback((r,a,o)=>{B(a)?n.exit.push({prev:o[0]}):B(o)?n.enter.push({next:a[0]}):n.update.push({next:a[0],prev:o[0]})}),s.setCurrentData(Fh(e,t)),s.doDiff(),n}class tg extends bO{constructor(e,t,n){super(e),this.grammarType="mark",this.elements=[],this.elementMap=new Map,this.isUpdated=!0,this._isReentered=!1,this.differ=new _le([]),this.markType=t,this.spec.type=t,this.spec.encode={update:{}},this.spec.group=n,n&&(this.group=n,this.attach(n),n.appendChild(this))}parse(e){var t,n,s;if(super.parse(e),this.spec.group){const a=be(this.spec.group)?this.view.getMarkById(this.spec.group):this.spec.group;this.detach(a)}const r=be(e.group)?this.view.getMarkById(e.group):e.group;return this.attach(r),this.join((t=e.from)===null||t===void 0?void 0:t.data,e.key,e.sort,e.groupBy,e.groupSort),this.coordinate(e.coordinate),this.state(e.state,this.spec.stateSort),Object.keys((n=this.spec.encode)!==null&&n!==void 0?n:{}).forEach(a=>{this.encodeState(a,{},!0)}),Object.keys((s=e.encode)!==null&&s!==void 0?s:{}).forEach(a=>{this.encodeState(a,e.encode[a])}),this.animation(e.animation),this.animationState(e.animationState),this.morph(e.morph,e.morphKey,e.morphElementKey),this.layout(e.layout),this.configure(e),this.transform(e.transform),this.parseAddition(e),this.spec=e,this.markType=e.type,this.commit(),this}parameters(){var e;return(e=this._finalParameters)!==null&&e!==void 0?e:super.parameters()}parseAddition(e){return this}reuse(e){var t;if(e.grammarType!==this.grammarType)return this;const n=e;return this.markType=n.markType,this.coord=n.coord,this.elementMap=n.elementMap,this.elements=n.elements,this.elementMap.forEach(s=>s.mark=this),this.differ=n.differ,(t=this.reuseAnimate)===null||t===void 0||t.call(this,n),this._context=n._context,this.graphicItem=n.graphicItem,this.graphicIndex=n.graphicIndex,this.graphicParent=n.graphicParent,this.needClear=n.needClear,this.isUpdated=n.isUpdated,this}needLayout(){return!B(this.spec.layout)}handleLayoutEnd(){}handleRenderEnd(){this.needClear&&(this.cleanExitElements(),this.elementMap.forEach(e=>{e.diffState===Ft.exit?e.clearGraphicAttributes():e.clearChangedGraphicAttributes()}),this.differ.updateToCurrent(),this.needClear=!1)}evaluateMainTasks(e,t){var n,s;if(this.needSkipBeforeLayout()&&this.view.getLayoutState()===su.before)return this;const r=(n=this.view.renderer)===null||n===void 0?void 0:n.stage();this.init(r,t);const a=this.evaluateTransform(this._getTransformsBeforeJoin(),e??dw,t),o=a==null?void 0:a.progressive;if(o?this.renderContext={large:!1}:(this.evaluateGroup(a),this.renderContext=this.parseRenderContext(a,t)),(s=this.renderContext)===null||s===void 0?void 0:s.progressive)this.differ.reset(),this.elementMap.clear(),this.evaluateProgressive();else{let l=null;if(o){if(this.renderContext.parameters=t,this.renderContext.beforeTransformProgressive=a.progressive,l=a.progressive.output(),a.progressive.canAnimate&&a.progressive.unfinished())return this.update(this.spec),this}else l=a;this.emit(Ee.BEFORE_MARK_JOIN),this.evaluateJoin(l),this.emit(Ee.AFTER_MARK_JOIN),this.emit(Ee.BEFORE_MARK_STATE),this.evaluateState(this.elements,this.spec.state,t),this.emit(Ee.AFTER_MARK_STATE),this.emit(Ee.BEFORE_MARK_ENCODE),this.evaluateEncode(this.elements,this._getEncoders(),t),this.emit(Ee.AFTER_MARK_ENCODE)}return this.update(this.spec),this}evaluateGroup(e){if(this.markType===_e.group)return;const t=Fh(e??dw,this.spec.groupBy,this.spec.groupSort);this._groupEncodeResult=null,this._groupedData=t}_getTransformsAfterEncodeItems(){return this.transforms&&this.transforms.filter(e=>e.markPhase==="afterEncodeItems")}_getTransformsAfterEncode(){return this.transforms&&this.transforms.filter(e=>B(e.markPhase)||e.markPhase==="afterEncode")}_getTransformsBeforeJoin(){return this.transforms?this.transforms.filter(e=>e.markPhase==="beforeJoin"):[]}evaluate(e,t){var n;return this.evaluateMainTasks(e,t),!((n=this.renderContext)===null||n===void 0)&&n.progressive||this.evaluateTransform(this._getTransformsAfterEncode(),this.elements,t),this}output(){return this}join(e,t,n,s,r){return this.grammarSource&&(this.detach(this.grammarSource),this.grammarSource=null),this.spec.from=null,B(e)||(be(e)?this.grammarSource=this.view.getDataById(e):this.grammarSource=e,this.spec.from={data:e},this.attach(this.grammarSource)),this.spec.key=t,this.spec.sort=n,this.spec.groupBy=s,this.spec.groupSort=r,this.commit(),this}coordinate(e){return be(e)?this.coord=this.view.getCoordinateById(e):this.coord=e,this.attach(this.coord),this.commit(),this}state(e,t){return this.spec.stateSort=t,this.setFunctionSpec(e,"state")}encode(e,t,n){return this.encodeState(Ft.update,e,t,n)}encodeState(e,t,n,s){if(e===Ft.enter&&(this._isReentered=!0),this.spec.encode[e]){const r=this.spec.encode[e];if(Ip(r))this.detach(sp(r,this.view));else{const a=be(t);a&&s||!a&&n?(Object.keys(r).forEach(o=>{this.detach(sp(r[o],this.view))}),this.spec.encode[e]={}):a?this.detach(sp(r[t],this.view)):Object.keys(t).forEach(o=>{this.detach(sp(r[o],this.view))})}}return t&&(this.spec.encode[e]||(this.spec.encode[e]={}),be(t)?(this.spec.encode[e][t]=n,this.attach(sp(n,this.view))):Ip(t)?(this.spec.encode[e]=t,this.attach(sp(t,this.view))):t&&(Object.assign(this.spec.encode[e],t),Object.values(t).forEach(r=>{this.attach(sp(r,this.view))}))),this.commit(),this}_getEncoders(){var e;return(e=this.spec.encode)!==null&&e!==void 0?e:{}}animation(e){return this.spec.animation=e,this}animationState(e){return this.setFunctionSpec(e,"animationState")}layout(e){return this.spec.layout=e,this.commit(),this}morph(e,t,n){return this.spec.morph=e,this.spec.morphKey=t,this.spec.morphElementKey=n,this}transform(e){const t=mT(this.spec.transform,this.view);t&&(this.detach(t.refs),this.transforms=[]);const n=mT(e,this.view);return n&&(this.attach(n.refs),this.transforms=n.transforms),this.spec.transform=e,this.commit(),this}configure(e){const t=["clip","clipPath","zIndex","interactive","context","setCustomizedShape","large","largeThreshold","progressiveStep","progressiveThreshold","support3d","morph","morphKey","morphElementKey","attributeTransforms","skipTheme","enableSegments","stateSort"];return e===null?(t.forEach(n=>{B(this.spec[n])||(this.spec[n]=void 0)}),this):(t.forEach(n=>{B(e[n])||(this.spec[n]=e[n])}),this)}context(e){return this.spec.context=e,this._context=e,this}isCollectionMark(){return ule.includes(this.markType)}needAnimate(){var e;return!(!((e=this.renderContext)===null||e===void 0)&&e.progressive)&&!B(this.spec.animation)}getAllElements(){const e=this.elements.slice();return this.elementMap.forEach(t=>{t.diffState!==Ft.exit||e.includes(t)||e.push(t)}),this.spec.sort&&e.sort((t,n)=>this.spec.sort(t.getDatum(),n.getDatum())),e}getScales(){const e={};return this.references.forEach((t,n)=>{n.grammarType===uB.scale&&(e[n.id()]=n.output())}),e}getScalesByChannel(){const e=this.spec.encode;if(!e)return{};const t={},n=this.parameters();return Object.keys(e).forEach(s=>{const r=e[s];r&&!Ip(r)&&Object.keys(r).forEach(a=>{vO(r[a])&&(t[a]=d1(r[a].scale,n))})}),t}getFieldsByChannel(){const e=this.spec.encode;if(!e)return{};const t={};return Object.keys(e).forEach(n=>{const s=e[n];Ip(s)||Object.keys(s).forEach(r=>{u4(s[r])&&(t[r]=s[r].field)})}),t}init(e,t){var n,s,r,a,o;if(this._delegateEvent||(this._delegateEvent=(u,h)=>{const d=yle(this.view,u,h,yT),p=u.element;(p==null?void 0:p.mark)===this&&this.emitGrammarEvent(h,d,p)},this.initEvent()),(n=this.initAnimate)===null||n===void 0||n.call(this,this.spec),!this.group){const u=d1(this.spec.group,t);this.group=u,u&&u.appendChild(this)}const l=this.group?this.group.getGroupGraphicItem():e.defaultLayer,c=(a=(r=(s=this.group)===null||s===void 0?void 0:s.children)===null||r===void 0?void 0:r.indexOf(this))!==null&&a!==void 0?a:0;if(this.markType!==_e.group){if(!this.graphicItem){const u=vv(this,_e.group,{pickable:!1,zIndex:(o=this.spec.zIndex)!==null&&o!==void 0?o:0});(this.spec.support3d||Kct.includes(this.markType))&&u.setMode("3d"),u.name=`${this.id()||this.markType}`,this.graphicItem=u}this.graphicParent=this.graphicItem,!l||this.graphicIndex===c&&this.graphicItem.parent===l||l.insertIntoKeepIdx(this.graphicItem,c)}else this.graphicParent=l;this.graphicIndex=c}update(e){var t;if(this.emit(Ee.BEFORE_MARK_UPDATE),this._context=this.spec.context,this.isUpdated=!0,this.renderContext.progressive||(t=this.updateAnimate)===null||t===void 0||t.call(this,e),this.markType!==_e.group){if(B(e.zIndex)||this.graphicItem.setAttribute("zIndex",e.zIndex),B(e.clip)||this.graphicItem.setAttribute("clip",e.clip),!B(e.clipPath)){const n=ie(e.clipPath)?e.clipPath:e.clipPath(this.elements);n&&n.length?this.graphicItem.setAttribute("path",n):this.graphicItem.setAttributes({path:n,clip:!1})}this.elementMap.forEach(n=>{n.updateGraphicItem()})}else this.elementMap.forEach(n=>{n.updateGraphicItem()});this.emit(Ee.AFTER_MARK_UPDATE)}createElement(){return new fle(this)}evaluateJoin(e){var t,n,s,r;this.needClear=!0;const a=_v((s=(t=this.spec.key)!==null&&t!==void 0?t:(n=this.grammarSource)===null||n===void 0?void 0:n.getDataIDKey())!==null&&s!==void 0?s:()=>Br),o=_v((r=this.spec.groupBy)!==null&&r!==void 0?r:()=>Br),l=this.spec.sort,c=this.isCollectionMark(),u=new Set(this.elements.filter(p=>p.diffState===Ft.enter)),h=[];this.differ.setCallback((p,f,g)=>{var m;const y=p;let b;if(B(f))b=this.elementMap.get(y),b&&(b.diffState=Ft.exit);else if(B(g)){if(b=this.elementMap.has(y)?this.elementMap.get(y):this.createElement(),b.diffState===Ft.exit){b.diffState=Ft.enter;const S=(m=this.animate)===null||m===void 0?void 0:m.getElementAnimators(b,Ft.exit);S&&S.forEach(C=>C.stop("start"))}b.diffState=Ft.enter;const x=c?p:o(f[0]);b.updateData(x,f,a),this.elementMap.set(y,b),h.push(b)}else if(b=this.elementMap.get(y),b){b.diffState=Ft.update;const x=c?p:o(f[0]);b.updateData(x,f,a),h.push(b)}u.delete(b)});const d=e??dw;c?this.differ.setCurrentData(this._groupedData):this.differ.setCurrentData(Fh(d,p=>`${o(p)}-${a(p)}`,void 0)),this.differ.doDiff(),u.forEach(p=>{this.elementMap.delete(c?p.groupKey:`${p.groupKey}-${p.key}`),p.remove(),p.release()}),this.elements=h,l&&this.elements.length>=2&&this.elements.sort((p,f)=>l(p.getDatum(),f.getDatum()))}evaluateState(e,t,n){t&&e.forEach(s=>{s.state(t,n)})}evaluateGroupEncode(e,t,n){if(!this._groupedData||!t)return;const s={};return this._groupedData.keys.forEach(r=>{const a=e.find(o=>o.groupKey===r);a&&(s[r]=ad(t,a.items&&a.items[0]&&a.items[0].datum,a,n))}),this._groupEncodeResult=s,s}getChannelsFromConfig(e){const t=this.spec;return B(t.interactive)?null:{pickable:t.interactive}}evaluateEncode(e,t,n,s){const r=this.getChannelsFromConfig();if(t){this.emit(Ee.BEFORE_ELEMENT_ENCODE,{encoders:t,parameters:n},this);const a=s?null:this.evaluateGroupEncode(e,t[Rh.group],n);e.forEach(o=>{this.markType===_e.glyph&&this._groupEncodeResult?o.items.forEach(l=>{l.nextAttrs=Object.assign(l.nextAttrs,r,this._groupEncodeResult[o.groupKey])}):a!=null&&a[o.groupKey]&&!this.isCollectionMark()?o.items.forEach(l=>{l.nextAttrs=Object.assign(l.nextAttrs,r,a[o.groupKey])}):r&&o.items.forEach(l=>{l.nextAttrs=Object.assign(l.nextAttrs,r)}),o.encodeItems(o.items,t,this._isReentered,n),this.isCollectionMark()&&(a!=null&&a[o.groupKey])&&F(a[o.groupKey].defined)&&(o.items.forEach(l=>{l.nextAttrs.defined=a[o.groupKey].defined}),delete a[o.groupKey].defined)}),this._isReentered=!1,this.evaluateTransform(this._getTransformsAfterEncodeItems(),e,n),e.forEach(o=>{o.encodeGraphic(this.isCollectionMark()?a==null?void 0:a[o.groupKey]:null)}),this.emit(Ee.AFTER_ELEMENT_ENCODE,{encoders:t,parameters:n},this)}else e.forEach(a=>{a.initGraphicItem(r)})}addGraphicItem(e,t,n){var s;const r=n??vv(this,this.markType,e);if(r){if(!((s=this.renderContext)===null||s===void 0)&&s.progressive){let a;if(this._groupedData){const o=this._groupedData.keys.indexOf(t);o>=0&&(a=this.graphicParent.getChildAt(o))}else a=this.graphicParent.at(0);this.isCollectionMark()?(r.incremental=1,a.appendChild(r)):a.incrementalAppendChild(r)}else this.graphicParent.appendChild(r);return r}}parseRenderContext(e,t){const n=this.markType!==_e.group&&this.spec.progressiveStep>0&&this.spec.progressiveThreshold>0&&this.spec.progressiveStep<this.spec.progressiveThreshold,s=this.spec.large&&this.spec.largeThreshold>0&&e.length>=this.spec.largeThreshold;if(n){const r=this._groupedData;return r&&r.keys&&r.keys.some(a=>r.data.get(a).length>this.spec.progressiveThreshold)?{large:s,parameters:t,progressive:{data:e,step:this.spec.progressiveStep,currentIndex:0,totalStep:r.keys.reduce((a,o)=>Math.max(Math.ceil(r.data.get(o).length/this.spec.progressiveStep),a),1),groupedData:r.data}}:{large:s}}return{large:s}}isProgressive(){return this.renderContext&&(!!this.renderContext.progressive||!!this.renderContext.beforeTransformProgressive)}canAnimateAfterProgressive(){return this.renderContext&&this.renderContext.beforeTransformProgressive&&this.renderContext.beforeTransformProgressive.canAnimate()}isDoingProgressive(){return this.renderContext&&(this.renderContext.progressive&&this.renderContext.progressive.currentIndex<this.renderContext.progressive.totalStep||this.renderContext.beforeTransformProgressive&&this.renderContext.beforeTransformProgressive.unfinished())}clearProgressive(){this.renderContext&&this.renderContext.progressive&&(this.elements=[],this.graphicParent.children.forEach(e=>{e.incrementalClearChild()}),this.graphicParent.removeAllChild()),this.renderContext&&this.renderContext.beforeTransformProgressive&&this.renderContext.beforeTransformProgressive.release(),this.renderContext=null}restartProgressive(){this.renderContext&&this.renderContext.progressive&&(this.renderContext.progressive.currentIndex=0)}evaluateJoinProgressive(){var e,t,n;const s=this.renderContext.progressive.currentIndex,r=_v((n=(e=this.spec.key)!==null&&e!==void 0?e:(t=this.grammarSource)===null||t===void 0?void 0:t.getDataIDKey())!==null&&n!==void 0?n:()=>Br),a=[];if(this.isCollectionMark())return this._groupedData.keys.forEach((l,c)=>{const u=this.renderContext.progressive.groupedData.get(l),h=this.renderContext.progressive.step,d=u.slice(s*h,(s+1)*h);if(s===0){const p=this.createElement();p.diffState=Ft.enter,p.updateData(l,d,r),a.push(p)}else{const p=this.elements[c];p.updateData(l,d,r),a.push(p)}}),a;const o={};return this._groupedData.keys.forEach(l=>{const c=this.renderContext.progressive.groupedData.get(l),u=this.renderContext.progressive.step,h=c.slice(s*u,(s+1)*u),d=[];h.forEach(p=>{const f=this.createElement();f.diffState=Ft.enter,f.updateData(l,[p],r),d.push(f),a.push(f)}),o[l]=d}),{groupElements:o,elements:a}}evaluateEncodeProgressive(e,t,n){const s=this.renderContext.progressive.currentIndex;if(s===0){if(this.evaluateEncode(e,t,n),s===0&&this._groupEncodeResult&&!this.isCollectionMark()&&this.markType!==_e.glyph){const r=e[0],a=r.getGraphicItem(),o=a==null?void 0:a.parent;o&&this._groupEncodeResult[r.groupKey]&&o.setTheme({common:this._groupEncodeResult[r.groupKey]})}}else this.evaluateEncode(e,t,n,!0)}evaluateProgressive(){var e,t,n;if(!((e=this.renderContext)===null||e===void 0)&&e.beforeTransformProgressive){const l=this.renderContext.beforeTransformProgressive;l.progressiveRun();const c=l.output();if(l.canAnimate){if(l.unfinished())return;this.evaluateGroup(c)}return this.emit(Ee.BEFORE_MARK_JOIN),this.evaluateJoin(c),this.emit(Ee.AFTER_MARK_JOIN),this.emit(Ee.BEFORE_MARK_STATE),this.evaluateState(this.elements,this.spec.state,this.renderContext.parameters),this.emit(Ee.AFTER_MARK_STATE),this.emit(Ee.BEFORE_MARK_ENCODE),this.evaluateEncode(this.elements,this._getEncoders(),this.renderContext.parameters),void this.emit(Ee.AFTER_MARK_ENCODE)}if(!(!((t=this.renderContext)===null||t===void 0)&&t.progressive))return;const s=this.renderContext.parameters;this.emit(Ee.BEFORE_MARK_JOIN);const r=this.evaluateJoinProgressive(),a=Array.isArray(r)?r:r.elements;if(this.emit(Ee.AFTER_MARK_JOIN),this.renderContext.progressive.currentIndex===0?(this.graphicParent.removeAllChild(),this._groupedData.keys.forEach(l=>{const c=vv(this,_e.group,{pickable:!1,zIndex:this.spec.zIndex});c.incremental=this.renderContext.progressive.step,this.graphicParent.appendChild(c)}),this.elements=a):this.elements=this.elements.concat(a),this.emit(Ee.BEFORE_MARK_STATE),this.evaluateState(a,this.spec.state,s),this.emit(Ee.AFTER_MARK_STATE),this.emit(Ee.BEFORE_MARK_ENCODE),Array.isArray(r))this.evaluateEncodeProgressive(a,this._getEncoders(),s);else{const l=r.groupElements;Object.keys(l).forEach(c=>{this.evaluateEncodeProgressive(l[c],this._getEncoders(),s)})}this.emit(Ee.AFTER_MARK_ENCODE);const o=(n=this._getTransformsAfterEncode())===null||n===void 0?void 0:n.filter(l=>l.canProgressive===!0);o!=null&&o.length&&this.evaluateTransform(o,this.elements,s),this.renderContext.progressive.currentIndex+=1}isLargeMode(){return this.renderContext&&this.renderContext.large}cleanExitElements(){this.elementMap.forEach((e,t)=>{e.diffState!==Ft.exit||e.isReserved||(this.elementMap.delete(t),e.remove(),e.release())})}getGroupGraphicItem(){if(this.elements&&this.elements[0]&&this.elements[0].getGraphicItem)return this.elements[0].getGraphicItem()}getBounds(){var e;return this.graphicItem?this.graphicItem.AABBBounds:(e=this.getGroupGraphicItem())===null||e===void 0?void 0:e.AABBBounds}getMorphConfig(){var e;return{morph:(e=this.spec.morph)!==null&&e!==void 0&&e,morphKey:this.spec.morphKey,morphElementKey:this.spec.morphElementKey}}getAttributeTransforms(){var e;return(e=this.spec.attributeTransforms)!==null&&e!==void 0?e:Wx[this.markType]}getContext(){return this._context}needSkipBeforeLayout(){var e,t;if(((e=this.spec.layout)===null||e===void 0?void 0:e.skipBeforeLayouted)===!0)return!0;let n=this.group;for(;n;){if(((t=n.getSpec().layout)===null||t===void 0?void 0:t.skipBeforeLayouted)===!0)return!0;n=n.group}return!1}initEvent(){if(this._delegateEvent){const e=this.view.renderer.stage();e&&e.on("*",this._delegateEvent)}}releaseEvent(){if(this._delegateEvent){const e=this.view.renderer.stage();e&&e.off("*",this._delegateEvent)}}clear(){var e;this.releaseEvent(),this.transforms=null,this.elementMap=null,this.elements=null,this.graphicItem=null,this.animate=null,(e=this.group)===null||e===void 0||e.removeChild(this),this.group=null,super.clear()}prepareRelease(){var e;this.differ.setCurrentData(null),(e=this.animate)===null||e===void 0||e.stop(),this.elementMap.forEach(t=>t.diffState=Ft.exit),this._finalParameters=this.parameters()}release(){this.releaseEvent(),this.elements.forEach(e=>e.release()),this.differ=null,this.elements=[],this.elementMap.clear(),this._finalParameters=null,this.animate&&this.animate.release(),this.graphicItem&&fT(this.graphicItem),this.detachAll(),super.release()}}let tht=class extends tg{constructor(e,t){super(e,_e.group,t),this.children=[]}parseRenderContext(){return{large:!1}}appendChild(e){return this.children.push(e),this}removeChild(e){return this.children=this.children.filter(t=>t!==e),this}includesChild(e,t=!0){return!!this.children.includes(e)||!!t&&this.children.some(n=>n.markType===_e.group&&n.includesChild(e,!0))}updateLayoutChildren(){return this.children.length?(this.layoutChildren||(this.layoutChildren=[]),this.layoutChildren=this.children.filter(e=>e.needLayout()),this):this}getAttributeTransforms(){return Wx.rect}evaluateJoin(e){if(!this.elements.length){const t=this.createElement();t.updateData(Br,dw,()=>""),this.elements=[t],this.elementMap.set(Br,t)}}getChannelsFromConfig(e){const t=this.spec,n={};if(B(t.clip)||(n.clip=t.clip),B(t.zIndex)||(n.zIndex=t.zIndex),!B(t.clipPath)){const s=ee(t.clipPath)?t.clipPath([e]):t.clipPath;s&&s.length?n.path=s:(n.path=null,n.clip=!1)}return B(t.interactive)||(n.pickable=t.interactive),n}evaluateGroupEncode(e,t,n){var s;const r=this.elements[0],a={},o=[Object.assign({},(s=r.items)===null||s===void 0?void 0:s[0],{nextAttrs:a})];return Jc(r,o,t,n),this._groupEncodeResult=a,a}evaluateEncode(e,t,n,s){const r=this.getChannelsFromConfig();if(t){this.emit(Ee.BEFORE_ELEMENT_ENCODE,{encoders:t,parameters:n},this);const a=s?null:this.evaluateGroupEncode(e,t[Rh.group],n);e.forEach(o=>{o.items.forEach(l=>{l.nextAttrs=Object.assign(l.nextAttrs,r,a)}),o.encodeItems(o.items,t,this._isReentered,n)}),this._isReentered=!1,this.evaluateTransform(this._getTransformsAfterEncodeItems(),e,n),e.forEach(o=>{o.encodeGraphic()}),this.emit(Ee.AFTER_ELEMENT_ENCODE,{encoders:t,parameters:n},this)}else e.forEach(a=>{a.initGraphicItem(r)})}addGraphicItem(e,t,n){const s=n??vv(this,this.markType,e);if(s)return this.emit(Ee.BEFORE_ADD_VRENDER_MARK,{graphicItem:s}),s.name=`${this.id()||this.markType}`,this.graphicParent.insertIntoKeepIdx(s,this.graphicIndex),this.emit(Ee.AFTER_ADD_VRENDER_MARK,{graphicItem:s}),s}};class vle{constructor(e,t){this._grammars={signal:[],data:[],scale:[],coordinate:[],mark:[],customized:[]},this._grammarMap={signal:{},data:{},scale:{},coordinate:{},mark:{},customized:{}},this._size=0,this._mapKey=be(e)?n=>n[e]:e,this._warning=t}record(e){var t,n;const s=e.grammarType,r=this._mapKey(e);return this._grammarMap[s]?(this._grammars[s].push(e),B(r)||(this._grammarMap[s][r]?(t=this._warning)===null||t===void 0||t.call(this,r,e):this._grammarMap[s][r]=e)):(this._grammars.customized.push(e),B(r)||(this._grammarMap.customized[r]?(n=this._warning)===null||n===void 0||n.call(this,r,e):this._grammarMap.customized[r]=e)),this._size+=1,this}unrecord(e){const t=e.grammarType,n=this._mapKey(e);return this._grammarMap[t]?(this._grammars[t]=this._grammars[t].filter(s=>s!==e),B(n)||this._grammarMap[t][n]!==e||delete this._grammarMap[t][n]):(this._grammars.customized=this._grammars.customized.filter(s=>s!==e),B(n)||this._grammarMap.customized[n]!==e||delete this._grammarMap.customized[n]),this._size-=1,this}size(){return this._size}getSignal(e){var t;return(t=this._grammarMap.signal[e])!==null&&t!==void 0?t:null}getData(e){var t;return(t=this._grammarMap.data[e])!==null&&t!==void 0?t:null}getScale(e){var t;return(t=this._grammarMap.scale[e])!==null&&t!==void 0?t:null}getCoordinate(e){var t;return(t=this._grammarMap.coordinate[e])!==null&&t!==void 0?t:null}getMark(e){var t;return(t=this._grammarMap.mark[e])!==null&&t!==void 0?t:null}getCustomized(e){var t;return(t=this._grammarMap.customized[e])!==null&&t!==void 0?t:null}getGrammar(e){return this._grammarMap.data[e]?this._grammarMap.data[e]:this._grammarMap.signal[e]?this._grammarMap.signal[e]:this._grammarMap.scale[e]?this._grammarMap.scale[e]:this._grammarMap.coordinate[e]?this._grammarMap.coordinate[e]:this._grammarMap.mark[e]?this._grammarMap.mark[e]:this._grammarMap.customized[e]?this._grammarMap.customized[e]:null}getAllSignals(){return this._grammars.signal}getAllData(){return this._grammars.data}getAllScales(){return this._grammars.scale}getAllCoordinates(){return this._grammars.coordinate}getAllMarks(){return this._grammars.mark}getAllCustomized(){return this._grammars.customized}traverse(e){var t;Object.values((t=this._grammars)!==null&&t!==void 0?t:{}).forEach(n=>(n??[]).forEach(s=>{e.call(null,s)}))}find(e){let t=null;return this.traverse(n=>e.call(null,n)===!0&&(t=n,!0)),t}filter(e){const t=[];return this.traverse(n=>{e.call(null,n)===!0&&t.push(n)}),t}clear(){this._size=0,this._grammars={signal:[],data:[],scale:[],coordinate:[],mark:[],customized:[]},this._grammarMap={signal:{},data:{},scale:{},coordinate:{},mark:{},customized:{}}}release(){this._size=0,this._grammars=null,this._grammarMap=null}}class iht extends vle{constructor(){super(...arguments),this._markNodes=[]}record(e){if(super.record(e),e.grammarType==="mark"){const t=e,n={mark:t,parent:null,children:[]};this._markNodes.forEach(s=>{const r=s.mark;r.markType===_e.group&&r.includesChild(t,!1)?(s.children.push(n),n.parent=s):t.markType===_e.group&&t.includesChild(r,!1)&&(n.children.push(s),s.parent=n)}),this._markNodes.push(n)}return this}unrecord(e){if(super.unrecord(e),e.grammarType==="mark"){const t=e,n=this._markNodes.find(s=>s.mark===t);this._markNodes.forEach(s=>{s.mark.markType===_e.group&&s.children.includes(n)?(s.children=s.children.filter(r=>r!==n),n.parent=null):t.markType===_e.group&&n.children.includes(s)&&(n.children=n.children.filter(r=>r!==s),s.parent=null)}),this._markNodes=this._markNodes.filter(s=>s!==n)}return this}getAllMarkNodes(){return this._markNodes}clear(){super.clear(),this._markNodes=[]}release(){super.release(),this._markNodes=null}}class ble extends tg{addGraphicItem(e,t){const n=e&&e.limitAttrs,s=n&&(n.textType==="rich"||n.text&&n.text.type==="rich"),r=vv(this,s?_e.richtext:_e.text,e);return super.addGraphicItem(e,t,r)}release(){super.release()}}ble.markType=_e.text;const nht={label:{visible:!0,inside:!1,space:4,style:{fontSize:12,fill:"#89909d",fontWeight:"normal",fillOpacity:1}},tick:{visible:!0,inside:!1,alignWithLabel:!0,length:4,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},subTick:{visible:!1,inside:!1,count:4,length:2,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},line:{visible:!0,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},items:[],start:{x:0,y:0},end:{x:100,y:0},x:0,y:0},sht={title:{space:4,padding:[0,0,0,0],textStyle:{fontSize:12,fill:"#333333",fontWeight:"normal",fillOpacity:1},text:"theta"},label:{visible:!0,inside:!1,space:4,style:{fontSize:12,fill:"#6F6F6F",fontWeight:"normal",fillOpacity:1}},tick:{visible:!0,inside:!1,alignWithLabel:!0,length:4,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},subTick:{visible:!1,inside:!1,count:4,length:2,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},line:{visible:!0,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},items:[],startAngle:0,endAngle:2*Math.PI,radius:100,innerRadius:0,center:{x:0,y:0},x:0,y:0},rht={style:{stroke:"#f1f2f5"}},aht={style:{stroke:"#f1f2f5"}},oht={layout:"vertical",title:{align:"start",space:12,textStyle:{fontSize:12,fontWeight:"bold",fill:"#2C3542"}},item:{spaceCol:10,spaceRow:10,shape:{space:4,style:{size:10,cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8",stroke:"#D8D8D8",fillOpacity:.5}}},label:{space:4,style:{fontSize:12,fill:"black",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8",fillOpacity:.5}}},value:{alignRight:!1,style:{fontSize:12,fill:"#ccc",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},background:{style:{cursor:"pointer"},state:{selectedHover:{fillOpacity:.7,fill:"gray"},unSelectedHover:{fillOpacity:.2,fill:"gray"}}},focus:!1,focusIconStyle:{size:10,fill:"#333",cursor:"pointer"},visible:!0,padding:{top:2,bottom:2,left:2,right:2}},autoPage:!0,pager:{space:12,handler:{style:{size:10},space:4}},hover:!0,select:!0,selectMode:"multiple",allowAllCanceled:!1,items:[{index:0,id:"",label:"",shape:{fill:"#6690F2",stroke:"#6690F2",symbolType:"circle"}}]},lht={title:{visible:!1,text:""},colors:[],layout:"horizontal",railWidth:200,railHeight:8,railStyle:{cornerRadius:5}},cht={title:{visible:!1,text:""},trackStyle:{fill:"#ccc"},layout:"horizontal",align:"bottom",railWidth:200,railHeight:6,min:0,max:1,value:[0,1]},uht={start:{x:0,y:0},end:{x:0,y:0}},hht={start:{x:0,y:0},end:{x:0,y:0},rectStyle:{width:10,height:10}},dht={center:{x:0,y:0},radius:100,startAngle:0,endAngle:Math.PI/6},pht={center:{x:0,y:0},radius:100,startAngle:0,endAngle:2*Math.PI},fht={center:{x:0,y:0},radius:100,startAngle:0,endAngle:2*Math.PI,sides:6},ght={layout:"horizontal",railWidth:200,railHeight:10,railStyle:{cornerRadius:5},range:{draggableTrack:!0},startText:{visible:!0,text:"",space:8},endText:{visible:!0,text:"",space:8},min:0,max:1,value:[0,1]},mht={size:{width:400,height:400},dataLabels:[]},yht={type:"line-data",data:[{text:""}],position:"top",overlap:{avoidBaseMark:!1,clampForce:!1},smartInvert:!1},_ht={type:"line",data:[{text:"",data:{}}],position:"start",overlap:{avoidBaseMark:!1,clampForce:!1,size:{width:1e3,height:1e3}},smartInvert:!1},vht={type:"area",data:[{text:"",data:{}}],position:"end",overlap:{avoidBaseMark:!1,clampForce:!1,size:{width:1e3,height:1e3}},smartInvert:!1},bht={type:"rect",data:[{text:"",fill:"#606773",data:{}}],position:"top",overlap:{size:{width:1e3,height:1e3},strategy:[{type:"position"}]},smartInvert:!1},xht={type:"symbol",data:[{text:"",fill:"#606773",data:{}}],position:"top",overlap:{avoidBaseMark:!0,size:{width:1e3,height:1e3},strategy:[{type:"position"}]},smartInvert:!1},Sht={type:"arc",data:[{text:"",fill:"#606773",data:{}}],width:800,height:600,position:"outside",zIndex:302},Cht={data:[{text:"",fill:"#606773",data:{}}],overlap:{avoidBaseMark:!1,clampForce:!1,size:{width:1e3,height:1e3}},smartInvert:!1},wht={orient:"bottom",showDetail:"auto",brushSelect:!0,start:0,end:1,position:{x:0,y:0},size:{width:500,height:40},previewData:[]},Aht={},kht={},Tht={},Eht={textStyle:{fill:"#21252c"},subtextStyle:{fill:"#606773"}},Pht={width:12,height:12,padding:[2,2],railStyle:{fill:"rgba(0, 0, 0, .1)"}},xle={axis:nht,circleAxis:sht,grid:rht,circleGrid:aht,discreteLegend:oht,colorLegend:lht,sizeLegend:cht,lineCrosshair:uht,rectCrosshair:hht,sectorCrosshair:dht,circleCrosshair:pht,polygonCrosshair:fht,slider:ght,dataLabel:mht,pointLabel:Cht,lineLabel:_ht,areaLabel:vht,rectLabel:bht,symbolLabel:xht,arcLabel:Sht,lineDataLabel:yht,datazoom:wht,continuousPlayer:Aht,discretePlayer:kht,tooltip:Tht,title:Eht,scrollbar:Pht},Sle=5,Cle={symbol:{shape:"circle",size:8},text:{fontSize:14,fill:"#000000"}},bs=Object.assign({},xle);bs.axis=Object.assign({},bs.axis,{label:{style:{fill:"#bbbdc3"}},line:{style:{stroke:"#4b4f54"}},tick:{style:{stroke:"#4b4f54"}},subTick:{style:{stroke:"#4b4f54"}}}),bs.circleAxis=Object.assign({},bs.circleAxis,{label:{style:{fill:"#bbbdc3"}},line:{style:{stroke:"#4b4f54"}},tick:{style:{stroke:"#4b4f54"}},subTick:{style:{stroke:"#4b4f54"}}}),bs.grid=Object.assign({},bs.grid,{style:{stroke:"#404349"}}),bs.circleGrid=Object.assign({},bs.circleGrid,{style:{stroke:"#404349"}}),bs.rectLabel=Object.assign({},bs.rectLabel,{data:[{text:"",fill:"#888c93",data:{}}]}),bs.lineLabel=Object.assign({},bs.lineLabel,{data:[{text:"",fill:"#888c93",data:{}}]}),bs.symbolLabel=Object.assign({},bs.symbolLabel,{data:[{text:"",fill:"#888c93",data:{}}]}),bs.title=Object.assign({},bs.title,{textStyle:{fill:"#fdfdfd"},subtextStyle:{fill:"#888c93"}});const Oht={name:"dark",padding:Sle,background:"#202226",palette:{default:["#5383F4","#7BCF8E","#FF9D2C","#FFDB26","#7568D9","#80D8FB","#1857A3","#CAB0E8","#FF8867","#B9E493","#2CB4A8","#B9E4E3"]},marks:Cle,components:bs},Mht={name:"default",padding:Sle,palette:{default:["#6690F2","#70D6A3","#B4E6E2","#63B5FC","#FF8F62","#FFDC83","#BCC5FD","#A29BFE","#63C4C7","#F68484"]},marks:Cle,components:xle};class _o{static registerTheme(e,t){e&&_o._themes.set(e,t)}static unregisterTheme(e){_o._themes.delete(e)}static getTheme(e){return _o._themes.get(e)}static getDefaultTheme(){return _o.getTheme("default")}}_o._themes=new Map,_o.registerTheme("default",Mht),_o.registerTheme("dark",Oht);class f4 extends tg{constructor(e,t,n,s){super(e,_e.component,n),this._componentDatum={[Br]:0},this.componentType=t,this.spec.type="component",this.spec.componentType=t,this.mode=s,this._updateComponentEncoders()}configureComponent(e){return this.spec.componentConfig=e,this.commit(),this}addGraphicItem(e,t,n){const s=n??Q.createGraphicComponent(this.componentType,e,{mode:this.mode,skipDefault:this.spec.skipTheme});return s&&(this.emit(Ee.BEFORE_ADD_VRENDER_MARK,{graphicItem:s}),this.graphicParent.appendChild(s),this.emit(Ee.AFTER_ADD_VRENDER_MARK,{graphicItem:s})),s}join(e){return super.join(e,Br)}encodeState(e,t,n){return super.encodeState(e,t,n),this._updateComponentEncoders(),this}parseRenderContext(){return{large:!1}}_prepareRejoin(){this._componentDatum[Br]+=1}evaluateJoin(e){return this.spec.key=Br,e?(e[Br]=this._componentDatum[Br],this._componentDatum=e):this._componentDatum={[Br]:this._componentDatum[Br]},super.evaluateJoin([this._componentDatum])}_updateComponentEncoders(){this._encoders=this.spec.encode}_getEncoders(){var e;return(e=this._encoders)!==null&&e!==void 0?e:{}}}const UI=Symbol.for("key");class Iht{diffGrammar(e,t){return eht(e,t,n=>{var s;return(s=n.id())!==null&&s!==void 0?s:Symbol()})}diffMark(e,t,n){const s={enter:[],exit:[],update:[]};let r=[],a=[];e.forEach(h=>{h.markType!==_e.group&&(n.morph&&h.getMorphConfig().morph||n.morphAll||n.reuse)?r.push(h):s.exit.push({prev:[h]})}),t.forEach(h=>{h.markType!==_e.group&&(n.morph&&h.getMorphConfig().morph||n.morphAll||n.reuse)?a.push(h):s.enter.push({next:[h]})});const o=this.diffUpdateByGroup(r,a,h=>h.getMorphConfig().morphKey,h=>h.getMorphConfig().morphKey);r=o.prev,a=o.next,s.update=s.update.concat(o.update);const l=this.diffUpdateByGroup(r,a,h=>h.id(),h=>h.id());r=l.prev,a=l.next,s.update=s.update.concat(l.update);const c=Fh(r,h=>{var d,p;return(p=(d=h.group)===null||d===void 0?void 0:d.id)===null||p===void 0?void 0:p.call(d)}),u=Fh(a,h=>{var d,p;return(p=(d=h.group)===null||d===void 0?void 0:d.id)===null||p===void 0?void 0:p.call(d)});return Object.keys(u).forEach(h=>{const d=c.data.get(h),p=u.data.get(h);if(d&&p){for(let f=0;f<Math.max(d.length,p.length);f+=1){const g=d[f],m=p[f];g&&m?s.update.push({prev:[g],next:[m]}):g?s.exit.push({prev:[g]}):m&&s.enter.push({next:[m]})}r=r.filter(f=>!d.includes(f)),a=a.filter(f=>!p.includes(f))}}),r.forEach(h=>s.exit.push({prev:[h]})),a.forEach(h=>s.enter.push({next:[h]})),s}diffUpdateByGroup(e,t,n,s){const r=Fh(e,u=>{var h;return(h=n(u))!==null&&h!==void 0?h:UI}),a=Fh(t,u=>{var h;return(h=s(u))!==null&&h!==void 0?h:UI});let o=e,l=t;const c=[];return a.keys.forEach(u=>{if(u!==UI){const h=r.data.get(u),d=a.data.get(u);h&&d&&(c.push({prev:h,next:d}),o=o.filter(p=>!h.includes(p)),l=l.filter(p=>!d.includes(p)))}}),{prev:o,next:l,update:c}}}let Kd=class extends Yf{static useRegisters(e){e.forEach(t=>{t()})}constructor(e={},t={}){super(),this._observer=null,this._onResize=zd((...n)=>{const s=this._getContainerSize();s&&this.resize(s.width,s.height)},100),this.delegateEvent=(n,s)=>{const r=yle(this,n,s,yT);this.emit(s,r,n.element)},this.handleProgressiveFrame=()=>{this._progressiveMarks.length&&this._progressiveMarks.forEach(n=>{n.isDoingProgressive()&&n.evaluateProgressive()}),this.doPreProgressive()},this._config=t,this._options=Object.assign({mode:Wut},e),this.initialize()}getGrammarById(e){return this.grammars.getGrammar(e)}getSignalById(e){return this.grammars.getSignal(e)}getDataById(e){return this.grammars.getData(e)}getScaleById(e){return this.grammars.getScale(e)}getCoordinateById(e){return this.grammars.getCoordinate(e)}getMarkById(e){return this.grammars.getMark(e)}getCustomizedById(e){return this.grammars.getCustomized(e)}getGrammarsByName(e){return this.grammars.filter(t=>t.name()===e)}getGrammarsByType(e){return this.grammars.filter(t=>t.grammarType===e)}getMarksByType(e){return this.grammars.getAllMarks().filter(t=>t.markType===e)}getMarksByName(e){return this.grammars.getAllMarks().filter(t=>t.name()===e)}getMarksBySelector(e){if(!e)return null;const t=q(e),n=[];return t.forEach(s=>{if(Ux(s))return void n.push(s);if(s[0]===Kut){const a=this.getMarkById(s.slice(1));return void(a&&n.push(a))}const r=s[0]===Gut?this.getMarksByName(s.slice(1)):dut(s)?this.getMarksByType(s):null;r&&r.length&&r.forEach(a=>{n.push(a)})}),n}updateSignal(e,t){be(e)&&(e=this.getSignalById(e)),e.set(t),this.commit(e)}signal(e,t){const n=new Xut(this);return arguments.length>=1&&n.value(e),arguments.length>=2&&n.update(t),this.grammars.record(n),this._dataflow.add(n),n}data(e){const t=new $ut(this,e);return this.grammars.record(t),this._dataflow.add(t),t}scale(e){const t=Q.createGrammar("scale",this,e);return t&&(this.grammars.record(t),this._dataflow.add(t)),t}coordinate(e){const t=Q.createGrammar("coordinate",this,e);return t&&(this.grammars.record(t),this._dataflow.add(t)),t}mark(e,t,n){const s=be(t)?this.getMarkById(t):t;let r;switch(e){case _e.group:r=new tht(this,s);break;case _e.glyph:const a=Q.getMark(_e.glyph);a&&(r=new a(this,n==null?void 0:n.glyphType,s));break;case _e.component:r=Q.hasComponent(n==null?void 0:n.componentType)?Q.createComponent(n==null?void 0:n.componentType,this,s,n==null?void 0:n.mode):new f4(this,n==null?void 0:n.componentType,s,n==null?void 0:n.mode);break;case _e.text:r=new ble(this,e,s);break;default:r=Q.hasMark(e)?Q.createMark(e,this,s):new tg(this,e,s)}return this.grammars.record(r),this._dataflow.add(r),r}group(e){return this.mark(_e.group,e)}glyph(e,t){return this.mark(_e.glyph,t,{glyphType:e})}component(e,t,n="2d"){return this.mark(_e.component,t,{componentType:e,mode:n})}axis(e,t="2d"){return this.mark(_e.component,e,{componentType:$i.axis,mode:t})}grid(e,t="2d"){return this.mark(_e.component,e,{componentType:$i.grid,mode:t})}legend(e){return this.mark(_e.component,e,{componentType:$i.legend})}slider(e){return this.mark(_e.component,e,{componentType:$i.slider})}label(e){return this.mark(_e.component,e,{componentType:$i.label})}datazoom(e){return this.mark(_e.component,e,{componentType:$i.datazoom})}player(e){return this.mark(_e.component,e,{componentType:$i.player})}title(e){return this.mark(_e.component,e,{componentType:$i.title})}scrollbar(e){return this.mark(_e.component,e,{componentType:$i.scrollbar})}customized(e,t){const n=Q.createGrammar(e,this,t==null?void 0:t.type);if(n)return n.parse(t),this.grammars.record(n),this._dataflow.add(n),n}addGrammar(e){return this.grammars.find(t=>t.uid===e.uid)||(this.grammars.record(e),this._dataflow.add(e),e.parse(e.getSpec()),this._needBuildLayoutTree=!0),this}removeGrammar(e){const t=be(e)?this.getGrammarById(e):e;return t&&this.grammars.find(n=>n.uid===t.uid)?(t.grammarType==="mark"&&t.prepareRelease(),this._cachedGrammars.record(t),this._dataflow.remove(t),this.grammars.unrecord(t),this._needBuildLayoutTree=!0,this):this}removeAllGrammars(){return this.grammars.traverse(e=>{e.grammarType==="signal"&&vK.includes(e.id())||e.grammarType==="mark"&&e.id()==="root"||this.removeGrammar(e)}),this}removeAllGraphicItems(){return this.traverseMarkTree(e=>{e.graphicItem&&(fT(e.graphicItem),e.elementMap.forEach(t=>{t.resetGraphicItem()}),e.graphicItem=null)}),this}parseSpec(e){var t,n,s,r,a,o,l,c;if(this.emit(Ee.BEFORE_PARSE_VIEW),this._spec=e,Zut(e),e.theme?this.theme(e.theme):this.theme(_o.getDefaultTheme()),e.width&&this.width(e.width),e.height&&this.height(e.height),this.padding((n=(t=e.padding)!==null&&t!==void 0?t:this._options.padding)!==null&&n!==void 0?n:this._theme.padding),!this.width()||!this.height()){const h=this._getContainerSize();h&&(this.updateSignal(Lh,h.width),this.updateSignal(Dh,h.height))}!((s=e.signals)===null||s===void 0)&&s.length&&e.signals.forEach(h=>{this.signal().parse(h)}),!((r=e.data)===null||r===void 0)&&r.length&&e.data.forEach(h=>{this.data(null).parse(h)}),!((a=e.coordinates)===null||a===void 0)&&a.length&&e.coordinates.forEach(h=>{var d;(d=this.coordinate(h.type))===null||d===void 0||d.parse(h)}),!((o=e.scales)===null||o===void 0)&&o.length&&e.scales.forEach(h=>{var d;(d=this.scale(h.type))===null||d===void 0||d.parse(h)});const u=Q.getGrammars();return Object.keys(u).forEach(h=>{const{specKey:d}=u[h];e[d]&&e[d].length&&e[d].forEach(p=>{this.customized(h,p)})}),e.marks&&e.marks.length&&e.marks.forEach(h=>{this.parseMarkSpec(h)}),e.events&&e.events.length&&e.events.forEach(h=>{var d;(d=this.event)===null||d===void 0||d.call(this,h)}),e.interactions&&e.interactions.length&&e.interactions.forEach(h=>{this.interaction(h.type,h)}),e.animation===!1?(l=this.animate)===null||l===void 0||l.disable():(c=this.animate)===null||c===void 0||c.enable(),this.emit(Ee.AFTER_PARSE_VIEW),this._needBuildLayoutTree=!0,this._layoutState=su.before,this}updateSpec(e){return this.removeAllInteractions(),this.removeAllGrammars(),this.parseSpec(e)}parseBuiltIn(){qut(this._options,this._config,this.getCurrentTheme()).forEach(e=>{const t=this.signal().parse(e);e.value&&t.set(e.value)}),this.parseMarkSpec({id:"root",type:"group",encode:{enter:{x:0,y:0},update:{width:{signal:"width"},height:{signal:"height"}}}}),this.rootMark=this.getMarkById("root")}parseMarkSpec(e){var t;const n=e.type===_e.glyph?{glyphType:e.glyphType}:e.type===_e.component?{componentType:e.componentType,mode:e.mode}:null;this.mark(e.type,e.group,n).parse(e),(t=e.marks)===null||t===void 0||t.forEach(s=>{this.parseMarkSpec(s)})}theme(e){var t,n,s,r,a,o;be(e)?this._theme=(t=_o.getTheme(e))!==null&&t!==void 0?t:_o.getDefaultTheme():this._theme=e;const{background:l,padding:c}=(n=this._spec)!==null&&n!==void 0?n:{};return this._theme?(this.background((s=l??this._options.background)!==null&&s!==void 0?s:this._theme.background),this.padding((r=c??this._options.padding)!==null&&r!==void 0?r:this._theme.padding),(o=(a=this.renderer.stage())===null||a===void 0?void 0:a.setTheme)===null||o===void 0||o.call(a,Object.assign({},this._theme.marks))):(this.background(l??this._options.background),this.padding(c??this._options.padding)),this}getCurrentTheme(){return this._theme}setCurrentTheme(e,t=!0){return this.theme(e),this.grammars.getAllMarks().forEach(n=>{n.commit()}),t?(this.evaluate(),this.renderer.render(!0)):this._dataflow.evaluate(),this}background(e){return arguments.length?(this._background=e,this.renderer.background(e),e):this._background}width(e){const t=this.getSignalById(Lh);return arguments.length?(this._options.width=e,this.updateSignal(t,e),e):t.output()}height(e){const t=this.getSignalById(Dh);return arguments.length?(this._options.height=e,this.updateSignal(t,e),e):t.output()}viewWidth(e){const t=this.getSignalById(bv);if(arguments.length){const n=this.padding();return this.width(e+n.left+n.right),e}return t.output()}viewHeight(e){const t=this.getSignalById(xv);if(arguments.length){const n=this.padding();return this.height(e+n.top+n.bottom),e}return t.output()}padding(e){const t=this.getSignalById(Yo);if(arguments.length){const n=Cm(e);return this.updateSignal(t,n),n}return Cm(t.output())}autoFit(e){const t=this.getSignalById(Sv);return arguments.length?(this.updateSignal(t,e),e):t.output()}getViewBox(){const e=this.getSignalById(p4);return e==null?void 0:e.output()}updateLayoutTag(){return this._layoutState=su.before,this}getLayoutState(){return this._layoutState}buildLayoutTree(){const e={},t=[];this.traverseMarkTree(n=>{e[n.id()]=!0,n.group&&e[n.group.id()]||t.push(n),n.markType===_e.group&&n.updateLayoutChildren()},n=>n.needLayout()),this._layoutMarks=t}doLayout(){var e;const t=this._options.doLayout||Q.getDefaultLayout();t&&(!((e=this._layoutMarks)===null||e===void 0)&&e.length)&&(this.emit(Ee.BEFORE_DO_LAYOUT),t(this._layoutMarks,this._options,this),this.emit(Ee.AFTER_DO_LAYOUT))}handleLayoutEnd(){this.emit(Ee.BEFORE_MARK_LAYOUT_END),this._layoutMarks.forEach(e=>{VI(e,"layoutChildren",t=>{t.handleLayoutEnd()},t=>t!==e)}),this.emit(Ee.AFTER_MARK_LAYOUT_END)}handleRenderEnd(){this.emit(Ee.BEFORE_MARK_RENDER_END),VI(this.rootMark,"children",e=>{e.handleRenderEnd()}),this.emit(Ee.AFTER_MARK_RENDER_END)}commit(e){return this._dataflow.commit(e),this}run(e){return this.evaluate(e),this}doRender(e){this.emit(Ee.BEFORE_DO_RENDER),this.renderer&&(!this._progressiveMarks&&this.animate?this.animate.animate():this.traverseMarkTree(t=>{t.cleanExitElements()},null,!0),this.renderer.render(e),this.handleRenderEnd()),this.emit(Ee.AFTER_DO_RENDER)}evaluate(e){var t,n;const s=Jut(e),r=this._cachedGrammars.size()>0;r&&(this.reuseCachedGrammars(s),this.detachCachedGrammar());const a=this._resizeRenderer(),o=this._dataflow.hasCommitted();return r||o||this._layoutState||a?(this.clearProgressive(),this._dataflow.evaluate(),this._needBuildLayoutTree&&(this.buildLayoutTree(),this._needBuildLayoutTree=!1),this._layoutState&&(this._layoutState=su.layouting,this.doLayout(),this._dataflow.hasCommitted()&&(this._layoutState=su.reevaluate,this._dataflow.evaluate()),this._layoutState=su.after,!((t=this._layoutMarks)===null||t===void 0)&&t.length&&this.handleLayoutEnd()),this._layoutState=null,this.findProgressiveMarks(),this._resizeRenderer(),(n=this.morph)===null||n===void 0||n.call(this,s),this.releaseCachedGrammars(s),this.doRender(!0),this.doPreProgressive(),this):this}reuseCachedGrammars(e){if(e.reuse){const t=n=>{n.next.reuse(n.prev),n.prev.detachAll(),n.prev.clear(),this._cachedGrammars.unrecord(n.prev)};this._differ.diffGrammar(this._cachedGrammars.getAllSignals(),this.grammars.getAllSignals().filter(n=>!vK.includes(n.id()))).update.forEach(t),this._differ.diffGrammar(this._cachedGrammars.getAllData(),this.grammars.getAllData()).update.forEach(t),this._differ.diffGrammar(this._cachedGrammars.getAllScales(),this.grammars.getAllScales()).update.forEach(t),this._differ.diffGrammar(this._cachedGrammars.getAllCoordinates(),this.grammars.getAllCoordinates()).update.forEach(t)}this._differ.diffMark(this._cachedGrammars.getAllMarks(),this.grammars.getAllMarks().filter(t=>t.id()!=="root"),e).update.forEach(t=>{var n;const s=t.prev.length===1&&t.next.length===1&&t.prev[0].markType===t.next[0].markType,r=t.prev.every(a=>a.getMorphConfig().morph)&&t.next.every(a=>a.getMorphConfig().morph);this.morph&&(e.morph&&r||e.morphAll)?(n=this.addMorphMarks)===null||n===void 0||n.call(this,{prev:t.prev,next:t.next}):s&&e.reuse&&(t.next[0].reuse(t.prev[0]),t.prev[0].detachAll(),t.prev[0].clear(),this._cachedGrammars.unrecord(t.prev[0]))})}detachCachedGrammar(){this._cachedGrammars.traverse(e=>{var t,n;if(e.detachAll(),e.grammarType==="mark"){const s=e;(n=(t=s.group)===null||t===void 0?void 0:t.removeChild)===null||n===void 0||n.call(t,s)}})}releaseCachedGrammars(e){this._cachedGrammars.traverse(s=>{s.grammarType!=="mark"&&s.release()});const t=this._cachedGrammars.getAllMarkNodes();t.forEach(s=>{var r;(r=s.mark.animate)===null||r===void 0||r.stop(),e.enableExitAnimation&&this.animate&&this.animate.animateAddition(s.mark)});const n=s=>{if(s.mark.view&&(!s.mark.animate||s.mark.animate.getAnimatorCount()===0)&&(!s.children||s.children.length===0)){s.mark.release();const r=s.parent;r&&(s.parent.children=s.parent.children.filter(a=>a!==s),s.parent=null,n(r))}};t.forEach(s=>{const r=s.mark;r.animate&&r.animate.getAnimatorCount()!==0?r.addEventListener("animationEnd",()=>{r.animate&&r.animate.getAnimatorCount()===0&&n(s)}):n(s)}),this._cachedGrammars.clear()}runAfter(e){return this._dataflow.runAfter(()=>{e.call(null,this)}),this}runBefore(e){return this._dataflow.runBefore(()=>{e.call(null,this)}),this}getImageBuffer(){var e,t;if(this._options.mode!=="node")return void this.logger.error(new TypeError("getImageBuffer() now only support node environment."));const n=(t=(e=this.renderer)===null||e===void 0?void 0:e.stage)===null||t===void 0?void 0:t.call(e);return n?(n.render(),n.window.getImageBuffer()):(this.logger.error(new ReferenceError("render is not defined")),null)}traverseMarkTree(e,t,n){return VI(this.rootMark,"children",e,t,n),this}_bindResizeEvent(){var e,t,n,s,r,a;if(this.autoFit()){const o=(r=(s=(n=(t=(e=this.renderer)===null||e===void 0?void 0:e.stage)===null||t===void 0?void 0:t.call(e))===null||n===void 0?void 0:n.window)===null||s===void 0?void 0:s.getContainer)===null||r===void 0?void 0:r.call(s);if(o){const l=window.ResizeObserver;this._observer=new l(this._onResize),(a=this._observer)===null||a===void 0||a.observe(o)}window.addEventListener("resize",this._onResize)}}_unBindResizeEvent(){this.autoFit()&&(window.removeEventListener("resize",this._onResize),this._observer&&(this._observer.disconnect(),this._observer=null))}_getContainerSize(){var e,t,n,s,r,a,o,l,c,u,h;const d=(r=(s=(n=(t=(e=this.renderer)===null||e===void 0?void 0:e.stage)===null||t===void 0?void 0:t.call(e))===null||n===void 0?void 0:n.window)===null||s===void 0?void 0:s.getContainer)===null||r===void 0?void 0:r.call(s);if(d){const{width:p,height:f}=nD(d);return{width:(l=(o=(a=this._spec)===null||a===void 0?void 0:a.width)!==null&&o!==void 0?o:this._options.width)!==null&&l!==void 0?l:p,height:(h=(u=(c=this._spec)===null||c===void 0?void 0:c.height)!==null&&u!==void 0?u:this._options.height)!==null&&h!==void 0?h:f}}return null}resize(e,t,n=!0){let s=!1;return e!==this.width()&&(s=!0,this.updateSignal(Lh,e)),t!==this.height()&&(s=!0,this.updateSignal(Dh,t)),s&&(n?this.evaluate({morph:!1}):this._dataflow.evaluate()),this}_resizeRenderer(){const e=this.width(),t=this.height();return!!this.renderer.shouldResize(e,t)&&(this.renderer.resize(e,t),this.emit("resize",{},{width:e,height:t}),!0)}interaction(e,t){const n=Q.createInteraction(e,this,t);return n&&(n.bind(),this._boundInteractions||(this._boundInteractions=[]),this._boundInteractions.push(n)),n}removeInteraction(e,t){if(this._boundInteractions){const n=this._boundInteractions.filter(s=>{var r;return B(t)?be(e)?s.type===e:e?s===e:void 0:((r=s.options)===null||r===void 0?void 0:r.id)===t});n.length&&n.forEach(s=>{s.unbind()})}return this}removeAllInteractions(){return this._boundInteractions&&(this._boundInteractions.forEach(e=>{e.unbind()}),this._boundInteractions=null),this}initializeEventConfig(e){const t=Object.assign({defaults:{}},e),n=(s,r)=>{r.forEach(a=>{ie(s[a])&&(s[a]=s[a].reduce((o,l)=>(o[l]=!0,o),{}))})};return n(t.defaults,["prevent","allow"]),n(t,[yT,Uut]),t}initEvent(){const e=this.renderer.stage();e&&e.on("*",this.delegateEvent)}releaseStageEvent(){const e=this.renderer.stage();e&&e.off("*",this.delegateEvent)}addEventListener(e,t,n){let s=t;return n&&n.trap===!1||(s=t,s.raw=t),n&&n.target&&(s.target=n.target),this.on(e,s),this}removeEventListener(e,t){return t?this.off(e,t):this.off(e),this}initializeRenderer(){const e=this._options.width,t=this._options.height;this.renderer=new Vut(this),this.renderer.initialize(e,t,this._options,this._eventConfig).background(this._background)}initialize(){var e,t;this.grammars=new vle(n=>n.id(),(n,s)=>this.logger.warn(`Grammar id '${n}' has been occupied`,s)),this._cachedGrammars=new iht(n=>n.id()),this._options.logger&&ii.setInstance(this._options.logger),this.logger=ii.getInstance((e=this._options.logLevel)!==null&&e!==void 0?e:0),this._dataflow=new Hut,this.animate=(t=this.initAnimate)===null||t===void 0?void 0:t.call(this,this),this._differ=new Iht,this._options.hooks&&(Object.keys(this._options.hooks).forEach(n=>{this.on(n,this._options.hooks[n])}),this.hooks=this._options.hooks),this.container=null,this.renderer=null,this._eventListeners=[],this._eventConfig=this.initializeEventConfig(this._options.eventConfig),this._theme=this._options.disableTheme?null:_o.getDefaultTheme(),this.parseBuiltIn(),Qut(this._options),this.initializeRenderer(),this._eventConfig.disable||this.initEvent(),this._bindResizeEvent(),this._needBuildLayoutTree=!0,this._layoutState=su.before,this.theme(this._theme)}pauseProgressive(){return!1}resumeProgressive(){return!1}restartProgressive(){return!1}findProgressiveMarks(){const e=[];return this.traverseMarkTree(t=>{e.push(t)},t=>t.markType!==_e.group&&t.isProgressive()),e.length?(this._progressiveMarks=e,this.renderer&&this.renderer.combineIncrementalLayers(),e):(this._progressiveMarks=null,null)}doPreProgressive(){if(this._progressiveMarks&&this._progressiveMarks.some(e=>e.isDoingProgressive())){const e=st.getRequestAnimationFrame();this._progressiveRafId=e(this.handleProgressiveFrame)}else this._progressiveMarks&&this.animate&&this._progressiveMarks.every(e=>e.canAnimateAfterProgressive())?this.animate.animate():this._progressiveMarks&&(this._progressiveMarks=null)}clearProgressive(){this._progressiveRafId&&st.getCancelAnimationFrame()(this._progressiveRafId),this._progressiveMarks&&this._progressiveMarks.length&&(this._progressiveMarks.forEach(e=>{e.clearProgressive()}),this._progressiveMarks=null)}release(){var e,t,n,s;this.removeAllInteractions(),this.releaseStageEvent(),this._unBindResizeEvent(),this.clearProgressive(),Q.unregisterRuntimeTransforms(),ii.setInstance(null),(e=this.animate)===null||e===void 0||e.stop(),this.grammars.release(),this._cachedGrammars.release(),this._dataflow.release(),this._dataflow=null,(n=(t=this.renderer)===null||t===void 0?void 0:t.release)===null||n===void 0||n.call(t),this.renderer=null,this._boundInteractions=null,this.removeAllListeners(),(s=this._eventListeners)===null||s===void 0||s.forEach(r=>{r.source.removeEventListener(r.type,r.handler)}),this._eventListeners=null}};const Rht=()=>{Ds(),O0(),Q.registerGraphic(_e.arc,B5),Xrt()},Lht=()=>{Ds(),Ust(),Q.registerGraphic(_e.arc3d,aae)},Dht=()=>{Ds(),Kst(),Q.registerGraphic(_e.pyramid3d,lae)},Fht=()=>{Ds(),Sae(),Q.registerGraphic(_e.area,rae),$ae(),sO()},Bht=()=>{Ds(),on(),Q.registerGraphic(_e.group,w5)},jht=()=>{Ds(),Cae(),Q.registerGraphic(_e.image,F5)},Nht=()=>{Ds(),Gu(),$ae(),sO(),Q.registerGraphic(_e.line,L5)},wle=()=>{Ds(),Dx(),Q.registerGraphic(_e.path,sae)},g4=()=>{Ds(),Ku(),Urt(),Q.registerGraphic(_e.rect,Rx)},$ht=()=>{Ds(),Xst(),Q.registerGraphic(_e.rect3d,tae)},m4=()=>{Ds(),Gu(),Q.registerGraphic(_e.rule,L5)},Ale=()=>{Ds(),Mo(),sO(),Q.registerGraphic(_e.symbol,KP)},kle=()=>{Ds(),$c(),Ud(),Q.registerGraphic(_e.text,Cy)},zht=()=>{Ds(),ZP(),Q.registerGraphic(_e.polygon,oae)},Hht=()=>{Ds(),Ud(),Q.registerGraphic(_e.richtext,nae)},Vht=()=>{Ds(),Mo(),sO(),Q.registerGraphic(_e.cell,KP)},xO=()=>{Ds(),Gst(),Q.registerGraphic(_e.glyph,iae)};class Uht extends fle{constructor(e){super(e),this.getStateAttrs=(t,n)=>{var s,r,a,o;const l=!B((s=this.runtimeStatesEncoder)===null||s===void 0?void 0:s[t]),c=l?Object.assign(Object.assign({},(r=this.mark.getSpec().encode)===null||r===void 0?void 0:r[t]),this.runtimeStatesEncoder[t]):(a=this.mark.getSpec().encode)===null||a===void 0?void 0:a[t],u={};if(!c)return u;if(ee(c))return u.attributes=c(this.getDatum(),this,t,n),u;if(!l&&(!((o=this.graphicItem.glyphStates)===null||o===void 0)&&o[t]))return this.graphicItem.glyphStates[t];if(c){const h=this.items[0],d=[Object.assign({},h,{nextAttrs:{}})];return Jc(this,d,c,this.mark.parameters()),this.coordinateTransformEncode(d),u.attributes=d[0].nextAttrs,this.graphicItem.glyphStates?this.graphicItem.glyphStates[t]||(this.graphicItem.glyphStates[t]=u):this.graphicItem.glyphStates={[t]:u},u}return u},this.glyphMeta=this.mark.getGlyphMeta()}getGlyphGraphicItems(){return this.glyphGraphicItems}initGraphicItem(e={}){if(this.graphicItem)return;this.graphicItem=this.mark.addGraphicItem(e,this.groupKey),this.graphicItem[rd]=this,this.graphicItem.onBeforeAttributeUpdate=this._onGlyphAttributeUpdate(!1);const t=this.glyphMeta.getMarks();this.glyphGraphicItems={},this.graphicItem.getSubGraphic().forEach(n=>{const s=t[n.name];this.glyphGraphicItems[n.name]=n,n.onBeforeAttributeUpdate=r=>this.mark?gT(s,r,this,n.name):r}),this.clearGraphicAttributes()}useStates(e,t){if(!this.graphicItem)return!1;this.mark.emit(Ee.BEFORE_ELEMENT_STATE,{states:e},this),this.states=e.slice();const n=Ui(t)?t:this.hasStateAnimation();return this.graphicItem.glyphStateProxy=this.getStateAttrs,this.graphicItem.useStates(this.states,n),this.mark.emit(Ee.AFTER_ELEMENT_STATE,{states:e},this),!0}encodeGraphic(){this.coordinateTransformEncode(this.items);const e=this.transformElementItems(this.items,this.mark.markType),t=!this.graphicItem;this.graphicItem||this.initGraphicItem(),this.diffState===Ft.enter||t?(this.graphicItem.onBeforeAttributeUpdate=this._onGlyphAttributeUpdate(!0),this.applyGraphicAttributes(e),this.graphicItem.onBeforeAttributeUpdate=this._onGlyphAttributeUpdate(!1)):this.applyGraphicAttributes(e),this.diffState!==Ft.enter&&this.diffState!==Ft.update||!this.states.length||(Object.values(this.glyphGraphicItems).forEach(n=>{n.states={}}),this.useStates(this.states)),this.items.map(n=>{n.nextAttrs={}})}encodeCustom(e){var t;let n={};const s=this.glyphMeta.getChannelEncoder(),r=this.glyphMeta.getFunctionEncoder();if(r&&(n=r.call(null,Object.assign({},(t=this.graphicItem)===null||t===void 0?void 0:t.attribute,e),this.getDatum(),this,this.mark.getGlyphConfig())),s){let a;Object.keys(s).forEach(o=>{var l;if(!B(e[o])){a||(a=Object.assign({},(l=this.graphicItem)===null||l===void 0?void 0:l.attribute,e));const c=s[o].call(null,o,e[o],a,this.getDatum(),this,this.mark.getGlyphConfig());Object.keys(c??{}).forEach(u=>{var h;n[u]=Object.assign((h=n[u])!==null&&h!==void 0?h:{},c[u])})}})}return n}encodeDefault(){const e={};if(this.glyphMeta.getDefaultEncoder()){const t=this.glyphMeta.getDefaultEncoder().call(null,this.getDatum(),this,this.mark.getGlyphConfig());Object.assign(e,t)}return e}_onGlyphAttributeUpdate(e=!1){return t=>{if(!this.mark)return t;const n=this.glyphMeta.getMarks(),s=gT(this.mark.getAttributeTransforms(),t,this),r=e?this.encodeDefault():null,a=this.encodeCustom(t);return Object.keys(n).forEach(o=>{const l=n[o],c=this.glyphGraphicItems[o],u=a==null?void 0:a[o],h=Object.assign({},u);if(e){const g=r==null?void 0:r[o];Object.keys(g??{}).forEach(m=>{so(this.items[0].nextAttrs,m)||so(h,m)||(h[m]=g[m])})}const d=Object.assign({},gut(l,t),h),p=this._generateGlyphItems(l,this.items,d);this.coordinateTransformEncode(p);const f=this.transformElementItems(p,l);this.applyGlyphGraphicAttributes(f,o,c),l===_e.shape&&(c.datum=p[0].datum)}),s}}_generateGlyphItems(e,t,n){const s=t.map(r=>Object.assign({},r,{nextAttrs:n}));return ule.includes(e)&&this.mark.getSpec().enableSegments&&s.forEach((r,a)=>{r.nextAttrs=Object.assign({},t[a].nextAttrs,n)}),s}getGraphicAttribute(e,t=!1,n){if(!this.graphicItem)return;const s=this.getPrevGraphicAttributes(n);return t&&so(s,e)?s[e]:(n?this.glyphGraphicItems[n]:this.graphicItem).attribute[e]}setGraphicAttribute(e,t,n=!0,s){if(!this.graphicItem)return;const r=s?this.glyphGraphicItems[s]:this.graphicItem,a=this.getFinalGraphicAttributes(s),o=this.getPrevGraphicAttributes(s);n&&(a[e]=t),so(o,e)||(o[e]=r.attribute[e]),r.setAttribute(e,t)}setGraphicAttributes(e,t=!0,n){if(!this.graphicItem)return;const s=n?this.glyphGraphicItems[n]:this.graphicItem,r=this.getFinalGraphicAttributes(n),a=this.getPrevGraphicAttributes(n);Object.keys(e).forEach(o=>{t&&(r[o]=e[o]),so(a,o)||(a[o]=s.attribute[o])}),s.setAttributes(e)}diffAttributes(e,t){const n={},s=this.getFinalGraphicAttributes(t);for(const r in e)so(s,r)&&Pt(s[r],e[r])||(n[r]=e[r]);return n}applyGlyphGraphicAttributes(e,t,n){var s,r;if(this.mark.needAnimate()){const a=this.diffAttributes(e,t),o=(s=this.getPrevGraphicAttributes(t))!==null&&s!==void 0?s:{},l=(r=this.getFinalGraphicAttributes(t))!==null&&r!==void 0?r:{};Object.keys(a).forEach(c=>{o[c]=n.attribute[c],l[c]=a[c]}),this.setNextGraphicAttributes(a,t),this.setPrevGraphicAttributes(o,t),this.setFinalGraphicAttributes(l,t),n.setAttributes(a)}else n.setAttributes(e)}getFinalGraphicAttributes(e){return(e?this.glyphGraphicItems[e]:this.graphicItem).finalAttrs}setFinalGraphicAttributes(e,t){(t?this.glyphGraphicItems[t]:this.graphicItem).finalAttrs=e}getPrevGraphicAttributes(e){return(e?this.glyphGraphicItems[e]:this.graphicItem).prevAttrs}setPrevGraphicAttributes(e,t){(t?this.glyphGraphicItems[t]:this.graphicItem).prevAttrs=e}getNextGraphicAttributes(e){return(e?this.glyphGraphicItems[e]:this.graphicItem).nextAttrs}setNextGraphicAttributes(e,t){(t?this.glyphGraphicItems[t]:this.graphicItem).nextAttrs=e}clearChangedGraphicAttributes(){this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(null),Object.keys(this.glyphGraphicItems).forEach(e=>{this.setPrevGraphicAttributes(null,e),this.setNextGraphicAttributes(null,e)})}clearGraphicAttributes(){this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(null),this.setFinalGraphicAttributes(null),Object.keys(this.glyphGraphicItems).forEach(e=>{this.setPrevGraphicAttributes(null,e),this.setNextGraphicAttributes(null,e),this.setFinalGraphicAttributes(null,e)})}remove(){this.glyphGraphicItems=null,super.remove()}release(){this.glyphGraphicItems&&(Object.values(this.glyphGraphicItems).forEach(e=>{e[rd]=null}),this.glyphGraphicItems=null),super.release()}}class Tle extends tg{constructor(e,t,n){super(e,_e.glyph,n),this.glyphType=t,this.glyphMeta=Q.getGlyph(t)}configureGlyph(e){return this.spec.glyphConfig=e,this.commit(),this}getGlyphMeta(){return this.glyphMeta}getGlyphConfig(){return this.spec.glyphConfig}addGraphicItem(e,t){const n=put(this,this.glyphMeta,e);return super.addGraphicItem(e,t,n)}createElement(){return new Uht(this)}}Tle.markType=_e.glyph;const SO=()=>{Q.registerMark(_e.glyph,Tle)},Ele=i=>(e,t,n)=>{var s,r,a;const o=(a=(s=e.getGraphicAttribute("direction",!1))!==null&&s!==void 0?s:(r=e.mark.getGlyphConfig())===null||r===void 0?void 0:r.direction)!==null&&a!==void 0?a:"vertical",l=i(e,o,t);if(!Z(l))return{};const c=e.getGraphicAttribute("x",!1),u=e.getGraphicAttribute("y",!1),h=e.getGraphicAttribute("min",!1),d=e.getGraphicAttribute("max",!1),p=e.getGraphicAttribute("q1",!1),f=e.getGraphicAttribute("q3",!1),g=e.getGraphicAttribute("median",!1),m={from:{x:c,y:u},to:{x:c,y:u}};return Z(h)&&(m.from.min=l,m.to.min=h),Z(d)&&(m.from.max=l,m.to.max=d),Z(p)&&(m.from.q1=l,m.to.q1=p),Z(f)&&(m.from.q3=l,m.to.q3=f),Z(g)&&(m.from.median=l,m.to.median=g),m},Ple=i=>(e,t,n)=>{var s,r,a;const o=(a=(s=e.getGraphicAttribute("direction",!1))!==null&&s!==void 0?s:(r=e.mark.getGlyphConfig())===null||r===void 0?void 0:r.direction)!==null&&a!==void 0?a:"vertical",l=i(e,o,t);if(!Z(l))return{};const c=e.getGraphicAttribute("x",!0),u=e.getGraphicAttribute("y",!0),h=e.getGraphicAttribute("min",!0),d=e.getGraphicAttribute("max",!0),p=e.getGraphicAttribute("q1",!0),f=e.getGraphicAttribute("q3",!0),g=e.getGraphicAttribute("median",!0),m={from:{x:c,y:u},to:{x:c,y:u}};return Z(h)&&(m.to.min=l,m.from.min=h),Z(d)&&(m.to.max=l,m.from.max=d),Z(p)&&(m.to.q1=l,m.from.q1=p),Z(f)&&(m.to.q3=l,m.from.q3=f),Z(g)&&(m.to.median=l,m.from.median=g),m},Ole=(i,e,t)=>{var n,s,r,a,o,l,c,u,h,d,p,f;if(t&&Z(t.center))return t.center;let g,m,y,b,x;if(ks(e)){g=(s=(n=i.getGraphicAttribute("points",!1,"median"))===null||n===void 0?void 0:n[0])===null||s===void 0?void 0:s.x,m=(a=(r=i.getGraphicAttribute("points",!1,"max"))===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.x,y=(l=(o=i.getGraphicAttribute("points",!1,"min"))===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.x;const S=i.getGraphicAttribute("width",!1,"box"),C=i.getGraphicAttribute("x",!1,"box");b=C,x=C+S}else{g=(u=(c=i.getGraphicAttribute("points",!1,"median"))===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.y,m=(d=(h=i.getGraphicAttribute("points",!1,"max"))===null||h===void 0?void 0:h[0])===null||d===void 0?void 0:d.y,y=(f=(p=i.getGraphicAttribute("points",!1,"min"))===null||p===void 0?void 0:p[0])===null||f===void 0?void 0:f.y;const S=i.getGraphicAttribute("height",!1,"box"),C=i.getGraphicAttribute("y",!1,"box");b=C,x=C+S}return Z(g)?g:Z(b)&&Z(x)?(b+x)/2:Z(m)&&Z(y)?(m+y)/2:Z(y)?y:Z(m)?m:NaN},Wht=(i,e,t,n)=>{var s,r,a,o,l,c,u,h;const d={shaft:{},box:{},max:{},min:{},median:{}},p=(s=i.x)!==null&&s!==void 0?s:t.getGraphicAttribute("x",!1),f=(r=i.y)!==null&&r!==void 0?r:t.getGraphicAttribute("y",!1),g=(a=i.width)!==null&&a!==void 0?a:t.getGraphicAttribute("width",!1),m=(o=i.height)!==null&&o!==void 0?o:t.getGraphicAttribute("height",!1),y=(l=i.boxWidth)!==null&&l!==void 0?l:t.getGraphicAttribute("boxWidth",!1),b=(c=i.boxHeight)!==null&&c!==void 0?c:t.getGraphicAttribute("boxHeight",!1),x=(u=i.ruleWidth)!==null&&u!==void 0?u:t.getGraphicAttribute("ruleWidth",!1),S=(h=i.ruleHeight)!==null&&h!==void 0?h:t.getGraphicAttribute("ruleHeight",!1);return n&&ks(n.direction)?(Z(b)?(Object.assign(d.box,{y:f-b/2,y1:f+b/2}),Object.assign(d.median,{y:f-b/2,y1:f+b/2})):(Object.assign(d.box,{y:f-m/2,y1:f+m/2}),Object.assign(d.median,{y:f-m/2,y1:f+m/2})),Z(S)?(Object.assign(d.max,{y:f-S/2,y1:f+S/2}),Object.assign(d.min,{y:f-S/2,y1:f+S/2})):(Object.assign(d.max,{y:f-m/2,y1:f+m/2}),Object.assign(d.min,{y:f-m/2,y1:f+m/2}))):(Z(y)?(Object.assign(d.box,{x:p-y/2,x1:p+y/2}),Object.assign(d.median,{x:p-y/2,x1:p+y/2})):(Object.assign(d.box,{x:p-g/2,x1:p+g/2}),Object.assign(d.median,{x:p-g/2,x1:p+g/2})),Z(x)?(Object.assign(d.max,{x:p-x/2,x1:p+x/2}),Object.assign(d.min,{x:p-x/2,x1:p+x/2})):(Object.assign(d.max,{x:p-g/2,x1:p+g/2}),Object.assign(d.min,{x:p-g/2,x1:p+g/2}))),d},Ght=Ele(Ole),Kht=Ple(Ole);function Xht(){Q.registerGlyph("boxplot",{shaft:"rule",box:"rect",max:"rule",min:"rule",median:"rule"}).registerProgressiveChannels(["x","y","q1","q3","min","max","median","angle","width","height","boxWidth","boxHeight","ruleWidth","ruleHeight"]).registerFunctionEncoder(Wht).registerChannelEncoder("x",(i,e,t,n,s,r)=>r&&ks(r.direction)?null:{shaft:{x:e,x1:e}}).registerChannelEncoder("y",(i,e,t,n,s,r)=>r&&ks(r.direction)?{shaft:{y:e,y1:e}}:null).registerChannelEncoder("q1",(i,e,t,n,s,r)=>r&&ks(r.direction)?{box:{x:e}}:{box:{y:e}}).registerChannelEncoder("q3",(i,e,t,n,s,r)=>r&&ks(r.direction)?{box:{x1:e}}:{box:{y1:e}}).registerChannelEncoder("min",(i,e,t,n,s,r)=>r&&ks(r.direction)?{shaft:{x:e},min:{x:e,x1:e,visible:!0}}:{shaft:{y:e},min:{y:e,y1:e,visible:!0}}).registerChannelEncoder("max",(i,e,t,n,s,r)=>r&&ks(r.direction)?{shaft:{x1:e},max:{x:e,x1:e,visible:!0}}:{shaft:{y1:e},max:{y:e,y1:e,visible:!0}}).registerChannelEncoder("median",(i,e,t,n,s,r)=>r&&ks(r.direction)?{median:{x:e,x1:e,visible:!0}}:{median:{y:e,y1:e,visible:!0}}).registerChannelEncoder("angle",(i,e,t,n,s,r)=>{var a;const o=r&&ks(r.direction)?[(t.min+t.max)/2,t.y]:[t.x,(t.min+t.max)/2],l=(a=t.anchor)!==null&&a!==void 0?a:o;return{shaft:{angle:e,anchor:l},box:{angle:e,anchor:l},max:{angle:e,anchor:l},min:{angle:e,anchor:l},median:{angle:e,anchor:l}}}).registerDefaultEncoder(()=>({max:{visible:!1},min:{visible:!1},median:{visible:!1}})),Q.registerAnimationType("boxplotScaleIn",Ght),Q.registerAnimationType("boxplotScaleOut",Kht),SO(),xO(),g4(),m4()}const Mle=(i,e,t)=>{var n,s,r,a;if(Z(t==null?void 0:t.center))return t.center;let o,l,c,u,h;if(ks(e)){o=(s=(n=i.getGraphicAttribute("points",!1,"median"))===null||n===void 0?void 0:n[0])===null||s===void 0?void 0:s.x;const d=i.getGraphicAttribute("width",!1,"minMaxBox"),p=i.getGraphicAttribute("x",!1,"minMaxBox");c=p,l=p+d;const f=i.getGraphicAttribute("width",!1,"q1q3Box"),g=i.getGraphicAttribute("x",!1,"q1q3Box");u=g,h=g+f}else{o=(a=(r=i.getGraphicAttribute("points",!1,"median"))===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.y;const d=i.getGraphicAttribute("height",!1,"minMaxBox"),p=i.getGraphicAttribute("y",!1,"minMaxBox");c=p,l=p+d;const f=i.getGraphicAttribute("height",!1,"q1q3Box"),g=i.getGraphicAttribute("y",!1,"q1q3Box");u=g,h=g+f}return Z(o)?o:Z(u)&&Z(h)?(u+h)/2:Z(l)&&Z(c)?(l+c)/2:Z(c)?c:Z(l)?l:NaN},Yht=(i,e,t,n)=>{var s,r,a,o,l,c,u,h;const d={minMaxBox:{},q1q3Box:{},median:{}},p=(s=i.x)!==null&&s!==void 0?s:t.getGraphicAttribute("x",!1),f=(r=i.y)!==null&&r!==void 0?r:t.getGraphicAttribute("y",!1),g=(a=i.width)!==null&&a!==void 0?a:t.getGraphicAttribute("width",!1),m=(o=i.minMaxWidth)!==null&&o!==void 0?o:t.getGraphicAttribute("minMaxWidth",!1),y=(l=i.q1q3Width)!==null&&l!==void 0?l:t.getGraphicAttribute("q1q3Width",!1),b=(c=i.height)!==null&&c!==void 0?c:t.getGraphicAttribute("height",!1),x=(u=i.minMaxHeight)!==null&&u!==void 0?u:t.getGraphicAttribute("minMaxHeight",!1),S=(h=i.q1q3Height)!==null&&h!==void 0?h:t.getGraphicAttribute("q1q3Height",!1);return n&&ks(n.direction)?(Z(x)?Object.assign(d.minMaxBox,{y:f-x/2,y1:f+x/2}):Object.assign(d.minMaxBox,{y:f-b/2,y1:f+b/2}),Z(S)?(Object.assign(d.q1q3Box,{y:f-S/2,y1:f+S/2}),Object.assign(d.median,{y:f-S/2,y1:f+S/2})):(Object.assign(d.q1q3Box,{y:f-b/2,y1:f+b/2}),Object.assign(d.median,{y:f-b/2,y1:f+b/2}))):(Z(m)?Object.assign(d.minMaxBox,{x:p-m/2,x1:p+m/2}):Object.assign(d.minMaxBox,{x:p-g/2,x1:p+g/2}),Z(y)?(Object.assign(d.q1q3Box,{x:p-y/2,x1:p+y/2}),Object.assign(d.median,{x:p-y/2,x1:p+y/2})):(Object.assign(d.q1q3Box,{x:p-g/2,x1:p+g/2}),Object.assign(d.median,{x:p-g/2,x1:p+g/2}))),d},qht=Ele(Mle),Zht=Ple(Mle);function Jht(){Q.registerGlyph("barBoxplot",{minMaxBox:"rect",q1q3Box:"rect",median:"rule"}).registerProgressiveChannels(["x","y","q1","q3","min","max","median","angle","width","height","minMaxWidth","q1q3Width","minMaxHeight","q1q3Height"]).registerFunctionEncoder(Yht).registerChannelEncoder("q1",(i,e,t,n,s,r)=>r&&ks(r.direction)?{q1q3Box:{x:e}}:{q1q3Box:{y:e}}).registerChannelEncoder("q3",(i,e,t,n,s,r)=>r&&ks(r.direction)?{q1q3Box:{x1:e}}:{q1q3Box:{y1:e}}).registerChannelEncoder("min",(i,e,t,n,s,r)=>r&&ks(r.direction)?{minMaxBox:{x:e}}:{minMaxBox:{y:e}}).registerChannelEncoder("max",(i,e,t,n,s,r)=>r&&ks(r.direction)?{minMaxBox:{x1:e}}:{minMaxBox:{y1:e}}).registerChannelEncoder("median",(i,e,t,n,s,r)=>r&&ks(r.direction)?{median:{x:e,x1:e,visible:!0}}:{median:{y:e,y1:e,visible:!0}}).registerChannelEncoder("angle",(i,e,t,n,s,r)=>{var a;const o=(a=t.anchor)!==null&&a!==void 0?a:[t.x,(t.min+t.max)/2];return{minMaxBox:{angle:e,anchor:o},q1q3Box:{angle:e,anchor:o},median:{angle:e,anchor:o}}}).registerChannelEncoder("lineWidth",(i,e,t,n,s,r)=>({minMaxBox:{lineWidth:0},q1q3Box:{lineWidth:0}})).registerChannelEncoder("minMaxFillOpacity",(i,e,t,n,s,r)=>({minMaxBox:{fillOpacity:e}})).registerChannelEncoder("stroke",(i,e,t,n,s,r)=>({minMaxBox:{stroke:!1},q1q3Box:{stroke:!1}})).registerDefaultEncoder(()=>({minMaxBox:{lineWidth:0},q1q3Box:{lineWidth:0},median:{visible:!1}})),Q.registerAnimationType("barBoxplotScaleIn",qht),Q.registerAnimationType("barBoxplotScaleOut",Zht),SO(),xO(),g4(),m4()}const Qht=()=>{Q.registerGlyph("ripplePoint",{symbol:"symbol",ripple0:"symbol",ripple1:"symbol",ripple2:"symbol"}).registerFunctionEncoder((i,e,t,n)=>{var s;const r=Math.max(0,Math.min(i.ripple,1)),a=(s=i.size)!==null&&s!==void 0?s:t.getGraphicAttribute("size"),o=.5*a;return{ripple0:{size:a+o*r,fillOpacity:.75-.25*r},ripple1:{size:a+o*(1+r),fillOpacity:.5-.25*r},ripple2:{size:a+o*(2+r),fillOpacity:.25-.25*r}}}).registerDefaultEncoder(()=>({ripple0:{fillOpacity:.75},ripple1:{fillOpacity:.5},ripple2:{fillOpacity:.25}})),SO(),xO(),Ale()},edt=(i,e)=>{var t;const n=(t=i.curvature)!==null&&t!==void 0?t:.5,s=typeof e=="number"?i.thickness*e:i.thickness;let r=i.x0,a=i.x1,o=i.y0,l=i.y1,c=r+n*(a-r),u=a+n*(r-a),h=y=>y;i.round!==!1&&(r=Math.round(r),a=Math.round(a),o=Math.round(o),l=Math.round(l),c=Math.round(c),u=Math.round(u),h=Math.round),i.pathType==="line"||i.pathType,i.align==="center"?(o=h(i.y0-s/2),l=h(i.y1-s/2)):i.align==="end"?(o=h(i.y0+i.thickness/2-s),l=h(i.y1+i.thickness/2-s)):(o=h(i.y0-i.thickness/2),l=h(i.y1-i.thickness/2));const d=h(o+s),p=h(l+s),f=Math.abs(a-r)>1e-6,g=i.endArrow&&f?`L${a},${h(l-s/2)}L${h(a+s)},${h((l+p)/2)}L${a},${h(p+s/2)}`:"",m=i.startArrow&&f?`L${r},${h(d+s/2)}L${h(r-s)},${h((o+d)/2)}L${r},${h(o-s/2)}`:"";return i.pathType==="line"?`M${r},${o}L${a},${l}${g}L${a},${p}L${r},${d}${m}Z`:i.pathType==="polyline"?`M${r},${o}L${c},${o}L${c},${l}L${a},${l}
    ${g}L${a},${p}L${c},${p}L${c},${d}L${r},${d}${m}Z`:`M${r},${o}C${c},${o},${u},${l},${a},${l}
  ${g}L${a},${p}C${u},${p},${c},${d},${r},${d}${m}Z`},tdt=(i,e)=>{var t;const n=(t=i.curvature)!==null&&t!==void 0?t:.5,s=typeof e=="number"?i.thickness*e:i.thickness;let r=i.y0,a=i.y1,o=i.x0,l=i.x1,c=r+n*(a-r),u=a+n*(r-a),h=y=>y;i.round!==!1&&(h=Math.round,r=Math.round(r),a=Math.round(a),o=Math.round(o),l=Math.round(l),c=Math.round(c),u=Math.round(u)),i.pathType==="line"||i.pathType,i.align==="center"?(o=h(i.x0-s/2),l=h(i.x1-s/2)):i.align==="end"?(o=h(i.x0+i.thickness/2-s),l=h(i.x1+i.thickness/2-s)):(o=h(i.x0-i.thickness/2),l=h(i.x1-i.thickness/2));const d=h(o+s),p=h(l+s),f=Math.abs(a-r)>1e-6,g=i.endArrow&&f?`L${h(l-s/2)},${a}L${h((l+p)/2)},${h(a+s)}L${h(p+s/2)},${a}`:"",m=i.startArrow&&f?`L${h(d+s/2)},${r}L${h((d+o)/2)},${h(r-s)}L${h(o-s/2)},${r}`:"";return i.pathType==="line"?`M${o},${r}L${l},${a}${g}L${p},${a}L${d},${r}${m}Z`:i.pathType==="polyline"?`M${o},${r}L${o},${c}L${l},${c}L${l},${a}
    ${g}L${p},${a}L${p},${c}L${d},${c}L${d},${r}${m}Z`:`M${o},${r}C${o},${c},${l},${u},${l},${a}
  ${g}L${p},${a}C${p},${u},${d},${c},${d},${r}${m}Z`},idt=(i,e,t,n)=>{var s;const r=(s=i.direction)!==null&&s!==void 0?s:n==null?void 0:n.direction,a=["vertical","TB","BT"].includes(r)?tdt:edt,o=typeof i.ratio=="number"&&i.ratio>=0&&i.ratio<=1,l=Object.keys(i);return["x0","y0","x1","y1"].every(c=>l.includes(c))?{back:{path:o?a(i,1):""},front:{path:a(i,o?i.ratio:1)}}:{}},ndt=(i,e,t)=>{const n={x0:i.getGraphicAttribute("x0",!1),x1:i.getGraphicAttribute("x1",!1),y0:i.getGraphicAttribute("y0",!1),y1:i.getGraphicAttribute("y1",!1),thickness:i.getGraphicAttribute("thickness",!1),round:i.getGraphicAttribute("round",!1),align:i.getGraphicAttribute("align",!1),pathType:i.getGraphicAttribute("pathType",!1),endArrow:i.getGraphicAttribute("endArrow",!1),startArrow:i.getGraphicAttribute("startArrow",!1)};return Object.keys(n).forEach(s=>{B(n[s])&&delete n[s]}),{from:Object.assign({},n,{x1:n.x0,y1:n.y0}),to:n}},sdt=(i,e,t)=>{const n={x0:i.getGraphicAttribute("x0",!0),x1:i.getGraphicAttribute("x1",!0),y0:i.getGraphicAttribute("y0",!0),y1:i.getGraphicAttribute("y1",!0),thickness:i.getGraphicAttribute("thickness",!0),round:i.getGraphicAttribute("round",!0),align:i.getGraphicAttribute("align",!0),pathType:i.getGraphicAttribute("pathType",!0),endArrow:i.getGraphicAttribute("endArrow",!0),startArrow:i.getGraphicAttribute("startArrow",!0)};return Object.keys(n).forEach(s=>{B(n[s])&&delete n[s]}),{from:n,to:Object.assign({},n,{x1:n.x0,y1:n.y0})}},rdt=(i,e,t)=>{const n={thickness:i.getGraphicAttribute("thickness",!1),round:i.getGraphicAttribute("round",!1),align:i.getGraphicAttribute("align",!1),pathType:i.getGraphicAttribute("pathType",!1),endArrow:i.getGraphicAttribute("endArrow",!1),startArrow:i.getGraphicAttribute("startArrow",!1)};return Object.keys(n).forEach(s=>{B(n[s])&&delete n[s]}),{from:Object.assign(Object.assign({x0:i.getGraphicAttribute("x0",!0),x1:i.getGraphicAttribute("x1",!0),y0:i.getGraphicAttribute("y0",!0),y1:i.getGraphicAttribute("y1",!0)},n),n),to:Object.assign({x0:i.getGraphicAttribute("x0",!1),x1:i.getGraphicAttribute("x1",!1),y0:i.getGraphicAttribute("y0",!1),y1:i.getGraphicAttribute("y1",!1)},n)}},adt=()=>{Q.registerGlyph("linkPath",{back:"path",front:"path"}).registerFunctionEncoder(idt).registerChannelEncoder("backgroundStyle",(i,e)=>({back:e})).registerDefaultEncoder(()=>({back:{zIndex:0},front:{zIndex:1}})),Q.registerAnimationType("linkPathGrowIn",ndt),Q.registerAnimationType("linkPathGrowOut",sdt),Q.registerAnimationType("linkPathUpdate",rdt),SO(),xO(),wle()};class Ile extends f4{parseAddition(e){return super.parseAddition(e),this.scale(e.scale),this}scale(e){if(this.spec.scale){const n=be(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;this.detach(n),this.spec.scale=void 0}const t=be(e)?this.view.getScaleById(e):e;return this.spec.scale=t,this.attach(t),this._updateComponentEncoders(),this.commit(),this}getScale(){return be(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale}}const odt=(i,e,t,n)=>{var s,r,a,o;const l=(r=(s=e==null?void 0:e.components)===null||s===void 0?void 0:s.axis)!==null&&r!==void 0?r:{};if(!i)return se({},l,t??{});const c=[((o=(a=i.tickData)===null||a===void 0?void 0:a.call(i,n))!==null&&o!==void 0?o:[]).map(u=>({id:u.index,label:u.tick,value:u.value,rawValue:u.tick}))];return se({},l,{items:c},t??{})},ldt=(i,e,t,n)=>{var s,r,a,o;const l=(r=(s=e==null?void 0:e.components)===null||s===void 0?void 0:s.circleAxis)!==null&&r!==void 0?r:{};if(!i)return se({},l,t??{});const c=[((o=(a=i.tickData)===null||a===void 0?void 0:a.call(i,n))!==null&&o!==void 0?o:[]).map(u=>({id:u.index,label:u.tick,value:u.value,rawValue:u.tick}))];return se({},l,{items:c},t??{})},Rle=(i,e,t,n,s,r)=>{var a;const o=i.getCoordinateAxisPosition();s&&s.position==="auto"&&(s.position=t?"content":o);const l=i.getCoordinateAxisPoints(n);if(l){const h={start:l[0],end:l[1],verticalFactor:(o==="top"||o==="left"?-1:1)*(t?-1:1)*(!((a=i.getSpec().range)===null||a===void 0)&&a.reversed?-1:1)};if(r&&e.type==="polar"){const d=e.angle();h.center=e.origin(),h.startAngle=d[0],h.endAngle=d[1]}return h}const c=e.radius(),u=e.angle();return{center:e.origin(),radius:c[1],innerRadius:c[0],inside:t,startAngle:u[0],endAngle:u[1]}};class y4 extends Ile{constructor(e,t,n){super(e,$i.axis,t),this.spec.componentType=$i.axis,this.mode=n}parseAddition(e){return super.parseAddition(e),this.axisType(e.axisType),this.tickCount(e.tickCount),this.inside(e.inside),this.baseValue(e.baseValue),this}scale(e){return super.scale(e),this._axisComponentType=null,this}axisType(e){return this.spec.axisType=e,this._axisComponentType=null,this._prepareRejoin(),this.commit(),this}addGraphicItem(e,t){const n=se({x:0,y:0,start:{x:0,y:0},end:{x:0,y:0}},e),s=Q.createGraphicComponent(this._getAxisComponentType(),n,{mode:this.mode,skipDefault:this.spec.skipTheme});return super.addGraphicItem(n,t,s)}tickCount(e){const t=be(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;return t&&t.tickCount(e),this.setFunctionSpec(e,"tickCount")}inside(e){return this.setFunctionSpec(e,"inside")}baseValue(e){return this.setFunctionSpec(e,"baseValue")}getAxisComponentType(){return this._axisComponentType}_updateComponentEncoders(){const e=be(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale,t=Object.assign({update:{}},this.spec.encode),n=Object.keys(t).reduce((s,r)=>{const a=t[r];return a&&(s[r]={callback:(o,l,c)=>{var u,h;const d=this.spec.skipTheme?null:this.view.getCurrentTheme();let p=ad(a,o,l,c);const f=Xn(this.spec.inside,c,o,l),g=Xn(this.spec.baseValue,c,o,l),m=(u=e==null?void 0:e.getCoordinate)===null||u===void 0?void 0:u.call(e);m&&(p=Object.assign(Rle(e,m,f,g,this.spec.layout),p));const y=(h=e==null?void 0:e.getScale)===null||h===void 0?void 0:h.call(e),b=Xn(this.spec.tickCount,c,o,l);switch(this._getAxisComponentType()){case lc.lineAxis:return odt(y,d,p,b);case lc.circleAxis:return ldt(y,d,p,b)}return p}}),s},{});this._encoders=n}_getAxisComponentType(){var e;if(this._axisComponentType)return this._axisComponentType;let t=this.spec.axisType;if(B(t)){const n=be(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;t=!((e=n==null?void 0:n.getCoordinate)===null||e===void 0)&&e.call(n)?n.getCoordinateAxisPoints()?"line":"circle":"line"}return this._axisComponentType=t==="circle"?lc.circleAxis:lc.lineAxis,this._axisComponentType}}y4.componentType=$i.axis;const ig=()=>{Q.registerGraphicComponent(lc.lineAxis,(i,e)=>new a1(i,e)),Q.registerComponent($i.axis,y4)},Lle=()=>{Q.registerGraphicComponent(lc.circleAxis,i=>new o1(i)),Q.registerComponent($i.axis,y4)};var cdt=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};const udt=(i,e,t,n,s,r={})=>{var a;const o=(a=r.components)===null||a===void 0?void 0:a.dataLabel,l=i.map((u,h)=>{var d,p,f,g,m;const y=Object.assign(Object.assign({},s),{labelIndex:h}),b=(d=Xn(n,y,u))!==null&&d!==void 0?d:{},{components:x={}}=r;let S={};switch(u.markType){case _e.line:case _e.area:S=b.type==="line"?x.lineLabel:b.type==="area"?x.areaLabel:x.lineDataLabel;break;case _e.rect:case _e.rect3d:case _e.interval:S=x.rectLabel;break;case _e.symbol:case _e.circle:case _e.cell:S=x.symbolLabel;break;case _e.arc:case _e.arc3d:S=x.arcLabel;break;case _e.polygon:case _e.path:default:S=x.pointLabel}const C=(p=b.data)!==null&&p!==void 0?p:[],w=(g=(f=S==null?void 0:S.data)===null||f===void 0?void 0:f[0])!==null&&g!==void 0?g:{};if(C&&C.length>0)C.forEach((E,P)=>{if(u.elements[P]){const O=ad(t,E,u.elements[P],y);se(E,w,O)}});else{const E=(P,O)=>{const{data:M}=P,R=cdt(P,["data"]);return Object.assign(Object.assign({},se({},O,R)),{data:M})};u.elements.forEach(P=>{if(P.getGraphicItem().releaseStatus!=="willRelease")if(u.isCollectionMark())P.getDatum().forEach(O=>{const M=ad(t,O,P,y);C.push(E(M,w))});else{const O=ad(t,P.getDatum(),P,y);C.push(E(O,w))}})}const A=(m=u.graphicItem)===null||m===void 0?void 0:m.name,T=se({},S,{baseMarkGroupName:A,getBaseMarks:()=>u.elements.map(E=>E.getGraphicItem())},b??{});return T.data=C??S.data,T}).filter(u=>!B(u)),c=se({},o,{size:e});return c.dataLabels=l,c};let Dle=class extends f4{constructor(e,t){super(e,$i.label,t),this.spec.componentType=$i.label}parseAddition(e){return super.parseAddition(e),this.labelStyle(e.labelStyle),this.size(e.size),this.target(e.target),this}labelStyle(e){return this.setFunctionSpec(e,"labelStyle")}size(e){return this.setFunctionSpec(e,"size")}target(e){if(this.spec.target){const t=q(this.spec.target).map(n=>be(n)?this.view.getMarkById(n):n);this.detach(t)}if(this.spec.target=e,e){const t=q(e).map(n=>be(n)?this.view.getMarkById(n):n);this.attach(t)}return this.commit(),this}_updateComponentEncoders(){const e=Object.assign({update:{}},this.spec.encode),t=Object.keys(e).reduce((n,s)=>{const r=e[s];return r&&(n[s]={callback:(a,o,l)=>{var c,u,h,d;const p=q(this.spec.target).map(y=>be(y)?this.view.getMarkById(y):y),f=(u=(c=this.group)===null||c===void 0?void 0:c.getGroupGraphicItem)===null||u===void 0?void 0:u.call(c);let g=Xn(this.spec.size,l);g||(g=f?{width:(h=f.attribute.width)!==null&&h!==void 0?h:f.AABBBounds.width(),height:(d=f.attribute.height)!==null&&d!==void 0?d:f.AABBBounds.height()}:{width:1/0,height:1/0});const m=this.spec.skipTheme?null:this.view.getCurrentTheme();return udt(p,g,r,this.spec.labelStyle,l,m)}}),n},{});this._encoders=t}};Dle.componentType=$i.label;const Fle=()=>{Q.registerGraphicComponent($i.label,i=>new aO(i)),Q.registerComponent($i.label,Dle)},hdt=(i,e,t,n)=>{var s,r,a,o;const l=(r=(s=e==null?void 0:e.components)===null||s===void 0?void 0:s.grid)!==null&&r!==void 0?r:{};if(!i)return se({},l,t??{});const c=((o=(a=i.tickData)===null||a===void 0?void 0:a.call(i,n))!==null&&o!==void 0?o:[]).map(u=>({id:u.index,label:u.tick,value:u.value,rawValue:u.tick}));return se({},l,{items:c},t??{})},ddt=(i,e,t,n)=>{var s,r,a,o;const l=(r=(s=e==null?void 0:e.components)===null||s===void 0?void 0:s.circleGrid)!==null&&r!==void 0?r:{};if(!i)return se({},l,t??{});const c=((o=(a=i.tickData)===null||a===void 0?void 0:a.call(i,n))!==null&&o!==void 0?o:[]).map(u=>({id:u.index,label:u.tick,value:u.value,rawValue:u.tick}));return se({},l,{items:c},t??{})};class _4 extends Ile{constructor(e,t,n){super(e,$i.grid,t),this.spec.componentType=$i.grid,this.mode=n}parseAddition(e){return super.parseAddition(e),this.target(e.target),this.gridType(e.gridType),this.gridShape(e.gridShape),this}scale(e){return super.scale(e),this._gridComponentType=null,this}gridType(e){return this.spec.gridType=e,this._gridComponentType=null,this._prepareRejoin(),this.commit(),this}gridShape(e){return this.spec.gridShape=e,this.commit(),this}target(e){if(this.spec.target){const n=be(this.spec.target)?this.view.getMarkById(this.spec.target):this.spec.target;this.detach(n)}this.spec.target=e;const t=be(e)?this.view.getMarkById(e):e;return this.attach(t),this._targetAxis=t,this._gridComponentType=null,this._updateComponentEncoders(),this.commit(),this}tickCount(e){const t=be(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;return t&&t.tickCount(e),this.setFunctionSpec(e,"tickCount")}inside(e){return this.setFunctionSpec(e,"inside")}baseValue(e){return this.setFunctionSpec(e,"baseValue")}addGraphicItem(e,t){const n=se({x:0,y:0,start:{x:0,y:0},end:{x:0,y:0}},e),s=Q.createGraphicComponent(this._getGridComponentType(),n,{mode:this.mode,skipDefault:this.spec.skipTheme});return super.addGraphicItem(n,t,s)}_updateComponentEncoders(){const e=Object.assign({update:{}},this.spec.encode),t=Object.keys(e).reduce((n,s)=>{const r=e[s];return r&&(n[s]={callback:(a,o,l)=>{var c,u,h,d;const p=this.spec.skipTheme?null:this.view.getCurrentTheme();let f,g=ad(r,a,o,l);const m=Xn(this.spec.baseValue,l,a,o);if(this._targetAxis){const x=(c=this._targetAxis.getSpec())===null||c===void 0?void 0:c.scale;f=be(x)?this.view.getScaleById(x):x;const S=this._targetAxis.elements[0];if(S)switch(this._getGridComponentType()){case Qn.lineAxisGrid:g=Object.assign({x:S.getGraphicAttribute("x"),y:S.getGraphicAttribute("y"),start:S.getGraphicAttribute("start"),end:S.getGraphicAttribute("end"),verticalFactor:(u=S.getGraphicAttribute("verticalFactor"))!==null&&u!==void 0?u:1},g);break;case Qn.circleAxisGrid:g=Object.assign({x:S.getGraphicAttribute("x"),y:S.getGraphicAttribute("y"),center:S.getGraphicAttribute("center"),radius:S.getGraphicAttribute("radius"),innerRadius:S.getGraphicAttribute("innerRadius"),inside:S.getGraphicAttribute("inside"),startAngle:S.getGraphicAttribute("startAngle"),endAngle:S.getGraphicAttribute("endAngle")},g)}}else{f=be(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;const x=Xn(this.spec.inside,l,a,o),S=(h=f==null?void 0:f.getCoordinate)===null||h===void 0?void 0:h.call(f);S&&(g=Object.assign(Rle(f,S,x,m,this.spec.layout,!0),g))}this._getGridComponentType()===Qn.lineAxisGrid&&(g=this.spec.gridShape!=="line"&&this.spec.gridShape?Object.assign({center:g.start,closed:!0},g,{type:this.spec.gridShape}):Object.assign({},g,{type:"line"}));const y=(d=f==null?void 0:f.getScale)===null||d===void 0?void 0:d.call(f),b=Xn(this.spec.tickCount,l,a,o);switch(this._getGridComponentType()){case Qn.lineAxisGrid:return hdt(y,p,g,b);case Qn.circleAxisGrid:return ddt(y,p,g,b)}return g}}),n},{});this._encoders=t}_getGridComponentType(){var e;if(this._gridComponentType)return this._gridComponentType;if(this.spec.gridType)this.spec.gridType==="circle"?this._gridComponentType=Qn.circleAxisGrid:this._gridComponentType=Qn.lineAxisGrid;else if(this._targetAxis)switch(this._targetAxis.getAxisComponentType()){case lc.circleAxis:this._gridComponentType=Qn.circleAxisGrid;break;case lc.lineAxis:default:this._gridComponentType=Qn.lineAxisGrid}else if(this.spec.scale){const t=be(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;this._gridComponentType=!((e=t==null?void 0:t.getCoordinate)===null||e===void 0)&&e.call(t)?t.getCoordinateAxisPoints()?Qn.lineAxisGrid:Qn.circleAxisGrid:Qn.lineAxisGrid}else this._gridComponentType=Qn.lineAxisGrid;return this._gridComponentType}}_4.componentType=$i.grid;const ng=()=>{Q.registerGraphicComponent(Qn.lineAxisGrid,(i,e)=>new moe(i,e)),Q.registerComponent($i.grid,_4)},Ble=()=>{Q.registerGraphicComponent(Qn.circleAxisGrid,(i,e)=>new yoe(i,e)),Q.registerComponent($i.grid,_4)},pdt=(i,e,t)=>e.filter(n=>i.callback(n,t)),fdt=(i,e,t)=>{const n=i.callback,s=i.as;if(!i.all)return e.forEach(a=>{const o=n(a,t);if(!B(s)){if(B(a))return;a[s]=o}return o}),e;const r=n(e,t);return B(s)||B(e)?r:(e[s]=r,e)};function jle(i){return i.reduce((e,t)=>e+t,0)}function gdt(i){return i.length===0?0:jle(i)/i.length}const mdt={min:Mn,max:an,average:gdt,sum:jle};function ydt(i,e,t,n){const s=Math.floor(e.length/i),r=[],a=e.length;let o,l,c,u=0,h=0;r[h++]=u;for(let d=1;d<a-1;d+=s){const p=Math.min(d+s,a-1),f=Math.min(d+2*s,a),g=(f+p)/2;let m=0;for(let C=p;C<f;C++){const w=e[C][n];Number.isNaN(w)||(m+=w)}m/=f-p;const y=d,b=Math.min(d+s,a),x=d-1,S=e[u][n];o=-1,c=y;for(let C=y;C<b;C++){const w=e[C][n];Number.isNaN(n)||(l=Math.abs((x-g)*(w-S)-(x-C)*(m-S)),l>o&&(o=l,c=C))}r[h++]=c,u=c}return r[h-1]!==a-1&&(r[h++]=a-1),r.map(d=>t?e[d].i:d)}function CO(i,e,t,n,s){let r=Math.floor(e.length/i);const a=[],o=e.length;let l=0,c=[];a.push(l),e[l][s]=e[l][s];for(let u=1;u<o-1;u+=r){r>o-u&&(r=o-u,c.length=r),c=[];for(let d=0;d<r;d++)c.push(e[u+d][s]);const h=mdt[n](c);l=Math.min(Math.round(u+c.length/2)||0,o-1),e[l][s]=h,a.push(l)}return a.map(u=>t?e[u].i:u)}function _dt(i,e,t,n){return CO(i,e,t,"min",n)}function vdt(i,e,t,n){return CO(i,e,t,"max",n)}function bdt(i,e,t,n){return CO(i,e,t,"average",n)}function xdt(i,e,t,n){return CO(i,e,t,"sum",n)}const Sdt=(i,e)=>{let t=i.size;const n=i.factor||1;if(Array.isArray(t)&&(t=Math.floor(t[1]-t[0])),t*=n,t<=0)return[];if(e.length<=t)return e;if(i.skipfirst)return e.slice(0,1);const{mode:s,yfield:r,groupBy:a}=i,o=r??"y";let l=ydt;if(s==="min"?l=_dt:s==="max"?l=vdt:s==="average"?l=bdt:s==="sum"&&(l=xdt),e.length){const c={};if(a){for(let h=0,d=e.length;h<d;h++){const p=e[h],f=p[a];c[f]?c[f].push({[o]:p[o],i:h}):(c[f]=[],c[f].push({[o]:p[o],i:h}))}let u=[];return Object.keys(c).forEach(h=>{const d=c[h];if(d.length<=t){const p=d.map(f=>f.i);u=u.concat(p)}else{const p=l(t,d,!0,o);u=u.concat(p),d.forEach(f=>e[f.i][o]=f[o])}}),u.sort((h,d)=>h-d),u.map(h=>e[h])}return l(t,e,!1,o).map(u=>e[u])}return[]};function Cdt(i){return i.forEach(e=>{e.getGraphicAttribute(Sf)&&(e.setGraphicAttribute("visible",!0),e.setGraphicAttribute(Sf,!1))}),i}function wdt(i,e,t,n){if(n){let s=-1/0,r=0;const a=B(e);let o=e;i.forEach(l=>{if(l.getGraphicAttribute("visible")===!1)return;const c=l.getGraphicAttribute("size")/2,u=l.getGraphicAttribute("x");a&&(o=(c+r)*t),Math.abs(u-s)<o+r+c?l.getGraphicAttribute("forceShow")||(l.setGraphicAttribute(Sf,!0),l.setGraphicAttribute("visible",!1)):s=u,r=c})}}function Adt(i,e,t,n){if(n){let s=-1/0,r=0;const a=B(e);let o=e;i.forEach(l=>{if(l.getGraphicAttribute("visible")===!1)return;const c=l.getGraphicAttribute("size")/2,u=l.getGraphicAttribute("y");a&&(o=(c+r)*t),Math.abs(u-s)<o+r+c?l.getGraphicAttribute("forceShow")||(l.setGraphicAttribute(Sf,!0),l.setGraphicAttribute("visible",!1)):s=u,r=c})}}function kdt(i,e,t,n){if(n){let r=-1/0,a=0,o=0;const l=B(e);let c=e;i.forEach(u=>{if(u.getGraphicAttribute("visible")===!1)return;const h=u.getGraphicAttribute("size")/2,d=u.getGraphicAttribute("x"),p=u.getGraphicAttribute("y");l&&(c=(h+a)*t),o=(-1/0-d)**2+(r-p)**2,o<(c+a+h)**2?u.getGraphicAttribute("forceShow")||(u.setGraphicAttribute(Sf,!0),u.setGraphicAttribute("visible",!1)):r=p,a=h})}}const Tdt=(i,e)=>{if(!e||e.length===0)return;let{radius:t}=i;B(t)&&e[0].mark.markType==="symbol"&&(t=!0);const{direction:n,delta:s,deltaMul:r=1,groupBy:a}=i,o=l=>{Cdt(l);const c=i.sort?l.slice().sort((u,h)=>u.getGraphicAttribute("x")-h.getGraphicAttribute("x")):l;n===0?kdt(c,s,r,t):n===1?wdt(c,s,r,t):Adt(c,s,r,t)};if(a){const l=e.reduce((c,u)=>{const h=u.getDatum()[a];return c[h]?c[h].push(u):c[h]=[u],c},{});Object.keys(l).forEach(c=>{o(l[c])})}else o(e);return e},Edt=()=>{Q.registerTransform("filter",{transform:pdt,markPhase:"beforeJoin"},!0)},Pdt=()=>{Q.registerTransform("map",{transform:fdt,markPhase:"beforeJoin"},!0)},v4=()=>{Q.registerTransform("sampling",{transform:Sdt,markPhase:"afterEncode"},!0)},b4=()=>{Q.registerTransform("markoverlap",{transform:Tdt,markPhase:"afterEncode"},!0)},Odt=(i,e,t)=>{var n;const s=i.getGraphicAttribute("clipRangeByDimension",!1),r=(n=i.getGraphicAttribute("clipRange",!1))!==null&&n!==void 0?n:1;return e&&e.clipDimension?{from:{clipRange:0,clipRangeByDimension:e.clipDimension},to:{clipRange:r,clipRangeByDimension:s}}:{from:{clipRange:0},to:{clipRange:r}}},Mdt=(i,e,t)=>{var n;const s=i.getGraphicAttribute("clipRangeByDimension",!0),r=(n=i.getGraphicAttribute("clipRange",!0))!==null&&n!==void 0?n:1;return e&&e.clipDimension?{from:{clipRange:r,clipRangeByDimension:e.clipDimension},to:{clipRange:0,clipRangeByDimension:s}}:{from:{clipRange:r},to:{clipRange:0}}},Idt=(i,e,t)=>{var n,s,r,a;const o=(n=i.getFinalAnimationAttributes())!==null&&n!==void 0?n:{};return{from:{opacity:0,fillOpacity:0,strokeOpacity:0},to:{opacity:(s=o.opacity)!==null&&s!==void 0?s:1,fillOpacity:(r=o.fillOpacity)!==null&&r!==void 0?r:1,strokeOpacity:(a=o.strokeOpacity)!==null&&a!==void 0?a:1}}},Rdt=(i,e,t)=>{var n,s,r;return{from:{opacity:(n=i.getGraphicAttribute("opacity",!0))!==null&&n!==void 0?n:1,fillOpacity:(s=i.getGraphicAttribute("fillOpacity",!0))!==null&&s!==void 0?s:1,strokeOpacity:(r=i.getGraphicAttribute("strokeOpacity",!0))!==null&&r!==void 0?r:1},to:{opacity:0,fillOpacity:0,strokeOpacity:0}}},Ldt=(i,e,t)=>{switch(e==null?void 0:e.direction){case"x":{const n=i.getFinalAnimationAttribute("x"),s=i.getFinalAnimationAttribute("x1"),r=i.getFinalAnimationAttribute("width");return{from:F(r)?{x:n+r/2,x1:void 0,width:0}:{x:(n+s)/2,x1:(n+s)/2,width:void 0},to:{x:n,x1:s,width:r}}}case"y":{const n=i.getFinalAnimationAttribute("y"),s=i.getFinalAnimationAttribute("y1"),r=i.getFinalAnimationAttribute("height");return{from:F(r)?{y:n+r/2,y1:void 0,height:0}:{y:(n+s)/2,y1:(n+s)/2,height:void 0},to:{y:n,y1:s,height:r}}}default:{const n=i.getFinalAnimationAttribute("x"),s=i.getFinalAnimationAttribute("x1"),r=i.getFinalAnimationAttribute("width"),a=i.getFinalAnimationAttribute("y"),o=i.getFinalAnimationAttribute("y1"),l=i.getFinalAnimationAttribute("height"),c={};return F(r)?(c.x=n+r/2,c.width=0,c.x1=void 0):(c.x=(n+s)/2,c.x1=(n+s)/2,c.width=void 0),F(l)?(c.y=a+l/2,c.height=0,c.y1=void 0):(c.y=(a+o)/2,c.y1=(a+o)/2,c.height=void 0),{from:c,to:{x:n,y:a,x1:s,y1:o,width:r,height:l}}}}},Ddt=(i,e,t)=>{switch(e==null?void 0:e.direction){case"x":{const n=i.getFinalAnimationAttribute("x"),s=i.getFinalAnimationAttribute("x1"),r=i.getFinalAnimationAttribute("width");return{to:F(r)?{x:n+r/2,x1:void 0,width:0}:{x:(n+s)/2,x1:(n+s)/2,width:void 0}}}case"y":{const n=i.getFinalAnimationAttribute("y"),s=i.getFinalAnimationAttribute("y1"),r=i.getFinalAnimationAttribute("height");return{to:F(r)?{y:n+r/2,y1:void 0,height:0}:{y:(n+s)/2,y1:(n+s)/2,height:void 0}}}default:{const n=i.getFinalAnimationAttribute("x"),s=i.getFinalAnimationAttribute("y"),r=i.getFinalAnimationAttribute("x1"),a=i.getFinalAnimationAttribute("y1"),o=i.getFinalAnimationAttribute("width"),l=i.getFinalAnimationAttribute("height"),c={};return F(o)?(c.x=n+o/2,c.width=0,c.x1=void 0):(c.x=(n+r)/2,c.x1=(n+r)/2,c.width=void 0),F(l)?(c.y=s+l/2,c.height=0,c.y1=void 0):(c.y=(s+a)/2,c.y1=(s+a)/2,c.height=void 0),{to:c}}}};function Fdt(i,e,t){const n=i.getFinalAnimationAttribute("x"),s=i.getFinalAnimationAttribute("x1"),r=i.getFinalAnimationAttribute("width");if(e&&e.orient==="negative"){const o=F(r)?Math.max(n,n+r):Math.max(n,s);return{from:{x:o,x1:B(s)?void 0:o,width:B(r)?void 0:0},to:{x:n,x1:s,width:r}}}const a=F(r)?Math.min(n,n+r):Math.min(n,s);return{from:{x:a,x1:B(s)?void 0:a,width:B(r)?void 0:0},to:{x:n,x1:s,width:r}}}function Bdt(i,e,t){var n;const s=i.getFinalAnimationAttribute("x"),r=i.getFinalAnimationAttribute("x1"),a=i.getFinalAnimationAttribute("width");let o;return e&&e.orient==="negative"?ye(e.overall)?o=e.overall:t.group?(o=(n=t.groupWidth)!==null&&n!==void 0?n:t.group.getBounds().width(),t.groupWidth=o):o=t.width:o=ye(e==null?void 0:e.overall)?e==null?void 0:e.overall:0,{from:{x:o,x1:B(r)?void 0:o,width:B(a)?void 0:0},to:{x:s,x1:r,width:a}}}const jdt=(i,e,t)=>{var n;return((n=e==null?void 0:e.overall)!==null&&n!==void 0&&n)!==!1?Bdt(i,e,t):Fdt(i,e)};function Ndt(i,e,t){const n=i.getFinalAnimationAttribute("x"),s=i.getFinalAnimationAttribute("x1"),r=i.getFinalAnimationAttribute("width");if(e&&e.orient==="negative"){const o=F(r)?Math.max(n,n+r):Math.max(n,s);return{to:{x:o,x1:B(s)?void 0:o,width:B(r)?void 0:0}}}const a=F(r)?Math.min(n,n+r):Math.min(n,s);return{to:{x:a,x1:B(s)?void 0:a,width:B(r)?void 0:0}}}function $dt(i,e,t){var n;const s=i.getFinalAnimationAttribute("x1"),r=i.getFinalAnimationAttribute("width");let a;return e&&e.orient==="negative"?ye(e.overall)?a=e.overall:t.group?(a=(n=t.groupWidth)!==null&&n!==void 0?n:t.group.getBounds().width(),t.groupWidth=a):a=t.width:a=ye(e==null?void 0:e.overall)?e.overall:0,{to:{x:a,x1:B(s)?void 0:a,width:B(r)?void 0:0}}}const zdt=(i,e,t)=>{var n;return((n=e==null?void 0:e.overall)!==null&&n!==void 0&&n)!==!1?$dt(i,e,t):Ndt(i,e)};function Hdt(i,e,t){const n=i.getFinalAnimationAttribute("y"),s=i.getFinalAnimationAttribute("y1"),r=i.getFinalAnimationAttribute("height");if(e&&e.orient==="negative"){const o=F(r)?Math.max(n,n+r):Math.max(n,s);return{from:{y:o,y1:B(s)?void 0:o,height:B(r)?void 0:0},to:{y:n,y1:s,height:r}}}const a=F(r)?Math.min(n,n+r):Math.min(n,s);return{from:{y:a,y1:B(s)?void 0:a,height:B(r)?void 0:0},to:{y:n,y1:s,height:r}}}function Vdt(i,e,t){var n;const s=i.getFinalAnimationAttribute("y"),r=i.getFinalAnimationAttribute("y1"),a=i.getFinalAnimationAttribute("height");let o;return e&&e.orient==="negative"?ye(e.overall)?o=e.overall:t.group?(o=(n=t.groupHeight)!==null&&n!==void 0?n:t.group.getBounds().height(),t.groupHeight=o):o=t.height:o=ye(e==null?void 0:e.overall)?e.overall:0,{from:{y:o,y1:B(r)?void 0:o,height:B(a)?void 0:0},to:{y:s,y1:r,height:a}}}const Udt=(i,e,t)=>{var n;return((n=e==null?void 0:e.overall)!==null&&n!==void 0&&n)!==!1?Vdt(i,e,t):Hdt(i,e)};function Wdt(i,e,t){const n=i.getFinalAnimationAttribute("y"),s=i.getFinalAnimationAttribute("y1"),r=i.getFinalAnimationAttribute("height");if(e&&e.orient==="negative"){const o=F(r)?Math.max(n,n+r):Math.max(n,s);return{to:{y:o,y1:B(s)?void 0:o,height:B(r)?void 0:0}}}const a=F(r)?Math.min(n,n+r):Math.min(n,s);return{to:{y:a,y1:B(s)?void 0:a,height:B(r)?void 0:0}}}function Gdt(i,e,t){var n;const s=i.getFinalAnimationAttribute("y1"),r=i.getFinalAnimationAttribute("height");let a;return e&&e.orient==="negative"?ye(e.overall)?a=e.overall:t.group?(a=(n=t.groupHeight)!==null&&n!==void 0?n:t.group.getBounds().height(),t.groupHeight=a):a=t.height:a=ye(e==null?void 0:e.overall)?e.overall:0,{to:{y:a,y1:B(s)?void 0:a,height:B(r)?void 0:0}}}const Kdt=(i,e,t)=>{var n;return((n=e==null?void 0:e.overall)!==null&&n!==void 0&&n)!==!1?Gdt(i,e,t):Wdt(i,e)},Xdt=(i,e,t)=>{const n=i.getFinalAnimationAttributes();return e&&e.orient==="anticlockwise"?{from:{startAngle:n==null?void 0:n.endAngle},to:{startAngle:n==null?void 0:n.startAngle}}:{from:{endAngle:n==null?void 0:n.startAngle},to:{endAngle:n==null?void 0:n.endAngle}}},Ydt=(i,e,t)=>{const n=i.getFinalAnimationAttributes();if(e&&e.orient==="anticlockwise"){const r=ye(e.overall)?e.overall:2*Math.PI;return{from:{startAngle:r,endAngle:r},to:{startAngle:n==null?void 0:n.startAngle,endAngle:n==null?void 0:n.endAngle}}}const s=ye(e==null?void 0:e.overall)?e.overall:0;return{from:{startAngle:s,endAngle:s},to:{startAngle:n==null?void 0:n.startAngle,endAngle:n==null?void 0:n.endAngle}}},qdt=(i,e,t)=>{var n;return((n=e==null?void 0:e.overall)!==null&&n!==void 0&&n)!==!1?Ydt(i,e):Xdt(i,e)},Zdt=(i,e,t)=>{const n=i.getFinalAnimationAttributes();return e&&e.orient==="anticlockwise"?{from:{startAngle:i.getGraphicAttribute("startAngle",!0)},to:{startAngle:n==null?void 0:n.endAngle}}:{from:{endAngle:i.getGraphicAttribute("endAngle",!0)},to:{endAngle:n==null?void 0:n.startAngle}}},Jdt=(i,e,t)=>{if(e&&e.orient==="anticlockwise"){const s=ye(e.overall)?e.overall:2*Math.PI;return{from:{startAngle:i.getGraphicAttribute("startAngle",!0),endAngle:i.getGraphicAttribute("endAngle",!0)},to:{startAngle:s,endAngle:s}}}const n=ye(e==null?void 0:e.overall)?e.overall:0;return{from:{startAngle:i.getGraphicAttribute("startAngle",!0),endAngle:i.getGraphicAttribute("endAngle",!0)},to:{startAngle:n,endAngle:n}}},Qdt=(i,e,t)=>{var n;return((n=e==null?void 0:e.overall)!==null&&n!==void 0&&n)!==!1?Jdt(i,e):Zdt(i,e)},ept=(i,e,t)=>{const n=i.getFinalAnimationAttributes();return e&&e.orient==="inside"?{from:{innerRadius:n==null?void 0:n.outerRadius},to:{innerRadius:n==null?void 0:n.innerRadius}}:{from:{outerRadius:n==null?void 0:n.innerRadius},to:{outerRadius:n==null?void 0:n.outerRadius}}},tpt=(i,e,t)=>{const n=i.getFinalAnimationAttributes(),s=ye(e==null?void 0:e.overall)?e.overall:0;return{from:{innerRadius:s,outerRadius:s},to:{innerRadius:n==null?void 0:n.innerRadius,outerRadius:n==null?void 0:n.outerRadius}}},ipt=(i,e,t)=>{var n;return((n=e==null?void 0:e.overall)!==null&&n!==void 0&&n)!==!1?tpt(i,e):ept(i,e)},npt=(i,e,t)=>{const n=i.getFinalAnimationAttributes();return e&&e.orient==="inside"?{from:{innerRadius:i.getGraphicAttribute("innerRadius",!0)},to:{innerRadius:n==null?void 0:n.outerRadius}}:{from:{outerRadius:i.getGraphicAttribute("outerRadius",!0)},to:{outerRadius:n==null?void 0:n.innerRadius}}},spt=(i,e,t)=>{const n=ye(e==null?void 0:e.overall)?e.overall:0;return{from:{innerRadius:i.getGraphicAttribute("innerRadius",!0),outerRadius:i.getGraphicAttribute("outerRadius",!0)},to:{innerRadius:n,outerRadius:n}}},rpt=(i,e,t)=>{var n;return((n=e==null?void 0:e.overall)!==null&&n!==void 0&&n)!==!1?spt(i,e):npt(i,e)},Nle=(i,e,t)=>{const n=i.getGraphicAttribute("points",!1),s={x:0,y:0};return n.forEach(r=>{s.x+=r.x,s.y+=r.y}),s.x/=n.length,s.y/=n.length,e&&e.center&&(Z(e.center.x)&&(s.x=e.center.x),Z(e.center.y)&&(s.y=e.center.y)),i.mark.markType==="area"&&(s.x1=s.x,s.y1=s.y),n.map(r=>Object.assign({},r,s))},apt=(i,e,t)=>({from:{points:Nle(i,e)},to:{points:i.getGraphicAttribute("points",!1)}}),opt=(i,e,t)=>({from:{points:i.getGraphicAttribute("points",!0)},to:{points:Nle(i,e)}}),$le=(i,e,t)=>i.getGraphicAttribute("points",!1).map(n=>{var s;if(e&&e.orient==="negative"){let r=t.width;return t.group&&(r=(s=t.groupWidth)!==null&&s!==void 0?s:t.group.getBounds().width(),t.groupWidth=r),Object.assign(Object.assign({},n),{x:r,y:n.y,x1:r,y1:n.y1,defined:n.defined!==!1})}return Object.assign(Object.assign({},n),{x:0,y:n.y,x1:0,y1:n.y1,defined:n.defined!==!1})}),lpt=(i,e,t)=>({from:{points:$le(i,e,t)},to:{points:i.getGraphicAttribute("points",!1)}}),cpt=(i,e,t)=>({from:{points:i.getGraphicAttribute("points",!0)},to:{points:$le(i,e,t)}}),zle=(i,e,t)=>i.getGraphicAttribute("points",!1).map(n=>{var s;if(e&&e.orient==="negative"){let r=t.height;return t.group&&(r=(s=t.groupHeight)!==null&&s!==void 0?s:t.group.getBounds().height(),t.groupHeight=r),Object.assign(Object.assign({},n),{x:n.x,y:r,x1:n.x1,y1:r,defined:n.defined!==!1})}return Object.assign(Object.assign({},n),{x:n.x,y:0,x1:n.x1,y1:0,defined:n.defined!==!1})}),upt=(i,e,t)=>({from:{points:zle(i,e,t)},to:{points:i.getGraphicAttribute("points",!1)}}),hpt=(i,e,t)=>({from:{points:i.getGraphicAttribute("points",!0)},to:{points:zle(i,e,t)}}),dpt=(i,e,t)=>{var n,s;const{offset:r=0,orient:a,direction:o,point:l,excludeChannels:c=[]}=e??{};let u=0,h=0;a==="negative"&&(t.group?(u=(n=t.groupWidth)!==null&&n!==void 0?n:t.group.getBounds().width(),h=(s=t.groupHeight)!==null&&s!==void 0?s:t.group.getBounds().height(),t.groupWidth=u,t.groupHeight=h):(u=t.width,h=t.height)),u+=r,h+=r;const d=ee(l)?l.call(null,i.getDatum(),i,t):l,p=d&&Z(d.x)?d.x:u,f=d&&Z(d.y)?d.y:h,g=c.includes("x")?i.getGraphicAttribute("x"):i.getFinalAnimationAttribute("x"),m=c.includes("y")?i.getGraphicAttribute("y"):i.getFinalAnimationAttribute("y");switch(o){case"x":return{from:{x:p},to:{x:g}};case"y":return{from:{y:f},to:{y:m}};default:return{from:{x:p,y:f},to:{x:g,y:m}}}},ppt=(i,e,t)=>{var n,s;const{offset:r=0,orient:a,direction:o,point:l}=e??{},c=t.group?t.group.getBounds():null,u=(n=c==null?void 0:c.width())!==null&&n!==void 0?n:t.width,h=(s=c==null?void 0:c.height())!==null&&s!==void 0?s:t.height,d=(a==="negative"?u:0)+r,p=(a==="negative"?h:0)+r,f=ee(l)?l.call(null,i.getDatum(),i,t):l,g=f&&Z(f.x)?f.x:d,m=f&&Z(f.y)?f.y:p;switch(o){case"x":return{from:{x:i.getGraphicAttribute("x",!0)},to:{x:g}};case"y":return{from:{y:i.getGraphicAttribute("y",!0)},to:{y:m}};default:return{from:{x:i.getGraphicAttribute("x",!0),y:i.getGraphicAttribute("y",!0)},to:{x:g,y:m}}}},fpt=(i,e,t)=>{var n,s,r,a;const o=i.getFinalAnimationAttributes();switch(e==null?void 0:e.direction){case"x":return{from:{scaleX:0},to:{scaleX:(n=o==null?void 0:o.scaleX)!==null&&n!==void 0?n:1}};case"y":return{from:{scaleY:0},to:{scaleY:(s=o==null?void 0:o.scaleY)!==null&&s!==void 0?s:1}};default:return{from:{scaleX:0,scaleY:0},to:{scaleX:(r=o==null?void 0:o.scaleX)!==null&&r!==void 0?r:1,scaleY:(a=o==null?void 0:o.scaleY)!==null&&a!==void 0?a:1}}}},gpt=(i,e,t)=>{var n,s,r,a;switch(e==null?void 0:e.direction){case"x":return{from:{scaleX:(n=i.getGraphicAttribute("scaleX",!0))!==null&&n!==void 0?n:1},to:{scaleX:0}};case"y":return{from:{scaleY:(s=i.getGraphicAttribute("scaleY",!0))!==null&&s!==void 0?s:1},to:{scaleY:0}};default:return{from:{scaleX:(r=i.getGraphicAttribute("scaleX",!0))!==null&&r!==void 0?r:1,scaleY:(a=i.getGraphicAttribute("scaleY",!0))!==null&&a!==void 0?a:1},to:{scaleX:0,scaleY:0}}}},mpt={symbol:["_mo_hide_","visible"]},ypt=(i,e,t)=>{const n=Object.assign({},i.getPrevGraphicAttributes()),s=Object.assign({},i.getNextGraphicAttributes());let r;e&&q(e.excludeChannels).forEach(o=>{delete n[o],delete s[o]}),i.mark&&i.mark.markType&&(r=mpt[i.mark.markType])&&r.forEach(o=>{delete n[o],delete s[o]}),Object.keys(s).forEach(o=>{Pt(n[o],s[o])&&(delete n[o],delete s[o])});const a=i.getFinalGraphicAttributes();return Object.keys(n).forEach(o=>{B(s[o])&&(B(a[o])||Pt(n[o],a[o])?delete n[o]:s[o]=a[o])}),{from:n,to:s}},_pt=(i,e,t)=>{var n;const s=(n=i.getFinalAnimationAttribute("angle"))!==null&&n!==void 0?n:0;let r=0;return r=Nn(s/(2*Math.PI),0)?Math.round(s/(2*Math.PI))*Math.PI*2:Z(e==null?void 0:e.angle)?e.angle:(e==null?void 0:e.orient)==="anticlockwise"?Math.ceil(s/(2*Math.PI))*Math.PI*2:Math.floor(s/(2*Math.PI))*Math.PI*2,{from:{angle:r},to:{angle:s}}},vpt=(i,e,t)=>{var n;const s=(n=i.getGraphicAttribute("angle",!0))!==null&&n!==void 0?n:0;let r=0;return r=Nn(s/(2*Math.PI),0)?Math.round(s/(2*Math.PI))*Math.PI*2:Z(e==null?void 0:e.angle)?e.angle:(e==null?void 0:e.orient)==="anticlockwise"?Math.ceil(s/(2*Math.PI))*Math.PI*2:Math.floor(s/(2*Math.PI))*Math.PI*2,{from:{angle:s},to:{angle:r}}},bpt=()=>{Q.registerAnimationType("clipIn",Odt)},xpt=()=>{Q.registerAnimationType("clipOut",Mdt)},Spt=()=>{Q.registerAnimationType("fadeIn",Idt)},Cpt=()=>{Q.registerAnimationType("fadeOut",Rdt)},wpt=()=>{Q.registerAnimationType("growCenterIn",Ldt)},Apt=()=>{Q.registerAnimationType("growCenterOut",Ddt)},kpt=()=>{Q.registerAnimationType("growHeightIn",Udt)},Tpt=()=>{Q.registerAnimationType("growHeightOut",Kdt)},Ept=()=>{Q.registerAnimationType("growWidthIn",jdt)},Ppt=()=>{Q.registerAnimationType("growWidthOut",zdt)},Hle=()=>{Q.registerAnimationType("growPointsIn",apt)},Vle=()=>{Q.registerAnimationType("growPointsOut",opt)},Opt=()=>{Q.registerAnimationType("growPointsXIn",lpt)},Mpt=()=>{Q.registerAnimationType("growPointsXOut",cpt)},Ipt=()=>{Q.registerAnimationType("growPointsYIn",upt)},Rpt=()=>{Q.registerAnimationType("growPointsYOut",hpt)},Lpt=()=>{Q.registerAnimationType("growAngleIn",qdt)},Dpt=()=>{Q.registerAnimationType("growAngleOut",Qdt)},Fpt=()=>{Q.registerAnimationType("growRadiusIn",ipt)},Bpt=()=>{Q.registerAnimationType("growRadiusOut",rpt)},jpt=()=>{Q.registerAnimationType("moveIn",dpt)},Npt=()=>{Q.registerAnimationType("moveOut",ppt)},$pt=()=>{Q.registerAnimationType("scaleIn",fpt)},zpt=()=>{Q.registerAnimationType("scaleOut",gpt)},Hpt=()=>{Q.registerAnimationType("rotateIn",_pt)},Vpt=()=>{Q.registerAnimationType("rotateOut",vpt)},Upt=()=>{Q.registerAnimationType("update",ypt)};class Ule extends tg{encodeState(e,t,n){return super.encodeState(e,t,n),this._updateComponentEncoders(e),this}_updateComponentEncoders(e){this._encoders||(this._encoders={});const t=this.spec.encode[e];if(t&&e==="update"){const n=this.parameters(),s=Ip(t)?null:Object.keys(t).reduce((r,a)=>(vO(t[a])&&(r[a]=d1(t[a].scale,n)),r),{});this._encoders[e]={callback:(r,a,o)=>{const l=ad(t,r,a,o);if(B(l.size)){const c=s.x?fK(s.x):void 0,u=s.y?fK(s.y):void 0;B(c)&&B(u)?l.size=10:B(c)?l.size=u:B(u)&&(l.size=c),l.size=[c,u]}return B(l.shape)&&(l.shape="rect"),l}}}else this._encoders[e]=t}_getEncoders(){var e;return(e=this._encoders)!==null&&e!==void 0?e:{}}getAttributeTransforms(){return[{channels:["size","padding"],transform:(e,t,n)=>{if(ye(n.padding)&&n.padding>0)e.size=ie(n.size)?n.size.map(s=>Math.max(s-n.padding,1)):Math.max(n.size-n.padding,1);else if(ie(n.padding)&&n.padding.length===2){const s=ie(n.size)?n.size:[n.size,n.size];e.size=[Math.max(s[0]-n.padding[0],1),Math.max(s[1]-n.padding[1],1)]}else e.size=n.size},storedAttrs:"paddingAttrs"}].concat(Wx.symbol)}release(){super.release(),this._encoders=null}}Ule.markType=_e.cell;const Wpt=()=>{Q.registerMark(_e.cell,Ule)};class Gpt{constructor(e){this._animations=[],this._additionalAnimateMarks=[],this.isEnabled=!0,this._onAnimationStart=t=>{this._additionalAnimateMarks=this._additionalAnimateMarks.filter(n=>{var s;return(s=n==null?void 0:n.animate)===null||s===void 0?void 0:s.isAnimating()}),this._animations.length===0&&this._additionalAnimateMarks.length===0&&this._view.emit(Ee.ALL_ANIMATION_START,{}),this._animations=this._animations.concat({config:t.animationConfig,mark:t.mark})},this._onAnimationEnd=t=>{this._additionalAnimateMarks=this._additionalAnimateMarks.filter(n=>{var s;return(s=n==null?void 0:n.animate)===null||s===void 0?void 0:s.isAnimating()}),this._animations=this._animations.filter(n=>n.config!==t.animationConfig||n.mark!==t.mark),this._animations.length===0&&this._additionalAnimateMarks.length===0&&this._view.emit(Ee.ALL_ANIMATION_END,{})},this._view=e,this._view.addEventListener(Ee.ANIMATION_START,this._onAnimationStart),this._view.addEventListener(Ee.ANIMATION_END,this._onAnimationEnd)}stop(){return this._view.traverseMarkTree(e=>{var t,n;e.animate&&((n=(t=e.animate).stop)===null||n===void 0||n.call(t))}),this._additionalAnimateMarks.forEach(e=>{var t,n;e.view&&e.animate&&((n=(t=e.animate).stop)===null||n===void 0||n.call(t))}),this._additionalAnimateMarks=[],this}pause(){return this._view.traverseMarkTree(e=>{var t,n;e.animate&&((n=(t=e.animate).pause)===null||n===void 0||n.call(t))}),this._additionalAnimateMarks.forEach(e=>{var t,n;e.view&&e.animate&&((n=(t=e.animate).pause)===null||n===void 0||n.call(t))}),this}resume(){return this._view.traverseMarkTree(e=>{var t,n;e.animate&&((n=(t=e.animate).resume)===null||n===void 0||n.call(t))}),this._additionalAnimateMarks.forEach(e=>{var t,n;e.view&&e.animate&&((n=(t=e.animate).resume)===null||n===void 0||n.call(t))}),this}enable(){return this.isEnabled=!0,this._view.traverseMarkTree(e=>{var t,n;e.animate&&((n=(t=e.animate).enable)===null||n===void 0||n.call(t))}),this}disable(){return this.isEnabled=!1,this._view.traverseMarkTree(e=>{var t,n;e.animate&&((n=(t=e.animate).disable)===null||n===void 0||n.call(t))}),this._additionalAnimateMarks.forEach(e=>{var t,n;e.view&&e.animate&&((n=(t=e.animate).stop)===null||n===void 0||n.call(t))}),this._additionalAnimateMarks=[],this}enableAnimationState(e){return this._view.traverseMarkTree(t=>{var n,s;t.animate&&((s=(n=t.animate).enableAnimationState)===null||s===void 0||s.call(n,e))}),this}disableAnimationState(e){return this._view.traverseMarkTree(t=>{var n,s;t.animate&&((s=(n=t.animate).disableAnimationState)===null||s===void 0||s.call(n,e))}),this}isAnimating(){return this._animations.length!==0||this._additionalAnimateMarks.some(e=>{var t;return((t=e==null?void 0:e.animate)===null||t===void 0?void 0:t.isAnimating())||!1})}animate(){return this.isEnabled?(this._view.traverseMarkTree(e=>{e.isUpdated&&e.animate&&e.animate.animate(),e.cleanExitElements(),e.isUpdated=!1},null,!0),this):this}animateAddition(e){var t;const n=(t=e.animate)===null||t===void 0?void 0:t.animate();return n&&n.isAnimating()&&this._additionalAnimateMarks.push(e),this}release(){this._additionalAnimateMarks=[],this._animations=[],this._view.removeEventListener(Ee.ALL_ANIMATION_START,this._onAnimationStart),this._view.removeEventListener(Ee.ALL_ANIMATION_END,this._onAnimationEnd),this._view=null}}class Kpt{initAnimate(e){return this.animate=new Gpt(e),this.animate}}const Xpt=()=>{Yt(Kd,Kpt)},Wle=(i,e)=>{if(!i)return null;if(i.from){const t=i.from,n=Object.keys(t);n.forEach(r=>{B(t[r])&&delete t[r]});const s=pT(n,e.mark.markType)&&!F(t.segments);if(s){const r=e.items.map(a=>Object.assign({},a,{nextAttrs:Object.assign({},t)}));i.from=e.transformElementItems(r,e.mark.markType,s)}}if(i.to){const t=i.to,n=Object.keys(t);n.forEach(r=>{B(t[r])&&delete t[r]});const s=pT(n,e.mark.markType)&&!F(t.segments);if(s){const r=e.items.map(a=>Object.assign({},a,{nextAttrs:Object.assign({},t)}));i.to=e.transformElementItems(r,e.mark.markType,s)}}return i};function Ypt(i,e,t,n){const s=ee(e.options)?e.options.call(null,i.getDatum(),i,n):e.options;if(!e.type||!Q.getAnimationType(e.type))return null;const r=Q.getAnimationType(e.type)(i,s,t);return Wle(r,i)}const bK=(i,e,t,n,s)=>ee(t)?t(i.getDatum(),i,s):t;function qpt(i,e,t,n){const s=e.channel;let r=null;return ie(s)?r=s.reduce((a,o)=>(a.from[o]=i.getGraphicAttribute(o,!0),a.to[o]=i.getGraphicAttribute(o,!1),a),{from:{},to:{}}):Ke(s)&&(r=Object.keys(s).reduce((a,o)=>{var l,c;const u=!B((l=s[o])===null||l===void 0?void 0:l.from),h=!B((c=s[o])===null||c===void 0?void 0:c.to);return(u||h)&&(a.from[o]=u?bK(i,0,s[o].from,0,n):void 0,a.to[o]=h?bK(i,0,s[o].to,0,n):i.getGraphicAttribute(o,!1)),a},{from:{},to:{}})),Wle(r,i)}class Zpt extends Ba{constructor(e,t,n,s,r){super(e,t,n,s,r),this._interpolator=r==null?void 0:r.interpolator,this._element=r==null?void 0:r.element}onBind(){var e,t;this.from=(e=this.from)!==null&&e!==void 0?e:{},this.to=(t=this.to)!==null&&t!==void 0?t:{}}getEndProps(){return this.to}onUpdate(e,t,n){this._interpolator&&this._element&&this._interpolator.call(this,t,this.from,this.to,n,this._element.getDatum(),this._element,this.params.parameters)}}class Jpt extends Ba{getEndProps(){return this.to}onBind(){var e;const t=(e=this.target.constructor.NOWORK_ANIMATE_ATTR)!==null&&e!==void 0?e:Ls,n=Object.keys(t).filter(o=>t[o]!==0);this.subAnimate.animate.preventAttrs(n);const s=Object.assign({},this.from),r=Object.assign({},this.to),a=[];Object.keys(r).forEach(o=>{n.includes(o)?(s[o]=r[o],this.from[o]=r[o]):B(s[o])?s[o]=this.target.getComputedAttribute(o):a.push(o)}),this.target.animates.forEach(o=>{o!==this.subAnimate.animate&&o.preventAttrs(a)}),this._fromAttribute=s,this._toAttribute=r}onStart(){if(this._fromAttribute){const e={};Object.keys(this._fromAttribute).forEach(t=>{this.subAnimate.animate.validAttr(t)&&(e[t]=this._fromAttribute[t])}),this.target.setAttributes(e,!1,{type:pn.ANIMATE_UPDATE,animationState:{ratio:0,end:!1}})}}onEnd(){if(this._toAttribute){const e={};Object.keys(this._toAttribute).forEach(t=>{this.subAnimate.animate.validAttr(t)&&(e[t]=this._toAttribute[t])}),this.target.setAttributes(e,!1,{type:pn.ANIMATE_END})}}update(e,t,n){this.updateCount===0&&this.onFirstRun(),this.updateCount+=1;const s=this.step.getLastProps();Object.keys(s).forEach(r=>{this.subAnimate.animate.validAttr(r)&&(n[r]=s[r])}),this.onUpdate(e,t,n),e&&this.onEnd()}onUpdate(e,t,n){this.target.stepInterpolate(this.subAnimate,this.subAnimate.animate,n,this.step,t,e,this._toAttribute,this._fromAttribute)}}UA.mode|=xy.SET_ATTR_IMMEDIATELY;let Qpt=0;const xK=i=>{var e;if(B(i)||B(i.prototype))return!1;const t=(e=i.prototype)!==null&&e!==void 0?e:{};return t instanceof Ba||"onBind"in t&&"onStart"in t&&"onEnd"in t&&"onUpdate"in t};class eft{constructor(e,t,n){this.id=Qpt++,this.isAnimating=!1,this.runnings=[],this.element=e,this.animationOptions=n,this.unit=t}callback(e){return this.callbackFunction=e,this}animate(e,t){return this.isAnimating=!0,this.animateElement(e,t),this.runnings.length===0&&this.animationEnd(),this}stop(e="end",t=!0){return this.runnings.forEach(n=>n.stop(e)),this.animationEnd(t),this}pause(){return this.runnings.forEach(e=>e.pause()),this}resume(){return this.runnings.forEach(e=>e.resume()),this}startAt(e){return this.runnings.forEach(t=>{const n=this.unit.initialDelay;t.startAt(n+e)}),this}getTotalAnimationTime(){var e;const t=this.unit.initialDelay+this.unit.loopDuration*this.unit.loopCount;return(e=this.unit.totalTime)!==null&&e!==void 0?e:t}getEndAttributes(){return this.runnings.reduce((e,t)=>Object.assign(e,t.getEndProps()),{})}animationEnd(e=!0){var t;this.isAnimating=!1,this.runnings=null,e&&((t=this.callbackFunction)===null||t===void 0||t.call(null))}animateElement(e,t){const n=this.element.getGraphicItem();if(!n)return;const s=n.animate();this.runnings.push(s),s.startAt(this.unit.initialDelay),s.wait(this.unit.loopDelay),this.unit.timeSlices.forEach(r=>{this.animateTimeSlice(s,r,e,t)}),s.wait(this.unit.loopDelayAfter),s.loop(this.unit.loopCount-1),Z(this.unit.totalTime)&&setTimeout(()=>{s&&s.stop("end")},this.unit.totalTime),s.onEnd(()=>{this.runnings=this.runnings.filter(r=>r!==s),this.runnings.length===0&&this.animationEnd()})}animateTimeSlice(e,t,n,s){const r=t.delay,a=t.delayAfter,o=t.duration,l=t.effects;if(r>0&&e.wait(r),l.length<0)e.wait(o);else{const c=l.map((u,h)=>{var d;const p=(d=u.type?Ypt(this.element,u,n,s):u.channel?qpt(this.element,u,n,s):void 0)!==null&&d!==void 0?d:{},f=p.custom||(u==null?void 0:u.custom),g=(p==null?void 0:p.customParameters)||(u==null?void 0:u.customParameters);p.from&&Object.keys(p.from).length&&this.unit&&this.animationOptions.timeline.controlOptions.immediatelyApply&&this.element.mark.markType!=="component"&&this.element.getGraphicItem().setAttributes(p.from);const m=xK(f);return!B(f)&&!xK(f)?new Zpt(p.from,p.to,o,u.easing,{interpolator:f,element:this.element,parameters:g}):m?new f(p.from,p.to,o,u.easing,g):p.to?new Jpt(p.from,p.to,o,u.easing):void 0}).filter(u=>!B(u));c.length===1?e.play(c[0]):c.length>1&&e.play(new iZe(o,c))}a>0&&e.wait(a)}}function tft(i){var e,t,n,s,r,a,o,l,c,u,h,d;if(B(i.timeSlices)){const f=i;return{startTime:(e=f.startTime)!==null&&e!==void 0?e:lK,totalTime:f.totalTime,oneByOne:(t=f.oneByOne)!==null&&t!==void 0?t:dB,loop:(n=f.loop)!==null&&n!==void 0?n:uK,controlOptions:se({},hK,(s=f.controlOptions)!==null&&s!==void 0?s:{}),timeSlices:[{duration:(r=f.duration)!==null&&r!==void 0?r:hle,delay:(a=f.delay)!==null&&a!==void 0?a:hB,delayAfter:(o=f.delayAfter)!==null&&o!==void 0?o:cK,effects:[{type:f.type,channel:f.channel,custom:f.custom,easing:(l=f.easing)!==null&&l!==void 0?l:pB,customParameters:f.customParameters,options:f.options}]}]}}const p=q(i.timeSlices).filter(f=>f.effects&&q(f.effects).filter(g=>g.channel||g.type).length);if(p.length)return{startTime:(c=i.startTime)!==null&&c!==void 0?c:lK,totalTime:i.totalTime,oneByOne:(u=i.oneByOne)!==null&&u!==void 0?u:dB,loop:(h=i.loop)!==null&&h!==void 0?h:uK,controlOptions:se({},hK,(d=i.controlOptions)!==null&&d!==void 0?d:{}),timeSlices:p.map(f=>{var g,m;return{duration:f.duration,delay:(g=f.delay)!==null&&g!==void 0?g:hB,delayAfter:(m=f.delayAfter)!==null&&m!==void 0?m:cK,effects:q(f.effects).filter(y=>y.channel||y.type).map(y=>{var b;return{type:y.type,channel:y.channel,custom:y.custom,easing:(b=y.easing)!==null&&b!==void 0?b:pB,customParameters:y.customParameters,options:y.options}})}}),partitioner:i.partitioner,sort:i.sort}}function SK(i){let e=[];return Object.keys(i).forEach(t=>{e=e.concat(Gle(t,i[t]))}),e}function Gle(i,e,t=0){const n=[];let s=t;return q(e).forEach(r=>{var a;const o=tft(r);o&&(n.push({state:i,id:(a=o.id)!==null&&a!==void 0?a:`${i}-${s}`,timeline:o,originConfig:r}),s+=1)}),n}function oh(i,e,t){return ee(i)?i.call(null,e.getDatum(),e,t):i}class CK{constructor(e){this.parallelArrangers=[this],this.totalTime=0,this.startTime=0,this.endTime=0,this.animators=e.filter(t=>!B(t)),this.totalTime=this.animators.reduce((t,n)=>Math.max(t,n.getTotalAnimationTime()),0)}parallel(e){const t=Array.from(new Set(this.parallelArrangers.concat(e.parallelArrangers)));return t.forEach(n=>{n.parallelArrangers=t}),this.arrangeTime(),this}after(e){return this.afterArranger=e,this.arrangeTime(),this}arrangeTime(){const e=this.parallelArrangers.reduce((n,s)=>Math.max(n,s.totalTime),this.totalTime),t=this.parallelArrangers.reduce((n,s)=>{var r,a;return Math.max(n,(a=(r=s.afterArranger)===null||r===void 0?void 0:r.endTime)!==null&&a!==void 0?a:0)},0);this.parallelArrangers.forEach(n=>{n.startTime=t,n.endTime=t+e,n.animators.forEach(s=>{s.startAt(t)})})}}class wK{constructor(e,t){this.state=null,this.immediateConfigs=[],this.isEnabled=!0,this.disabledStates=[],this.animators=new Map,this.elementRecorder=new WeakMap,this.timelineCount={},this.mark=e,this.configs=SK(t??{})}getAnimationConfigs(e){var t;return this.isEnabled?((t=this.configs)!==null&&t!==void 0?t:[]).filter(n=>n.state===e):[]}updateConfig(e){this.configs=SK(e??{})}updateState(e){this.state=e}animate(){if(!this.isEnabled||!this.configs||!this.configs.length)return;const e=this.mark.getAllElements(),t=this.mark.parameters();return e.forEach(n=>{var s;n.isReserved&&n.diffState!==Ft.exit&&(n.isReserved=!1);const r=(s=this.elementRecorder.get(n))===null||s===void 0?void 0:s.prevState;this.configs.some(a=>r!==n.diffState&&a.state===r&&a.timeline.controlOptions.stopWhenStateChange)&&this.clearElementAnimation(n,!1)}),this.configs.forEach(n=>{this.animateByTimeline(n,e,t)}),this.mark.cleanExitElements(),this}runAnimationByState(e){if(!this.isEnabled)return;const t=this.configs.filter(a=>a.state===e),n=this.mark.getAllElements(),s=this.mark.parameters(),r=t.reduce((a,o)=>a.concat(this.animateByTimeline(o,n,s,!0)),[]);return new CK(r)}stopAnimationByState(e){const t=this.animators.get(e);return t&&t.forEach(n=>n.stop()),this}pauseAnimationByState(e){const t=this.animators.get(e);return t&&t.forEach(n=>n.pause()),this}resumeAnimationByState(e){const t=this.animators.get(e);return t&&t.forEach(n=>n.resume()),this}run(e){if(!this.isEnabled)return;const t=Gle(oK,e,this.immediateConfigs.length);this.immediateConfigs=this.immediateConfigs.concat(t);const n=this.mark.getAllElements(),s=this.mark.parameters(),r=t.reduce((a,o)=>a.concat(this.animateByTimeline(o,n,s,!0)),[]);return new CK(r)}stop(){return this.animators.forEach(e=>{e.forEach(t=>t.stop())}),this}pause(){return this.animators.forEach(e=>e.forEach(t=>t.pause())),this}resume(){return this.animators.forEach(e=>e.forEach(t=>t.resume())),this}reverse(){return this}restart(){return this}record(){return this}recordEnd(){return this}isAnimating(){let e=!1;return this.animators.forEach(t=>{e=e||t.some(n=>n.isAnimating)}),e}isElementAnimating(e){var t;const n=(t=this.elementRecorder.get(e))===null||t===void 0?void 0:t.count;return B(n)||Object.values(n).every(s=>s===0)}getAnimatorCount(){let e=0;return this.animators.forEach(t=>e+=t.length),e}getAllAnimators(){const e=[];return this.animators.forEach(t=>{e.push(...t)}),e}getElementAnimators(e,t){var n;const s=q(e);let r=[];return t?r=(n=this.animators.get(t))!==null&&n!==void 0?n:[]:this.animators.forEach(a=>{r=r.concat(a)}),r.filter(a=>s.includes(a.element))}enable(){return this.isEnabled=!0,this}disable(){return this.isEnabled=!1,this.stop(),this.animators.clear(),this}enableAnimationState(e){const t=q(e);return this.disabledStates=this.disabledStates.filter(n=>!t.includes(n)),this}disableAnimationState(e){const t=q(e);return this.disabledStates=this.disabledStates.concat(t),this}release(){this.stop(),this.animators.clear(),this.configs=null,this.animators=null,this.elementRecorder=null,this.timelineCount=null}animateByTimeline(e,t,n,s=!1){var r;const a=[],o=t.filter(l=>{const c=!(l.isReserved&&l.diffState===Ft.exit),u=this.getAnimationState(l),h=!this.disabledStates.includes(u),d=s||u===e.state,p=!e.timeline.partitioner||e.timeline.partitioner(l.getDatum(),l,n);return c&&h&&d&&p});if(o.length){B(this.timelineCount[e.id])&&(this.timelineCount[e.id]=0),e.timeline.sort&&o.sort((c,u)=>e.timeline.sort(c.getDatum(),u.getDatum(),c,u,n));const l={width:this.mark.view.width(),height:this.mark.view.height(),group:(r=this.mark.group)!==null&&r!==void 0?r:null,mark:this.mark,view:this.mark.view,elementCount:o.length,elementIndex:0};o.forEach((c,u)=>{l.elementIndex=u;const h=Object.assign({[eut]:l},n),d=this.getAnimationUnit(e.timeline,c,u,o.length,h);a.push(this.animateElement(e,d,c,l,h))})}return a}animateElement(e,t,n,s,r){var a,o;const l=new eft(n,t,e);if(l.animate(s,r),!l.isAnimating)return;n.diffState===Ft.exit&&(n.isReserved=!0);const c=this.timelineCount[e.id]===0;this.timelineCount[e.id]+=1;const u=(a=this.elementRecorder.get(n))!==null&&a!==void 0?a:{prevState:e.state,count:{}};u.prevState=e.state,u.count[e.state]=((o=u.count[e.state])!==null&&o!==void 0?o:0)+1,this.elementRecorder.set(n,u);const h=this.animators.get(e.state);h?h.push(l):this.animators.set(e.state,[l]),l.callback(()=>{this.handleAnimatorEnd(l)});const d={mark:this.mark,animationState:e.state,animationConfig:e.originConfig};return c&&this.mark.emit(Ee.ANIMATION_START,d),this.mark.emit(Ee.ELEMENT_ANIMATION_START,d,n),l}getAnimationState(e){const t=Xn(this.state,this.mark.parameters(),e.getDatum(),e);return t??e.diffState}getAnimationUnit(e,t,n,s,r){const a=[],o=oh(e.startTime,t,r),l=oh(e.totalTime,t,r),c=oh(e.oneByOne,t,r),u=oh(e.loop,t,r);let h=0;e.timeSlices.forEach(p=>{var f;const g=oh(p.delay,t,r),m=oh(p.delayAfter,t,r),y=(f=oh(p.duration,t,r))!==null&&f!==void 0?f:l/s,b=q(p.effects).map(x=>Object.assign({},x,{customParameters:oh(x.customParameters,t,r)}));a.push({effects:b,duration:y,delay:g,delayAfter:m}),h+=g+y+m});const d=ye(c)?c:c===!0?h:0;return{initialDelay:o,loopCount:ye(u)?u:u===!0?1/0:1,loopDelay:d*n,loopDelayAfter:d*(s-n-1),loopAnimateDuration:h,loopDuration:h+d*(s-1),totalTime:l,timeSlices:a}}clearElementAnimation(e,t=!0){this.animators.forEach(n=>{n.forEach(s=>{s.element===e&&(s.animationOptions.state===Ft.exit?s.stop("start",!1):s.stop("end",!1),this.handleAnimatorEnd(s,t))})}),this.elementRecorder.delete(e)}clearAllElements(){const e=this.mark.getAllElements();e&&e.forEach((t,n)=>{this.clearElement(t,n===e.length-1)})}clearElement(e,t=!0){this.clearElementAnimation(e),e.getGraphicItem()&&(e.clearGraphicAttributes(),e.diffState===Ft.exit&&(e.isReserved=!1),t&&this.mark.cleanExitElements())}handleAnimatorEnd(e,t=!0){const n=e.element,s=e.animationOptions,r=s.state,a=r===oK,o=this.elementRecorder.get(n).count;o[r]-=1,this.animators.set(r,this.animators.get(r).filter(h=>h!==e)),this.animators.get(r).length===0&&this.animators.delete(r),this.timelineCount[s.id]-=1;const l=this.timelineCount[s.id]===0,c=a?this.immediateConfigs.find(h=>h.id===s.id).originConfig:this.configs.find(h=>h.id===s.id).originConfig;l&&(delete this.timelineCount[s.id],a&&(this.immediateConfigs=this.immediateConfigs.filter(h=>h.id!==s.id))),t&&(Object.keys(this.timelineCount).length===0?this.clearAllElements():r===Ft.exit&&o[Ft.exit]===0&&this.clearElement(n));const u={mark:this.mark,animationState:r,animationConfig:c};l&&this.mark.emit(Ee.ANIMATION_END,u),this.mark.emit(Ee.ELEMENT_ANIMATION_END,u,n)}}class ift{constructor(){this.animate=new wK(this,{})}initAnimate(e){this.animate||(this.animate=new wK(this,e.animation),this.needAnimate()&&this.animate.updateState(e.animationState))}reuseAnimate(e){this.animate=e.animate,this.animate.mark=this}updateAnimate(e){e.animation&&this.animate.updateConfig(e.animation),this.animate.updateState(e.animationState)}}const nft=()=>{Yt(tg,ift)},sft=()=>{Q.registerStageEventPlugin("gesture",Ait)},rft=()=>{Xpt(),nft()},aft=["pointerdown","pointerup","pointerupoutside","pointertap","pointerover","pointermove","pointerenter","pointerleave","pointerout","mousedown","mouseup","mouseupoutside","rightdown","rightup","rightupoutside","click","dblclick","mousemove","mouseover","mouseout","mouseenter","mouseleave","wheel","touchstart","touchend","touchendoutside","touchmove","touchcancel","tap","dragstart","drag","dragenter","dragleave","dragover","dragend","drop","pan","panstart","panend","press","pressup","pressend","pinch","pinchstart","pinchend","swipe"];var ke;(function(i){i.initialized="initialized",i.rendered="rendered",i.renderFinished="renderFinished",i.animationFinished="animationFinished",i.regionSeriesDataFilterOver="regionSeriesDataFilterOver",i.afterInitData="afterInitData",i.afterInitEvent="afterInitEvent",i.afterInitMark="afterInitMark",i.rawDataUpdate="rawDataUpdate",i.viewDataFilterOver="viewDataFilterOver",i.viewDataUpdate="viewDataUpdate",i.viewDataStatisticsUpdate="viewDataStatisticsUpdate",i.markDeltaYUpdate="markDeltaYUpdate",i.viewDataLabelUpdate="viewDataLabelUpdate",i.scaleDomainUpdate="scaleDomainUpdate",i.scaleUpdate="scaleUpdate",i.dataZoomChange="dataZoomChange",i.drill="drill",i.layoutStart="layoutStart",i.layoutEnd="layoutEnd",i.layoutRectUpdate="layoutRectUpdate",i.playerPlay="playerPlay",i.playerPause="playerPause",i.playerEnd="playerEnd",i.playerChange="playerChange",i.playerForward="playerForward",i.playerBackward="playerBackward",i.scrollBarChange="scrollBarChange",i.brushStart="brushStart",i.brushChange="brushChange",i.brushEnd="brushEnd",i.brushClear="brushClear",i.legendSelectedDataChange="legendSelectedDataChange",i.legendFilter="legendFilter",i.legendItemClick="legendItemClick",i.legendItemHover="legendItemHover",i.legendItemUnHover="legendItemUnHover",i.tooltipShow="tooltipShow",i.tooltipHide="tooltipHide",i.tooltipRelease="tooltipRelease",i.afterResize="afterResize",i.afterRender="afterRender",i.afterLayout="afterLayout"})(ke||(ke={}));var wt;(function(i){i.chart="chart",i.window="window",i.canvas="canvas"})(wt||(wt={}));var pi;(function(i){i.vchart="vchart",i.chart="chart",i.model="model",i.mark="mark"})(pi||(pi={}));const oft=(i,e,t)=>i.x>=e.x&&i.x<=t.x&&i.y>=e.y&&i.y<=t.y,lft=(i,e,t)=>{const n=i.getRegionsInIds(q(e.layout.layoutBindRegionID));return n==null?void 0:n.some(s=>{const r=s.getLayoutRect(),a=s.getLayoutStartPoint();return oft(t,{x:a.x,y:a.y},{x:r.width+a.x,y:r.height+a.y})})},Kle=(i,e)=>{var t,n;return i===e||!B(i)&&!B(e)&&i.value===e.value&&((t=i.axis)===null||t===void 0?void 0:t.id)===((n=e.axis)===null||n===void 0?void 0:n.id)},gB=(i,e,t,n)=>{var s;const r=e.getScale(),a=ys(r.type),o=[],l=e.getOption().getChart().getSeriesInIndex(e.getSpecInfo().seriesIndexes);for(const c of l)if(c.coordinate===t){const u=q(n(c)),h=(s=c.getViewData())===null||s===void 0?void 0:s.latestData;if(u&&h)if(a){const d=[],p=[];h.forEach((f,g)=>{var m;((m=f[u[0]])===null||m===void 0?void 0:m.toString())===(i==null?void 0:i.toString())&&(d.push(f),p.push(g))}),o.push({series:c,datum:d,key:WI(c,p)})}else if(F(u[1])){const d=[],p=[];h.forEach((f,g)=>{var m;(((m=f[u[0]])===null||m===void 0?void 0:m.toString())===(i==null?void 0:i.toString())||F(f[u[0]])&&F(f[u[1]])&&i>=f[u[0]]&&i<f[u[1]])&&(d.push(f),p.push(g))}),o.push({series:c,datum:d,key:WI(c,p)})}else{const d=e.getSpec().tooltipFilterRange,p=Z(d)?[-d,d]:d;let f=[],g=[];if(p)h.forEach((m,y)=>{if(F(m[u[0]])){const b=m[u[0]]-i;b>=p[0]&&b<=p[1]&&(f.push(m),g.push(y))}});else{let m=1/0,y=0;h.forEach((b,x)=>{if(F(b[u[0]])){const S=Math.abs(b[u[0]]-i),C=Math.sign(b[u[0]]-i);S<m?(m=S,f=[b],g=[x],y=C):S===m&&C===y&&(f.push(b),g.push(x))}})}o.push({series:c,datum:f,key:WI(c,g)})}}return o},WI=(i,e)=>`${i.id}_${e.join("_")}`,_T=(i,e,t)=>{const n=i.getAllComponents().filter(s=>s.specKey==="axes"&&e(s)&&lft(i,s,t));return n.length?n:null},cft=(i,e)=>{const t=2*Math.PI,n=Mn(e),s=an(e);return i<n?i+=Math.ceil((n-i)/t)*t:i>s&&(i-=Math.ceil((i-s)/t)*t),i},Xle=(i,e)=>{if(!i)return null;const t=_T(i,l=>l.getOrient()==="angle",e),n=_T(i,l=>l.getOrient()==="radius",e);if(!(t&&t.length||n&&n.length))return null;const s=[],r=l=>l.getDimensionField()[0],{x:a,y:o}=e;return t&&t.forEach(l=>{var c;const u=l.getScale();if(u&&ys(u.type)){const h=u.domain(),d=u.range(),p=l.getCenter(),f={x:a-l.getLayoutStartPoint().x-p.x,y:o-l.getLayoutStartPoint().y-p.y};let g=DG({x:1,y:0},f);g=cft(g,d);const m=oT(f),y=(c=n[0])===null||c===void 0?void 0:c.getScale(),b=y==null?void 0:y.range();if((g-(d==null?void 0:d[0]))*(g-(d==null?void 0:d[1]))>0||(m-(b==null?void 0:b[0]))*(m-(b==null?void 0:b[1]))>0)return;const x=l.invert(g);if(B(x))return;let S=h.findIndex(w=>(w==null?void 0:w.toString())===x.toString());S<0&&(S=void 0);const C=gB(x,l,"polar",r);s.push({index:S,value:x,position:u.scale(x),axis:l,data:C})}}),n&&n.forEach(l=>{var c;const u=l.getScale(),h=u==null?void 0:u.range();if(u&&ys(u.type)){const d=l.getCenter(),p={x:a-l.getLayoutStartPoint().x-d.x,y:o-l.getLayoutStartPoint().y-d.y};let f=DG({x:1,y:0},p);f<-Math.PI/2&&(f=2*Math.PI+f);const g=oT(p),m=(c=t[0])===null||c===void 0?void 0:c.getScale(),y=m==null?void 0:m.range();if((f-(y==null?void 0:y[0]))*(f-(y==null?void 0:y[1]))>0||(g-(h==null?void 0:h[0]))*(g-(h==null?void 0:h[1]))>0)return;const b=u.invert(g);if(B(b))return;let x=u.domain().findIndex(C=>(C==null?void 0:C.toString())===b.toString());x<0&&(x=void 0);const S=gB(b,l,"polar",r);s.push({index:x,value:b,position:u.scale(b),axis:l,data:S})}}),s.length?s:null};function Ti(i){return i==="bottom"||i==="top"}function tc(i){return i==="left"||i==="right"}function Xc(i){return i==="z"}function uft(i,e){return e?Ti(i)?"linear":"band":Ti(i)?"band":"linear"}function _p(i,e){return r4(i.orient)||e&&e.includes(i.orient)?i.orient:"left"}function Yle(i){return i==="top"||i==="bottom"?"horizontal":"vertical"}function hft(i,e){let t=i.inverse;return e&&!Ti(i.orient)&&(t=!F(i.inverse)||!i.inverse),t}function AK(i,e){var t;const n=(t=i.type)!==null&&t!==void 0?t:uft(i.orient,e);return{axisType:n,componentName:`${oe.cartesianAxis}-${n}`}}const qle=i=>i.fieldX[0],Zle=i=>i.fieldY[0],dft=i=>{var e;return[i.fieldX[0],(e=i.fieldX2)!==null&&e!==void 0?e:i.fieldX[1]]},pft=i=>{var e;return[i.fieldY[0],(e=i.fieldY2)!==null&&e!==void 0?e:i.fieldY[1]]},kK=(i,e)=>i?e?qle:dft:e?Zle:pft,Jle=(i,e,t)=>{var n,s;if(!i)return null;const{x:r,y:a}=e,o=(n=_T(i,f=>Ti(f.getOrient()),e))!==null&&n!==void 0?n:[],l=(s=_T(i,f=>tc(f.getOrient()),e))!==null&&s!==void 0?s:[];if(!o.length&&!l.length)return null;const c=new Set,u=new Set,h=new Set;[o,l].forEach(f=>f.forEach(g=>{ys(g.getScale().type)?c.add(g):u.add(g),t&&g.getSpec().hasDimensionTooltip&&h.add(g)}));const d=[],p=f=>{const g=f==="x",m=g?r:a;(g?o:l).forEach(y=>{if(h.size>0){if(h.has(y)){const b=TK(y,m,kK(g,ys(y.getScale().type)));b&&d.push(b)}}else{const b=c.size>0;if((b?c:u).has(y)){const x=TK(y,m,kK(g,b));x&&d.push(x)}}})};return i.getSpec().direction==="horizontal"?(p("y"),d.length===0&&p("x")):(p("x"),d.length===0&&p("y")),d.length?d:null},TK=(i,e,t)=>{const n=i.positionToData(e,!0);return B(n)?null:Qle(i,n,t)},Qle=(i,e,t)=>{const n=i.getScale();if(B(e))return null;let s=n.domain().findIndex(a=>(a==null?void 0:a.toString())===e.toString());s<0&&(s=void 0);const r=gB(e,i,"cartesian",t??(Ti(i.getOrient())?qle:Zle));return{index:s,value:e,position:n.scale(e),axis:i,data:r}};class ece{constructor(e,t){this._eventDispatcher=e,this._mode=t}get chart(){var e,t;return this._chart||(this._chart=(t=(e=this._eventDispatcher.globalInstance).getChart)===null||t===void 0?void 0:t.call(e)),this._chart}register(e,t){var n,s;((s=(n=this.chart)===null||n===void 0?void 0:n.getOption().onError)!==null&&s!==void 0?s:t1)("Method not implemented.")}unregister(){var e,t;((t=(e=this.chart)===null||e===void 0?void 0:e.getOption().onError)!==null&&t!==void 0?t:t1)("Method not implemented.")}getTargetDimensionInfo(e,t){var n,s;const r=(n=Jle(this.chart,{x:e,y:t}))!==null&&n!==void 0?n:[],a=(s=Xle(this.chart,{x:e,y:t}))!==null&&s!==void 0?s:[],o=[].concat(r,a);return o.length===0?null:o}dispatch(e,t){var n;const s=(n=this.chart)===null||n===void 0?void 0:n.getAllComponents().filter(l=>l.specKey==="axes"&&(!(t!=null&&t.filter)||t.filter(l))),r=s.filter(l=>{const c=l.getScale();return ys(c.type)}),a=r.length?r:s.filter(l=>{const c=l.getOrient();return Ti(c)||c==="angle"}),o=[];return a.forEach(l=>{const c=Qle(l,e);c&&o.push(c)}),this._callback.call(null,{action:"enter",dimensionInfo:o}),o}}class fft extends ece{constructor(){super(...arguments),this.onClick=e=>{if(!e)return;const t=e.event.viewX,n=e.event.viewY,s=this.getTargetDimensionInfo(t,n);s&&this._callback.call(null,Object.assign(Object.assign({},e),{action:"click",dimensionInfo:s.slice()}))}}register(e,t){this._callback=t.callback,this._eventDispatcher.register("pointertap",{query:Object.assign(Object.assign({},t.query),{source:wt.chart}),callback:this.onClick})}unregister(){this._eventDispatcher.unregister("pointertap",{query:null,callback:this.onClick})}}class gft extends ece{constructor(){super(...arguments),this._cacheDimensionInfo=null,this.onMouseMove=e=>{if(!e)return;const t=e.event.viewX,n=e.event.viewY,s=this.getTargetDimensionInfo(t,n);s===null&&this._cacheDimensionInfo!==null?(this._callback.call(null,Object.assign(Object.assign({},e),{action:"leave",dimensionInfo:this._cacheDimensionInfo.slice()})),this._cacheDimensionInfo=s):s===null||this._cacheDimensionInfo!==null&&s.length===this._cacheDimensionInfo.length&&!s.some((r,a)=>!Kle(r,this._cacheDimensionInfo[a]))?s!==null&&this._callback.call(null,Object.assign(Object.assign({},e),{action:"move",dimensionInfo:s.slice()})):(this._callback.call(null,Object.assign(Object.assign({},e),{action:"enter",dimensionInfo:s.slice()})),this._cacheDimensionInfo=s)},this.onMouseOut=e=>{e&&(this._callback.call(null,Object.assign(Object.assign({},e),{action:"leave",dimensionInfo:this._cacheDimensionInfo?this._cacheDimensionInfo.slice():[]})),this._cacheDimensionInfo=null)}}register(e,t){this._callback=t.callback,this._eventDispatcher.register("pointermove",{query:Object.assign(Object.assign({},t.query),{source:wt.chart}),callback:this.onMouseMove}),this._eventDispatcher.register("pointerout",{query:Object.assign(Object.assign({},t.query),{source:wt.canvas}),callback:this.onMouseOut}),Pd(this._mode)&&this._eventDispatcher.register("pointerdown",{query:Object.assign(Object.assign({},t.query),{source:wt.chart}),callback:this.onMouseMove})}unregister(){this._eventDispatcher.unregister("pointermove",{query:null,callback:this.onMouseMove}),Pd(this._mode)&&this._eventDispatcher.unregister("pointerdown",{query:null,callback:this.onMouseMove})}}var Bu;(function(i){i.dimensionHover="dimensionHover",i.dimensionClick="dimensionClick"})(Bu||(Bu={}));const GI={[Bu.dimensionHover]:gft,[Bu.dimensionClick]:fft};let wO=class{getComposedEventMap(){return this._composedEventMap}constructor(e,t){this._composedEventMap=new Map,this._eventDispatcher=e,this._mode=t}on(e,t,n){const s=typeof t=="function"?{query:null,callback:t}:{query:t,callback:n};if(GI[e]){const r=new GI[e](this._eventDispatcher,this._mode);r.register(e,s),this._composedEventMap.set(n,{eventType:e,event:r})}else this._eventDispatcher.register(e,s);return this}off(e,t,n){var s,r;const a=n??t;if(GI[e])if(a)(s=this._composedEventMap.get(a))===null||s===void 0||s.event.unregister(),this._composedEventMap.delete(a);else for(const o of this._composedEventMap.entries())o[1].eventType===e&&((r=this._composedEventMap.get(o[0]))===null||r===void 0||r.event.unregister(),this._composedEventMap.delete(o[0]));else if(a){const o={callback:a,query:null,filter:{nodeName:null,type:e,level:null,source:t.source,markName:null,filter:null,userId:null}};this._eventDispatcher.unregister(e,o)}else this._eventDispatcher.unregister(e);return this}emit(e,t,n){return this._eventDispatcher.dispatch(e,t,n),this}prevent(e,t){return this._eventDispatcher.prevent(e,t),this}allow(e){return this._eventDispatcher.allow(e),this}release(){this._eventDispatcher.clear(),this._composedEventMap.clear()}};class mft{constructor(){this._map=new Map,this._levelNodes=new Map,this._levelNodes.set(pi.vchart,[]),this._levelNodes.set(pi.chart,[]),this._levelNodes.set(pi.model,[]),this._levelNodes.set(pi.mark,[])}addHandler(e,t){var n;const s={level:t,handler:e};return(n=this._levelNodes.get(t))===null||n===void 0||n.push(s),this._map.set(e.callback,s),this}removeHandler(e){const t=this._map.get(e.callback);if(!t)return this;this._map.delete(e.callback);const n=this._levelNodes.get(t.level),s=n==null?void 0:n.findIndex(r=>r.handler.callback===e.callback);return s!==void 0&&s>=0&&(n==null||n.splice(s,1)),this}preventHandler(e){return e&&(e.prevented=!0),this}allowHandler(e){return e&&(e.prevented=!1),this}getHandlers(e){var t;return((t=this._levelNodes.get(e))===null||t===void 0?void 0:t.map(n=>n.handler))||[]}getAllHandlers(){return Array.from(this._map.values()).map(e=>e.handler)||[]}getCount(){return this._map.size}release(){this._map.clear(),this._levelNodes.clear()}}const EK={cartesianAxis:"axis","cartesianAxis-band":"axis","cartesianAxis-linear":"axis","cartesianAxis-time":"axis",polarAxis:"axis","polarAxis-band":"axis","polarAxis-linear":"axis",discreteLegend:"legend",continuousLegend:"legend",colorLegend:"legend",sizeLegend:"legend"};class yft{constructor(e,t){this._viewBubbles=new Map,this._windowBubbles=new Map,this._canvasBubbles=new Map,this._viewListeners=new Map,this._windowListeners=new Map,this._canvasListeners=new Map,this._onDelegate=n=>{var s;const r=this.globalInstance.getChart(),a=F(n.modelId)&&(r==null?void 0:r.getModelById(n.modelId))||void 0,o=F(n.markId)&&(r==null?void 0:r.getMarkById(n.markId))||null,l=new Map;let c=(s=n.item)===null||s===void 0?void 0:s.mark;for(c&&F(c.id())&&l.set(c.id(),n.item);c!=null&&c.elements;){const h=c.id();F(h)&&!l.has(h)&&l.set(h,c.elements[0]),c=c.group}const u={event:n.event,item:n.item,datum:n.datum,source:n.source,itemMap:l,chart:r,model:a,mark:o??void 0,node:et(n.event,"target")};this.dispatch(n.type,u)},this._onDelegateInteractionEvent=n=>{const s=this.globalInstance.getChart(),r=n.event;let a=null;r.elements&&(a=r.elements);const o={event:n.event,chart:s,items:a,datums:a&&a.map(l=>l.getDatum())};this.dispatch(n.type,o)},this.globalInstance=e,this._compiler=t}register(e,t){var n,s,r,a,o;this._parseQuery(t);const l=this.getEventBubble(((n=t.filter)===null||n===void 0?void 0:n.source)||wt.chart),c=this.getEventListeners(((s=t.filter)===null||s===void 0?void 0:s.source)||wt.chart);if(l.get(e)||l.set(e,new mft),l.get(e).addHandler(t,(r=t.filter)===null||r===void 0?void 0:r.level),this._isValidEvent(e)&&!c.has(e)){const u=this._onDelegate.bind(this);this._compiler.addEventListener((a=t.filter)===null||a===void 0?void 0:a.source,e,u),c.set(e,u)}else if(this._isInteractionEvent(e)&&!c.has(e)){const u=this._onDelegateInteractionEvent.bind(this);this._compiler.addEventListener((o=t.filter)===null||o===void 0?void 0:o.source,e,u),c.set(e,u)}return this}unregister(e,t){var n,s,r,a;let o=!1;const l=this.getEventBubble(((n=t==null?void 0:t.filter)===null||n===void 0?void 0:n.source)||wt.chart),c=this.getEventListeners(((s=t==null?void 0:t.filter)===null||s===void 0?void 0:s.source)||wt.chart);if(t){const u=l.get(e);u==null||u.removeHandler(t),(u==null?void 0:u.getCount())===0&&(u==null||u.release(),l.delete(e),o=!0),!((r=t==null?void 0:t.wrappedCallback)===null||r===void 0)&&r.cancel&&t.wrappedCallback.cancel()}else{const u=l.get(e);u==null||u.release(),l.delete(e),o=!0}if(o&&this._isValidEvent(e)){const u=c.get(e);this._compiler.removeEventListener(((a=t==null?void 0:t.filter)===null||a===void 0?void 0:a.source)||wt.chart,e,u),c.delete(e)}return this}dispatch(e,t,n){const s=this.getEventBubble(t.source||wt.chart).get(e);if(!s)return this;let r=!1;if(n){const a=s.getHandlers(n);r=this._invoke(a,e,t)}else{const a=[pi.mark,pi.model,pi.chart,pi.vchart];let o=0;for(;!r&&o<a.length;)r=this._invoke(s.getHandlers(a[o]),e,t),o++}return this}prevent(e,t){return["canvas","chart","window"].forEach(n=>{const s=this.getEventBubble(n).get(e);s&&s.getAllHandlers().forEach(r=>{t&&r.callback===t||s.preventHandler(r)})}),this}allow(e){return["canvas","chart","window"].forEach(t=>{const n=this.getEventBubble(t).get(e);n&&n.getAllHandlers().forEach(s=>n.allowHandler(s))}),this}clear(){[wt.chart,wt.window,wt.canvas].forEach(e=>{const t=this.getEventListeners(e);for(const n of t.entries())this._compiler.removeEventListener(e,n[0],n[1]);t.clear()}),[this._viewBubbles,this._windowBubbles,this._canvasBubbles].forEach(e=>{for(const t of e.values())t.release();e.clear()})}release(){this.clear(),this.globalInstance=null,this._compiler=null}_filter(e,t,n){var s,r,a;if(ee(e.filter)&&!e.filter(n)||e.nodeName&&et(n,"node.name")!==e.nodeName||e.markName&&((s=n==null?void 0:n.mark)===null||s===void 0?void 0:s.name)!==e.markName)return!1;let o=(r=n.model)===null||r===void 0?void 0:r.type;return EK[o]&&(o=EK[o]),(!e.type||o===e.type)&&!(e.level==="mark"&&!e.type&&!(n!=null&&n.mark))&&!(e.level==="model"&&!e.type&&!(n!=null&&n.model))&&(!F(e.userId)||((a=n.model)===null||a===void 0?void 0:a.userId)===e.userId)}_prepareParams(e,t){if(e.markName&&t.mark&&t.itemMap){const n=t.mark.getProductId(),s=t.itemMap.get(n),r=s==null?void 0:s.getDatum();return Object.assign(Object.assign({},t),{item:s,datum:r})}return Object.assign({},t)}_invoke(e,t,n){return e.map(s=>{var r,a,o;const l=s.filter;if(!s.prevented&&(!s.query||this._filter(l,t,n))){const c=(s.wrappedCallback||s.callback).call(null,this._prepareParams(l,n)),u=c??((r=s.query)===null||r===void 0?void 0:r.consume);return u&&((a=n.event)===null||a===void 0||a.stopPropagation(),(o=n.event)===null||o===void 0||o.preventDefault()),!!u}}).some(s=>s===!0)}_getQueryLevel(e){return e?e.level?e.level:F(e.id)?pi.model:pi.vchart:pi.vchart}_parseQuery(e){var t;const n=e.query;n!=null&&n.throttle?e.wrappedCallback=Hu(e.callback,n.throttle):n!=null&&n.debounce&&(e.wrappedCallback=zd(e.callback,n.debounce));let s=this._getQueryLevel(n),r=null,a=wt.chart,o=null,l=null,c=null;return n!=null&&n.nodeName&&(o=n.nodeName),n!=null&&n.markName&&(l=n.markName),!(n!=null&&n.type)||s!==pi.model&&s!==pi.mark||(r=n.type),n!=null&&n.source&&(a=n.source),F(n==null?void 0:n.id)&&(c=n==null?void 0:n.id,s=pi.model),e.filter={level:s,markName:l,type:r,source:a,nodeName:o,userId:c,filter:(t=n==null?void 0:n.filter)!==null&&t!==void 0?t:null},e}getEventBubble(e){switch(e){case wt.chart:return this._viewBubbles;case wt.window:return this._windowBubbles;case wt.canvas:return this._canvasBubbles;default:return this._viewBubbles}}getEventListeners(e){switch(e){case wt.chart:return this._viewListeners;case wt.window:return this._windowListeners;case wt.canvas:return this._canvasListeners;default:return this._viewListeners}}_isValidEvent(e){return aft.includes(e)||Object.values(Ee).includes(e)}_isInteractionEvent(e){let t;return e&&(t=e.split(":")[0],t)&&Q.hasInteraction(t)}}function Fe(i,e,t){i.getTransform(e)||i.registerTransform(e,t)}function bu(i,e,t){i.getParser(e)||i.registerParser(e,t)}const Pf=new Map;let Ng;function _ft(){Ng||(Ng=new Td,bu(Ng,"geojson",ere),bu(Ng,"topojson",kYe),Fe(Ng,"simplify",lYe))}function vft(i,e,t={type:"geojson",centroid:!0}){Pf.has(i)&&Yr(`map type of '${i}' already exists, will be overwritten.`),_ft();const n=new Rt(Ng),s=se({},{centroid:!0,simplify:!1},t);t.type==="topojson"?n.parse(e,{type:"topojson",options:s}):n.parse(e,{type:"geojson",options:s});const{simplify:r}=t;r===!0?n.transform({type:"simplify"}):Ke(r)&&n.transform({type:"simplify",options:r}),Pf.set(i,n)}function bft(i){Pf.has(i)?Pf.delete(i):Yr(`map type of '${i}' does not exists.`)}function xft(i){return Pf.get(i)}function PK(i,e=!1){let t=e;return i.latestData instanceof Rt&&(t=!1),t?Ta(i.latestData):i.latestData&&i.latestData.slice()}const AO=(i,e)=>i.length===0?[]:i.length===1?PK(i[0],e==null?void 0:e.deep):i.map(t=>PK(t,e==null?void 0:e.deep));function mB(i,e,t){e=e instanceof Td?e:i.dataSet,Fe(e,"copyDataView",AO);const n=new Rt(e,t);return n.parse([i],{type:"dataview"}),n.transform({type:"copyDataView",level:Tl.copyDataView}),n}function x4(i,e,t=[]){var n;if(i instanceof Rt)return i;const{id:s,values:r=[],fromDataIndex:a,fromDataId:o,transforms:l=[]}=i,c=i.parser?Ta(i.parser):{clone:!0},u=Ta(i.fields);let h;c.clone=c.clone!==!1;const d=t.find(p=>p.name===s);if(d)h=d;else{const p={name:s};if(u&&(p.fields=u),h=new Rt(e,p),typeof o=="string"){const f=t.find(g=>g.name===o);if(!f)return Yr(`no data matches fromDataId ${o}`),null;h.parse([f],{type:"dataview"}),h.transform({type:"copyDataView"})}else if(typeof a=="number"){const f=t[a];if(!f)return Yr(`no data matches fromDataIndex ${a}`),null;h.parse([f],{type:"dataview"}),h.transform({type:"copyDataView"})}else Array.isArray(r)?h.parse(r,c):!be(r)||c&&!["csv","dsv","tsv"].includes(c.type)?(h.parse([]),Yr("values should be array")):h.parse(r,(n=c)!==null&&n!==void 0?n:{type:"csv"});l&&l.length&&l.forEach(f=>{e.getTransform(f.type)&&h.transform(f)})}return h}function S4(i,e,t){i&&(e.fields&&i.setFields(e.fields,t),i.parseNewData(e.values,e.parser))}var Tl;(function(i){i[i.copyDataView=-10]="copyDataView",i[i.treemapFilter=-8]="treemapFilter",i[i.treemapFlatten=-7]="treemapFlatten",i[i.dotObjFlat=-7]="dotObjFlat",i[i.linkDotInfo=-7]="linkDotInfo",i[i.sankeyLayout=-7]="sankeyLayout",i[i.dataZoomFilter=-6]="dataZoomFilter",i[i.legendFilter=-5]="legendFilter"})(Tl||(Tl={}));var wn;(function(i){i.appear="appear",i.disappear="disappear",i.enter="enter",i.update="update",i.state="state",i.exit="exit",i.normal="normal",i.none="none"})(wn||(wn={}));var cd;(function(i){i.data="data",i.signal="signal",i.mark="mark"})(cd||(cd={}));function Sft(i){switch(i){case Sn["desktop-browser"]:case Sn["mobile-browser"]:return"browser";case Sn.node:case Sn.worker:return"node";case Sn.miniApp:case Sn["desktop-miniApp"]:return"feishu";case Sn.lynx:return"lynx";case Sn.wx:return"wx";case Sn.tt:return"tt";case Sn.harmony:return"harmony"}return"browser"}class Cft{getVGrammarView(){return this._view}getModel(){return this._model}constructor(e,t){this._viewListeners=new Map,this._windowListeners=new Map,this._canvasListeners=new Map,this.isInited=!1,this._released=!1,this._model={[cd.signal]:{},[cd.data]:{},[cd.mark]:{}},this._compileChart=null,this.handleStageRender=()=>{var n,s;(s=(n=this._compileChart)===null||n===void 0?void 0:n.getEvent())===null||s===void 0||s.emit(ke.afterRender,{chart:this._compileChart})},this._container=e,this._option=t}getRenderer(){var e;return(e=this._view)===null||e===void 0?void 0:e.renderer}getCanvas(){var e;return(e=this._view)===null||e===void 0?void 0:e.renderer.canvas()}getStage(){var e;return(e=this._view)===null||e===void 0?void 0:e.renderer.stage()}initView(){var e,t,n,s;if(this._released||(this.isInited=!0,this._view))return;const r=new ii((e=this._option.logLevel)!==null&&e!==void 0?e:da.Error);!((t=this._option)===null||t===void 0)&&t.onError&&r.addErrorHandler((...a)=>{var o,l;(l=(o=this._option)===null||o===void 0?void 0:o.onError)===null||l===void 0||l.call(o,...a)}),this._view=new Kd(Object.assign(Object.assign({width:this._width,height:this._height,container:(n=this._container.dom)!==null&&n!==void 0?n:null,renderCanvas:(s=this._container.canvas)!==null&&s!==void 0?s:null,hooks:this._option.performanceHook},this._option),{mode:Sft(this._option.mode),autoFit:!1,eventConfig:{gesture:Pd(this._option.mode),disable:this._option.interactive===!1},doLayout:()=>{var a;(a=this._compileChart)===null||a===void 0||a.onLayout(this._view)},logger:r,logLevel:r.level()})),this._setCanvasStyle(),this.getStage().hooks.afterRender.tap("chart-event",this.handleStageRender),this._option.interactive!==!1&&this._viewListeners.forEach(a=>{var o;(o=this._view)===null||o===void 0||o.addEventListener(a.type,a.callback)})}_setCanvasStyle(){if(this._view&&this._container.dom&&!be(this._container.dom)){this._container.dom.style.display="block",this._container.dom.style.position="relative";const e=this.getCanvas();e&&(e.style.display="block")}}compileInteractions(){var e;if(this._view.removeAllInteractions(),(e=this._interactions)===null||e===void 0?void 0:e.length){const t={};this._interactions.forEach(n=>{var s;if(n.regionId){const r=`${n.regionId}-${n.type}-${(s=n.id)!==null&&s!==void 0?s:""}`,a=t[r];t[r]=a?Object.assign(Object.assign(Object.assign({},a),n),{selector:[...a.selector,...n.selector]}):n}else this._view.interaction(n.type,n)}),Object.keys(t).forEach(n=>{const s=this._view.interaction(t[n].type,t[n]);if(this._compileChart){const r=this._compileChart.getRegionsInIds([t[n].regionId])[0];r&&r.interaction.addVgrammarInteraction(s.getStartState(),s)}})}}compile(e,t){if(this._released)return;const{chart:n}=e;this._compileChart=n,this.initView(),this._view&&(n.compile(),n.afterCompile(),this.updateDepend(),this.compileInteractions())}clearNextRender(){return!!this._nextRafId&&(st.getCancelAnimationFrame()(this._nextRafId),this._nextRafId=null,!0)}clear(e,t=!1){const{chart:n}=e;this.clearNextRender(),n.clear(),this.releaseGrammar(t)}renderNextTick(e){this._released||this._nextRafId||(this._nextRafId=st.getRequestAnimationFrame()(()=>{this._nextRafId=null,this.render(e)}))}render(e){var t,n;this._released||(this.initView(),this._view&&((t=this._view)===null||t===void 0||t.run(e),this.clearNextRender()&&((n=this._view)===null||n===void 0||n.run(e))))}updateViewBox(e,t=!0){this._view&&this._view.renderer.setViewBox(e,t)}resize(e,t,n=!0){this._view&&(this._width=e,this._height=t,this._view.resize(e,t),n&&this.render({morph:!1}))}setBackground(e){var t;(t=this._view)===null||t===void 0||t.background(e)}setSize(e,t){this._width=e,this._height=t,this._view&&(this._view.width(e),this._view.height(t))}setViewBox(e,t=!0){this._view&&this._view.renderer.setViewBox(e,t)}addEventListener(e,t,n){var s,r;if(this._option.interactive!==!1){if(e===wt.chart){const a=(function(o,l){var c,u,h;const d=(u=(c=l==null?void 0:l.mark)===null||c===void 0?void 0:c.getContext())!==null&&u!==void 0?u:{},p=F(d.modelId)?d.modelId:null,f=F(d.markId)?d.markId:null,g=F(d.modelUserId)?d.modelUserId:null,m=F(d.markUserId)?d.markUserId:null,y={event:o,type:t,source:e,item:l,datum:((h=l==null?void 0:l.getDatum)===null||h===void 0?void 0:h.call(l))||null,markId:f,modelId:p,markUserId:m,modelUserId:g};n.call(null,y)}).bind(this);this._viewListeners.set(n,{type:t,callback:a}),(s=this._view)===null||s===void 0||s.addEventListener(t,a)}else if(e===wt.window){const a=(function(l){const c={event:l,type:t,source:e,item:null,datum:null,markId:null,modelId:null,markUserId:null,modelUserId:null};n.call(null,c)}).bind(this);this._windowListeners.set(n,{type:t,callback:a});const o=this._getGlobalThis();o==null||o.addEventListener(t,a)}else if(e===wt.canvas){const a=(function(l){const c={event:l,type:t,source:e,item:null,datum:null,markId:null,modelId:null,markUserId:null,modelUserId:null};n.call(null,c)}).bind(this);this._canvasListeners.set(n,{type:t,callback:a});const o=(r=this.getStage())===null||r===void 0?void 0:r.window;o==null||o.addEventListener(t,a)}}}removeEventListener(e,t,n){var s,r,a,o,l;if(this._option.interactive!==!1){if(e===wt.chart){const c=(s=this._viewListeners.get(n))===null||s===void 0?void 0:s.callback;c&&((r=this._view)===null||r===void 0||r.removeEventListener(t,c)),this._viewListeners.delete(n)}else if(e===wt.window){const c=this._getGlobalThis(),u=(a=this._windowListeners.get(n))===null||a===void 0?void 0:a.callback;u&&(c==null||c.removeEventListener(t,u)),this._windowListeners.delete(n)}else if(e===wt.canvas){const c=(o=this.getStage())===null||o===void 0?void 0:o.window,u=(l=this._canvasListeners.get(n))===null||l===void 0?void 0:l.callback;c&&u&&(c==null||c.removeEventListener(t,u)),this._canvasListeners.delete(n)}}}releaseEvent(){const e=this.getStage();e&&e.hooks.afterRender.unTap("chart-event",this.handleStageRender),this._viewListeners.clear(),this._windowListeners.clear(),this._canvasListeners.clear()}release(){var e;this.clearNextRender(),this.releaseEvent(),this._option=this._container=null,this._releaseModel(),(e=this._view)===null||e===void 0||e.release(),this._view=null,this.isInited=!1,this._compileChart=null,this._released=!0}releaseGrammar(e=!1){var t,n;this._releaseModel(),e&&((t=this._view)===null||t===void 0||t.removeAllGraphicItems()),(n=this._view)===null||n===void 0||n.removeAllGrammars()}_releaseModel(){Object.keys(this._model).forEach(e=>{Object.values(this._model[e]).forEach(t=>{Object.values(t).forEach(n=>{n.removeProduct(!0)})}),this._model[e]={}})}addGrammarItem(e){const t=e.getProduct();if(B(t))return;const n=t.id(),s=e.grammarType;B(this._model[s][n])&&(this._model[s][n]={}),this._model[s][n][e.id]=e}removeGrammarItem(e,t){var n;const s=e.getProduct();if(B(s))return;const r=s.id(),a=e.grammarType,o=this._model[a][r];F(o)&&(delete o[e.id],Object.keys(o).length===0&&delete this._model[a][r]),t||(n=this._view)===null||n===void 0||n.removeGrammar(s)}addInteraction(e){this._interactions||(this._interactions=[]),this._interactions.push(e)}removeInteraction(e){this._interactions&&(this._interactions=this._interactions.filter(t=>t.seriesId!==e))}updateDepend(e){return F(e)&&e.length>0?e.every(t=>t.updateDepend()):(Object.values(this._model).forEach(t=>{Object.values(t).forEach(n=>{const s=Object.values(n),r=s[0].getProduct(),a=s.reduce((o,l)=>l.getDepend().length>0?o.concat(l.getDepend()):o,[]).filter(o=>!!o).map(o=>o.getProduct());r.depend(a)})}),!0)}_getGlobalThis(){var e;return vl(this._option.mode)?globalThis:(e=this.getStage())===null||e===void 0?void 0:e.window}}var wft=function(i,e,t,n){return new(t||(t=Promise))(function(s,r){function a(c){try{l(n.next(c))}catch(u){r(u)}}function o(c){try{l(n.throw(c))}catch(u){r(u)}}function l(c){var u;c.done?s(c.value):(u=c.value,u instanceof t?u:new t(function(h){h(u)})).then(a,o)}l((n=n.apply(i,e||[])).next())})};function Aft(i="vchart",e){const t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("target","_blank"),t.setAttribute("download",`${i}.png`),t.dispatchEvent(new MouseEvent("click"))}function kft(i){return new Promise(e=>{i.convertToBlob().then(t=>{const n=new FileReader;n.readAsDataURL(t),n.onload=()=>{e(n.result)}})})}function Tft(i,e){var t;return wft(this,void 0,void 0,function*(){if(!i)return"";try{if(OffscreenCanvas!==void 0&&i instanceof OffscreenCanvas)return kft(i)}catch(n){((t=e==null?void 0:e.onError)!==null&&t!==void 0?t:t1)(`getCanvasDataURL error : ${n.toString()}`)}return i.toDataURL()})}function Xd(i){i.crosshair=q(i.crosshair||{}).map(e=>Pe({[i.direction==="horizontal"?"yField":"xField"]:{visible:!0,line:{visible:!0,type:"rect"}}},e))}function tce(i,e,t){var n;const{width:s,height:r}=i;if(F(s)&&F(r))return{width:s,height:r};let a=t.width,o=t.height;const l=e.container,c=e.canvas;if(l){const{width:u,height:h}=nD(l,t.width,t.height);a=u,o=h}else if(c&&vl(e.mode)){let u;u=be(c)?st.getElementById(c):c;const{width:h,height:d}=nD(u,t.width,t.height);a=h,o=d}else if(Vd(e.mode)&&(!((n=e.modeParams)===null||n===void 0)&&n.domref)){const u=e.modeParams.domref;a=u.width,o=u.height}return a=s??a,o=r??o,{width:a,height:o}}function $g(i,...e){const t=n=>e.reduce((s,r)=>s||(r==null?void 0:r[n]),i[n]);return Object.assign(i,{change:t("change"),reCompile:t("reCompile"),reMake:t("reMake"),reRender:t("reRender"),reSize:t("reSize"),reTransformSpec:t("reTransformSpec"),changeTheme:t("changeTheme"),changeBackground:t("changeBackground")}),i}function ice(i,e){return i==="line"||i==="area"||i==="common"&&e.series.every(t=>t.type==="area"||t.type==="line")?{paddingInner:1,paddingOuter:0}:{paddingOuter:0}}var Ce;(function(i){i.STATE_NORMAL="normal",i.STATE_HOVER="hover",i.STATE_HOVER_REVERSE="hover_reverse",i.STATE_DIMENSION_HOVER="dimension_hover",i.STATE_DIMENSION_HOVER_REVERSE="dimension_hover_reverse",i.STATE_SELECTED="selected",i.STATE_SELECTED_REVERSE="selected_reverse",i.STATE_SANKEY_EMPHASIS="selected",i.STATE_SANKEY_EMPHASIS_REVERSE="blur"})(Ce||(Ce={}));var Cv;(function(i){i.STATE_HOVER_REVERSE="hover_reverse",i.STATE_DIMENSION_HOVER_REVERSE="dimension_hover_reverse",i.STATE_SELECTED_REVERSE="selected_reverse"})(Cv||(Cv={}));class Ry{constructor(){this._children=[],this._markNameMap={},this._infoMap=new Map}getMarkNameMap(){return this._markNameMap}addMark(e,t){B(e)||(this._children.push(e),this._markNameMap[e.name]=e,this._infoMap.set(e,se({},Ry.defaultMarkInfo,t)))}removeMark(e){const t=this._children.findIndex(n=>n.name===e);t>=0&&(this._infoMap.delete(this._children[t]),delete this._markNameMap[e],this._children.splice(t,1))}clear(){this._children=[],this._markNameMap={},this._infoMap.clear()}forEach(e){this._children.forEach(e)}includes(e,t){return this._children.includes(e,t)}get(e){return isNaN(Number(e))?this._markNameMap[e]:this._children[e]}getMarks(){return this._children.slice()}getMarksInType(e){const t=q(e);return this._children.filter(n=>t.includes(n.type))}getMarkInId(e){return this._children.find(t=>t.id===e)}getMarkWithInfo(e){return this._children.find(t=>Object.keys(e).every(n=>e[n]===this._infoMap.get(t)[n]))}}Ry.defaultMarkInfo={};class Eft{get hover(){return this._hover}get select(){return this._select}constructor(e){this._marks=new Ry,this._markReverse=new Ry,this.onHover=t=>{switch(t.action){case"enter":this.interaction.getEventElement(Ce.STATE_DIMENSION_HOVER).forEach(n=>this.interaction.addEventElement(Ce.STATE_DIMENSION_HOVER_REVERSE,n)),this.interaction.clearEventElement(Ce.STATE_DIMENSION_HOVER,!1),this.getEventElement(t).forEach(n=>this.interaction.addEventElement(Ce.STATE_DIMENSION_HOVER,n)),this.interaction.reverseEventElement(Ce.STATE_DIMENSION_HOVER);break;case"leave":this.interaction.clearEventElement(Ce.STATE_DIMENSION_HOVER,!0),t=null}},this._option=e,this.event=this._option.model.getOption().getChart().getEvent(),this.interaction=e.interaction,this.initConfig(e.mode)}setStateKeys(e){}registerMark(e){Te(e.stateStyle[Ce.STATE_DIMENSION_HOVER])||this._marks.addMark(e),Te(e.stateStyle[Ce.STATE_DIMENSION_HOVER_REVERSE])||this._markReverse.addMark(e)}init(){this.initEvent()}release(){this.releaseEvent()}initEvent(){this.event.on(Bu.dimensionHover,this.onHover)}releaseEvent(){this.event.release()}initConfig(e){}getEventElement(e,t=!1){const n=[];return e.dimensionInfo.forEach(s=>{s.data.forEach(r=>{(t?this._markReverse:this._marks).getMarks().filter(a=>a.model===r.series&&a.getVisible()).forEach(a=>{const o=a.getProduct();if(!o||!o.elements)return;const l=o.elements.filter(c=>{const u=c.getDatum();let h;return h=ie(u)?u.every((d,p)=>d===r.datum[p]):r.datum.some(d=>d===u),t?!h:h});n.push(...l)})})}),n}}function Pft(i,e,t){var n;const s=(n=e[i])===null||n===void 0?void 0:n.style;return Oft(i,s)||ee(s)?!0:!(!(s!=null&&s.scale)||s.field===t)}function Oft(i,e){return(i==="fill"||i==="stroke")&&(e==null?void 0:e.gradient)&&(e==null?void 0:e.stops)}const nce={};Object.values(Ce).forEach(i=>{nce[i]=!0});function Mft(i){return!!nce[i]}const Ift={[Ce.STATE_HOVER]:Ce.STATE_HOVER_REVERSE,[Ce.STATE_SELECTED]:Ce.STATE_SELECTED_REVERSE,[Ce.STATE_DIMENSION_HOVER]:Ce.STATE_DIMENSION_HOVER_REVERSE};function vC(i){return Ift[i]}class Rft{constructor(){this._stateMarks=new Map,this._stateElements=new Map,this._vgrammarInteractions=new Map,this._disableTriggerEvent=!1}addVgrammarInteraction(e,t){e&&(this._vgrammarInteractions.get(e)?this._vgrammarInteractions.get(e).push(t):this._vgrammarInteractions.set(e,[t]))}static markStateEnable(e,t){return!Te(e.stateStyle[t])}setDisableActiveEffect(e){this._disableTriggerEvent=e}registerMark(e,t){var n;this._stateMarks.has(e)||this._stateMarks.set(e,[]),(n=this._stateMarks.get(e))===null||n===void 0||n.push(t)}getStateMark(e){return this._stateMarks.get(e)}filterEventMark(e,t){var n;return!(!e.mark||!(!((n=this._stateMarks.get(t))===null||n===void 0)&&n.includes(e.mark)))}getEventElement(e){var t;return(t=this._stateElements.get(e))!==null&&t!==void 0?t:[]}getEventElementData(e){return this.getEventElement(e).map(t=>t.getDatum())}exchangeEventElement(e,t){var n;if(this._disableTriggerEvent)return;const s=vC(e);(n=this._stateElements.get(e))===null||n===void 0||n.forEach(r=>{r.removeState(e),s&&this.addEventElement(s,r)}),t.getStates().includes(e)||(t.addState(e),s&&t.removeState(s)),this._stateElements.set(e,[t])}removeEventElement(e,t){var n,s;if(this._disableTriggerEvent)return;t.removeState(e);const r=(s=(n=this._stateElements.get(e))===null||n===void 0?void 0:n.filter(o=>o!==t))!==null&&s!==void 0?s:[];this._stateElements.set(e,r);const a=vC(e);a&&(r.length===0?this.clearEventElement(a,!1):this.addEventElement(a,t))}addEventElement(e,t){var n;if(this._disableTriggerEvent)return;t.getStates().includes(e)||t.addState(e);const s=(n=this._stateElements.get(e))!==null&&n!==void 0?n:[];s.push(t),this._stateElements.set(e,s)}clearEventElement(e,t){var n;if(!this._disableTriggerEvent&&((n=this._stateElements.get(e))===null||n===void 0||n.forEach(s=>{s.removeState(e)}),this._stateElements.set(e,[]),t)){const s=vC(e);s&&this.clearEventElement(s,!1)}}clearAllEventElement(){if(!this._disableTriggerEvent)for(const[e,t]of this._stateElements)t.forEach(n=>{n.clearStates()}),this._stateElements.set(e,[])}reverseEventElement(e){if(this._disableTriggerEvent)return;const t=vC(e);if(!t)return;const n=this.getStateMark(t);if(!n)return;const s=this.getEventElement(e);s.length&&(this.getEventElement(t).length||(s.length===1?n.forEach(r=>{r.getProduct().elements.filter(a=>a!==s[0]).forEach(a=>{this.addEventElement(t,a)})}):n.forEach(r=>{r.getProduct().elements.filter(a=>!s.includes(a)).forEach(a=>{this.addEventElement(t,a)})})))}startInteraction(e,t){const n=this._vgrammarInteractions.get(e);n&&n.forEach(s=>{s.start(t)})}resetInteraction(e,t){const n=this._vgrammarInteractions.get(e);n&&n.forEach(s=>{s.reset(t)})}resetAllInteraction(){for(const[e,t]of this._vgrammarInteractions)t&&t.forEach(n=>{n.reset(null)})}}const mh=9,Fr=0;var Xt;(function(i){i[i.SeriesGroup=0]="SeriesGroup",i[i.Axis_Grid=50]="Axis_Grid",i[i.CrossHair_Grid=100]="CrossHair_Grid",i[i.Region=450]="Region",i[i.Mark=300]="Mark",i[i.Node=400]="Node",i[i.Axis=100]="Axis",i[i.MarkLine=500]="MarkLine",i[i.MarkArea=100]="MarkArea",i[i.MarkPoint=500]="MarkPoint",i[i.DataZoom=500]="DataZoom",i[i.ScrollBar=500]="ScrollBar",i[i.Player=500]="Player",i[i.Legend=500]="Legend",i[i.CrossHair=500]="CrossHair",i[i.Indicator=500]="Indicator",i[i.Title=500]="Title",i[i.Label=500]="Label",i[i.Brush=500]="Brush",i[i.CustomMark=500]="CustomMark",i[i.Interaction=700]="Interaction"})(Xt||(Xt={}));var El;(function(i){i[i.Indicator=10]="Indicator",i[i.Region=20]="Region",i[i.Axis=30]="Axis",i[i.DataZoom=40]="DataZoom",i[i.Player=40]="Player",i[i.ScrollBar=40]="ScrollBar",i[i.Legend=50]="Legend",i[i.Title=70]="Title",i[i.CustomMark=70]="CustomMark"})(El||(El={}));var pe;(function(i){i[i.Default=0]="Default",i[i.Theme=1]="Theme",i[i.Chart=2]="Chart",i[i.Base_Series=3]="Base_Series",i[i.Series=4]="Series",i[i.Mark=5]="Mark",i[i.User_Chart=6]="User_Chart",i[i.User_Series=7]="User_Series",i[i.User_Mark=8]="User_Mark",i[i.User_SeriesStyle=9]="User_SeriesStyle",i[i.Built_In=99]="Built_In"})(pe||(pe={}));class kO{getOption(){return this._option}constructor(e){this._option=e,this.getCompiler=this._option.getCompiler}getVGrammarView(){var e;return(e=this.getCompiler())===null||e===void 0?void 0:e.getVGrammarView()}release(){this._option=null,this.getCompiler=null}}class C4 extends kO{constructor(){super(...arguments),this.id=Qf(),this._compiledProductId=null,this._depend=[]}getProduct(){if(F(this._product))return this._product;const e=this.getVGrammarView(),t=this.getProductId();return F(t)&&F(e)&&(this._product=this._lookupGrammar(t)),this._product}getProductId(){var e;return(e=this._compiledProductId)!==null&&e!==void 0?e:this.generateProductId()}getDepend(){return this._depend}setDepend(...e){this._depend=e}compile(e){this._compileProduct(e),this._afterCompile(e)}_afterCompile(e){var t;F(this._product)&&((t=this.getCompiler())===null||t===void 0||t.addGrammarItem(this))}updateDepend(){if(F(this._product)){const e=this.getDepend().map(t=>t.getProduct()).filter(F);return this._product.depend(e),e.length===this.getDepend().length}return!1}release(){this.removeProduct(),super.release(),this._depend=[]}removeProduct(e){this.getCompiler().removeGrammarItem(this,e),this._product=null,this._compiledProductId=null}}class Lft extends C4{getValue(){return this._value}getUpdateFunc(){return this._updateFunc}constructor(e,t,n,s){super(e),this.grammarType=cd.signal,this.name=t,this._value=n,this._updateFunc=s}updateSignal(e,t){this._value=e,this._updateFunc=t,this.compile()}_compileProduct(){const e=this.getVGrammarView();if(e){if(!this.getProduct()){const t=this.getProductId();this._product=e.signal().id(t),this._compiledProductId=t}F(this._value)&&this._product.value(this._value),F(this._updateFunc)&&this._product.update(this._updateFunc)}}generateProductId(){return this.name}_lookupGrammar(e){var t;return(t=this.getCompiler().getVGrammarView())===null||t===void 0?void 0:t.getSignalById(e)}}class Dft extends kO{constructor(){super(...arguments),this._signalMap={}}getSignalMap(){return this._signalMap}getSignal(e){return this._signalMap[e]}updateSignal(e,t,n){this._signalMap[e]?this._signalMap[e].updateSignal(t,n):(this._signalMap[e]=new Lft(this._option,e,t,n),this._signalMap[e].compile())}compile(){Object.values(this._signalMap).forEach(e=>{e.compile()})}release(){super.release(),Object.values(this._signalMap).forEach(e=>{e.release()}),this._signalMap={}}}class sce extends Dft{getStateMap(){return this._stateMap}_getDefaultStateMap(){return{}}constructor(e){super(e),e.stateKeyToSignalName?this.stateKeyToSignalName=e.stateKeyToSignalName:this.stateKeyToSignalName=()=>"state_signal",this.initStateMap()}initStateMap(e){this._stateMap=e??this._getDefaultStateMap()}compile(e){const t=e??this._stateMap;Object.keys(t).forEach(n=>{const s=this.stateKeyToSignalName(n),r=t[n];this.updateSignal(s,r)})}updateState(e,t){if(e&&(se(this._stateMap,e),this.compile(e),!t))return this.getCompiler().renderNextTick()}}class rce extends sce{constructor(){super(...arguments),this.id=Qf(),this.stateKeyToSignalName=e=>`${Ie}_animate_${this.id}_${e}`}getAnimationStateSignalName(){return this.stateKeyToSignalName("animationState")}updateAnimateState(e,t){e===wn.update?this.updateState({animationState:{callback:(n,s)=>s.diffState}},t):e===wn.appear?this.updateState({animationState:{callback:(n,s)=>s.diffState==="exit"?wn.none:wn.appear}},t):this.updateState({animationState:{callback:(n,s)=>e}},t)}_getDefaultStateMap(){return{animationState:{callback:(e,t)=>t.diffState==="exit"?wn.exit:t.diffState==="update"?wn.update:wn.appear}}}}class TO{constructor(e){this._option=e,this.type=e.type}_initTheme(e,t){return this._theme=this.getTheme(e,t),this._mergeThemeToSpec(e,t)}getTheme(e,t){}transformSpec(e,t,n){this._transformSpecBeforeMergingTheme(e,t,n);const s=this._initTheme(e,t);return this._transformSpecAfterMergingTheme(s.spec,t,n),s}_transformSpecBeforeMergingTheme(e,t,n){}_transformSpecAfterMergingTheme(e,t,n){}_mergeThemeToSpec(e,t){const n=this._theme;if(this._shouldMergeThemeToSpec()){const s=this._getDefaultSpecFromChart(t),r=a=>Pe({},n,s,a);return ie(e)?{spec:e.map(a=>r(a)),theme:n}:{spec:r(e),theme:n}}return{spec:e,theme:n}}_shouldMergeThemeToSpec(){return!0}_getDefaultSpecFromChart(e){}}class w4 extends kO{getSpec(){return this._spec||{}}getSpecPath(){var e;return(e=this._option)===null||e===void 0?void 0:e.specPath}getSpecInfoPath(){var e,t,n;return(t=(e=this._option)===null||e===void 0?void 0:e.specInfoPath)!==null&&t!==void 0?t:(n=this._option)===null||n===void 0?void 0:n.specPath}getData(){return this._data}get layout(){return this._layout}getOption(){return this._option}getMarks(){var e,t;return(t=(e=this._marks)===null||e===void 0?void 0:e.getMarks())!==null&&t!==void 0?t:[]}getMarkNameMap(){var e;return(e=this._marks)===null||e===void 0?void 0:e.getMarkNameMap()}getMarkSet(){return this._marks}getChart(){return this._option.getChart()}get _theme(){var e;return(e=this.getSpecInfo())===null||e===void 0?void 0:e.theme}constructor(e,t){var n;super(t),this.transformerConstructor=TO,this.type="null",this.modelType="null",this.userId=void 0,this._data=null,this._layout=null,this.specKey="",this._marks=new Ry,this._lastLayoutRect=null,this.id=Qf(),this.userId=e.id,this._spec=e,this.effect={},this.event=new wO(t.eventDispatcher,t.mode),(n=t.map)===null||n===void 0||n.set(this.id,this)}_releaseEvent(){this.event.release()}created(){this.setAttrFromSpec()}init(e){}afterInit(){}getVisible(){var e;return((e=this._spec)===null||e===void 0?void 0:e.visible)!==!1}onLayoutStart(e,t,n){var s;(s=this._layout)===null||s===void 0||s.onLayoutStart(e,t,n)}onLayoutEnd(e){var t;(t=this._layout)===null||t===void 0||t.onLayoutEnd(e),this.getMarks().forEach(n=>n.updateLayoutState(!0,!0))}onEvaluateEnd(e){}onDataUpdate(){}beforeRelease(){}release(){var e;this._releaseEvent(),this._spec=void 0,this.getMarks().forEach(t=>t.release()),(e=this._data)===null||e===void 0||e.release(),this._data=null,this._marks.clear(),super.release()}updateSpec(e){const t=this._compareSpec(e,this._spec);return this._spec=e,t}_compareSpec(e,t){return{change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1}}reInit(e){e&&(this._spec=e),this.setAttrFromSpec()}updateLayoutAttribute(){}setAttrFromSpec(){var e;(e=this._layout)===null||e===void 0||e.setAttrFromSpec(this._spec,this._option.getChartViewRect())}_convertMarkStyle(e){return Object.assign({},e)}setMarkStyle(e,t,n,s){F(e)&&F(t)&&e.setStyle(this._convertMarkStyle(t),n,s)}initMarkStyleWithSpec(e,t,n){if(!F(e)||!F(t))return;const{style:s,state:r}=t,a=Object.assign({},t);s&&(a.style=this._convertMarkStyle(s)),r&&(a.state={},Object.keys(r).forEach(o=>{a.state[o]=this._convertMarkStyle(r[o])})),e.initStyleWithSpec(a,n)}stateKeyToSignalName(e,t){let n=`${Ie}_${this.modelType}_${this.type}_${this.id}_${e}`;return t&&(n+=`_${t}`),n}compileData(){var e;(e=this._data)===null||e===void 0||e.compile()}compileMarks(e){this.getMarks().forEach(t=>{t.compile({group:e})})}_createMark(e,t={},n){const{type:s,name:r}=e,a=X.createMark(s,r,Object.assign({model:this,map:this._option.map,getCompiler:this.getCompiler,globalScale:this._option.globalScale},t));return a&&(a.created(),n&&a.setMarkConfig(n)),a}_getDataIdKey(){}getColorScheme(){var e,t;return(t=(e=this._option).getTheme)===null||t===void 0?void 0:t.call(e).colorScheme}getSpecInfo(){var e,t,n;const s=(n=(t=(e=this._option).getSpecInfo)===null||t===void 0?void 0:t.call(e))!==null&&n!==void 0?n:{};return Mct(s,this.getSpecInfoPath())}getSpecIndex(){const e=this.getSpecPath();if(!(e!=null&&e.length))return 0;const t=Number(e[e.length-1]);return isNaN(t)?0:t}}class Fft{getSpec(){return this._spec||{}}getLayoutStartPoint(){return this._layoutStartPoint}get layoutRectLevelMap(){return this._layoutRectLevelMap}get minWidth(){return this._minWidth}set minWidth(e){this._minWidth=e}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth=e}get minHeight(){return this._minHeight}set minHeight(e){this._minHeight=e}get maxHeight(){return this._maxHeight}set maxHeight(e){this._maxHeight=e}getLastComputeOutBounds(){return this._lastComputeOutBounds}get layoutOrient(){return this._layoutOrient}set layoutOrient(e){this._layoutOrient=e}get model(){return this._model}get type(){return this._model.type}constructor(e,t){var n;this.layoutClip=!1,this.autoIndent=!1,this._layoutStartPoint={x:0,y:0},this._layoutRect={width:0,height:0},this._layoutRectLevelMap={width:Fr,height:Fr},this._minWidth=null,this._maxWidth=null,this._minHeight=null,this._maxHeight=null,this._lastComputeRect=null,this._lastComputeOutBounds={x1:0,x2:0,y1:0,y2:0},this.getLayoutRect=()=>this._layoutRect,this.layoutType="normal",this._layoutOrient="left",this.layoutPaddingLeft=0,this.layoutPaddingTop=0,this.layoutPaddingRight=0,this.layoutPaddingBottom=0,this.layoutOffsetX=0,this.layoutOffsetY=0,this.layoutLevel=El.Region,this._model=e,this._option=t,this.layoutLevel=t.layoutLevel,this.layoutType=t.layoutType,t.layoutOrient&&(this.layoutOrient=t.layoutOrient),this._spec=(n=e==null?void 0:e.getSpec)===null||n===void 0?void 0:n.call(e)}_setLayoutAttributeFromSpec(e,t){var n,s,r,a;if(this._spec&&this._spec.visible!==!1){const o=Fu(e.padding),l=Koe(o,t,t);this.layoutPaddingLeft=l.left,this.layoutPaddingRight=l.right,this.layoutPaddingTop=l.top,this.layoutPaddingBottom=l.bottom,this._minHeight=B(e.minHeight)?(n=this._minHeight)!==null&&n!==void 0?n:null:Un(e.minHeight,t.height,t),this._maxHeight=B(e.maxHeight)?(s=this._maxHeight)!==null&&s!==void 0?s:null:Un(e.maxHeight,t.height,t),this._minWidth=B(e.minWidth)?(r=this._minWidth)!==null&&r!==void 0?r:null:Un(e.minWidth,t.width,t),this._maxWidth=B(e.maxWidth)?(a=this._maxWidth)!==null&&a!==void 0?a:null:Un(e.maxWidth,t.width,t),e.width&&this.setLayoutRect({width:Un(e.width,t.width,t)},{width:mh}),e.height&&this.setLayoutRect({height:Un(e.height,t.height,t)},{height:mh}),B(e.offsetX)||(this.layoutOffsetX=Un(e.offsetX,t.width,t)),B(e.offsetY)||(this.layoutOffsetY=Un(e.offsetY,t.height,t)),e.alignSelf&&(this.alignSelf=e.alignSelf)}}setAttrFromSpec(e,t){var n,s,r,a;this._spec=e,this.layoutType=(n=e.layoutType)!==null&&n!==void 0?n:this.layoutType,this.layoutLevel=(s=e.layoutLevel)!==null&&s!==void 0?s:this.layoutLevel,this.layoutOrient=(r=e.orient)!==null&&r!==void 0?r:this.layoutOrient,this._setLayoutAttributeFromSpec(e,t),this.layoutClip=(a=e.clip)!==null&&a!==void 0?a:this.layoutClip}onLayoutStart(e,t,n){this._setLayoutAttributeFromSpec(this._spec,t)}onLayoutEnd(e){}_getAbsoluteSpecValue(e){const t={top:null,bottom:null,left:null,right:null};return["top","bottom","left","right"].forEach(n=>{B(this._spec[n])||(t[n]=Un(this._spec[n],n==="top"||n==="bottom"?e.height:e.width,e))}),t}absoluteLayoutInRect(e){const{top:t,bottom:n,left:s,right:r}=this._getAbsoluteSpecValue(e),a={width:e.width-this.layoutPaddingLeft-this.layoutPaddingRight,height:e.height-this.layoutPaddingTop-this.layoutPaddingBottom};B(s)||(a.width-=s),B(r)||(a.width-=r),B(t)||(a.height-=t),B(n)||(a.height-=n),this.setLayoutRect(a);const{width:o,height:l}=this.computeBoundsInRect(this.getLayoutRect());this.setLayoutRect({width:o,height:l});const c={x:e.x,y:e.y};this._spec.center===!0?(c.x=e.x+.5*e.width-.5*o,c.y=e.y+.5*e.height-.5*l):(B(s)?B(r)||(c.x=e.x+e.width-this.layoutPaddingRight-r-o):c.x=e.x+s+this.layoutPaddingLeft,B(t)?B(n)||(c.y=e.y+e.height-this.layoutPaddingBottom-n-l):c.y=e.y+t+this.layoutPaddingTop),this.setLayoutStartPosition(c)}setLayoutStartPosition(e){var t,n;this._option.transformLayoutPosition&&(e=this._option.transformLayoutPosition(e)),Z(e.x)&&(this._layoutStartPoint.x=e.x),Z(e.y)&&(this._layoutStartPoint.y=e.y),(n=(t=this._model).afterSetLayoutStartPoint)===null||n===void 0||n.call(t,this._layoutStartPoint)}setLayoutRect({width:e,height:t},n){var s,r,a,o;Z(e)&&((s=n==null?void 0:n.width)!==null&&s!==void 0?s:Fr)>=this._layoutRectLevelMap.width&&(this._layoutRect.width=e,this._layoutRectLevelMap.width=(r=n==null?void 0:n.width)!==null&&r!==void 0?r:Fr),Z(t)&&((a=n==null?void 0:n.height)!==null&&a!==void 0?a:Fr)>=this._layoutRectLevelMap.height&&(this._layoutRect.height=t,this._layoutRectLevelMap.height=(o=n==null?void 0:n.height)!==null&&o!==void 0?o:Fr),this.setRectInSpec(this._layoutRect)}getLayout(){return{x:this._layoutStartPoint.x,y:this._layoutStartPoint.y,width:this._layoutRect.width,height:this._layoutRect.height}}mergeLayoutRect({width:e,height:t}){const n={width:e,height:t};return this._layoutRectLevelMap.width>Fr&&(n.width=this._layoutRect.width),this._layoutRectLevelMap.height>Fr&&(n.height=this._layoutRect.height),n}getOrientPosAttribute(){return this._layoutOrient==="bottom"||this._layoutOrient==="top"?"x":"y"}getOrientSizeAttribute(){return this._layoutOrient==="bottom"||this._layoutOrient==="top"?"width":"height"}changeBoundsBySetting(e){return this._layoutRectLevelMap.width>Fr&&(e.x2=e.x1+this._layoutRect.width),this._layoutRectLevelMap.height>Fr&&(e.y2=e.y1+this._layoutRect.height),e.x1-=this._layoutStartPoint.x,e.x2-=this._layoutStartPoint.x,e.y1-=this._layoutStartPoint.y,e.y2-=this._layoutStartPoint.y,e}setRectInSpec(e){const t=Object.assign({},e);return this._layoutRectLevelMap.width<mh?(B(this._minWidth)||(t.width=Math.max(t.width,this._minWidth)),B(this._maxWidth)||(t.width=Math.min(t.width,this._maxWidth))):t.width=this._layoutRect.width,this._layoutRectLevelMap.height<mh?(B(this._minHeight)||(t.height=Math.max(t.height,this._minHeight)),B(this._maxHeight)||(t.height=Math.min(t.height,this._maxHeight))):t.height=this._layoutRect.height,t}computeBoundsInRect(e){if(this._lastComputeRect=e,!(this.layoutType!=="region-relative"&&this.layoutType!=="region-relative-overlap"||(this._layoutRectLevelMap.width!==mh||this.layoutOrient!=="left"&&this.layoutOrient!=="right")&&(this._layoutRectLevelMap.height!==mh||this.layoutOrient!=="bottom"&&this.layoutOrient!=="top")))return this._layoutRect;const t=Object.assign({},this._model.getBoundsInRect(this.setRectInSpec(e),e));this.changeBoundsBySetting(t),this.autoIndent&&t.x2-t.x1>0&&t.y2-t.y1>0&&(this._lastComputeOutBounds.x1=Math.ceil(-t.x1),this._lastComputeOutBounds.x2=Math.ceil(t.x2-e.width),this._lastComputeOutBounds.y1=Math.ceil(-t.y1),this._lastComputeOutBounds.y2=Math.ceil(t.y2-e.height));let n=this.setRectInSpec(ylt(t,e));return this._option.transformLayoutRect&&(n=this._option.transformLayoutRect(n)),n}getModelId(){return this._model.id}getModelVisible(){return this._model.getVisible()}}class ace extends w4{constructor(){super(...arguments),this.layoutType="normal",this.layoutLevel=0,this.layoutZIndex=0,this._forceLayoutTag=!1,this._layout=null,this._orient=null,this._layoutRect={width:0,height:0},this._layoutStartPos={x:0,y:0},this._isLayout=!0,this.getGraphicBounds=()=>this._layout?{x1:this._layout.getLayoutStartPoint().x,y1:this._layout.getLayoutStartPoint().y,x2:this._layout.getLayoutStartPoint().x+this._layout.getLayoutRect().width,y2:this._layout.getLayoutStartPoint().y+this._layout.getLayoutRect().height}:{x1:0,x2:0,y1:0,y2:0},this._transformLayoutRect=null,this._transformLayoutPosition=null}get layoutOrient(){return this._orient}set layoutOrient(e){this._orient=e,this._layout&&(this._layout.layoutOrient=e)}initLayout(){this.layoutType!=="none"&&(this._layout=new Fft(this,{layoutType:this.layoutType,layoutLevel:this.layoutLevel,layoutOrient:this._orient,transformLayoutRect:this._transformLayoutRect,transformLayoutPosition:this._transformLayoutPosition}),this._orient&&this._orient!=="radius"&&this._orient!=="angle"&&this._layout&&(this._layout.layoutOrient=this._orient))}onLayoutStart(e,t,n){this._isLayout=!0,super.onLayoutStart(e,t,n)}onLayoutEnd(e){super.onLayoutEnd(e),this.updateLayoutAttribute();const t=this.getLayoutRect();!this._forceLayoutTag&&Pt(this._lastLayoutRect,t)||(this._lastLayoutRect=Object.assign({},t)),this._forceLayoutTag=!1,this._isLayout=!1}afterSetLayoutStartPoint(e){}_forceLayout(){var e;this._isLayout||(this._forceLayoutTag=!0,(e=this._option.globalInstance.getChart())===null||e===void 0||e.setLayoutTag(!0))}getLayoutStartPoint(){return this._layout?this._layout.getLayoutStartPoint():this._layoutStartPos}setLayoutStartPosition(e){return this._layout?this._layout.setLayoutStartPosition(e):this._layoutStartPos=se(this._layoutStartPos,e)}getLayoutRect(){return this._layout?this._layout.getLayoutRect():this._layoutRect}setLayoutRect(e,t){return this._layout?this._layout.setLayoutRect(e):this._lastLayoutRect=se(this._layoutRect,e)}getLastComputeOutBounds(){var e;return(e=this._layout)===null||e===void 0?void 0:e.getLastComputeOutBounds()}setAttrFromSpec(){var e,t,n,s,r;super.setAttrFromSpec(),this.layoutClip=(e=this._spec.clip)!==null&&e!==void 0?e:this.layoutClip,this.layoutZIndex=(t=this._spec.zIndex)!==null&&t!==void 0?t:this.layoutZIndex,this.layoutType=(n=this._spec.layoutType)!==null&&n!==void 0?n:this.layoutType,this._orient=(s=this._spec.orient)!==null&&s!==void 0?s:this._orient,this.layoutLevel=(r=this._spec.layoutLevel)!==null&&r!==void 0?r:this.layoutLevel}}class oce extends TO{_initTheme(e,t){return{spec:e,theme:this._theme}}}class Zm extends ace{getMaxWidth(){return this._layout.maxWidth}setMaxWidth(e){this._layout.maxWidth=e}getMaxHeight(){return this._layout.maxHeight}setMaxHeight(e){this._layout.maxHeight=e}getGroupMark(){return this._groupMark}getInteractionMark(){return this._interactionMark}getStackInverse(){return this._spec.stackInverse===!0}getStackSort(){return this._spec.stackSort===!0}constructor(e,t){var n;super(e,t),this.transformerConstructor=oce,this.modelType="region",this.specKey="region",this.type=Zm.type,this._series=[],this.layoutType="region",this.layoutZIndex=Xt.Region,this.interaction=new Rft,this.seriesDataFilterOver=()=>{this.event.emit(ke.regionSeriesDataFilterOver,{model:this,chart:this.getChart()}),this._series.forEach(s=>{s.getViewDataFilter()&&s.reTransformViewData()})},this.getBoundsInRect=()=>({x1:this._layout.getLayoutStartPoint().x,y1:this._layout.getLayoutStartPoint().y,x2:this._layout.getLayoutStartPoint().x+this._layout.getLayoutRect().width,y2:this._layout.getLayoutStartPoint().y+this._layout.getLayoutRect().height}),this.userId=e.id,this.coordinate=(n=e.coordinate)!==null&&n!==void 0?n:"cartesian",this._option.animation&&(this.animate=new rce({getCompiler:t.getCompiler})),this.interaction.setDisableActiveEffect(this._option.disableTriggerEvent)}_getClipDefaultValue(){var e,t,n,s;const r=this._option.getChart().getSpec(),a=(t=(e=r.dataZoom)===null||e===void 0?void 0:e.some)===null||t===void 0?void 0:t.call(e,l=>{var c;return((c=l.filterMode)!==null&&c!==void 0?c:"filter")==="axis"}),o=(s=(n=r.scrollBar)===null||n===void 0?void 0:n.some)===null||s===void 0?void 0:s.call(n,l=>{var c;return((c=l.filterMode)!==null&&c!==void 0?c:"axis")==="axis"});return!(!a&&!o)||this._layout.layoutClip}created(){var e,t;this.initLayout(),super.created();const n=(e=this._spec.clip)!==null&&e!==void 0?e:this._getClipDefaultValue();this._groupMark=this._createGroupMark("regionGroup",this.userId,this.layoutZIndex),this._interactionMark=this._createGroupMark("regionInteractionGroup",((t=this.userId)!==null&&t!==void 0?t:this.type)+"_interaction",Xt.Interaction),Te(this._spec.style)||(this._backgroundMark=this._createMark({type:"rect",name:"regionBackground"}),n&&(this._foregroundMark=this._createMark({type:"rect",name:"regionForeground"})),[this._backgroundMark,this._foregroundMark].forEach(s=>{s&&(s.created(),this.setMarkStyle(s,{width:()=>this.getLayoutRect().width,height:()=>this.getLayoutRect().height},"normal",pe.Built_In),this._groupMark.addMark(s))}),this._backgroundMark&&this._backgroundMark.setMarkConfig({zIndex:Xt.SeriesGroup-1}),this._foregroundMark&&this._foregroundMark.setMarkConfig({zIndex:Xt.Mark+1})),this.createTrigger()}_createGroupMark(e,t,n){var s,r;const a=this._createMark({type:"group",name:e});a.setUserId(t),a.setMarkConfig({zIndex:n});const o=(s=this._spec.clip)!==null&&s!==void 0?s:this._getClipDefaultValue();return this.setMarkStyle(a,{x:()=>this.getLayoutStartPoint().x,y:()=>this.getLayoutStartPoint().y,width:()=>this.getLayoutRect().width,height:()=>this.getLayoutRect().height,clip:o},"normal",pe.Built_In),this.setMarkStyle(a,{cornerRadius:(r=this._spec.style)===null||r===void 0?void 0:r.cornerRadius},"normal",pe.User_Mark),this._marks.addMark(a),a}init(e){super.init(e),this.initMark(),this.initSeriesDataflow(),this.initInteraction(),this.initTrigger()}initMark(){this._initBackgroundMarkStyle(),this._initForegroundMarkStyle()}_initBackgroundMarkStyle(){var e,t;this._backgroundMark&&(this.setMarkStyle(this._backgroundMark,Object.assign({fillOpacity:!((e=this._spec.style)===null||e===void 0)&&e.fill?1:0},this._spec.style),"normal",pe.User_Mark),((t=this._spec.clip)!==null&&t!==void 0?t:this._getClipDefaultValue())&&this.setMarkStyle(this._backgroundMark,{strokeOpacity:0},"normal",pe.Built_In))}_initForegroundMarkStyle(){this._foregroundMark&&this.setMarkStyle(this._foregroundMark,Object.assign(Object.assign({},this._spec.style),{fillOpacity:0}),"normal",pe.User_Mark)}_compareSpec(e,t){const n=super._compareSpec(e,t);return Pt(t==null?void 0:t.style,e==null?void 0:e.style)||(n.reMake=!0),n}reInit(e){super.reInit(e),this._initBackgroundMarkStyle(),this._initForegroundMarkStyle()}addSeries(e){e&&(this._series.includes(e)||this._series.push(e))}removeSeries(e){if(!e)return;const t=this._series.findIndex(n=>n===e);t>=0&&this._series.splice(t,1)}getSeries(e={}){return this._series.filter(t=>{var n,s;return(!e.name||(t==null?void 0:t.name)===e.name)&&(!e.userId||q(e.userId).includes(t.userId))&&(!F(e.specIndex)||q(e.specIndex).includes(t.getSpecIndex()))&&(!e.id||t.id===e.id)&&(!e.type||t.type===e.type)&&(!e.coordinateType||t.coordinate===e.coordinateType)&&(!e.dataName||((s=(n=t.getRawData)===null||n===void 0?void 0:n.call(t))===null||s===void 0?void 0:s.name)===e.dataName)})}getSeriesInName(e){return this.getSeries({name:e})[0]}getSeriesInUserId(e){return this.getSeries({userId:e})[0]}getSeriesInId(e){return this.getSeries({id:e})[0]}getSeriesInType(e){return this.getSeries({type:e})}getSeriesInCoordinateType(e){return this.getSeries({coordinateType:e})}getSeriesInDataName(e){return this.getSeries({dataName:e})}onRender(e){}initSeriesDataflow(){const e=this._series.map(t=>{var n;return(n=t.getViewDataFilter())!==null&&n!==void 0?n:t.getViewData()}).filter(t=>!!t);this._option.dataSet.multipleDataViewAddListener(e,"change",this.seriesDataFilterOver)}release(){super.release(),this._series=[]}createTrigger(){const e=Object.assign(Object.assign({},this._option),{model:this,interaction:this.interaction});this._trigger=new Eft(e)}initTrigger(){this._series.forEach(e=>{e.getMarksWithoutRoot().forEach(t=>{this._trigger.registerMark(t)})}),this._trigger.init()}initInteraction(){this._option.disableTriggerEvent||this._series.forEach(e=>{e.getMarksWithoutRoot().forEach(t=>{for(const n in Cv)Te(t.stateStyle[Cv[n]])||this.interaction.registerMark(Cv[n],t)})})}compileMarks(e){this.getMarks().forEach(t=>{var n;t.compile({group:e,context:{model:this}}),(n=t.getProduct())===null||n===void 0||n.layout((s,r,a,o)=>{})})}compile(){var e;(e=this.animate)===null||e===void 0||e.compile(),this.compileMarks()}onLayoutEnd(e){this._series.forEach(t=>t.onLayoutEnd(e)),super.onLayoutEnd(e)}}Zm.type="region",Zm.transformerConstructor=oce,Zm.specKey="region";function EO(i){const e=[],t=[],n=[];return i.forEach(s=>{B(s.getSpec().position)||s.getSpec().position==="start"?e.push(s):s.getSpec().position==="middle"?t.push(s):s.getSpec().position==="end"&&n.push(s)}),{startItems:e,endItems:n,middleItems:t}}function lce(i,e,t){e?i.forEach(n=>{const s=It(n),r=s.getLayoutStartPoint().y+s.getLayoutRect().height-n[0].getLayoutStartPoint().y,a=(t-r)/2;n.forEach(o=>{o.setLayoutStartPosition({x:o.getLayoutStartPoint().x,y:o.getLayoutStartPoint().y+a})})}):i.forEach(n=>{const s=It(n),r=s.getLayoutStartPoint().x+s.getLayoutRect().width-n[0].getLayoutStartPoint().x,a=(t-r)/2;n.forEach(o=>{o.setLayoutStartPosition({x:o.getLayoutStartPoint().x+a,y:o.getLayoutStartPoint().y})})})}function PO(i,e,t,n){let s;i.forEach((r,a)=>{r.length>1&&(s=t[a],r.forEach(o=>{if(!o.alignSelf||o.alignSelf==="start")return;const l=o.getLayoutStartPoint(),c=o.alignSelf==="middle"?.5:1,u=e?s-(o.getLayoutRect().width+o.layoutPaddingLeft+o.layoutPaddingRight):s-(o.getLayoutRect().height+o.layoutPaddingTop+o.layoutPaddingBottom);e?o.setLayoutStartPosition({x:l.x+n*u*c,y:l.y}):o.setLayoutStartPosition({x:l.x,y:l.y+n*u*c})}))})}function vT(i,e,t,n,s){if(i.length){let r=0;const a=s==="right",o=a?-1:1;let l=a?e.rightCurrent:e.leftCurrent,c=e.topCurrent;const u=[];let h=[];const d=[];i.forEach(p=>{const f=e.getItemComputeLayoutRect(p),g=p.computeBoundsInRect(f);p.setLayoutRect(g);const m=g.height+p.layoutPaddingTop+p.layoutPaddingBottom,y=g.width+p.layoutPaddingLeft+p.layoutPaddingRight,b=a?-g.width-p.layoutPaddingRight:p.layoutPaddingLeft;p.setLayoutStartPosition({x:l+p.layoutOffsetX+b,y:c+p.layoutOffsetY+p.layoutPaddingTop}),c+=m,c>t&&h.length?(d.push(r),l+=o*r,r=y,c=e.topCurrent+m,p.setLayoutStartPosition({x:l+p.layoutOffsetX+b,y:e.topCurrent+p.layoutOffsetY+p.layoutPaddingTop}),u.push(h),h=[p]):(r=Math.max(r,y),h.push(p))}),d.push(r),u.push(h),PO(u,!0,d,o),n&&lce(u,!0,t),a?e.rightCurrent=l+o*r:e.leftCurrent=l+o*r}}function cce(i,e,t,n){if(i.length){let s=0;const r=n==="right",a=r?-1:1;let o=r?e.rightCurrent:e.leftCurrent,l=e.bottomCurrent;const c=[];let u=[];const h=[];i.forEach(d=>{const p=e.getItemComputeLayoutRect(d),f=d.computeBoundsInRect(p);d.setLayoutRect(f);const g=f.height+d.layoutPaddingTop+d.layoutPaddingBottom,m=f.width+d.layoutPaddingLeft+d.layoutPaddingRight,y=r?-f.width-d.layoutPaddingRight:d.layoutPaddingLeft;l<g&&u.length?(h.push(s),o+=a*s,s=m,l=e.bottomCurrent,d.setLayoutStartPosition({x:o+d.layoutOffsetX+y,y:l+d.layoutOffsetY-f.height-d.layoutPaddingBottom}),c.push(u),u=[d]):(d.setLayoutStartPosition({x:o+d.layoutOffsetX+y,y:l+d.layoutOffsetY-f.height-d.layoutPaddingBottom}),s=Math.max(s,m),l-=g,u.push(d))}),h.push(s),c.push(u),PO(c,!0,h,a),r?e.rightCurrent=o+a*s:e.leftCurrent=o+a*s}}function bT(i,e,t,n,s){if(i.length){const r=s==="top",a=r?1:-1;let o=0,l=e.leftCurrent,c=r?e.topCurrent:e.bottomCurrent;const u=[];let h=[];const d=[];i.forEach(p=>{const f=e.getItemComputeLayoutRect(p),g=p.computeBoundsInRect(f);p.setLayoutRect(g);const m=g.height+p.layoutPaddingTop+p.layoutPaddingBottom,y=g.width+p.layoutPaddingLeft+p.layoutPaddingRight,b=r?p.layoutPaddingTop:-g.height-p.layoutPaddingBottom;p.setLayoutStartPosition({x:l+p.layoutOffsetX+p.layoutPaddingLeft,y:c+p.layoutOffsetY+b}),l+=y,l>t&&h.length?(d.push(o),l=e.leftCurrent+y,c+=a*o,o=m,p.setLayoutStartPosition({x:e.leftCurrent+p.layoutOffsetX+p.layoutPaddingLeft,y:c+p.layoutOffsetY+b}),u.push(h),h=[p]):(o=Math.max(o,m),h.push(p))}),d.push(o),u.push(h),PO(u,!1,d,a),n&&lce(u,!1,t),r?e.topCurrent=c+a*o:e.bottomCurrent=c+a*o}}function uce(i,e,t,n){if(i.length){const s=n==="top",r=s?1:-1;let a=0,o=e.rightCurrent,l=s?e.topCurrent:e.bottomCurrent;const c=[];let u=[];const h=[];i.forEach(d=>{const p=e.getItemComputeLayoutRect(d),f=d.computeBoundsInRect(p);d.setLayoutRect(f);const g=f.height+d.layoutPaddingTop+d.layoutPaddingBottom,m=f.width+d.layoutPaddingLeft+d.layoutPaddingRight,y=s?d.layoutPaddingTop:-f.height-d.layoutPaddingBottom;o<m&&u.length?(o=e.rightCurrent,l+=r*a,a=g,d.setLayoutStartPosition({x:e.rightCurrent+d.layoutOffsetX-f.width-d.layoutPaddingRight,y:l+d.layoutOffsetY+y}),c.push(u),u=[d]):(u.push(d),d.setLayoutStartPosition({x:o+d.layoutOffsetX-f.width-d.layoutPaddingRight,y:l+d.layoutOffsetY+y}),a=Math.max(a,g),o-=m)}),h.push(a),c.push(u),PO(c,!1,h,r),s?e.topCurrent=l+r*a:e.bottomCurrent=l+r*a}}function Bft(i,e,t){const{startItems:n,middleItems:s,endItems:r}=EO(i);n.length&&vT(n,e,t,!1,"left"),s.length&&vT(s,e,t,!0,"left"),r.length&&cce(r,e,t,"left")}function jft(i,e,t){const{startItems:n,middleItems:s,endItems:r}=EO(i);n.length&&vT(n,e,t,!1,"right"),s.length&&vT(s,e,t,!0,"right"),r.length&&cce(r,e,t,"right")}function Nft(i,e,t){const{startItems:n,middleItems:s,endItems:r}=EO(i);n.length&&bT(n,e,t,!1,"top"),s.length&&bT(s,e,t,!0,"top"),r.length&&uce(r,e,t,"top")}function $ft(i,e,t){const{startItems:n,middleItems:s,endItems:r}=EO(i);n.length&&bT(n,e,t,!1,"bottom"),s.length&&bT(s,e,t,!0,"bottom"),r.length&&uce(r,e,t,"bottom")}let A4=class{constructor(e,t){this.leftCurrent=0,this.topCurrent=0,this.rightCurrent=0,this.bottomCurrent=0,this._onError=t==null?void 0:t.onError}_layoutInit(e,t,n,s){this._chartLayoutRect=n,this._chartViewBox=s,this.leftCurrent=n.x,this.topCurrent=n.y,this.rightCurrent=n.x+n.width,this.bottomCurrent=n.height+n.y,t.sort((r,a)=>a.layoutLevel-r.layoutLevel)}_layoutNormalItems(e){this.layoutNormalInlineItems(e.filter(t=>t.layoutType==="normal-inline")),this.layoutNormalItems(e.filter(t=>t.layoutType==="normal"))}_groupItems(e){const t=e.filter(o=>o.layoutType==="region"),n=e.filter(o=>o.layoutType==="region-relative"),s=e.filter(o=>o.layoutType==="region-relative-overlap"),r=n.concat(s),a={left:{items:[],rect:{width:0,height:0}},right:{items:[],rect:{width:0,height:0}},top:{items:[],rect:{width:0,height:0}},bottom:{items:[],rect:{width:0,height:0}},z:{items:[],rect:{width:0,height:0}}};return s.forEach(o=>{a[o.layoutOrient].items.push(o)}),{regionItems:t,relativeItems:n,relativeOverlapItems:s,allRelatives:r,overlapItems:a}}layoutItems(e,t,n,s){this._layoutInit(e,t,n,s),this._layoutNormalItems(t);const r={left:this.leftCurrent,top:this.topCurrent,right:this.rightCurrent,bottom:this.bottomCurrent},{regionItems:a,relativeItems:o,relativeOverlapItems:l,allRelatives:c,overlapItems:u}=this._groupItems(t);this.layoutRegionItems(a,o,l,u),this._processAutoIndent(a,o,l,u,c,r),this.layoutAbsoluteItems(t.filter(h=>h.layoutType==="absolute"))}_processAutoIndent(e,t,n,s={left:{items:[],rect:{width:0,height:0}},right:{items:[],rect:{width:0,height:0}},top:{items:[],rect:{width:0,height:0}},bottom:{items:[],rect:{width:0,height:0}},z:{items:[],rect:{width:0,height:0}}},r,a){if(r.some(o=>o.autoIndent)){const{top:o,bottom:l,left:c,right:u}=this._checkAutoIndent(r,a);(o||l||c||u)&&(this.topCurrent=a.top+o,this.bottomCurrent=a.bottom-l,this.leftCurrent=a.left+c,this.rightCurrent=a.right-u,this.layoutRegionItems(e,t,n,s))}}layoutNormalItems(e){e.forEach(t=>{const n=this.getItemComputeLayoutRect(t),s=t.computeBoundsInRect(n);t.setLayoutRect(s),t.layoutOrient==="left"?(t.setLayoutStartPosition({x:this.leftCurrent+t.layoutOffsetX+t.layoutPaddingLeft,y:this.topCurrent+t.layoutOffsetY+t.layoutPaddingTop}),this.leftCurrent+=s.width+t.layoutPaddingLeft+t.layoutPaddingRight):t.layoutOrient==="top"?(t.setLayoutStartPosition({x:this.leftCurrent+t.layoutOffsetX+t.layoutPaddingLeft,y:this.topCurrent+t.layoutOffsetY+t.layoutPaddingTop}),this.topCurrent+=s.height+t.layoutPaddingTop+t.layoutPaddingBottom):t.layoutOrient==="right"?(t.setLayoutStartPosition({x:this.rightCurrent+t.layoutOffsetX-s.width-t.layoutPaddingRight,y:this.topCurrent+t.layoutOffsetY+t.layoutPaddingTop}),this.rightCurrent-=s.width+t.layoutPaddingLeft+t.layoutPaddingRight):t.layoutOrient==="bottom"&&(t.setLayoutStartPosition({x:this.leftCurrent+t.layoutOffsetX+t.layoutPaddingRight,y:this.bottomCurrent+t.layoutOffsetY-s.height-t.layoutPaddingBottom}),this.bottomCurrent-=s.height+t.layoutPaddingTop+t.layoutPaddingBottom)})}layoutNormalInlineItems(e){const t=e.filter(l=>l.layoutOrient==="left"),n=e.filter(l=>l.layoutOrient==="right"),s=e.filter(l=>l.layoutOrient==="top"),r=e.filter(l=>l.layoutOrient==="bottom"),a=this._chartLayoutRect.width+this._chartLayoutRect.x,o=this._chartLayoutRect.height+this._chartLayoutRect.y;t.length&&Bft(t,this,o),s.length&&Nft(s,this,a),n.length&&jft(n,this,o),r.length&&$ft(r,this,a)}_layoutRelativeOverlap(e,t){t.items.forEach(n=>{const s=this.getItemComputeLayoutRect(n),r=n.computeBoundsInRect(s);t.rect.width=Math.max(r.width+n.layoutPaddingLeft+n.layoutPaddingRight,t.rect.width),t.rect.height=Math.max(r.height+n.layoutPaddingTop+n.layoutPaddingBottom,t.rect.height)}),t.items.forEach(n=>{n.setLayoutRect(t.rect),e==="left"?n.setLayoutStartPosition({x:this.leftCurrent+n.layoutOffsetX}):e==="right"?n.setLayoutStartPosition({x:this.rightCurrent-t.rect.width+n.layoutOffsetX}):e==="top"?n.setLayoutStartPosition({x:this.topCurrent+n.layoutOffsetY}):n.setLayoutStartPosition({x:this.bottomCurrent-t.rect.height+n.layoutOffsetY})}),e==="left"?this.leftCurrent+=t.rect.width:e==="right"?this.rightCurrent-=t.rect.width:e==="top"?this.topCurrent+=t.rect.height:this.bottomCurrent-=t.rect.height}_layoutRelativeItem(e,t){const n=e.computeBoundsInRect(t);e.layoutOrient==="left"||e.layoutOrient==="right"?e.setLayoutRect({width:n.width}):e.setLayoutRect({height:n.height}),e.layoutOrient==="left"?(e.setLayoutStartPosition({x:this.leftCurrent+e.layoutOffsetX+e.layoutPaddingLeft}),this.leftCurrent+=n.width+e.layoutPaddingLeft+e.layoutPaddingRight):e.layoutOrient==="right"?(this.rightCurrent-=n.width+e.layoutPaddingLeft+e.layoutPaddingRight,e.setLayoutStartPosition({x:this.rightCurrent+e.layoutOffsetX+e.layoutPaddingLeft})):e.layoutOrient==="top"?(e.setLayoutStartPosition({y:this.topCurrent+e.layoutOffsetY+e.layoutPaddingTop}),this.topCurrent+=n.height+e.layoutPaddingTop+e.layoutPaddingBottom):e.layoutOrient==="bottom"&&(this.bottomCurrent-=n.height+e.layoutPaddingTop+e.layoutPaddingBottom,e.setLayoutStartPosition({y:this.bottomCurrent+e.layoutOffsetY+e.layoutPaddingTop}))}_layoutRegionItem(e,t,n){const s=Math.max(Math.min(t,...e.map(a=>{var o;return(o=a.maxWidth)!==null&&o!==void 0?o:Number.MAX_VALUE})),0),r=Math.max(Math.min(n,...e.map(a=>{var o;return(o=a.maxHeight)!==null&&o!==void 0?o:Number.MAX_VALUE})),0);return e.forEach(a=>{const o=s-a.layoutPaddingLeft-a.layoutPaddingRight,l=r-a.layoutPaddingTop-a.layoutPaddingBottom;a.setLayoutRect({width:o,height:l}),a.setLayoutStartPosition({x:this.leftCurrent+a.layoutOffsetX+a.layoutPaddingLeft,y:this.topCurrent+a.layoutOffsetY+a.layoutPaddingTop})}),{regionHeight:r,regionWidth:s}}layoutRegionItems(e,t,n,s={left:{items:[],rect:{width:0,height:0}},right:{items:[],rect:{width:0,height:0}},top:{items:[],rect:{width:0,height:0}},bottom:{items:[],rect:{width:0,height:0}},z:{items:[],rect:{width:0,height:0}}}){let r=this.rightCurrent-this.leftCurrent,a=this.bottomCurrent-this.topCurrent;t.filter(c=>c.layoutOrient==="left"||c.layoutOrient==="right").forEach(c=>{this._layoutRelativeItem(c,this.getItemComputeLayoutRect(c))}),this._layoutRelativeOverlap("left",s.left),this._layoutRelativeOverlap("right",s.right),r=this.rightCurrent-this.leftCurrent,t.filter(c=>c.layoutOrient==="top"||c.layoutOrient==="bottom").forEach(c=>{this._layoutRelativeItem(c,this.getItemComputeLayoutRect(c))}),this._layoutRelativeOverlap("top",s.top),this._layoutRelativeOverlap("bottom",s.bottom),a=this.bottomCurrent-this.topCurrent;const{regionWidth:o,regionHeight:l}=this._layoutRegionItem(e,r,a);t.concat(n).forEach(c=>{if(["left","right"].includes(c.layoutOrient)){const u=this.filterRegionsWithID(e,c.layoutBindRegionID[0]);c.setLayoutRect({height:u.getLayoutRect().height}),c.setLayoutStartPosition({y:u.getLayoutStartPoint().y+c.layoutOffsetY+c.layoutPaddingTop}),c.layoutOrient==="right"&&c.setLayoutStartPosition({x:c.getLayoutStartPoint().x+o-r})}else if(["top","bottom"].includes(c.layoutOrient)){const u=this.filterRegionsWithID(e,c.layoutBindRegionID[0]);c.setLayoutRect({width:u.getLayoutRect().width}),c.setLayoutStartPosition({x:u.getLayoutStartPoint().x+c.layoutOffsetX+c.layoutPaddingLeft}),c.layoutOrient==="bottom"&&c.setLayoutStartPosition({y:c.getLayoutStartPoint().y+l-a})}})}layoutAbsoluteItems(e){e.forEach(t=>{t.absoluteLayoutInRect(this._chartLayoutRect)})}filterRegionsWithID(e,t){var n;const s=e.find(r=>r.getModelId()===t);return s||((n=this._onError)!==null&&n!==void 0?n:t1)("can not find target region item, invalid id"),s}getItemComputeLayoutRect(e){return{width:this.rightCurrent-this.leftCurrent-e.layoutPaddingLeft-e.layoutPaddingRight,height:this.bottomCurrent-this.topCurrent-e.layoutPaddingTop-e.layoutPaddingBottom}}_checkAutoIndent(e,t){const n={top:0,left:0,bottom:0,right:0};return e.forEach(s=>{if(!s.getModelVisible()||!s.autoIndent)return;const r=s.layoutOrient==="left"||s.layoutOrient==="right",a=s.getLastComputeOutBounds(),o=this._getOutInLayout(a,s,t);r?(n.top=Math.max(n.top,o.top),n.bottom=Math.max(n.bottom,o.bottom)):(n.left=Math.max(n.left,o.left),n.right=Math.max(n.right,o.right))}),n}_getOutInLayout(e,t,n){const{x:s,y:r}=t.getLayoutStartPoint(),{width:a,height:o}=t.getLayoutRect();return{left:n.left-(s-e.x1),right:s+a+e.x2-n.right,top:n.top-(r-e.y1),bottom:r+o+e.y2-n.bottom}}};A4.type="base";const OK=["linear","radial","conical"],zft={x0:0,y0:0,x1:1,y1:1},Hft={x0:0,y0:0,x1:1,y1:1,r0:0,r1:1},Vft={x:.5,y:.5,startAngle:0,endAngle:2*Math.PI},Uft={linear:zft,radial:Hft,conical:Vft},Wft=["line","area","trail"];function KI(i){return Wft.includes(i)}function Gft(i,e){return i==="monotone"?e==="horizontal"?"monotoneY":"monotoneX":i}class Kft extends sce{getStateInfoList(){return this._stateInfoList}constructor(e,t){super(e),this._stateInfoList=[],this._mark=t}_getDefaultStateMap(){return{markUpdateRank:1}}getStateInfo(e){return this._stateInfoList.find(t=>t.stateValue===e)}addStateInfo(e){if(this.getStateInfo(e.stateValue))return;e.level=e.level||0;let t=!0;for(let n=0;n<this._stateInfoList.length;n++){const s=this._stateInfoList[n].level;if(s&&s>e.level){this._stateInfoList.splice(n,0,e),t=!1;break}}t&&this._stateInfoList.push(e)}_clearStateBeforeSet(e){e.datums=null,e.items=null,e.fields=null,e.filter=null}changeStateInfo(e){const t=this.getStateInfo(e.stateValue);if(t){if(e.datums!==void 0&&(this._clearStateBeforeSet(t),t.datums=e.datums,t.datumKeys=e.datumKeys),e.items!==void 0&&(this._clearStateBeforeSet(t),t.items=e.items),e.fields!==void 0)if(this._clearStateBeforeSet(t),e.fields===null)t.fields=e.fields;else{t.fields=t.fields||{};for(const n in e.fields){const s=e.fields[n];t.fields[n]=t.fields[n]||{};const r=t.fields[n];F(s.domain)&&(r.domain=s.domain),F(s.type)&&(r.type=s.type)}}e.filter&&(this._clearStateBeforeSet(t),t.filter=e.filter)}else this.addStateInfo(e)}clearStateInfo(e){e.forEach(t=>{this.getStateInfo(t)&&this.changeStateInfo({stateValue:t,datumKeys:null,datums:null,fields:null,items:null,filter:null,cache:{}})})}checkOneState(e,t,n,s){var r;s=Ui(KI)?s:!e.mark||KI(e.mark.markType);let a=!1,o=!1;if(F(n.datums)&&n.datums.length>0)a=this.checkDatumState(n,t,s),o=!0;else if(n.items)a=(r=this.checkItemsState(n,e))!==null&&r!==void 0&&r,o=!0;else if(n.fields)a=this.checkFieldsState(n,t,e,s),o=!0;else if(!a&&n.filter){const l={mark:this._mark,renderNode:e,type:e.mark.markType};a=n.filter(t,l),o=!0}return o?a?"in":"out":"skip"}checkState(e,t){const n=e.getStates().filter(r=>Mft(r)).map(r=>[r,10]),s=!e.mark||KI(e.mark.markType);for(let r=0;r<this._stateInfoList.length;r++){const a=this._stateInfoList[r],o=this.checkOneState(e,t,a,s);o!=="skip"&&o==="in"&&n.push([a.stateValue,a.level])}return n.map(r=>r[0])}checkDatumState(e,t,n){let s=!1;const r=n?t[0]:t;if(ie(e.datums)){const a=e.datumKeys||Object.keys(e.datums[0]).filter(o=>!o.startsWith(Ie));s=e.datums.some(o=>n&&ie(o==null?void 0:o.items)?a.every(l=>{var c,u;return((u=(c=o==null?void 0:o.items)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u[l])===(r==null?void 0:r[l])}):a.every(l=>(o==null?void 0:o[l])===(r==null?void 0:r[l])))}else Ke(e.datums)?s=(e.datumKeys||Object.keys(e.datums).filter(a=>!a.startsWith(Ie))).every(a=>{var o,l;return n?((o=e.datums.items)===null||o===void 0?void 0:o[0][a])===r[a]:((l=e.datums)===null||l===void 0?void 0:l[a])===r[a]}):s=t===e.datums;return s}checkItemsState(e,t){var n;return(n=e.items)===null||n===void 0?void 0:n.includes(t)}checkFieldsState(e,t,n,s){var r;let a=!0;for(const o in e.fields){const l=e.fields[o],c=l.type,u=l.domain,h=s?(r=t[0])===null||r===void 0?void 0:r[o]:t[o];if($t(c)&&u.length>1){if(this.checkLinearFieldState(u,o,t,n,s)){a=!1;break}a=!0}else{if(!u.some(d=>d===h)){a=!1;break}a=!0}}return a}checkLinearFieldState(e,t,n,s,r){var a;const o=r?(a=n[0])===null||a===void 0?void 0:a[t]:n[t];return o<e[0]||o>e[e.length-1]}updateLayoutState(e){return this._stateMap.markUpdateRank++,this.updateState({markUpdateRank:this._stateMap.markUpdateRank},e)}compileState(e,t){e.state({callback:(n,s)=>this.checkState(s,n)},t)}}class Ec extends C4{getDataView(){return this._data}setDataView(e){this._data=e}getLatestData(){var e;return(e=this._data)===null||e===void 0?void 0:e.latestData}constructor(e,t){super(e),this.grammarType=cd.data,this._data=null,this._data=t}release(){super.release(),this._data=null}updateData(e){const t=this.getProduct(),n=this.getLatestData();if(t&&n&&(t.values(n),!e))return this.getCompiler().renderNextTick()}_compileProduct(){const e=this.getLatestData();B(e)||(B(this.getProduct())?this._initProduct(e):this._product.values(e))}_initProduct(e){var t,n;const s=this.getVGrammarView();if(!s||!e)return;const r=this.getProductId();this._product=(n=(t=s==null?void 0:s.data)===null||t===void 0?void 0:t.call(s,e))===null||n===void 0?void 0:n.id(r),this._compiledProductId=r}generateProductId(){var e;return`${(e=this.getDataView())===null||e===void 0?void 0:e.name}`}_lookupGrammar(e){var t,n;return(n=(t=this.getCompiler().getVGrammarView())===null||t===void 0?void 0:t.getDataById)===null||n===void 0?void 0:n.call(t,e)}}class Xft extends Ec{constructor(e){super(e),this._mark=e.mark}setCompiledProductId(e){this._compiledProductId=e}generateProductId(){const e=super.generateProductId();return F(e)?e:`${Ie}_markData_${this._mark.id}`}_compileProduct(){var e;const t=(e=this._data)===null||e===void 0?void 0:e.latestData;B(t)||F(this.getProduct())||this._initProduct(t)}}var MK=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};class Yft extends C4{getMarkConfig(){return this._markConfig}setMarkConfig(e){Object.keys(e).forEach(t=>{this._markConfig[t]=e[t]})}getVisible(){return this._visible}setVisible(e){this._visible=e}getUserId(){return this._userId}setUserId(e){F(e)&&(this._userId=e)}getDataView(){var e;return(e=this._data)===null||e===void 0?void 0:e.getDataView()}setDataView(e,t){B(this._data)&&this.initMarkData(Object.assign(Object.assign({},this._option),{mark:this})),F(t)&&this._data.setCompiledProductId(t),this._data.setDataView(e)}getData(){return this._data}setData(e){this._data=e}hasState(e){return e in this.state.getStateMap()}getState(e){return this.state.getStateMap()[e]}getAnimationConfig(){return this._animationConfig}setAnimationConfig(e){this._animationConfig=e}setSkipBeforeLayouted(e){this._skipBeforeLayouted=e}getSkipBeforeLayouted(){return this._skipBeforeLayouted}getGroupKey(){return this._groupKey}setGroupKey(e){this._groupKey=e}setStateSortCallback(e){this._stateSort=e}constructor(e,t,n){super(e),this.grammarType=cd.mark,this.type=void 0,this.name="mark",this._markConfig={zIndex:Xt.Mark,morph:!1},this._visible=!0,this.stateStyle={},this._unCompileChannel={},this._skipBeforeLayouted=!1,this.name=t,this.model=n,this.key=e.key,this.state=new Kft(Object.assign(Object.assign({},e),{stateKeyToSignalName:this.stateKeyToSignalName.bind(this)}),this),this._event=new wO(n.getOption().eventDispatcher,n.getOption().mode)}setTransform(e){this._transform=e}initMarkData(e){this._data=new Xft(e)}stateKeyToSignalName(e){return`${Ie}_${this.type}_${this.id}_${e}`}getAttribute(e,t,n,s){}_compileProduct(e){const t=this.getProduct();if(!this.getVisible())return void(F(t)&&this.removeProduct());F(t)||this.getCompiler().isInited&&(this._initProduct(e==null?void 0:e.group),B(this._product)||(this.compileSignal(),this.compileData(),this.compileState(),this.compileEncode(),this.compileAnimation(),this.compileContext(e==null?void 0:e.context),this.compileTransform()))}_initProduct(e){const t=this.getVGrammarView(),n=this.getProductId();this._product=t.mark(this.type,e??t.rootMark).id(n),this._compiledProductId=n}generateProductId(){return this._userId?`${this._userId}`:`${this.name}_${this.id}`}compileData(){if(B(this._data))return;this._data.compile();const e=this._data.getProduct();F(this._product)&&F(e)&&this._product.join(e,this.key,void 0,this.getGroupKey())}updateStaticEncode(){if(!this._product)return;const{enterStyles:e,updateStyles:t}=this._separateStyle();this._product.encodeState("group",e,!0),this._product.encode(t,!0)}_separateStyle(){const e=this.stateStyle,t=Ce.STATE_NORMAL,n=e[t],s=(MK(e,[typeof t=="symbol"?t:t+""]),this._option.noSeparateStyle?null:{}),r={};return Object.keys(n).forEach(a=>{this._unCompileChannel[a]||(this._option.noSeparateStyle||Pft(a,n,this.getGroupKey())?r[a]={callback:this.compileCommonAttributeCallback(a,"normal"),dependency:[this.stateKeyToSignalName("markUpdateRank")]}:s[a]=this.compileCommonAttributeCallback(a,"normal"))}),{enterStyles:s,updateStyles:r}}compileEncode(){const e=this.stateStyle,t=Ce.STATE_NORMAL,n=(e[t],MK(e,[typeof t=="symbol"?t:t+""])),{enterStyles:s,updateStyles:r}=this._separateStyle();this._product.encode(r,!0),this._product.encodeState("group",s,!0),Object.keys(n).forEach(a=>{const o={};Object.keys(n[a]).forEach(l=>{this._unCompileChannel[l]||(o[l]={callback:this.compileCommonAttributeCallback(l,a),dependency:[this.stateKeyToSignalName("markUpdateRank")]})}),this._product.encodeState(a,o,!0)}),this._skipBeforeLayouted&&this._product.layout({skipBeforeLayouted:this._skipBeforeLayouted})}compileState(){this.state.compileState(this._product,this._stateSort)}compileAnimation(){var e,t,n,s;if(this._animationConfig){let r;if(this.type==="component")r=(e=this.model.animate)===null||e===void 0?void 0:e.getAnimationStateSignalName();else{const a=(n=(t=this.model).getRegion)===null||n===void 0?void 0:n.call(t);r=(s=a==null?void 0:a.animate)===null||s===void 0?void 0:s.getAnimationStateSignalName()}this._product.animation(this._animationConfig),this._product.animationState({callback:(a,o,l)=>{var c;return(c=l[r])===null||c===void 0?void 0:c.callback(a,o)},dependency:r}),this._animationConfig.normal&&(this._animationConfig.appear?this._event.on(Ee.ANIMATION_END,({event:a})=>{a.mark===this.getProduct()&&a.animationState===wn.appear&&this.runAnimationByState(wn.normal)}):this._event.on(Ee.AFTER_DO_RENDER,()=>{this.runAnimationByState(wn.normal)}))}}compileContext(e){const t=Object.assign(Object.assign({},this._markConfig),{context:Object.assign({markId:this.id,modelId:this.model.id,markUserId:this._userId,modelUserId:this.model.userId},e)});this._product.configure(t)}compileSignal(){this.state.compile()}_computeAttribute(e,t){return(n,s)=>{}}compileCommonAttributeCallback(e,t){const n=this._computeAttribute(e,t),s={mark:null,parent:null,element:null};return(r,a)=>(s.mark=a.mark,s.parent=a.mark.group,s.element=a,n(r,s))}compileTransform(){var e;!((e=this._transform)===null||e===void 0)&&e.length&&this.getProduct().transform(this._transform)}_lookupGrammar(e){var t;return(t=this.getCompiler().getVGrammarView())===null||t===void 0?void 0:t.getMarkById(e)}updateState(e,t){return this.state.updateState(e,t)}updateLayoutState(e,t){return t&&this.getMarks().length>0&&this.getMarks().forEach(n=>n.state.updateLayoutState(!0)),this.state.updateLayoutState(e)}updateMarkState(e){if(!this._product)return;const t=this.state.getStateInfo(e);this._product.elements.forEach(n=>{this.state.checkOneState(n,n.getDatum(),t)==="in"?n.addState(e):n.removeState(e)})}getMarks(){return[]}runAnimationByState(e){var t,n;return(n=(t=this.getProduct())===null||t===void 0?void 0:t.animate)===null||n===void 0?void 0:n.runAnimationByState(e)}stopAnimationByState(e){var t,n;return(n=(t=this.getProduct())===null||t===void 0?void 0:t.animate)===null||n===void 0?void 0:n.stopAnimationByState(e)}pauseAnimationByState(e){var t,n;return(n=(t=this.getProduct())===null||t===void 0?void 0:t.animate)===null||n===void 0?void 0:n.pauseAnimationByState(e)}resumeAnimationByState(e){var t,n;return(n=(t=this.getProduct())===null||t===void 0?void 0:t.animate)===null||n===void 0?void 0:n.resumeAnimationByState(e)}getProductElements(){const e=this.getProduct();if(e)return e.elements}release(){super.release(),this.state.release()}}var IK=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};class Rs extends Yft{constructor(e,t){var n;super(t,e,t.model),this._extensionChannel={},this._computeExChannel={},this._attributeContext=t.attributeContext,(n=t.map)===null||n===void 0||n.set(this.id,this)}created(){this._initStyle()}initStyleWithSpec(e,t){e&&(F(e.id)&&(this._userId=e.id),Ui(e.interactive)&&(this._markConfig.interactive=e.interactive),F(e.zIndex)&&(this._markConfig.zIndex=e.zIndex),Ui(e.visible)&&this.setVisible(e.visible),this._initSpecStyle(e,this.stateStyle,t))}_transformStyleValue(e,t){if(e.scale){const n=e.scale,s=n.range();return n.range(s.map(t)),e}return typeof e=="function"?(...n)=>t(e(...n)):t(e)}convertAngleToRadian(e){return this._transformStyleValue(e,zt)}isUserLevel(e){return[pe.User_Mark,pe.User_Series,pe.User_Chart,pe.User_SeriesStyle].includes(e)}setStyle(e,t="normal",n=0,s=this.stateStyle){if(B(e))return;s[t]===void 0&&(s[t]={});const r=this.isUserLevel(n);Object.keys(e).forEach(a=>{let o=e[a];B(o)||(o=this._filterAttribute(a,o,t,n,r,s),this.setAttribute(a,o,t,n,s))})}getStyle(e,t="normal"){var n;return(n=this.stateStyle[t][e])===null||n===void 0?void 0:n.style}_filterAttribute(e,t,n,s,r,a=this.stateStyle){let o=this._styleConvert(t);if(r)switch(e){case"angle":o=this.convertAngleToRadian(o);break;case"innerPadding":case"outerPadding":o=this._transformStyleValue(o,l=>-l);break;case"curveType":o=this._transformStyleValue(o,l=>Gft(l,this._option.model.direction))}return o}setReferer(e,t,n,s=this.stateStyle){var r;if(e)if(t&&n){const a=(r=s[n])!==null&&r!==void 0?r:{[t]:{}};s[n][t]=Object.assign(Object.assign({},a[t]),{referer:e})}else Object.entries(s).forEach(([a,o])=>{Object.entries(o).forEach(([l,c])=>{s[a][l].referer=e})})}setPostProcess(e,t,n="normal"){var s;!((s=this.stateStyle[n])===null||s===void 0)&&s[e]&&(this.stateStyle[n][e].postProcess=t)}getAttribute(e,t,n="normal",s){return this._computeAttribute(e,n)(t,s)}setAttribute(e,t,n="normal",s=0,r=this.stateStyle){var a;r[n]===void 0&&(r[n]={}),r[n][e]===void 0&&(r[n][e]={level:s,style:t,referer:void 0});const o=(a=r[n][e])===null||a===void 0?void 0:a.level;F(o)&&o<=s&&Pe(r[n][e],{style:t,level:s}),n!=="normal"&&e in this._extensionChannel&&this._extensionChannel[e].forEach(l=>{r[n][l]===void 0&&(r[n][l]=r.normal[l])})}_getDefaultStyle(){return{visible:!0,x:0,y:0}}_styleConvert(e){if(!e)return e;if(KF(e.type)||e.scale){const t=flt(e,{globalScale:this._option.globalScale,seriesId:this._option.seriesId});if(t)return{scale:t,field:e.field,changeDomain:e.changeDomain}}return e}_computeAttribute(e,t){var n;let s=(n=this.stateStyle[t])===null||n===void 0?void 0:n[e];s||(s=this.stateStyle.normal[e]);const r=this._computeStateAttribute(s,e,t),a=ee(s==null?void 0:s.postProcess),o=e in this._computeExChannel;if(a&&o){const l=this._computeExChannel[e];return(c,u)=>{let h=r(c,u);return h=s.postProcess(h,c,this._attributeContext,u,this.getDataView()),l(e,c,t,u,h)}}if(a)return(l,c)=>s.postProcess(r(l,c),l,this._attributeContext,c,this.getDataView());if(o){const l=this._computeExChannel[e];return(c,u)=>l(e,c,t,u,r(c,u))}return r}_computeStateAttribute(e,t,n){var s;return e?e.referer?e.referer._computeAttribute(t,n):e.style?typeof e.style=="function"?(r,a)=>e.style(r,this._attributeContext,a,this.getDataView()):OK.includes(e.style.gradient)?this._computeGradientAttr(e.style):["outerBorder","innerBorder"].includes(t)?this._computeBorderAttr(e.style):KF((s=e.style.scale)===null||s===void 0?void 0:s.type)?(r,a)=>{let o=r;return this.model.modelType==="series"&&this.model.getMarkData&&(o=this.model.getMarkData(r)),e.style.scale.scale(o[e.style.field])}:(r,a)=>e.style:(r,a)=>e.style:(r,a)=>{}}_initStyle(){const e=this._getDefaultStyle();this.setStyle(e,"normal",0)}_initSpecStyle(e,t,n){e.style&&this.setStyle(e.style,"normal",pe.User_Mark,t);const s=e.state;s&&Object.keys(s).forEach(r=>{const a=s[r];if("style"in a){const o=a.style;let l={stateValue:r};"level"in a&&(l.level=a.level),"filter"in a&&(l=ee(a.filter)?Object.assign({filter:a.filter},l):Object.assign(Object.assign({},a.filter),l)),this.state.addStateInfo(l),this.setStyle(o,r,pe.User_Mark,t)}else this.setStyle(a,r,pe.User_Mark,t)})}_computeGradientAttr(e){var t,n;const{gradient:s,scale:r,field:a}=e,o=IK(e,["gradient","scale","field"]);let l=r,c=a;if(!(r&&a||this.model.modelType!=="series")){const{scale:d,field:p}=this.model.getColorAttribute();r||(l=d),c||(c=p)}const u=iB(c1(this.model.getColorScheme(),this.model.modelType==="series"?(n=(t=this.model).getSpec)===null||n===void 0?void 0:n.call(t):void 0),this.model.getDefaultColorDomain()),h=Object.assign(Object.assign({},Uft[s]),o);return(d,p)=>{const f={},g=this.getDataView();return Object.keys(h).forEach(m=>{const y=h[m];m==="stops"?f.stops=y.map(b=>{const{opacity:x,color:S,offset:C}=b;let w=S??(l==null?void 0:l.scale(d[c]));return ee(S)&&(w=S(d,this._attributeContext,p,g)),F(x)&&(w=An.SetOpacity(w,x)),{offset:ee(C)?C(d,this._attributeContext,p,g):C,color:w||u[0]}}):ee(y)?f[m]=y(d,this._attributeContext,p,g):f[m]=y}),f.gradient=s,f}}_computeBorderAttr(e){const{scale:t,field:n}=e,s=IK(e,["scale","field"]);return(r,a)=>{var o,l,c;const u={};if(Object.keys(s).forEach(h=>{const d=s[h];ee(d)?u[h]=d(r,this._attributeContext,a,this.getDataView()):u[h]=d}),"stroke"in u)OK.includes((c=s.stroke)===null||c===void 0?void 0:c.gradient)&&(u.stroke=this._computeGradientAttr(s.stroke)(r,a));else{const h=iB(c1(this.model.getColorScheme(),this.model.modelType==="series"?(l=(o=this.model).getSpec)===null||l===void 0?void 0:l.call(o):void 0),this.model.getDefaultColorDomain());let d=t,p=n;if(!(t&&n||this.model.modelType!=="series")){const{scale:f,field:g}=this.model.getColorAttribute();t||(d=f),p||(p=g),u.stroke=(d==null?void 0:d.scale(r[p]))||h[0]}}return u}}}class p1 extends Rs{constructor(){super(...arguments),this.type=p1.type,this._marks=[]}getMarks(){return this._marks}_getDefaultStyle(){return Object.assign({},super._getDefaultStyle())}isMarkExist(e){return this._marks.find(t=>t.id===e.id||t.name===e.name)!==void 0}addMark(e){return this.isMarkExist(e)?(Yr("Mark already exists, add mark failed."),!1):(this._marks.push(e),!0)}removeMark(e){const t=this._marks.findIndex(n=>n.id===e.id||n.name===e.name);return t===-1?(Yr("Mark does not exists, removeMark failed."),!1):(this._marks.splice(t,1),!0)}getMarkInType(e){return this._marks.filter(t=>t.type===e)}getMarkInId(e){return this._marks.find(t=>t.id===e)}getMarkInName(e){return this._marks.find(t=>t.name===e)}_compileProduct(e){super._compileProduct(e),this._product.configure({zIndex:this._markConfig.zIndex}),e!=null&&e.ignoreChildren||this.getMarks().forEach(t=>{t.getProduct()&&t.removeProduct(),t.compile({group:this._product})})}}p1.type="group";const hce=()=>{Bht(),X.registerMark(p1.type,p1)},qft={measureText:Nct};class ma{static instance(){return ma.instance_||(ma.instance_=new ma),ma.instance_}constructor(){this.functions={}}registerFunction(e,t){e&&t&&(this.functions[e]=t)}unregisterFunction(e){e&&delete this.functions[e]}getFunction(e){return this.functions[e]||null}getFunctionNameList(){return Object.keys(this.functions)}}const Zft=()=>{Pk(We)},Jft=()=>{Rk(We)};class dce{constructor(){this.id=Qf(),this._plugins=[]}add(e){if(!e||e.length===0)return null;const t=[];return e.forEach(n=>{this._plugins.find(s=>s.id===n.id)?Yr("plugin"):(this._plugins.push(n),t.push(n),n.onAdd&&n.onAdd(this))}),t}load(e){const t=this.add(e);t&&t.length&&this.activate(e)}activate(e){e.length&&e.forEach(t=>{t.init&&t.init()})}get(e){return this._plugins.find(t=>t.id===e)}getAll(){return this._plugins.slice()}release(e){const t=this.get(e);t&&(t.release(this),this._plugins=this._plugins.filter(n=>n!==t))}releaseAll(){this._plugins.forEach(e=>{e.release(this)}),this._plugins=[]}clear(e){const t=this.get(e);t&&t.clear(this)}clearAll(){this._plugins.forEach(e=>{var t;(t=e.clear)===null||t===void 0||t.call(e,this)})}}class Qft extends dce{constructor(e){super(),this.globalInstance=e}onInit(e){this._plugins.forEach(t=>{t.onInit&&t.onInit(this,e)})}onBeforeResize(e,t){this._plugins.forEach(n=>{n.onBeforeResize&&n.onBeforeResize(this,e,t)})}onAfterChartSpecTransform(e,t){this._plugins.forEach(n=>{n.onAfterChartSpecTransform&&n.onAfterChartSpecTransform(this,e,t)})}onAfterModelSpecTransform(e,t,n){this._plugins.forEach(s=>{s.onAfterModelSpecTransform&&s.onAfterModelSpecTransform(this,e,t,n)})}onBeforeInitChart(e,t){this._plugins.forEach(n=>{n.onBeforeInitChart&&n.onBeforeInitChart(this,e,t)})}releaseAll(){super.releaseAll(),this.globalInstance=null}}var Ko=function(i,e,t,n){return new(t||(t=Promise))(function(s,r){function a(c){try{l(n.next(c))}catch(u){r(u)}}function o(c){try{l(n.throw(c))}catch(u){r(u)}}function l(c){var u;c.done?s(c.value):(u=c.value,u instanceof t?u:new t(function(h){h(u)})).then(a,o)}l((n=n.apply(i,e||[])).next())})},egt=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};let _a=class fw{static useRegisters(e){e.forEach(t=>{typeof t=="function"?t():console.error("Invalid function:",t)})}static useChart(e){e.forEach(t=>X.registerChart(t.type,t))}static useSeries(e){e.forEach(t=>X.registerSeries(t.type,t))}static useComponent(e){e.forEach(t=>X.registerComponent(t.type,t))}static useMark(e){e.forEach(t=>{var n;return X.registerMark((n=t.constructorType)!==null&&n!==void 0?n:t.type,t)})}static useLayout(e){e.forEach(t=>X.registerLayout(t.type,t))}static registerDataSetTransform(e,t){X.registerTransform(e,t)}static registerFunction(e,t){e&&t&&ma.instance().registerFunction(e,t)}static unregisterFunction(e){e&&ma.instance().unregisterFunction(e)}static getFunction(e){return e?ma.instance().getFunction(e):null}static getFunctionList(){return ma.instance().getFunctionNameList()}static registerMap(e,t,n){const s=X.getImplementInKey("registerMap");s&&s(e,t,n)}static unregisterMap(e){const t=X.getImplementInKey("unregisterMap");t&&t(e)}static getMap(e){return xft(e)}static hideTooltip(e=[]){ho.forEach(t=>{var n;return(n=t==null?void 0:t.hideTooltip)===null||n===void 0?void 0:n.call(t)},e)}static getLogger(){return ii.getInstance()}getSpec(){return this._spec}getSpecInfo(){return this._specInfo}getDataSet(){return this._dataSet}constructor(e,t){var n,s,r,a,o,l,c,u;this.id=Qf(),this._userEvents=[],this._autoSize=!0,this._option={mode:Sn["desktop-browser"],onError:x=>{throw new Error(x)},optimize:{disableCheckGraphicWidthOutRange:!0}},this._observer=null,this._context={},this._doResize=()=>{const{width:x,height:S}=this.getCurrentSize();this._currentSize.width===x&&this._currentSize.height===S||(this._currentSize={width:x,height:S},this.resizeSync(x,S))},this._renderSync=(x={})=>{var S;const C=this;return this._beforeRender(x)&&((S=this._compiler)===null||S===void 0||S.render(x.morphConfig),this._afterRender()),C},this._updateSpec=(x,S=!1,C)=>{var w,A;const T=this._spec,E={changeBackground:!1,reTransformSpec:!1,change:!1,reMake:!1,reCompile:!1,reSize:!1,changeTheme:!1};if(!this._setNewSpec(x,S))return;Pt(T.theme,this._spec.theme)?Pt(this._spec.background,T.background)||(E.reMake=!0,E.changeBackground=!0):E.changeTheme=!0;const P=this._shouldChartResize(T);if(E.reSize=P,(A=(w=this._compiler)===null||w===void 0?void 0:w.getVGrammarView())===null||A===void 0||A.updateLayoutTag(),this._spec.type!==T.type)return E.reMake=!0,E.reTransformSpec=!0,E.change=!0,E.changeTheme=!0,E;this._initChartSpec(this._spec,"updateSpec");const O=$g(this._chart.updateSpec(this._spec),E);return C?Object.assign(Object.assign({},O),C):O},this._option=se(this._option,{animation:e.animation!==!1},t),this._onError=(n=this._option)===null||n===void 0?void 0:n.onError;const h=this._option,{dom:d,renderCanvas:p,mode:f,stage:g,poptip:m}=h,y=egt(h,["dom","renderCanvas","mode","stage","poptip"]),b=vl(f);b?Zft():f==="node"&&Jft(),b&&d&&(this._container=be(d)?st.getElementById(d):d),p&&(this._canvas=p),g&&(this._stage=g),f==="node"||this._container||this._canvas||this._stage?(this._viewBox=this._option.viewBox,this._currentThemeName=vu.getCurrentThemeName(),this._setNewSpec(e),this._updateCurrentTheme(),this._currentSize=this.getCurrentSize(),this._compiler=new Cft({dom:(r=this._container)!==null&&r!==void 0?r:"none",canvas:p},Object.assign(Object.assign({mode:this._option.mode,stage:g,pluginList:m!==!1?["poptipForText"]:[]},y),{background:this._getBackground(),onError:this._onError})),this._compiler.setSize(this._currentSize.width,this._currentSize.height),this._eventDispatcher=new yft(this,this._compiler),this._event=new wO(this._eventDispatcher,f),this._compiler.initView(),this._setFontFamilyTheme((a=this._currentTheme)===null||a===void 0?void 0:a.fontFamily),this._initDataSet(this._option.dataSet),this._autoSize=!!b&&((l=(o=e.autoFit)!==null&&o!==void 0?o:this._option.autoFit)===null||l===void 0||l),this._bindResizeEvent(),this._bindVGrammarViewEvent(),this._initChartPlugin(),ho.registerInstance(this),(u=(c=this._option.performanceHook)===null||c===void 0?void 0:c.afterCreateVChart)===null||u===void 0||u.call(c,this)):(s=this._option)===null||s===void 0||s.onError("please specify container or renderCanvas!")}_setNewSpec(e,t){return!!e&&(be(e)&&(e=JSON.parse(e)),t&&this._originalSpec&&(e=Pe({},this._originalSpec,e)),this._originalSpec=e,this._spec=this._getSpecFromOriginalSpec(),!0)}_getSpecFromOriginalSpec(){var e;const t=aB(this._originalSpec);return t.data=(e=t.data)!==null&&e!==void 0?e:[],t}_initChartSpec(e,t){var n,s;fw.getFunctionList()&&fw.getFunctionList().length&&(e=oB(e,fw)),this._spec=e,this._chartSpecTransformer||(this._chartSpecTransformer=X.createChartSpecTransformer(this._spec.type,this._getChartOption(this._spec.type))),(n=this._chartSpecTransformer)===null||n===void 0||n.transformSpec(this._spec),this._chartPluginApply("onAfterChartSpecTransform",this._spec,t),this._specInfo=(s=this._chartSpecTransformer)===null||s===void 0?void 0:s.transformModelSpec(this._spec),this._chartPluginApply("onAfterModelSpecTransform",this._spec,this._specInfo,t)}_updateSpecInfo(){var e;this._chartSpecTransformer||(this._chartSpecTransformer=X.createChartSpecTransformer(this._spec.type,this._getChartOption(this._spec.type))),this._specInfo=(e=this._chartSpecTransformer)===null||e===void 0?void 0:e.createSpecInfo(this._spec)}_initChart(e){var t,n,s;if(!this._compiler)return void((t=this._option)===null||t===void 0||t.onError("compiler is not initialized"));if(this._chart)return void((n=this._option)===null||n===void 0||n.onError("chart is already initialized"));const r=X.createChart(e.type,e,this._getChartOption(e.type));r?(this._chart=r,this._chart.setCanvasRect(this._currentSize.width,this._currentSize.height),this._chart.created(),this._chart.init(),this._event.emit(ke.initialized,{chart:r,vchart:this})):(s=this._option)===null||s===void 0||s.onError("init chart fail")}_releaseData(){this._dataSet&&(this._dataSet.dataViewMap={},this._dataSet=null)}_bindVGrammarViewEvent(){this._compiler&&(this._compiler.getVGrammarView().addEventListener(Ee.ALL_ANIMATION_END,()=>{this._event.emit(ke.animationFinished,{chart:this._chart,vchart:this})}),this._compiler.getVGrammarView().addEventListener(Ee.AFTER_VRENDER_NEXT_RENDER,()=>{this._event.emit(ke.renderFinished,{chart:this._chart,vchart:this})}))}_bindResizeEvent(){var e,t;if(this._autoSize){if(this._onResize=Hu(this._doResize,(e=this._option.resizeDelay)!==null&&e!==void 0?e:100),this._container){const n=window.ResizeObserver;n&&(this._observer=new n(this._onResize),(t=this._observer)===null||t===void 0||t.observe(this._container))}window.addEventListener("resize",this._onResize)}}_unBindResizeEvent(){this._autoSize&&(window.removeEventListener("resize",this._onResize),this._observer&&(this._observer.disconnect(),this._observer=null))}getCurrentSize(){var e,t,n,s;return tce(this._spec,{container:this._container,canvas:this._canvas,mode:this._getMode(),modeParams:this._option.modeParams},{width:(t=(e=this._currentSize)===null||e===void 0?void 0:e.width)!==null&&t!==void 0?t:xm,height:(s=(n=this._currentSize)===null||n===void 0?void 0:n.height)!==null&&s!==void 0?s:Sm})}_initDataSet(e){this._dataSet=e instanceof Td?e:new Td,bu(this._dataSet,"dataview",IP),bu(this._dataSet,"array",Vne),Fe(this._dataSet,"copyDataView",AO);for(const t in X.transforms)Fe(this._dataSet,t,X.transforms[t]);for(const t in X.dataParser)bu(this._dataSet,t,X.dataParser[t])}updateCustomConfigAndRerender(e,t,n={}){if(!this._isReleased&&e)return ee(e)&&(e=e()),e.reAnimate&&(this.stopAnimation(),this._updateAnimateState(!0)),this._reCompile(e),t?this._renderSync(n):this._renderAsync(n)}_updateCustomConfigAndRecompile(e,t={}){return!!e&&(this._reCompile(e),this._beforeRender(t))}_reCompile(e,t){var n,s,r,a,o,l,c,u,h,d,p,f;if(e.reMake)this._releaseData(),this._initDataSet(),this._chartSpecTransformer=null,(n=this._chart)===null||n===void 0||n.release(),this._chart=null,e.changeTheme?(this._setCurrentTheme(),this._setFontFamilyTheme((s=this._currentTheme)===null||s===void 0?void 0:s.fontFamily)):e.changeBackground&&((r=this._compiler)===null||r===void 0||r.setBackground(this._getBackground())),(a=this._compiler)===null||a===void 0||a.releaseGrammar(((o=this._option)===null||o===void 0?void 0:o.animation)===!1||((l=this._spec)===null||l===void 0?void 0:l.animation)===!1),this._userEvents.forEach(g=>{var m;return(m=this._event)===null||m===void 0?void 0:m.on(g.eType,g.query,g.handler)}),e.reSize&&this._doResize();else if(e.changeTheme?(this._setCurrentTheme(),this._setFontFamilyTheme((c=this._currentTheme)===null||c===void 0?void 0:c.fontFamily)):e.changeBackground&&((u=this._compiler)===null||u===void 0||u.setBackground(this._getBackground())),e.reCompile&&((h=this._compiler)===null||h===void 0||h.clear({chart:this._chart,vChart:this},((d=this._option)===null||d===void 0?void 0:d.animation)===!1||((p=this._spec)===null||p===void 0?void 0:p.animation)===!1),(f=this._compiler)===null||f===void 0||f.compile({chart:this._chart,vChart:this},{})),e.reSize){const{width:g,height:m}=this.getCurrentSize();this._chart.onResize(g,m,!1),this._compiler.resize(g,m,!1)}}_beforeRender(e={}){var t,n,s,r,a,o,l,c;if(this._isReleased)return!1;if(this._chart)return!0;const{transformSpec:u,actionSource:h}=e;return u&&this._initChartSpec(this._spec,"render"),this._chartPluginApply("onBeforeInitChart",this._spec,h),(n=(t=this._option.performanceHook)===null||t===void 0?void 0:t.beforeInitializeChart)===null||n===void 0||n.call(t,this),this._initChart(this._spec),(r=(s=this._option.performanceHook)===null||s===void 0?void 0:s.afterInitializeChart)===null||r===void 0||r.call(s,this),!(!this._chart||!this._compiler)&&((o=(a=this._option.performanceHook)===null||a===void 0?void 0:a.beforeCompileToVGrammar)===null||o===void 0||o.call(a),this._compiler.compile({chart:this._chart,vChart:this},{performanceHook:this._option.performanceHook}),(c=(l=this._option.performanceHook)===null||l===void 0?void 0:l.afterCompileToVGrammar)===null||c===void 0||c.call(l),!0)}_afterRender(){return!this._isReleased&&(this._updateAnimateState(),this._event.emit(ke.rendered,{chart:this._chart,vchart:this}),!0)}renderSync(e){return this._renderSync({morphConfig:e,transformSpec:!0,actionSource:"render"})}renderAsync(e){return Ko(this,void 0,void 0,function*(){return this._renderAsync({morphConfig:e,transformSpec:!0,actionSource:"render"})})}_renderAsync(e={}){return Ko(this,void 0,void 0,function*(){return this._renderSync(e)})}_updateAnimateState(e){var t,n;if(this._option.animation){const s=e?wn.appear:wn.update;(t=this._chart)===null||t===void 0||t.getAllRegions().forEach(r=>{var a;(a=r.animate)===null||a===void 0||a.updateAnimateState(s,!0)}),(n=this._chart)===null||n===void 0||n.getAllComponents().forEach(r=>{var a;(a=r.animate)===null||a===void 0||a.updateAnimateState(s,!0)})}}release(){var e,t,n,s;!((e=this._onResize)===null||e===void 0)&&e.cancel&&this._onResize.cancel(),this._chartPluginApply("releaseAll"),this._chartPlugin=null,this._chartSpecTransformer=null,(t=this._chart)===null||t===void 0||t.release(),(n=this._eventDispatcher)===null||n===void 0||n.release(),(s=this._compiler)===null||s===void 0||s.release(),this._unBindResizeEvent(),this._releaseData(),this._onError=null,this._onResize=null,this._container=null,this._currentTheme=null,this._option=null,this._chart=null,this._compiler=null,this._spec=null,this._specInfo=null,this._originalSpec=null,this._userEvents=null,this._event=null,this._eventDispatcher=null,this._isReleased=!0,ho.unregisterInstance(this)}updateData(e,t,n,s){return Ko(this,void 0,void 0,function*(){return this.updateDataSync(e,t,n,s)})}_updateDataById(e,t,n){const s=this._spec.data.find(r=>r.name===e||r.id===e);s?s.id===e?s.values=t:s.name===e&&s.parse(t,n):ie(t)?this._spec.data.push({id:e,values:t}):this._spec.data.push(t)}updateDataInBatches(e){return Ko(this,void 0,void 0,function*(){return this._chart?(this._chart.updateFullData(e.map(({id:t,data:n,options:s})=>({id:t,values:n,parser:s}))),this._chart.updateGlobalScaleDomain(),this._compiler.render(),this):(this._spec.data=q(this._spec.data),e.forEach(({id:t,data:n,options:s})=>{this._updateDataById(t,n,s)}),this)})}updateDataSync(e,t,n,s){return B(this._dataSet)?this:this._chart?(s!=null&&s.reAnimate&&(this.stopAnimation(),this._updateAnimateState(!0)),this._chart.updateData(e,t,!0,n),this._compiler.render(),this):(this._spec.data=q(this._spec.data),this._updateDataById(e,t,n),this)}updateFullDataSync(e,t=!0,n){if(this._chart)return n!=null&&n.reAnimate&&(this.stopAnimation(),this._updateAnimateState(!0)),this._chart.updateFullData(e),t&&this._compiler.render(),this;const s=q(this._spec.data);return q(e).forEach(r=>{const{id:a,values:o,parser:l,fields:c}=r,u=s.find(h=>h.name===a);if(u)u instanceof Rt?(u.setFields(Ta(c)),u.parse(o,Ta(l))):(u.values=o,F(l)&&(u.parser=l),F(c)&&(u.fields=c));else{const h=x4(r,this._dataSet,s);ie(this._spec.data)&&this._spec.data.push(h)}}),this}updateFullData(e,t=!0){return Ko(this,void 0,void 0,function*(){return this.updateFullDataSync(e,t)})}updateSpec(e,t=!1,n,s){return Ko(this,void 0,void 0,function*(){const r=this._updateSpec(e,t,s);return r?(yield this.updateCustomConfigAndRerender(r,!1,{morphConfig:n,transformSpec:r.reTransformSpec,actionSource:"updateSpec"}),this):this})}updateSpecSync(e,t=!1,n,s){const r=this._updateSpec(e,t,s);return r?(this.updateCustomConfigAndRerender(r,!0,{morphConfig:n,transformSpec:r.reTransformSpec,actionSource:"updateSpec"}),this):this}updateSpecAndRecompile(e,t=!1,n={}){const s=this._updateSpec(e,t);return this._updateCustomConfigAndRecompile(s,Object.assign({actionSource:"updateSpecAndRecompile"},n))}updateModelSpec(e,t,n=!1,s){return Ko(this,void 0,void 0,function*(){if(!t||!this._spec)return this;if(be(t)&&(t=JSON.parse(t)),ee(e)||JG(this._spec,e,t,n),this._chart){const r=this._chart.getModelInFilter(e);if(r)return this._updateModelSpec(r,t,!1,n,s)}return this})}updateModelSpecSync(e,t,n=!1,s){if(!t||!this._spec)return this;if(be(t)&&(t=JSON.parse(t)),ee(e)||JG(this._spec,e,t,n),this._chart){const r=this._chart.getModelInFilter(e);if(r)return this._updateModelSpec(r,t,!0,n,s)}return this}_updateModelSpec(e,t,n=!1,s=!1,r){s&&(t=Pe({},e.getSpec(),t));const a=e.updateSpec(t);return e.reInit(t),(a.change||a.reCompile||a.reMake||a.reSize||a.reRender)&&this._chart.reDataFlow(),this.updateCustomConfigAndRerender(a,n,{morphConfig:r,transformSpec:!1,actionSource:"updateModelSpec"})}resize(e,t){return Ko(this,void 0,void 0,function*(){return this.resizeSync(e,t)})}resizeSync(e,t){var n,s;return this._beforeResize(e,t)?((s=(n=this._compiler).resize)===null||s===void 0||s.call(n,e,t),this._afterResize()):this}_beforeResize(e,t){var n,s,r,a;if(!this._chart||!this._compiler)return!1;const o=this._chart.getCanvasRect();return(!o||o.width!==e||o.height!==t)&&(this._chartPluginApply("onBeforeResize",e,t),(s=(n=this._option.performanceHook)===null||n===void 0?void 0:n.beforeResizeWithUpdate)===null||s===void 0||s.call(n),this._chart.onResize(e,t,!1),(a=(r=this._option.performanceHook)===null||r===void 0?void 0:r.afterResizeWithUpdate)===null||a===void 0||a.call(r),!0)}_afterResize(){return this._isReleased||this._event.emit(ke.afterResize,{chart:this._chart}),this}updateViewBox(e,t=!0,n=!0){return this._chart&&this._compiler?(this._viewBox=e,this._chart.updateViewBox(e,n),n&&(this._compiler.render(),this._chart.onEvaluateEnd()),this._compiler.updateViewBox(e,t),this):this}on(e,t,n){var s;this._userEvents&&(this._userEvents.push({eType:e,query:typeof t=="function"?null:t,handler:typeof t=="function"?t:n}),(s=this._event)===null||s===void 0||s.on(e,t,n))}off(e,t){var n;if(this._userEvents&&this._userEvents.length!==0)if(t){const s=this._userEvents.findIndex(r=>r.eType===e&&r.handler===t);s>=0&&(this._userEvents.splice(s,1),(n=this._event)===null||n===void 0||n.off(e,t))}else this._userEvents.forEach(s=>{var r;s.eType===e&&((r=this._event)===null||r===void 0||r.off(e,s.handler))}),this._userEvents=this._userEvents.filter(s=>s.eType!==e)}updateState(e,t){this._chart&&this._chart.updateState(e,t)}setSelected(e,t,n){this._chart&&this._chart.setSelected(e,t,n)}setHovered(e,t,n){this._chart&&this._chart.setHovered(e,t,n)}clearState(e){this._chart&&this._chart.clearState(e)}clearAllStates(){this._chart&&this._chart.clearAllStates()}clearSelected(){this._chart&&this._chart.clearSelected()}clearHovered(){this._chart&&this._chart.clearHovered()}_updateCurrentTheme(e){var t,n,s;const r=this._option.theme,a=(t=this._spec)===null||t===void 0?void 0:t.theme,o=(n=this._spec)===null||n===void 0?void 0:n.type;e&&(this._currentThemeName=e);const l=(u,h)=>{var d;return!((d=h.chart)===null||d===void 0)&&d[u]&&(h=uw({},h,h.chart[u])),h};let c;if(Te(r)&&Te(a))c=ah(this._currentThemeName,!0),this._currentTheme=l(o,c);else if(be(r)&&(!a||be(a))||be(a)&&(!r||be(r))){const u=uw({},ah(this._currentThemeName,!0),ah(r,!0),ah(a,!0));this._currentTheme=l(o,u)}else{const u=uw({},ah(this._currentThemeName),ah(r),ah(a));this._currentTheme=_O(l(o,u))}crt(et(this._currentTheme,"component.poptip")),(s=this._compiler)===null||s===void 0||s.setBackground(this._getBackground())}_shouldChartResize(e){var t,n;let s=!1;B(this._spec.width)?!B(e.width)&&(this._spec.width=e.width):this._spec.width!==e.width&&(s=!0),B(this._spec.height)?!B(e.height)&&(this._spec.height=e.height):this._spec.height!==e.height&&(s=!0);const r=this._autoSize;return this._autoSize=!!vl(this._option.mode)&&((n=(t=this._spec.autoFit)!==null&&t!==void 0?t:this._option.autoFit)===null||n===void 0||n),this._autoSize!==r&&(s=!0),s}_getBackground(){return(typeof this._spec.background=="string"||Ke(this._spec.background)&&this._spec.background.gradient?this._spec.background:null)||this._currentTheme.background||this._option.background}getCurrentTheme(){return ah(this._currentThemeName)}getCurrentThemeName(){return this._currentThemeName}setCurrentTheme(e){var t;return Ko(this,void 0,void 0,function*(){if(!vu.themeExist(e))return this;const n=this._setCurrentTheme(e);return this._setFontFamilyTheme((t=this._currentTheme)===null||t===void 0?void 0:t.fontFamily),yield this.updateCustomConfigAndRerender(n,!1,{transformSpec:!1,actionSource:"setCurrentTheme"}),this})}setCurrentThemeSync(e){var t;if(!vu.themeExist(e))return this;const n=this._setCurrentTheme(e);return this._setFontFamilyTheme((t=this._currentTheme)===null||t===void 0?void 0:t.fontFamily),this.updateCustomConfigAndRerender(n,!0,{transformSpec:!1,actionSource:"setCurrentTheme"}),this}_setCurrentTheme(e){var t;return this._updateCurrentTheme(e),this._initChartSpec(this._getSpecFromOriginalSpec(),"setCurrentTheme"),(t=this._chart)===null||t===void 0||t.setCurrentTheme(),{change:!0,reMake:!1}}_setFontFamilyTheme(e){var t;e&&((t=this.getStage())===null||t===void 0||t.setTheme({text:{fontFamily:e}}))}_getTooltipComponent(){var e;return(e=this._chart)===null||e===void 0?void 0:e.getComponentsByType(oe.tooltip)[0]}setTooltipHandler(e){var t,n;this._context.tooltipHandler=e;const s=this._getTooltipComponent();s&&((n=(t=s.tooltipHandler)===null||t===void 0?void 0:t.release)===null||n===void 0||n.call(t),s.tooltipHandler=e)}getTooltipHandlerByUser(){var e;return(e=this._context)===null||e===void 0?void 0:e.tooltipHandler}getTooltipHandler(){const e=this._getTooltipComponent();return e?e.tooltipHandler:this._context.tooltipHandler}showTooltip(e,t){var n;const s=this._getTooltipComponent();return(n=F(e)&&(s==null?void 0:s.showTooltip(e,t))!=="none")!==null&&n!==void 0&&n}hideTooltip(){var e;const t=this._getTooltipComponent();return(e=t==null?void 0:t.hideTooltip())!==null&&e!==void 0&&e}getLegendDataById(e){var t;const n=(t=this._chart)===null||t===void 0?void 0:t.getComponentByUserId(e);return n?n.getLegendData():[]}getLegendDataByIndex(e=0){var t;const n=(t=this._chart)===null||t===void 0?void 0:t.getComponentsByType(oe.discreteLegend);return n&&n[e]?n[e].getLegendData():[]}getLegendSelectedDataById(e){var t;const n=(t=this._chart)===null||t===void 0?void 0:t.getComponentByUserId(e);return n?n.getSelectedData():[]}getLegendSelectedDataByIndex(e=0){var t;const n=(t=this._chart)===null||t===void 0?void 0:t.getComponentsByType(oe.discreteLegend);return n&&n[e]?n[e].getSelectedData():[]}setLegendSelectedDataById(e,t){var n;const s=(n=this._chart)===null||n===void 0?void 0:n.getComponentByUserId(e);s&&s.setSelectedData(t)}setLegendSelectedDataByIndex(e=0,t){var n;const s=(n=this._chart)===null||n===void 0?void 0:n.getComponentsByType(oe.discreteLegend);s&&s[e]&&s[e].setSelectedData(t)}getDataURL(){var e;return Ko(this,void 0,void 0,function*(){const t=this.getStage();if(this._chart&&t){t.render();const n=this._chart.getCanvas();return yield Tft(n,{onError:this._onError})}return(e=this._option)===null||e===void 0||e.onError(new ReferenceError("render is not defined")),null})}exportImg(e){var t,n;return Ko(this,void 0,void 0,function*(){if(!vl(this._option.mode))return void((t=this._option)===null||t===void 0||t.onError(new TypeError("non-browser environment can not export img")));const s=yield this.getDataURL();s?Aft(e,s):(n=this._option)===null||n===void 0||n.onError(new ReferenceError("render is not defined"))})}exportCanvas(){var e;const t=this.getStage();if(this._chart&&t)return t.toCanvas();(e=this._option)===null||e===void 0||e.onError(new ReferenceError("render is not defined"))}getImageBuffer(){var e,t;if(this._option.mode!=="node")return void((e=this._option)===null||e===void 0||e.onError(new TypeError("getImageBuffer() now only support node environment.")));const n=this.getStage();return n?(n.render(),n.window.getImageBuffer()):((t=this._option)===null||t===void 0||t.onError(new ReferenceError("render is not defined")),null)}setLayout(e){var t;this._option.layout=e,(t=this._chart)===null||t===void 0||t.setLayout(e)}reLayout(){var e;(e=this._chart)===null||e===void 0||e.setLayoutTag(!0)}getCompiler(){return this._compiler}getChart(){return this._chart}getStage(){return this._compiler.getStage()}getCanvas(){var e;return(e=this._compiler)===null||e===void 0?void 0:e.getCanvas()}getContainer(){var e;if(F(this._container))return this._container;let t;return t=be(this._canvas)?st.getElementById(this._canvas):this._canvas,F(t)?t.parentElement:(e=this.getCanvas())===null||e===void 0?void 0:e.parentElement}getComponents(){return this._chart.getAllComponents()}getScale(e){var t;const n=(t=this._chart)===null||t===void 0?void 0:t.getGlobalScale();return n==null?void 0:n.getScale(e)}setDimensionIndex(e,t={}){var n;return(n=this._chart)===null||n===void 0?void 0:n.setDimensionIndex(e,t)}stopAnimation(){var e,t,n;(n=(t=(e=this._compiler)===null||e===void 0?void 0:e.getVGrammarView())===null||t===void 0?void 0:t.animate)===null||n===void 0||n.stop()}pauseAnimation(){var e,t,n;(n=(t=(e=this._compiler)===null||e===void 0?void 0:e.getVGrammarView())===null||t===void 0?void 0:t.animate)===null||n===void 0||n.pause()}resumeAnimation(){var e,t,n;(n=(t=(e=this._compiler)===null||e===void 0?void 0:e.getVGrammarView())===null||t===void 0?void 0:t.animate)===null||n===void 0||n.resume()}convertDatumToPosition(e,t={},n=!1,s){var r;if(!this._chart||Te(e))return null;const{seriesId:a,seriesIndex:o=0}=t;let l;if(F(a)?l=this._chart.getSeriesInUserId(a):F(o)&&(l=(r=this._chart.getSeriesInIndex([o]))===null||r===void 0?void 0:r[0]),l){const c=Object.keys(e),u=l.getViewData().latestData.find(p=>c.every(f=>p[f]==e[f])),h=l.getRegion().getLayoutStartPoint();let d;return d=u?l.dataToPosition(u,s):l.dataToPosition(e,s),d?NG(d,h,n):null}return null}convertValueToPosition(e,t,n=!1){var s,r;if(!this._chart||B(e)||Te(t))return null;if(!ie(e)){const{axisId:c,axisIndex:u}=t;let h;if(F(c)?h=this._chart.getComponentsByKey("axes").find(p=>p.userId===c):F(u)&&(h=(s=this._chart.getComponentsByKey("axes"))===null||s===void 0?void 0:s[u]),!h)return Yr("Please check whether the `axisId` or `axisIndex` is set!"),null;const d=h==null?void 0:h.valueToPosition(e);if(n){const p=h.getLayoutStartPoint(),f=h.getOrient();return d+(f==="bottom"||f==="top"?p.x:p.y)}return d}const{seriesId:a,seriesIndex:o}=t;let l;return F(a)?l=this._chart.getSeriesInUserId(a):F(o)&&(l=(r=this._chart.getSeriesInIndex([o]))===null||r===void 0?void 0:r[0]),l?NG(l.valueToPosition(e[0],e[1]),l.getRegion().getLayoutStartPoint(),n):(Yr("Please check whether the `seriesId` or `seriesIndex` is set!"),null)}getFunction(e){return ma.instance().getFunction(e)}registerFunction(e,t){e&&t&&ma.instance().registerFunction(e,t)}unregisterFunction(e){e&&ma.instance().unregisterFunction(e)}getFunctionList(){return ma.instance().getFunctionNameList()}setRuntimeSpec(e){this._spec=e,this._updateSpecInfo()}updateIndicatorDataById(e,t){var n;const s=(n=this._chart)===null||n===void 0?void 0:n.getComponentByUserId(e);s&&s.updateDatum(t)}updateIndicatorDataByIndex(e=0,t){var n;const s=(n=this._chart)===null||n===void 0?void 0:n.getComponentsByType(oe.indicator);s&&s[e]&&s[e].updateDatum(t)}geoZoomByIndex(e=0,t,n){var s,r;const a=(s=this._chart)===null||s===void 0?void 0:s.getRegionsInQuerier({regionIndex:e})[0],o=(r=this._chart)===null||r===void 0?void 0:r.getComponentsByType(oe.geoCoordinate),l=o==null?void 0:o.find(c=>{var u;return(u=c.getRegions())===null||u===void 0?void 0:u.includes(a)});l&&l.dispatchZoom(t,n)}geoZoomById(e,t,n){var s,r;const a=(s=this._chart)===null||s===void 0?void 0:s.getRegionsInQuerier({regionId:e})[0],o=(r=this._chart)===null||r===void 0?void 0:r.getComponentsByType(oe.geoCoordinate),l=o==null?void 0:o.find(c=>{var u;return(u=c.getRegions())===null||u===void 0?void 0:u.includes(a)});l&&l.dispatchZoom(t,n)}_initChartPlugin(){const e=X.getChartPlugins();e.length>0&&(this._chartPlugin=new Qft(this),this._chartPlugin.load(e.map(t=>new t)),this._chartPluginApply("onInit",this._spec))}_chartPluginApply(e,...t){this._chartPlugin&&this._chartPlugin[e]&&this._chartPlugin[e].apply(this._chartPlugin,t)}_getMode(){return this._option.mode||Sn["desktop-browser"]}_getChartOption(e){return{type:e,globalInstance:this,eventDispatcher:this._eventDispatcher,dataSet:this._dataSet,container:this._container,canvas:this._canvas,map:new Map,mode:this._getMode(),modeParams:this._option.modeParams,getCompiler:()=>this._compiler,performanceHook:this._option.performanceHook,viewBox:this._viewBox,animation:this._option.animation,getTheme:()=>{var t;return(t=this._currentTheme)!==null&&t!==void 0?t:{}},getSpecInfo:()=>{var t;return(t=this._specInfo)!==null&&t!==void 0?t:{}},layout:this._option.layout,onError:this._onError,disableTriggerEvent:this._option.disableTriggerEvent===!0}}};_a.InstanceManager=ho,_a.ThemeManager=vu,_a.globalConfig={uniqueTooltip:!0},_a.Utils=qft,_a.vglobal=st;X.registerRegion("region",Zm),X.registerLayout("base",A4),hce(),Kd.useRegisters([sft]),Eut(),Tut(),c4(ZG.name,ZG),ii.getInstance(da.Error);const I0=(i,e)=>{const t=e.beforeCall();return i&&i.forEach((n,s)=>e.call(n,s,t)),t.keyMap&&(t.keyMap.clear(),t.keyMap=null),i};function Nr(i,e){return et(e,`component.${i}`)}function Pc(i,e,t,n){if(i)return{formatFunc:i,args:[t,n]};const s=X.getFormatter();return e&&s?{formatFunc:s,args:[t,n,e]}:{}}const Pl=(i,e,t,n)=>{if(B(i[e]))return;const s=ie(i[e]),r=s?i[e]:[i[e]],a=[];return r.forEach((o,l)=>{!o||n&&!n(o)||a.push({spec:o,specPath:s?[e,l]:[e],specInfoPath:["component",e,l],type:t})}),a},Rp=(i,e,t,n)=>{let s;if(s=ee(i)?i(e,t):i,n){const{formatFunc:r,args:a}=Pc(void 0,n,i,e);r&&a&&(s=r(...a))}return s},RK=(i,e,t)=>B(i)?i:ee(i)?i(e,t):i;function tgt(i){var e;const t=!((e=i[0])===null||e===void 0)&&e.series?[{data:i,value:""}]:i;for(const{data:n}of t)for(const{datum:s}of n)for(const r of s??[])if(r)return r}const igt=i=>{var e,t,n;if((i==null?void 0:i.visible)===!1)return[];const s={mark:((e=i==null?void 0:i.mark)===null||e===void 0?void 0:e.visible)!==!1,dimension:((t=i==null?void 0:i.dimension)===null||t===void 0?void 0:t.visible)!==!1,group:((n=i==null?void 0:i.group)===null||n===void 0?void 0:n.visible)!==!1};return F(i==null?void 0:i.activeType)&&Object.keys(s).forEach(r=>{var a;s[r]=(a=i==null?void 0:i.activeType)===null||a===void 0?void 0:a.includes(r)}),Object.keys(s).filter(r=>s[r])},k4=(i,e)=>!e||e.visible!==!1&&(!e[i]||e[i].visible!==!1)&&!(e.activeType&&!(ie(e.activeType)?e.activeType.includes(i):e.activeType===i));function ngt(i){return B(i.mark)&&B(i.model)&&B(i.datum)}function yB(i,e,t,n,s,r){const a=o=>{if(o){const l={datum:s},c=B(o.key)&&B(o.value)&&!Te(o)?Object.assign(Object.assign(Object.assign({},n),t),o):Object.assign(Object.assign({},n),o);Object.keys(c).forEach(u=>{u==="key"?l.key=_B(Rp(c.key,s,r,c.keyFormatter),c.keyTimeFormat,c.keyTimeFormatMode):u==="value"?l.value=_B(Rp(c.value,s,r,c.valueFormatter),c.valueTimeFormat,c.valueTimeFormatMode):l[u]=Rp(c[u],s,r)}),l.visible!==!1&&(F(l.key)||F(l.value))&&i.push(l)}};ie(e)?e.forEach(o=>{a(o)}):a(e)}function LK(i,e,t,n,s,r,a){ee(e)?yB(i,e(s,a),t,n,r,a):e&&yB(i,e,t,n,r,a)}function sgt(i,e,t,n,s,r){if(s&&s.length){const a=[];return s.forEach(o=>{ie(i)?i.forEach(l=>{LK(a,l,e,t,n,o,r)}):ee(i)?LK(a,i,e,t,n,o,r):i&&yB(a,i,e,t,o,r)}),a}return null}function rgt(i){if(!i||!i.length)return null;const e=[];return i.forEach(({content:t})=>{t&&t.forEach(n=>{e.push(n)})}),e.length?Object.assign(Object.assign({},i[0]),{content:e}):i[0]}const _B=(i,e,t)=>{if(!e&&!t)return typeof i!="object"?i==null?void 0:i.toString():i;const n=ul.getInstance();return e=e||"%Y%m%d",((t=t||"local")==="local"?n.timeFormat:n.timeUTCFormat)(e,i)};class ar{constructor(e){this.activeTriggerSet={mark:new Set,group:new Set},this.ignoreTriggerSet={mark:new Set},this._getSeriesCacheInfo=()=>{var t,n,s;const{series:r}=this,a=r.getSeriesField();return{seriesFields:F(a)?q(a):(t=r.getSeriesKeys())!==null&&t!==void 0?t:[],dimensionFields:(n=r.getDimensionField())!==null&&n!==void 0?n:[],measureFields:(s=r.getMeasureField())!==null&&s!==void 0?s:[],type:r.type}},this._getDimensionData=t=>{const{dimensionFields:n}=this._seriesCacheInfo;return n[0]&&(t==null?void 0:t[n[0]])},this._getMeasureData=t=>{const{measureFields:n}=this._seriesCacheInfo;return n[0]&&(t==null?void 0:t[n[0]])},this._getSeriesFieldData=t=>{const{dimensionFields:n,seriesFields:s}=this._seriesCacheInfo;if(F(s[0])&&(t!=null&&t[s[0]]))return t==null?void 0:t[s[0]];const r=n[n.length-1];return n.length>1&&(s.length===0||this.series.getSeriesKeys().length),t==null?void 0:t[r]},this._getSeriesStyle=(t,n,s)=>{var r;for(const a of q(n)){const o=(r=this.series.getSeriesStyle(t))===null||r===void 0?void 0:r(a);if(F(o))return o}return s},this.markTooltipKeyCallback=(t,n)=>this._getSeriesFieldData(t),this.markTooltipValueCallback=(t,n)=>this._getMeasureData(t),this.shapeTypeCallback=(t,n)=>{var s;return(s=this._getSeriesStyle(t,"shape",null))!==null&&s!==void 0?s:this._getSeriesStyle(t,"symbolType",this.series.getDefaultShapeType())},this.shapeColorCallback=(t,n)=>this._getSeriesStyle(t,["fill","stroke"]),this.shapeStrokeCallback=(t,n)=>this._getSeriesStyle(t,["stroke","fill"]),this.dimensionTooltipTitleCallback=(t,n)=>this._getDimensionData(t),this.groupTooltipTitleCallback=(t,n)=>this._getSeriesFieldData(t),this.groupTooltipKeyCallback=(t,n)=>{const{seriesFields:s}=this._seriesCacheInfo;let r=this._seriesCacheInfo.dimensionFields;return s[0]&&(r=r.filter(a=>a!==s[0])),r.map(a=>t==null?void 0:t[a]).join("-")},this.getHasShape=t=>!!t,this.series=e,this.updateTooltipSpec()}updateTooltipSpec(){var e;const t=(e=this.series.getSpec())===null||e===void 0?void 0:e.tooltip;this.spec=t,this._seriesCacheInfo=this._getSeriesCacheInfo()}getShapeAttrs(e,t,n){var s,r,a,o,l,c,u,h,d,p,f,g;const m=t?"content":"title",y=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(s=n==null?void 0:n.style)===null||s===void 0?void 0:s.shape),n==null?void 0:n[e]),(r=n==null?void 0:n[e])===null||r===void 0?void 0:r[m]),(a=this.spec)===null||a===void 0?void 0:a[e]),(l=(o=this.spec)===null||o===void 0?void 0:o[e])===null||l===void 0?void 0:l[m]);return{shapeType:(c=y.shapeType)!==null&&c!==void 0?c:this.shapeTypeCallback,shapeFill:(h=(u=y.shapeFill)!==null&&u!==void 0?u:y.shapeColor)!==null&&h!==void 0?h:this.shapeColorCallback,shapeStroke:(d=y.shapeStroke)!==null&&d!==void 0?d:this.shapeStrokeCallback,shapeHollow:(p=y.shapeHollow)!==null&&p!==void 0&&p,shapeLineWidth:y.shapeLineWidth,shapeSize:(f=y.shapeSize)!==null&&f!==void 0?f:y.size,hasShape:(g=y.hasShape)!==null&&g!==void 0?g:this.getHasShape(t)}}enableByType(e){return!0}getDefaultContentList(e){return[this.getDefaultContentPattern(e)]}getContentList(e,t,n,s,r,a){var o;return sgt((o=t==null?void 0:t.content)!==null&&o!==void 0?o:this.getDefaultContentList(e),this.getDefaultContentPattern(e),n,s,r,a)}getTitleResult(e,t,n,s,r){let a=ee(t)?t(s,r):t;if(a?B(a.value)&&(a=Object.assign(Object.assign({},this.getDefaultTitlePattern(e)),a)):a=this.getDefaultTitlePattern(e),a&&a.visible!==!1){const o=tgt(s),l={visible:Rp(a.visible,o,r),value:_B(Rp(a.value,o,r,a.valueFormatter),a.valueTimeFormat,a.valueTimeFormatMode),valueStyle:Rp(a.valueStyle,o,r),hasShape:a.hasShape};return Object.keys(n).forEach(c=>{l[c]=Rp(n[c],o,r)}),l}return{hasShape:!1,visible:!1}}getTooltipData(e,t,n,s,r){var a,o;if(!(this.enableByType(e)&&k4(e,this.spec)&&(e!=="dimension"||s&&s.length)))return null;const l=(o=(a=this.spec)===null||a===void 0?void 0:a[e])!==null&&o!==void 0?o:t==null?void 0:t[e],c=this.getShapeAttrs(e,!0,t),u=this.getShapeAttrs(e,!1,t);let h;return e==="dimension"?(h=[],this.getContentList(e,l,c,n,s,r).forEach(d=>{h.push(d)})):h=this.getContentList(e,l,c,n,s,r),{visible:!0,activeType:e,data:n,title:this.getTitleResult(e,l==null?void 0:l.title,u,n,r),content:h}}getDefaultTitlePattern(e){return{key:void 0,value:e==="group"?this.groupTooltipTitleCallback:this.dimensionTooltipTitleCallback}}getDefaultContentPattern(e){return{seriesId:this.series.id,key:e==="group"?this.groupTooltipKeyCallback:this.markTooltipKeyCallback,value:this.markTooltipValueCallback}}}const agt={min:i=>i.length?Mn(i.map(e=>1*e)):0,max:i=>i.length?an(i.map(e=>1*e)):0,"array-min":i=>i.length?Mn(i.map(e=>1*e)):0,"array-max":i=>i.length?an(i.map(e=>1*e)):0,values:i=>{const e={},t=[];for(const n of i)e[n]||(t.push(n),e[n]=1);return t}},vB=(i,e)=>{var t,n;let s=e.fields;if(ee(s)&&(s=s()),!(s!=null&&s.length)||!(i!=null&&i.length))return{};s=qm([],s);const r=e.target==="parser"?"parserData":"latestData",a=i[0][r]?i[0][r]:i||[],o=(n=(t=i[0]).getFields)===null||n===void 0?void 0:n.call(t);return pce(a,s,o)},pce=(i,e,t)=>{const n={};let s=[],r=[];return e.forEach(a=>{const o=a.key;n[o]={};const l=t==null?void 0:t[o],c=a.operations,u=c.some(p=>p==="min"||p==="max"||p==="allValid");let h=!0;s.length=0,i&&i.forEach(p=>{p&&s.push(p[o])});const d=s.length;if(u){r.length=0,s.forEach((f,g)=>{Ty(f)&&r.push(f)});const p=s;s=r,r=p,h=s.length===d}else s=c.some(p=>p==="array-min"||p==="array-max")?s.reduce((p,f)=>(f&&f.forEach(g=>{Ty(g)&&p.push(g)}),p),[]):s.filter(p=>p!==void 0);a.filter&&(s=s.filter(a.filter)),c.forEach(p=>{if(a.customize)n[o][p]=a.customize;else{if(l&&l.lockStatisticsByDomain&&!B(l.domain)){if(p==="values")return void(n[o][p]=l.domain.slice())}else if(p==="allValid")return;n[o][p]=agt[p](s),p==="array-max"&&(n[o].max=n[o][p]),p==="array-min"&&(n[o].min=n[o][p])}}),u&&(n[o].allValid=h)}),n},ogt=(i,e)=>{const{config:t}=e;if(!t)return i;const{invalidType:n,checkField:s}=t();return n!=="zero"||s&&s.length&&i.forEach(r=>{s.forEach(a=>{Ty(r[a])||(r[a]=0)})}),i};class Oc extends Ec{_compileProduct(){var e;const t=(e=this._data)===null||e===void 0?void 0:e.latestData;B(t)||F(this.getProduct())||this._initProduct([])}generateProductId(){var e;return(e=this._data)===null||e===void 0?void 0:e.name}}const f1=`${Ie}_HIERARCHY_DEPTH`,xu=`${Ie}_HIERARCHY_ROOT`,lgt=`${Ie}_HIERARCHY_ROOT_INDEX`;function Ly(){return{keyMap:new Map,needDefaultSeriesField:!this._seriesField,defaultSeriesField:this._seriesField?null:this.getSeriesKeys()[0],getKey:this.generateDefaultDataKey(this._spec.dataKey)}}function Of(i,e,t){i&&(t.needDefaultSeriesField&&(i[Wr]=t.defaultSeriesField),i[Ps]=e,i[kl]=t.getKey(i,e,t))}function T4(){return{keyMap:new Map,needDefaultSeriesField:!0,defaultSeriesField:this.getSeriesKeys()[0],getKey:this.generateDefaultDataKey(this._spec.dataKey),categoryField:this.getCategoryField()}}function OO(i,e,t,n=0,s,r){r===void 0&&(r=e),Of(i,e,t),i[f1]=n,i[xu]=s||i[t.categoryField],i[lgt]=r,i.children&&i.children.length&&i.children.forEach((a,o)=>OO(a,o,t,i[f1]+1,i[xu],r))}const Wi={label:{name:"label",type:"text"}},DK=`${Ie}_rect_x`,FK=`${Ie}_rect_x1`,BK=`${Ie}_rect_y`,jK=`${Ie}_rect_y1`,cgt={data:!0},NK={invalidType:!0,animation:!0,animationAppear:!0,animationEnter:!0,animationUpdate:!0,animationExit:!0,animationNormal:!0},ugt=i=>({type:"clipIn",options:{clipDimension:i.direction==="horizontal"?"y":"x"}}),hgt={type:"fadeIn"},dgt=i=>({type:i.direction==="horizontal"?"growPointsXIn":"growPointsYIn",options:{orient:i.direction==="horizontal"?"positive":"negative"}});function pgt(i,e){switch(e){case"grow":return dgt(i);case"fadeIn":return hgt;default:return ugt(i)}}const cc={appear:{duration:1e3,easing:"cubicOut"},update:{type:"update",duration:300,easing:"linear"},enter:{duration:300,easing:"linear"},exit:{duration:300,easing:"linear"},disappear:{duration:500,easing:"cubicIn"},state:{duration:300,easing:"linear"}},E4={appear:{type:"scaleIn"},enter:{type:"scaleIn"},exit:{type:"scaleOut"},disappear:{type:"scaleOut"}},MO={appear:{type:"fadeIn"},enter:{type:"fadeIn"},exit:{type:"fadeOut"},disappear:{type:"fadeOut"}},IO=()=>{X.registerAnimation("scaleInOut",()=>E4)},Xu=()=>{X.registerAnimation("fadeInOut",()=>MO)},fgt=()=>{X.registerAnimation("cartesianGroupClip",i=>({appear:{custom:oV,customParameters:(e,t)=>({animationType:"in",group:t.getGraphicItem(),direction:i.direction(),width:i.width(),height:i.height(),orient:i.orient()})},disappear:{custom:oV,customParameters:(e,t)=>({animationType:"out",group:t.getGraphicItem(),direction:i.direction(),width:i.width(),height:i.height(),orient:i.orient()})}}))},fce=(i,e)=>({appear:pgt(i,e),enter:{type:"fadeIn"},exit:{type:"fadeOut"},update:[{type:"update",options:{excludeChannels:["points","defined","segments"]}},{channel:["points","segments"],custom:Mre,duration:cc.update.duration,easing:cc.update.easing,customParameters:{clipRangeByDimension:i.direction==="horizontal"?"y":"x"}}],disappear:{type:"clipOut"}}),gce=()=>{X.registerAnimation("line",fce)},ggt=()=>{X.registerAnimation("area",fce)},mgt=()=>{Kd.useRegisters([$pt,zpt,Spt,Cpt,jpt,Npt,Hpt,Vpt,Upt])},mce=()=>{Kd.useRegisters([kpt,Tpt,Ept,Ppt,wpt,Apt])},yce=()=>{Kd.useRegisters([Fpt,Bpt,Lpt,Dpt])},_ce=()=>{Kd.useRegisters([Hle,Vle,Opt,Mpt,Ipt,Rpt,bpt,xpt])},vce=()=>{Kd.useRegisters([Hle,Vle])},$K=[...Object.keys(cc),"normal"];function ft(i={},e,t){const n={};for(let s=0;s<$K.length;s++){const r=$K[s],a=e?e[r]:void 0;if(a===!1)continue;if(r==="normal"){a&&(n.normal=a);continue}if(r==="state"){a!==!1&&(n.state=a??cc.state);continue}if(r!=="update"&&!a&&!i[r])continue;let o,l;o=ie(i[r])?i[r]:[Object.assign(Object.assign({},cc[r]),i[r])],r==="exit"&&o.forEach(c=>{c.controlOptions={stopWhenStateChange:!0}}),a?(l=ie(a)?a.map((c,u)=>{var h;let d=c;return VK(d)&&delete d.type,d.oneByOne&&(d=zK(d,(h=t==null?void 0:t.dataIndex)!==null&&h!==void 0?h:HK,t==null?void 0:t.dataCount)),d}):o.map((c,u)=>{var h;let d=Pe({},o[u],a);return VK(d)&&delete d.type,d.oneByOne&&(d=zK(d,(h=t==null?void 0:t.dataIndex)!==null&&h!==void 0?h:HK,t==null?void 0:t.dataCount)),d}),n[r]=l):n[r]=o}return n}function kt(i,e,t){var n,s,r,a,o,l;const c={};return F(e.animationAppear)&&(c.appear=(n=e.animationAppear[i])!==null&&n!==void 0?n:e.animationAppear),F(e.animationDisappear)&&(c.disappear=(s=e.animationDisappear[i])!==null&&s!==void 0?s:e.animationDisappear),F(e.animationEnter)&&(c.enter=(r=e.animationEnter[i])!==null&&r!==void 0?r:e.animationEnter),F(e.animationExit)&&(c.exit=(a=e.animationExit[i])!==null&&a!==void 0?a:e.animationExit),F(e.animationUpdate)&&(c.update=(o=e.animationUpdate[i])!==null&&o!==void 0?o:e.animationUpdate),F(e.animationState)&&(c.state=(l=e.animationState[i])!==null&&l!==void 0?l:e.animationState),e.animationNormal&&e.animationNormal[i]&&(c.normal=e.animationNormal[i]),_gt(c,t)}function zK(i,e,t){const{oneByOne:n,duration:s,delay:r,delayAfter:a}=i;return i.delay=(o,l,c)=>{const u=e(o,c),h=ee(s)?s(o,l,c):Z(s)?s:0,d=ee(r)?r(o,l,c):Z(r)?r:0;let p=ee(n)?n(o,l,c):n;return p===!1?d:(p=p===!0?0:p,d+u*(h+p))},i.delayAfter=(o,l,c)=>{const u=e(o,c),h=ee(s)?s(o,l,c):Z(s)?s:0,d=ee(a)?a(o,l,c):Z(a)?a:0;let p=ee(n)?n(o,l,c):n;return p===!1?d:(p=p===!0?0:p,d+((t?t():l.mark.elements.length)-u)*(h+p))},delete i.oneByOne,i}function HK(i,e){var t,n;return(t=i==null?void 0:i[Ps])!==null&&t!==void 0?t:(n=e==null?void 0:e.VGRAMMAR_ANIMATION_PARAMETERS)===null||n===void 0?void 0:n.elementIndex}function Yu(i,e){var t,n,s,r,a;if(i.animation===!1||((t=i.morph)===null||t===void 0?void 0:t.enable)===!1)return!1;const o=((s=(n=i.animationAppear)===null||n===void 0?void 0:n[e])!==null&&s!==void 0?s:i.animationAppear)!==!1,l=((a=(r=i.animationUpdate)===null||r===void 0?void 0:r[e])!==null&&a!==void 0?a:i.animationUpdate)!==!1;return!(!o||!l)}function ygt(i){return F(i.timeSlices)}function VK(i){return!ygt(i)&&F(i.channel)}function _gt(i,e){return i&&(bB(i=Ta(i),t=>{var n;return ee(t)&&((n=t.prototype)===null||n===void 0?void 0:n.constructor)!==t?(...s)=>t(...s,e):t}),i)}function bB(i,e){if(ie(i))i.forEach((t,n)=>{i[n]=e(i[n],n),bB(i[n],e)});else if(Ke(i))for(const t in i)i[t]=e(i[t],t),bB(i[t],e)}function UK(i){var e,t,n,s;const r=i.getSpec();if(r.animation===!1||!F(i.getRegion().animate))return!1;let a=(e=r.animationThreshold)!==null&&e!==void 0?e:Number.MAX_SAFE_INTEGER;return(t=i.getMarks())===null||t===void 0||t.forEach(o=>{const l=o.getMarkConfig();l&&(l.large&&l.largeThreshold&&(a=Math.min(a,l.largeThreshold)),l.progressiveThreshold&&(a=Math.min(a,l.progressiveThreshold)))}),!(((s=(n=i.getRawData())===null||n===void 0?void 0:n.latestData)===null||s===void 0?void 0:s.length)>=a)}class or extends TO{constructor(){super(...arguments),this.markLabelSpec={}}getLabelSpec(e){return this.markLabelSpec[e]}setLabelSpec(e,t){this.markLabelSpec[e]=q(t)}addLabelSpec(e,t,n=!1){this.markLabelSpec[e]||(this.markLabelSpec[e]=[]),n?this.markLabelSpec[e].unshift(t):this.markLabelSpec[e].push(t)}getTheme(e,t){var n,s,r;const a=Woe(e),o=(n=this._option)===null||n===void 0?void 0:n.getTheme(),{markByName:l,mark:c}=o,u=this._option.type,h=X.getSeriesMarkMap(u)?Rct(et(o,`series.${u}`),u,c,l):{},d=et(o,`series.${u}_${a}`),p=((r=(s=this.stack)!==null&&s!==void 0?s:d==null?void 0:d.stack)!==null&&r!==void 0?r:h!=null&&h.stack)?et(o,`series.${u}_stack`):void 0;return Pe({},h,d,p)}transformSpec(e,t,n){this._transformStack(e);const s=super.transformSpec(e,t,n);return this._transformLabelSpec(s.spec),Object.assign(Object.assign({},s),{markLabelSpec:this.markLabelSpec,stack:this.stack})}_transformLabelSpec(e){}_transformStack(e){Ui(e.stack)&&(this.stack=e.stack),Ui(e.percent)&&(this.stack=e.percent||this.stack),B(this.stack)&&this._supportStack&&e.seriesField&&(this.stack=!0)}_addMarkLabelSpec(e,t,n="label",s="initLabelMarkStyle",r=!0,a){e&&q(e[n]).forEach(o=>{var l,c,u;if(o&&o.visible){const{animation:h=!0,animationUpdate:d=!0,animationEnter:p=!0,animationExit:f=!0}=o,{animationUpdate:g=!0,animationEnter:m=!0,animationExit:y=!0}=e,b=!!((u=(c=(l=this._option)===null||l===void 0?void 0:l.animation)!==null&&c!==void 0?c:e.animation)!==null&&u!==void 0?u:o.animation)&&!!r;this.addLabelSpec(t,Object.assign(Object.assign({},o),{animation:!!b&&h,animationUpdate:!!(b&&g&&d)&&g,animationEnter:!!(b&&m&&p)&&m,animationExit:!!(b&&m&&f)&&y,getStyleHandler:x=>{var S;return(S=x[s])===null||S===void 0?void 0:S.bind(x)}}),a)}})}_getDefaultSpecFromChart(e){var t;const n=(t=super._getDefaultSpecFromChart(e))!==null&&t!==void 0?t:{},{outerRadius:s,innerRadius:r,direction:a}=e;return F(s)&&(n.outerRadius=s),F(r)&&(n.innerRadius=r),F(a)&&(n.direction=a),Object.keys(n).length>0?n:void 0}_mergeThemeToSpec(e,t){const n=this._theme;if(this._shouldMergeThemeToSpec()){const s=this._getDefaultSpecFromChart(t),r=a=>{const o=Pe({},n,s,a),l=n.label;return l&&Ke(l)&&ie(o.label)&&(o.label=o.label.map(c=>Pe({},l,c))),o};return ie(e)?{spec:e.map(a=>r(a)),theme:n}:{spec:r(e),theme:n}}return{spec:e,theme:n}}}function vgt(i){return i===Sn["desktop-browser"]||i===Sn["desktop-miniApp"]?{hover:{enable:!0,trigger:"pointermove",triggerOff:"view:pointerleave"},select:{enable:!0,trigger:"pointertap"}}:Pd(i)||Vd(i)?{hover:{enable:!0,trigger:["pointerdown","pointermove"],triggerOff:"view:pointerleave"},select:{enable:!0,trigger:"tap"}}:null}class Mf extends w4{getRegion(){return this._region}getLayoutStartPoint(){return this._region.getLayoutStartPoint()}getRootMark(){return this._rootMark}getSeriesMark(){return this._seriesMark}getRawData(){return this._rawData}getViewDataFilter(){return this._viewDataFilter}getViewData(){var e;return(e=this._data)===null||e===void 0?void 0:e.getDataView()}getViewDataProductId(){var e;return(e=this._data)===null||e===void 0?void 0:e.getProductId()}getViewDataStatistics(){return this._viewDataStatistics}getViewStackData(){return this._viewStackData}getSeriesField(){return this._seriesField}setSeriesField(e){F(e)&&(this._seriesField=e)}getGroups(){return this._groups}getStack(){var e;return(e=this.getSpecInfo())===null||e===void 0?void 0:e.stack}getStackValue(){var e;return(e=this._spec.stackValue)!==null&&e!==void 0?e:`${Ie}_series_${this.type}`}getPercent(){return this._spec.percent}getStackOffsetSilhouette(){return this._spec.stackOffsetSilhouette}get tooltipHelper(){return this._tooltipHelper||this.initTooltip(),this._tooltipHelper}getInvalidType(){return this._invalidType}setInvalidType(e){var t;this._invalidType=e,(t=this.getViewData())===null||t===void 0||t.reRunAllTransform()}getMarkAttributeContext(){return this._markAttributeContext}constructor(e,t){var n;super(e,t),this.specKey="series",this.type="series",this.layoutType="absolute",this.modelType="series",this.name=void 0,this.transformerConstructor=or,this.coordinate="none",this._region=null,this._layoutStartPoint={x:0,y:0},this._layoutRect={width:null,height:null},this.getLayoutRect=()=>{var s,r;return{width:(s=this._layoutRect.width)!==null&&s!==void 0?s:this._region.getLayoutRect().width,height:(r=this._layoutRect.height)!==null&&r!==void 0?r:this._region.getLayoutRect().height}},this._rootMark=null,this._seriesMark=null,this._viewDataMap=new Map,this._viewDataFilter=null,this._data=null,this.layoutZIndex=Xt.SeriesGroup,this._invalidType="break",this._region=t.region,this._dataSet=t.dataSet,!((n=this._spec)===null||n===void 0)&&n.name&&(this.name=this._spec.name)}created(){super.created(),this._buildMarkAttributeContext(),this.initData(),this.initGroups(),this.initStatisticalData(),this.event.emit(ke.afterInitData,{model:this}),this.initRootMark(),this.initMark();const e=UK(this);this._initExtensionMark({hasAnimation:e}),this.initMarkStyle(),this.initMarkState(),e&&this.initAnimation(),this._option.disableTriggerEvent||this.initInteraction(),this.afterInitMark(),this.initEvent(),this.event.emit(ke.afterInitEvent,{model:this})}_buildMarkAttributeContext(){this._markAttributeContext={vchart:this._option.globalInstance,globalScale:(e,t)=>{var n;return(n=this._option.globalScale.getScale(e))===null||n===void 0?void 0:n.scale(t)},seriesColor:e=>{var t;return B(e)&&(e=this.getSeriesKeys()[0]),(t=this._option.globalScale.getScale("color"))===null||t===void 0?void 0:t.scale(e)},getRegion:()=>this._region}}setAttrFromSpec(){super.setAttrFromSpec(),this.setSeriesField(this._spec.seriesField),F(this._spec.invalidType)&&(this._invalidType=this._spec.invalidType)}getInvalidCheckFields(){return[this.getStackValueField()]}initInvalidDataTransform(){var e,t;this._invalidType==="zero"&&(!((e=this._rawData)===null||e===void 0)&&e.dataSet)&&(Fe(this._rawData.dataSet,"invalidTravel",ogt),(t=this._rawData)===null||t===void 0||t.transform({type:"invalidTravel",options:{config:()=>({invalidType:this._invalidType,checkField:this.getInvalidCheckFields()})}},!1))}initData(){var e,t,n;const s=(e=this._spec.data)!==null&&e!==void 0?e:this._option.getSeriesData(this._spec.dataId,this._spec.dataIndex);if(s&&(this._rawData=x4(s,this._dataSet,this._option.sourceDataList)),(n=(t=this._rawData)===null||t===void 0?void 0:t.target)===null||n===void 0||n.addListener("change",this.rawDataUpdate.bind(this)),this._addDataIndexAndKey(),this._rawData){this.getStack()&&(this._viewDataFilter=mB(this._rawData,this._dataSet,{name:`${this.type}_${this.id}_viewDataFilter`}));const r=mB(this.getStack()?this._viewDataFilter:this._rawData,this._dataSet,{name:`${this.type}_${this.id}_viewData`});this._data=new Oc(this._option,r),this.getStack()&&this._viewDataFilter.target.removeListener("change",r.reRunAllTransform)}this.initInvalidDataTransform()}initGroups(){const e=this.getGroupFields();e&&e.length&&(this._groups={fields:e})}initStatisticalData(){this._data&&this._statisticViewData()}getRawDataStatisticsByField(e,t){var n,s,r;if(this._rawStatisticsCache||(this._rawStatisticsCache={}),!this._rawStatisticsCache[e]||t&&(B(this._rawStatisticsCache[e].min)||B(this._rawStatisticsCache[e].max))||!t&&B(this._rawStatisticsCache[e].values)){if(this._viewDataStatistics&&(!this._viewDataFilter||this._viewDataFilter.transformsArr.length<=1)&&this.getViewData().transformsArr.length<=1&&(!((n=this._viewDataStatistics.latestData)===null||n===void 0)&&n[e]))this._rawStatisticsCache[e]=this._viewDataStatistics.latestData[e];else if(this._rawData){const a=(s=this._rawData.getFields())===null||s===void 0?void 0:s[e];if(a&&a.lockStatisticsByDomain&&a.domain)this._rawStatisticsCache[e]={},t?(this._rawStatisticsCache[e].min=Mn(a.domain),this._rawStatisticsCache[e].max=an(a.domain)):this._rawStatisticsCache[e].values=a.domain;else{const o=pce(this._rawData.latestData,[{key:e,operations:t?["min","max"]:["values"]}])[e];this._rawStatisticsCache[e]=se((r=this._rawStatisticsCache[e])!==null&&r!==void 0?r:{},o)}}}return this._rawStatisticsCache[e]}_statisticViewData(){Fe(this._dataSet,"dimensionStatistics",vB);const e=`${this.type}_${this.id}_viewDataStatic`;this._viewDataStatistics=new Rt(this._dataSet,{name:e}),this._viewDataStatistics.parse([this._data.getDataView()],{type:"dataview"}),this._viewDataStatistics.transform({type:"dimensionStatistics",options:{fields:()=>{const t=this.getStatisticFields();return this._seriesField&&qm(t,[{key:this._seriesField,operations:["values"]}]),t},target:"latest"}},!1),this._data.getDataView().target.removeListener("change",this._viewDataStatistics.reRunAllTransform),this.getStack()&&this.createdStackData()}createStatisticalData(e,t,n){Fe(this._dataSet,"dimensionStatistics",vB);const s=new Rt(this._dataSet,{name:e});return s.parse([t],{type:"dataview"}),s.transform({type:"dimensionStatistics",options:{operations:["max","min","values"],fields:()=>{var r;const a=qm(this.getStatisticFields(),(r=n==null?void 0:n(t.name))!==null&&r!==void 0?r:[]);return this._seriesField&&qm(a,[{key:this._seriesField,operations:["values"]}]),a},target:"latest"}},!1),s}createdStackData(){const e=`${this.type}_${this.id}_viewStackData`;this._viewStackData=new Rt(this._dataSet,{name:e}),this._viewStackData.parse([this._viewDataFilter],{type:"dataview"}),this._viewStackData.transform({type:"stackSplit",options:{fields:this.getStackGroupFields()}},!1)}_noAnimationDataKey(e,t){return t}generateDefaultDataKey(e){var t;return B(e)?(n,s,r)=>{if(this._spec.animation===!1){const l=this._noAnimationDataKey(n,s);if(l!==void 0)return l}const{keyMap:a}=r,o=this._getSeriesDataKey(n);return a.get(o)===void 0?(a.set(o,0),o):(a.set(o,a.get(o)+1),`${o}_${a.get(o)}`)}:be(e)?n=>n[e]:ie(e)&&e.every(n=>be(n))?n=>e.map(s=>n[s]).join("-"):ee(e)?(n,s)=>e(n,s):((t=this._option)===null||t===void 0||t.onError(`invalid dataKey: ${e}`),(n,s)=>{})}_addDataIndexAndKey(){var e;!((e=this._rawData)===null||e===void 0)&&e.dataSet&&(Fe(this._rawData.dataSet,"addVChartProperty",I0),this._rawData.transform({type:"addVChartProperty",options:{beforeCall:Ly.bind(this),call:Of}},!1))}updateRawData(e){this._rawData&&this._rawData.updateRawData(e)}rawDataUpdate(e){var t;(t=this._rawDataStatistics)===null||t===void 0||t.reRunAllTransform(),this._rawStatisticsCache=null,this.event.emit(ke.rawDataUpdate,{model:this})}viewDataFilterOver(e){this.event.emit(ke.viewDataFilterOver,{model:this})}viewDataUpdate(e){var t;this.event.emit(ke.viewDataUpdate,{model:this}),(t=this._data)===null||t===void 0||t.updateData(),this._viewDataStatistics&&this._viewDataStatistics.reRunAllTransform()}viewDataStatisticsUpdate(e){this.event.emit(ke.viewDataStatisticsUpdate,{model:this})}getDatumPositionValue(e,t){return!e||B(t)?null:e[t]}getDatumPositionValues(e,t){return!e||B(t)?[]:be(t)?[e[t]]:t.map(n=>e[n])}setValueFieldToStack(){}setValueFieldToPercent(){}setValueFieldToStackOffsetSilhouette(){}initRootMark(){var e,t;this._rootMark=this._createMark({type:"group",name:`seriesGroup_${this.type}_${this.id}`},{parent:(t=(e=this._region).getGroupMark)===null||t===void 0?void 0:t.call(e),dataView:!1}),this._rootMark.setMarkConfig({zIndex:this.layoutZIndex})}_getExtensionMarkNamePrefix(){return`${this.type}_${this.id}_extensionMark`}_initExtensionMark(e){var t;if(!this._spec.extensionMark)return;const n=this.getMarksWithoutRoot();e.depend=n,(t=this._spec.extensionMark)===null||t===void 0||t.forEach((s,r)=>{this._createExtensionMark(s,null,this._getExtensionMarkNamePrefix(),r,e)})}_createExtensionMark(e,t,n,s,r){var a;const o=this._createMark({type:e.type,name:F(e.name)?`${e.name}`:`${n}_${s}`},{skipBeforeLayouted:!0,markSpec:e,parent:t,dataView:!1,componentType:e.componentType,depend:r.depend,key:e.dataKey},{setCustomizedShape:e==null?void 0:e.customShape});if(o){if(F(e.id)&&o.setUserId(e.id),r.hasAnimation){const l=ft({},kt(e.type,e,this._markAttributeContext));o.setAnimationConfig(l)}if(e.type==="group")n=`${n}_${s}`,(a=e.children)===null||a===void 0||a.forEach((l,c)=>{this._createExtensionMark(l,o,n,c,r)});else if(!(t||B(e.dataId)&&B(e.dataIndex))){const l=this._option.getSeriesData(e.dataId,e.dataIndex);l===this._rawData?o.setDataView(this.getViewData(),this.getViewDataProductId()):(o.setDataView(l),l.target.addListener("change",()=>{o.getData().updateData()}))}}}_updateExtensionMarkSpec(){var e;(e=this._spec.extensionMark)===null||e===void 0||e.forEach((t,n)=>{const s=this._marks.getMarkWithInfo({name:`${this._getExtensionMarkNamePrefix()}_${n}`});s&&(this.initMarkStyleWithSpec(s,t),s.updateStaticEncode(),s.updateLayoutState())})}getStackData(){var e;return(e=this._viewStackData)===null||e===void 0?void 0:e.latestData}_parseSelectorOfInteraction(e,t){if(!t||!t.length)return[];const n=[];return e.markIds?t.filter(s=>{e.markIds.includes(s.getProductId())&&n.push(`#${s.getProductId()}`)}):e.markNames?t.forEach(s=>{e.markNames.includes(s.name)&&n.push(`#${s.getProductId()}`)}):t.forEach(s=>{n.push(`#${s.getProductId()}`)}),n}_parseDefaultInteractionConfig(e){if(!(e!=null&&e.length))return[];const t=vgt(this._option.mode);let n=Object.assign({},t==null?void 0:t.hover),s=Object.assign({},t==null?void 0:t.select);const r=this._spec.hover;Ui(r)?n.enable=r:Ke(r)&&(n.enable=!0,n=Pe(n,r));const a=this._spec.select;Ui(a)?s.enable=a:Ke(a)&&(s.enable=!0,s=Pe(s,a));const o=[];if(n.enable){const l=this._parseSelectorOfInteraction(n,e);l.length&&o.push({seriesId:this.id,regionId:this._region.id,selector:l,type:"element-highlight",trigger:n.trigger,triggerOff:n.triggerOff,blurState:Ce.STATE_HOVER_REVERSE,highlightState:Ce.STATE_HOVER})}if(s.enable){const l=this._parseSelectorOfInteraction(s,e),c=s.mode==="multiple",u=F(s.triggerOff)?s.triggerOff:c?["empty"]:["empty",s.trigger];l.length&&o.push({type:"element-select",seriesId:this.id,regionId:this._region.id,selector:l,trigger:s.trigger,triggerOff:u,reverseState:Ce.STATE_SELECTED_REVERSE,state:Ce.STATE_SELECTED,isMultiple:c})}return o}_parseInteractionConfig(e){const t=this.getCompiler();if(!t)return;const{interactions:n}=this._spec,s=this._parseDefaultInteractionConfig(e);s&&s.length&&s.forEach(r=>{t.addInteraction(r)}),n&&n.length&&n.forEach(r=>{const a=this._parseSelectorOfInteraction(r,this.getMarks());a.length&&t.addInteraction(Object.assign(Object.assign({},r),{selector:a,seriesId:this.id,regionId:this._region.id}))})}initInteraction(){const e=this.getMarksWithoutRoot();this._parseInteractionConfig(e)}initAnimation(){}initMarkState(){this.initSeriesStyleState()}initSeriesStyleState(){var e;const t=this._spec.seriesStyle;if(!t||!t.length)return;const n=(e=this._seriesField)!==null&&e!==void 0?e:Wr;this.getMarksWithoutRoot().forEach(s=>{const r={},a={},o={};t.forEach(c=>{var u;const h=(u=c[s.name])===null||u===void 0?void 0:u.style;h&&(r[c.name]=!0,o[c.name]=o[c.name]||{},Object.keys(h).forEach(d=>{a[d]=!0,o[c.name][d]=h[d]}))}),s.state.addStateInfo({stateValue:eK,level:-1,filter:c=>Array.isArray(c)?c.length!==0&&r[c[0][n]]===!0:r[c[n]]===!0});const l={};Object.keys(a).forEach(c=>{l[c]=u=>{var h,d;let p;if(Array.isArray(u)){if(u.length===0)return;p=(h=o[u[0][n]])===null||h===void 0?void 0:h[c]}return p=(d=o[u[n]])===null||d===void 0?void 0:d[c],F(p)?p:s.getAttribute(c,u)}}),this.setMarkStyle(s,l,eK,pe.User_SeriesStyle)})}afterInitMark(){this.event.emit(ke.afterInitMark,{model:this}),this.setSeriesField(this._spec.seriesField),this.getMarks().forEach(e=>{var t,n;!((n=(t=e.stateStyle)===null||t===void 0?void 0:t.normal)===null||n===void 0)&&n.lineWidth&&e.setAttribute("stroke",this.getColorAttribute(),"normal",pe.Base_Series)})}getMarksWithoutRoot(){return this.getMarks().filter(e=>!e.name.includes("seriesGroup"))}getMarksInType(e){return this._marks.getMarksInType(e)}getMarkInName(e){return this._marks.get(e)}getMarkInId(e){return this.getMarks().find(t=>t.id===e)}initEvent(){var e,t,n;(t=(e=this._data)===null||e===void 0?void 0:e.getDataView())===null||t===void 0||t.target.addListener("change",this.viewDataUpdate.bind(this)),(n=this._viewDataStatistics)===null||n===void 0||n.target.addListener("change",this.viewDataStatisticsUpdate.bind(this))}_releaseEvent(){super._releaseEvent(),this.getCompiler().removeInteraction(this.id)}initTooltip(){this._tooltipHelper=new ar(this)}_compareExtensionMarksSpec(e,t,n){e.length!==t.length||t.some((s,r)=>s.type!==e[r].type||s.id!==e[r].id)?n.reMake=!0:t.some((s,r)=>s.visible!==e[r].visible)&&(n.reCompile=!0)}_compareLabelSpec(e,t,n){e.length!==t.length||t.some((s,r)=>s.labelLayout!==e[r].labelLayout||s.visible!==e[r].visible)?n.reMake=!0:!n.reCompile&&t.some((s,r)=>!Pt(s,e[r]))&&(n.reCompile=!0)}_compareSpec(e,t,n){const s=super._compareSpec(e,t),r=Object.keys(t||{}).sort(),a=Object.keys(e||{}).sort();if(!Pt(r,a))return s.reMake=!0,s;const o=Object.assign(Object.assign(Object.assign(Object.assign({},cgt),NK),n),{extensionMark:!0,label:!0,totalLabel:!0});return this._compareExtensionMarksSpec(q(e.extensionMark),q(t.extensionMark),s),!s.reMake&&this._compareLabelSpec(q(e.label),q(t.label),s),!s.reMake&&this._compareLabelSpec(q(e.totalLabel),q(t.totalLabel),s),s.reMake?s:(!s.reCompile&&this._marks.getMarks().some(l=>{var c,u;return o[l.name]=!0,((c=t[l.name])===null||c===void 0?void 0:c.visible)!==((u=e[l.name])===null||u===void 0?void 0:u.visible)})&&(s.reCompile=!0),!s.reCompile&&r.some(l=>NK[l]&&!Pt(e[l],t[l]))&&(s.reCompile=!0),r.some(l=>!o[l]&&!Pt(e[l],t[l]))&&(s.reMake=!0),s)}_updateSpecData(){!this._rawData||!this._spec.data||this._spec.data instanceof Rt||S4(this._rawData,this._spec.data,!0)}reInit(e){super.reInit(e);const t=this.getMarksWithoutRoot();t.forEach(n=>{this._spec[n.name]&&this.initMarkStyleWithSpec(n,this._spec[n.name])}),this.initMarkStyle(),t.forEach(n=>{n.updateStaticEncode(),n.updateLayoutState(!0)}),this._updateExtensionMarkSpec(),this._updateSpecData(),this._tooltipHelper&&this._tooltipHelper.updateTooltipSpec(),UK(this)&&this.initAnimation()}onEvaluateEnd(e){this._data.updateData()}onRender(e){}release(){var e,t,n;super.release(),this._viewDataMap.clear();const s=(t=(e=this._rawData)===null||e===void 0?void 0:e.transformsArr)===null||t===void 0?void 0:t.findIndex(r=>r.type==="addVChartProperty");s>=0&&this._rawData.transformsArr.splice(s,1),(n=this._data)===null||n===void 0||n.release(),this._dataSet=this._data=this._rawData=this._rawDataStatistics=this._spec=this._region=this._viewDataStatistics=this._viewStackData=null}setLayoutStartPosition(e){Z(e.x)&&(this._layoutStartPoint.x=e.x),Z(e.y)&&(this._layoutStartPoint.y=e.y)}setLayoutRect({width:e,height:t},n){Z(e)&&(this._layoutRect.width=e),Z(t)&&(this._layoutRect.height=t)}getSeriesKeys(){var e,t;return this._seriesField?(t=(e=this.getRawDataStatisticsByField(this._seriesField))===null||e===void 0?void 0:e.values)!==null&&t!==void 0?t:[]:this.name?[this.name]:this.userId?[`${this.userId}`]:[`${this.type}_${this.id}`]}getSeriesStyle(e){return t=>{var n,s;return(s=(n=this._seriesMark)===null||n===void 0?void 0:n.getAttribute(t,e))!==null&&s!==void 0?s:void 0}}_getSeriesInfo(e,t){const n=this.getDefaultShapeType();return t.map(s=>({key:s,originalKey:s,style:this.getSeriesStyle({[e]:s}),shapeType:n}))}getSeriesInfoInField(e){var t,n;return this._getSeriesInfo(e,(n=(t=this.getRawDataStatisticsByField(e))===null||t===void 0?void 0:t.values)!==null&&n!==void 0?n:[])}getSeriesInfoList(){var e;return this._getSeriesInfo((e=this._seriesField)!==null&&e!==void 0?e:Wr,this.getSeriesKeys())}_getDefaultColorScale(){var e,t;const n=this.getDefaultColorDomain(),s=this._getDataScheme();return(t=(e=new Hx().domain(n)).range)===null||t===void 0?void 0:t.call(e,s)}_getDataScheme(){return c1(this.getColorScheme(),this.type)}getDefaultColorDomain(){var e,t;return this._seriesField?(t=(e=this.getViewDataStatistics())===null||e===void 0?void 0:e.latestData[this._seriesField])===null||t===void 0?void 0:t.values:[]}getColorAttribute(){var e,t;return{scale:(e=this._option.globalScale.getScale("color"))!==null&&e!==void 0?e:this._getDefaultColorScale(),field:(t=this._seriesField)!==null&&t!==void 0?t:Wr}}getDimensionField(){return[]}getMeasureField(){return[]}onMarkPositionUpdate(){this.onMarkTreePositionUpdate(this.getMarksWithoutRoot())}onMarkTreePositionUpdate(e){}_createMark(e,t={},n={}){var s,r,a,o,l,c;const{key:u,groupKey:h,skipBeforeLayouted:d,themeSpec:p={},markSpec:f,dataView:g,dataProductId:m,parent:y,isSeriesMark:b,depend:x,stateSort:S,noSeparateStyle:C=!1}=t,w=super._createMark(e,{key:u??this._getDataIdKey(),seriesId:this.id,attributeContext:this._markAttributeContext,componentType:t.componentType,noSeparateStyle:C});if(F(w)){const A=this.getSpec()||{};this._marks.addMark(w,{name:e.name}),b&&(this._seriesMark=w),B(y)?(s=this._rootMark)===null||s===void 0||s.addMark(w):y!==!1&&y.addMark(w),B(g)?(w.setDataView(this.getViewData(),this.getViewDataProductId()),w.setSkipBeforeLayouted(!0)):g!==!1&&w.setDataView(g,m),Ui(d)&&w.setSkipBeforeLayouted(d),F(x)&&w.setDepend(...q(x)),B(h)||w.setGroupKey(h),S&&w.setStateSortCallback(S);const T=Object.assign(Object.assign({},n),{morph:(r=n.morph)!==null&&r!==void 0&&r,support3d:(a=n.support3d)!==null&&a!==void 0?a:A.support3d||!!A.zField,morphKey:((o=A.morph)===null||o===void 0?void 0:o.morphKey)||`${this.getSpecIndex()}_${this.getMarks().length}`,morphElementKey:(c=(l=A.morph)===null||l===void 0?void 0:l.morphElementKey)!==null&&c!==void 0?c:n.morphElementKey});w.setMarkConfig(T),this.initMarkStyleWithSpec(w,Pe({},p,f||A[w.name]))}return w}_getDataIdKey(){var e;return(e=super._getDataIdKey())!==null&&e!==void 0?e:kl}_getSeriesDataKey(e){let t="";if(!e)return t;const n=this.getDimensionField();t=n.map(r=>e[r]).join("_");const s=this.getSeriesField();return s&&!n.includes(s)&&(t+=`_${e[s]}`),t}addViewDataFilter(e){var t,n;(n=(t=this._viewDataFilter)!==null&&t!==void 0?t:this.getViewData())===null||n===void 0||n.transform(e,!1)}reFilterViewData(){var e,t;(t=(e=this._viewDataFilter)!==null&&e!==void 0?e:this.getViewData())===null||t===void 0||t.reRunAllTransform()}reTransformViewData(){var e,t;(t=(e=this._data)===null||e===void 0?void 0:e.getDataView())===null||t===void 0||t.reRunAllTransform()}fillData(){var e;(e=this.getRawData())===null||e===void 0||e.reRunAllTransform()}compile(){this.compileData()}getDefaultShapeType(){return"circle"}getFieldAlias(e){var t;return e!==Zr&&e!==Id&&e!==To&&e!==xf||(e=this.getStackValueField()),(t=dT(this.getRawData(),e))!==null&&t!==void 0?t:e}_getInvalidConnectType(){return this._invalidType==="zero"?"zero":this._invalidType==="link"?"connect":"none"}_getInvalidDefined(e){const t=this.getInvalidCheckFields();return!t.length||t.every(n=>Ty(e[n]))}_getRelatedComponentSpecInfo(e){var t;const n=this.getSpecIndex(),s=(t=this._option.getSpecInfo().component[e])===null||t===void 0?void 0:t.filter(r=>r.seriesIndexes.includes(n));return s??[]}_forEachStackGroup(e,t){var n,s;(t=t??((n=this._viewStackData)===null||n===void 0?void 0:n.latestData))&&(!((s=t.values)===null||s===void 0)&&s.length?e(t):t.nodes&&Object.values(t.nodes).forEach(r=>{this._forEachStackGroup(e,r)}))}isDatumInViewData(e){if(!e)return!1;const t=this.getViewData().latestData;return!!t&&(!!t.includes(e)||t.some(n=>Object.keys(e).every(s=>e[s]===n[s])))}getSeriesFieldValue(e,t){var n;return e[(n=t??this.getSeriesField())!==null&&n!==void 0?n:Wr]}}Mf.mark=Wi,Mf.transformerConstructor=or;function bgt(i){return[re.rose,re.radar,re.circularProgress].includes(i)}function bce(i,e,t){const n=i.getScale(0),s="isInverse"in i&&i.isInverse();$t(n.type)?t.sort((r,a)=>(r[e]-a[e])*(s?-1:1)):t.sort((r,a)=>(n.index(r[e])-n.index(a[e]))*(s?-1:1))}function Yd(i){return{dataIndex:e=>{var t,n;const s=i.direction==="horizontal"?i.fieldY[0]:i.fieldX[0],r=e==null?void 0:e[s],a=i.direction==="horizontal"?i.scaleY:i.scaleX;return((n=(t=a==null?void 0:a.domain)===null||t===void 0?void 0:t.call(a))!==null&&n!==void 0?n:[]).indexOf(r)||0},dataCount:()=>{var e,t,n;const s=i.direction==="horizontal"?i.scaleY:i.scaleX;return(n=((t=(e=s==null?void 0:s.domain)===null||e===void 0?void 0:e.call(s))!==null&&t!==void 0?t:[]).length)!==null&&n!==void 0?n:0}}}class Io extends Mf{constructor(){super(...arguments),this.coordinate="cartesian",this._bandPosition=.5,this._scaleConfig={bandPosition:this._bandPosition},this._direction="vertical",this._sortDataByAxis=!1,this._getPositionXEncoder=()=>{var e;return(e=this._positionXEncoder)===null||e===void 0?void 0:e.bind(this)},this._setPositionXEncoder=e=>{this._positionXEncoder=e.bind(this)},this._getPositionYEncoder=()=>{var e;return(e=this._positionYEncoder)===null||e===void 0?void 0:e.bind(this)},this._setPositionYEncoder=e=>{this._positionYEncoder=e.bind(this)}}_buildScaleConfig(){this._scaleConfig={bandPosition:this._bandPosition}}get fieldX(){return this._fieldX}setFieldX(e){this._fieldX=q(e)}get fieldY(){return this._fieldY}setFieldY(e){this._fieldY=q(e)}get fieldZ(){return this._fieldZ}setFieldZ(e){this._fieldZ=e&&q(e)}get fieldX2(){return this._fieldX2}setFieldX2(e){this._fieldX2=e}get fieldY2(){return this._fieldY2}setFieldY2(e){this._fieldY2=e}get direction(){return this._direction}get scaleX(){return this._scaleX}setScaleX(e){this._scaleX=e}get scaleY(){return this._scaleY}setScaleY(e){this._scaleY=e}get scaleZ(){return this._scaleZ}setScaleZ(e){this._scaleZ=e}getXAxisHelper(){return this._xAxisHelper}setXAxisHelper(e){this._xAxisHelper=e,this.onXAxisHelperUpdate()}getYAxisHelper(){return this._yAxisHelper}setYAxisHelper(e){this._yAxisHelper=e,this.onYAxisHelperUpdate()}getZAxisHelper(){return this._zAxisHelper}setZAxisHelper(e){this._zAxisHelper=e,this.onYAxisHelperUpdate()}get sortDataByAxis(){return this._sortDataByAxis}getStatisticFields(){const e=[];return[{axisHelper:this.getXAxisHelper(),fields:this._fieldX2?[...this._fieldX,this._fieldX2]:this._fieldX},{axisHelper:this.getYAxisHelper(),fields:this._fieldY2?[...this._fieldY,this._fieldY2]:this._fieldY},{axisHelper:this.getZAxisHelper(),fields:this._fieldZ}].forEach(t=>{t.axisHelper&&t.axisHelper.getScale&&t.fields&&t.fields.forEach(n=>{const s={key:n,operations:[]},r=t.axisHelper.getScale(0);$t(r.type)?(s.operations=["max","min"],r.type==="log"&&(s.filter=a=>a>0)):s.operations=["values"],e.push(s)})}),this.getStack()&&e.push({key:this.getStackValueField(),operations:["allValid"]}),e}getGroupFields(){return this.direction==="vertical"?this._fieldX:this._fieldY}getStackGroupFields(){return this.getGroupFields()}getStackValue(){var e,t;const n=(e=this.direction==="horizontal"?this.getXAxisHelper():this.getYAxisHelper())===null||e===void 0?void 0:e.getAxisId();return(t=this._spec.stackValue)!==null&&t!==void 0?t:`${Ie}_series_${this.type}_${n}`}getStackValueField(){return this.direction==="horizontal"?q(this._spec.xField)[0]:q(this._spec.yField)[0]}setValueFieldToStack(){this.direction==="horizontal"?(this.setFieldX(Zr),this.setFieldX2(To)):(this.setFieldY(Zr),this.setFieldY2(To))}setValueFieldToPercent(){this.direction==="horizontal"?(this.setFieldX(Id),this.setFieldX2(xf)):(this.setFieldY(Id),this.setFieldY2(xf))}setValueFieldToStackOffsetSilhouette(){this.direction==="horizontal"?(this.setFieldX(cB),this.setFieldX2(lB)):(this.setFieldY(cB),this.setFieldY2(lB))}onXAxisHelperUpdate(){this.onMarkPositionUpdate()}onYAxisHelperUpdate(){this.onMarkPositionUpdate()}onZAxisHelperUpdate(){this.onMarkPositionUpdate()}setAttrFromSpec(){var e,t;super.setAttrFromSpec(),this.setFieldX(this._spec.xField),this.setFieldY(this._spec.yField),this.setFieldZ(this._spec.zField),this._specXField=q(this._spec.xField),this._specYField=q(this._spec.yField),F(this._spec.direction)&&(this._direction=this._spec.direction),this.setFieldX2((e=this._spec)===null||e===void 0?void 0:e.x2Field),this.setFieldY2((t=this._spec)===null||t===void 0?void 0:t.y2Field),this.getStack()&&this.setValueFieldToStack(),this.getPercent()&&this.setValueFieldToPercent(),this.getStackOffsetSilhouette()&&this.setValueFieldToStackOffsetSilhouette(),F(this._spec.sortDataByAxis)&&(this._sortDataByAxis=this._spec.sortDataByAxis===!0)}dataToPosition(e,t){return e?t&&!this.isDatumInViewData(e)?null:{x:this.dataToPositionX(e),y:this.dataToPositionY(e)}:null}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToX=this.valueToPositionX.bind(this),this._markAttributeContext.valueToY=this.valueToPositionY.bind(this),this._markAttributeContext.xBandwidth=(e=0)=>{var t,n,s;return(s=(n=(t=this.getXAxisHelper()).getBandwidth)===null||n===void 0?void 0:n.call(t,e))!==null&&s!==void 0?s:0},this._markAttributeContext.yBandwidth=(e=0)=>{var t,n,s;return(s=(n=(t=this.getYAxisHelper()).getBandwidth)===null||n===void 0?void 0:n.call(t,e))!==null&&s!==void 0?s:0},this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this)}valueToPosition(e,t){return{x:this.valueToPositionX(e),y:this.valueToPositionY(t)}}_axisPosition(e,t,n){return this._scaleConfig.datum=n,e.isContinuous?e.valueToPosition(t,this._scaleConfig):e.dataToPosition(q(t),this._scaleConfig)}valueToPositionX(e,t){return this._axisPosition(this._xAxisHelper,e,t)}valueToPositionY(e,t){return this._axisPosition(this._yAxisHelper,e,t)}_dataToPosition(e,t,n,s,r,a){const o=r();if(o)return o(e);if(!t)return a(c=>Number.NaN),Number.NaN;const l=(t.getFields?t.getFields():n).slice(0,s);return l&&l.length!==0?(t.isContinuous?a(c=>(this._scaleConfig.datum=c,t.valueToPosition(this.getDatumPositionValue(c,l[0]),this._scaleConfig))):a(c=>(this._scaleConfig.datum=c,t.dataToPosition(q(this.getDatumPositionValues(c,l)),this._scaleConfig))),r()(e)):(a(c=>null),null)}dataToPositionX(e){return this._dataToPosition(e,this._xAxisHelper,this.fieldX,void 0,this._getPositionXEncoder,this._setPositionXEncoder)}dataToPositionY(e){return this._dataToPosition(e,this._yAxisHelper,this.fieldY,void 0,this._getPositionYEncoder,this._setPositionYEncoder)}dataToPositionZ(e){if(!this._zAxisHelper)return Number.NaN;const{dataToPosition:t}=this._zAxisHelper;return t(this.getDatumPositionValues(e,this._fieldZ),{bandPosition:this._bandPosition})}dataToPositionX1(e){return this._xAxisHelper?this._fieldX2&&this._fieldX2 in e?this.valueToPositionX(this.getDatumPositionValues(e,this._fieldX2)):this.valueToPositionX(0):Number.NaN}dataToPositionY1(e){return this._yAxisHelper?this._fieldY2&&this._fieldY2 in e?this.valueToPositionY(this.getDatumPositionValues(e,this._fieldY2)):this.valueToPositionY(0):Number.NaN}positionToData(e){return e?{x:this.positionToDataX(e.x),y:this.positionToDataY(e.y)}:null}positionToDataX(e){return this._scaleX?this._scaleX.invert(e):null}positionToDataY(e){return this._scaleY?this._scaleY.invert(e):null}getRegionRectLeft(){if(!this._xAxisHelper)return Number.NaN;const{getScale:e}=this._xAxisHelper;return e(0).range()[0]}getRegionRectRight(){if(!this._xAxisHelper)return Number.NaN;const{getScale:e}=this._xAxisHelper;return e(0).range()[1]}afterInitMark(){super.afterInitMark(),this.setFieldX(this._fieldX),this.setFieldY(this._fieldY),this._buildScaleConfig()}getDimensionField(){return this._direction==="horizontal"?this._specYField:this._specXField}getDimensionContinuousField(){return this._direction==="horizontal"?[this.fieldY[0],this.fieldY2]:[this.fieldX[0],this.fieldX2]}getMeasureField(){return this._direction==="horizontal"?this._specXField:this._specYField}initEvent(){super.initEvent(),this.sortDataByAxis&&this.event.on(ke.scaleDomainUpdate,{filter:e=>{var t;return e.model.id===((t=this._direction==="horizontal"?this._yAxisHelper:this._xAxisHelper)===null||t===void 0?void 0:t.getAxisId())}},()=>{this._sortDataInAxisDomain()})}_sortDataInAxisDomain(){var e,t,n;!((t=(e=this.getViewData())===null||e===void 0?void 0:e.latestData)===null||t===void 0)&&t.length&&(bce(this._direction==="horizontal"?this._yAxisHelper:this._xAxisHelper,this._direction==="horizontal"?this._fieldY[0]:this._fieldX[0],this.getViewData().latestData),(n=this._data)===null||n===void 0||n.updateData(!0))}getInvalidCheckFields(){const e=[];return this._xAxisHelper&&this._xAxisHelper.isContinuous&&this._xAxisHelper.getAxisType()!==oe.geoCoordinate&&(this._xAxisHelper.getFields?this._xAxisHelper.getFields():this._specXField).forEach(t=>{e.push(t)}),this._yAxisHelper&&this._yAxisHelper.isContinuous&&this._yAxisHelper.getAxisType()!==oe.geoCoordinate&&(this._yAxisHelper.getFields?this._yAxisHelper.getFields():this._specYField).forEach(t=>{e.push(t)}),e}reInit(e){this._positionXEncoder&&(this._positionXEncoder=null),this._positionYEncoder&&(this._positionYEncoder=null),super.reInit(e)}}const xce="monotone",Sce="linear",xgt="bevel",xh={point:{name:"point",type:"symbol"},line:{name:"line",type:"line"}};class P4{addSamplingCompile(){if(this._spec.sampling){const{width:e,height:t}=this._region.getLayoutRect(),n=[],s=this._fieldY,r=this._fieldX;n.push({type:"sampling",size:this._direction==="horizontal"?t:e,factor:this._spec.samplingFactor,yfield:this._direction==="horizontal"?r[0]:s[0],groupBy:this._seriesField,mode:this._spec.sampling}),this._data.getProduct().transform(n)}}addOverlapCompile(){var e;if(this._spec.markOverlap){const t=[];t.push({type:"markoverlap",direction:this._direction==="horizontal"&&this.coordinate==="cartesian"?2:1,delta:this._spec.pointDis,deltaMul:this._spec.pointDisMul,groupBy:this._seriesField}),(e=this._symbolMark)===null||e===void 0||e.getProduct().transform(t)}}reCompileSampling(){this._spec.sampling&&this.compile()}initLineMark(e,t){var n,s;return this._lineMark=this._createMark(xh.line,{groupKey:this._seriesField,isSeriesMark:t==null||t,stateSort:(n=this._spec.line)===null||n===void 0?void 0:n.stateSort},Object.assign(Object.assign({},e),{setCustomizedShape:(s=this._spec.line)===null||s===void 0?void 0:s.customShape,morphElementKey:this.getDimensionField()[0]})),this._lineMark}initLineMarkStyle(e,t){var n,s;const r=this._lineMark;if(r){if(this.setMarkStyle(r,{stroke:this.getColorAttribute()},"normal",pe.Series),this._invalidType!=="zero"&&this.setMarkStyle(r,{defined:this._getInvalidDefined.bind(this),connectedType:this._getInvalidConnectType()},"normal",pe.Series),this.event.on(ke.viewDataStatisticsUpdate,{filter:a=>a.model===this},()=>{this.encodeDefined(r,"defined")}),this.coordinate==="polar")this.setMarkStyle(r,{lineJoin:xgt,curveType:Sce,closePath:!0},"normal",pe.Series);else{const a=t??((s=(n=this.getSpec().line)===null||n===void 0?void 0:n.style)===null||s===void 0?void 0:s.curveType),o=a===xce?e==="horizontal"?"monotoneY":"monotoneX":a;this.setMarkStyle(r,{curveType:o},"normal",pe.Built_In)}this.setMarkStyle(r,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",pe.Series)}return r}_getEventElement(e,t=!1){let n=[];return e.dimensionInfo.some(s=>(s.data.some(r=>r.series===this&&(n=r.datum,!0)),!n.length)),n}_dimensionTrigger(e){const t=this._getEventElement(e);switch(e.action){case"enter":this._symbolActiveMark.getDataView().parse(t),this._symbolActiveMark.getData().updateData(!1);break;case"leave":this._symbolActiveMark.getDataView().parse([]),this._symbolActiveMark.getData().updateData(!1)}}initSymbolMark(e,t){const n=this._spec.point||{};if(n.visible!==!1&&(this._symbolMark=this._createMark(xh.point,{groupKey:this._seriesField,isSeriesMark:!!t,stateSort:n.stateSort},Object.assign(Object.assign({},e),{setCustomizedShape:n.customShape,morph:Yu(this._spec,xh.point.name),morphElementKey:this.getDimensionField()[0]}))),this._spec.activePoint===!0){const s=new Rt(this._option.dataSet,{name:`${Ie}_series_${this.id}_active_point`});s.parse([]),this._symbolActiveMark=this._createMark({name:`active_point_${this.id}`,type:"symbol"},{groupKey:this._seriesField,isSeriesMark:!1,dataView:s,parent:this._region.getInteractionMark(),stateSort:n.stateSort},{setCustomizedShape:n.customShape,morph:!1}),this._symbolActiveMark.setVisible(!1)}return this._symbolMark}initSymbolMarkStyle(){const e=this._symbolMark;if(!e)return this._initSymbolActiveMarkAlone(),e;if(this._initSymbolMark(e),this._symbolActiveMark&&this._symbolMark.stateStyle.dimension_hover){this._symbolActiveMark.setVisible(!0),this.event.on(Bu.dimensionHover,this._dimensionTrigger.bind(this));for(const t in this._symbolMark.stateStyle){this._symbolActiveMark.stateStyle[t]={};for(const n in this._symbolMark.stateStyle[t])n!=="visible"&&(this._symbolActiveMark.stateStyle[t][n]={style:null,level:pe.Series,referer:e})}this._symbolActiveMark.state.changeStateInfo({stateValue:Ce.STATE_DIMENSION_HOVER,filter:()=>!0})}return e}_initSymbolMark(e){e&&(this.setMarkStyle(e,{fill:this.getColorAttribute()},"normal",pe.Series),this._invalidType!=="zero"&&this.setMarkStyle(e,{visible:this._getInvalidDefined.bind(this)},"normal",pe.Series),this.event.on(ke.viewDataStatisticsUpdate,{filter:t=>t.model===this},()=>{this.encodeDefined(e,"visible")}),this.setMarkStyle(e,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",pe.Series))}_initSymbolActiveMarkAlone(){var e,t;const n=this._symbolActiveMark;n&&(this._initSymbolMark(n),n&&(!((t=(e=this._spec[xh.point.name])===null||e===void 0?void 0:e.state)===null||t===void 0)&&t.dimension_hover)&&(n.setVisible(!0),this.event.on(Bu.dimensionHover,this._dimensionTrigger.bind(this)),this.initMarkStyleWithSpec(n,Pe({},this._spec[xh.point.name],{visible:!0})),this._symbolActiveMark.state.changeStateInfo({stateValue:Ce.STATE_DIMENSION_HOVER,filter:()=>!0})))}initLabelMarkStyle(e){var t;e&&(((t=e.getTarget())===null||t===void 0?void 0:t.type)!=="symbol"&&e.setRule("line-data"),this.setMarkStyle(e,{fill:this.getColorAttribute(),text:n=>n[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null}),this._invalidType!=="zero"&&this.setMarkStyle(e,{visible:this._getInvalidDefined.bind(this)},"normal",pe.Series),this.event.on(ke.viewDataStatisticsUpdate,{filter:n=>n.model===this},()=>{this.encodeDefined(e,"visible")}))}initLineLabelMarkStyle(e){e&&this.setMarkStyle(e,{fill:this.getColorAttribute(),text:t=>t[this.getSeriesField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null})}encodeDefined(e,t){var n,s,r,a;if(!e)return;const o=this._isFieldAllValid();if(this._invalidType==="zero"||o){if(((s=(n=e.stateStyle.normal)===null||n===void 0?void 0:n[t])===null||s===void 0?void 0:s.style)===!0)return;this.setMarkStyle(e,{[t]:!0},"normal",pe.Series)}else{if(((a=(r=e.stateStyle.normal)===null||r===void 0?void 0:r[t])===null||a===void 0?void 0:a.style)!==!0)return;this.setMarkStyle(e,{[t]:this._getInvalidDefined.bind(this)},"normal",pe.Series)}e.getProduct()&&e.compileEncode()}_isFieldAllValid(){const e=this.getViewDataStatistics(),t=this.getStackValueField();return!!(e&&e.latestData&&t)&&e.latestData[t]&&e.latestData[t].allValid}}const Sgt=Object.assign(Object.assign({},Wi),xh);class Cce extends Rs{setStyle(e,t="normal",n=0,s=this.stateStyle){if(B(e))return;s[t]===void 0&&(s[t]={});const r=this._getIgnoreAttributes(),a=["strokeWidth","lineWidth","lineDash","strokeDash","lineJoin","stroke","strokeOpacity","opacity","fill","fillOpacity","texture","texturePadding","textureSize","textureColor"],o=this.isUserLevel(n);let l=!1;Object.keys(e).forEach(c=>{const u=e[c];if(B(u)||r.includes(c))return;o&&a.includes(c)&&(KF(u==null?void 0:u.type)||u!=null&&u.scale||ee(u))&&(l=!0);const h=this._filterAttribute(c,u,t,n,o,s);this.setAttribute(c,h,t,n,s)}),l&&this.setMarkConfig({enableSegments:!0})}}class g1 extends Cce{constructor(){super(...arguments),this.type=g1.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:1})}_getIgnoreAttributes(){var e,t;return((e=this.model)===null||e===void 0?void 0:e.type)===re.radar&&((t=this.model)===null||t===void 0?void 0:t.coordinate)==="polar"?[]:["fill","fillOpacity"]}}g1.type="line";const RO=()=>{X.registerMark(g1.type,g1),Nht(),_ce()};class wce extends Rs{_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{size:1,symbolType:"circle",fill:void 0,lineWidth:0})}}class m1 extends wce{constructor(){super(...arguments),this.type=m1.type}}m1.type="symbol";const qu=()=>{X.registerMark(m1.type,m1),Ale()};class Gx extends or{_transformLabelSpec(e){var t,n,s;((t=e.point)===null||t===void 0?void 0:t.visible)!==!1&&((s=(n=e.point)===null||n===void 0?void 0:n.style)===null||s===void 0?void 0:s.visible)!==!1?this._addMarkLabelSpec(e,"point"):this._addMarkLabelSpec(e,"line"),this._addMarkLabelSpec(e,"line","lineLabel","initLineLabelMarkStyle",void 0,!0)}}function WK(i){return i.length===2&&Z(i[0])&&Z(It(i))&&It(i)>=i[0]}function GK(i,e){const t=It(e)-e[0],n=It(e)*e[0]<0;let s=e[0]<=0?0-e[0]:0,r=It(e)>0?It(e)-0:0;t===0?e[0]<0?(s=1,r=0):e[0]>0&&(s=0,r=1):(s/=t,r/=t);const a=i.getDomainSpec();return{total:t,negative:s,positive:r,includeZero:n,domain:e,extendable_min:!Z(a.min),extendable_max:!Z(a.max)}}function KK(i,e){const{positive:t,negative:n,extendable_min:s,extendable_max:r,domain:a}=i,{positive:o,negative:l,extendable_min:c,extendable_max:u,domain:h}=e;if(o>0){if(!c)return!1;let d=n/t;r&&(d=n/Math.max(t,o),a[1]=-a[0]/d),h[0]=-h[1]*d}else if(l>0){if(!u)return!1;let d=t/n;s&&(d=t/Math.max(n,n),a[0]=-a[1]/d),h[1]=-h[0]*d}return!0}function XK(i,e){const{extendable_min:t,extendable_max:n,domain:s}=i,{positive:r,negative:a,domain:o}=e;return(r!==0||a!==0)&&!(r>0&&!n)&&!(a>0&&!t)&&(s[0]=o[0],s[1]=o[1],!0)}function YK(i,e){const{positive:t,negative:n,extendable_max:s,domain:r}=i,{positive:a,negative:o,extendable_min:l,domain:c}=e;if(s&&l){const u=Math.max(n,o)/Math.max(t,a);r[1]=-r[0]/u,c[0]=-c[1]*u}else if(l){const u=n/t;c[0]=-c[1]*u}else{if(!s)return!1;{const u=o/a;r[1]=-r[0]/u}}return!0}function qK(i,e){const{extendable_min:t,domain:n}=i,{extendable_max:s,domain:r}=e;return!(!t||!s)&&(n[0]=-n[1],r[1]=-r[0],!0)}const Cgt=(i,e)=>{var t,n,s,r,a,o;const l=i.getScale(),c=e.getScale();if(!l||!c)return;const u=(s=(n=(t=i).getDomainAfterSpec)===null||n===void 0?void 0:n.call(t))!==null&&s!==void 0?s:[0,1],h=(o=(a=(r=e).getDomainAfterSpec)===null||a===void 0?void 0:a.call(r))!==null&&o!==void 0?o:[0,1];if(!(u&&h&&WK(u)&&WK(h)))return;const d=GK(i,u),p=GK(e,h),{positive:f,negative:g,extendable_min:m,extendable_max:y,includeZero:b}=d,{positive:x,negative:S,extendable_min:C,extendable_max:w,includeZero:A}=p;if(f===0&&g===0){if(!XK(d,p))return}else if(x===0&&S===0){if(!XK(p,d))return}else if(b||A)if(b&&!A){if(!KK(d,p))return}else if(A&&!b){if(!KK(p,d))return}else{if(g===S)return;if(g>S){if(!YK(d,p))return}else if(!YK(p,d))return}else{if(g===0&&x===0){if(!qK(d,p))return}else if(S===0&&f===0&&!qK(p,d))return;if(g===0&&S===0)if(u[0]===0&&h[0]>0){if(!C)return;h[0]=0}else{if(!(h[0]===0&&u[0]>0)||!m)return;u[0]=0}if(f===0&&x===0)if(u[1]===0&&h[1]>0){if(!w)return;h[1]=0}else{if(!(h[1]===0&&u[1]>0)||!y)return;u[1]=0}}l.domain(u),c.domain(h)},wgt=(i,e)=>{var t,n,s,r,a;if(!i)return i;const o=(t=e==null?void 0:e.targetAxis)===null||t===void 0?void 0:t.call(e);if(!o)return i;const l=(n=e==null?void 0:e.currentAxis)===null||n===void 0?void 0:n.call(e);if(!l)return i;const c=(s=l.getTickData())===null||s===void 0?void 0:s.getDataView();if(!c||!c.transformsArr.find(b=>b.type.includes("ticks")))return i;const u=l.getScale();if(!u)return i;const h=(a=(r=o.getTickData())===null||r===void 0?void 0:r.getDataView())===null||a===void 0?void 0:a.latestData;if(!(h!=null&&h.length))return i;const d=o.getScale();if(!d)return i;const p=d.domain(),f=It(p)-p[0];if(f===0)return i;const g=u.domain(),m=It(g)-g[0];if(f===0)return i;const y=h.map(b=>{const x=(b.value-p[0])/f;return m*x+g[0]});return _u(y)};class O4{constructor(e){this.id=Qf(),this.name=`${e}_${this.id}`}onAdd(e){this.service=e}release(){this.service=null}}class y1 extends O4{constructor(){super(y1.type),this.type="AxisSyncPlugin"}_checkEnableSync(e){if(!$t(e.getScale().type))return!1;const t=e.getSpec().sync;return!!(t!=null&&t.axisId)&&t}_getTargetAxis(e,t){const n=e.getOption().getChart().getComponentByUserId(t.axisId);return n!=null&&n.type.startsWith("cartesianAxis")?n:null}onInit(e,t){const n=this._checkEnableSync(t);if(!n||!n.zeroAlign)return;const s=this._getTargetAxis(t,n);s&&t.event.on(ke.scaleDomainUpdate,{filter:({model:r})=>r.id===t.id||r.id===s.id},()=>{Cgt(s,t)})}onDidCompile(e,t){const n=this._checkEnableSync(t);if(!n)return;const s=this._getTargetAxis(t,n);if(s&&n.tickAlign){Fe(t.getOption().dataSet,"tickAlign",wgt);const r={targetAxis:()=>s,currentAxis:()=>t};t.addTransformToTickData({type:"tickAlign",options:r,level:Number.MAX_SAFE_INTEGER},!1)}}}y1.pluginType="component",y1.type="AxisSyncPlugin";const Agt={left:{textAlign:"center",textBaseline:"bottom"},right:{textAlign:"center",textBaseline:"bottom"},radius:{},angle:{}};function kgt(i){return(i=ol(i)).startSymbol=ol(i.startSymbol),i.endSymbol=ol(i.endSymbol),i}function _1(i){let e=0;return et(i,"tick.visible")&&(e+=et(i,"tick.tickSize")),et(i,"label.visible")&&(e+=et(i,"label.space")),e}function v1(i,e){var t,n,s,r,a,o;return{min:(s=(t=i.min)!==null&&t!==void 0?t:(n=i.range)===null||n===void 0?void 0:n.min)!==null&&s!==void 0?s:e==null?void 0:e.min,max:(o=(r=i.max)!==null&&r!==void 0?r:(a=i.range)===null||a===void 0?void 0:a.max)!==null&&o!==void 0?o:e==null?void 0:e.max}}function ZK(i){const e=i==null?void 0:i.orient;return e==="top"||e==="bottom"||e==="left"||e==="right"||e==="z"}function Tgt(i){const e=i==null?void 0:i.orient;return e==="angle"||e==="radius"}const y_=(i,e,t)=>{var n;const s=(n=e==="band"?Nr("axisBand",t):["linear","log","symlog"].includes(e)?Nr("axisLinear",t):{})!==null&&n!==void 0?n:{},r=Ti(i)?Nr("axisX",t):tc(i)?Nr("axisY",t):Nr("axisZ",t);return Pe({},Nr("axis",t),s,r)},XI=(i,e,t)=>{var n;const s=(n=e==="band"?Nr("axisBand",t):e==="linear"?Nr("axisLinear",t):{})!==null&&n!==void 0?n:{},r=Nr(i==="angle"?"axisAngle":"axisRadius",t);return Pe({},Nr("axis",t),s,r)},Ace=i=>i==="band"||i==="ordinal"||i==="point";function Dy(i,e){return{id:i,label:i,value:e,rawValue:i}}function ao(i,e,t){return t||!i||i.getAxisId()===e.getAxisId()}class Egt extends dce{constructor(e){super(),this.component=e}releaseAll(){super.releaseAll(),this.component=null}}function kce(i,e){const{x1:t,y1:n,x2:s,y2:r}=e,{x1:a,y1:o,x2:l,y2:c}=i.AABBBounds,{dx:u=0,dy:h=0}=i.attribute;let d=0,p=0;a<t&&(d=t-a),o<n&&(p=n-o),l>s&&(d=s-l),c>r&&(p=r-c),d&&i.setAttribute("dx",d+u),p&&i.setAttribute("dy",p+h)}function JK(i,e,t,n){for(let s=0,r=i.length;s<r;s++){const a=i[s];if(a){const o=a[t],l=a[n||t];if(o<=e&&l>=e)return a}}return null}const Pgt=(i,e)=>{var t,n;const s=q((t=e.axes)!==null&&t!==void 0?t:[]),{bandField:r,linearField:a,xField:o,yField:l}=(n=Nr(oe.crosshair,i))!==null&&n!==void 0?n:{},c=s.find(p=>Ti(p.orient));let u;u=F(c)?Pe({},Ace(c.type)?r:a,o):o;const h=s.find(p=>tc(p.orient));let d;return d=F(h)?Pe({},ys(h.type)?r:a,l):l,{xField:u,yField:d}},Ogt=(i,e)=>{var t,n;const s=q((t=e.axes)!==null&&t!==void 0?t:[]),{bandField:r,linearField:a,categoryField:o,valueField:l}=(n=Nr(oe.crosshair,i))!==null&&n!==void 0?n:{},c=s.find(p=>p.orient==="angle");let u;u=F(c)?Pe({},Ace(c.type)?r:a,o):o;const h=s.find(p=>p.orient==="radius");let d;return d=F(h)?Pe({},ys(h.type)?r:a,l):l,{categoryField:u,valueField:d}};function Mgt(i,e,t,n){switch(i){case oe.cartesianBandAxis:return y_(_p(t,["z"]),"band",e);case oe.cartesianLinearAxis:return y_(_p(t,["z"]),"linear",e);case oe.cartesianLogAxis:return y_(_p(t,["z"]),"log",e);case oe.cartesianSymlogAxis:return y_(_p(t,["z"]),"symlog",e);case oe.cartesianAxis:case oe.cartesianTimeAxis:return y_(_p(t),void 0,e);case oe.polarBandAxis:return XI(t.orient,"band",e);case oe.polarLinearAxis:return XI(t.orient,"linear",e);case oe.polarAxis:return XI(t.orient,void 0,e);case oe.cartesianCrosshair:return Pgt(e,n);case oe.polarCrosshair:return Ogt(e,n);case oe.colorLegend:case oe.sizeLegend:case oe.discreteLegend:case oe.dataZoom:case oe.scrollBar:return Igt(t,Nr(i,e));default:return Nr(i,e)}}const Igt=(i,e)=>{var t;const n=(t=i.orient)!==null&&t!==void 0?t:e.orient,s=e[Yle(n)],r=Pe({},e,s);return delete r.horizontal,delete r.vertical,r};class Kx extends TO{getTheme(e,t){return Mgt(this.type,this._option.getTheme(),e,t)}_mergeThemeToSpec(e,t){const{spec:n,theme:s}=super._mergeThemeToSpec(e,t);return this._adjustPadding(n),{spec:n,theme:s}}_adjustPadding(e){const{padding:t,noOuterPadding:n=!0,orient:s}=e;n&&t&&s&&(e.padding=Object.assign(Object.assign({},Fu(t)),{[s]:0}))}}var Rgt=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};class Pr extends ace{static createComponent(e,t){const{spec:n}=e,s=Rgt(e,["spec"]);return new this(n,Object.assign(Object.assign({},t),s))}getRegions(){return this._regions}created(){super.created(),this.initLayout(),this.pluginService=new Egt(this)}constructor(e,t){super(e,t),this.name="component",this.modelType="component",this.transformerConstructor=Kx,this._delegateEvent=(n,s,r,a=null,o=null)=>{var l,c;s instanceof DP||this.event.emit(r,{model:this,node:n,event:s,item:a,datum:o,source:wt.chart,chart:(c=(l=this._option)===null||l===void 0?void 0:l.globalInstance)===null||c===void 0?void 0:c.getChart()},"model")},this._option.animation&&(this.animate=new rce({getCompiler:t.getCompiler}))}initLayout(){var e;super.initLayout(),this._regions=(e=this._regions)!==null&&e!==void 0?e:this._option.getRegionsInIndex(),this._layout&&(this._layout.layoutBindRegionID=this._regions.map(t=>t==null?void 0:t.id))}changeRegions(e){throw new Error("Method not implemented.")}_getNeedClearVRenderComponents(){throw new Error("Method not implemented.")}onRender(e){throw new Error("Method not implemented.")}getVRenderComponents(){return this._getNeedClearVRenderComponents()}callPlugin(e){this.pluginService&&this.pluginService.getAll().forEach(t=>e(t))}getContainer(){var e;return this._container||(this._container=(e=this._option)===null||e===void 0?void 0:e.globalInstance.getStage().find(t=>t.name==="root",!0)),this._container}_compareSpec(e,t){const n=super._compareSpec(e,t);return n.reMake||(n.reMake=["seriesId","seriesIndex","regionId","regionIndex"].some(s=>!Pt(t==null?void 0:t[s],e[s]))),(t==null?void 0:t.visible)!==e.visible&&(n.reCompile=!0),n}release(){var e;super.release(),this.clear(),(e=this.pluginService)===null||e===void 0||e.releaseAll(),this.pluginService=null}clear(){var e;const t=this._getNeedClearVRenderComponents();t&&t.length&&t.forEach(n=>{var s;n&&((s=this.getContainer())===null||s===void 0||s.removeChild(n),n=null)}),this._container=null,(e=this.pluginService)===null||e===void 0||e.clearAll()}compile(){this.compileMarks(),this.reAppendComponents()}compileMarks(e){this.getMarks().forEach(t=>{t.compile({group:e,context:{model:this}})})}reAppendComponents(){const e=this._getNeedClearVRenderComponents();e&&e.length&&e.forEach(t=>{var n;t&&!t.stage&&((n=this.getContainer())===null||n===void 0||n.appendChild(t))})}getBoundsInRect(e,t){return{x1:0,x2:0,y1:0,y2:0}}}Pr.transformerConstructor=Kx;class xB extends Rs{constructor(e,t){super(e,t),this.type="component",this._componentType=t.componentType,this._mode=t.mode}_initProduct(e){const t=this.getVGrammarView(),n=this.getProductId();this._product=t.mark(_e.component,e??t.rootMark,{componentType:this._componentType,mode:this._mode}).id(n),this._compiledProductId=n}}xB.type="component";const LO=()=>{X.registerMark(xB.type,xB)},Lgt=i=>i;var Dgt=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};class M4 extends Pr{getOrient(){return this._orient}getScale(){return this._scale}getScales(){return this._scales}getTickData(e=0){return this._tickData[e]}get visible(){return this._visible}getInverse(){return this._inverse}getCoordinateType(){return this._coordinateType}constructor(e,t){var n;super(e,t),this.specKey="axes",this._scales=[],this._tickData=[],this._visible=!0,this._tick=void 0,this._visible=(n=e.visible)===null||n===void 0||n,this._coordinateType="none"}_getNeedClearVRenderComponents(){return[]}getVRenderComponents(){var e,t,n,s;return[(t=(e=this._axisMark)===null||e===void 0?void 0:e.getProduct())===null||t===void 0?void 0:t.getGroupGraphicItem(),(s=(n=this._gridMark)===null||n===void 0?void 0:n.getProduct())===null||s===void 0?void 0:s.getGroupGraphicItem()].filter(F)}created(){var e,t,n,s,r,a,o,l,c,u,h,d,p,f,g,m,y,b;if(super.created(),this.setSeriesAndRegionsFromSpec(),this.initEvent(),this.initScales(),this.updateSeriesScale(),this._shouldComputeTickData()&&this._initData(),this._visible){const x=this._createMark({type:"component",name:`axis-${this.getOrient()}`},{componentType:this.getOrient()==="angle"?"circleAxis":"axis",mode:this._spec.mode,noSeparateStyle:!0},{skipTheme:!0});if(this._axisMark=x,x.setMarkConfig({zIndex:this.layoutZIndex}),F(this._spec.id)&&x.setUserId(this._spec.id),x.setMarkConfig({interactive:(e=this._spec.interactive)!==null&&e!==void 0?e:this.getDefaultInteractive()}),this._marks.addMark(x),(t=this._spec.grid)===null||t===void 0?void 0:t.visible){const S=this._createMark({type:"component",name:`axis-${this.getOrient()}-grid`},{componentType:this.getOrient()==="angle"?Qn.circleAxisGrid:Qn.lineAxisGrid,mode:this._spec.mode,noSeparateStyle:!0},{skipTheme:!0});S.setMarkConfig({zIndex:(o=(r=(s=(n=this._spec.grid)===null||n===void 0?void 0:n.style)===null||s===void 0?void 0:s.zIndex)!==null&&r!==void 0?r:(a=this._spec.grid)===null||a===void 0?void 0:a.zIndex)!==null&&o!==void 0?o:Xt.Axis_Grid,interactive:!1}),this._marks.addMark(S),this._gridMark=S}if(this._option.animation!==!1&&et(this._option.getChart().getSpec(),"animation")!==!1&&this._spec.animation===!0){const S=ft((l=X.getAnimationInKey("axis"))===null||l===void 0?void 0:l(),{appear:(u=(c=this._spec.animationAppear)!==null&&c!==void 0?c:et(this._option.getChart().getSpec(),"animationAppear.axis"))!==null&&u!==void 0?u:et(this._option.getChart().getSpec(),"animationAppear"),disappear:(d=(h=this._spec.animationDisappear)!==null&&h!==void 0?h:et(this._option.getChart().getSpec(),"animationDisappear.axis"))!==null&&d!==void 0?d:et(this._option.getChart().getSpec(),"animationDisappear"),enter:(f=(p=this._spec.animationEnter)!==null&&p!==void 0?p:et(this._option.getChart().getSpec(),"animationEnter.axis"))!==null&&f!==void 0?f:et(this._option.getChart().getSpec(),"animationEnter"),exit:(m=(g=this._spec.animationExit)!==null&&g!==void 0?g:et(this._option.getChart().getSpec(),"animationExit.axis"))!==null&&m!==void 0?m:et(this._option.getChart().getSpec(),"animationExit"),update:(b=(y=this._spec.animationUpdate)!==null&&y!==void 0?y:et(this._option.getChart().getSpec(),"animationUpdate.axis"))!==null&&b!==void 0?b:et(this._option.getChart().getSpec(),"animationUpdate")});S.enter&&(S.update[0].customParameters={enter:S.enter[0]}),this._marks.forEach(C=>C.setAnimationConfig(S))}}}_shouldComputeTickData(){return this.getVisible()||this._spec.forceInitTick}_initData(){const e=this._initTickDataSet(this._tickTransformOption());e.target.addListener("change",this._forceLayout.bind(this)),this._tickData=[new Ec(this._option,e)]}collectData(e,t){const n=[];return Vi(this._regions,s=>{var r;let a=this.collectSeriesField(e,s);if(a=ie(a)?$t(this._scale.type)?a:[a[0]]:[a],e||(this._dataFieldText=s.getFieldAlias(a[0])),a){const o=s.getViewData();if(t)a.forEach(l=>{n.push(s.getRawDataStatisticsByField(l,!1))});else if(o&&o.latestData&&o.latestData.length){const l=(r=s.getViewDataStatistics)===null||r===void 0?void 0:r.call(s),c=this.type===oe.cartesianLinearAxis&&this._spec.breaks&&this._spec.breaks.length;a.forEach(u=>{var h;!((h=l==null?void 0:l.latestData)===null||h===void 0)&&h[u]&&(c?n.push(Object.assign(Object.assign({},l.latestData[u]),{values:o.latestData.map(d=>d[u])})):n.push(l.latestData[u]))})}}},{userId:this._seriesUserId,specIndex:this._seriesIndex}),n}isSeriesDataEnable(){let e=!0;return Vi(this._regions,t=>{var n;ie((n=t.getViewDataStatistics())===null||n===void 0?void 0:n.latestData)&&(e=!1)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),e}setSeriesAndRegionsFromSpec(){const{seriesId:e,seriesIndex:t,regionId:n,regionIndex:s}=this._spec;F(e)&&(this._seriesUserId=q(e)),F(n)&&(this._regionUserId=q(n)),F(t)&&(this._seriesIndex=q(t)),F(s)&&(this._regionIndex=q(s)),this._regions=this._option.getRegionsInUserIdOrIndex(this._regionUserId,this._regionIndex),this.layout.layoutBindRegionID=this._regions.map(r=>r.id)}getBindSeriesFilter(){return{userId:this._seriesUserId,specIndex:this._seriesIndex}}initEvent(){this.event.on(ke.scaleUpdate,{filter:({model:t})=>(t==null?void 0:t.id)===this.id},this.effect.scaleUpdate.bind(this));const e=Uoe(this._regions,{userId:this._seriesUserId,specIndex:this._seriesIndex}).map(t=>t.getViewDataStatistics()).filter(t=>!!t);e.length>1?this._option.dataSet.multipleDataViewAddListener(e,"change",()=>{this.updateScaleDomain()}):e.length===1&&e[0].target.addListener("change",()=>{this.updateScaleDomain()}),Vi(this._regions,t=>{t.event.on(ke.rawDataUpdate,{filter:({model:n})=>(n==null?void 0:n.id)===t.id},()=>{this._clearRawDomain()})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}updateScaleDomain(){}_clearRawDomain(){}onLayoutEnd(e){this.updateScaleRange(),this.event.emit(ke.scaleUpdate,{model:this,value:"range"}),super.onLayoutEnd(e)}computeData(e){e!=="force"||this._tickData&&this._tickData.length?!this._tickData||!this._tickData.length||e!=="force"&&Pt(this._scale.range(),[0,1])||this._tickData.forEach(t=>{t.getDataView().reRunAllTransform(),t.updateData()}):Vi(this._regions,t=>{var n;(n=t.getViewData())===null||n===void 0||n.reRunAllTransform()},{userId:this._seriesUserId,specIndex:this._seriesIndex})}initScales(){this._scales=[this._scale];const e=[];if(Vi(this._regions,t=>{const n=t.getGroups();n&&e.push(n)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),e.length!==0){const t=an(e.map(n=>n.fields.length));for(let n=1;n<t;n++){const s=this._scale.clone();this._scales.push(s)}}}_compareSpec(e,t){const n=super._compareSpec(e,t);return n.reMake?n:(n.reRender=!0,(t==null?void 0:t.type)!==(e==null?void 0:e.type)||(t==null?void 0:t.visible)!==(e==null?void 0:e.visible)?(n.reMake=!0,n):(n.reMake=["grid","subGrid","tick","subTick","label","domainLine","title"].some(s=>{var r,a;return((r=t==null?void 0:t[s])===null||r===void 0?void 0:r.visible)!==((a=e==null?void 0:e[s])===null||a===void 0?void 0:a.visible)}),n))}_getAxisAttributes(){const e=this._spec,t={orient:this.getOrient(),select:this._option.disableTriggerEvent!==!0&&e.select,hover:this._option.disableTriggerEvent!==!0&&e.hover};if(e.domainLine&&e.domainLine.visible?t.line=kgt(e.domainLine):t.line={visible:!1},e.label&&e.label.visible){const n=kc(e.label,["style","formatMethod","state"]);t.label=n,e.label.style&&(t.label.style=ee(e.label.style)?(s,r,a,o)=>{var l;const c=e.label.style(s.rawValue,r,s,a,o);return Le(Pe({},(l=this._theme.label)===null||l===void 0?void 0:l.style,c))}:Le(e.label.style)),(e.label.formatMethod||e.label.formatter)&&(t.label.formatMethod=this._getLabelFormatMethod()),e.label.state&&(t.label.state=Gct(e.label.state))}else t.label={visible:!1};if(e.tick&&e.tick.visible?(t.tick={visible:e.tick.visible,length:e.tick.tickSize,inside:e.tick.inside,alignWithLabel:e.tick.alignWithLabel,dataFilter:e.tick.dataFilter},e.tick.style&&(t.tick.style=ee(e.tick.style)?(n,s,r,a)=>{var o;const l=e.tick.style(n,s,r,a);return Le(Pe({},(o=this._theme.tick)===null||o===void 0?void 0:o.style,l))}:Le(e.tick.style)),e.tick.state&&(t.tick.state=kg(e.tick.state))):t.tick={visible:!1},e.subTick&&e.subTick.visible?(t.subTick={visible:e.subTick.visible,length:e.subTick.tickSize,inside:e.subTick.inside,count:e.subTick.tickCount},e.subTick.style&&(t.subTick.style=ee(e.subTick.style)?(n,s,r,a)=>{var o;const l=e.subTick.style(n,s,r,a);return Le(Pe({},(o=this._theme.subTick)===null||o===void 0?void 0:o.style,l))}:Le(e.subTick.style)),e.subTick.state&&(t.subTick.state=kg(e.subTick.state))):t.subTick={visible:!1},e.title&&e.title.visible){const n=e.title,{autoRotate:s,angle:r,style:a={},background:o,state:l,shape:c}=n,u=Dgt(n,["autoRotate","angle","style","background","state","shape"]);let h,d=r;e.orient!=="left"&&e.orient!=="right"||s&&B(d)&&(d=e.orient==="left"?-90:90,h=Agt[e.orient]),t.title=Object.assign(Object.assign({},u),{autoRotate:!1,angle:d?zt(d):null,textStyle:Pe({},h,Le(a)),pickable:a.pickable!==!1,childrenPickable:a.pickable!==!1,state:{}}),c&&c.visible?(t.title.shape=Object.assign(Object.assign({},c),{style:Le(c.style)}),c.state&&(t.title.state.shape=kg(c.state))):t.title.shape={visible:!1},o&&o.visible?(t.title.background=Object.assign(Object.assign({},o),{style:Le(o.style)}),o.state&&(t.title.state.background=kg(o.state))):t.title.background={visible:!1},l&&(t.title.state.text=kg(l))}else t.title={visible:!1};return e.background&&e.background.visible?(t.panel={visible:!0},e.background.style&&(t.panel.style=Le(e.background.style)),e.background.state&&(t.panel.state=kg(e.background.state))):t.panel={visible:!1},t}_getGridAttributes(){const e=this._spec;return{alternateColor:e.grid.alternateColor,alignWithLabel:e.grid.alignWithLabel,style:ee(e.grid.style)?()=>(t,n)=>{var s,r;const a=e.grid.style((s=t.datum)===null||s===void 0?void 0:s.rawValue,n,t.datum);return Le(Pe({},(r=this._theme.grid)===null||r===void 0?void 0:r.style,a))}:Le(e.grid.style),subGrid:e.subGrid.visible===!1?{visible:!1}:{type:"line",visible:e.subGrid.visible,alternateColor:e.subGrid.alternateColor,style:Le(e.subGrid.style)}}}_getLabelFormatMethod(){const{formatMethod:e,formatter:t}=this._spec.label,{formatFunc:n}=Pc(e,t);return n?(s,r,a)=>n(r.rawValue,r,t):null}_initTickDataSet(e,t=0){bu(this._option.dataSet,"scale",Lgt);const n=this.registerTicksTransform();return new Rt(this._option.dataSet,{name:`${this.type}_${this.id}_ticks_${t}`}).parse(this._scales[t],{type:"scale"}).transform({type:n,options:e},!1)}_tickTransformOption(){const e=this._tick||{},t=this._spec.label||{},{tickCount:n,forceTickCount:s,tickStep:r,tickMode:a}=e,{style:o,formatMethod:l,minGap:c}=t;return{sampling:this._spec.sampling!==!1,tickCount:n,forceTickCount:s,tickStep:r,tickMode:a,axisOrientType:this._orient,coordinateType:this._coordinateType,labelStyle:o,labelFormatter:l,labelGap:c}}addTransformToTickData(e,t){this._tickData.forEach(n=>{var s;(s=n==null?void 0:n.getDataView())===null||s===void 0||s.transform(e,t)})}dataToPosition(e){return this._scale.scale(e)}}M4.specKey="axes";const sg=()=>{LO(),X.registerAnimation("axis",()=>({appear:{custom:lZe},update:{custom:xat},exit:{custom:cZe}}))};var QK=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};const Fgt=[y1];class xT extends M4{getOrient(){return this._orient}getDefaultInteractive(){return!0}set autoIndentOnce(e){this._autoIndentOnce=e}getScales(){return this._scales}constructor(e,t){super(e,t),this.type=oe.cartesianAxis,this.name=oe.cartesianAxis,this._defaultBandPosition=.5,this._defaultBandInnerPadding=.1,this._defaultBandOuterPadding=.3,this.layoutType="region-relative",this.layoutZIndex=Xt.Axis,this.layoutLevel=El.Axis,this._orient="left",this._autoIndentOnce=!1,this._hasAutoIndent=!1,this._scales=[],this._tick=void 0,this._layoutCache={width:0,height:0,_lastComputeOutBounds:{x1:0,x2:0,y1:0,y2:0}},this._innerOffset={top:0,bottom:0,left:0,right:0},this.effect={scaleUpdate:n=>{this.computeData(n==null?void 0:n.value),Vi(this._regions,s=>{const r=this.getOrient();Ti(r)?ao(s.getXAxisHelper(),this.axisHelper(),F(this._seriesUserId)||F(this._seriesIndex))&&s.setXAxisHelper(this.axisHelper()):tc(r)?ao(s.getYAxisHelper(),this.axisHelper(),F(this._seriesUserId)||F(this._seriesIndex))&&s.setYAxisHelper(this.axisHelper()):Xc(r)&&ao(s.getZAxisHelper(),this.axisHelper(),F(this._seriesUserId)||F(this._seriesIndex))&&s.setZAxisHelper(this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._transformLayoutPosition=n=>{let{x:s,y:r}=n;return Z(s)&&(s+=+(this._orient==="left")*this.getLayoutRect().width),Z(r)&&(r+=+(this._orient==="top")*this.getLayoutRect().height),{x:s,y:r}},this._transformLayoutRect=n=>{if(!this._visible)return n;const s=this._latestBounds.clone().translate(-this.getLayoutStartPoint().x,-this.getLayoutStartPoint().y);switch(this._layout.layoutOrient){case"left":this._layout.layoutRectLevelMap.width===Fr&&(n.width=s.x1<0?-s.x1:0);break;case"right":this._layout.layoutRectLevelMap.width===Fr&&(n.width=s.x2>0?s.x2:0);break;case"top":this._layout.layoutRectLevelMap.height===Fr&&(n.height=s.y1<0?-s.y1:0);break;case"bottom":this._layout.layoutRectLevelMap.height===Fr&&(n.height=s.y2>0?s.y2:0)}return n.width=Math.ceil(n.width),n.height=Math.ceil(n.height),this._layout.setRectInSpec(this._layoutCacheProcessing(n))},this._updateAxisLayout=()=>{const n=this.getLayoutStartPoint(),s=this._getUpdateAttribute(!1),{grid:r}=s,a=QK(s,["grid"]),o=this._axisMark.getProduct(),l=Pe({x:n.x,y:n.y},this._axisStyle,a);o.encode(l),this._gridMark&&this._gridMark.getProduct().encode(Pe({x:n.x,y:n.y},this._getGridAttributes(),r))},this._fixAxisOnZero=()=>{const{onZero:n,visible:s}=this._spec.domainLine;if(this.visible&&n&&s!==!1){const{onZeroAxisId:r,onZeroAxisIndex:a}=this._spec.domainLine,o=this._option.getComponentsByKey("axes"),l=Ti(this.getOrient()),c=h=>{var d;return(l?!Ti(h.getOrient()):Ti(h.getOrient()))&&$t(h.getScale().type)&&(h.getTickData()?(d=h.getTickData().getLatestData())===null||d===void 0?void 0:d.find(p=>p.value===0):h.getScale().domain()[0]<=0&&It(h.getScale().domain())>=0)},u=o.filter(h=>c(h));if(u.length){let h;if(F(r))h=u.find(d=>d.id===r);else if(F(a)){const d=o[a];c(d)&&(h=d)}else h=u[0];if(h){const d=this._axisMark.getProduct(),p=h.valueToPosition(0);l?d.encode({line:Object.assign(Object.assign({},this._axisStyle.line),{dy:this._orient==="bottom"?-((h.getInverse()?h.getScale().range()[1]:h.getScale().range()[0])-p):p})}):d.encode({line:Object.assign(Object.assign({},this._axisStyle.line),{dx:this._orient==="left"?p:-((h.getInverse()?h.getScale().range()[0]:h.getScale().range()[1])-p)})})}}}},this._orient=_p(e,["z"]),Xc(this._orient)&&(this.layoutType="absolute"),this._dataSet=t.dataSet,this._coordinateType="cartesian"}static getSpecInfo(e){const t=e[this.specKey];if(!t)return null;const n=e.direction==="horizontal";if(!ie(t)){if(!ZK(t))return null;const{axisType:o,componentName:l}=AK(t,n);return t.type=o,[{spec:t,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:l}]}let s=!0;if(t.filter(o=>o.orient==="z")[0]){const o=t.filter(c=>c.orient==="bottom")[0],l=t.filter(c=>tc(c.orient))[0];s=t.length===3&&o&&l}let r=t.map((o,l)=>({spec:o,index:l}));s||(r=r.filter(({spec:o})=>o.orient!=="z"));const a=[];return r.forEach(({spec:o,index:l})=>{if(!ZK(o))return;const{axisType:c,componentName:u}=AK(o,n);o.type=c,a.push({spec:o,specPath:[this.specKey,l],specInfoPath:["component",this.specKey,l],type:u})}),a}static createComponent(e,t){const{spec:n}=e,s=QK(e,["spec"]),r=X.getComponentInKey(s.type);return r?new r(n,Object.assign(Object.assign({},t),s)):(t.onError(`Component ${s.type} not found`),null)}initLayout(){super.initLayout(),this._layout.autoIndent=this._spec.autoIndent!==!1,this._layout.layoutOrient=this._orient}setLayout3dBox(e){this.layout3dBox=e}getNewScaleRange(){const{width:e,height:t}=this.getLayoutRect(),{left:n,right:s,top:r,bottom:a}=this._innerOffset;let o=[];return Ti(this.getOrient())?Z(e)&&(o=this._inverse?[e-s,n]:[n,e-s]):Xc(this.getOrient())?Z(e)&&(o=this._inverse?[e-s,n]:[n,e-s],this._scale.range(o)):Z(t)&&(o=this._inverse?[r,t-a]:[t-a,r]),o}updateScaleRange(){let e=!1;const t=this.getNewScaleRange(),n=this._scale.range();return t.length===n.length&&t.every((s,r)=>s===n[r])?e=!1:(e=!0,this._scale.range(t)),e}init(e){var t;super.init(e),(t=this.pluginService)===null||t===void 0||t.load(Fgt.map(n=>new n)),this.callPlugin(n=>{this.pluginService&&n.onInit&&n.onInit(this.pluginService,this)})}setAttrFromSpec(){var e;if(super.setAttrFromSpec(),this.visible){Ti(this.getOrient())?Fi(this._spec.maxHeight)&&(this._spec.maxHeight="30%"):Fi(this._spec.maxWidth)&&(this._spec.maxWidth="30%");const n=this._getAxisAttributes();n.label.formatMethod=this._getLabelFormatMethod(),n.verticalFactor=this.getOrient()==="top"||this.getOrient()==="right"?-1:1,this._axisStyle=n}this._tick=this._spec.tick;const t=(e=this._option.getChart())===null||e===void 0?void 0:e.getSpec();this._inverse=hft(this._spec,(t==null?void 0:t.direction)==="horizontal")}onLayoutStart(e,t,n){if(super.onLayoutStart(e,t,n),!Xc(this.getOrient())&&this._spec.innerOffset){const s=this._spec;tc(this.getOrient())?["top","bottom"].forEach(r=>{this._innerOffset[r]=Un(s.innerOffset[r],t.height,t)}):["left","right"].forEach(r=>{this._innerOffset[r]=Un(s.innerOffset[r],t.width,t)})}}getSeriesStatisticsField(e){let t;return t=Ti(this.getOrient())?e.fieldX:Xc(this.getOrient())?e.fieldZ:e.fieldY,$t(this._scale.type)?t:[t[0]]}_tickTransformOption(){var e,t,n,s;return Object.assign(Object.assign({},super._tickTransformOption()),{noDecimals:(e=this._tick)===null||e===void 0?void 0:e.noDecimals,labelLastVisible:(t=this._spec.label)===null||t===void 0?void 0:t.lastVisible,labelFirstVisible:(n=this._spec.label)===null||n===void 0?void 0:n.firstVisible,labelFlush:(s=this._spec.label)===null||s===void 0?void 0:s.flush})}axisHelper(){return{isContinuous:$t(this._scale.type),dataToPosition:this.dataToPosition.bind(this),getScale:(e=0)=>this._scales[e],getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>this._inverse===!0,getSpec:()=>this._spec}}afterCompile(){var e;const t=(e=this._axisMark)===null||e===void 0?void 0:e.getProduct();t&&t.addEventListener(Ee.AFTER_ELEMENT_ENCODE,()=>{if(this._isLayout===!1&&(Ti(this.getOrient())?this.callPlugin(n=>{this.pluginService&&n.onDidLayoutHorizontal&&n.onDidLayoutHorizontal(this.pluginService,this)}):this.callPlugin(n=>{this.pluginService&&n.onDidLayoutVertical&&n.onDidLayoutVertical(this.pluginService,this)}),this._unitText)){const{x:n,y:s}=this.getLayoutStartPoint(),r=Ti(this._orient)?{x:an(this._scale.range())+n,y:s}:{x:n,y:Mn(this._scale.range())+s};this._unitText.setAttributes(r)}}),this.callPlugin(n=>{this.pluginService&&n.onDidCompile&&n.onDidCompile(this.pluginService,this)})}onRender(e){}changeRegions(e){}update(e){}resize(e){}collectScale(){const e=[];return Vi(this._regions,t=>{e.push(this.getOrient()==="left"||this.getOrient()==="right"?t.scaleY:t.scaleX)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),e}collectSeriesField(e,t){var n,s;let r;return r=e>0?(s=(n=t.getGroups())===null||n===void 0?void 0:n.fields)===null||s===void 0?void 0:s[e]:Ti(this.getOrient())?t.getSpec().x2Field?[...t.fieldX,t.fieldX2]:t.fieldX:Xc(this.getOrient())?t.fieldZ:t.getSpec().y2Field?[...t.fieldY,t.fieldY2]:t.fieldY,r}updateSeriesScale(){const e=this.getOrient();Vi(this._regions,t=>{Ti(e)?ao(t.getXAxisHelper(),this.axisHelper(),F(this._seriesUserId)||F(this._seriesIndex))&&(t.setScaleX(this._scale),t.setXAxisHelper(this.axisHelper())):tc(e)?ao(t.getYAxisHelper(),this.axisHelper(),F(this._seriesUserId)||F(this._seriesIndex))&&(t.setScaleY(this._scale),t.setYAxisHelper(this.axisHelper())):Xc(e)&&ao(t.getZAxisHelper(),this.axisHelper(),F(this._seriesUserId)||F(this._seriesIndex))&&(t.setScaleZ(this._scale),t.setZAxisHelper(this.axisHelper()))},{userId:this._seriesUserId,specIndex:this._seriesIndex})}getBoundsInRect(e){var t;let n={x1:0,y1:0,x2:0,y2:0};if(!this._visible)return n;this._verticalLimitSize=Ti(this.getOrient())?e.height:e.width,this.setLayoutRect(e),!this.updateScaleRange()&&ie((t=this.getTickData())===null||t===void 0?void 0:t.getLatestData())||this.computeData("range");const s={skipLayout:!1},r=Ti(this.getOrient());this.pluginService&&(r?this.callPlugin(l=>{l.onWillLayoutHorizontal&&l.onWillLayoutHorizontal(this.pluginService,s,this)}):this.callPlugin(l=>{l.onWillLayoutVertical&&l.onWillLayoutVertical(this.pluginService,s,this)}));const a=this._axisMark.getProduct();let o=!1;if(!s.skipLayout){const l=this._getUpdateAttribute(!0),c=a.getGroupGraphicItem(),u=Pe(Object.assign({},this.getLayoutStartPoint()),this._axisStyle,l,{line:{visible:!1}});let h=c.getBoundsWithoutRender(u);h.empty()&&(h=new nr().set(u.x,u.y,u.x,u.y)),o=!0,this._latestBounds=h,n=this._appendAxisUnit(h,r)}return o||(this._latestBounds=a.getBounds()),n}positionToData(e,t){const n=Ti(this.getOrient());t&&(e-=n?this.getLayoutStartPoint().x:this.getLayoutStartPoint().y),this._innerOffset&&(e=n?zi(e,this._innerOffset.left,this.getLayoutRect().width-this._innerOffset.right):zi(e,this._innerOffset.top,this.getLayoutRect().height-this._innerOffset.bottom));const s=this._scale.range();return(e-s[0])*(e-It(s))>0?null:this._scale.invert(e)}_getTitleLimit(e){var t,n,s,r,a;if(this._spec.title.visible&&B((t=this._spec.title.style)===null||t===void 0?void 0:t.maxLineWidth)){const o=(a=(s=(n=this._axisStyle.title)===null||n===void 0?void 0:n.angle)!==null&&s!==void 0?s:(r=this._spec.title.style)===null||r===void 0?void 0:r.angle)!==null&&a!==void 0?a:0;if(e){const u=this.getLayoutRect().width,h=Math.abs(Math.cos(o));return h<1e-6?1/0:u/h}const l=this.getLayoutRect().height,c=Math.abs(Math.sin(o));return c<1e-6?1/0:l/c}return null}_getUpdateAttribute(e){var t;let n=0,s=0;if(!e){const y=this.getRegions();let{x:b,y:x}=y[0].getLayoutStartPoint(),S=b+y[0].getLayoutRect().width,C=x+y[0].getLayoutRect().height;for(let w=1;w<y.length;w++){const A=y[w],{x:T,y:E}=A.getLayoutStartPoint(),{width:P,height:O}=A.getLayoutRect();b=Math.min(b,T),S=Math.max(S,P+T),x=Math.min(x,E),C=Math.max(C,O+E)}n=Math.abs(C-x),s=Math.abs(S-b)}const{width:r,height:a}=this.getLayoutRect(),o=Ti(this._orient),l=tc(this._orient),c=Xc(this._orient);let u={x:0,y:0},h=0,d=0;const p=this.layout3dBox?this.layout3dBox.length:0;if(o?(u={x:r,y:0},h=n,d=r):l&&(u={x:0,y:a},h=s,d=a),c){const y=(t=this.directionStr)!==null&&t!==void 0?t:"r2l",b=this.layout3dBox?this.layout3dBox.width:0;let x=[0,0],S=-Math.PI/2,C=0;y==="l2r"&&(C=this.layout3dBox.length,x=[0,0,0],S=Math.PI/2);const w=this.getLabelItems(r),A={start:{x:0,y:0},end:{x:p,y:0},z:C,alpha:S,anchor3d:x,title:{text:this._spec.title.text||this._dataFieldText,maxWidth:this._getTitleLimit(o)},items:w};return e||(A.grid={type:"line",start:{x:0,y:0},end:{x:p,y:0},items:w[0],verticalFactor:this._axisStyle.verticalFactor,depth:b,length:n,z:C,alpha:S,anchor3d:x}),A}let f=o?this.layout.minHeight:this.layout.minWidth;(o&&this._layout.layoutRectLevelMap.height===mh||l&&this._layout.layoutRectLevelMap.width===mh)&&(f=this._verticalLimitSize);const g=this.getLabelItems(d),m={start:{x:0,y:0},end:u,title:{text:this._spec.title.text||this._dataFieldText,maxWidth:this._getTitleLimit(o)},items:g,verticalLimitSize:this._verticalLimitSize,verticalMinSize:f,label:{overflowLimitLength:this._getLabelOverflowLimit(o)}};return e||(m.grid={type:"line",start:{x:0,y:0},end:u,items:g[0],verticalFactor:this._axisStyle.verticalFactor,depth:p,length:h}),m}getLabelItems(e){var t;const n=(t=this.getTickData())===null||t===void 0?void 0:t.getLatestData();return n&&n.length?[n.map(s=>{const r=this._getNormalizedValue([s.value],e);return Dy(s.value,r)}).filter(s=>{const{value:r,rawValue:a}=s,o=this._scale.domain();return this.getSpec().type==="log"?r>=0&&r<=1:$t(this._scale.type)?a>=o[0]&&a<=It(o):o.includes(a)})]:[]}initEvent(){super.initEvent(),this.visible&&(this.event.on(ke.layoutEnd,this._updateAxisLayout),this.event.on(ke.layoutEnd,this._fixAxisOnZero),this.event.on(ke.layoutRectUpdate,()=>{this._clearLayoutCache()}))}_getNormalizedValue(e,t){return t===0?0:this.dataToPosition(e)/t}_layoutCacheProcessing(e){return["width","height"].forEach(t=>{e[t]<this._layoutCache[t]?e[t]=this._layoutCache[t]:this._layoutCache[t]=e[t]}),this._autoIndentOnce&&this._hasAutoIndent?["x1","x2","y1","y2"].forEach(t=>{this.layout.getLastComputeOutBounds()[t]=this._layoutCache._lastComputeOutBounds[t]}):(this._hasAutoIndent=!0,["x1","x2","y1","y2"].forEach(t=>{this.layout.getLastComputeOutBounds()[t]<this._layoutCache._lastComputeOutBounds[t]?this.layout.getLastComputeOutBounds()[t]=this._layoutCache._lastComputeOutBounds[t]:this._layoutCache._lastComputeOutBounds[t]=this.layout.getLastComputeOutBounds()[t]})),e}_clearLayoutCache(){this._hasAutoIndent=!1,this._layoutCache.width=0,this._layoutCache.height=0,this._layoutCache._lastComputeOutBounds={x1:0,x2:0,y1:0,y2:0}}onDataUpdate(){this._clearLayoutCache()}_appendAxisUnit(e,t){var n;if(this._spec.unit&&this._spec.unit.visible){const{text:s,style:r}=this._spec.unit;let a,o;const{x:l,y:c}=this.getLayoutStartPoint();t?(a={x:an(this._scale.range())+l,y:c},o={textAlign:"left",textBaseline:"middle"}):(a={x:l,y:Mn(this._scale.range())+c},o={textAlign:this._orient==="left"?"left":"right",textBaseline:"bottom"}),o=Object.assign(Object.assign(Object.assign({},o),r),{x:a.x,y:a.y,text:s}),this._unitText?this._unitText.setAttributes(o):(this._unitText=Cy(o),this._unitText.name="axis-unit",(n=this.getContainer())===null||n===void 0||n.add(this._unitText));const u=this._unitText.AABBBounds;t?(e.x2+=u.x2>e.x2?u.x2-e.x2:0,e.y2+=u.y2>e.y2?u.y2-e.y2:0):(e.x1+=u.x1<e.x1?u.x1-e.x1:0,e.y1+=u.y1<e.y1?u.y1-e.y1:0)}return e}_getNeedClearVRenderComponents(){return this._unitText?[this._unitText]:[]}_getLabelOverflowLimit(e){var t,n;if(e&&((t=this._spec.label)===null||t===void 0?void 0:t.visible)!==!1&&((n=this._spec.label)===null||n===void 0?void 0:n.autoLimit)===!0){const s=this._option.getComponentsByKey("axes"),r=this.getRegions(),a=s.filter(h=>{const d=h.getOrient();return(d==="left"||d==="right")&&h.getRegions().some(p=>r.includes(p))});let o=0,l=0;const c=this.getLayoutStartPoint().x,u=c+this.getLayoutRect().width;return a.forEach(h=>{const d=h.getLayoutStartPoint().x;if(h.getOrient()==="left"&&d===c){const p=h.getLayoutRect().width;o=Math.max(o,p)}else if(d===u){const p=h.getLayoutRect().width;l=Math.max(l,p)}}),{left:o,right:l}}}}xT.type=oe.cartesianAxis,xT.specKey="axes";const Bgt=(i,e,t)=>t.reduce((n,s,r)=>(n.push([s,t.length===r+1?e:t[r+1]]),n),[[i,t[0]]]);function jgt(i,e){const t=i[0],n=i[i.length-1],s=e.filter(r=>r>t&&r<n);return s.length===0?[[t,n]]:Bgt(t,n,s)}const eX=(i,e)=>i-e,Ngt=(i,e)=>{const t=[0];let n=0,s=0;for(;n<e.length;)i[s]<=e[n]?(t[n]+=1,s+=1):(n+=1,t[n]=0);return t[n]=i.slice(s).length,t};function $gt(i,e){const t=Ngt(i,e),n=i.length;return t.reduce((s,r,a)=>{const o=s[a-1]?s[a-1][1]:0,l=(100*o+100*+(r/n).toFixed(2))/100;return s.push([o,l>1||l>.95?1:l]),s},[]).filter(s=>!(s[0]===0&&s[1]===0||s[0]===1&&s[1]===1))}function zgt(i,e){return i.sort(eX),e.sort(eX),{domain:jgt(i,e),scope:$gt(i,e)}}const Hgt=Math.sqrt(50),Vgt=Math.sqrt(10),Ugt=Math.sqrt(2);class DO{constructor(){this._extend={},this.niceLabelFormatter=null}setExtraAttrFromSpec(){F(this._spec.nice)&&(this._nice=this._spec.nice),F(this._spec.zero)&&(this._zero=this._spec.zero),this._expand=this._spec.expand,this._domain=v1(this._spec)}transformScaleDomain(){this.setScaleNice()}setLinearScaleNice(){var e;if(!this._nice)return!1;let t=5;const n=this._spec.tick||{};if(Z(n.forceTickCount))t=n.forceTickCount;else if(ee(n.tickCount)){const a=this._scale.range();let o=Math.abs(It(a)-a[0]);o===1&&this._option&&(o=Ti(this._orient)?this._option.getChartViewRect().width:this._option.getChartViewRect().height),t=n.tickCount({axisLength:o,labelStyle:this._spec.label&&this._spec.label.style})}else t=Z(n.tickCount)?n.tickCount:5;this._spec.niceType==="accurateFirst"&&(t=Math.max(5,t));const{min:s,max:r}=(e=this._domain)!==null&&e!==void 0?e:{};return B(s)&&B(r)&&B(this._softMaxValue)&&B(this._softMinValue)?this._scale.nice(t):(F(s)||F(this._softMinValue))&&B(r)&&B(this._softMaxValue)?this._scale.niceMax(t):!(!B(s)||!B(this._softMinValue)||!F(r)&&!F(this._softMaxValue))&&this._scale.niceMin(t)}setLogScaleNice(){var e;if(!this._nice)return!1;const{min:t,max:n}=(e=this._domain)!==null&&e!==void 0?e:{};return B(t)&&B(n)&&B(this._softMaxValue)&&B(this._softMinValue)?this._scale.nice():(F(t)||F(this._softMinValue))&&B(n)&&B(this._softMaxValue)?this._scale.niceMax():!(!B(t)||!B(this._softMinValue)||!F(n)&&!F(this._softMaxValue))&&this._scale.niceMin()}setScaleNice(){return this._spec.type==="log"?this.setLogScaleNice():this.setLinearScaleNice()}dataToPosition(e,t){return this.valueToPosition(e[0])}valueToPosition(e){return this._scale.scale(e)}computeLinearDomain(e){let t=[];if(e.length){const n=this._spec.breaks&&this._spec.breaks.length;let s,r,a=[];if(e.forEach(o=>{const{min:l,max:c}=o;s=s===void 0?l:Math.min(s,l),r=r===void 0?c:Math.max(r,c),n&&(a=a.concat(o.values))}),n){const o=[],l=[];for(let c=0;c<this._spec.breaks.length;c++){const{range:u}=this._spec.breaks[c];u[0]<=u[1]&&u[1]<=r&&(o.push(u),l.push(this._spec.breaks[c]))}if(o.sort((c,u)=>c[0]-u[0]),o.length){const{domain:c,scope:u}=zgt(a,mF(o));t=mF(c),this._break={domain:c,scope:u,breakDomains:o,breaks:l}}else t=[s,r]}else t=[s,r]}else t[0]=0,t[1]=0;return this.setSoftDomainMinMax(t),this.expandDomain(t),this.includeZero(t),this.setDomainMinMax(t),t}expandDomain(e){if(!this._expand)return;let t=e[0],n=It(e);t===n&&(n===0?n=1:n>0?t=0:n<0&&(n=0)),F(this._expand.min)&&(e[0]=t-(n-t)*this._expand.min),F(this._expand.max)&&(e[e.length-1]=n+(n-t)*this._expand.max)}niceDomain(e){const{min:t,max:n}=v1(this._spec);if(F(t)||F(n)||this._spec.type!=="linear")return e;if(Math.abs(Mn(e)-an(e))<=1e-12){let s=e[0];const r=s>=0?1:-1;if(s=Math.abs(s),s<1)e[0]=0,e[e.length-1]=1;else{let a=s/5;const o=Math.floor(Math.log(a)/Math.LN10),l=a/Math.pow(10,o);a=(l>=Hgt?10:l>=Vgt?5:l>=Ugt?2:1)*Math.pow(10,o),e[0]=0,e[e.length-1]=10*a}r<0&&(e.reverse(),e[0]*=-1,e[e.length-1]*=-1)}return e}includeZero(e){this._zero&&(e[0]=Math.min(e[0],0),e[e.length-1]=Math.max(It(e),0))}setExtendDomain(e,t){if(t===void 0)return void delete this._extend[e];this._extend[e]=t;const n=this._scale.domain();this.extendDomain(n),this.includeZero(n),this.setDomainMinMax(n),this.niceDomain(n),this._scale.domain(n,this._nice),this._nice&&!this.setScaleNice()&&this._scale.rescale(),this.event.emit(ke.scaleUpdate,{model:this,value:"domain"})}extendDomain(e){let t;const n=e.length-1,s=e[0]-e[n]>0,r=s?n:0,a=s?0:n;for(const o in this._extend)t=this._extend[o],t>e[a]&&(e[a]=t),t<e[r]&&(e[r]=t)}getDomainSpec(){return this._domain}setDomainMinMax(e){if(!this._domain)return;const{min:t,max:n}=this._domain;F(t)&&(e[0]=t),F(n)&&(e[e.length-1]=n)}setSoftDomainMinMax(e){const{softMin:t,softMax:n}=this._spec;if(F(t)){let s=ee(t)?t(e):t;B(s)&&(s=e[0]),s<=e[0]&&(e[0]=s,this._softMinValue=s)}if(F(n)){let s=ee(n)?n(e):n;B(s)&&(s=It(e)),s>=It(e)&&(e[e.length-1]=s),this._softMaxValue=s}}setZero(e){this._zero!==e&&(this._zero=e,this.updateScaleDomain())}updateScaleDomain(){if(!this.isSeriesDataEnable())return;const e=this.collectData(),t=this.computeLinearDomain(e);this.updateScaleDomainByModel(t)}updateScaleDomainByModel(e){e=e??this._scale.domain(),this.extendDomain(e),this.includeZero(e),this.setDomainMinMax(e),this.niceDomain(e),this._scale.domain(e,this._nice),this._nice&&!this.setScaleNice()&&this._scale.rescale(),this._updateNiceLabelFormatter(e),this._domainAfterSpec=this._scale.domain(),this.event.emit(ke.scaleDomainUpdate,{model:this}),this.event.emit(ke.scaleUpdate,{model:this,value:"domain"})}getDomainAfterSpec(){return this._domainAfterSpec}_updateNiceLabelFormatter(e){const t=Math.abs(It(e)-e[0]),n=Math.max(-Math.floor(Math.log10(t)),0)+2,s=Math.pow(10,n);this.niceLabelFormatter=r=>Z(+r)?Math.round(+r*s)/s:r}}class ud extends xT{constructor(){super(...arguments),this.type=oe.cartesianLinearAxis,this._zero=!0,this._nice=!0,this._extend={},this._scale=new Ma}setAttrFromSpec(){super.setAttrFromSpec(),this.setExtraAttrFromSpec()}initScales(){var e,t;super.initScales();const n=[0,1];F((e=this._domain)===null||e===void 0?void 0:e.min)&&(n[0]=this._domain.min),F((t=this._domain)===null||t===void 0?void 0:t.max)&&(n[1]=this._domain.max),this._scale.domain(n)}_tickTransformOption(){var e;return Object.assign(Object.assign({},super._tickTransformOption()),{breakData:!((e=this._spec.breaks)===null||e===void 0)&&e.length?()=>this._break:null})}_getUpdateAttribute(e){var t,n;const s=super._getUpdateAttribute(e);if(!Xc(this._orient)&&(!((n=(t=this._break)===null||t===void 0?void 0:t.breaks)===null||n===void 0)&&n.length)){const{width:r,height:a}=this.getLayoutRect(),o=Ti(this._orient),l=o?r:a;s.breaks=this._break.breaks.map(c=>{const{range:u,breakSymbol:h,gap:d=6}=c,p=this.valueToPosition((u[0]+u[1])/2)/l;let f;f=Aa(d)?Number(d.substring(0,d.length-1))/100:d/l;const g=Z(h==null?void 0:h.angle)?h.angle:o?60:15;return{range:[p-f/2,p+f/2],breakSymbol:Object.assign(Object.assign({visible:!0},h),{angle:g*Math.PI/180}),rawRange:u}})}return s}getNewScaleRange(){var e,t;let n=super.getNewScaleRange();return!((e=this._spec.breaks)===null||e===void 0)&&e.length&&(!((t=this._break)===null||t===void 0)&&t.scope)&&(n=mF(this._break.scope).map(s=>n[0]+(It(n)-n[0])*s)),n}computeDomain(e){return this.computeLinearDomain(e)}axisHelper(){const e=super.axisHelper();return e.setExtendDomain=this.setExtendDomain.bind(this),e.valueToPosition=this.valueToPosition.bind(this),e}registerTicksTransform(){const e=`${this.type}-ticks`;return Fe(this._option.dataSet,e,jx),e}}ud.type=oe.cartesianLinearAxis,ud.specKey="axes",Yt(ud,DO);const Qr=()=>{ig(),ng(),sg(),X.registerComponent(ud.type,ud)};class Tce{constructor(){this._rawDomainIndex=[]}_initData(){var e;if(this._spec.showAllGroupLayers&&this._scales.length>1)for(let t=0;t<this._scales.length;t++){const n=((e=this._spec.layers)!==null&&e!==void 0?e:[])[this._scales.length-1-t]||{};if(n.visible!==!1&&n.tickCount!==0&&n.forceTickCount!==0){const s=this._initTickDataSet(Object.assign(Object.assign({},this._tickTransformOption()),n),t);s.target.addListener("change",this._forceLayout.bind(this));const r=new Ec(this._option,s);this._tickData.push(r),this._tickDataMap||(this._tickDataMap={}),this._tickDataMap[t]=r}}else{const t=this._initTickDataSet(this._tickTransformOption());t.target.addListener("change",this._forceLayout.bind(this));const n=new Ec(this._option,t);this._tickData=[n],this._tickDataMap={0:n}}}dataToPosition(e,t={}){var n,s;if(e.length===0||this._scales.length===0)return 0;const{position:r,bandScale:a}=this.getPosition(e);return r+a.bandwidth()*((s=(n=t.bandPosition)!==null&&n!==void 0?n:this._spec.bandPosition)!==null&&s!==void 0?s:this._defaultBandPosition)}valueToPosition(e){return this._scale.scale(e)}updateGroupScaleRange(){let e=this._scale;this._scales.forEach((t,n)=>{n>0&&(t.range([0,e.bandwidth()]),e=t)})}getPosition(e){let t=0,n=this._scale;if(this._scales.length===1||e.length===1)t=this.valueToPosition(e[0]);else{const s=Math.min(e.length,this._scales.length);for(let r=0;r<s;r++)t+=this._scales[r].scale(e[r]);n=this._scales[s-1]}return{position:t,bandScale:n}}calcScales(e,t){var n,s;const{bandPadding:r,paddingInner:a,paddingOuter:o}=this._spec,l=ie(r),c=ie(a),u=ie(o);for(let h=0;h<this._scales.length;h++){const d=l?r[h]:r,p=c?a[h]:a,f=u?o[h]:o;this._scales[h].paddingInner((n=p??d)!==null&&n!==void 0?n:e,!0).paddingOuter((s=f??d)!==null&&s!==void 0?s:t,!0)}}computeBandDomain(e){if(!e.length)return[];if(e.length===1)return e[0].values;const t=new Set;for(let n=0;n<e.length;n++)for(let s=0;s<e[n].values.length;s++)t.add(e[n].values[s]);return Array.from(t)}updateScaleDomain(){var e;if(!this.isSeriesDataEnable())return;!(!((e=this._rawDomainIndex)===null||e===void 0)&&e.length)&&this._scales.length&&this._updateRawDomain();const t=this._spec.domain;for(let n=0;n<this._scales.length;n++)if(t&&t.length&&n===0)this._scales[n].domain(t);else{const s=this.collectData(n),r=this.computeBandDomain(s);this._scales[n].domain(r.sort((a,o)=>this._rawDomainIndex[n][a]-this._rawDomainIndex[n][o]))}this.transformScaleDomain(),this.event.emit(ke.scaleDomainUpdate,{model:this}),this.event.emit(ke.scaleUpdate,{model:this,value:"domain"})}getLabelItems(e){const t=[];let n=[];return this._scales.forEach((s,r)=>{var a;const o=this._tickDataMap[r],l=(a=o==null?void 0:o.getLatestData())===null||a===void 0?void 0:a.length,c=l?o.getLatestData().map(u=>u.value):s.domain();if(c&&c.length)if(n&&n.length){const u=[],h=[];n.forEach(d=>{c.forEach(p=>{const f=q(d).concat(p);if(h.push(f),l){const g=Dy(p,this._getNormalizedValue(f,e));u.push(g)}})}),l&&t.push(u.filter(d=>d.value>=0&&d.value<=1)),n=h}else c.forEach(u=>{n.push(u)}),l&&t.push(o.getLatestData().map(u=>Dy(u.value,this._getNormalizedValue([u.value],e))).filter(u=>u.value>=0&&u.value<=1))}),t.reverse()}_updateRawDomain(){this._rawDomainIndex=[];const e=this._spec.domain;for(let t=0;t<this._scales.length;t++)if(e&&e.length&&t===0)this._scales[t].domain(e);else{const n=this.collectData(t,!0),s=this.computeBandDomain(n);this._rawDomainIndex[t]={},s.forEach((r,a)=>this._rawDomainIndex[t][r]=a)}}_clearRawDomain(){this._rawDomainIndex=[]}}class wv extends xT{constructor(){super(...arguments),this.type=oe.cartesianBandAxis,this._scale=new eg}computeDomain(e){return this.computeBandDomain(e)}updateScaleRange(){const e=super.updateScaleRange();return this.updateGroupScaleRange(),e}initScales(){super.initScales(),this.calcScales(this._defaultBandInnerPadding,this._defaultBandOuterPadding)}axisHelper(){const e=(t=0)=>this._scales[t];return{isContinuous:!1,dataToPosition:this.dataToPosition.bind(this),getScale:e,getBandwidth:(t=0)=>e(t).bandwidth(),getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>this._inverse,getSpec:()=>this._spec}}registerTicksTransform(){const e=`${this.type}-ticks`;return Fe(this._option.dataSet,e,Vat),e}transformScaleDomain(){this.updateFixedWholeLength()}updateFixedWholeLength(){if(this._scale){const{bandSize:e,maxBandSize:t,minBandSize:n}=this._getOuterBandSizeFromSpec();if(e&&this._scale.bandwidth(e),t&&this._scale.maxBandwidth(t),n&&this._scale.minBandwidth(n),this._scale.isBandwidthFixed()&&this._spec.autoRegionSize&&(e||t)){const s=YF(this._scale.domain().length,e??t,this._scale.paddingInner(),this._scale.paddingOuter());["bottom","top"].includes(this._orient)?this._regions.forEach(r=>r.setMaxWidth(s)):["left","right"].includes(this._orient)&&this._regions.forEach(r=>r.setMaxHeight(s))}}}_getOuterBandSizeFromSpec(){var e;let{bandSize:t,maxBandSize:n,minBandSize:s,bandSizeLevel:r=0}=this._spec;const{gap:a,extend:o=0}=(e=this._spec.bandSizeExtend)!==null&&e!==void 0?e:{};r=Math.min(r,this._scales.length-1);for(let l=r;l>0;l--){const c=this._scales[l],u=c.domain(),h=c.paddingInner(),d=c.paddingOuter(),p=f=>{const g=l===r?o:0;return B(a)||l<r?YF(u.length,f,h,d)+g:(f+(be(a)?f*(Number(a.substring(0,a.length-1))/100):a))*u.length/(this._scales[l-1].paddingInner()+1)+g};F(t)&&(t=p(t)),F(n)&&(n=p(n)),F(s)&&(s=p(s))}return{bandSize:t,maxBandSize:n,minBandSize:s}}}wv.type=oe.cartesianBandAxis,wv.specKey="axes",Yt(wv,Tce);const ea=()=>{ig(),ng(),sg(),X.registerComponent(wv.type,wv)};class ST extends ud{constructor(){super(...arguments),this.type=oe.cartesianTimeAxis,this._zero=!1,this.effect={scaleUpdate:e=>{this.computeData(e==null?void 0:e.value),Vi(this._regions,t=>{Ti(this.getOrient())?ao(t.getXAxisHelper(),this.axisHelper(),F(this._seriesUserId)||F(this._seriesIndex))&&t.setXAxisHelper(this.axisHelper()):ao(t.getYAxisHelper(),this.axisHelper(),F(this._seriesUserId)||F(this._seriesIndex))&&t.setYAxisHelper(this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}}}setAttrFromSpec(){var e;super.setAttrFromSpec(),this._tick=Pe({},this._spec.tick,(e=this._spec.layers)===null||e===void 0?void 0:e[0])}_initData(){var e;if(super._initData(),(e=this._spec.layers)===null||e===void 0?void 0:e[1]){const t=new Rt(this._option.dataSet,{name:`${this.type}_${this.id}_layer_1_ticks`}).parse(this._scale,{type:"scale"}).transform({type:`${this.type}-ticks`,options:Object.assign(Object.assign({},this._tickTransformOption()),{tickCount:this._spec.layers[1].tickCount,forceTickCount:this._spec.layers[1].forceTickCount,tickStep:this._spec.layers[1].tickStep})},!1);this._layerTickData=new Ec(this._option,t)}}computeData(e){super.computeData(e),this._layerTickData&&(this._layerTickData.getDataView().reRunAllTransform(),this._layerTickData.updateData())}_getLabelFormatMethod(){var e,t,n,s,r,a,o,l;const c=ul.getInstance(),u=((t=(e=this._spec.layers)===null||e===void 0?void 0:e[1])===null||t===void 0?void 0:t.timeFormat)||"%Y%m%d",h=(((s=(n=this._spec.layers)===null||n===void 0?void 0:n[1])===null||s===void 0?void 0:s.timeFormatMode)||"local")==="local"?c.timeFormat:c.timeUTCFormat,d=((a=(r=this._spec.layers)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.timeFormat)||"%Y%m%d",p=(((l=(o=this._spec.layers)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.timeFormatMode)||"local")==="local"?c.timeFormat:c.timeUTCFormat;return(f,g,m,y,b)=>{var x;let S;return S=b===0?p(d,f):h(u,f),!((x=this._spec.label)===null||x===void 0)&&x.formatMethod?this._spec.label.formatMethod(S,g):S}}getLabelItems(e){var t,n;const s=[],r=(t=this.getTickData())===null||t===void 0?void 0:t.getLatestData();r&&r.length&&s.push(r.map(o=>Dy(o.value,this._getNormalizedValue([o.value],e))));const a=(n=this._layerTickData)===null||n===void 0?void 0:n.getLatestData();return a&&a.length&&s.push(a.map(o=>Dy(o.value,this._getNormalizedValue([o.value],e)))),s}registerTicksTransform(){const e=`${this.type}-ticks`;return Fe(this._option.dataSet,e,jx),e}transformScaleDomain(){}}ST.type=oe.cartesianTimeAxis,ST.specKey="axes";const Wgt=()=>{ig(),ng(),sg(),X.registerComponent(ST.type,ST)};class Av extends ud{constructor(){super(...arguments),this.type=oe.cartesianLogAxis,this._zero=!1,this._scale=new lO}initScales(){var e;super.initScales(),this._scale.base((e=this._spec.base)!==null&&e!==void 0?e:10),this._scale.clamp(!0,null,!1)}registerTicksTransform(){const e=`${this.type}-ticks`;return Fe(this._option.dataSet,e,jx),e}transformScaleDomain(){}}Av.type=oe.cartesianLogAxis,Av.specKey="axes",Yt(Av,DO);const Ggt=()=>{ig(),ng(),sg(),X.registerComponent(Av.type,Av)};class kv extends ud{constructor(){super(...arguments),this.type=oe.cartesianSymlogAxis,this._zero=!1,this._scale=new cO}initScales(){var e;super.initScales(),this._scale.constant((e=this._spec.constant)!==null&&e!==void 0?e:10)}registerTicksTransform(){const e=`${this.type}-ticks`;return Fe(this._option.dataSet,e,jx),e}transformScaleDomain(){}}kv.type=oe.cartesianSymlogAxis,kv.specKey="axes",Yt(kv,DO);const Kgt=()=>{ig(),ng(),sg(),X.registerComponent(kv.type,kv)};class wm extends Io{constructor(){super(...arguments),this.type=re.line,this.transformerConstructor=Gx,this._sortDataByAxis=!1}compile(){super.compile(),this.addSamplingCompile(),this.addOverlapCompile()}initMark(){var e;const t={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold},n=(e=this._spec.seriesMark)!==null&&e!==void 0?e:"line";this.initLineMark(t,n==="line"),this.initSymbolMark(t,n==="point")}initTooltip(){super.initTooltip();const{group:e,mark:t}=this._tooltipHelper.activeTriggerSet;this._lineMark&&e.add(this._lineMark),this._symbolMark&&(t.add(this._symbolMark),e.add(this._symbolMark))}initMarkStyle(){this.initLineMarkStyle(this._direction),this.initSymbolMarkStyle()}initAnimation(){var e,t,n,s;const r={direction:this.direction},a=(t=(e=this._spec)===null||e===void 0?void 0:e.animationAppear)===null||t===void 0?void 0:t.preset;if(this._lineMark.setAnimationConfig(ft((n=X.getAnimationInKey("line"))===null||n===void 0?void 0:n(r,a),kt("line",this._spec,this._markAttributeContext))),this._symbolMark){const o=Yd(this);this._symbolMark.setAnimationConfig(ft((s=X.getAnimationInKey("scaleInOut"))===null||s===void 0?void 0:s(),kt("point",this._spec,this._markAttributeContext),o))}}onLayoutEnd(e){super.onLayoutEnd(e),this.reCompileSampling()}getSeriesStyle(e){var t;const n=((t=this._spec)===null||t===void 0?void 0:t.seriesMark)!=="point";return s=>{var r,a;return n&&s==="fill"&&(s="stroke"),(a=(r=this._seriesMark)===null||r===void 0?void 0:r.getAttribute(s,e))!==null&&a!==void 0?a:void 0}}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._lineMark,this._symbolMark]}}wm.type=re.line,wm.mark=Sgt,wm.transformerConstructor=Gx,Yt(wm,P4);const Xgt=()=>{v4(),b4(),RO(),qu(),gce(),IO(),ea(),Qr(),X.registerSeries(wm.type,wm)};class Ygt{get dataList(){return this._dataArr}constructor(e){this._dataArr=[],this._dataSet=e}parseData(e){this._dataArr=[];const t=q(e);for(let n=0;n<t.length;n++)this._dataArr.push(x4(t[n],this._dataSet,this._dataArr))}updateData(e,t=!1,n=!0){const s=q(e);return(!t||s.length===this._dataArr.length)&&(this._dataValueForEach(s,(r,a)=>{a.markRunning()}),this._dataValueForEach(s,(r,a)=>{S4(a,r,n)}),!0)}_dataValueForEach(e,t){e.forEach((n,s)=>{if(n instanceof Rt)return;const r=this.getSeriesData(n.id,s);r&&t(n,r,s)})}getSeriesData(e,t){if(!this._dataArr.length)return null;if(typeof e=="string"){const n=this._dataArr.filter(s=>s.name===e);if(n[0])return n[0];Yr(`no data matches dataId ${e}!`)}if(typeof t=="number"){if(this._dataArr[t])return this._dataArr[t];Yr(`no data matches dataIndex ${t}!`)}return this._dataArr[0]}}class qgt{constructor(e,t){this._scaleSpecMap=new Map,this._scaleMap=new Map,this._modelScaleSpecMap=new Map,this._markAttributeScaleMap=new Map,this._spec=null,this._chart=null,this.getStatisticalFields=n=>{const s=[];return this._scaleSpecMap.forEach((r,a)=>{mm(r.domain)&&r.domain.forEach(o=>{o.dataId===n&&o.fields.forEach(l=>{qm(s,[{key:l,operations:$t(r.type)?["max","min"]:["values"]}])})})}),this._markAttributeScaleMap.forEach((r,a)=>{const o=this.getScale(a);r.forEach(l=>{this._getSeriesBySeriesId(l.seriesId).getRawData().name===n&&l.field&&qm(s,[{key:l.field,operations:$t(o.type)?["max","min"]:["values"]}])})}),s},this._spec=e,this._chart=t,this._setAttrFromSpec()}_createFromSpec(e){if(!e.id)return null;let t=this._scaleMap.get(e.id);return t||(t=e.type==="ordinal"&&e.id==="color"?sB("colorOrdinal"):sB(e.type)),t?(ie(e.range)&&t.range(e.range),ie(e.domain)&&(mm(e.domain)||t.domain(e.domain)),e.specified&&t.specified&&t.specified(e.specified),t):null}_setAttrFromSpec(){var e;if(!(!((e=this._spec)===null||e===void 0)&&e.length))return;const t=new Map,n=new Map;this._spec.forEach(s=>{const r=this._createFromSpec(s);r&&(t.set(s.id,r),n.set(s.id,s))}),this._modelScaleSpecMap.forEach(s=>{const r=this._createFromSpec(s);r&&(t.set(s.id,r),n.set(s.id,s))}),this._scaleSpecMap=n,this._scaleMap=t}updateSpec(e){const t={change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1};if(Pt(e,this._spec))return t;t.change=!0;for(let n=0;n<e.length;n++){const s=e[n],r=this._scaleMap.get(s.id);if(!r)return t.reMake=!0,t;const a=this._spec.find(o=>o.id===s.id);if(!a.id||a.type!==s.type||!Pt(a.specified,s.specified))return t.reMake=!0,t;s.range&&!Pt(s.range,r.range())&&(r.range(s.range),t.reRender=!0),mm(s.domain)?t.reRender=!0:Pt(s.domain,r.domain())||(r.domain(s.domain),t.reRender=!0),this._scaleSpecMap.set(s.id,s)}return this._spec=e,t}registerModelScale(e){const t=this._createFromSpec(e);t&&(this._modelScaleSpecMap.set(e.id,e),this._scaleSpecMap.set(e.id,e),this._scaleMap.set(e.id,t))}removeModelScale(e){this._modelScaleSpecMap.forEach(t=>{e(t)&&(this._modelScaleSpecMap.delete(t.id),this._scaleSpecMap.delete(t.id),this._scaleMap.delete(t.id))})}getScale(e){return this._scaleMap.get(e)}getScaleSpec(e){return this._scaleSpecMap.get(e)}_getSeriesByRawDataId(e){const t=this._chart.getAllSeries();for(let n=0;n<t.length;n++){const s=t[n];if(s.getRawData().name===e)return s}return null}_getSeriesBySeriesId(e){const t=this._chart.getAllSeries();for(let n=0;n<t.length;n++){const s=t[n];if(s.id===e)return s}return null}updateScaleDomain(e){this._scaleSpecMap.forEach((t,n)=>{const s=this._scaleMap.get(n);if(!s)return;if(!mm(t.domain))return t.domain&&t.domain.length!==0||s.domain(e),void this._updateMarkScale(n,s,s.domain().slice());let r;r=$t(t.type)?[null,null]:new Set,t.domain.forEach(o=>{const l=this._getSeriesByRawDataId(o.dataId);if(!l)return;const c=$t(t.type);o.fields.forEach(u=>{const h=l.getRawDataStatisticsByField(u,c);h&&(c?(B(r[0])?r[0]=h.min:r[0]=Math.min(h.min,r[0]),B(r[1])?r[1]=h.max:r[1]=Math.max(h.max,r[1])):h.values.forEach(d=>{r.add(d)}))})});const a=r;$t(t.type)||(r=Array.from(r)),s.domain(r),this._updateMarkScale(n,s,a)})}_updateMarkScale(e,t,n){const s=this._markAttributeScaleMap.get(e);s&&s.length!==0&&s.forEach(r=>{if(!r.field||!r.markScale||r.markScale===t)return;if(B(r.changeDomain)||r.changeDomain==="none"||B(r.seriesId))return void($t(t.type)?r.markScale.domain(n):t.domain(Array.from(n)));const a=this._getSeriesBySeriesId(r.seriesId),o=$t(t.type),l=a.getRawDataStatisticsByField(r.field,o);if(!Te(l))return r.changeDomain==="expand"?(o?(n[0]=Math.min(n[0],l.min),n[1]=Math.max(n[1],l.max)):(l.values.forEach(c=>{n.add(c)}),n=Array.from(n)),void r.markScale.domain(n)):void(r.changeDomain!=="replace"||(o?r.markScale.domain([l.min,l.max]):r.markScale.domain(l.values)));$t(t.type)?r.markScale.domain(n):t.domain(Array.from(n))})}registerMarkAttributeScale(e,t){const n=this._scaleMap.get(e.scale);let s=this._markAttributeScaleMap.get(e.scale);s||(s=[],this._markAttributeScaleMap.set(e.scale,s));let r=n;return(B(e.field)||!B(e.changeDomain)&&e.changeDomain!=="none"&&!B(t))&&(r=n.clone()),s.push(Object.assign(Object.assign({},e),{seriesId:t,markScale:r})),r}}var tX=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};let Ri=class extends kO{getSpec(){return this._spec}setSpec(e){this._spec=e}getOption(){return this._option}getLayoutRect(){return this._layoutRect}getViewRect(){return this._viewRect}getLayoutTag(){return this._layoutTag}setLayoutTag(e,t,n=!0){var s;return this._layoutTag=e,!((s=this.getCompiler())===null||s===void 0)&&s.getVGrammarView()&&(this.getCompiler().getVGrammarView().updateLayoutTag(),e&&n&&this.getCompiler().renderNextTick(t)),this._layoutTag}getGlobalScale(){return this._globalScale}getEvent(){return this._event}get chartData(){return this._chartData}constructor(e,t){var n,s,r;super(t),this.type="chart",this.id=Qf(),this._regions=[],this._series=[],this._components=[],this._layoutRect={x:0,y:0,width:xm,height:Sm},this._viewRect={width:xm,height:Sm},this._viewBox={x1:0,y1:0,x2:xm,y2:Sm},this._layoutTag=!0,this._idMap=new Map,this.state={layoutUpdateRank:1},this.padding={top:0,left:0,right:0,bottom:0},this.getAllSeries=()=>{var a;return(a=this._series)!==null&&a!==void 0?a:[]},this.getRegionsInIndex=a=>a&&a.length!==0?this._regions.filter((o,l)=>a.includes(l)):[this._regions[0]],this.getAllRegions=()=>this._regions,this.getRegionsInIds=a=>a?this._regions.filter(o=>a.includes(o.id)):[],this.getRegionsInQuerier=a=>a?this._regions.filter((o,l)=>q(a).some(c=>F(c.regionId)&&c.regionId===o.userId||c.regionIndex===l)):this._regions,this.getRegionsInUserId=a=>{if(a)return this._regions.find(o=>o.userId===a)},this.getRegionsInUserIdOrIndex=(a,o)=>this.getAllRegions().filter(l=>a!=null&&a.length?l.userId&&a.includes(l.userId):!(o!=null&&o.length)||o.includes(l.getSpecIndex())),this.getComponents=()=>this._components,this.getSeriesInIndex=a=>a&&a.length!==0?this._series.filter((o,l)=>a.includes(l)):[this._series[0]],this.getSeriesInIds=a=>a?this._series.filter(o=>a.includes(o.id)):[],this.getSeriesInUserId=a=>{if(a)return this._series.find(o=>o.userId===a)},this.getSeriesInUserIdOrIndex=(a,o)=>this.getAllSeries().filter(l=>a!=null&&a.length?l.userId&&a.includes(l.userId):!(o!=null&&o.length)||o.includes(l.getSpecIndex())),this.getComponentByIndex=(a,o)=>{const l=this._components.filter(c=>(c.specKey||c.type)===a);if(l&&l.length!==0)return l[o]},this.getComponentsByKey=a=>this._components.filter(o=>(o.specKey||o.type)===a),this.getComponentByUserId=a=>{const o=this._components.find(l=>l.userId===a);if(o)return o},this.getComponentsByType=a=>this._components.filter(o=>o.type===a),this._paddingSpec=Fu((n=e.padding)!==null&&n!==void 0?n:t.getTheme().padding),this._event=new wO(t.eventDispatcher,t.mode),this._dataSet=t.dataSet,this._chartData=new Ygt(this._dataSet),this._modelOption=Object.assign(Object.assign({},t),{mode:this._option.mode,map:this._idMap,getChartLayoutRect:()=>this._layoutRect,getChartViewRect:()=>this._viewRect,getChart:()=>this,globalScale:this._globalScale,onError:(s=this._option)===null||s===void 0?void 0:s.onError,disableTriggerEvent:((r=this._option)===null||r===void 0?void 0:r.disableTriggerEvent)===!0,getSeriesData:this._chartData.getSeriesData.bind(this._chartData)}),this._spec=e}created(){this._transformer=new this.transformerConstructor(Object.assign(Object.assign({},this._option),{type:this.type,seriesType:this.seriesType})),this._chartData.parseData(this._spec.data),this._createGlobalScale(),this._createBackground(),this._createLayout(),this._transformer.forEachRegionInSpec(this._spec,this._createRegion.bind(this)),this._transformer.forEachSeriesInSpec(this._spec,this._createSeries.bind(this)),this._transformer.forEachComponentInSpec(this._spec,this._createComponent.bind(this),this._option.getSpecInfo())}init(){var e,t;(e=this._beforeInit)===null||e===void 0||e.call(this),this._regions.forEach(n=>n.init({})),this._series.forEach(n=>n.init({})),this._components.forEach(n=>n.init({dataSet:this._dataSet})),this._initEvent(),(t=this._initStack)===null||t===void 0||t.call(this),this.reDataFlow()}reDataFlow(){this._series.forEach(e=>{var t;return(t=e.getRawData())===null||t===void 0?void 0:t.markRunning()}),this._series.forEach(e=>e.fillData()),this.updateGlobalScaleDomain()}onResize(e,t,n=!0){const s={width:e,height:t};this._canvasRect=s,this._updateLayoutRect(this._option.viewBox),this.setLayoutTag(!0,null,n)}updateViewBox(e,t){this._option.viewBox=e,this._updateLayoutRect(e),this.setLayoutTag(!0,null,t)}_createBackground(){const e=this._spec.background;if(!e||typeof e!="object"||F(e.gradient))return;const t=kc(e,["x","y","width","height","x1","y1","image"]);t.background=e.image,this._backgroundMark=X.createMark("group","chart-background",{model:this,map:this._option.map,getCompiler:this.getCompiler,globalScale:this._globalScale}),this._backgroundMark.created(),this._backgroundMark.setStyle(Object.assign(Object.assign({},t),{x:()=>this._viewBox.x1,y:()=>this._viewBox.y1,width:()=>this._viewBox.x2-this._viewBox.x1,height:()=>this._viewBox.y2-this._viewBox.y1}))}_createRegion(e,t){if(!e)return;const{spec:n}=t,s=tX(t,["spec"]),r=new e(n,Object.assign(Object.assign({},this._modelOption),s));r&&(r.created(),this._regions.push(r))}_createSeries(e,t){if(!e)return;const{spec:n}=t,s=tX(t,["spec"]);let r;if(F(n.regionId)?r=this.getRegionsInUserId(n.regionId):F(n.regionIndex)&&(r=this.getRegionsInIndex([n.regionIndex])[0]),!r&&!(r=this._regions[0]))return;const a=new e(n,Object.assign(Object.assign(Object.assign({},this._modelOption),s),{type:n.type,region:r,globalScale:this._globalScale,sourceDataList:this._chartData.dataList}));a&&(a.created(),this._series.push(a),r.addSeries(a))}getSeriesById(e){return this._series.find(t=>t.id===e)}_createComponent(e,t){const n=e.createComponent(t,Object.assign(Object.assign({},this._modelOption),{type:e.type,getAllRegions:this.getAllRegions,getRegionsInIndex:this.getRegionsInIndex,getRegionsInIds:this.getRegionsInIds,getRegionsInUserIdOrIndex:this.getRegionsInUserIdOrIndex,getAllSeries:this.getAllSeries,getSeriesInIndex:this.getSeriesInIndex,getSeriesInIds:this.getSeriesInIds,getSeriesInUserIdOrIndex:this.getSeriesInUserIdOrIndex,getAllComponents:this.getComponents,getComponentByIndex:this.getComponentByIndex,getComponentByUserId:this.getComponentByUserId,getComponentsByKey:this.getComponentsByKey,getComponentsByType:this.getComponentsByType}));n&&(n.created(),this._components.push(n))}getAllComponents(){return this._components}getAllModels(){return[].concat(this.getAllSeries(),this.getAllComponents(),this.getAllRegions())}getModelInFilter(e){if(be(e))return this.getAllModels().find(n=>n.userId===e);if(ee(e))return this.getAllModels().find(n=>e(n));let t=0;return this.getAllModels().find(n=>{var s;if(((s=n.specKey)!==null&&s!==void 0?s:n.type)===e.type){if(t===e.index)return!0;t++}return!1})}_createLayout(){this._updateLayoutRect(this._option.viewBox),this._initLayoutFunc()}setLayout(e){this._option.layout=e,this._initLayoutFunc()}_initLayoutFunc(){var e,t,n;if(this._layoutFunc=this._option.layout,!this._layoutFunc){let s=!1;(this._spec.zField||this._spec.series&&this._spec.series.some(a=>a.zField))&&(s=!0);const r=X.getLayoutInKey((t=(e=this._spec.layout)===null||e===void 0?void 0:e.type)!==null&&t!==void 0?t:s?"layout3d":"base");if(r){const a=new r(this._spec.layout,{onError:(n=this._option)===null||n===void 0?void 0:n.onError});this._layoutFunc=a.layoutItems.bind(a)}}}layout(e){var t,n,s,r;if((n=(t=this._option.performanceHook)===null||t===void 0?void 0:t.beforeLayoutWithSceneGraph)===null||n===void 0||n.call(t),this.getLayoutTag()){this._event.emit(ke.layoutStart,{chart:this,vchart:this._option.globalInstance}),this.onLayoutStart(e);const a=this.getLayoutElements();this._layoutFunc(this,a,this._layoutRect,this._viewBox),this._event.emit(ke.afterLayout,{elements:a,chart:this}),this.setLayoutTag(!1),this.onLayoutEnd(e),this._event.emit(ke.layoutEnd,{chart:this,vchart:this._option.globalInstance})}(r=(s=this._option.performanceHook)===null||s===void 0?void 0:s.afterLayoutWithSceneGraph)===null||r===void 0||r.call(s)}onLayoutStart(e){this.getAllModels().forEach(t=>t.onLayoutStart(this._layoutRect,this._viewRect,e))}onLayoutEnd(e){this.getAllModels().forEach(t=>{t.modelType!=="series"&&t.onLayoutEnd(e)})}onEvaluateEnd(e){[...this._components,...this._regions,...this._series].forEach(t=>t.onEvaluateEnd(e))}getLayoutElements(){return this.getAllModels().map(e=>e.layout).filter(e=>!!e)}getModelById(e){const t=this._idMap.get(e);if(t&&t instanceof w4)return t}getModelByUserId(e){const t=this.getSeriesInUserId(e);if(t)return t;const n=this.getRegionsInUserId(e);return n||this.getComponentByUserId(e)||void 0}getAllMarks(){return Array.from(this._idMap.values()).filter(e=>e&&e instanceof Rs)}getMarkById(e){const t=this._idMap.get(e);if(t&&t instanceof Rs)return t}updateData(e,t,n=!0,s){const r=this._dataSet.getDataView(e);r&&(r.markRunning(),r.parseNewData(t,s)),n&&this.updateGlobalScaleDomain(),this.getAllModels().forEach(a=>a.onDataUpdate())}updateFullData(e,t=!0){q(e).forEach(n=>{const s=this._dataSet.getDataView(n.id);s&&s.markRunning()}),q(e).forEach(n=>{const s=this._dataSet.getDataView(n.id);s&&S4(s,n,!0)}),t&&this.updateGlobalScaleDomain(),this.getAllModels().forEach(n=>n.onDataUpdate())}onRender(e){}setCanvasRect(e,t){this._canvasRect={width:e,height:t}}getCanvasRect(){return this._canvasRect||(this._canvasRect=tce(this._spec,this._option,{width:xm,height:Sm})),this._canvasRect}getSeriesData(e,t){return this._chartData.getSeriesData(e,t)}_transformSpecScale(){var e;const t=this._spec.scales?[...this._spec.scales]:[];let n=t.find(r=>r.id==="color");const s=this.getColorScheme();if(!n&&(n={type:"ordinal",id:"color",domain:null,range:null},t.push(n),this._spec.color)){const r=this._spec.color;if(ie(r))n.range=r;else{const a=r;Object.prototype.hasOwnProperty.call(a,"type")&&(n.type=a.type),Object.prototype.hasOwnProperty.call(a,"domain")&&(n.domain=a.domain),Object.prototype.hasOwnProperty.call(a,"range")&&(n.range=a.range),Object.prototype.hasOwnProperty.call(a,"specified")&&(n.specified=a.specified)}}return!((e=n.range)===null||e===void 0)&&e.length||(n.range=c1(s),n.rangeTheme=!0),t}_createGlobalScale(){this._globalScale=new qgt(this._transformSpecScale(),this),this._modelOption.globalScale=this._globalScale}updateGlobalScaleDomain(){const e=new Set;this._series.forEach(n=>{const s=n.getSeriesKeys();s&&s.forEach(r=>e.add(r))});const t=Array.from(e);this._globalScale.updateScaleDomain(t)}updateGlobalScale(e){$g(e,this._globalScale.updateSpec(this._transformSpecScale()))}updateGlobalScaleTheme(){const e=this._globalScale.getScaleSpec("color"),t=this.getColorScheme();e.rangeTheme&&(e.range=c1(t),this._globalScale.getScale("color").range(e.range))}_getSpecKeys(e){const t={width:!0,height:!0};return Object.keys(e).filter(n=>!t[n]).sort()}updateSpec(e){const t={change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1};if(this.setLayoutTag(!0,null,!1),e.type!==this.type)return t.reMake=!0,t;const n=this._getSpecKeys(this._spec),s=this._getSpecKeys(e);if(!Pt(n,s))return t.reMake=!0,t;for(let a=0;a<n.length;a++){const o=n[a];if(ie(this._spec[o])&&this._spec[o].length!==q(e[o]).length)return t.reMake=!0,t}const r=this._spec;return this._spec=e,this.updateChartConfig(t,r),t.reMake?t:(this.updateGlobalScale(t),t.reMake?t:(this.updateRegionSpec(t),t.reMake?t:(this.updateComponentSpec(t),t.reMake||(this.updateSeriesSpec(t),t.reMake||(this.reInit(),this.updateDataSpec(),this.updateGlobalScaleDomain())),t)))}updateChartConfig(e,t){var n,s;this._paddingSpec=Fu((n=this._spec.padding)!==null&&n!==void 0?n:(s=this._option)===null||s===void 0?void 0:s.getTheme().padding),this._updateLayoutRect(this._viewBox)}updateDataSpec(){this._spec.data&&this._chartData.updateData(this._spec.data,!1,!0)}updateRegionSpec(e){var t;!((t=this._spec)===null||t===void 0)&&t.region&&(this._spec.region.length===this._regions.length?this._regions.forEach(n=>{$g(e,n.updateSpec(this._spec.region[n.getSpecIndex()]))}):e.reMake=!0)}updateComponentSpec(e){const t={},n={[oe.title]:!0,[oe.brush]:!0,[oe.mapLabel]:!0};this._components.forEach(r=>{var a,o;if(r.type===oe.label||r.type===oe.totalLabel)return;n[r.type]&&(n[r.type]=!1);const l=r.specKey||r.type,c=(a=this._spec[l])!==null&&a!==void 0?a:{};ie(c)?(t[l]=t[l]||{specCount:c.length,componentCount:0},t[l].componentCount++,$g(e,r.updateSpec((o=c[r.getSpecIndex()])!==null&&o!==void 0?o:{},c))):$g(e,r.updateSpec(c))});for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const a=t[r];a.componentCount!==a.specCount&&(e.reMake=!0)}const s=r=>r&&r.visible!==!1;Object.keys(n).forEach(r=>{if(n[r]){const a=this._spec[r];(ie(a)?a.some(s):s(a))&&(e.reMake=!0)}})}updateSeriesSpec(e){this._spec.series.length===this._series.length?this._series.forEach(t=>{const n=this._spec.series[t.getSpecIndex()];$g(e,t.updateSpec(n))}):e.reMake=!0}getCanvas(){var e,t;return(t=(e=this.getCompiler())===null||e===void 0?void 0:e.getCanvas())!==null&&t!==void 0?t:null}_updateLayoutRect(e){let t=this.getCanvasRect();if(e){this._viewBox=e;const{x1:n=0,y1:s=0,x2:r,y2:a}=e;t={width:r-n,height:a-s}}else this._viewBox={x1:0,y1:0,x2:t.width,y2:t.height};this._viewRect=t,this.padding=Koe(this._paddingSpec,t,t),this._layoutRect.width=t.width-this.padding.left-this.padding.right,this._layoutRect.height=t.height-this.padding.top-this.padding.bottom,this._layoutRect.x=this.padding.left,this._layoutRect.y=this.padding.top,this._event.emit(ke.layoutRectUpdate,{chart:this})}setCurrentTheme(){this.updateChartConfig({change:!0,reMake:!1},this._spec),this.setLayoutTag(!0,null,!1),this.updateGlobalScaleTheme(),this.reInit()}reInit(){[...this._regions,...this._series,...this._components].forEach(e=>{const t=e.getSpecInfo();t&&t.spec&&e.reInit(t.spec)})}clear(){this.getAllModels().forEach(e=>{var t;return(t=e.clear)===null||t===void 0?void 0:t.call(e)})}compile(){this.compileBackground(),this.compileLayout(),this.compileRegions(),this.compileSeries(),this.compileComponents()}afterCompile(){this.getAllRegions().forEach(e=>{var t;(t=e.afterCompile)===null||t===void 0||t.call(e)}),this.getAllSeries().forEach(e=>{var t;(t=e.afterCompile)===null||t===void 0||t.call(e)}),this.getAllComponents().forEach(e=>{var t;(t=e.afterCompile)===null||t===void 0||t.call(e)})}compileLayout(){const{width:e,height:t}=this.getCanvasRect();this.getCompiler().setSize(e,t)}compileBackground(){var e;this._backgroundMark&&(this._backgroundMark.compile({context:{model:this}}),(e=this._backgroundMark.getProduct())===null||e===void 0||e.layout(()=>{}))}compileRegions(){var e,t,n,s;(t=(e=this._option.performanceHook)===null||e===void 0?void 0:e.beforeRegionCompile)===null||t===void 0||t.call(e),this.getAllRegions().forEach(r=>{r.compile()}),(s=(n=this._option.performanceHook)===null||n===void 0?void 0:n.afterRegionCompile)===null||s===void 0||s.call(n)}compileSeries(){var e,t,n,s;(t=(e=this._option.performanceHook)===null||e===void 0?void 0:e.beforeSeriesCompile)===null||t===void 0||t.call(e),this.getAllSeries().forEach(r=>{r.compile()}),(s=(n=this._option.performanceHook)===null||n===void 0?void 0:n.afterSeriesCompile)===null||s===void 0||s.call(n)}compileComponents(){var e,t,n,s;(t=(e=this._option.performanceHook)===null||e===void 0?void 0:e.beforeComponentCompile)===null||t===void 0||t.call(e),this.getAllComponents().forEach(r=>{r.compile()}),(s=(n=this._option.performanceHook)===null||n===void 0?void 0:n.afterComponentCompile)===null||s===void 0||s.call(n)}release(){[...this._components,...this._regions,...this._series].forEach(e=>{e.beforeRelease()}),super.release(),this.clear(),[...this._components,...this._regions,...this._series].forEach(e=>{e.release()}),this._components=this._regions=this._series=[],this._spec={},this._dataSet=this._globalScale=this._layoutFunc=null,this._layoutTag=!1,this._idMap.clear()}onLayout(e){const t=e.rootMark;this.layout({group:t,srView:e})}updateState(e,t){const n=this.getAllSeries();for(const s in e){if(Te(e[s]))continue;const r=e[s];let a={stateValue:s};a=ee(r.filter)?Object.assign({filter:r.filter},a):Object.assign(Object.assign({},r.filter),a),r.level&&(a.level=r.level),n.forEach(o=>{o.getMarks().forEach(l=>{l.stateStyle[s]&&(t&&!t(o,l,s)||(l.state.changeStateInfo(a),l.updateMarkState(s)))})})}}setSelected(e,t,n){this._setStateInDatum(Ce.STATE_SELECTED,!0,e,t,n)}setHovered(e,t,n){this._setStateInDatum(Ce.STATE_HOVER,!0,e,t,n)}clearState(e){this.getAllRegions().forEach(t=>{t.interaction.clearEventElement(e,!0),t.interaction.resetInteraction(e,null)})}clearAllStates(){this.getAllRegions().forEach(e=>{e.interaction.clearAllEventElement(),e.interaction.resetAllInteraction()})}clearSelected(){this.clearState(Ce.STATE_SELECTED)}clearHovered(){this.clearState(Ce.STATE_HOVER)}_initEvent(){[ke.dataZoomChange,ke.scrollBarChange].forEach(e=>{this._event.on(e,({value:t})=>{this._disableMarkAnimation(["exit","update"]);const n=()=>{this._enableMarkAnimation(["exit","update"]),this._event.off(Ee.AFTER_MARK_RENDER_END,n)};this._event.on(Ee.AFTER_MARK_RENDER_END,n)})})}_enableMarkAnimation(e){this.getAllMarks().forEach(t=>{const n=t.getProduct();n&&n.animate&&n.animate.enableAnimationState(e)})}_disableMarkAnimation(e){this.getAllMarks().forEach(t=>{const n=t.getProduct();n&&n.animate&&n.animate.disableAnimationState(e)})}_setStateInDatum(e,t,n,s,r){const a=(n=n?q(n):null)?Object.keys(n[0]):null;this.getRegionsInQuerier(r).forEach(o=>{n?(o.getSeries().forEach(l=>{l.getMarks().forEach(c=>{if(c.getProduct()&&(!s||ee(s)&&s(l,c))){const u=c.getProduct().isCollectionMark(),h=c.getProduct().elements;let d=[];if(u)d=h.filter(p=>{const f=p.getDatum();n.every((g,m)=>a.every(y=>g[y]==f[m][y]))});else if(n.length>1){const p=n.slice();d=h.filter(f=>{if(p.length===0)return!1;const g=f.getDatum(),m=p.findIndex(y=>a.every(b=>y[b]==g[b]));return m>=0&&(p.splice(m,1),!0)})}else{const p=h.find(f=>a.every(g=>n[0][g]==f.getDatum()[g]));p&&(d=[p])}d.forEach(p=>{o.interaction.startInteraction(e,p)})}})}),t&&o.interaction.reverseEventElement(e)):o.interaction.clearEventElement(e,!0)})}setDimensionIndex(e,t){var n,s,r,a;let o=null;Array.from(this._event.getComposedEventMap().values()).forEach(c=>{const{eventType:u,event:h}=c;if(u===Bu.dimensionHover||u===Bu.dimensionClick){const d=h.dispatch(e,t);d!=null&&d.length&&(o=d)}});const l=B(e)||!o||o.every(c=>ys(c.axis.getScale().type)&&B(c.index));if(t.tooltip!==!1){const c=this.getComponentsByType(oe.tooltip)[0];if(c!=null&&c.getVisible())if(l)(s=(n=c).hideTooltip)===null||s===void 0||s.call(n);else{const u={};o.forEach(h=>{const{axis:d,value:p,data:f}=h,g=d.getOrient()==="left"||d.getOrient()==="right";f.forEach(m=>{var y,b,x;const S=g?m.series.fieldY[0]:m.series.fieldX[0];u[S]=(x=(b=(y=m.datum)===null||y===void 0?void 0:y[0])===null||b===void 0?void 0:b[S])!==null&&x!==void 0?x:p})}),c.showTooltip(u,t.showTooltipOption)}}if(t.crosshair!==!1){const c=this.getComponentsByType(oe.cartesianCrosshair)[0];c&&c.clearAxisValue&&c.setAxisValue&&(l?((r=c.clearAxisValue)===null||r===void 0||r.call(c),(a=c.hide)===null||a===void 0||a.call(c)):o.forEach(u=>{const{axis:h,value:d}=u;c.clearAxisValue(),c.setAxisValue(d,h),c.layoutByValue()}))}}getColorScheme(){var e,t;return(t=(e=this._option).getTheme)===null||t===void 0?void 0:t.call(e).colorScheme}};const iX=(i,e)=>{var t;const n=i.spec,{regionId:s,regionIndex:r}=n;if(F(s)){const a=q(s);return(t=e.region)===null||t===void 0?void 0:t.filter(({spec:o})=>a.includes(o.id))}if(F(r))return q(r).map(a=>{var o;return(o=e.region)===null||o===void 0?void 0:o[a]}).filter(F)},Zgt=(i,e)=>{var t;const n=i.spec,{seriesId:s,seriesIndex:r}=n;if(F(s)){const a=q(s);return(t=e.series)===null||t===void 0?void 0:t.filter(({spec:o})=>a.includes(o.id))}if(F(r))return q(r).map(a=>{var o;return(o=e.series)===null||o===void 0?void 0:o[a]}).filter(F)};class Ro{constructor(e){this._option=e,this.type=e.type,this.seriesType=e.seriesType}initChartSpec(e){return this.transformSpec(e),this.transformModelSpec(e)}transformSpec(e){e.region&&e.region.length!==0||(e.region=[{}]),e.tooltip===void 0&&(e.tooltip={}),F(e.stackInverse)&&e.region.forEach(t=>{!F(t.stackInverse)&&(t.stackInverse=e.stackInverse)}),F(e.stackSort)&&e.region.forEach(t=>{!F(t.stackSort)&&(t.stackSort=e.stackSort)})}transformModelSpec(e){return this.createSpecInfo(e,(t,n,s)=>{const{spec:r,specPath:a,specInfoPath:o,type:l}=n,c=new t.transformerConstructor(Object.assign(Object.assign({},this._option),{type:l})).transformSpec(r,e,s);cw(e,a,c.spec),cw(s,o??a,Object.assign(Object.assign({},n),c))})}createSpecInfo(e,t){var n,s;t||(t=(a,o,l)=>{const{spec:c,specPath:u,specInfoPath:h,type:d}=o,p=new a.transformerConstructor(Object.assign(Object.assign({},this._option),{type:d})),f=p.transformSpec(c,e,l);cw(l,h??u,Object.assign(Object.assign(Object.assign({},o),f),{theme:p.getTheme(c,e)}))});const r={};return this.forEachRegionInSpec(e,t,r),this.forEachSeriesInSpec(e,t,r),(n=r.series)===null||n===void 0||n.forEach((a,o)=>{var l,c;const u=((c=(l=iX(a,r))!==null&&l!==void 0?l:r.region)!==null&&c!==void 0?c:[])[0];u&&(u.seriesIndexes||(u.seriesIndexes=[]),u.seriesIndexes.push(o),a.regionIndexes=u.regionIndexes.slice())}),this.forEachComponentInSpec(e,t,r),Object.values((s=r.component)!==null&&s!==void 0?s:{}).forEach(a=>a.forEach((o,l)=>{var c,u,h;if(o){if(!o.regionIndexes){const d=(u=(c=iX(o,r))!==null&&c!==void 0?c:r.region)!==null&&u!==void 0?u:[];o.regionIndexes=d.map(p=>p.regionIndexes[0])}if(!o.seriesIndexes){const d=Zgt(o,r);if(d)o.seriesIndexes=d.map(({seriesIndexes:p})=>p[0]);else{const p=new Set;((h=o.regionIndexes)!==null&&h!==void 0?h:[]).forEach(f=>{var g,m;const y=(g=r.region)===null||g===void 0?void 0:g[f];(m=y==null?void 0:y.seriesIndexes)===null||m===void 0||m.forEach(b=>p.add(b))}),o.seriesIndexes=Array.from(p)}}}})),r}_isValidSeries(e){return!0}_getDefaultSeriesSpec(e){var t,n,s,r;return{dataKey:e.dataKey,hover:e.hover,select:e.select,label:e.label,seriesStyle:e.seriesStyle,animation:(t=e.animation)!==null&&t!==void 0?t:this._option.animation,animationThreshold:(n=e.animationThreshold)!==null&&n!==void 0?n:(r=(s=this._option).getTheme)===null||r===void 0?void 0:r.call(s).animationThreshold,animationAppear:e.animationAppear,animationDisappear:e.animationDisappear,animationEnter:e.animationEnter,animationUpdate:e.animationUpdate,animationExit:e.animationExit,animationNormal:e.animationNormal,animationState:e.animationState,extensionMark:e.extensionMark,large:e.large,largeThreshold:e.largeThreshold,progressiveStep:e.progressiveStep,progressiveThreshold:e.progressiveThreshold,background:e.seriesBackground,invalidType:e.invalidType,seriesField:e.seriesField,morph:e.morph,interactions:e.interactions}}forEachRegionInSpec(e,t,n){var s;return((s=e.region)!==null&&s!==void 0?s:[]).map((r,a)=>t(X.getRegionInType("region"),{spec:r,specPath:["region",a],type:"region",regionIndexes:[a]},n))}forEachSeriesInSpec(e,t,n){var s;return((s=e.series)!==null&&s!==void 0?s:[]).map((r,a)=>t(X.getSeriesInType(r.type),{spec:r,specPath:["series",a],type:r.type,seriesIndexes:[a]},n))}forEachComponentInSpec(e,t,n){var s,r,a;const o=[],l=X.getComponents();let c,u,h,d;const p=[];for(let g=0;g<l.length;g++){const{cmp:m,alwaysCheck:y}=l[g];m.type.startsWith(oe.cartesianAxis)?c=m:m.type.startsWith(oe.polarAxis)?u=m:m.type===oe.geoCoordinate?h=m:(y||e[(s=m.specKey)!==null&&s!==void 0?s:m.type])&&(m.type===oe.tooltip?d=m:p.push(m))}let f=!1;if(c){const g=c.getSpecInfo(e,n);(g==null?void 0:g.length)>0&&(f=!0,g.forEach(m=>{const y=X.getComponentInKey(m.type);o.push(t(y,m,n))}))}if(u&&!f){const g=u.getSpecInfo(e,n);(g==null?void 0:g.length)>0&&(f=!0,g.forEach(m=>{const y=X.getComponentInKey(m.type);o.push(t(y,m,n))}))}return h&&!f&&((r=h.getSpecInfo(e,n))===null||r===void 0||r.forEach(g=>{o.push(t(h,g,n))})),p.forEach(g=>{var m;(m=g.getSpecInfo?g.getSpecInfo(e,n):Pl(e,g.specKey,g.type))===null||m===void 0||m.forEach(y=>{o.push(t(g,y,n))})}),d&&((a=Pl(e,d.specKey,d.type))===null||a===void 0||a.forEach(g=>{o.push(t(d,g,n))})),o}transformSeriesSpec(e){const t=this._getDefaultSeriesSpec(e);e.series&&e.series.length!==0?e.series.forEach(n=>{this._isValidSeries(n.type)&&Object.keys(t).forEach(s=>{s in n||(n[s]=t[s])})}):e.series=[t]}_findBandAxisBySeries(e,t,n){const s=(e==null?void 0:e.direction)==="horizontal"?["left","right"]:["top","bottom"];return n.find(r=>{if(!s.includes(r.orient))return!1;if(F(r.seriesId)){if(q(r.seriesId).includes(e==null?void 0:e.id))return!0}else if(F(r.seriesIndex)){if(q(r.seriesIndex).includes(t))return!0}else if(r.type==="band")return!0;return!0})}_applyAxisBandSize(e,t,n){const{barMaxWidth:s,barMinWidth:r,barWidth:a,barGapInGroup:o}=n;let l=!1;ye(r)?(e.minBandSize=r,l=!0):ye(a)?(e.minBandSize=a,l=!0):ye(s)&&(e.minBandSize=s,l=!0),l&&(e.bandSizeLevel=Number.MAX_VALUE,e.bandSizeExtend={extend:t,gap:ie(o)?o[o.length-1]:o})}}class Dl extends Ro{needAxes(){return!0}_isValidSeries(e){return!this.seriesType||e===this.seriesType}_getDefaultSeriesSpec(e){const t=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{xField:e.xField,yField:e.yField,zField:e.zField,seriesField:e.seriesField,seriesStyle:e.seriesStyle,direction:e.direction,stack:e.stack,percent:e.percent,stackOffsetSilhouette:e.stackOffsetSilhouette,totalLabel:e.totalLabel,sortDataByAxis:e.sortDataByAxis}),n=this.seriesType;return n&&(t.type=n,t[n]=e[n]),t}transformSpec(e){super.transformSpec(e);const t=this._getDefaultSeriesSpec(e);e.series&&e.series.length!==0?e.series.forEach(n=>{this._isValidSeries(n.type)&&Object.keys(t).forEach(s=>{s in n||(n[s]=t[s])})}):e.series=[t],this._transformAxisSpec(e)}_setDefaultXAxisSpec(e){return{orient:"bottom"}}_setDefaultYAxisSpec(e){return{orient:"left"}}_setDefaultZAxisSpec(e){return{orient:"z"}}_transformAxisSpec(e){if(this.needAxes()){e.axes||(e.axes=[]);const t={x:!1,y:!1,z:!1};e.axes.forEach(n=>{const{orient:s}=n;let r=null;s!=="top"&&s!=="bottom"||(t.x=!0,r=this._setDefaultXAxisSpec(e)),s!=="left"&&s!=="right"||(t.y=!0,r=this._setDefaultYAxisSpec(e)),s==="z"&&(t.z=!0,r=this._setDefaultZAxisSpec(e)),r&&Object.keys(r).forEach(a=>{B(n[a])&&(n[a]=r[a])}),et(n,"trimPadding")&&Pe(n,ice(this.type,e))}),t.x||e.axes.push(this._setDefaultXAxisSpec(e)),t.y||e.axes.push(this._setDefaultYAxisSpec(e)),e.zField&&!t.z&&e.axes.push(this._setDefaultZAxisSpec(e))}}}class Ece extends Dl{_getDefaultSeriesSpec(e){var t;return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{point:e.point,line:e.line,seriesMark:(t=e.seriesMark)!==null&&t!==void 0?t:"line",activePoint:e.activePoint,sampling:e.sampling,samplingFactor:e.samplingFactor,pointDis:e.pointDis,pointDisMul:e.pointDisMul,markOverlap:e.markOverlap,lineLabel:e.lineLabel})}transformSpec(e){super.transformSpec(e),Xd(e)}}const Jgt=(i,e)=>{const t={nodes:{}},{fields:n}=e;if(!(n!=null&&n.length))return t;const s=n.length-1;let r,a,o=t;return i.forEach(l=>{l.latestData&&l.latestData.forEach(c=>{o=t;for(let u=0;u<n.length;u++){const h=n[u],d=c[h];if(B(d))break;o.groupField=h,o.nodes[d]||(u===s?o.nodes[d]={values:[]}:(r={nodes:{}},o.nodes[d]=r)),u===s?(a=o.nodes[d],a.values.push(c)):o=o.nodes[d]}})}),t};class Qgt{constructor(e,t){this.stackRegion=({model:n})=>{var s;const r=n.getSeries();if(!r.some(u=>u.getStack()))return;const a=r.some(u=>{var h,d;return(d=(h=u.getSpec())===null||h===void 0?void 0:h.totalLabel)===null||d===void 0?void 0:d.visible}),o=a||r.some(u=>u.getPercent()),l=r.some(u=>u.getStackOffsetSilhouette()),c=ile(n,!0);for(const u in c)for(const h in c[u].nodes)rle(c[u].nodes[h],n.getStackInverse(),o,a);if(l)for(const u in c)for(const h in c[u].nodes)Vct(c[u].nodes[h]);a&&n.getSeries().forEach(u=>{const h=u.getStackData(),d=u.getStackValue(),p=u.getStackValueField();h&&p&&sle(c[d],p)}),!((s=this._options)===null||s===void 0)&&s.afterStackRegion&&this._options.afterStackRegion(n,c)},this._chart=e,this._options=t}init(){this._chart.getAllRegions().forEach(e=>{e.event.on(ke.regionSeriesDataFilterOver,{filter:({model:t})=>(t==null?void 0:t.id)===e.id},this.stackRegion)})}stackAll(){this._chart.getAllRegions().forEach(e=>{this.stackRegion({model:e})})}}class zc{_beforeInit(){this._dataSet&&Fe(this._dataSet,"stackSplit",Jgt)}_initStack(){this._stack=new Qgt(this),this._stack.init()}}class Am extends Ri{constructor(){super(...arguments),this.transformerConstructor=Ece,this.type="line",this.seriesType=re.line}}Am.type="line",Am.seriesType=re.line,Am.transformerConstructor=Ece,Yt(Am,zc);const emt=()=>{Xgt(),X.registerChart(Am.type,Am)};class b1 extends Cce{constructor(){super(...arguments),this.type=b1.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:0})}_getIgnoreAttributes(){return[]}}b1.type="area";const FO=()=>{X.registerMark(b1.type,b1),Fht(),_ce()};class tmt extends ar{constructor(){super(...arguments),this._getSeriesStyle=(e,t,n)=>{var s,r,a,o;for(const l of q(t)){let c=(s=this.series.getSeriesStyle(e))===null||s===void 0?void 0:s(l);if(c!==!1||l!=="fill"&&l!=="stroke"||(c=l==="fill"?(a=(r=this.series.getSeriesStyle(e))===null||r===void 0?void 0:r("stroke"))===null||a===void 0?void 0:a[0]:(o=this.series.getSeriesStyle(e))===null||o===void 0?void 0:o("fill")),F(c))return c}return n}}}const Pce=Object.assign(Object.assign(Object.assign({},Wi),xh),{area:{name:"area",type:"area"}}),imt=()=>{ggt(),gce(),IO()};class Oce extends Gx{constructor(){super(...arguments),this._supportStack=!0}_transformLabelSpec(e){var t,n,s;super._transformLabelSpec(e),this._addMarkLabelSpec(e,"area","areaLabel","initLineLabelMarkStyle",void 0,!0),((t=e.point)===null||t===void 0?void 0:t.visible)!==!1&&((s=(n=e.point)===null||n===void 0?void 0:n.style)===null||s===void 0?void 0:s.visible)!==!1||this._addMarkLabelSpec(e,"area")}_transformSpecAfterMergingTheme(e,t,n){var s,r,a,o,l;super._transformSpecAfterMergingTheme(e,t,n);const{area:c={},line:u={},seriesMark:h}=e,d=c.visible!==!1&&((s=c.style)===null||s===void 0?void 0:s.visible)!==!1,p=u.visible!==!1&&((r=u.style)===null||r===void 0?void 0:r.visible)!==!1;c.support3d=!(!c.support3d&&!u.support3d),c.zIndex=F(c.zIndex)||F(u.zIndex)?Math.max((a=c.zIndex)!==null&&a!==void 0?a:0,(o=u.zIndex)!==null&&o!==void 0?o:0):void 0,c.style&&delete c.style.stroke,c.state&&Object.keys(c.state).forEach(m=>{"style"in c.state[m]?delete c.state[m].style.stroke:delete c.state[m].stroke});let f=c,g=u;(h==="line"||p&&!d)&&(f=u,g=c),c.style=Pe({},g.style,f.style),c.state=Pe({},g.state,f.state),d||(c.style.fill=!1),p||(c.style.stroke=!1),c.interactive===!1&&(c.style.fillPickable=!1),u.interactive===!1&&(u.style.strokePickable=!1),c.interactive=!(!c.interactive&&(l=u.interactive)!==null&&l!==void 0&&!l),c.visible=!(!d&&!p),e.area=c,e.line=u}}class pu extends Io{constructor(){super(...arguments),this.type=re.area,this.transformerConstructor=Oce,this._sortDataByAxis=!1}initMark(){var e,t;const n={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold},s=this._spec.area||{},r=s.visible!==!1&&((e=s.style)===null||e===void 0?void 0:e.visible)!==!1,a=(t=this._spec.seriesMark)!==null&&t!==void 0?t:"area";this._areaMark=this._createMark(pu.mark.area,{groupKey:this._seriesField,isSeriesMark:r&&a!=="point",stateSort:s.stateSort},Object.assign(Object.assign({},n),{morphElementKey:this.getDimensionField()[0],setCustomizedShape:s.customShape})),this.initSymbolMark(n,a==="point")}initMarkStyle(){this.initAreaMarkStyle(),this.initSymbolMarkStyle()}initAreaMarkStyle(){var e,t,n,s,r;const a=(n=(t=(e=this.getSpec().area)===null||e===void 0?void 0:e.style)===null||t===void 0?void 0:t.curveType)!==null&&n!==void 0?n:(r=(s=this.getSpec().line)===null||s===void 0?void 0:s.style)===null||r===void 0?void 0:r.curveType,o=a===xce?this._direction==="horizontal"?"monotoneY":"monotoneX":a,l=this._areaMark;l&&(this._direction==="horizontal"?this.setMarkStyle(this._areaMark,{x:this.dataToPositionX.bind(this),x1:c=>{var u,h;return Kt(this.dataToPositionX1(c),(h=(u=this._xAxisHelper)===null||u===void 0?void 0:u.getScale)===null||h===void 0?void 0:h.call(u,0))},y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null,orient:this._direction},"normal",pe.Series):this.setMarkStyle(this._areaMark,{x:this.dataToPositionX.bind(this),y1:c=>{var u,h;return Kt(this.dataToPositionY1(c),(h=(u=this._yAxisHelper)===null||u===void 0?void 0:u.getScale)===null||h===void 0?void 0:h.call(u,0))},y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",pe.Series),this.setMarkStyle(l,{fill:this.getColorAttribute(),stroke:this.getColorAttribute()},"normal",pe.Series),this._invalidType!=="zero"&&this.setMarkStyle(l,{defined:this._getInvalidDefined.bind(this),connectedType:this._getInvalidConnectType()},"normal",pe.Series),this.setMarkStyle(l,{curveType:o},"normal",pe.Built_In),Object.keys(l.stateStyle).forEach(c=>{l.stateStyle[c].stroke&&l.setPostProcess("stroke",u=>[u,!1,!1,!1],c)}))}initAnimation(){var e,t,n,s;const r={direction:this.direction},a=(e=this._spec.animationAppear)===null||e===void 0?void 0:e.preset;if(this._lineMark&&this._lineMark.setAnimationConfig(ft((t=X.getAnimationInKey("line"))===null||t===void 0?void 0:t(r,a),kt("line",this._spec,this._markAttributeContext))),this._areaMark&&this._areaMark.setAnimationConfig(ft((n=X.getAnimationInKey("area"))===null||n===void 0?void 0:n(r,a),kt("area",this._spec,this._markAttributeContext))),this._symbolMark){const o=Yd(this);this._symbolMark.setAnimationConfig(ft((s=X.getAnimationInKey("scaleInOut"))===null||s===void 0?void 0:s(),kt("point",this._spec,this._markAttributeContext),o))}}initTooltip(){this._tooltipHelper=new tmt(this);const{group:e,mark:t}=this._tooltipHelper.activeTriggerSet;this._areaMark&&e.add(this._areaMark),this._lineMark&&e.add(this._lineMark),this._symbolMark&&(t.add(this._symbolMark),e.add(this._symbolMark))}viewDataStatisticsUpdate(e){super.viewDataStatisticsUpdate(e),this.encodeDefined(this._areaMark,"defined")}compile(){super.compile(),this.addSamplingCompile(),this.addOverlapCompile()}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._areaMark,this._symbolMark,this._lineMark]}onLayoutEnd(e){super.onLayoutEnd(e),this.reCompileSampling()}getSeriesStyle(e){return t=>{var n,s,r,a,o;const l=(n=this._spec.seriesMark)!==null&&n!==void 0?n:"area";let c=(r=(s=this._seriesMark)===null||s===void 0?void 0:s.getAttribute(t,e))!==null&&r!==void 0?r:void 0;return t!=="fill"||c&&l!=="line"||(t="stroke",c=(o=(a=this._seriesMark)===null||a===void 0?void 0:a.getAttribute(t,e))!==null&&o!==void 0?o:void 0),t==="stroke"&&ie(c)?c[0]:c}}}pu.type=re.area,pu.mark=Pce,pu.transformerConstructor=Oce,Yt(pu,P4);const nmt=()=>{v4(),b4(),RO(),FO(),qu(),imt(),ea(),Qr(),X.registerSeries(pu.type,pu)};class Mce extends Dl{_getDefaultSeriesSpec(e){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{point:e.point,line:e.line,area:e.area,seriesMark:e.seriesMark,activePoint:e.activePoint,sampling:e.sampling,samplingFactor:e.samplingFactor,pointDis:e.pointDis,pointDisMul:e.pointDisMul,markOverlap:e.markOverlap,areaLabel:e.areaLabel})}transformSpec(e){super.transformSpec(e),Xd(e)}}class km extends Ri{constructor(){super(...arguments),this.transformerConstructor=Mce,this.type="area",this.seriesType=re.area}}km.type="area",km.seriesType=re.area,km.transformerConstructor=Mce,Yt(km,zc);const smt=()=>{nmt(),X.registerChart(km.type,km)};function Ice(i,e=!0){return(t,n,s)=>{const r=i.direction==="vertical"?i.yField:i.xField,a=t==null?void 0:t[r];return i.direction==="vertical"?{overall:e&&i.growFrom(),orient:a>0?"negative":"positive"}:{overall:!!e&&i.growFrom(),orient:a>0?"positive":"negative"}}}const Xx=(i,e=!0)=>({type:i.direction==="horizontal"?"growWidthIn":"growHeightIn",options:Ice(i,e)}),Fy=(i,e=!0)=>({type:i.direction==="horizontal"?"growWidthOut":"growHeightOut",options:Ice(i,e)}),rmt={type:"fadeIn"},amt={type:"growCenterIn"};function Rce(i,e){if(e===!1)return{};switch(e){case"fadeIn":return rmt;case"scaleIn":return amt;default:return Xx(i)}}const omt=()=>{X.registerAnimation("bar",(i,e)=>({appear:Rce(i,e),enter:Xx(i,!1),exit:Fy(i,!1),disappear:Fy(i)}))},lmt=()=>{X.registerAnimation("bar3d",(i,e)=>({appear:Rce(i,e),enter:Xx(i,!1),exit:Fy(i,!1),disappear:Fy(i)}))};class x1 extends Rs{constructor(){super(...arguments),this.type=x1.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{width:void 0,height:void 0,lineWidth:0})}}x1.type="rect";const Zu=()=>{X.registerMark(x1.type,x1),g4(),mce()},I4=Object.assign(Object.assign({},Wi),{bar:{name:"bar",type:"rect"},barBackground:{name:"barBackground",type:"rect"}}),Lce=Object.assign(Object.assign({},Wi),{bar3d:{name:"bar3d",type:"rect3d"}});function Dce(i,e,t){var n,s;if(i.values.length>0){let r;if(i.sortDatums.length){let a=i.sortDatums;e&&(a=i.sortDatums.slice().reverse());for(let o=0;o<a.length;o++)r=nX(a[o].datum,r,a[o].series,t,(s=(n=a[o].series[t.axisHelper]).getScale)===null||s===void 0?void 0:s.call(n,0),o===0)}else{let a=i.series;e&&(a=a.slice().reverse()),a.forEach(({s:o,values:l},c)=>{var u,h;const d=(h=(u=o[t.axisHelper]).getScale)===null||h===void 0?void 0:h.call(u,0);for(let p=0;p<l.length;p++){const f=l[e?l.length-1-p:p];r=nX(f,r,o,t,d,p===0&&c===0)}})}}for(const r in i.nodes)Dce(i.nodes[r],e,t)}function nX(i,e,t,n,s,r){const a=t.getSpec().barMinHeight,o=t[n.axisHelper].isInverse(),l=Kt(t[n.startMethod](i),s);let c=Kt(t[n.endMethod](i),s);r&&(e=l);let u=Math.abs(l-c);u<a&&(u=a);let h=1;return c<l?h=-1:c===l&&(h=n.isVertical?o?1:-1:o?-1:1),c=e+h*u,i[n.start]=e,i[n.end]=c,c}class BO extends or{constructor(){super(...arguments),this._supportStack=!0}_transformLabelSpec(e){this._addMarkLabelSpec(e,"bar")}}class bl extends Io{constructor(){super(...arguments),this.type=re.bar,this._barMarkName="bar",this._barMarkType="rect",this.transformerConstructor=BO,this._bandPosition=0,this._getBarXStart=(e,t)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!1),e[DK]):this._spec.barMinHeight?this._calculateRectPosition(e,!1):Kt(this._dataToPosX(e),t),this._getBarXEnd=(e,t)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!1),e[FK]):Kt(this._dataToPosX1(e),t),this._getBarYStart=(e,t)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!0),e[BK]):this._spec.barMinHeight?this._calculateRectPosition(e,!0):Kt(this._dataToPosY(e),t),this._getBarYEnd=(e,t)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!0),e[jK]):Kt(this._dataToPosY1(e),t),this._getBarBackgroundXStart=e=>{const t=e.range();return Math.min(t[0],t[t.length-1])},this._getBarBackgroundXEnd=e=>{const t=e.range();return Math.max(t[0],t[t.length-1])},this._getBarBackgroundYStart=e=>{const t=e.range();return Math.min(t[0],t[t.length-1])},this._getBarBackgroundYEnd=e=>{const t=e.range();return Math.max(t[0],t[t.length-1])},this._getBarBackgroundPositionXEncoder=()=>{var e;return(e=this._barBackgroundPositionXEncoder)===null||e===void 0?void 0:e.bind(this)},this._setBarBackgroundPositionXEncoder=e=>{this._barBackgroundPositionXEncoder=e.bind(this)},this._getBarBackgroundPositionYEncoder=()=>{var e;return(e=this._barBackgroundPositionYEncoder)===null||e===void 0?void 0:e.bind(this)},this._setBarBackgroundPositionYEncoder=e=>{this._barBackgroundPositionYEncoder=e.bind(this)}}initMark(){var e,t;this._initBarBackgroundMark(),this._barMark=this._createMark(Object.assign(Object.assign({},bl.mark.bar),{name:this._barMarkName,type:this._barMarkType}),{groupKey:this._seriesField,isSeriesMark:!0,stateSort:(e=this._spec.bar)===null||e===void 0?void 0:e.stateSort},{progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold,morphElementKey:this.getDimensionField()[0],morph:Yu(this._spec,this._barMarkName),setCustomizedShape:(t=this._spec.bar)===null||t===void 0?void 0:t.customShape})}_initBarBackgroundMark(){this._spec.barBackground&&this._spec.barBackground.visible&&(this._barBackgroundMark=this._createMark(bl.mark.barBackground,{dataView:this._barBackgroundViewData.getDataView(),dataProductId:this._barBackgroundViewData.getProductId(),stateSort:this._spec.barBackground.stateSort},{setCustomizedShape:this._spec.barBackground.customShape,progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold}))}initMarkStyle(){this._barMark&&this.setMarkStyle(this._barMark,{fill:this.getColorAttribute()},"normal",pe.Series)}initLabelMarkStyle(e){e&&this.setMarkStyle(e,{fill:this.getColorAttribute(),text:t=>t[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null})}initTooltip(){super.initTooltip();const{mark:e,group:t}=this._tooltipHelper.activeTriggerSet;this._barMark&&(e.add(this._barMark),t.add(this._barMark))}_statisticViewData(){var e,t;super._statisticViewData();const n=(e=this._spec.barBackground)!==null&&e!==void 0?e:{};if(!n.visible)return;const s=this._getRelatedComponentSpecInfo("axes").some(a=>a.type===oe.cartesianBandAxis);let r;if(Fe(this._option.dataSet,"addVChartProperty",I0),s){const a=([o],{scaleDepth:l})=>{var c,u;let h=[{}];const d=this.getDimensionField(),p=B(l)?d.length:Math.min(d.length,l);for(let f=0;f<p;f++){const g=d[f],m=(c=o.latestData[g])===null||c===void 0?void 0:c.values;if(!(m!=null&&m.length))continue;const y=[],b=(u=this._spec.dataKey)!==null&&u!==void 0?u:kl;for(let x=0;x<m.length;x++)for(let S=0;S<h.length;S++)y.push(Object.assign(Object.assign({},h[S]),{[g]:m[x],[b]:m[x]}));h=y}return h};Fe(this._option.dataSet,"dimensionItems",a),r=new Rt(this._option.dataSet).parse([this._viewDataStatistics],{type:"dataview"}).transform({type:"dimensionItems",options:{scaleDepth:B(n.fieldLevel)?void 0:n.fieldLevel+1}},!1).transform({type:"addVChartProperty",options:{beforeCall:Ly.bind(this),call:Of}},!1),(t=this._viewDataStatistics)===null||t===void 0||t.target.addListener("change",r.reRunAllTransform)}else{const a=([l])=>{const c=[],[u,h]=this.getDimensionContinuousField(),d={};return o.latestData.forEach(p=>{const f=`${p[u]}-${p[h]}`;d[f]||(d[f]={[u]:p[u],[h]:p[h]},c.push(d[f]))}),c};Fe(this._option.dataSet,"dimensionItems",a);const o=this.getViewData();r=new Rt(this._option.dataSet).parse([o],{type:"dataview"}).transform({type:"dimensionItems"},!1).transform({type:"addVChartProperty",options:{beforeCall:Ly.bind(this),call:Of}},!1),o==null||o.target.addListener("change",r.reRunAllTransform)}this._barBackgroundViewData=new Oc(this._option,r)}init(e){var t,n;super.init(e),this.direction==="vertical"?((t=this._xAxisHelper)===null||t===void 0?void 0:t.getScale(0).type)==="band"?this.initBandRectMarkStyle():this.initLinearRectMarkStyle():((n=this._yAxisHelper)===null||n===void 0?void 0:n.getScale(0).type)==="band"?this.initBandRectMarkStyle():this.initLinearRectMarkStyle()}_shouldDoPreCalculate(){const e=this.getRegion();return this.getStack()&&e.getSeries().filter(t=>t.type===this.type&&t.getSpec().barMinHeight).length}_calculateStackRectPosition(e){const t=this.getRegion();if(t._bar_series_position_calculated)return;let n,s,r,a,o;t._bar_series_position_calculated=!0,e?(n=jK,s=BK,r="_dataToPosY1",a="_dataToPosY",o="_yAxisHelper"):(n=FK,s=DK,r="_dataToPosX1",a="_dataToPosX",o="_xAxisHelper");const l=ile(t,!1,c=>c.type===this.type);for(const c in l)for(const u in l[c].nodes)Dce(l[c].nodes[u],t.getStackInverse(),{isVertical:e,start:n,end:s,startMethod:r,endMethod:a,axisHelper:o})}_calculateRectPosition(e,t){var n,s;let r,a,o;t?(r="_dataToPosY1",a="_dataToPosY",o="_yAxisHelper"):(r="_dataToPosX1",a="_dataToPosX",o="_xAxisHelper");const l=(s=(n=this[o]).getScale)===null||s===void 0?void 0:s.call(n,0),c=this[o].isInverse(),u=this._spec.barMinHeight,h=Kt(this[r](e),l),d=Kt(this[a](e),l);let p=Math.abs(h-d);p<u&&(p=u);let f=1;return d<h?f=-1:d===h&&(f=t?c?1:-1:c?-1:1),h+f*p}_dataToPosX(e){return this.dataToPositionX(e)}_dataToPosX1(e){return this.dataToPositionX1(e)}_dataToPosY(e){return this.dataToPositionY(e)}_dataToPosY1(e){return this.dataToPositionY1(e)}initBandRectMarkStyle(){var e,t,n,s;const r=(t=(e=this._xAxisHelper)===null||e===void 0?void 0:e.getScale)===null||t===void 0?void 0:t.call(e,0),a=(s=(n=this._yAxisHelper)===null||n===void 0?void 0:n.getScale)===null||s===void 0?void 0:s.call(n,0);this.direction==="horizontal"?this.setMarkStyle(this._barMark,{x:o=>this._getBarXStart(o,r),x1:o=>this._getBarXEnd(o,r),y:o=>this._getPosition(this.direction,o),height:()=>this._getBarWidth(this._yAxisHelper),width:()=>{},y1:()=>{}},"normal",pe.Series):this.setMarkStyle(this._barMark,{y:o=>this._getBarYStart(o,a),y1:o=>this._getBarYEnd(o,a),x:o=>this._getPosition(this.direction,o),width:()=>this._getBarWidth(this._xAxisHelper),x1:()=>{},height:()=>{}},"normal",pe.Series),this._initStackBarMarkStyle(),this._initBandBarBackgroundMarkStyle()}_initStackBarMarkStyle(){var e,t,n,s;if(!this._spec.stackCornerRadius)return;const r=(t=(e=this._xAxisHelper)===null||e===void 0?void 0:e.getScale)===null||t===void 0?void 0:t.call(e,0),a=(s=(n=this._yAxisHelper)===null||n===void 0?void 0:n.getScale)===null||s===void 0?void 0:s.call(n,0);this._barMark.setMarkConfig({clip:!0,clipPath:()=>{const o=[];return this._forEachStackGroup(l=>{let c=1/0,u=-1/0,h=!1,d=1/0,p=-1/0;l.values.forEach(m=>{const y=m[To],b=m[Zr],x=m[xf],S=m[Id];c=Math.min(c,y,b),u=Math.max(u,y,b),F(x)&&F(S)&&(h=!0,d=Math.min(d,x,S),p=Math.max(p,x,S))});const f=Object.assign(Object.assign(Object.assign({},l.values[0]),{[To]:c,[Zr]:u}),h?{[xf]:d,[Id]:p}:void 0),g=this.direction==="horizontal"?{x:this._getBarXStart(f,r),x1:this._getBarXEnd(f,r),y:this._getPosition(this.direction,f),height:this._getBarWidth(this._yAxisHelper)}:{y:this._getBarYStart(f,a),y1:this._getBarYEnd(f,a),x:this._getPosition(this.direction,f),width:this._getBarWidth(this._xAxisHelper)};o.push(Rx(Object.assign(Object.assign({},g),{cornerRadius:ee(this._spec.stackCornerRadius)?this._spec.stackCornerRadius(g,f,this._markAttributeContext):this._spec.stackCornerRadius,fill:!0})))}),o}})}initLinearRectMarkStyle(){var e,t,n,s;const r=(t=(e=this._xAxisHelper)===null||e===void 0?void 0:e.getScale)===null||t===void 0?void 0:t.call(e,0),a=(s=(n=this._yAxisHelper)===null||n===void 0?void 0:n.getScale)===null||s===void 0?void 0:s.call(n,0);if(this.direction==="horizontal"){const o=F(this._fieldY2)?{y:l=>Kt(this._dataToPosY(l),a),y1:l=>Kt(this._dataToPosY1(l),a)}:{y:l=>Kt(this._dataToPosY(l)-this._getBarWidth(this._yAxisHelper)/2,a),height:l=>this._getBarWidth(this._yAxisHelper)};this.setMarkStyle(this._barMark,Object.assign({x:l=>this._getBarXStart(l,r),x1:l=>this._getBarXEnd(l,r)},o),"normal",pe.Series),this.setMarkStyle(this._barBackgroundMark,Object.assign({x:()=>this._getBarBackgroundXStart(r),x1:()=>this._getBarBackgroundXEnd(r)},o),"normal",pe.Series)}else{const o=F(this._fieldX2)?{x:l=>Kt(this._dataToPosX(l),r),x1:l=>Kt(this._dataToPosX1(l),r)}:{x:l=>Kt(this._dataToPosX(l)-this._getBarWidth(this._xAxisHelper)/2,r),width:l=>this._getBarWidth(this._xAxisHelper)};this.setMarkStyle(this._barMark,Object.assign(Object.assign({},o),{y:l=>this._getBarYStart(l,a),y1:l=>this._getBarYEnd(l,a)}),"normal",pe.Series),this.setMarkStyle(this._barBackgroundMark,Object.assign(Object.assign({},o),{y:()=>this._getBarBackgroundYStart(a),y1:()=>this._getBarBackgroundYEnd(a)}),"normal",pe.Series)}}_initBandBarBackgroundMarkStyle(){var e,t,n,s,r;if(!this._barBackgroundMark)return;const a=(t=(e=this._xAxisHelper)===null||e===void 0?void 0:e.getScale)===null||t===void 0?void 0:t.call(e,0),o=(s=(n=this._yAxisHelper)===null||n===void 0?void 0:n.getScale)===null||s===void 0?void 0:s.call(n,0),l=(r=this._spec.barBackground)!==null&&r!==void 0?r:{},c=B(l.fieldLevel)?void 0:l.fieldLevel+1;this.direction==="horizontal"?this.setMarkStyle(this._barBackgroundMark,{x:()=>this._getBarBackgroundXStart(a),x1:()=>this._getBarBackgroundXEnd(a),y:u=>this._getPosition(this.direction,u,c,"barBackground"),height:()=>this._getBarWidth(this._yAxisHelper,c),width:()=>{},y1:()=>{}},"normal",pe.Series):this.setMarkStyle(this._barBackgroundMark,{x:u=>this._getPosition(this.direction,u,c,"barBackground"),y:()=>this._getBarBackgroundYStart(o),y1:()=>this._getBarBackgroundYEnd(o),width:()=>this._getBarWidth(this._xAxisHelper,c),x1:()=>{},height:()=>{}},"normal",pe.Series)}initAnimation(){var e,t;const n={yField:this._fieldY[0],xField:this._fieldX[0],direction:this.direction,growFrom:()=>{var a,o;return this.direction==="horizontal"?(a=this._xAxisHelper)===null||a===void 0?void 0:a.getScale(0).scale(0):(o=this._yAxisHelper)===null||o===void 0?void 0:o.getScale(0).scale(0)}},s=(e=this._spec.animationAppear)===null||e===void 0?void 0:e.preset,r=Yd(this);this._barMark.setAnimationConfig(ft((t=X.getAnimationInKey("bar"))===null||t===void 0?void 0:t(n,s),kt(this._barMarkName,this._spec,this._markAttributeContext),r))}_getBarWidth(e,t){var n,s;const r=this._groups?this._groups.fields.length:1,a=B(t)?r:Math.min(r,t),o=(s=(n=e.getBandwidth)===null||n===void 0?void 0:n.call(e,a-1))!==null&&s!==void 0?s:6,l=F(this._spec.barWidth)&&a===r,c=F(this._spec.barMinWidth),u=F(this._spec.barMaxWidth);let h=o;return l&&(h=bm(this._spec.barWidth,o)),c&&(h=Math.max(h,bm(this._spec.barMinWidth,o))),u&&(h=Math.min(h,bm(this._spec.barMaxWidth,o))),h}_getPosition(e,t,n,s){var r,a,o,l,c;let u,h,d;e==="horizontal"?(u=this.getYAxisHelper(),h="height",d=s==="barBackground"?this.dataToBarBackgroundPositionY.bind(this):this.dataToPositionY.bind(this)):(u=this.getXAxisHelper(),h="width",d=s==="barBackground"?this.dataToBarBackgroundPositionX.bind(this):this.dataToPositionX.bind(this));const p=u.getScale(0),f=this._groups?this._groups.fields.length:1,g=B(n)?f:Math.min(f,n),m=(a=(r=u.getBandwidth)===null||r===void 0?void 0:r.call(u,g-1))!==null&&a!==void 0?a:6,y=g===f?this._barMark.getAttribute(h,t):m;if(g>1&&F(this._spec.barGapInGroup)){const x=this._groups.fields,S=q(this._spec.barGapInGroup);let C=0,w=0;for(let A=x.length-1;A>=1;A--){const T=x[A],E=(l=(o=u.getScale(A))===null||o===void 0?void 0:o.domain())!==null&&l!==void 0?l:[],P=E.length,O=bm((c=S[A-1])!==null&&c!==void 0?c:It(S),m),M=E.indexOf(t[T]);A===x.length-1?(C+=P*y+(P-1)*O,w+=M*(y+O)):(w+=M*(C+O),C+=C+(P-1)*O)}return p.scale(t[x[0]])+u.getBandwidth(0)/2-C/2+w}const b=$t(p.type||"band");return d(t,g)+.5*(m-y)+(b?-m/2:0)}dataToBarBackgroundPositionX(e,t){return this._dataToPosition(e,this._xAxisHelper,this.fieldX,t,this._getBarBackgroundPositionXEncoder,this._setBarBackgroundPositionXEncoder)}dataToBarBackgroundPositionY(e,t){return this._dataToPosition(e,this._yAxisHelper,this.fieldY,t,this._getBarBackgroundPositionYEncoder,this._setBarBackgroundPositionYEncoder)}onLayoutEnd(e){super.onLayoutEnd(e),this.getRegion()._bar_series_position_calculated=!1,this._spec.sampling&&this.compile()}compile(){if(super.compile(),this._spec.sampling){const{width:e,height:t}=this._region.getLayoutRect(),n=[],s=this._fieldY,r=this._fieldX;n.push({type:"sampling",size:this._direction==="horizontal"?t:e,factor:this._spec.samplingFactor,yfield:this._direction==="horizontal"?r[0]:s[0],groupBy:this._seriesField,mode:this._spec.sampling}),this._data.getProduct().transform(n)}}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._barMark]}compileData(){var e;super.compileData(),(e=this._barBackgroundViewData)===null||e===void 0||e.compile()}fillData(){var e,t;super.fillData(),(t=(e=this._barBackgroundViewData)===null||e===void 0?void 0:e.getDataView())===null||t===void 0||t.reRunAllTransform()}viewDataUpdate(e){var t,n,s;super.viewDataUpdate(e),(n=(t=this._barBackgroundViewData)===null||t===void 0?void 0:t.getDataView())===null||n===void 0||n.reRunAllTransform(),(s=this._barBackgroundViewData)===null||s===void 0||s.updateData()}release(){var e;super.release(),(e=this._barBackgroundViewData)===null||e===void 0||e.release(),this._barBackgroundViewData=null}}bl.type=re.bar,bl.mark=I4,bl.transformerConstructor=BO;const Fce=()=>{v4(),Zu(),omt(),ea(),Qr(),X.registerSeries(bl.type,bl)};class jO extends Dl{_getDefaultSeriesSpec(e){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{barWidth:e.barWidth,barMaxWidth:e.barMaxWidth,barMinWidth:e.barMinWidth,barGapInGroup:e.barGapInGroup,barMinHeight:e.barMinHeight,sampling:e.sampling,samplingFactor:e.samplingFactor,barBackground:e.barBackground,stackCornerRadius:e.stackCornerRadius})}transformSpec(e){super.transformSpec(e),Xd(e)}_transformAxisSpec(e){var t,n;if(super._transformAxisSpec(e),!e.axes)return;const s=e.series.some(a=>a.direction==="horizontal"),r=(t=e.axes.find(a=>a.type==="band"))!==null&&t!==void 0?t:e.axes.find(a=>(s?["left","right"]:["top","bottom"]).includes(a.orient));if(r&&!r.bandSize&&!r.maxBandSize&&!r.minBandSize&&e.autoBandSize){const a=Ke(e.autoBandSize)&&(n=e.autoBandSize.extend)!==null&&n!==void 0?n:0,{barMaxWidth:o,barMinWidth:l,barWidth:c,barGapInGroup:u}=e.series.find(h=>h.type==="bar");this._applyAxisBandSize(r,a,{barMaxWidth:o,barMinWidth:l,barWidth:c,barGapInGroup:u})}}}class Bh extends Ri{constructor(){super(...arguments),this.transformerConstructor=jO,this.type="bar",this.seriesType=re.bar}}Bh.type="bar",Bh.seriesType=re.bar,Bh.transformerConstructor=jO,Yt(Bh,zc);const cmt=()=>{Fce(),X.registerChart(Bh.type,Bh)};class S1 extends Rs{constructor(){super(...arguments),this.type=S1.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{width:void 0,height:void 0,length:3})}}S1.type="rect3d";const R4=()=>{X.registerMark(S1.type,S1),$ht(),mce()};class CT extends bl{constructor(){super(...arguments),this.type=re.bar3d,this._barMarkName="bar3d",this._barMarkType="rect3d"}}CT.type=re.bar3d,CT.mark=Lce;const Bce=()=>{lmt(),R4(),ea(),Qr(),X.registerSeries(CT.type,CT)};class jce extends jO{_getDefaultSeriesSpec(e){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{barWidth:e.barWidth,barMaxWidth:e.barMaxWidth,barMinWidth:e.barMinWidth,barGapInGroup:e.barGapInGroup})}}const Rd=()=>{H5(),V5(),nit()},umt=()=>{rft(),mgt()};class Tv extends Bh{constructor(){super(...arguments),this.transformerConstructor=jce,this.type="bar3d",this.seriesType=re.bar3d}}Tv.type="bar3d",Tv.seriesType=re.bar3d,Tv.transformerConstructor=jce;const hmt=()=>{Rd(),Bce(),X.registerChart(Tv.type,Tv)},sX=10,dmt=[10,20],pmt=rn.Linear,rX="circle",fmt=rn.Ordinal,gmt=["circle","square","triangle","diamond","star"],mmt=(i,e)=>e==="fadeIn"?{type:"fadeIn"}:{type:"scaleIn"},ymt=()=>{X.registerAnimation("scatter",(i,e)=>Object.assign({appear:mmt(0,e)},E4))},_mt=Object.assign(Object.assign({},Wi),{point:{name:"point",type:"symbol"}});class Nce extends or{_transformLabelSpec(e){this._addMarkLabelSpec(e,"point")}}class hd extends Io{constructor(){super(...arguments),this.type=re.scatter,this.transformerConstructor=Nce,this._invalidType="zero"}setAttrFromSpec(){super.setAttrFromSpec(),this._size=this._spec.size,this._sizeField=this._spec.sizeField,this._shape=this._spec.shape,this._shapeField=this._spec.shapeField}_getSeriesAttribute(e,t,{defaultScaleType:n,defaultRange:s},r){var a,o,l,c;if(ee(t))return t;if(ie(t)){if(B(e))return(a=this._option)===null||a===void 0||a.onError(`${r}Field is required.`),t;if(n!=="ordinal"&&t.length>2)return(o=this._option)===null||o===void 0||o.onError(`${r} length is invalid, specify up to 2 ${r}s.`),t;const u=`${Ie}_series_scatter_${this.id}_scale_${r}`;return this._option.globalScale.registerModelScale({id:u,type:n,domain:[{dataId:this._rawData.name,fields:[e]}],range:t}),{scale:u,field:e}}if(Ke(t)){if(B(e))return(l=this._option)===null||l===void 0||l.onError(`${r}Field is required.`),t;const u=`${Ie}_series_scatter_${this.id}_scale_${r}`,h=Object.assign({id:u,type:n,domain:[{dataId:this._rawData.name,fields:[e]}],range:s},t);return this._option.globalScale.registerModelScale(h),{scale:h.id,field:e}}return(c=this._option)===null||c===void 0||c.onError(`${r} attribute is invalid.`),t}getSizeAttribute(e,t){return B(t)?sX:ye(t)?t:be(t)&&ZGe(t)?parseFloat(t):this._getSeriesAttribute(e,t,{defaultScaleType:pmt,defaultRange:dmt},"size")}getShapeAttribute(e,t){return B(t)?rX:be(t)?t:this._getSeriesAttribute(e,t,{defaultScaleType:fmt,defaultRange:gmt},"shape")}initMark(){var e,t;this._symbolMark=this._createMark(hd.mark.point,{groupKey:this._seriesField,isSeriesMark:!0,stateSort:(e=this._spec.point)===null||e===void 0?void 0:e.stateSort},{progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold,morph:Yu(this._spec,hd.mark.point.name),morphElementKey:this.getDimensionField()[0],setCustomizedShape:(t=this._spec.point)===null||t===void 0?void 0:t.customShape})}initMarkStyle(){this.initSymbolMarkStyle()}initAnimation(){var e,t,n;const s=Yd(this),r=(t=(e=this._spec)===null||e===void 0?void 0:e.animationAppear)===null||t===void 0?void 0:t.preset;this._symbolMark.setAnimationConfig(ft((n=X.getAnimationInKey("scatter"))===null||n===void 0?void 0:n({},r),kt("point",this._spec,this._markAttributeContext),s))}initSymbolMarkStyle(){const e=this._symbolMark;e&&(this._invalidType!=="zero"&&this.setMarkStyle(e,{visible:this._getInvalidDefined.bind(this)}),this.setMarkStyle(e,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null,fill:this.getColorAttribute(),size:ye(this._size)||ee(this._size)?this._size:sX,symbolType:be(this._shape)||ee(this._shape)?this._shape:rX},Ce.STATE_NORMAL,pe.Series),(F(this._sizeField)||F(this._size))&&this.setMarkStyle(e,{size:this.getSizeAttribute(this._sizeField,this._size)},Ce.STATE_NORMAL,pe.User_Mark),(F(this._shapeField)||F(this._shape))&&this.setMarkStyle(e,{symbolType:this.getShapeAttribute(this._shapeField,this._shape)},Ce.STATE_NORMAL,pe.User_Mark))}initTooltip(){super.initTooltip(),this._symbolMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._symbolMark)}viewDataStatisticsUpdate(e){super.viewDataStatisticsUpdate(e);const t=[this.getDimensionField()[0],this.getStackValueField()].every(n=>{var s,r,a;return n&&((a=(r=(s=this.getViewDataStatistics())===null||s===void 0?void 0:s.latestData)===null||r===void 0?void 0:r[n])===null||a===void 0?void 0:a.allValid)});this._invalidType==="zero"||t?this.setMarkStyle(this._symbolMark,{visible:!0},"normal",pe.Series):this.setMarkStyle(this._symbolMark,{visible:this._getInvalidDefined.bind(this)},"normal",pe.Series),this._symbolMark.getProduct()&&this._symbolMark.compileEncode()}initLabelMarkStyle(e){e&&(this._labelMark=e,this.setMarkStyle(e,{fill:this.getColorAttribute(),text:t=>t[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null},Ce.STATE_NORMAL,pe.Series),this._invalidType!=="zero"&&this.setMarkStyle(e,{visible:this._getInvalidDefined.bind(this)},Ce.STATE_NORMAL,pe.Series))}handleZoom(e){var t,n;this.getMarksWithoutRoot().forEach(r=>{const a=r.getProduct();!a||!a.elements||!a.elements.length||a.elements.forEach((o,l)=>{const c=o.getGraphicItem(),u=o.getDatum(),h=this.dataToPosition(u);h&&c&&c.translateTo(h.x,h.y)})});const s=(n=(t=this._labelMark)===null||t===void 0?void 0:t.getComponent())===null||n===void 0?void 0:n.getProduct();s&&s.evaluate(null,null)}handlePan(e){var t,n;this.getMarksWithoutRoot().forEach(r=>{const a=r.getProduct();!a||!a.elements||!a.elements.length||a.elements.forEach((o,l)=>{const c=o.getGraphicItem(),u=o.getDatum(),h=this.dataToPosition(u);h&&c&&c.translateTo(h.x,h.y)})});const s=(n=(t=this._labelMark)===null||t===void 0?void 0:t.getComponent())===null||n===void 0?void 0:n.getProduct();s&&s.evaluate(null,null)}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._symbolMark]}}hd.type=re.scatter,hd.mark=_mt,hd.transformerConstructor=Nce;const vmt=()=>{qu(),ymt(),ea(),Qr(),X.registerSeries(hd.type,hd)};class $ce extends Dl{_getDefaultSeriesSpec(e){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{point:e.point,size:e.size,sizeField:e.sizeField,shape:e.shape,shapeField:e.shapeField})}}class Tm extends Ri{constructor(){super(...arguments),this.transformerConstructor=$ce,this.type="scatter",this.seriesType=re.scatter}}Tm.type="scatter",Tm.seriesType=re.scatter,Tm.transformerConstructor=$ce,Yt(Tm,zc);const bmt=()=>{vmt(),X.registerChart(Tm.type,Tm)};e5();const aX={},L4=["clipAngle","clipExtent","scale","translate","center","rotate","precision","reflectX","reflectY","parallels","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function xmt(i,e){return function t(){const n=e();return n.type=i,n.path=e5().projection(n),n.copy=n.copy||function(){const s=t();return L4.forEach(r=>{n[r]&&s[r](n[r]())}),s.path.pointRadius(n.path.pointRadius()),s},n}}function Sh(i,e){i&&be(i)||Vp("Projection type must be a name string.");const t=i.toLowerCase();return arguments.length>1&&(aX[t]=xmt(t,e)),aX[t]||null}const oX={albers:Ise,albersusa:IXe,azimuthalequalarea:RXe,azimuthalequidistant:LXe,conicconformal:BXe,conicequalarea:FA,conicequidistant:$Xe,equalEarth:HXe,equirectangular:jXe,gnomonic:VXe,identity:UXe,mercator:DXe,naturalEarth1:WXe,orthographic:GXe,stereographic:KXe,transversemercator:XXe};Object.keys(oX).forEach(i=>{Sh(i,oX[i])});const lX="Feature",zce="FeatureCollection";function Smt(i){return i.type===zce?i.features:q(i).filter(e=>!B(e)).map(e=>e.type===lX?e:{type:lX,geometry:e})}function Cmt(i){const e=q(i);return e.length===1?e[0]:{type:zce,features:e.reduce((t,n)=>t.concat(Smt(n)),[])}}function wmt(i){const e=Sh((i||"mercator").toLowerCase());return e||Vp("Unrecognized projection type: "+i),e()}function Amt(i,e,t){ee(i[e])&&i[e](t)}const kmt=L4.concat(["pointRadius","fit","extent","size"]);function cX(i,e){let t=[];return i&&Object.keys(i).forEach(n=>{kmt.includes(n)&&(t=t.concat(Ws(i[n],e)))}),t}let Tmt=class extends bO{constructor(e){super(e),this.grammarType="projection"}parse(e){return super.parse(e),this.pointRadius(e.pointRadius),this.size(e.size),this.extent(e.extent),this.fit(e.fit),this.configure(e),this.commit(),this}pointRadius(e){return B(this.spec.pointRadius)||this.detach(Ws(this.spec.pointRadius,this.view)),this.spec.pointRadius=e,this.attach(Ws(e,this.view)),this.commit(),this}size(e){return B(this.spec.size)||this.detach(Ws(this.spec.size,this.view)),this.spec.size=e,this.attach(Ws(e,this.view)),this.commit(),this}extent(e){return B(this.spec.extent)||this.detach(Ws(this.spec.extent,this.view)),this.spec.extent=e,this.attach(Ws(e,this.view)),this.commit(),this}fit(e){return B(this.spec.fit)||this.detach(Ws(this.spec.fit,this.view)),this.spec.fit=e,this.attach(Ws(e,this.view)),this.commit(),this}configure(e){return this.detach(cX(this.spec,this.view)),B(e)?this.spec={type:this.spec.type,fit:this.spec.fit,extent:this.spec.extent,size:this.spec.size,pointRadius:this.spec.pointRadius}:(Object.assign(this.spec,e),this.attach(cX(this.spec,this.view))),this.commit(),this}evaluate(e,t){if(this.projection&&this.projection.type===this.spec.type||(this.projection=wmt(this.spec.type),this.projection.type=this.spec.type),L4.forEach(n=>{B(this.spec[n])||Amt(this.projection,n,Xn(this.spec[n],t,Sh))}),B(this.spec.pointRadius)||this.projection.path.pointRadius(Xn(this.spec.pointRadius,t,Sh)),!(B(this.spec.fit)||B(this.spec.extent)&&B(this.spec.size))){const n=Cmt(Xn(this.spec.fit,t,Sh));this.spec.extent?this.projection.fitExtent(Xn(this.spec.extent,t,Sh),n):this.spec.size&&this.projection.fitSize(Xn(this.spec.size,t,Sh),n)}return this.projection}output(){return this.projection}};const Emt=()=>{Q.registerGrammar("projection",Tmt,"projections")},Pmt=(i,e)=>{if(!e.from||!e.from())return i;const t=e.fields,n=e.key,s=e.values,r=e.default,a=e.as||[t],o=e.from().reduce(function(c,u){return u[t]&&c.set(u[t],u),c},new Map);let l;if(ee(e.set))l=function(c){const u=o.get(c[n]);e.set(c,u)};else if(s){const c=s.length;l=function(u){const h=o.get(u[n]);if(B(h))for(let d=0;d<c;++d)u[a[d]]=r;else for(let d=0;d<c;++d)u[a[d]]=h[s[d]]}}else l=function(c){const u=o.get(c[n]);c[a[0]]=F(u)?u:r};return i.length===0?[]:i.map(c=>(l(c),c))};class Omt extends Mf{constructor(){super(...arguments),this.type=re.geo,this.coordinate="geo",this._nameProperty="name"}getMapViewData(){var e;return(e=this._mapViewData)===null||e===void 0?void 0:e.getDataView()}get nameField(){return this._nameField}set nameField(e){this._nameField=e}get valueField(){return this._valueField}set valueField(e){this._valueField=e}getNameProperty(){return this._nameProperty}getCentroidProperty(){return this._centroidProperty}getCoordinateHelper(){return this._coordinateHelper}setCoordinateHelper(e){this._coordinateHelper=e}getStatisticFields(){const e=[];return e.push({key:this._nameField,operations:["values"]}),e.push({key:this._valueField,operations:["max","min"]}),e}getGroupFields(){return null}dataToPosition(e,t){var n;let s=null;if(!e||t&&!this.isDatumInViewData(e))return s;const{dataToPosition:r,latitudeField:a,longitudeField:o}=this._coordinateHelper;if(s=this.nameToPosition(e),s===null){const l=o?e==null?void 0:e[o]:Number.NaN,c=a?e==null?void 0:e[a]:Number.NaN;s=(n=r==null?void 0:r([l,c]))!==null&&n!==void 0?n:null}return s}nameToPosition(e){const t=this.getDatumName(e);return B(t)?null:this.nameValueToPosition(t)}nameValueToPosition(e){var t,n;const s=(n=(t=this.getMapViewData())===null||t===void 0?void 0:t.latestData)===null||n===void 0?void 0:n.filter(l=>this.getDatumName(l)===e)[0];if(B(s))return null;const{dataToPosition:r}=this._coordinateHelper,a=this.getDatumCenter(s),o=r==null?void 0:r(a);return B(o)||isNaN(o.x)||isNaN(o.y)?null:o}dataToLatitude(e){if(!this._coordinateHelper)return Number.NaN;const{dataToLatitude:t}=this._coordinateHelper;return t(e)}dataToLongitude(e){if(!this._coordinateHelper)return Number.NaN;const{dataToLatitude:t}=this._coordinateHelper;return t(e)}valueToPosition(e,t){return{x:this.dataToLongitude(e),y:this.dataToLatitude(t)}}positionToData(e){}latitudeToData(e){}longitudeToData(e){}dataToPositionX(e){var t;return(t=this._option)===null||t===void 0||t.onError("Method not implemented."),0}dataToPositionY(e){var t;return(t=this._option)===null||t===void 0||t.onError("Method not implemented."),0}dataToPositionZ(e){var t;return(t=this._option)===null||t===void 0||t.onError("Method not implemented."),0}release(){super.release(),this._mapViewData.release(),this._mapViewData=this._mapViewDataStatistics=null}getStackGroupFields(){return[this._nameField]}getStackValueField(){return this._spec.valueField}compileData(){var e;(e=this._mapViewData)===null||e===void 0||e.compile()}initStatisticalData(){if(super.initStatisticalData(),this._mapViewData){const e=`${Ie}_series_${this.id}_mapViewDataStatic`;this._mapViewDataStatistics=this.createStatisticalData(e,this._mapViewData.getDataView()),this._mapViewData.getDataView().target.removeListener("change",this._mapViewDataStatistics.reRunAllTransform)}}getSeriesKeys(){var e,t,n,s,r;return this._seriesField?(r=(t=(e=this.getRawDataStatisticsByField(this._seriesField))===null||e===void 0?void 0:e.values)!==null&&t!==void 0?t:(s=(n=this._mapViewDataStatistics)===null||n===void 0?void 0:n.latestData[this._seriesField])===null||s===void 0?void 0:s.values)!==null&&r!==void 0?r:[]:this.name?[this.name]:this.userId?[`${this.userId}`]:[`${this.type}_${this.id}`]}fillData(){var e,t;super.fillData(),(e=this._mapViewData.getDataView())===null||e===void 0||e.reRunAllTransform(),(t=this._mapViewDataStatistics)===null||t===void 0||t.reRunAllTransform()}getActiveMarks(){return[]}}const wT=`${Ie}_MAP_LOOK_UP_KEY`,Mmt=(i,e)=>(i.features&&i.features.forEach((t,n)=>{var s;t[Ps]=n;const r=(s=t.properties)===null||s===void 0?void 0:s[e.nameProperty];e.nameMap&&e.nameMap[r]?t[wT]=e.nameMap[r]:t[wT]=r}),i.features);class Imt extends ar{constructor(){super(...arguments),this.dimensionTooltipTitleCallback=e=>{var t;const n=this.series;return(t=this._getDimensionData(e))!==null&&t!==void 0?t:n.getDatumName(e)}}}class C1 extends Rs{constructor(){super(...arguments),this.type=C1.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:0,path:""})}}C1.type="path";const D4=()=>{X.registerMark(C1.type,C1),wle()},Rmt=Object.assign(Object.assign({},Wi),{area:{name:"area",type:"path"}});class Lmt{constructor(e){this.projection=Sh(e.type)()}fit(e,t,n){const s={type:"FeatureCollection",features:n};this.projection.fitExtent([e,t],s)}center(e){var t,n;(n=(t=this.projection)===null||t===void 0?void 0:t.center)===null||n===void 0||n.call(t,e)}project(e){var t;return(t=this.projection)===null||t===void 0?void 0:t.call(this,e)}shape(e){var t,n;return(n=(t=this.projection)===null||t===void 0?void 0:t.path)===null||n===void 0?void 0:n.call(t,e)}invert(e){var t,n;return(n=(t=this.projection)===null||t===void 0?void 0:t.invert)===null||n===void 0?void 0:n.call(t,e)}scale(e){var t;if(!((t=this.projection)===null||t===void 0)&&t.scale){if(e===void 0)return this.projection.scale();this.projection.scale(e)}}translate(e){var t;if(!((t=this.projection)===null||t===void 0)&&t.scale){if(e===void 0)return this.projection.translate();this.projection.translate(e)}}evaluate(e,t,n){const s=this.projection.copy();return s==null?void 0:s.fitExtent([e,t],{type:"FeatureCollection",features:n})}}class Dmt{parserScrollEvent(e){return e&&!(e.ctrlKey||e.deltaY===0&&e.deltaX===0)&&(e.scrollX=e.deltaX,e.scrollY=e.deltaY,e)}parserZoomEvent(e){if(!e)return e;const t=Math.pow(1.0005,-e.deltaY*Math.pow(16,e.deltaMode));return e.zoomDelta=t,e.zoomX=e.canvasX,e.zoomY=e.canvasY,e}clearZoom(){}clearScroll(){}clearDrag(){}parserDragEvent(){return!0}}class Fmt{constructor(){this._lastScale=0}clearZoom(){this._lastScale=0,this.pointerId=null}parserDragEvent(e){return!0}parserZoomEvent(e){const t=e.scale;if(this._lastScale===0)return this._lastScale=t,e;e.zoomDelta=t/this._lastScale;const n=e.center;return e.zoomX=n.x,e.zoomY=n.y,this._lastScale=t,e}parserScrollEvent(e){return e}clearScroll(){}clearDrag(){}}function Yc(i){return i===Sn["desktop-browser"]||i===Sn["desktop-miniApp"]?{start:"pointerdown",move:"pointermove",end:"pointerup",zoom:"wheel",zoomEnd:"pointerup",scroll:"wheel",trigger:Dmt}:Pd(i)||Vd(i)?{start:"pointerdown",move:"pointermove",end:"pointerup",zoom:"pinch",zoomEnd:"pinchend",scroll:"pan",scrollEnd:"panend",trigger:Fmt}:null}const Tg={debounce:zd,throttle:Hu};class F4{constructor(){this._isGestureListener=!1}initZoomable(e,t=Sn["desktop-browser"]){this._eventObj=e,this._renderMode=t,this._gestureController=this._option.getChart().getVGrammarView().renderer._gestureController,this._isGestureListener=Pd(this._renderMode)||Vd(this._renderMode),Yc(this._renderMode)&&(this._clickEnable=!0,this._zoomableTrigger=new(this._getZoomTriggerEvent("trigger")))}_getZoomTriggerEvent(e){return Yc(this._renderMode)[e]}_zoomEventDispatch(e,t,n){if(!this._isGestureListener&&!e.event)return;const s=this._isGestureListener?e:e.event.clone();this._zoomableTrigger.parserZoomEvent(s);const{zoomDelta:r,zoomX:a,zoomY:o}=s;if(B(r)||!ew({x:a,y:o},this._getRegionOrSeriesLayout(t),!1))return;let l={};n&&(l=n({zoomDelta:r,zoomX:a,zoomY:o},s)),this._eventObj.emit("zoom",Object.assign(Object.assign({scale:s.zoomDelta,scaleCenter:{x:s.zoomX,y:s.zoomY}},l),{model:this}))}_getRegionOrSeriesLayout(e){e.type!=="region"&&(e=e.getRegion());const{x:t,y:n,width:s,height:r}=e.layout.getLayout();return{x1:t,y1:n,x2:t+s,y2:n+r}}_bindZoomEventAsRegion(e,t,n,s){var r,a;const o=(r=s==null?void 0:s.delayType)!==null&&r!==void 0?r:"throttle",l=(a=s==null?void 0:s.delayTime)!==null&&a!==void 0?a:0,c=this._isGestureListener?this._gestureController:e,u=this._isGestureListener?[this._getZoomTriggerEvent("zoom")]:[this._getZoomTriggerEvent("zoom"),{level:pi.chart,consume:!0}],h=this._isGestureListener?[this._getZoomTriggerEvent("zoomEnd")]:[this._getZoomTriggerEvent("zoomEnd"),{level:pi.chart,consume:!1}];c.on(...h,Tg[o](d=>{this._zoomableTrigger.clearZoom()},l)),c.on(...u,Tg[o](d=>{this._zoomEventDispatch(d,t,n)},l))}initZoomEventOfSeries(e,t,n){this._option.disableTriggerEvent||Yc(this._renderMode)&&this._bindZoomEventAsRegion(e.event,e,t,n)}initZoomEventOfRegions(e,t,n,s){this._option.disableTriggerEvent||Yc(this._renderMode)&&e.forEach(r=>{t?r.getSeries().forEach(a=>{t(a)&&this._bindZoomEventAsRegion(a.event,a,n,s)}):this._bindZoomEventAsRegion(this._eventObj,r,n,s)})}_scrollEventDispatch(e,t,n){let s=!1;if(!this._isGestureListener&&(!e.event||this._option.disableTriggerEvent))return s;const r=this._isGestureListener?e:e.event;this._zoomableTrigger.parserScrollEvent(r);const{scrollX:a,scrollY:o,canvasX:l,canvasY:c}=r;return B(a)&&B(o)||ew({x:l,y:c},this._getRegionOrSeriesLayout(t),!1)&&(n&&(s=n({scrollX:a,scrollY:o},r)),this._eventObj.emit("scroll",{scrollX:a,scrollY:o,model:this})),s}_bindScrollEventAsRegion(e,t,n,s){var r,a;const o=(r=s==null?void 0:s.delayType)!==null&&r!==void 0?r:"throttle",l=(a=s==null?void 0:s.delayTime)!==null&&a!==void 0?a:0,c=this._isGestureListener?this._gestureController:e,u=this._isGestureListener?[this._getZoomTriggerEvent("scroll")]:[this._getZoomTriggerEvent("scroll"),{level:pi.chart,consume:!0}],h=this._isGestureListener?[this._getZoomTriggerEvent("scrollEnd")]:[this._getZoomTriggerEvent("scrollEnd"),{level:pi.chart,consume:!1}];c.on(...h,Tg[o](d=>{this._zoomableTrigger.clearScroll()},l)),c.on(...u,Tg[o](d=>this._scrollEventDispatch(d,t,n),l))}initScrollEventOfSeries(e,t,n){Yc(this._renderMode)&&this._bindScrollEventAsRegion(e.event,e,t,n)}initScrollEventOfRegions(e,t,n,s){this._option.disableTriggerEvent||Yc(this._renderMode)&&e.forEach(r=>{t?r.getSeries().forEach(a=>{t(a)&&this._bindScrollEventAsRegion(a.event,a,n,s)}):this._bindScrollEventAsRegion(this._eventObj,r,n,s)})}_bindDragEventAsRegion(e,t,n,s){e.on(this._getZoomTriggerEvent("start"),{level:pi.chart},r=>{if(!r.event)return;const{event:a}=r;ew({x:a.canvasX,y:a.canvasY},this._getRegionOrSeriesLayout(t),!1)&&this._handleDrag(r,n,s)}),e.on("click",{level:pi.chart},()=>!this._clickEnable)}initDragEventOfSeries(e,t,n){this._option.disableTriggerEvent||Yc(this._renderMode)&&e.event.on(this._getZoomTriggerEvent("start"),{level:pi.model,filter:({model:s})=>(s==null?void 0:s.id)===e.id},s=>{this._handleDrag(s,t,n)})}initDragEventOfRegions(e,t,n,s){this._option.disableTriggerEvent||Yc(this._renderMode)&&e.forEach(r=>{t?r.getSeries().forEach(a=>{t(a)&&(a.event.on(this._getZoomTriggerEvent("start"),{level:pi.model,filter:({model:o})=>(o==null?void 0:o.id)===a.id},o=>{this._handleDrag(o,n)}),a.event.on("click",{level:pi.model,filter:({model:o})=>(o==null?void 0:o.id)===a.id},()=>!this._clickEnable))}):this._bindDragEventAsRegion(this._eventObj,r,n,s)})}_handleDrag(e,t,n){var s,r,a;if(this._option.disableTriggerEvent||(this._clickEnable=!1,!this._zoomableTrigger.parserDragEvent(e.event)))return;const o=(s=n==null?void 0:n.delayType)!==null&&s!==void 0?s:"throttle",l=(r=n==null?void 0:n.delayTime)!==null&&r!==void 0?r:0,c=(a=n==null?void 0:n.realTime)===null||a===void 0||a,u=this._getZoomTriggerEvent("move"),h=this._getZoomTriggerEvent("end"),d=e.event;let p=d.canvasX,f=d.canvasY,g=d.canvasX,m=d.canvasY;const y=Tg[o](x=>{this._clickEnable=!0;const S=x.event,C=[S.canvasX-g,S.canvasY-m];g=S.canvasX,m=S.canvasY,!c&&t&&t(C,x.event),this._eventObj.emit("panend",{delta:C,model:this}),this._zoomableTrigger.pointerId=null,this._eventObj.off(u,{level:pi.chart,source:wt.chart},b),this._eventObj.off(h,{level:pi.chart,source:wt.window},y),this._eventObj.allow(h)},l),b=Tg[o](x=>{if(!this._zoomableTrigger.parserDragEvent(x.event))return;this._clickEnable=!1,this._eventObj.prevent(h,y);const S=x.event,C=[S.canvasX-p,S.canvasY-f];p=S.canvasX,f=S.canvasY,c&&t&&t(C,x.event),this._eventObj.emit("panmove",{delta:C,model:this})},l);this._eventObj.on(u,{level:pi.chart,source:wt.chart},b),this._eventObj.on(h,{level:pi.chart,source:wt.chart},y)}}function Bmt(i,e){return`${Ie}_${e}_${i}`}class AT extends Pr{constructor(){super(...arguments),this.type=oe.geoCoordinate,this.name=oe.geoCoordinate,this.layoutType="none",this.layoutZIndex=Xt.Mark,this._projectionSpec={name:Bmt(this.type,this.id),type:"mercator"},this._actualScale=1,this._initialScale=1,this.effect={scaleUpdate:()=>{this.coordinateHelper()}},this._handleChartZoom=(e,t)=>{var n,s,r,a,o,l;let c=e.zoomDelta;const u=this._actualScale;return this._actualScale*=c,this._actualScale<((n=this._spec.zoomLimit)===null||n===void 0?void 0:n.min)?(this._actualScale=(s=this._spec.zoomLimit)===null||s===void 0?void 0:s.min,c=((r=this._spec.zoomLimit)===null||r===void 0?void 0:r.min)/u):this._actualScale>((a=this._spec.zoomLimit)===null||a===void 0?void 0:a.max)&&(this._actualScale=(o=this._spec.zoomLimit)===null||o===void 0?void 0:o.max,c=((l=this._spec.zoomLimit)===null||l===void 0?void 0:l.max)/u),this.zoom(c,[e.zoomX,e.zoomY]),{scale:c,totalScale:this._actualScale}},this.pan=(e=[0,0])=>{var t,n,s;const r=(n=(t=this._projection)===null||t===void 0?void 0:t.translate())!==null&&n!==void 0?n:[0,0];let a=r[0],o=r[1];a+=e[0],o+=e[1],(s=this._projection)===null||s===void 0||s.translate([a,o])}}get longitudeField(){return this._longitudeField}get latitudeField(){return this._latitudeField}get projectionSpec(){return this._projectionSpec}setProjection(e){this._projectionSpec=Object.assign(Object.assign({},e),{name:this._projectionSpec.name})}getZoom(){return this._actualScale}static getSpecInfo(e){if(B(e))return null;const t=[];return e.region.forEach((n,s)=>{if(n.coordinate==="geo"){const r=Object.assign(Object.assign({},n),{padding:0});t.push({spec:r,regionIndex:s,type:oe.geoCoordinate,specInfoPath:["component","geoCoordinate",s]})}}),t}setAttrFromSpec(){var e,t,n;super.setAttrFromSpec(),this._spec.roam&&this.initZoomable(this.event,this._option.mode),this._projectionSpec=Pe(this._projectionSpec,this._spec.projection),this._projectionSpec.zoom>((e=this._spec.zoomLimit)===null||e===void 0?void 0:e.max)&&(this._projectionSpec.zoom=this._spec.zoomLimit.max),this._projectionSpec.zoom<((t=this._spec.zoomLimit)===null||t===void 0?void 0:t.min)&&(this._projectionSpec.zoom=this._spec.zoomLimit.min),this._actualScale=(n=this._projectionSpec.zoom)!==null&&n!==void 0?n:1,this._initialScale=this._actualScale,this._longitudeField=this._spec.longitudeField,this._latitudeField=this._spec.latitudeField}created(){super.created(),this._regions=this._option.getRegionsInIndex([this._option.regionIndex]),this.initProjection(),this.coordinateHelper(),this.initEvent(),this._initCenterCache()}dispatchZoom(e,t){const n=t||{x:this.getLayoutStartPoint().x+this.getLayoutRect().width/2,y:this.getLayoutStartPoint().y+this.getLayoutRect().height/2},{scale:s,totalScale:r}=this._handleChartZoom({zoomDelta:e,zoomX:n.x,zoomY:n.y});s!==1&&this.event.emit("zoom",{scale:s,scaleCenter:n,totalScale:r,model:this})}initEvent(){this.event.on(ke.scaleUpdate,{filter:({model:t})=>(t==null?void 0:t.id)===this.id},this.effect.scaleUpdate.bind(this));const{roam:e}=this._spec;e&&(this.initZoomEventOfRegions(this._regions,null,this._handleChartZoom),this.initDragEventOfRegions(this._regions,e.blank?null:()=>!0,this.pan),this._regions.forEach(t=>{t.getSeries().forEach(n=>{n.event.on("zoom",s=>(n.handleZoom(s),!0)),n.event.on("panmove",s=>(n.handlePan(s),!0))})}))}initProjection(){var e;this._projection=new Lmt(this._projectionSpec),this._projection.projection!==null||(e=this._option)===null||e===void 0||e.onError("unsupported projection type!")}coordinateHelper(){const e={longitudeField:this._longitudeField,latitudeField:this._latitudeField,dataToPosition:this.dataToPosition.bind(this),dataToLongitude:this.dataToLongitude.bind(this),dataToLatitude:this.dataToLatitude.bind(this),shape:this.shape.bind(this),getCoordinateId:()=>this.id};this._regions.forEach(t=>{t.getSeries().forEach(n=>{n.type===re.map?n.setCoordinateHelper(e):(n.setXAxisHelper(Object.assign(Object.assign({},e),{isContinuous:!0,dataToPosition:(s,r)=>{var a;let o=s[0];if(B(o)&&(r!=null&&r.datum)){const l=r.datum[n.getDimensionField()[0]];o=(a=this._centerCache.get(l))===null||a===void 0?void 0:a.x}return this.dataToLongitude(o)},valueToPosition:(s,r)=>{var a;if(B(s)&&(r!=null&&r.datum)){const o=r.datum[n.getDimensionField()[0]];s=(a=this._centerCache.get(o))===null||a===void 0?void 0:a.x}return this.dataToLongitude(s)},getFields:()=>[this._longitudeField],getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>!1})),n.setYAxisHelper(Object.assign(Object.assign({},e),{isContinuous:!0,dataToPosition:(s,r)=>{var a;let o=s[0];if(B(o)&&(r!=null&&r.datum)){const l=r.datum[n.getDimensionField()[0]];o=(a=this._centerCache.get(l))===null||a===void 0?void 0:a.y}return this.dataToLatitude(o)},valueToPosition:(s,r)=>{var a;if(B(s)&&(r!=null&&r.datum)){const o=r.datum[n.getDimensionField()[0]];s=(a=this._centerCache.get(o))===null||a===void 0?void 0:a.y}return this.dataToLatitude(s)},getFields:()=>[this._latitudeField],getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>!1})))})})}onLayoutEnd(e){this.setLayoutRect(this._regions[0].getLayoutRect()),this.setLayoutStartPosition(this._regions[0].getLayoutStartPoint());const{width:t,height:n}=this.getLayoutRect(),{translate:s,scale:r,center:a}=this.evaluateProjection([0,0],[t,n]);s&&this._projection.translate(s),r&&this._projection.scale(r),a&&this._projection.center(a),Vi(this._regions,o=>{var l;if(o.type===re.map){o.areaPath.clear();const c=(l=o.getRootMark().getProduct())===null||l===void 0?void 0:l.getGroupGraphicItem();c&&c.attribute.postMatrix&&c.setAttributes({postMatrix:new Zi})}}),this._actualScale=this._initialScale,super.onLayoutEnd(e)}onRender(e){}changeRegions(e){}_getNeedClearVRenderComponents(){return[]}collectFeatures(){const e=[];return this._regions.forEach(t=>{t.getSeries().forEach(n=>{var s,r;n.type===re.map&&e.push(...(r=(s=n.getMapViewData())===null||s===void 0?void 0:s.latestData)!==null&&r!==void 0?r:[])})}),e}dataToPosition(e=[]){var t;const n=(t=this._projection)===null||t===void 0?void 0:t.project([e[0],e[1]]);return{x:n==null?void 0:n[0],y:n==null?void 0:n[1]}}dataToLatitude(e){var t;const n=(t=this._projection)===null||t===void 0?void 0:t.project([0,e]);return n==null?void 0:n[1]}dataToLongitude(e){var t;const n=(t=this._projection)===null||t===void 0?void 0:t.project([e,0]);return n==null?void 0:n[0]}zoom(e,t=[0,0]){var n,s,r,a,o,l;let c=(s=(n=this._projection)===null||n===void 0?void 0:n.scale())!==null&&s!==void 0?s:0;const u=(a=(r=this._projection)===null||r===void 0?void 0:r.translate())!==null&&a!==void 0?a:[0,0];let h=u[0],d=u[1];c*=e,h-=(t[0]-h)*(e-1),d-=(t[1]-d)*(e-1),(o=this._projection)===null||o===void 0||o.scale(c),(l=this._projection)===null||l===void 0||l.translate([h,d])}shape(e){return this._projection.shape(e)}invert(e){return this._projection.invert(e)}evaluateProjection(e,t){var n;const s=this._projection.evaluate(e,t,this.collectFeatures());let r=s.translate();const a=s.scale()*this._initialScale,o=(n=this._projectionSpec.center)!==null&&n!==void 0?n:s.invert([t[0]/2,t[1]/2]);return o&&(r=[t[0]/2,t[1]/2]),{translate:r,scale:a,center:o}}_initCenterCache(){this._centerCache||(this._centerCache=new Map),this._regions.forEach(e=>{e.getSeries().forEach(t=>{var n,s;t.type==="map"&&((s=(n=t.getMapViewData())===null||n===void 0?void 0:n.latestData)!==null&&s!==void 0?s:[]).forEach((r={})=>{const a=r[t.getDimensionField()[0]]||r[wT],o=t.getDatumCenter(r);a&&F(o)&&this._centerCache.set(a,{x:o[0],y:o[1]})})})})}_compareSpec(e,t){const n=super._compareSpec(e,t);return n.reMake||(n.reMake=["roam","longitudeField","latitudeField","projection","zoomLimit"].some(s=>!Pt(t==null?void 0:t[s],e[s]))),n}release(){super.release(),this._centerCache&&this._centerCache.clear(),this._centerCache=null}}AT.type=oe.geoCoordinate,Yt(AT,F4);const Hce=()=>{X.registerComponent(AT.type,AT)};class Vce extends or{_transformLabelSpec(e){this._addMarkLabelSpec(e,"area",void 0,void 0,!1)}}class dd extends Omt{constructor(){super(...arguments),this.type=re.map,this.transformerConstructor=Vce,this._areaCache=new Map}getNameMap(){return this._nameMap}get areaPath(){return this._areaCache}setAttrFromSpec(){var e,t;super.setAttrFromSpec(),this.map=this._spec.map,this._nameMap=this._spec.nameMap,this._nameField=this._spec.nameField,this._valueField=this._spec.valueField,this._spec.nameProperty&&(this._nameProperty=this._spec.nameProperty),this._spec.centroidProperty&&(this._centroidProperty=this._spec.centroidProperty),this.map||(e=this._option)===null||e===void 0||e.onError(`map type '${this.map}' is not specified !`),Pf.get(this.map)||(t=this._option)===null||t===void 0||t.onError(`'${this.map}' data is not registered !`)}initData(){var e,t;super.initData(),Fe(this._dataSet,"copyDataView",AO),Fe(this._dataSet,"map",Mmt),Fe(this._dataSet,"lookup",Pmt);const n=Pf.get(this.map);n||(e=this._option)===null||e===void 0||e.onError("no valid map data found!");const s=new Rt(this._dataSet,{name:`map_${this.id}_data`});s.parse([n],{type:"dataview"}).transform({type:"copyDataView",options:{deep:!0},level:Tl.copyDataView}).transform({type:"map",options:{nameMap:this._nameMap,nameProperty:this._nameProperty}}).transform({type:"lookup",options:{from:()=>{var r;return(r=this._data)===null||r===void 0?void 0:r.getLatestData()},key:wT,fields:this._nameField,set:(r,a)=>{a&&Object.keys(a).forEach(o=>{o in r||(r[o]=a[o])})}}}),(t=this._data)===null||t===void 0||t.getDataView().target.addListener("change",s.reRunAllTransform),this._mapViewData=new Oc(this._option,s)}compileData(){var e;super.compileData(),(e=this._mapViewData)===null||e===void 0||e.compile()}initMark(){this._pathMark=this._createMark(dd.mark.area,{groupKey:this.getDimensionField()[0],isSeriesMark:!0,skipBeforeLayouted:!0,dataView:this._mapViewData.getDataView(),dataProductId:this._mapViewData.getProductId()},{morph:Yu(this._spec,dd.mark.area.name),morphElementKey:this.getDimensionField()[0]})}initMarkStyle(){const e=this._pathMark;e&&(this.setMarkStyle(e,{fill:t=>{var n,s,r,a;return F(t[(n=this._seriesField)!==null&&n!==void 0?n:Wr])?((s=this._option.globalScale.getScale("color"))!==null&&s!==void 0?s:this._getDefaultColorScale()).scale(t[(r=this._seriesField)!==null&&r!==void 0?r:Wr]):(a=this._spec)===null||a===void 0?void 0:a.defaultFillColor},path:this.getPath.bind(this)},"normal",pe.Series),e.setPostProcess("fill",t=>F(t)?t:this._spec.defaultFillColor),this.setMarkStyle(e,{smoothScale:!0},"normal",pe.Built_In))}initLabelMarkStyle(e){e&&(this._labelMark=e,this.setMarkStyle(e,{text:t=>this.getDatumName(t),x:t=>{var n;return(n=this.dataToPosition(t))===null||n===void 0?void 0:n.x},y:t=>{var n;return(n=this.dataToPosition(t))===null||n===void 0?void 0:n.y}}))}initAnimation(){var e;this._pathMark.setAnimationConfig(ft((e=X.getAnimationInKey("fadeInOut"))===null||e===void 0?void 0:e(),kt("area",this._spec,this._markAttributeContext)))}initTooltip(){this._tooltipHelper=new Imt(this),this._pathMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pathMark)}getPath(e){var t;const n=this._areaCache.get(e[Ps]);if(n)return n.shape;const s=(t=this._coordinateHelper)===null||t===void 0?void 0:t.shape(e);return this._areaCache.set(e[Ps],{shape:s}),s}onEvaluateEnd(){this._mapViewData.updateData()}getDimensionField(){return[this.nameField]}getMeasureField(){return[this.valueField]}release(){super.release(),this._areaCache.clear(),this._nameMap={},this._mapViewData=null}handleZoom(e){var t,n,s;const{scale:r,scaleCenter:a}=e;if(r===1)return;const o=(t=this.getRootMark().getProduct())===null||t===void 0?void 0:t.getGroupGraphicItem();o&&(o.attribute.postMatrix||o.setAttributes({postMatrix:new Zi}),o.scale(r,r,a));const l=(s=(n=this._labelMark)===null||n===void 0?void 0:n.getComponent())===null||s===void 0?void 0:s.getProduct();l&&l.evaluate(null,null)}handlePan(e){var t,n,s;const{delta:r}=e;if(r[0]===0&&r[1]===0)return;const a=(t=this.getRootMark().getProduct())===null||t===void 0?void 0:t.getGroupGraphicItem();a&&(a.attribute.postMatrix||a.setAttributes({postMatrix:new Zi}),a.translate(r[0],r[1]));const o=(s=(n=this._labelMark)===null||n===void 0?void 0:n.getComponent())===null||s===void 0?void 0:s.getProduct();o&&o.evaluate(null,null)}getDatumCenter(e){var t,n,s,r;return this._centroidProperty&&(!((t=e.properties)===null||t===void 0)&&t[this._centroidProperty])?(n=e.properties)===null||n===void 0?void 0:n[this._centroidProperty]:Z(e.centroidX*e.centroidY)?[e.centroidX,e.centroidY]:!((s=e.properties)===null||s===void 0)&&s.center?e.properties.center:!((r=e.properties)===null||r===void 0)&&r.centroid?e.properties.centroid:[Number.NaN,Number.NaN]}getDatumName(e){var t;if(e[this.nameField])return e[this.nameField];const n=(t=e.properties)===null||t===void 0?void 0:t[this._nameProperty];if(n){if(this._spec.nameMap&&this._spec.nameMap[n])return this._spec.nameMap[n];if(this._spec.showDefaultName||!this._spec.nameMap)return n}return""}dataToPositionX(e){var t;return(t=this._option)===null||t===void 0||t.onError("Method not implemented."),0}dataToPositionY(e){var t;return(t=this._option)===null||t===void 0||t.onError("Method not implemented."),0}viewDataUpdate(e){var t,n,s;super.viewDataUpdate(e),(n=(t=this._mapViewData)===null||t===void 0?void 0:t.getDataView())===null||n===void 0||n.reRunAllTransform(),(s=this._mapViewData)===null||s===void 0||s.updateData()}_getDataIdKey(){return Ps}getActiveMarks(){return[this._pathMark]}}dd.type=re.map,dd.mark=Rmt,dd.transformerConstructor=Vce;const jmt=()=>{Emt(),Hce(),D4(),X.registerSeries(dd.type,dd),X.registerImplement("registerMap",vft),X.registerImplement("unregisterMap",bft),Xu()},kT=`${Ie}_waterfall_default_seriesField`,Nmt=(i,e)=>{if(!i||i.length===0)return i;const{indexField:t,total:n,groupData:s}=e,r=[],{dimensionValues:a,dimensionData:o}=s().latestData,l=Array.from(a[t]);let c={start:0,end:0,positive:0,negative:0,lastIndex:null};return l.forEach((u,h)=>{const d={start:c.end,end:c.end,lastIndex:c.lastIndex,lastEnd:c.end,index:u,isTotal:!1,positive:c.end,negative:c.end},p=o[u];if(p==null||p.forEach((f,g)=>{g===p.length-1?f[h1]=!0:delete f[h1]}),p.length>1){const f=g=>{if(n&&n.type!=="end"){if(n.type==="field"||n.type==="custom")return!!g[n.tagField]}else if(h===l.length-1)return!0;return!1};if(p.some(g=>f(g)))return c=$mt(p,u,d,r,c,l,h,e,f),void r.push(d)}c=Uce(p,u,d,r,c,l,h,e),r.push(d)}),r};function $mt(i,e,t,n,s,r,a,o,l){t.isTotal=!0;const{valueField:c,startAs:u,endAs:h,total:d}=o,p=[],f=[];if(i.forEach(C=>{l(C)?f.push(C):p.push(C)}),f.length===i.length){const C=Uce([i[0]],e,t,n,s,r,a,o);return f.forEach(w=>{w[u]=i[0][u],w[h]=i[0][h],w[c]=i[0][c]}),C}const g=f[0];let{start:m,end:y}=Wce(g,t,n,s,d);t.start=m,t.end=y;let b=m,x=m,S=y-m;return p.forEach(C=>{const w=+C[c];w>=0?(C[u]=+b,b=al(b,w)):(C[u]=+x,x=al(x,w)),C[h]=al(C[u],w),m=al(m,w),S=tD(S,w)}),f.forEach(C=>{C[u]=+m,C[h]=al(C[u],S),C[c]=S}),Object.assign(Object.assign({},t),{lastIndex:e})}function Uce(i,e,t,n,s,r,a,o){const{valueField:l,startAs:c,endAs:u,total:h,seriesField:d,seriesFieldName:p}=o;return i.forEach(f=>{let g=!1;if(h&&h.type!=="end"){if((h.type==="field"||h.type==="custom")&&f[h.tagField]){g=!0;const{start:m,end:y}=Wce(f,t,n,s,h);f[c]=m,f[u]=y,f[l]=y-m,t.start=m,t.end=y}}else a===r.length-1&&(t.start=0,f[c]=t.start,f[u]=t.end,g=!0);if(!g){const m=+f[l];m>=0?(f[c]=+t.positive,t.positive=al(t.positive,m)):(f[c]=+t.negative,t.negative=al(t.negative,m)),f[u]=al(f[c],m),t.end=al(t.end,m)}t.isTotal=g,(B(d)||d===kT)&&(f[kT]=g?p.total:+f[l]>=0?p.increase:p.decrease)}),Object.assign(Object.assign({},t),{lastIndex:e})}function Wce(i,e,t,n,s){return s&&s.type!=="end"?s.type==="field"||s.type==="custom"?s.type==="custom"?Hmt(i,n,s):s.collectCountField&&!B(i[s.collectCountField])?Vmt(i,t,e,s):Umt(i,e,s):{start:0,end:0}:zmt(e)}function zmt(i){return{start:0,end:i.end}}function Hmt(i,e,t){return t.product(i,e)}function Vmt(i,e,t,n){let s=0,r=t.end;const a=e.length-+i[n.collectCountField],o=e.length-1;return a<0?Yr("total.collectCountField error"):s=e[a].start,o<0?Yr("total.collectCountField error"):r=e[o].end,{start:s,end:r}}function Umt(i,e,t){let n=0,s=e.end;return t.startField&&!B(i[t.startField])&&(n=+i[t.startField]),t.valueField&&!B(i[t.valueField])&&(s=al(n,+i[t.valueField])),{start:n,end:s}}const Wmt=(i,e)=>{if(!i)return i;const{indexField:t,valueField:n,total:s,seriesField:r}=e,a={[t]:(s==null?void 0:s.text)||"total",[n]:i.reduce((o,l)=>al(o,+l[n]),0)};return r&&(a[r]="total"),i.push(a),i},Gmt={type:"fadeIn"},Kmt={type:"growCenterIn"};function Xmt(i,e){switch(e){case"fadeIn":return Gmt;case"scaleIn":return Kmt;default:return Xx(i,!1)}}const Ymt=()=>{X.registerAnimation("waterfall",(i,e)=>({appear:Xmt(i,e),enter:Xx(i,!1),exit:Fy(i,!1),disappear:Fy(i,!1)}))};class w1 extends Rs{constructor(){super(...arguments),this.type=w1.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{x1:0,y1:0})}}w1.type="rule";const R0=()=>{X.registerMark(w1.type,w1),m4()},qmt=Object.assign(Object.assign({},I4),{leaderLine:{name:"leaderLine",type:"rule"},stackLabel:{name:"stackLabel",type:"text"}}),Zmt=(i,e)=>{if(!e.fields)return i;const t={};return{dimensionValues:t,dimensionData:Gce(i.map(n=>n.latestData).flat(),e.fields,t)}};function Gce(i,e,t){if(e.length===0)return i;const n=e[0],s=e.slice(1);t[n]=new Set;const r=Jmt(i,n,t[n]);return s.length?Qmt(r,(a,o)=>Gce(a,s,t)):r}function Jmt(i,e,t){const n={};return i.forEach(s=>{const r=s[e];n[r]||(n[r]=[],t.add(r)),n[r].push(s)}),n}function Qmt(i,e){return Object.keys(i).reduce((t,n)=>(t[n]=e(i[n],n),t),{})}class eyt{get fields(){return this._fields}get groupData(){return this._groupData}constructor(e){this._fields=[],this._fields=e}initData(e,t){const n=e.name,s=new Rt(t instanceof Td?t:e.dataSet);s.name=n,s.parse([e],{type:"dataview"}),Fe(t,"dimensionTree",Zmt),s.transform({type:"dimensionTree",options:{fields:this._fields}},!1),s.target.addListener("change",this.groupDataUpdate.bind(this)),this._groupData=s}groupDataUpdate(){}getGroupValueInField(e){var t,n,s;const r=(s=(n=(t=this.groupData)===null||t===void 0?void 0:t.latestData)===null||n===void 0?void 0:n.dimensionValues)===null||s===void 0?void 0:s[e];return r?Array.from(r):[]}}class Kce extends BO{constructor(){super(...arguments),this._supportStack=!1}_transformLabelSpec(e){this._addMarkLabelSpec(e,"bar"),this._addMarkLabelSpec(e,"bar","stackLabel","initStackLabelMarkStyle")}}const uX={rect:hX,symbol:Xce,arc:dX,point:ryt,"line-data":iyt,stackLabel:Yce,line:pX,area:pX,rect3d:hX,arc3d:dX,treemap:lyt,venn:cyt};function tyt(i,e){var t;const{labelSpec:n}=e;n.overlap&&!Ke(n.overlap)&&(n.overlap={});const s=(t=uX[i])!==null&&t!==void 0?t:uX.point;return e.series.type===re.sankey?uyt(e):s(e)}function B4(i,e,t,n){var s;const{labelMark:r,series:a}=i,o={text:e[a.getMeasureField()[0]],data:e,textType:(s=i.labelSpec.textType)!==null&&s!==void 0?s:"text"},l=Object.keys(r.stateStyle.normal);for(const c of l){const u=r.getAttribute(c,e);o[c]=u}if(a.type!==re.sankey){const{formatFunc:c,args:u}=Pc(t,n,o.text,e);c&&(o._originText=o.text,o.text=c(...u,{series:a}))}return o}function NO(i){return ee(i)?e=>i(e.data):i}function Xce(i){var e,t,n;const{series:s,labelSpec:r}=i,a=s.direction==="horizontal"?"right":"top",o=(e=NO(r.position))!==null&&e!==void 0?e:a;let l;return l=r.overlap!==!1&&{strategy:(n=(t=r.overlap)===null||t===void 0?void 0:t.strategy)!==null&&n!==void 0?n:nyt(),avoidBaseMark:o!=="center"},{position:o,overlap:l}}function iyt(i){const e=Xce(i);return Ui(e.overlap)||(e.overlap.avoidBaseMark=!1),e}function nyt(){return[{type:"position",position:["top","bottom","right","left","top-right","top-left","bottom-left","bottom-right"]}]}function hX(i){var e,t,n,s,r,a;const{series:o,labelSpec:l={}}=i,c=(e=NO(l.position))!==null&&e!==void 0?e:"outside",u=(t=o.direction)!==null&&t!==void 0?t:"vertical",h=o.direction==="horizontal"?(n=o.getXAxisHelper())===null||n===void 0?void 0:n.isInverse():(s=o.getYAxisHelper())===null||s===void 0?void 0:s.isInverse();let d,p=c;p=g=>{var m;const{data:y}=g,b=(m=typeof l.position=="function"?l.position(y):l.position)!==null&&m!==void 0?m:"outside";if(b==="outside"){const x=o.getMeasureField()[0],S={vertical:["top","bottom"],horizontal:["right","left"]},C=(y==null?void 0:y[x])>=0&&h||(y==null?void 0:y[x])<0&&!h?1:0;return S[u][C]}return b},d=l.overlap!==!1&&{strategy:(a=(r=l.overlap)===null||r===void 0?void 0:r.strategy)!==null&&a!==void 0?a:syt(o)};let f=!1;return be(c)&&c.includes("inside")&&(f=!0),{position:p,overlap:d,smartInvert:f}}function syt(i){return[{type:"position",position:e=>{var t,n;const{data:s}=e,r=i.getMeasureField()[0];return(i.direction==="horizontal"?!((t=i.getXAxisHelper())===null||t===void 0)&&t.isInverse():!((n=i.getYAxisHelper())===null||n===void 0)&&n.isInverse())?(s==null?void 0:s[r])>=0?i.direction==="horizontal"?["left","inside-left"]:["bottom","inside-bottom"]:i.direction==="horizontal"?["right","inside-right"]:["top","inside-top"]:(s==null?void 0:s[r])>=0?i.direction==="horizontal"?["right","inside-right"]:["top","inside-top"]:i.direction==="horizontal"?["left","inside-left"]:["bottom","inside-bottom"]}}]}function ryt(i){const{labelSpec:e}=i;let t;return t=e.overlap!==!1&&{avoidBaseMark:!1},{position:"center",overlap:t}}function dX(i){var e;const{labelSpec:t}=i,n=(e=NO(t.position))!==null&&e!==void 0?e:"outside",s=n;let r;return r=t.smartInvert?t.smartInvert:be(n)&&n.includes("inside"),{position:s,smartInvert:r}}function ayt(i,e,t,n){return e.direction==="horizontal"?t==="middle"?.5*(e.totalPositionX(i,"end")+e.totalPositionY(i,"start")):t==="max"?e.totalPositionX(i,i.end>=i.start?"end":"start")+n:t==="min"?e.totalPositionX(i,i.end>=i.start?"start":"end")-n:e.totalPositionX(i,"end")+(i.end>=i.start?n:-n):e.totalPositionX(i,"index",.5)}function oyt(i,e,t,n){return e.direction==="horizontal"?e.totalPositionY(i,"index",.5):t==="middle"?.5*(e.totalPositionY(i,"end")+e.totalPositionY(i,"start")):t==="max"?e.totalPositionY(i,i.end>=i.start?"end":"start")-n:t==="min"?e.totalPositionY(i,i.end>=i.start?"start":"end")+n:e.totalPositionY(i,"end")+(i.end>=i.start?-n:n)}function Yce(i,e,t){const n=i.series,s=i.labelSpec||{},r=n.getTotalData();return{customLayoutFunc:a=>a.map(o=>{const l=s.position||"withChange",c=s.offset||0,u=e?e(o.data):o.data,h=B4(i,u,s.formatMethod);return h.x=ayt(u,n,l,c),h.y=oyt(u,n,l,c),n.direction==="horizontal"?h.textAlign=l==="middle"?"center":l==="withChange"&&u.end-u.start>=0||l==="max"?"left":"right":h.textBaseline=l==="middle"?l:l==="withChange"&&u.end-u.start>=0||l==="max"?"bottom":"top",t==null||t(o,u,h),Cy(Object.assign(Object.assign({},h),{id:o.id}))}),dataFilter:a=>{const o=[];return r.forEach(l=>{const c=a.find(u=>{var h;return l.index===((h=u.data)===null||h===void 0?void 0:h[n.getDimensionField()[0]])});c&&(c.data=l,o.push(c))}),o},overlap:{strategy:[]}}}function lyt(i){return{customLayoutFunc:(e,t)=>t,overlap:!1}}function cyt(i){return{customLayoutFunc:(e,t)=>t,smartInvert:!0}}function pX(i){var e,t,n,s;const{labelSpec:r,series:a}=i,o=(n=(t=(e=a.getViewDataStatistics)===null||e===void 0?void 0:e.call(a).latestData)===null||t===void 0?void 0:t[a.getSeriesField()])===null||n===void 0?void 0:n.values,l=o?o.map((c,u)=>({[a.getSeriesField()]:c,index:u})):[];return{position:(s=r.position)!==null&&s!==void 0?s:"end",data:l}}function uyt(i){var e,t,n;const{series:s,labelSpec:r={}}=i,a=(e=NO(r.position))!==null&&e!==void 0?e:"outside",o=s.direction;let l,c=a;return be(a)&&(o==="vertical"?c=a==="inside-start"?u=>"inside-left":a==="inside-middle"?u=>"center":a==="inside-end"?u=>"inside-right":u=>"bottom":a==="inside-start"?c=u=>"inside-left":a==="inside-middle"?c=u=>"center":a==="inside-end"?c=u=>"inside-right":a==="outside"&&(c=u=>"right")),l=r.overlap!==!1&&(!be(a)||!a.includes("inside"))&&{strategy:(n=(t=r.overlap)===null||t===void 0?void 0:t.strategy)!==null&&n!==void 0?n:hyt(s)},{position:c,overlap:l,smartInvert:!1,offset:0,syncState:!0}}function hyt(i){return[{type:"position",position:e=>i.direction==="horizontal"?["right","left"]:["bottom","top"]}]}class Gp extends bl{constructor(){super(...arguments),this.type=re.waterfall,this.transformerConstructor=Kce,this._leaderLineMark=null,this._stackLabelMark=null,this._labelMark=null}getTotalData(){var e;return(e=this._totalData)===null||e===void 0?void 0:e.getLatestData()}initGroups(){const e=this.getGroupFields();e&&e.length&&(this._groups=new eyt(e),this._data&&this._groups.initData(this._data.getDataView(),this._dataSet))}setAttrFromSpec(){super.setAttrFromSpec(),this.setValueFieldToStack(),this._fieldX=[this._fieldX[0]],this._fieldY=[this._fieldY[0]],B(this._seriesField)&&(this._seriesField=kT)}getSeriesKeys(){return this._seriesField===kT?[this._theme.seriesFieldName.increase,this._theme.seriesFieldName.decrease,this._theme.seriesFieldName.total]:super.getSeriesKeys()}initData(){var e;super.initData(),Fe(this._dataSet,"waterfallFillTotal",Wmt),Fe(this._dataSet,"waterfall",Nmt),(B(this._spec.total)||this._spec.total.type==="end")&&((e=this._rawData)===null||e===void 0||e.transform({type:"waterfallFillTotal",options:{indexField:this.getGroupFields()[0],valueField:this.getStackValueField(),seriesField:this.getSeriesField(),seriesFieldName:this._theme.seriesFieldName,total:this._spec.total}},!1));const t=mB(this.getViewData(),this._dataSet,{name:`${Ie}_series_${this.id}_totalData`});this.getViewData().target.removeListener("change",t.reRunAllTransform),this._totalData=new Oc(this._option,t),t.transform({type:"waterfall",options:{indexField:this.getGroupFields()[0],valueField:this.getStackValueField(),seriesField:this.getSeriesField(),seriesFieldName:this._theme.seriesFieldName,startAs:To,endAs:Zr,total:this._spec.total,groupData:()=>this.getGroups().groupData}},!1)}compileData(){var e;super.compileData(),(e=this._totalData)===null||e===void 0||e.compile()}initAnimation(){var e,t,n,s;const r={yField:this.direction==="horizontal"?this._fieldY[0]:this.getStackValueField(),xField:this.direction==="horizontal"?this.getStackValueField():this._fieldX[0],direction:this.direction,growFrom:()=>{var l,c;return this.direction==="horizontal"?(l=this._xAxisHelper)===null||l===void 0?void 0:l.getScale(0).scale(0):(c=this._yAxisHelper)===null||c===void 0?void 0:c.getScale(0).scale(0)}},a=(t=(e=this._spec)===null||e===void 0?void 0:e.animationAppear)===null||t===void 0?void 0:t.preset,o=Yd(this);this._barMark.setAnimationConfig(ft((n=X.getAnimationInKey("waterfall"))===null||n===void 0?void 0:n(r,a),kt("bar",this._spec,this._markAttributeContext),o)),this._leaderLineMark&&this._leaderLineMark.setAnimationConfig(ft((s=X.getAnimationInKey("fadeInOut"))===null||s===void 0?void 0:s(),kt("leaderLine",this._spec,this._markAttributeContext)))}viewDataUpdate(e){this._totalData.getDataView().reRunAllTransform(),this._totalData.updateData(),super.viewDataUpdate(e)}addViewDataFilter(e){}reFilterViewData(){}onEvaluateEnd(e){super.onEvaluateEnd(e),this._totalData.updateData()}initMark(){var e,t;super.initMark();const n=this._createMark(Gp.mark.leaderLine,{key:"index",stateSort:(e=this._spec.leaderLine)===null||e===void 0?void 0:e.stateSort},{setCustomizedShape:(t=this._spec.leaderLine)===null||t===void 0?void 0:t.customShape});n&&(this._leaderLineMark=n,n.setDataView(this._totalData.getDataView(),this._totalData.getProductId()))}initLabelMarkStyle(e){var t;if(e)return!this._labelMark&&(!((t=this._spec.label)===null||t===void 0)&&t.visible)?(super.initLabelMarkStyle(e),void(this._labelMark=e)):void 0}initStackLabelMarkStyle(e){e&&(this._stackLabelMark=e,e.skipEncode=!0,e.setRule("stackLabel"),e.setDataView(this._totalData.getDataView(),this._totalData.getProductId()),this.setMarkStyle(e,{text:t=>{var n;return((n=this._spec.stackLabel)===null||n===void 0?void 0:n.valueType)==="absolute"?t.end:tD(t.end,t.start)}}))}initTotalLabelMarkStyle(e){this.setMarkStyle(e,{text:t=>{var n;return"end"in t?((n=this._spec.totalLabel)===null||n===void 0?void 0:n.valueType)==="absolute"?t.end:tD(t.end,t.start):this.direction==="horizontal"?t[this._fieldX[0]]:t[this._fieldY[0]]}})}getTotalLabelComponentStyle(e){return Yce(Object.assign(Object.assign({},e),{series:this,labelSpec:this._spec.totalLabel}),t=>{const n=this.direction==="vertical"?t[this._fieldX[0]]:t[this._fieldY[0]];return this._totalData.getLatestData().find(s=>s.index===n)})}totalPositionX(e,t,n=.5){const{dataToPosition:s,getBandwidth:r}=this._xAxisHelper;return this._direction==="horizontal"?Kt(s([e[t]],{bandPosition:this._bandPosition})):s([e[t]],{bandPosition:this._bandPosition})+.5*r(0)-this._barMark.getAttribute("width",e)*(.5-n)}totalPositionY(e,t,n=.5){const{dataToPosition:s,getBandwidth:r}=this._yAxisHelper;return this._direction==="horizontal"?s([e[t]],{bandPosition:this._bandPosition})+.5*r(0)-this._barMark.getAttribute("height",e)*(.5-n):Kt(s([e[t]],{bandPosition:this._bandPosition}))}initMarkStyle(){super.initMarkStyle(),this._leaderLineMark&&(this._direction==="horizontal"?this.setMarkStyle(this._leaderLineMark,{visible:e=>!B(e.lastIndex),x:e=>this.totalPositionX(e,"lastEnd",0),x1:e=>this.totalPositionX(e,e.isTotal?"end":"start",0),y:e=>e.lastIndex?this.totalPositionY(e,"lastIndex",1):0,y1:e=>this.totalPositionY(e,"index",0)},"normal",pe.Series):this.setMarkStyle(this._leaderLineMark,{visible:e=>!B(e.lastIndex),x:e=>e.lastIndex?this.totalPositionX(e,"lastIndex",1):0,x1:e=>this.totalPositionX(e,"index",0),y:e=>this.totalPositionY(e,"lastEnd",0),y1:e=>this.totalPositionY(e,e.isTotal?"end":"start",0)},"normal",pe.Series))}}Gp.type=re.waterfall,Gp.mark=qmt,Gp.transformerConstructor=Kce;const dyt=()=>{R0(),Zu(),Ymt(),Xu(),ea(),Qr(),X.registerSeries(Gp.type,Gp)},A1=`${Ie}_BOX_PLOT_OUTLIER_VALUE`;var li;(function(i){i.OUTLIER="outlier",i.MAX="max",i.MIN="min",i.MEDIAN="median",i.Q1="q1",i.Q3="q3",i.SERIES_FIELD="seriesField"})(li||(li={}));const pyt=(i,e)=>{const t=[],{outliersField:n,dimensionField:s}=e;return(i[0].latestData||[]).forEach(r=>{let a=r[n];ie(a)||(a=[a]),t.push(...a.map(o=>{const l={[A1]:o};return s.forEach(c=>{l[c]=r[c]}),l}))}),t};class fyt extends ar{constructor(){super(...arguments),this.getContentKey=e=>t=>{if(this.isOutlierMark(t))return e===li.OUTLIER?this.series.getOutliersField():e===li.SERIES_FIELD?this.series.getSeriesField():null;switch(e){case li.MIN:return this.series.getMinField();case li.MAX:return this.series.getMaxField();case li.MEDIAN:return this.series.getMedianField();case li.Q1:return this.series.getQ1Field();case li.Q3:return this.series.getQ3Field();case li.SERIES_FIELD:return this.series.getSeriesField()}return null},this.getContentValue=e=>t=>{if(this.isOutlierMark(t))return e===li.OUTLIER?t[A1]:e===li.SERIES_FIELD?t[this.series.getSeriesField()]:null;switch(e){case li.MIN:return t[this.series.getMinField()];case li.MAX:return t[this.series.getMaxField()];case li.MEDIAN:return t[this.series.getMedianField()];case li.Q1:return t[this.series.getQ1Field()];case li.Q3:return t[this.series.getQ3Field()];case li.SERIES_FIELD:return t[this.series.getSeriesField()]}return null},this.shapeColorCallback=e=>this.series.getShaftShape()==="line"?this.series.getMarkInName("boxPlot").getAttribute("stroke",e):this.series.getMarkInName("boxPlot").getAttribute("fill",e),this.getOutlierFillColor=e=>{var t;const n=this.series.getOutliersStyle();return(t=n==null?void 0:n.fill)!==null&&t!==void 0?t:this.series.getMarkInName("outlier").getAttribute("fill",e)},this.isOutlierMark=e=>F(e[A1])}getDefaultContentList(e){return[{key:this.getContentKey(li.OUTLIER),value:this.getContentValue(li.OUTLIER),shapeType:this.shapeTypeCallback,shapeColor:this.getOutlierFillColor,shapeStroke:this.getOutlierFillColor},{key:this.getContentKey(li.MAX),value:this.getContentValue(li.MAX)},{key:this.getContentKey(li.Q3),value:this.getContentValue(li.Q3)},{key:this.getContentKey(li.MEDIAN),value:this.getContentValue(li.MEDIAN)},{key:this.getContentKey(li.Q1),value:this.getContentValue(li.Q1)},{key:this.getContentKey(li.MIN),value:this.getContentValue(li.MIN)},{key:this.getContentKey(li.SERIES_FIELD),value:this.getContentValue(li.SERIES_FIELD)}]}}class k1 extends Rs{constructor(){super(...arguments),this.type=k1.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:2,boxWidth:30,shaftWidth:20,shaftShape:"line"})}_initProduct(e){const t=this.getStyle("shaftShape"),n=this.getVGrammarView(),s=this.getProductId(),r=t==="bar"?"barBoxplot":"boxplot",a=this.getStyle("direction");this._product=n.glyph(r,e??n.rootMark).id(s).configureGlyph({direction:a}),this._compiledProductId=s}}k1.type="boxPlot";const gyt=()=>{X.registerMark(k1.type,k1),Xht(),Jht()},myt=Object.assign(Object.assign({},Wi),{boxPlot:{name:"boxPlot",type:"boxPlot"},outlier:{name:"outlier",type:"symbol"}});class If extends Io{constructor(){super(...arguments),this.type=re.boxPlot}getMinField(){return this._minField}getMaxField(){return this._maxField}getQ1Field(){return this._q1Field}getMedianField(){return this._medianField}getQ3Field(){return this._q3Field}getOutliersField(){return this._outliersField}getShaftShape(){return this._shaftShape}getBoxFillColor(){return this._boxFillColor}getStrokeColor(){return this._strokeColor}getOutliersStyle(){return this._outliersStyle}setAttrFromSpec(){var e,t,n,s,r;super.setAttrFromSpec();const a=(t=(e=this._spec.boxPlot)===null||e===void 0?void 0:e.style)!==null&&t!==void 0?t:{};this._minField=this._spec.minField,this._maxField=this._spec.maxField,this._q1Field=this._spec.q1Field,this._medianField=this._spec.medianField,this._q3Field=this._spec.q3Field,this._outliersField=this._spec.outliersField,this._lineWidth=(n=a.lineWidth)!==null&&n!==void 0?n:2,this._boxWidth=a.boxWidth,this._shaftShape=(s=a.shaftShape)!==null&&s!==void 0?s:"line",this._shaftWidth=a.shaftWidth,this._boxFillColor=a.boxFill,this._strokeColor=a.stroke,this._shaftFillOpacity=this._shaftShape==="bar"?(r=a.shaftFillOpacity)!==null&&r!==void 0?r:.5:void 0,this._outliersStyle=this._spec.outliersStyle}initMark(){const e={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold};this._boxPlotMark=this._createMark(If.mark.boxPlot,{isSeriesMark:!0},e),this._outlierMark=this._createMark(If.mark.outlier,{key:Ps,dataView:this._outlierDataView.getDataView(),dataProductId:this._outlierDataView.getProductId()},e)}initMarkStyle(){var e,t,n,s,r;const a=this._boxPlotMark;if(a){const l={direction:this._direction,lineWidth:this._lineWidth,shaftShape:this._shaftShape,fill:(e=this._boxFillColor)!==null&&e!==void 0?e:this._shaftShape==="line"?"#FFF":this.getColorAttribute(),minMaxFillOpacity:this._shaftFillOpacity,stroke:(t=this._strokeColor)!==null&&t!==void 0?t:this._shaftShape==="line"?this.getColorAttribute():"#000"},c=this._direction==="horizontal"?Object.assign(Object.assign({y:this.dataToPositionY.bind(this)},l),{boxHeight:()=>{var u;return(u=this._boxWidth)!==null&&u!==void 0?u:this._getMarkWidth()},ruleHeight:()=>{var u;return(u=this._shaftWidth)!==null&&u!==void 0?u:this._getMarkWidth()},q1q3Height:()=>{var u;return(u=this._boxWidth)!==null&&u!==void 0?u:this._getMarkWidth()},minMaxHeight:()=>{var u;return(u=this._shaftWidth)!==null&&u!==void 0?u:this._getMarkWidth()}}):Object.assign(Object.assign({x:this.dataToPositionX.bind(this)},l),{boxWidth:()=>{var u;return(u=this._boxWidth)!==null&&u!==void 0?u:this._getMarkWidth()},ruleWidth:()=>{var u;return(u=this._shaftWidth)!==null&&u!==void 0?u:this._getMarkWidth()},q1q3Width:()=>{var u;return(u=this._boxWidth)!==null&&u!==void 0?u:this._getMarkWidth()},minMaxWidth:()=>{var u;return(u=this._shaftWidth)!==null&&u!==void 0?u:this._getMarkWidth()}});this.setMarkStyle(a,c,Ce.STATE_NORMAL,pe.Series)}const o=this._outlierMark;o&&this.setMarkStyle(o,{fill:(s=(n=this._outliersStyle)===null||n===void 0?void 0:n.fill)!==null&&s!==void 0?s:this.getColorAttribute(),size:ye((r=this._outliersStyle)===null||r===void 0?void 0:r.size)?this._outliersStyle.size:10,symbolType:"circle"},Ce.STATE_NORMAL,pe.Series)}initBoxPlotMarkStyle(){var e,t;const n=this._boxPlotMark,s=this._direction==="horizontal"?this._xAxisHelper:this._yAxisHelper;if(n&&s){const{dataToPosition:a}=s,o=(e=s==null?void 0:s.getScale)===null||e===void 0?void 0:e.call(s,0);this.setMarkStyle(n,{min:l=>Kt(a(this.getDatumPositionValues(l,this._minField),{bandPosition:this._bandPosition}),o),q1:l=>Kt(a(this.getDatumPositionValues(l,this._q1Field),{bandPosition:this._bandPosition}),o),median:l=>Kt(a(this.getDatumPositionValues(l,this._medianField),{bandPosition:this._bandPosition}),o),q3:l=>Kt(a(this.getDatumPositionValues(l,this._q3Field),{bandPosition:this._bandPosition}),o),max:l=>Kt(a(this.getDatumPositionValues(l,this._maxField),{bandPosition:this._bandPosition}),o)},Ce.STATE_NORMAL,pe.Series)}const r=this._outlierMark;if(r&&s){const{dataToPosition:a}=s,o=(t=s==null?void 0:s.getScale)===null||t===void 0?void 0:t.call(s,0),l=this._direction==="horizontal"?{y:this.dataToPositionY.bind(this),x:c=>Kt(a(this.getDatumPositionValues(c,A1),{bandPosition:this._bandPosition}),o)}:{x:this.dataToPositionX.bind(this),y:c=>Kt(a(this.getDatumPositionValues(c,A1),{bandPosition:this._bandPosition}),o)};this.setMarkStyle(r,l,Ce.STATE_NORMAL,pe.Series)}}initData(){if(super.initData(),!this._data)return;Fe(this._dataSet,"foldOutlierData",pyt),Fe(this._dataSet,"addVChartProperty",I0);const e=new Rt(this._dataSet,{name:`${this.type}_outlier_${this.id}_data`});e.parse([this.getViewData()],{type:"dataview"}),e.name=`${Ie}_series_${this.id}_outlierData`,e.transform({type:"foldOutlierData",options:{dimensionField:this._direction==="horizontal"?this._fieldY:this._fieldX,outliersField:this._outliersField}}),e.transform({type:"addVChartProperty",options:{beforeCall:Ly.bind(this),call:Of}},!1),this._outlierDataView=new Oc(this._option,e)}compileData(){var e;super.compileData(),(e=this._outlierDataView)===null||e===void 0||e.compile()}init(e){super.init(e),this.initBoxPlotMarkStyle()}_getMarkWidth(){if(this._autoBoxWidth)return this._autoBoxWidth;const e=this._direction==="horizontal"?this._yAxisHelper:this._xAxisHelper,t=this._direction==="horizontal"?this._fieldY:this._fieldX,n=e.getBandwidth(t.length-1)/t.length;return this._autoBoxWidth=n,this._autoBoxWidth}onLayoutEnd(e){super.onLayoutEnd(e),this._autoBoxWidth=null}_initAnimationSpec(e={}){const t=se({},e);return["appear","enter","update","exit","disappear"].forEach(n=>{t[n]&&t[n].type==="scaleIn"?t[n].type=this._shaftShape==="line"?"boxplotScaleIn":"barBoxplotScaleIn":t[n]&&t[n].type==="scaleOut"&&(t[n].type=this._shaftShape==="line"?"boxplotScaleOut":"barBoxplotScaleOut")}),t}initAnimation(){var e,t,n,s,r,a,o;const l=Yd(this);if(this._boxPlotMark){const c=this._initAnimationSpec((e=X.getAnimationInKey("scaleInOut"))===null||e===void 0?void 0:e()),u=this._initAnimationSpec(kt("boxPlot",this._spec,this._markAttributeContext));this._boxPlotMark.setAnimationConfig(ft(c,u,l))}if(this._outlierMark){const c={appear:(t=this._spec.animationAppear)===null||t===void 0?void 0:t.symbol,disappear:(n=this._spec.animationDisappear)===null||n===void 0?void 0:n.symbol,enter:(s=this._spec.animationEnter)===null||s===void 0?void 0:s.symbol,exit:(r=this._spec.animationExit)===null||r===void 0?void 0:r.symbol,update:(a=this._spec.animationUpdate)===null||a===void 0?void 0:a.symbol};this._outlierMark.setAnimationConfig(ft((o=X.getAnimationInKey("scaleInOut"))===null||o===void 0?void 0:o(),c,l))}}initTooltip(){this._tooltipHelper=new fyt(this),this._boxPlotMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._boxPlotMark),this._outlierMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._outlierMark)}getStatisticFields(){const e=super.getStatisticFields(),t=e.find(n=>n.key===this._outliersField);return t&&(t.operations=["array-min","array-max"]),e}onEvaluateEnd(e){super.onEvaluateEnd(e),this._outlierDataView.updateData()}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._boxPlotMark]}}If.type=re.boxPlot,If.mark=myt;const yyt=()=>{gyt(),qu(),IO(),ea(),Qr(),X.registerSeries(If.type,If)};class By extends Rs{getTextType(){return this._textType}constructor(e,t){super(e,t),this.type=By.type,this._textType="text"}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{angle:0,textAlign:"center",lineWidth:0,textConfig:[]})}initStyleWithSpec(e,t){super.initStyleWithSpec(e,t),e.textType&&(this._textType=e.textType)}compileEncode(){super.compileEncode(),this._textType==="rich"&&this._product.encodeState("group",{textType:this._textType})}}By.type="text";const ta=()=>{X.registerMark(By.type,By),kle(),Hht()};function fX(i,e,t,n,s,r,a,o,l){i.setMarkStyle(e,{textAlign:c=>{if(l()==="vertical")return"center";const u=s(c),h=r(c);if(t==="middle")return"center";if(u>=h){if(t==="start")return"left";if(t==="end")return"right";if(t==="outside")return"left"}else{if(t==="start")return"right";if(t==="end")return"left";if(t==="outside")return"right"}return"center"},textBaseline:c=>{if(l()==="horizontal")return"middle";const u=a(c),h=o(c);if(t==="middle")return"middle";if(h>=u){if(t==="start")return"bottom";if(t==="end")return"top";if(t==="outside")return"bottom"}else{if(t==="start")return"top";if(t==="end")return"bottom";if(t==="outside")return"top"}return"middle"}}),i.setMarkStyle(e,{x:c=>{const u=l(),h=s(c),d=r(c);if(u==="vertical"||t==="middle")return(h+d)/2;if(h>=d){if(t==="start")return d+n;if(t==="end")return h-n;if(t==="outside")return h+n}else{if(t==="start")return d-n;if(t==="end")return h+n;if(t==="outside")return h-n}return(h+d)/2},y:c=>{const u=l(),h=a(c),d=o(c);if(u==="horizontal"||t==="middle")return(h+d)/2;if(h>=d){if(t==="start")return d+n;if(t==="end")return h-n;if(t==="outside")return h+n}else{if(t==="start")return d-n;if(t==="end")return h+n;if(t==="outside")return h-n}return(h+d)/2}},"normal",pe.Series)}class _yt extends ar{constructor(){super(...arguments),this._getMeasureData=e=>this.series.getSpec().direction==="horizontal"?e[this.series.getSpec().xField[0]]+"-"+e[this.series.getSpec().xField[1]]:e[this.series.getSpec().yField[0]]+"-"+e[this.series.getSpec().yField[1]]}}const qce=i=>({type:"growCenterIn",options:{direction:i.direction==="horizontal"?"x":"y"}}),vyt={type:"fadeIn"},gX=i=>({type:"growCenterOut",options:{direction:i.direction==="horizontal"?"x":"y"}});function byt(i,e){return e==="fadeIn"?vyt:qce(i)}const xyt=()=>{X.registerAnimation("rangeColumn",(i,e)=>({appear:byt(i,e),enter:qce(i),exit:gX(i),disappear:gX(i)}))},Syt=Object.assign(Object.assign({},I4),{minLabel:{name:"minLabel",type:"text"},maxLabel:{name:"maxLabel",type:"text"}}),Cyt=Object.assign(Object.assign({},Lce),{minLabel:{name:"minLabel",type:"text"},maxLabel:{name:"maxLabel",type:"text"}});class Zce extends BO{constructor(){super(...arguments),this._supportStack=!1}_transformLabelSpec(e){var t;((t=e.label)===null||t===void 0?void 0:t.position)!=="bothEnd"&&this._addMarkLabelSpec(e,"bar")}}class pl extends bl{constructor(){super(...arguments),this.type=re.rangeColumn,this._barMarkType="rect",this._barName=re.bar,this.transformerConstructor=Zce}initMark(){var e,t,n,s,r,a,o,l,c,u;this._initBarBackgroundMark();const h=(e=this._spec.label)===null||e===void 0?void 0:e.position;this._barMark=this._createMark(pl.mark.bar,{groupKey:this._seriesField,isSeriesMark:!0,stateSort:(t=this._spec.bar)===null||t===void 0?void 0:t.stateSort},{setCustomizedShape:(n=this._spec.bar)===null||n===void 0?void 0:n.customShape,morph:Yu(this._spec,pl.mark.bar.name),morphElementKey:this.getDimensionField()[0]}),((s=this._spec.label)===null||s===void 0?void 0:s.visible)!==!1&&h==="bothEnd"&&(((a=(r=this._spec.label)===null||r===void 0?void 0:r.minLabel)===null||a===void 0?void 0:a.visible)!==!1&&(this._minLabelMark=this._createMark(pl.mark.minLabel,{markSpec:(o=this._spec.label)===null||o===void 0?void 0:o.minLabel})),((c=(l=this._spec.label)===null||l===void 0?void 0:l.maxLabel)===null||c===void 0?void 0:c.visible)!==!1&&(this._maxLabelMark=this._createMark(pl.mark.maxLabel,{markSpec:(u=this._spec.label)===null||u===void 0?void 0:u.maxLabel})))}initMarkStyle(){var e,t,n,s,r,a,o,l,c,u;super.initMarkStyle();const h=this._minLabelMark,d=(e=this._spec.label)===null||e===void 0?void 0:e.minLabel;if(h){this.setMarkStyle(h,{fill:(n=(t=d==null?void 0:d.style)===null||t===void 0?void 0:t.fill)!==null&&n!==void 0?n:this.getColorAttribute(),text:y=>{const b=this._spec.direction==="horizontal"?y[this._spec.xField[0]]:y[this._spec.yField[0]];return d!=null&&d.formatMethod?d.formatMethod(b,y):b}});const g=(s=d==null?void 0:d.position)!==null&&s!==void 0?s:"end",m=(r=d==null?void 0:d.offset)!==null&&r!==void 0?r:this._direction==="vertical"?-20:-25;fX(this,h,g,m,y=>this._barMark.getAttribute("x",y),y=>this._direction==="vertical"?this._barMark.getAttribute("x",y)+this._barMark.getAttribute("width",y):this._barMark.getAttribute("x1",y),y=>this._barMark.getAttribute("y",y),y=>this._direction==="vertical"?this._barMark.getAttribute("y1",y):this._barMark.getAttribute("y",y)+this._barMark.getAttribute("height",y),()=>this._direction)}const p=this._maxLabelMark,f=(a=this._spec.label)===null||a===void 0?void 0:a.maxLabel;if(p){this.setMarkStyle(p,{fill:(l=(o=f==null?void 0:f.style)===null||o===void 0?void 0:o.fill)!==null&&l!==void 0?l:this.getColorAttribute(),text:y=>{const b=this._spec.direction==="horizontal"?y[this._spec.xField[1]]:y[this._spec.yField[1]];return f!=null&&f.formatMethod?f.formatMethod(b,y):b}});const g=(c=f==null?void 0:f.position)!==null&&c!==void 0?c:"start",m=(u=f==null?void 0:f.offset)!==null&&u!==void 0?u:this._direction==="vertical"?-20:-25;fX(this,p,g,m,y=>this._barMark.getAttribute("x",y),y=>this._direction==="vertical"?this._barMark.getAttribute("x",y)+this._barMark.getAttribute("width",y):this._barMark.getAttribute("x1",y),y=>this._barMark.getAttribute("y",y),y=>this._direction==="vertical"?this._barMark.getAttribute("y1",y):this._barMark.getAttribute("y",y)+this._barMark.getAttribute("height",y),()=>this._direction)}}initLabelMarkStyle(e){e&&(this.setMarkStyle(e,{text:t=>{let n,s;return this._spec.direction==="horizontal"?(n=t[this._spec.xField[0]],s=t[this._spec.xField[1]]):(n=t[this._spec.yField[0]],s=t[this._spec.yField[1]]),n+"-"+s},z:this._fieldZ?this.dataToPositionZ.bind(this):null}),this._labelMark=e)}_dataToPosX(e){return this._xAxisHelper.dataToPosition(this.getDatumPositionValues(e,this._spec.xField[0]),{bandPosition:this._bandPosition})}_dataToPosX1(e){return this._xAxisHelper.dataToPosition(this.getDatumPositionValues(e,this._spec.xField[1]),{bandPosition:this._bandPosition})}_dataToPosY(e){return this._yAxisHelper.dataToPosition(this.getDatumPositionValues(e,this._spec.yField[0]),{bandPosition:this._bandPosition})}_dataToPosY1(e){return this._yAxisHelper.dataToPosition(this.getDatumPositionValues(e,this._spec.yField[1]),{bandPosition:this._bandPosition})}initAnimation(){var e,t,n,s,r;const a=Yd(this),o=(t=(e=this._spec)===null||e===void 0?void 0:e.animationAppear)===null||t===void 0?void 0:t.preset;this._barMark.setAnimationConfig(ft((n=X.getAnimationInKey("rangeColumn"))===null||n===void 0?void 0:n({direction:this.direction},o),kt("bar",this._spec,this._markAttributeContext),a)),this._minLabelMark&&this._minLabelMark.setAnimationConfig(ft((s=X.getAnimationInKey("fadeInOut"))===null||s===void 0?void 0:s(),kt("label",this._spec,this._markAttributeContext),a)),this._maxLabelMark&&this._maxLabelMark.setAnimationConfig(ft((r=X.getAnimationInKey("fadeInOut"))===null||r===void 0?void 0:r(),kt("label",this._spec,this._markAttributeContext),a))}initTooltip(){this._tooltipHelper=new _yt(this),this._barMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._barMark),this._minLabelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._minLabelMark),this._maxLabelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._maxLabelMark),this._labelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._labelMark)}}pl.type=re.rangeColumn,pl.mark=Syt,pl.transformerConstructor=Zce;const wyt=()=>{Zu(),ta(),xyt(),Xu(),ea(),Qr(),X.registerSeries(pl.type,pl)};class TT extends pl{constructor(){super(...arguments),this.type=re.rangeColumn3d,this._barMarkType="rect3d",this._barName=re.bar3d}}TT.type=re.rangeColumn3d,TT.mark=Cyt;const Ayt=()=>{R4(),ea(),Qr(),X.registerSeries(TT.type,TT)};class kyt extends ar{constructor(){super(...arguments),this._getMeasureData=e=>this.series.getSpec().direction==="horizontal"?e[this.series.getSpec().xField[0]]+"-"+e[this.series.getSpec().xField[1]]:e[this.series.getSpec().yField[0]]+"-"+e[this.series.getSpec().yField[1]]}}const Tyt=Object.assign({},Pce);class jy extends pu{constructor(){super(...arguments),this.type=re.rangeArea}initMark(){var e;const{customShape:t,stateSort:n}=(e=this._spec.area)!==null&&e!==void 0?e:{};this._areaMark=this._createMark(jy.mark.area,{groupKey:this._seriesField,isSeriesMark:!0,stateSort:n},{setCustomizedShape:t,morphElementKey:this.getDimensionField()[0]})}initMarkStyle(){this.initAreaMarkStyle()}initAreaMarkStyle(){const e=this._areaMark;e&&(super.initAreaMarkStyle(),this._direction==="horizontal"?this.setMarkStyle(this._areaMark,{x1:t=>{if(!this._xAxisHelper)return Number.NaN;const{dataToPosition:n}=this._xAxisHelper;return n(this.getDatumPositionValues(t,this._spec.xField[1]),{bandPosition:this._bandPosition})}},"normal",pe.Series):this.setMarkStyle(this._areaMark,{y1:t=>{if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:n}=this._yAxisHelper;return n(this.getDatumPositionValues(t,this._spec.yField[1]),{bandPosition:this._bandPosition})}},"normal",pe.Series),this.setMarkStyle(e,{stroke:!1},"normal",pe.Series))}initTooltip(){this._tooltipHelper=new kyt(this)}_isFieldAllValid(){const e=this.getViewDataStatistics(),t=this.fieldY;return!!(e&&e.latestData&&t.length)&&t.every(n=>e.latestData[n]&&e.latestData[n].allValid)}}jy.type=re.rangeArea,jy.mark=Tyt;const Eyt=()=>{FO(),ea(),Qr(),X.registerSeries(jy.type,jy)};class Yx extends Mf{constructor(){super(...arguments),this.coordinate="polar",this._outerRadius=cT,this._innerRadius=0,this._angleField=[],this._radiusField=[],this._sortDataByAxis=!1}get outerRadius(){return this._outerRadius}get innerRadius(){return this._innerRadius}getAngleField(){return this._angleField}setAngleField(e){return this._angleField=F(e)?q(e):[],this._angleField}getRadiusField(){return this._radiusField}setRadiusField(e){return this._radiusField=F(e)?q(e):[],this._radiusField}get innerRadiusField(){return this._innerRadiusField}setInnerRadiusField(e){return this._innerRadiusField=q(e),this._innerRadiusField}get radiusScale(){return this._radiusScale}setRadiusScale(e){return this._radiusScale=e,e}get angleScale(){return this._angleScale}setAngleScale(e){return this._angleScale=e,e}get angleAxisHelper(){return this._angleAxisHelper}set angleAxisHelper(e){this._angleAxisHelper=e,this.onAngleAxisHelperUpdate()}get radiusAxisHelper(){return this._radiusAxisHelper}set radiusAxisHelper(e){this._radiusAxisHelper=e,this.onRadiusAxisHelperUpdate()}get sortDataByAxis(){return this._sortDataByAxis}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this),this._markAttributeContext.getCenter=()=>this.angleAxisHelper.center(),this._markAttributeContext.getLayoutRadius=()=>this._computeLayoutRadius()}valueToPosition(e,t){if(B(e)||B(t)||!this.angleAxisHelper||!this.radiusAxisHelper)return{x:Number.NaN,y:Number.NaN};const n=this.radiusAxisHelper.dataToPosition(q(t));if(n<0){if(this._invalidType==="break"||this._invalidType==="link")return{x:Number.NaN,y:Number.NaN};if(this._invalidType==="zero")return this.angleAxisHelper.center()}const s=this.angleAxisHelper.dataToPosition(q(e));return this.angleAxisHelper.coordToPoint({angle:s,radius:n})}dataToPosition(e,t){return e&&this.angleAxisHelper&&this.radiusAxisHelper?t&&!this.isDatumInViewData(e)?null:this.valueToPosition(this.getDatumPositionValues(e,this._angleField),this.getDatumPositionValues(e,this._radiusField)):null}dataToPositionX(e){var t;return(t=this.dataToPosition(e))===null||t===void 0?void 0:t.x}dataToPositionY(e){var t;return(t=this.dataToPosition(e))===null||t===void 0?void 0:t.y}dataToPositionZ(e){return 0}positionToData(e){}radiusToData(e){}angleToData(e){}getStatisticFields(){var e,t;const n=[];return!((e=this.radiusAxisHelper)===null||e===void 0)&&e.getScale&&this._radiusField.forEach(s=>{const r={key:s,operations:[]};$t(this.radiusAxisHelper.getScale(0).type)?r.operations=["max","min"]:r.operations=["values"],n.push(r)}),!((t=this.angleAxisHelper)===null||t===void 0)&&t.getScale&&this._angleField.forEach(s=>{const r={key:s,operations:[]};$t(this.angleAxisHelper.getScale(0).type)?r.operations=["max","min"]:r.operations=["values"],n.push(r)}),n}setAttrFromSpec(){super.setAttrFromSpec(),F(this._spec.outerRadius)&&(this._outerRadius=this._spec.outerRadius),F(this._spec.radius)&&(this._outerRadius=this._spec.radius),F(this._spec.innerRadius)&&(this._innerRadius=this._spec.innerRadius),F(this._spec.sortDataByAxis)&&(this._sortDataByAxis=this._spec.sortDataByAxis===!0)}onRadiusAxisHelperUpdate(){this.onMarkPositionUpdate()}onAngleAxisHelperUpdate(){this.onMarkPositionUpdate()}afterInitMark(){super.afterInitMark()}_computeLayoutRadius(){const e=this._angleAxisHelper||this._radiusAxisHelper;if(e)return e.layoutRadius();const{width:t,height:n}=this._region.getLayoutRect();return Math.min(t/2,n/2)}initEvent(){super.initEvent(),this.sortDataByAxis&&this.event.on(ke.scaleDomainUpdate,{filter:e=>{var t;return e.model.id===((t=this._angleAxisHelper)===null||t===void 0?void 0:t.getAxisId())}},()=>{this._sortDataInAxisDomain()})}_sortDataInAxisDomain(){var e,t;!((t=(e=this.getViewData())===null||e===void 0?void 0:e.latestData)===null||t===void 0)&&t.length&&bce(this.angleAxisHelper,this._angleField[0],this.getViewData().latestData)}getInvalidCheckFields(){const e=[];return this.angleAxisHelper.isContinuous&&this._angleField.forEach(t=>{e.push(t)}),this.radiusAxisHelper.isContinuous&&this._radiusField.forEach(t=>{e.push(t)}),e}}function ET(i){return Ty(i)?Number.parseFloat(i):0}const Pyt=(i,e)=>{const{asStartAngle:t,asEndAngle:n,asMiddleAngle:s,asRadian:r,asRatio:a,asQuadrant:o,asK:l,showAllZero:c,supportNegative:u,showEmptyCircle:h}=e,d=e.angleField(),p=e.startAngle(),f=e.endAngle(),g=e.minAngle(),m=i.map(O=>Object.assign({},O));if(!m||m.length===0||!c&&h&&Jce(m,d,u))return m;const y=(O,M,R)=>{O[t]=M,O[n]=M+R,O[s]=M+R/2,O[r]=R,O[o]=tse(M+R/2)};let b=0,x=-1/0,S=!0;for(let O=0;O<m.length;O++){const M=u?Math.abs(ET(m[O][d])):ET(m[O][d]);b+=M,x=Math.max(M,x),S&&M!==0&&(S=!1),m[O][NI]=M}const C=m.map(O=>Number(O[d])),w=f-p;let A=p,T=w,E=0;const P=olt(C);if(m.forEach((O,M)=>{const R=O[NI],j=b?R/b:0;let I=j*w;I<g?(I=g,T-=g):E+=R;const D=A,z=A+I;O[a]=j,O[l]=x?R/x:0,O._percent_=P[M],y(O,D,I),A=z}),T<w)if(T<=.001){const O=w/m.length;m.forEach((M,R)=>{y(M,p+R*O,O)})}else{const O=T/E;A=p,m.forEach(M=>{const R=M[r]===g?g:M[NI]*O;y(M,A,R),A+=R})}if(b!==0&&(m[m.length-1][n]=f),S&&c){const O=w/m.length;m.forEach((M,R)=>{y(M,p+R*O,O)})}return m},Jce=(i,e,t)=>!!B(i)||i.length===0||!!i.every(n=>ET(n[e])===0)||!t&&i.reduce((n,s)=>n+ET(s[e]),0)===0;function $O(i,e,t){return(n,s,r)=>e?i.growField==="radius"?{overall:0}:{overall:i.growFrom(n,s,t)}:{overall:!1}}const mX=i=>({type:i.growField==="radius"?"growRadiusIn":"growAngleIn",options:$O(i,!0,wn.appear)}),Oyt={type:"fadeIn"},Qce=i=>({type:i.growField==="radius"?"growRadiusIn":"growAngleIn",easing:"linear",options:$O(i,!0,wn.enter)}),eue=i=>({type:i.growField==="radius"?"growRadiusOut":"growAngleOut",easing:"linear",options:$O(i,!0,wn.exit)}),tue=i=>({type:i.growField==="radius"?"growRadiusOut":"growAngleOut",options:$O(i,!0,wn.exit)});function j4(i,e){if(e===!1)return{};switch(e){case"fadeIn":return Oyt;case"growRadius":return mX(Object.assign(Object.assign({},i),{growField:"radius"}));default:return mX(Object.assign(Object.assign({},i),{growField:"angle"}))}}const Myt=()=>{X.registerAnimation("pie",(i,e)=>({appear:j4(i,e),enter:Qce(i),exit:eue(i),disappear:tue(i)}))},Iyt=()=>{X.registerAnimation("emptyCircle",(i,e)=>({appear:j4(i,e)}))},Ryt=()=>{X.registerAnimation("pie3d",(i,e)=>({appear:j4(i,e),enter:Qce(i),exit:eue(i),disappear:tue(i)}))};function Lyt(i,e){var t,n,s,r;const a=(n=(t=e.options)===null||t===void 0?void 0:t.distance)!==null&&n!==void 0?n:10,o=Z(e.duration)?e.duration/2:1e3,l=(s=e.options.easing)!==null&&s!==void 0?s:"cubicOut";return{oneByOne:e.oneByOne,loop:(r=e.loop)!==null&&r!==void 0&&r,timeSlices:[{duration:o,effects:{easing:l,channel:{x:{from:c=>i.getAttribute("x",c),to:c=>i.getAttribute("x",c)+ui({x:0,y:0},a,c[du]).x},y:{from:c=>i.getAttribute("y",c),to:c=>i.getAttribute("y",c)+ui({x:0,y:0},a,c[du]).y}}}},{duration:o,effects:{easing:l,channel:{x:{to:c=>i.getAttribute("x",c),from:c=>i.getAttribute("x",c)+ui({x:0,y:0},a,c[du]).x},y:{to:c=>i.getAttribute("y",c),from:c=>i.getAttribute("y",c)+ui({x:0,y:0},a,c[du]).y}}}}]}}class iue extends Rs{constructor(e,t){super(e,t),this.type=Ny.type,this._unCompileChannel={centerOffset:!0,radiusOffset:!0},this.computeOuterRadius=(n,s,r="normal",a,o)=>{var l;return o+((l=this.getAttribute("radiusOffset",s,r,a))!==null&&l!==void 0?l:0)},this.computeCenter=(n,s,r="normal",a,o)=>ui({x:0,y:0},this.getAttribute("centerOffset",s,r,a),s[du])[n]+o,this._computeExChannel.x=this.computeCenter,this._computeExChannel.y=this.computeCenter,this._computeExChannel.outerRadius=this.computeOuterRadius,this._extensionChannel.centerOffset=["x","y"],this._extensionChannel.radiusOffset=["outerRadius"]}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{startAngle:0,endAngle:0,outerRadius:0,innerRadius:0,cornerRadius:0,lineWidth:0,innerPadding:0,outerPadding:0})}}class Ny extends iue{constructor(){super(...arguments),this.type=Ny.type}}Ny.type="arc";const rg=()=>{Rht(),yce(),X.registerMark(Ny.type,Ny)},Dyt=Object.assign(Object.assign({},Wi),{pie:{name:"pie",type:"arc"},labelLine:{name:"labelLine",type:"path"}}),Fyt=Object.assign(Object.assign({},Wi),{pie3d:{name:"pie3d",type:"arc3d"},labelLine:{name:"labelLine",type:"path"}});class N4 extends or{_transformLabelSpec(e){this._addMarkLabelSpec(e,"pie")}_mergeThemeToSpec(e,t){const n=this._theme;let s=e;if(this._shouldMergeThemeToSpec()){const r=this._getDefaultSpecFromChart(t);s=Pe({},this._theme,r,e);const a=(o,l)=>Pe({},o==="inside"||o==="inside-center"?this._theme.innerLabel:this._theme.outerLabel,l);ie(s.label)?s.label=s.label.map(o=>a(o.position,o)):s.label=a(s.label.position,s.label)}return{spec:s,theme:n}}_getDefaultSpecFromChart(e){var t;const n=(t=super._getDefaultSpecFromChart(e))!==null&&t!==void 0?t:{},{centerX:s,centerY:r}=e;return F(s)&&(n.centerX=s),F(r)&&(n.centerY=r),Object.keys(n).length>0?n:void 0}}const Byt=`${Ie}_LABEL_VISIBLE`,jyt=(i,e)=>{var t,n,s,r,a,o;const l=(t=i.type)!==null&&t!==void 0?t:i.orient==="angle"?"band":"linear",c=`${oe.polarAxis}-${l}`,u=(n=i.startAngle)!==null&&n!==void 0?n:e.startAngle,h=(s=i.endAngle)!==null&&s!==void 0?s:e.endAngle;return{axisType:l,componentName:c,startAngle:u??o4,endAngle:h??(F(u)?u+360:qoe),center:F(e.center)?e.center:F(e==null?void 0:e.centerX)||F(e==null?void 0:e.centerY)?{x:e==null?void 0:e.centerX,y:e==null?void 0:e.centerY}:void 0,outerRadius:(o=(a=(r=i.outerRadius)!==null&&r!==void 0?r:i.radius)!==null&&a!==void 0?a:e.outerRadius)!==null&&o!==void 0?o:e.radius,layoutRadius:e.layoutRadius}},nue=(i,e,t,n)=>{const s=i();if(ye(s))return s;if(ee(s))return s(e(),t());const r=e();if(s==="auto"&&r.width>0&&r.height>0){const{startAngle:a=0,endAngle:o=2*Math.PI}=n();return wKe(r,t(),a,o)}return Math.min(r.width/2,r.height/2)};class $y extends Yx{constructor(){super(...arguments),this.transformerConstructor=N4,this._pieMarkName="pie",this._pieMarkType="arc",this.getCenter=()=>{var e,t;const n=this._region.getLayoutRect();return{x:Un((e=this._spec)===null||e===void 0?void 0:e.centerX,n.width,n,n.width/2),y:Un((t=this._spec)===null||t===void 0?void 0:t.centerY,n.height,n,n.height/2)}},this._startAngle=yO,this._endAngle=a4,this._pieMark=null,this._labelMark=null,this._labelLineMark=null,this._emptyArcMark=null,this.dataToCentralPosition=e=>{const t=e[du];if(B(t))return null;const n=this.computeDatumRadius(e),s=this.computeDatumInnerRadius(e),r=this.computeCenter(e);return ui(r,(n+s)/2,t)}}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.getCenter=()=>({x:()=>this.getCenter().x,y:()=>this.getCenter().y}),this._markAttributeContext.startAngleScale=e=>this.startAngleScale(e),this._markAttributeContext.endAngleScale=e=>this.endAngleScale(e)}setAttrFromSpec(){var e,t,n,s,r,a;super.setAttrFromSpec(),this._centerOffset=(e=this._spec.centerOffset)!==null&&e!==void 0?e:0,this._cornerRadius=(t=this._spec.cornerRadius)!==null&&t!==void 0?t:0;const o=tlt(F(this._spec.startAngle)?zt(this._spec.startAngle):this._startAngle,F(this._spec.endAngle)?zt(this._spec.endAngle):this._endAngle);this._startAngle=o.startAngle,this._endAngle=o.endAngle,this._padAngle=F(this._spec.padAngle)?zt(this._spec.padAngle):0,this.setAngleField(this._spec.valueField||this._spec.angleField),this._spec.categoryField&&this.setSeriesField(this._spec.categoryField),this._radiusField=[],this._specAngleField=this._angleField.slice(),this._specRadiusField=[],this._showEmptyCircle=(s=(n=this._spec.emptyPlaceholder)===null||n===void 0?void 0:n.showEmptyCircle)!==null&&s!==void 0&&s,this._showAllZero=(r=this._spec.showAllZero)!==null&&r!==void 0&&r,this._supportNegative=(a=this._spec.supportNegative)!==null&&a!==void 0&&a}initData(){super.initData();const e=this.getViewData();if(!e)return;Fe(this._dataSet,"pie",Pyt),e.transform({type:"pie",options:{angleField:()=>this._angleField[0],startAngle:()=>this._startAngle,endAngle:()=>this._endAngle,minAngle:()=>F(this._spec.minAngle)?zt(this._spec.minAngle):0,asStartAngle:zG,asEndAngle:HG,asRatio:zlt,asMiddleAngle:du,asRadian:Ult,asQuadrant:Vlt,asK:Hlt,showAllZero:this._showAllZero,supportNegative:this._supportNegative,showEmptyCircle:this._showEmptyCircle}},!1);const t=new Rt(this._dataSet,{name:`${Ie}_series_${this.id}_viewDataLabel`});t.parse([this.getViewData()],{type:"dataview"}),this._viewDataLabel=new Oc(this._option,t)}compileData(){var e;super.compileData(),(e=this._viewDataLabel)===null||e===void 0||e.compile()}initMark(){var e,t;this._pieMark=this._createMark(Object.assign(Object.assign({},$y.mark.pie),{name:this._pieMarkName,type:this._pieMarkType}),{key:kl,groupKey:this._seriesField,skipBeforeLayouted:!0,isSeriesMark:!0,stateSort:(e=this._spec.pie)===null||e===void 0?void 0:e.stateSort},{setCustomizedShape:(t=this._spec.pie)===null||t===void 0?void 0:t.customShape,morph:Yu(this._spec,this._pieMarkName),morphElementKey:this._seriesField}),this._showEmptyCircle&&(this._emptyArcMark=this._createMark({name:"emptyCircle",type:"arc"},{dataView:!1}))}startAngleScale(e){return lw(zG)(e)}endAngleScale(e){return lw(HG)(e)}_computeLayoutRadius(){return nue(()=>this._spec.layoutRadius,this.getLayoutRect,this.getCenter,()=>({startAngle:this._startAngle,endAngle:this._endAngle}))}initMarkStyle(){const e={x:()=>this.getCenter().x,y:()=>this.getCenter().y,fill:this.getColorAttribute(),outerRadius:jG(this._outerRadius)?this._outerRadius:()=>this._computeLayoutRadius()*this._outerRadius,innerRadius:jG(this._innerRadius)?this._innerRadius:()=>this._computeLayoutRadius()*this._innerRadius,cornerRadius:()=>this._computeLayoutRadius()*this._cornerRadius,startAngle:s=>this.startAngleScale(s),endAngle:s=>this.endAngleScale(s),padAngle:this._padAngle,centerOffset:this._centerOffset},t=this._pieMark;t&&this.setMarkStyle(t,e,"normal",pe.Series);const n=this._emptyArcMark;n&&this.setMarkStyle(n,Object.assign(Object.assign({},e),{visible:()=>{const s=this.getAngleField()[0];return Jce(this.getViewData().latestData,s,this._supportNegative)}}),"normal",pe.Series)}initInteraction(){this._parseInteractionConfig(this._pieMark?[this._pieMark]:[])}initTooltip(){super.initTooltip(),this._pieMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pieMark)}initMarkStyleWithSpec(e,t,n){if(super.initMarkStyleWithSpec(e,t,n),e.name===this._pieMarkName){const s=this.getSpec()[e.name];if(s)for(const r in s.state||{})this.setMarkStyle(e,this.generateRadiusStyle(s.state[r]),r,pe.User_Mark)}e.name==="emptyCircle"&&this.setMarkStyle(e,this.generateRadiusStyle(t.style),"normal",pe.User_Mark)}initLabelMarkStyle(e){e&&this.setMarkStyle(e,{visible:lw(Byt).bind(this),text:t=>t[this.getDimensionField()[0]],fill:this.getColorAttribute(),z:this.dataToPositionZ.bind(this)})}afterInitMark(){super.afterInitMark()}initEvent(){var e;super.initEvent(),(e=this._viewDataLabel.getDataView())===null||e===void 0||e.target.addListener("change",this.viewDataLabelUpdate.bind(this))}initGroups(){}onLayoutEnd(e){this._viewDataLabel.getDataView().reRunAllTransform(),this.onMarkPositionUpdate(),super.onLayoutEnd(e)}getDimensionField(){return this._seriesField?[this._seriesField]:[]}getMeasureField(){return this._specAngleField}viewDataLabelUpdate(){this.event.emit(ke.viewDataLabelUpdate,{model:this}),this._viewDataLabel.updateData()}generateRadiusStyle(e){if(!e)return;const t={};return e.outerRadius&&(t.outerRadius=()=>this._computeLayoutRadius()*e.outerRadius),e.innerRadius&&(t.innerRadius=()=>this._computeLayoutRadius()*e.innerRadius),e.cornerRadius&&(t.cornerRadius=()=>this._computeLayoutRadius()*e.cornerRadius),t}computeCenter(e){return{x:this._pieMark.getAttribute("x",e,"normal"),y:this._pieMark.getAttribute("y",e,"normal")}}getRadius(e="normal"){var t,n,s,r,a,o,l;const c=e==="normal"?(s=(n=this.getSpec()[((t=this._pieMark)===null||t===void 0?void 0:t.name)||"pie"])===null||n===void 0?void 0:n.style)===null||s===void 0?void 0:s.outerRadius:(l=(o=(a=this.getSpec()[((r=this._pieMark)===null||r===void 0?void 0:r.name)||"pie"])===null||a===void 0?void 0:a.state)===null||o===void 0?void 0:o[e])===null||l===void 0?void 0:l.outerRadius;return c??this._outerRadius}getInnerRadius(e="normal"){var t,n,s,r,a,o,l;const c=e==="normal"?(s=(n=this.getSpec()[((t=this._pieMark)===null||t===void 0?void 0:t.name)||"pie"])===null||n===void 0?void 0:n.style)===null||s===void 0?void 0:s.innerRadius:(l=(o=(a=this.getSpec()[((r=this._pieMark)===null||r===void 0?void 0:r.name)||"pie"])===null||a===void 0?void 0:a.state)===null||o===void 0?void 0:o[e])===null||l===void 0?void 0:l.innerRadius;return c??this._innerRadius}computeRadius(e,t){return this._computeLayoutRadius()*e*(B(t)?1:t)+this._centerOffset}computeDatumRadius(e,t){return this._computeLayoutRadius()*this.getRadius(t)+this._centerOffset}_compareSpec(e,t,n){n=n??{data:!0};const s=["centerX","centerY","centerOffset","radius","innerRadius","cornerRadius","startAngle","endAngle","padAngle"];s.forEach(a=>{n[a]=!0});const r=super._compareSpec(e,t,n);return e=e??{},s.some(a=>e[a]!==t[a])&&(r.reRender=!0,r.change=!0),r}computeDatumInnerRadius(e,t){return this._computeLayoutRadius()*this.getInnerRadius(t)+this._centerOffset}dataToPosition(e,t){const n=e[du];if(B(n)||t&&!this.isDatumInViewData(e))return null;const s=this.computeDatumRadius(e),r=this.computeCenter(e);return ui(r,s,n)}initAnimation(){var e,t,n;const s={growFrom:(a,o,l)=>{var c;if(l===wn.appear)return this._startAngle;if(l===wn.disappear)return this._endAngle;const u=[wn.disappear,wn.exit],h=o.mark.elements,d=a,p=d==null?void 0:d[Ps];if(h.find(g=>{var m;return((m=g.data[0])===null||m===void 0?void 0:m[Ps])<p})===void 0)return this._startAngle;if(h.find(g=>{var m;return((m=g.data[0])===null||m===void 0?void 0:m[Ps])>p})===void 0)return this._endAngle;const f=[...h].reverse().find(g=>{var m;return((m=g.data[0])===null||m===void 0?void 0:m[Ps])<p});return u.includes(l)?(c=f==null?void 0:f.getNextGraphicAttributes())===null||c===void 0?void 0:c.endAngle:f==null?void 0:f.getGraphicAttribute("endAngle",!0)}},r=(e=this._spec.animationAppear)===null||e===void 0?void 0:e.preset;if(this._pieMark){const a=ft((t=X.getAnimationInKey("pie"))===null||t===void 0?void 0:t(s,r),kt("pie",this._spec,this._markAttributeContext));a.normal&&a.normal.type&&(a.normal=Lyt(this._pieMark,a.normal)),this._pieMark.setAnimationConfig(a)}if(this._emptyArcMark){const a=ft((n=X.getAnimationInKey("emptyCircle"))===null||n===void 0?void 0:n(s,r??"fadeIn"));this._emptyArcMark.setAnimationConfig(a)}}getDefaultShapeType(){return"circle"}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}_noAnimationDataKey(e,t){return t}getActiveMarks(){return[this._pieMark]}}$y.transformerConstructor=N4,$y.mark=Dyt;class SB extends $y{constructor(){super(...arguments),this.type=re.pie}}SB.type=re.pie;const Nyt=()=>{rg(),Myt(),Iyt(),X.registerSeries(SB.type,SB)};class T1 extends iue{constructor(){super(...arguments),this.type=T1.type,this._support3d=!0}}T1.type="arc3d";const sue=()=>{yce(),Lht(),X.registerMark(T1.type,T1)};class rue extends N4{_transformLabelSpec(e){this._addMarkLabelSpec(e,"pie3d")}}class Ev extends $y{constructor(){super(...arguments),this.type=re.pie3d,this._pieMarkName="pie3d",this._pieMarkType="arc3d",this.transformerConstructor=rue}setAttrFromSpec(){var e,t;super.setAttrFromSpec(),this._angle3d=(t=(e=this._spec)===null||e===void 0?void 0:e.angle3d)!==null&&t!==void 0?t:-Math.PI/3}initMarkStyle(){super.initMarkStyle();const e=this._pieMark;e&&this.setMarkStyle(e,{beta:()=>this._angle3d},"normal",pe.Series)}initLabelMarkStyle(e,t={}){if(!e)return;super.initLabelMarkStyle(e);const n={};e.setMarkConfig({support3d:!0}),n.beta=this._angle3d,n.anchor3d=s=>{const{x:r,y:a}=this.getCenter();return[r,a]},n.angle=s=>{const r=s[du];return t.position==="inside"?yy(r):0},this.setMarkStyle(e,Object.assign(Object.assign({},n),{z:100}),void 0,pe.Mark)}}Ev.type=re.pie3d,Ev.mark=Fyt,Ev.transformerConstructor=rue;const $yt=()=>{Ryt(),sue(),X.registerSeries(Ev.type,Ev)},yX=i=>{const e=i.growField==="angle"?0:i.innerRadius;return i.growField==="angle"?{type:i.growField==="angle"?"growAngleIn":"growRadiusIn"}:{channel:{innerRadius:{from:e,to:(t,n)=>{var s;return(s=n.getFinalGraphicAttributes())===null||s===void 0?void 0:s.innerRadius}},outerRadius:{from:e,to:(t,n)=>{var s;return(s=n.getFinalGraphicAttributes())===null||s===void 0?void 0:s.outerRadius}}}}},zyt={type:"fadeIn"},Hyt=i=>({type:i.growField==="angle"?"growAngleIn":"growRadiusIn"}),Vyt=i=>({type:i.growField==="angle"?"growAngleOut":"growRadiusOut"}),Uyt=i=>({type:i.growField==="angle"?"growAngleOut":"growRadiusOut"});function Wyt(i,e){if(e===!1)return{};switch(e){case"fadeIn":return zyt;case"growAngle":return yX(Object.assign(Object.assign({},i),{growField:"angle"}));default:return yX(Object.assign(Object.assign({},i),{growField:"radius"}))}}const Gyt=()=>{X.registerAnimation("rose",(i,e)=>({appear:Wyt(i,e),enter:Hyt(i),exit:Vyt(i),disappear:Uyt(i)}))};class aue extends Yx{getStackGroupFields(){return this._angleField}getStackValueField(){return q(this._spec.valueField)[0]||q(this._spec.radiusField)[0]}getGroupFields(){return this._angleField}setAttrFromSpec(){super.setAttrFromSpec(),this.setAngleField(this._spec.categoryField||this._spec.angleField),this.setRadiusField(this._spec.valueField||this._spec.radiusField),this._specAngleField=this._angleField.slice(),this._specRadiusField=this._radiusField.slice(),this.setInnerRadiusField(this._spec.valueField||this._spec.radiusField),this.getStack()&&this.setValueFieldToStack(),this.getPercent()&&this.setValueFieldToPercent()}setValueFieldToStack(){this.setRadiusField(Zr),this.setInnerRadiusField(To)}setValueFieldToPercent(){this.setRadiusField(Id),this.setInnerRadiusField(xf)}getDimensionField(){return this._specAngleField}getMeasureField(){return this._specRadiusField}getDefaultShapeType(){return"square"}}const Kyt=Object.assign(Object.assign({},Wi),{rose:{name:"rose",type:"arc"}});class oue extends or{constructor(){super(...arguments),this._supportStack=!0}_transformLabelSpec(e){this._addMarkLabelSpec(e,"rose")}}var _X=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};class PT extends M4{get center(){return this._center}get startAngle(){return this._startAngle}get endAngle(){return this._endAngle}getOrient(){return this._orient}getDefaultInteractive(){return this._orient!=="angle"}getGroupScales(){return this._groupScales}static getSpecInfo(e){if(!e[this.specKey])return null;const t=ie(e[this.specKey]),n=t?e[this.specKey]:[e[this.specKey]],s=[];let r,a;const o=[],l=[];return n.forEach((c,u)=>{if(!Tgt(c))return;const{axisType:h,componentName:d,startAngle:p,endAngle:f,center:g,outerRadius:m,layoutRadius:y}=jyt(c,e);c.center=g,c.startAngle=p,c.endAngle=f,c.outerRadius=m,c.type=h,c.layoutRadius=y;const b={spec:c,specPath:t?[this.specKey,u]:[this.specKey],specInfoPath:["component",this.specKey,u],type:d};s.push(b),c.orient==="radius"?(o.push(b),a=u):(l.push(b),r=u)}),o.forEach(c=>{c.angleAxisIndex=r}),l.forEach(c=>{c.radiusAxisIndex=a}),s}static createComponent(e,t){const{spec:n}=e,s=_X(e,["spec"]),r=X.getComponentInKey(s.type);return r?new r(n,Object.assign(Object.assign({},t),s)):(t.onError(`Component ${s.type} not found`),null)}constructor(e,t){super(e,t),this.type=oe.polarAxis,this.name=oe.polarAxis,this._defaultBandPosition=0,this._defaultBandInnerPadding=0,this._defaultBandOuterPadding=0,this.layoutType="absolute",this.layoutZIndex=Xt.Axis,this._tick=void 0,this._center=null,this._startAngle=yO,this._endAngle=a4,this._orient="radius",this._groupScales=[],this.effect={scaleUpdate:n=>{this.computeData(n==null?void 0:n.value),Vi(this._regions,s=>{this.getOrient()==="radius"?ao(s.radiusAxisHelper,this.axisHelper(),F(this._seriesUserId)||F(this._seriesIndex))&&(s.radiusAxisHelper=this.axisHelper()):ao(s.angleAxisHelper,this.axisHelper(),F(this._seriesUserId)||F(this._seriesIndex))&&(s.angleAxisHelper=this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._transformLayoutPosition=n=>{var s;const r=(s=this.getRegions())===null||s===void 0?void 0:s[0];return r?r.getLayoutStartPoint():n},this.getCenter=()=>{var n,s;const r=this.getRefLayoutRect(),{width:a,height:o}=r;return{x:Un((n=this._center)===null||n===void 0?void 0:n.x,a,r,a/2),y:Un((s=this._center)===null||s===void 0?void 0:s.y,o,r,o/2)}},this.getRefLayoutRect=()=>this.getRegions()[0].getLayoutRect(),this._coordinateType="polar"}setAttrFromSpec(){super.setAttrFromSpec(),this.visible&&(this._axisStyle=this._getAxisAttributes(),this._gridStyle=this._getGridAttributes()),this._tick=this._spec.tick,this._orient=this._spec.orient==="angle"?"angle":"radius",this._center=this._spec.center,this._startAngle=zt(this._spec.startAngle),this._endAngle=zt(this._spec.endAngle),this._inverse=this._spec.inverse}onRender(e){}changeRegions(){}_tickTransformOption(){var e;return Object.assign(Object.assign({},super._tickTransformOption()),{noDecimal:(e=this._tick)===null||e===void 0?void 0:e.noDecimals,startAngle:this.startAngle,labelOffset:_1(this._spec),getRadius:()=>this.getOuterRadius(),inside:this._spec.inside})}updateScaleRange(){const e=this._scale.range();let t;return t=this.getOrient()==="radius"?this._inverse?[this.computeLayoutOuterRadius(),this.computeLayoutInnerRadius()]:[this.computeLayoutInnerRadius(),this.computeLayoutOuterRadius()]:this._inverse?[this._endAngle,this._startAngle]:[this._startAngle,this._endAngle],(!e||!t||e[0]!==t[0]||e[1]!==t[1])&&(this._scale.range(t),!0)}collectSeriesField(e,t){var n,s;let r;return r=e>0?(s=(n=t.getGroups())===null||n===void 0?void 0:n.fields)===null||s===void 0?void 0:s[e]:this.getOrient()==="radius"?t.getRadiusField():t.getAngleField(),r}updateSeriesScale(){Vi(this._regions,e=>{this.getOrient()==="radius"?ao(e.radiusAxisHelper,this.axisHelper(),F(this._seriesUserId)||F(this._seriesIndex))&&(e.setRadiusScale(this._scale),e.radiusAxisHelper=this.axisHelper()):ao(e.angleAxisHelper,this.axisHelper(),F(this._seriesUserId)||F(this._seriesIndex))&&(e.setAngleScale(this._scale),e.angleAxisHelper=this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}getSeriesStatisticsField(e){const t=this.getOrient()==="radius"?e.getRadiusField():e.getAngleField();return $t(this._scale.type)?t:[t[0]]}initGroupScales(){}axisHelper(){return{isContinuous:$t(this._scale.type),dataToPosition:this.dataToPosition.bind(this),coordToPoint:this.coordToPoint.bind(this),pointToCoord:this.pointToCoord.bind(this),center:this.getCenter.bind(this),layoutRadius:this._computeLayoutRadius.bind(this),getScale:(e=0)=>this._scales[e],getAxisId:()=>this.id,getSpec:()=>this._spec}}positionToData(e){const t=this.pointToCoord(e);return this.getOrient()==="radius"?this.invert(t.radius):this.invert(t.angle)}coordToPoint(e){const t=this.getCenter();return ui(t,e.radius,e.angle)}pointToCoord(e){const t=this.getCenter(),n=this._startAngle,s=this._endAngle;return jb(e,t,n,s)}getOuterRadius(){return this.computeLayoutOuterRadius()}getInnerRadius(){return this.computeLayoutInnerRadius()}updateLayoutAttribute(){this._visible&&(this.getOrient()==="radius"?this._layoutRadiusAxis():this._layoutAngleAxis()),super.updateLayoutAttribute()}_getNormalizedValue(e,t){return t===0?0:(this.dataToPosition(e)-this._getStartValue())/t}getLabelItems(e){var t;const n=(t=this.getTickData())===null||t===void 0?void 0:t.getLatestData();return n&&n.length?[n.map(s=>Dy(s.value,this._getNormalizedValue([s.value],e)))]:[]}_getStartValue(){return this.getOrient()==="radius"?this.computeLayoutInnerRadius():this._startAngle}_layoutAngleAxis(){var e,t,n;const s=this.getCenter(),r=this.computeLayoutOuterRadius(),a=this.computeLayoutInnerRadius(),o=this._endAngle-this._startAngle,l=this.getLabelItems(o),c=Object.assign(Object.assign({},this.getLayoutStartPoint()),{inside:this._spec.inside,center:s,radius:r,innerRadius:a,startAngle:this._startAngle,endAngle:this._endAngle,sides:!((n=(t=(e=this._getRelatedAxis(this._option.radiusAxisIndex))===null||e===void 0?void 0:e.getSpec())===null||t===void 0?void 0:t.grid)===null||n===void 0)&&n.smooth?void 0:this.getScale().domain().length}),u=Object.assign(Object.assign({},c),{size:this.getRefLayoutRect(),title:{text:this._spec.title.text||this._dataFieldText},items:l,orient:"angle"});this._spec.grid.visible&&(u.grid=Object.assign({type:"line",smoothLink:!0,items:l[0]},c)),this._update(u)}_layoutRadiusAxis(){var e,t,n;const s=this.getCenter(),r=this.computeLayoutOuterRadius(),a=this.computeLayoutInnerRadius(),o=this.coordToPoint({angle:this._startAngle,radius:r}),l=this.coordToPoint({angle:this._startAngle,radius:a}),c=kn.distancePP(l,o),u=this.getLabelItems(c),h=Object.assign(Object.assign({},this.getLayoutStartPoint()),{start:l,end:o,verticalFactor:-1}),d=Object.assign(Object.assign({},h),{title:{text:this._spec.title.text||this._dataFieldText},items:u,orient:"radius"});!((e=this._spec.grid)===null||e===void 0)&&e.visible&&(d.grid=Object.assign({items:u[0],type:!((t=this._spec.grid)===null||t===void 0)&&t.smooth?"circle":"polygon",center:s,closed:!0,sides:(n=this._getRelatedAxis(this._option.angleAxisIndex))===null||n===void 0?void 0:n.getScale().domain().length,startAngle:this._startAngle,endAngle:this._endAngle},h)),this._update(d)}_getRelatedAxis(e){if(F(e))return this._option.getComponentByIndex(this.specKey,e)}_computeLayoutRadius(){return nue(()=>this._spec.layoutRadius,this.getRefLayoutRect,this.getCenter,()=>({startAngle:this._startAngle,endAngle:this._endAngle}))}computeLayoutOuterRadius(){var e;const t=(e=this._spec.outerRadius)!==null&&e!==void 0?e:this._spec.radius,n=t??this.getRefSeriesRadius().outerRadius;return this._computeLayoutRadius()*n}computeLayoutInnerRadius(){var e;const t=(e=this._spec.innerRadius)!==null&&e!==void 0?e:this.getRefSeriesRadius().innerRadius;return this._computeLayoutRadius()*t}getRefSeriesRadius(){let e=cT,t=0;const n=this.getChart().getSpec();return Vi(this.getRegions(),s=>{const r=s;if(bgt(r.type)){const{outerRadius:a=n.outerRadius,innerRadius:o=n.innerRadius}=r;Z(a)&&(e=a),Z(o)&&(t=o)}},{userId:this._seriesUserId,specIndex:this._seriesIndex}),{outerRadius:e,innerRadius:t}}_update(e){const{grid:t}=e,n=_X(e,["grid"]);this._axisMark.getProduct().encode(Pe({},this._axisStyle,n)),this._gridMark&&this._gridMark.getProduct().encode(Pe({},this._gridStyle,t))}invert(e){var t;if(this.getOrient()==="angle"&&this._scale.type==="band"){const n=this._scale.range(),s=n[n.length-1]-n[0],r=((t=this.getSpec().bandPosition)!==null&&t!==void 0?t:this._defaultBandPosition)===.5?0:this._scale.bandwidth()/2;if(n[0]<0){const a=(e+r+Math.abs(n[0]))%s-Math.abs(n[0]);return this._scale.invert(a)}return this._scale.invert((e+r)%s)}return this._scale.invert(e)}}PT.type=oe.polarAxis,PT.specKey="axes";class Pv extends PT{constructor(){super(...arguments),this.type=oe.polarLinearAxis,this._zero=!0,this._nice=!0,this._extend={},this._scale=new Ma}setAttrFromSpec(){super.setAttrFromSpec(),this.setExtraAttrFromSpec()}initScales(){super.initScales(),this.setScaleNice()}computeDomain(e){return this.computeLinearDomain(e)}axisHelper(){const e=super.axisHelper();return e.setExtendDomain=this.setExtendDomain.bind(this),e}registerTicksTransform(){const e=`${this.type}-ticks`;return Fe(this._option.dataSet,e,jx),e}}Pv.type=oe.polarLinearAxis,Pv.specKey="axes",Yt(Pv,DO);const L0=()=>{ig(),ng(),Lle(),Ble(),sg(),X.registerComponent(Pv.type,Pv)};class Ov extends PT{constructor(){super(...arguments),this.type=oe.polarBandAxis,this._scale=new eg}computeDomain(e){return this.computeBandDomain(e)}updateScaleRange(){const e=super.updateScaleRange();return this.updateGroupScaleRange(),e}axisHelper(){const e=super.axisHelper();return Object.assign(Object.assign({},e),{getBandwidth:t=>e.getScale(t).bandwidth()})}initScales(){super.initScales(),this.calcScales(this._defaultBandInnerPadding,this._defaultBandOuterPadding)}registerTicksTransform(){const e=`${this.type}-ticks`;return Fe(this._option.dataSet,e,Gat),e}transformScaleDomain(){}}Ov.type=oe.polarBandAxis,Ov.specKey="axes",Yt(Ov,Tce);const qx=()=>{ig(),ng(),Lle(),Ble(),sg(),X.registerComponent(Ov.type,Ov)};class pd extends aue{constructor(){super(...arguments),this.type=re.rose,this.transformerConstructor=oue,this._roseMark=null,this._labelMark=null}initMark(){this.initRoseMark()}initMarkStyle(){this.initRoseMarkStyle()}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.getCenter=()=>({x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y}),this._markAttributeContext.startAngleScale=e=>this.startAngleScale(e),this._markAttributeContext.endAngleScale=e=>this.endAngleScale(e)}initRoseMark(){var e,t;this._roseMark=this._createMark(pd.mark.rose,{groupKey:this._seriesField,isSeriesMark:!0,stateSort:(e=this._spec.rose)===null||e===void 0?void 0:e.stateSort},{setCustomizedShape:(t=this._spec.rose)===null||t===void 0?void 0:t.customShape,morph:Yu(this._spec,pd.mark.rose.name),morphElementKey:this.getDimensionField()[0]})}getRoseAngle(){var e,t,n;return(n=(t=(e=this.angleAxisHelper).getBandwidth)===null||t===void 0?void 0:t.call(e,this._groups?this._groups.fields.length-1:0))!==null&&n!==void 0?n:.5}startAngleScale(e){return this.angleAxisHelper.dataToPosition(this.getDatumPositionValues(e,this.getGroupFields()))-.5*this.angleAxisHelper.getBandwidth(this.getGroupFields().length-1)}endAngleScale(e){return this.angleAxisHelper.dataToPosition(this.getDatumPositionValues(e,this.getGroupFields()))+this.getRoseAngle()-.5*this.angleAxisHelper.getBandwidth(this.getGroupFields().length-1)}initRoseMarkStyle(){const e=this._roseMark;e&&this.setMarkStyle(e,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:t=>this.startAngleScale(t),endAngle:t=>this.endAngleScale(t),fill:this.getColorAttribute(),outerRadius:t=>Kt(this.radiusAxisHelper.dataToPosition([t[this._radiusField[0]]]),this.radiusAxisHelper.getScale(0)),innerRadius:t=>{var n;if(!this.getStack())return 0;const s=Kt(this.radiusAxisHelper.dataToPosition([t[this._innerRadiusField[0]]]),this.radiusAxisHelper.getScale(0));return s<=Number.MIN_VALUE?this._computeLayoutRadius()*((n=this._spec.innerRadius)!==null&&n!==void 0?n:0):s}})}initTooltip(){super.initTooltip(),this._roseMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._roseMark)}initLabelMarkStyle(e){e&&this.setMarkStyle(e,{text:t=>t[this.getDimensionField()[0]],fill:this.getColorAttribute(),z:0})}initAnimation(){var e,t,n;const s=(t=(e=this._spec)===null||e===void 0?void 0:e.animationAppear)===null||t===void 0?void 0:t.preset;if(this._roseMark){const r={innerRadius:()=>{var a;return this._computeLayoutRadius()*((a=this._spec.innerRadius)!==null&&a!==void 0?a:0)}};this._roseMark.setAnimationConfig(ft((n=X.getAnimationInKey("rose"))===null||n===void 0?void 0:n(r,s),kt("rose",this._spec,this._markAttributeContext)))}}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._roseMark]}}pd.type=re.rose,pd.mark=Kyt,pd.transformerConstructor=oue;const Xyt=()=>{X.registerSeries(pd.type,pd),rg(),Gyt(),qx(),L0()};class Yyt extends Ba{constructor(e,t,n,s,r){super(e,t,n,s,r),this._center=t.center,this._prevCenter=e.center,this._center&&this._prevCenter||(this.valid=!1)}getEndProps(){return this.valid===!1?{}:ui(this._center,this._toRadius,this._toAngle)}onBind(){const{angle:e,radius:t}=jb(this.from,this._prevCenter),{angle:n,radius:s}=jb(this.to,this._center);Z(n*s)||(this.valid=!1),this._fromAngle=Z(e)?e:n,this._fromRadius=Z(t)?t:s,this._toAngle=n,this._toRadius=s,aT(this._fromAngle,this._toAngle)&&aT(this._fromRadius,this._toRadius)&&(this.valid=!1)}onUpdate(e,t,n){if(this.valid===!1)return n.x=this.to.x,void(n.y=this.to.y);if(e){const{x:s,y:r}=this.getEndProps();n.x=s,n.y=r,n.center=this._center}else{const{x:s,y:r}=ui({x:this._prevCenter.x+(this._center.x-this._prevCenter.x)*t,y:this._prevCenter.y+(this._center.y-this._prevCenter.y)*t},this._fromRadius+(this._toRadius-this._fromRadius)*t,this._fromAngle+(this._toAngle-this._fromAngle)*t);n.x=s,n.y=r}}}class qyt extends Mre{constructor(e,t,n,s,r){super(e,t,n,s,r),this._center=t.center,this._prevCenter=e.center}onUpdate(e,t,n){this.points=this.points.map((s,r)=>{const a=this.polarPointInterpolation(this.interpolatePoints[r][0],this.interpolatePoints[r][1],t);return e&&(n.center=this._center),a.context=s.context,a}),n.points=this.points}_interpolationSinglePoint(e,t,n){if(!FG(e)&&!FG(t))return t;const s=jb(e,this._prevCenter),r=jb(t,this._center);let a=kd(s.angle),o=kd(r.angle);!Z(a)&&Z(o)&&(a=o),Z(a)&&!Z(o)&&(o=a);const l=a+(o-a)*n,c=s.radius+(r.radius-s.radius)*n;return ui({x:this._prevCenter.x+(this._center.x-this._prevCenter.x)*n,y:this._prevCenter.y+(this._center.y-this._prevCenter.y)*n},c,l)}polarPointInterpolation(e,t,n){const{x:s,y:r}=this._interpolationSinglePoint(e,t,n),{x:a,y:o}=this._interpolationSinglePoint({x:e.x1,y:e.y1},{x:t.x1,y:t.y1},n),l=new sn(s,r,a,o);return l.defined=t.defined,l}}const lue=i=>({type:i==="in"?"fadeIn":"fadeOut"}),Zyt=(i,e)=>({type:e==="in"?"growPointsIn":"growPointsOut",options:()=>({center:i.center()})});function bC(i,e,t){return e==="fadeIn"?lue(t):Zyt(i,t)}const Jyt=(i,e)=>{const t=()=>{var a;return(a=i.center())===null||a===void 0?void 0:a.x},n=(a,o)=>o.getGraphicAttribute("x"),s=()=>{var a;return(a=i.center())===null||a===void 0?void 0:a.y},r=(a,o)=>o.getGraphicAttribute("y");return e==="in"?{channel:{x:{from:t,to:n},y:{from:s,to:r}}}:{channel:{x:{from:n,to:t},y:{from:r,to:s}}}};function vX(i,e,t){return e==="fadeIn"?lue(t):Jyt(i,t)}const bX=(i,e)=>({custom:eZe,customParameters:(t,n)=>{var s;return{group:n.getGraphicItem(),startAngle:(s=i.startAngle)!==null&&s!==void 0?s:Math.PI/2,orient:"clockwise",center:i.center(),radius:i.radius(),animationType:e}}}),Qyt=()=>{X.registerAnimation("radar",(i,e)=>({appear:e==="clipIn"?void 0:bC(i,e,"in"),enter:bC(i,e,"in"),exit:bC(i,e,"out"),disappear:e==="clipIn"?void 0:bC(i,e,"out"),update:[{options:{excludeChannels:["points","defined","center"]}},{channel:["points","center"],custom:qyt,customParameters:i,duration:cc.update.duration,easing:cc.update.easing}]})),X.registerAnimation("radarSymbol",(i,e)=>({appear:e==="clipIn"?void 0:vX(i,e,"in"),enter:{type:"scaleIn"},exit:{type:"scaleOut"},disappear:e==="clipIn"?void 0:vX(i,e,"out"),update:[{options:{excludeChannels:["x","y","center"]}},{channel:["x","y","center"],custom:Yyt,customParameters:i,duration:cc.update.duration,easing:cc.update.easing}]})),X.registerAnimation("radarGroup",(i,e)=>({appear:bX(i,"in"),disappear:bX(i,"out")})),O0()},e0t=Object.assign(Object.assign(Object.assign({},Wi),xh),{area:{name:"area",type:"area"}});class jh extends aue{constructor(){super(...arguments),this.type=re.radar,this.transformerConstructor=Gx,this._sortDataByAxis=!1}initGroups(){}compile(){super.compile(),this.addOverlapCompile()}initMark(){var e,t,n,s;const r={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold},a=((e=this._spec.area)===null||e===void 0?void 0:e.visible)!==!1&&((n=(t=this._spec.area)===null||t===void 0?void 0:t.style)===null||n===void 0?void 0:n.visible)!==!1,o=(s=this._spec.seriesMark)!==null&&s!==void 0?s:"area";this.initAreaMark(r,a&&o==="area"),this.initLineMark(r,o==="line"||o==="area"&&!a),this.initSymbolMark(r,o==="point")}initMarkStyle(){this.initAreaMarkStyle(),this.initLineMarkStyle(),this.initSymbolMarkStyle(),[this._lineMark,this._symbolMark,this._areaMark].forEach(e=>{e&&this.setMarkStyle(e,{center:()=>{var t;return(t=this.angleAxisHelper)===null||t===void 0?void 0:t.center()}})})}initAreaMark(e,t){var n,s;this._areaMark=this._createMark(jh.mark.area,{groupKey:this._seriesField,isSeriesMark:t,stateSort:(n=this._spec.area)===null||n===void 0?void 0:n.stateSort},Object.assign(Object.assign({},e),{setCustomizedShape:(s=this._spec.area)===null||s===void 0?void 0:s.customShape}))}initAreaMarkStyle(){const e=this._areaMark;e&&(this.setMarkStyle(e,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),x1:t=>t&&this.angleAxisHelper&&this.radiusAxisHelper?this.valueToPosition(this.getDatumPositionValues(t,this._angleField),this.getStack()?this.getDatumPositionValues(t,this._innerRadiusField):this.radiusScale.domain()[0]).x:Number.NaN,y1:t=>!t||!this.angleAxisHelper||!this.radiusAxisHelper?Number.NaN:this.valueToPosition(this.getDatumPositionValues(t,this._angleField),this.getStack()?this.getDatumPositionValues(t,this._innerRadiusField):this.radiusScale.domain()[0]).y,fill:this.getColorAttribute(),curveType:Sce,closePath:!0},"normal",pe.Series),this._invalidType!=="zero"&&this.setMarkStyle(e,{defined:this._getInvalidDefined.bind(this),connectedType:this._getInvalidConnectType()},"normal",pe.Series),this.event.on(ke.viewDataStatisticsUpdate,{filter:t=>t.model===this},()=>{this.encodeDefined(e,"defined")}))}initTooltip(){super.initTooltip();const{group:e,mark:t}=this._tooltipHelper.activeTriggerSet;this._lineMark&&e.add(this._lineMark),this._areaMark&&e.add(this._areaMark),this._symbolMark&&(t.add(this._symbolMark),e.add(this._symbolMark))}initAnimation(){var e,t,n,s;const r={center:()=>{var o;return(o=this.angleAxisHelper)===null||o===void 0?void 0:o.center()},radius:()=>{const o=this.getLayoutRect();return Math.min(o.width,o.height)},startAngle:F(this._spec.startAngle)?zt(this._spec.startAngle):yO},a=(n=(t=(e=this._spec)===null||e===void 0?void 0:e.animationAppear)===null||t===void 0?void 0:t.preset)!==null&&n!==void 0?n:"clipIn";a==="clipIn"&&this._rootMark&&this._rootMark.setAnimationConfig(ft((s=X.getAnimationInKey("radarGroup"))===null||s===void 0?void 0:s(r,a),kt("group",this._spec,this._markAttributeContext))),[[this._areaMark,"radar"],[this._lineMark,"radar"],[this._symbolMark,"radarSymbol"]].forEach(([o,l])=>{if(F(o)){const c=X.getAnimationInKey(l);o.setAnimationConfig(ft(c==null?void 0:c(r,a),kt(o.name,this._spec,this._markAttributeContext)))}})}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._areaMark,this._symbolMark,this._lineMark]}getSeriesStyle(e){return t=>{var n,s,r,a;let o=(s=(n=this._seriesMark)===null||n===void 0?void 0:n.getAttribute(t,e))!==null&&s!==void 0?s:void 0;return t!=="fill"||o||(t="stroke",o=(a=(r=this._seriesMark)===null||r===void 0?void 0:r.getAttribute(t,e))!==null&&a!==void 0?a:void 0),t==="stroke"&&ie(o)?o[0]:o}}}jh.type=re.radar,jh.mark=e0t,jh.transformerConstructor=Gx,Yt(jh,P4);const t0t=()=>{X.registerSeries(jh.type,jh),b4(),FO(),RO(),qu(),Qyt(),qx(),L0()};class i0t extends ar{constructor(){super(...arguments),this.shapeTypeCallback=()=>"square"}enableByType(e){return e==="mark"}getDefaultTitlePattern(e){return{key:"event info",value:"event info"}}getDefaultContentList(){return[{key:e=>e.type,value:e=>e.id},{key:"event_time",value:e=>ul.getInstance().timeFormat("%Y%m%d",e.event_time)},{key:"action_type",value:e=>e.action_type},{key:"children",value:e=>e.children}]}getTooltipData(e,t,n,s,r){var a,o,l,c;const u=super.getTooltipData(e,t,n,s,r),h=(l=(o=(a=this.spec)===null||a===void 0?void 0:a[e])===null||o===void 0?void 0:o.updateContent)!==null&&l!==void 0?l:(c=t==null?void 0:t[e])===null||c===void 0?void 0:c.updateContent;return u&&!h&&(u.updateContent=(d,p,f)=>{const g=[],m=d.filter(y=>y.key==="children");return m.length>0&&m[0].value.forEach(y=>{let b=!0;for(const x in y)g.push(Object.assign(Object.assign({},m[0]),{shapeType:"circle",hasShape:b,key:x,value:y[x]+""})),b=!1}),d.concat(g)}),u}}const n0t=(i,e)=>{var t;const n=!((t=i[0])===null||t===void 0)&&t.latestData?i[0].latestData:i||[],s=[];return n.forEach(r=>{const a={};for(const l in r)l!==e&&(a[l]=r[l]);const o=r[e];o==null||o.forEach(l=>{s.push(Object.assign({},a,l))})}),s},s0t={fill:"#bbb",fillOpacity:.2},r0t=Object.assign(Object.assign({},Wi),{group:{name:"group",type:"group"},grid:{name:"grid",type:"rule"},gridBackground:{name:"gridBackground",type:"rect"},dot:{name:"dot",type:"symbol"},title:{name:"title",type:"text"},subTitle:{name:"subTitle",type:"text"},symbol:{name:"symbol",type:"symbol"}});class ya extends Io{constructor(){super(...arguments),this.type=re.dot}getSeriesGroupField(){return this._seriesField}setSeriesGroupField(e){F(e)&&(this._seriesGroupField=e)}getTitleField(){return this._titleField}setTitleField(e){F(e)&&(this._titleField=e)}getSubTitleField(){return this._subTitleField}setSubTitleField(e){F(e)&&(this._subTitleField=e)}getDotTypeField(){return this._dotTypeField}setDotTypeField(e){F(e)&&(this._dotTypeField=e)}getHighLightSeriesGroup(){return this._highLightSeriesGroup}setHighLightSeriesGroup(e){F(e)&&(this._highLightSeriesGroup=e)}setGridBackground(e){F(e)&&(this._gridBackground=e)}initData(){var e;super.initData(),this._xDimensionStatisticsDomain=this.getRawData().latestData.map(t=>t[this._fieldY[0]]),Fe(this._option.dataSet,"objFlat",n0t),Fe(this._option.dataSet,"copyDataView",AO),bu(this._option.dataSet,"dataview",IP),(e=this.getViewData())===null||e===void 0||e.transform({type:"objFlat",options:"dots",level:Tl.dotObjFlat},!1)}getStatisticFields(){return[{key:this._fieldY[0],operations:["values"],customize:this._xDimensionStatisticsDomain}]}setAttrFromSpec(){var e;super.setAttrFromSpec(),this.setSeriesGroupField(this._spec.seriesGroupField),this.setTitleField(this._spec.titleField),this.setSubTitleField(this._spec.subTitleField),this.setDotTypeField(this._spec.dotTypeField),this.setHighLightSeriesGroup(this._spec.highLightSeriesGroup),this.setGridBackground(Pe(s0t,((e=this._spec.grid)===null||e===void 0?void 0:e.background)||{}))}initMark(){this._clipMark=this._createMark(ya.mark.group),this._containerMark=this._createMark(ya.mark.group,{parent:this._clipMark,dataView:this.getRawData()}),this._gridBackgroundMark=this._createMark(ya.mark.gridBackground,{parent:this._containerMark,dataView:this.getRawData()}),this._gridMark=this._createMark(ya.mark.grid,{parent:this._containerMark,dataView:this.getRawData()}),this._dotMark=this._createMark(ya.mark.dot,{skipBeforeLayouted:!1,isSeriesMark:!0,parent:this._containerMark}),this._titleMark=this._createMark(ya.mark.title,{parent:this._containerMark,dataView:this.getRawData()}),this._subTitleMark=this._createMark(ya.mark.subTitle,{parent:this._containerMark,dataView:this.getRawData()}),this._symbolMark=this._createMark(ya.mark.symbol,{parent:this._containerMark,dataView:this.getRawData()})}initMarkStyle(){const e=this._clipMark;e&&(this.setMarkStyle(e,{x:-this._spec.leftAppendPadding,y:0,width:1e4,height:this._spec.clipHeight},"normal",pe.Series),e.setMarkConfig({interactive:!1,clip:!0}));const t=this._containerMark;t&&(this.setMarkStyle(t,{x:this._spec.leftAppendPadding},"normal",pe.Series),t.setMarkConfig({interactive:!1}));const n=this._gridBackgroundMark;n&&this.setMarkStyle(n,{x:this.getRegionRectLeft.bind(this),x1:this.getRegionRectRight.bind(this),y:this.dataToGridBackgroundPositionY.bind(this),y1:this.dataToGridBackgroundPositionY1.bind(this),fill:this._gridBackground.fill,fillOpacity:this.dataToGridBackgroundOpacity.bind(this)},"normal",pe.Series);const s=this._gridMark;s&&this.setMarkStyle(s,{stroke:this.getColorAttribute(),x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this),x1:this.getRegionRectRight.bind(this),y1:this.dataToPositionY.bind(this)},"normal",pe.Series);const r=this._dotMark;r&&this.setMarkStyle(r,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),fill:this.getDotColorAttribute(),fillOpacity:this.dataToOpacity.bind(this)},"normal",pe.Series);const a=this._titleMark;a&&this.setMarkStyle(a,{fill:this.getColorAttribute(),text:c=>c[this.getTitleField()],x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this)},"normal",pe.Series);const o=this._subTitleMark;o&&this.setMarkStyle(o,{fill:this.getColorAttribute(),text:c=>c[this.getSubTitleField()],x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this)},"normal",pe.Series);const l=this._symbolMark;l&&this.setMarkStyle(l,{x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this),fill:this.getColorAttribute()},"normal",pe.Series)}dataToGridBackgroundPositionY(e){if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:t,getBandwidth:n}=this._yAxisHelper;return t(this.getDatumPositionValues(e,this._fieldY),{bandPosition:this._bandPosition})-n(0)/2}dataToGridBackgroundPositionY1(e){if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:t,getBandwidth:n}=this._yAxisHelper;return t(this.getDatumPositionValues(e,this._fieldY),{bandPosition:this._bandPosition})+n(0)/2}dataToOpacity(e){var t,n,s,r;if(!this._xAxisHelper)return Number.NaN;const{dataToPosition:a,getScale:o}=this._xAxisHelper;return a(this.getDatumPositionValues(e,this._fieldX),{bandPosition:this._bandPosition})<o(0).range()[0]||a(this.getDatumPositionValues(e,this._fieldX),{bandPosition:this._bandPosition})>o(0).range()[1]?0:(r=(s=(n=(t=this._theme)===null||t===void 0?void 0:t.dot)===null||n===void 0?void 0:n.style)===null||s===void 0?void 0:s.fillOpacity)!==null&&r!==void 0?r:1}dataToGridBackgroundOpacity(e){return e[this._seriesGroupField]===this._highLightSeriesGroup?this._gridBackground.fillOpacity:0}onLayoutEnd(e){var t,n;super.onLayoutEnd(e);const s=(n=(t=this._spec)===null||t===void 0?void 0:t.leftAppendPadding)!==null&&n!==void 0?n:0;this.setMarkStyle(this._clipMark,{width:this.getLayoutRect().width+s},"normal",pe.Series)}getDefaultColorDomain(){var e,t;return this._seriesGroupField?(e=this.getViewDataStatistics())===null||e===void 0?void 0:e.latestData[this._seriesGroupField].values:this._seriesField?(t=this.getViewDataStatistics())===null||t===void 0?void 0:t.latestData[this._seriesField].values:[]}getColorAttribute(){var e,t,n;return{scale:(e=this._option.globalScale.getScale("color"))!==null&&e!==void 0?e:this._getDefaultColorScale(),field:(n=(t=this._seriesGroupField)!==null&&t!==void 0?t:this._seriesField)!==null&&n!==void 0?n:Wr}}getDotColorScale(){var e,t,n;const s=this._dotTypeField?(e=this.getViewDataStatistics())===null||e===void 0?void 0:e.latestData[this._dotTypeField].values:this._seriesGroupField?(t=this.getViewDataStatistics())===null||t===void 0?void 0:t.latestData[this._seriesGroupField].values:this._seriesField?(n=this.getViewDataStatistics())===null||n===void 0?void 0:n.latestData[this._seriesField].values:[],r=this._getDataScheme();return new Hx().domain(s).range(r)}getDotColorAttribute(){var e,t,n,s;return{scale:(e=this._option.globalScale.getScale("color"))!==null&&e!==void 0?e:this.getDotColorScale(),field:(s=(n=(t=this._dotTypeField)!==null&&t!==void 0?t:this._seriesGroupField)!==null&&n!==void 0?n:this._seriesField)!==null&&s!==void 0?s:Wr}}initTooltip(){this._tooltipHelper=new i0t(this),this._dotMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._dotMark)}onEvaluateEnd(e){super.onEvaluateEnd(e)}onMarkTreePositionUpdate(e){e.forEach(t=>{t.type==="group"?this.onMarkTreePositionUpdate(t.getMarks()):t.updateLayoutState()})}getDotData(){var e;return(e=this._dotMark)===null||e===void 0?void 0:e.getData()}_getDataIdKey(){}getStackValueField(){return null}getActiveMarks(){return[this._dotMark]}}ya.type=re.dot,ya.mark=r0t;const a0t=()=>{qu(),R0(),Zu(),ta(),X.registerSeries(ya.type,ya)};class o0t extends ar{constructor(){super(...arguments),this.shapeTypeCallback=()=>"square"}enableByType(e){return e==="mark"}getDefaultTitlePattern(e){return{key:"link info",value:"link info"}}getDefaultContentList(){return[{key:"time",value:e=>ul.getInstance().timeFormat("%Y%m%d %H:%M",e.from.split("_")[1])},{key:"type",value:e=>e.action_type},{key:"from",value:e=>e.from},{key:"to",value:e=>e.to}]}}const l0t=Object.assign(Object.assign({},Wi),{group:{name:"group",type:"group"},link:{name:"link",type:"rule"},arrow:{name:"arrow",type:"symbol"}}),c0t=(i,e)=>{const{infoKey:t,fields:n,linkData:s,dotData:r}=e,{fromField:a,toField:o,xField:l,yField:c}=n(),u=s(),h=r(),d={};return h.forEach(p=>{const f={};for(const m in p)m!==t&&(f[m]=p[m]);const g=p[t];g==null||g.forEach(m=>{d[m.node_name]=Object.assign({},f,m)})}),u.forEach(p=>{var f,g,m,y;p[a+"_xField"]=(f=d==null?void 0:d[p[a]])===null||f===void 0?void 0:f[l],p[a+"_yField"]=(g=d==null?void 0:d[p[a]])===null||g===void 0?void 0:g[c],p[o+"_xField"]=(m=d==null?void 0:d[p[o]])===null||m===void 0?void 0:m[l],p[o+"_yField"]=(y=d==null?void 0:d[p[o]])===null||y===void 0?void 0:y[c]}),u};class fu extends Io{constructor(){super(...arguments),this.type=re.link}getFromField(){return this._fromField}setFromField(e){F(e)&&(this._fromField=e)}getToField(){return this._toField}setToField(e){F(e)&&(this._toField=e)}getDotTypeField(){return this._dotTypeField}setDotTypeField(e){F(e)&&(this._dotTypeField=e)}getDotSeriesSpec(){return this._dotSeriesSpec}setDotSeriesSpec(e){F(e)&&(this._dotSeriesSpec=e)}_getDotData(){const e=this._option.getChart().getSeriesInIndex([this._spec.dotSeriesIndex])[0];return e?e.getRawData().latestData:[]}initData(){var e;super.initData(),Fe(this._option.dataSet,"linkDotInfo",c0t),(e=this.getViewData())===null||e===void 0||e.transform({type:"linkDotInfo",options:{infoKey:"dots",fields:()=>({fromField:this._fromField,toField:this._toField,xField:this._dotSeriesSpec.xField,yField:this._dotSeriesSpec.yField}),linkData:()=>this._rawData.latestData,dotData:()=>this._getDotData()},level:Tl.linkDotInfo},!1)}setAttrFromSpec(){super.setAttrFromSpec(),this.setFromField(this._spec.fromField),this.setToField(this._spec.toField),this.setDotTypeField(this._spec.dotTypeField),this.setDotSeriesSpec(this._spec.dotSeriesSpec)}initMark(){this._clipMark=this._createMark(fu.mark.group),this._containerMark=this._createMark(fu.mark.group,{parent:this._clipMark}),this._linkMark=this._createMark(fu.mark.link,{skipBeforeLayouted:!1,parent:this._containerMark}),this._arrowMark=this._createMark(fu.mark.arrow,{skipBeforeLayouted:!1,isSeriesMark:!0,parent:this._containerMark})}initMarkStyle(){var e,t,n,s;const r=this._clipMark;r&&(this.setMarkStyle(r,{x:-this._spec.leftAppendPadding,y:0,width:1e4,height:this._spec.clipHeight},"normal",pe.Series),r.setMarkConfig({interactive:!1,clip:!0}));const a=this._containerMark;a&&(this.setMarkStyle(a,{x:this._spec.leftAppendPadding,width:this.getLayoutRect().width},"normal",pe.Series),a.setMarkConfig({interactive:!1}));const o=this._linkMark;o&&this.setMarkStyle(o,{stroke:this.getColorAttribute(),strokeOpacity:this.dataToOpacity.bind(this),x:this.dataToPositionXFrom.bind(this),y:this.dataToPositionYFrom.bind(this),x1:this.dataToPositionXTo.bind(this),y1:this.dataToPositionYTo.bind(this)},"normal",pe.Series);const l=this._arrowMark;if(l){const c=(s=(n=(t=(e=this._theme)===null||e===void 0?void 0:e.arrow)===null||t===void 0?void 0:t.style)===null||n===void 0?void 0:n.size)!==null&&s!==void 0?s:10;this.setMarkStyle(l,{x:this.dataToPositionXTo.bind(this),y:u=>this.dataToPositionArrowYTo(u,c),fill:this.getColorAttribute(),fillOpacity:this.dataToOpacity.bind(this),size:c,symbolType:u=>this.isPositionYFromHigher(u)?"triangleDown":"triangleUp"},"normal",pe.Series)}}afterInitMark(){super.afterInitMark()}dataToPositionXFrom(e){if(!this._xAxisHelper)return Number.NaN;const{dataToPosition:t}=this._xAxisHelper;return t(this.getDatumPositionValues(e,this._fromField+"_xField"),{bandPosition:this._bandPosition})}dataToPositionYFrom(e){if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:t}=this._yAxisHelper;return t(this.getDatumPositionValues(e,this._fromField+"_yField"))}dataToPositionXTo(e){if(!this._xAxisHelper)return Number.NaN;const{dataToPosition:t}=this._xAxisHelper;return t(this.getDatumPositionValues(e,this._toField+"_xField"),{bandPosition:this._bandPosition})}dataToPositionYTo(e){if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:t}=this._yAxisHelper;return t(this.getDatumPositionValues(e,this._toField+"_yField"),{bandPosition:this._bandPosition})}dataToPositionArrowYTo(e,t){if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:n}=this._yAxisHelper,s=this.isPositionYFromHigher(e)?-t/2:t/2;return n(this.getDatumPositionValues(e,this._toField+"_yField"),{bandPosition:this._bandPosition})+s}dataToOpacity(e){return this.isPositionXOuterRange(e,this._fromField+"_xField")||this.isPositionXOuterRange(e,this._toField+"_xField")||e[this._fromField]===e[this._toField]?0:1}isPositionYFromHigher(e){return this.dataToPositionYFrom(e)<this.dataToPositionYTo(e)}isPositionXOuterRange(e,t){if(!this._xAxisHelper)return!1;const{dataToPosition:n,getScale:s}=this._xAxisHelper;return n(this.getDatumPositionValues(e,t),{bandPosition:this._bandPosition})<s(0).range()[0]||n(this.getDatumPositionValues(e,t),{bandPosition:this._bandPosition})>s(0).range()[1]}getDefaultColorDomain(){var e,t;return this._dotTypeField?(e=this.getViewDataStatistics())===null||e===void 0?void 0:e.latestData[this._dotTypeField].values:this._seriesField?(t=this.getViewDataStatistics())===null||t===void 0?void 0:t.latestData[this._seriesField].values:[]}getColorAttribute(){var e,t,n;return{scale:(e=this._option.globalScale.getScale("color"))!==null&&e!==void 0?e:this._getDefaultColorScale(),field:(n=(t=this._dotTypeField)!==null&&t!==void 0?t:this._seriesField)!==null&&n!==void 0?n:Wr}}initInteraction(){const e=[];this._linkMark&&e.push(this._linkMark),this._arrowMark&&e.push(this._arrowMark),this._parseInteractionConfig(e)}initTooltip(){this._tooltipHelper=new o0t(this),this._linkMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._linkMark),this._arrowMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._arrowMark)}onMarkTreePositionUpdate(e){e.forEach(t=>{t.type==="group"?this.onMarkTreePositionUpdate(t.getMarks()):t.updateLayoutState()})}getDotInfoData(){var e,t;return(t=(e=this._linkMark)!==null&&e!==void 0?e:this._arrowMark)===null||t===void 0?void 0:t.getData()}getActiveMarks(){return[this._linkMark,this._arrowMark]}}fu.type=re.link,fu.mark=l0t;const u0t=()=>{R0(),qu(),ea(),Qr(),X.registerSeries(fu.type,fu)},$4=Object.assign(Object.assign({},Wi),{group:{name:"group",type:"group"}});class D0 extends Yx{constructor(){super(...arguments),this._arcGroupMark=null,this._getAngleValueStart=e=>{const t=this._getAngleAxis(),{tickMask:n}=this._spec;if(n!=null&&n.forceAlign&&this._isTickMaskVisible(t)){const s=e[this.getStack()?To:hw],r=this._getAngleAxisSubTickData(t),a=r[1].value-r[0].value,o=zt(n.offsetAngle);let l;if(F(s)){const c=i8(r,h=>h.value-s),u=c>=r.length||s>r[c].value-a/2?Math.min(c,r.length-1):c>0?c-1:void 0;u!==void 0&&(l=this.angleAxisHelper.dataToPosition([r[u].value-a/2]))}return B(l)&&(l=this.angleAxisHelper.dataToPosition([r[0].value-a/2])),l+o}return this._getAngleValueStartWithoutMask(e)},this._getAngleValueEnd=e=>{const t=this._getAngleAxis(),{tickMask:n}=this._spec;if(n!=null&&n.forceAlign&&this._isTickMaskVisible(t)){const s=e[this.getStack()?Zr:this._angleField[0]],r=this._getAngleAxisSubTickData(t),a=r[1].value-r[0].value,o=zt(n.offsetAngle),l=i8(r,h=>h.value-s),c=l>=r.length||s>r[l].value-a/2?Math.min(l,r.length-1):l>0?l-1:void 0;let u;return u=c!==void 0?this.angleAxisHelper.dataToPosition([r[c].value+a/2]):this.angleAxisHelper.dataToPosition([r[0].value-a/2]),u+o}return this._getAngleValueEndWithoutMask(e)}}setAttrFromSpec(){var e,t,n;super.setAttrFromSpec();const s=(e=this._option.globalInstance.getChart())===null||e===void 0?void 0:e.getSpec(),r=(t=this._spec.startAngle)!==null&&t!==void 0?t:s==null?void 0:s.startAngle;this._startAngle=F(r)?zt(r):yO;const a=(n=this._spec.endAngle)!==null&&n!==void 0?n:s==null?void 0:s.endAngle;this._endAngle=F(a)?zt(a):a4,this.setAngleField(this._spec.valueField||this._spec.angleField),this.setRadiusField(this._spec.categoryField||this._spec.radiusField),this._specAngleField=this._angleField.slice(),this._specRadiusField=this._radiusField.slice()}getStackGroupFields(){return this._radiusField}getStackValueField(){var e;return(e=this._angleField)===null||e===void 0?void 0:e[0]}getGroupFields(){return this._angleField}_convertMarkStyle(e){const t=super._convertMarkStyle(e);if(t.fill){const n=e.fill;(n==null?void 0:n.gradient)!=="conical"||F(n==null?void 0:n.startAngle)||F(n==null?void 0:n.endAngle)||(t.fill=Object.assign(Object.assign({},n),{startAngle:this._startAngle,endAngle:this._endAngle}))}return t}_getAngleValueStartWithoutMask(e){if(this.getStack()){const t=Kt(this.angleAxisHelper.dataToPosition([e[To]]),this.angleAxisHelper.getScale(0));if(Z(t))return t}return this._startAngle}_getAngleValueEndWithoutMask(e){if(this.getStack()){const t=Kt(this.angleAxisHelper.dataToPosition([e[Zr]]),this.angleAxisHelper.getScale(0));if(Z(t))return t}return this.angleAxisHelper.dataToPosition([e[this._angleField[0]]])}getDimensionField(){return this._specRadiusField}getMeasureField(){return this._specAngleField}initMark(){this._initArcGroupMark()}initMarkStyle(){this._initArcGroupMarkStyle()}_initArcGroupMark(){return this._arcGroupMark=this._createMark(D0.mark.group,{skipBeforeLayouted:!1}),this._arcGroupMark}_initArcGroupMarkStyle(){const e=this._arcGroupMark;e.created(),this.setMarkStyle(e,{x:0,y:0},"normal",pe.Series),this._arcGroupMark.setMarkConfig({interactive:!1,zIndex:this.layoutZIndex,clip:!0,clipPath:()=>{const t=this._getAngleAxis();if(this._isTickMaskVisible(t)){const{tickMask:r}=this._spec,{angle:a,offsetAngle:o,style:l={}}=r,c=this._getAngleAxisSubTickData(t),{x:u,y:h}=this.angleAxisHelper.center(),d=this._computeLayoutRadius(),p=l;return c.map(({value:f})=>{const g=this.angleAxisHelper.dataToPosition([f])+zt(o),m=zt(a)/2;return B5(Object.assign(Object.assign({},p),{x:u,y:h,startAngle:g-m,endAngle:g+m,innerRadius:d*this._innerRadius,outerRadius:d*this._outerRadius,fill:!0}))})}const{width:n,height:s}=this.getLayoutRect();return[Rx({width:n,height:s,fill:!0})]}})}_getAngleAxis(){if(!this.angleAxisHelper)return;const e=this.angleAxisHelper.getAxisId();return this._option.getChart().getAllComponents().find(t=>t.id===e)}_getAngleAxisTickData(e){var t;return(t=e==null?void 0:e.getTickData())===null||t===void 0?void 0:t.getLatestData()}_isTickMaskVisible(e){const t=this._getAngleAxisTickData(e),{tickMask:n}=this._spec;return n&&n.visible!==!1&&(t==null?void 0:t.length)>1}_getAngleAxisSubTickData(e){var t;const n=this._getAngleAxisTickData(e),s=[],{subTick:r={},tick:a={}}=(t=e==null?void 0:e.getSpec())!==null&&t!==void 0?t:{},{tickCount:o=4}=r,{alignWithLabel:l}=a;if((n==null?void 0:n.length)>=2){const c=n[1].value-n[0].value;for(let u=0;u<n.length-1;u++){const h=n[u],d=n[u+1];s.push(h);for(let p=0;p<o;p++){const f=(p+1)/(o+1),g=(1-f)*h.value+f*(d?d.value:l?1:h.value+c);s.push({value:g})}}return s.push(n[n.length-1]),s}return n}}D0.mark=$4;const h0t=Object.assign(Object.assign({},$4),{track:{name:"track",type:"arc"},progress:{name:"progress",type:"arc"}}),d0t=i=>({type:"growAngleIn",options:{overall:i.startAngle}}),p0t={type:"fadeIn"};function f0t(i,e){return e==="fadeIn"?p0t:d0t(i)}const cue=()=>{X.registerAnimation("circularProgress",(i,e)=>({appear:f0t(i,e),enter:{type:"growAngleIn"},disappear:{type:"growAngleOut"}}))};class uue extends or{constructor(){super(...arguments),this._supportStack=!0}}class fd extends D0{constructor(){super(...arguments),this.type=re.circularProgress,this.transformerConstructor=uue,this._progressMark=null,this._trackMark=null,this._getRadiusValueStart=e=>{if(this.getGroupFields().length>1){const t=this.radiusAxisHelper.dataToPosition(this.getDatumPositionValues(e,this.getGroupFields()));if(Z(t))return t}return this.radiusAxisHelper.dataToPosition([e[this._radiusField[0]]])},this._getRadiusValueEnd=e=>{var t,n;if(this.getGroupFields().length>1){const s=this.radiusAxisHelper.dataToPosition(this.getDatumPositionValues(e,this.getGroupFields()))+((n=(t=this.radiusAxisHelper).getBandwidth)===null||n===void 0?void 0:n.call(t,this._groups?this._groups.fields.length-1:0));if(Z(s))return s}return this.radiusAxisHelper.dataToPosition([e[this._radiusField[0]]])+this.radiusAxisHelper.getScale(0).step()}}getStackGroupFields(){return this.getGroupFields()}getGroupFields(){return this._radiusField}initMark(){super.initMark(),this._initTrackMark(),this._initProgressMark()}initMarkStyle(){super.initMarkStyle(),this._initTrackMarkStyle(),this._initProgressMarkStyle()}_initProgressMark(){var e,t;return this._progressMark=this._createMark(fd.mark.progress,{parent:this._arcGroupMark,isSeriesMark:!0,stateSort:(e=this._spec.progress)===null||e===void 0?void 0:e.stateSort},{setCustomizedShape:(t=this._spec.progress)===null||t===void 0?void 0:t.customShape}),this._progressMark}_initProgressMarkStyle(){var e;const t=this._progressMark;t&&this.setMarkStyle(t,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:this._getAngleValueStart,endAngle:this._getAngleValueEnd,innerRadius:this._getRadiusValueStart,outerRadius:this._getRadiusValueEnd,cap:(e=this._spec.roundCap)!==null&&e!==void 0&&e,boundsMode:"imprecise",cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute(),zIndex:200,forceShowCap:!0},"normal",pe.Series)}initInteraction(){const e=[];this._trackMark&&e.push(this._trackMark),this._progressMark&&e.push(this._progressMark),this._parseInteractionConfig(e)}initTooltip(){super.initTooltip(),this._progressMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._progressMark)}_initTrackMark(){var e,t;return this._trackMark=this._createMark(fd.mark.track,{parent:this._arcGroupMark,stateSort:(e=this._spec.track)===null||e===void 0?void 0:e.stateSort},{setCustomizedShape:(t=this._spec.track)===null||t===void 0?void 0:t.customShape}),this._trackMark}_initTrackMarkStyle(){const e=this._trackMark;e&&this.setMarkStyle(e,{visible:t=>{const n=this.angleAxisHelper.getScale(0).range(),s=Math.min(n[0],n[n.length-1]),r=this._getAngleValueStartWithoutMask(t);return Math.abs(r-s)<=1e-14},x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:()=>{const t=this.getStack()?To:this._angleField[0],n=this.angleAxisHelper.getScale(0).domain();return this._getAngleValueStart({[t]:n[0]})},endAngle:()=>{const t=this.getStack()?Zr:this._angleField[0],n=this.angleAxisHelper.getScale(0).domain();return this._getAngleValueEnd({[t]:n[n.length-1]})},innerRadius:this._getRadiusValueStart,outerRadius:this._getRadiusValueEnd,cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute(),zIndex:100},"normal",pe.Series)}initAnimation(){var e,t,n,s;const r=(t=(e=this._spec)===null||e===void 0?void 0:e.animationAppear)===null||t===void 0?void 0:t.preset;this._progressMark.setAnimationConfig(ft((n=X.getAnimationInKey("circularProgress"))===null||n===void 0?void 0:n({startAngle:this._startAngle},r),kt("progress",this._spec,this._markAttributeContext))),this._trackMark.setAnimationConfig(ft((s=X.getAnimationInKey("fadeInOut"))===null||s===void 0?void 0:s(),kt("track",this._spec,this._markAttributeContext)))}getActiveMarks(){return[this._progressMark]}}fd.type=re.circularProgress,fd.mark=h0t,fd.transformerConstructor=uue;const g0t=()=>{X.registerSeries(fd.type,fd),rg(),cue(),Xu(),qx(),L0()};function hue(i){return()=>i.direction==="vertical"?{orient:"negative"}:{orient:"positive"}}const m0t=i=>({type:i.direction==="horizontal"?"growWidthIn":"growHeightIn",options:hue(i)}),y0t=i=>({type:i.direction==="horizontal"?"growWidthOut":"growHeightOut",options:hue(i)}),_0t={type:"fadeIn"};function v0t(i,e){return e===!1?{}:e==="fadeIn"?_0t:m0t(i)}const b0t=()=>{X.registerAnimation("linearProgress",(i,e)=>({appear:v0t(i,e),enter:{type:"grow"},disappear:y0t(i)}))};class x0t extends ar{enableByType(e){return e!=="dimension"}}const S0t=Object.assign(Object.assign({},Wi),{track:{name:"track",type:"rect"},progress:{name:"progress",type:"rect"},group:{name:"group",type:"group"}});class Rf extends Io{constructor(){super(...arguments),this.type=re.linearProgress,this._progressMark=null,this._trackMark=null,this._defaultProgressCustomShape=(e,t,n)=>{var s,r;const a=(s=this._spec)===null||s===void 0?void 0:s.cornerRadius,o=F(t.width)?t.width:t.x1-t.x,l=F(t.height)?t.height:t.y1-t.y,c=Math.min(0,o),u=Math.max(0,o),h=Math.min(0,l),d=Math.max(0,l);if(a>0){let p=a;if(((r=this._spec)===null||r===void 0?void 0:r.direction)==="vertical"){if(p=Math.min(Math.abs(o/2),a),2*p>Math.abs(l)){const f=Math.acos((p-Math.abs(l)/2)/p);return n.moveTo(c+p,h),n.arc(c+p,h+p,p,1.5*Math.PI,1.5*Math.PI-f,!0),n.arc(c+p,d-p,p,f+Math.PI/2,Math.PI/2,!0),n.lineTo(u-a,d),n.arc(u-p,d-p,p,Math.PI/2,Math.PI/2-f,!0),n.arc(u-p,h+p,p,-Math.PI/2+f,-Math.PI/2,!0),n.lineTo(c+p,h),n.closePath(),n}}else if(p=Math.min(Math.abs(l/2),a),2*p>Math.abs(o)){const f=Math.acos((p-Math.abs(o)/2)/p);return n.moveTo(c,h+p),n.arc(c+p,h+p,p,Math.PI,Math.PI+f),n.arc(u-p,h+p,p,-f,0),n.lineTo(u,d-p),n.arc(u-p,d-p,p,0,f),n.arc(c+p,d-p,p,Math.PI-f,Math.PI),n.closePath(),n}n.moveTo(c,h+p),n.arc(c+p,h+p,p,Math.PI,1.5*Math.PI),n.lineTo(u-p,h),n.arc(u-p,h+p,p,-Math.PI/2,0),n.lineTo(u,d-p),n.arc(u-p,d-p,p,0,Math.PI/2),n.lineTo(c+p,d),n.arc(c+p,d-p,p,Math.PI/2,Math.PI),n.closePath()}else n.moveTo(c,h),n.lineTo(u,h),n.lineTo(u,d),n.lineTo(c,d),n.closePath();return n}}initMark(){this._initTrackMark(),this._initProgressMark()}initMarkStyle(){this._initTrackMarkStyle(),this._initProgressMarkStyle()}_initProgressMark(){var e,t,n;return this._progressMark=this._createMark(Rf.mark.progress,{isSeriesMark:!0,stateSort:(e=this._spec.progress)===null||e===void 0?void 0:e.stateSort},{setCustomizedShape:(n=(t=this._spec.progress)===null||t===void 0?void 0:t.customShape)!==null&&n!==void 0?n:this._defaultProgressCustomShape}),this._progressMark}_initProgressMarkStyle(){var e,t,n,s;const r=this._progressMark;if(r)if(this._spec.direction==="vertical"){const a=this._spec.progress||{},o=(e=a.leftPadding)!==null&&e!==void 0?e:0,l=(t=a.rightPadding)!==null&&t!==void 0?t:0;this.setMarkStyle(r,{x:c=>{var u,h;return Kt(this.dataToPositionX(c),(h=(u=this._xAxisHelper)===null||u===void 0?void 0:u.getScale)===null||h===void 0?void 0:h.call(u,0))-this._spec.bandWidth/2+o},y1:c=>{var u,h;return Kt(this.dataToPositionY(c),(h=(u=this._yAxisHelper)===null||u===void 0?void 0:u.getScale)===null||h===void 0?void 0:h.call(u,0))},y:()=>{var c;return(c=this._yAxisHelper)===null||c===void 0?void 0:c.dataToPosition([0],{bandPosition:this._bandPosition})},width:this._spec.bandWidth-o-l,cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute()},"normal",pe.Series)}else{const a=this._spec.progress||{},o=(n=a.topPadding)!==null&&n!==void 0?n:0,l=(s=a.bottomPadding)!==null&&s!==void 0?s:0;this.setMarkStyle(r,{x1:c=>{var u,h;return Kt(this.dataToPositionX(c),(h=(u=this._xAxisHelper)===null||u===void 0?void 0:u.getScale)===null||h===void 0?void 0:h.call(u,0))},y:c=>{var u,h;return Kt(this.dataToPositionY(c),(h=(u=this._yAxisHelper)===null||u===void 0?void 0:u.getScale)===null||h===void 0?void 0:h.call(u,0))-this._spec.bandWidth/2+o},height:this._spec.bandWidth-o-l,x:()=>{var c;return(c=this._xAxisHelper)===null||c===void 0?void 0:c.dataToPosition([0],{bandPosition:this._bandPosition})},cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute()},"normal",pe.Series)}}_initTrackMark(){var e,t;return this._trackMark=this._createMark(Rf.mark.track,{stateSort:(e=this._spec.track)===null||e===void 0?void 0:e.stateSort},{setCustomizedShape:(t=this._spec.track)===null||t===void 0?void 0:t.customShape}),this._trackMark}_initTrackMarkStyle(){const e=this._trackMark;e&&(this._spec.direction==="vertical"?this.setMarkStyle(e,{x:t=>{var n,s;return Kt(this.dataToPositionX(t),(s=(n=this._xAxisHelper)===null||n===void 0?void 0:n.getScale)===null||s===void 0?void 0:s.call(n,0))-this._spec.bandWidth/2},y:0,width:this._spec.bandWidth,height:()=>this._scaleY.range()[0],cornerRadius:this._spec.cornerRadius},"normal",pe.Series):this.setMarkStyle(e,{x:0,y:t=>{var n,s;return Kt(this.dataToPositionY(t),(s=(n=this._yAxisHelper)===null||n===void 0?void 0:n.getScale)===null||s===void 0?void 0:s.call(n,0))-this._spec.bandWidth/2},height:this._spec.bandWidth,width:()=>this._scaleX.range()[1],cornerRadius:this._spec.cornerRadius},"normal",pe.Series))}initInteraction(){const e=[];this._trackMark&&e.push(this._trackMark),this._progressMark&&e.push(this._progressMark),this._parseInteractionConfig(e)}initAnimation(){var e,t,n,s;const r={direction:this.direction},a=(t=(e=this._spec)===null||e===void 0?void 0:e.animationAppear)===null||t===void 0?void 0:t.preset;this._progressMark.setAnimationConfig(ft((n=X.getAnimationInKey("linearProgress"))===null||n===void 0?void 0:n(r,a),kt("progress",this._spec,this._markAttributeContext))),this._trackMark.setAnimationConfig(ft((s=X.getAnimationInKey("fadeInOut"))===null||s===void 0?void 0:s(),kt("track",this._spec,this._markAttributeContext)))}initTooltip(){this._tooltipHelper=new x0t(this),this._progressMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._progressMark),this._trackMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._trackMark)}getActiveMarks(){return[this._progressMark]}}Rf.type=re.linearProgress,Rf.mark=S0t;const C0t=()=>{Zu(),b0t(),Xu(),X.registerSeries(Rf.type,Rf)},xX=[0],w0t="hidden",SX=20,A0t=[20,40],k0t=[200,500],T0t="circle",E0t={shrink:!1,enlarge:!1,fontSizeLimitMin:0},P0t=!0,CX=1,O0t=["triangleForward","triangle","diamond","square","star","cardioid","circle","pentagon","rect"],M0t=`${Ie}_WORD_CLOUD_TEXT`,I0t=Object.assign(Object.assign({},Wi),{word:{name:"word",type:"text"},fillingWord:{name:"fillingWord",type:"text"},wordMask:{name:"wordMask",type:"rect"}});class Lf extends Mf{constructor(){super(...arguments),this._fontSizeRange=[SX,SX],this._isWordCloudShape=!1,this._dataChange=!0,this.handleMaskCanvasUpdate=(e,t)=>{this._maskCanvas=e},this.getWordColor=e=>e.isFillingWord?(this._fillingColorCallback&&!this._dataChange||(this._fillingColorCallback=this._wordCloudShapeConfig.fillingColorHexField?t=>t[this._wordCloudShapeConfig.fillingColorHexField]:this.initColorCallback(this._wordCloudShapeConfig.fillingSeriesField,!0)),this._fillingColorCallback(e)):(this._keyWordColorCallback&&!this._dataChange||(this._keyWordColorCallback=this._spec.colorHexField?t=>t[this._spec.colorHexField]:this.initColorCallback(this._seriesField,!1)),this._keyWordColorCallback(e)),this._calculateFontWeight=e=>{const t=this.getRawDataStatisticsByField(this._valueField,!0);return t.min===t.max?this._fontWeightRange[0]:this._fontWeightRange[0]+(this._fontWeightRange[this._fontWeightRange.length-1]-this._fontWeightRange[0])*(e[this._valueField]-t.min)/(t.max-t.min)}}setValueField(e){F(e)&&(this._valueField=e)}setFontSizeRange(e){F(e)?this._fontSizeRange=e:this._fontSizeRange=A0t}setAttrFromSpec(){var e,t,n,s,r;super.setAttrFromSpec(),this._padding=this._option.getChart().padding,this._nameField=this._spec.nameField,this._colorMode=(e=this._spec.colorMode)!==null&&e!==void 0?e:"ordinal",this._colorList=this._spec.colorList,this.setValueField(this._spec.valueField),this._fontWeightRange=(t=this._spec.fontWeightRange)!==null&&t!==void 0?t:k0t,this._rotateAngles=(n=this._spec.rotateAngles)!==null&&n!==void 0?n:xX,this.setFontSizeRange(this._spec.fontSizeRange),this._maskShape=(s=this._spec.maskShape)!==null&&s!==void 0?s:T0t,this._textField=!((r=this._spec.word)===null||r===void 0)&&r.formatMethod?M0t:this._nameField;const a=this._spec.wordCloudConfig;this._wordCloudConfig=Object.assign({drawOutOfBound:w0t,layoutMode:"default",zoomToFit:E0t},this._spec.wordCloudConfig),a&&!B(a.layoutMode)||vl(this._option.mode)||(this._wordCloudConfig.layoutMode="fast"),this._wordCloudShapeConfig=Object.assign({fillingSeriesField:this.getSeriesField(),fillingRotateAngles:xX,layoutMode:"default"},this._spec.wordCloudShapeConfig),this._isWordCloudShape=!O0t.includes(this._maskShape)&&!["fast","grid","cloud"].includes(this._wordCloudConfig.layoutMode),this._defaultFontFamily=this._option.getTheme().fontFamily}initData(){var e,t;super.initData(),(t=(e=this.getViewData())===null||e===void 0?void 0:e.target)===null||t===void 0||t.addListener("change",()=>{this._dataChange=!0,this.compile()})}initMark(){var e;!((e=this._spec.wordMask)===null||e===void 0)&&e.visible&&(this._maskMark=this._createMark(Lf.mark.wordMask,{dataView:!1})),this._wordMark=this._createMark(Lf.mark.word,{key:kl,groupKey:this._seriesField,isSeriesMark:!0},{morphElementKey:this._seriesField})}initMarkStyle(){this.initMarkStyleOfWord(this._wordMark,this._spec.word,this._spec.colorHexField,this._seriesField),this._maskMark&&this.setMarkStyle(this._maskMark,{width:()=>this._region.getLayoutRect().width,height:()=>this._region.getLayoutRect().height,background:()=>this._maskCanvas},"normal",pe.Series)}initMarkStyleOfWord(e,t,n,s,r){var a,o;e&&(this.setMarkStyle(e,{text:t!=null&&t.formatMethod?l=>t.formatMethod(l):l=>l[this._textField],x:l=>l.x,y:l=>l.y,fontSize:l=>l.fontSize,fontStyle:l=>l.fontStyle,angle:l=>l.angle,visible:l=>l.visible},"normal",pe.Series),this.setMarkStyle(e,{fill:(o=(a=t==null?void 0:t.style)===null||a===void 0?void 0:a.fill)!==null&&o!==void 0?o:this.getWordColor,fontWeight:l=>l.fontWeight,fontFamily:l=>l.fontFamily},"normal",pe.User_Mark))}initTooltip(){super.initTooltip(),this._wordMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._wordMark)}initAnimation(){[this._wordMark].forEach(e=>{var t,n;if(e){const s=(n=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||n===void 0?void 0:n.preset,r={animationConfig:()=>{var a,o;return(o=(a=e.getAnimationConfig())===null||a===void 0?void 0:a.appear)===null||o===void 0?void 0:o[0]}};e.setAnimationConfig(ft(X.getAnimationInKey("wordCloud")(r,s),kt("word",this._spec,this._markAttributeContext)))}})}getWordOrdinalColorScale(e,t){var n,s,r,a,o;const l=t?this._wordCloudShapeConfig.fillingColorList:this._colorList,c=e?(n=this.getViewData())===null||n===void 0?void 0:n.latestData.map(h=>h[e]):[],u=(r=l??((s=this._option.globalScale.getScale("color"))===null||s===void 0?void 0:s.range()))!==null&&r!==void 0?r:this._getDataScheme();return(o=(a=new Hx().domain(c)).range)===null||o===void 0?void 0:o.call(a,u)}initColorCallback(e,t){var n,s,r,a;if(this._colorMode==="ordinal"){const c=this.getWordOrdinalColorScale(e,t);return u=>c.scale(u[e??Wr])}const o=(n=t?this._colorList:this._wordCloudShapeConfig.fillingColorList)!==null&&n!==void 0?n:this._option.globalScale.getScale("color").range();if(o.length===1)return c=>o[0];if(this._valueField){const c=this.getRawDataStatisticsByField(this._valueField,!0);if(c.min===c.max)return o[0];const u=new Ma().domain([c.min,c.max]).range(o);return h=>u.scale(h[this._valueField])}const l=new Ma().domain([0,(a=(r=(s=this.getViewData())===null||s===void 0?void 0:s.latestData)===null||r===void 0?void 0:r.length)!==null&&a!==void 0?a:1]).range(o);return c=>l.scale(c[Ps])}compile(){super.compile();const{width:e,height:t}=this._region.getLayoutRect();if(!Z(e)||!Z(t)||!(t>0&&e>0))return;const n=[];this._isWordCloudShape?n.push(Object.assign({type:"wordcloudShape"},this._wordCloudShapeTransformOption())):n.push(Object.assign({type:"wordcloud"},this._wordCloudTransformOption())),this._wordMark.getProduct().transform(n)}_getCommonTransformOptions(){var e,t,n,s,r,a;const{width:o,height:l}=this._region.getLayoutRect(),c=(e=this._spec.word)!==null&&e!==void 0?e:{},u=(t=c.style)!==null&&t!==void 0?t:{};return{size:[o,l],shape:Ke(this._maskShape)&&this._maskShape.type==="text"&&B(this._maskShape.fontFamily)?Object.assign({fontFamily:(n=this._option.getTheme())===null||n===void 0?void 0:n.fontFamily},this._maskShape):this._maskShape,onUpdateMaskCanvas:this.handleMaskCanvasUpdate,dataIndexKey:kl,text:c.formatMethod?h=>c.formatMethod(h):{field:this._textField},fontSize:this._valueField?{field:this._valueField}:this._fontSizeRange[0],fontSizeRange:this._fontSizeRange==="auto"?null:this._fontSizeRange,padding:(r=(s=this._spec.word)===null||s===void 0?void 0:s.padding)!==null&&r!==void 0?r:CX,fontFamily:F(this._spec.fontFamilyField)?{field:this._spec.fontFamilyField}:(a=u.fontFamily)!==null&&a!==void 0?a:this._defaultFontFamily,fontWeight:F(this._spec.fontWeightField)?{field:this._spec.fontWeightField}:F(u.fontWeight)?u.fontWeight:F(this._valueField)?this._calculateFontWeight:"normal",fontStyle:F(this._spec.fontStyleField)?{field:this._spec.fontStyleField}:u.fontStyle}}_wordCloudTransformOption(){var e;return Object.assign(Object.assign({},this._getCommonTransformOptions()),{layoutType:this._wordCloudConfig.layoutMode,rotate:this._rotateAngles,randomVisible:(e=this._spec.random)!==null&&e!==void 0?e:P0t,clip:this._wordCloudConfig.drawOutOfBound==="clip",shrink:this._wordCloudConfig.zoomToFit.shrink,enlarge:this._wordCloudConfig.zoomToFit.enlarge,minFontSize:this._wordCloudConfig.zoomToFit.fontSizeLimitMin,progressiveTime:this._wordCloudConfig.progressiveTime,progressiveStep:this._wordCloudConfig.progressiveStep,repeatFill:this._wordCloudConfig.zoomToFit.repeat})}_wordCloudShapeTransformOption(){var e,t,n,s,r,a;const o=(t=(e=this._spec.fillingWord)===null||e===void 0?void 0:e.style)!==null&&t!==void 0?t:{},l=(n=this._wordCloudShapeConfig)!==null&&n!==void 0?n:{};return Object.assign(Object.assign(Object.assign({},l),this._getCommonTransformOptions()),{rotateList:this._rotateAngles,fillingRotateList:l.fillingRotateAngles,fillingFontFamily:F(l.fillingFontFamilyField)?{field:l.fillingFontFamilyField}:(s=o.fontFamily)!==null&&s!==void 0?s:this._defaultFontFamily,fillingPadding:(a=(r=this._spec.fillingWord)===null||r===void 0?void 0:r.padding)!==null&&a!==void 0?a:CX,fillingFontStyle:F(l.fillingFontStyleField)?{field:l.fillingFontStyleField}:o.fontStyle,fillingFontWeight:F(l.fillingFontWeightField)?{field:l.fillingFontWeightField}:o.fontWeight})}getStatisticFields(){const e=[];return e.push({key:this._nameField,operations:["values"]}),e.push({key:this._valueField,operations:["max","min"]}),e}dataToPosition(e){return null}dataToPositionX(e){return null}dataToPositionY(e){return null}dataToPositionZ(e){return null}valueToPosition(e,t){return null}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}onLayoutEnd(e){super.onLayoutEnd(e),this.compile(),this._dataChange=!1}getActiveMarks(){return[this._wordMark]}reInit(){super.reInit(),this._keyWordColorCallback&&(this._keyWordColorCallback=null),this._fillingColorCallback&&(this._fillingColorCallback=null)}}Lf.mark=I0t;const R0t=i=>({custom:tZe,customParameters:(e,t)=>i,easing:"linear",loop:1/0,duration:6e3});function L0t(i,e,t){return i*t<e?i+(e-t*i)/(t-1):(e-i)/(t-1)}const D0t=i=>({channel:{fontSize:{from:0}},duration:200,delay:(e,t,n)=>{const s=i.animationConfig(),r=(s==null?void 0:s.duration)||200,a=(s==null?void 0:s.totalTime)||cc.appear.duration,o=n.VGRAMMAR_ANIMATION_PARAMETERS.elementCount;return n.VGRAMMAR_ANIMATION_PARAMETERS.elementIndex*L0t(r,a,o)}});function F0t(i,e){return e===!1?{}:e==="fadeIn"?{type:"fadeIn"}:D0t(i)}const due=()=>{X.registerAnimation("wordCloud",(i,e)=>({appear:F0t(i,e),enter:{type:"fadeIn"},exit:{type:"fadeOut"},disappear:{type:"fadeOut"}}))},pue=()=>{X.registerAnimation("wordCloud3d",i=>({appear:R0t(i)}))},wX=(i,e)=>"hsl("+(360*Math.random()).toFixed()+","+(30*Math.random()+70).toFixed()+"%,"+(Math.random()*(e-i)+i).toFixed()+"%)";function pp(i){return ee(i)?i:function(){return i}}class F0{constructor(e){var t,n;switch(this.options=se({},F0.defaultOptions,e),ee(this.options.shape)?this.shape=this.options.shape:this.shape=mae(this.options.shape),this.getText=(t=pp(this.options.text))!==null&&t!==void 0?t:s=>s,this.getTextFontWeight=pp(this.options.fontWeight),this.getTextFontSize=pp(this.options.fontSize),this.getTextFontStyle=pp(this.options.fontStyle),this.getTextFontFamily=pp(this.options.fontFamily),this.outputCallback=(n=this.options.outputCallback)!==null&&n!==void 0?n:s=>s,this.options.color){case"random-dark":this.getTextColor=()=>wX(10,50);break;case"random-light":this.getTextColor=()=>wX(50,90);break;default:this.getTextColor=pp(this.options.color)}if(B(this.options.rotate))if(this.options.useRandomRotate){const s=Math.abs(this.options.maxRotation-this.options.minRotation),r=Math.abs(Math.floor(this.options.rotationSteps)),a=Math.min(this.options.maxRotation,this.options.minRotation);this.getTextRotate=()=>this.options.rotateRatio===0||Math.random()>this.options.rotateRatio?0:s===0?a:r>0?a+Math.floor(Math.random()*r)*s/(r-1):a+Math.random()*s}else this.getTextRotate=()=>0;else this.getTextRotate=ee(this.options.rotate)?s=>{var r;return zt((r=this.options.rotate(s))!==null&&r!==void 0?r:0)}:(s,r)=>{const a=q(this.options.rotate),o=this.options.random?Math.random():_Ke(r);return zt(a[Math.floor(o*a.length)])}}canRepeat(){return!1}exceedTime(){var e;return this.options.progressiveStep>0?this.progressiveIndex>=(((e=this.currentStepIndex)!==null&&e!==void 0?e:-1)+1)*this.options.progressiveStep:this.options.progressiveTime>0&&new Date().getTime()-this.escapeTime>this.options.progressiveTime}progressiveRun(){var e;if(this.options.progressiveStep>0?this.currentStepIndex=((e=this.currentStepIndex)!==null&&e!==void 0?e:-1)+1:this.options.progressiveTime>0&&(this.escapeTime=Date.now()),this.data&&this.progressiveIndex<this.data.length){this.progressiveResult=[];let t=this.progressiveIndex,n=0;const s=this.options.maxSingleWordTryCount,r=Math.min(this.options.maxFailCount,this.originalData.length);for(;t<this.data.length&&this.failCount<r;){const a=this.layoutWord(t);if(n++,(a||n>s)&&(t++,n=0,this.failCount=a?0:this.failCount+1),this.progressiveIndex=t,this.exceedTime())break;t===this.data.length&&this.failCount<r&&this.options.repeatFill&&this.canRepeat()&&(this.data=[...this.data,...this.originalData.map(o=>Object.assign(Object.assign({},o),{isFill:!0}))],this.isTryRepeatFill=!0)}return this.progressiveResult}return this.result}initProgressive(){this.failCount=0,this.progressiveIndex=0,this.options.progressiveStep>0?this.currentStepIndex=-1:this.options.progressiveTime>0&&(this.escapeTime=Date.now()),this.progressiveResult=[]}output(){return this.result?this.outputCallback(this.result):null}progressiveOutput(){return this.progressiveResult?this.outputCallback(this.progressiveResult):null}unfinished(){return this.data&&this.data.length&&!B(this.progressiveIndex)&&this.progressiveIndex<this.data.length}release(){this.data=null,this.result=null,this.progressiveIndex=null,this.progressiveResult=null}}F0.defaultOptions={fontFamily:'"Trebuchet MS", "Heiti TC", "", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",fontStyle:"normal",minFontSize:12,drawOutOfBound:!1,shrink:!1,minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotationSteps:0,rotateRatio:.1,random:!1,shape:"circle",progressiveTime:0,progressiveStep:0,repeatFill:!1,fillTextFontSize:12,maxFailCount:20};const AX={archimedean:B0t,rectangular:j0t};function B0t(i){const e=i[0]/i[1];return t=>[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}function j0t(i){const e=4*i[0]/i[1];let t=0,n=0;return s=>{const r=s<0?-1:1;switch(Math.sqrt(1+4*r*s)-r&3){case 0:t+=e;break;case 1:n+=4;break;case 2:t-=e;break;default:n-=4}return[t,n]}}class Jm extends F0{constructor(e){var t;super(se({},Jm.defaultOptions,e)),this.cw=64,this.ch=2048,this._size=[256,256],this._isBoardExpandCompleted=!1,this._placeStatus=0,this._tTemp=null,this._dtTemp=null,this._dy=0,this.cacheMap=new Map,this.options.minFontSize<=Jm.defaultOptions.minFontSize&&(this.options.minFontSize=Jm.defaultOptions.minFontSize),this.spiral=be(this.options.spiral)?(t=AX[this.options.spiral])!==null&&t!==void 0?t:AX.archimedean:this.options.spiral,this.random=this.options.random?Math.random:()=>1,this.getTextPadding=pp(this.options.padding)}zoomRatio(){return this._originSize[0]/this._size[0]}dy(){return this._dy}layoutWord(e){const t=this.data[e];if((""+t.text).trim()==="")return!0;const{maxRadius:n,center:s}=U5(this.options.shape,this._size);if(t.x=s[0],t.y=s[1],N0t(this.contextAndRatio,t,this.data,e,this.cw,this.ch),this._placeStatus=0,t.hasText&&this.place(this._board,t,this._bounds,n))return this.result.push(t),this._bounds?z0t(this._bounds,t):this._bounds=[{x:t.x+t.x0,y:t.y+t.y0},{x:t.x+t.x1,y:t.y+t.y1}],t.x-=this._size[0]>>1,t.y-=this._size[1]>>1,this._tTemp=null,this._dtTemp=null,!0;if(this.updateBoardExpandStatus(t.fontSize),t.hasText&&this.shouldShrinkContinue()){if(this._placeStatus===1){const r=t.fontSize*this._originSize[0]/this.options.minFontSize,a=Math.max(t.width,t.height);if(a<=r)this.expandBoard(this._board,this._bounds,a/this._size[0]);else{if(!this.options.clip)return!0;this.expandBoard(this._board,this._bounds,r/this._size[0])}}else this._placeStatus,this.expandBoard(this._board,this._bounds);return this.updateBoardExpandStatus(t.fontSize),!1}return this._tTemp=null,this._dtTemp=null,!0}layout(e,t){this.initProgressive(),this.result=[],this._size=[t.width,t.height],this.clearCache(),this._originSize=[...this._size];const n=this.getContext(st.createCanvas({width:1,height:1}));this.contextAndRatio=n,this._board=new Array((this._size[0]>>5)*this._size[1]).fill(0),this._bounds=null,e.length,this.result=[];const s=e.map((r,a)=>({text:this.getText(r),fontFamily:this.getTextFontFamily(r),fontStyle:this.getTextFontStyle(r),fontWeight:this.getTextFontWeight(r),angle:this.getTextRotate(r,a),fontSize:~~this.getTextFontSize(r),padding:this.getTextPadding(r),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:r,x:0,y:0,width:0,height:0})).sort(function(r,a){return a.fontSize-r.fontSize});if(this.originalData=s,this.data=s,this.progressiveRun(),!this.options.clip&&this.options.enlarge&&this._bounds&&this.shrinkBoard(this._bounds),this._bounds&&["cardioid","triangle","triangle-upright"].includes(this.options.shape)){const r=(this._bounds[0].y+this._bounds[1].y)/2;this._dy=-(r-this._size[1]/2)}return this.result}formatTagItem(e){const t=this._size,n=this.zoomRatio(),s=this.dy(),r=t[0]>>1,a=t[1]>>1,o=e.length,l=[];let c,u;for(let h=0;h<o;++h)c=e[h],u={},u.datum=c.datum,u.x=(c.x+r)*n,u.y=(c.y+a+s)*n,u.fontFamily=c.fontFamily,u.fontSize=c.fontSize*n,u.fontStyle=c.fontStyle,u.fontWeight=c.fontWeight,u.angle=c.angle,l.push(u);return l}output(){return this.outputCallback?this.outputCallback(this.formatTagItem(this.result)):this.formatTagItem(this.result)}progressiveOutput(){return this.outputCallback?this.outputCallback(this.formatTagItem(this.progressiveResult)):this.formatTagItem(this.progressiveResult)}updateBoardExpandStatus(e){this._isBoardExpandCompleted=e*(this._originSize[0]/this._size[0])<this.options.minFontSize}shouldShrinkContinue(){return!this.options.clip&&this.options.shrink&&!this._isBoardExpandCompleted}shrinkBoard(e){const t=e[0],n=e[1];if(n.x>=this._size[0]||n.y>=this._size[1])return;const s=Math.min(t.x,this._size[0]-n.x),r=Math.min(t.y,this._size[1]-n.y),a=2*Math.min(s/this._size[0],r/this._size[1]);this._size=this._size.map(o=>o*(1-a))}expandBoard(e,t,n){const s=this._size[0]*(n||1.1)-this._size[0]>>5;let r=2*s>2?s:2;r%2!=0&&r++;let a=Math.ceil(this._size[1]*(r<<5)/this._size[0]);a%2!=0&&a++;const o=this._size[0],l=this._size[1],c=new Array(r).fill(0),u=new Array(a/2*(r+(o>>5))).fill(0);this.insertZerosToArray(e,l*(o>>5),u.length+r/2);for(let h=l-1;h>0;h--)this.insertZerosToArray(e,h*(o>>5),c.length);this.insertZerosToArray(e,0,u.length+r/2),this._size=[o+(r<<5),l+a],t&&(t[0].x+=(r<<5)/2,t[0].y+=a/2,t[1].x+=(r<<5)/2,t[1].y+=a/2)}insertZerosToArray(e,t,n){const s=Math.floor(n/6e4),r=n%6e4;for(let a=0;a<s;a++)e.splice(t+6e4*a,0,...new Array(6e4).fill(0));e.splice(t+6e4*s,0,...new Array(r).fill(0))}getContext(e){e.width=1,e.height=1;const t=e.getContext("2d").getImageData(0,0,1,1),n=Math.sqrt(t.data.length>>2);e.width=(this.cw<<5)/n,e.height=this.ch/n;const s=e.getContext("2d");return s.fillStyle=s.strokeStyle="red",s.textAlign="center",{context:s,ratio:n,canvas:e}}place(e,t,n,s){let r=!1;if(this.shouldShrinkContinue()&&(t.width>this._size[0]||t.height>this._size[1]))return this._placeStatus=1,!1;const a=this.random()<.5?1:-1;if(!this.shouldShrinkContinue()&&this.isSizeLargerThanMax(t,a))return null;const o=t.x,l=t.y,c=Math.sqrt(this._size[0]*this._size[0]+this._size[1]*this._size[1]),u=this.spiral(this._size);let h,d,p,f,g=-a;for(this._tTemp=null,this._dtTemp=null;h=u(g+=a);){d=h[0],p=h[1];const m=Math.sqrt(d**2+p**2);let y=Math.atan(p/d);d<0?y+=Math.PI:p<0&&(y=2*Math.PI+y);const b=this.shape(y);if(Math.min(Math.abs(d),Math.abs(p))>=c)break;if(m>=s)r&&this._tTemp===null&&(this._tTemp=g,this._dtTemp=a);else{if(t.x=o+~~(m*b*Math.cos(-y)),t.y=l+~~(m*b*Math.sin(-y)),f=t,this.options.clip)if(this.shouldShrinkContinue()){if(YI(f,this._size)){r&&this._tTemp===null&&(this._tTemp=g,this._dtTemp=a);continue}}else{if(V0t(f,this._size)){r&&this._tTemp===null&&(this._tTemp=g,this._dtTemp=a);continue}YI(f,this._size)&&(f=U0t(f,this._size))}else if(YI(f,this._size)){r&&this._tTemp===null&&(this._tTemp=g,this._dtTemp=a);continue}if(r=!0,(!n||H0t(f,n))&&(!n||!$0t(f,e,this._size))){const x=f.sprite,S=f.width>>5,C=this._size[0]>>5,w=f.x-(S<<4),A=127&w,T=32-A,E=f.y1-f.y0;let P,O=(f.y+f.y0)*C+(w>>5);for(let M=0;M<E;M++){P=0;for(let R=0;R<=S;R++)e[O+R]|=P<<T|(R<S?(P=x[M*S+R])>>>A:0);O+=C}return t.sprite=null,f.sprite=null,!0}}}return this._tTemp!==null&&(this._placeStatus=3),!this.shouldShrinkContinue()&&this.setCache(f,a),!1}clearCache(){this.cacheMap.clear()}setCache(e,t){const n=`${e.angle}-${t}`,s=e.x1-e.x0,r=e.y1-e.y0;if(!this.cacheMap.has(n))return void this.cacheMap.set(n,{width:s,height:r});const{width:a,height:o}=this.cacheMap.get(n);(s<a&&r<o||s<=a&&r<o)&&this.cacheMap.set(n,{width:s,height:r})}isSizeLargerThanMax(e,t){const n=`${e.angle}-${t}`;if(!this.cacheMap.has(n))return!1;const{width:s,height:r}=this.cacheMap.get(n),a=e.x1-e.x0,o=e.y1-e.y0;return a>=s&&o>=r}}function N0t(i,e,t,n,s,r){if(e.sprite)return;const a=i.context,o=i.ratio;a.setTransform(o,0,0,o,0,0),a.clearRect(0,0,(s<<5)/o,r/o);let l=0,c=0,u=0;const h=t.length;let d,p,f,g,m;for(--n;++n<h;){if(e=t[n],a.save(),a.font=e.fontStyle+" "+e.fontWeight+" "+~~((e.fontSize+1)/o)+"px "+e.fontFamily,d=a.measureText(e.text+"m").width*o,f=e.fontSize<<1,e.angle){const x=Math.sin(e.angle),S=Math.cos(e.angle),C=d*S,w=d*x,A=f*S,T=f*x;d=Math.max(Math.abs(C+T),Math.abs(C-T))+31>>5<<5,f=~~Math.max(Math.abs(w+A),Math.abs(w-A))}else d=d+31>>5<<5;if(f>u&&(u=f),l+d>=s<<5&&(l=0,c+=u,u=0),c+f>=r)break;a.translate((l+(d>>1))/o,(c+(f>>1))/o),e.angle&&a.rotate(e.angle),a.fillText(e.text,0,0),e.padding&&(a.lineWidth=2*e.padding,a.strokeText(e.text,0,0)),a.restore(),e.width=d,e.height=f,e.xoff=l,e.yoff=c,e.x1=d>>1,e.y1=f>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,l+=d}const y=a.getImageData(0,0,(s<<5)/o,r/o).data,b=[];for(;--n>=0;){if(!(e=t[n]).hasText)continue;for(d=e.width,p=d>>5,f=e.y1-e.y0,g=0;g<f*p;g++)b[g]=0;if(l=e.xoff,l==null)return;c=e.yoff;let x=0,S=-1;for(m=0;m<f;m++){for(g=0;g<d;g++){const C=p*m+(g>>5),w=y[(c+m)*(s<<5)+(l+g)<<2]?1<<31-g%32:0;b[C]|=w,x|=w}x?S=m:(e.y0++,f--,m--,c++)}e.y1=e.y0+S,e.sprite=b.slice(0,(e.y1-e.y0)*p)}}function $0t(i,e,t){const n=t[0]>>5,s=i.sprite,r=i.width>>5,a=i.x-(r<<4),o=127&a,l=32-o,c=i.y1-i.y0;let u,h=(i.y+i.y0)*n+(a>>5);for(let d=0;d<c;d++){u=0;for(let p=0;p<=r;p++)if((u<<l|(p<r?(u=s[d*r+p])>>>o:0))&e[h+p])return!0;h+=n}return!1}function z0t(i,e){const t=i[0],n=i[1];e.x+e.x0<t.x&&(t.x=e.x+e.x0),e.y+e.y0<t.y&&(t.y=e.y+e.y0),e.x+e.x1>n.x&&(n.x=e.x+e.x1),e.y+e.y1>n.y&&(n.y=e.y+e.y1)}function H0t(i,e){return i.x+i.x1>e[0].x&&i.x+i.x0<e[1].x&&i.y+i.y1>e[0].y&&i.y+i.y0<e[1].y}Jm.defaultOptions={enlarge:!1,minFontSize:2,maxSingleWordTryCount:2};const V0t=(i,e)=>i.x+i.x0>e[0]||i.y+i.y0>e[0]||i.x+i.x1<0||i.y+i.y1<0,YI=(i,e)=>i.x+i.x0<0||i.y+i.y0<0||i.x+i.x1>e[0]||i.y+i.y1>e[1];function U0t(i,e){const t=i.sprite,n=i.y1-i.y0,s=i.width>>5;let r=0;const a=[],o=Math.max(-(i.y0+i.y),0),l=Math.min(n+(e[1]-(i.y1+i.y)),n),c=Math.max(-(i.x0+i.x),0)>>5,u=Math.min(s+(e[0]-(i.x1+i.x)>>5)+1,s);for(let g=0;g<n;g++){for(let m=0;m<s;m++)g<o||l<=g||m<c||u<=m||a.push(t[r+m]);r+=s}const h=c<<5,d=s-u<<5,p=o,f=n-l;return Object.assign(Object.assign({},i),{width:i.width-h-d,height:i.height-p-f,x0:i.x0+h,x1:i.x1-d,y0:i.y0+p,y1:i.y1-f,x:i.x+h/2-d/2,sprite:a})}let fue=class gue extends F0{constructor(e){super(se({},gue.defaultOptions,e)),this.fillGridAt=(t,n)=>{t>=this.ngx||n>=this.ngy||t<0||n<0||(this.grid[t][n]=!1)},this.updateGrid=(t,n,s,r,a)=>{const o=a.occupied;let l=o.length;for(;l--;){const c=t+o[l][0],u=n+o[l][1];c>=this.ngx||u>=this.ngy||c<0||u<0||this.fillGridAt(c,u)}},this.gridSize=Math.max(Math.floor(this.options.gridSize),4)}getPointsAtRadius(e){if(this.pointsAtRadius[e])return this.pointsAtRadius[e];const t=8*e;let n=t;const s=[];for(e===0&&s.push([this.center[0],this.center[1],0]);n--;){const r=this.shape(n/t*2*Math.PI);s.push([this.center[0]+e*r*Math.cos(-n/t*2*Math.PI),this.center[1]+e*r*Math.sin(-n/t*2*Math.PI)*this.options.ellipticity,n/t*2*Math.PI])}return this.pointsAtRadius[e]=s,s}getTextInfo(e,t=1,n){var s;const r=this.options.clip?1:t,a=Math.max(Math.floor((this.isTryRepeatFill?this.options.fillTextFontSize:this.getTextFontSize(e))*r),this.options.minFontSize);let o=this.getText(e)+"";if(this.options.clip&&(o=o.slice(0,Math.ceil(o.length*t))),!o)return null;const l=this.getTextFontWeight(e),c=this.getTextFontStyle(e),u=this.getTextRotate&&(s=this.getTextRotate(e,n))!==null&&s!==void 0?s:0,h=this.getTextFontFamily(e),d=document.createElement("canvas"),p=d.getContext("2d",{willReadFrequently:!0});p.font=c+" "+l+" "+a.toString(10)+"px "+h;const f=p.measureText(o).width,g=Math.max(a,p.measureText("m").width,p.measureText("").width);let m=f+2*g,y=3*g;const b=Math.ceil(m/this.gridSize),x=Math.ceil(y/this.gridSize);m=b*this.gridSize,y=x*this.gridSize;const S=-f/2,C=.4*-g,w=Math.ceil((m*Math.abs(Math.sin(u))+y*Math.abs(Math.cos(u)))/this.gridSize),A=Math.ceil((m*Math.abs(Math.cos(u))+y*Math.abs(Math.sin(u)))/this.gridSize),T=A*this.gridSize,E=w*this.gridSize;d.setAttribute("width",""+T),d.setAttribute("height",""+E),p.scale(1,1),p.translate(T/2,E/2),p.rotate(-u),p.font=c+" "+l+" "+a.toString(10)+"px "+h,p.fillStyle="#000",p.textBaseline="middle",p.fillText(o,S,C);const P=p.getImageData(0,0,T,E).data;if(this.exceedTime())return null;const O=[];let M,R=A;const j=[w/2,A/2,w/2,A/2],I=(D,z,$)=>{let V=this.gridSize;for(;V--;){let L=this.gridSize;for(;L--;)if(P[4*((z*this.gridSize+V)*T+(D*this.gridSize+L))+3])return $.push([D,z]),D<j[3]&&(j[3]=D),D>j[1]&&(j[1]=D),z<j[0]&&(j[0]=z),void(z>j[2]&&(j[2]=z))}};for(;R--;)for(M=w;M--;)I(R,M,O);return{datum:e,occupied:O,bounds:j,gw:A,gh:w,fillTextOffsetX:S,fillTextOffsetY:C,fillTextWidth:f,fillTextHeight:g,fontSize:a,fontStyle:c,fontWeight:l,fontFamily:h,angle:u,text:o}}calculateEmptyRate(){const e=this.ngx*this.ngy;let t=0;for(let n=0;n<this.ngx;n++)for(let s=0;s<this.ngy;s++)this.grid[n][s]&&t++;return t/e}canFitText(e,t,n,s,r){let a=r.length;for(;a--;){const o=e+r[a][0],l=t+r[a][1];if(o>=this.ngx||l>=this.ngy||o<0||l<0){if(!this.options.drawOutOfBound)return!1}else if(!this.grid[o][l])return!1}return!0}layoutWord(e,t=1){const n=this.data[e],s=this.getTextInfo(n,t,e);if(!s||this.exceedTime())return!1;if(!this.options.drawOutOfBound&&(!this.options.shrink||s.fontSize<=this.options.minFontSize)&&!this.options.clip){const o=s.bounds;if(o[1]-o[3]+1>this.ngx||o[2]-o[0]+1>this.ngy)return!1}let r=this.maxRadius+1;const a=o=>{const l=Math.floor(o[0]-s.gw/2),c=Math.floor(o[1]-s.gh/2),u=s.gw,h=s.gh;return!!this.canFitText(l,c,u,h,s.occupied)&&(s.distance=this.maxRadius-r,s.theta=o[2],this.outputText(l,c,s),this.updateGrid(l,c,u,h,s),!0)};for(;r--;){let o=this.getPointsAtRadius(this.maxRadius-r);if(this.options.random&&(o=[].concat(o),Xne(o)),o.some(a))return!0}return(this.options.clip||!!(this.options.shrink&&s.fontSize>this.options.minFontSize))&&this.layoutWord(e,.75*t)}outputText(e,t,n){const s=this.getTextColor(n),r={text:n.text,datum:n.datum,color:s,fontStyle:n.fontStyle,fontWeight:n.fontWeight,fontFamily:n.fontFamily,angle:n.angle,width:n.fillTextWidth,height:n.fillTextHeight,x:(e+n.gw/2)*this.gridSize,y:(t+n.gh/2)*this.gridSize+n.fillTextOffsetY+.5*n.fontSize,fontSize:n.fontSize};this.result.push(r),this.progressiveResult&&this.progressiveResult.push(r)}initGrid(e){this.grid=[];const t=this.options.shape;if(Ke(t)){const n=yae(t,e.width,e.height);let s=n.getContext("2d").getImageData(0,0,this.ngx*this.gridSize,this.ngy*this.gridSize);this.options.onUpdateMaskCanvas&&this.options.onUpdateMaskCanvas(n);let r=yF(t.backgroundColor);const a=(l,c)=>{let u=this.gridSize;for(;u--;){let h=this.gridSize;for(;h--;)if(!r(s,c*this.gridSize+u,l*this.gridSize+h))return void(this.grid[l][c]=!0)}this.grid[l][c]=!1};let o=this.ngx;for(;o--;){this.grid[o]=[];let l=this.ngy;for(;l--;)a(o,l),this.grid[o][l]!==!1&&(this.grid[o][l]=!0)}s=r=void 0}else{let n=this.ngx;for(;n--;){this.grid[n]=[];let s=this.ngy;for(;s--;)this.grid[n][s]=!0}}}canRepeat(){return this.calculateEmptyRate()>.001}layout(e,t){this.initProgressive(),this.drawnCount=0,this.isTryRepeatFill=!1,this.originalData=e,this.data=e,this.pointsAtRadius=[],this.ngx=Math.floor(t.width/this.gridSize),this.ngy=Math.floor(t.height/this.gridSize);const{center:n,maxRadius:s}=U5(this.options.shape,[t.width,t.height]);return this.center=t.origin?[t.origin[0]/this.gridSize,t.origin[1]/this.gridSize]:[n[0]/this.gridSize,n[1]/this.gridSize],this.maxRadius=Math.floor(s/this.gridSize),this.initGrid(t),this.result=[],this.progressiveRun()}};fue.defaultOptions={gridSize:8,ellipticity:1,maxSingleWordTryCount:1};class zO extends F0{constructor(e){super(se({},zO.defaultOptions,e)),this.random=this.options.random?Math.random:()=>0,this.aspectRatio=1}fit(e){for(let t=0,n=this.result.length;t<n;t++)if(W0t(e,this.result[t]))return!1;return!0}getTextInfo(e,t){const n={datum:e,fontSize:this.getTextFontSize(e),fontWeight:this.getTextFontWeight(e),fontStyle:this.getTextFontStyle(e),fontFamily:this.getTextFontFamily(e),angle:this.getTextRotate(e,t),text:this.getText(e)+"",x:this.center[0],y:this.center[1]},s=GP(n);return n.width=s.width(),n.height=s.height(),n.top=this.center[1]-n.height+.21*n.height,n.left=this.center[0]-n.width/2,n}layoutWord(e){const t=this.getTextInfo(this.data[e],e);let n=2*Math.PI,s=0,r=t.left,a=t.top;const o=t.width,l=t.height;let c=1,u=this.fit(t);for(;!u&&s<this.maxRadius;)s+=.5,c=this.shape(s/this.maxRadius*2*Math.PI),n+=.5*(this.options.random?this.random()>.5?1:-1:e%2==0?1:-1),r=this.center[0]-o/2+s*c*Math.cos(n)*this.aspectRatio,a=this.center[1]-l/2+s*c*Math.sin(n),t.left=r,t.top=a,t.x=r+o/2,t.y=a+l/2,u=this.fit(t);return!!u&&!!(this.options.clip||t.left>=0&&t.left+t.width<=this.width&&t.top>=0&&t.top+t.height<=this.height)&&(this.result.push(t),!0)}layout(e,t){if(!(e!=null&&e.length))return[];this.initProgressive(),this.result=[],this.maxRadius=Math.sqrt(t.width*t.width+t.height*t.height)/2,this.center=[t.width/2,t.height/2],this.width=t.width,this.height=t.height,this.data=e.sort((s,r)=>this.getTextFontSize(r)-this.getTextFontSize(s));let n=0;for(;n<e.length&&(this.layoutWord(n),n++,this.progressiveIndex=n,!this.exceedTime()););return this.result}}function W0t(i,e){return!(i.left+i.width<e.left||i.top+i.height<e.top||i.left>e.left+e.width||i.top>e.top+e.height)}zO.defaultOptions={enlarge:!1};const kX={x:"x",y:"y",z:"z",fontFamily:"fontFamily",fontSize:"fontSize",fontStyle:"fontStyle",fontWeight:"fontWeight",angle:"angle"},G0t=(i,e)=>{var t,n,s,r,a,o;if(i.size&&(i.size[0]<=0||i.size[1]<=0))return ii.getInstance().info("Wordcloud size dimensions must be greater than 0"),[];const l=e,c=((t=i.size)!==null&&t!==void 0?t:[500,500]).slice();c[0]=Math.floor(c[0]),c[1]=Math.floor(c[1]);const u=i.fontFamily?rp(i.fontFamily):"sans-serif",h=i.fontStyle?rp(i.fontStyle):"normal",d=i.fontWeight?rp(i.fontWeight):"normal",p=i.rotate?rp(i.rotate):0,f=rp(i.text),g=(n=i.spiral)!==null&&n!==void 0?n:"archimedean",m=i.padding?rp(i.padding):1,y=(s=i.shape)!==null&&s!==void 0?s:"square",b=(r=i.shrink)!==null&&r!==void 0&&r,x=(a=i.enlarge)!==null&&a!==void 0&&a,S=(o=i.clip)!==null&&o!==void 0&&o,C=i.minFontSize,w=i.randomVisible,A=i.as?Object.assign(Object.assign({},kX),i.as):kX,T=i.depth_3d,E=i.postProjection;let P=i.fontSize?rp(i.fontSize):14;const O=i.fontSizeRange;if(O&&!ye(P)){const j=P,I=K0t(X0t(j,l),O);P=D=>I(j(D))}let M=Jm;i.layoutType==="fast"?M=zO:i.layoutType==="grid"&&(M=fue);const R=new M(Object.assign(Object.assign({},i),{text:f,padding:m,spiral:g,shape:y,rotate:p,fontFamily:u,fontStyle:h,fontWeight:d,fontSize:P,shrink:b,clip:S,enlarge:x,minFontSize:C,random:w,outputCallback:j=>{const I=[];let D,z;for(let $=0,V=j.length;$<V;$++)z=j[$],D=z.datum,D[A.x]=z.x,D[A.y]=z.y,D[A.fontFamily]=z.fontFamily,D[A.fontSize]=z.fontSize,D[A.fontStyle]=z.fontStyle,D[A.fontWeight]=z.fontWeight,D[A.angle]=z.angle,E==="StereographicProjection"&&Y0t(c,z,D,A,T),i.dataIndexKey&&(D[i.dataIndexKey]=`${$}`),I.push(D);return I}}));return R.layout(l,{width:c[0],height:c[1]}),i.progressiveStep>0||i.progressiveTime>0?{progressive:R}:R.output()},rp=i=>be(i)||ye(i)||ee(i)||ie(i)?i:e=>e[i.field],qI=i=>i<0?-Math.sqrt(-i):Math.sqrt(i),K0t=(i,e,t)=>{if(i[0]===i[1])return o=>e[0];const n=qI(i[0]),s=qI(i[1]),r=Math.min(n,s),a=Math.max(n,s);return o=>(qI(o)-r)/(a-r)*(e[1]-e[0])+e[0]},X0t=(i,e)=>{let t=1/0,n=-1/0;const s=e.length;let r;for(let a=0;a<s;++a)r=ac(i(e[a])),r<t&&(t=r),r>n&&(n=r);return e.length===1&&t===n&&(t-=1e4),[t,n]};function Y0t(i,e,t,n,s){const r=Math.max(i[0],i[1])/2,a=q0t(i[0],i[1],r,{x:r,y:r,z:s??r},e);t[n.x]=a.x,t[n.y]=a.y,t[n.z]=a.z}function q0t(i,e,t,n,s){const{x:r,y:a}=s,o=r/i*Math.PI*2;let l=Math.PI-a/e*Math.PI;return l+=(l<Math.PI/2?1:-1)*Math.pow(Math.min(l-Math.PI/2,1),2)/5,{x:t*Math.sin(l)*Math.cos(o)+n.x,y:t*Math.cos(l)+n.y,z:t*Math.sin(l)*Math.sin(o)+n.z}}const HO=()=>{Q.registerTransform("wordcloud",{transform:G0t,markPhase:"beforeJoin"},!0)};var Lp;(function(i){i.BEFORE_WORDCLOUD_SHAPE_LAYOUT="beforeWordcloudShapeLayout",i.AFTER_WORDCLOUD_SHAPE_LAYOUT="afterWordcloudShapeLayout",i.AFTER_WORDCLOUD_SHAPE_DRAW="afterWordcloudShapeDraw"})(Lp||(Lp={}));const Z0t=(i,e)=>{if(e.length===1&&e[0]==="#537EF5")return!0;if(!Array.isArray(i)||!Array.isArray(e)||i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0},J0t=()=>{let i=-1;const e=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9];return()=>(i=(i+1)%e.length,e[i])},Q0t=i=>/^[\u4e00-\u9fa5]+$/.test(i),mue=(i,e)=>{if(B(i))return 0;let t=0;for(const n of i)Q0t(n)?t+=1:t+=.53;return t};function e_t(i){return i&&(Wne(i)||Gne(i)||i.startsWith("<svg"))?new Promise((e,t)=>{var n;const s=F5({image:i}),r=(n=s.resources)===null||n===void 0?void 0:n.get(i);r&&r.state==="success"&&r.data?e(r.data):(s.successCallback=()=>{var a;if(s){const o=(a=s.resources)===null||a===void 0?void 0:a.get(i);o&&o.state==="success"&&o.data?e(o.data):t(new Error("image load failed"+i))}else t(new Error("image load failed"+i))},s.failCallback=()=>{ii.getInstance().error("image ",i)})}):null}function t_t(i){return typeof i=="function"?i:function(){return i}}function i_t(i){const{size:e,maskCanvas:t}=i,n=t.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,t.width,t.height),s=new Array(e[0]*e[1]).fill(0);let r=1;const a=[[0,1],[1,0],[-1,0],[0,-1]];let o=[];for(let T=0;T<e[1];T++)for(let E=0;E<e[0];E++)if(s[T*e[0]+E]===0&&!i.isEmptyPixel(n,T,E)){s[T*e[0]+E]=r,o.push([T,E]);for(let P=0;P<o.length;P++)for(let O=0;O<4;O++){let M=o[P][0]+a[O][0],R=o[P][1]+a[O][1];M=M<0?0:M>=e[1]?e[1]-1:M,R=R<0?0:R>=e[0]?e[0]-1:R,s[M*e[0]+R]!==0||i.isEmptyPixel(n,M,R)||(s[M*e[0]+R]=r,o.push([M,R]))}r++,o=[]}const l={},c={},u={},h={},d={},p={},f={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0,width:0,height:0};for(let T=0;T<e[1];T++)for(let E=0;E<e[0];E++){const P=s[T*e[0]+E];P!==0&&(A(T,E)&&(l[P]=l[P]||[],l[P].push([E,T]),h[P]||(h[P]=[1/0,-1/0,1/0,-1/0]),T<h[P][0]&&(h[P][0]=T),T>h[P][1]&&(h[P][1]=T),E<h[P][2]&&(h[P][2]=E),E>h[P][3]&&(h[P][3]=E),E<f.x1&&(f.x1=E),E>f.x2&&(f.x2=E),T<f.y1&&(f.y1=T),T>f.y2&&(f.y2=T)),c[P]=c[P]||0,c[P]++)}const g=[];for(const T in l){const E=l[T],P=~~(E.reduce((D,z)=>D+z[0],0)/E.length),O=~~(E.reduce((D,z)=>D+z[1],0)/E.length);u[T]=[P,O],g.push(...E);const[M,R,j,I]=h[T];d[T]=~~Math.max(Math.sqrt((P-j)**2+(O-M)**2),Math.sqrt((P-I)**2+(O-R)**2),Math.sqrt((P-j)**2+(O-R)**2),Math.sqrt((P-I)**2+(O-M)**2)),p[T]=(I-j)/(R-M)}const m=Object.keys(u).map(T=>({label:T-1,boundary:l[T],area:c[T],center:u[T],maxPoint:h[T],maxR:d[T],ratio:p[T]}));f.width=f.x2-f.x1+1,f.height=f.y2-f.y1+1;const y=~~(g.reduce((T,E)=>T+E[0],0)/g.length),b=~~(g.reduce((T,E)=>T+E[1],0)/g.length),x=~~Math.max(Math.sqrt((y-f.x1)**2+(b-f.y1)**2),Math.sqrt((y-f.x2)**2+(b-f.y2)**2),Math.sqrt((y-f.x1)**2+(b-f.y2)**2),Math.sqrt((y-f.x2)**2+(b-f.y1)**2)),S=f.width/f.height,C=Object.keys(c).reduce((T,E)=>T+c[E],0),w={regions:m,labels:s,labelNumber:r-1};return Object.assign(i,{segmentation:w,shapeBounds:f,shapeMaxR:x,shapeRatio:S,shapeCenter:[y,b],shapeArea:C});function A(T,E){const P=[[0,1],[1,0],[-1,0],[0,-1]];if(T===0||E===0||T===e[1]-1||E===e[0]-1)return!0;for(let O=0;O<4;O++){let M=T+P[O][0],R=E+P[O][1];if(M=M<0?0:M>=e[1]?e[1]-1:M,R=R<0?0:R>=e[0]?e[0]-1:R,s[M*e[0]+R]===0)return!0}return!1}}function n_t(i,e,t){e.width=i.width,e.height=i.height;const n=e.getContext("2d",{willReadFrequently:!0});n.clearRect(0,0,e.width,e.height),n.drawImage(i,0,0);const s=e.width,r=n.getImageData(0,0,e.width,e.height);let a=0,o=r.height,l=0,c=r.width;const u=(p,f)=>{for(let g=0;g<p;++g)if(!t(r,f,g))return!1;return!0},h=(p,f,g)=>{for(let m=f;m<g;++m)if(!t(r,m,p))return!1;return!0};for(;a<o&&u(s,a);)++a;for(;o-1>a&&u(s,o-1);)--o;for(;l<c&&h(l,a,o);)++l;for(;c-1>l&&h(c-1,a,o);)--c;const d=n.getImageData(l,a,c-l,o-a);return e.width=d.width,e.height=d.height,n.clearRect(0,0,e.width,e.height),n.putImageData(d,0,0),e}function s_t(i,e){const t=i.width,n=i.height;let s=e[0]/t;n*s>e[1]&&(s=e[1]/n);const r=Math.floor(s*t),a=Math.floor(s*n);return{x:(e[0]-r)/2,y:(e[1]-a)/2,width:r,height:a,scale:s}}function r_t(i,e){const{segmentation:{regions:t}}=e;let n=-1/0,s=0,r=0;t.forEach((c,u)=>{const h=c.area;h>n&&(n=h,r=u),s+=h});let a=0;t.forEach(c=>{const u=c.area,h=Math.ceil(u/s*i.length),d=u/n;c.words=[],c.regionNum=h,c.regionWeight=d,a+=h}),a<i.length&&(t[r].wordsNum+=i.length-a);let o=r;const l=t.map(c=>c.regionNum);i.forEach(c=>{let u=0,h=0;c.regionIndex=-1;do{if(l[o]>0&&c.weight<=t[o].regionWeight){c.regionIndex=o,t[o].words.push(c),l[o]--,o=(o+1)%t.length;break}o=(o+1)%t.length,u++,h++,h>t.length+1&&(t.forEach(d=>{d.regionWeight+=.15}),h=0)}while(c.regionIndex===-1&&u<3*t.length);c.regionIndex===-1&&(c.regionIndex=r,t[r].words.push(c),l[r]--)}),t.forEach(c=>{c.words.sort((u,h)=>h.weight-u.weight)})}function a_t(i,e,t){const{size:n,stepFactor:s}=e,{segmentation:{regions:r},tempCanvas:a,boardSize:o,shapeCenter:l,shapeMaxR:c,shapeRatio:u}=t,h=z4(t),d=a.getContext("2d",{willReadFrequently:!0});for(const p of r){const{words:f,center:g,maxR:m,ratio:y}=p;for(let b=0;b<f.length;b++){Df(a,d,i,b);const x=f[b];x.x=g[0],x.y=g[1],x.hasText&&x.sprite&&zy(h,x,m,y,n,o,s)&&(x.hasPlaced=!0)}}for(let p=0;p<e.textLayoutTimes;p++){const f=i.filter(g=>(g.hasPlaced||(g.hasText=!1,g.sprite=null,g.fontSize=Math.max(~~(g.fontSize*e.fontSizeShrinkFactor),e.minFontSize)),!g.hasPlaced));if(f.length===0)break;for(let g=0;g<f.length;g++){const m=f[g];Df(a,d,f,g),m.x=l[0],m.y=l[1],m.hasText&&zy(h,m,c,u,n,o,s)&&(m.hasPlaced=!0)}}e.board=h}function yue(i,e,t){const{stepFactor:n,importantWordCount:s,globalShinkLimit:r}=e,{size:a,segmentation:{regions:o},tempCanvas:l,boardSize:c,shapeCenter:u,shapeMaxR:h,shapeRatio:d}=t,p=l.getContext("2d",{willReadFrequently:!0}),f=z4(t);let g=f.slice(0);const m=e.fontSizeShrinkFactor;let y=null,b=1,x=1;const S=s;let C=0;i.length>S&&(C=i.sort((w,A)=>A.weight-w.weight)[S].weight);for(let w=0;w<o.length;w++){const A=o[w],{words:T,center:E,maxR:P,ratio:O}=A;let M=!1;for(let R=0;R<T.length;R++){Df(l,p,i,R);const j=T[R];if(j.x=E[0],j.y=E[1],!j.skip&&j.hasText&&j.sprite&&zy(g,j,P,O,a,c,n))j.hasPlaced=!0;else{if(!j.skip&&j.weight>C&&x>r){const I=j.datum[Symbol.for("vGrammar_id")];I!==y&&(y=I,b=x),x*=m,i.forEach(D=>{D.hasText=!1,D.sprite=null,D.fontSize=D.fontSize*m}),g=f.slice(0),M=!0;break}if(!j.skip&&j.datum[Symbol.for("vGrammar_id")]===y){i.forEach(I=>{I.hasText=!1,I.sprite=null,I.fontSize=I.fontSize/x}),j.skip=!0,x=b,y=null,g=f.slice(0),M=!0;break}}}M&&(w=-1)}for(let w=0;w<e.textLayoutTimes;w++){const A=i.filter(T=>(T.hasPlaced||(T.hasText=!1,T.sprite=null,T.fontSize=Math.max(~~(T.fontSize*e.fontSizeShrinkFactor),e.minFontSize)),!T.hasPlaced));if(A.length===0)break;for(let T=0;T<A.length;T++){const E=A[T];Df(l,p,A,T),E.x=u[0],E.y=u[1],E.hasText&&zy(g,E,h,d,a,c,n)&&(E.hasPlaced=!0)}}e.board=g}function o_t(i,e,t){const{size:n,stepFactor:s,importantWordCount:r}=e,{segmentation:{regions:a},tempCanvas:o,boardSize:l,shapeCenter:c,shapeMaxR:u,shapeRatio:h}=t,d=o.getContext("2d",{willReadFrequently:!0}),p=z4(t);let f=p.slice(0);const g=e.fontSizeEnlargeFactor,m=Math.min(r,i.length);let y=0;i.length>m&&(y=i.sort((C,w)=>w.weight-C.weight)[m-1].weight);let b=0,x=1,S=!1;for(let C=0;C<a.length;C++){const w=a[C],{words:A,center:T,maxR:E,ratio:P}=w;let O=!1;for(let M=0;M<A.length;M++){Df(o,d,i,M);const R=A[M];if(R.x=T[0],R.y=T[1],R.hasText&&R.sprite&&zy(f,R,E,P,n,l,s)){if(R.hasPlaced=!0,R.weight>=y&&b++,b>=m&&!S){x*=g,i.forEach(j=>{j.hasText=!1,j.sprite=null,j.fontSize=j.fontSize*g}),f=p.slice(0),O=!0,b=0;break}}else{if(R.weight>=y&&x>1){i.forEach(j=>{j.hasText=!1,j.sprite=null,j.fontSize=j.fontSize/g}),x/=g,S=!0,f=p.slice(0),O=!0;break}if(R.weight>=y)return yue(i,e,t)}}O&&(C=-1)}for(let C=0;C<e.textLayoutTimes;C++){const w=i.filter(A=>(A.hasPlaced||(A.hasText=!1,A.sprite=null,A.fontSize=Math.max(~~(A.fontSize*e.fontSizeShrinkFactor),e.minFontSize)),!A.hasPlaced));if(w.length===0)break;for(let A=0;A<w.length;A++){const T=w[A];Df(o,d,w,A),T.x=c[0],T.y=c[1],T.hasText&&zy(f,T,u,h,n,l,s)&&(T.hasPlaced=!0)}}e.board=f}function zy(i,e,t,n,s,r,a){const o=e.x,l=e.y,c=l_t(n),u=1*a;let h,d,p,f=-u;for(;h=c(f+=u);){const{wordSize:g,bounds:{dTop:m,dBottom:y,dLeft:b,dRight:x}}=e;if(d=h[0],p=h[1],Math.min(Math.abs(d),Math.abs(p))>=t)break;if(e.x=~~(o+d),e.y=~~(l+p),!(e.x-b<0||e.x+x>s[0]||e.y-m<0||e.y+y>s[1]||vue(e,i,r)))return _ue(e,i,r),!0}return!1}function _ue(i,e,t){const{wordSize:n}=i,s=i.sprite,r=n[0]>>5,a=t[0]>>5,o=i.x-(r<<4),l=o%32,c=32-l,u=n[1];let h,d=(i.y-(n[1]>>1))*a+(o>>5);if(l===0)for(let p=0;p<u;p++){for(let f=0;f<r;f++)e[d+f]|=s[p*r+f];d+=a}else for(let p=0;p<u;p++){h=0;for(let f=0;f<=r;f++)e[d+f]|=h<<c|(f<r?(h=s[p*r+f])>>>l:0);d+=a}}function vue(i,e,t){const{sprite:n,wordSize:s}=i,r=t[0]>>5,a=s[0]>>5,o=i.x-(a<<4),l=o%32,c=32-l,u=s[1];let h,d=(i.y-(s[1]>>1))*r+(o>>5);if(l===0)for(let p=0;p<u;p++){for(let f=0;f<a;f++)if(e[d+f]&n[p*a+f])return!0;d+=r}else for(let p=0;p<u;p++){h=0;for(let f=0;f<=a;f++)if((h<<c|(f<a?(h=n[p*a+f])>>>l:0))&e[d+f])return!0;d+=r}return!1}function l_t(i){return function(e){return[i*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function Df(i,e,t,n){if(t[n].sprite||t[n].fontSize===0)return;const s=2048,r=Math.PI/180,a=t.length;i.width=s,i.height=2048,e.clearRect(0,0,s,2048),e.textAlign="center";let o,l,c=0,u=0,h=0,d=0;const p=n;for(--n;++n<a;){const y=t[n],b=Math.max(y.fontSize,2);if(e.save(),e.font=y.fontStyle+" "+y.fontWeight+" "+b+"px "+y.fontFamily,o=e.measureText(y.text+"m").width+2*y.padding,l=2*b+2*y.padding,y.rotate!==0){const x=Math.sin(y.rotate*r),S=Math.cos(y.rotate*r),C=o*S,w=o*x,A=l*S,T=l*x;o=Math.max(Math.abs(C+T),Math.abs(C-T)),l=~~Math.max(Math.abs(w+A),Math.abs(w-A))}if(o=o+31>>5<<5,l=Math.ceil(l),l>h&&(h=l),c+o>=s&&(c=0,u+=h,h=l),u+l>=2048){if(u===0){y.hasText=!1;continue}break}u+l>=d&&(d=u+l),e.translate(c+(o>>1),u+(l>>1)),y.rotate!==0&&e.rotate(y.rotate*r),e.fillText(y.text,0,0),y.padding&&(e.lineWidth=2*y.padding,e.strokeText(y.text,0,0)),e.restore(),y.LT=[c,u],y.wordSize=[o,l],y.hasText=!0,c+=o}if(d===0)return;const f=e.getImageData(0,0,s,d).data;let g,m;for(;--n>=p;){const y=t[n];if(!y.hasText){y.bounds={dTop:1/0,dBottom:-1/0,dLeft:1/0,dRight:-1/0};break}const{LT:b=[0,0],wordSize:x}=y;[c,u]=b;const S=x[0]>>5,C=new Array(S*x[1]).fill(0);let[w,A,T,E]=[1/0,-1/0,1/0,-1/0];for(m=0;m<x[1];m++){let P;for(g=0;g<x[0];g++)if(f[4*((u+m)*s+(c+g))+3]>0){const O=1<<31-g%32;C[S*m+(g>>5)]|=O,g<T&&(T=g),g>E&&(E=g),P|=O}P&&(m<w&&(w=m),m>A&&(A=m))}y.bounds={dTop:(x[1]>>1)-w,dBottom:A-(x[1]>>1),dLeft:(x[0]>>1)-T,dRight:E-(x[0]>>1)},y.sprite=C,delete y.LT}}function z4(i){const{segmentation:{labels:e},boardSize:t,size:n}=i,s=t[0]>>5,r=new Array(s*n[1]).fill(0);for(let a=0;a<n[1];a++)for(let o=0;o<n[0];o++)if(e[a*n[0]+o]===0){const l=1<<31-o%32;r[s*a+(o>>5)]|=l}if(t[0]>n[0]){const a=(1<<t[0]-n[0])-1;for(let o=0;o<n[1];o++)r[s*o+s-1]|=a}return r}function c_t(i,e,t){const{size:n,fillingTimes:s,fillingXStep:r,fillingYStep:a,getFillingFontStyle:o,getFillingFontWeight:l,getFillingFontFamily:c,fillingInitialFontSize:u,fillingDeltaFontSize:h,fillingInitialOpacity:d,fillingDeltaOpacity:p,fillingRotateList:f,getFillingPadding:g,random:m,board:y,minFillFontSize:b}=e,{boardSize:x,shapeBounds:S,tempCanvas:C,randomGenerator:w}=t,A=C.getContext("2d",{willReadFrequently:!0});let T=u,E=d;const P=[];for(let R=0;R<s;R++)O(T,E),T=Math.max(T>h?T-h:h,b),E=E>p?E-p:p;return P;function O(R,j){const I=i.map(W=>{const{text:ce,color:he,fillingColor:le,hasPlaced:de,datum:te}=W;return{x:0,y:0,weight:0,text:ce,fontFamily:c(te),fontStyle:o(te),fontWeight:l(te),fontSize:R,rotate:f[~~(w()*f.length)],padding:g(te),opacity:j,visible:!0,color:he,fillingColor:le,hasPlaced:de,datum:te}});M(I);let D=0;const{x1:z,y1:$,x2:V,y2:L}=S,[Y,ae]=[z+~~(w()*r*2),$+~~(w()*a*2)];for(let W=ae;W<=L;W+=a)for(let ce=Y;ce<=V;ce+=r){Df(C,A,I,D);const he=I[D];he.x=ce,he.y=W;const{wordSize:le,bounds:de,hasPlaced:te}=he;if(!te||!de){++D===I.length&&(D=0,m&&M(I));continue}const{dTop:me,dBottom:Be,dLeft:ve,dRight:Re}=de;he.x-ve<0||he.x+Re>n[0]||he.y-me<0||he.y+Be>n[1]||he.hasText&&he.sprite&&!vue(he,y,x)&&(_ue(he,y,x),P.push(Object.assign({},he)),++D===I.length&&(D=0,m&&M(I)))}}function M(R){return R.sort(()=>w()-.5)}}function u_t(i,e,t){r_t(i,t),e.layoutMode==="ensureMapping"?yue(i,e,t):e.layoutMode==="ensureMappingEnlarge"?o_t(i,e,t):a_t(i,e,t);const n=c_t(i,e,t),s=[],r=[];for(let a=0;a<i.length;a++)i[a].hasPlaced?r.push(i[a]):s.push(i[a]);return s.forEach(a=>a.visible=!1),{fillingWords:n,successedWords:r,failedWords:s}}const TX={x:"x",y:"y",fontFamily:"fontFamily",fontSize:"fontSize",fontStyle:"fontStyle",fontWeight:"fontWeight",angle:"angle",opacity:"opacity",visible:"visible",isFillingWord:"isFillingWord",color:"color"};class h_t{constructor(e,t){this.progressiveResult=[],this.options=e,this.view=t}layout(e){this.data=e;const t=this.options,n={shapeUrl:t.shape,size:t.size,ratio:t.ratio||.8,tempCanvas:void 0,boardSize:[0,0],random:!1,randomGenerator:void 0},s=st.createCanvas({width:t.size[0],height:t.size[1]}),r=s.getContext("2d",{willReadFrequently:!0});r.textAlign="center",r.textBaseline="middle",n.tempCanvas=s;const a=t.size[0]+31>>5<<5;if(n.boardSize=[a,t.size[1]],n.random?n.randomGenerator=Math.random:n.randomGenerator=J0t(),this.segmentationInput=n,be(n.shapeUrl)){n.isEmptyPixel=yF();const o=e_t(n.shapeUrl);o?(this.isImageFinished=!1,this.isLayoutFinished=!1,o.then(l=>{this.isImageFinished=!0;const c=st.createCanvas({width:t.size[0],height:t.size[1],dpr:1});n.maskCanvas=c;const u=c.getContext("2d");t.removeWhiteBorder&&n_t(l,c,n.isEmptyPixel);const h=s_t(l,t.size);u.clearRect(0,0,t.size[0],t.size[1]),u.drawImage(l,h.x,h.y,h.width,h.height),this.options.onUpdateMaskCanvas&&this.options.onUpdateMaskCanvas(n.maskCanvas)}).catch(l=>{this.isImageFinished=!0})):(this.isImageFinished=!0,this.isLayoutFinished=!0)}else if(n.shapeUrl&&(n.shapeUrl.type==="text"||n.shapeUrl.type==="geometric")){n.isEmptyPixel=yF(n.shapeUrl.backgroundColor);const o=yae(n.shapeUrl,t.size[0],t.size[1]);n.maskCanvas=o,this.options.onUpdateMaskCanvas&&this.options.onUpdateMaskCanvas(o),this.doLayout(),this.isImageFinished=!0,this.isLayoutFinished=!0}}canAnimate(){return!0}unfinished(){return!this.isLayoutFinished}output(){return this.progressiveResult}progressiveRun(){this.isImageFinished&&!this.isLayoutFinished&&(this.segmentationInput.maskCanvas&&this.doLayout(),this.isLayoutFinished=!0)}progressiveOutput(){return this.progressiveResult}doLayout(){var e,t,n,s,r,a,o,l,c,u,h,d,p,f,g,m,y,b,x,S,C,w;const A=this.segmentationInput,T=i_t(A);if(!T.segmentation.regions.length)return;const E=this.options,P=this.data,O=E.colorMode||"ordinal",M={getText:dr(E.text),getFontSize:dr(E.fontSize),fontSizeRange:E.fontSizeRange,colorMode:O,getColor:E.colorField?dr(E.colorField):dr(E.text),getFillingColor:dr(E.fillingColorField),colorList:E.colorList||(O==="ordinal"?["#2E62F1"]:["#537EF5","#2E62F1","#2358D8","#184FBF","#0C45A6","#013B8E"]),getColorHex:dr(E.colorHexField),getFontFamily:dr(E.fontFamily||"sans-serif"),rotateList:E.rotateList||[0],getPadding:dr(E.padding||1),getFontStyle:dr(E.fontStyle||"normal"),getFontWeight:dr(E.fontWeight||"normal"),getFontOpacity:E.fontOpacity?dr(E.fontOpacity):()=>1};p_t(P,M,T);const R={size:E.size,ratio:E.ratio||.8,shapeUrl:E.shape,random:E.random===void 0||E.random,textLayoutTimes:(e=E.textLayoutTimes)!==null&&e!==void 0?e:3,removeWhiteBorder:E.removeWhiteBorder,layoutMode:(t=E.layoutMode)!==null&&t!==void 0?t:"default",fontSizeShrinkFactor:(n=E.fontSizeShrinkFactor)!==null&&n!==void 0?n:.8,stepFactor:(s=E.stepFactor)!==null&&s!==void 0?s:1,importantWordCount:(r=E.importantWordCount)!==null&&r!==void 0?r:10,globalShinkLimit:E.globalShinkLimit||.2,fontSizeEnlargeFactor:(a=E.fontSizeEnlargeFactor)!==null&&a!==void 0?a:1.5,fillingRatio:(o=E.fillingRatio)!==null&&o!==void 0?o:.7,fillingTimes:(l=E.fillingTimes)!==null&&l!==void 0?l:4,fillingXStep:E.fillingXRatioStep?Math.max(Math.floor(E.size[0]*E.fillingXRatioStep),1):(c=E.fillingXStep)!==null&&c!==void 0?c:4,fillingYStep:E.fillingYRatioStep?Math.max(Math.floor(E.size[1]*E.fillingYRatioStep),1):(u=E.fillingYStep)!==null&&u!==void 0?u:4,fillingInitialFontSize:E.fillingInitialFontSize,fillingDeltaFontSize:E.fillingDeltaFontSize,fillingInitialOpacity:(h=E.fillingInitialOpacity)!==null&&h!==void 0?h:.8,fillingDeltaOpacity:(d=E.fillingDeltaOpacity)!==null&&d!==void 0?d:.05,getFillingFontFamily:dr(E.fillingFontFamily||"sans-serif"),getFillingFontStyle:dr(E.fillingFontStyle||"normal"),getFillingFontWeight:dr(E.fillingFontWeight||"normal"),getFillingPadding:dr((p=E.fillingPadding)!==null&&p!==void 0?p:.4),fillingRotateList:(f=E.fillingRotateList)!==null&&f!==void 0?f:[0,90],fillingDeltaFontSizeFactor:(g=E.fillingDeltaFontSizeFactor)!==null&&g!==void 0?g:.2,fillingColorList:E.fillingColorList||["#537EF5"],sameColorList:!1,minInitFontSize:(m=E.minInitFontSize)!==null&&m!==void 0?m:10,minFontSize:(y=E.minFontSize)!==null&&y!==void 0?y:4,minFillFontSize:(b=E.minFillFontSize)!==null&&b!==void 0?b:2},j=Z0t(M.colorList,R.fillingColorList);R.sameColorList=j,d_t(P,M,R,E),f_t(P,M,R,T);const{getText:I,getFontFamily:D,getFontStyle:z,getFontWeight:$,getPadding:V,getColor:L,getFillingColor:Y,getColorHex:ae,fontSizeScale:W,colorScale:ce,fillingColorScale:he,getFontOpacity:le,rotateList:de}=M,te=P.map(Me=>{var Ot,Gi;return{x:0,y:0,weight:0,text:I(Me),fontFamily:D(Me),fontWeight:$(Me),fontStyle:z(Me),rotate:de[~~(A.randomGenerator()*de.length)],fontSize:Math.max(R.minInitFontSize,~~W(Me)),opacity:le(Me),padding:V(Me),color:ae&&ae(Me)||ce&&ce(L(Me))||"black",fillingColor:!Y||((Ot=E.colorField)===null||Ot===void 0?void 0:Ot.field)===((Gi=E.fillingColorField)===null||Gi===void 0?void 0:Gi.field)&&j?void 0:ae&&ae(Me)||he&&he(Y(Me))||"black",datum:Me,visible:!0,hasPlaced:!1}}),me=an(te.map(Me=>Me.fontSize));te.forEach(Me=>Me.weight=Me.fontSize/me),te.sort((Me,Ot)=>Ot.weight-Me.weight);const{fillingWords:Be,successedWords:ve,failedWords:Re}=u_t(te,R,T),Qe=(S=(x=E.text)===null||x===void 0?void 0:x.field)!==null&&S!==void 0?S:"textKey",Lt=(C=E.dataIndexKey)!==null&&C!==void 0?C:"defaultDataIndexKey",Ue=E.as?Object.assign(Object.assign({},TX),E.as):TX;let je,ut;const vt=[];for(let Me=0;Me<te.length;++Me)je=te[Me],ut=je.datum,ut[Ue.x]=je.x,ut[Ue.y]=je.y,ut[Ue.fontFamily]=je.fontFamily,ut[Ue.fontSize]=je.fontSize,ut[Ue.fontStyle]=je.fontStyle,ut[Ue.fontWeight]=je.fontWeight,ut[Ue.angle]=zt(je.rotate),ut[Ue.opacity]=je.opacity,ut[Ue.visible]=je.visible,ut[Ue.isFillingWord]=!1,ut[Ue.color]=je.color,ut[Lt]=`${je.text}_${Me}_keyword`,vt.push(ut);const si=[];if(Be.forEach((Me,Ot)=>{var Gi,Jn;const lt=Object.assign({},Me.datum);lt[Ue.x]=Me.x,lt[Ue.y]=Me.y,lt[Ue.fontFamily]=Me.fontFamily,lt[Ue.fontSize]=Me.fontSize,lt[Ue.fontStyle]=Me.fontStyle,lt[Ue.fontWeight]=Me.fontWeight,lt[Ue.angle]=zt(Me.rotate),lt[Ue.opacity]=Me.opacity,lt[Ue.visible]=Me.visible,lt[Ue.isFillingWord]=!0,lt[Ue.color]=Y?((Gi=E.colorField)===null||Gi===void 0?void 0:Gi.field)===((Jn=E.fillingColorField)===null||Jn===void 0?void 0:Jn.field)&&j?Me.color:Me.fillingColor:R.fillingColorList[~~(A.randomGenerator()*R.fillingColorList.length)],lt[Qe]=Me.text,lt[Lt]=`${Me.text}_${Ot}_fillingWords`,si.push(lt)}),this.view&&this.view.emit){this.view.emit(Lp.AFTER_WORDCLOUD_SHAPE_LAYOUT,{successedWords:ve,failedWords:Re});const Me=(w=this.view.renderer)===null||w===void 0?void 0:w.stage();Me&&Me.hooks.afterRender.tap(Lp.AFTER_WORDCLOUD_SHAPE_DRAW,()=>{this.view.emit(Lp.AFTER_WORDCLOUD_SHAPE_DRAW,{successedWords:ve,failedWords:Re}),Me.hooks.afterRender.unTap(Lp.AFTER_WORDCLOUD_SHAPE_DRAW)})}this.progressiveResult=vt.concat(si)}release(){this.segmentationInput=null,this.data=null,this.progressiveResult=null,this.options=null}}const d_t=(i,e,t,n)=>{var s,r,a,o;const{colorMode:l,getColor:c,getFillingColor:u}=e,{sameColorList:h}=t;let d,p,f=e.colorList,g=t.fillingColorList;if(l==="ordinal"){const m=i.map(y=>c(y));if(d=y=>new bf().domain(m).range(f).scale(y),u&&(((s=n.colorField)===null||s===void 0?void 0:s.field)!==((r=n.fillingColorField)===null||r===void 0?void 0:r.field)||!h)){const y=i.map(b=>u(b));p=b=>new bf().domain(y).range(g).scale(b)}}else{f.length===1&&(f=[f[0],f[0]]);const m=new Ma().domain(Mv(c,i)).range(f);if(d=y=>m.scale(y),u&&(((a=n.colorField)===null||a===void 0?void 0:a.field)!==((o=n.fillingColorField)===null||o===void 0?void 0:o.field)||!h)){g.length===1&&(g=[g[0],g[0]]);const y=new Ma().domain(Mv(u,i)).range(g);p=b=>y.scale(b)}}Object.assign(e,{colorScale:d,fillingColorScale:p})},p_t=(i,e,t)=>{let{fontSizeRange:n}=e;const{getFontSize:s,getText:r}=e;let a;if(s){if(s&&n){const o=new sT().domain(Mv(s,i)).range(n);a=l=>o.scale(s(l))}else if(s&&ee(s)&&!n){const[l,c]=Mv(s,i),u=i.map(p=>({text:r(p),value:s(p),weight:c===l?1:(s(p)-l)/(c-l)})),h=EX(u,t,!0);n=[~~(.5*h),~~h];const d=new sT().domain(Mv(s,i)).range(n);a=p=>d.scale(s(p))}}else{const o=i.map(c=>({text:r(c)})),l=EX(o,t,!1);a=t_t(l)}Object.assign(e,{getFontSize:s,fontSizeRange:n,fontSizeScale:a})},EX=(i,e,t)=>{const n=e.shapeArea,s=e.ratio,r=e.segmentation.regions,a=Math.ceil(Math.sqrt(n)/12),o=i.reduce((c,u)=>{const h=mue(u.text);return h<a?c+h*(t?(.5+.5*u.weight)**2:1):c},0);if(o===0)return 12;let l=20;if(r.length===1)l=Math.sqrt(s*(n/(1.7*o)));else{const c=[];for(let u=0;u<r.length;u++){const h=r[u].area,d=r[u].ratio,p=h/n;if(p<.1)continue;const f=p*(o*(d<1?2.7-d:1.7)),g=Math.sqrt(s*(h/f));c.push(g)}l=c.length?Math.min(...c):Math.sqrt(s*(n/(1.7*o)))}return l};function f_t(i,e,t,n){const{getText:s}=e;let{fillingInitialFontSize:r,fillingDeltaFontSize:a}=t;const{fillingRatio:o}=t,l=Math.ceil(Math.sqrt(n.shapeArea)/4);if(!r||!a){const c=o/100,u=i.reduce((d,p)=>{const f=mue(s(p));return f>l?d:d+f},0)/i.length;let h;if(u===0)h=8;else{const d=.2*n.shapeArea;h=Math.sqrt(c*(d/u))}r=~~h,a=h*t.fillingDeltaFontSizeFactor,Object.assign(t,{fillingInitialFontSize:r,fillingDeltaFontSize:a})}}const Mv=(i,e)=>{let t=1/0,n=-1/0;const s=e.length;let r;for(let a=0;a<s;++a)r=ac(i(e[a])),r<t&&(t=r),r>n&&(n=r);return e.length===1&&t===n&&(t-=1e4),[t,n]},dr=i=>i?typeof i=="string"||typeof i=="number"?()=>i:ee(i)?i:e=>e[i.field]:null,g_t=(i,e,t,n)=>{if(!i.size||B(i.size[0])||B(i.size[1])||i.size[0]<=0||i.size[1]<=0)return ii.getInstance().info("Wordcloud size dimensions must be greater than 0"),[];if(i.size=[Math.ceil(i.size[0]),Math.ceil(i.size[1])],i.shape||Vp("WordcloudShape shape must be specified."),i.text||Vp("WordcloudShape text must be specified."),n!=null&&n.emit&&n.emit(Lp.BEFORE_WORDCLOUD_SHAPE_LAYOUT),!e||e.length===0)return[];const s=new h_t(i,n);return s.layout(e),s.unfinished()?{progressive:s}:s.output()},bue=()=>{Q.registerTransform("wordcloudShape",{transform:g_t,markPhase:"beforeJoin"},!0)};class E1 extends Lf{constructor(){super(...arguments),this.type=re.wordCloud}}E1.type=re.wordCloud;const xue=()=>{HO(),ta(),due(),X.registerSeries(E1.type,E1)},m_t=()=>{bue(),HO(),ta(),due(),X.registerSeries(E1.type,E1)};class P1 extends Lf{constructor(){super(...arguments),this.type=re.wordCloud3d}_wordCloudTransformOption(){var e;return Object.assign(Object.assign({},super._wordCloudTransformOption()),{postProjection:(e=this._spec.postProjection)!==null&&e!==void 0?e:"StereographicProjection",depth_3d:this._spec.depth_3d})}_wordCloudShapeTransformOption(){var e;return Object.assign(Object.assign({},super._wordCloudShapeTransformOption()),{postProjection:(e=this._spec.postProjection)!==null&&e!==void 0?e:"StereographicProjection",depth_3d:this._spec.depth_3d})}initMark(){this._wordMark=this._createMark(Lf.mark.word,{groupKey:this._seriesField,isSeriesMark:!0},{support3d:!0})}initMarkStyle(){super.initMarkStyle();const e=this._wordMark;e&&this.setMarkStyle(e,{z:t=>{var n;return(n=t.z)!==null&&n!==void 0?n:0}},"normal",pe.Series)}initAnimation(){var e,t;const n=(e=this._padding)!==null&&e!==void 0?e:{};this._wordMark&&this._wordMark.setAnimationConfig(ft((t=X.getAnimationInKey("wordCloud3d"))===null||t===void 0?void 0:t(()=>{var s;const r=this.getCompiler().getVGrammarView(),a=r.width()-n.left||0-n.right||0,o=r.height()-n.top||0-n.bottom||0,l=Math.max(a,o)/2;return{center:{x:l,y:l,z:(s=this._spec.depth_3d)!==null&&s!==void 0?s:l},r:l}}),kt("word",this._spec,this._markAttributeContext)))}}P1.type=re.wordCloud3d;const Sue=()=>{HO(),ta(),pue(),X.registerSeries(P1.type,P1)},y_t=()=>{bue(),HO(),ta(),pue(),X.registerSeries(P1.type,P1)},__t=(i,e)=>{var t,n;const s=i.map(C=>Object.assign({},C));if(!s||s.length===0)return s;const{valueField:r,asTransformRatio:a,asReachRatio:o,asHeightRatio:l,asValueRatio:c,asNextValueRatio:u,asLastValueRatio:h,asLastValue:d,asCurrentValue:p,asNextValue:f,heightVisual:g=!1,isCone:m=!0,range:y}=e,b=s.reduce((C,w)=>Math.max(C,Number.parseFloat(w[r])||-1/0),-1/0),x=s.reduce((C,w)=>Math.min(C,Number.parseFloat(w[r])||1/0),1/0),S=[(t=y==null?void 0:y.min)!==null&&t!==void 0?t:x,(n=y==null?void 0:y.max)!==null&&n!==void 0?n:b];return s.forEach((C,w)=>{var A,T;const E=Number.parseFloat(C[r]),P=Number.parseFloat((A=s[w-1])===null||A===void 0?void 0:A[r]),O=Number.parseFloat((T=s[w+1])===null||T===void 0?void 0:T[r]),M=Z(O*E)&&E!==0?O/E:0,R=Z(E*P)&&P!==0?E/P:0;d&&(C[d]=P),f&&(C[f]=O),a&&(C[a]=M),o&&(C[o]=w===0?1:R),l&&(C[l]=g===!0?M:1/s.length),c&&(C[c]=E/S[1]),u&&(C[u]=w===s.length-1?m?0:C[c]:O/S[1]),h&&(C[h]=w===0?1:P/S[1]),p&&(C[p]=E)}),s},v_t=(i,e)=>{var t,n;const s=(n=(t=i[0])===null||t===void 0?void 0:t.latestData)===null||n===void 0?void 0:n.map(r=>Object.assign({},r));return s&&s.length!==0&&(s.shift(),s.forEach(r=>{r[e.asIsTransformLevel]=!0})),s},b_t=`${Ie}_FUNNEL_TRANSFORM_RATIO`,CB=`${Ie}_FUNNEL_REACH_RATIO`,x_t=`${Ie}_FUNNEL_HEIGHT_RATIO`,xC=`${Ie}_FUNNEL_VALUE_RATIO`,PX=`${Ie}_FUNNEL_LAST_VALUE_RATIO`,OX=`${Ie}_FUNNEL_NEXT_VALUE_RATIO`,S_t=`${Ie}_FUNNEL_LAST_VALUE`,C_t=`${Ie}_FUNNEL_CURRENT_VALUE`,w_t=`${Ie}_FUNNEL_NEXT_VALUE`,MX=`${Ie}_FUNNEL_TRANSFORM_LEVEL`,A_t=20,ap=5,k_t="80%",T_t=0;class E_t extends ar{constructor(){super(...arguments),this.dimensionTooltipTitleCallback=(e,t)=>{var n,s,r;const a=this.series;return((n=t==null?void 0:t.mark)===null||n===void 0?void 0:n.name)==="transform"?"":(s=this._getDimensionData(e))!==null&&s!==void 0?s:(r=e.properties)===null||r===void 0?void 0:r[`${a.getCategoryField()}`]},this.markTooltipValueCallback=(e,t)=>{var n;return((n=t==null?void 0:t.mark)===null||n===void 0?void 0:n.name)==="transform"?`${(100*(e==null?void 0:e[CB])).toFixed(1)}%`:this._getMeasureData(e)},this.markTooltipKeyCallback=(e,t)=>{var n;if(((n=t==null?void 0:t.mark)===null||n===void 0?void 0:n.name)==="transform")return"";const{dimensionFields:s,seriesFields:r}=this._seriesCacheInfo,a=s[s.length-1];return F(r[0])?e==null?void 0:e[r[0]]:e==null?void 0:e[a]}}}class Cue extends Rs{_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{points:[]})}}class O1 extends Cue{constructor(){super(...arguments),this.type=O1.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:0})}}O1.type="polygon";const wue=()=>{X.registerMark(O1.type,O1),zht(),vce()},P_t=Object.assign(Object.assign({},Wi),{funnel:{name:"funnel",type:"polygon"},transform:{name:"transform",type:"polygon"},transformLabel:{name:"transformLabel",type:"text"},outerLabel:{name:"outerLabel",type:"text"},outerLabelLine:{name:"outerLabelLine",type:"rule"}}),O_t=Object.assign(Object.assign({},Wi),{funnel3d:{name:"funnel3d",type:"pyramid3d"},transform3d:{name:"transform3d",type:"pyramid3d"},transformLabel:{name:"transformLabel",type:"text"},outerLabel:{name:"outerLabel",type:"text"},outerLabelLine:{name:"outerLabelLine",type:"rule"}});class H4 extends or{_transformLabelSpec(e){this._addMarkLabelSpec(e,"funnel"),e.isTransform&&this._addMarkLabelSpec(e,"transform","transformLabel")}}class fl extends Mf{constructor(){super(...arguments),this.type=re.funnel,this._funnelMarkName="funnel",this._funnelMarkType="polygon",this._transformMarkName="transform",this._transformMarkType="polygon",this.transformerConstructor=H4,this._funnelMark=null,this._funnelTransformMark=null,this._labelMark=null,this._transformLabelMark=null,this._funnelOuterLabelMark={}}getCategoryField(){return this._categoryField}setCategoryField(e){return this._categoryField=e,this._categoryField}getValueField(){return this._valueField}setValueField(e){return this._valueField=e,this._valueField}setAttrFromSpec(){var e,t,n,s,r;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this._funnelOrient=(e=this._spec.funnelOrient)!==null&&e!==void 0?e:"top",this._shape=(t=this._spec.shape)!==null&&t!==void 0?t:"trapezoid",this._minLabelLineWidth=(r=(s=(n=this._spec.outerLabel)===null||n===void 0?void 0:n.line)===null||s===void 0?void 0:s.minLength)!==null&&r!==void 0?r:A_t,this._isHorizontal()?this._funnelAlign=["top","bottom"].includes(this._spec.funnelAlign)?this._spec.funnelAlign:"center":this._funnelAlign=["left","right"].includes(this._spec.funnelAlign)?this._spec.funnelAlign:"center",!this._seriesField&&this._spec.categoryField&&this.setSeriesField(this._spec.categoryField)}initData(){if(super.initData(),!this._data)return;Fe(this._dataSet,"funnel",__t),Fe(this._dataSet,"funnelTransform",v_t);const e=new Rt(this._dataSet,{name:`${Ie}_series_${this.id}_viewDataTransform`});e.parse([this.getViewData()],{type:"dataview"}),this._viewDataTransform=new Oc(this._option,e)}compileData(){var e;super.compileData(),(e=this._viewDataTransform)===null||e===void 0||e.compile()}getStatisticFields(){const e=[];return e.push({key:this._categoryField,operations:["values"]}),e.push({key:this._valueField,operations:["max","min"]}),e}_statisticViewData(){var e,t,n,s,r,a,o,l,c;super._statisticViewData(),this._data.getDataView().transform({type:"funnel",options:{valueField:this.getValueField(),isCone:this._spec.isCone,asCurrentValue:C_t,asTransformRatio:b_t,asReachRatio:CB,asHeightRatio:x_t,asValueRatio:xC,asNextValueRatio:OX,asLastValueRatio:PX,asLastValue:S_t,asNextValue:w_t,range:{min:(t=(e=this._spec.range)===null||e===void 0?void 0:e.min)!==null&&t!==void 0?t:(s=(n=this.getViewDataStatistics().latestData)===null||n===void 0?void 0:n[this.getValueField()])===null||s===void 0?void 0:s.min,max:(a=(r=this._spec.range)===null||r===void 0?void 0:r.max)!==null&&a!==void 0?a:(l=(o=this.getViewDataStatistics().latestData)===null||o===void 0?void 0:o[this.getValueField()])===null||l===void 0?void 0:l.max}}}),(c=this._viewDataTransform.getDataView())===null||c===void 0||c.transform({type:"funnelTransform",options:{asIsTransformLevel:MX}})}initMark(){var e,t,n,s,r,a,o,l,c,u,h,d;if(this._funnelMark=this._createMark(Object.assign(Object.assign({},fl.mark.funnel),{name:this._funnelMarkName,type:this._funnelMarkType}),{themeSpec:(e=this._theme)===null||e===void 0?void 0:e.funnel,groupKey:this._seriesField,isSeriesMark:!0,stateSort:(t=this._spec.funnel)===null||t===void 0?void 0:t.stateSort,noSeparateStyle:!0},{setCustomizedShape:(n=this._spec.funnel)===null||n===void 0?void 0:n.customShape,morph:Yu(this._spec,this._funnelMarkName),morphElementKey:this._seriesField}),this._spec.isTransform&&(this._funnelTransformMark=this._createMark(Object.assign(Object.assign({},fl.mark.transform),{name:this._transformMarkName,type:this._transformMarkType}),{themeSpec:(s=this._theme)===null||s===void 0?void 0:s.transform,skipBeforeLayouted:!1,dataView:this._viewDataTransform.getDataView(),dataProductId:this._viewDataTransform.getProductId(),stateSort:(r=this._spec.transform)===null||r===void 0?void 0:r.stateSort,noSeparateStyle:!0},{setCustomizedShape:(a=this._spec.transform)===null||a===void 0?void 0:a.customShape})),(l=(o=this._spec)===null||o===void 0?void 0:o.outerLabel)===null||l===void 0?void 0:l.visible){const{line:p}=(c=this._spec.outerLabel)!==null&&c!==void 0?c:{},{line:f}=(h=(u=this._theme)===null||u===void 0?void 0:u.outerLabel)!==null&&h!==void 0?h:{};this._funnelOuterLabelMark.label=this._createMark(fl.mark.outerLabel,{themeSpec:(d=this._theme)===null||d===void 0?void 0:d.outerLabel,markSpec:this._spec.outerLabel,skipBeforeLayouted:!0,noSeparateStyle:!0}),this._funnelOuterLabelMark.line=this._createMark(fl.mark.outerLabelLine,{themeSpec:f,markSpec:p,depend:[this._funnelOuterLabelMark.label],noSeparateStyle:!0})}}initTooltip(){this._tooltipHelper=new E_t(this),this._funnelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._funnelMark),this._funnelTransformMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._funnelTransformMark)}getDimensionField(){return this._seriesField?[this._seriesField]:[]}getMeasureField(){return[this._valueField]}getGroupFields(){return null}initMarkStyle(){const e=this._funnelMark;e&&this.setMarkStyle(e,{points:r=>this.getPoints(r),visible:r=>F(r[this._valueField]),fill:this.getColorAttribute()},"normal",pe.Series);const t=this._funnelTransformMark;t&&this.setMarkStyle(t,{points:r=>this.getPoints(r)},"normal",pe.Series);const n=this._funnelOuterLabelMark.label;n&&this.setMarkStyle(n,{text:r=>{const a=`${r[this.getCategoryField()]}`;return ee(this._spec.outerLabel.formatMethod)?this._spec.outerLabel.formatMethod(a,r):a},x:r=>this._computeOuterLabelPosition(r).x,y:r=>this._computeOuterLabelPosition(r).y,textAlign:r=>this._computeOuterLabelPosition(r).align,textBaseline:r=>this._computeOuterLabelPosition(r).textBaseline,maxLineWidth:r=>this._computeOuterLabelLimit(r)},"normal",pe.Series);const s=this._funnelOuterLabelMark.line;s&&n&&this.setMarkStyle(s,{x:r=>this._computeOuterLabelLinePosition(r).x1,y:r=>this._computeOuterLabelLinePosition(r).y1,x1:r=>this._computeOuterLabelLinePosition(r).x2,y1:r=>this._computeOuterLabelLinePosition(r).y2},"normal",pe.Series)}initLabelMarkStyle(e){var t,n;if(!e)return;const s=e.getTarget(),r=e.getComponent();s===this._funnelMark?(this._labelMark=e,this.setMarkStyle(e,{text:a=>`${a[this.getCategoryField()]} ${a[this.getValueField()]}`,x:a=>this._computeLabelPosition(a).x,y:a=>this._computeLabelPosition(a).y,maxLineWidth:a=>this._computeLabelLimit(a,this._spec.label),stroke:this.getColorAttribute()},"normal",pe.Series),!((t=this._funnelOuterLabelMark)===null||t===void 0)&&t.label&&this._funnelOuterLabelMark.label.setDepend(r),!((n=this._funnelOuterLabelMark)===null||n===void 0)&&n.line&&this._funnelOuterLabelMark.line.setDepend(...this._funnelOuterLabelMark.line.getDepend())):this._funnelTransformMark&&s===this._funnelTransformMark&&(this._transformLabelMark=e,this.setMarkStyle(e,{text:a=>`${(100*lw(CB).bind(this)(a)).toFixed(1)}%`,x:a=>this._computeLabelPosition(a).x,y:a=>this._computeLabelPosition(a).y,maxLineWidth:a=>this._computeLabelLimit(a,this._spec.transformLabel)},"normal",pe.Series))}initAnimation(){var e,t,n,s,r,a,o;const l=(n=(t=(e=this._spec)===null||e===void 0?void 0:e.animationAppear)===null||t===void 0?void 0:t.preset)!==null&&n!==void 0?n:"clipIn";l==="clipIn"&&this._rootMark&&this._rootMark.setAnimationConfig(ft((s=X.getAnimationInKey("cartesianGroupClip"))===null||s===void 0?void 0:s({direction:()=>this._isHorizontal()?"x":"y",width:()=>{const c=this.getRootMark().getProduct();if(c){const{x1:u,x2:h}=c.getBounds();return Math.max(u,h)}return this.getLayoutRect().width},height:()=>{const c=this.getRootMark().getProduct();if(c){const{y1:u,y2:h}=c.getBounds();return Math.max(u,h)}return this.getLayoutRect().height},orient:()=>this._isReverse()?"negative":"positive"},l),kt("group",this._spec,this._markAttributeContext))),[(r=this._funnelOuterLabelMark)===null||r===void 0?void 0:r.label].forEach(c=>{c&&c.setAnimationConfig(ft(X.getAnimationInKey("fadeInOut")(),kt(c.name,this._spec,this._markAttributeContext)))}),[this._funnelMark,this._funnelTransformMark].forEach(c=>{c&&c.setAnimationConfig(ft(X.getAnimationInKey("funnel")({},l),kt(c.name,this._spec,this._markAttributeContext)))}),!((a=this._funnelOuterLabelMark)===null||a===void 0)&&a.line&&this._funnelOuterLabelMark.line.setAnimationConfig(ft((o=X.getAnimationInKey("fadeInOut"))===null||o===void 0?void 0:o(),kt("outerLabelLine",this._spec,this._markAttributeContext)))}initGroups(){}getStackGroupFields(){return[]}getStackValueField(){return null}initEvent(){var e;super.initEvent(),(e=this._viewDataTransform.getDataView())===null||e===void 0||e.target.addListener("change",t=>{this._viewDataTransform.updateData()})}getPoints(e){const t=this.isTransformLevel(e),n=this._getMainAxisLength(t)/2;let s,r;t?(s=this._shape==="rect"?this._getSecondaryAxisLength(e[PX])/2:this._getSecondaryAxisLength(e[xC])/2,r=this._getSecondaryAxisLength(e[xC])/2):(s=this._getSecondaryAxisLength(e[xC])/2,r=this._shape==="rect"?s:this._getSecondaryAxisLength(e[OX])/2);const{x:a,y:o}=this._getPositionByData(e),l=this._getPolygonPoints([a,o],s,r,s,r,n);return this._funnelAlign!=="center"&&this._adjustPoints(l),l}isTransformLevel(e){return!!(e!=null&&e[MX])}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this),this._markAttributeContext.getPoints=this.getPoints.bind(this),this._markAttributeContext.isTransformLevel=this.isTransformLevel.bind(this)}valueToPosition(e){var t,n,s;const r=(s=(n=(t=this.getViewData())===null||t===void 0?void 0:t.latestData)===null||n===void 0?void 0:n.find)===null||s===void 0?void 0:s.call(n,a=>a[this._categoryField]===e);return F(r)?this._getPolygonCenter(this.getPoints(r)):null}dataToPosition(e,t){return t&&!this.isDatumInViewData(e)?null:this.valueToPosition(e[this._categoryField])}dataToPositionX(e){var t;return(t=this.dataToPosition(e))===null||t===void 0?void 0:t.x}dataToPositionY(e){var t;return(t=this.dataToPosition(e))===null||t===void 0?void 0:t.y}dataToPositionZ(e){return 0}_getMainAxisLength(e=!1){var t;const n=this.getViewData().latestData.length,s=this._isHorizontal()?this.getLayoutRect().width:this.getLayoutRect().height,r=!!this._spec.isTransform,a=r?0:(t=this._spec.gap)!==null&&t!==void 0?t:0,o=r?Math.max(0,n-1):0,l=this._spec.heightRatio||.5,c=(s-a*Math.max(0,n-1))/(n+l*o);return e?r?c*l:0:c}_getSecondaryAxisLength(e){const t=Number.isNaN(e)||!Number.isFinite(e)?0:e,n=this._computeMaxSize(),s=this._computeMinSize();return s+(n-s)*t}_getPositionByData(e){var t;const n=(t=this.getViewData().latestData)===null||t===void 0?void 0:t.findIndex(d=>d[this._categoryField]===e[this._categoryField]&&d[kl]===e[kl]);if(!F(n)||n<0)return{};const s=this.isTransformLevel(e),r=this._isHorizontal(),a=r?this.getLayoutRect().height:this.getLayoutRect().width,o=r?this.getLayoutRect().width:this.getLayoutRect().height,l=a/2;let c=0;const u=this._getMainAxisLength(),h=this._getMainAxisLength(!0);return c+=n*(u+h),c+=s?-h/2:u/2,!this._spec.isTransform&&this._spec.gap&&(c+=this._spec.gap*n),this._isReverse()&&(c=o-c),this._isHorizontal()?{x:c,y:l}:{x:l,y:c}}_getPolygonPoints(e,t,n,s,r,a){const o=e[0],l=e[1];switch(this._funnelOrient){case"left":return[{x:o-a,y:l+t},{x:o-a,y:l-s},{x:o+a,y:l-r},{x:o+a,y:l+n}];case"right":return[{x:o+a,y:l-s},{x:o+a,y:l+s},{x:o-a,y:l+n},{x:o-a,y:l-n}];case"bottom":return[{x:o+t,y:l+a},{x:o-s,y:l+a},{x:o-r,y:l-a},{x:o+n,y:l-a}];default:return[{x:o-t,y:l-a},{x:o+s,y:l-a},{x:o+r,y:l+a},{x:o-n,y:l+a}]}}_getPolygonCenter(e){if(this._isHorizontal()){const s=(e[0].x+e[3].x)/2,r=(e[0].y+e[3].y)/2;return{x:(s+(e[1].x+e[2].x)/2)/2,y:(r+(e[1].y+e[2].y)/2)/2}}const t=(e[0].x+e[3].x)/2,n=(e[0].y+e[3].y)/2;return{x:(t+(e[1].x+e[2].x)/2)/2,y:(n+(e[1].y+e[2].y)/2)/2}}_adjustPoints(e){let t,n,s;return this._isHorizontal()?(s="y",this._funnelOrient==="left"?(t=this._funnelAlign==="bottom"?-e[1].y:e[1].y,n=this._funnelAlign==="bottom"?-e[2].y:e[2].y):(t=this._funnelAlign==="bottom"?-e[0].y:e[0].y,n=this._funnelAlign==="bottom"?-e[3].y:e[3].y)):(s="x",this._funnelOrient==="top"?(t=this._funnelAlign==="left"?e[0].x:-e[0].x,n=this._funnelAlign==="left"?e[3].x:-e[3].x):(t=this._funnelAlign==="left"?e[1].x:-e[1].x,n=this._funnelAlign==="left"?e[2].x:-e[2].x)),e[0][s]-=t,e[1][s]-=t,e[2][s]-=n,e[3][s]-=n,e}_computeLabelPosition(e){const t=this.getPoints(e);return this._getPolygonCenter(t)}_computeLabelLimit(e,t){const n=t==null?void 0:t.limit;if(ye(n))return n;const s=this.getPoints(e);return n==="shapeSize"?this._isHorizontal()?Math.abs(s[3].x-s[0].x):(Math.abs(s[0].x-s[1].x)+Math.abs(s[2].x-s[3].x))/2:this._isHorizontal()?Math.abs(s[3].x-s[0].x):void 0}_computeOuterLabelPosition(e){var t,n;let s,r,a=(t=this._spec.outerLabel)===null||t===void 0?void 0:t.position,o="center",l="middle";if(a=this._isHorizontal()?["top","bottom"].includes(a)?a:this._funnelAlign==="bottom"?"top":"bottom":["left","right"].includes(a)?a:this._funnelAlign==="left"?"right":"left",((n=this._spec.outerLabel)===null||n===void 0?void 0:n.alignLabel)!==!1)({x:s,y:r}=this._getPositionByData(e)),a==="left"?(s=0,o="left"):a==="right"?(s=this.getLayoutRect().width,o="right"):a==="top"?(r=0,l="top"):a==="bottom"&&(r=this.getLayoutRect().height,l="bottom");else{const{x2:c,y2:u}=this._computeOuterLabelLinePosition(e);s=c,r=u,a==="left"?(s-=ap,o="right"):a==="right"?(s+=ap,o="left"):a==="top"?(r-=ap,l="bottom"):a==="bottom"&&(r+=ap,l="top")}return{x:s,y:r,align:o,textBaseline:l}}_computeOuterLabelLimit(e){var t,n,s,r,a,o,l;if(this._isHorizontal())return this._getMainAxisLength(this.isTransformLevel(e));const c=this.getPoints(e),u=(Math.abs(c[0].x-c[1].x)+Math.abs(c[2].x-c[3].x))/2,h=this.getCategoryField(),d=(a=(r=(s=(n=(t=this._labelMark)===null||t===void 0?void 0:t.getComponent())===null||n===void 0?void 0:n.getProduct())===null||s===void 0?void 0:s.getGroupGraphicItem())===null||r===void 0?void 0:r.find(({attribute:m,type:y})=>{var b;return y==="text"&&((b=m.data)===null||b===void 0?void 0:b[h])===e[h]},!0))===null||a===void 0?void 0:a.AABBBounds,p=d?d.x2-d.x1:0,f=this._funnelOuterLabelMark.line?this._minLabelLineWidth:0;let g=this.getLayoutRect().width-Math.max(u,p);return this._funnelAlign==="center"&&(g/=2),g-f-((l=(o=this._spec.outerLabel)===null||o===void 0?void 0:o.spaceWidth)!==null&&l!==void 0?l:ap)}_computeOuterLabelLinePosition(e){var t,n,s,r,a,o,l,c,u,h,d,p,f;const g=this.getCategoryField(),m=(a=(r=(s=(n=(t=this._funnelOuterLabelMark)===null||t===void 0?void 0:t.label)===null||n===void 0?void 0:n.getProduct())===null||s===void 0?void 0:s.elements)===null||r===void 0?void 0:r.find(O=>{var M;return((M=O.data[0])===null||M===void 0?void 0:M[g])===e[g]}))===null||a===void 0?void 0:a.getBounds(),y=(h=(u=(c=(l=(o=this._labelMark)===null||o===void 0?void 0:o.getComponent())===null||l===void 0?void 0:l.getProduct())===null||c===void 0?void 0:c.getGroupGraphicItem())===null||u===void 0?void 0:u.find(({attribute:O,type:M})=>{var R;return M==="text"&&((R=O.data)===null||R===void 0?void 0:R[g])===e[g]},!0))===null||h===void 0?void 0:h.AABBBounds,b=(d=this._spec.outerLabel)!==null&&d!==void 0?d:{};let x,S,C,w;if(this._isHorizontal()){const O=(p=b.spaceWidth)!==null&&p!==void 0?p:ap,M=this.getPoints(e),R=(Math.abs(M[0].y-M[1].y)+Math.abs(M[2].y-M[3].y))/2;return this._spec.outerLabel.position==="top"||this._funnelAlign==="bottom"?(C=this._getPolygonCenter(M).y-R/2-O,w=b.alignLabel!==!1?(m==null?void 0:m.y2)+O:C-O,x=this._getPolygonCenter(M).x,C-w<this._minLabelLineWidth&&(w=C-this._minLabelLineWidth),S=x):(C=this._getPolygonCenter(M).y+R/2+O,w=b.alignLabel!==!1?(m==null?void 0:m.y1)-O:C+O,x=this._getPolygonCenter(M).x,w-C<this._minLabelLineWidth&&(w=C+this._minLabelLineWidth),S=x),{x1:x,x2:S,y1:C,y2:w}}const A=this.getPoints(e),T=(Math.abs(A[0].x-A[1].x)+Math.abs(A[2].x-A[3].x))/2,E=(y==null?void 0:y.x2)-(y==null?void 0:y.x1)||0,P=(f=b.spaceWidth)!==null&&f!==void 0?f:ap;return this._spec.outerLabel.position==="right"||this._funnelAlign==="left"?(x=this._getPolygonCenter(A).x+Math.max(E/2,T/2)+P,S=b.alignLabel!==!1?(m==null?void 0:m.x1)-P:x+P,C=this._getPolygonCenter(A).y,S-x<this._minLabelLineWidth&&(S=x+this._minLabelLineWidth),w=C):(x=this._getPolygonCenter(A).x-Math.max(E/2,T/2)-P,S=b.alignLabel!==!1?(m==null?void 0:m.x2)+P:x-P,C=this._getPolygonCenter(A).y,x-S<this._minLabelLineWidth&&(S=x-this._minLabelLineWidth),w=C),{x1:x,x2:S,y1:C,y2:w}}_computeMaxSize(){var e;const t=this._isHorizontal()?this.getLayoutRect().height:this.getLayoutRect().width,n=(e=this._spec.maxSize)!==null&&e!==void 0?e:k_t;return Un(n,t)}_computeMinSize(){var e;const t=this._isHorizontal()?this.getLayoutRect().height:this.getLayoutRect().width,n=(e=this._spec.minSize)!==null&&e!==void 0?e:T_t;return Un(n,t)}_isHorizontal(){return this._funnelOrient==="left"||this._funnelOrient==="right"}_isReverse(){return this._funnelOrient==="bottom"||this._funnelOrient==="right"}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._funnelMark]}}fl.type=re.funnel,fl.mark=P_t,fl.transformerConstructor=H4;const M_t=()=>{wue(),ta(),R0(),X.registerSeries(fl.type,fl),X.registerAnimation("funnel",(i,e)=>Object.assign({appear:e==="clipIn"?void 0:{type:"fadeIn"}},MO)),fgt(),Xu()};class M1 extends Cue{constructor(){super(...arguments),this.type=M1.type}}M1.type="pyramid3d";const Aue=()=>{X.registerMark(M1.type,M1),Dht(),vce()};class kue extends H4{_transformLabelSpec(e){this._addMarkLabelSpec(e,"funnel3d"),e.isTransform&&this._addMarkLabelSpec(e,"transform3d","transformLabel")}}class uc extends fl{constructor(){super(...arguments),this.type=re.funnel3d,this._funnelMarkName="funnel3d",this._funnelMarkType="pyramid3d",this._transformMarkName="transform3d",this._transformMarkType="pyramid3d",this.transformerConstructor=kue}initMark(){var e,t,n,s,r,a,o,l;if(this._funnelMark=this._createMark(Object.assign(Object.assign({},uc.mark.funnel3d),{name:this._funnelMarkName,type:this._funnelMarkType}),{themeSpec:(e=this._theme)===null||e===void 0?void 0:e.funnel3d,key:this._seriesField,isSeriesMark:!0},{support3d:!0}),this._spec.isTransform&&(this._funnelTransformMark=this._createMark(Object.assign(Object.assign({},uc.mark.transform3d),{name:this._transformMarkName,type:this._transformMarkType}),{themeSpec:(t=this._theme)===null||t===void 0?void 0:t.transform3d,key:this._seriesField,skipBeforeLayouted:!1,dataView:this._viewDataTransform.getDataView(),dataProductId:this._viewDataTransform.getProductId()})),(s=(n=this._spec)===null||n===void 0?void 0:n.outerLabel)===null||s===void 0?void 0:s.visible){const{line:c}=(r=this._spec.outerLabel)!==null&&r!==void 0?r:{},{line:u}=(o=(a=this._theme)===null||a===void 0?void 0:a.outerLabel)!==null&&o!==void 0?o:{};this._funnelOuterLabelMark.label=this._createMark(uc.mark.outerLabel,{themeSpec:(l=this._theme)===null||l===void 0?void 0:l.outerLabel,key:this._seriesField,markSpec:this._spec.outerLabel}),this._funnelOuterLabelMark.line=this._createMark(uc.mark.outerLabelLine,{themeSpec:u,key:this._seriesField,markSpec:c,depend:[this._funnelOuterLabelMark.label]})}}initMarkStyle(){super.initMarkStyle();const e=this._funnelMark;e&&this.setMarkStyle(e,{z:t=>{if(this._isHorizontal())return 0;const n=this.getPoints(t),s=Math.max(Math.abs(n[0].x-n[1].x),Math.abs(n[2].x-n[3].x));return(this._computeMaxSize()-s)/2}},"normal",pe.Series)}initLabelMarkStyle(e){var t,n;super.initLabelMarkStyle(e),this.setMarkStyle(e,{z:s=>{if(this._isHorizontal())return 0;const r=this.getPoints(s),a=Math.max(Math.abs(r[0].x-r[1].x),Math.abs(r[2].x-r[3].x));return(this._computeMaxSize()-a)/2}},"normal",pe.Series),this._labelMark=e,!((t=this._funnelOuterLabelMark)===null||t===void 0)&&t.label&&this._funnelOuterLabelMark.label.setDepend(e.getComponent()),!((n=this._funnelOuterLabelMark)===null||n===void 0)&&n.line&&this._funnelOuterLabelMark.line.setDepend(...this._funnelOuterLabelMark.line.getDepend())}}uc.type=re.funnel3d,uc.mark=O_t,uc.transformerConstructor=kue;const I_t=()=>{Aue(),ta(),R0(),X.registerSeries(uc.type,uc)},OT=(i,e)=>{const t=(i-e[0])/(e[1]-e[0]||1);return Math.max(0,Math.min(1,t))},MT=i=>{const e=i.mark.elements.filter(n=>n.diffState===Ft.update),t=Mn(e.map(n=>{var s;return(s=n==null?void 0:n.data)===null||s===void 0?void 0:s[0].depth}));return e.filter(n=>{var s;return((s=n==null?void 0:n.data)===null||s===void 0?void 0:s[0].depth)===t})},IX=(i,e,t)=>Te(i)?[e,t]:[Mn(i.map(n=>1*n.getGraphicAttribute("startAngle",!1))),an(i.map(n=>1*n.getGraphicAttribute("endAngle",!1)))],R_t=i=>({channel:{startAngle:{from:(e,t)=>{const{startAngle:n,endAngle:s}=i.animationInfo(),r=MT(t),a=IX(r,n,s);return OT(e.startAngle,a)*(s-n)+n},to:e=>e.startAngle},endAngle:{from:(e,t)=>{const{startAngle:n,endAngle:s}=i.animationInfo(),r=MT(t),a=IX(r,n,s);return OT(e.endAngle,a)*(s-n)+n},to:e=>e.endAngle},outerRadius:{from:e=>e.innerRadius,to:e=>e.outerRadius},innerRadius:{from:e=>e.innerRadius,to:e=>e.innerRadius}}}),RX=i=>[Mn(i.map(e=>1*e.getGraphicAttribute("startAngle",!1))),an(i.map(e=>1*e.getGraphicAttribute("endAngle",!1)))],LX=i=>({channel:{startAngle:{from:(e,t)=>t.getGraphicAttribute("startAngle",!1),to:(e,t)=>{const{startAngle:n,endAngle:s}=i.animationInfo(),r=MT(t),a=RX(r);return OT(t.getGraphicAttribute("startAngle",!1),a)*(s-n)+n}},endAngle:{from:(e,t)=>t.getGraphicAttribute("endAngle",!1),to:(e,t)=>{const{startAngle:n,endAngle:s}=i.animationInfo(),r=MT(t),a=RX(r);return OT(t.getGraphicAttribute("endAngle",!1),a)*(s-n)+n}},outerRadius:{from:(e,t)=>t.getGraphicAttribute("outerRadius",!1),to:()=>i.animationInfo().innerRadius},innerRadius:{from:(e,t)=>t.getGraphicAttribute("innerRadius",!1),to:()=>i.animationInfo().innerRadius}}}),L_t=(i,e)=>{switch(e){case"fadeIn":return{type:"fadeIn"};case"growAngle":return{type:"growAngleIn"};default:return{type:"growRadiusIn"}}},D_t=()=>{X.registerAnimation("sunburst",(i,e)=>({appear:L_t(i,e),enter:R_t(i),exit:LX(i),disappear:LX(i)}))},V4=(i,e=[],t)=>{const n=(t==null?void 0:t.maxDepth)>=0;return i.forEach(s=>{(!n||s.depth<=t.maxDepth)&&(e.push(t!=null&&t.callback?t.callback(s):s),s.children&&(n&&s.depth===t.maxDepth?(s.children=null,s.isLeaf=!0):V4(s.children,e,t)))}),e};function F_t(i,e,t,n,s){const r=i.children,a=r.length;let o=0;const l=new Array(a+1);l[0]=0;for(let u=0;u<a;++u)o+=r[u].value,l[u+1]=o;const c=(u,h,d,p,f,g,m)=>{if(u>=h-1){const A=r[u];return A.x0=p,A.y0=f,A.x1=g,void(A.y1=m)}const y=l[u],b=d/2+y;let x=u+1,S=h-1;for(;x<S;){const A=x+S>>>1;l[A]<b?x=A+1:S=A}b-l[x-1]<l[x]-b&&u+1<x&&--x;const C=l[x]-y,w=d-C;if(g-p>m-f){const A=d?(p*w+g*C)/d:g;c(u,x,C,p,f,A,m),c(x,h,w,A,f,g,m)}else{const A=d?(f*w+m*C)/d:m;c(u,x,C,p,f,g,A),c(x,h,w,p,A,g,m)}};c(0,a,i.value,e,t,n,s)}function VO(i,e,t,n,s,r={x0:"x0",x1:"x1",y0:"y0",y1:"y1"}){const a=i.children;let o,l=-1;const c=a.length,u=i.value&&(n-e)/i.value;for(;++l<c;)o=a[l],o[r.y0]=t,o[r.y1]=s,o[r.x0]=e,o[r.x1]=e+=o.value*u}function U4(i,e,t,n,s){const r=i.children;let a,o=-1;const l=r.length,c=i.value&&(s-t)/i.value;for(;++o<l;)a=r[o],a.x0=e,a.x1=n,a.y0=t,t+=a.value*c,a.y1=t}function B_t(i,e,t,n,s){(i.depth%2==1?U4:VO)(i,e,t,n,s)}function j_t(i,e,t,n,s,r){const a=[],o=e.children;let l,c,u=0,h=0;const d=o.length;let p,f,g,m,y,b,x,S,C,w=e.value;for(;u<d;){p=s-t,f=r-n;do g=o[h++].value;while(!g&&h<d);for(m=g,y=g,S=Math.max(f/p,p/f)/(w*i),C=g*g*S,x=Math.max(y/C,C/m);h<d;++h){if(c=o[h].value,g+=c,c<m&&(m=c),c>y&&(y=c),C=g*g*S,b=Math.max(y/C,C/m),b>x){g-=c;break}x=b}l=Object.assign({},e,{value:g,children:o.slice(u,h)}),a.push(l),p<f?VO(l,t,n,s,w?n+=f*g/w:r):U4(l,t,n,w?t+=p*g/w:s,r),w-=g,u=h}return a}const N_t=i=>(e,t,n,s,r)=>{j_t(i,e,t,n,s,r)},UO=(i,e,t=0,n=-1,s,r,a="value")=>{let o=0,l=n??-1,c=t;return i.forEach((u,h)=>{var d,p;const f={flattenIndex:++l,key:r?r(u):`${(d=s==null?void 0:s.key)!==null&&d!==void 0?d:""}-${h}`,maxDepth:-1,depth:t,index:h,value:u[a],isLeaf:!0,datum:s?s.datum.concat(u):[u],parentKey:s==null?void 0:s.key};if(!((p=u.children)===null||p===void 0)&&p.length){f.children=[],f.isLeaf=!1;const g=UO(u.children,f.children,t+1,l,f,r,a);f.value=B(u[a])?g.sum:Math.max(g.sum,mp(u[a])),l=g.flattenIndex,c=Math.max(g.maxDepth,c)}else f.isLeaf=!0,f.value=mp(u[a]);o+=Math.abs(f.value),e.push(f)}),{sum:o,maxDepth:c,flattenIndex:l}},zg=(i,e,t,n)=>{let s=n;return i.forEach((r,a)=>{var o;s=e(r,a,t,s),!((o=r.children)===null||o===void 0)&&o.length&&(s=zg(r.children,e,r,s))}),n},gw=(i,e,t,n)=>{let s=n;return i.forEach((r,a)=>{var o;!((o=r.children)===null||o===void 0)&&o.length&&(s=gw(r.children,e,r,s)),s=e(r,a,t,s)}),s},DX={binary:F_t,dice:VO,slice:U4,sliceDice:B_t};class WO{constructor(e){var t;this._filterByArea=(r,a)=>{var o;const l=this._getMinAreaByDepth(r.depth);if(l>0&&r.value*a<l)return!1;if(!((o=r.children)===null||o===void 0)&&o.length){const c=r.children.filter(u=>this._filterByArea(u,a));c.length?c.length!==r.children.length&&(r.children=c):(r.isLeaf=!0,r.children=null)}return!0},this._getMinAreaByDepth=r=>{var a;return r<0?0:(a=ie(this.options.minVisibleArea)?this.options.minVisibleArea[r]:this.options.minVisibleArea)!==null&&a!==void 0?a:0},this._getGapWidthByDepth=r=>{var a;return r<0?0:(a=ie(this.options.gapWidth)?this.options.gapWidth[r]:this.options.gapWidth)!==null&&a!==void 0?a:0},this._getPaddingByDepth=r=>{var a;return r<0?0:(a=ie(this.options.padding)?this.options.padding[r]:this.options.padding)!==null&&a!==void 0?a:0},this._getLabelPaddingByDepth=r=>{var a;return r<0?0:(a=ie(this.options.labelPadding)?this.options.labelPadding[r]:this.options.labelPadding)!==null&&a!==void 0?a:0},this._layoutNode=r=>{const a=this._getGapWidthByDepth(r.depth);let o=r.x0,l=r.y0,c=r.x1,u=r.y1;if(r.maxDepth=this._maxDepth,a>0&&(o+=a/2,c-=a/2,l+=a/2,u-=a/2,o>c&&(o=(o+c)/2,c=o),l>u&&(l=(l+u)/2,u=l),r.x0=o,r.x1=c,r.y0=l,r.y1=u),r.children){const h=this._getLabelPaddingByDepth(r.depth),d=this._getPaddingByDepth(r.depth);d>0&&d<Math.min(c-o,u-l)/2&&(l+=d,u-=d,o+=d,c-=d),h>0&&(this.options.labelPosition==="top"&&l+h<u?(r.labelRect={x0:o,y0:l,x1:c,y1:l+h},l+=h):this.options.labelPosition==="bottom"&&u-h>l?(r.labelRect={x0:o,y0:u-h,x1:c,y1:u},u-=h):this.options.labelPosition==="left"&&o+h<c?(r.labelRect={x0:o,y0:l,x1:o+h,y1:u},o+=h):this.options.labelPosition==="right"&&c-h>o&&(r.labelRect={x0:c-h,y0:l,x1:c,y1:u},c-=h));const p=this._getGapWidthByDepth(r.depth+1);p>0&&(o-=p/2,c+=p/2,l-=p/2,u+=p/2),this._splitNode(r,o,l,c,u)}},this.options=Object.assign({},WO.defaultOpionts,e);const n=this.options.nodeKey,s=ee(n)?n:n?Tc(n):null;this._getNodeKey=s,this._splitNode=this.options.splitType==="squarify"?N_t(this.options.aspectRatio):(t=DX[this.options.splitType])!==null&&t!==void 0?t:DX.binary,this._maxDepth=-1}layout(e,t){var n;if(!e||!e.length)return[];const s="width"in t?{x0:0,x1:t.width,y0:0,y1:t.height,width:t.width,height:t.height}:{x0:Math.min(t.x0,t.x1),x1:Math.max(t.x0,t.x1),y0:Math.min(t.y0,t.y1),y1:Math.max(t.y0,t.y1),width:Math.abs(t.x1-t.x0),height:Math.abs(t.y1-t.y0)},r=[],a=UO(e,r,0,-1,null,this._getNodeKey,this.options.valueField);if(this._maxDepth=a.maxDepth,a.sum<=0)return[];const o={flattenIndex:-1,maxDepth:-1,key:"-1",depth:-1,index:-1,value:a.sum,datum:null,x0:s.x0,x1:s.x1,y0:s.y0,y1:s.y1,children:r},l=s.width*s.height/a.sum;return this._filterByArea(o,l),this._layout(o),(n=o.children)!==null&&n!==void 0?n:[]}_filterChildren(e){const t=this.options.maxDepth;if(ye(t)&&t>=0&&e.depth>=t)return!1;const n=this.options.minChildrenVisibleArea;if(ye(n)&&Math.abs((e.x1-e.x0)*(e.y1-e.y0))<n)return!1;const s=this.options.minChildrenVisibleSize;return!ye(s)||!(Math.abs(e.x1-e.x0)<s||Math.abs(e.y1-e.y0)<s)}_layout(e){var t;this._filterChildren(e)||(e.children=null,e.isLeaf=!0),this._layoutNode(e),!((t=e.children)===null||t===void 0)&&t.length&&e.children.forEach(n=>{var s;!((s=n==null?void 0:n.children)===null||s===void 0)&&s.length?this._layout(n):this._layoutNode(n)})}}WO.defaultOpionts={aspectRatio:(1+Math.sqrt(5))/2,gapWidth:0,labelPadding:0,labelPosition:"top",splitType:"binary",minVisibleArea:10};const $_t=(i,e)=>{const t=new WO(i).layout(e,"width"in i?{width:i.width,height:i.height}:{x0:i.x0,x1:i.x1,y0:i.y0,y1:i.y1});if(i.flatten){const n=[];return V4(t,n,{maxDepth:i==null?void 0:i.maxDepth}),n}return t},z_t={x0:"startAngle",x1:"endAngle",y0:"innerRadius",y1:"outerRadius"};class I1{constructor(e){this._layoutNode=s=>{if(s.maxDepth=this._maxDepth,s.children){const r=this._parsedInnerRadius[s.depth+1],a=this._parsedOutterRadius[s.depth+1];VO(s,s.startAngle,Math.min(r,a),s.endAngle,Math.max(r,a),z_t);const o=ie(this.options.label)?this.options.label[s.depth+1]:this.options.label;s.children.forEach(l=>{if(l.x=this._parsedCenter[0],l.y=this._parsedCenter[1],o)return this._layoutLabel(l,Ui(o)?{align:"center",rotate:"radial"}:o)})}},this.options=e?Object.assign({},I1.defaultOpionts,e):Object.assign({},I1.defaultOpionts);const t=this.options.nodeKey,n=ee(t)?t:t?Tc(t):null;this._getNodeKey=n,this._maxDepth=-1}_parseRadius(e,t){const n=e.x0+Qo(this.options.center[0],e.width),s=e.y0+Qo(this.options.center[1],e.height),r=Math.min(e.width/2,e.height/2),a=this.options.innerRadius,o=this.options.outerRadius,l=ie(a),c=l?a.map(f=>Qo(f,r)):Qo(a,r),u=ie(o),h=this.options.gapRadius,d=u?o.map(f=>Qo(f,r)):Qo(o,r),p=Yne(0,t+1);if(l)this._parsedInnerRadius=p.map((f,g)=>{const m=c[g];return B(m)?r:m}),this._parsedOutterRadius=p.map((f,g)=>{var m,y;return u?(m=d[g])!==null&&m!==void 0?m:r:g<t?this._parsedInnerRadius[g+1]-(ie(h)?(y=h[g])!==null&&y!==void 0?y:0:h):d});else if(u)this._parsedOutterRadius=p.map((f,g)=>B(d[g])?r:d[g]),this._parsedInnerRadius=p.map((f,g)=>{var m;return g===0?c:this._parsedOutterRadius[g-1]-(ie(h)?(m=h[g])!==null&&m!==void 0?m:0:h)});else{const f=Qo(a,r),g=(d-f)/(t+1);this._parsedInnerRadius=p.map((m,y)=>f+y*g),this._parsedOutterRadius=p.map((m,y)=>{var b;return this._parsedInnerRadius[y]+g-(ie(h)?(b=h[y])!==null&&b!==void 0?b:0:h)})}this._parsedCenter=[n,s],this._maxRadius=r}layout(e,t){const n="width"in t?{x0:0,x1:t.width,y0:0,y1:t.height,width:t.width,height:t.height}:{x0:Math.min(t.x0,t.x1),x1:Math.max(t.x0,t.x1),y0:Math.min(t.y0,t.y1),y1:Math.max(t.y0,t.y1),width:Math.abs(t.x1-t.x0),height:Math.abs(t.y1-t.y0)};if(!e||!e.length)return[];const s=[],r=UO(e,s,0,-1,null,this._getNodeKey);return this._parseRadius(n,r.maxDepth),this._maxDepth=r.maxDepth,this._layout(s,{flattenIndex:-1,maxDepth:-1,key:"-1",depth:-1,index:-1,value:r.sum,datum:null,children:s,startAngle:this.options.startAngle,endAngle:this.options.endAngle}),s}_layout(e,t){this._layoutNode(t),e.forEach(n=>{var s;!((s=n==null?void 0:n.children)===null||s===void 0)&&s.length?this._layout(n.children,n):this._layoutNode(n)})}_layoutLabel(e,t){var n;const s=(e.startAngle+e.endAngle)/2,r=(t.align==="start"?e.innerRadius:t.align==="end"?e.outerRadius:(e.innerRadius+e.outerRadius)/2)+((n=t.offset)!==null&&n!==void 0?n:0),a=ui({x:this._parsedCenter[0],y:this._parsedCenter[1]},r,s);if(e.label={x:a.x,y:a.y,textBaseline:"middle"},t.rotate==="tangential")e.label.angle=s-Math.PI/2,e.label.textAlign="center",e.label.maxLineWidth=Math.abs(e.endAngle-e.startAngle)*r;else{const o=s%(2*Math.PI),l=o<0?o+2*Math.PI:o;l>Math.PI/2&&l<1.5*Math.PI?(e.label.angle=l+Math.PI,e.label.textAlign=t.align==="start"?"end":t.align==="end"?"start":"center"):(e.label.angle=l,e.label.textAlign=t.align),e.label.maxLineWidth=e.isLeaf?void 0:Math.abs(e.outerRadius-e.innerRadius)}}}I1.defaultOpionts={startAngle:Math.PI/2,endAngle:-3*Math.PI/2,center:["50%","50%"],gapRadius:0,innerRadius:0,outerRadius:"70%"};const H_t=1664525,V_t=1013904223,FX=4294967296;function U_t(i=1){let e=i;return()=>(e=(H_t*e+V_t)%FX)/FX}function W_t(i,e){let t=0;const n=Xne(Array.from(i),e),s=n.length;let r,a,o=[];for(;t<s;)r=n[t],a&&Tue(a,r)?++t:(o=G_t(o,r),a=K_t(o),t=0);return a}function G_t(i,e){let t,n;if(ZI(e,i))return[e];for(t=0;t<i.length;++t)if(SC(e,i[t])&&ZI(V_(i[t],e),i))return[i[t],e];for(t=0;t<i.length-1;++t)for(n=t+1;n<i.length;++n)if(SC(V_(i[t],i[n]),e)&&SC(V_(i[t],e),i[n])&&SC(V_(i[n],e),i[t])&&ZI(Eue(i[t],i[n],e),i))return[i[t],i[n],e];ii.getInstance().error("error when packEncloseRandom")}function SC(i,e){const t=i.radius-e.radius,n=e.x-i.x,s=e.y-i.y;return t<0||t*t<n*n+s*s}function Tue(i,e){const t=i.radius-e.radius+1e-9*Math.max(i.radius,e.radius,1),n=e.x-i.x,s=e.y-i.y;return t>0&&t*t>n*n+s*s}function ZI(i,e){for(let t=0;t<e.length;++t)if(!Tue(i,e[t]))return!1;return!0}function K_t(i){switch(i.length){case 1:return X_t(i[0]);case 2:return V_(i[0],i[1]);case 3:return Eue(i[0],i[1],i[2])}}function X_t(i){return{x:i.x,y:i.y,radius:i.radius}}function V_(i,e){const t=i.x,n=i.y,s=i.radius,r=e.x,a=e.y,o=e.radius,l=r-t,c=a-n,u=o-s,h=Math.sqrt(l*l+c*c);return{x:(t+r+l/h*u)/2,y:(n+a+c/h*u)/2,radius:(h+s+o)/2}}function Eue(i,e,t){const n=i.x,s=i.y,r=i.radius,a=e.x,o=e.y,l=e.radius,c=t.x,u=t.y,h=t.radius,d=n-a,p=n-c,f=s-o,g=s-u,m=l-r,y=h-r,b=n*n+s*s-r*r,x=b-a*a-o*o+l*l,S=b-c*c-u*u+h*h,C=p*f-d*g,w=(f*S-g*x)/(2*C)-n,A=(g*m-f*y)/C,T=(p*x-d*S)/(2*C)-s,E=(d*y-p*m)/C,P=A*A+E*E-1,O=2*(r+w*A+T*E),M=w*w+T*T-r*r,R=-(Math.abs(P)>1e-6?(O+Math.sqrt(O*O-4*P*M))/(2*P):M/O);return{x:n+w+A*R,y:s+T+E*R,radius:R}}function BX(i,e,t){const n=i.x-e.x;let s,r;const a=i.y-e.y;let o,l;const c=n*n+a*a;c?(r=e.radius+t.radius,r*=r,l=i.radius+t.radius,l*=l,r>l?(s=(c+l-r)/(2*c),o=Math.sqrt(Math.max(0,l/c-s*s)),t.x=i.x-s*n-o*a,t.y=i.y-s*a+o*n):(s=(c+r-l)/(2*c),o=Math.sqrt(Math.max(0,r/c-s*s)),t.x=e.x+s*n-o*a,t.y=e.y+s*a+o*n)):(t.x=e.x+t.radius,t.y=e.y)}function jX(i,e){const t=i.radius+e.radius-1e-6,n=e.x-i.x,s=e.y-i.y;return t>0&&t*t>n*n+s*s}function NX(i){const e=i._,t=i.next._,n=e.radius+t.radius,s=(e.x*t.radius+t.x*e.radius)/n,r=(e.y*t.radius+t.y*e.radius)/n;return s*s+r*r}function CC(i){return{_:i,next:null,prev:null}}function Y_t(i,e){const t=(i=q(i)).length;if(!t)return 0;let n=i[0];if(n.x=0,n.y=0,t===1)return n.radius;const s=i[1];if(n.x=-s.radius,s.x=n.radius,s.y=0,t===2)return n.radius+s.radius;let r=i[2];BX(s,n,r);let a,o,l,c,u,h,d,p=CC(n),f=CC(s),g=CC(r);p.next=f,g.prev=f,f.next=g,p.prev=g,g.next=p,f.prev=p;for(let y=3;y<t;++y){d=!1,r=i[y],BX(p._,f._,r),g=CC(r),a=f.next,o=p.prev,l=f._.radius,c=p._.radius;do if(l<=c){if(jX(a._,g._)){f=a,p.next=f,f.prev=p,--y,d=!0;break}l+=a._.radius,a=a.next}else{if(jX(o._,g._)){p=o,p.next=f,f.prev=p,--y,d=!0;break}c+=o._.radius,o=o.prev}while(a!==o.next);if(!d){for(g.prev=p,g.next=f,p.next=f.prev=f=g,u=NX(p),g=g.next;g!==f;)h=NX(g),h<u&&(p=g,u=h),g=g.next;f=p.next}}const m=[f._];for(g=f.next;g!==f;)m.push(g._),g=g.next;r=W_t(m,e);for(let y=0;y<t;++y)n=i[y],n.x-=r.x,n.y-=r.y;return r.radius}function $X(i){return function(e){e.children||(e.radius=Math.max(0,+i(e)||0))}}function JI(i,e,t){return function(n){const s=n==null?void 0:n.children;if(s){let r;const a=s.length,o=i(n)*e||0;if(o)for(r=0;r<a;++r)s[r].radius+=o;const l=Y_t(s,t);if(o)for(r=0;r<a;++r)s[r].radius-=o;n.radius=l+o}}}function zX(i,e){return function(t,n,s){t.radius*=i,t.maxDepth=e,s&&(t.x=s.x+i*t.x,t.y=s.y+i*t.y)}}class R1{constructor(e){this.options=e;const t=e==null?void 0:e.nodeKey,n=ee(t)?t:t?Tc(t):null;this._getNodeKey=n,this._getPadding=ye(e==null?void 0:e.padding)?s=>e.padding:ie(e==null?void 0:e.padding)?s=>{var r;return(r=e.padding[s.depth+1])!==null&&r!==void 0?r:0}:()=>0,this._maxDepth=-1}layout(e,t){var n;const s="width"in t?{x0:0,x1:t.width,y0:0,y1:t.height,width:t.width,height:t.height}:{x0:Math.min(t.x0,t.x1),x1:Math.max(t.x0,t.x1),y0:Math.min(t.y0,t.y1),y1:Math.max(t.y0,t.y1),width:Math.abs(t.x1-t.x0),height:Math.abs(t.y1-t.y0)};if(!e||!e.length)return[];const r=[],a=UO(e,r,0,-1,null,this._getNodeKey);this._maxDepth=a.maxDepth;const o=U_t(),l={flattenIndex:-1,maxDepth:-1,key:"root",depth:-1,index:-1,value:a.sum,datum:null,children:r,x:s.x0+s.width/2,y:s.y0+s.height/2},{nodeSort:c,setRadius:u,padding:h,includeRoot:d}=(n=this.options)!==null&&n!==void 0?n:{};if(c!==!1){const p=ee(c)?this.options.nodeKey:R1.defaultOpionts.nodeSort;zg([l],f=>{f.children&&f.children.length&&f.children.sort(p)})}if(u)zg([l],$X(u)),gw([l],JI(this._getPadding,.5,o)),zg([l],zX(1,this._maxDepth));else{const p=Math.min(s.width,s.height);zg([l],$X(R1.defaultOpionts.setRadius)),gw([l],JI(lit,1,o)),h&&gw([l],JI(this._getPadding,l.radius/p,o)),zg([l],zX(p/(2*l.radius),this._maxDepth))}return d?[l]:r}}R1.defaultOpionts={setRadius:i=>Math.sqrt(i.value),padding:0,nodeSort:(i,e)=>e.value-i.value};const q_t=()=>{Q.registerTransform("treemap",{transform:$_t,markPhase:"beforeJoin"},!0)},Zx=(i,e={})=>{if(!i)return[];const t=[];return V4(i,t,e),t},Z_t=(i,e)=>{if(!i)return i;const t=e(),{width:n,height:s}=t;return new I1(t).layout(i,{width:n,height:s})},J_t=10;class Q_t extends ar{constructor(){super(...arguments),this.markTooltipKeyCallback=e=>e==null?void 0:e[this.series.getDimensionField()[0]]}}var Nh;(function(i){i.DrillDown="drillDown",i.DrillUp="drillUp"})(Nh||(Nh={}));const evt=(i,e)=>{const t=e.info(),n=e.keyField(),s=t==null?void 0:t.key;if(B(s))return i;if(t.type===Nh.DrillDown){const r=ole(i,s,n,"children");return q(r)}if(t.type===Nh.DrillUp){const r=lle(i,s,n,"children");if(r)return q(r)}return i};class W4{_getDrillTriggerEvent(e){var t;const{mode:n}=this._drillParams;return(t=Yc(n))===null||t===void 0?void 0:t[e]}_hideTooltip(){const e=this.getChart().getComponentsByType(oe.tooltip)[0];e&&e.hideTooltip()}initDrillable(e){this._drillParams=e}initDrillableData(e){const{getRawData:t}=this._drillParams;Fe(e,"drillFilter",evt),t().transform({type:"drillFilter",options:{info:()=>this._drillInfo,keyField:()=>this._drillParams.drillField()}})}bindDrillEvent(){const{event:e,getRawData:t,drillField:n}=this._drillParams,s=n();this._getDrillTriggerEvent("start")&&e.on(this._getDrillTriggerEvent("start"),r=>{var a,o,l;if(B(r.datum)||B((a=r.datum)===null||a===void 0?void 0:a[s]))return void this.drillUp();this._hideTooltip();const c=r.datum[s],u=(l=(o=this._drillInfo)===null||o===void 0?void 0:o.path)!==null&&l!==void 0?l:[],h=Uct(t().rawData,c,s,"children");u[u.length-1]===h[h.length-1]?this.drillUp():this.drillDown(h)})}drillDown(e=[]){const{getRawData:t,event:n}=this._drillParams;if(!ie(e)||Te(e))return e;const s=e[e.length-1];return this._drillInfo={key:s,path:e,type:Nh.DrillDown},t().reRunAllTransform(),n.emit(ke.drill,{value:{path:e,type:Nh.DrillDown},model:this}),e}drillUp(){var e,t;const{getRawData:n,event:s}=this._drillParams,r=(t=(e=this._drillInfo)===null||e===void 0?void 0:e.path)!==null&&t!==void 0?t:[];if(!ie(r)||Te(r))return r;const a=r.pop();return this._drillInfo={key:a,path:r,type:Nh.DrillUp},n().reRunAllTransform(),s.emit(ke.drill,{value:{path:r,type:Nh.DrillUp},model:this}),r}}const tvt=Object.assign(Object.assign({},Wi),{sunburst:{name:"sunburst",type:"arc"}});class gd extends Yx{constructor(){super(...arguments),this.type=re.sunburst}setCategoryField(e){return this._categoryField=e,this._categoryField}getCategoryField(){return this._categoryField}setValueField(e){return this._valueField=e,this._valueField}getValueField(){return this._valueField}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}setAttrFromSpec(){var e;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField((e=this._spec.seriesField)!==null&&e!==void 0?e:xu),this._spec.drill&&this.initDrillable({event:this.event,mode:this._option.mode,drillField:()=>{var t;return(t=this._spec.drillField)!==null&&t!==void 0?t:kl},getRawData:()=>this.getRawData()}),this._startAngle=zt(this._spec.startAngle),this._endAngle=zt(this._spec.endAngle),this._centerX=this._spec.centerX,this._centerY=this._spec.centerY,this._offsetX=this._spec.offsetX,this._offsetY=this._spec.offsetY,this.__innerRadius=this._spec.innerRadius,this.__outerRadius=this._spec.outerRadius,this._gap=this._spec.gap,this._labelLayout=this._spec.labelLayout,this._sunburst=this._spec.sunburst,this._label=this._spec.label,this._labelAutoVisible=this._spec.labelAutoVisible}initData(){super.initData();const e=this.getRawData();e&&(this._spec.drill&&this.initDrillableData(this._dataSet),Fe(this._dataSet,"sunburstLayout",Z_t),Fe(this._dataSet,"flatten",Zx),e.transform({type:"sunburstLayout",options:()=>{const{innerRadius:t,outerRadius:n,gap:s,label:r}=this._computeLevel();return{nodeKey:this._categoryField,width:this.getLayoutRect().width,height:this.getLayoutRect().height,center:[F(this._centerX)?this._centerX:this.getLayoutRect().width/2,F(this._centerY)?this._centerY:this.getLayoutRect().height/2],startAngle:this._startAngle,endAngle:this._endAngle,innerRadius:t,outerRadius:n,gapRadius:s,label:r}}}),e.transform({type:"flatten",options:{callback:t=>{if(t.datum){const n=t.datum[t.depth];return Object.assign(Object.assign({},t),n)}return t}}}))}getStatisticFields(){return super.getStatisticFields().concat([{key:this._categoryField,operations:["values"]},{key:this._valueField,operations:["max","min"]},{key:f1,operations:["max","min","values"]},{key:xu,operations:["values"]}])}_addDataIndexAndKey(){const e=this.getRawData();B(e==null?void 0:e.dataSet)||(Fe(e.dataSet,"addVChartProperty",I0),e.transform({type:"addVChartProperty",options:{beforeCall:T4.bind(this),call:OO}}))}initMark(){this._initArcMark(),this._initLabelMark()}initMarkStyle(){this._initArcMarkStyle(),this._initLabelMarkStyle()}_initArcMark(){var e,t;if(this._sunburst.visible===!1)return;const n=this._createMark(gd.mark.sunburst,{isSeriesMark:!0,stateSort:(e=this._spec.sunburst)===null||e===void 0?void 0:e.stateSort},{setCustomizedShape:(t=this._spec.sunburst)===null||t===void 0?void 0:t.customShape});this._sunburstMark=n}_initArcMarkStyle(){B(this._sunburstMark)||this.setMarkStyle(this._sunburstMark,{x:e=>e.x+(F(this._offsetX)?this._offsetX:0),y:e=>e.y+(F(this._offsetY)?this._offsetY:0),outerRadius:e=>e.outerRadius,innerRadius:e=>e.innerRadius,startAngle:e=>e.startAngle,endAngle:e=>e.endAngle,fill:this.getColorAttribute()},Ce.STATE_NORMAL,pe.Series)}_initLabelMark(){if(this._label.visible!==!0)return;const e=this._createMark(gd.mark.label,{isSeriesMark:!1});this._labelMark=e}_initLabelMarkStyle(){B(this._labelMark)||this.setMarkStyle(this._labelMark,{visible:e=>{var t;const n=this._labelAutoVisible;return Ke(n)&&n.enable===!0?(e.endAngle-e.startAngle)*(e.outerRadius-e.innerRadius)>((t=n==null?void 0:n.circumference)!==null&&t!==void 0?t:J_t):this._spec.label.visible},x:e=>{var t;return((t=e.label)===null||t===void 0?void 0:t.x)+(F(this._offsetX)?this._offsetX:0)},y:e=>{var t;return((t=e.label)===null||t===void 0?void 0:t.y)+(F(this._offsetY)?this._offsetY:0)},textBaseline:e=>{var t;return(t=e.label)===null||t===void 0?void 0:t.textBaseline},textAlign:e=>{var t;return(t=e.label)===null||t===void 0?void 0:t.textAlign},angle:e=>{var t,n;return(n=(t=e.label)===null||t===void 0?void 0:t.angle)!==null&&n!==void 0?n:0},fontSize:10,text:e=>e.name},Ce.STATE_NORMAL,pe.Series)}initTooltip(){this._tooltipHelper=new Q_t(this),this._sunburstMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._sunburstMark),this._labelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._labelMark)}initAnimation(){var e,t;const n={animationInfo:()=>({innerRadius:this._computeRadius(q(this.__innerRadius))[0],outerRadius:this._computeRadius(q(this.__outerRadius))[0],startAngle:q(this._startAngle)[0],endAngle:q(this._endAngle)[0]})},s=(t=(e=this._spec)===null||e===void 0?void 0:e.animationAppear)===null||t===void 0?void 0:t.preset;this.getMarksInType("arc").forEach(r=>{var a;r.setAnimationConfig(ft((a=X.getAnimationInKey("sunburst"))===null||a===void 0?void 0:a(n,s),kt(r.name,this._spec,this._markAttributeContext)))}),this.getMarksInType("text").forEach(r=>{var a;r.setAnimationConfig(ft((a=X.getAnimationInKey("fadeInOut"))===null||a===void 0?void 0:a(),kt(r.name,this._spec,this._markAttributeContext)))})}initEvent(){super.initEvent(),this._spec.drill&&this.bindDrillEvent()}onLayoutEnd(e){super.onLayoutEnd(e),this._rawData.reRunAllTransform()}_computeRadius(e){return ie(e)?e.map(t=>this._computeLayoutRadius()*t):this._computeLayoutRadius()*e}_computeLevel(){return{innerRadius:this._computeRadius(this.__innerRadius),outerRadius:this._computeRadius(this.__outerRadius),gap:this._gap,label:this._labelLayout}}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}_noAnimationDataKey(e,t){}getActiveMarks(){return[this._sunburstMark]}getMarkData(e){return e!=null&&e.datum?e.datum[e.datum.length-1]:e}}gd.type=re.sunburst,gd.mark=tvt,Yt(gd,W4);const ivt=()=>{X.registerSeries(gd.type,gd),rg(),ta(),Xu(),D_t()},nvt=(i,e)=>{if(!i)return i;const t=e(),{width:n,height:s}=t;return n===0||s===0?i:new R1(t).layout(i,{width:n,height:s})};class svt extends ar{constructor(){super(...arguments),this.markTooltipKeyCallback=e=>e==null?void 0:e[this.series.getDimensionField()[0]]}}const rvt=i=>i==="fadeIn"?{type:"fadeIn"}:{type:"growRadiusIn"},avt=()=>{X.registerAnimation("circlePacking",(i,e)=>({appear:rvt(e),enter:{type:"growRadiusIn"},exit:{type:"growRadiusOut"},disappear:{type:"growRadiusOut"}}))},ovt=Object.assign(Object.assign({},Wi),{circlePacking:{name:"circlePacking",type:"arc"}});class md extends Io{constructor(){super(...arguments),this.type=re.circlePacking}setCategoryField(e){return this._categoryField=e,this._categoryField}getCategoryField(){return this._categoryField}setValueField(e){return this._valueField=e,this._valueField}getValueField(){return this._valueField}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}setAttrFromSpec(){var e;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField((e=this._spec.seriesField)!==null&&e!==void 0?e:xu),this._spec.drill&&this.initDrillable({event:this.event,mode:this._option.mode,drillField:()=>{var t;return(t=this._spec.drillField)!==null&&t!==void 0?t:kl},getRawData:()=>this.getRawData()}),this._circlePacking=this._spec.circlePacking,this._label=this._spec.label,this._layoutPadding=this._spec.layoutPadding}initData(){super.initData();const e=this.getRawData();B(e)||(this._spec.drill&&this.initDrillableData(this._dataSet),Fe(this._dataSet,"circlePackingLayout",nvt),Fe(this._dataSet,"flatten",Zx),e.transform({type:"circlePackingLayout",options:()=>({nodeKey:this._categoryField,padding:this._layoutPadding,includeRoot:!1,width:this.getLayoutRect().width||1,height:this.getLayoutRect().height||1})}),e.transform({type:"flatten",options:{callback:t=>{if(t.datum){const n=t.datum[t.depth];return Object.assign(Object.assign({},t),n)}return t}}}))}_addDataIndexAndKey(){const e=this.getRawData();B(e==null?void 0:e.dataSet)||(Fe(e.dataSet,"addVChartProperty",I0),e.transform({type:"addVChartProperty",options:{beforeCall:T4.bind(this),call:OO}}))}initMark(){this._initCirclePackingMark(),this._initLabelMark()}initMarkStyle(){this._initCirclePackingMarkStyle(),this._initLabelMarkStyle()}_initCirclePackingMark(){var e,t;if(((e=this._circlePacking)===null||e===void 0?void 0:e.visible)===!1)return;const n=this._createMark(md.mark.circlePacking,{isSeriesMark:!0},{setCustomizedShape:(t=this._spec.circlePacking)===null||t===void 0?void 0:t.customShape});this._circlePackingMark=n}_initCirclePackingMarkStyle(){B(this._circlePackingMark)||this.setMarkStyle(this._circlePackingMark,{x:e=>e.x,y:e=>e.y,outerRadius:e=>e.radius,innerRadius:0,startAngle:0,endAngle:2*Math.PI,fill:this.getColorAttribute(),zIndex:e=>e.depth},Ce.STATE_NORMAL,pe.Series)}_initLabelMark(){var e;if(((e=this._label)===null||e===void 0?void 0:e.visible)===!1)return;const t=this._createMark(md.mark.label,{isSeriesMark:!1});this._labelMark=t}_initLabelMarkStyle(){B(this._labelMark)||this.setMarkStyle(this._labelMark,{x:e=>e.x,y:e=>e.y,text:e=>e.key,cursor:"pointer"},Ce.STATE_NORMAL,pe.Series)}getStatisticFields(){return super.getStatisticFields().concat([{key:this._categoryField,operations:["values"]},{key:this._valueField,operations:["max","min"]},{key:f1,operations:["max","min","values"]},{key:xu,operations:["values"]}])}initTooltip(){this._tooltipHelper=new svt(this),this._circlePackingMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._circlePackingMark),this._labelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._labelMark)}initAnimation(){var e;const t=(e=this._spec.animationAppear)===null||e===void 0?void 0:e.preset;this.getMarksInType("arc").forEach(n=>{var s;n.setAnimationConfig(ft((s=X.getAnimationInKey("circlePacking"))===null||s===void 0?void 0:s(void 0,t),kt(n.name,this._spec,this._markAttributeContext)))}),this.getMarksInType("text").forEach(n=>{var s;n.setAnimationConfig(ft((s=X.getAnimationInKey("scaleInOut"))===null||s===void 0?void 0:s(),kt(n.name,this._spec,this._markAttributeContext)))})}initEvent(){super.initEvent(),this._spec.drill&&this.bindDrillEvent()}onLayoutEnd(e){super.onLayoutEnd(e),this._rawData.reRunAllTransform()}_noAnimationDataKey(e,t){}getActiveMarks(){return[this._circlePackingMark]}getMarkData(e){return e!=null&&e.datum?e.datum[e.datum.length-1]:e}}md.type=re.circlePacking,md.mark=ovt,Yt(md,W4);const lvt=()=>{X.registerSeries(md.type,md),rg(),ta(),IO(),avt()},Pue=i=>{let e=0;return i.forEach((t,n)=>{var s;B(t.value)&&(!((s=t.children)===null||s===void 0)&&s.length?t.value=Pue(t.children):t.value=0),e+=Math.abs(t.value)}),e};function HX(i){return i.depth}function VX(i,e){return e-1-i.endDepth}function cvt(i,e){return i.sourceLinks.length?i.depth:e-1}function uvt(i,e,t){return i.targetLinks.length?i.depth:i.sourceLinks.length?Mn(i.sourceLinks.map(n=>t[n.target].depth))-1:0}const wC=(i,e)=>(i==null?void 0:i.y0)-(e==null?void 0:e.y0),UX=(i,e)=>{if(B(i.value))return null;const t=(e?i.targetLinks:i.sourceLinks).reduce((n,s)=>(B(s.value)?n.count+=1:n.sum+=s.value,n),{sum:0,count:0});return t.count>0?(i.value-t.sum)/t.count:null},hvt={left:HX,right:VX,justify:cvt,center:uvt,start:HX,end:VX},dvt=gy(0,1);class Jx{constructor(e){this._ascendingSourceBreadth=(s,r)=>wC(this._nodeMap[s.source],this._nodeMap[r.source])||s.index-r.index,this._ascendingTargetBreadth=(s,r)=>wC(this._nodeMap[s.target],this._nodeMap[r.target])||s.index-r.index,this.options=Object.assign({},Jx.defaultOptions,e);const t=this.options.nodeKey,n=ee(t)?t:t?Tc(t):null;this._getNodeKey=n,this._logger=ii.getInstance(),this._alignFunc=ee(this.options.setNodeLayer)?s=>this.options.setNodeLayer(s.datum):hvt[this.options.nodeAlign]}layout(e,t){if(!e)return null;const n="width"in t?{x0:0,x1:t.width,y0:0,y1:t.height,width:t.width,height:t.height}:{x0:Math.min(t.x0,t.x1),x1:Math.max(t.x0,t.x1),y0:Math.min(t.y0,t.y1),y1:Math.max(t.y0,t.y1),width:Math.abs(t.x1-t.x0),height:Math.abs(t.y1-t.y0)};$U(this.options.direction)?this._viewBox={x0:n.y0,x1:n.y1,y0:n.x0,y1:n.x1,width:n.height,height:n.width}:this._viewBox=n;const s=this.computeNodeLinks(e),r=s.nodes;let a=s.links;if(this._nodeMap=s.nodeMap,this.computeNodeValues(r),this.computeNodeDepths(r),["right","end","justify"].includes(this.options.nodeAlign)&&this.computeNodeEndDepths(r),this._maxDepth<=1)return null;const o=this.computeNodeBreadths(r);if(this.computeLinkBreadths(r),r.forEach(l=>{l.sourceLinks=l.sourceLinks.filter(c=>!B(c.source)&&!B(c.target)),l.targetLinks=l.targetLinks.filter(c=>!B(c.source)&&!B(c.target))}),a=a.filter(l=>!B(l.source)&&!B(l.target)),$U(this.options.direction))if(this.options.inverse){const l=this._viewBox.x1;r.forEach(c=>{const{y0:u,y1:h,x0:d,x1:p}=c;c.y0=l-p,c.y1=l-d,c.x0=u,c.x1=h}),a.forEach(c=>{c.vertical=!0;const{x0:u,x1:h,y0:d,y1:p}=c;c.x0=d,c.x1=p,c.y0=l-u,c.y1=l-h})}else r.forEach(l=>{const{y0:c,y1:u}=l;l.y0=l.x0,l.y1=l.x1,l.x0=c,l.x1=u}),a.forEach(l=>{l.vertical=!0;const c=l.x0,u=l.x1;l.x0=l.y0,l.x1=l.y1,l.y0=c,l.y1=u});else this.options.inverse&&(r.forEach(l=>{const{x0:c,x1:u}=l;l.x0=n.x1-u,l.x1=n.x1-c}),a.forEach(l=>{l.x0=n.x1-l.x0,l.x1=n.x1-l.x1}));return a.forEach(l=>{const c=this._nodeMap[l.source],u=this._nodeMap[l.target];l.sourceRect={x0:c.x0,x1:c.x1,y0:c.y0,y1:c.y1},l.targetRect={x0:u.x0,x1:u.x1,y1:u.y1,y0:u.y0}}),{nodes:r,links:a,columns:o}}computeHierarchicNodeLinks(e){const t=[],n=[],s={},r={},a=[];Pue(e);const o=(l,c,u)=>{l.forEach((h,d)=>{const p=this._getNodeKey?this._getNodeKey(h):u?`${u[u.length-1].key}-${d}`:`${c}-${d}`,f=B(h.value)?0:mp(h.value);if(s[p])s[p].value=void 0;else{const g={depth:c,datum:h,index:d,key:p,value:f,sourceLinks:[],targetLinks:[]};s[p]=g,t.push(g)}u&&a.push({source:u[u.length-1].key,target:p,value:f,parents:u}),h.children&&h.children.length&&o(h.children,c+1,u?u.concat([s[p]]):[s[p]])})};return o(e,0,null),a.forEach((l,c)=>{const u=`${l.source}-${l.target}`,h=kc(l,["parents"]);if(h.parents=l.parents.map(p=>kc(p,["sourceLinks","targetLinks"])),r[u])return r[u].value+=mp(l.value),void r[u].datum.push(h);const d={index:c,key:`${l.source}-${l.target}`,source:l.source,target:l.target,datum:[h],value:l.value,parents:l.parents.map(p=>p.key)};n.push(d),s[l.source].sourceLinks.push(d),s[l.target].targetLinks.push(d),r[u]=d}),{nodes:t,links:n,nodeMap:s}}computeSourceTargetNodeLinks(e){const t=[],n=[],s={};e.nodes&&e.nodes.forEach((a,o)=>{const l={depth:-1,datum:a,index:o,key:this._getNodeKey?this._getNodeKey(a):o,value:a.value,sourceLinks:[],targetLinks:[]};s[l.key]=l,t.push(l)});const r=[];return e.links.forEach((a,o)=>{const l=!B(a.source),c=!B(a.target);if(e.nodes&&(!s[a.source]||!s[a.target]))return;e.nodes||!l||s[a.source]||(s[a.source]={value:void 0,depth:-1,index:t.length,key:a.source,datum:null,sourceLinks:[],targetLinks:[]},t.push(s[a.source])),e.nodes||!c||s[a.target]||(s[a.target]={value:void 0,depth:-1,index:t.length,key:a.target,datum:null,sourceLinks:[],targetLinks:[]},t.push(s[a.target]));const u={index:o,source:a.source,target:a.target,datum:a,value:a.value};this.options.divideNodeValueToLink&&B(a.value)&&r.push(u),n.push(u),l&&s[a.source].sourceLinks.push(u),c&&s[a.target].targetLinks.push(u)}),this.options.divideNodeValueToLink&&r.length&&r.forEach(a=>{const o=[UX(s[a.source]),UX(s[a.target],!0)].filter(l=>!B(l));o.length&&(a.value=Mn(o))}),{nodeMap:s,nodes:t,links:n}}computeNodeLinks(e){let t;"links"in e?t=this.computeSourceTargetNodeLinks(e):(this._isHierarchic=!0,t=this.computeHierarchicNodeLinks(e.nodes));let n=t.nodes;const s=t.links;if(this.options.linkSortBy)for(let r=0,a=n.length;r<a;r++)n[r].sourceLinks.sort(this.options.linkSortBy),n[r].targetLinks.sort(this.options.linkSortBy);return this.options.dropIsolatedNode&&(n=n.filter(r=>r.targetLinks.length||r.sourceLinks.length)),{nodes:n,links:s,nodeMap:t.nodeMap}}computeNodeValues(e){for(let t=0,n=e.length;t<n;t++){const s=e[t];s.value=Math.max(B(s.value)?0:mp(s.value),s.sourceLinks.reduce((r,a)=>{var o;return r+((o=mp(a.value))!==null&&o!==void 0?o:0)},0),s.targetLinks.reduce((r,a)=>{var o;return r+((o=mp(a.value))!==null&&o!==void 0?o:0)},0))}}computeNodeDepths(e){const t=e.length;let n,s,r=e,a=0;for(;r.length&&a<t;){n=[],s={};for(let o=0,l=r.length;o<l;o++){const c=r[o];if(c&&(c.depth=a,c.sourceLinks&&c.sourceLinks.length))for(let u=0,h=c.sourceLinks.length;u<h;u++){const d=c.sourceLinks[u];s[d.target]||(n.push(this._nodeMap[d.target]),s[d.target]=!0)}}r=n,a+=1}a>t&&this._logger.warn("Error: there is a circular link"),this._maxDepth=a}computeNodeEndDepths(e){const t=e.length;let n,s,r=e,a=0;for(;r.length&&a<t;){n=[],s={};for(let o=0,l=r.length;o<l;o++){const c=r[o];if(c){c.endDepth=a;for(let u=0,h=c.targetLinks.length;u<h;u++){const d=c.targetLinks[u];s[d.source]||(n.push(this._nodeMap[d.source]),s[d.source]=!0)}}}r=n,a+=1}a>t&&this._logger.warn("Error: there is a circular link")}computeNodeLayers(e){const t=this.options.nodeWidth,n=this.options.linkWidth,s=this.options.minStepWidth,r=this._viewBox.width;let a=null,o=null,l=!1;if(be(t)){const u=zi(parseFloat(t.replace("%",""))/100,0,1);let h=r/(this._maxDepth-1+u);s>0&&(h=Math.max(s,h)),a=h*u,o=h*(1-u),l=!0}else if(ye(t)){if(a=t,ye(n))o=n;else if(B(n)){let u=(r-t)/(this._maxDepth-1);s>0&&(u=Math.max(s,u)),o=u-t}l=!0}else ee(t)&&ye(n)&&(o=n);const c=[];for(let u=0,h=e.length;u<h;u++){const d=e[u];d.layer=this._isHierarchic?d.depth:zi(Math.floor(this._alignFunc(d,this._maxDepth,this._nodeMap)),0,this._maxDepth-1);const p=d.layer;p===this._maxDepth-1&&(d.isLastLayer=!0),l&&(d.x0=this._viewBox.x0+p*(a+o),d.x1=d.x0+a),c[p]?c[p].push(d):c[p]=[d]}if(this.options.nodeSortBy)for(let u=0,h=c.length;u<h;u++)c[u].sort(this.options.nodeSortBy);if(!l&&ee(t)){let u=this._viewBox.x0;for(let h=0;h<this._maxDepth;h++){const d=c[h];let p=0,f=0;for(let g=0,m=d&&d.length;g<m;g++){const y=d[g],b=t(y);y.x0=u,y.x1=u+b,p=Math.max(a,b);const x=y.sourceLinks;for(let S=0,C=x.length;S<C;S++){const w=x[S],A=ee(n)?n(w,this._viewBox):o;f=Math.max(f,A)}}u+=p+f}}return c}initializeNodeBreadths(e){var t,n;const s=(t=this.options.minLinkHeight)!==null&&t!==void 0?t:0;let r=(n=this.options.minNodeHeight)!==null&&n!==void 0?n:0;(B(r)||r<s)&&(r=s);let a=0,o=null,l=null;if(ee(this.options.nodeGap))o=this.options.nodeGap,a=e.reduce((p,f)=>{const g=f.reduce((y,b)=>y+b.value,0),m=f.reduce((y,b)=>y+this.options.nodeGap(b),0);return Math.min(p,(this._viewBox.height-m)/g)},1/0);else{const p=e.reduce((m,y)=>Math.max(m,y.length),0),f=this._viewBox.height/p,g=Math.min(this.options.nodeGap,f);if(o=()=>g,this._gapY=g,(r+g)*p>this._viewBox.height&&(r=f-g),this.options.equalNodeHeight)l=this._viewBox.height/p-g;else{const m=r>0?Math.max(g,r):g;a=e.reduce((y,b)=>{const x=b.reduce((S,C)=>S+C.value,0);return Math.min(y,(this._viewBox.height-((b.length-1)*m+r))/x)},1/0)}}const c=this.options.gapPosition==="start",u=!c&&this.options.gapPosition!=="end",h=ye(this.options.nodeHeight)?p=>this.options.nodeHeight:ee(this.options.nodeHeight)?this.options.nodeHeight:l>0?p=>l:p=>Math.max(p.value*a,0),d=ye(this.options.linkHeight)?()=>this.options.linkHeight:ee(this.options.linkHeight)?this.options.linkHeight:(p,f,g)=>Math.max(f.value?g*dvt(p.value/f.value):0,s,0);for(let p=0,f=e.length;p<f;p++){const g=e[p];if(!g||!g.length)continue;let m=this._viewBox.y0,y=0,b=0,x=0;for(let C=0,w=g.length;C<w;C++){const A=g[C];y=o(A),c&&(m+=y),x=h(A),b=Math.max(x,r),A.y0=m,A.y1=m+b,m=c?A.y1:A.y1+y;for(let T=0,E=A.sourceLinks.length;T<E;T++){const P=A.sourceLinks[T];P.thickness=d(P,A,x)}}let S=this._viewBox.y1-m+(u?y:0);if(S>0){if(this.options.crossNodeAlign!=="start")if(this.options.crossNodeAlign==="end")for(let C=0,w=g.length;C<w;++C){const A=g[C];A.y0+=S,A.y1+=S}else{S/=g.length+1;for(let C=0,w=g.length;C<w;++C){const A=g[C];A.y0+=S*(C+1),A.y1+=S*(C+1)}}}else if(S<0&&g.length>1&&(S/=g.length-1,y+S>=0)){y+=S,this._gapY=Math.min(y);for(let C=1,w=g.length;C<w;++C){const A=g[C];A.y0+=S*C,A.y1+=S*C}}this.reorderLinks(g)}}computeNodeBreadths(e){const t=this.computeNodeLayers(e);this.initializeNodeBreadths(t);const n=this.options.iterations;if(!this._isHierarchic&&!ee(this.options.setNodeLayer)&&!ee(this.options.nodeGap))for(let s=0;s<n;++s){const r=Math.pow(.99,s),a=Math.max(1-r,(s+1)/n);this.relaxRightToLeft(t,r,a),this.relaxLeftToRight(t,r,a)}return t}relaxLeftToRight(e,t,n){for(let s=1,r=e.length;s<r;++s){const a=e[s];for(let o=0,l=a.length;o<l;o++){const c=a[o];let u=0,h=0;for(let p=0,f=c.targetLinks.length;p<f;p++){const g=c.targetLinks[p],m=g.value*(c.layer-this._nodeMap[g.source].layer);u+=this.targetTop(this._nodeMap[g.source],c)*m,h+=m}if(!(h>0))continue;const d=(u/h-c.y0)*t;c.y0+=d,c.y1+=d,this.reorderNodeLinks(c)}B(this.options.nodeSortBy)&&a.sort(wC),this.resolveCollisions(a,n)}}relaxRightToLeft(e,t,n){for(let s=e.length-2;s>=0;--s){const r=e[s];for(let a=0,o=r.length;a<o;a++){const l=r[a];let c=0,u=0;for(let d=0,p=l.sourceLinks.length;d<p;d++){const f=l.sourceLinks[d],g=f.value*(this._nodeMap[f.target].layer-l.layer);c+=this.sourceTop(l,this._nodeMap[f.target])*g,u+=g}if(!(u>0))continue;const h=(c/u-l.y0)*t;l.y0+=h,l.y1+=h,this.reorderNodeLinks(l)}this.options.nodeSortBy===void 0&&r.sort(wC),this.resolveCollisions(r,n)}}resolveCollisions(e,t){const n=e.length>>1,s=e[n];this.resolveCollisionsBottomToTop(e,s.y0-this._gapY,n-1,t),this.resolveCollisionsTopToBottom(e,s.y1+this._gapY,n+1,t),this.resolveCollisionsBottomToTop(e,this._viewBox.y1,e.length-1,t),this.resolveCollisionsTopToBottom(e,this._viewBox.y0,0,t)}resolveCollisionsTopToBottom(e,t,n,s){for(;n<e.length;++n){const r=e[n],a=(t-r.y0)*s;a>1e-6&&(r.y0+=a,r.y1+=a),t=r.y1+this._gapY}}resolveCollisionsBottomToTop(e,t,n,s){for(;n>=0;--n){const r=e[n],a=(r.y1-t)*s;a>1e-6&&(r.y0-=a,r.y1-=a),t=r.y0-this._gapY}}targetTop(e,t){let n,s,r,a=e.y0-(e.sourceLinks.length-1)*this._gapY/2;for(n=0,s=e.sourceLinks.length;n<s&&(r=e.sourceLinks[n],r.target!==t.key);n++)a+=r.thickness+this._gapY;for(n=0,s=t.targetLinks.length;n<s&&(r=t.targetLinks[n],r.source!==e.key);n++)a-=r.thickness;return a}sourceTop(e,t){let n,s,r,a=t.y0-(t.targetLinks.length-1)*this._gapY/2;for(n=0,s=t.targetLinks.length;n<s&&(r=t.targetLinks[n],r.source!==e.key);n++)a+=r.thickness+this._gapY;for(n=0,s=e.sourceLinks.length;n<s&&(r=e.sourceLinks[n],r.target!==t.key);n++)a-=r.thickness;return a}computeLinkBreadthsNoOverlap(e){for(let t=0,n=e.length;t<n;t++){const s=e[t];let r=s.y0,a=!1;for(let l=0,c=s.sourceLinks.length;l<c;l++){const u=s.sourceLinks[l];a||(u.y0=r+u.thickness/2),u.x0=s.x1,r+u.thickness>s.y1||a?(u.y0=s.y1-u.thickness/2,a=!0):r+=u.thickness}let o=s.y0;a=!1;for(let l=0,c=s.targetLinks.length;l<c;l++){const u=s.targetLinks[l];a||(u.y1=o+u.thickness/2),u.x1=s.x0,o+u.thickness>s.y1||a?(u.y1=s.y1-u.thickness/2,a=!0):o+=u.thickness}}}computeLinkBreadthsOverlap(e){const t=this.options.linkOverlap;for(let n=0,s=e.length;n<s;n++){const r=e[n],a=t==="start"?r.y0:t==="end"?r.y1:(r.y0+r.y1)/2,o=t==="start"?.5:t==="end"?-.5:0;for(let l=0,c=r.sourceLinks.length;l<c;l++){const u=r.sourceLinks[l];u.y0=a+o*u.thickness,u.x0=r.x1}for(let l=0,c=r.targetLinks.length;l<c;l++){const u=r.targetLinks[l];u.y1=a+o*u.thickness,u.x1=r.x0}}}computeLinkBreadths(e){this.options.linkOverlap?this.computeLinkBreadthsOverlap(e):this.computeLinkBreadthsNoOverlap(e)}reorderNodeLinks(e){if(B(this.options.linkSortBy)){const t=e.targetLinks,n=e.sourceLinks;for(let s=0,r=t.length;s<r;s++){const a=t[s];this._nodeMap[a.source].sourceLinks.sort(this._ascendingTargetBreadth)}for(let s=0,r=n.length;s<r;s++){const a=n[s];this._nodeMap[a.target].targetLinks.sort(this._ascendingSourceBreadth)}}}reorderLinks(e){if(B(this.options.linkSortBy))for(let t=0,n=e.length;t<n;t++){const s=e[t];s.sourceLinks.sort(this._ascendingTargetBreadth),s.targetLinks.sort(this._ascendingSourceBreadth)}}}Jx.defaultOptions={iterations:6,nodeAlign:"justify",direction:"horizontal",nodeWidth:24,nodeGap:8,crossNodeAlign:"middle",dropIsolatedNode:!0};const pvt=(i,e)=>{const t=new Jx(i).layout(Array.isArray(e)?e[0]:e,"width"in i?{width:i.width,height:i.height}:{x0:i.x0,x1:i.x1,y0:i.y0,y1:i.y1});return t?[t]:[]},fvt=()=>{Q.registerTransform("sankey",{transform:pvt,markPhase:"beforeJoin"},!0)},Oue=(i,e,t)=>{e.forEach(n=>{B(n[t])||i.add(n[t]),n.children&&n.children.length>0&&Oue(i,n.children,t)})},gvt=i=>{var e;if(!i||!ie(i))return[];if(i.length>1){const t={links:[],nodes:[]};return i.forEach(n=>{n.id!=="links"&&n.id!=="nodes"||(t[n.id]=n.values)}),[t]}return!((e=i[0])===null||e===void 0)&&e.latestData?i[0].latestData:i},mvt=(i,e)=>{if(!i||!(e!=null&&e.view)||!i.length)return[];const t=e.view();if(t.x1-t.x0==0||t.y1-t.y0==0||t.x1-t.x0==-1/0||t.x1-t.x0==1/0||t.y1-t.y0==-1/0||t.y1-t.y0==1/0)return[];const n=i[0];if((e.sourceField!=="source"||e.targetField!=="target"||e.valueField!=="value")&&n.links){const a=[];n.links.forEach(o=>{const l={};for(const c in o)c===e.sourceField?l.source=o[e.sourceField]:c===e.targetField?l.target=o[e.targetField]:c===e.valueField?l.value=o[e.valueField]:l[c]=o[c];a.push(l)}),n.links=a}const s=new Jx(e),r=[];return r.push(s.layout(n,t)),r},yvt=i=>{var e,t;return i&&ie(i)&&(!((e=i[0])===null||e===void 0)&&e.latestData)&&i[0].latestData.length&&i[0].latestData[0]&&(t=i[0].latestData[0].nodes)!==null&&t!==void 0?t:[]},_vt=i=>{var e,t;return i&&ie(i)&&(!((e=i[0])===null||e===void 0)&&e.latestData)&&i[0].latestData.length&&i[0].latestData[0]&&(t=i[0].latestData[0].links)!==null&&t!==void 0?t:[]};class vvt extends ar{constructor(){super(...arguments),this._getDimensionData=e=>{if(e.source){if(ye(e.source)){const t=this.series.getSeriesKeys();return t[e.source]+" => "+t[e.target]}return e.source+" => "+e.target}return e.datum?e.datum[this.series.getSpec().categoryField]:e.key},this.markTooltipValueCallback=e=>e.value}}const bvt=(i,e=!0)=>({type:i.direction==="horizontal"?"growWidthIn":"growHeightIn",options:{overall:e&&i.growFrom(),orient:"positive"}}),xvt=(i,e)=>e==="fadeIn"?{type:"fadeIn"}:bvt(i),Svt=i=>i==="fadeIn"?{type:"fadeIn"}:{type:"linkPathGrowIn"},Cvt=()=>{X.registerAnimation("sankeyNode",(i,e)=>Object.assign({appear:xvt(i,e)},MO)),X.registerAnimation("sankeyLinkPath",(i,e)=>({appear:Svt(e),enter:{type:"linkPathGrowIn"},exit:{type:"linkPathGrowOut"},disappear:{type:"linkPathGrowOut"}}))};class L1 extends Rs{constructor(){super(...arguments),this.type=L1.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{x:0,y:0,x0:0,y0:0,x1:100,y1:100,thickness:1,round:!0})}_initProduct(e){const t=this.getVGrammarView(),n=this.getProductId(),s=this.getStyle("direction");this._product=t.glyph("linkPath",e??t.rootMark).id(n).configureGlyph({direction:s}),this._compiledProductId=n}}L1.type="linkPath";const wvt=()=>{adt(),X.registerMark(L1.type,L1)},Avt=Object.assign(Object.assign({},Wi),{node:{name:"node",type:"rect"},link:{name:"link",type:"linkPath"}});class Mue extends or{_transformLabelSpec(e){this._addMarkLabelSpec(e,"node")}}class yd extends Io{constructor(){super(...arguments),this.type=re.sankey,this.transformerConstructor=Mue,this._nodeLayoutZIndex=Xt.Node,this._labelLayoutZIndex=Xt.Label,this._viewBox=new nr,this._fillByNode=e=>{var t,n,s,r,a;if(e&&e.sourceRect&&e.targetRect)return this._fillByLink(e);const o=(n=(t=this._spec.node)===null||t===void 0?void 0:t.style)===null||n===void 0?void 0:n.fill;if(F(o))return o;if(F(this._spec.seriesField)){const l=(r=(s=this._option)===null||s===void 0?void 0:s.globalScale)===null||r===void 0?void 0:r.getScale("color"),c=e!=null&&e.datum?e.datum:e;return l==null?void 0:l.scale(c==null?void 0:c[this._spec.seriesField])}return(a=this._colorScale)===null||a===void 0?void 0:a.scale(this._getNodeNameFromData(e))},this._fillByLink=e=>{var t,n,s,r,a,o,l;const c=(n=(t=this._spec.link)===null||t===void 0?void 0:t.style)===null||n===void 0?void 0:n.fill;if(c)return c;if(F(this._spec.seriesField)){const h=(r=(s=this._nodesSeriesData)===null||s===void 0?void 0:s.getLatestData())===null||r===void 0?void 0:r.find(f=>e.source===f.key),d=h==null?void 0:h.datum,p=(o=(a=this._option)===null||a===void 0?void 0:a.globalScale)===null||o===void 0?void 0:o.getScale("color");return p==null?void 0:p.scale(d==null?void 0:d[this._spec.seriesField])}const u=ye(e.source)?this.getNodeList()[e.source]:e.source;return(l=this._colorScale)===null||l===void 0?void 0:l.scale(u)},this._handleEmphasisElement=e=>{var t,n,s,r,a;const o=(t=this._spec.emphasis)!==null&&t!==void 0?t:{},l=e.item;o.effect==="adjacency"?l&&l.mark===((n=this._nodeMark)===null||n===void 0?void 0:n.getProduct())?this._handleNodeAdjacencyClick(l):l&&l.mark===((s=this._linkMark)===null||s===void 0?void 0:s.getProduct())?this._handleLinkAdjacencyClick(l):this._handleClearEmpty():o.effect==="related"&&(l&&l.mark===((r=this._nodeMark)===null||r===void 0?void 0:r.getProduct())?this._handleNodeRelatedClick(l):l&&l.mark===((a=this._linkMark)===null||a===void 0?void 0:a.getProduct())?this._handleLinkRelatedClick(l):this._handleClearEmpty())},this._handleClearEmpty=()=>{var e,t;if(!this._needClear)return;const n=(e=this._nodeMark)===null||e===void 0?void 0:e.getProductElements();if(!n||!n.length)return;const s=(t=this._linkMark)===null||t===void 0?void 0:t.getProductElements();if(!s||!s.length)return;const r=[Ce.STATE_SANKEY_EMPHASIS,Ce.STATE_SANKEY_EMPHASIS_REVERSE];n.forEach(a=>{a.removeState(r)}),s.forEach(a=>{a.removeState(r)}),this._needClear=!1},this._handleNodeAdjacencyClick=e=>{const t=e.getDatum(),n=[t.key];if(this._linkMark){const s=this._linkMark.getProductElements();if(!s||!s.length)return;s.forEach((r,a)=>{const o=r.getDatum(),l=o!=null&&o.parents?"parents":"source";if(q(o[l]).includes(t.key)){let c;if(n.includes(o.source)||n.push(o.source),n.includes(o.target)||n.push(o.target),l==="parents"){const u=o.datum;c=(u?u.filter(h=>h.parents.some(d=>d.key===t.key)).reduce((h,d)=>h+d.value,0):0)/o.value}r.removeState(Ce.STATE_SANKEY_EMPHASIS_REVERSE),r.addState(Ce.STATE_SANKEY_EMPHASIS),r.addState(Ce.STATE_SANKEY_EMPHASIS,{ratio:c})}else o.target===t.key?n.includes(o.source)||n.push(o.source):(r.removeState(Ce.STATE_SANKEY_EMPHASIS),r.addState(Ce.STATE_SANKEY_EMPHASIS_REVERSE))})}this._nodeMark&&this._highLightElements(this._nodeMark.getProductElements(),n),this._needClear=!0},this._handleLinkAdjacencyClick=e=>{const t=e.getDatum(),n=[t.source,t.target];if(this._linkMark){const s=this._linkMark.getProductElements();if(!s||!s.length)return;s.forEach(r=>{r===e?(r.removeState(Ce.STATE_SANKEY_EMPHASIS_REVERSE),r.addState(Ce.STATE_SANKEY_EMPHASIS,{ratio:1})):(r.removeState(Ce.STATE_SANKEY_EMPHASIS),r.addState(Ce.STATE_SANKEY_EMPHASIS_REVERSE))})}this._nodeMark&&this._highLightElements(this._nodeMark.getProductElements(),n),this._needClear=!0},this._handleNodeRelatedClick=e=>{var t;const n=e.getDatum(),s=this._nodeMark.getProductElements();if(!s||!s.length)return;const r=this._linkMark.getProductElements();if(!(!r||!r.length)){if((!((t=r[0].getDatum())===null||t===void 0)&&t.parents?"parents":"source")=="source"){const a=[n.key],o=[];if(r.forEach((l,c)=>{var u,h,d,p;const f=l.getDatum(),g=f!=null&&f.parents?"parents":"source";if(q(f[g]).includes(n.key)){if(o.includes((u=f.key)!==null&&u!==void 0?u:f.index)||o.push((h=f.key)!==null&&h!==void 0?h:f.index),a.includes(f.source)||a.push(f.source),!a.includes(f.target)){a.push(f.target);let m=s.find(y=>y.data[0].key===f.target).data[0].sourceLinks;for(;(m==null?void 0:m.length)>0;){const y=[];return m.forEach(b=>{var x,S;if(!o.includes((x=b.key)!==null&&x!==void 0?x:b.index)&&(o.push((S=b.key)!==null&&S!==void 0?S:b.index),!a.includes(b.target))){a.push(b.target);const C=s.find(w=>w.data[0].key===b.target);y.push(C.data[0].targetLinks)}}),void(m=y)}}}else if(f.target===n.key&&(o.includes((d=f.key)!==null&&d!==void 0?d:f.index)||o.push((p=f.key)!==null&&p!==void 0?p:f.index),!a.includes(f.source))){a.push(f.source);let m=s.find(y=>y.data[0].key===f.source).data[0].targetLinks;for(;(m==null?void 0:m.length)>0;){const y=[];return m.forEach(b=>{var x,S;if(!o.includes((x=b.key)!==null&&x!==void 0?x:b.index)&&(o.push((S=b.key)!==null&&S!==void 0?S:b.index),!a.includes(b.source))){a.push(b.source);const C=s.find(w=>w.data[0].key===b.source);y.push(C.data[0].targetLinks)}}),void(m=y)}}}),this._linkMark){const l=this._linkMark.getProductElements();if(!l||!l.length)return;l.forEach((c,u)=>{var h;o.includes((h=c.getDatum().key)!==null&&h!==void 0?h:c.getDatum().index)?(c.removeState(Ce.STATE_SANKEY_EMPHASIS_REVERSE),c.addState(Ce.STATE_SANKEY_EMPHASIS)):(c.removeState(Ce.STATE_SANKEY_EMPHASIS),c.addState(Ce.STATE_SANKEY_EMPHASIS_REVERSE))})}this._nodeMark&&this._highLightElements(this._nodeMark.getProductElements(),a)}else{const a=[n.key],o=n.targetLinks.reduce((l,c)=>(q(c.datum).forEach(u=>{const h=u.parents,d=h.length;for(let p=0;p<d;p++){const f=h[p].key,g=h[p+1]?h[p+1].key:n.key,m=u.value,y=l.find(b=>b.source===f&&b.target===g);y?y.value+=m:l.push({source:f,target:g,value:m})}}),l),[]);r.forEach((l,c)=>{const u=l.getDatum(),h=u!=null&&u.parents?"parents":"source",d=u.datum,p=d?d.filter(g=>g[h].some(m=>m.key===n.key)):null,f=o.find(g=>g.source===u.source&&g.target===u.target);if(p&&p.length){a.includes(u.source)||a.push(u.source),a.includes(u.target)||a.push(u.target);const g=p.reduce((m,y)=>m+y.value,0)/u.value;return l.removeState(Ce.STATE_SANKEY_EMPHASIS_REVERSE),l.addState(Ce.STATE_SANKEY_EMPHASIS),void l.addState(Ce.STATE_SANKEY_EMPHASIS,{ratio:g})}if(f)return a.includes(u.source)||a.push(u.source),a.includes(u.target)||a.push(u.target),l.removeState(Ce.STATE_SANKEY_EMPHASIS_REVERSE),l.addState(Ce.STATE_SANKEY_EMPHASIS),void l.addState(Ce.STATE_SANKEY_EMPHASIS,{ratio:f.value/u.value});l.removeState(Ce.STATE_SANKEY_EMPHASIS),l.addState(Ce.STATE_SANKEY_EMPHASIS_REVERSE)}),this._nodeMark&&this._highLightElements(this._nodeMark.getProductElements(),a)}this._needClear=!0}},this._handleLinkRelatedClick=e=>{var t;const n=this._nodeMark.getProductElements();if(!n||!n.length)return;const s=this._linkMark.getProductElements();if(!(!s||!s.length)){if((!((t=e.getDatum())===null||t===void 0)&&t.parents?"parents":"source")=="source"){const r=[Ce.STATE_SANKEY_EMPHASIS,Ce.STATE_SANKEY_EMPHASIS_REVERSE];this._linkMark&&s.forEach(a=>{a.removeState(r)}),this._nodeMark&&n.forEach(a=>{a.removeState(r)})}else{const r=e.getDatum(),a=[r.source,r.target],o=[];q(r.datum).forEach(l=>{const c=l.parents,u=c.length;for(let h=0;h<u-1;h++){const d=c[h].key,p=c[h+1].key,f=l.value,g=o.find(m=>m.source===d&&m.target===p);o.push({source:c[h].key,target:c[h+1].key,value:l.value}),g?g.value+=f:o.push({source:d,target:p,value:f})}}),s.forEach(l=>{const c=l.getDatum(),u=c.datum;if(c.source===r.source&&c.target===r.target)return l.removeState(Ce.STATE_SANKEY_EMPHASIS_REVERSE),void l.addState(Ce.STATE_SANKEY_EMPHASIS,{ratio:1});const h=u?u.filter(p=>{const f=p.parents.map(g=>g.key);return f.includes(r.source)&&f.includes(r.target)}):null;if(h&&h.length){a.includes(c.source)||a.push(c.source),a.includes(c.target)||a.push(c.target);const p=h.filter(g=>g.parents.some((m,y)=>{var b;return m.key===r.source&&((b=g.parents[y+1])===null||b===void 0?void 0:b.key)===r.target})).reduce((g,m)=>g+m.value,0),f=p/c.value;return l.removeState(Ce.STATE_SANKEY_EMPHASIS_REVERSE),l.addState(Ce.STATE_SANKEY_EMPHASIS),void l.addState(Ce.STATE_SANKEY_EMPHASIS,{ratio:f})}const d=o.find(p=>p.source===c.source&&p.target===c.target);if(d)return a.includes(c.source)||a.push(c.source),a.includes(c.target)||a.push(c.target),l.removeState(Ce.STATE_SANKEY_EMPHASIS_REVERSE),l.addState(Ce.STATE_SANKEY_EMPHASIS),void l.addState(Ce.STATE_SANKEY_EMPHASIS,{ratio:d.value/c.value});l.removeState(Ce.STATE_SANKEY_EMPHASIS),l.addState(Ce.STATE_SANKEY_EMPHASIS_REVERSE)}),this._highLightElements(n,a)}this._needClear=!0}}}get direction(){var e;return(e=this._spec.direction)!==null&&e!==void 0?e:"horizontal"}getCategoryField(){return this._categoryField}setCategoryField(e){return this._categoryField=e,this._categoryField}getValueField(){return this._valueField}setValueField(e){return this._valueField=e,this._valueField}setAttrFromSpec(){var e;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField((e=this._spec.seriesField)!==null&&e!==void 0?e:this._spec.categoryField)}initData(){var e,t,n,s;super.initData();const r=this.getViewData(),a=this.getRawData();if(a&&r){Fe(this._dataSet,"sankeyLayout",mvt),Fe(this._dataSet,"sankeyFormat",gvt),a.transform({type:"sankeyFormat"},!1),r.transform({type:"sankeyLayout",options:{view:()=>({x0:this._viewBox.x1,x1:this._viewBox.x2,y0:this._viewBox.y1,y1:this._viewBox.y2}),sourceField:this._spec.sourceField,targetField:this._spec.targetField,valueField:this._spec.valueField,direction:this.direction,crossNodeAlign:this._spec.crossNodeAlign,nodeAlign:(e=this._spec.nodeAlign)!==null&&e!==void 0?e:"justify",nodeGap:(t=this._spec.nodeGap)!==null&&t!==void 0?t:8,nodeWidth:(n=this._spec.nodeWidth)!==null&&n!==void 0?n:10,linkWidth:this._spec.linkWidth,minStepWidth:this._spec.minStepWidth,minNodeHeight:(s=this._spec.minNodeHeight)!==null&&s!==void 0?s:4,minLinkHeight:this._spec.minLinkHeight,iterations:this._spec.iterations,nodeKey:this._spec.nodeKey,linkSortBy:this._spec.linkSortBy,nodeSortBy:this._spec.nodeSortBy,setNodeLayer:this._spec.setNodeLayer,dropIsolatedNode:this._spec.dropIsolatedNode,nodeHeight:this._spec.nodeHeight,linkHeight:this._spec.linkHeight,equalNodeHeight:this._spec.equalNodeHeight,linkOverlap:this._spec.linkOverlap,inverse:this._spec.inverse},level:Tl.sankeyLayout});const{dataSet:o}=this._option;Fe(o,"sankeyNodes",yvt),Fe(o,"flatten",Zx);const l=new Rt(o,{name:`sankey-node-${this.id}-data`});l.parse([this.getViewData()],{type:"dataview"}),l.transform({type:"sankeyNodes"}),l.transform({type:"flatten",options:{callback:u=>{if(u.datum){const h=u.datum[u.depth];return Object.assign(Object.assign({},u),h)}return u}}},!1),l.transform({type:"addVChartProperty",options:{beforeCall:Ly.bind(this),call:Of}},!1),this._nodesSeriesData=new Oc(this._option,l),Fe(o,"sankeyLinks",_vt);const c=new Rt(o,{name:`sankey-link-${this.id}-data`});c.parse([this.getViewData()],{type:"dataview"}),c.transform({type:"sankeyLinks"}),c.transform({type:"addVChartProperty",options:{beforeCall:Ly.bind(this),call:Of}},!1),this._linksSeriesData=new Oc(this._option,c)}}compileData(){var e,t;super.compileData(),(e=this._linksSeriesData)===null||e===void 0||e.compile(),(t=this._nodesSeriesData)===null||t===void 0||t.compile()}initMark(){var e,t,n,s;const r=this._createMark(yd.mark.node,{isSeriesMark:!0,dataView:this._nodesSeriesData.getDataView(),dataProductId:this._nodesSeriesData.getProductId(),stateSort:(e=this._spec.node)===null||e===void 0?void 0:e.stateSort},{setCustomizedShape:(t=this._spec.node)===null||t===void 0?void 0:t.customShape});r&&(r.setMarkConfig({zIndex:this._nodeLayoutZIndex}),this._nodeMark=r);const a=this._createMark(yd.mark.link,{dataView:this._linksSeriesData.getDataView(),dataProductId:this._linksSeriesData.getProductId(),stateSort:(n=this._spec.link)===null||n===void 0?void 0:n.stateSort},{setCustomizedShape:(s=this._spec.link)===null||s===void 0?void 0:s.customShape});a&&(this._linkMark=a)}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToNode=this.valueToNode.bind(this),this._markAttributeContext.valueToLink=this.valueToLink.bind(this)}valueToNode(e){const t=this._nodesSeriesData.getLatestData(),n=q(e)[0];return t&&t.find(s=>s.key===n)}valueToLink(e){const t=this._linksSeriesData.getLatestData(),n=q(e);return t&&t.find(s=>s&&s.source===n[0]&&s.target===n[1])}valueToPositionX(e){const t=this.valueToNode(e);return t==null?void 0:t.x0}valueToPositionY(e){const t=this.valueToNode(e);return t==null?void 0:t.y0}initMarkStyle(){this._initNodeMarkStyle(),this._initLinkMarkStyle()}_initNodeMarkStyle(){var e,t;const n=this._nodeMark;n&&(this.setMarkStyle(n,{x:s=>s.x0,x1:s=>s.x1,y:s=>s.y0,y1:s=>s.y1},Ce.STATE_NORMAL,pe.Mark),this.setMarkStyle(n,{fill:(t=(e=this._spec.node.style)===null||e===void 0?void 0:e.fill)!==null&&t!==void 0?t:this._fillByNode},"normal",pe.User_Mark))}_initLinkMarkStyle(){var e,t;const n=this._linkMark;n&&(this.setMarkStyle(n,{x0:s=>s.x0,x1:s=>s.x1,y0:s=>s.y0,y1:s=>s.y1,thickness:s=>s.thickness,direction:this.direction},Ce.STATE_NORMAL,pe.Series),this.setMarkStyle(n,{fill:(t=(e=this._spec.link.style)===null||e===void 0?void 0:e.fill)!==null&&t!==void 0?t:this._fillByLink},"normal",pe.User_Mark))}initLabelMarkStyle(e,t){if(!e)return;const n=t.position;n&&n.includes("inside")?this.setMarkStyle(e,{fill:"#ffffff",text:s=>this._createText(s,t),maxLineWidth:s=>{var r;return(r=t.limit)!==null&&r!==void 0?r:s.x1-s.x0}}):this.setMarkStyle(e,{fill:this._fillByNode,text:s=>this._createText(s,t),maxLineWidth:t.limit}),e.setMarkConfig({zIndex:this._labelLayoutZIndex})}_createText(e,t){if(B(e)||B(e.datum))return"";let n=e.datum[this._spec.categoryField]||"";const{formatMethod:s,formatter:r}=t||{},{formatFunc:a,args:o}=Pc(s,r,n,e.datum);return a&&(n=a(...o,{series:this})),n}initAnimation(){var e,t,n,s;const r={direction:this.direction,growFrom:()=>{var o,l;return this.direction==="horizontal"?(o=this._xAxisHelper)===null||o===void 0?void 0:o.getScale(0).scale(0):(l=this._yAxisHelper)===null||l===void 0?void 0:l.getScale(0).scale(0)}},a=(t=(e=this._spec)===null||e===void 0?void 0:e.animationAppear)===null||t===void 0?void 0:t.preset;this._nodeMark&&this._nodeMark.setAnimationConfig(ft((n=X.getAnimationInKey("sankeyNode"))===null||n===void 0?void 0:n(r,a),kt("node",this._spec,this._markAttributeContext))),this._linkMark&&this._linkMark.setAnimationConfig(ft((s=X.getAnimationInKey("sankeyLinkPath"))===null||s===void 0?void 0:s(r,a),kt("link",this._spec,this._markAttributeContext)))}initEvent(){var e,t,n;super.initEvent(),(e=this._nodesSeriesData.getDataView())===null||e===void 0||e.target.addListener("change",this.nodesSeriesDataUpdate.bind(this)),(t=this._linksSeriesData.getDataView())===null||t===void 0||t.target.addListener("change",this.linksSeriesDataUpdate.bind(this));const s=(n=this._spec.emphasis)!==null&&n!==void 0?n:{};if(this._option.disableTriggerEvent!==!0&&s.enable&&(s.effect==="adjacency"||s.effect==="related")){const r=s.trigger==="hover"?"pointerover":"pointerdown";this.event.on(r,{level:pi.chart},this._handleEmphasisElement)}}nodesSeriesDataUpdate(){this._nodesSeriesData.updateData(),this._nodeList=null,this._setNodeOrdinalColorScale()}linksSeriesDataUpdate(){this._linksSeriesData.updateData()}_highLightElements(e,t){e&&e.length&&e.forEach(n=>{n.removeState([Ce.STATE_SANKEY_EMPHASIS_REVERSE,Ce.STATE_SANKEY_EMPHASIS]),t.includes(n.getDatum().key)||n.addState(Ce.STATE_SANKEY_EMPHASIS_REVERSE)})}initTooltip(){this._tooltipHelper=new vvt(this),this._nodeMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._nodeMark),this._linkMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._linkMark)}_setNodeOrdinalColorScale(){var e,t,n,s,r;const a=(t=(e=this._option)===null||e===void 0?void 0:e.globalScale)===null||t===void 0?void 0:t.getScale("color");if(a!=null&&a._specified)return void(this._colorScale=a);let o,l;a&&(o=a.domain(),l=a.range()),l||(l=this._getDataScheme()),o&&!B(o[0])||(o=this.getNodeList(),o.length>10&&(l=(n=this._getDataScheme()[1])===null||n===void 0?void 0:n.scheme));const c=new Hx;(r=(s=c.domain(o)).range)===null||r===void 0||r.call(s,l),this._colorScale=c}getNodeList(){var e,t;if(this._nodeList)return this._nodeList;const n=this._rawData.latestData[0],s=n!=null&&n.nodes?!((e=n.nodes[0])===null||e===void 0)&&e.children?Array.from(this.extractNamesFromTree(n.nodes,this._spec.categoryField)):n.nodes.map((r,a)=>r[this._spec.categoryField]):n!=null&&n.links?Array.from(this.extractNamesFromLink(n.links)):(t=n==null?void 0:n.values)===null||t===void 0?void 0:t.map((r,a)=>r[this._spec.categoryField]);return this._nodeList=s,s}_getNodeNameFromData(e){var t;return e!=null&&e.datum?e.datum[this._spec.categoryField]:(t=e.key)!==null&&t!==void 0?t:e[this._spec.categoryField]}extractNamesFromTree(e,t){const n=new Set;return e.forEach(s=>{n.add(s[t]),s.children&&this.extractNamesFromTree(s.children,t).forEach(r=>n.add(r))}),n}extractNamesFromLink(e){const t=new Set,{sourceField:n,targetField:s}=this._spec;return e.forEach(r=>{F(r[n])&&t.add(r[n]),F(r[s])&&t.add(r[s])}),t}getDimensionField(){return[this._spec.categoryField]}getMeasureField(){return[this._valueField]}getRawDataStatisticsByField(e,t){var n;return this._rawStatisticsCache||(this._rawStatisticsCache={}),!this._rawStatisticsCache[e]&&(this._viewDataStatistics&&this.getViewData().transformsArr.length<=1&&(!((n=this._viewDataStatistics.latestData)===null||n===void 0)&&n[e])?this._rawStatisticsCache[e]=this._viewDataStatistics.latestData[e]:this._rawData&&(this._rawStatisticsCache[e]={values:this._collectByField(e)})),this._rawStatisticsCache[e]}_collectByField(e){var t,n,s;const r=[],a=(n=(t=this.getRawData())===null||t===void 0?void 0:t.latestData)===null||n===void 0?void 0:n[0];if(!a)return[];if(a.links)!((s=a.nodes)===null||s===void 0)&&s.length&&a.nodes.forEach(o=>{o[this._seriesField]&&r.push(o[this._seriesField])});else if(a.nodes){const o=new Set;return Oue(o,a.nodes,this._seriesField),Array.from(o)}return r}onLayoutEnd(e){super.onLayoutEnd(e),this._viewBox.set(0,0,this._region.getLayoutRect().width,this._region.getLayoutRect().height),this.getViewData().reRunAllTransform()}getDefaultShapeType(){return"square"}_noAnimationDataKey(e,t){}getActiveMarks(){return[this._nodeMark,this._linkMark]}getMarkData(e){return e.datum?ie(e.datum)?e.datum[e.datum.length-1]:e.datum:e}}yd.type=re.sankey,yd.transformerConstructor=Mue,yd.mark=Avt;const kvt=()=>{fvt(),Zu(),wvt(),ta(),Cvt(),Xu(),X.registerSeries(yd.type,yd)},WX=(i,e)=>{let t={},n=e.fields;if(ee(n)&&(n=n()),!(n!=null&&n.length)||!(i!=null&&i.length)||!i[0].latestData)return t;const s=i[0].latestData,r=Zx(s);return t=vB([{latestData:r}],e),t};class Tvt extends ar{constructor(){super(...arguments),this.markTooltipKeyCallback=e=>{var t,n;return(n=(t=this.series)===null||t===void 0?void 0:t.getMarkData(e))===null||n===void 0?void 0:n[this.series.getDimensionField()[0]]},this.markTooltipValueCallback=e=>{var t,n;const{measureFields:s}=this._seriesCacheInfo,r=(t=this.series)===null||t===void 0?void 0:t.getMarkData(e);if(s[0]&&r)return(n=r[s[0]])!==null&&n!==void 0?n:e.value},this.dimensionTooltipTitleCallback=e=>{var t;const{dimensionFields:n}=this._seriesCacheInfo,s=(t=this.series)===null||t===void 0?void 0:t.getMarkData(e);if(n[0]&&s)return s[n[0]]}}get defaultShapeType(){return"square"}}const Evt=Object.assign(Object.assign({},Wi),{nonLeaf:{name:"nonLeaf",type:"rect"},leaf:{name:"leaf",type:"rect"},nonLeafLabel:{name:"nonLeafLabel",type:"text"}}),Pvt=i=>i==="fadeIn"?{type:"fadeIn"}:{type:"growCenterIn"},Ovt=()=>{X.registerAnimation("treemap",(i,e)=>({appear:Pvt(e),enter:{type:"growCenterIn"},exit:{type:"growCenterOut"},disappear:{type:"growCenterOut"}}))};class Iue extends or{_transformLabelSpec(e){this._addMarkLabelSpec(e,"nonLeaf","nonLeafLabel","initNonLeafLabelMarkStyle"),this._addMarkLabelSpec(e,"leaf")}}class ic extends Io{constructor(){super(...arguments),this.type=re.treemap,this.transformerConstructor=Iue,this._categoryField="name",this._valueField="value",this._viewBox=new nr,this._enableAnimationHook=this.enableMarkAnimation.bind(this),this.isHierarchyData=()=>!0}getCategoryField(){return this._categoryField}setCategoryField(e){return this._categoryField=e,this._categoryField}getValueField(){return this._valueField}setValueField(e){return this._valueField=e,this._valueField}setAttrFromSpec(){var e;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField((e=this._spec.seriesField)!==null&&e!==void 0?e:xu),this._spec.roam&&(this.initZoomable(this.event,this._option.mode),this._matrix=new Zi),this._spec.drill&&this.initDrillable({event:this.event,mode:this._option.mode,drillField:()=>{var t,n;return(n=(t=this._spec.drillField)!==null&&t!==void 0?t:this._categoryField)!==null&&n!==void 0?n:kl},getRawData:()=>this.getRawData()}),Z(this._spec.maxDepth)&&(this._maxDepth=this._spec.maxDepth-1)}initData(){super.initData(),this.getViewData()&&this._spec.drill&&this.initDrillableData(this._dataSet)}compile(){super.compile(),this._runTreemapTransform()}_runTreemapTransform(e=!1){var t,n,s,r;const a=this._data.getProduct();a&&a.transform([{type:"treemap",nameField:this._categoryField,valueField:this._valueField,x0:this._viewBox.x1,x1:this._viewBox.x2,y0:this._viewBox.y1,y1:this._viewBox.y2,maxDepth:this._maxDepth,gapWidth:this._spec.gapWidth,padding:this._spec.nodePadding,splitType:this._spec.splitType,aspectRatio:this._spec.aspectRatio,labelPadding:!((t=this._spec.nonLeafLabel)===null||t===void 0)&&t.visible?(n=this._spec.nonLeafLabel)===null||n===void 0?void 0:n.padding:0,labelPosition:(s=this._spec.nonLeafLabel)===null||s===void 0?void 0:s.position,minVisibleArea:(r=this._spec.minVisibleArea)!==null&&r!==void 0?r:10,minChildrenVisibleArea:this._spec.minChildrenVisibleArea,minChildrenVisibleSize:this._spec.minChildrenVisibleSize,flatten:!0},{type:"map",callback:o=>(o&&[xu,"name"].forEach(l=>{o[l]=o.datum[o.depth][this._categoryField]}),o)}]),e&&this.getCompiler().renderNextTick()}_addDataIndexAndKey(){var e;!((e=this._rawData)===null||e===void 0)&&e.dataSet&&(Fe(this._rawData.dataSet,"addVChartProperty",I0),this._rawData.transform({type:"addVChartProperty",options:{beforeCall:T4.bind(this),call:OO}}))}getRawDataStatisticsByField(e,t){var n;if(this._rawStatisticsCache||(this._rawStatisticsCache={}),!this._rawStatisticsCache[e]&&this._rawData){const s=WX([this._rawData],{fields:[{key:e,operations:t?["min","max"]:["values"]}]})[e];this._rawStatisticsCache[e]=se((n=this._rawStatisticsCache[e])!==null&&n!==void 0?n:{},s)}return this._rawStatisticsCache[e]}_createHierarchyDataStatistics(e,t){Fe(this._dataSet,"hierarchyDimensionStatistics",WX),Fe(this._dataSet,"flatten",Zx);const n=new Rt(this._dataSet,{name:e});return n.parse(t,{type:"dataview"}),n.transform({type:"hierarchyDimensionStatistics",options:{fields:()=>{const s=this.getStatisticFields();return this._seriesField&&this._seriesField!==this._categoryField&&s.push({key:this._seriesField,operations:["values"]}),s}}},!1),n}getStatisticFields(){return super.getStatisticFields().concat([{key:this._categoryField,operations:["values"]},{key:this._valueField,operations:["max","min"]},{key:f1,operations:["max","min","values"]},{key:xu,operations:["values"]}])}initMark(){var e,t,n,s;const r=this._createMark(ic.mark.nonLeaf,{isSeriesMark:!0,stateSort:(e=this._spec.nonLeaf)===null||e===void 0?void 0:e.stateSort},{setCustomizedShape:(t=this._spec.nonLeaf)===null||t===void 0?void 0:t.customShape});r&&(r.setTransform([{type:"filter",callback:o=>!this._shouldFilterElement(o,"nonLeaf")}]),this._nonLeafMark=r);const a=this._createMark(ic.mark.leaf,{isSeriesMark:!0,stateSort:(n=this._spec.leaf)===null||n===void 0?void 0:n.stateSort},{setCustomizedShape:(s=this._spec.leaf)===null||s===void 0?void 0:s.customShape});a&&(a.setTransform([{type:"filter",callback:o=>!this._shouldFilterElement(o,"leaf")}]),this._leafMark=a)}initMarkStyle(){this._initLeafMarkStyle(),this._initNonLeafMarkStyle()}_initLeafMarkStyle(){this._leafMark&&this.setMarkStyle(this._leafMark,{x:e=>e.x0,y:e=>e.y0,x1:e=>e.x1,y1:e=>e.y1,fill:this.getColorAttribute()},Ce.STATE_NORMAL,pe.Series)}_initNonLeafMarkStyle(){this._nonLeafMark&&this.setMarkStyle(this._nonLeafMark,{x:e=>e.x0,y:e=>e.y0,x1:e=>e.x1,y1:e=>e.y1,fill:this.getColorAttribute()},Ce.STATE_NORMAL,pe.Series)}initLabelMarkStyle(e){e&&(this._labelMark=e,e.setRule("treemap"),this.setMarkStyle(e,{x:t=>(t.x0+t.x1)/2,y:t=>(t.y0+t.y1)/2,text:t=>{var n;return(n=t.datum[t.depth])===null||n===void 0?void 0:n[this.getDimensionField()[0]]},maxLineWidth:t=>t.x1===t.x0?Number.MIN_VALUE:t.x1-t.x0},Ce.STATE_NORMAL,pe.Series),e.getTextType()==="rich"&&this.setMarkStyle(e,{maxWidth:t=>Math.abs(t.x0-t.x1),maxHeight:t=>Math.abs(t.y0-t.y1),ellipsis:!0},Ce.STATE_NORMAL,pe.Series))}initNonLeafLabelMarkStyle(e){e&&(this._nonLeafLabelMark=e,e.setRule("treemap"),this.setMarkStyle(e,{x:t=>t.labelRect?(t.labelRect.x0+t.labelRect.x1)/2:(t.x0+t.x1)/2,y:t=>t.labelRect?(t.labelRect.y0+t.labelRect.y1)/2:(t.y0+t.y1)/2,text:t=>{var n;return(n=t.datum[t.depth])===null||n===void 0?void 0:n[this.getDimensionField()[0]]},maxLineWidth:t=>t.x1===t.x0?Number.MIN_VALUE:t.x1-t.x0},Ce.STATE_NORMAL,pe.Series),e.getTextType()==="rich"&&this.setMarkStyle(e,{maxWidth:t=>Math.abs(t.x0-t.x1),maxHeight:t=>Math.abs(t.y0-t.y1),ellipsis:!0},Ce.STATE_NORMAL,pe.Series))}initAnimation(){this.getMarksInType("rect").forEach(e=>{var t;e.setAnimationConfig(ft((t=X.getAnimationInKey("treemap"))===null||t===void 0?void 0:t(),kt(e.name,this._spec,this._markAttributeContext)))})}initEvent(){super.initEvent(),this._spec.roam&&(this.initDragEventOfSeries(this),this.event.on("panmove",e=>{this.handlePan(e)}),this.initZoomEventOfSeries(this),this.event.on("zoom",e=>{this.handleZoom(e)})),this._spec.drill&&this.bindDrillEvent()}_getDataIdKey(){return"key"}initTooltip(){this._tooltipHelper=new Tvt(this),this._leafMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._leafMark),this._nonLeafMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._nonLeafMark)}_shouldFilterElement(e,t){const n=e.isLeaf;return t==="leaf"?!n:n}handlePan(e){const{delta:t}=e;if(t[0]===0&&t[1]===0)return;this._matrix.reset(),this._matrix.translate(t[0],t[1]);const{a:n,b:s,c:r,d:a,e:o,f:l}=this._matrix;this._matrix.multiply(n,s,r,a,o,l),this._viewBox.transformWithMatrix(this._matrix),this._runTreemapTransform(!0)}handleZoom(e){const{scale:t,scaleCenter:n}=e;if(t===1)return;this._matrix.reset();const{x:s,y:r}=n;this._matrix.translate(s,r),this._matrix.scale(t,t),this._matrix.translate(-s,-r);const{a,b:o,c:l,d:c,e:u,f:h}=this._matrix;this._matrix.multiply(a,o,l,c,u,h),this.disableMarkAnimation(),this.event.on(Ee.AFTER_DO_RENDER,this._enableAnimationHook),this._viewBox.transformWithMatrix(this._matrix),this._runTreemapTransform(!0)}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}onLayoutEnd(e){super.onLayoutEnd(e),this._viewBox.set(0,0,this.getLayoutRect().width,this.getLayoutRect().height),this._runTreemapTransform()}enableMarkAnimation(){this.getMarks().forEach(e=>{var t;(t=e.getProduct().animate)===null||t===void 0||t.enable()}),[this._labelMark,this._nonLeafLabelMark].forEach(e=>{e&&e.getComponent()&&e.getComponent().getProduct().getGroupGraphicItem().enableAnimation()}),this.event.off(Ee.AFTER_DO_RENDER,this._enableAnimationHook)}disableMarkAnimation(){this.getMarks().forEach(e=>{var t;(t=e.getProduct().animate)===null||t===void 0||t.disable()}),[this._labelMark,this._nonLeafLabelMark].forEach(e=>{e&&e.getComponent()&&e.getComponent().getProduct().getGroupGraphicItem().disableAnimation()})}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._nonLeafMark,this._leafMark]}getMarkData(e){return e!=null&&e.datum?e.datum[e.datum.length-1]:e}}ic.type=re.treemap,ic.mark=Evt,ic.transformerConstructor=Iue,Yt(ic,W4),Yt(ic,F4);const Mvt=()=>{Edt(),Pdt(),Zu(),ta(),Ovt(),Xu(),q_t(),X.registerSeries(ic.type,ic)},Ivt=Object.assign(Object.assign({},$4),{segment:{name:"segment",type:"arc"},track:{name:"track",type:"arc"}}),Rvt=Object.assign(Object.assign({},Wi),{pin:{name:"pin",type:"path"},pinBackground:{name:"pinBackground",type:"path"},pointer:{name:"pointer",type:["path","rect"]}}),Lvt=i=>({channel:{angle:{from:i.startAngle+Math.PI/2}}}),Dvt={type:"fadeIn"};function Fvt(i,e){return e==="fadeIn"?Dvt:Lvt(i)}const Bvt=()=>{X.registerAnimation("gaugePointer",(i,e)=>{const t=Fvt(i,e);return{appear:t,enter:t,disappear:{type:"fadeOut"}}})};class Rue extends or{constructor(){super(...arguments),this._supportStack=!1}}class jvt extends ar{enableByType(e){return e!=="dimension"}}class Su extends D0{constructor(){super(...arguments),this.type=re.gaugePointer,this.transformerConstructor=Rue,this._pinMark=null,this._pointerMark=null,this._pinBackgroundMark=null}setAttrFromSpec(){var e;super.setAttrFromSpec(),this.setRadiusField(this._spec.radiusField),this._pointerType=((e=this._spec.pointer)===null||e===void 0?void 0:e.type)==="rect"?"rect":"path"}initMark(){this._pinBackgroundMark=this._createMark(Su.mark.pinBackground),this._pointerMark=this._createMark(Object.assign(Object.assign({},Su.mark.pointer),{type:this._pointerType}),{isSeriesMark:!0}),this._pinMark=this._createMark(Su.mark.pin)}initMarkStyle(){this.initPinBackgroundMarkStyle(),this.initPointerMarkStyle(),this.initPinMarkStyle()}initGroups(){}initPointerMarkStyle(){const e=this._pointerMark,t=this._spec.pointer;e&&(this.setMarkStyle(e,{x:n=>{var s,r;const{x:a}=this._getPointerAnchor(n,t);return a-this._getPointerWidth()*((r=(s=t==null?void 0:t.center)===null||s===void 0?void 0:s[0])!==null&&r!==void 0?r:0)},y:n=>{var s,r;const{y:a}=this._getPointerAnchor(n,t);return a-this._getPointerHeight(n)*((r=(s=t==null?void 0:t.center)===null||s===void 0?void 0:s[1])!==null&&r!==void 0?r:0)},anchor:n=>{const{x:s,y:r}=this._getPointerAnchor(n,t);return[s,r]},fill:this.getColorAttribute(),zIndex:200}),this._pointerType==="path"?this.setMarkStyle(e,{scaleX:this._getPointerWidth.bind(this),scaleY:this._getPointerHeight.bind(this),angle:n=>this._getPointerAngle(n)+Math.PI/2}):this.setMarkStyle(e,{width:this._getPointerWidth.bind(this),height:this._getPointerHeight.bind(this),angle:n=>this._getPointerAngle(n)-Math.PI/2}))}initTooltip(){this._tooltipHelper=new jvt(this),this._pointerMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pointerMark)}_getPointerAnchor(e,t){var n;return(n=t.isOnCenter)===null||n===void 0||n?this.angleAxisHelper.center():this.radiusAxisHelper.coordToPoint({radius:this._innerRadius*this._computeLayoutRadius(),angle:this.angleAxisHelper.dataToPosition([e[this._angleField[0]]])})}_getPointerWidth(){return this._spec.pointer.width*this._computeLayoutRadius()}_getPointerHeight(e){var t,n;const s=this._spec.pointer,r=this._radiusField[0];return F(this.radiusAxisHelper)&&F(r)?this.radiusAxisHelper.dataToPosition([e[r]])-((t=s==null?void 0:s.innerPadding)!==null&&t!==void 0?t:0)-((n=s==null?void 0:s.outerPadding)!==null&&n!==void 0?n:10):s.height*this._computeLayoutRadius()}_getPointerAngle(e){const t=this.angleAxisHelper.getScale().domain(),n=an(t),s=Mn(t),r=zi(e[this._angleField[0]],s,n);return this.angleAxisHelper.dataToPosition([r])}_getRotatedPointerCenterOffset(e){var t,n,s,r;const a=this._spec.pointer,o=this._getPointerWidth()*((n=(t=a==null?void 0:a.center)===null||t===void 0?void 0:t[0])!==null&&n!==void 0?n:0),l=-this._getPointerHeight(e)*((r=(s=a==null?void 0:a.center)===null||s===void 0?void 0:s[1])!==null&&r!==void 0?r:0),c=this._getPointerAngle(e)-Math.PI/2,u=Math.cos(c),h=Math.sin(c);return{x:o*u+l*h,y:-(l*u-o*h)}}initPinBackgroundMarkStyle(){const e=this._pinBackgroundMark,t=this._spec.pinBackground;e&&this.setMarkStyle(e,{x:n=>this._getPointerAnchor(n,t).x,y:n=>this._getPointerAnchor(n,t).y,scaleX:()=>t.width*this._computeLayoutRadius(),scaleY:()=>t.height*this._computeLayoutRadius(),fill:this.getColorAttribute(),zIndex:100})}initPinMarkStyle(){const e=this._pinMark,t=this._spec.pin;e&&this.setMarkStyle(e,{x:n=>this._getPointerAnchor(n,t).x,y:n=>this._getPointerAnchor(n,t).y,scaleX:()=>t.width*this._computeLayoutRadius(),scaleY:()=>t.height*this._computeLayoutRadius(),fill:this.getColorAttribute(),zIndex:300})}initInteraction(){this._parseInteractionConfig(this._pointerMark?[this._pointerMark]:[])}initAnimation(){var e,t,n;const s=(t=(e=this._spec)===null||e===void 0?void 0:e.animationAppear)===null||t===void 0?void 0:t.preset;this._pointerMark.setAnimationConfig(ft((n=X.getAnimationInKey("gaugePointer"))===null||n===void 0?void 0:n({startAngle:this._startAngle},s),kt("pointer",this._spec,this._markAttributeContext)))}getDefaultShapeType(){return"circle"}getActiveMarks(){return[]}}Su.type=re.gaugePointer,Su.mark=Rvt,Su.transformerConstructor=Rue;const Nvt=()=>{X.registerSeries(Su.type,Su),D4(),Zu(),Bvt(),qx(),L0()};class Lue extends or{constructor(){super(...arguments),this._supportStack=!1}_transformLabelSpec(e){this._addMarkLabelSpec(e,"segment")}}class _d extends D0{constructor(){super(...arguments),this.type=re.gauge,this.transformerConstructor=Lue,this._segmentMark=null,this._trackMark=null,this._padAngle=0}setAttrFromSpec(){var e;super.setAttrFromSpec(),this._padAngle=zt((e=this._spec.padAngle)!==null&&e!==void 0?e:0)}initData(){var e;super.initData(),Fe(this._option.dataSet,"spiltSegment",(t,n)=>{const s=t.slice();return s.sort((r,a)=>r[this._angleField[0]]-a[this._angleField[0]]),s.forEach((r,a)=>{r[zI]=r[this._angleField[0]],r[hw]=a>0?s[a-1][zI]:void 0}),s}),(e=this.getViewData())===null||e===void 0||e.transform({type:"spiltSegment"},!1)}initMark(){super.initMark(),this._trackMark=this._createMark(_d.mark.track,{parent:this._arcGroupMark,dataView:!1}),this._segmentMark=this._createMark(_d.mark.segment,{parent:this._arcGroupMark,isSeriesMark:!0})}initMarkStyle(){super.initMarkStyle(),this.initTrackMarkStyle(),this.initSegmentMarkStyle()}initSegmentMarkStyle(){var e;const t=this._segmentMark;t&&this.setMarkStyle(t,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:this._getAngleValueStart.bind(this),endAngle:this._getAngleValueEnd.bind(this),innerRadius:()=>{var n;return this._computeLayoutRadius()*((n=this._spec.innerRadius)!==null&&n!==void 0?n:0)},outerRadius:()=>{var n,s;return this._computeLayoutRadius()*((s=(n=this._spec.radius)!==null&&n!==void 0?n:this._spec.outerRadius)!==null&&s!==void 0?s:1)},cap:(e=this._spec.roundCap)!==null&&e!==void 0&&e,boundsMode:"imprecise",cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute(),zIndex:200,forceShowCap:!0})}initTooltip(){super.initTooltip(),this._segmentMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._segmentMark)}initTrackMarkStyle(){var e;const t=this._trackMark;t&&this.setMarkStyle(t,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:this._startAngle,endAngle:this._endAngle,innerRadius:()=>{var n;return this._computeLayoutRadius()*((n=this._spec.innerRadius)!==null&&n!==void 0?n:0)},outerRadius:()=>{var n,s;return this._computeLayoutRadius()*((s=(n=this._spec.radius)!==null&&n!==void 0?n:this._spec.outerRadius)!==null&&s!==void 0?s:1)},cap:(e=this._spec.roundCap)!==null&&e!==void 0&&e,boundsMode:"imprecise",cornerRadius:this._spec.cornerRadius,zIndex:100})}_getAngleValueStartWithoutMask(e){const t=this._getAngleValueStartWithoutPadAngle(e),n=this._getAngleValueEndWithoutPadAngle(e);return gy(t,(t+n)/2)(t+(n>t?1:-1)*Math.abs(this._padAngle/2))}_getAngleValueEndWithoutMask(e){const t=this._getAngleValueStartWithoutPadAngle(e),n=this._getAngleValueEndWithoutPadAngle(e);return gy(n,(t+n)/2)(n-(n>t?1:-1)*Math.abs(this._padAngle/2))}_getAngleValueStartWithoutPadAngle(e){return F(e[hw])?this.angleAxisHelper.dataToPosition([e[hw]]):this._startAngle}_getAngleValueEndWithoutPadAngle(e){return this.angleAxisHelper.dataToPosition([e[zI]])}initAnimation(){var e,t,n;const s=(t=(e=this._spec)===null||e===void 0?void 0:e.animationAppear)===null||t===void 0?void 0:t.preset;this._segmentMark.setAnimationConfig(ft((n=X.getAnimationInKey("circularProgress"))===null||n===void 0?void 0:n({startAngle:this._startAngle},s),kt("segment",this._spec,this._markAttributeContext)))}getDefaultShapeType(){return"circle"}getActiveMarks(){return[]}}_d.type=re.gauge,_d.mark=Ivt,_d.transformerConstructor=Lue;const $vt=()=>{X.registerSeries(_d.type,_d),rg(),cue(),L0()};class D1 extends wce{constructor(){super(...arguments),this.type=D1.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{padding:0})}}D1.type="cell";const zvt=()=>{X.registerMark(D1.type,D1),Vht(),Wpt()};function Hvt(i){return i===!1?{}:{type:"fadeIn"}}const Vvt=()=>{X.registerAnimation("heatmap",(i,e)=>Object.assign(Object.assign({},MO),{appear:Hvt(e)}))};class Uvt extends ar{enableByType(e){return e!=="dimension"}}const Wvt=Object.assign(Object.assign({},Wi),{cell:{name:"cell",type:"cell"},cellBackground:{name:"cellBackground",type:"cell"}});class Due extends or{_transformLabelSpec(e){this._addMarkLabelSpec(e,"cell")}}class Cu extends Io{constructor(){super(...arguments),this.type=re.heatmap,this.transformerConstructor=Due}getFieldValue(){return this._fieldValue}setFieldValue(e){this._fieldValue=q(e)}setAttrFromSpec(){super.setAttrFromSpec(),this.setFieldValue(this._spec.valueField)}initMark(){var e,t,n,s;const r={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold};this._cellMark=this._createMark(Cu.mark.cell,{isSeriesMark:!0,stateSort:(e=this._spec.cell)===null||e===void 0?void 0:e.stateSort},Object.assign(Object.assign({},r),{setCustomizedShape:(t=this._spec.cell)===null||t===void 0?void 0:t.customShape,morph:Yu(this._spec,Cu.mark.cell.name),morphElementKey:this.getDimensionField()[0]})),this._backgroundMark=this._createMark(Cu.mark.cellBackground,{stateSort:(n=this._spec.cellBackground)===null||n===void 0?void 0:n.stateSort},Object.assign(Object.assign({},r),{setCustomizedShape:(s=this._spec.cellBackground)===null||s===void 0?void 0:s.customShape}))}initMarkStyle(){this.initCellMarkStyle(),this.initCellBackgroundMarkStyle()}initLabelMarkStyle(e){e&&this.setMarkStyle(e,{fill:this.getColorAttribute(),text:t=>t[this.getMeasureField()[0]]})}initCellMarkStyle(){this.setMarkStyle(this._cellMark,{x:e=>this.dataToPositionX(e),y:e=>this.dataToPositionY(e),size:()=>[this.getCellSize(this._xAxisHelper),this.getCellSize(this._yAxisHelper)],fill:this.getColorAttribute()},"normal",pe.Series)}initCellBackgroundMarkStyle(){var e,t,n;const s=Cr((n=(t=(e=this._spec.cellBackground)===null||e===void 0?void 0:e.style)===null||t===void 0?void 0:t.padding)!==null&&n!==void 0?n:0);this.setMarkStyle(this._backgroundMark,{x:r=>{const a=this.getCellSize(this._xAxisHelper);return this.dataToPositionX(r)-a/2+s[3]},y:r=>{const a=this.getCellSize(this._yAxisHelper);return this.dataToPositionY(r)-a/2+s[0]},width:()=>this.getCellSize(this._xAxisHelper)-s[1]-s[3],height:()=>this.getCellSize(this._yAxisHelper)-s[0]-s[2]},"normal",pe.Series)}getColorAttribute(){var e;return{scale:(e=this._option.globalScale.getScale("color"))!==null&&e!==void 0?e:this._getDefaultColorScale(),field:this.getFieldValue[0]}}initInteraction(){this._parseInteractionConfig(this._cellMark?[this._cellMark]:[])}initAnimation(){var e,t,n;const s=(t=(e=this._spec)===null||e===void 0?void 0:e.animationAppear)===null||t===void 0?void 0:t.preset,r=Yd(this);this._cellMark.setAnimationConfig(ft((n=X.getAnimationInKey("heatmap"))===null||n===void 0?void 0:n(s),kt("cell",this._spec,this._markAttributeContext),r))}getCellSize(e){var t,n;return(n=(t=e.getBandwidth)===null||t===void 0?void 0:t.call(e,0))!==null&&n!==void 0?n:6}initTooltip(){this._tooltipHelper=new Uvt(this),this._cellMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._cellMark)}getDefaultShapeType(){return"square"}getDimensionField(){return[].concat(this.fieldX,this.fieldY)}getMeasureField(){return this.getFieldValue()}getActiveMarks(){return[this._cellMark]}}Cu.type=re.heatmap,Cu.mark=Wvt,Cu.transformerConstructor=Due;const Gvt=()=>{ta(),zvt(),Vvt(),ea(),Qr(),X.registerSeries(Cu.type,Cu)},Kvt=Object.assign(Object.assign({},Wi),{nodePoint:{name:"nodePoint",type:"symbol"},ripplePoint:{name:"ripplePoint",type:"ripple"},centerPoint:{name:"centerPoint",type:"symbol"},centerLabel:{name:"centerLabel",type:"text"}}),Fue=`${Ie}_CORRELATION_X`,Bue=`${Ie}_CORRELATION_Y`,jue=`${Ie}_CORRELATION_SIZE`,Xvt=(i,e)=>{var t,n,s,r,a,o,l,c,u,h,d,p,f,g,m;if(!i||!(e!=null&&e.view)||!ie(i))return i;const y=e.view();if(y.x1-y.x0==0||y.y1-y.y0==0||y.x1-y.x0==-1/0||y.x1-y.x0==1/0||y.y1-y.y0==-1/0||y.y1-y.y0==1/0)return i;const b=zt((t=e.startAngle)!==null&&t!==void 0?t:-90),x=zt((n=e.endAngle)!==null&&n!==void 0?n:270),S=Math.max((y.x1-y.x0)/2,(y.y1-y.y0)/2),C=Qo((s=e.innerRadius)!==null&&s!==void 0?s:0,S),w=Qo(e.outerRadius,S),A=[ye((r=e.center)===null||r===void 0?void 0:r[0])?e.center[0]:y.x0+Qo((o=(a=e.center)===null||a===void 0?void 0:a[0])!==null&&o!==void 0?o:"50%",y.x1-y.x0),ye((l=e.center)===null||l===void 0?void 0:l[1])?e.center[1]:y.y0+Qo((u=(c=e.center)===null||c===void 0?void 0:c[1])!==null&&u!==void 0?u:"50%",y.y1-y.y0)],T=Tc(e.field),E=i.map(T),[P,O]=NU(E),M=P===O?Y=>(C+w)/2:Y=>C+(w-C)*(Y-P)/(O-P),R=B(e.radiusField)?T:Tc(e.radiusField),j=(d=(h=e==null?void 0:e.radiusRange)===null||h===void 0?void 0:h[1])!==null&&d!==void 0?d:5;let I=Y=>j;if(R){const[Y,ae]=R!==T?NU(i.map(R)):[P,O],W=(f=(p=e.radiusRange)===null||p===void 0?void 0:p[0])!==null&&f!==void 0?f:5,ce=(m=(g=e.radiusRange)===null||g===void 0?void 0:g[1])!==null&&m!==void 0?m:5;Y!==ae&&(I=he=>W+(ce-W)*(R(he)-Y)/(ae-Y))}const D=Math.min(b,x),z=Math.max(b,x),$=Yvt(D,z,i.length),V=[],L=(z-D)/60;return i.forEach((Y,ae)=>{const W=M(E[ae]),ce=I(Y);let he,le,de=$[ae];for(let te=0;te<60&&(he=A[0]+W*Math.cos(de),le=A[1]+W*Math.sin(de),qvt({x:he,y:le,size:ce},V)||he-ce<y.x0||he+ce>y.x1||le-ce<y.y0||le+ce>y.y1);te++)te<59&&(de+=L,de>z?de=D:de<D&&(de=z));V.push(Object.assign({[Fue]:he,[Bue]:le,[jue]:ce},Y))}),V},Yvt=(i,e,t)=>{let n=0,s=Math.max(Math.ceil(2*(e-i)/Math.PI),2),r=(e-i)/s,a=0,o=1,l=0,c=0;const u=[];let h=i;for(;l<t;)c<s&&(u.push(h+(c%2?Math.floor(c/2)+Math.floor(s/2):c/2)*r*o),c++),l++,c===s&&(c=0,a+=1,o*=-1,n===0?n=r/2:n/=2,h=o===-1?e-n:i+n,a>=2&&(r/=2,s*=2));return u},qvt=(i,e)=>!(!e||!e.length)&&e.some(t=>Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)<Math.pow(i.size+t.size,2)),Zvt=(i,e)=>{if(!i||!ie(i))return[];const{keyword:t,categoryField:n}=e,s=i[0].latestData[0];return{[n]:t,[Ps]:s==null?void 0:s[Ps],[Wr]:s==null?void 0:s[Wr]}};class F1 extends Rs{constructor(){super(...arguments),this.type=F1.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{x:0,y:0,ripple:0})}_initProduct(e){const t=this.getVGrammarView(),n=this.getProductId();this._product=t.glyph("ripplePoint",e??t.rootMark).id(n),this._compiledProductId=n}}F1.type="ripple";const Nue=()=>{X.registerMark(F1.type,F1),Qht()},Jvt=(i,e)=>e==="fadeIn"?{type:"fadeIn"}:{type:"scaleIn"},Qvt=()=>{X.registerAnimation("correlation",(i,e)=>Object.assign({appear:Jvt(0,e)},E4))};class $ue extends or{_transformLabelSpec(e){this._addMarkLabelSpec(e,"nodePoint"),this._addMarkLabelSpec(e,"centerPoint","centerLabel")}}class wu extends Yx{constructor(){super(...arguments),this.type=re.correlation,this.transformerConstructor=$ue,this._viewBox=new nr}getCategoryField(){return this._categoryField}setCategoryField(e){return this._categoryField=e,this._categoryField}getValueField(){return this._valueField}setValueField(e){return this._valueField=e,this._valueField}getSeriesField(){return this._seriesField}setSeriesField(e){F(e)&&(this._seriesField=e)}getSizeField(){return this._sizeField}setSizeField(e){F(e)&&(this._sizeField=e)}getSizeRange(){return this._sizeRange}setSizeRange(e){F(e)&&(this._sizeRange=e)}setAttrFromSpec(){super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(this._spec.seriesField),this.setSizeField(this._spec.sizeField),this.setSizeRange(this._spec.sizeRange)}initData(){var e,t,n;if(super.initData(),!this._data)return;Fe(this._dataSet,"correlation",Xvt);const s=new Td;bu(s,"dataview",IP),Fe(s,"correlationCenter",Zvt);const r=new Rt(s,{name:`${this.type}_${this.id}_center`});r.parse([this.getViewData()],{type:"dataview"}),r.transform({type:"correlationCenter",options:{keyword:(n=(t=(e=this._spec.centerLabel)===null||e===void 0?void 0:e.style)===null||t===void 0?void 0:t.text)!==null&&n!==void 0?n:"",categoryField:this._spec.categoryField}}),this._centerSeriesData=new Oc(this._option,r)}compileData(){var e;super.compileData(),(e=this._centerSeriesData)===null||e===void 0||e.compile()}_statisticViewData(){super._statisticViewData(),this._data.getDataView().transform({type:"correlation",options:{view:()=>({x0:this._viewBox.x1,x1:this._viewBox.x2,y0:this._viewBox.y1,y1:this._viewBox.y2}),field:this._spec.valueField,radiusRange:this._spec.sizeRange,radiusField:this._spec.sizeField,center:[this._spec.centerX,this._spec.centerY],innerRadius:this._spec.innerRadius,outerRadius:this._spec.outerRadius,startAngle:this._spec.startAngle,endAngle:this._spec.endAngle}})}initMark(){var e,t,n,s;const r=this._createMark(wu.mark.nodePoint,{groupKey:this._seriesField,isSeriesMark:!0,key:Ps,stateSort:(e=this._spec.nodePoint)===null||e===void 0?void 0:e.stateSort},{setCustomizedShape:(t=this._spec.nodePoint)===null||t===void 0?void 0:t.customShape});r&&(r.setMarkConfig({zIndex:Xt.Node}),this._nodePointMark=r);const a=this._createMark(wu.mark.ripplePoint,{key:Ps,dataView:this._centerSeriesData.getDataView(),dataProductId:this._centerSeriesData.getProductId()});a&&(this._ripplePointMark=a);const o=this._createMark(wu.mark.centerPoint,{key:Ps,dataView:this._centerSeriesData.getDataView(),dataProductId:this._centerSeriesData.getProductId(),stateSort:(n=this._spec.centerPoint)===null||n===void 0?void 0:n.stateSort},{setCustomizedShape:(s=this._spec.centerPoint)===null||s===void 0?void 0:s.customShape});o&&(o.setMarkConfig({zIndex:Xt.Node}),this._centerPointMark=o)}initMarkStyle(){this._initNodePointMarkStyle(),this._initRipplePointMarkStyle(),this._initCenterPointMarkStyle()}_initNodePointMarkStyle(){var e,t,n,s;const r=this._nodePointMark;if(!r)return;const a=(t=(e=this._spec.nodePoint)===null||e===void 0?void 0:e.style)!==null&&t!==void 0?t:{};this.setMarkStyle(r,{x:o=>o[Fue],y:o=>o[Bue],size:o=>o[jue],fill:(n=a.fill)!==null&&n!==void 0?n:this.getColorAttribute(),fillOpacity:(s=a.fillOpacity)!==null&&s!==void 0?s:1,lineWidth:0},Ce.STATE_NORMAL,pe.Series)}_initRipplePointMarkStyle(){var e,t,n,s,r;const a=this._ripplePointMark;if(!a)return;const o=(t=(e=this._spec.ripplePoint)===null||e===void 0?void 0:e.style)!==null&&t!==void 0?t:{};this.setMarkStyle(a,{x:()=>{var l;return(l=this._spec.centerX)!==null&&l!==void 0?l:(this._viewBox.x1+this._viewBox.x2)/2},y:()=>{var l;return(l=this._spec.centerY)!==null&&l!==void 0?l:(this._viewBox.y1+this._viewBox.y2)/2},size:()=>Math.max(this._viewBox.x2-this._viewBox.x1,this._viewBox.y2-this._viewBox.y1)/2,fill:(n=o.fill)!==null&&n!==void 0?n:this.getColorAttribute(),opacity:(s=o.fillOpacity)!==null&&s!==void 0?s:.2,ripple:(r=o.ripple)!==null&&r!==void 0?r:0},Ce.STATE_NORMAL,pe.Series)}_initCenterPointMarkStyle(){var e,t,n,s,r,a;const o=this._centerPointMark;o&&this.setMarkStyle(o,{x:()=>{var l;return(l=this._spec.centerX)!==null&&l!==void 0?l:(this._viewBox.x1+this._viewBox.x2)/2},y:()=>{var l;return(l=this._spec.centerY)!==null&&l!==void 0?l:(this._viewBox.y1+this._viewBox.y2)/2},size:()=>.2*Math.max(this._viewBox.x2-this._viewBox.x1,this._viewBox.y2-this._viewBox.y1)/2,fill:(n=(t=(e=this._spec.centerPoint)===null||e===void 0?void 0:e.style)===null||t===void 0?void 0:t.fill)!==null&&n!==void 0?n:this.getColorAttribute(),fillOpacity:(a=(r=(s=this._spec.centerPoint)===null||s===void 0?void 0:s.style)===null||r===void 0?void 0:r.fillOpacity)!==null&&a!==void 0?a:1},Ce.STATE_NORMAL,pe.Series)}initTooltip(){super.initTooltip(),this._nodePointMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._nodePointMark)}initLabelMarkStyle(e){e&&this.setMarkStyle(e,{fill:this.getColorAttribute(),text:t=>t[this._categoryField],z:this.dataToPositionZ.bind(this)},Ce.STATE_NORMAL,pe.Series)}initAnimation(){var e,t;const n=(e=this._spec.animationAppear)===null||e===void 0?void 0:e.preset;this._nodePointMark.setAnimationConfig(ft((t=X.getAnimationInKey("correlation"))===null||t===void 0?void 0:t({},n),kt("nodePoint",this._spec,this._markAttributeContext)))}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}getActiveMarks(){return[this._nodePointMark,this._centerPointMark]}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}onLayoutEnd(e){super.onLayoutEnd(e),this._viewBox.set(0,0,this._region.getLayoutRect().width,this._region.getLayoutRect().height),this._rawData.reRunAllTransform(),this.getViewData().reRunAllTransform()}}wu.type=re.correlation,wu.mark=Kvt,wu.transformerConstructor=$ue;const ebt=()=>{qu(),Nue(),X.registerSeries(wu.type,wu),Qvt()};class zue extends Ro{_isValidSeries(e){return e===re.map}_getDefaultSeriesSpec(e){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{type:e.type,nameField:e.nameField,valueField:e.valueField,seriesField:e.seriesField,map:e.map,nameProperty:e.nameProperty,centroidProperty:e.centroidProperty,nameMap:e.nameMap,area:e.area,defaultFillColor:e.defaultFillColor,showDefaultName:e.showDefaultName})}transformSpec(e){super.transformSpec(e),e.region.forEach(n=>{n.coordinate="geo"});const t=this._getDefaultSeriesSpec(e);e.series&&e.series.length!==0?e.series.forEach(n=>{this._isValidSeries(n.type)&&Object.keys(t).forEach(s=>{s in n||(n[s]=t[s])})}):e.series=[t]}}class Iv extends Ri{constructor(){super(...arguments),this.transformerConstructor=zue,this.type="map",this.seriesType=re.map}}Iv.type="map",Iv.seriesType=re.map,Iv.transformerConstructor=zue;const tbt=()=>{jmt(),X.registerChart(Iv.type,Iv)};class G4 extends Ro{_isValidSeries(e){return!this.seriesType||e===this.seriesType}getIndicatorSpec(e){var t,n,s;const r=q(e.indicator),a=(t=e.innerRadius)!==null&&t!==void 0?t:(s=(n=e.series)===null||n===void 0?void 0:n[0])===null||s===void 0?void 0:s.innerRadius;return F(a)&&r.forEach(o=>{B(o.limitRatio)&&(o.limitRatio=a)}),r}_getDefaultSeriesSpec(e){const t=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{radius:e.radius,outerRadius:e.outerRadius,innerRadius:e.innerRadius,startAngle:e.startAngle,endAngle:e.endAngle,sortDataByAxis:e.sortDataByAxis}),n=this.seriesType;return n&&(t.type=n,t[n]=e[n]),t}transformSpec(e){super.transformSpec(e),ie(e.dataZoom)&&e.dataZoom.length>0&&e.dataZoom.forEach(t=>{t.filterMode==="axis"&&(t.filterMode="filter")}),this.transformSeriesSpec(e),F(e.indicator)&&(e.indicator=this.getIndicatorSpec(e))}}class Hue extends G4{needAxes(){return!1}_getDefaultSeriesSpec(e){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{seriesField:e.seriesField,categoryField:e.categoryField||e.radiusField,valueField:e.valueField||e.angleField,startAngle:e.startAngle,endAngle:e.endAngle,radius:e.radius,innerRadius:e.innerRadius,centerX:e.centerX,centerY:e.centerY})}_transformProgressAxisSpec(e,t,n,s,r){var a,o;e.axes||(e.axes=[]);let l=((a=e.axes)!==null&&a!==void 0?a:[]).find(h=>h.orient==="radius"),c=((o=e.axes)!==null&&o!==void 0?o:[]).find(h=>h.orient==="angle");c||(c=t,e.axes.push(c)),l||(l=n,e.axes.push(l)),B(c.type)&&(c.type="linear"),B(l.type)&&(l.type="band");const u=v1(c,{min:0,max:1});B(c.min)&&(c.min=u.min),B(c.max)&&(c.max=u.max),s&&Object.assign(c,Pe({},s,c)),r&&Object.assign(l,Pe({},r,l))}}class Vue extends G4{needAxes(){return!0}_getDefaultSeriesSpec(e){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{categoryField:e.categoryField||e.angleField,valueField:e.valueField||e.radiusField})}transformSpec(e){var t;if(super.transformSpec(e),this.needAxes()){e.axes||(e.axes=[]);const n={radius:!1,angle:!1};((t=e.axes)!==null&&t!==void 0?t:[]).forEach(s=>{const{orient:r}=s;r==="radius"&&(n.radius=!0),r==="angle"&&(n.angle=!0)}),n.angle||e.axes.push({orient:"angle"}),n.radius||e.axes.push({orient:"radius"})}}}class Qx extends G4{needAxes(){return!1}_getDefaultSeriesSpec(e){var t;return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{categoryField:e.categoryField||e.seriesField,valueField:e.valueField||e.angleField,center:e.center,centerOffset:e.centerOffset,cornerRadius:e.cornerRadius,padAngle:e.padAngle,minAngle:e.minAngle,emptyPlaceholder:e.emptyPlaceholder,emptyCircle:(t=e.emptyPlaceholder)===null||t===void 0?void 0:t.emptyCircle,showAllZero:e.showAllZero,supportNegative:e.supportNegative,layoutRadius:e.layoutRadius})}}class K4 extends Ri{constructor(){super(...arguments),this.transformerConstructor=Qx}}K4.transformerConstructor=Qx;class Rv extends K4{constructor(){super(...arguments),this.transformerConstructor=Qx,this.type="pie",this.seriesType=re.pie}}Rv.type="pie",Rv.seriesType=re.pie,Rv.transformerConstructor=Qx;const ibt=()=>{Nyt(),X.registerChart(Rv.type,Rv)};class Uue extends Qx{transformSpec(e){super.transformSpec(e),e.series.forEach(t=>{t.type==="pie3d"&&(t.angle3d=e.angle3d)})}}class Lv extends K4{constructor(){super(...arguments),this.transformerConstructor=Uue,this.type="pie3d",this.seriesType=re.pie3d}}Lv.type="pie3d",Lv.seriesType=re.pie3d,Lv.transformerConstructor=Uue;const nbt=()=>{Rd(),$yt(),X.registerChart(Lv.type,Lv)};class Wue extends Vue{_getDefaultSeriesSpec(e){var t,n,s;return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{radius:(t=e.radius)!==null&&t!==void 0?t:cT,outerRadius:(n=e.outerRadius)!==null&&n!==void 0?n:cT,innerRadius:(s=e.innerRadius)!==null&&s!==void 0?s:0,seriesField:e.seriesField,stack:e.stack,percent:e.percent})}transformSpec(e){var t;super.transformSpec(e),((t=e.axes)!==null&&t!==void 0?t:[]).forEach(n=>{["domainLine","grid","label","tick"].forEach(s=>{n[s]||(n[s]={visible:!1})}),n.orient==="angle"&&B(n.bandPosition)&&(n.bandPosition=.5)}),e.crosshair=q(e.crosshair||{}).map(n=>Pe({categoryField:{visible:!0,line:{visible:!0,type:"rect"}}},n))}}class Em extends Ri{constructor(){super(...arguments),this.transformerConstructor=Wue,this.type="rose",this.seriesType=re.rose}}Em.type="rose",Em.seriesType=re.rose,Em.transformerConstructor=Wue,Yt(Em,zc);const sbt=()=>{Xyt(),X.registerChart(Em.type,Em)};class Gue extends Vue{_getDefaultSeriesSpec(e){var t;return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{seriesField:e.seriesField,line:e.line,point:e.point,stack:e.stack,percent:e.percent,area:Pe({visible:!1},e.area),seriesMark:(t=e.seriesMark)!==null&&t!==void 0?t:"area",activePoint:e.activePoint,pointDis:e.pointDis,pointDisMul:e.pointDisMul,markOverlap:e.markOverlap})}transformSpec(e){var t;super.transformSpec(e),((t=e.axes)!==null&&t!==void 0?t:[]).forEach(n=>{n.orient==="radius"&&(["domainLine","label","tick"].forEach(s=>{n[s]||(n[s]={visible:!1})}),n.grid||(n.grid={visible:!0}))}),e.crosshair=q(e.crosshair||{}).map(n=>Pe({categoryField:{visible:!0,line:{visible:!0,type:"line"}}},n))}}class Pm extends Ri{constructor(){super(...arguments),this.transformerConstructor=Gue,this.type="radar",this.seriesType=re.radar}}Pm.type="radar",Pm.seriesType=re.radar,Pm.transformerConstructor=Gue,Yt(Pm,zc);const rbt=()=>{t0t(),X.registerChart(Pm.type,Pm)};class Kue extends Ro{_getDefaultSeriesSpec(e){const t=super._getDefaultSeriesSpec(e);return delete t.data,t}_transformAxisSpec(e){e.axes&&e.autoBandSize&&e.series.forEach((t,n)=>{var s;if(t.type==="bar"){const r=this._findBandAxisBySeries(t,n,e.axes);if(r&&!r.bandSize&&!r.maxBandSize&&!r.minBandSize){const a=Ke(t.autoBandSize)&&(s=t.autoBandSize.extend)!==null&&s!==void 0?s:0,{barMaxWidth:o,barMinWidth:l,barWidth:c,barGapInGroup:u}=t;this._applyAxisBandSize(r,a,{barMaxWidth:o,barMinWidth:l,barWidth:c,barGapInGroup:u})}}})}transformSpec(e){if(super.transformSpec(e),e.series&&e.series.length){const t=this._getDefaultSeriesSpec(e);e.series.forEach(n=>{this._isValidSeries(n.type)&&Object.keys(t).forEach(s=>{s in n||(n[s]=t[s])})})}e.axes&&e.axes.length&&e.axes.forEach(t=>{et(t,"trimPadding")&&Pe(t,ice(this.type,e))}),this._transformAxisSpec(e)}}class Dv extends Ri{constructor(){super(...arguments),this.transformerConstructor=Kue,this.type="common"}}Dv.type="common",Dv.transformerConstructor=Kue,Yt(Dv,zc);const abt=()=>{X.registerChart(Dv.type,Dv)},wB=12;class Xue extends Ro{_getSeriesDataLength(e,t){var n,s;if(t.data){const a=q(t.data)[0];return a instanceof Rt?(n=a.latestData)===null||n===void 0?void 0:n.length:(s=a.values)===null||s===void 0?void 0:s.length}const r=q(e.data).find((a,o)=>t.dataId?a instanceof Rt?a.name===t.dataId:a.id===t.dataId:t.dataIndex===o);return r?r instanceof Rt?r.latestData.length:r.values.length:0}addAttrToComponentSpec(e,t,n){return Array.isArray(e)?e[0][t]=n:e[t]=n,e}addPaddingRow(e,t,n){e.push({index:t,size:n})}addOrientAxes(e,t,n,s){e.push({id:`regionAxesRow${n}`}),t.push({modelId:`axesRow${n}`,col:1,row:n}),s.axes[0].id=`axesRow${n}`,s.axes[0].regionIndex=Array.from(Array(s.series.length),(r,a)=>s.axes[0].orient==="top"?a+1:a)}transformSpec(e){var t,n,s,r,a,o,l,c,u,h,d,p,f,g,m;super.transformSpec(e);let y=0;const b=[],x=[],S=[],C=[],w=[],A=(this._option.getCompiler().getVGrammarView().width(),this._option.getCompiler().getVGrammarView().height());let T=0;if(e!=null&&e.legends){b.push({modelId:`legendRow${y}`,col:1,row:y}),this.addAttrToComponentSpec(e.legends,"id",`legendRow${y}`);const j=q(e.legends);let I=(t=j[0].height)!==null&&t!==void 0?t:40;if(j[0].padding){const D=Fu(j[0].padding);I+=Number((n=D==null?void 0:D.bottom)!==null&&n!==void 0?n:0),I+=Number((s=D==null?void 0:D.top)!==null&&s!==void 0?s:0),j[0].offsetY=Number((a=(r=j[0])===null||r===void 0?void 0:r.offsetY)!==null&&a!==void 0?a:0)+Number((o=D==null?void 0:D.top)!==null&&o!==void 0?o:0)}w.push({index:y,size:I}),T+=I,y++}e!=null&&e.dataZoom&&(b.push({modelId:`dataZoomRow${y}`,col:1,row:y}),this.addAttrToComponentSpec(e.dataZoom,"id",`dataZoomRow${y}`),T+=60,y++,this.addPaddingRow(w,y,10),T+=10,y++),T+=60,e.axes!==null&&((c=(l=e==null?void 0:e.axes)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.orient)!=="top"||(this.addOrientAxes(x,b,y,e),y++);const E=e.series.filter(j=>j.type!==re.link).length,P=(A-T-20*E)/E,O=((u=e==null?void 0:e.appendPadding)===null||u===void 0?void 0:u.left)||0,M=((h=e==null?void 0:e.appendPadding)===null||h===void 0?void 0:h.right)||0;(d=e==null?void 0:e.series)===null||d===void 0||d.forEach(j=>{var I,D;if([re.bar,re.line,re.area,re.dot].includes(j.type)){if(b.push({modelId:`${j.type}Row${y}`,col:1,row:y}),b.push({modelId:`axesLeftRow${y}`,col:0,row:y}),x.push({id:`${j.type}Row${y}`,clip:!1}),w.push({index:y,size:(j==null?void 0:j.height)||P}),S.push({orient:"left",id:`axesLeftRow${y}`,type:j.type===re.dot?"band":"linear",visible:j.type!==re.dot,title:{visible:!0,autoRotate:!1,style:{text:j==null?void 0:j.barTitle,dx:-20,textBaseline:"middle",textAlign:"end"}},grid:{visible:typeof((I=j==null?void 0:j.grid)===null||I===void 0?void 0:I.visible)!="boolean"||((D=j==null?void 0:j.grid)===null||D===void 0?void 0:D.visible),style:(z,$)=>{var V,L,Y,ae,W;let ce=0;if($===0){const he=(V=j==null?void 0:j.grid)===null||V===void 0?void 0:V.style;ce=(Y=(L=he==null?void 0:he.lineWidth)!==null&&L!==void 0?L:he==null?void 0:he.strokeWidth)!==null&&Y!==void 0?Y:1}return{lineWidth:ce,stroke:((W=(ae=j==null?void 0:j.grid)===null||ae===void 0?void 0:ae.style)===null||W===void 0?void 0:W.stroke)||"#dfdfdf",lineDash:[0,0]}}},domainLine:{visible:!1},tick:{visible:!1},label:{visible:!1},regionIndex:x.length-1}),j.type===re.dot){b.push({modelId:`scrollBarRightRow${y}`,col:2,row:y});const z=this._getSeriesDataLength(e,j);let $=0;z&&($=((j==null?void 0:j.height)||P)/(30*z)),C.push(Object.assign({orient:"right",visible:j.type===re.dot&&$<1,id:`scrollBarRightRow${y}`,start:0,end:Math.min($,1),filterMode:"axis",regionIndex:x.length-1,axisId:`axesLeftRow${y}`},q(e==null?void 0:e.scrollBar)[0]))}j.regionIndex=x.length-1,y++,this.addPaddingRow(w,y,(j==null?void 0:j.padding)||20),y++,j.leftAppendPadding=O,j.type===re.dot&&(j.title.style.dx=-O,j.subTitle.style.dx=-O)}}),this.addPaddingRow(w,y,20),y++,(p=e==null?void 0:e.series)===null||p===void 0||p.forEach(j=>{if(j.type===re.link){const I=j.dotSeriesIndex+1;b.push({modelId:`${j.type}Row${I}`,col:1,row:I-1}),j.regionIndex=e.series[j.dotSeriesIndex].regionIndex,j.leftAppendPadding=O,j.height=e.series[j.dotSeriesIndex].height,j.clipHeight=e.series[j.dotSeriesIndex].clipHeight}}),e!=null&&e.legends&&this.addAttrToComponentSpec(e.legends,"regionIndex",[x.length-1]),((g=(f=e==null?void 0:e.axes)===null||f===void 0?void 0:f[0])===null||g===void 0?void 0:g.orient)==="bottom"&&(this.addOrientAxes(x,b,y,e),y++);const R={type:"grid",col:4,row:y,colWidth:[{index:0,size:O},{index:2,size:wB},{index:3,size:M}],rowHeight:w,elements:b};e.layout=R,e.region=x,(m=e.axes)===null||m===void 0||m.push(...S),e.scrollBar=C}}var obt=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};class IT extends Ri{constructor(){super(...arguments),this.transformerConstructor=Xue,this.type="sequence"}_createSeries(e,t){if(!e)return;const{spec:n}=t,s=obt(t,["spec"]);let r;if(n.type===re.link&&(n.dotSeriesSpec=this._spec.series[n.dotSeriesIndex]),n.regionId&&(r=this.getRegionsInUserId(n.regionId)),r||(r=this.getRegionsInIndex(n.regionIndex?[n.regionIndex]:void 0)[0]),!r)return;const a=new e(n,Object.assign(Object.assign(Object.assign({},this._modelOption),s),{region:r,specKey:"series",globalScale:this._globalScale}));a&&(a.created(),this._series.push(a),r.addSeries(a))}}IT.type="sequence",IT.transformerConstructor=Xue;const lbt=()=>{a0t(),u0t(),ea(),Qr(),X.registerChart(IT.type,IT)};class X4 extends Dl{transformSpec(e){super.transformSpec(e),e.axes.forEach(t=>t.type="linear")}_getDefaultSeriesSpec(e){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{x2Field:e==null?void 0:e.x2Field,y2Field:e==null?void 0:e.y2Field,barMinHeight:e==null?void 0:e.barMinHeight,barBackground:e==null?void 0:e.barBackground})}}class RT extends Ri{constructor(){super(...arguments),this.transformerConstructor=X4}}RT.transformerConstructor=X4,Yt(RT,zc);class GO extends X4{transformSpec(e){super.transformSpec(e),Xd(e)}}class Fv extends RT{constructor(){super(...arguments),this.transformerConstructor=GO,this.type="histogram",this.seriesType=re.bar}}Fv.type="histogram",Fv.seriesType=re.bar,Fv.transformerConstructor=GO;const cbt=()=>{Fce(),X.registerChart(Fv.type,Fv)};class Bv extends RT{constructor(){super(...arguments),this.transformerConstructor=GO,this.type="histogram3d",this.seriesType=re.bar3d}}Bv.type="histogram3d",Bv.seriesType=re.bar3d,Bv.transformerConstructor=GO;const ubt=()=>{Rd(),Bce(),X.registerChart(Bv.type,Bv)};class Yue extends Hue{_getDefaultSeriesSpec(e){var t,n;const s=super._getDefaultSeriesSpec(e);return Object.assign(Object.assign({},s),{cornerRadius:(t=e.cornerRadius)!==null&&t!==void 0?t:0,roundCap:(n=e.roundCap)!==null&&n!==void 0&&n,progress:e.progress,track:e.track,tickMask:e.tickMask})}transformSpec(e){super.transformSpec(e),this._transformProgressAxisSpec(e,{orient:"angle",visible:!1},{orient:"radius",visible:!1},{forceInitTick:e.tickMask&&e.tickMask.visible!==!1})}}class Om extends Ri{constructor(){super(...arguments),this.transformerConstructor=Yue,this.type="circularProgress",this.seriesType=re.circularProgress}}Om.type="circularProgress",Om.seriesType=re.circularProgress,Om.transformerConstructor=Yue,Yt(Om,zc);const hbt=()=>{g0t(),X.registerChart(Om.type,Om)};class que extends Hue{_getDefaultSeriesSpec(e){const t=super._getDefaultSeriesSpec(e);return Object.assign(Object.assign({},t),{radiusField:e.radiusField,pin:e.pin,pinBackground:e.pinBackground,pointer:e.pointer})}_getDefaultCircularProgressSeriesSpec(e){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{type:re.circularProgress})}transformSpec(e){var t,n,s,r,a;super.transformSpec(e);let o=(t=e.series)===null||t===void 0?void 0:t.find(l=>l.type===re.gauge||l.type===re.circularProgress);B(o)&&(o=(n=e.gauge)!==null&&n!==void 0?n:this._getDefaultCircularProgressSeriesSpec(e),o.type==="circularProgress"&&(B(o.radiusField)&&B(o.categoryField)&&(o.radiusField=(r=(s=e.radiusField)!==null&&s!==void 0?s:e.categoryField)!==null&&r!==void 0?r:e.seriesField),B(o.valueField)&&B(o.angleField)&&(o.valueField=(a=e.valueField)!==null&&a!==void 0?a:e.angleField)),e.series.length===1?e.series.push(o):e.series.forEach(l=>{l.type===o.type&&Object.keys(o).forEach(c=>{c in l||(l[c]=o[c])})})),o.type===re.circularProgress?this._transformProgressAxisSpec(e,{orient:"angle",visible:!0,domainLine:{visible:!1},grid:{visible:!1}},{orient:"radius",visible:!1},{zIndex:Xt.Region+50}):this._transformGaugeAxisSpec(e)}_transformGaugeAxisSpec(e){var t;e.axes||(e.axes=[]);const n={radius:null,angle:null};((t=e.axes)!==null&&t!==void 0?t:[]).forEach(s=>{const{orient:r}=s;r==="radius"&&(n.radius=s),r==="angle"&&(n.angle=s)}),n.angle||(n.angle={orient:"angle",visible:!0},e.axes.push(n.angle)),n.radius||(n.radius={orient:"radius",visible:!1},e.axes.push(n.radius)),B(n.angle.type)&&(n.angle.type="linear"),B(n.radius.type)&&(n.radius.type="linear"),B(n.angle.zIndex)&&(n.angle.zIndex=Xt.Region+50)}}class jv extends Ri{constructor(){super(...arguments),this.transformerConstructor=que,this.type="gauge",this.seriesType=re.gaugePointer}}jv.type="gauge",jv.seriesType=re.gaugePointer,jv.transformerConstructor=que;const dbt=()=>{Nvt(),$vt(),X.registerChart(jv.type,jv)};class KO extends Ro{transformSpec(e){super.transformSpec(e),this.transformSeriesSpec(e)}}class Y4 extends Ri{constructor(){super(...arguments),this.transformerConstructor=KO,this.type="wordCloud",this.seriesType=re.wordCloud}}Y4.transformerConstructor=KO;class Zue extends KO{_getDefaultSeriesSpec(e){const t=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{nameField:e.nameField,valueField:e.valueField,seriesField:e.seriesField,fontFamilyField:e.fontFamilyField,fontWeightField:e.fontWeightField,fontStyleField:e.fontStyleField,colorHexField:e.colorHexField,colorMode:e.colorMode,colorList:e.colorList,rotateAngles:e.rotateAngles,fontWeightRange:e.fontWeightRange,fontSizeRange:e.fontSizeRange,maskShape:e.maskShape,keepAspect:e.keepAspect,random:e.random,wordCloudConfig:e.wordCloudConfig,wordCloudShapeConfig:e.wordCloudShapeConfig,word:e.word,fillingWord:e.fillingWord,wordMask:e.wordMask}),n=this.seriesType;return n&&(t.type=n,t[n]=e[n]),t}}class Kp extends Y4{constructor(){super(...arguments),this.transformerConstructor=Zue,this.type="wordCloud",this.seriesType=re.wordCloud}}Kp.type="wordCloud",Kp.seriesType=re.wordCloud,Kp.transformerConstructor=Zue;const pbt=()=>{xue(),X.registerChart(Kp.type,Kp)},fbt=()=>{m_t(),xue(),X.registerChart(Kp.type,Kp)};class Jue extends KO{_getDefaultSeriesSpec(e){const t=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{nameField:e.nameField,valueField:e.valueField,seriesField:e.seriesField,fontFamilyField:e.fontFamilyField,fontWeightField:e.fontWeightField,fontStyleField:e.fontStyleField,colorHexField:e.colorHexField,colorMode:e.colorMode,colorList:e.colorList,rotateAngles:e.rotateAngles,fontWeightRange:e.fontWeightRange,fontSizeRange:e.fontSizeRange,depth_3d:e.depth_3d,maskShape:e.maskShape,keepAspect:e.keepAspect,random:e.random,wordCloudConfig:e.wordCloudConfig,wordCloudShapeConfig:e.wordCloudShapeConfig,word:e.word,fillingWord:e.fillingWord}),n=this.seriesType;return n&&(t.type=n,t[n]=e[n]),t}}class Xp extends Y4{constructor(){super(...arguments),this.transformerConstructor=Jue,this.type="wordCloud3d",this.seriesType=re.wordCloud3d}}Xp.type="wordCloud3d",Xp.seriesType=re.wordCloud3d,Xp.transformerConstructor=Jue;const gbt=()=>{Rd(),Sue(),X.registerChart(Xp.type,Xp)},mbt=()=>{Rd(),y_t(),Rd(),Sue(),X.registerChart(Xp.type,Xp)};class XO extends Ro{needAxes(){return!1}_getDefaultSeriesSpec(e){const t=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{categoryField:e.categoryField,valueField:e.valueField,seriesField:e.seriesField,funnelAlign:e.funnelAlign,funnelOrient:e.funnelOrient,heightRatio:e.heightRatio,shape:e.shape,funnel:e.funnel,transform:e.transform,outerLabel:e.outerLabel,transformLabel:e.transformLabel,isTransform:e.isTransform,maxSize:e.maxSize,minSize:e.minSize,gap:e.gap,isCone:e.isCone,range:e.range}),n=this.seriesType;return n&&(t.type=n,t[n]=e[n]),t}transformSpec(e){super.transformSpec(e);const t=this._getDefaultSeriesSpec(e);e.series&&e.series.length!==0?e.series.forEach(n=>{this._isValidSeries(n.type)&&Object.keys(t).forEach(s=>{s in n||(n[s]=t[s])})}):e.series=[t]}}class Nv extends Ri{constructor(){super(...arguments),this.transformerConstructor=XO,this.type="funnel",this.seriesType=re.funnel}}Nv.type="funnel",Nv.seriesType=re.funnel,Nv.transformerConstructor=XO;const ybt=()=>{M_t(),X.registerChart(Nv.type,Nv)};class $v extends Ri{constructor(){super(...arguments),this.transformerConstructor=XO,this.type="funnel3d",this.seriesType=re.funnel3d}}$v.type="funnel3d",$v.seriesType=re.funnel3d,$v.transformerConstructor=XO;const _bt=()=>{Rd(),I_t(),X.registerChart($v.type,$v)};class Que extends Dl{needAxes(){return!1}_getDefaultSeriesSpec(e){var t,n;const s=super._getDefaultSeriesSpec(e);return Object.assign(Object.assign({},s),{direction:(t=e.direction)!==null&&t!==void 0?t:"horizontal",cornerRadius:(n=e.cornerRadius)!==null&&n!==void 0?n:0,bandWidth:e.bandWidth,progress:e.progress,track:e.track})}transformSpec(e){var t,n;if(super.transformSpec(e),e.axes||(e.axes=[]),e.direction==="vertical"){let s=null,r=null;((t=e.axes)!==null&&t!==void 0?t:[]).forEach(o=>{const{orient:l}=o;l==="left"&&(s=o),l==="bottom"&&(r=o)}),s||(s={orient:"left",visible:!1},e.axes.push(s)),r||(r={orient:"bottom",visible:!1},e.axes.push(r)),B(r.type)&&(r.type="band"),B(s.type)&&(s.type="linear");const a=v1(s,{min:0,max:1});B(s.min)&&(s.min=a.min),B(s.max)&&(s.max=a.max)}else{let s=null,r=null;((n=e.axes)!==null&&n!==void 0?n:[]).forEach(o=>{const{orient:l}=o;l==="left"&&(s=o),l==="bottom"&&(r=o)}),s||(s={type:"band",orient:"left",visible:!1},e.axes.push(s)),r||(r={orient:"bottom",visible:!1},e.axes.push(r)),B(r.type)&&(r.type="linear"),B(s.type)&&(s.type="band");const a=v1(r,{min:0,max:1});B(r.min)&&(r.min=a.min),B(r.max)&&(r.max=a.max)}}}class Mm extends Ri{constructor(){super(...arguments),this.transformerConstructor=Que,this.type="linearProgress",this.seriesType=re.linearProgress}}Mm.type="linearProgress",Mm.seriesType=re.linearProgress,Mm.transformerConstructor=Que,Yt(Mm,zc);const vbt=()=>{C0t(),X.registerChart(Mm.type,Mm)};class ehe extends Dl{_getDefaultSeriesSpec(e){var t,n;const s=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{barWidth:e.barWidth,barMaxWidth:e.barMaxWidth,barMinWidth:e.barMinWidth,barGapInGroup:e.barGapInGroup,barBackground:e.barBackground,barMinHeight:e.barMinHeight,stackCornerRadius:e.stackCornerRadius});return s.bar=e.bar,e.direction==="horizontal"?s.xField=(t=e.xField)!==null&&t!==void 0?t:[e.minField,e.maxField]:s.yField=(n=e.yField)!==null&&n!==void 0?n:[e.minField,e.maxField],s}transformSpec(e){super.transformSpec(e),Xd(e)}}class zv extends Ri{constructor(){super(...arguments),this.transformerConstructor=ehe,this.type="rangeColumn",this.seriesType=re.rangeColumn}}zv.type="rangeColumn",zv.seriesType=re.rangeColumn,zv.transformerConstructor=ehe;const bbt=()=>{wyt(),X.registerChart(zv.type,zv)};class the extends Dl{_getDefaultSeriesSpec(e){var t,n;const s=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{barGapInGroup:e.barGapInGroup});return s.bar3d=e.bar3d,e.direction==="horizontal"?s.xField=(t=e.xField)!==null&&t!==void 0?t:[e.minField,e.maxField]:s.yField=(n=e.yField)!==null&&n!==void 0?n:[e.minField,e.maxField],s}}class Hv extends Ri{constructor(){super(...arguments),this.transformerConstructor=the,this.type="rangeColumn3d",this.seriesType=re.rangeColumn3d}}Hv.type="rangeColumn3d",Hv.seriesType=re.rangeColumn3d,Hv.transformerConstructor=the;const xbt=()=>{Rd(),Ayt(),X.registerChart(Hv.type,Hv)};class ihe extends Ro{_getDefaultSeriesSpec(e){const t=F(e.startAngle)?e.startAngle:o4,n=F(e.endAngle)?e.endAngle:t+yy(2*Math.PI),s=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{categoryField:e.categoryField,valueField:e.valueField,seriesField:e.seriesField,centerX:e.centerX,centerY:e.centerY,offsetX:e.offsetX,offsetY:e.offsetY,startAngle:t,endAngle:n,innerRadius:e.innerRadius,outerRadius:e.outerRadius,gap:e.gap,labelLayout:e.labelLayout,label:e.label,labelAutoVisible:e.labelAutoVisible,drill:e.drill,drillField:e.drillField}),r=re.sunburst;return s.type=r,s[r]=e[r],s}transformSpec(e){super.transformSpec(e),this.transformSeriesSpec(e)}}class Vv extends Ri{constructor(){super(...arguments),this.transformerConstructor=ihe,this.type="sunburst",this.seriesType=re.sunburst}}Vv.type="sunburst",Vv.seriesType=re.sunburst,Vv.transformerConstructor=ihe;const Sbt=()=>{ivt(),X.registerChart(Vv.type,Vv)};class nhe extends Ro{_getDefaultSeriesSpec(e){const t=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{categoryField:e.categoryField,valueField:e.valueField,seriesField:e.seriesField,layoutPadding:e.layoutPadding,label:e.label,circlePacking:e.circlePacking,drill:e.drill,drillField:e.drillField}),n=re.circlePacking;return t.type=n,t[n]=e[n],t}transformSpec(e){super.transformSpec(e),this.transformSeriesSpec(e)}}class Uv extends Ri{constructor(){super(...arguments),this.transformerConstructor=nhe,this.type="circlePacking",this.seriesType=re.circlePacking}}Uv.type="circlePacking",Uv.seriesType=re.circlePacking,Uv.transformerConstructor=nhe;const Cbt=()=>{lvt(),X.registerChart(Uv.type,Uv)};class she extends Ro{_getDefaultSeriesSpec(e){const t=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{categoryField:e.categoryField,valueField:e.valueField,seriesField:e.seriesField,aspectRatio:e.aspectRatio,splitType:e.splitType,maxDepth:e.maxDepth,gapWidth:e.gapWidth,nodePadding:e.nodePadding,minVisibleArea:e.minVisibleArea,minChildrenVisibleArea:e.minChildrenVisibleArea,minChildrenVisibleSize:e.minChildrenVisibleSize,roam:e.roam,drill:e.drill,drillField:e.drillField,leaf:e.leaf,nonLeaf:e.nonLeaf,nonLeafLabel:e.nonLeafLabel}),n=this.seriesType;return n&&(t.type=n,t[n]=e[n]),t}transformSpec(e){super.transformSpec(e),this.transformSeriesSpec(e)}}class Wv extends Ri{constructor(){super(...arguments),this.transformerConstructor=she,this.type="treemap",this.seriesType=re.treemap}}Wv.type="treemap",Wv.seriesType=re.treemap,Wv.transformerConstructor=she;const wbt=()=>{Mvt(),X.registerChart(Wv.type,Wv)};class rhe extends jO{transformSpec(e){super.transformSpec(e),e.legends&&q(e.legends).forEach(t=>{t.select=!1,t.hover=!1,t.filter=!1}),Xd(e)}_getDefaultSeriesSpec(e){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{bar:e.bar,stackLabel:e.stackLabel,leaderLine:e.leaderLine,total:e.total})}}class Gv extends Bh{constructor(){super(...arguments),this.transformerConstructor=rhe,this.type="waterfall",this.seriesType=re.waterfall}}Gv.type="waterfall",Gv.seriesType=re.waterfall,Gv.transformerConstructor=rhe;const Abt=()=>{dyt(),X.registerChart(Gv.type,Gv)};class ahe extends Dl{_getDefaultSeriesSpec(e){var t;const n=[e.maxField,e.medianField,e.q1Field,e.q3Field,e.minField,e.outliersField],s=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{boxPlot:e.boxPlot,direction:(t=e.direction)!==null&&t!==void 0?t:"vertical",minField:e.minField,maxField:e.maxField,q1Field:e.q1Field,medianField:e.medianField,q3Field:e.q3Field,outliersField:e.outliersField,outliersStyle:e.outliersStyle});return s[s.direction==="horizontal"?"xField":"yField"]=n,s}transformSpec(e){super.transformSpec(e),e.axes||(e.axes=[{orient:"bottom"},{orient:"left"}]),Xd(e)}}class Kv extends Ri{constructor(){super(...arguments),this.transformerConstructor=ahe,this.type="boxPlot",this.seriesType=re.boxPlot}}Kv.type="boxPlot",Kv.seriesType=re.boxPlot,Kv.transformerConstructor=ahe;const kbt=()=>{yyt(),X.registerChart(Kv.type,Kv)};class ohe extends Ro{_getDefaultSeriesSpec(e){const t=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{categoryField:e.categoryField,valueField:e.valueField,sourceField:e.sourceField,targetField:e.targetField,direction:e.direction,nodeAlign:e.nodeAlign,crossNodeAlign:e.crossNodeAlign,nodeGap:e.nodeGap,nodeWidth:e.nodeWidth,linkWidth:e.linkWidth,minStepWidth:e.minStepWidth,minNodeHeight:e.minNodeHeight,minLinkHeight:e.minLinkHeight,dropIsolatedNode:e.dropIsolatedNode,nodeHeight:e.nodeHeight,linkHeight:e.linkHeight,equalNodeHeight:e.equalNodeHeight,linkOverlap:e.linkOverlap,iterations:e.iterations,nodeKey:e.nodeKey,linkSortBy:e.linkSortBy,nodeSortBy:e.nodeSortBy,setNodeLayer:e.setNodeLayer,node:e.node,link:e.link,label:e.label,emphasis:e.emphasis,inverse:e.inverse}),n=this.seriesType;return n&&(t.type=n,t[n]=e[n]),t}transformSpec(e){super.transformSpec(e),this.transformSeriesSpec(e)}}class Xv extends Ri{constructor(){super(...arguments),this.transformerConstructor=ohe,this.type="sankey",this.seriesType=re.sankey}_setStateInDatum(e,t,n,s,r){const a=ie(n)?n[0]:n,o=a?Object.keys(a):null;this.getRegionsInQuerier(r).forEach(l=>{if(!a)return void l.interaction.clearEventElement(e,!0);let c=!1;l.getSeries().forEach(u=>{var h,d;let p=null;u.getMarksWithoutRoot().forEach(f=>{if(f.type==="text")return;let g=null;const m=f.getProduct();m&&((!s||ee(s)&&s(u,f))&&(g=m.elements.find(y=>o.every(b=>{var x;let S=(x=y.getDatum())===null||x===void 0?void 0:x.datum;return ie(S)&&(S=S[0]),a[b]==(S==null?void 0:S[b])}))),g&&(c=!0,l.interaction.startInteraction(e,g),(m.id().includes("node")||m.id().includes("link"))&&(p=g)))}),p&&((d=(h=u)._handleEmphasisElement)===null||d===void 0||d.call(h,{item:p}))}),t&&c&&l.interaction.reverseEventElement(e)})}}Xv.type="sankey",Xv.seriesType=re.sankey,Xv.transformerConstructor=ohe;const Tbt=()=>{kvt(),X.registerChart(Xv.type,Xv)};class lhe extends Dl{_getDefaultSeriesSpec(e){var t,n;const s=Object.assign({},super._getDefaultSeriesSpec(e));return s.area=e.area,e.direction==="horizontal"?s.xField=(t=e.xField)!==null&&t!==void 0?t:[e.minField,e.maxField]:s.yField=(n=e.yField)!==null&&n!==void 0?n:[e.minField,e.maxField],s.stack=!1,s}transformSpec(e){super.transformSpec(e),Xd(e)}}class Yv extends Ri{constructor(){super(...arguments),this.transformerConstructor=lhe,this.type="rangeArea",this.seriesType=re.rangeArea}}Yv.type="rangeArea",Yv.seriesType=re.rangeArea,Yv.transformerConstructor=lhe;const Ebt=()=>{Eyt(),X.registerChart(Yv.type,Yv)};class che extends Dl{_getDefaultSeriesSpec(e){const t=super._getDefaultSeriesSpec(e);return Object.assign(Object.assign({},t),{valueField:e.valueField,cell:e.cell})}}class qv extends Ri{constructor(){super(...arguments),this.transformerConstructor=che,this.type="heatmap",this.seriesType=re.heatmap}}qv.type="heatmap",qv.seriesType=re.heatmap,qv.transformerConstructor=che;const Pbt=()=>{Gvt(),X.registerChart(qv.type,qv)};class uhe extends Ro{_getDefaultSeriesSpec(e){const t=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{categoryField:e.categoryField,valueField:e.valueField,seriesField:e.seriesField,sizeField:e.sizeField,sizeRange:e.sizeRange,centerX:e.centerX,centerY:e.centerY,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,ripplePoint:e.ripplePoint,centerPoint:e.centerPoint,centerLabel:e.centerLabel,nodePoint:e.nodePoint,label:e.label}),n=re.correlation;return t.type=n,t[n]=e[n],t}transformSpec(e){super.transformSpec(e),this.transformSeriesSpec(e)}}class Zv extends Ri{constructor(){super(...arguments),this.transformerConstructor=uhe,this.type="correlation",this.seriesType=re.correlation}}Zv.type="correlation",Zv.seriesType=re.correlation,Zv.transformerConstructor=uhe;const Obt=()=>{ebt(),X.registerChart(Zv.type,Zv)};function hhe(i){var e,t;const n=Object.assign({},i);return Te(i.style)||(n.textStyle=Le(i.style)),Te(i.textStyle)||Pe(n.textStyle,Le(i.textStyle)),!((e=i.shape)===null||e===void 0)&&e.style&&Le(n.shape.style),!((t=i.background)===null||t===void 0)&&t.style&&Le(n.background.style),n}var Mbt=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};function Ibt(i,e){const{title:t={},item:n={},pager:s={},background:r={},type:a,id:o,visible:l,orient:c,position:u,data:h,filter:d,regionId:p,regionIndex:f,seriesIndex:g,seriesId:m,padding:y}=i,b=Mbt(i,["title","item","pager","background","type","id","visible","orient","position","data","filter","regionId","regionIndex","seriesIndex","seriesId","padding"]);return t.visible&&(b.title=hhe(t)),Te(n.focusIconStyle)||Le(n.focusIconStyle),n.shape&&(n.shape=ol(n.shape)),n.label&&(n.label=ol(n.label)),n.value&&(n.value=ol(n.value)),n.background&&(n.background=ol(n.background)),Aa(n.maxWidth)&&(n.maxWidth=Number(n.maxWidth.substring(0,n.maxWidth.length-1))*e.width/100),Aa(n.width)&&(n.width=Number(n.width.substring(0,n.width.length-1))*e.width/100),Aa(n.height)&&(n.height=Number(n.height.substring(0,n.height.length-1))*e.width/100),b.item=n,s.type==="scrollbar"?(Te(s.railStyle)||Le(s.railStyle),Te(s.sliderStyle)||Le(s.sliderStyle)):(Te(s.textStyle)||Le(s.textStyle),s.handler&&ol(s.handler)),b.pager=s,r.visible&&!Te(r.style)&&(Pe(b,r.style),F(r.padding)&&(b.padding=r.padding)),b}const Rbt=(i,e)=>{const t=[],n={},{series:s,seriesField:r}=e;return s().forEach(a=>{const o=r(a);let l;l=o===a.getSeriesField()?a.getSeriesInfoList():a.getSeriesInfoInField(o),l.forEach(c=>{n[c.key]||(n[c.key]=!0,t.push(c))})}),t},Lbt=(i,e)=>{var t,n,s;const{series:r,selected:a,field:o,data:l}=e,c=a(),u=l();if(c.length===0&&u.length)return[];if(c.length===u.length)return i;const h={};c.forEach(p=>{h[p]=!0});const d=(t=o())!==null&&t!==void 0?t:Wr;return ie(i)&&(!((n=i[0])===null||n===void 0)&&n.nodes)?(i[0].nodes=i[0].nodes.filter(p=>h[p.key]===!0),!((s=i[0])===null||s===void 0)&&s.links&&(i[0].links=i[0].links.filter(p=>h[p.source]===!0&&h[p.target]===!0))):F(d)&&(i=i.filter(p=>h[r.getSeriesFieldValue(p,d)]===!0)),i};class q4 extends Pr{constructor(){super(...arguments),this.layoutType="normal",this.layoutZIndex=Xt.Legend,this.layoutLevel=El.Legend,this.specKey="legends",this._orient="left",this._visible=!0,this._position="middle",this._preSelectedData=[],this._selectedData=[],this.effect={onSelectedDataChange:()=>{Vi(this._regions,e=>{var t;(t=e.getViewData())===null||t===void 0||t.markRunning()},{userId:this._seriesUserId,specIndex:this._seriesIndex}),Vi(this._regions,e=>{e.reFilterViewData()},{userId:this._seriesUserId,specIndex:this._seriesIndex})}}}get orient(){return this._orient}get visible(){return this._visible}get position(){return this._position}getLegendData(){return this._legendData.getLatestData()}getSelectedData(){return this._selectedData}setAttrFromSpec(){var e;super.setAttrFromSpec(),this._orient=r4(this._spec.orient)?this._spec.orient:"left",this._position=(e=this._spec.position)!==null&&e!==void 0?e:"middle",this._visible=this._spec.visible!==!1;const{regionId:t,regionIndex:n,seriesId:s,seriesIndex:r}=this._spec;F(s)&&(this._seriesUserId=q(s)),F(t)&&(this._regionUserId=q(t)),F(r)&&(this._seriesIndex=q(r)),F(n)&&(this._regionUserIndex=q(n)),this._regions=this._option.getRegionsInUserIdOrIndex(this._regionUserId,this._regionUserIndex)}created(){super.created(),this.initData()}onRender(e){}_compareSpec(e,t){const n=super._compareSpec(e,t);return n.reRender=!0,(e==null?void 0:e.orient)!==(t==null?void 0:t.orient)?(n.reMake=!0,n):(Pt(t,e)||(n.reCompile=!0),n)}changeRegions(e){}_bindLegendDataChange(){this._preSelectedData=this._selectedData.slice(),this._initSelectedData()}initData(){const e=this._initLegendData();e.target.addListener("change",this._bindLegendDataChange.bind(this)),this._legendData=new Ec(this._option,e),this._initSelectedData(),Vi(this._regions,t=>{t.event.on(ke.rawDataUpdate,{filter:({model:n})=>(n==null?void 0:n.id)===t.id},()=>{this._legendData.getDataView().reRunAllTransform()})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}setSelectedData(e){var t,n,s;const r=this._selectedData;B(e)||JSON.stringify(r)===JSON.stringify(e)||(Vi(this._regions,a=>{a.legendSelectedFilter&&(e=a.legendSelectedFilter(this,e))},{userId:this._seriesUserId,specIndex:this._seriesIndex}),this._selectedData=[...e],(n=(t=this.effect).onSelectedDataChange)===null||n===void 0||n.call(t),this.event.emit(ke.legendSelectedDataChange,{model:this}),(s=this._legendComponent)===null||s===void 0||s.setSelected(this._selectedData))}afterSetLayoutStartPoint(e){if(super.afterSetLayoutStartPoint(e),this._legendComponent){const{x:t,y:n}=e;Z(t*n)&&this._legendComponent.setAttributes({x:t,y:n})}}getBoundsInRect(e,t){if(!this._visible)return this._legendComponent&&this._legendComponent.parent&&(this._legendComponent.parent.removeChild(this._legendComponent),this._legendComponent=null),{x1:0,y1:0,x2:0,y2:0};const n={x1:this.getLayoutStartPoint().x,y1:this.getLayoutStartPoint().y,x2:0,y2:0},s=this._getLegendAttributes(e);if(s.disableTriggerEvent=this._option.disableTriggerEvent,this._legendComponent)Pt(s,this._cacheAttrs)||this._legendComponent.setAttributes(Pe({},s,{defaultSelected:this._selectedData}));else{const o=new(this._getLegendConstructor())(Pe({},s,{defaultSelected:this._selectedData}));o.name="legend",this._legendComponent=o,this.getContainer().add(o),this._option.disableTriggerEvent||this._initEvent(),o.on("*",(l,c)=>this._delegateEvent(this._legendComponent,l,c))}this._cacheAttrs=s;const r=isFinite(this._legendComponent.AABBBounds.width())?this._legendComponent.AABBBounds.width():0,a=isFinite(this._legendComponent.AABBBounds.height())?this._legendComponent.AABBBounds.height():0;if(this.layoutType!=="normal-inline"){const o=this.layoutOrient==="bottom"||this.layoutOrient==="top"?"horizontal":"vertical",l=this._position,{width:c,height:u}=t;let h=0,d=0;o==="horizontal"?l==="middle"?h=(c-r)/2:l==="end"&&(h=c-r):l==="middle"?d=(u-a)/2:l==="end"&&(d=u-a),this._legendComponent.setAttributes({dx:h,dy:d})}return n.x2=n.x1+r,n.y2=n.y1+a,n}onDataUpdate(){var e,t,n;if(JSON.stringify(this._preSelectedData)!==JSON.stringify(this._selectedData)){if(this._legendComponent){const s=this._getLegendAttributes(this.getLayoutRect());Pt(s,this._cacheAttrs)||this._legendComponent.setAttributes(Pe({},s,{defaultSelected:this._selectedData}))}(t=(e=this.effect).onSelectedDataChange)===null||t===void 0||t.call(e),(n=this.getChart())===null||n===void 0||n.setLayoutTag(!0,null,!1),this.event.emit(ke.legendSelectedDataChange,{model:this})}}_getNeedClearVRenderComponents(){return[this._legendComponent]}clear(){super.clear(),this._cacheAttrs=null,this._preSelectedData=null}}q4.specKey="legends";class LT extends q4{constructor(){super(...arguments),this.type=oe.discreteLegend,this.name=oe.discreteLegend}static getSpecInfo(e){return Pl(e,this.specKey,this.type,t=>!t.type||t.type==="discrete")}init(e){super.init(e),Vi(this._regions,t=>{t.addViewDataFilter({type:"discreteLegendFilter",options:{series:t,selected:()=>this._selectedData,field:()=>this._getSeriesLegendField(t),data:()=>this.getLegendDefaultData()},level:Tl.legendFilter})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}_initLegendData(){Fe(this._option.dataSet,"discreteLegendFilter",Lbt),Fe(this._option.dataSet,"discreteLegendDataMake",Rbt);const e=new Rt(this._option.dataSet,{name:`${this.type}_${this.id}_data`});return e.transform({type:"discreteLegendDataMake",options:{series:()=>{const t=[];return Vi(this._regions,n=>{t.push(n)},{specIndex:this._spec.seriesIndex,userId:this._spec.seriesId}),t},seriesField:t=>this._getSeriesLegendField(t)}}),e}_getSeriesLegendField(e){var t,n,s;const r=e.getSeriesField(),a=(t=this._spec.scaleName)!==null&&t!==void 0?t:this._spec.scale;if(B(a)||!e.getRawData())return r;const o=this._option.globalScale.getScaleSpec(a);if(!o)return r;if(this._spec.field)return this._spec.field;if(!mm(o.domain))return r;const l=o.domain.find(c=>c.dataId===e.getRawData().name);return l&&(s=(n=l.fields)===null||n===void 0?void 0:n[0])!==null&&s!==void 0?s:r}_initSelectedData(){const e=this.getLegendDefaultData();if(this._unselectedData){const t=[],n=[];e.forEach(s=>{this._unselectedData.includes(s)?n.push(s):t.push(s)}),this._selectedData=t,this._unselectedData=n}else this._spec.defaultSelected?this._selectedData=[...this._spec.defaultSelected]:this._selectedData=e}getLegendDefaultData(e){return ee(this._spec.data)?this._getLegendItems().map(t=>t.label):this._legendData.getLatestData().map(e?t=>t.originalKey:t=>t.key)}_addDefaultTitleText(e){var t,n,s,r;if(!((t=e.title)===null||t===void 0)&&t.visible&&B(e.title.text)&&B((n=e.title.style)===null||n===void 0?void 0:n.text)){const a=(r=(s=this._regions)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.getSeries()[0];if(!a)return;e.title.text=dT(a.getRawData(),a.getSeriesField())}}_getLegendAttributes(e){const t=this.layoutOrient==="bottom"||this.layoutOrient==="top"?"horizontal":"vertical",n=Object.assign(Object.assign({layout:t,items:this._getLegendItems(),zIndex:this.layoutZIndex},Ibt(this._spec,e)),{maxWidth:e.width,maxHeight:e.height});return this._addDefaultTitleText(n),this._addLegendItemFormatMethods(n),n}_getLegendConstructor(){return Ioe}setSelectedData(e){e&&(this._unselectedData=this.getLegendDefaultData().filter(t=>!e.includes(t))),super.setSelectedData(e)}_initEvent(){if(this._legendComponent){const e=this._spec.filter!==!1;this._legendComponent.addEventListener(Gs.legendItemClick,t=>{const n=et(t,"detail.currentSelected");e&&this.setSelectedData(n),this.event.emit(ke.legendItemClick,{model:this,value:n,event:t})}),this._legendComponent.addEventListener(Gs.legendItemHover,t=>{const n=et(t,"detail");this.event.emit(ke.legendItemHover,{model:this,value:n,event:t})}),this._legendComponent.addEventListener(Gs.legendItemUnHover,t=>{const n=et(t,"detail");this.event.emit(ke.legendItemUnHover,{model:this,value:n,event:t})})}}_getLegendItems(){const e=(this._legendData.getLatestData()||[]).map(t=>{var n,s;const r=t.style("fillOpacity"),a=t.style("strokeOpacity"),o=t.style("opacity"),l=t.style("texture");return{label:t.key,shape:{symbolType:(s=(n=t.style("symbolType"))!==null&&n!==void 0?n:t.shapeType)!==null&&s!==void 0?s:"circle",fillOpacity:Z(r)?r:1,strokeOpacity:Z(a)?a:1,opacity:Z(o)?o:1,texturePadding:l?1:null,textureSize:l?4:null,texture:l,fill:t.style("fill"),stroke:t.style("stroke"),textureColor:t.style("textureColor"),innerBorder:t.style("innerBorder"),outerBorder:t.style("outerBorder"),lineDash:t.style("lineDash"),lineDashOffset:t.style("lineDashOffset"),lineWidth:t.style("lineWidth")}}});return ee(this._spec.data)?this._spec.data(e,this._option.globalScale.getScale("color"),this._option.globalScale):e}_addLegendItemFormatMethods(e){var t,n,s,r;const{formatMethod:a,formatter:o}=(n=(t=this._spec.item)===null||t===void 0?void 0:t.label)!==null&&n!==void 0?n:{},{formatMethod:l,formatter:c}=(r=(s=this._spec.item)===null||s===void 0?void 0:s.value)!==null&&r!==void 0?r:{},{formatFunc:u}=Pc(a,o);o&&!a&&u&&(e.item.label.formatMethod=(d,p)=>u(d,p,o));const{formatFunc:h}=Pc(l,c);c&&!l&&h&&(e.item.value.formatMethod=(d,p)=>h(c,d,p,o))}}LT.specKey="legends",LT.type=oe.discreteLegend;const Dbt=()=>{X.registerComponent(LT.type,LT)},Fbt=(i,e)=>{const{series:t,field:n,scale:s}=e,r=n();if(n&&r){let a=1/0,o=-1/0;return t().forEach(l=>{const c=l.getRawDataStatisticsByField(r,!0),u=c==null?void 0:c.min,h=c==null?void 0:c.max;Z(u)&&(a=Math.min(u,a)),Z(h)&&(o=Math.max(h,o))}),[a,o]}if(s){const a=s();return a?a.domain():[]}return[]},Bbt=(i,e)=>{const{selected:t,field:n,data:s,isHierarchyData:r}=e,a=t(),o=n(),l=r||(c=>c&&c.some(u=>u&&Wct(u)));if(a===s())return i;if(o&&!Te(a)){const[c,u]=a;return l(i)?cle(i,+c,+u,o):i.filter(h=>h[o]>=c&&h[o]<=u)}return i};var jbt=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};function Nbt(i){const e=Pe({},i),{title:t={},handler:n={},rail:s={},track:r={},startText:a,endText:o,handlerText:l,sizeBackground:c,background:u={},type:h,id:d,visible:p,orient:f,position:g,data:m,defaultSelected:y,field:b,filter:x,regionId:S,regionIndex:C,seriesIndex:w,seriesId:A,padding:T}=e,E=jbt(e,["title","handler","rail","track","startText","endText","handlerText","sizeBackground","background","type","id","visible","orient","position","data","defaultSelected","field","filter","regionId","regionIndex","seriesIndex","seriesId","padding"]);return t.visible&&(E.title=hhe(t)),E.showHandler=n.visible!==!1,Te(n.style)||(E.handlerStyle=Le(n.style)),F(s.width)&&(E.railWidth=s.width),F(s.height)&&(E.railHeight=s.height),Te(s.style)||(E.railStyle=Le(s.style)),Te(r.style)||(E.trackStyle=Le(r.style)),E.startText=ol(a),E.endText=ol(o),E.handlerText=ol(l),Te(c)||(E.sizeBackground=Le(c)),u.visible&&!Te(u.style)&&(Pe(E,u.style),F(u.padding)&&(E.padding=u.padding)),E}function $bt(i){return i==="color"||i==="size"}const zbt={color:gO,size:mO},Hbt=["#C4E7FF","#98CAFF","#75ACFF","#518FF9","#2775DC","#005CBE","#00429F","#00287E"],Vbt=[2,10];class DT extends q4{static getSpecInfo(e){const t=Pl(e,this.specKey,this.type,n=>$bt(n.type));return t&&t.forEach(n=>{n.type=n.spec.type==="color"?oe.colorLegend:oe.sizeLegend}),t}constructor(e,t){super(e,t),this.type=oe.colorLegend,this.name=oe.colorLegend;const n=this._spec.type==="color"?oe.colorLegend:oe.sizeLegend;this.type=n,this.name=n}setAttrFromSpec(){super.setAttrFromSpec(),this._field=this._spec.field,this._legendType=this._spec.type}init(e){super.init(e),Vi(this._regions,t=>{t.addViewDataFilter({type:"continuousLegendFilter",options:{selected:()=>this._selectedData,field:()=>this._field,data:()=>this._legendData.getLatestData(),isHierarchyData:t.isHierarchyData},level:Tl.legendFilter})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}_getScaleInGlobal(){const e=this._option.globalScale;let t=this._spec.scale;return t||(t=this._legendType),e.getScale(t)}_initLegendData(){Fe(this._option.dataSet,"continuousLegendFilter",Bbt),Fe(this._option.dataSet,"continuousLegendDataMake",Fbt);const e=new Rt(this._option.dataSet,{name:`${this.type}_${this.id}_data`});return e.transform({type:"continuousLegendDataMake",options:{series:()=>Uoe(this._regions,{userId:this._seriesUserId,specIndex:this._seriesIndex}),field:()=>this._field,scale:this._getScaleInGlobal.bind(this)}}),e}_initSelectedData(){this._spec.defaultSelected?this._selectedData=this._spec.defaultSelected.slice():this._selectedData=this._legendData.getLatestData()}_addDefaultTitleText(e){var t,n,s,r;if(!((t=e.title)===null||t===void 0)&&t.visible&&B(e.title.text)&&B((n=e.title.style)===null||n===void 0?void 0:n.text)){const a=this._field;if(a){const u=(r=(s=this._regions)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.getSeries()[0];return u?void(e.title.text=dT(u.getRawData(),a)):void 0}let o=this._spec.scale;o||(o=this._legendType);const l=this._option.globalScale.getScaleSpec(o);if(!mm(l==null?void 0:l.domain))return;const c=l.domain[0];if(c.fields.length===0)return;e.title.text=dT(this._option.dataSet.getDataView(c.dataId),c.fields[0])}}_getLegendAttributes(e){var t,n;const s=this.layoutOrient==="bottom"||this.layoutOrient==="top"?"horizontal":"vertical",r=s==="horizontal"?"bottom":this.layoutOrient;let a=[];const o=this._getScaleInGlobal();o&&o.type==="linear"&&(a=o.range()),Te(a)&&(a=this._legendType==="color"?Hbt:Vbt);let l=(t=this._legendData.getLatestData()[0])!==null&&t!==void 0?t:0,c=(n=this._legendData.getLatestData()[1])!==null&&n!==void 0?n:1;this._legendData.getLatestData()[0]===this._legendData.getLatestData()[1]&&(l=Math.min(0,this._legendData.getLatestData()[0]),c=this._legendData.getLatestData()[0]===0?1:Math.max(0,this._legendData.getLatestData()[0]));const u=Object.assign({layout:s,align:r,zIndex:this.layoutZIndex,min:l,max:c,value:this._spec.defaultSelected,[this._legendType==="color"?"colors":"sizeRange"]:a},Nbt(this._spec));return this._addDefaultTitleText(u),u}_getLegendConstructor(){return zbt[this._legendType]}_initEvent(){if(this._legendComponent){const e=this._spec.filter!==!1;this._legendComponent.addEventListener("change",zd(t=>{const n=et(t,"detail.value");e&&this.setSelectedData(n),this.event.emit(ke.legendFilter,{model:this,value:n,event:t})},30))}}}DT.specKey="legends",DT.type=oe.continuousLegend;const Ubt=()=>{X.registerComponent(DT.type,DT)},Eg=(i,e)=>F(e)?i.map(t=>e[t]):void 0,Dp=(i,e)=>t=>i.every((n,s)=>t[n]===(e==null?void 0:e[s])),__=i=>!B(i)&&(ie(i)?i.length>0&&i.every(F):Object.keys(i).length>0);function Wbt(i,e,t){var n,s,r;const a=Object.assign({regionIndex:0},e),o=t.getOption(),l=o.getRegionsInUserIdOrIndex(F(a.regionId)?[a.regionId]:void 0,F(a.regionIndex)?[a.regionIndex]:void 0)[0];if(!l)return"none";const c=Gbt(i,l),u=(n=a.activeType)!==null&&n!==void 0?n:c.length>1?"dimension":"mark",h=l.getLayoutStartPoint(),d=l.getLayoutRect(),p=o.globalInstance.getContainer(),f=Object.assign({x:0,y:0},p?jKe(p):{}),g=y=>{var b;const{dimensionFields:x,dimensionData:S,measureFields:C,measureData:w,groupField:A,groupData:T}=y.data;return(b=y.series.getViewData())===null||b===void 0?void 0:b.latestData.find(P=>Dp(x,S)(P)&&Dp(C,w)(P)&&(B(A)||Dp([A],[T])(P)))},m=y=>{var b,x;const S=(A=>({x:Math.min(Math.max(A.x,0),d.width),y:Math.min(Math.max(A.y,0),d.height)}))(y),C=(b=a.x)!==null&&b!==void 0?b:h.x+S.x,w=(x=a.y)!==null&&x!==void 0?x:h.y+S.y;return{canvasX:C,canvasY:w,clientX:f.x+C,clientY:f.y+w}};if(u==="dimension"){const y=c[0];if(!y)return"none";const b=new Map;c.forEach(w=>{var A;b.has(w.series)||b.set(w.series,[]),(A=b.get(w.series))===null||A===void 0||A.push(w)});const x=[{value:i[y.data.dimensionFields[0]],data:[...b.keys()].map(w=>{var A,T;return{series:w,datum:(T=(A=b.get(w))===null||A===void 0?void 0:A.map(E=>g(E)))!==null&&T!==void 0?T:[]}})}];F(y.dimType)&&(x[0].position=y.pos[y.dimType],x[0].dimType=y.dimType);const S={changePositionOnly:!1,action:"enter",tooltip:null,dimensionInfo:x,chart:(s=o.globalInstance.getChart())!==null&&s!==void 0?s:void 0,datum:void 0,model:void 0,source:wt.chart,event:m({x:c.reduce((w,A)=>w+A.pos.x,0)/c.length,y:c.reduce((w,A)=>w+A.pos.y,0)/c.length}),item:void 0,itemMap:new Map};t.processor.dimension.showTooltip(x,S,!1);const C=o.globalInstance;return _a.globalConfig.uniqueTooltip&&_a.hideTooltip(C.id),u}if(u==="mark"){const y=c[0];if(!y)return"none";const b=Object.assign(Object.assign({},g(y)),i),x=[{datum:[b],series:y.series}],S={changePositionOnly:!1,tooltip:null,dimensionInfo:[{value:b[y.data.dimensionFields[0]],data:x}],chart:(r=o.globalInstance.getChart())!==null&&r!==void 0?r:void 0,datum:b,model:y.series,source:wt.chart,event:m(y.pos),item:void 0,itemMap:new Map};t.processor.mark.showTooltip({datum:b,mark:null,series:y.series},S,!1);const C=o.globalInstance;return _a.globalConfig.uniqueTooltip&&_a.hideTooltip(C.id),u}return"none"}const Gbt=(i,e)=>{const t=e.getSeries(),n=[];return t.forEach(s=>{var r,a,o,l,c,u,h;const d=s.getDimensionField(),p=s.getMeasureField(),f=s.getSeriesField(),g=F(f)?i[f]:void 0,m=F(f)&&(l=(o=(a=(r=s.getViewDataStatistics)===null||r===void 0?void 0:r.call(s))===null||a===void 0?void 0:a.latestData[f])===null||o===void 0?void 0:o.values)!==null&&l!==void 0?l:[],y=Eg(d,i);let b=Eg(p,i);const x=__(b),S=!x&&F(f)&&B(g)&&m.length>0,C=()=>{var w;const A=(w=s.getViewData())===null||w===void 0?void 0:w.latestData.find(Dp(d,y));if(!x&&(b=Eg(p,A),!__(b)))return;const T=s.type===re.pie?s.dataToCentralPosition(A):s.dataToPosition(A);B(T)||isNaN(T.x)||isNaN(T.y)||n.push({pos:T,data:{dimensionFields:d,dimensionData:y,measureFields:p,measureData:b,hasMeasureData:x,groupField:f,groupData:g},series:s})};if(s.coordinate==="cartesian"){const w=s,A=ys((u=(c=s.getYAxisHelper())===null||c===void 0?void 0:c.getScale(0))===null||u===void 0?void 0:u.type)?"y":"x",T=d.map((P,O)=>[P,O]).filter(([,P])=>B(y==null?void 0:y[P]));let E=[y??[]];T.length>0&&T.forEach(([P,O])=>{var M,R,j,I;const D=(I=(j=(R=(M=s.getViewDataStatistics)===null||M===void 0?void 0:M.call(s))===null||R===void 0?void 0:R.latestData[P])===null||j===void 0?void 0:j.values)!==null&&I!==void 0?I:[],z=[];E.forEach($=>{D.forEach(V=>{var L;const Y=(L=$==null?void 0:$.slice())!==null&&L!==void 0?L:[];Y[O]=V,z.push(Y)})}),E=z}),E.forEach(P=>{var O,M;if(S){const R=(O=w.getViewData())===null||O===void 0?void 0:O.latestData.filter(Dp(d,P));m.forEach(j=>{const I=R.find(z=>z[f]===j);if(b=Eg(p,I),!__(b))return;const D=w.dataToPosition(I);B(D)||isNaN(D.x)||isNaN(D.y)||n.push({pos:D,data:{dimensionFields:d,dimensionData:P,measureFields:p,measureData:b,hasMeasureData:x,groupField:f,groupData:j},series:s,dimType:A})})}else{const R=(M=w.getViewData())===null||M===void 0?void 0:M.latestData.find(Dp(d,P));if(!x&&(b=Eg(p,R),!__(b)))return;const j=w.dataToPosition(R);if(B(j)||isNaN(j.x)||isNaN(j.y))return;n.push({pos:j,data:{dimensionFields:d,dimensionData:P,measureFields:p,measureData:b,hasMeasureData:x,groupField:f,groupData:g},dimType:A,series:s})}})}else if(s.coordinate==="polar")if(s.type===re.pie)C();else{const w=s;if(S){const A=((h=w.getViewData())===null||h===void 0?void 0:h.latestData.filter(Dp(d,y))).find(T=>T[f]===g);m.forEach(T=>{if(b=Eg(p,A),!__(b))return;const E=w.dataToPosition(A);B(E)||isNaN(E.x)||isNaN(E.y)||n.push({pos:E,data:{dimensionFields:d,dimensionData:y,measureFields:p,measureData:b,hasMeasureData:x,groupField:f,groupData:T},series:s})})}else C()}else s.coordinate==="geo"&&C()}),n},Kbt=["updateTitle","updateContent","updatePosition","maxLineCount","othersLine"],Xbt=(i,e,t,n,s)=>{var r,a,o;const l={activeType:i};switch(i){case"mark":case"group":if(t){const c=(r=t.getSpec())===null||r===void 0?void 0:r.tooltip;return l.visible=!0,c!=null&&c.handler&&(l.handler=c.handler),!((a=l.handler)===null||a===void 0)&&a.showTooltip?l:(c!=null&&c[i]&&Kbt.forEach(u=>{F(c[i][u])&&(l[u]=c[i][u])}),Object.assign(Object.assign({},l),t.tooltipHelper.getTooltipData(i,e,n,n[0].datum,s)))}break;case"dimension":if(n!=null&&n.length){if(Ybt(n).every(u=>{var h;return!k4("dimension",(h=u.tooltipHelper)===null||h===void 0?void 0:h.spec)})?l.visible=!1:l.visible=!0,l.handler=e.handler,(o=l.handler)===null||o===void 0?void 0:o.showTooltip)return l;const c=[];return n.forEach(u=>u.data.forEach(h=>{const{series:d}=h,p=d.tooltipHelper.getTooltipData(i,e,n,h.datum,s);p&&c.push(p)})),rgt(c)}}return null},Ybt=i=>{const e=[];return i.forEach(t=>{t.data.forEach(n=>{F(n.series)&&e.push(n.series)})}),e},Hy={dom:`${Ie}_TOOLTIP_HANDLER_DOM`,canvas:`${Ie}_TOOLTIP_HANDLER_CANVAS`},qbt="vchart-tooltip-element",Zbt=20,GX={key:"",value:"..."},KX=["group","mark","dimension"],QI=50;class Z4{constructor(e){this._showTooltipByHandler=(t,n)=>{var s,r,a;if(B(t))return 1;n.changePositionOnly||this.clearCache(),this._updateViewSpec(t,n);const o=this._cacheActiveSpec;if(B(o)||o.visible===!1)return 1;n.tooltipSpec=this.component.getSpec(),n.activeTooltipSpec=o;const{title:l,content:c}=o,u=B(l==null?void 0:l.key)&&B(l==null?void 0:l.value)&&!(c!=null&&c.length);if(this.component.event.emit(ke.tooltipShow,Object.assign(Object.assign({},n),{isEmptyTooltip:u,tooltipData:t,activeType:this.activeType,tooltip:this.component})),u)return 1;let h;return!((s=o.handler)===null||s===void 0)&&s.showTooltip?h=o.handler.showTooltip.bind(o.handler):!((r=this.component.tooltipHandler)===null||r===void 0)&&r.showTooltip&&(h=this.component.tooltipHandler.showTooltip.bind(this.component.tooltipHandler)),h?(a=h(this.activeType,t,n))!==null&&a!==void 0?a:0:1},this.component=e}_preprocessDimensionInfo(e){const t=[];if(e==null||e.forEach(n=>{const s=Object.assign(Object.assign({},n),{data:n.data.filter(({series:r})=>{var a,o;return((o=(a=r.getSpec())===null||a===void 0?void 0:a.tooltip)===null||o===void 0?void 0:o.visible)!==!1})});s.data.length>0&&t.push(s)}),t.length>0)return t}_updateViewSpec(e,t){var n,s,r,a,o,l,c,u,h;const{changePositionOnly:d,model:p}=t;if(!d||!this._cacheActiveSpec){const f=this.component.getSpec();if(this._cacheActiveSpec=Xbt(this.activeType,this.component.getSpec(),p,e,t),this._cacheActiveSpec){B(this._cacheActiveSpec.handler)&&F(f.handler)&&(this._cacheActiveSpec.handler=f.handler);const g=(n=f[this.activeType])!==null&&n!==void 0?n:{},m=(s=this._cacheActiveSpec.updateTitle)!==null&&s!==void 0?s:g.updateTitle,y=(r=this._cacheActiveSpec.updateContent)!==null&&r!==void 0?r:g.updateContent,b=(o=(a=this._cacheActiveSpec.maxLineCount)!==null&&a!==void 0?a:g.maxLineCount)!==null&&o!==void 0?o:Zbt;if(m&&(this._cacheActiveSpec.title=(l=m(this._cacheActiveSpec.title,e,t))!==null&&l!==void 0?l:this._cacheActiveSpec.title),y)this._cacheActiveSpec.content=(c=y(this._cacheActiveSpec.content,e,t))!==null&&c!==void 0?c:this._cacheActiveSpec.content;else if(b>=1&&((u=this._cacheActiveSpec.content)===null||u===void 0?void 0:u.length)>b){const x=(h=this._cacheActiveSpec.othersLine)!==null&&h!==void 0?h:g.othersLine,S=x?Object.assign(Object.assign({},GX),x):GX;this._cacheActiveSpec.content=[...this._cacheActiveSpec.content.slice(0,b-1),Object.assign(Object.assign({},this._cacheActiveSpec.content[b-1]),S)]}}}}shouldHandleTooltip(e,t){var n,s;return!B(t)&&k4(this.activeType,(s=(n=e.model)===null||n===void 0?void 0:n.tooltipHelper)===null||s===void 0?void 0:s.spec)}clearCache(){this._cacheActiveSpec=void 0}}class Jbt extends Z4{constructor(){super(...arguments),this.activeType="dimension"}showTooltip(e,t,n){const s=Object.assign(Object.assign({},t),{dimensionInfo:this._preprocessDimensionInfo(e),changePositionOnly:n,tooltip:this.component});return this._showTooltipByHandler(e,s)}_getDimensionInfo(e){var t,n;let s;const r=this.component.getChart(),a=r.getCompiler().getStage().getLayer(void 0),o={x:e.event.viewX,y:e.event.viewY};if(a.globalTransMatrix.transformPoint({x:e.event.viewX,y:e.event.viewY},o),s=[...(t=Jle(r,o,!0))!==null&&t!==void 0?t:[],...(n=Xle(r,o))!==null&&n!==void 0?n:[]],s.length===0)s=void 0;else if(s.length>1){const l=s.filter(c=>{var u;const h=c.axis;if(h.getSpec().hasDimensionTooltip)return!0;if(!ys(h.getScale().type))return!1;let d;for(const p of(u=h==null?void 0:h.getRegions())!==null&&u!==void 0?u:[]){for(const f of p.getSeries())if(f.coordinate==="cartesian"){d=f;break}if(F(d))break}return F(d)&&d.getDimensionField()[0]===d.fieldY[0]?h.getOrient()==="left"||h.getOrient()==="right":h.getOrient()==="bottom"||h.getOrient()==="top"});if(s=l.length?l:s.slice(0,1),s.length>1){const c=new Set;s.forEach(u=>{u.data=u.data.filter(({key:h})=>!c.has(h)&&(c.add(h),!0))})}}return s}getMouseEventData(e){return{tooltipInfo:this._getDimensionInfo(e),ignore:!1}}}class Qbt extends Z4{constructor(){super(...arguments),this.activeType="mark"}showTooltip(e,t,n){var s,r,a;const{datum:o,series:l}=e,c=this.component.getSpec(),u=[{datum:[o],series:l}],h=l.tooltipHelper,d=(s=l.getSpec())===null||s===void 0?void 0:s.tooltip,p=(r=d==null?void 0:d.mark)===null||r===void 0?void 0:r.checkOverlap;let f=!1;if(p===!0||((a=c.mark)===null||a===void 0?void 0:a.checkOverlap)===!0&&p!==!1){const m=h==null?void 0:h.activeTriggerSet.mark;if(m){f=!0;const y=this.component.getChart().getCompiler().getStage().getLayer(void 0),b={x:t.event.viewX,y:t.event.viewY};y.globalTransMatrix.transformPoint({x:t.event.viewX,y:t.event.viewY},b),m.forEach(x=>{x.getProductElements().forEach(S=>{const C=S.getGraphicItem();S!==t.item&&C&&C.containsPoint(b.x,b.y,by.GLOBAL,C.stage.getPickerService())&&u[0].datum.push(S.getDatum())})})}}const g=Object.assign(Object.assign({},t),{changePositionOnly:n,tooltip:this.component});if(n&&f){const m=this._cacheActiveSpec&&this._cacheActiveSpec.data;m&&m[0].series===u[0].series&&m[0].datum.length===u[0].datum.length&&!m[0].datum.some((y,b)=>y!==u[0].datum[b])||(g.changePositionOnly=!1)}return this._showTooltipByHandler(u,g)}getMouseEventData(e){var t;let n,s;if(((t=e.model)===null||t===void 0?void 0:t.modelType)==="series"){const r=e.model,a=r.tooltipHelper,o=a==null?void 0:a.activeTriggerSet.mark,l=a==null?void 0:a.ignoreTriggerSet.mark;o!=null&&o.has(e.mark)?n={mark:e.mark,datum:e.datum,series:r}:l!=null&&l.has(e.mark)&&(s=!0)}return{tooltipInfo:n,ignore:s}}}class e1t extends Z4{constructor(){super(...arguments),this.activeType="group"}showTooltip(e,t,n){const{datum:s,series:r}=e,a=[{datum:q(s),series:r}],o=Object.assign(Object.assign({},t),{groupDatum:this._getGroupDatum(t),changePositionOnly:n,tooltip:this.component});return this._showTooltipByHandler(a,o)}getMouseEventData(e){var t,n;let s;if(((t=e.model)===null||t===void 0?void 0:t.modelType)==="series"){const r=e.model,a=r.tooltipHelper,o=a==null?void 0:a.activeTriggerSet.group;if(o!=null&&o.has(e.mark)){const l=this.component.getSpec()[this.activeType];(l!=null&&l.triggerMark?q(l.triggerMark):[]).includes((n=e.mark)===null||n===void 0?void 0:n.name)&&(s={mark:e.mark,datum:e.datum,series:r})}}return{tooltipInfo:s,ignore:!1}}_getGroupDatum(e){const{model:t,mark:n,datum:s}=e,r=t;if(["line","area"].includes(n.type))return q(s);const a=r.getViewData().latestData,o=r.getSeriesField();if(!o)return a;const l=q(s)[0][o];return a.filter(c=>c[o]===l)}}const XX=i=>F(i)&&!ie(i),YX=i=>F(i)&&ie(i);class dhe extends Kx{_shouldMergeThemeToSpec(){return!1}_initTheme(e,t){var n;const{spec:s,theme:r}=super._initTheme(e,t);return s.style=Pe({},this._theme,s.style),s.offset=Pe({},r.offset,e.offset),s.transitionDuration=(n=e.transitionDuration)!==null&&n!==void 0?n:r.transitionDuration,{spec:s,theme:r}}_transformSpecAfterMergingTheme(e,t,n){var s,r,a,o,l,c,u,h;super._transformSpecAfterMergingTheme(e,t,n),e.visible=(s=e.visible)===null||s===void 0||s,e.activeType=igt(e),e.renderMode=(r=e.renderMode)!==null&&r!==void 0?r:Vd(this._option.mode)||!vl(this._option.mode)?"canvas":"html",e.trigger=(a=e.trigger)!==null&&a!==void 0?a:"hover",e.className=(o=e.className)!==null&&o!==void 0?o:qbt,e.enterable=(l=e.enterable)!==null&&l!==void 0&&l,e.transitionDuration=(c=e.transitionDuration)!==null&&c!==void 0?c:150,e.triggerOff=(u=e.triggerOff)!==null&&u!==void 0?u:e.trigger,e.confine=(h=e.confine)!==null&&h!==void 0?h:e.renderMode==="canvas",F(e.parentElement)?be(e.parentElement)&&(e.parentElement=st.getElementById(e.parentElement)):vl(this._option.mode)&&(e.parentElement=Ih==null?void 0:Ih.body)}}class Jv extends Pr{constructor(){super(...arguments),this.layoutZIndex=1,this.type=oe.tooltip,this.name=oe.tooltip,this.transformerConstructor=dhe,this.specKey="tooltip",this.layoutType="none",this._alwaysShow=!1,this._eventList=[],this._isTooltipShown=!1,this._clickLock=!1,this._mountEvent=(e,t,n)=>{this.event.on(e,t,n),this._eventList.push({eventType:e,handler:n})},this._handleClickToLock=e=>{this._clickLock?(this._handleChartMouseOut(e),this._clickLock=!1):this._clickLock=!0},this._getMouseOutHandler=e=>t=>{var n,s,r,a;if(this._alwaysShow||this._clickLock||!this._isTooltipShown&&!(!((s=(n=this.tooltipHandler)===null||n===void 0?void 0:n.isTooltipShown)===null||s===void 0)&&s.call(n)))return;const o=vl((r=this._option)===null||r===void 0?void 0:r.mode),{clientX:l,clientY:c}=t.event;o&&e&&this._isPointerInChart({x:l,y:c})||(this._enterable?this._outTimer=setTimeout(()=>{this._handleChartMouseOut(t)},(a=this._spec.showDelay)!==null&&a!==void 0?a:QI):this._handleChartMouseOut(t))},this._handleChartMouseOut=e=>{this._alwaysShow||this._spec.triggerOff!=="none"&&(this._hideTooltipByHandler(Object.assign(Object.assign({},e),{tooltip:this})),this._handleMouseMove&&this._handleMouseMove.cancel&&this._handleMouseMove.cancel(),this._cacheEnterableRect=null,this._cacheInfo=void 0,this._cacheParams=void 0,this._cacheActiveType=void 0)},this._getMouseMoveHandler=e=>t=>{var n,s,r;this._outTimer&&(clearTimeout(this._outTimer),this._outTimer=null),this.tooltipHandler||this._initHandler(),this.processor||this._initProcessor(),this._alwaysShow||(this._clickLock?e&&(this._handleChartMouseOut(t),this._clickLock=!1):!e&&this._enterable&&(!((s=(n=this.tooltipHandler)===null||n===void 0?void 0:n.isTooltipShown)===null||s===void 0)&&s.call(n))?(this._showTimer&&clearTimeout(this._showTimer),this._showTimer=setTimeout(()=>{this._handleChartMouseMove(t,e)},(r=this._spec.showDelay)!==null&&r!==void 0?r:QI)):this._handleChartMouseMove(t,e))},this._handleChartMouseMove=(e,t)=>{const n=this._getMouseEventData(e),{tooltipInfo:{dimension:s},ignore:{mark:r}}=n,a={mark:!1,dimension:!1,group:!1};for(let o=0,l=KX.length;o<l;o++){const c=KX[o];if(this.processor[c]&&this._showTooltipByMouseEvent(c,n,e,t)){a[c]=!0;break}}Object.values(a).every(o=>!o)&&!ngt(e)&&(r&&XX(this._cacheInfo)?a.mark=this._showTooltipByMouseEvent("mark",n,e,t,!0):F(s)&&(a.dimension=this._showTooltipByMouseEvent("dimension",n,e,t))),a.mark||a.group||a.dimension&&!B(s)?this._initEventOfTooltipContent():this._handleChartMouseOut(e)},this._showTooltipByMouseEvent=(e,t,n,s,r)=>{var a;const o=this.processor[e];if(!o.shouldHandleTooltip(n,t.tooltipInfo[e]))return!1;let l;if(this._hideTimer&&clearTimeout(this._hideTimer),r)l=!o.showTooltip(this._cacheInfo,n,!0);else{const u=t.tooltipInfo[e],h=this._isSameAsCache(u,n,e);l=!o.showTooltip(u,n,h),l&&(this._cacheInfo=u,this._cacheParams=n,this._cacheActiveType=e)}l&&(this._isTooltipShown=!0,s&&this._spec.lockAfterClick&&!this._clickLock?this._clickLock=!0:Number.isFinite(this._spec.hideTimer)&&(this._hideTimer=setTimeout(()=>{this._handleChartMouseOut()},this._spec.hideTimer)));const c=(a=this._option)===null||a===void 0?void 0:a.globalInstance;return l&&_a.globalConfig.uniqueTooltip&&c&&_a.hideTooltip(c.id),l},this._getMouseEventData=e=>{const t={tooltipInfo:{},ignore:{}};return Object.keys(this.processor).forEach(n=>{const{tooltipInfo:s,ignore:r}=this.processor[n].getMouseEventData(e);t.tooltipInfo[n]=s,t.ignore[n]=r}),t},this._hideTooltipByHandler=e=>{var t,n,s;if(!this._isTooltipShown&&!(!((n=(t=this.tooltipHandler)===null||t===void 0?void 0:t.isTooltipShown)===null||n===void 0)&&n.call(t)))return 0;this.event.emit(ke.tooltipHide,Object.assign(Object.assign({},e),{source:wt.chart,tooltip:this})),Object.values(this.processor).forEach(a=>{a.clearCache()});const r=(s=this._spec.handler)!==null&&s!==void 0?s:this.tooltipHandler;if(r.hideTooltip){const a=r.hideTooltip.call(r,e);return a||(this._isTooltipShown=!1),a}return 1},this.hideTooltip=()=>{const e={changePositionOnly:!1,tooltip:this,item:void 0,datum:void 0,source:wt.chart};return this._alwaysShow=!1,!this._hideTooltipByHandler(e)}}isTooltipShown(){return this._isTooltipShown}changeRegions(e){}_getNeedClearVRenderComponents(){return[]}_registerEvent(){}_releaseEvent(){}onLayout(e){}onLayoutEnd(e){}onRender(e){}created(){super.created(),this._regions=this._option.getAllRegions(),this._initEvent()}release(){var e,t;super.release(),this._hideTimer&&clearTimeout(this._hideTimer),this._eventList.forEach(({eventType:n,handler:s})=>{this.event.off(n,s)}),this._eventList=[],(t=(e=this.tooltipHandler)===null||e===void 0?void 0:e.release)===null||t===void 0||t.call(e),this._isTooltipShown=!1}beforeRelease(){this.event.emit(ke.tooltipHide,{tooltip:this,chart:this.getChart()}),this.event.emit(ke.tooltipRelease,{tooltip:this,chart:this.getChart()})}_initHandler(){var e,t,n;const s=(e=this._spec.renderMode)!==null&&e!==void 0?e:"html",r=this._option.globalInstance.getTooltipHandlerByUser();if(r)this.tooltipHandler=r,this._enterable=!1;else{const a=s==="canvas"?Hy.canvas:Hy.dom,o=X.getComponentPluginInType(a);o||t1("Can not find tooltip handler: "+a);const l=new o;l.name=`${this._spec.className}-${(t=this._option.globalInstance.id)!==null&&t!==void 0?t:0}-${this.getSpecIndex()}`,(n=this.pluginService)===null||n===void 0||n.load([l]),this.tooltipHandler=l,this._spec.enterable&&s==="html"&&this.tooltipHandler?(this._enterable=!0,this._needInitEventOfTooltip=!0):this._enterable=!1}}_initEventOfTooltipContent(){var e,t;if(!this._needInitEventOfTooltip||!this._enterable)return;const n=(t=(e=this.tooltipHandler).getTooltipContainer)===null||t===void 0?void 0:t.call(e),s=n==null?void 0:n.firstChild;s&&(s.addEventListener("pointerenter",()=>{var r;const a=(r=s.getBoundingClientRect)===null||r===void 0?void 0:r.call(s);a&&(this._cacheEnterableRect={x:a.x,y:a.y,width:a.width,height:a.height}),this._outTimer&&(clearTimeout(this._outTimer),this._outTimer=null),this._showTimer&&(clearTimeout(this._showTimer),this._showTimer=null)}),s.addEventListener("pointerleave",()=>{var r,a;if(this._cacheEnterableRect){const o=(r=s.getBoundingClientRect)===null||r===void 0?void 0:r.call(s);o&&Object.keys(this._cacheEnterableRect).every(l=>this._cacheEnterableRect[l]===o[l])&&(this._cacheEnterableRect=null,this._outTimer=setTimeout(this.hideTooltip,(a=this._spec.showDelay)!==null&&a!==void 0?a:QI))}}),this._needInitEventOfTooltip=!1)}_initProcessor(){const e=this._spec.activeType;this.processor={},e.includes("dimension")&&(this.processor.dimension=new Jbt(this)),e.includes("group")&&(this.processor.group=new e1t(this)),e.includes("mark")&&(this.processor.mark=new Qbt(this))}_initEvent(){var e;if(this._option.disableTriggerEvent)return;const t=q((e=this._spec.trigger)!==null&&e!==void 0?e:"hover"),n=this._option.mode;t.includes("hover")&&(this._handleMouseMove=this._throttle(this._getMouseMoveHandler(!1)),this._mountEvent("pointermove",{source:"chart"},this._handleMouseMove),(Pd(n)||Vd(n))&&(this._mountEvent("pointerdown",{source:"chart"},this._getMouseMoveHandler(!1)),this._mountEvent("pointerup",{source:"window"},this._getMouseOutHandler(!0))),this._mountEvent("pointerleave",{source:"chart"},this._getMouseOutHandler(!1))),t.includes("click")?(this._mountEvent("pointertap",{source:"chart"},this._getMouseMoveHandler(!0)),this._mountEvent("pointerup",{source:"window"},this._getMouseOutHandler(!0))):this._spec.lockAfterClick&&this._mountEvent("pointertap",{source:"chart"},this._handleClickToLock)}_throttle(e){let t;return t=ye(this._spec.throttleInterval)?this._spec.throttleInterval:this._spec.renderMode==="html"&&this._spec.transitionDuration?50:10,Hu(e,t)}reInit(e){var t,n;super.reInit(e),this.tooltipHandler?(n=(t=this.tooltipHandler).reInit)===null||n===void 0||n.call(t):this._initHandler()}showTooltip(e,t){var n;if(this.tooltipHandler||this._initHandler(),this.processor||this._initProcessor(),!(!((n=this.tooltipHandler)===null||n===void 0)&&n.showTooltip))return!1;const s=Wbt(e,t,this);return s!=="none"&&(this._alwaysShow=!!(t!=null&&t.alwaysShow)),s}_isSameAsCache(e,t,n){if(n!==this._cacheActiveType)return!1;if(e===this._cacheInfo)return!0;if(B(this._cacheInfo)||B(e))return!1;if(YX(e)){if(XX(this._cacheInfo))return!1;const r=this._cacheInfo;if(!(r.length===e.length&&e.every((a,o)=>Kle(a,r[o]))))return!1}else{if(YX(this._cacheInfo))return!1;const r=this._cacheInfo;if(!((e==null?void 0:e.datum)===r.datum&&(e==null?void 0:e.mark)===r.mark&&(e==null?void 0:e.series)===r.series))return!1}const s=this._cacheParams;return!B(s)&&!B(t)&&s.mark===t.mark&&s.model===t.model&&s.datum===t.datum}_isPointerInChart(e){var t;const n=(t=this._option)===null||t===void 0?void 0:t.globalInstance;if(!n||!n.getChart())return!1;const{x:s,y:r}=e,a=n.getCanvas(),{x:o,y:l,width:c,height:u}=a.getBoundingClientRect();return s>=o&&s<=o+c&&r>=l&&r<=l+u}getVisible(){return this._spec.visible!==!1}}Jv.type=oe.tooltip,Jv.transformerConstructor=dhe,Jv.specKey="tooltip";const t1t=()=>{X.registerComponent(Jv.type,Jv)};function i1t(i){return i===Sn["desktop-browser"]||i===Sn["desktop-miniApp"]?{click:"pointertap",hover:"pointermove",hoverOut:"pointerleave",clickOut:"pointerleave"}:Pd(i)||Vd(i)?{click:"tap",hover:["pointerdown","pointermove"],hoverOut:"pointerleave",clickOut:"pointerleave"}:null}var qX;(function(i){i[i.ALL=3]="ALL",i[i.HORIZONTAL=2]="HORIZONTAL",i[i.VERTICAL=1]="VERTICAL"})(qX||(qX={}));var ZX=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};const n1t={x:["top","bottom"],y:["left","right"],category:["angle"],value:["radius"]};class J4 extends Pr{get enableRemain(){return this.triggerOff==="none"}constructor(e,t){super(e,t),this.specKey="crosshair",this.layoutType="none",this.gridZIndex=Xt.CrossHair_Grid,this.labelZIndex=Xt.CrossHair,this.trigger="hover",this._handleIn=n=>{if(!this._option)return;const{x:s,y:r}=this.calculateTriggerPoint(n);this.showDefault=!1,this._layoutCrosshair(s,r);const a=this._getNeedClearVRenderComponents();this._hasActive=a.some(o=>o&&o.attribute.visible!==!1)},this._handleClickInEvent=n=>{if(!this._hasActive||!this._spec.lockAfterClick||this._clickLock)return this._clickLock?(this._clickLock=!1,void this._handleOutEvent()):void(this._onlyLockClick||(this._handleIn(n),ye(this.triggerOff)&&(this._timer&&clearTimeout(this._timer),this._timer=setTimeout(()=>{this._handleOutEvent()},this.triggerOff))));this._clickLock=!0},this._handleHoverInEvent=Hu(n=>{this._clickLock||this._handleIn(n)},10),this._handleOutEvent=()=>{this.enableRemain||this._clickLock||!this._hasActive||(this.clearOutEvent(),this.hide())},this._handleTooltipShow=n=>{const s=n.tooltipData;if(n.isEmptyTooltip||!s||!s.length)return void this._handleTooltipHideOrRelease();if(Ke(this._spec.followTooltip)&&this._spec.followTooltip[n.activeType]===!1)return void this._handleTooltipHideOrRelease();const{x:r,y:a}=this.calculateTriggerPoint(n);this.showDefault=!1,this._layoutCrosshair(r,a,s,n.activeType);const o=this._getNeedClearVRenderComponents();this._hasActive=o.some(l=>l&&l.attribute.visible!==!1)},this._handleTooltipHideOrRelease=()=>{this.clearOutEvent(),this.hide()},this.enable=!0,this.showDefault=!0}_getLimitBounds(){var e,t;if(!this._limitBounds){const{width:n,height:s}=(t=(e=this._option.globalInstance.getChart())===null||e===void 0?void 0:e.getViewRect())!==null&&t!==void 0?t:{width:0,height:0};this._limitBounds={x1:0,y1:0,x2:n,y2:s}}return this._limitBounds}_showDefaultCrosshair(){this.showDefault&&this._showDefaultCrosshairBySpec()}setAttrFromSpec(){super.setAttrFromSpec(),this._parseCrosshairSpec()}created(){super.created(),this._initEvent()}_compareSpec(e,t){const n=super._compareSpec(e,t);return n.reMake||Pt(t,e)||(n.reRender=!0,n.reMake=!0),n}_initEvent(){if(!this._option.disableTriggerEvent)if(this._spec.followTooltip)this._registerTooltipEvent();else{const e=this._getTriggerEvent();e&&e.forEach(t=>{this._registerEvent(t.in,!1,t.click),t.out&&this._registerEvent(t.out,!0)})}}_registerEvent(e,t,n){const s=t?this._handleOutEvent:n?this._handleClickInEvent:this._handleHoverInEvent,r=t?{level:pi.chart}:{source:wt.chart};ie(e)?e.forEach(a=>{this.event.on(a,r,s)}):this.event.on(e,r,s)}_eventOff(e,t,n){const s=t?this._handleOutEvent:n?this._handleClickInEvent:this._handleHoverInEvent;ie(e)?e.forEach(r=>{this.event.off(r,s)}):this.event.off(e,s)}updateLayoutAttribute(){this._limitBounds=null,this._showDefaultCrosshair()}calculateTriggerPoint(e){const{event:t}=e,n=this._option.getCompiler().getStage().getLayer(void 0),s={x:t.viewX,y:t.viewY};return n.globalTransMatrix.transformPoint({x:t.viewX,y:t.viewY},s),{x:s.x-this.getLayoutStartPoint().x,y:s.y-this.getLayoutStartPoint().y}}_getTriggerEvent(){const{mode:e=Sn["desktop-browser"]}=this._option,t=i1t(e);if(t){const n=q(this.trigger||"hover"),s=a=>a==="click"?this.triggerOff==="none"?null:t.clickOut:t.hoverOut;this._spec.lockAfterClick&&!n.includes("click")?(n.push("click"),this._onlyLockClick=!0):this._onlyLockClick=!1;const r=[];return n.forEach(a=>{r.push({click:a==="click",in:t[a],out:s(a)})}),r}return null}_registerTooltipEvent(){this.event.on(ke.tooltipHide,{source:wt.chart},this._handleTooltipHideOrRelease),this.event.on(ke.tooltipShow,{source:wt.chart},this._handleTooltipShow),this.event.on(ke.tooltipRelease,{source:wt.chart},this._handleTooltipHideOrRelease)}_getAxisInfoByField(e){var t,n;const s=(n=(t=this._option).getComponentsByKey)===null||n===void 0?void 0:n.call(t,"axes");if(!(s!=null&&s.length))return null;let r=et(this._spec,`${e}Field.bindingAxesIndex`);if(r||(r=[],s.forEach((p,f)=>{n1t[e].includes(p.getOrient())&&r.push(f)})),!r.length)return null;const a=new Map;let o=1/0,l=1/0,c=-1/0,u=-1/0;const{x:h,y:d}=this.getLayoutStartPoint();return r.forEach(p=>{o=1/0,l=1/0,c=-1/0,u=-1/0;const f=s.find(g=>g.getSpecIndex()===p);f&&(f.getRegions().forEach(g=>{const{x:m,y}=g.getLayoutStartPoint();o=Math.min(o,m-h),l=Math.min(l,y-d),c=Math.max(c,m+g.getLayoutRect().width-h),u=Math.max(u,y+g.getLayoutRect().height-d)}),a.set(p,{x1:o,y1:l,x2:c,y2:u,axis:f}))}),a}changeRegions(e){}onLayoutEnd(e){const t=this._regions[0];this.setLayoutRect(t.getLayoutRect()),this.setLayoutStartPosition(t.getLayoutStartPoint()),super.onLayoutEnd(e)}onRender(e){}_releaseEvent(){this.clearOutEvent();const e=this._getTriggerEvent();e&&e.forEach(t=>{this._eventOff(t.in,!1,t.click),t.out&&this._eventOff(t.out,!0)})}_parseCrosshairSpec(){this._parseFieldInfo();const{trigger:e,triggerOff:t,labelZIndex:n,gridZIndex:s}=this._spec;e&&(this.trigger=e),(t==="none"||ye(t)&&t>0)&&(this.triggerOff=t),n!==void 0&&(this.labelZIndex=n),s!==void 0&&(this.gridZIndex=s)}_parseField(e,t){var n,s,r;const a={},{line:o={},label:l={},visible:c}=e;if(a.visible=c,a.type=o.type||"line",o.visible===!1)a.style={visible:!1};else{const u=o.style||{},{stroke:h,fill:d,lineWidth:p}=u,f=u,{strokeOpacity:g,fillOpacity:m,opacity:y}=f,b=ZX(f,["strokeOpacity","fillOpacity","opacity"]),x=a.type==="line";let S=x?g:m;if(ye(y)&&(S=(S??1)*y),a.style=Object.assign({opacity:S,pickable:!1,visible:!0},b),x)a.style.stroke=h||d,a.style.lineWidth=et(o,"width",p||2);else{a.style.fill=d||h,!((r=(s=(n=this._spec[t])===null||n===void 0?void 0:n.line)===null||s===void 0?void 0:s.style)===null||r===void 0)&&r.stroke&&(a.style.stroke=this._spec[t].line.style.stroke);const C=et(o,"width");if(typeof C=="string"){const w=parseInt(C.substring(0,C.length-1),10)/100;a.style.sizePercent=w}else typeof C!="number"&&typeof C!="function"||(a.style.size=C)}}if(l.visible){const u=l.labelBackground||{},h=l.style||{},d=u.style||{},{fill:p="rgba(47, 59, 82, 0.9)",stroke:f,outerBorder:g}=d,m=ZX(d,["fill","stroke","outerBorder"]);a.label={visible:!0,formatMethod:l.formatMethod,formatter:l.formatter,minWidth:u.minWidth,maxWidth:u.maxWidth,padding:u.padding,textStyle:Object.assign(Object.assign({fontSize:14,pickable:!1},h),{fill:h.fill||"#fff",stroke:et(h,"stroke")}),panel:(Ui(u.visible)?u.visible:u)?Object.assign({visible:!0,pickable:!1,fill:p,stroke:f,outerBorder:Object.assign({stroke:p,distance:0,lineWidth:3},g)},m):{visible:!1},zIndex:this.labelZIndex,childrenPickable:!1,pickable:!1}}else a.label={visible:!1};return a}_filterAxisByPoint(e,t,n){return e&&e.forEach(s=>{const r=s.axis;if(ilt(s,t,n)&&e.delete(r.getSpecIndex()),r.type.startsWith("polarAxis")){const a=r.getCenter(),o=r.getInnerRadius(),l=r.getOuterRadius(),c=kn.distancePP({x:t,y:n},a);(c>l||c<o)&&e.delete(r.getSpecIndex())}}),e}clearOutEvent(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._clickLock&&(this._clickLock=null),this._hasActive&&(this._hasActive=null)}}J4.specKey="crosshair";const phe=(i=3,e,t,n,s,r,a,o=!1,l,c)=>{const u=1&i,h=2&i;t||(t={x:0,y:0});let d=null,p=null,f=0,g=0;if(n.size){const P=Array.from(n.values())[0];f=P.axis.getScale().scale(P.value)+P.axis.getLayoutStartPoint().x-t.x,d=P.axis}if(s.size){const P=Array.from(s.values())[0];g=P.axis.getScale().scale(P.value)+P.axis.getLayoutStartPoint().y-t.y,p=P.axis}const m=!!n.size&&Number.isFinite(f),y=!!s.size&&Number.isFinite(g),b=o&&!m&&F(l),x=o&&!y&&F(c);let S,C,w;u&&(S=b?l:{height:0,leftPos:0,rightPos:0,topPos:0,x:0,bottom:{visible:!1,text:"",dx:0,dy:0},top:{visible:!1,text:"",dx:0,dy:0},visible:m,axis:d}),h&&(C=x?c:{width:0,leftPos:0,topPos:0,bottomPos:0,y:0,left:{visible:!1,text:"",dx:0,dy:0},right:{visible:!1,text:"",dx:0,dy:0},visible:y,axis:p});let A,T=0,E=0;if(r&&n.forEach(({axis:P,value:O})=>{var M;O=O??"";let R=null;const j=P.getScale();if(ys(j.type))w=j.bandwidth(),w===0&&j.step&&(T=j.step());else if($t(j.type)){const I=e.fieldX[0],D=e.fieldX2,z=JK(e.getViewData().latestData,+O,I,D);if(z){const $=e.dataToPositionX(z);D?(w=Math.abs($-e.dataToPositionX1(z)),O=`${z[I]} ~ ${z[D]}`):w=1,f=$}R=P.niceLabelFormatter}if(S&&(!((M=r.label)===null||M===void 0)&&M.visible)&&!b){const I=_1(P.getSpec());P.getOrient()==="bottom"?(S.bottom.visible=!0,S.bottom.defaultFormatter=R,S.bottom.text=O,S.bottom.dx=0,S.bottom.dy=I):P.getOrient()==="top"&&(S.top.visible=!0,S.top.defaultFormatter=R,S.top.text=O,S.top.dx=0,S.top.dy=-I)}}),a&&s.forEach(({axis:P,value:O})=>{var M;O=O??"";let R=null;const j=P.getScale();if(ys(j.type))A=j.bandwidth(),A===0&&j.step&&(E=j.step());else if($t(j.type)){const I=e.fieldY[0],D=e.fieldY2,z=JK(e.getViewData().latestData,+O,I,D);if(z){const $=e.dataToPositionY(z);D?(A=Math.abs($-e.dataToPositionY1(z)),O=`${z[I]} ~ ${z[D]}`):A=1,g=$}R=P.niceLabelFormatter}if(C&&(!((M=a.label)===null||M===void 0)&&M.visible)&&!x){const I=_1(P.getSpec());P.getOrient()==="left"?(C.left.visible=!0,C.left.defaultFormatter=R,C.left.text=O,C.left.dx=-I,C.left.dy=0):P.getOrient()==="right"&&(C.right.visible=!0,C.right.defaultFormatter=R,C.right.text=O,C.right.dx=I,C.right.dy=0)}}),S&&!b){const P={x1:1/0,y1:1/0,x2:-1/0,y2:-1/0};if(JX(P,n),S.leftPos=P.x1,S.rightPos=P.x2,S.topPos=P.y1,S.height=P.y2-P.y1,S.x=f+t.x,r&&r.label){const{top:O,bottom:M}=S;O.visible&&AC(O,"top",r.label),M.visible&&AC(M,"bottom",r.label)}}if(C&&!x){const P={x1:1/0,y1:1/0,x2:-1/0,y2:-1/0};if(JX(P,s),C.leftPos=P.x1,C.topPos=P.y1,C.bottomPos=P.y2,C.width=P.x2-P.x1,C.y=g+t.y,a&&a.label){const{left:O,right:M}=C;O.visible&&AC(O,"left",a.label),M.visible&&AC(M,"right",a.label)}}return{x:u&&S?S:void 0,y:h&&C?C:void 0,offsetWidth:T,offsetHeight:E,bandWidth:w??0,bandHeight:A??0}},AC=(i,e,t)=>{const{formatMethod:n,formatter:s}=t,{formatFunc:r,args:a}=Pc(n,s,i.text,{label:i.text,position:e});r?i.text=r(...a):i.defaultFormatter&&(i.text=i.defaultFormatter(i.text))},JX=(i,e)=>{e.forEach(({axis:t})=>{t.getRegions().forEach(n=>{i.x1=Math.min(i.x1,n.getLayoutStartPoint().x),i.y1=Math.min(i.y1,n.getLayoutStartPoint().y),i.x2=Math.max(i.x2,n.getLayoutStartPoint().x+n.getLayoutRect().width),i.y2=Math.max(i.y2,n.getLayoutStartPoint().y+n.getLayoutRect().height)})})},fhe=(i,e,t,n)=>{const{x:s,topPos:r,height:a}=e,o=i.type;let l;if(o==="line")l={visible:!0,start:{x:s+t/2,y:r},end:{x:s+t/2,y:r+a}};else if(o==="rect"){const c=mhe(i,t,e.axis),{leftPos:u,rightPos:h}=e;l={visible:!0,start:{x:Math.max(s-c/2-n/2,u),y:r},end:{x:Math.min(s+t+c/2+n/2,h),y:r+a}}}return l},ghe=(i,e,t,n)=>{const{leftPos:s,width:r,y:a}=e,o=i.type;let l;if(o==="line")l={visible:!0,start:{x:s,y:a+t/2},end:{x:s+r,y:a+t/2}};else if(o==="rect"){const c=mhe(i,t,e.axis),{topPos:u,bottomPos:h}=e;l={visible:!0,start:{x:s,y:Math.max(a-c/2-n/2,u)},end:{x:s+r,y:Math.min(a+t+c/2+n/2,h)}}}return l},mhe=(i,e,t)=>{var n,s,r;let a=0;if(!((n=i.style)===null||n===void 0)&&n.sizePercent)a=(i.style.sizePercent-1)*e;else if(typeof((s=i.style)===null||s===void 0?void 0:s.size)=="number")a=i.style.size-e;else if(typeof((r=i.style)===null||r===void 0?void 0:r.size)=="function"){const o=t.getLayoutRect();a=i.style.size(o,t)-e}return a};class FT extends J4{static getSpecInfo(e){return Pl(e,this.specKey,this.type,t=>t.xField&&t.xField.visible!==!1||t.yField&&t.yField.visible!==!1)}constructor(e,t){super(e,t),this.type=oe.cartesianCrosshair,this.name=oe.cartesianCrosshair,this._currValueX=new Map,this._currValueY=new Map}_showDefaultCrosshairBySpec(){const{xField:e,yField:t}=this._spec;if(e!=null&&e.visible&&e.defaultSelect){const{axisIndex:n,datum:s}=e.defaultSelect;this._defaultCrosshair(n,s,1)}if(t!=null&&t.visible&&t.defaultSelect){const{axisIndex:n,datum:s}=t.defaultSelect;this._defaultCrosshair(n,s,2)}}_defaultCrosshair(e,t,n){const s=this._option.getComponentsByKey("axes").find(r=>r.getSpecIndex()===e);s&&(n===1?(this._currValueX.clear(),this._currValueX.set(e,{axis:s,value:t})):(this._currValueY.clear(),this._currValueY.set(e,{axis:s,value:t})),this.layoutByValue(n))}_findAllAxisContains(e,t){const n=this._getAxisInfoByField("x"),s=this._getAxisInfoByField("y");return{xAxisMap:this._filterAxisByPoint(n,e,t),yAxisMap:this._filterAxisByPoint(s,e,t)}}_getValueAt(e,t){return e.getScale().invert(t)}clearAxisValue(){this._currValueX.clear(),this._currValueY.clear()}setAxisValue(e,t){Ti(t.getOrient())?this._currValueX.set(t.getSpecIndex(),{value:e,axis:t}):this._currValueY.set(t.getSpecIndex(),{value:e,axis:t})}_getAllAxisValues(e,t,n,s){let r=!1;return e.forEach(a=>{ys(a.axis.getScale().type)&&(r?this.enable=!1:r=!0)}),!!this.enable&&(e.forEach((a,o)=>{const l=a.axis;n.set(o,{value:this._getValueAt(l,t-(s?l.getLayoutStartPoint().x-this.getLayoutStartPoint().x:l.getLayoutStartPoint().y-this.getLayoutStartPoint().y)),axis:l})}),!0)}_layoutCrosshair(e,t,n,s){var r;let a=e,o=t;if(n&&n.length){if(s==="dimension"){const u=n[0],h=u.data.findIndex(p=>p.datum.length>0);let d;if(h>-1){const p=u.data[h];d=p.series.dataToPosition(p.datum[0])}(F(u.dimType)?u.dimType==="y":tc((r=u==null?void 0:u.axis)===null||r===void 0?void 0:r.getOrient()))?o=d==null?void 0:d.y:a=d==null?void 0:d.x}else if(s==="mark"){const u=n[0],h=u.series.dataToPosition(u.datum[0]);a=h==null?void 0:h.x,o=h==null?void 0:h.y}}const{xAxisMap:l,yAxisMap:c}=this._findAllAxisContains(a,o);if(l&&l.size===0||c&&c.size===0){if(this.enableRemain)return;this.hide()}else this._currValueX.clear(),this._currValueY.clear(),l&&l.size&&this._getAllAxisValues(l,a,this._currValueX,!0),c&&c.size&&this._getAllAxisValues(c,o,this._currValueY,!1),this.layoutByValue(3)}hide(){this._xCrosshair&&this._xCrosshair.hideAll(),this._xTopLabel&&this._xTopLabel.hideAll(),this._xBottomLabel&&this._xBottomLabel.hideAll(),this._yCrosshair&&this._yCrosshair.hideAll(),this._yLeftLabel&&this._yLeftLabel.hideAll(),this._yRightLabel&&this._yRightLabel.hideAll()}layoutByValue(e=3){if(!this.enable)return;const t=n4(this._regions,"cartesian");if(!t)return;const{x:n,y:s,offsetWidth:r,offsetHeight:a,bandWidth:o,bandHeight:l}=phe(e,t,this.getLayoutStartPoint(),this._currValueX,this._currValueY,this._xHair,this._yHair,this.enableRemain,this._cacheXCrossHairInfo,this._cacheYCrossHairInfo);this.enableRemain&&(n&&(this._cacheXCrossHairInfo=Object.assign(Object.assign({},n),{_isCache:!0})),s&&(this._cacheYCrossHairInfo=Object.assign(Object.assign({},s),{_isCache:!0}))),n&&this._layoutVertical(n,o,r),s&&this._layoutHorizontal(s,l,a)}_layoutVertical(e,t,n){var s,r;if(e._isCache&&this.enableRemain||!this._xHair)return;const{x:a,topPos:o,height:l,top:c,bottom:u,visible:h}=e;if(h){const d=this._xHair.type,p=fhe(this._xHair,e,t,n);if(this._updateCrosshair("x",d,p),c.visible){const f=Object.assign(Object.assign(Object.assign({x:a+t/2,y:o},c),this._xHair.label),{textStyle:Object.assign(Object.assign({},(s=this._xHair.label)===null||s===void 0?void 0:s.textStyle),{textAlign:"center",textBaseline:"bottom"}),zIndex:this.labelZIndex,visible:!0});this._updateCrosshairLabel(this._xTopLabel,f,g=>{g.name="crosshair-x-top-label",this._xTopLabel=g})}else this._xTopLabel&&this._xTopLabel.hideAll();if(u.visible){const f=Object.assign(Object.assign(Object.assign({x:a+t/2,y:o+l},u),this._xHair.label),{textStyle:Object.assign(Object.assign({},(r=this._xHair.label)===null||r===void 0?void 0:r.textStyle),{textAlign:"center",textBaseline:"top"}),zIndex:this.labelZIndex,visible:!0});this._updateCrosshairLabel(this._xBottomLabel,f,g=>{g.name="crosshair-x-bottom-label",this._xBottomLabel=g})}else this._xBottomLabel&&this._xBottomLabel.hideAll()}}_layoutHorizontal(e,t,n){var s,r;if(e._isCache&&this.enableRemain||!this._yHair)return;const{leftPos:a,width:o,y:l,left:c,right:u,visible:h}=e;if(h){const d=this._yHair.type,p=ghe(this._yHair,e,t,n);if(this._updateCrosshair("y",d,p),c.visible){const f=Object.assign(Object.assign(Object.assign({x:a,y:l+t/2},c),this._yHair.label),{textStyle:Object.assign(Object.assign({},(s=this._yHair.label)===null||s===void 0?void 0:s.textStyle),{textAlign:"right",textBaseline:"middle"}),zIndex:this.labelZIndex});this._updateCrosshairLabel(this._yLeftLabel,f,g=>{g.name="crosshair-y-left-label",this._yLeftLabel=g})}else this._yLeftLabel&&this._yLeftLabel.hideAll();if(u.visible){const f=Object.assign(Object.assign(Object.assign({x:a+o,y:l+t},u),this._yHair.label),{textStyle:Object.assign(Object.assign({},(r=this._yHair.label)===null||r===void 0?void 0:r.textStyle),{textAlign:"left",textBaseline:"middle"}),zIndex:this.labelZIndex});this._updateCrosshairLabel(this._yRightLabel,f,g=>{g.name="crosshair-y-right-label",this._yRightLabel=g})}else this._yRightLabel&&this._yRightLabel.hideAll()}}_parseFieldInfo(){const{xField:e,yField:t}=this._spec;this._parseAndSetCrosshair(e,"x"),this._parseAndSetCrosshair(t,"y")}_parseAndSetCrosshair(e,t){const n=`_${t}Hair`,s=`_${t}Crosshair`;if(e&&e.visible){if(this[n]=this._parseField(e,`${t}Field`),this[s]){const{style:r,type:a}=this[n],o=a==="rect"?"rectStyle":"lineStyle";this[s].setAttributes({[o]:r})}}else this[s]&&this[s].parent&&this[s].parent.removeChild(this[s])}_updateCrosshair(e,t,n){const s=this.getContainer();let r;if(r=e==="x"?this._xCrosshair:this._yCrosshair,r)r.setAttributes(n);else{const a=e==="x"?this._xHair.style:this._yHair.style;t==="line"?r=new Bx(Object.assign(Object.assign({},n),{lineStyle:a,zIndex:this.gridZIndex+1,disableTriggerEvent:this._option.disableTriggerEvent,pickable:!1})):t==="rect"&&(r=new eO(Object.assign(Object.assign({},n),{rectStyle:a,zIndex:this.gridZIndex,disableTriggerEvent:this._option.disableTriggerEvent,pickable:!1}))),s==null||s.add(r),e==="x"?this._xCrosshair=r:this._yCrosshair=r}}_updateCrosshairLabel(e,t,n){const s=this.getContainer();e?e.setAttributes(t):(n(e=new Oa(t)),s==null||s.add(e)),kce(e,this._getLimitBounds())}_getNeedClearVRenderComponents(){return[this._xCrosshair,this._xTopLabel,this._xBottomLabel,this._yCrosshair,this._yLeftLabel,this._yRightLabel]}}FT.specKey="crosshair",FT.type=oe.cartesianCrosshair;const s1t=()=>{X.registerComponent(FT.type,FT)};var QX=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};const r1t=(i,e,t,n,s,r=!1,a,o)=>{let l={x:0,y:0,center:{x:0,y:0},radius:0,distance:0,startAngle:0,endAngle:0,innerRadius:0,visible:!1,label:{visible:!1,text:"",offset:0}},c={x:0,y:0,center:{x:0,y:0},radius:0,distance:0,startAngle:0,endAngle:0,innerRadius:0,visible:!1,sides:i.angleAxisHelper.getScale(0).domain().length,label:{visible:!1,text:"",offset:0}};if(n){l.visible=!!e.size;const u=i.angleAxisHelper.getBandwidth(0);e.forEach(h=>{var d,{axis:p,value:f,coord:g}=h,m=QX(h,["axis","value","coord"]);f=f??"",Pe(l,m);const y=i.angleAxisHelper.dataToPosition([f]);l.angle=y;const b=p.niceLabelFormatter;!((d=n.label)===null||d===void 0)&&d.visible&&(l.label.visible=!0,l.label.defaultFormatter=b,l.label.text=f,l.label.offset=_1(p.getSpec())),l.startAngle=y-u/2,l.endAngle=y+u/2})}if(s&&(c.visible=!!t.size,t.forEach(u=>{var h,{axis:d,value:p,coord:f}=u,g=QX(u,["axis","value","coord"]);p=p??"";const m=d.niceLabelFormatter;!((h=s.label)===null||h===void 0)&&h.visible&&(c.label.visible=!0,c.label.defaultFormatter=m,c.label.text=p,c.label.offset=_1(d.getSpec())),c.angle=f.angle,c.axis=d,Pe(c,g)})),r&&!l.visible&&F(a))l=a;else if(l.label.visible&&n&&n.label){const{label:u}=l,{formatMethod:h,formatter:d}=n.label,{formatFunc:p,args:f}=Pc(h,d,u.text,{label:u.text,orient:"angle"});p?u.text=p(...f):u.defaultFormatter&&(u.text=u.defaultFormatter(u.text))}if(r&&!c.visible&&F(o))c=o;else if(c.label.visible&&s&&s.label){const{label:u}=c,{formatMethod:h,formatter:d}=s.label,{formatFunc:p,args:f}=Pc(h,d,u.text,{label:u.text,orient:"radius"});p?u.text=p(...f):u.defaultFormatter&&(u.text=u.defaultFormatter(u.text))}return{angle:l,radius:c}},a1t=(i,e)=>{const{angle:t,innerRadius:n,radius:s,startAngle:r,endAngle:a,center:o}=e;let l;return l=(i.type==="rect"?"sector":"line")=="sector"?{center:o,innerRadius:n,radius:s,startAngle:r,endAngle:a}:{start:ui(o,n,t),end:ui(o,s,t)},l},o1t=(i,e)=>{const{center:t,startAngle:n,endAngle:s,distance:r,sides:a,axis:o,point:l,radius:c,innerRadius:u}=e;let h=r;if((i.smooth?"circle":"polygon")=="polygon"){const d=o.getCenter(),p=ese(d,l),f=(s-n)/a,g=Math.floor((p-n)/f),m=g*f+n,y=Math.min((g+1)*f+n,s),b=ui(d,r,m),x=ui(d,r,y),S=AKe([x.x,x.y],[b.x,b.y],[d.x,d.y],[l.x,l.y]);S&&(h=zi(kn.distancePN(l,S[0],S[1])+r,u,c))}return{center:t,startAngle:n,endAngle:s,radius:h,sides:a}};class BT extends J4{static getSpecInfo(e){return Pl(e,this.specKey,this.type,t=>t.categoryField&&t.categoryField.visible!==!1||t.valueField&&t.valueField.visible!==!1)}constructor(e,t){super(e,t),this.type=oe.polarCrosshair,this.name=oe.polarCrosshair,this._currValueAngle=new Map,this._currValueRadius=new Map}_showDefaultCrosshairBySpec(){const{categoryField:e,valueField:t}=this._spec;if(e!=null&&e.visible&&e.defaultSelect){const{axisIndex:n,datum:s}=e.defaultSelect;this._defaultCrosshair(n,s,1)}if(t!=null&&t.visible&&t.defaultSelect){const{axisIndex:n,datum:s}=t.defaultSelect;this._defaultCrosshair(n,s,2)}}_defaultCrosshair(e,t,n){const s=this._option.getComponentsByKey("axes").find(r=>r.getSpecIndex()===e);if(s){if(n===1){this._currValueAngle.clear();const r={angle:s.valueToPosition(t),radius:s.getOuterRadius()},a=s.coordToPoint(r);this._currValueAngle.set(e,this._getValueByAxis(s,a))}else{this._currValueRadius.clear();const r={angle:s.startAngle,radius:s.valueToPosition(t)},a=s.coordToPoint(r);this._currValueRadius.set(e,this._getValueByAxis(s,a))}this.layoutByValue(3)}}hide(){this._radiusCrosshair&&this._radiusCrosshair.hideAll(),this._radiusLabelCrosshair&&this._radiusLabelCrosshair.hideAll(),this._angleCrosshair&&this._angleCrosshair.hideAll(),this._angleLabelCrosshair&&this._angleLabelCrosshair.hideAll()}_findAllAxisContains(e,t){const n=this._getAxisInfoByField("category"),s=this._getAxisInfoByField("value");return{angleAxisMap:this._filterAxisByPoint(n,e,t),radiusAxisMap:this._filterAxisByPoint(s,e,t)}}_getAllAxisValues(e,t,n){let s=!1;return e.forEach(r=>{ys(r.axis.getScale().type)&&(s?this.enable=!1:s=!0)}),!!this.enable&&(e.forEach((r,a)=>{const o=r.axis;n.set(a,this._getValueByAxis(o,t))}),!0)}_getValueByAxis(e,t){const{x:n,y:s}=e.getLayoutStartPoint(),{x:r,y:a}=this.getLayoutStartPoint(),o=e.positionToData({x:t.x-(n-r),y:t.y-(s-a)}),l={x:e.getCenter().x+this.getLayoutStartPoint().x,y:e.getCenter().y+this.getLayoutStartPoint().y};return{value:o,axis:e,center:l,innerRadius:e.getInnerRadius(),radius:e.getOuterRadius(),startAngle:e.startAngle,endAngle:e.endAngle,distance:kn.distancePP(t,e.getCenter()),coord:e.pointToCoord(t),point:t}}_layoutCrosshair(e,t,n,s){let r=e,a=t;if(n&&n.length){if(s==="dimension"){const c=n[0];if(c.axis){const u=c.axis.pointToCoord({x:r,y:a}),h=c.axis.getOrient()==="radius"?{radius:c.position,angle:u.angle}:{radius:u.radius,angle:c.position},d=c.axis.coordToPoint(h);r=d.x,a=d.y}}else if(s==="mark"){const c=n[0],u=c.series.dataToPosition(c.datum[0]);r=u.x,a=u.y}}const{angleAxisMap:o,radiusAxisMap:l}=this._findAllAxisContains(r,a);if(o.size!==0||l.size!==0)this._currValueAngle.clear(),this._currValueRadius.clear(),o&&this._getAllAxisValues(o,{x:r,y:a},this._currValueAngle),l&&this._getAllAxisValues(l,{x:r,y:a},this._currValueRadius),this.layoutByValue(3);else{if(this.enableRemain)return;this.hide()}}layoutByValue(e=3){if(!this.enable)return;const t=n4(this._regions,"polar");if(!t)return;const{angle:n,radius:s}=r1t(t,this._currValueAngle,this._currValueRadius,this._angleHair,this._radiusHair,this.enableRemain,this._cacheAngleCrossHairInfo,this._cacheRadiusCrossHairInfo);this.enableRemain&&(this._cacheAngleCrossHairInfo=Object.assign(Object.assign({},n),{_isCache:!0}),this._cacheRadiusCrossHairInfo=Object.assign(Object.assign({},s),{_isCache:!0})),e&&(this._layoutRadius(s),this._layoutAngle(n))}_layoutAngle(e){var t;if(e._isCache&&this.enableRemain)return;const n=this.getContainer(),{angle:s,radius:r,label:a,center:o,visible:l}=e;if(l){const c=this._angleHair.type==="rect"?"sector":"line",u=a1t(this._angleHair,e);if(this._angleCrosshair)this._angleCrosshair.setAttributes(u);else{let h;c==="line"?h=new Bx(Object.assign(Object.assign({},u),{lineStyle:this._angleHair.style,zIndex:this.gridZIndex,pickable:!1})):c==="sector"&&(h=new iO(Object.assign(Object.assign({},u),{sectorStyle:this._angleHair.style,zIndex:this.gridZIndex,pickable:!1}))),this._angleCrosshair=h,n.add(h)}if(a.visible){const h=Qrt(s),d=Object.assign(Object.assign(Object.assign(Object.assign({},ui(o,r+a.offset,s)),this._angleHair.label),a),{textStyle:Object.assign(Object.assign({},(t=this._angleHair.label)===null||t===void 0?void 0:t.textStyle),{textAlign:h.align,textBaseline:h.baseline}),zIndex:this.labelZIndex});this._updateCrosshairLabel(this._angleLabelCrosshair,d,p=>{p.name="crosshair-angle-label",this._angleLabelCrosshair=p})}else this._angleLabelCrosshair&&this._angleLabelCrosshair.hideAll()}}_layoutRadius(e){var t;if(e._isCache&&this.enableRemain)return;const{center:n,startAngle:s,label:r,visible:a}=e,o=this.getContainer();if(a){const l=this._radiusHair.smooth?"circle":"polygon",c=o1t(this._radiusHair,e),u=c.radius;if(this._radiusCrosshair)this._radiusCrosshair.setAttributes(c);else{let h;h=l==="polygon"?new nO(Object.assign(Object.assign({},c),{lineStyle:this._radiusHair.style,zIndex:this.gridZIndex+1})):new tO(Object.assign(Object.assign({},c),{lineStyle:this._radiusHair.style,zIndex:this.gridZIndex})),this._radiusCrosshair=h,o.add(h)}if(r.visible){const h=alt(s),d=Object.assign(Object.assign(Object.assign(Object.assign({},ui(n,u,s)),this._radiusHair.label),r),{textStyle:Object.assign(Object.assign({},(t=this._radiusHair.label)===null||t===void 0?void 0:t.textStyle),{textAlign:h.align,textBaseline:h.baseline}),zIndex:this.labelZIndex});this._updateCrosshairLabel(this._radiusLabelCrosshair,d,p=>{p.name="crosshair-radius-label",this._radiusLabelCrosshair=p})}else this._radiusLabelCrosshair&&this._radiusLabelCrosshair.hideAll()}}_parseFieldInfo(){var e;const{categoryField:t,valueField:n}=this._spec;t&&t.visible&&(this._angleHair=this._parseField(t,"categoryField")),n&&n.visible&&(this._radiusHair=this._parseField(n,"valueField"),this._radiusHair.smooth=(e=n==null?void 0:n.line)===null||e===void 0?void 0:e.smooth)}_updateCrosshairLabel(e,t,n){const s=this.getContainer();e?e.setAttributes(t):(e=new Oa(t),s==null||s.add(e),n(e)),kce(e,this._getLimitBounds())}_getNeedClearVRenderComponents(){return[this._radiusCrosshair,this._radiusLabelCrosshair,this._angleCrosshair,this._angleLabelCrosshair]}}BT.specKey="crosshair",BT.type=oe.polarCrosshair;const l1t=()=>{X.registerComponent(BT.type,BT)},c1t=(i,e)=>{const{getNewDomain:t,isContinuous:n,field:s}=e,r=s(),a=t();if(B(a)||B(r))return i;if(a.length===0)return[];const o={};a.forEach(c=>{o[c]||(o[c]=1)});let l=null;return l=n()?c=>{let u=!1;return q(r).every(h=>{c[h]>=a[0]&&c[h]<=It(a)&&(u=!0)}),u}:c=>{let u=!1;return q(r).every(h=>{(o[c[h]+""]||o[c[h]])&&(u=!0)}),u},i.filter(l)},u1t=(i,e)=>{const{stateFields:t,valueFields:n,dataCollection:s}=e.input,{stateField:r,valueField:a}=e.output,o={},l=[];return s.forEach((c,u)=>{var h;if(B(t[u]))return;const d=(h=c.getFields())===null||h===void 0?void 0:h[t[u]];d&&d.lockStatisticsByDomain&&d.domain.forEach(p=>{o[p]=0}),c.latestData.forEach(p=>{q(t[u]).forEach(f=>{B(p[f])||(B(o[p[f]])&&(o[p[f]]=0),B(n[u])||(o[p[f]]+=isNaN(parseFloat(p[n[u]]))?1:parseFloat(p[n[u]])))})})}),Object.keys(o).forEach((c,u)=>{const h={[r]:c};a&&(h[a]=o[c]),l.push(h)}),l};class Q4 extends Pr{get relatedAxisComponent(){return this._relatedAxisComponent}setStartAndEnd(e,t,n=["percent","percent"]){const[s="percent",r="percent"]=n,a=s==="percent"?e:this.dataToStatePoint(e),o=r==="percent"?t:this.dataToStatePoint(t);this._handleChange(a,o,!0)}enableInteraction(){this._activeRoam=!0}disableInteraction(){this._activeRoam=!1}zoomIn(e){this._handleChartZoom({zoomDelta:1.2,zoomX:e==null?void 0:e.x,zoomY:e==null?void 0:e.y})}zoomOut(e){this._handleChartZoom({zoomDelta:.8,zoomX:e==null?void 0:e.x,zoomY:e==null?void 0:e.y})}_handleChange(e,t,n){var s,r;(r=(s=this._spec)===null||s===void 0?void 0:s.zoomLock)!==null&&r!==void 0&&r||t-e!==this._spanCache&&(t-e<this._minSpan||t-e>this._maxSpan)?this._shouldChange=!1:(this._shouldChange=!0,this._spanCache=t-e)}_isReverse(){const e=this._relatedAxisComponent;if(!e)return!1;const t=e.getScale();return t.range()[0]>t.range()[1]&&(!e.getInverse()||this._isHorizontal)}_updateRangeFactor(e){const t=this._relatedAxisComponent.getScale(),n=this._isReverse(),s=n?[1-this._end,1-this._start]:[this._start,this._end];if(n)switch(e){case"startHandler":t.rangeFactorEnd(s[1]);break;case"endHandler":t.rangeFactorStart(s[0]);break;default:t.rangeFactorStart(s[0],!0),t.rangeFactorEnd(s[1])}else switch(e){case"startHandler":t.rangeFactorStart(s[0]);break;case"endHandler":t.rangeFactorEnd(s[1]);break;default:t.rangeFactorEnd(s[1],!0),t.rangeFactorStart(s[0])}const r=t.rangeFactor();r?(this._start=n?1-r[1]:r[0],this._end=n?1-r[0]:r[1]):(this._start=0,this._end=1)}get visible(){return this._visible}constructor(e,t){super(e,t),this.layoutType="none",this._orient="left",this._cacheVisibility=void 0,this._dataUpdating=!1,this._shouldChange=!0,this._stateField="x",this._activeRoam=!0,this._zoomAttr={enable:!0,rate:1,focus:!0},this._dragAttr={enable:!0,rate:1,reverse:!0},this._scrollAttr={enable:!0,rate:1,reverse:!0},this.effect={onZoomChange:n=>{var s,r;const a=this._relatedAxisComponent;if(a&&this._filterMode==="axis"){const o=a.getScale(),l=a.getSpec();this._auto&&this._getAxisBandSize(l)&&this._spec.ignoreBandSize&&(o.bandwidth("auto"),o.maxBandwidth("auto"),o.minBandwidth("auto")),this._updateRangeFactor(n),this._auto&&((r=(s=this._component)===null||s===void 0?void 0:s.setStartAndEnd)===null||r===void 0||r.call(s,this._start,this._end)),a.effect.scaleUpdate({value:"force"})}else Vi(this._regions,o=>{var l;(l=o.getViewData())===null||l===void 0||l.markRunning()},{userId:this._seriesUserId,specIndex:this._seriesIndex}),Vi(this._regions,o=>{o.reFilterViewData()},{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._visible=!0,this._handleStateChange=(n,s,r)=>{var a,o;return this._startValue=n,this._endValue=s,this._newDomain=this._parseDomainFromState(this._startValue,this._endValue),(o=(a=this.effect).onZoomChange)===null||o===void 0||o.call(a,r),!0},this._handleChartZoom=n=>{var s,r;if(!this._activeRoam)return;const{zoomDelta:a,zoomX:o,zoomY:l}=n,{x:c,y:u}=this._regions[0].getLayoutStartPoint(),{width:h,height:d}=this._regions[0].getLayoutRect(),p=Math.abs(this._start-this._end),f=(r=(s=this._spec.roamZoom)===null||s===void 0?void 0:s.rate)!==null&&r!==void 0?r:1;if(p>=1&&a<1||p<=.01&&a>1)return;const g=this._isHorizontal?o:l,m=p*(a-1)*f;let y=m/2,b=m/2;if(g){const C=this._isHorizontal?c:u,w=this._isHorizontal?h:d;y=Math.abs(C-g)/Math.abs(w-C)*m,b=Math.abs(w-g)/Math.abs(w-C)*m}const x=zi(this._start+y,0,1),S=zi(this._end-b,0,1);this._handleChange(Math.min(x,S),Math.max(x,S),!0)},this._handleChartScroll=(n,s)=>{var r;if(!this._activeRoam)return!1;const{scrollX:a,scrollY:o}=n;let l=this._isHorizontal?a:o;const c=this._isHorizontal?At(a/o)>=.5:At(o/a)>=.5;this._scrollAttr.reverse||(l=-l),c&&this._handleChartMove(l,(r=this._scrollAttr.rate)!==null&&r!==void 0?r:1);const u=this._start!==0&&this._end!==1;return c&&u},this._handleChartDrag=(n,s)=>{var r;if(!this._activeRoam)return;const[a,o]=n;let l=this._isHorizontal?a:o;this._dragAttr.reverse&&(l=-l),this._handleChartMove(l,(r=this._dragAttr.rate)!==null&&r!==void 0?r:1)},this._handleChartMove=(n,s)=>{const r=this._isHorizontal?this.getLayoutRect().width:this.getLayoutRect().height;if(Math.abs(n)>=1e-6){if(n>0&&this._end<1){const a=Math.min(1-this._end,n/r)*s;this._handleChange(this._start+a,this._end+a,!0)}else if(n<0&&this._start>0){const a=Math.max(-this._start,n/r)*s;this._handleChange(this._start+a,this._end+a,!0)}}return!1},this._orient=_p(e),this._isHorizontal=Yle(this._orient)==="horizontal"}created(){super.created(),this._setAxisFromSpec(),this._setRegionsFromSpec(),this._initEvent(),this._initData(),this._initStateScale(),this._setStateFromSpec()}initLayout(){super.initLayout(),this._layout&&(this._layout.layoutOrient=this._orient)}_setAxisFromSpec(){if(F(this._spec.axisId)?this._relatedAxisComponent=this._option.getComponentByUserId(this._spec.axisId):F(this._spec.axisIndex)&&(this._relatedAxisComponent=this._option.getComponentByIndex("axes",this._spec.axisIndex)),B(this._spec.field)&&!this._relatedAxisComponent){const e=this._option.getComponentsByKey("axes"),t=e.find(n=>n._orient===this._orient);if(t)this._relatedAxisComponent=t;else{const n=e.find(s=>!$t(s.getScale().type));this._relatedAxisComponent=n}}this._relatedAxisComponent&&this._filterMode==="axis"&&(this._relatedAxisComponent.autoIndentOnce=!0)}_setRegionsFromSpec(){var e,t;this._regions=this._relatedAxisComponent?this._relatedAxisComponent.getRegions():this._option.getAllRegions();const n=this._relatedAxisComponent?(t=(e=this._relatedAxisComponent).getBindSeriesFilter)===null||t===void 0?void 0:t.call(e):null;if(F(n)&&(F(n.userId)&&(this._seriesUserId=q(n.userId)),F(n.specIndex)&&(this._seriesIndex=q(n.specIndex))),F(this._spec.seriesId)){const s=q(this._spec.seriesId);this._seriesUserId?this._seriesUserId=this._seriesUserId.filter(r=>s.includes(r)):this._seriesUserId=s}if(F(this._spec.seriesIndex)){const s=q(this._spec.seriesIndex);this._seriesIndex?this._seriesIndex=this._seriesIndex.filter(r=>s.includes(r)):this._seriesIndex=s}if(F(this._spec.regionIndex)){const s=this._option.getRegionsInIndex(q(this._spec.regionIndex));this._regions=this._regions.filter(r=>s.includes(r))}else if(F(this._spec.regionId)){const s=q(this._spec.regionId);this._regions=s.length?this._regions.filter(r=>s.includes(r.id)):[]}}onDataUpdate(){var e;const t=this._computeDomainOfStateScale($t(this._stateScale.type));this._stateScale.domain(t,!1),this._handleChange(this._start,this._end,!0),this._spec.auto&&(this._dataUpdating=!0,(e=this.getChart())===null||e===void 0||e.setLayoutTag(!0,null,!1))}_computeDomainOfStateScale(e){if(this._spec.customDomain)return this._spec.customDomain;const t=this._data.getLatestData().map(n=>n[this._stateField]);if(e){const n=t.map(s=>1*s);return t.length?[Mn(n),an(n)]:[-1/0,1/0]}return t}_initEvent(){this._initCommonEvent()}_initData(){const e=[],t=[],n=[];if(this._relatedAxisComponent){const a={};Vi(this._regions,o=>{var l,c;const u=o.coordinate==="cartesian"?o.getXAxisHelper():o.coordinate==="polar"?o.angleAxisHelper:null,h=o.coordinate==="cartesian"?o.getYAxisHelper():o.coordinate==="polar"?o.radiusAxisHelper:null;if(!u||!h)return;const d=u.getAxisId()===this._relatedAxisComponent.id?u:h.getAxisId()===this._relatedAxisComponent.id?h:this._isHorizontal?u:h,p=d===u?h:u,f=$t(p.getScale(0).type),g=$t(d.getScale(0).type);e.push(o.getRawData());const m=o.getSpec(),y=o.coordinate==="cartesian"?q(m.xField):q((l=m.angleField)!==null&&l!==void 0?l:m.categoryField),b=o.coordinate==="cartesian"?q(m.yField):q((c=m.radiusField)!==null&&c!==void 0?c:m.valueField);if(a[o.id]=o.type==="link"?["from_xField"]:d===u?y:b,g?t.push(a[o.id]):t.push(a[o.id][0]),this._valueField){const x=o.type==="link"?["from_yField"]:p===u?y:b;f&&n.push(...x)}},{userId:this._seriesUserId,specIndex:this._seriesIndex}),this._originalStateFields=a}else Vi(this._regions,a=>{e.push(a.getRawData()),t.push(this._field),this._valueField&&n.push(this._spec.valueField)},{userId:this._seriesUserId,specIndex:this._seriesIndex});const{dataSet:s}=this._option;bu(s,"dataview",IP),Fe(s,"dataFilterComputeDomain",u1t);const r=new Rt(s,{name:`${this.type}_${this.id}_data`});r.transform({type:"dataFilterComputeDomain",options:{input:{dataCollection:e,stateFields:t,valueFields:n},output:{stateField:this._stateField,valueField:this._valueField}}},!1),this._data=new Ec(this._option,r),r.reRunAllTransform(),s.multipleDataViewAddListener(e,"change",this._handleDataCollectionChange.bind(this))}setAttrFromSpec(){var e;super.setAttrFromSpec(),this._spec.roamZoom===!0||this._spec.roamZoom?this._zoomAttr=se({},this._zoomAttr,this._spec.roamZoom):this._zoomAttr.enable=!1,this._spec.roamDrag===!0||this._spec.roamDrag?this._dragAttr=se({},this._dragAttr,this._spec.roamDrag):this._dragAttr.enable=!1,this._spec.roamScroll===!0||this._spec.roamScroll?this._scrollAttr=se({},this._scrollAttr,this._spec.roamScroll):this._scrollAttr.enable=!1,this._field=this._spec.field,this._width=this._computeWidth(),this._height=this._computeHeight(),this._visible=(e=this._spec.visible)===null||e===void 0||e}_statePointToData(e){const t=this._stateScale,n=t.domain();if($t(t.type))return this._isReverse()?n[0]+(It(n)-n[0])*(1-e):n[0]+(It(n)-n[0])*e;let s=t.range();this._isReverse()&&(s=s.slice().reverse());const r=s[0]+(It(s)-s[0])*e;return t.invert(r)}dataToStatePoint(e){const t=this._stateScale,n=t.scale(e);let s=t.range();return!this._isHorizontal&&$t(t.type)&&(s=s.slice().reverse()),(n-s[0])/(It(s)-s[0])}_modeCheck(e,t){return e==="start"?t==="percent"&&F(this._spec.start)||t==="value"&&F(this._spec.startValue):t==="percent"&&F(this._spec.end)||t==="value"&&F(this._spec.endValue)}_setStateFromSpec(){var e,t;let n,s;if(this._auto=!!this._spec.auto,this._spec.rangeMode){const[r,a]=this._spec.rangeMode;this._modeCheck("start",r)&&this._modeCheck("end",a)&&(n=r==="percent"?this._spec.start:this.dataToStatePoint(this._spec.startValue),s=a==="percent"?this._spec.end:this.dataToStatePoint(this._spec.endValue))}else n=this._spec.start?this._spec.start:this._spec.startValue?this.dataToStatePoint(this._spec.startValue):0,s=this._spec.end?this._spec.end:this._spec.endValue?this.dataToStatePoint(this._spec.endValue):1;this._startValue=this._statePointToData(n),this._endValue=this._statePointToData(s),this._start=n,this._end=s,this._minSpan=(e=this._spec.minSpan)!==null&&e!==void 0?e:0,this._maxSpan=(t=this._spec.maxSpan)!==null&&t!==void 0?t:1,$t(this._stateScale.type)&&this._stateScale.domain()[0]!==It(this._stateScale.domain())&&(this._spec.minValueSpan&&(this._minSpan=this._spec.minValueSpan/(It(this._stateScale.domain())-this._stateScale.domain()[0])),this._spec.maxValueSpan&&(this._maxSpan=this._spec.maxValueSpan/(It(this._stateScale.domain())-this._stateScale.domain()[0]))),this._minSpan=Math.max(0,this._minSpan),this._maxSpan=Math.min(this._maxSpan,1),this._relatedAxisComponent&&this._filterMode==="axis"||this._start===0&&this._end===1||(this._newDomain=this._parseDomainFromState(this._startValue,this._endValue))}_parseFieldOfSeries(e){var t;return(t=this._originalStateFields)===null||t===void 0?void 0:t[e.id]}_initStateScale(){const e=[0,1];if(this._relatedAxisComponent){const t=this._relatedAxisComponent.getScale(),n=$t(t.type),s=this._computeDomainOfStateScale(n);if(this._stateScale=t.clone(),n){const r=s.map(a=>1*a);this._stateScale.domain(s.length?[Mn(r),an(r)]:[0,1],!0).range(e)}else this._stateScale.domain(s,!0).range(e)}else this._stateScale=new eg,this._stateScale.domain(this._computeDomainOfStateScale(),!0).range(e)}init(e){super.init(e),this._addTransformToSeries(),this._start===0&&this._end===1||this.effect.onZoomChange()}_addTransformToSeries(){this._relatedAxisComponent&&this._filterMode==="axis"||(Fe(this._option.dataSet,"dataFilterWithNewDomain",c1t),Vi(this._regions,e=>{e.addViewDataFilter({type:"dataFilterWithNewDomain",options:{getNewDomain:()=>this._newDomain,field:()=>{var t;return(t=this._field)!==null&&t!==void 0?t:this._parseFieldOfSeries(e)},isContinuous:()=>$t(this._stateScale.type)},level:Tl.dataZoomFilter})},{userId:this._seriesUserId,specIndex:this._seriesIndex}))}onRender(e){}_compareSpec(e,t){const n=super._compareSpec(e,t);return n.reMake||Pt(t,e)||(n.reRender=!0,n.reMake=!0),n}reInit(e){super.reInit(e),this._marks.forEach(t=>{t.getMarks().forEach(n=>{this.initMarkStyleWithSpec(n,this._spec[n.name])})})}changeRegions(){}update(e){}resize(e){}_parseDomainFromState(e,t){if($t(this._stateScale.type))return[Math.min(t,e),Math.max(t,e)];const n=this._stateScale.domain(),s=n.indexOf(e),r=n.indexOf(t);return n.slice(Math.min(s,r),Math.max(s,r)+1)}_initCommonEvent(){var e,t,n,s,r,a,o;const l={delayType:(t=(e=this._spec)===null||e===void 0?void 0:e.delayType)!==null&&t!==void 0?t:"throttle",delayTime:F((n=this._spec)===null||n===void 0?void 0:n.delayType)?(r=(s=this._spec)===null||s===void 0?void 0:s.delayTime)!==null&&r!==void 0?r:30:0,realTime:(o=(a=this._spec)===null||a===void 0?void 0:a.realTime)===null||o===void 0||o};this._zoomAttr.enable&&this.initZoomEventOfRegions(this._regions,null,this._handleChartZoom,l),this._scrollAttr.enable&&this.initScrollEventOfRegions(this._regions,null,this._handleChartScroll,l),this._dragAttr.enable&&this.initDragEventOfRegions(this._regions,null,this._handleChartDrag,l)}updateLayoutAttribute(){this._visible&&this._createOrUpdateComponent(),super.updateLayoutAttribute()}onLayoutStart(e,t,n){super.onLayoutStart(e,t,n);const s=this._autoUpdate(e),r=this._isHorizontal?"height":"width";this.layout.setLayoutRect({[r]:s?this[`_${r}`]:0},{[r]:pe.Built_In}),this._dataUpdating=!1}getBoundsInRect(e){const t={x1:this.getLayoutStartPoint().x,y1:this.getLayoutStartPoint().y,x2:0,y2:0};return this._isHorizontal?(t.y2=t.y1+this._height,t.x2=t.x1+e.width):(t.x2=t.x1+this._width,t.y2=t.y1+e.height),t}hide(){var e;(e=this._component)===null||e===void 0||e.hideAll()}show(){var e;(e=this._component)===null||e===void 0||e.showAll()}_getAxisBandSize(e){const t=e==null?void 0:e.bandSize,n=e==null?void 0:e.maxBandSize,s=e==null?void 0:e.minBandSize;if(t||s||n)return{bandSize:t,maxBandSize:n,minBandSize:s}}_autoUpdate(e){var t,n,s,r,a,o;if(!this._auto)return this._cacheVisibility=void 0,!0;const l=this._relatedAxisComponent,c=l==null?void 0:l.getSpec(),u=l==null?void 0:l.getScale(),h=this._getAxisBandSize(c);if(!this._dataUpdating&&ys(u.type)&&(e==null?void 0:e.height)===((t=this._cacheRect)===null||t===void 0?void 0:t.height)&&(e==null?void 0:e.width)===((n=this._cacheRect)===null||n===void 0?void 0:n.width)&&this._fixedBandSize===(h==null?void 0:h.bandSize))return this._cacheVisibility;let d=!0;if(this._isHorizontal&&(e==null?void 0:e.width)!==((s=this._cacheRect)===null||s===void 0?void 0:s.width)?u.range(l.getInverse()?[e.width,0]:[0,e.width]):(e==null?void 0:e.height)!==((r=this._cacheRect)===null||r===void 0?void 0:r.height)&&u.range(l.getInverse()?[0,e.height]:[e.height,0]),this._cacheRect={width:e==null?void 0:e.width,height:e==null?void 0:e.height},this._fixedBandSize=h==null?void 0:h.bandSize,ys(u.type)){h&&(this._start||this._end)&&(this.type===oe.scrollBar&&(this._start=0,this._end=1),this._updateRangeFactor());const[p,f]=(a=u.rangeFactor())!==null&&a!==void 0?a:[];d=(!B(p)||!B(f))&&!(p===0&&f===1)}else{const[p,f]=(o=u.rangeFactor())!==null&&o!==void 0?o:[this._start,this._end];d=!(p===0&&f===1)}return this.setStartAndEnd(this._start,this._end),d?this.show():this.hide(),this._cacheVisibility=d,d}_getNeedClearVRenderComponents(){return[this._component]}}Yt(Q4,F4);class yhe extends Kx{_mergeThemeToSpec(e,t){const n=this._theme;let s=e;if(this._shouldMergeThemeToSpec()){const r=o=>{const l=Pe({selectedBackgroundChart:{line:{},area:{}}},this._theme,o),{selectedBackgroundChart:c={}}=o,{line:u,area:h}=c;return u&&u.visible!==!1&&(l.selectedBackgroundChart.line.style=Object.assign(Object.assign({},l.selectedBackgroundChart.line.style),{visible:!0})),h&&h.visible!==!1&&(l.selectedBackgroundChart.area.style=Object.assign(Object.assign({},l.selectedBackgroundChart.area.style),{visible:!0})),l},a=e;s=ie(a)?a.map(o=>r(o)):r(a)}return this._adjustPadding(s),{spec:s,theme:n}}}class Qv extends Q4{constructor(e,t){var n;super(e,t),this.type=oe.dataZoom,this.name=oe.dataZoom,this.transformerConstructor=yhe,this.specKey="dataZoom",this.layoutZIndex=Xt.DataZoom,this.layoutLevel=El.DataZoom,this.layoutType="region-relative",this._isReverseCache=!1,this._dataToPositionX=s=>{const r=this._orient==="left"?this._middleHandlerSize:0,a=this._isHorizontal?this._startHandlerSize/2:0,o=this._isHorizontal?this._stateScale:this._valueScale,l=this._isHorizontal?this._stateField:this._valueField;return o.scale(s[l])+this.getLayoutStartPoint().x+r+a},this._dataToPositionX2=s=>{const r=this._orient==="left"?this._middleHandlerSize:0,a=this._isHorizontal?this._startHandlerSize/2:0,o=this._isHorizontal?this._stateScale:this._valueScale,l=o.domain()[0];return o.scale(l)+this.getLayoutStartPoint().x+r+a},this._dataToPositionY=s=>{const r=this._isHorizontal?this._middleHandlerSize:0,a=this._isHorizontal?0:this._startHandlerSize/2,o=this._isHorizontal?this._valueScale:this._stateScale,l=this._isHorizontal?this._valueField:this._stateField;return o.scale(s[l])+this.getLayoutStartPoint().y+r+a},this._dataToPositionY2=s=>{const r=this._isHorizontal?this._middleHandlerSize:0,a=this._isHorizontal?0:this._startHandlerSize/2,o=this._isHorizontal?this._valueScale:this._stateScale,l=o.domain()[0];return o.scale(l)+this.getLayoutStartPoint().y+r+a},this._valueField="y",this._filterMode=(n=e.filterMode)!==null&&n!==void 0?n:"filter"}created(){super.created(),this._initValueScale()}setAttrFromSpec(){var e,t,n,s,r,a,o,l,c,u;super.setAttrFromSpec(),Ui(this._spec.roam)&&(this._zoomAttr.enable=this._spec.roam,this._dragAttr.enable=this._spec.roam,this._scrollAttr.enable=this._spec.roam),(this._zoomAttr.enable||this._dragAttr.enable||this._scrollAttr.enable)&&this.initZoomable(this.event,this._option.mode),this._backgroundSize=(t=(e=this._spec.background)===null||e===void 0?void 0:e.size)!==null&&t!==void 0?t:30,this._middleHandlerSize=this._computeMiddleHandlerSize(),this._width=this._computeWidth(),this._height=this._computeHeight(),B((r=(s=(n=this._spec)===null||n===void 0?void 0:n.startHandler)===null||s===void 0?void 0:s.style)===null||r===void 0?void 0:r.size)&&(this._spec.startHandler.style.size=this._isHorizontal?this._height-this._middleHandlerSize:this._width-this._middleHandlerSize),B((l=(o=(a=this._spec)===null||a===void 0?void 0:a.endHandler)===null||o===void 0?void 0:o.style)===null||l===void 0?void 0:l.size)&&(this._spec.endHandler.style.size=this._isHorizontal?this._height-this._middleHandlerSize:this._width-this._middleHandlerSize);const h=(c=this._spec.startHandler.style.visible)===null||c===void 0||c,d=(u=this._spec.endHandler.style.visible)===null||u===void 0||u;this._startHandlerSize=h?this._spec.startHandler.style.size:0,this._endHandlerSize=d?this._spec.endHandler.style.size:0}onLayoutEnd(e){this._updateScaleRange(),this._isReverse()&&!this._isReverseCache&&(this._isReverseCache=this._isReverse(),this.effect.onZoomChange()),this._cacheVisibility!==!1&&super.onLayoutEnd(e)}_initValueScale(){const e=this._computeDomainOfValueScale();if(e){const t=new Ma;t.domain(e),this._valueScale=t}}_updateScaleRange(){var e,t;const n=this._startHandlerSize+this._endHandlerSize;if(!this._stateScale||!this._valueScale)return;let s;const r=this._isHorizontal?this.getLayoutRect().width-n:this.getLayoutRect().height-n,a=(t=(e=this._relatedAxisComponent)===null||e===void 0?void 0:e.getScale().range())!==null&&t!==void 0?t:[this._startHandlerSize/2,r+this._startHandlerSize/2];this._isHorizontal?(s=this._visible?[this._startHandlerSize/2,this._computeWidth()-n+this._startHandlerSize/2]:a,this._stateScale.range(s),this._valueScale.range([this._computeHeight()-this._middleHandlerSize,0])):this.layoutOrient==="left"?(s=this._visible?[this._startHandlerSize/2,this._computeHeight()-n+this._startHandlerSize/2]:a,this._stateScale.range(s),this._valueScale.range([this._computeWidth()-this._middleHandlerSize,0])):(s=this._visible?[this._startHandlerSize/2,this._computeHeight()-n+this._startHandlerSize/2]:a,this._stateScale.range(s),this._valueScale.range([0,this._computeWidth()-this._middleHandlerSize])),this._component&&this._cacheVisibility!==!1&&this._component.setAttributes({size:{width:this._computeWidth(),height:this._computeHeight()},position:{x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y}})}_computeDomainOfValueScale(){const e=this._data.getLatestData().map(n=>n[this._valueField]),t=e.map(n=>1*n);return e.length?[Mn(t),an(t)]:null}_computeMiddleHandlerSize(){var e,t,n,s;let r=0;if(!((t=(e=this._spec)===null||e===void 0?void 0:e.middleHandler)===null||t===void 0)&&t.visible){const a=(n=this._spec.middleHandler.icon.style.size)!==null&&n!==void 0?n:8,o=(s=this._spec.middleHandler.background.size)!==null&&s!==void 0?s:40;r+=Math.max(a,o)}return r}_computeWidth(){return this._visible===!1?0:ye(this._spec.width)?this._spec.width:this._isHorizontal?this.getLayoutRect().width:this._backgroundSize+this._middleHandlerSize}_computeHeight(){return this._visible===!1?0:ye(this._spec.height)?this._spec.height:this._isHorizontal?this._backgroundSize+this._middleHandlerSize:this.getLayoutRect().height-(this._startHandlerSize+this._endHandlerSize)/2}_isScaleValid(e){if(!e||!e.domain())return!1;const t=e.domain();return(!$t(e.type)||t[0]!==It(t))&&(!ys(e.type)||oKe(t).length!==1)}_getAttrs(e){var t,n,s,r,a;const o=(t=this._spec)!==null&&t!==void 0?t:{};return Object.assign({zIndex:this.layoutZIndex,start:this._start,end:this._end,position:{x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y},orient:this._orient,size:{width:this.getLayoutRect().width,height:this.getLayoutRect().height},showDetail:o.showDetail,brushSelect:(n=o.brushSelect)!==null&&n!==void 0&&n,zoomLock:(s=o.zoomLock)!==null&&s!==void 0&&s,minSpan:this._minSpan,maxSpan:this._maxSpan,delayType:o.delayType,delayTime:F(o.delayType)?(r=o.delayTime)!==null&&r!==void 0?r:30:0,realTime:(a=o.realTime)===null||a===void 0||a,previewData:e&&this._data.getLatestData(),previewPointsX:e&&this._dataToPositionX,previewPointsY:e&&this._dataToPositionY,tolerance:this._spec.tolerance},this._getComponentAttrs(e))}_createOrUpdateComponent(){if(this._visible){const e=this._isHorizontal?this._stateScale:this._valueScale,t=this._isHorizontal?this._valueScale:this._stateScale,n=this._isScaleValid(e)&&this._isScaleValid(t)&&this._spec.showBackgroundChart!==!1,s=this._getAttrs(n);if(this._component)this._component.setAttributes(s);else{const r=this.getContainer();this._component=new _oe(s),this._isHorizontal?n&&this._component.setPreviewPointsY1(this._dataToPositionY2):n&&this._component.setPreviewPointsX1(this._dataToPositionX2),this._component.setStatePointToData(a=>this._statePointToData(a)),this._component.addEventListener("change",a=>{const{start:o,end:l,tag:c}=a.detail;this._handleChange(o,l,void 0,c)}),r.add(this._component),this._updateScaleRange()}}}_handleChange(e,t,n,s){if(super._handleChange(e,t,n),this._shouldChange){n&&this._component&&this._component.setStartAndEnd(e,t),this._start=e,this._end=t;const r=this._statePointToData(e),a=this._statePointToData(t);(ee(this._spec.updateDataAfterChange)?this._spec.updateDataAfterChange(e,t,r,a):this._handleStateChange(r,a,s))&&this.event.emit(ke.dataZoomChange,{model:this,value:{filterData:this._filterMode!=="axis",start:e,end:t,startValue:this._startValue,endValue:this._endValue,newDomain:this._newDomain}})}}_handleDataCollectionChange(){var e;const t=this._data.getDataView();if(t.reRunAllTransform(),(e=this._component)===null||e===void 0||e.setPreviewData(t.latestData),this._valueScale){const n=this._computeDomainOfValueScale();n&&this._valueScale.domain(n)}}_getComponentAttrs(e){var t,n,s,r,a,o,l,c,u,h,d;const{middleHandler:p={},startText:f={},endText:g={},backgroundChart:m={},selectedBackgroundChart:y={}}=this._spec;return{backgroundStyle:Le((t=this._spec.background)===null||t===void 0?void 0:t.style),startHandlerStyle:Le((n=this._spec.startHandler)===null||n===void 0?void 0:n.style),middleHandlerStyle:p.visible?{visible:!0,icon:Le((s=p.icon)===null||s===void 0?void 0:s.style),background:{size:(r=p.background)===null||r===void 0?void 0:r.size,style:Le((a=p.background)===null||a===void 0?void 0:a.style)}}:{visible:!1},endHandlerStyle:Le((o=this._spec.endHandler)===null||o===void 0?void 0:o.style),startTextStyle:{padding:f.padding,formatMethod:this._getHandlerTextFormatMethod(f),textStyle:Le(f.style)},endTextStyle:{padding:g.padding,formatMethod:this._getHandlerTextFormatMethod(g),textStyle:Le(g.style)},selectedBackgroundStyle:Le(this._spec.selectedBackground.style),dragMaskStyle:Le((l=this._spec.dragMask)===null||l===void 0?void 0:l.style),backgroundChartStyle:e?{line:Pe(Le((c=m.line)===null||c===void 0?void 0:c.style),{fill:!1}),area:Object.assign({curveType:"basis",visible:!0},Le((u=m.area)===null||u===void 0?void 0:u.style))}:{line:{visible:!1},area:{visible:!1}},selectedBackgroundChartStyle:e?{line:Pe(Le((h=y.line)===null||h===void 0?void 0:h.style),{fill:!1}),area:Object.assign({curveType:"basis",visible:!0},Le((d=y.area)===null||d===void 0?void 0:d.style))}:{line:{visible:!1},area:{visible:!1}},disableTriggerEvent:this._option.disableTriggerEvent}}_getHandlerTextFormatMethod(e){const{formatMethod:t,formatter:n}=e,{formatFunc:s}=Pc(t,n);return s?r=>s(r,{label:r},n):void 0}_getNeedClearVRenderComponents(){return[this._component]}clear(){if(this._component){const e=this.getContainer();this._component.removeAllChild(),e&&e.removeChild(this._component),this._component=null}super.clear()}}Qv.type=oe.dataZoom,Qv.transformerConstructor=yhe,Qv.specKey="dataZoom";const h1t=()=>{X.registerComponent(Qv.type,Qv)};class jT extends Q4{constructor(e,t){var n;super(e,t),this.type=oe.scrollBar,this.name=oe.scrollBar,this.specKey="scrollBar",this.layoutZIndex=Xt.DataZoom,this.layoutLevel=El.DataZoom,this.layoutType="region-relative",this._filterMode=(n=e.filterMode)!==null&&n!==void 0?n:"axis"}setAttrFromSpec(){super.setAttrFromSpec(),Ui(this._spec.roam)&&(this._zoomAttr.enable=!1,this._dragAttr.enable=this._spec.roam,this._scrollAttr.enable=this._spec.roam),(this._zoomAttr.enable||this._dragAttr.enable||this._scrollAttr.enable)&&this.initZoomable(this.event,this._option.mode)}onLayoutEnd(e){var t,n;this._updateScaleRange(),(n=(t=this.effect).onZoomChange)===null||n===void 0||n.call(t),super.onLayoutEnd(e)}_updateScaleRange(){this._component&&this._component.setAttributes({x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y,width:this.getLayoutRect().width,height:this.getLayoutRect().height})}_computeWidth(){return ye(this._spec.width)?this._spec.width:this._isHorizontal?this.getLayoutRect().width:wB}_computeHeight(){return ye(this._spec.height)?this._spec.height:this._isHorizontal?wB:this.getLayoutRect().height}_getAttrs(){var e,t,n,s,r,a;return Object.assign({zIndex:this.layoutZIndex,x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y,width:this.getLayoutRect().width,height:this.getLayoutRect().height,range:[this._start,this._end],direction:this._isHorizontal?"horizontal":"vertical",delayType:(e=this._spec)===null||e===void 0?void 0:e.delayType,delayTime:F((t=this._spec)===null||t===void 0?void 0:t.delayType)?(s=(n=this._spec)===null||n===void 0?void 0:n.delayTime)!==null&&s!==void 0?s:30:0,realTime:(a=(r=this._spec)===null||r===void 0?void 0:r.realTime)===null||a===void 0||a},this._getComponentAttrs())}_createOrUpdateComponent(){const e=this._getAttrs();if(this._component)this._component.setAttributes(e);else{const t=this.getContainer();this._component=new Jk(e),this._component.addEventListener("scrollDrag",n=>{const s=n.detail.value;this._handleChange(s[0],s[1])}),t.add(this._component)}}_handleChange(e,t,n){super._handleChange(e,t,n);const s=aT(this._start,e)&&aT(this._end,t);if(this._shouldChange&&!s){n&&this._component&&this._component.setAttribute("range",[e,t]),this._start=e,this._end=t;const r=this._statePointToData(e),a=this._statePointToData(t);(ee(this._spec.updateDataAfterChange)?this._spec.updateDataAfterChange(e,t,r,a):this._handleStateChange(this._statePointToData(e),this._statePointToData(t)))&&this.event.emit(ke.scrollBarChange,{model:this,value:{filterData:this._filterMode!=="axis",start:this._start,end:this._end,startValue:this._startValue,endValue:this._endValue,newDomain:this._newDomain}})}}_handleDataCollectionChange(){}_initCommonEvent(){super._initCommonEvent(),this._component&&this._component.on("scrollDrag",e=>{const t=e.detail.value;this._handleChange(t[0],t[1])})}_getComponentAttrs(){const{rail:e,slider:t,innerPadding:n}=this._spec,s={};return B(n)||(s.padding=n),Te(e==null?void 0:e.style)||(s.railStyle=Le(e.style)),Te(t==null?void 0:t.style)||(s.sliderStyle=Le(t.style)),s.disableTriggerEvent=this._option.disableTriggerEvent,s}_getNeedClearVRenderComponents(){return[this._component]}}jT.type=oe.scrollBar,jT.specKey="scrollBar";const d1t=()=>{X.registerComponent(jT.type,jT)},p1t=(i,e)=>{const{datum:t,title:n,content:s}=e,r=[],a=t.call(null);return n.visible&&r.push({type:"title",index:0,datum:a,spec:n}),q(s).forEach((o,l)=>{o.visible&&r.push({type:"content",index:l,datum:a,spec:o})}),r};var f1t=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};class NT extends Pr{constructor(){super(...arguments),this.type=oe.indicator,this.name=oe.indicator,this.specKey="indicator",this.layoutType="none",this.layoutZIndex=Xt.Indicator,this.layoutLevel=El.Indicator,this._gap=0,this._activeDatum=null}static getSpecInfo(e){return Pl(e,this.specKey,this.type,t=>t&&t.visible!==!1)}created(){super.created(),this.initData(),this.initEvent()}setAttrFromSpec(){super.setAttrFromSpec(),this._gap=this._spec.gap||0,this._title=this._spec.title,this._content=q(this._spec.content),this._regions=this._option.getRegionsInUserIdOrIndex(q(this._spec.regionId),q(this._spec.regionIndex))}onRender(e){}changeRegions(e){}initEvent(){var e;if(this._option.disableTriggerEvent||this._spec.trigger==="none")return;const t=(e=this.getCompiler())===null||e===void 0?void 0:e.getVGrammarView();t&&(this._spec.trigger==="hover"?(t.addEventListener("element-highlight:start",n=>{this.isRelativeModel(n.options.regionId)&&this.updateDatum(n.elements[0].getDatum())}),t.addEventListener("element-highlight:reset",n=>{this.isRelativeModel(n.options.regionId)&&this.updateDatum(null)})):(t.addEventListener("element-select:start",n=>{this.isRelativeModel(n.options.regionId)&&this.updateDatum(n.elements[0].getDatum())}),t.addEventListener("element-select:reset",n=>{this.isRelativeModel(n.options.regionId)&&this.updateDatum(null)})))}updateDatum(e){this._activeDatum=e,this._displayData.updateData();const t=this._getIndicatorAttrs();this._createOrUpdateIndicatorComponent(t)}initData(){Fe(this._option.dataSet,"indicatorFilter",p1t);const e=new Rt(this._option.dataSet,{name:`${this.type}_${this.id}_data`});e.transform({type:"indicatorFilter",options:{title:this._title,content:this._content,datum:()=>this._activeDatum}}),e.target.addListener("change",this.updateDatum.bind(this)),this._displayData=new Ec(this._option,e)}updateLayoutAttribute(){const e=this._getIndicatorAttrs();this._createOrUpdateIndicatorComponent(e),super.updateLayoutAttribute()}_getIndicatorAttrs(){if(this._spec.visible===!1||this._spec.fixed===!1&&this._activeDatum===null)return{visible:!1};const e=this._regions[0],{width:t,height:n}=e.getLayoutRect(),{x:s,y:r}=e.getLayoutStartPoint(),a=this._spec,{content:o,offsetX:l,offsetY:c,limitRatio:u,title:h}=a,d=f1t(a,["content","offsetX","offsetY","limitRatio","title"]),p=[];return q(o).forEach(f=>{const g=Pe({},this._theme.content,f);p.push({visible:g.visible!==!1&&(!g.field||this._activeDatum!==null),space:g.space||this._gap,autoLimit:g.autoLimit,autoFit:g.autoFit,fitPercent:g.fitPercent,fitStrategy:g.fitStrategy,style:Object.assign(Object.assign({},tK(kc(g.style,["text"]),this._activeDatum)),{text:this._createText(g.field,g.style.text)})})}),Object.assign({visible:!0,size:{width:t,height:n},zIndex:this.layoutZIndex,x:s,y:r,dx:l?bm(l,this._computeLayoutRadius()):0,dy:c?bm(c,this._computeLayoutRadius()):0,limitRatio:u||1/0,title:{visible:h.visible!==!1&&(!F(h.field)||this._activeDatum!==null),space:h.space||this._gap,autoLimit:h.autoLimit,autoFit:h.autoFit,fitPercent:h.fitPercent,fitStrategy:h.fitStrategy,style:Object.assign(Object.assign({},tK(kc(h.style,["text"]),this._activeDatum)),{text:this._createText(h.field,h.style.text)})},content:p},d)}_createOrUpdateIndicatorComponent(e){if(this._indicatorComponent)Pt(e,this._cacheAttrs)||this._indicatorComponent.setAttributes(e);else{const t=this.getContainer(),n=new Oot(e);n.name="indicator",t.add(n),this._indicatorComponent=n,this._indicatorComponent.on("*",(s,r)=>this._delegateEvent(this._indicatorComponent,s,r))}return this._cacheAttrs=e,this._indicatorComponent}_createText(e,t){var n;return e?this._activeDatum?this._activeDatum[e]:"":ee(t)?(n=t(this._activeDatum,void 0))!==null&&n!==void 0?n:"":t??""}_computeLayoutRadius(){const e=this._regions[0],{width:t,height:n}=e.getLayoutRect();return Math.min(t/2,n/2)}isRelativeModel(e){return this._regions.some(t=>t.id===e)}_getNeedClearVRenderComponents(){return[this._indicatorComponent]}clear(){this._cacheAttrs=null,super.clear()}getIndicatorComponent(){return this._indicatorComponent}}NT.type=oe.indicator,NT.specKey="indicator";const g1t=()=>{X.registerComponent(NT.type,NT)},m1t=["sum","average","min","max","variance","standardDeviation","median"];var y1t=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};function Ld(i,e,t){if(!t)return!1;const n=i.map(a=>1*a),s=Mn(n),r=an(n);return e<s||e>r}function eY(i,e,t,n,s,r){var a,o;const{relativeSeries:l}=n;let c;return ye(i.x)&&Ld(e,i.x,t)&&((o=l==null?void 0:(a=l.getXAxisHelper()).setExtendDomain)===null||o===void 0||o.call(a,"marker_xAxis_extend",i.x)),c=Aa(i.x)?$T(i.x,s)+r.x:l.getXAxisHelper().dataToPosition([i.x])+r.x,c}function tY(i,e,t,n,s,r){var a,o;const{relativeSeries:l}=n;let c;return ye(i.y)&&Ld(e,i.y,t)&&((o=(a=l.getYAxisHelper())===null||a===void 0?void 0:a.setExtendDomain)===null||o===void 0||o.call(a,"marker_yAxis_extend",i.y)),c=Aa(i.y)?$T(i.y,s)+r.y:l.getYAxisHelper().dataToPosition([i.y])+r.y,c}function iY(i,e,t,n){var s,r;const{relativeSeries:a}=n;return ye(i.angle)&&Ld(e,i.angle,t)&&((r=(s=a.angleAxisHelper)===null||s===void 0?void 0:s.setExtendDomain)===null||r===void 0||r.call(s,"marker_angleAxis_extend",i.angle)),a.angleAxisHelper.dataToPosition([i.angle])}function nY(i,e,t,n){var s,r;const{relativeSeries:a}=n;return ye(i.radius)&&Ld(e,i.radius,t)&&((r=(s=a.radiusAxisHelper)===null||s===void 0?void 0:s.setExtendDomain)===null||r===void 0||r.call(s,"marker_radiusAxis_extend",i.radius)),a.radiusAxisHelper.dataToPosition([i.radius])}function $T(i,e){return Number(i.substring(0,i.length-1))*e/100}function U_(i){return m1t.includes(i)}function zT(i,e,t,n,s){const r=e.getRegion(),a=r.getLayoutStartPoint(),o=t.getRegion(),l=o.getLayoutStartPoint(),c=Math.abs(Math.min(a.x,l.x)-Math.max(a.x+r.getLayoutRect().width,l.x+o.getLayoutRect().width)),u=Math.abs(Math.min(a.y,l.y)-Math.max(a.y+r.getLayoutRect().height,l.y+o.getLayoutRect().height)),h={relativeSeries:n,startRelativeSeries:e,endRelativeSeries:t},d=[],p=i.latestData[0]&&i.latestData[0].latestData?i.latestData[0].latestData:i.latestData,f=n.getXAxisHelper().getScale(0).domain(),g=n.getYAxisHelper().getScale(0).domain();return p.forEach(m=>{const y=F(m.x),b=F(m.y);if(y&&b){const x=eY(m,f,s,h,c,a),S=tY(m,g,s,h,u,a);d.push([{x,y:S}])}else if(y){const x=eY(m,f,s,h,c,a),S=Math.max(a.y+r.getLayoutRect().height,l.y+o.getLayoutRect().height),C=Math.min(a.y,l.y);d.push([{x,y:S},{x,y:C}])}else if(b){const x=Math.min(a.x,l.x),S=tY(m,g,s,h,u,a),C=Math.max(a.x+r.getLayoutRect().width,l.x+o.getLayoutRect().width);d.push([{x,y:S},{x:C,y:S}])}}),d}function e$(i,e,t,n,s){const r={relativeSeries:n,startRelativeSeries:e,endRelativeSeries:t},a=[],o=i.latestData[0]&&i.latestData[0].latestData?i.latestData[0].latestData:i.latestData,l=n.angleAxisHelper.getScale(0).domain(),c=n.radiusAxisHelper.getScale(0).domain(),u=Math.min(n.getRegion().getLayoutRect().width/2,n.getRegion().getLayoutRect().height/2);return o.forEach(h=>{const d=F(h.angle),p=F(h.radius);if(d&&p){const f=iY(h,l,s,r),g=nY(h,c,s,r);a.push([{angle:f,radius:g}])}else if(d){const f=iY(h,l,s,r);a.push([{angle:f,radius:-u},{angle:f,radius:u}])}else if(p){const f=nY(h,c,s,r);a.push([{radius:f,angle:0},{radius:f,angle:2*Math.PI}])}}),a}function _1t(i,e){const t=[];return(i.latestData[0]&&i.latestData[0].latestData?i.latestData[0].latestData:i.latestData).forEach(n=>{F(n.areaName)&&t.push([{x:e.nameValueToPosition(n.areaName).x+e.getRegion().getLayoutStartPoint().x,y:e.nameValueToPosition(n.areaName).y+e.getRegion().getLayoutStartPoint().y}])}),t}function t$(i,e,t,n){const s=[],r=i.latestData[0]&&i.latestData[0].latestData?i.latestData[0].latestData:i.latestData,a=ie(n);return r.forEach((o,l)=>{var c,u,h,d;const p=o!=null&&o.getRefRelativeSeries?o.getRefRelativeSeries():e,f=p.getRegion(),g=f.getLayoutStartPoint(),{width:m,height:y}=f.getLayoutRect();let b=0,x=0;if(n){const T=a?n[l]:n,E=T.x,P=T.y;E&&(b=Aa(E)?Number(E.substring(0,E.length-1))*m/100:E),P&&(x=Aa(P)?Number(P.substring(0,P.length-1))*y/100:P)}const S=p.getXAxisHelper().getScale(0).domain(),C=p.getYAxisHelper().getScale(0).domain(),w=q(o.x),A=q(o.y);w.length===1&&ye(w[0])&&Ld(S,w[0],t)&&((u=(c=p.getXAxisHelper())===null||c===void 0?void 0:c.setExtendDomain)===null||u===void 0||u.call(c,"marker_xAxis_extend",w[0])),A.length===1&&ye(A[0])&&Ld(C,A[0],t)&&((d=(h=p.getYAxisHelper())===null||h===void 0?void 0:h.setExtendDomain)===null||d===void 0||d.call(h,"marker_yAxis_extend",A[0])),s.push({x:p.getXAxisHelper().dataToPosition(w)+g.x+b,y:p.getYAxisHelper().dataToPosition(A)+g.y+x})}),s}function _he(i,e,t){const n=[];return(i.latestData[0]&&i.latestData[0].latestData?i.latestData[0].latestData:i.latestData).forEach(s=>{var r,a,o,l;const c=s!=null&&s.getRefRelativeSeries?s.getRefRelativeSeries():e,u=c.angleAxisHelper.getScale(0).domain(),h=c.radiusAxisHelper.getScale(0).domain(),d=q(s.angle),p=q(s.radius);d.length===1&&ye(d[0])&&Ld(u,d[0],t)&&((a=(r=c.angleAxisHelper)===null||r===void 0?void 0:r.setExtendDomain)===null||a===void 0||a.call(r,"marker_xAxis_extend",d[0])),p.length===1&&ye(p[0])&&Ld(h,p[0],t)&&((l=(o=c.radiusAxisHelper)===null||o===void 0?void 0:o.setExtendDomain)===null||l===void 0||l.call(o,"marker_yAxis_extend",p[0])),n.push({angle:c.angleAxisHelper.dataToPosition(d),radius:c.radiusAxisHelper.dataToPosition(p)})}),n}function sY(i,e,t){let{x:n,y:s}=i;return Aa(n)&&(n=$T(n,e)),Aa(s)&&(s=$T(s,t)),{x:n,y:s}}function i$(i,e,t){let n;if(n=ee(i)?q(i(e.getData().getLatestData(),e)):q(i),t){const a=e.getRegion(),{x:o,y:l}=a.getLayoutStartPoint(),{width:c,height:u}=a.getLayoutRect();return n.map(h=>{let{x:d,y:p}=sY(h,c,u);return d+=o,p+=l,{x:d,y:p}})}const{width:s,height:r}=e.getOption().getChart().getViewRect();return n.map(a=>sY(a,s,r))}function n$(i){let e=1/0,t=-1/0,n=1/0,s=-1/0;return i.forEach(r=>{const a=r.getLayoutStartPoint(),o=r.getLayoutRect();a.x<e&&(e=a.x),a.x+o.width>t&&(t=a.x+o.width),a.y<n&&(n=a.y),a.y+o.height>s&&(s=a.y+o.height)}),{minX:e,maxX:t,minY:n,maxY:s}}function s$(i,e){const{labelBackground:t={},style:n,shape:s}=i,r=y1t(i,["labelBackground","style","shape"]);if(i.visible!==!1){const a=r;return s!=null&&s.visible?a.shape=Object.assign({visible:!0},Le(s.style)):a.shape={visible:!1},t.visible!==!1?(a.panel=Object.assign({visible:!0,customShape:t.customShape},$h(Le(t.style),e)),F(t.padding)&&(a.padding=Cr(t.padding))):(a.panel={visible:!1},a.padding=0),n&&(a.textStyle=$h(Le(n),e)),a}return{visible:!1}}function us(i,e){for(const t in i)ee(i[t])&&(i[t]=i[t](e));return i}function $h(i,e){return ee(i)?i(e):i}function rY(i,e){return ee(i)?i(e):i}function aY(i,e,t){return F(i)?e==="regionLeft"?t.getLayoutStartPoint().x-i.x:e==="regionRight"?t.getLayoutStartPoint().x+t.getLayoutRect().width-i.x:e==="regionTop"?t.getLayoutStartPoint().y-i.y:e==="regionBottom"?t.getLayoutStartPoint().y+t.getLayoutRect().height-i.y:e:e}function Yp(i){const e="x"in i,t="y"in i,n="x1"in i,s="y1"in i,r="angle"in i,a="radius"in i,o="angle1"in i,l="radius1"in i;return{doXProcess:e&&!t&&!s,doXYY1Process:e&&t&&s,doYProcess:t&&!e&&!n,doYXX1Process:t&&e&&n,doXYProcess:e&&t&&n&&s,doAngleProcess:r&&!o&&!a&&!l,doRadiusProcess:a&&!l&&!r&&!o,doAngRadRad1Process:r&&!o&&a&&l,doRadAngAng1Process:a&&r&&o&&!l,doRadAngProcess:r&&a&&o&&l,doCoordinatesProcess:"coordinates"in i&&(!("process"in i)||"process"in i&&"xy"in i.process)}}function qp(i){const e="x"in i,t="x1"in i,n="y"in i,s="y1"in i,r="angle"in i,a="radius"in i,o="angle1"in i,l="radius1"in i;return{doXProcess:e&&t&&!n&&!s,doYProcess:n&&s&&!e&&!t,doXYProcess:e&&t&&n&&s,doAngleProcess:r&&o&&!a&&!l,doRadiusProcess:a&&l&&!r&&!o,doRadAngProcess:r&&a&&o&&l,doCoordinatesProcess:"coordinates"in i}}function AB(i){return{doXYProcess:F(i.x)&&F(i.y),doPolarProcess:F(i.angle)&&F(i.radius),doGeoProcess:F(i.areaName)}}function v1t(i,e,t,n=0){const s=[],r=i.y-e.y,a=i.x-e.x;switch(t){case"top":s.push(i),s.push({x:i.x,y:r>0?i.y-n-Math.abs(r):i.y-n}),s.push({x:e.x,y:r>0?e.y-n:e.y-n-Math.abs(r)}),s.push(e);break;case"bottom":s.push(i),s.push({x:i.x,y:r<0?i.y+n+Math.abs(r):i.y+n}),s.push({x:e.x,y:r<0?e.y+n:e.y+n+Math.abs(r)}),s.push(e);break;case"left":s.push(i),s.push({x:a>0?i.x-n-Math.abs(a):i.x-n,y:i.y}),s.push({x:a>0?e.x-n:e.x-n-Math.abs(a),y:e.y}),s.push(e);break;case"right":s.push(i),s.push({x:a>0?i.x+n:i.x+n+Math.abs(a),y:i.y}),s.push({x:a>0?e.x+n+Math.abs(a):e.x+n,y:e.y}),s.push(e)}return s}function b1t(i,e,t,n=0){const s=i.y-e.y,r=i.x-e.x;return t==="bottom"?{dx:r>0?-r/2:Math.abs(r/2),dy:s>0?n:Math.abs(s)+n}:t==="top"?{dx:r>0?-Math.abs(r/2):+Math.abs(r/2),dy:s>0?-(Math.abs(s)+n):-n}:t==="left"?{dx:r>0?-r-n:-n,dy:s>0?-s/2:Math.abs(s/2)}:t==="right"?{dx:r>0?n:Math.abs(r)+n,dy:s>0?-s/2:Math.abs(s/2)}:{}}var x1t=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};const S1t=(i,e)=>{const t=i[0].latestData;return $oe(t,e.field)},C1t=(i,e)=>{const t=i[0].latestData;return i4(t,e.field)};function w1t(i,e){const t=i[0].latestData;return zoe(t,e.field)}function A1t(i,e){const t=i[0].latestData;return Hoe(t,e.field)}function k1t(i,e){const t=i[0].latestData;return Voe(t,e.field)}function T1t(i,e){const t=i[0].latestData;return nlt(t,e.field)}function E1t(i,e){const t=i[0].latestData;return slt(t,e.field)}function r$(i,e){let t;if(e.coordinates){const s=e,{coordinates:r,coordinateType:a,getSeriesByIdOrIndex:o}=s,l=x1t(s,["coordinates","coordinateType","getSeriesByIdOrIndex"]);let c,u;if(ee(r)){const h=e.getRelativeSeries();c=r(h.getData().getLatestData(),h)}else c=r;c=q(c),t=c.map(h=>{const d=o(h.refRelativeSeriesId,h.refRelativeSeriesIndex);if(a==="cartesian"){const{xField:p,yField:f}=d.getSpec(),{xFieldDim:g,xFieldIndex:m,yFieldDim:y,yFieldIndex:b}=h;let x=p;F(m)&&(x=q(p)[m]),g&&q(p).includes(g)&&(x=g);let S=f;F(b)&&(S=q(f)[b]),y&&q(f).includes(y)&&(S=y),u=Object.assign({x:void 0,y:void 0},l),be(h[x])&&U_(h[x])?u.x={field:x,aggrType:h[x]}:u.x=q(x).map(C=>h[C]),be(h[S])&&U_(h[S])?u.y={field:S,aggrType:h[S]}:u.y=q(S).map(C=>h[C])}else if(a==="polar"){const{valueField:p,categoryField:f}=d.getSpec(),{angleFieldDim:g,angleFieldIndex:m}=h;let y=f;F(m)&&(y=q(f)[m]),g&&q(f).includes(g)&&(y=g);const b=p;u=Object.assign({angle:void 0,radius:void 0},l),be(h[y])&&U_(h[y])?u.angle={field:y,aggrType:h[y]}:u.angle=q(y).map(x=>h[x]),be(h[b])&&U_(h[b])?u.radius={field:b,aggrType:h[b]}:u.radius=q(b).map(x=>h[x])}return u.getRefRelativeSeries=()=>d,u})}else t=e;const n=[];return t.forEach(s=>{const r={x:null,y:null,angle:null,radius:null,areaName:null};if(F(s.x)){const a=s.x;ie(a)?r.x=a.map(o=>Wc(o,i,s)):r.x=Wc(a,i,s)}if(F(s.y)){const a=s.y;ie(a)?r.y=a.map(o=>Wc(o,i,s)):r.y=Wc(a,i,s)}if(F(s.angle)){const a=s.angle;ie(a)?r.angle=a.map(o=>Wc(o,i,s)):r.angle=Wc(a,i,s)}if(F(s.radius)){const a=s.radius;ie(a)?r.radius=a.map(o=>Wc(o,i,s)):r.radius=Wc(a,i,s)}if(F(s.areaName)){const a=s.areaName;r.areaName=Wc(a,i,s)}s.getRefRelativeSeries&&(r.getRefRelativeSeries=s.getRefRelativeSeries),n.push(r)}),n}const P1t={min:S1t,max:C1t,sum:w1t,average:A1t,variance:k1t,standardDeviation:T1t,median:E1t};function Wc(i,e,t){const n=t.getRelativeSeries(),s=t.getStartRelativeSeries(),r=t.getEndRelativeSeries(),a=n.getData().getLatestData(),o=s.getData().getLatestData(),l=r.getData().getLatestData();if(ee(i))return i(a,o,l,n,s,r);if(vc(i)){const{aggrType:c,field:u}=i;return P1t[c](e,{field:u})}return i}class a$ extends Pr{constructor(){super(...arguments),this.layoutType="none",this._layoutOffsetX=0,this._layoutOffsetY=0}getRelativeSeries(){return this._relativeSeries}getMarkerData(){return this._markerData}static _getMarkerCoordinateType(e){return"cartesian"}static getSpecInfo(e){return Pl(e,this.specKey,this.type,t=>t.visible!==!1&&this._getMarkerCoordinateType(t)===this.coordinateType)}created(){super.created(),this._bindSeries(),this._initDataView(),this.initEvent()}_getAllRelativeSeries(){return{getRelativeSeries:()=>this._relativeSeries,getStartRelativeSeries:()=>this._startRelativeSeries,getEndRelativeSeries:()=>this._endRelativeSeries}}_getFieldInfoFromSpec(e,t,n){const s={x:"xField",y:"yField",radius:"valueField",angle:"categoryField",areaName:"nameField"};return be(t)&&U_(t)?{field:n.getSpec()[s[e]],aggrType:t}:t}_processSpecByDims(e){const t=this._relativeSeries,n={};return e.forEach(s=>n[s.dim]=this._getFieldInfoFromSpec(s.dim,s.specValue,t)),Object.assign(Object.assign({},n),this._getAllRelativeSeries())}_processSpecCoo(e){return Object.assign(Object.assign({coordinates:e.coordinates||e.coordinate},this._getAllRelativeSeries()),{getSeriesByIdOrIndex:(t,n)=>this._getSeriesByIdOrIndex(t,n),coordinateType:this.coordinateType})}_getRelativeDataView(){if(this._specifiedDataSeries){let e=[];q(this._specifiedDataSeries).forEach(n=>{e=e.concat(n.getViewData().latestData)});const t=new Td;return t.registerParser("array",Vne),new Rt(t).parse(e,{type:"array"})}return this._relativeSeries.getViewData()}updateLayoutAttribute(){var e,t,n;if((e=this._spec.visible)===null||e===void 0||e){if(!this._markerComponent){const s=this._createMarkerComponent();s.name=(t=this._spec.name)!==null&&t!==void 0?t:this.type,s.id=(n=this._spec.id)!==null&&n!==void 0?n:`${this.type}-${this.id}`,this._markerComponent=s,this.getContainer().add(this._markerComponent),this._markerComponent.on("*",(r,a)=>{this._delegateEvent(this._markerComponent,r,a,null,this.getMarkerData.bind(this))})}this._markerLayout()}super.updateLayoutAttribute()}_getSeriesByIdOrIndex(e,t){var n,s;let r;return r=(n=this._option.getSeriesInUserIdOrIndex(F(e)?[e]:[],[t]))===null||n===void 0?void 0:n[0],r||(r=(s=this._relativeSeries)!==null&&s!==void 0?s:this._getFirstSeries()),r}_bindSeries(){const e=this._spec;this._relativeSeries=this._getSeriesByIdOrIndex(e.relativeSeriesId,e.relativeSeriesIndex),this._startRelativeSeries=this._getSeriesByIdOrIndex(e.startRelativeSeriesId,e.startRelativeSeriesIndex),this._endRelativeSeries=this._getSeriesByIdOrIndex(e.endRelativeSeriesId,e.endRelativeSeriesIndex),e.specifiedDataSeriesIndex&&e.specifiedDataSeriesIndex==="all"||e.specifiedDataSeriesId&&e.specifiedDataSeriesId==="all"?this._specifiedDataSeries=this._option.getAllSeries():(e.specifiedDataSeriesIndex||e.specifiedDataSeriesId)&&(this._specifiedDataSeries=this._getSeriesByIdOrIndex(e.specifiedDataSeriesId,e.specifiedDataSeriesIndex))}initEvent(){this._relativeSeries.coordinate!=="cartesian"&&(this._relativeSeries.event.on("zoom",this._markerLayout.bind(this)),this._relativeSeries.event.on("panmove",this._markerLayout.bind(this)),this._relativeSeries.event.on("scroll",this._markerLayout.bind(this)))}onRender(e){}changeRegions(e){}clear(){super.clear(),this._firstSeries=null}_getFirstSeries(){var e;if(this._firstSeries)return this._firstSeries;const t=n4(this._regions);return t?(this._firstSeries=t,t):((e=this._option)===null||e===void 0||e.onError("need at least one series"),null)}_getNeedClearVRenderComponents(){return[this._markerComponent]}onLayoutStart(e,t,n){B(this._spec.offsetX)||(this._layoutOffsetX=Un(this._spec.offsetX,t.width,t)),B(this._spec.offsetY)||(this._layoutOffsetY=Un(this._spec.offsetY,t.height,t)),super.onLayoutStart(e,t,n)}_compareSpec(e,t){const n=super._compareSpec(e,t);return Pt(t,e)||(n.reRender=!0,n.reMake=!0,n.change=!0),n}}function O1t(i,e){const t=i[0].latestData;return rlt(t,e.fieldX,e.fieldY)}function o$(i,e){if(e&&e.getRelativeSeries){const t=e.getRelativeSeries();if(t){const n=t.getViewData();return n&&n.latestData&&n.latestData.length?i:[]}}return i}class l$ extends a${constructor(){super(...arguments),this.specKey="markLine",this.layoutZIndex=Xt.MarkLine}static _getMarkerCoordinateType(e){const{doAngleProcess:t,doRadiusProcess:n,doAngRadRad1Process:s,doRadAngAng1Process:r,doRadAngProcess:a}=Yp(e);return e.coordinateType==="polar"||t||n||s||r||a?"polar":"cartesian"}_createMarkerComponent(){var e,t,n,s,r,a,o,l,c,u,h,d,p,f,g,m,y,b,x;const{label:S={},startSymbol:C={},endSymbol:w={}}=this._spec,A={zIndex:this.layoutZIndex,interactive:(e=this._spec.interactive)===null||e===void 0||e,hover:(t=this._spec.interactive)===null||t===void 0||t,select:(n=this._spec.interactive)===null||n===void 0||n,points:[{x:0,y:0},{x:0,y:0}],center:{x:0,y:0},radius:0,startAngle:0,endAngle:0,lineStyle:$h(Le((s=this._spec.line)===null||s===void 0?void 0:s.style),this._markerData),clipInRange:(r=this._spec.clip)!==null&&r!==void 0&&r,label:s$(S,this._markerData),state:{line:us((o=(a=this._spec.line)===null||a===void 0?void 0:a.state)!==null&&o!==void 0?o:{},this._markerData),lineStartSymbol:us((c=(l=this._spec.startSymbol)===null||l===void 0?void 0:l.state)!==null&&c!==void 0?c:{},this._markerData),lineEndSymbol:us((h=(u=this._spec.endSymbol)===null||u===void 0?void 0:u.state)!==null&&h!==void 0?h:{},this._markerData),label:us((f=(p=(d=this._spec)===null||d===void 0?void 0:d.label)===null||p===void 0?void 0:p.state)!==null&&f!==void 0?f:{},this._markerData),labelBackground:us((b=(y=(m=(g=this._spec)===null||g===void 0?void 0:g.label)===null||m===void 0?void 0:m.labelBackground)===null||y===void 0?void 0:y.state)!==null&&b!==void 0?b:{},this._markerData)},animation:(x=this._spec.animation)!==null&&x!==void 0&&x,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate};return C.visible?A.startSymbol=Object.assign(Object.assign({},C),{visible:!0,style:Le(C.style)}):A.startSymbol={visible:!1},w.visible?A.endSymbol=Object.assign(Object.assign({},w),{visible:!0,style:Le(w.style)}):A.endSymbol={visible:!1},this._newMarkLineComponent(A)}_getUpdateMarkerAttrs(){var e,t,n,s;const r=this._spec,a=this._markerData,o=this._startRelativeSeries,l=this._endRelativeSeries,c=this._relativeSeries,u=this._computePointsAttr(),h=c.getViewData().latestData,d=a.latestData[0]&&a.latestData[0].latestData?a.latestData[0].latestData:a.latestData;let p;if(r.clip||!((e=r.label)===null||e===void 0)&&e.confine){const{minX:m,maxX:y,minY:b,maxY:x}=n$([o.getRegion(),l.getRegion(),c.getRegion()]);p={x:m,y:b,width:y-m,height:x-b}}const f=(n=(t=this._markerComponent)===null||t===void 0?void 0:t.attribute)!==null&&n!==void 0?n:{},g=Object.assign(Object.assign({},f.label),{text:this._spec.label.formatMethod?this._spec.label.formatMethod(d,h):(s=f.label)===null||s===void 0?void 0:s.text});return Object.assign(Object.assign({},u),{label:g,limitRect:p,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}_markerLayout(){var e;const t=this._getUpdateMarkerAttrs();(e=this._markerComponent)===null||e===void 0||e.setAttributes(t)}_initDataView(){const e=this._spec,t="coordinates"in e,{doXProcess:n,doYProcess:s,doXYY1Process:r,doYXX1Process:a,doXYProcess:o,doAngleProcess:l,doRadiusProcess:c,doAngRadRad1Process:u,doRadAngAng1Process:h,doRadAngProcess:d}=Yp(e);if(this._markerData=this._getRelativeDataView(),!(n||s||r||a||o||l||c||u||h||d||t))return;Fe(this._option.dataSet,"markerAggregation",r$),Fe(this._option.dataSet,"markerRegression",O1t),Fe(this._option.dataSet,"markerFilter",o$);const{options:p,needAggr:f,needRegr:g,processData:m}=this._computeOptions(),y=new Rt(this._option.dataSet);y.parse([m],{type:"dataview"}),f&&y.transform({type:"markerAggregation",options:p}),g&&y.transform({type:"markerRegression",options:p}),y.transform({type:"markerFilter",options:this._getAllRelativeSeries()}),y.target.on("change",()=>{this._markerLayout()}),this._markerData=y}}l$.specKey="markLine";class HT extends l${constructor(){super(...arguments),this.type=oe.markLine,this.name=oe.markLine,this.coordinateType="cartesian"}_newMarkLineComponent(e){return new id(e)}_computePointsAttr(){var e;const t=this._spec,n=this._markerData,s=this._startRelativeSeries,r=this._endRelativeSeries,a=this._relativeSeries,o=F(t.coordinates),l=F(t.process),c=l&&F(t.process.x),u=l&&F(t.process.y),h=F(t.positions),d=(e=t.autoRange)!==null&&e!==void 0&&e,{doXProcess:p,doYProcess:f,doXYY1Process:g,doYXX1Process:m,doXYProcess:y,doCoordinatesProcess:b}=Yp(t);let x=[];if(p||g||f||m||y||o&&c||o&&u){const S=zT(n,s,r,a,d);x=S.length===1?S[0]:S.map(C=>C[0])}else b?x=t$(n,a,d,t.coordinatesOffset):h&&(x=i$(t.positions,a,t.regionRelative));return{points:x}}_markerLayout(){var e,t,n,s,r,a,o,l;const c=this._getUpdateMarkerAttrs();if(this._spec.type==="type-step"){const u=this._startRelativeSeries,h=this._endRelativeSeries,{multiSegment:d,mainSegmentIndex:p}=this._spec.line||{},{connectDirection:f,expandDistance:g=0}=this._spec;let m;if(Aa(g)){const A=u.getRegion(),T=A.getLayoutStartPoint(),E=h.getRegion(),P=E.getLayoutStartPoint();if(f==="bottom"||f==="top"){const O=Math.abs(Math.min(T.y,P.y)-Math.max(T.y+A.getLayoutRect().height,P.y+E.getLayoutRect().height));m=Number(g.substring(0,g.length-1))*O/100}else{const O=Math.abs(Math.min(T.x,P.x)-Math.max(T.x+A.getLayoutRect().width,P.x+E.getLayoutRect().width));m=Number(g.substring(0,g.length-1))*O/100}}else m=g;const{points:y,label:b,limitRect:x}=c,S=v1t(y[0],y[1],f,m);let C;C=d&&F(p)?{position:"middle",autoRotate:!1,refX:0,refY:0}:Object.assign(Object.assign({position:"start",autoRotate:!1},b1t(y[0],y[1],f,m)),{refX:0,refY:0}),Z((e=this._spec.label)===null||e===void 0?void 0:e.refX)&&(C.refX+=this._spec.label.refX),Z((t=this._spec.label)===null||t===void 0?void 0:t.refY)&&(C.refY+=this._spec.label.refY),Z((n=this._spec.label)===null||n===void 0?void 0:n.dx)&&(C.dx=(C.dx||0)+this._spec.label.dx),Z((s=this._spec.label)===null||s===void 0?void 0:s.dy)&&(C.dy=(C.dy||0)+this._spec.label.dy);const w=(a=(r=this._markerComponent)===null||r===void 0?void 0:r.attribute)!==null&&a!==void 0?a:{};(o=this._markerComponent)===null||o===void 0||o.setAttributes({points:d?[[S[0],S[1]],[S[1],S[2]],[S[2],S[3]]]:S,label:Object.assign(Object.assign(Object.assign({},b),C),{textStyle:Object.assign(Object.assign({},w.label.textStyle),{textAlign:"center",textBaseline:"middle"})}),limitRect:x,multiSegment:d,mainSegmentIndex:p,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}else(l=this._markerComponent)===null||l===void 0||l.setAttributes(c)}_computeOptions(){let e,t=this._getRelativeDataView(),n=!0,s=!1;const r=this._spec,a=this._relativeSeries,{doXProcess:o,doYProcess:l,doXYY1Process:c,doYXX1Process:u,doXYProcess:h,doCoordinatesProcess:d}=Yp(r);if(h)e=[this._processSpecByDims([{dim:"x",specValue:r.x},{dim:"y",specValue:r.y}]),this._processSpecByDims([{dim:"x",specValue:r.x1},{dim:"y",specValue:r.y1}])];else if(o)e=[this._processSpecByDims([{dim:"x",specValue:r.x}])];else if(l)e=[this._processSpecByDims([{dim:"y",specValue:r.y}])];else if(c)e=[this._processSpecByDims([{dim:"x",specValue:r.x},{dim:"y",specValue:r.y}]),this._processSpecByDims([{dim:"x",specValue:r.x},{dim:"y",specValue:r.y1}])];else if(u)e=[this._processSpecByDims([{dim:"x",specValue:r.x},{dim:"y",specValue:r.y}]),this._processSpecByDims([{dim:"x",specValue:r.x1},{dim:"y",specValue:r.y}])];else if(d){if(e=this._processSpecCoo(r),n=!1,t=new Rt(this._option.dataSet,{name:`${this.type}_${this.id}_data`}).parse([a.getViewData()],{type:"dataview"}).transform({type:"markerAggregation",options:e}),r.process&&"x"in r.process&&(e=[this._processSpecByDims([{dim:"x",specValue:r.process.x}])],n=!0),r.process&&"y"in r.process&&(e=e=[this._processSpecByDims([{dim:"y",specValue:r.process.y}])],n=!0),r.process&&"xy"in r.process){const{xField:p,yField:f}=a.getSpec();e={fieldX:p,fieldY:f},s=!0}}else n=!1;return{options:e,needAggr:n,needRegr:s,processData:t}}}HT.type=oe.markLine,HT.coordinateType="cartesian";const M1t=()=>{X.registerComponent(HT.type,HT),koe()};class VT extends l${constructor(){super(...arguments),this.type=oe.polarMarkLine,this.name=oe.polarMarkLine,this.coordinateType="polar"}_newMarkLineComponent(e){const{doRadiusProcess:t,doRadAngAng1Process:n}=Yp(this._spec);return t||n?new Up(e):new id(e)}_computePointsAttr(){var e;const t=this._spec,n=this._markerData,s=this._startRelativeSeries,r=this._endRelativeSeries,a=this._relativeSeries,o=(e=t.autoRange)!==null&&e!==void 0&&e,{doAngleProcess:l,doRadiusProcess:c,doAngRadRad1Process:u,doRadAngAng1Process:h,doRadAngProcess:d,doCoordinatesProcess:p}=Yp(t);let f=[],g={};const m={x:this._relativeSeries.getRegion().getLayoutStartPoint().x+this._relativeSeries.angleAxisHelper.center().x,y:this._relativeSeries.getRegion().getLayoutStartPoint().y+this._relativeSeries.angleAxisHelper.center().y};if(l||c||u||h||d){const y=e$(n,s,r,a,o);f=y.length===1?y[0]:y.map(b=>b[0]),g=f[0].radius===f[1].radius?{radius:f[0].radius,startAngle:f[0].angle,endAngle:f[1].angle,center:m}:{points:f.map(b=>ui(m,b.radius,b.angle))}}else p&&(f=_he(n,a,o),g={points:f.map(y=>ui(m,y.radius,y.angle))});return g}_computeOptions(){const e=this._spec,{doAngleProcess:t,doRadiusProcess:n,doAngRadRad1Process:s,doRadAngAng1Process:r,doRadAngProcess:a,doCoordinatesProcess:o}=Yp(e);let l;const c=this._getRelativeDataView();return a?l=[this._processSpecByDims([{dim:"angle",specValue:e.angle},{dim:"radius",specValue:e.radius}]),this._processSpecByDims([{dim:"angle",specValue:e.angle1},{dim:"radius",specValue:e.radius1}])]:t?l=[this._processSpecByDims([{dim:"angle",specValue:e.angle}])]:n?l=[this._processSpecByDims([{dim:"radius",specValue:e.radius}])]:s?l=[this._processSpecByDims([{dim:"angle",specValue:e.angle},{dim:"radius",specValue:e.radius}]),this._processSpecByDims([{dim:"angle",specValue:e.angle},{dim:"radius",specValue:e.radius1}])]:r?l=[this._processSpecByDims([{dim:"angle",specValue:e.angle},{dim:"radius",specValue:e.radius}]),this._processSpecByDims([{dim:"angle",specValue:e.angle1},{dim:"radius",specValue:e.radius}])]:o&&(l=this._processSpecCoo(e)),{options:l,needAggr:!0,needRegr:!1,processData:c}}}VT.type=oe.polarMarkLine,VT.coordinateType="polar";const I1t=()=>{X.registerComponent(VT.type,VT),vot(),koe()};class UT extends Pr{get orient(){return this._orient}constructor(e,t){super(e,t),this.type=oe.title,this.specKey=oe.title,this.layoutType="normal",this.layoutZIndex=Xt.Title,this.layoutLevel=El.Title,this._orient="top",this._orient=r4(e.orient)?e.orient:"top"}initLayout(){super.initLayout(),this._layout&&(this._layout.layoutOrient=this._orient)}static getSpecInfo(e){return Pl(e,this.specKey,oe.title,t=>t.visible!==!1)}onRender(e){}_compareSpec(e,t){const n=super._compareSpec(e,t);return(t==null?void 0:t.orient)===(e==null?void 0:e.orient)&&(t==null?void 0:t.visible)===e.visible||(n.reMake=!0),n.change=!0,n.reRender=!0,n}changeRegions(e){}update(e){}resize(e){}afterSetLayoutStartPoint(e){Z(e.x)&&this._titleComponent&&this._titleComponent.setAttribute("x",e.x),Z(e.y)&&this._titleComponent&&this._titleComponent.setAttribute("y",e.y),super.afterSetLayoutStartPoint(e)}getBoundsInRect(e){let t={};this.setLayoutRect(e);const n=this._getTitleAttrs();this._createOrUpdateTitleComponent(n),t=this._getTitleLayoutRect();const{x:s,y:r}=this.getLayoutStartPoint();return{x1:s,y1:r,x2:s+t.width,y2:r+t.height}}_getTitleLayoutRect(){const e=this._titleComponent.AABBBounds;return{width:this._spec.width?this._spec.width:Z(e.width())?e.width():0,height:this._spec.height?this._spec.height:Z(e.height())?e.height():0}}_getTitleAttrs(){var e,t,n,s,r,a,o,l,c;const u=Math.max(0,(e=this._spec.width)!==null&&e!==void 0?e:this.getLayoutRect().width);return this._spec.visible===!1?{visible:!1}:Object.assign(Object.assign({},kc(this._spec,["padding"])),{textType:(t=this._spec.textType)!==null&&t!==void 0?t:"text",text:(n=this._spec.text)!==null&&n!==void 0?n:"",subtextType:(s=this._spec.subtextType)!==null&&s!==void 0?s:"text",subtext:(r=this._spec.subtext)!==null&&r!==void 0?r:"",x:(a=this._spec.x)!==null&&a!==void 0?a:0,y:(o=this._spec.y)!==null&&o!==void 0?o:0,width:u,height:this._spec.height,minWidth:this._spec.minWidth,maxWidth:this._spec.maxWidth,minHeight:this._spec.minHeight,maxHeight:this._spec.maxHeight,padding:this._spec.innerPadding,align:(l=this._spec.align)!==null&&l!==void 0?l:"left",verticalAlign:(c=this._spec.verticalAlign)!==null&&c!==void 0?c:"top",textStyle:Object.assign({width:u},this._spec.textStyle),subtextStyle:Object.assign({width:u},this._spec.subtextStyle)})}_createOrUpdateTitleComponent(e){if(this._titleComponent)Pt(e,this._cacheAttrs)||this._titleComponent.setAttributes(e);else{const t=this.getContainer(),n=new Loe(e);n.name="title",t.add(n),this._titleComponent=n,n.on("*",(s,r)=>this._delegateEvent(n,s,r))}return this._cacheAttrs=e,this._titleComponent}_getNeedClearVRenderComponents(){return[this._titleComponent]}clear(){super.clear(),this._cacheAttrs=null}}UT.type=oe.title,UT.specKey=oe.title;const R1t=()=>{X.registerComponent(UT.type,UT)};class c$ extends a${constructor(){super(...arguments),this.specKey="markArea",this.layoutZIndex=Xt.MarkArea}static _getMarkerCoordinateType(e){const{doAngleProcess:t,doRadiusProcess:n,doRadAngProcess:s}=qp(e);return e.coordinateType==="polar"||t||n||s?"polar":"cartesian"}_createMarkerComponent(){var e,t,n,s,r,a,o,l,c,u,h,d;const p=(e=this._spec.label)!==null&&e!==void 0?e:{},f={zIndex:this.layoutZIndex,interactive:(t=this._spec.interactive)===null||t===void 0||t,hover:(n=this._spec.interactive)===null||n===void 0||n,select:(s=this._spec.interactive)===null||s===void 0||s,points:[{x:0,y:0}],center:{x:0,y:0},innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,areaStyle:$h(Le((r=this._spec.area)===null||r===void 0?void 0:r.style),this._markerData),clipInRange:(a=this._spec.clip)!==null&&a!==void 0&&a,label:s$(p,this._markerData),state:{area:us((o=this._spec.area)===null||o===void 0?void 0:o.state,this._markerData),label:us((l=this._spec.label)===null||l===void 0?void 0:l.state,this._markerData),labelBackground:us((h=(u=(c=this._spec)===null||c===void 0?void 0:c.label)===null||u===void 0?void 0:u.labelBackground)===null||h===void 0?void 0:h.state,this._markerData)},animation:(d=this._spec.animation)!==null&&d!==void 0&&d,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate};return this._newMarkAreaComponent(f)}_markerLayout(){var e,t,n,s;const r=this._spec,a=this._markerData,o=this._startRelativeSeries,l=this._endRelativeSeries,c=this._relativeSeries,u=this._computePointsAttr(),h=this._getRelativeDataView().latestData,d=a?a.latestData[0]&&a.latestData[0].latestData?a.latestData[0].latestData:a.latestData:h;let p;if(r.clip||!((e=r.label)===null||e===void 0)&&e.confine){const{minX:f,maxX:g,minY:m,maxY:y}=n$([o.getRegion(),l.getRegion(),c.getRegion()]);p={x:f,y:m,width:g-f,height:y-m}}this._markerComponent&&this._markerComponent.setAttributes(Object.assign(Object.assign({},u),{label:Object.assign(Object.assign({},(t=this._markerComponent.attribute)===null||t===void 0?void 0:t.label),{text:this._spec.label.formatMethod?this._spec.label.formatMethod(d,h):(s=(n=this._markerComponent.attribute)===null||n===void 0?void 0:n.label)===null||s===void 0?void 0:s.text}),limitRect:p,dx:this._layoutOffsetX,dy:this._layoutOffsetY}))}_initDataView(){const e=this._spec,{doXProcess:t,doYProcess:n,doXYProcess:s,doAngleProcess:r,doRadiusProcess:a,doRadAngProcess:o,doCoordinatesProcess:l}=qp(e);if(!(t||n||s||r||a||o||l))return null;const{options:c}=this._computeOptions(),u=this._getRelativeDataView();Fe(this._option.dataSet,"markerAggregation",r$),Fe(this._option.dataSet,"markerFilter",o$);const h=new Rt(this._option.dataSet,{name:`${this.type}_${this.id}_data`});h.parse([u],{type:"dataview"}),h.transform({type:"markerAggregation",options:c}),h.transform({type:"markerFilter",options:this._getAllRelativeSeries()}),h.target.on("change",()=>{this._markerLayout()}),this._markerData=h}}c$.specKey="markArea";class WT extends c${constructor(){super(...arguments),this.type=oe.markArea,this.name=oe.markArea,this.coordinateType="cartesian"}_newMarkAreaComponent(e){return new nd(e)}_computePointsAttr(){var e;const t=this._spec,n=this._markerData,s=this._startRelativeSeries,r=this._endRelativeSeries,a=this._relativeSeries,{doXProcess:o,doYProcess:l,doXYProcess:c,doCoordinatesProcess:u}=qp(t),h=F(t.positions),d=(e=t.autoRange)!==null&&e!==void 0&&e;let p=[],f=[];if(c){f=zT(n,s,r,a,d);const[g,m]=f;g&&g.length&&m&&m.length&&(p=[{x:g[0].x,y:m[0].y},g[0],{x:m[0].x,y:g[0].y},m[0]])}else if(o||l){f=zT(n,s,r,a,d);const[g,m]=f;g&&g.length&&m&&m.length&&(p=[...g,m[1],m[0]])}else u?p=t$(n,a,d,t.coordinatesOffset):h&&(p=i$(t.positions,a,t.regionRelative));return{points:p}}_computeOptions(){const e=this._spec,{doXProcess:t,doYProcess:n,doXYProcess:s,doCoordinatesProcess:r}=qp(e);let a;return s?a=[this._processSpecByDims([{dim:"x",specValue:e.x},{dim:"y",specValue:e.y}]),this._processSpecByDims([{dim:"x",specValue:e.x1},{dim:"y",specValue:e.y1}])]:t?a=[this._processSpecByDims([{dim:"x",specValue:e.x}]),this._processSpecByDims([{dim:"x",specValue:e.x1}])]:n?a=[this._processSpecByDims([{dim:"y",specValue:e.y}]),this._processSpecByDims([{dim:"y",specValue:e.y1}])]:r&&(a=this._processSpecCoo(e)),{options:a}}}WT.type=oe.markArea,WT.coordinateType="cartesian";const L1t=()=>{X.registerComponent(WT.type,WT),Toe()};class GT extends c${constructor(){super(...arguments),this.type=oe.polarMarkArea,this.name=oe.polarMarkArea,this.coordinateType="polar"}_newMarkAreaComponent(e){const{doRadiusProcess:t,doAngleProcess:n,doRadAngProcess:s}=qp(this._spec);return n||t||s?new Wp(e):new nd(e)}_computePointsAttr(){var e;const t=this._spec,n=this._markerData,s=this._startRelativeSeries,r=this._endRelativeSeries,a=this._relativeSeries,{doAngleProcess:o,doRadiusProcess:l,doRadAngProcess:c,doCoordinatesProcess:u}=qp(t),h=(e=t.autoRange)!==null&&e!==void 0&&e;let d,p={};const f={x:this._relativeSeries.getRegion().getLayoutStartPoint().x+this._relativeSeries.angleAxisHelper.center().x,y:this._relativeSeries.getRegion().getLayoutStartPoint().y+this._relativeSeries.angleAxisHelper.center().y};if(o||l||c){const g=e$(n,s,r,a,h);c?p={innerRadius:g[0][0].radius,outerRadius:g[1][0].radius,startAngle:g[0][0].angle,endAngle:g[1][0].angle,center:f}:o?p={innerRadius:0,outerRadius:Math.abs(g[0][0].radius),startAngle:g[0][1].angle,endAngle:g[1][1].angle,center:f}:l&&(p={innerRadius:g[0][0].radius,outerRadius:g[1][0].radius,startAngle:g[0][0].angle,endAngle:g[1][1].angle,center:f})}else u&&(d=_he(n,a,h),p={points:d.map(g=>ui(f,g.radius,g.angle))});return p}_computeOptions(){const e=this._spec,{doAngleProcess:t,doRadiusProcess:n,doRadAngProcess:s,doCoordinatesProcess:r}=qp(e);let a;return s?a=[this._processSpecByDims([{dim:"angle",specValue:e.angle},{dim:"radius",specValue:e.radius}]),this._processSpecByDims([{dim:"angle",specValue:e.angle1},{dim:"radius",specValue:e.radius1}])]:t?a=[this._processSpecByDims([{dim:"angle",specValue:e.angle},{dim:"radius",specValue:e.radius}]),this._processSpecByDims([{dim:"angle",specValue:e.angle1},{dim:"radius",specValue:e.radius}])]:n?a=[this._processSpecByDims([{dim:"radius",specValue:e.radius}]),this._processSpecByDims([{dim:"radius",specValue:e.radius1}])]:r&&(a=this._processSpecCoo(e)),{options:a}}}GT.type=oe.polarMarkArea,GT.coordinateType="polar";const D1t=()=>{X.registerComponent(GT.type,GT),bot(),Toe()},oY=i=>{const e=Object.assign({},i);return Le(e)},F1t=i=>{const e=Object.assign({},i);return Le(e)},kC=i=>Object.assign(Object.assign({},i),{style:Object.assign({},Le(i.style))}),vhe=i=>{var e,t,n,s,r,a,o,l,c,u,h,d,p,f,g;const m=oY((t=(e=i==null?void 0:i.slider)===null||e===void 0?void 0:e.trackStyle)!==null&&t!==void 0?t:{}),y=oY((s=(n=i==null?void 0:i.slider)===null||n===void 0?void 0:n.railStyle)!==null&&s!==void 0?s:{}),b=F1t((a=(r=i==null?void 0:i.slider)===null||r===void 0?void 0:r.handlerStyle)!==null&&a!==void 0?a:{}),x=kC((l=(o=i==null?void 0:i.controller)===null||o===void 0?void 0:o.start)!==null&&l!==void 0?l:{}),S=kC((u=(c=i==null?void 0:i.controller)===null||c===void 0?void 0:c.pause)!==null&&u!==void 0?u:{}),C=kC((d=(h=i==null?void 0:i.controller)===null||h===void 0?void 0:h.backward)!==null&&d!==void 0?d:{}),w=kC((f=(p=i==null?void 0:i.controller)===null||p===void 0?void 0:p.forward)!==null&&f!==void 0?f:{}),A=Object.assign(Object.assign({},i),{direction:i.direction,interval:i.interval,visible:i.visible,orient:(g=i.orient)!==null&&g!==void 0?g:"bottom",slider:Object.assign(Object.assign({},i.slider),{trackStyle:m,railStyle:y,handlerStyle:b}),controller:Object.assign(Object.assign({},i.controller),{start:x,pause:S,backward:C,forward:w})});return i.visible||(A.controller.visible=!1,A.slider.visible=!1),A},B1t=(i,e)=>Object.assign(Object.assign({},vhe(i)),{data:e,type:"continuous"}),j1t=(i,e)=>Object.assign(Object.assign({},vhe(i)),{data:e,type:"discrete"}),v_=i=>i==="left"||i==="right",eR=i=>i==="top"||i==="bottom";class KT extends Pr{constructor(){super(...arguments),this.layoutZIndex=Xt.Player,this.layoutLevel=El.Player,this.specKey="player",this.type=oe.player,this._orient="bottom",this._getPlayerAttrs=()=>{var e,t,n,s,r,a;const o=this._spec.type,l={size:{width:this._width,height:this._height},dx:(e=this._spec.dx)!==null&&e!==void 0?e:0+this._dx,dy:(t=this._spec.dy)!==null&&t!==void 0?t:0+this._dy};return o==="discrete"?Object.assign(Object.assign(Object.assign({},j1t(this._spec,this._specs)),l),{disableTriggerEvent:this._option.disableTriggerEvent,loop:(s=(n=this._spec)===null||n===void 0?void 0:n.loop)===null||s===void 0||s}):Object.assign(Object.assign(Object.assign({},B1t(this._spec,this._specs)),l),{disableTriggerEvent:this._option.disableTriggerEvent,loop:(a=(r=this._spec)===null||r===void 0?void 0:r.loop)===null||a===void 0||a})},this._createOrUpdatePlayerComponent=()=>{const e=Object.assign({},this._getPlayerAttrs()),t=this.getContainer();this._playerComponent?Pt(e,this._cacheAttrs)||(this._cacheAttrs=e,this._playerComponent.setAttributes(e),this._playerComponent._initAttributes(),this._playerComponent.render()):(e.type==="discrete"?this._playerComponent=new Got(e):this._playerComponent=new Xot(e),this._cacheAttrs=e,this._playerComponent.name="player",t.add(this._playerComponent),this._initEvent())},this._maxSize=()=>{var e,t,n,s,r,a,o,l,c;return Math.max(...q((t=(e=this._spec.controller.start)===null||e===void 0?void 0:e.style)===null||t===void 0?void 0:t.size),...q((s=(n=this._spec.controller.pause)===null||n===void 0?void 0:n.style)===null||s===void 0?void 0:s.size),...q((a=(r=this._spec.controller.backward)===null||r===void 0?void 0:r.style)===null||a===void 0?void 0:a.size),...q((l=(o=this._spec.controller.forward)===null||o===void 0?void 0:o.style)===null||l===void 0?void 0:l.size),(c=v_(this._orient)?this._spec.slider.railStyle.width:this._spec.slider.railStyle.height)!==null&&c!==void 0?c:10)},this._sliderExceededSize=()=>{var e,t,n,s,r,a,o,l,c;const u=(e=v_(this._orient)?this._spec.slider.railStyle.width:this._spec.slider.railStyle.height)!==null&&e!==void 0?e:10,h=Math.max(...q((n=(t=this._spec.controller.start)===null||t===void 0?void 0:t.style)===null||n===void 0?void 0:n.size),...q((r=(s=this._spec.controller.pause)===null||s===void 0?void 0:s.style)===null||r===void 0?void 0:r.size),...q((o=(a=this._spec.controller.backward)===null||a===void 0?void 0:a.style)===null||o===void 0?void 0:o.size),...q((c=(l=this._spec.controller.forward)===null||l===void 0?void 0:l.style)===null||c===void 0?void 0:c.size));return u>=h?u-h:0},this._initEvent=()=>{this._option.disableTriggerEvent||(this._option.globalInstance.on(ke.rendered,()=>{var e;!((e=this._spec)===null||e===void 0)&&e.auto&&this._playerComponent.play()}),this._playerComponent.addEventListener(tn.end,()=>{var e;this.event.emit(ke.playerEnd,{model:this}),this._alternate&&this._spec.type==="discrete"&&(this._direction=this._direction==="default"?"reverse":"default",this._playerComponent.setAttributes({direction:this._direction,dataIndex:this._direction==="reverse"?this._specs.length-2:1})),!((e=this._spec)===null||e===void 0)&&e.loop&&this._playerComponent.play()}),this._playerComponent.addEventListener(tn.change,e=>{const{index:t}=e.detail;this.changePlayerIndex(t)}),this._playerComponent.addEventListener(tn.backward,e=>{const{index:t}=e.detail,n=this._specs[t];this.event.emit(ke.playerBackward,{model:this,value:{spec:n,index:t,specs:this._specs}})}),this._playerComponent.addEventListener(tn.forward,e=>{const{index:t}=e.detail,n=this._specs[t];this.event.emit(ke.playerForward,{model:this,value:{spec:n,index:t,specs:this._specs}})}),this._playerComponent.addEventListener(tn.play,e=>{const{index:t}=e.detail,n=this._specs[t];this.event.emit(ke.playerPlay,{model:this,value:{spec:n,index:t,specs:this._specs}})}),this._playerComponent.addEventListener(tn.pause,e=>{const{index:t}=e.detail,n=this._specs[t];this.event.emit(ke.playerPause,{model:this,value:{spec:n,index:t,specs:this._specs}})}))}}get orient(){return this._orient}set layoutOrient(e){this._orient=e}setAttrFromSpec(){var e,t,n,s,r,a,o,l;super.setAttrFromSpec(),this._orient=(e=this._spec.orient)!==null&&e!==void 0?e:"bottom",this._specs=(t=this._spec.specs)!==null&&t!==void 0?t:[],this._direction=(n=this._spec.direction)!==null&&n!==void 0?n:"default",this._alternate=(s=this._spec.alternate)!==null&&s!==void 0&&s,this._dx=(r=this._spec.dx)!==null&&r!==void 0?r:0,this._dy=(a=this._spec.dy)!==null&&a!==void 0?a:0,this._position=(o=this._spec.position)!==null&&o!==void 0?o:"middle",this._visible=(l=this._spec.visible)===null||l===void 0||l}afterSetLayoutStartPoint(e){if(super.afterSetLayoutStartPoint(e),Z(e.x)){const t=v_(this._orient)?e.x+this._sliderExceededSize()/2:e.x;this._playerComponent&&this._playerComponent.setAttribute("x",t)}if(Z(e.y)){const t=eR(this._orient)?e.y+this._sliderExceededSize()/2:e.y;this._playerComponent&&this._playerComponent.setAttribute("y",t)}}getBoundsInRect(e,t){this._width=this._computeWidth(e),this._height=this._computeHeight(e),this._dx=this._computeDx(t),this._dy=this._computeDy(t);const n=this._computeLayoutRect(e,this._width,this._height);return this._createOrUpdatePlayerComponent(),n}changeRegions(e){}onRender(e){}_getNeedClearVRenderComponents(){return[this._playerComponent]}_computeLayoutRect(e,t,n){if(this._visible===!1)return{x1:0,x2:0,y1:0,y2:0};switch(this._orient){case"top":case"left":return{x1:0,y1:0,x2:t,y2:n};case"right":return{x1:e.width-t,y1:0,x2:e.width,y2:e.height};default:return{x1:0,y1:e.height-n,x2:e.width,y2:e.height}}}_computeWidth(e){return ye(this._spec.width)?Math.min(e.width,Number(this._spec.width)):v_(this._orient)?this._maxSize():e.width}_computeHeight(e){return ye(this._spec.height)?(this._height=this._spec.height,Math.min(e.height,Number(this._spec.height))):eR(this._orient)?this._maxSize():e.height}_computeDx(e){return v_(this._orient)||this._position==="start"?0:this._position==="middle"?(e.width-this._width)/2:e.width-this._width}_computeDy(e){return eR(this._orient)||this._position==="start"?0:this._position==="middle"?(e.height-this._height)/2:e.height-this._height}changePlayerIndex(e){const t=this._specs[e];q(t.data).forEach(n=>{var s,r;(r=(s=this._option)===null||s===void 0?void 0:s.globalInstance)===null||r===void 0||r.updateData(n.id,n.values)}),this.event.emit(ke.playerChange,{model:this,value:{spec:t,index:e,specs:this._specs}})}}KT.specKey="player",KT.type=oe.player;const N1t=()=>{X.registerComponent(KT.type,KT)};class u$ extends Pr{constructor(e,t){super(e,t),this.type=oe.label,this.name=oe.label,this.layoutType="none",this.layoutZIndex=Xt.Label,this._regions=t.getRegionsInIndex(t.regionIndexes)}_interactiveConfig(e){const{interactive:t}=e,n={hover:!1,select:!1,state:e.state};if(t!==!0)return n;const{hover:s,select:r}=this._option.getChart().getSpec();return s===!1&&s.enable===!1||(n.hover=!0),r===!1&&r.enable===!1||(n.select=!0),n}_compareSpec(e,t){const n=super._compareSpec(e,t);return n.reRender=!0,Pt(t,e)||(n.reMake=!0),n}onRender(e){}changeRegions(e){}_getNeedClearVRenderComponents(){return[]}}u$.type=oe.label;class XT extends By{constructor(){super(...arguments),this.skipEncode=!1}getRule(){return this._rule}setRule(e){this._rule=e}getTarget(){return this._target}setTarget(e){this._target=e,this._rule||this.setRule(e.type)}getComponent(){return this._component}setComponent(e){this._component=e}}XT.type="text",XT.constructorType="label";const bhe=()=>{X.registerMark(XT.constructorType,XT),kle()};class xhe extends Kx{_initTheme(e,t){return{spec:e,theme:this._theme}}}class eb extends u${constructor(e,t){super(e,t),this.type=oe.label,this.name=oe.label,this.specKey="label",this.transformerConstructor=xhe,this.layoutZIndex=Xt.Label,this._layoutRule=e.labelLayout||"series"}static getSpecInfo(e,t){const n=[];return((t==null?void 0:t.region)||[]).forEach((r,a)=>{(r.seriesIndexes||[]).some(o=>{const l=t.series[o],{markLabelSpec:c={}}=l;return Object.values(c).some(u=>Array.isArray(u)&&(h=>h.some(d=>d.visible))(u))})&&n.push({spec:e,type:oe.label,specInfoPath:["component",this.specKey,a],regionIndexes:[a]})}),n}init(e){super.init(e),this.initEvent(),this._initTextMark(),this._initLabelComponent(),this._initTextMarkStyle()}reInit(e){super.reInit(e),this._labelInfoMap&&this._labelInfoMap.clear(),this._initTextMark(),this._initTextMarkStyle()}initEvent(){this.event.on(ke.dataZoomChange,()=>{this._labelComponentMap.forEach((t,n)=>{const s=n.getProduct().getGroupGraphicItem();s&&s.disableAnimation()}),this.event.on(Ee.AFTER_MARK_RENDER_END,e)});const e=()=>{this._labelComponentMap.forEach((t,n)=>{const s=n.getProduct().getGroupGraphicItem();s&&s.enableAnimation()}),this.event.off(Ee.AFTER_MARK_RENDER_END,e)}}_initTextMark(){this._labelInfoMap||(this._labelInfoMap=new Map),this._labelComponentMap||(this._labelComponentMap=new Map),Vi(this._regions,e=>{const{markLabelSpec:t={}}=e.getSpecInfo(),n=Object.keys(t),s=e.getRegion();this._labelInfoMap.get(s)||this._labelInfoMap.set(s,[]);for(let r=0;r<n.length;r++){const a=n[r],o=e.getMarkInName(a);o&&t[a].forEach((l,c)=>{if(l.visible){const u=this._labelInfoMap.get(s),h=this._createMark({type:"label",name:`${a}-label-${c}`},{noSeparateStyle:!0,attributeContext:e.getMarkAttributeContext()});h.setTarget(o),u.push({labelMark:h,baseMark:o,series:e,labelSpec:l})}})}})}_initLabelComponent(){this._labelInfoMap.forEach((e,t)=>{if(this._layoutRule==="region"){const n=this._createMark({type:"component",name:`${t.getGroupMark().name}-label-component`},{componentType:"label",noSeparateStyle:!0},{support3d:this._spec.support3d});n&&(n.setSkipBeforeLayouted(!0),e[0]&&F(e[0].labelSpec.zIndex)&&n.setMarkConfig({zIndex:e[0].labelSpec.zIndex}),this._marks.addMark(n),this._labelComponentMap.set(n,()=>this._labelInfoMap.get(t)))}else e.forEach((n,s)=>{const r=this._createMark({type:"component",name:`${n.labelMark.name}-component`},{componentType:"label",noSeparateStyle:!0},{support3d:n.baseMark.getMarkConfig().support3d});r&&(F(n.labelSpec.zIndex)&&r.setMarkConfig({zIndex:n.labelSpec.zIndex}),r.setSkipBeforeLayouted(!0),this._marks.addMark(r),this._labelComponentMap.set(r,()=>this._labelInfoMap.get(t)[s]))})})}_initTextMarkStyle(){this._labelComponentMap.forEach((e,t)=>{q(e()).forEach(({labelMark:n})=>{n.setComponent(t)})}),this._labelInfoMap.forEach(e=>{e.forEach(t=>{var n,s;const{labelMark:r,labelSpec:a,series:o}=t;if(this.initMarkStyleWithSpec(r,a,void 0),ee(a==null?void 0:a.getStyleHandler)){const l=a.getStyleHandler(o);l==null||l.call(o,r,a)}!((s=(n=r.stateStyle)===null||n===void 0?void 0:n.normal)===null||s===void 0)&&s.lineWidth&&r.setAttribute("stroke",o.getColorAttribute(),"normal",pe.Base_Series)})})}updateLayoutAttribute(){super.updateLayoutAttribute(),this._labelComponentMap.forEach((e,t)=>{const n=e();ie(n)?this._updateMultiLabelAttribute(n,t):this._updateSingleLabelAttribute(n,t)})}_updateMultiLabelAttribute(e,t){this._updateLabelComponentAttribute(t.getProduct(),e.map(({baseMark:n})=>n.getProduct()),e)}_updateSingleLabelAttribute(e,t){const{baseMark:n}=e;this._updateLabelComponentAttribute(t.getProduct(),n.getProduct(),[e])}_updateLabelComponentAttribute(e,t,n){const s=this._option.getComponentsByType("totalLabel");e.target(t).configure({interactive:!1}).depend(s.map(r=>r.getMarks()[0].getProduct())).labelStyle((r,a)=>{var o,l;const c=n[a.labelIndex];if(c){const{labelSpec:u,labelMark:h,series:d}=c,p=h.getRule(),f=this._interactiveConfig(u),g=(l=(o=this._spec)===null||o===void 0?void 0:o.centerOffset)!==null&&l!==void 0?l:0;let m=Pe({textStyle:Object.assign({pickable:u.interactive===!0},u.style),overlap:{avoidMarks:s.map(y=>y.getMarks()[0].getProductId())}},tyt(p,c),Object.assign(Object.assign(Object.assign({},kc(u,["position","style","state","type","stackDataFilterType","getStyleHandler"])),f),{centerOffset:g}),u.stackDataFilterType?{dataFilter:u.stackDataFilterType==="min"?y=>y.filter(b=>b.data[tle]):y=>y.filter(b=>b.data[h1])}:{});return d&&d.parseLabelStyle&&(m=d.parseLabelStyle(m,u,h)),p!=="line"&&p!=="area"||(m.type=p),m}}).encode((r,a,o)=>{if(n[o.labelIndex]){const{labelSpec:l,labelMark:c}=n[o.labelIndex];return c.skipEncode?{data:r}:B4(n[o.labelIndex],r,l.formatMethod,l.formatter)}}).size(()=>n[0].series.getRegion().getLayoutRect())}compileMarks(){this.getMarks().forEach(e=>{const t=this._labelComponentMap.get(e)();let n;n=ie(t)?t[0].series.getRegion().getGroupMark().getProduct():t.series.getRegion().getGroupMark().getProduct(),e.compile({group:n,context:{model:this,labelInfo:t}})})}getVRenderComponents(){const e=[];return this._labelComponentMap.forEach((t,n)=>{const s=n.getProduct().getGroupGraphicItem();s&&e.push(s)}),e}}eb.type=oe.label,eb.specKey="label",eb.transformerConstructor=xhe;const $1t=()=>{Fle(),bhe(),LO(),X.registerComponent(eb.type,eb,!0)};class YT extends u${constructor(){super(...arguments),this.type=oe.totalLabel,this.name=oe.totalLabel,this.specKey="totalLabel",this.layoutZIndex=Xt.Label}static getSpecInfo(e,t){var n;const s=[];return(n=t==null?void 0:t.region)===null||n===void 0||n.forEach((r,a)=>{var o;(o=r.seriesIndexes)===null||o===void 0||o.forEach(l=>{const{spec:c}=t.series[l],u=c[this.specKey];u!=null&&u.visible&&s.push({spec:u,type:oe.totalLabel,specPath:["series",l,this.specKey],specInfoPath:["component",this.specKey,l],regionIndexes:[a],seriesIndexes:[l]})})}),s}init(e){super.init(e),this._initTextMark(),this._initLabelComponent()}reInit(e){super.reInit(e),this._initTextMark()}_initTextMark(){var e;const t=this._getSeries();if(!((e=t.getSpec().totalLabel)===null||e===void 0)&&e.visible){const n=t.getSeriesMark();if(n){const s=this._createMark({type:"label",name:`${n.name}-total-label`});this._baseMark=n,this._textMark=s,this._initTextMarkStyle()}}}_initTextMarkStyle(){var e;super.initMarkStyleWithSpec(this._textMark,this._spec),this.setMarkStyle(this._textMark,{text:n=>n[ele]},"normal",pe.Default);const t=this._getSeries();(e=t.initTotalLabelMarkStyle)===null||e===void 0||e.call(t,this._textMark)}_initLabelComponent(){const e=this._getSeries(),t=this._createMark({type:"component",name:`${e.name}-total-label-component`},{componentType:"label",noSeparateStyle:!0},{support3d:this._spec.support3d});t&&this._marks.addMark(t)}updateLayoutAttribute(){super.updateLayoutAttribute();const e=this._getSeries();this._marks.forEach((t,n)=>{t.getProduct().target(this._baseMark.getProduct()).configure({interactive:!1}).labelStyle(()=>{var s,r;if(this._baseMark){const{offset:a,animation:o,overlap:l}=this._spec,c=this._interactiveConfig(this._spec);return Pe({textStyle:{pickable:this._spec.interactive===!0},position:z1t(e,this._baseMark.type),x:0,y:0},(r=(s=e.getTotalLabelComponentStyle)===null||s===void 0?void 0:s.call(e,{baseMark:this._baseMark,labelMark:this._textMark}))!==null&&r!==void 0?r:{},Object.assign({offset:a,animation:o,overlap:l,dataFilter:u=>u.filter(h=>h.data[h1])},c))}}).encode(s=>B4({baseMark:this._baseMark,labelMark:this._textMark,series:e,labelSpec:e.getSpec().totalLabel},s,this._spec.formatMethod)).size(()=>this._regions[0].getLayoutRect())})}compileMarks(){this.getMarks().forEach(e=>{const t=this._regions[0].getGroupMark().getProduct();e.compile({group:t,context:{model:this}})})}getVRenderComponents(){const e=[];return this.getMarks().forEach(t=>{const n=t.getProduct().getGroupGraphicItem();n&&e.push(n)}),e}_getSeries(){return this._option.getSeriesInIndex([this.getSpecPath()[1]])[0]}}YT.type=oe.totalLabel,YT.specKey="totalLabel";function z1t(i,e){var t,n;let s;const{direction:r}=i,a={vertical:["top","bottom"],horizontal:["right","left"]},o=(r==="horizontal"?!((t=i.getXAxisHelper())===null||t===void 0)&&t.isInverse():!((n=i.getYAxisHelper())===null||n===void 0)&&n.isInverse())?1:0;switch(e){case"rect":case"symbol":s=a[r][o];break;default:s="top"}return s}const H1t=()=>{Fle(),bhe(),LO(),X.registerComponent(YT.type,YT,!0)};var lY=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};class YO extends a${constructor(){super(...arguments),this.specKey="markPoint",this.layoutZIndex=Xt.MarkPoint}static _getMarkerCoordinateType(e){const{doPolarProcess:t,doGeoProcess:n}=AB(e);return e.coordinateType==="polar"||t?"polar":e.coordinateType==="geo"||n?"geo":"cartesian"}_createMarkerComponent(){var e,t,n,s,r,a,o,l,c,u,h,d,p,f,g,m,y,b,x,S,C,w,A,T,E,P,O,M;const{itemContent:R={},itemLine:j={},targetSymbol:I={}}=this._spec,{text:D={},symbol:z,image:$,richText:V}=R,L=lY(R,["text","symbol","image","richText"]),Y={zIndex:this.layoutZIndex,interactive:(e=this._spec.interactive)===null||e===void 0||e,hover:(t=this._spec.interactive)===null||t===void 0||t,select:(n=this._spec.interactive)===null||n===void 0||n,position:{x:0,y:0},clipInRange:(s=this._spec.clip)!==null&&s!==void 0&&s,itemContent:Object.assign({offsetX:rY(R.offsetX,this._relativeSeries.getRegion()),offsetY:rY(R.offsetX,this._relativeSeries.getRegion())},L),targetSymbol:{offset:(r=I.offset)!==null&&r!==void 0?r:0,visible:(a=I.visible)!==null&&a!==void 0&&a,size:(o=I.size)!==null&&o!==void 0?o:20,style:$h(I.style,this._markerData)},state:{line:us((c=(l=this._spec.itemLine.line)===null||l===void 0?void 0:l.state)!==null&&c!==void 0?c:{},this._markerData),lineStartSymbol:us((h=(u=this._spec.itemLine.startSymbol)===null||u===void 0?void 0:u.state)!==null&&h!==void 0?h:{},this._markerData),lineEndSymbol:us((p=(d=this._spec.itemLine.endSymbol)===null||d===void 0?void 0:d.state)!==null&&p!==void 0?p:{},this._markerData),symbol:us((g=(f=this._spec.itemContent.symbol)===null||f===void 0?void 0:f.state)!==null&&g!==void 0?g:{},this._markerData),image:us((y=(m=this._spec.itemContent.image)===null||m===void 0?void 0:m.state)!==null&&y!==void 0?y:{},this._markerData),text:us((x=(b=this._spec.itemContent.text)===null||b===void 0?void 0:b.state)!==null&&x!==void 0?x:{},this._markerData),textBackground:us((C=(S=this._spec.itemContent.text)===null||S===void 0?void 0:S.labelBackground)===null||C===void 0?void 0:C.state,this._markerData),richText:us((A=(w=this._spec.itemContent.richText)===null||w===void 0?void 0:w.state)!==null&&A!==void 0?A:{},this._markerData),customMark:us((E=(T=this._spec.itemContent.customMark)===null||T===void 0?void 0:T.state)!==null&&E!==void 0?E:{},this._markerData),targetItem:us((O=(P=this._spec.targetSymbol)===null||P===void 0?void 0:P.state)!==null&&O!==void 0?O:{},this._markerData)},animation:(M=this._spec.animation)!==null&&M!==void 0&&M,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate};z!=null&&z.style&&(Y.itemContent.symbolStyle=Le($h(z.style,this._markerData))),$!=null&&$.style&&(Y.itemContent.imageStyle=$h($.style,this._markerData)),D&&(Y.itemContent.textStyle=s$(D,this._markerData)),V!=null&&V.style&&(Y.itemContent.richTextStyle=$h(V.style,this._markerData));const{visible:ae,line:W={}}=j,ce=lY(j,["visible","line"]);return Y.itemLine=ae!==!1?Object.assign(Object.assign({},ce),{visible:!0,lineStyle:Le(W.style)}):{visible:!1},new sd(Y)}_markerLayout(){var e,t,n,s,r;const a=this._spec,o=this._markerData,l=this._relativeSeries,{point:c}=this._computePointsAttr(),u=this._getRelativeDataView().latestData,h=o?o.latestData[0]&&o.latestData[0].latestData?o.latestData[0].latestData:o.latestData:u;let d;if(a.clip||!((e=a.itemContent)===null||e===void 0)&&e.confine){const{minX:p,maxX:f,minY:g,maxY:m}=n$([l.getRegion()]);d={x:p,y:g,width:f-p,height:m-g}}if(this._markerComponent){const p=(t=this._markerComponent.attribute)!==null&&t!==void 0?t:{},f=(s=(n=p.itemContent)===null||n===void 0?void 0:n.textStyle)!==null&&s!==void 0?s:{};this._markerComponent.setAttributes({position:c===void 0?{x:null,y:null}:c,itemContent:Object.assign(Object.assign({},p.itemContent),{textStyle:Object.assign(Object.assign({},f),{text:!((r=this._spec.itemContent.text)===null||r===void 0)&&r.formatMethod?this._spec.itemContent.text.formatMethod(h,u):f.text}),offsetX:aY(c,p.itemContent.offsetX,this._relativeSeries.getRegion()),offsetY:aY(c,p.itemContent.offsetY,this._relativeSeries.getRegion())}),limitRect:d,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}}_initDataView(){const e=this._spec,{doXYProcess:t,doPolarProcess:n,doGeoProcess:s}=AB(e);if(!(F(e.coordinate)||t||n||s))return;Fe(this._option.dataSet,"markerAggregation",r$),Fe(this._option.dataSet,"markerFilter",o$);const{options:r}=this._computeOptions(),a=new Rt(this._option.dataSet,{name:`${this.type}_${this.id}_data`});a.parse([this._getRelativeDataView()],{type:"dataview"}),a.transform({type:"markerAggregation",options:r}),a.transform({type:"markerFilter",options:this._getAllRelativeSeries()}),a.target.on("change",()=>{this._markerLayout()}),this._markerData=a}}YO.specKey="markPoint";class qT extends YO{constructor(){super(...arguments),this.type=oe.markPoint,this.name=oe.markPoint,this.coordinateType="cartesian"}_computePointsAttr(){var e;const t=this._spec,n=this._markerData,s=this._relativeSeries,r="x"in t&&"y"in t,a="coordinate"in t,o="position"in t,l=(e=t==null?void 0:t.autoRange)!==null&&e!==void 0&&e;let c;return r?c=zT(n,s,s,s,l)[0][0]:a?c=t$(n,s,l,t.coordinatesOffset)[0]:o&&(c=i$(t.position,s,t.regionRelative)[0]),{point:c}}_computeOptions(){const e=this._spec,{doXYProcess:t}=AB(e),n=F(e.coordinate);let s;return t?s=[this._processSpecByDims([{dim:"x",specValue:e.x},{dim:"y",specValue:e.y}])]:n&&(s=this._processSpecCoo(e)),{options:s}}}qT.type=oe.markPoint,qT.coordinateType="cartesian";const V1t=()=>{X.registerComponent(qT.type,qT),Q5()};class ZT extends YO{constructor(){super(...arguments),this.type=oe.polarMarkPoint,this.name=oe.polarMarkPoint,this.coordinateType="polar"}_computePointsAttr(){var e,t;const n=this._markerData,s=this._relativeSeries,r=(t=(e=this._spec)===null||e===void 0?void 0:e.autoRange)!==null&&t!==void 0&&t,a=e$(n,s,s,s,r)[0][0],o={x:this._relativeSeries.getRegion().getLayoutStartPoint().x+this._relativeSeries.angleAxisHelper.center().x,y:this._relativeSeries.getRegion().getLayoutStartPoint().y+this._relativeSeries.angleAxisHelper.center().y};return{point:ui(o,a.radius,a.angle)}}_computeOptions(){const e=this._spec;return{options:[this._processSpecByDims([{dim:"radius",specValue:e.radius},{dim:"angle",specValue:e.angle}])]}}}ZT.type=oe.polarMarkPoint,ZT.coordinateType="polar";const U1t=()=>{X.registerComponent(ZT.type,ZT),Q5()};class JT extends YO{constructor(){super(...arguments),this.type=oe.geoMarkPoint,this.name=oe.geoMarkPoint,this.coordinateType="geo"}_computePointsAttr(){const e=this._markerData,t=this._relativeSeries;return{point:_1t(e,t)[0][0]}}_computeOptions(){const e=this._spec;return{options:[this._processSpecByDims([{dim:"areaName",specValue:e.areaName}])]}}}JT.type=oe.geoMarkPoint,JT.coordinateType="geo";const W1t=()=>{X.registerComponent(JT.type,JT),Q5()};class QT extends Pr{constructor(){super(...arguments),this.layoutType="none",this.type=oe.brush,this.name=oe.brush,this.specKey="brush",this.layoutZIndex=Xt.Brush,this._linkedSeries=[],this._itemMap={},this._linkedItemMap={},this._inBrushElementsMap={},this._outOfBrushElementsMap={},this._linkedInBrushElementsMap={},this._linkedOutOfBrushElementsMap={},this._needInitOutState=!0,this._cacheInteractiveRangeAttrs=[],this._needDisablePickable=!1,this._releatedAxes=[],this._regionAxisMap={},this._axisDataZoomMap={},this._zoomRecord=[]}init(){const e=this._transformBrushedMarkAttr(this._spec.inBrush),t=this._transformBrushedMarkAttr(this._spec.outOfBrush);this._option.getAllSeries().forEach(n=>{n.getActiveMarks().forEach(s=>{s&&(n.setMarkStyle(s,Object.assign({},e),"inBrush",pe.Series),n.setMarkStyle(s,Object.assign({},t),"outOfBrush",pe.Series))})})}static getSpecInfo(e){return Pl(e,this.specKey,this.type,t=>t.visible!==!1)}created(){super.created(),this.initEvent(),this._bindRegions(),this._bindLinkedSeries(),this._initRegionAxisMap(),this._initAxisDataZoomMap(),this._initNeedOperatedItem()}_extendDataInBrush(e){const t=[];for(const n in e)for(const s in e[n])t.push(Object.assign({},e[n][s].data[0]));return t}_extendDatumOutOfBrush(e){var t;const n=[];for(const s in e)n.push((t=e[s].data)===null||t===void 0?void 0:t[0]);return n}_getBrushInteractiveAttr(e){const t=e.getLayoutStartPoint(),n=e.getLayoutRect(),s=t.x,r=s+n.width,a=t.y,o=a+n.height;return{interactiveRange:{minY:a,maxY:o,minX:s,maxX:r},xRange:[s,r],yRange:[a,o]}}_updateBrushComponent(e,t){const n=this._getBrushInteractiveAttr(e),s=this._brushComponents[t];s.setAttributes(n),this._initMarkBrushState(t,""),s.children[0].removeAllChild(),this._needInitOutState=!0}_createBrushComponent(e,t){var n,s;const r=this._getBrushInteractiveAttr(e),a=new Boe(Object.assign(Object.assign(Object.assign({zIndex:this.layoutZIndex,brushStyle:Le((n=this._spec)===null||n===void 0?void 0:n.style)},r),this._spec),{disableTriggerEvent:this._option.disableTriggerEvent}));a.id=(s=this._spec.id)!==null&&s!==void 0?s:`brush-${this.id}`,this.getContainer().add(a);const{brushMode:o="single"}=this._spec;this._brushComponents.push(a),this._cacheInteractiveRangeAttrs.push(r),a.addEventListener(Ks.drawStart,l=>{this._emitEvent(ke.brushStart,e)}),a.addEventListener(Ks.moveStart,l=>{this._emitEvent(ke.brushStart,e)}),a.addEventListener(Ks.drawing,l=>{this._needInitOutState&&o==="single"&&this._initMarkBrushState(t,"outOfBrush"),this._needInitOutState=!1,this._needDisablePickable=!0,this._handleBrushChange(ke.brushChange,e,l),this._emitEvent(ke.brushChange,e)}),a.addEventListener(Ks.moving,l=>{this._handleBrushChange(ke.brushChange,e,l),this._emitEvent(ke.brushChange,e)}),a.addEventListener(Ks.brushClear,l=>{this._initMarkBrushState(t,""),this._needInitOutState=!0,this._needDisablePickable=!1,this._handleBrushChange(ke.brushChange,e,l),this._handleBrushChange(ke.brushClear,e,l),this._emitEvent(ke.brushChange,e),this._emitEvent(ke.brushClear,e)}),a.addEventListener(Ks.drawEnd,l=>{this._needInitOutState=!0,this._needDisablePickable=!1;const{operateMask:c}=l.detail;this._handleBrushChange(ke.brushEnd,e,l);const u=this._extendDataInBrush(this._inBrushElementsMap);!this._spec.zoomWhenEmpty&&u.length>0&&this._setAxisAndDataZoom(c,e),this._emitEvent(ke.brushEnd,e)}),a.addEventListener(Ks.moveEnd,l=>{const{operateMask:c}=l.detail;this._handleBrushChange(ke.brushEnd,e,l);const u=this._extendDataInBrush(this._inBrushElementsMap);!this._spec.zoomWhenEmpty&&u.length>0&&this._setAxisAndDataZoom(c,e),this._emitEvent(ke.brushEnd,e)})}_handleBrushChange(e,t,n){const{operateMask:s}=n.detail;this._reconfigItem(s,t),this._reconfigLinkedItem(s,t)}_emitEvent(e,t){this.event.emit(e,{model:this,value:{operateType:e,operateRegion:t,inBrushData:this._extendDataInBrush(this._inBrushElementsMap),outOfBrushData:this._extendDatumOutOfBrush(this._outOfBrushElementsMap),linkInBrushData:this._extendDataInBrush(this._linkedInBrushElementsMap),linkOutOfBrushData:this._extendDatumOutOfBrush(this._linkedOutOfBrushElementsMap),inBrushElementsMap:this._inBrushElementsMap,outOfBrushElementsMap:this._outOfBrushElementsMap,linkedInBrushElementsMap:this._linkedInBrushElementsMap,linkedOutOfBrushElementsMap:this._linkedOutOfBrushElementsMap,zoomRecord:this._zoomRecord}})}_transformBrushedMarkAttr(e){const t={};return e!=null&&e.symbol&&(t.symbolType=e.symbol),e!=null&&e.symbolSize&&(t.size=e.symbolSize),e!=null&&e.color&&(t.fill=e.color),e!=null&&e.colorAlpha&&(t.fillOpacity=e.colorAlpha),Object.assign(Object.assign({},Le(e)),t)}_reconfigItem(e,t){this._itemMap[t.id].forEach(n=>{const s=n.getProduct();!s||!s.elements||!s.elements.length||s.elements.forEach(r=>{var a,o,l;const c=r.getGraphicItem(),u=n.id+"_"+r.key;!((a=this._outOfBrushElementsMap)===null||a===void 0)&&a[u]&&this._isBrushContainItem(e,c)?(r.addState("inBrush"),this._inBrushElementsMap[e==null?void 0:e.name]||(this._inBrushElementsMap[e==null?void 0:e.name]={}),this._inBrushElementsMap[e==null?void 0:e.name][u]=r,delete this._outOfBrushElementsMap[u]):!((l=(o=this._inBrushElementsMap)===null||o===void 0?void 0:o[e==null?void 0:e.name])===null||l===void 0)&&l[u]&&!this._isBrushContainItem(e,c)&&(r.removeState("inBrush"),r.addState("outOfBrush"),this._outOfBrushElementsMap[u]=r,delete this._inBrushElementsMap[e.name][u]),c.setAttribute("pickable",!this._needDisablePickable)})})}_reconfigLinkedItem(e,t){const n=t.getLayoutStartPoint(),s=t.getSeries().map(r=>r.id);this._linkedSeries.forEach(r=>{if(!s.includes(r.id)){const a=r.getRegion().getLayoutStartPoint(),o=a.x-n.x,l=a.y-n.y;this._linkedItemMap[r.id].forEach(c=>{const u=c.getProduct();!u||!u.elements||!u.elements.length||u.elements.forEach(h=>{var d,p,f;const g=h.getGraphicItem(),m=c.id+"_"+h.key;!((d=this._linkedOutOfBrushElementsMap)===null||d===void 0)&&d[m]&&this._isBrushContainItem(e,g,{dx:o,dy:l})?(h.addState("inBrush"),this._linkedInBrushElementsMap[e==null?void 0:e.name]||(this._linkedInBrushElementsMap[e==null?void 0:e.name]={}),this._linkedInBrushElementsMap[e==null?void 0:e.name][m]=h,delete this._linkedOutOfBrushElementsMap[m]):!((f=(p=this._linkedInBrushElementsMap)===null||p===void 0?void 0:p[e==null?void 0:e.name])===null||f===void 0)&&f[m]&&!this._isBrushContainItem(e,g,{dx:o,dy:l})&&(h.removeState("inBrush"),h.addState("outOfBrush"),this._linkedOutOfBrushElementsMap[m]=h),g.setAttribute("pickable",!this._needDisablePickable)})})}})}_isBrushContainItem(e,t,n){var s,r,a;if(!(e!=null&&e.globalTransMatrix)||!(!((s=e==null?void 0:e.attribute)===null||s===void 0)&&s.points))return!1;const o=(a=(r=e==null?void 0:e.attribute)===null||r===void 0?void 0:r.points)!==null&&a!==void 0?a:[],{a:l,b:c,c:u,d:h,e:d,f:p}=e.globalTransMatrix,f=(n==null?void 0:n.dx)||0,g=(n==null?void 0:n.dy)||0,m=o.map(S=>({x:l*S.x+u*S.y+d+f,y:c*S.x+h*S.y+p+g}));e.globalAABBBounds.clone().set(e.globalAABBBounds.x1+f,e.globalAABBBounds.y1+g,e.globalAABBBounds.x2+f,e.globalAABBBounds.y2+g);const y=t.globalTransMatrix.e,b=t.globalTransMatrix.f;let x=[];if(t.type==="symbol"){const{size:S=0}=t==null?void 0:t.attribute,C=q(S)[0]/2;return x=[{x:y-C,y:b-C},{x:y+C,y:b-C},{x:y+C,y:b+C},{x:y-C,y:b+C}],l8(m,x)}if(t.type==="rect"){const{x1:S,x2:C,y1:w,y2:A}=t==null?void 0:t.AABBBounds,T=Math.abs(S-C),E=Math.abs(w-A);return x=[{x:y,y:b},{x:y+T,y:b},{x:y+T,y:b+E},{x:y,y:b+E}],l8(m,x)}return e.globalAABBBounds.intersects(t.globalAABBBounds)}_stateClamp(e){return Math.min(Math.max(0,e),1)}_setAxisAndDataZoom(e,t){var n;if(this._zoomRecord=[],this._spec.zoomAfterBrush){const s=e.AABBBounds;(n=this._regionAxisMap["region_"+t.id])===null||n===void 0||n.forEach(r=>{var a,o;const l=r.layoutOrient==="bottom"||r.layoutOrient==="top",c=(a=this._spec.axisRangeExpand)!==null&&a!==void 0?a:0,{x1:u,x2:h,y1:d,y2:p}=s,f=l?"x":"y",g=l?u:d,m=l?h:p;if(this._axisDataZoomMap[r.id]){const y=this._axisDataZoomMap[r.id],b=y.relatedAxisComponent,x=b.getScale().invert(g-t.getLayoutStartPoint()[f]),S=b.getScale().invert(m-t.getLayoutStartPoint()[f]),C=y.dataToStatePoint(x),w=y.dataToStatePoint(S),A=this._stateClamp(C-c),T=this._stateClamp(w+c);y.setStartAndEnd(Math.min(A,T),Math.max(A,T),["percent","percent"]),this._zoomRecord.push({operateComponent:y,start:A,end:T})}else{const y=r.getScale().range(),b=(o=r.getScale().rangeFactor())!==null&&o!==void 0?o:[0,1],x=It(y)<y[0],S=g-t.getLayoutStartPoint()[f],C=m-t.getLayoutStartPoint()[f],w=x?Math.min(S,C):Math.max(S,C),A=((x?Math.max(S,C):Math.min(S,C))-y[0])/(It(y)-y[0])*(b[1]-b[0])+b[0],T=(w-y[0])/(It(y)-y[0])*(b[1]-b[0])+b[0],E=this._stateClamp(A-c),P=this._stateClamp(T+c);r.getScale().rangeFactor([E,P]),r.effect.scaleUpdate(),this._zoomRecord.push({operateComponent:r,start:E,end:P})}})}}_bindRegions(){F(this._spec.regionId)&&F(this._spec.regionIndex)&&(this._relativeRegions=this._option.getAllRegions()),this._relativeRegions=this._option.getRegionsInUserIdOrIndex(q(this._spec.regionId),q(this._spec.regionIndex))}_bindLinkedSeries(){F(this._spec.brushLinkSeriesId)&&F(this._spec.brushLinkSeriesIndex)||(this._linkedSeries=this._option.getSeriesInUserIdOrIndex(q(this._spec.brushLinkSeriesId),q(this._spec.brushLinkSeriesIndex)))}_initRegionAxisMap(){F(this._spec.axisId)?q(this._spec.axisId).forEach(e=>{this._releatedAxes.push(this._option.getComponentByUserId(e))}):F(this._spec.axisIndex)?q(this._spec.axisIndex).forEach(e=>{this._releatedAxes.push(this._option.getComponentByIndex("axes",e))}):this._releatedAxes=this._option.getComponentsByKey("axes"),this._releatedAxes.forEach(e=>{e==null||e.getRegions().forEach(t=>{this._regionAxisMap["region_"+t.id]?this._regionAxisMap["region_"+t.id].push(e):this._regionAxisMap["region_"+t.id]=[e]})})}_initAxisDataZoomMap(){this._option.getComponentsByKey("dataZoom").forEach(e=>{e.relatedAxisComponent&&(this._axisDataZoomMap[e.relatedAxisComponent.id]=e)})}_initNeedOperatedItem(){const e=this._spec.seriesId,t=this._spec.seriesIndex;this._relativeRegions.forEach(n=>{const s=[];n.getSeries().forEach(r=>{(e&&q(e).includes(r.userId.toString())||t&&q(t).includes(r.getSpecIndex())||!t&&!e)&&s.push(...r.getMarksWithoutRoot()),this._itemMap[n.id]=s})}),this._linkedSeries.forEach(n=>{this._linkedItemMap[n.id]=n.getMarksWithoutRoot()})}_initMarkBrushState(e,t){this._brushComponents.forEach((n,s)=>{s!==e&&n.children[0].removeAllChild()}),this._inBrushElementsMap={},this._outOfBrushElementsMap={},this._linkedInBrushElementsMap={},this._linkedOutOfBrushElementsMap={},this._option.getAllSeries().forEach(n=>{n.getMarksWithoutRoot().forEach(s=>{const r=s.getProduct();!r||!r.elements||!r.elements.length||r.elements.forEach(a=>{const o=s.id+"_"+a.key;a.removeState("inBrush"),a.removeState("outOfBrush"),a.addState(t),this._outOfBrushElementsMap[o]=a,this._linkedOutOfBrushElementsMap[o]=a})})})}initEvent(){}onRender(e){}changeRegions(e){}_getNeedClearVRenderComponents(){return this._brushComponents}_compareSpec(e,t){this._brushComponents&&this._relativeRegions.forEach((s,r)=>{this._updateBrushComponent(s,r)});const n=super._compareSpec(e,t);return Pt(t,e)||(n.reRender=!0,n.reMake=!0),n}onLayoutEnd(e){var t;super.onLayoutEnd(e),!this._option.disableTriggerEvent&&((t=this._spec.visible)===null||t===void 0||t)&&(this._brushComponents?this._relativeRegions.forEach((n,s)=>{this._updateBrushComponent(n,s)}):(this._brushComponents=[],this._relativeRegions.forEach((n,s)=>{this._createBrushComponent(n,s)})))}clearGraphic(){this._brushComponents&&this._brushComponents.forEach(e=>{e._container.incrementalClearChild()})}clear(){if(this._brushComponents){const e=this.getContainer();this._brushComponents.forEach(t=>{t.removeAllChild(),t.releaseBrushEvents(),e&&e.removeChild(t)}),this._brushComponents=null}}}QT.type=oe.brush,QT.specKey="brush";const G1t=()=>{X.registerComponent(QT.type,QT)};class eE extends Pr{constructor(){super(...arguments),this.type=oe.customMark,this.specKey="customMark",this.layoutType="none",this.layoutZIndex=Xt.CustomMark,this.layoutLevel=El.CustomMark}created(){super.created(),this.initMarks(),this.initEvent()}getMarkAttributeContext(){return this._markAttributeContext}_buildMarkAttributeContext(){this._markAttributeContext={vchart:this._option.globalInstance,globalScale:(e,t)=>{var n;return(n=this._option.globalScale.getScale(e))===null||n===void 0?void 0:n.scale(t)}}}initMarks(){if(!this._spec)return;const e=this._option&&this._option.getAllSeries(),t=this._option.animation!==!1,n=[];e&&e.length&&e.forEach(s=>{const r=s&&s.getMarksWithoutRoot();r&&r.length&&r.forEach(a=>{n.push(a)})}),this._createExtensionMark(this._spec,null,`${Ie}_series_${this.id}_extensionMark`,0,{depend:n,hasAnimation:t})}_createExtensionMark(e,t,n,s=0,r){var a;const o=this._createMark({type:e.type,name:F(e.name)?`${e.name}`:`${n}_${s}`},{skipBeforeLayouted:!0,attributeContext:this._getMarkAttributeContext(),componentType:e.componentType,key:e.dataKey});if(o){if(F(e.id)&&o.setUserId(e.id),r.hasAnimation&&e.animation){const l=ft({},kt(e.type,e,this._markAttributeContext));o.setAnimationConfig(l)}if(r.depend&&r.depend.length&&o.setDepend(...r.depend),B(t)?this._marks.addMark(o):t&&t.addMark(o),this.initMarkStyleWithSpec(o,e),e.type==="group"&&(n=`${n}_${s}`,(a=e.children)===null||a===void 0||a.forEach((l,c)=>{this._createExtensionMark(l,o,n,c,r)})),F(e.dataId)||Z(e.dataIndex)){const l=this.getChart().getSeriesData(e.dataId,e.dataIndex);l&&(l.target.addListener("change",()=>{o.getData().updateData()}),o.setDataView(l))}}}initEvent(){}_compareSpec(e,t){const n=super._compareSpec(e,t);return Pt(t,e)||(n.reMake=!0),n.change=!0,n.reRender=!0,n}changeRegions(e){}_getNeedClearVRenderComponents(){return[]}onRender(e){}_getMarkAttributeContext(){return{vchart:this._option.globalInstance,chart:this.getChart(),globalScale:(e,t)=>{var n;return(n=this._option.globalScale.getScale(e))===null||n===void 0?void 0:n.scale(t)},getLayoutBounds:()=>{const{x:e,y:t}=this.getLayoutStartPoint(),{width:n,height:s}=this.getLayoutRect();return new nr().set(e,t,e+n,t+s)}}}_getLayoutRect(){const e=new nr;return this.getMarks().forEach(t=>{const n=t.getProduct();n&&e.union(n.getBounds())}),e.empty()?{width:0,height:0}:{width:e.width(),height:e.height()}}getBoundsInRect(e){this.setLayoutRect(e);const t=this._getLayoutRect(),{x:n,y:s}=this.getLayoutStartPoint();return{x1:n,y1:s,x2:n+t.width,y2:s+t.height}}}eE.type=oe.customMark,eE.specKey="customMark";const K1t=()=>{X.registerComponent(eE.type,eE)};function cY(i,e,t=0){return t>Math.max(e.x1-i.x2,i.x1-e.x2,e.y1-i.y2,i.y1-e.y2)}function X1t(i){return{x1:i.x,x2:i.x+i.width,y1:i.y,y2:i.y+i.height}}function Y1t(i){return{x:i.x1,y:i.y1,width:i.x2-i.x1,height:i.y2-i.y1}}function She(i){var e;if(!i||i.length===0)return[];if(i.length===1)return[i[0].rect];const t=i.map(s=>{var r;return Object.assign(Object.assign({},s),{bound:X1t(s.rect),anchorCandidates:J1t((r=s.anchors)!==null&&r!==void 0?r:[],s.point,s.rect,s.offset)})}),n=[];n.push(t[0].bound);for(let s=1;s<=t.length-1;s++){const r=t[s],a=r.bound;let o=n.some(l=>cY(l,a));if(r.anchorCandidates)if(o&&((e=r.anchorCandidates)===null||e===void 0?void 0:e.length)>0){for(let l=0;l<r.anchorCandidates.length;l++){const c=r.anchorCandidates[l],u={x1:c.x,y1:c.y,x2:c.x+a.x2-a.x1,y2:c.y+a.y2-a.y1,anchor:c};if(!n.some(h=>cY(h,u))){n.push(u),o=!1;break}}o&&n.push(r.bound)}else n.push(r.bound)}return n.map(s=>Y1t(s))}function q1t(i,e,t){const n=i.map(c=>c.pointCoord),{x1:s,x2:r,y1:a,y2:o}=TKe(n),l=t([(s+r)/2,(a+o)/2]);return l?She(i.map(c=>{const u=c.rect,h=Che(e,c.pointCoord)?t(Z1t(e,[c.pointCoord.x,c.pointCoord.y],uY(hY(c.point,l)))):c.point;h&&(u.x=h.x,u.y=h.y);const d=uY(hY(c.point,l));let p;const f=[];return d>=-45&&d<45?(p="top",f.push("left","right")):d>=45&&d<135?p="right":d>=-135&&d<-45?(p="left",f.push("left")):(p="bottom",f.push("left","right")),c.anchors=f,c.offset=20,c.rect=h$(c.rect,p,0),c})):[]}function uY(i){return i>180?i-360:i}function hY(i,e){return 180*Math.atan2(i.y-e.y,i.x-e.x)/Math.PI+90}function Z1t(i,e,t,n=200){const s=5621/n;let r=e;for(let a=1;a<=s;a++){const o=WKe(r,n,t);if(!Che(i,o))return[o.x,o.y];r=[o.x,o.y]}return e}function Che(i,e){for(let t=0;t<i.length;t++)if(UKe(e,i[t]))return!0;return!1}function h$(i,e,t=0){const n=Object.assign({},i);return e==="top"?(n.x-=i.width/2,n.y-=t+i.height/2):e==="bottom"?(n.x-=i.width/2,n.y+=t-i.height/2):e==="left"?(n.x-=t+i.width,n.y-=i.height/2):e==="right"&&(n.x+=t,n.y-=i.height/2),n}function J1t(i,e,t,n=0){const s=[];return i.forEach(r=>{const{x:a,y:o}=h$(Object.assign(Object.assign({},e),{width:t.width,height:t.height}),r,n);s.push({x:a,y:o})}),s}class tE extends Pr{constructor(){super(...arguments),this.type=oe.mapLabel,this.name=oe.mapLabel,this.specKey="mapLabel",this.layoutType="none",this.layoutZIndex=Xt.MarkPoint,this._activeDatum=[]}static getSpecInfo(e){return Pl(e,this.specKey,this.type,t=>t.visible&&F(t.seriesId))}setAttrFromSpec(){var e,t,n,s;this.nameField=(e=this._spec.nameField)!==null&&e!==void 0?e:(t=this._series)===null||t===void 0?void 0:t.getDimensionField()[0],this.valueField=(n=this._spec.valueField)!==null&&n!==void 0?n:(s=this._series)===null||s===void 0?void 0:s.getMeasureField()[0]}created(){super.created(),this._spec.visible&&(this.initRelatedInfo(),this.initData(),this.initEvent())}initRelatedInfo(){var e,t,n,s,r,a,o,l;this._series=this._option.getSeriesInUserIdOrIndex([this._spec.seriesId])[0],this._spec.position==="outer"&&(this._map=(t=(e=this._regions[0].getSeriesInType("map")[0])===null||e===void 0?void 0:e.getMapViewData())===null||t===void 0?void 0:t.latestData,this._longitudeField=(r=(s=(n=this._regions[0]).getSpec)===null||s===void 0?void 0:s.call(n))===null||r===void 0?void 0:r.longitudeField,this._latitudeField=(l=(o=(a=this._regions[0]).getSpec)===null||o===void 0?void 0:o.call(a))===null||l===void 0?void 0:l.latitudeField)}initData(){const e=this._series;if(!e)return;const t=e.getViewData();if(t){const n=new Rt(this._option.dataSet,{name:`${this.name}_data`});n.parse([t],{type:"dataview"}),n.transform({type:"copyDataView",level:Tl.copyDataView},!1),this._data=new Ec(this._option,n),n.target.addListener("change",()=>{this._spec.trigger!=="hover"&&this._spec.trigger!=="click"&&(this._activeDatum=this._data.getLatestData())})}}initEvent(){var e;this.event.on("zoom",{filter:s=>this._isRelativeModel(s.model)},s=>(this.handleZoom(s),!0)),this.event.on("panmove",{filter:s=>this._isRelativeModel(s.model)},s=>(this.handlePan(s),!0));const t=this._spec.trigger;if(t==="none")return;const n=(e=this.getCompiler())===null||e===void 0?void 0:e.getVGrammarView();n&&(t==="hover"?(n.addEventListener("element-highlight:start",s=>{this._isRelativeSeries(s.options.seriesId)&&this._updateDatum(s.elements[0].getDatum())}),n.addEventListener("element-highlight:reset",s=>{this._isRelativeSeries(s.options.seriesId)&&this._updateDatum(null)})):t==="click"&&(n.addEventListener("element-select:start",s=>{this._isRelativeSeries(s.options.seriesId)&&this._updateDatum(s.elements[0].getDatum())}),n.addEventListener("elementSelectReset",s=>{this._isRelativeSeries(s.options.seriesId)&&this._updateDatum([])})))}handlePan(e){const{delta:t}=e;this._markerComponents.forEach(n=>{n.translate(t[0],t[1])})}handleZoom(e){this._updateMarkerLayoutAttribute()}_updateDatum(e){this._activeDatum=e,this._markerComponents.forEach((t,n)=>{var s;const r=(s=this._data)===null||s===void 0?void 0:s.getLatestData()[n];this._activeDatum.includes(r)?t.setAttribute("visible",!0):t.setAttribute("visible",!1)})}dataToPosition(e){return this._series.dataToPosition(e)}updateLayoutAttribute(){var e;const t=(e=this._data)===null||e===void 0?void 0:e.getLatestData();t&&t.length!==0&&(super.updateLayoutAttribute(),this._updateMarkerLayoutAttribute())}_updateMarkerLayoutAttribute(){var e;const t=[],n=[];this._markerComponents||(this._markerComponents=(e=this._data)===null||e===void 0?void 0:e.getLatestData().map((r,a)=>{var o;const l=new sd({position:void 0,animation:!1});return l&&(l.name=`${this.name}_marker_${a}`,l.id=(o=this._spec.id)!==null&&o!==void 0?o:`${this.name}_marker_${this.id}`,l.setAttribute("zIndex",this.layoutZIndex)),l})),this._markerComponents.forEach((r,a)=>{r.removeAllChild();const{pairInfo:o,contentMarks:l}=this._evaluateMarker(this._data.getLatestData()[a],a);o&&t.push(o),l&&n.push(l)});const s=this._layoutLabels(t);this._layoutMarkers(s,n),this._renderMarkers()}_evaluateMarker(e,t){var n,s,r,a,o,l,c,u,h,d,p,f;let g=0,m=0,y=0,b=0,x=0;const S=this._spec.position||"top",C=this._spec.offset,w=Fu((n=this._spec.background)===null||n===void 0?void 0:n.padding),A=this._spec.space||0;m+=((w==null?void 0:w.left)||0)+((w==null?void 0:w.right)||0),y+=((w==null?void 0:w.top)||0)+((w==null?void 0:w.bottom)||0);const T={},E=this.dataToPosition(e),P=w5({});if(P.name=`${this.name}_marker_itemContainer_${t}`,T.container=P,(s=this._spec.background)===null||s===void 0?void 0:s.visible){const I=Rx(Le(Object.assign({},this._spec.background.style)));I.setAttributes(E),T.labelBackground=I,P.appendChild(I)}if(!((r=this._spec.icon)===null||r===void 0)&&r.visible){const I=KP(Le(Object.assign({},this._spec.icon.style)));I.setAttributes(E),I.setAttribute("symbolType",(a=this._spec.icon.style)===null||a===void 0?void 0:a.shape);const D=I.AABBBounds,z=(o=(D==null?void 0:D.y2)-(D==null?void 0:D.y1))!==null&&o!==void 0?o:0,$=(l=(D==null?void 0:D.x2)-(D==null?void 0:D.x1))!==null&&l!==void 0?l:0;T.icon=I,P.appendChild(I),x=z,b+=$,g++}if(!((c=this._spec.nameLabel)===null||c===void 0)&&c.visible){const I=Cy(Le(Object.assign({},this._spec.nameLabel.style)));I.setAttributes(E),I.setAttribute("text",e[this.nameField]);const D=I.AABBBounds,z=(u=(D==null?void 0:D.y2)-(D==null?void 0:D.y1))!==null&&u!==void 0?u:0,$=(h=(D==null?void 0:D.x2)-(D==null?void 0:D.x1))!==null&&h!==void 0?h:0;T.nameLabel=I,P.appendChild(I),x=Math.max(x,z),b+=$,g++}if(!((d=this._spec.valueLabel)===null||d===void 0)&&d.visible&&F(e[this.valueField])){const I=Cy(Le(Object.assign({},this._spec.valueLabel.style)));I.setAttributes(E),I.setAttribute("text",e[this.valueField]);const D=I.AABBBounds,z=(p=(D==null?void 0:D.y2)-(D==null?void 0:D.y1))!==null&&p!==void 0?p:0,$=(f=(D==null?void 0:D.x2)-(D==null?void 0:D.x1))!==null&&f!==void 0?f:0;T.valueLabel=I,P.appendChild(I),x=Math.max(x,z),b+=$,g++}const O=Object.values(T).find(I=>!!I&&I.type!=="group"),M={x:O==null?void 0:O.getComputedAttribute("x"),y:O==null?void 0:O.getComputedAttribute("y")},R={x:M.x,y:M.y,width:0,height:0};R.width=m+b+(g-1)*A,R.height=y+x;const j={rect:R,point:M,index:t};if(S!=="outer"){const I=["top","right","left","bottom"].filter(D=>D!==S);j.rect=h$(R,S,C),j.anchors=I,j.offset=C}else j.pointCoord={x:+(e==null?void 0:e[this._longitudeField]),y:+(e==null?void 0:e[this._latitudeField])};return{pairInfo:j,contentMarks:T}}_layoutMarkers(e,t){var n,s,r;for(let a=0;a<t.length;a++){if(!e[a]||!t[a])return;const{icon:o,nameLabel:l,valueLabel:c,labelBackground:u,container:h}=t[a],d=e[a],p=Fu((n=this._spec.background)===null||n===void 0?void 0:n.padding),f=this._spec.space||0,g=d.height/2;let m=(p==null?void 0:p.left)||0;[o,l,c].forEach((C,w)=>{var A,T;if(C){const E=C.AABBBounds;let P=0;C.type==="symbol"&&(P+=((A=E.x2-E.x1)!==null&&A!==void 0?A:0)/2),C.setAttributes({x:m+P,y:g}),m+=(T=E.x2-E.x1)!==null&&T!==void 0?T:0,w!==2&&(m+=f)}}),u==null||u.setAttributes({x:0,y:0,width:d.width,height:d.height}),h==null||h.setAttributes({dx:-d.width/2,dy:-d.height/2});const y=this._data.getLatestData()[a],b=this.dataToPosition(y),x=this.getRegions()[0].getLayoutStartPoint(),S=!(!(!((s=this._spec.leader)===null||s===void 0)&&s.visible)||!(o||l||c));this._markerComponents[a].setAttributes({x:x.x,y:x.y,position:b,visible:this._activeDatum.includes(y),itemContent:{refX:0,type:"custom",renderCustomCallback:()=>h,autoRotate:!1,offsetX:d.x+d.width/2-b.x,offsetY:d.y+d.height/2-b.y},itemLine:{visible:S,type:"type-po",lineStyle:Le(Object.assign({},(r=this._spec.leader)===null||r===void 0?void 0:r.style)),startSymbol:{visible:!1}}})}}_renderMarkers(){if(this._markerComponents&&this._markerComponents.length)for(let e=0;e<this._markerComponents.length;e++)this.getContainer().add(this._markerComponents[e])}_layoutLabels(e){return this._spec.position==="outer"&&this._map?q1t(e,this._map,t=>this._series.dataToPosition({[this._longitudeField]:t[0],[this._latitudeField]:t[1]})):She(e)}_isRelativeModel(e){var t,n,s;const r=(n=(t=this._series.getXAxisHelper())===null||t===void 0?void 0:t.getAxisId())!==null&&n!==void 0?n:(s=this._series.getCoordinateHelper())===null||s===void 0?void 0:s.getCoordinateId();return(e==null?void 0:e.id)===r}_isRelativeSeries(e){return(e==null?void 0:e.id)===this._series.id}onRender(e){}changeRegions(){}_getNeedClearVRenderComponents(){return this._markerComponents}}tE.type=oe.mapLabel,tE.specKey="mapLabel";const Q1t=()=>{X.registerComponent(tE.type,tE)};class kB{constructor(e,t){this._chartLayoutRect={x:0,y:0,width:1,height:1},this._col=1,this._row=1,this._elementMap=new Map,this.standardizationSpec(e),this._gridInfo=e,this._col=e.col,this._row=e.row,this._colSize=new Array(this._col).fill(null),this._rowSize=new Array(this._row).fill(null),this._colElements=new Array(this._col).fill([]),this._rowElements=new Array(this._row).fill([]),this._onError=t==null?void 0:t.onError,this.initUserSetting()}standardizationSpec(e){var t,n,s;e.col=(t=e.col)!==null&&t!==void 0?t:1,e.row=(n=e.row)!==null&&n!==void 0?n:1,e.elements=(s=e.elements)!==null&&s!==void 0?s:[]}initUserSetting(){this._gridInfo.colWidth&&this.setSizeFromUserSetting(this._gridInfo.colWidth,this._colSize,this._col,this._chartLayoutRect.width),this._gridInfo.rowHeight&&this.setSizeFromUserSetting(this._gridInfo.rowHeight,this._rowSize,this._row,this._chartLayoutRect.height),this._colSize.forEach((e,t)=>{e||(this._colSize[t]={value:0,isUserSetting:!1,isLayoutSetting:!1})}),this._rowSize.forEach((e,t)=>{e||(this._rowSize[t]={value:0,isUserSetting:!1,isLayoutSetting:!1})})}setSizeFromUserSetting(e,t,n,s){e.forEach(r=>{r.index<0&&r.index>=n||(Z(r.size)?t[r.index]={value:+r.size,isUserSetting:!0,isLayoutSetting:!1}:ee(r.size)&&(t[r.index]={value:r.size(s),isUserSetting:!0,isLayoutSetting:!1}))})}clearLayoutSize(){this._colSize.forEach(e=>{e.isLayoutSetting=!1,e.isUserSetting||(e.value=0)}),this._rowSize.forEach(e=>{e.isLayoutSetting=!1,e.isUserSetting||(e.value=0)})}getItemGridInfo(e){var t;const n=this._elementMap.get(e);if(n)return n;let s;return s=(t=this._gridInfo.elements)===null||t===void 0?void 0:t.find(r=>{var a;if("modelId"in r&&F(r.modelId)){if(F(e.model.userId)&&e.model.userId===r.modelId)return!0}else if("modelKey"in r&&F(r.modelKey)&&"modelIndex"in r&&F(r.modelIndex)&&((a=e.model.specKey)!==null&&a!==void 0?a:e.model.type)===r.modelKey&&e.model.getSpecIndex()===r.modelIndex)return!0;return!1}),s||(s={col:0,colSpan:1,row:0,rowSpan:1}),this._elementMap.set(e,s),s}getSizeFromGrid(e,t){var n;const s=t==="col"?this._colSize:this._rowSize;let r=0;for(let a=e[t];a<e[t]+((n=e[`${t}Span`])!==null&&n!==void 0?n:1);a++)r+=s[a].value;return r}getSizeFromUser(e,t){var n,s;const r=t==="col"?this._colSize:this._rowSize;if(!(!((n=r[e[t]])===null||n===void 0)&&n.isUserSetting))return;let a=0;for(let o=e[t];o<e[t]+((s=e[`${t}Span`])!==null&&s!==void 0?s:1);o++){if(!r[o].isUserSetting)return;a+=r[o].value}return a}setItemLayoutSizeToGrid(e,t){if(b_(e)){if(t.colSpan&&t.colSpan>1||this._colSize[t.col].isUserSetting)return;this._colSize[t.col].value=Math.max(this._colSize[t.col].value,e.getLayoutRect().width+e.layoutPaddingLeft+e.layoutPaddingRight),this._colSize[t.col].isLayoutSetting=!0}else{if(t.rowSpan&&t.rowSpan>1||this._rowSize[t.row].isUserSetting)return;this._rowSize[t.row].value=Math.max(this._rowSize[t.row].value,e.getLayoutRect().height+e.layoutPaddingTop+e.layoutPaddingBottom),this._rowSize[t.row].isLayoutSetting=!0}}layoutGrid(e){const t=e==="col"?this._colSize:this._rowSize;let n=e==="col"?this._chartLayoutRect.width:this._chartLayoutRect.height;const s=[];t.forEach(r=>{r.isUserSetting||r.isLayoutSetting?n-=r.value:s.push(r)}),n<0&&console.warn(`layout content ${e} size bigger than chart`),s.forEach(r=>r.value=n/s.length)}getItemPosition(e){const t=this.getItemGridInfo(e),n={x:this._chartLayoutRect.x,y:this._chartLayoutRect.y};for(let s=0;s<t.col;s++)n.x+=this._colSize[s].value;for(let s=0;s<t.row;s++)n.y+=this._rowSize[s].value;return n.x+=e.layoutPaddingLeft+e.layoutOffsetX,n.y+=e.layoutPaddingTop+e.layoutOffsetY,n}getItemLayoutRect(e){var t,n;const s=this.getItemGridInfo(e);return{width:((t=this.getSizeFromGrid(s,"col"))!==null&&t!==void 0?t:this._chartLayoutRect.width)-e.layoutPaddingLeft-e.layoutPaddingRight,height:((n=this.getSizeFromGrid(s,"row"))!==null&&n!==void 0?n:this._chartLayoutRect.height)-e.layoutPaddingTop-e.layoutPaddingBottom}}layoutItems(e,t,n,s){this._chartLayoutRect=n,this._chartViewBox=s,this.clearLayoutSize(),t.sort((h,d)=>d.layoutLevel-h.layoutLevel);const r=t.filter(h=>h.layoutType==="normal"&&h.getModelVisible()!==!1),a=r.filter(h=>b_(h)),o=r.filter(h=>!b_(h));r.forEach(h=>{this.layoutOneItem(h,"user",!1)});const l=t.filter(h=>h.layoutType==="region-relative"),c=l.filter(h=>b_(h)),u=l.filter(h=>!b_(h));c.forEach(h=>this.layoutOneItem(h,"user",!1)),this.layoutGrid("col"),o.forEach(h=>this.layoutOneItem(h,"colGrid",!1)),u.forEach(h=>{this.layoutOneItem(h,"colGrid",!1)}),this.layoutGrid("row"),u.forEach(h=>{this.layoutOneItem(h,"grid",!1)}),a.forEach(h=>this.layoutOneItem(h,"grid",!1)),c.forEach(h=>{this.layoutOneItem(h,"grid",!0)}),this.layoutGrid("col"),t.filter(h=>h.layoutType==="region").forEach(h=>this.layoutOneItem(h,"grid",!1)),this.layoutAbsoluteItems(t.filter(h=>h.layoutType==="absolute")),t.filter(h=>h.layoutType!=="absolute").forEach(h=>{h.setLayoutStartPosition(this.getItemPosition(h))})}layoutAbsoluteItems(e){e.forEach(t=>{t.absoluteLayoutInRect(this._chartLayoutRect)})}layoutOneItem(e,t,n){var s,r;const a=t==="rowGrid"||t==="grid"?this.getSizeFromGrid.bind(this):this.getSizeFromUser.bind(this),o=t==="colGrid"||t==="grid"?this.getSizeFromGrid.bind(this):this.getSizeFromUser.bind(this),l=this.getItemGridInfo(e),c={width:((s=o(l,"col"))!==null&&s!==void 0?s:this._chartLayoutRect.width)-e.layoutPaddingLeft-e.layoutPaddingRight,height:((r=a(l,"row"))!==null&&r!==void 0?r:this._chartLayoutRect.height)-e.layoutPaddingTop-e.layoutPaddingBottom},u=e.computeBoundsInRect(c);Z(u.width)||(u.width=c.width),Z(u.height)||(u.height=c.height),e.setLayoutRect(t!=="grid"?u:c),this.setItemLayoutSizeToGrid(e,l)}}function b_(i){return i.layoutOrient==="left"||i.layoutOrient==="right"}kB.type="grid";const ext=()=>{X.registerLayout(kB.type,kB)};class TB extends A4{layoutItems(e,t,n,s){this._layoutInit(e,t,n,s),this._layoutNormalItems(t);const r={left:this.leftCurrent,top:this.topCurrent,right:this.rightCurrent,bottom:this.bottomCurrent},a=t.filter(y=>y.layoutType==="absolute"),o=a.filter(y=>y.layoutOrient==="z");let l={width:0,height:0};o.length&&(l=o[0].getLayoutRect()),this.leftCurrent+=l.width/8,this.rightCurrent-=l.width/8,this.topCurrent+=l.height/8,this.bottomCurrent-=l.height/8;const{regionItems:c,relativeItems:u,relativeOverlapItems:h,allRelatives:d,overlapItems:p}=this._groupItems(t);this.layoutRegionItems(c,u,h,p),this._processAutoIndent(c,u,h,p,d,r);const f=a.filter(y=>y.layoutOrient!=="z");this.layoutAbsoluteItems(f);const g=u.filter(y=>y.model.specKey==="axes"&&Ti(y.layoutOrient))[0],m=u.filter(y=>y.model.specKey==="axes"&&tc(y.layoutOrient))[0];if(g&&o.length){const y=g.getLayoutStartPoint(),b=g.getLayoutRect(),x={x:m.layoutOrient==="left"?y.x+b.width:y.x,y:y.y,width:this._chartLayoutRect.width,height:this._chartLayoutRect.height};o[0].model.directionStr=m.layoutOrient==="left"?"r2l":"l2r";const S=g.getLayoutRect(),C=m.getLayoutRect(),w={length:o[0].getLayoutRect().width,width:S.width,height:C.height};g.model.setLayout3dBox&&g.model.setLayout3dBox(w),m.model.setLayout3dBox&&m.model.setLayout3dBox(w),o[0].model.setLayout3dBox&&o[0].model.setLayout3dBox(w),this.layoutZAxisItems(o,x)}}layoutZAxisItems(e,t){e.forEach(n=>{n.absoluteLayoutInRect(t)})}getItemComputeLayoutRect(e,t){return t||(t={offsetLeft:0,offsetRight:0,offsetTop:0,offsetBottom:0}),{width:this.rightCurrent-this.leftCurrent-e.layoutPaddingLeft-e.layoutPaddingRight-(t.offsetLeft+t.offsetRight),height:this.bottomCurrent-this.topCurrent-e.layoutPaddingTop-e.layoutPaddingBottom-(t.offsetTop+t.offsetBottom)}}_checkAutoIndent(e){const t={top:0,left:0,bottom:0,right:0},n=this._chartViewBox.x2-this._chartViewBox.x1-this.rightCurrent,s=this._chartViewBox.y2-this._chartViewBox.y1-this.bottomCurrent;return e.forEach(r=>{if(!r.getModelVisible()||!r.autoIndent)return;const a=r.layoutOrient==="left"||r.layoutOrient==="right",o=r.getLastComputeOutBounds();a?(t.top=Math.max(t.top,o.y1-this.topCurrent),t.bottom=Math.max(t.bottom,o.y2-s)):(t.left=Math.max(t.left,o.x1-this.leftCurrent),t.right=Math.max(t.right,o.x2-n))}),t}}TB.type="layout3d";const txt=()=>{X.registerLayout(TB.type,TB)},ixt=()=>{frt()};function nxt(i){return String(i).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\(/g,"&#40;").replace(/  /g," &nbsp;")}const dY=(i,e)=>i?(e||(e=i.getBoundingClientRect()),i.offsetWidth>0?e.width/i.offsetWidth:e.height/i.offsetHeight):1,tR=(i,e)=>{var t;let n,s;(i==null?void 0:i.type)!=="rich"&&(i==null?void 0:i.type)!=="html"?(i=(i??"").toString(),e.multiLine?(n=i.split(`
`),n=n.map((a,o)=>o<n.length-1?a+`
`:a)):n=[i],s=n.map(a=>Object.assign(Object.assign({},e),{text:a}))):(s=i.text,n=i);const r=YJe({wordBreak:(t=e.wordBreak)!==null&&t!==void 0?t:"break-word",maxWidth:e.maxWidth?e.maxWidth:void 0,width:0,height:0,textConfig:s});return{width:r.width(),height:r.height(),text:n}},pY="vchart-tooltip-container",fY="",iR={offsetX:10,offsetY:10,sanitize:nxt},x_=(i,e)=>{let t;if(F(i)){if(ye(i))t=i;else if(ee(i)){const n=i(e);ye(n)&&(t=n)}}return t},sxt={left:[-2,0],right:[2,0],top:[0,-2],lt:[-2,-2],tl:[-2,-2],rt:[2,-2],tr:[2,-2],bottom:[0,2],bl:[-2,2],lb:[-2,2],br:[2,2],rb:[2,2],inside:[0,0],center:[0,0],centerBottom:[0,1],centerTop:[0,-1],centerLeft:[-1,0],centerRight:[1,0]},gY=(i,e,t=2)=>{var n,s;return(s=(n=sxt[i])===null||n===void 0?void 0:n[e==="x"?0:1])!==null&&s!==void 0?s:t},rxt=(i,e)=>{var t;const n=new Map,s=new Map,{series:r,datum:a}=i,o=r.direction==="horizontal",l=(o?r.getYAxisHelper():r.getXAxisHelper()).getAxisId(),c=r.getChart().getComponentsByKey("axes").find(b=>b.id===l);if(!c)return;(o?s:n).set(c.getSpecIndex(),{value:(t=r.getDatumPositionValues(a[0],r.getDimensionField()))===null||t===void 0?void 0:t[0],axis:c});const u={visible:!!n.size,type:"rect"},h={visible:!!s.size,type:"rect"},{x:d,y:p,offsetWidth:f,offsetHeight:g,bandWidth:m,bandHeight:y}=phe(3,r,e,n,s,u,h);return d?fhe(u,d,m,f):p?ghe(h,p,y,g):void 0},axt=i=>Ke(i)&&(F(i.left)||F(i.right)||F(i.top)||F(i.bottom)),oxt=i=>Ke(i)&&(F(i.x)||F(i.y)),lxt={fontFamily:uT.fontFamily,spacing:10,wordBreak:"break-word"};function Pg(i={},e,t){var n,s;return Object.assign(Object.assign({},t??lxt),{fill:(n=i.fill)!==null&&n!==void 0?n:i.fontColor,textAlign:i.textAlign,textBaseline:i.textBaseline,fontFamily:(s=i.fontFamily)!==null&&s!==void 0?s:e==null?void 0:e.fontFamily,fontSize:i.fontSize,fontWeight:i.fontWeight,lineHeight:i.lineHeight,spacing:i.spacing,multiLine:i.multiLine,maxWidth:i.maxWidth,wordBreak:i.wordBreak,autoWidth:i.autoWidth})}const cxt=i=>{var e;const{backgroundColor:t,border:n,shadow:s}=i,r={lineWidth:(e=n==null?void 0:n.width)!==null&&e!==void 0?e:0,shadow:!!s};n!=null&&n.color&&(r.stroke=n.color),t&&(r.fill=t),s&&(r.shadowColor=s.color,r.shadowBlur=s.blur,r.shadowOffsetX=s.x,r.shadowOffsetY=s.y,r.shadowSpread=s.spread);const{radius:a}=n??{};return F(a)&&(r.cornerRadius=[a,a,a,a]),r},uxt=(i,e,t)=>{var n,s,r,a,o;const{style:l={},enterable:c,transitionDuration:u}=e,{panel:h={},titleLabel:d,shape:p,keyLabel:f,valueLabel:g,spaceRow:m,maxContentHeight:y,align:b}=l,x=Cr(h.padding),S=Fu(h.padding),C=Pg(Object.assign({textAlign:b==="right"?"right":"left"},d),t),w=Pg(Object.assign({textAlign:b==="right"?"right":"left"},f),t),A=Pg(g,t),T={fill:!0,size:(n=p==null?void 0:p.size)!==null&&n!==void 0?n:8,spacing:(s=p==null?void 0:p.spacing)!==null&&s!==void 0?s:6},E={panel:cxt(h),padding:x,title:{},content:[],titleStyle:{value:C,spaceRow:m},contentStyle:{shape:T,key:w,value:A,spaceRow:m},hasContentShape:!1,keyWidth:0,valueWidth:0,maxContentHeight:y,enterable:c,transitionDuration:u,align:b},{title:P={},content:O=[]}=i;let M=S.left+S.right,R=S.top+S.bottom,j=S.top+S.bottom,I=0;const D=!!O.length;let z=0,$=0,V=0,L=0;if(D){const Be=[],ve=[],Re=[],Qe=[];let Lt=0;E.content=O.map((Ue,je)=>{let ut=0;const{hasShape:vt,key:si,shapeType:Me="",shapeFill:Ot,shapeStroke:Gi,shapeLineWidth:Jn,shapeSize:lt,value:Fo,isKeyAdaptive:fe,spaceRow:xe,keyStyle:G,valueStyle:at,shapeHollow:Vt}=Ue,Li={height:0,spaceRow:xe??m};if(F(si)){const ln=Pe({},w,Pg(G,void 0,{})),{width:cn,height:Or,text:ja}=tR(si,ln);Li.key=Object.assign(Object.assign({width:cn,height:Or},ln),{text:ja}),fe?ve.push(cn):Be.push(cn),ut=Math.max(ut,Or)}if(F(Fo)){const ln=Pe({},A,Pg(at,void 0,{})),{width:cn,height:Or,text:ja}=tR(Fo,ln);Li.value=Object.assign(Object.assign({width:cn,height:Or},ln),{text:ja}),Re.push(cn),ut=Math.max(ut,Or)}if(vt){const ln={visible:!0,symbolType:Me};Vt?ln.stroke=Ot:ln.fill=Ot,ln.stroke=Gi??Ot,ln.lineWidth=Jn,Li.shape=ln;const cn=lt??T.size;ut=Math.max(cn,ut),Qe.push(cn)}else Li.shape={visible:!1};return Li.height=ut,Lt+=ut,je<O.length-1&&(Lt+=Li.spaceRow),Li}),R+=Lt,j+=Math.min(Lt,y??1/0),z=Be.length?an(Be):0,$=ve.length?an(ve):0,V=Re.length?an(Re):0,L=Qe.length?an(Qe)+T.spacing:0,I=Math.max(L+z+w.spacing+V+A.spacing,L+$,I),E.hasContentShape=!!Qe.length,E.keyWidth=z,E.valueWidth=V}let Y=0,ae=0,W=0;const{visible:ce=!0,value:he="",valueStyle:le,spaceRow:de}=P;E.title.visible=ce,E.title.spaceRow=de??m;let te={};const me=()=>te.autoWidth&&te.multiLine!==!1;if(ce){te=Pe({},C,Pg(le,void 0,{})),me()&&(te.multiLine=(r=te.multiLine)===null||r===void 0||r,te.maxWidth=(a=te.maxWidth)!==null&&a!==void 0?a:D?Math.ceil(I):void 0);const{text:Be,width:ve,height:Re}=tR(he,te);E.title.value=Object.assign(Object.assign({width:me()?Math.min(ve,(o=te.maxWidth)!==null&&o!==void 0?o:Number.MAX_VALUE):ve,height:Re},te),{text:Be}),Y=E.title.value.width,ae=E.title.value.height,W=ae+(D?E.title.spaceRow:0)}return R+=W,j+=W,E.title.width=Y,E.title.height=ae,me()?M+=I||Y:M+=Math.max(Y,I),D&&E.content.forEach(Be=>{var ve;const Re=Be.value;Re&&((ve=Re.autoWidth)===null||ve===void 0||ve)&&(Re.width=M-S.left-S.right-L-z-w.spacing-A.spacing,Re.maxWidth||(Re.maxWidth=Math.ceil(Re.width)),E.valueWidth=Math.max(E.valueWidth,Re.width))}),E.panel.width=M,E.panel.height=R,E.panelDomHeight=j,E};class d$ extends O4{constructor(){super(...arguments),this._visible=!0,this._attributes=null,this._isReleased=!1,this.showTooltip=(e,t,n)=>{const{changePositionOnly:s}=n;return s?this.changeTooltipPosition(n,t):this.changeTooltip(!0,n,t)},this.changeTooltip=(e,t,n)=>this._isReleased?1:e?this.changeTooltipPosition(t,n):(this._updateTooltip(!1,t),0),this.changeTooltipPosition=(e,t)=>{var n,s,r,a,o;if(this._isReleased)return 1;const l=e.event,{tooltipSpec:c,activeTooltipSpec:u,changePositionOnly:h}=e;if(!u)return 1;const d=u.activeType;if(u.handler)return(r=(s=(n=u.handler).showTooltip)===null||s===void 0?void 0:s.call(n,d,t,e))!==null&&r!==void 0?r:0;const p=u,f=this._getActualTooltipPosition(u,e,this._getTooltipBoxSize(u,h));u.position=f;const g=(a=u.updatePosition)!==null&&a!==void 0?a:(o=c[d])===null||o===void 0?void 0:o.updatePosition;g&&(u.position=g(u.position,t,e));let m=(p==null?void 0:p.visible)!==!1;return t&&l.type!=="pointerout"&&u.visible&&(u.title||u.content)||(m=!1),this._updateTooltip(m,Object.assign(Object.assign({},e),{changePositionOnly:h})),0},this._getActualTooltipPosition=(e,t,n)=>{var s,r,a,o,l,c,u,h,d;const{tooltipSpec:p}=t,f={x:1/0,y:1/0};if(!p)return f;const g=t.event,{activeType:m,data:y}=e,b=m==="dimension"?(r=(s=y[0])===null||s===void 0?void 0:s.data)===null||r===void 0?void 0:r[0]:y==null?void 0:y[0],{offsetX:x,offsetY:S}=this._option,C=p[m],w=RK(C==null?void 0:C.position,y,t),A=(a=RK(C==null?void 0:C.positionMode,y,t))!==null&&a!==void 0?a:m==="mark"?"mark":"pointer",{width:T=0,height:E=0}=n??{},P=p.renderMode==="canvas",O=(o=t==null?void 0:t.chart)===null||o===void 0?void 0:o.getCanvasRect(),M=(l=O==null?void 0:O.width)!==null&&l!==void 0?l:xm,R=(c=O==null?void 0:O.height)!==null&&c!==void 0?c:Sm;let j=!1;const I={width:0,height:0};let D={x:0,y:0},z={x:0,y:0},$=1,V=1;if(vl(this._env)&&!p.confine){if(I.width=window.innerWidth,I.height=window.innerHeight,!P){const te=this._getParentElement(p);z=(h=(u=te==null?void 0:te.getBoundingClientRect)===null||u===void 0?void 0:u.call(te))!==null&&h!==void 0?h:f;const me=(d=this._compiler.getCanvas())!==null&&d!==void 0?d:this._chartContainer,Be=me==null?void 0:me.getBoundingClientRect();D={x:Be.x-z.x,y:Be.y-z.y},$=dY(me,Be),V=dY(te,z)}}else I.width=M,I.height=R;const L=V/$,Y={},ae={x:w,y:w},W={x:["left","right"],y:["top","bottom"]},ce=({orient:te,mode:me,offset:Be},ve)=>{var Re;let Qe,Lt;const Ue=t.model,je=Ue==null?void 0:Ue.getLayoutStartPoint(),ut=Be??(ve==="x"?x:S);if(me==="mark"){j=!0;const vt=t.item,si=vt==null?void 0:vt.getBounds();si&&je&&(Qe=(ve==="x"?si.x1:si.y1)+je[ve],Lt=(ve==="x"?si.x2:si.y2)+je[ve])}else if(me==="crosshair"&&((Re=b==null?void 0:b.series)===null||Re===void 0?void 0:Re.coordinate)==="cartesian"&&b.datum&&b.datum.length){j=!0;const vt=rxt(b,je);vt&&(Qe=vt.start[ve],Lt=vt.end[ve])}else ae[ve]=te;if(j){const vt=W[ve][0],si=ve==="x"?T:E;switch(gY(te,ve)){case-2:Y[vt]=Qe-si*L-ut;break;case 0:Y[vt]=(Qe+Lt)/2-si*L/2;break;case-1:Y[vt]=(Qe+Lt)/2-si*L-ut;break;case 1:Y[vt]=(Qe+Lt)/2+ut;break;case 2:Y[vt]=Lt+ut}}},he=["x","y"];if(Ke(w))if(axt(w)){const{left:te,right:me,top:Be,bottom:ve}=w;Y.left=x_(te,g),Y.top=x_(Be,g),Y.right=x_(me,g),Y.bottom=x_(ve,g)}else oxt(w)&&he.forEach(te=>{const me=w[te];ye(me)||ee(me)?Y[W[te][0]]=x_(me,g):ce(me,te)});else F(w)&&(ce({orient:w,mode:A},"x"),ce({orient:w,mode:A},"y"));const le={x:null,y:null},de=vl(this._env);return he.forEach(te=>{const me=te==="x"?T:E,Be=te==="x"?M:R,ve=te==="x"?x:S,Re=gY(ae[te],te);if(Z(Y[W[te][0]]))le[te]=Y[W[te][0]];else if(Z(Y[W[te][1]]))le[te]=Be-me*L-Y[W[te][1]];else{const je=te==="x"?g.canvasX:g.canvasY;le[te]=Re>0?je+ve:je-me*L/2+(Re<0?-1:0)*ve}le[te]*=$,de&&(le[te]+=D[te]),le[te]/=V;const Qe=te==="x"?I.width:I.height,Lt=-z[te]/V,Ue=(Qe-z[te])/V-me;Re!==2&&le[te]<Lt?j?le[te]=Lt:(le[te]+=Re===0?ve+me/2:2*ve+me,le[te]>Ue&&(le[te]=Ue)):Re!==-2&&le[te]>Ue&&(j?le[te]=Ue:(le[te]-=Re===0?ve+me/2:2*ve+me,le[te]<Lt&&(le[te]=Lt)))}),le}}get env(){return this._env}onAdd(e){super.onAdd(e);const t=e.component;this._component=t,this._chartOption=t.getOption(),this._env=this._chartOption.mode,this._chartContainer=this._chartOption.globalInstance.getContainer(),this._compiler=t.getCompiler(),this._initFromSpec()}hideTooltip(e){return this.changeTooltip(!1,e)}release(){var e,t,n;const s=(e=this._component.getSpec())!==null&&e!==void 0?e:{};s.handler?(n=(t=s.handler).release)===null||n===void 0||n.call(t):(this._removeTooltip(),this._isReleased=!0)}_getDefaultOption(){var e,t;const{offset:n}=this._component.getSpec();return Object.assign(Object.assign({},iR),{offsetX:(e=n==null?void 0:n.x)!==null&&e!==void 0?e:iR.offsetX,offsetY:(t=n==null?void 0:n.y)!==null&&t!==void 0?t:iR.offsetY})}_getTooltipBoxSize(e,t){var n,s,r;if(!t||B(this._attributes)){const c=(s=(n=this._chartOption)===null||n===void 0?void 0:n.getTheme())!==null&&s!==void 0?s:{};this._attributes=uxt(e,this._component.getSpec(),c)}const{panel:a,panelDomHeight:o}=(r=this._attributes)!==null&&r!==void 0?r:{},l=this._component.getSpec().renderMode==="canvas";return{width:(a==null?void 0:a.width)+(l?a.lineWidth:0),height:(o??(a==null?void 0:a.height))+(l?a.lineWidth:0)}}_getParentElement(e){return e.parentElement}getTooltipContainer(){return this._container}_initFromSpec(){this._option=this._getDefaultOption()}reInit(){this._initFromSpec()}}d$.specKey="tooltip";const ki=(i,e)=>F(i)?ie(i)?i.map(t=>`${t}px`).join(" "):`${i}px`:e??"initial",whe=i=>{const e=i.split(" ").map(t=>Number.isNaN(t)?Number.parseFloat(t.substring(0,t.length-2)):Number.parseFloat(t));return e.length===1?e[0]:e};let nR;const hxt=(i=document.body)=>{if(B(nR)){const e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",i.appendChild(e);const t=document.createElement("div");e.appendChild(t),nR=e.offsetWidth-t.offsetWidth,e.parentNode.removeChild(e)}return nR};function dxt(i){var e,t,n;const{panel:s={},title:r,content:a,titleStyle:o={},contentStyle:l={},padding:c,keyWidth:u,valueWidth:h,enterable:d,transitionDuration:p,panelDomHeight:f=0,align:g="left"}=i??{},{fill:m,shadow:y,shadowBlur:b,shadowColor:x,shadowOffsetX:S,shadowOffsetY:C,shadowSpread:w,cornerRadius:A,stroke:T,lineWidth:E=0,width:P=0}=s,{value:O={}}=o,{shape:M={},key:R={},value:j={}}=l,I=pxt(M),D=S_(R),z=S_(j),{bottom:$,left:V,right:L,top:Y}=Fu(c),ae=g==="right"?"marginLeft":"marginRight";return{align:g,panel:{width:ki(P+2*E),minHeight:ki(f+2*E),paddingBottom:ki($),paddingLeft:ki(V),paddingRight:ki(L),paddingTop:ki(Y),borderColor:T,borderWidth:ki(E),borderRadius:ki(A),backgroundColor:m?`${m}`:"transparent",boxShadow:y?`${S}px ${C}px ${b}px ${w}px ${x}`:"initial",pointerEvents:d?"auto":"none",transitionDuration:p?`${p}ms`:"initial",transitionProperty:p?"transform":"initial",transitionTimingFunction:p?"ease-out":"initial"},title:Object.assign({marginTop:"0px",marginBottom:a!=null&&a.length?ki(r==null?void 0:r.spaceRow):"0px"},S_(Pe({},O,r==null?void 0:r.value))),content:{},shapeColumn:{common:I,items:a==null?void 0:a.map(({spaceRow:W},ce)=>({marginTop:"0px",marginBottom:ce<a.length-1?ki(W):"0px"})),width:ki(M.size),[ae]:ki((e=M.spacing)!==null&&e!==void 0?e:8)},keyColumn:{common:D,items:a==null?void 0:a.map(({key:W,spaceRow:ce},he)=>Object.assign(Object.assign(Object.assign({marginTop:"0px",marginBottom:he<a.length-1?ki(ce):"0px"},D),S_(W)),W!=null&&W.multiLine?{width:ki(Math.ceil(W.width))}:void 0)),width:ki(u),[ae]:ki((t=R.spacing)!==null&&t!==void 0?t:26)},valueColumn:{common:z,items:a==null?void 0:a.map(({value:W,spaceRow:ce},he)=>Object.assign(Object.assign(Object.assign({marginTop:"0px",marginBottom:he<a.length-1?ki(ce):"0px"},z),S_(W)),W!=null&&W.multiLine?{width:ki(Math.ceil(W.width))}:void 0)),width:ki(h),[ae]:ki((n=j.spacing)!==null&&n!==void 0?n:0)}}}function S_(i,e){if(!i)return;const{fontFamily:t,fontSize:n,fill:s,textAlign:r,lineHeight:a,fontWeight:o,multiLine:l,wordBreak:c,maxWidth:u}=Pe({},e,i),h={};return h.fontFamily=t,h.fontSize=ki(n),h.color=s,h.textAlign=r,h.lineHeight=ki(au(a,n)),h.fontWeight=o,h.whiteSpace=l?"initial":"nowrap",h.wordBreak=l?c??"break-word":"normal",h.maxWidth=ki(u),h}function pxt(i,e){if(!i)return;const{size:t}=Pe({},e,i),n={};return n.width=ki(t),n}class vo{static isInstance(e){return!!e&&e.type===vo.type}setOption(e){this._option=e,Object.values(this.children).forEach(t=>t.setOption(e))}getParentEl(){return vo.isInstance(this.parent)?this.parent.product:this.parent}constructor(e,t,n){this.type=vo.type,this._renderContentCache=null,this.children={},this.parent=e,this._option=t,this.childIndex=n??0}init(e,t){}initAll(){this.init(),Object.values(this.children).forEach(e=>e.initAll())}setStyle(e){this.product&&e&&Object.keys(e).forEach(t=>{this.product.style[t]!==e[t]&&(this.product.style[t]=e[t])})}setContent(e){}setVisibility(e){if(!this.product)return;const{style:t}=this.product;t.visibility=e?"visible":"hidden",Object.values(this.children).forEach(n=>n.setVisibility(e))}getVisibility(){var e,t;return!!(!((t=(e=this.product)===null||e===void 0?void 0:e.style)===null||t===void 0)&&t.visibility)&&this.product.style.visibility!=="hidden"}release(){var e;if(Object.values(this.children).forEach(t=>t.release()),this.children={},this.product){try{(e=this.getParentEl())===null||e===void 0||e.removeChild(this.product)}catch{}this.product=null}}createElement(e,t,n,s){const r=Ih==null?void 0:Ih.createElement(e),a=this.getParentEl();if(!r||!a)return;t&&r.classList.add(...t),n&&Object.keys(n).forEach(l=>{r.style[l]=n[l]}),s&&(r.id=s);let o=this.childIndex;if(vo.isInstance(this.parent)){let l=Number.MAX_VALUE;for(let c=0;c<a.children.length;c++){const u=Object.values(this.parent.children).find(h=>h.product===a.children[c]);u.childIndex>this.childIndex&&u.childIndex<l&&(l=u.childIndex,o=c)}}return o>=a.children.length?a.appendChild(r):a.insertBefore(r,a.children[o]),r}}vo.type="tooltipModel";const fxt={fontSize:"13px",marginBottom:"0px",fontWeight:"normal"},gxt={boxSizing:"border-box"},mxt={display:"inline-block",verticalAlign:"top"},yxt={paddingTop:"0px",paddingBottom:"0px",textAlign:"left",fontWeight:"normal"},_xt={paddingTop:"0px",paddingBottom:"0px",textAlign:"left",fontWeight:"normal"},vxt={paddingTop:"0px",paddingBottom:"0px",textAlign:"right",fontWeight:"normal"},bxt={lineHeight:"normal",boxSizing:"border-box"};class Ahe extends vo{init(e,t,n){if(!this.product){const s=this.createElement(n??"div",[...e??[],"shape"],void 0,t);this.product=s}}setStyle(e,t){super.setStyle(e),this.setSvg(t)}setContent(e){this.setSvg(e)}setSvg(e){const t=xxt(e,this._option.valueToHtml);this.product&&t!==this._svgHtmlCache&&(this._svgHtmlCache=t,this.product.innerHTML=t)}release(){super.release(),this._svgHtmlCache=""}}function xxt(i,e){var t,n,s,r,a,o;if(!(i!=null&&i.hasShape)||!i.symbolType)return"";const{symbolType:l,fill:c,stroke:u,hollow:h=!1}=i,d=i.size?e(i.size):"8px",p=i.lineWidth?e(i.lineWidth)+"px":"0px";let f="currentColor";const g=()=>u?e(u):f,m=whe(d),y=T=>new Xb({symbolType:T,size:m,fill:!0});let b=y(l);const x=b.getParsedPath();x.path||(b=y(x.pathStr));const S=b.getParsedPath().path,C=S.toString(),w=S.bounds;let A=`${w.x1} ${w.y1} ${w.width()} ${w.height()}`;if(p!=="0px"){const[T,E,P,O]=A.split(" ").map(R=>Number(R)),M=Number(p.slice(0,-2));A=`${T-M/2} ${E-M/2} ${P+M} ${O+M}`}if(!c||be(c)||h)return f=h?"none":c?e(c):"currentColor",`
    <svg width="${d}" height="${d}" viewBox="${A}"
      style="display: block;">
      <path
        d="${C}"
        style="fill: ${f}; stroke: ${g()}; stroke-width: ${p}"
      >
      </path>
    </svg>`;if(Ke(c)){f=(t="gradientColor"+i.index)!==null&&t!==void 0?t:"";let T="";const E=((n=c.stops)!==null&&n!==void 0?n:[]).map(P=>`<stop offset="${e(P.offset.toString())}" stop-color="${e(P.color)}"/>`).join("");return c.gradient==="radial"?T=`<radialGradient id="${f}" cx="50%" cy="50%" r="50%" fx="0%" fy="0%">
      ${E}
      </radialGradient>`:c.gradient==="linear"&&(T=`<linearGradient id="${f}" x1="${100*((s=c.x0)!==null&&s!==void 0?s:0)}%" y1="${100*((r=c.y0)!==null&&r!==void 0?r:0)}%" x2="${100*((a=c.x1)!==null&&a!==void 0?a:0)}%" y2="${100*((o=c.y1)!==null&&o!==void 0?o:0)}%">
      ${E}
      </linearGradient>`),`
    <svg width="${d}" height="${d}" viewBox="-0.5 -0.5 1 1"
      style="display: block;">
      ${T}
      <path
        d="${C}"
        style="fill: url(#${f}); stroke: ${g()}; stroke-width: ${p}"
      >
      </path>
    </svg>`}return""}class khe extends vo{init(e,t,n){this.product||(this.product=this.createElement(n??"span",e,void 0,t))}setContent(e,t){if(!this.product)return;let n=this._option.valueToHtml(e);t&&(n=n.replaceAll(`
`,"<br>")),n!==this.product.innerHTML&&(this.product.innerHTML=n)}}const mY={overflowWrap:"normal",wordWrap:"normal"};class Sxt extends vo{constructor(e,t,n,s){super(e,t,s),this.className=n}init(){var e,t;this.product||(this.product=this.createElement("div",[this.className]));const n=(t=(e=this._option.getTooltipActual())===null||e===void 0?void 0:e.content)!==null&&t!==void 0?t:[];if(this.className!=="shape-box"||n.some(s=>s.hasShape&&s.shapeType)){Object.keys(this.children).forEach(s=>{const r=ac(s);r>=n.length&&(this.children[r].release(),delete this.children[r])});for(let s=0;s<n.length;s++)if(!this.children[s]){if(this.className==="key-box"||this.className==="value-box"){const r=new khe(this.product,this._option,s);r.init([this.className.substring(0,this.className.indexOf("-"))],void 0,"div"),this.children[s]=r}else if(this.className==="shape-box"){const r=new Ahe(this.product,this._option,s);r.init(["shape"],void 0,"div"),this.children[s]=r}}}else Object.keys(this.children).forEach(s=>{const r=ac(s);this.children[r].release(),delete this.children[r]})}setStyle(){var e,t,n,s;const r=this._option.getTooltipStyle();super.setStyle(Pe({},mxt,r.content,this._getContentColumnStyle()));const a=(t=(e=this._option.getTooltipActual())===null||e===void 0?void 0:e.content)!==null&&t!==void 0?t:[],o=(s=(n=this._option.getTooltipAttributes())===null||n===void 0?void 0:n.content)!==null&&s!==void 0?s:[],l=(c,u,h)=>{var d,p;const{key:f,isKeyAdaptive:g}=c,{height:m}=u,{keyColumn:y}=r,b=Pe({},g?_xt:yxt,Object.assign(Object.assign(Object.assign({height:ki(m)},mY),y.common),(d=y.items)===null||d===void 0?void 0:d[h]));return be(f)&&((p=f==null?void 0:f.trim)===null||p===void 0?void 0:p.call(f))!==""||ye(f)||b.visibility?b.visibility="visible":b.visibility="hidden",b};o.forEach((c,u)=>{var h;const d=a[u];this.className==="key-box"?this.children[u].setStyle(l(d,c,u)):this.className==="value-box"?this.children[u].setStyle(((p,f,g)=>{var m;const{height:y}=f,{valueColumn:b}=r;return Pe({},vxt,Object.assign(Object.assign(Object.assign({height:ki(y)},mY),b.common),(m=b.items)===null||m===void 0?void 0:m[g]))})(0,c,u)):this.className==="shape-box"&&((h=this.children[u])===null||h===void 0||h.setStyle(((p,f,g)=>{var m,y,b,x;const{height:S}=f,{shapeColumn:C}=r,w=l(p,f,g),A=`calc((${(y=(m=w.lineHeight)!==null&&m!==void 0?m:w.fontSize)!==null&&y!==void 0?y:"18px"} - ${(b=C.width)!==null&&b!==void 0?b:"8px"}) / 2)`;return Pe({},bxt,Object.assign(Object.assign({height:ki(S),paddingTop:A},C.common),(x=C.items)===null||x===void 0?void 0:x[g]))})(d,c,u),this._getShapeSvgOption(d,u)))})}setContent(){var e,t,n,s;const r=(t=(e=this._option.getTooltipActual())===null||e===void 0?void 0:e.content)!==null&&t!==void 0?t:[];((s=(n=this._option.getTooltipAttributes())===null||n===void 0?void 0:n.content)!==null&&s!==void 0?s:[]).forEach((a,o)=>{var l,c,u,h,d,p,f;let g;const m=r[o];if(this.className==="key-box"){const y=m.key;g=be(y)&&((l=y==null?void 0:y.trim)===null||l===void 0?void 0:l.call(y))!==""||ye(y)?y:fY,(c=this.children[o])===null||c===void 0||c.setContent(g,(u=a.key)===null||u===void 0?void 0:u.multiLine)}else if(this.className==="value-box"){const y=m.value;g=be(y)&&((h=y==null?void 0:y.trim)===null||h===void 0?void 0:h.call(y))!==""||ye(y)?y:fY,(d=this.children[o])===null||d===void 0||d.setContent(g,(p=a.value)===null||p===void 0?void 0:p.multiLine)}else this.className==="shape-box"&&(g=this._getShapeSvgOption(m,o),(f=this.children[o])===null||f===void 0||f.setContent(g))})}_getContentColumnStyle(){var e,t;const n=this._option.getTooltipStyle();switch(this.className){case"shape-box":const s=(t=(e=this._option.getTooltipActual())===null||e===void 0?void 0:e.content)!==null&&t!==void 0?t:[];return Object.assign(Object.assign({},n.shapeColumn),this.className!=="shape-box"||s.some(r=>r.hasShape&&r.shapeType)?{}:{display:"none"});case"key-box":return n.keyColumn;case"value-box":return n.valueColumn}}_getShapeSvgOption(e,t){var n;const s=this._option.getTooltipStyle(),r=Object.assign(Object.assign({},s.shapeColumn),(n=s.shapeColumn.items)===null||n===void 0?void 0:n[t]);return{hasShape:e.hasShape,symbolType:e.shapeType,size:r.width,fill:e.shapeFill,stroke:e.shapeStroke,lineWidth:e.shapeLineWidth,hollow:e.shapeHollow,index:t}}}class Cxt extends vo{init(){this.product||(this.product=this.createElement("div",["container-box"]));const{align:e}=this._option.getTooltipAttributes();e==="right"?(this.valueBox||(this.valueBox=this._initBox("value-box",0)),this.keyBox||(this.keyBox=this._initBox("key-box",1)),this.shapeBox||(this.shapeBox=this._initBox("shape-box",2))):(this.shapeBox||(this.shapeBox=this._initBox("shape-box",0)),this.keyBox||(this.keyBox=this._initBox("key-box",1)),this.valueBox||(this.valueBox=this._initBox("value-box",2)))}_initBox(e,t){const n=new Sxt(this.product,this._option,e,t);return n.init(),this.children[n.childIndex]=n,n}setStyle(e){super.setStyle(Pe(this._getContentContainerStyle(),e)),Object.values(this.children).forEach(t=>{t.setStyle()})}setContent(){Object.values(this.children).forEach(e=>{e.setContent()})}_getContentContainerStyle(){const e={whiteSpace:"nowrap",lineHeight:"0px"},{panelDomHeight:t,panel:n,maxContentHeight:s}=this._option.getTooltipAttributes();if(F(s)&&t<n.height){const{shapeColumn:r={},keyColumn:a={},valueColumn:o={},panel:l={}}=this._option.getTooltipStyle(),c=[r.width,r.marginRight,a.width,a.marginRight,o.width,o.marginRight,l.paddingRight].reduce((u,h)=>u+whe(h),0);return Object.assign(Object.assign({},e),{width:`${c+hxt(this._option.getContainer())}px`,maxHeight:ki(s),overflow:"auto"})}return e}release(){super.release(),this.shapeBox=null,this.keyBox=null,this.valueBox=null}}class wxt extends vo{init(){const e=this._option.getTooltipActual();this.product||(this.product=this.createElement("h2"));const{align:t}=this._option.getTooltipAttributes();t!=="right"||this.textSpan||this._initTextSpan(0);const{title:n}=e;n!=null&&n.hasShape&&(n!=null&&n.shapeType)?this.shape||this._initShape(t==="right"?1:0):this.shape&&this._releaseShape(),t==="right"||this.textSpan||this._initTextSpan(1)}_initShape(e=0){const t=new Ahe(this.product,this._option,e);t.init(),this.shape=t,this.children[t.childIndex]=t}_releaseShape(){this.shape&&(this.shape.release(),delete this.children[this.shape.childIndex],this.shape=null)}_initTextSpan(e=1){const t=new khe(this.product,this._option,e);t.init(),this.textSpan=t,this.children[t.childIndex]=t}setStyle(e){var t,n,s,r;const a=this._option.getTooltipStyle(),o=this._option.getTooltipActual(),{title:l}=o;super.setStyle(Pe({},fxt,a.title,e)),(t=this.shape)===null||t===void 0||t.setStyle({paddingRight:(n=a.shapeColumn.common)===null||n===void 0?void 0:n.marginRight},{hasShape:l==null?void 0:l.hasShape,symbolType:l==null?void 0:l.shapeType,size:(s=a.shapeColumn.common)===null||s===void 0?void 0:s.width,fill:l==null?void 0:l.shapeFill,hollow:l==null?void 0:l.shapeHollow}),(r=this.textSpan)===null||r===void 0||r.setStyle({color:"inherit"})}setContent(){var e,t,n,s,r,a;const o=this._option.getTooltipStyle(),l=this._option.getTooltipActual(),c=this._option.getTooltipAttributes(),{title:u}=l;this.init(),(e=this.shape)===null||e===void 0||e.setStyle(void 0,{hasShape:u==null?void 0:u.hasShape,symbolType:u==null?void 0:u.shapeType,size:(t=o.shapeColumn.common)===null||t===void 0?void 0:t.width,fill:u==null?void 0:u.shapeFill,hollow:u==null?void 0:u.shapeHollow}),(n=this.textSpan)===null||n===void 0||n.setStyle({color:"inherit"}),(s=this.textSpan)===null||s===void 0||s.setContent(u==null?void 0:u.value,(a=(r=c.title)===null||r===void 0?void 0:r.value)===null||a===void 0?void 0:a.multiLine)}release(){super.release(),this.shape=null,this.textSpan=null}}const The="99999999999999";class Axt extends vo{constructor(e,t,n){super(e.getContainer(),e,0),this.title=null,this.content=null,this._classList=t,this._id=n}setVisibility(e){if(super.setVisibility(e),!this.product)return;const{classList:t}=this.product;e?t.add("visible"):t.remove("visible")}init(){var e;const t=this._option.getTooltipActual();this.product||this._initPanel(this._classList,this._id);const{title:n}=t;(n==null?void 0:n.visible)!==!1&&F(n==null?void 0:n.value)?this.title||this._initTitle():this.title&&this._releaseTitle(),((e=t.content)!==null&&e!==void 0?e:[]).length>0?this.content||this._initContent():this.content&&this._releaseContent()}_initPanel(e,t){const n=this.createElement("div",e,{left:"0",top:"0",pointerEvents:"none",padding:"12px",position:"absolute",zIndex:The,fontFamily:"sans-serif",fontSize:"11px",borderRadius:"3px",borderStyle:"solid",lineHeight:"initial",background:"#fff",boxShadow:"2px 2px 4px rgba(0, 0, 0, 0.1)",maxWidth:"100wh",maxHeight:"100vh"},t);this.product=n}_initTitle(){const e=new wxt(this.product,this._option,0);e.init(),this.title=e,this.children[e.childIndex]=e}_releaseTitle(){this.title&&(this.title.release(),delete this.children[this.title.childIndex],this.title=null)}_initContent(){const e=new Cxt(this.product,this._option,1);e.init(),this.content=e,this.children[e.childIndex]=e}_releaseContent(){this.content&&(this.content.release(),delete this.children[this.content.childIndex],this.content=null)}setStyle(){const e=this._option.getTooltipStyle();super.setStyle(Pe({},gxt,e.panel)),Object.values(this.children).forEach(t=>t.setStyle())}setContent(){Object.values(this.children).forEach(e=>{e.setContent()})}release(){super.release(),this.title=null,this.content=null}}const Ehe=i=>{X.registerComponentPlugin(i.type,i)};class qO extends d${getVisibility(){var e;return!!(!((e=this.model)===null||e===void 0)&&e.getVisibility())}setVisibility(e){var t;e!==this.getVisibility()&&((t=this.model)===null||t===void 0||t.setVisibility(e))}constructor(){super(qO.type),this.type=Hy.dom,this._tooltipContainer=Ih==null?void 0:Ih.body}onAdd(e){super.onAdd(e),this._initStyle(),this.initEl()}initEl(){const e=this._component.getSpec(),t=e.parentElement;if(Ih&&t&&t.children&&t.children.length){for(let n=0;n<t.children.length;n++)if(t.children[n].classList.contains(pY)){this._container=t.children[n];break}this._container||(this._container=Ih.createElement("div"),this._container.style.position="relative",this._container.style.zIndex=The,this._container.classList.add(pY),t.appendChild(this._container)),this.model=new Axt({valueToHtml:this._option.sanitize,getTooltipStyle:()=>this._domStyle,getTooltipActual:()=>this._tooltipActual,getTooltipAttributes:()=>this._attributes,getContainer:()=>this._container},[e.className],this.name)}}_removeTooltip(){var e;(e=this.model)===null||e===void 0||e.release(),this._container=null}_updateTooltip(e,t){var n,s;if(e&&this.model){const{tooltipSpec:r,activeTooltipSpec:a}=t;t.changePositionOnly||(this._tooltipActual=a,this._initStyle(),this.model.initAll(),this.model.setStyle(),this.model.setContent()),this.setVisibility(e);const o=this.model.product;if(o){const{x:l=0,y:c=0}=(n=a.position)!==null&&n!==void 0?n:{};if(r.updateElement){this._updatePosition((s=this._cacheCustomTooltipPosition)!==null&&s!==void 0?s:{x:l,y:c}),r.updateElement(o,a,t);const u=this._getActualTooltipPosition(a,t,{width:o.offsetWidth,height:o.offsetHeight});this._updatePosition(u),this._cacheCustomTooltipPosition=u}else this._updatePosition({x:l,y:c})}}else this.setVisibility(e),this._cacheCustomTooltipPosition=void 0}_initStyle(){this._domStyle=dxt(this._attributes)}_getParentElement(e){var t;return(t=this._container)!==null&&t!==void 0?t:super._getParentElement(e)}isTooltipShown(){return this.getVisibility()}reInit(){super.reInit(),this._initStyle()}_updatePosition({x:e,y:t}){const n=this.model.product;n&&(n.style.transform=`translate3d(${e}px, ${t}px, 0)`)}}qO.type=Hy.dom;const kxt=()=>{Ehe(qO)};class ZO extends d${constructor(){super(ZO.type),this.type=Hy.canvas}onAdd(e){var t;super.onAdd(e),this._tooltipCanvasId=(t=this._chartOption.modeParams)===null||t===void 0?void 0:t.tooltipCanvasId}_initTooltipComponent(e){const t=this._getLayer(e);this._tooltipComponent=new Noe({autoCalculatePosition:!1,autoMeasure:!1}),t.add(this._tooltipComponent)}_getLayer(e){if(this._layer)return this._layer;this._layer=e.createLayer(this._tooltipCanvasId);const t=this._layer.layerHandler.canvas.nativeCanvas;return t&&t.style&&(t.style.touchAction="none",t.style.pointerEvents="none"),this._layer}_removeTooltip(){this._layer&&this._layer.removeAllChild(),this._attributes=null}_updateTooltip(e,t){this._visible=e;const n=this._compiler.getStage();if(!n)return;if(!e)return void(this._tooltipComponent&&this._tooltipComponent.attribute.visible&&(this._tooltipComponent.hideAll(),this._tooltipComponent.setAttributes({visibleAll:!1})));this._tooltipComponent||this._initTooltipComponent(n);const{activeTooltipSpec:s}=t,r=s.position;t.changePositionOnly?F(r)&&this._tooltipComponent.setAttributes(r):this._tooltipComponent.setAttributes(Object.assign(Object.assign({},this._attributes),r)),this._tooltipComponent.attribute.visible||(this._tooltipComponent.showAll(),this._tooltipComponent.setAttributes({visibleAll:!0}))}isTooltipShown(){var e;return(e=this._tooltipComponent)===null||e===void 0?void 0:e.attribute.visibleAll}release(){var e;super.release(),(e=this._layer)===null||e===void 0||e.release()}}ZO.type=Hy.canvas;const Txt=()=>{Ehe(ZO)},Ext=i=>{X.registerChartPlugin(i.type,i)},Pxt=/\{([^}]+)\}/,Oxt=/\{([^}]+)\}/g,Mxt=/:/;class Zp extends O4{constructor(){super(Zp.type),this.type="formatterPlugin",this._timeModeFormat={utc:ul.getInstance().timeUTCFormat,local:ul.getInstance().timeFormat},this._formatter=this._format,this._timeFormatter=this._timeModeFormat.local,this._numericFormatter=Ep.getInstance().format,this._numericSpecifier=Ep.getInstance().formatter,this._numericFormatterCache=new Map,this._isNumericFormatterCache=new Map}onInit(e,t){var n;const{globalInstance:s}=e;if(!s)return;this._spec=(n=t==null?void 0:t[Zp.specKey])!==null&&n!==void 0?n:{};const{timeMode:r,customFormatter:a,numericFormatter:o,timeFormatter:l}=this._spec;ee(a)?this._formatter=a:(this._formatter=this._format.bind(this),ee(l)?this._timeFormatter=l:r&&this._timeModeFormat[r]&&(this._timeFormatter=this._timeModeFormat[r]),o&&(this._numericFormatter=o,this._numericSpecifier=null,this._numericFormatterCache=null)),X.registerFormatter(this._formatter)}_format(e,t,n){return ie(e)?e.map((s,r)=>{const a=ie(n)?n[r]:n;return a?this._formatSingleLine(s,t,a):s}):ie(n)?n.map(s=>this._formatSingleLine(e,t,s)):this._formatSingleLine(e,t,n)}_formatSingleLine(e,t,n){let s;return this._isNumericFormatterCache&&(this._isNumericFormatterCache.get(n)?s=this._isNumericFormatterCache.get(n):(s=Pxt.test(n),this._isNumericFormatterCache.set(n,s))),s?n.replace(Oxt,(r,a)=>{if(!Mxt.test(a)){const u=t[a.trim()];return u!==void 0?u:r}const o=a.split(":"),l=t[o.shift()],c=o.join(":");return this._formatSingleText(l,c)}):this._formatSingleText(e,n)}_formatSingleText(e,t){if(use.test(t)&&this._numericFormatter){let n;return this._numericFormatterCache&&this._numericSpecifier?(this._numericFormatterCache.get(t)?n=this._numericFormatterCache.get(t):(n=this._numericSpecifier(t),this._numericFormatterCache.set(t,n)),n(Number(e))):this._numericFormatter(t,Number(e))}return t.includes("%")&&this._timeFormatter?this._timeFormatter(t,e):e}release(){super.release(),this._format=null,this._timeFormatter=null,this._numericFormatter=null,this._numericSpecifier=null,this._numericFormatterCache=null,this._isNumericFormatterCache=null}}Zp.pluginType="chart",Zp.specKey="formatter",Zp.type="formatterPlugin";const Ixt=()=>{Ext(Zp)};class B1 extends Rs{constructor(){super(...arguments),this.type=B1.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{width:void 0,height:void 0,lineWidth:0})}}B1.type="image";const Rxt=()=>{X.registerMark(B1.type,B1),jht()},Lxt=()=>{hce(),RO(),qu(),R0(),ta(),FO(),Zu(),D4(),rg(),wue(),Rxt(),Nue(),LO(),sue(),R4(),Aue()};_a.useRegisters([emt,smt,cmt,bmt,ibt,sbt,rbt,cbt,tbt,dbt,pbt,fbt,ybt,Abt,kbt,hbt,vbt,bbt,Ebt,Sbt,Cbt,wbt,Tbt,Pbt,lbt,Obt,abt,hmt,nbt,ubt,_bt,xbt,gbt,mbt,Qr,ea,Wgt,Ggt,Kgt,qx,L0,Dbt,Ubt,t1t,s1t,l1t,h1t,d1t,g1t,Hce,M1t,L1t,V1t,I1t,D1t,U1t,W1t,R1t,N1t,$1t,H1t,G1t,K1t,Q1t,ixt,ext,txt,Lxt,kxt,Txt,Ixt,kut,Mut,Iut,Rut,Out,Put,umt,tit,Qtt]);class Dxt{getCurrentMode(){return document.body.hasAttribute(this.themeModeAttribute)&&document.body.getAttribute(this.themeModeAttribute)==="dark"?"dark":"light"}generateThemeName(e){var t;const n=(t=e==null?void 0:e.mode)!==null&&t!==void 0?t:this.getCurrentMode();return`${this.themeNamePrefix}${n[0].toUpperCase()}${n.slice(1)}`}generateTheme(e,t){var n;const s=(n=e==null?void 0:e.mode)!==null&&n!==void 0?n:this.getCurrentMode(),r=this.baseTheme[s],{dataScheme:a,palette:o}=r.colorScheme.default,l={default:{dataScheme:GGe(s,this.tokenMap.dataScheme,a,t),palette:KGe(s,this.tokenMap.palette,o,t)}};return Object.assign(Object.assign({},r),{colorScheme:l})}constructor(e){var t;this.options=e,this.themeManager=(t=e.themeManager)!==null&&t!==void 0?t:vu}init(){var e;const{defaultMode:t,isWatchingMode:n=!0}=(e=this.options)!==null&&e!==void 0?e:{};this.switchVChartTheme(!1,{mode:t}),n&&WGe(document.body,this.themeModeAttribute,()=>this.switchVChartTheme())}switchVChartTheme(e,t,n){const s=this.generateThemeName(t);if(e||this.themeManager.getCurrentTheme()!==s){if(e&&this.themeManager.removeTheme(s),!this.themeManager.themeExist(s)){const r=n??this.generateTheme(t);this.themeManager.registerTheme(s,r)}this.themeManager.setCurrentTheme(s)}}}const Phe=[{scheme:["#5769FF","#8ED4E7","#F58700","#DCB7FC","#4A9CF7","#F3CC35","#FE8090","#8BD7D2","#83B023","#E9A5E5","#30a7ce","#f9c064","#b171f9","#77b6f9","#c88f02","#ffaab2","#33b0ab","#b6d781","#d458d4","#bcc6ff"]}],Fxt={default:{dataScheme:Phe,palette:{backgroundColor:"rgba(255,255,255,1)",borderColor:"rgba(28,31,35,0.08)",lineColor0:"rgba(107, 112, 117, 1)",lineColor1:"rgba(167, 171, 176, 1)",lineColor2:"rgba(198, 202, 205, 1)",shadowColor:"rgba(33,37,44,0.1)",hoverBackgroundColor:"rgba(55,58,67,0.05)",sliderRailColor:"#f1f3f4",sliderHandleColor:"#ffffff",sliderTrackColor:"#0040ff",popupBackgroundColor:"rgba(255,255,255,1)",primaryFontColor:"rgba(37,39,46,1)",secondaryFontColor:"rgba(37,39,46,0.8)",tertiaryFontColor:"rgba(37,39,46,0.6)",axisLabelFontColor:"#89909d",disableFontColor:"#bcc1cb",axisMarkerFontColor:"rgba(255,255,255,1)",axisGridColor:"rgba(198, 202, 205, 1)",axisDomainColor:"rgba(167, 171, 176, 1)",crosshairBackgroundColor:"rgba(55,58,67,0.05)",dataZoomHandleStrokeColor:"#aeb5be",dataZoomChartColor:"#c9ced8",playerControllerColor:"#0040ff",axisMarkerBackgroundColor:"#21252c",markLabelBackgroundColor:"#f1f2f5",markLineStrokeColor:"rgba(107, 112, 117, 1)",dangerColor:"#D63125",warningColor:"#F58700",successColor:"#2BA345",infoColor:"#1F80F5"}}},Ohe={bar:{style:{opacity:1},state:{hover:{opacity:.8}}},point:{style:{size:8},state:{hover:{size:12}}},label:{style:{lineJoin:"bevel"}}},Mhe={fontFamily:"Inter,-apple-system,BlinkMacSystemFont,Segoe UI,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Helvetica Neue,Helvetica,Arial,sans-serif"},Bxt={barMaxWidth:60,label:{style:{fill:{type:"palette",key:"secondaryFontColor"}}}},jxt={line:{style:{lineWidth:2}},point:{style:{symbolType:"circle"}},label:{position:"top",offset:4,style:{fill:{type:"palette",key:"secondaryFontColor"}}}},Nxt={outerRadius:1,innerRadius:.7,pie:{style:{padAngle:0},state:{hover:{outerRadius:1.02},selected:{outerRadius:1.02}}},label:{visible:!0,position:"outside"}},$xt={line:{style:{lineWidth:2}},point:{style:{symbolType:"circle"}},area:{style:{stroke:{type:"palette",key:"backgroundColor"},fillOpacity:1,fill:{gradient:"linear",x0:.5,y0:0,x1:.5,y1:1,stops:[{offset:0,opacity:.2},{offset:1,opacity:0}]}}},label:{position:"top",offset:4,style:{fill:{type:"palette",key:"secondaryFontColor"}}},seriesMark:"line"},zxt={line:{style:{lineWidth:2}},point:{style:{symbolType:"circle"}},area:{state:{hover:{fillOpacity:.5}}},label:{position:"top",offset:4,style:{fill:{type:"palette",key:"secondaryFontColor"}}}},Hxt={transform:{style:{fill:{type:"palette",key:"axisGridColor",a:.5}}}},Ihe={bar:Bxt,line:jxt,pie:Nxt,area:$xt,radar:zxt,funnel:Hxt},Vxt={axis:{grid:{style:{lineWidth:1,lineDash:[4,4]}},domainLine:{style:{lineWidth:1,strokeOpacity:1}}},axisX:{label:{autoRotate:!0,autoRotateAngle:[0,-45]}},axisY:{label:{autoRotate:!0,autoRotateAngle:[0,-45]}}},Uxt={offset:{x:16,y:16},panel:{padding:{top:20,left:20,right:20,bottom:20},backgroundColor:{type:"palette",key:"popupBackgroundColor"},border:{color:{type:"palette",key:"popupBackgroundColor"},width:0,radius:6},shadow:{x:0,y:4,blur:14,spread:0,color:{type:"palette",key:"shadowColor"}}},spaceRow:8,titleLabel:{fontSize:14,lineHeight:"150%",fontColor:{type:"palette",key:"primaryFontColor"},fontWeight:"bold",textAlign:"left",textBaseline:"middle",spacing:0},shape:{size:8,spacing:8},keyLabel:{fontSize:14,lineHeight:"150%",fontColor:{type:"palette",key:"secondaryFontColor"},textAlign:"left",textBaseline:"middle",spacing:32},valueLabel:{fontSize:14,lineHeight:"150%",fontColor:{type:"palette",key:"primaryFontColor"},fontWeight:"bold",textBaseline:"middle",spacing:0}},Wxt={discreteLegend:{visible:!0,position:"middle",padding:[16,24],title:{visible:!1},item:{visible:!0,spaceCol:16,spaceRow:16,padding:2,background:{state:{selectedHover:{fill:{type:"palette",key:"hoverBackgroundColor",a:.3}},unSelectedHover:{fill:{type:"palette",key:"hoverBackgroundColor",a:.3}}}},shape:{space:8,style:{symbolType:"circle",size:12},state:{unSelected:{fillOpacity:.2,opacity:1}}},label:{space:6,style:{fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"},fontSize:14,lineHeight:"130%",opacity:1},state:{unSelected:{fill:{type:"palette",key:"disableFontColor"},opacity:1}}}},allowAllCanceled:!1}},Gxt={trigger:"hover",bandField:{line:{type:"rect",visible:!0,style:{fill:{type:"palette",key:"crosshairBackgroundColor"},opacity:1,lineDash:[]}}},linearField:{line:{type:"line",visible:!0,style:{stroke:{type:"palette",key:"lineColor2"},opacity:1,lineDash:[2,3]}}}},Rhe=Object.assign(Object.assign(Object.assign({},Vxt),Wxt),{crosshair:Gxt,tooltip:Uxt}),Kxt={name:"semiDesignLight",description:"Semi Design - light",type:"light",token:Mhe,colorScheme:Fxt,markByName:Ohe,series:Ihe,component:Rhe},Xxt={default:{dataScheme:Phe,palette:{backgroundColor:"#16161a",borderColor:"rgba(255,255,255,0.08)",lineColor0:"rgba(136, 141, 146, 1)",lineColor1:"rgba(85, 91, 97, 1)",lineColor2:"rgba(65, 70, 76, 1)",shadowColor:"rgba(0,0,0,0.25)",hoverBackgroundColor:"rgba(255,255,255,0.12)",sliderRailColor:"rgba(255,255,255,0.12)",sliderHandleColor:"#e4e7f5",sliderTrackColor:"rgba(84,169,255,1)",popupBackgroundColor:"#43444a",primaryFontColor:"rgba(249,249,249,1)",secondaryFontColor:"rgba(249,249,249,0.8)",tertiaryFontColor:"rgba(249,249,249,0.6)",axisLabelFontColor:"rgba(249,249,249,0.6)",disableFontColor:"rgba(249,249,249,0.35)",axisMarkerFontColor:"#16161a",axisGridColor:"rgba(65, 70, 76, 1)",axisDomainColor:"rgba(85, 91, 97, 1)",crosshairBackgroundColor:"rgba(55,58,67,0.05)",dataZoomHandleStrokeColor:"rgba(46,50,56,0.13)",dataZoomChartColor:"rgba(255,255,255,0.16)",playerControllerColor:"rgba(84,169,255,1)",axisMarkerBackgroundColor:"rgba(249,249,249,1)",markLabelBackgroundColor:"rgba(255,255,255,0.08)",markLineStrokeColor:"rgba(249,249,249,0.8)",dangerColor:"rgba(252,114,90,1)",warningColor:"rgba(255,174,67,1)",successColor:"rgba(93,194,100,1)",infoColor:"rgba(84,169,255,1)"}}},Yxt={name:"semiDesignDark",description:"Semi Design - dark",type:"dark",token:Mhe,colorScheme:Xxt,markByName:Ohe,series:Ihe,component:Rhe},qxt={backgroundColor:"--semi-color-bg-0",borderColor:"--semi-color-border",lineColor0:"--semi-grey-5",lineColor1:"--semi-grey-3",lineColor2:"--semi-grey-2",hoverBackgroundColor:"--semi-color-fill-0",sliderRailColor:"--semi-color-fill-0",sliderHandleColor:"--semi-white",sliderTrackColor:"--semi-color-primary",popupBackgroundColor:{light:"--semi-color-bg-0",dark:"--semi-color-bg-3"},primaryFontColor:"--semi-color-text-0",secondaryFontColor:"--semi-color-text-1",tertiaryFontColor:"--semi-color-text-2",axisLabelFontColor:"--semi-color-text-2",disableFontColor:"--semi-color-disabled-text",axisMarkerFontColor:"--semi-color-bg-0",axisGridColor:"--semi-grey-2",axisDomainColor:"--semi-grey-3",crosshairBackgroundColor:"--semi-color-fill-0",dataZoomHandleStrokeColor:{light:"--semi-color-fill-2"},dataZoomChartColor:"--semi-color-fill-1",playerControllerColor:"--semi-color-primary",axisMarkerBackgroundColor:"--semi-color-text-0",markLabelBackgroundColor:"--semi-color-border",markLineStrokeColor:"--semi-grey-5",dangerColor:"--semi-color-danger",warningColor:"--semi-color-warning",successColor:"--semi-color-success",infoColor:"--semi-color-info"},Zxt=[{scheme:["--semi-color-data-0","--semi-color-data-1","--semi-color-data-2","--semi-color-data-3","--semi-color-data-4","--semi-color-data-5","--semi-color-data-6","--semi-color-data-7","--semi-color-data-8","--semi-color-data-9","--semi-color-data-10","--semi-color-data-11","--semi-color-data-12","--semi-color-data-13","--semi-color-data-14","--semi-color-data-15","--semi-color-data-16","--semi-color-data-17","--semi-color-data-18","--semi-color-data-19"]}],Jxt=i=>{new MutationObserver(e=>{e.forEach(t=>{var n;if(t.addedNodes.length===1){const s=t.addedNodes[0];s.tagName==="LINK"&&((n=s.getAttribute)===null||n===void 0?void 0:n.call(s,"semi-theme-switcher"))==="true"&&i(t,s)}})}).observe(document.body,{childList:!0})};class Vy extends Dxt{constructor(){super(...arguments),this.themeModeAttribute=Vy.themeModeAttribute,this.themeNamePrefix=Vy.themeNamePrefix,this.baseTheme={light:Kxt,dark:Yxt},this.tokenMap={dataScheme:Zxt,palette:qxt}}init(){var e;super.init();const{isWatchingThemeSwitch:t=!1}=(e=this.options)!==null&&e!==void 0?e:{};t&&Jxt(()=>{const n={mode:this.getCurrentMode()},s=JSON.stringify(this.generateTheme(n).colorScheme);let r=0;const a=setInterval(()=>{const o=this.generateTheme(n);(r>50||s!==JSON.stringify(o.colorScheme))&&(this.switchVChartTheme(!0,n,o),clearInterval(a)),r++},100)})}}Vy.themeModeAttribute="theme-mode",Vy.themeNamePrefix="semiDesign";const Qxt=i=>{const e=new Vy({});return e.init(),e};Qxt();const p$=window.matchMedia("(prefers-color-scheme: dark)"),yY=document.body;function Lhe(){try{p$.removeEventListener("change",EB),pt("removeThemeListener","successfully")}catch(i){console.error("Error removing MQL listener:",i),pt("removeThemeListener","warning","Can`t remove Theme listener")}}function Dhe(i){i?(yY.setAttribute("theme-mode","dark"),bi("theme_color","dark"),pt("setTheme:Dark","successfully")):(yY.removeAttribute("theme-mode"),bi("theme_color","light"),pt("setTheme:Light","successfully"))}function EB(){const i=document.body;p$.matches?i.hasAttribute("theme-mode")||i.setAttribute("theme-mode","dark"):i.hasAttribute("theme-mode")&&i.removeAttribute("theme-mode")}function JO(){pt("TrySetTheme:Dark","successfully"),Lhe(),Dhe(!0),window.dispatchEvent(new CustomEvent("themeChange",{detail:"dark"}))}function QO(){pt("TrySetTheme:Light","successfully"),Lhe(),Dhe(!1),window.dispatchEvent(new CustomEvent("themeChange",{detail:"light"}))}function e2(){pt("TrySetTheme:Auto","successfully"),EB(),bi("theme_color","auto"),p$.addEventListener("change",EB),window.dispatchEvent(new CustomEvent("themeChange",{detail:"auto"}))}function eSt(i){i==="light"?QO():i==="dark"&&JO()}function mw(){return dt("theme_color")}var tSt=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]])}return t};function iSt(i,e="ChartContainer",t){const n=k.forwardRef((s,r)=>{const a=H.useRef(),[o,l]=H.useState(!1),{className:c,style:u,width:h}=s,d=tSt(s,["className","style","width"]);return H.useLayoutEffect(()=>{l(!0)},[]),k.createElement("div",{ref:a,className:c,style:Object.assign({position:"relative",height:s.height||"100%",width:s.width||"100%"},u)},o?k.createElement(i,Object.assign({ref:r,container:a.current},t?t(d):d)):k.createElement(k.Fragment,null))});return n.displayName=e||i.name,n}const Fhe=k.createContext(null);Fhe.displayName="ChartContext";const Bhe=k.createContext(null);Bhe.displayName="ViewContext";var jhe={exports:{}},Ai={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$=Symbol.for("react.element"),g$=Symbol.for("react.portal"),t2=Symbol.for("react.fragment"),i2=Symbol.for("react.strict_mode"),n2=Symbol.for("react.profiler"),s2=Symbol.for("react.provider"),r2=Symbol.for("react.context"),nSt=Symbol.for("react.server_context"),a2=Symbol.for("react.forward_ref"),o2=Symbol.for("react.suspense"),l2=Symbol.for("react.suspense_list"),c2=Symbol.for("react.memo"),u2=Symbol.for("react.lazy"),sSt=Symbol.for("react.offscreen"),Nhe;Nhe=Symbol.for("react.module.reference");function Lo(i){if(typeof i=="object"&&i!==null){var e=i.$$typeof;switch(e){case f$:switch(i=i.type,i){case t2:case n2:case i2:case o2:case l2:return i;default:switch(i=i&&i.$$typeof,i){case nSt:case r2:case a2:case u2:case c2:case s2:return i;default:return e}}case g$:return e}}}Ai.ContextConsumer=r2;Ai.ContextProvider=s2;Ai.Element=f$;Ai.ForwardRef=a2;Ai.Fragment=t2;Ai.Lazy=u2;Ai.Memo=c2;Ai.Portal=g$;Ai.Profiler=n2;Ai.StrictMode=i2;Ai.Suspense=o2;Ai.SuspenseList=l2;Ai.isAsyncMode=function(){return!1};Ai.isConcurrentMode=function(){return!1};Ai.isContextConsumer=function(i){return Lo(i)===r2};Ai.isContextProvider=function(i){return Lo(i)===s2};Ai.isElement=function(i){return typeof i=="object"&&i!==null&&i.$$typeof===f$};Ai.isForwardRef=function(i){return Lo(i)===a2};Ai.isFragment=function(i){return Lo(i)===t2};Ai.isLazy=function(i){return Lo(i)===u2};Ai.isMemo=function(i){return Lo(i)===c2};Ai.isPortal=function(i){return Lo(i)===g$};Ai.isProfiler=function(i){return Lo(i)===n2};Ai.isStrictMode=function(i){return Lo(i)===i2};Ai.isSuspense=function(i){return Lo(i)===o2};Ai.isSuspenseList=function(i){return Lo(i)===l2};Ai.isValidElementType=function(i){return typeof i=="string"||typeof i=="function"||i===t2||i===n2||i===i2||i===o2||i===l2||i===sSt||typeof i=="object"&&i!==null&&(i.$$typeof===u2||i.$$typeof===c2||i.$$typeof===s2||i.$$typeof===r2||i.$$typeof===a2||i.$$typeof===Nhe||i.getModuleId!==void 0)};Ai.typeOf=Lo;jhe.exports=Ai;var rSt=jhe.exports;const m$=i=>{let e=[];return k.Children.forEach(i,t=>{B(t)||(rSt.isFragment(t)?e=e.concat(m$(t.props.children)):e.push(t))}),e},aSt=["children","hooks","ref"],j1={onPointerDown:"pointerdown",onPointerUp:"pointerup",onPointerUpOutside:"pointerupoutside",onPointerTap:"pointertap",onPointerOver:"pointerover",onPointerMove:"pointermove",onPointerEnter:"pointerenter",onPointerLeave:"pointerleave",onPointerOut:"pointerout",onMouseDown:"mousedown",onMouseUp:"mouseup",onMouseUpOutside:"mouseupoutside",onMouseMove:"mousemove",onMouseOver:"mouseover",onMouseOut:"mouseout",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onPinch:"pinch",onPinchStart:"pinchstart",onPinchEnd:"pinchend",onPan:"pan",onPanStart:"panstart",onPanEnd:"panend",onDrag:"drag",onDragStart:"dragstart",onDragEnter:"dragenter",onDragLeave:"dragleave",onDragOver:"dragover",onDragEnd:"dragend",onRightDown:"rightdown",onRightUp:"rightup",onRightUpOutside:"rightupoutside",onTouchStart:"touchstart",onTouchEnd:"touchend",onTouchEndOutside:"touchendoutside",onTouchMove:"touchmove",onTouchCancel:"touchcancel",onPress:"press",onPressUp:"pressup",onPressEnd:"pressend",onSwipe:"swipe",onDrop:"drop",onWeel:"wheel",onClick:"click",onDblClick:"dblclick"},oSt={onLegendItemHover:"legendItemHover",onLegendItemUnHover:"legendItemUnHover",onLegendItemClick:"legendItemClick",onLegendFilter:"legendFilter",onLegendSelectedDataChange:"legendSelectedDataChange"},lSt={onBrushStart:"brushStart",onBrushChange:"brushChange",onBrushEnd:"brushEnd",onBrushClear:"brushClear"},cSt={onDataZoomChange:"dataZoomChange"},uSt={onPlayerPlay:"playerPlay",onPlayerPause:"playerPause",onPlayerEnd:"playerEnd",onPlayerChange:"playerChange",onPlayerForward:"playerForward",onPlayerBackward:"playerBackward"},hSt={onScrollBarChange:"scrollBarChange"},dSt={onDimensionHover:"dimensionHover",onDimensionClick:"dimensionClick"},pSt={onDrill:"drill"},fSt={onInitialized:"initialized",onRendered:"rendered",onRenderFinished:"renderFinished",onAnimationFinished:"animationFinished",onLayoutStart:"layoutStart",onLayoutEnd:"layoutEnd"},$he=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},oSt),lSt),uSt),cSt),hSt),dSt),fSt),pSt),j1),gSt=Object.keys($he);Object.keys(j1).reduce((i,e)=>(i[j1[e]]=e,i),{});const _Y=(i,e=j1)=>{const t={};return Object.keys(i).forEach(n=>{e[n]&&i[n]&&(t[n]=i[n])}),t},mSt=(i,e,t,n=j1)=>{if(!e&&!t||!i)return!1;const s=t?_Y(t,n):null,r=e?_Y(e,n):null;return s&&Object.keys(s).forEach(a=>{(!r||!r[a]||r[a]!==s[a])&&i.off(n[a],t[a])}),r&&Object.keys(r).forEach(a=>{s&&s[a]&&s[a]===r[a]||i.on(n[a],r[a])}),!0},vY=`${Ie}_REACT_TOOLTIP`,ySt=(i,e,t)=>{let n;if(t!=null&&t.tooltipRender?(n=t.tooltipRender,delete t.tooltipRender):t!=null&&t.children?n=(s,r,a)=>k.Children.map(t.children,o=>Ke(o)?k.cloneElement(o,{tooltipElement:s,actualTooltip:r,params:a}):o):e.tooltipRender&&(n=e.tooltipRender),n){let s;return t!=null&&t.reserveDefaultTooltip?(s=t.reserveDefaultTooltip,delete t.reserveDefaultTooltip):s=e.reserveDefaultTooltip,Object.assign(Object.assign({},t),{updateElement:(r,a,o)=>{const{changePositionOnly:l}=o;if(!l){if(!s){r.style.width="auto",r.style.height="auto",r.style.minHeight="auto",r.style.padding="0px";for(let c=0;c<r.children.length;c++){const u=r.children[c];u.className!==vY&&u.style.display!=="none"&&(u.style.display="none")}}i(Nf.createPortal(k.createElement("div",{className:vY},n(r,a,o)),r))}}})}return t},bY=[...aSt,...gSt,"vchartConstrouctor","useSyncRender","skipFunctionDiff","onError","onReady","spec","container","options","morphConfig"],xY={morph:!1,enableExitAnimation:!1},zhe=(i,e)=>`${i&&i.type&&(i.type.displayName||i.type.name)}-${e}`,_St=i=>{const e={};return m$(i.children).map((t,n)=>{const s=t&&t.type&&t.type.parseSpec;if(s&&t.props){const r=s(B(t.props.componentId)?Object.assign(Object.assign({},t.props),{componentId:zhe(t,n)}):t.props);r.isSingle?e[r.specName]=r.spec:(e[r.specName]||(e[r.specName]=[]),e[r.specName].push(r.spec))}}),e},vSt=k.forwardRef((i,e)=>{const[t,n]=H.useState(0),s=H.useRef({});H.useImperativeHandle(e,()=>{var y;return(y=s.current)===null||y===void 0?void 0:y.chart});const r=!!i.spec,[a,o]=H.useState(null),l=H.useRef(!1),c=H.useRef(kc(i,bY)),u=H.useRef(null),h=k.useRef(null),d=!!i.skipFunctionDiff,[p,f]=H.useState(null),g=y=>{let b;r&&y.spec?(b=y.spec,F(y.data)&&(b=Object.assign(Object.assign({},y.spec),{data:y.data}))):b=Object.assign(Object.assign({},c.current),u.current);const x=ySt(f,y,b.tooltip);return x&&(b.tooltip=x),b},m=()=>{if(!l.current){if(!s.current||!s.current.chart)return;mSt(s.current.chart,i,h.current,$he);const y=s.current.chart.getCompiler().getVGrammarView();n(t+1),i.onReady&&i.onReady(s.current.chart,t===0),o(y)}};return H.useEffect(()=>{var y,b,x;const S=r?null:_St(i);if(!(!((y=s.current)===null||y===void 0)&&y.chart))return r||(u.current=S),(w=>{const A=new w.vchartConstrouctor(g(w),Object.assign(Object.assign({},w.options),{onError:w.onError,autoFit:!0,dom:w.container}));s.current=Object.assign(Object.assign({},s.current),{chart:A}),l.current=!1})(i),s.current.chart&&(s.current.chart.renderSync({reuse:!1}),m()),void(h.current=i);if(r)return void(Pt(h.current.spec,i.spec,{skipFunction:d})?h.current.data!==i.data&&(s.current.chart.updateFullDataSync(i.data),m(),h.current=i):(s.current.chart.updateSpecSync(g(i),void 0,(b=i.morphConfig)!==null&&b!==void 0?b:xY),m(),h.current=i));const C=kc(i,bY);Pt(C,c.current,{skipFunction:d})&&Pt(S,u.current)||(c.current=C,u.current=S,s.current.chart.updateSpecSync(g(i),void 0,(x=i.morphConfig)!==null&&x!==void 0?x:xY),m(),h.current=i)},[i]),H.useEffect(()=>()=>{s&&s.current&&s.current.chart&&(s.current.chart.release(),s.current.chart=null),h.current=null,l.current=!0},[]),k.createElement(Fhe.Provider,{value:s.current},k.createElement(Bhe.Provider,{value:a},m$(i.children).map((y,b)=>{if(typeof y=="string")return null;const x=zhe(y,b);return k.createElement(k.Fragment,{key:x},k.cloneElement(y,{updateId:t,componentId:x}))}),p))}),bSt=(i,e,t)=>{const n=iSt(vSt,i,s=>e?Object.assign(s,e):s);return n.displayName=i,n},xSt=bSt("VChart",{vchartConstrouctor:_a}),SSt=(i,e,t,n)=>{var r,a,o,l;const s=[t,{code:e,...n||{}}];if((a=(r=i==null?void 0:i.services)==null?void 0:r.logger)!=null&&a.forward)return i.services.logger.forward(s,"warn","react-i18next::",!0);Jp(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),(l=(o=i==null?void 0:i.services)==null?void 0:o.logger)!=null&&l.warn?i.services.logger.warn(...s):console!=null&&console.warn&&console.warn(...s)},SY={},PB=(i,e,t,n)=>{Jp(t)&&SY[t]||(Jp(t)&&(SY[t]=new Date),SSt(i,e,t,n))},Hhe=(i,e)=>()=>{if(i.isInitialized)e();else{const t=()=>{setTimeout(()=>{i.off("initialized",t)},0),e()};i.on("initialized",t)}},OB=(i,e,t)=>{i.loadNamespaces(e,Hhe(i,t))},CY=(i,e,t,n)=>{if(Jp(t)&&(t=[t]),i.options.preload&&i.options.preload.indexOf(e)>-1)return OB(i,t,n);t.forEach(s=>{i.options.ns.indexOf(s)<0&&i.options.ns.push(s)}),i.loadLanguages(e,Hhe(i,n))},CSt=(i,e,t={})=>!e.languages||!e.languages.length?(PB(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(i,{lng:t.lng,precheck:(n,s)=>{var r;if(((r=t.bindI18n)==null?void 0:r.indexOf("languageChanging"))>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!s(n.isLanguageChangingTo,i))return!1}}),Jp=i=>typeof i=="string",wSt=i=>typeof i=="object"&&i!==null,ASt=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,kSt={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},TSt=i=>kSt[i],ESt=i=>i.replace(ASt,TSt);let MB={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:ESt};const PSt=(i={})=>{MB={...MB,...i}},OSt=()=>MB;let Vhe;const MSt=i=>{Vhe=i},ISt=()=>Vhe,RSt={type:"3rdParty",init(i){PSt(i.options.react),MSt(i)}},LSt=H.createContext();class DSt{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const FSt=(i,e)=>{const t=H.useRef();return H.useEffect(()=>{t.current=i},[i,e]),t.current},Uhe=(i,e,t,n)=>i.getFixedT(e,t,n),BSt=(i,e,t,n)=>H.useCallback(Uhe(i,e,t,n),[i,e,t,n]),Do=(i,e={})=>{var S,C,w,A;const{i18n:t}=e,{i18n:n,defaultNS:s}=H.useContext(LSt)||{},r=t||n||ISt();if(r&&!r.reportNamespaces&&(r.reportNamespaces=new DSt),!r){PB(r,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const T=(P,O)=>Jp(O)?O:wSt(O)&&Jp(O.defaultValue)?O.defaultValue:Array.isArray(P)?P[P.length-1]:P,E=[T,{},!1];return E.t=T,E.i18n={},E.ready=!1,E}(S=r.options.react)!=null&&S.wait&&PB(r,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...OSt(),...r.options.react,...e},{useSuspense:o,keyPrefix:l}=a;let c=s||((C=r.options)==null?void 0:C.defaultNS);c=Jp(c)?[c]:c||["translation"],(A=(w=r.reportNamespaces).addUsedNamespaces)==null||A.call(w,c);const u=(r.isInitialized||r.initializedStoreOnce)&&c.every(T=>CSt(T,r,a)),h=BSt(r,e.lng||null,a.nsMode==="fallback"?c:c[0],l),d=()=>h,p=()=>Uhe(r,e.lng||null,a.nsMode==="fallback"?c:c[0],l),[f,g]=H.useState(d);let m=c.join();e.lng&&(m=`${e.lng}${m}`);const y=FSt(m),b=H.useRef(!0);H.useEffect(()=>{const{bindI18n:T,bindI18nStore:E}=a;b.current=!0,!u&&!o&&(e.lng?CY(r,e.lng,c,()=>{b.current&&g(p)}):OB(r,c,()=>{b.current&&g(p)})),u&&y&&y!==m&&b.current&&g(p);const P=()=>{b.current&&g(p)};return T&&(r==null||r.on(T,P)),E&&(r==null||r.store.on(E,P)),()=>{b.current=!1,r&&(T==null||T.split(" ").forEach(O=>r.off(O,P))),E&&r&&E.split(" ").forEach(O=>r.store.off(O,P))}},[r,m]),H.useEffect(()=>{b.current&&u&&g(d)},[r,l,u]);const x=[f,r,u];if(x.t=f,x.i18n=r,x.ready=u,u||!u&&!o)return x;throw new Promise(T=>{e.lng?CY(r,e.lng,c,()=>T()):OB(r,c,()=>T())})};function h2(){const{Text:i}=On,{t:e}=Do(),[t,n]=H.useState([]),s=H.useRef({isComposition:!1}),[r,a]=H.useState(window.innerWidth),[o,l]=H.useState([]);H.useEffect(()=>{const f=Rz();l(f)},[]),H.useEffect(()=>{function f(){a(window.innerWidth)}return window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f)}},[]);function c(){fc()==="Phone"?Ys(e("Warning"),e("Tip_cannot_support_your_device"),null,5,"warning"):tr.info({title:e("More_info"),content:N.jsxs(N.Fragment,{children:[N.jsxs(xi,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[N.jsx(i,{style:{color:"var(--semi-color-info)"},children:e("Logs_count")})," ",e("Logs_count_text")]}),N.jsxs(xi,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[N.jsx(i,{style:{color:"var(--semi-color-success)"},children:e("Logs_success_count")}),"",e("Logs_success_count_text")]}),N.jsxs(xi,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[N.jsx(i,{style:{color:"var( --semi-color-warning)"},children:e("Logs_warning_count")}),"",e("Logs_warning_count_text")]}),N.jsxs(xi,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[N.jsx(i,{style:{color:"var(--semi-color-danger)"},children:e("Logs_error_count")}),"",e("Logs_error_count_text")]})]}),cancelButtonProps:{theme:"borderless"},okButtonProps:{theme:"solid"}})}function u(f){fc()==="Phone"?Ys(e("Remarks"),f,null,5,"info"):tr.info({title:e("More_info"),content:N.jsx(N.Fragment,{children:N.jsx(i,{children:f})}),cancelButtonProps:{theme:"borderless"},okButtonProps:{theme:"solid"}})}function h(){const f={type:"pie",data:[{id:"id0",values:[{type:"Success",value:Fz().length},{type:"Warning",value:Dz().length},{type:"Error",value:Lz().length}]}],valueField:"value",categoryField:"type",label:{visible:!0},tooltip:{mark:{content:[{key:m=>m.type,value:m=>m.value+"%"}]}}},g={title:{visible:!0,text:"",subtext:""},legends:{visible:!0,orient:"right"}};return N.jsx(N.Fragment,{children:N.jsx("div",{children:N.jsx(xSt,{spec:{...f,...g},option:{mode:"desktop-browser"}})})})}function d(){const f=[{key:e("Logs_count"),value:N.jsx(it,{theme:"borderless",size:"small",children:Rz().length})},{key:e("Logs_success_count"),value:N.jsx(it,{type:"primary",theme:"borderless",size:"small",children:Fz().length})},{key:e("Logs_warning_count"),value:N.jsx(it,{type:"warning",theme:"borderless",size:"small",children:Dz().length})},{key:e("Logs_error_count"),value:N.jsx(it,{type:"danger",theme:"borderless",size:"small",children:Lz().length})}];return N.jsx(N.Fragment,{children:N.jsx(xi,{shadows:"hover",title:e("Roughly_browse"),onClick:c,headerExtraContent:N.jsx(kQ,{style:{color:"var(--semi-color-primary)"}}),children:N.jsx(rl,{data:f})})})}function p(){const f=A=>N.jsx("div",{children:A}),g=A=>N.jsx("div",{children:N.jsx(mc,{color:A==="successfully"?"green":A==="warning"?"yellow":"red",children:A})}),m=A=>N.jsx("div",{children:A}),y=A=>N.jsx(it,{onClick:()=>u(A),children:e("View")});let b;fc()==="Phone"?b=H.useMemo(()=>({pageSize:5,formatPageText:!1,position:"top"}),[]):b=H.useMemo(()=>({pageSize:7,position:"top"}),[]);const x=A=>{if(s.current.isComposition)return;n(A?[A]:[])},S=()=>{s.current.isComposition=!0},C=A=>{s.current.isComposition=!1;const T=A.target.value;n(T?[T]:[])},w=[{title:N.jsxs(Nt,{children:[N.jsx("span",{children:e("Event")}),N.jsx(ll,{placeholder:e("Enter_filter_value"),style:{width:200},onCompositionStart:S,onCompositionEnd:C,onChange:x,showClear:!0})]}),dataIndex:"event",key:"event",width:400,render:f,onFilter:(A,T)=>T.event.includes(A),filteredValue:t},{title:e("Result"),dataIndex:"result",key:"result",render:g,sorter:(A,T)=>{const E={error:0,warning:1,successfully:2};return E[A.result]===E[T.result]?0:E[A.result]-E[T.result]}},{title:e("Time"),dataIndex:"time",key:"time",sorter:(A,T)=>new Date(A.time)-new Date(T.time)>0?1:-1,render:m},{title:e("Comment"),dataIndex:"comment",key:"comment",render:y}];return N.jsxs(N.Fragment,{children:[N.jsx("h3",{children:N.jsxs(Nt,{children:[e("Event_list"),N.jsx(ss,{showArrow:!0,arrowPointAtCenter:!0,content:N.jsx("article",{children:e("Find_E_by_filter")}),position:"right",children:N.jsx(wl,{style:{color:"var(--semi-color-primary)"}})})]})}),N.jsx(cf,{children:N.jsx(cf.Panel,{header:e("Log_control"),itemKey:"1",children:N.jsx(Nt,{children:N.jsx(it,{theme:"outline",type:"primary",style:{marginRight:8},onClick:Nfe,children:e("Log_download")})})})}),N.jsx(Fc,{style:{width:"100%"},pagination:b,dataSource:o,columns:w,filteredValue:t})]})}return N.jsxs(N.Fragment,{children:[N.jsx("h3",{children:N.jsxs(Nt,{children:[e("View_all_info"),N.jsx(ss,{showArrow:!0,arrowPointAtCenter:!0,content:N.jsx("article",{children:e("Tip_Log_View_info")}),position:"right",children:N.jsx(wl,{style:{color:"var(--semi-color-primary)"}})})]})}),N.jsx("div",{className:"grid",children:N.jsx(mu,{type:"flex",justify:"center",children:N.jsxs(Nt,{spacing:[100,20],align:"center",wrap:!0,children:[r>=940&&h(),d()]})})}),p()]})}function y$(){const{t:i}=Do(),[e,t]=H.useState(dt("use_https")==="true"),{Text:n}=On,[s,r]=H.useState(!1),a=()=>{r(!s)},[o,l]=H.useState(!1),c=()=>{l(!o)},u=p=>{t(p),bi("use_https",p)},h=()=>{const p={api_upload:document.getElementById("upload").value,api_clear:document.getElementById("clear").value,api_start:document.getElementById("start").value,api_test:document.getElementById("test").value};Ufe(p),window.location.reload()},d=()=>{Wfe(),window.location.reload()};return N.jsxs(N.Fragment,{children:[N.jsxs(xi,{header:N.jsx(n,{children:i("HTTPS_Service_Setting")}),children:[N.jsx(Sd,{fullMode:!1,type:"info",bordered:!0,icon:null,closeIcon:null,title:N.jsx("div",{style:{fontWeight:600,fontSize:"14px",lineHeight:"20px"},children:i("Tip_unknow_http_service")}),description:N.jsxs("div",{children:[i("Tip_try_off_https"),N.jsx("br",{})," ",i("Tip_please_turn_off"),N.jsx(n,{link:{href:window.location},children:i("Refresh")}),i("Tip_update_state")]})}),N.jsx("br",{}),N.jsxs(Nt,{children:[i("Use_https"),N.jsx(ss,{showArrow:!0,position:"top",content:N.jsx("article",{children:(dt("use_https")==="true",i("Tip_you_open_https"))}),children:N.jsx(wl,{style:{color:"var(--semi-color-primary)"}})}),N.jsx(Eb,{checked:e,onChange:u,"aria-label":""})]}),N.jsx("br",{}),N.jsx("br",{}),N.jsxs(Nt,{children:[i("Https_state")," ",dt("use_https"),N.jsx(ss,{showArrow:!0,position:"top",content:N.jsx("article",{children:dt("use_https")==="true"?i("Tip_send_by_https"):i("Tip_send_by_http")}),children:N.jsx(wl,{style:{color:"var(--semi-color-primary)"}})})]})]}),N.jsx("br",{}),N.jsxs(xi,{header:N.jsx(n,{children:i("API_Settings")}),children:[N.jsx(Sd,{fullMode:!1,icon:null,type:"danger",bordered:!0,closeIcon:null,title:N.jsxs("div",{style:{fontWeight:600,fontSize:"14px",lineHeight:"20px"},children:[" ",i("Warning")]}),description:N.jsxs("div",{children:[i("Tip_seem_api"),N.jsx("br",{})," ",i("Tip_please_turn_off"),N.jsx(n,{link:{href:window.location},children:i("Refresh")}),i("Tip_update_state")]}),children:N.jsxs("div",{className:"semi-modal-footer",children:[N.jsx(Cd,{title:i("Save_change"),content:i("Tip_can_recover_set"),position:"bottomRight",onConfirm:h,children:N.jsx(it,{className:"semi-button semi-button-tertiary semi-button-light",type:"button",children:i("Save_setting")})}),N.jsx(Cd,{title:i("Save_change"),content:i("Tip_loss_all_set"),position:"bottomRight",onConfirm:d,children:N.jsx(it,{className:"semi-button semi-button-warning",type:"button",children:i("Restore_default_settings")})})]})}),N.jsx("br",{}),N.jsxs(Nt,{id:"api_input_box",vertical:!0,align:"left",children:[N.jsxs(Nt,{spacing:"medium",children:[N.jsx(n,{style:{width:"50%"},children:i("Upload_pic")}),N.jsx(ll,{id:"upload",style:{width:"50%"},defaultValue:kh("upload")})]}),N.jsxs(Nt,{spacing:"medium",children:[N.jsx(n,{style:{width:"50%"},children:i("Del_pic")}),N.jsx(ll,{id:"clear",style:{width:"50%"},defaultValue:kh("clear")})]}),N.jsxs(Nt,{spacing:"medium",children:[N.jsx(n,{style:{width:"50%"},children:i("Send_start")}),N.jsx(ll,{id:"start",style:{width:"50%"},defaultValue:kh("start")})]}),N.jsxs(Nt,{spacing:"medium",children:[N.jsx(n,{style:{width:"50%"},children:i("Test_can_use")}),N.jsx(ll,{id:"test",style:{width:"50%"},defaultValue:kh("test")})]})]})]}),N.jsx("br",{}),N.jsx(xi,{style:{backgroundColor:"var( --semi-color-fill-0)"},children:N.jsxs(Nt,{spacing:"medium",vertical:!0,align:"left",children:[N.jsx(n,{style:{fontSize:"medium",fontWeight:"bold",color:"var( --semi-color-text-2)"},children:i("Look_other_set")}),N.jsx(n,{onClick:a,style:{color:"var( --semi-color-link)",cursor:"pointer"},children:i("Server_IP")}),N.jsx(n,{onClick:a,style:{color:"var( --semi-color-link)",cursor:"pointer"},children:i("Theme_color")}),N.jsx(n,{onClick:a,style:{color:"var( --semi-color-link)",cursor:"pointer"},children:i("UI_set")}),N.jsx(n,{onClick:c,style:{color:"var( --semi-color-link)",cursor:"pointer"},children:i("Log_viewer")})]})}),N.jsx("br",{}),N.jsx(Pn,{style:{maxWidth:"100%"},closeOnEsc:!0,title:i("Base_Settings"),visible:s,onCancel:a,children:N.jsx(Whe,{})}),N.jsx(Pn,{style:{width:"100%"},closeOnEsc:!0,title:i("Log_viewer"),visible:o,onCancel:c,children:N.jsx(h2,{})}),N.jsx("br",{})]})}function Whe(){const{t:i}=Do(),{Text:e}=On,[t,n]=H.useState(dt("use_app_content_menu")==="true"),[s,r]=H.useState(dt("use_ai_page")==="true"),[a,o]=H.useState(!1),l=()=>{o(!a)},[c,u]=H.useState(!1),h=()=>{u(!c)},d=x=>{n(x);let S={content:N.jsxs(Nt,{children:[N.jsx(e,{children:i("Success_change_UI")}),N.jsx(e,{link:{href:window.location.href},children:i("Refresh")})]}),duration:3,stack:!0};Ys(i("New_Notify_Send"),S.content,null,S.duration),bi("use_app_content_menu",x.toString())},p=x=>{r(x),bi("use_ai_page",x.toString()),window.location.reload()};function f(){e2(),bi("theme_color","auto")}function g(){QO(),bi("theme_color","light")}function m(){JO(),bi("theme_color","dark")}function y(){let x=document.getElementById("server_ip_inputbox").value;if(x.startsWith("https://")?(x=x.substring(8),bi("use_https","true")):(x=x.substring(7),bi("use_https","false")),x.endsWith("/")&&(x=x.slice(0,-1)),bi("server_ip",x)){let S={content:N.jsxs(Nt,{children:[N.jsx(e,{children:i("Success_save_set")}),N.jsx(e,{link:{href:window.location.href},children:i("Refresh")})]}),duration:3};Ys(i("New_Notify_Send"),S.content,null,S.duration,"success")}else{let S={content:i("Failed_save"),duration:3};Ys(i("New_Notify_Send"),S.content,null,S.duration,"error")}}function b(){const x=document.body;return dt("theme_color")!=="auto"?x.hasAttribute("theme-mode")?2:1:0}return N.jsxs(N.Fragment,{children:[N.jsxs("div",{id:"newSettings",children:[N.jsx(xi,{title:i("Server_IP"),children:N.jsxs(Nt,{children:[N.jsx(ll,{id:"server_ip_inputbox",style:{width:"70%"},defaultValue:dt("server_ip"),placeholder:i("Tip_server_ip"),size:"default"}),N.jsx(it,{theme:"outline",onClick:y,type:"primary",style:{marginRight:8},children:i("Save_setting")})]})}),N.jsx("br",{}),N.jsx(xi,{title:i("Theme_color"),children:N.jsx(Nt,{children:N.jsxs(dx,{type:"pureCard",defaultValue:b(),direction:"vertical","aria-label":"Theme_color",name:"demo-radio-group-pureCard",children:[N.jsx(Nm,{value:0,extra:"",style:{width:280},onChange:function(){f()},children:N.jsxs(Nt,{children:[i("Theme_auto"),N.jsx(mc,{size:"small",shape:"circle",color:"blue",children:" New "})]})}),N.jsx(Nm,{value:1,extra:"",style:{width:280},onChange:function(){g()},children:i("Theme_light")}),N.jsx(Nm,{value:2,extra:"",style:{width:280},onChange:function(){m()},children:i("Theme_dark")})]})})}),N.jsx("br",{}),N.jsx(xi,{title:i("UI_set"),children:N.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[N.jsx(gL,{heading:6,style:{margin:8,backgroundColor:"transparent",width:"90%"},children:N.jsxs(Nt,{children:[i("Use the built-in right-click menu"),N.jsx(mc,{size:"small",shape:"circle",color:"blue",children:" New "}),N.jsx(ss,{showArrow:!0,arrowPointAtCenter:!0,content:N.jsx("article",{children:i("Success_save_set")}),position:"top",children:N.jsx(wl,{style:{color:"var(--semi-color-primary)"}})})]})}),N.jsx(Eb,{checked:t,onChange:d})]})}),N.jsx("br",{}),N.jsx(xi,{title:i("AI Setting"),children:N.jsxs(Nt,{vertical:!0,align:"left",children:[N.jsx(Sd,{fullMode:!1,type:"success",bordered:!0,icon:null,closeIcon:null,title:N.jsx("div",{style:{fontWeight:600,fontSize:"14px",lineHeight:"20px"},children:i("Increase productivity with Gemini built into Chrome")}),description:N.jsxs(Nt,{vertical:!0,align:"left",children:[N.jsx(e,{children:i("Warning")}),N.jsx(e,{children:i("Tip_AI_Page_1")}),N.jsxs(e,{children:[i("Tip_AI_Page_2_1"),N.jsx(e,{link:{href:"https://docs.google.com/document/d/1VG8HIyz361zGduWgNG7R_R8Xkv0OOJ8b5C9QKeCjU0c/edit?tab=t.0#heading=h.cwc2ewfrtynq"},children:i("Tip_AI_Page_2_2")}),i("Tip_AI_Page_2_3")]}),N.jsx(e,{children:i("Tip_AI_Page_3")}),N.jsxs(e,{children:[i("Tip_AI_Page_4_1")," ",N.jsx(e,{link:{href:"https://policies.google.com/terms/generative-ai/use-policy"},children:i("Tip_AI_Page_4_2")})]}),N.jsx(iA,{}),N.jsxs(e,{style:{fontWeight:"bold"},children:[i("Refer also to Built_AI"),":"]}),N.jsx(e,{link:{href:"https://docs.google.com/document/d/1VG8HIyz361zGduWgNG7R_R8Xkv0OOJ8b5C9QKeCjU0c/edit?tab=t.0#heading=h.witohboigk0o",target:"_blank"},children:"Built-in AI Early Preview Program"})]})}),N.jsxs(Nt,{width:"100%",children:[N.jsx(gL,{heading:6,style:{margin:8,backgroundColor:"transparent",width:"90%"},children:i("Using Generative AI")}),N.jsx(Eb,{disabled:dt("ai_support")==="False",checked:s,onChange:p,"aria-label":"AI"})]})]})}),N.jsx("br",{}),N.jsx(xi,{style:{backgroundColor:"var( --semi-color-fill-0)"},children:N.jsxs(Nt,{spacing:"medium",vertical:!0,align:"left",children:[N.jsx(e,{style:{fontSize:"medium",fontWeight:"bold",color:"var( --semi-color-text-2)"},children:i("Look_other_set")}),N.jsx(e,{onClick:l,style:{color:"var( --semi-color-link)",cursor:"pointer"},children:i("HTTPS_Service")}),N.jsx(e,{onClick:l,style:{color:"var( --semi-color-link)",cursor:"pointer"},children:i("API_Settings")}),N.jsx(e,{onClick:h,style:{color:"var( --semi-color-link)",cursor:"pointer"},children:i("Log_viewer")})]})})]}),N.jsx("br",{}),N.jsx(Pn,{style:{maxWidth:"100%"},closeOnEsc:!0,title:i("Advanced_Settings"),visible:a,onCancel:l,children:N.jsx(y$,{})}),N.jsx(Pn,{style:{width:"100%"},closeOnEsc:!0,title:i("Log_viewer"),visible:c,onCancel:h,children:N.jsx(h2,{})})]})}function jSt(){const{Text:i}=On,e=()=>{var t=RGe("Hi","This is SystemNotify");t?ML.info("Done"):ML.warning("Error")};return N.jsxs(N.Fragment,{children:[N.jsx(Sd,{fullMode:!1,type:"danger",bordered:!0,icon:null,closeIcon:null,title:N.jsx("div",{style:{fontWeight:600,fontSize:"14px",lineHeight:"20px"},children:" Warning"}),description:N.jsxs(i,{children:["You are now on the Developer Testing Page. All features on this page are for testing purposes only. If you entered here by mistake, you can safely close this page now. However, if you choose to continue, please note: ",N.jsx("b",{children:"actions here are irreversible"}),",",N.jsx("b",{children:"no confirmation will be asked"}),", and ",N.jsx("b",{children:"no feedback will be provided"}),". Some actions may result in ",N.jsx("b",{children:"data being completely cleared!!!"})]})}),N.jsx("br",{}),N.jsx(xi,{title:"System Notify",children:N.jsxs(Nt,{vertical:!0,children:[N.jsx(it,{onClick:()=>{Ys("Hi","This is Nomal Notify Without color",null,3,"info")},children:"Send Nomal Notify"}),N.jsx(it,{onClick:()=>{Ys("Hi","This is Notify With Light color",null,3,"info",!0,"light")},children:"Send Light Notify"}),N.jsx(it,{onClick:e,children:"Send System Notify"})]})}),N.jsx("br",{}),N.jsx(xi,{title:"log operation",children:N.jsx(it,{onClick:Bfe,children:"Clear ALL Logs"})}),N.jsx("br",{}),N.jsx(xi,{title:"Data Storage",children:N.jsx(it,{onClick:Vfe,children:"Clear ALL Data"})}),N.jsx("br",{}),N.jsxs(xi,{title:"UUID",children:[N.jsxs(i,{children:["Your UUID is ",dt("uuid")]}),N.jsx(it,{onClick:()=>{const t=zne();bi("uuid",t)},children:"New UUID"})]})]})}function NSt(){const{t:i}=Do(),{Text:e}=On,[t,n]=H.useState(!1),[s,r]=H.useState(0),[a,o]=H.useState("hidden"),[l,c]=H.useState(!1),[u,h]=H.useState(!1),d=()=>{h(!0)},p=()=>{h(!1)},f=()=>{s>=8?(o("visible"),r(0)):r(s+1)},g=()=>{c(!l)},m=()=>{n(!t)},y=[{class:i("OS version"),value:"Windows  10, MacOS  13(Ventura),Linux"},{class:i("Browser Support"),value:"Chrome Canary | Chrome Dev"},{class:i("minChromeVersion"),value:"128.0.6545.0"},{class:i("Storage"),value:i("Tip_AI_require_Disk")},{class:"GPU",value:i("Tip_AI_require_GPU")},{class:i("Video RAM"),value:i("Tip_AI_require_GPU_M")},{class:i("Network connection"),value:i("Tip_AI_require_Network")}];function b(){return N.jsxs(N.Fragment,{children:[N.jsx(xi,{onClick:f,children:N.jsxs(rl,{align:"left",children:[N.jsx(rl.Item,{itemKey:i("App_name"),children:""}),N.jsx(rl.Item,{itemKey:i("Build_time"),children:dt("buile_time")}),N.jsx(rl.Item,{itemKey:i("Server_IP"),children:N.jsx(e,{link:{href:Yh(),target:"_blank"},children:dt("server_ip")})}),N.jsx(rl.Item,{itemKey:i("AI_Support"),children:N.jsxs(Nt,{children:[N.jsx(e,{children:dt("ai_support")}),N.jsx(ss,{content:N.jsx("article",{children:N.jsx(e,{children:i("Click to see more information about AI")})}),showArrow:!0,arrowPointAtCenter:!0,position:"top",children:N.jsx(wl,{onClick:d,style:{color:"var(--semi-color-primary)"}})})]})})]})}),N.jsx("br",{}),N.jsxs(xi,{onClick:m,shadows:"hover",style:{cursor:"pointer"},bodyStyle:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[N.jsx(uu,{avatar:N.jsx(Yw,{style:{color:"var(--semi-color-primary)"}}),title:i("Log_viewer"),description:i("Log_viewer_text")}),N.jsx(xd,{style:{color:"var(--semi-color-primary)"}})]}),N.jsx("br",{}),N.jsxs(xi,{onClick:g,shadows:"hover",style:{cursor:"pointer",visibility:a},bodyStyle:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[N.jsx(uu,{title:"BetaFunctionality"}),N.jsx(xd,{style:{color:"var(--semi-color-primary)"}})]}),N.jsx(Pn,{style:{maxWidth:"100%"},title:"BetaFunc",visible:l,onCancel:g,children:N.jsx(jSt,{})}),N.jsx(Pn,{style:{width:"100%"},title:i("Log_viewer"),visible:t,onCancel:m,children:N.jsx(h2,{})})]})}return N.jsxs(N.Fragment,{children:[N.jsx("h2",{style:{fontFamily:"var(--Default-font)"},children:i("AppInfo")}),b(),N.jsx(tr,{title:i("Generative AI operational requirements"),visible:u,closeOnEsc:!0,fullScreen:!0,onCancel:p,footer:N.jsx(it,{type:"primary",onClick:p,children:i("Done")}),children:N.jsxs("div",{style:{height:"100%",overflowY:"auto"},children:[i("data source"),": ",N.jsx(e,{link:{target:"_blank",href:"https://docs.google.com/document/d/1VG8HIyz361zGduWgNG7R_R8Xkv0OOJ8b5C9QKeCjU0c/edit?tab=t.0#heading=h.cwc2ewfrtynq"},children:"Google Built-in AI Early Preview Program - Update 1"}),N.jsx("br",{}),N.jsxs(Fc,{dataSource:y,pagination:!1,children:[N.jsx(py,{title:i("Type"),dataIndex:"class"},"class"),N.jsx(py,{title:i("content"),dataIndex:"value"},"value")]}),N.jsx("br",{}),N.jsx(Sd,{fullMode:!1,type:"warning",bordered:!0,icon:null,closeIcon:null,title:N.jsx("div",{style:{fontWeight:600,fontSize:"14px",lineHeight:"20px"},children:i("Warning")}),description:N.jsxs(Nt,{vertical:!0,align:"start",children:[N.jsx("div",{children:i("Tip_AI_require_1")}),N.jsx("div",{children:i("Tip_AI_require_2")})]})})]})})]})}function Ff(){return dt("Language")==="1"?1:2}function N1(i=1){bi("Language",i),window.location.reload()}function $St(){return N.jsx(N.Fragment,{children:N.jsx(xi,{children:N.jsxs(dx,{type:"pureCard",direction:"vertical","aria-label":"LanguageSelect",name:"LanguageRadio",defaultValue:Ff(),onChange:i=>N1(i.target.value),children:[N.jsx(Nm,{extra:"zh-CN",value:1,children:""}),N.jsx(Nm,{extra:"en-US",value:2,children:"English"})]})})})}function d2(){const{t:i}=Do(),[e,t]=H.useState(!1),n=()=>{t(!e)},[s,r]=H.useState(!1),a=()=>{r(!s)},[o,l]=H.useState(!1),c=()=>{l(!o)},[u,h]=H.useState(!1),d=()=>{h(!u)};return N.jsxs(N.Fragment,{children:[N.jsxs(xi,{shadows:"hover",style:{cursor:"pointer"},bodyStyle:{display:"flex",alignItems:"center",justifyContent:"space-between"},onClick:n,children:[N.jsx(uu,{avatar:N.jsx(UE,{style:{color:"var(--semi-color-primary)"}}),title:i("Base_Settings"),description:i("Server_IP")}),N.jsx(wp,{style:{color:"var(--semi-color-primary)"}})]}),N.jsx("br",{}),N.jsxs(xi,{shadows:"hover",style:{cursor:"pointer"},bodyStyle:{display:"flex",alignItems:"center",justifyContent:"space-between"},onClick:a,children:[N.jsx(uu,{avatar:N.jsx(IPe,{style:{color:"var(--semi-color-primary)"}}),title:i("Advanced_Settings"),description:i("API_port")+","+i("HTTPS_Service")}),N.jsx(wp,{style:{color:"var(--semi-color-primary)"}})]}),N.jsx("br",{}),N.jsxs(xi,{shadows:"hover",style:{cursor:"pointer"},bodyStyle:{display:"flex",alignItems:"center",justifyContent:"space-between"},onClick:d,children:[N.jsx(uu,{avatar:N.jsx(TQ,{style:{color:"var(--semi-color-primary)"}}),title:"/Language",description:i("Toggle_display_language")}),N.jsx(wp,{style:{color:"var(--semi-color-primary)"}})]}),N.jsx("br",{}),N.jsxs(xi,{shadows:"hover",style:{cursor:"pointer"},bodyStyle:{display:"flex",alignItems:"center",justifyContent:"space-between"},onClick:c,children:[N.jsx(uu,{avatar:N.jsx(wl,{style:{color:"var(--semi-color-primary)"}}),title:i("About"),description:i("AppInfo")}),N.jsx(wp,{style:{color:"var(--semi-color-primary)"}})]}),N.jsx(Pn,{style:{maxWidth:"100%"},closeOnEsc:!0,title:i("Base_Settings"),visible:e,onCancel:n,children:N.jsx(Whe,{})}),N.jsx(Pn,{style:{maxWidth:"100%"},closeOnEsc:!0,title:i("Advanced_Settings"),visible:s,onCancel:a,children:N.jsx(y$,{})}),N.jsx(Pn,{style:{maxWidth:"100%"},closeOnEsc:!0,title:"/Language",visible:u,onCancel:d,children:N.jsx($St,{})}),N.jsx(Pn,{style:{maxWidth:"100%"},closeOnEsc:!0,title:i("About"),visible:o,onCancel:c,children:N.jsx(NSt,{})})]})}function IB(){const[i,e]=H.useState(""),[t,n]=H.useState("");return k.useEffect(()=>{e(""),n("")},[]),N.jsxs(N.Fragment,{children:[i&&N.jsx("p",{id:"footerP",children:i}),t&&N.jsx("p",{id:"footerP",style:{fontFamily:"var(--Default-font)"},children:t})]})}var Ghe={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},wY=k.createContext&&k.createContext(Ghe),zSt=["attr","size","title"];function HSt(i,e){if(i==null)return{};var t=VSt(i,e),n,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}function VSt(i,e){if(i==null)return{};var t={};for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)){if(e.indexOf(n)>=0)continue;t[n]=i[n]}return t}function iE(){return iE=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},iE.apply(this,arguments)}function AY(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function nE(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?AY(Object(t),!0).forEach(function(n){USt(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):AY(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function USt(i,e,t){return e=WSt(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function WSt(i){var e=GSt(i,"string");return typeof e=="symbol"?e:e+""}function GSt(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function Khe(i){return i&&i.map((e,t)=>k.createElement(e.tag,nE({key:t},e.attr),Khe(e.child)))}function _$(i){return e=>k.createElement(KSt,iE({attr:nE({},i.attr)},e),Khe(i.child))}function KSt(i){var e=t=>{var{attr:n,size:s,title:r}=i,a=HSt(i,zSt),o=s||t.size||"1em",l;return t.className&&(l=t.className),i.className&&(l=(l?l+" ":"")+i.className),k.createElement("svg",iE({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,a,{className:l,style:nE(nE({color:i.color||t.color},t.style),i.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),r&&k.createElement("title",null,r),i.children)};return wY!==void 0?k.createElement(wY.Consumer,null,t=>e(t)):e(Ghe)}function Ch(i){return _$({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M12.04 8.04h-.09l-1.6 4.55h3.29z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm3.21 15-.98-2.81H9.78l-1 2.81h-1.9l4.13-11h1.97l4.13 11h-1.9z"},child:[]}]})(i)}function tb(i){return _$({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9.37 5.51A7.35 7.35 0 0 0 9.1 7.5c0 4.08 3.32 7.4 7.4 7.4.68 0 1.35-.09 1.99-.27A7.014 7.014 0 0 1 12 19c-3.86 0-7-3.14-7-7 0-2.93 1.81-5.45 4.37-6.49zM12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},child:[]}]})(i)}function ib(i){return _$({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 9c1.65 0 3 1.35 3 3s-1.35 3-3 3-3-1.35-3-3 1.35-3 3-3m0-2c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"},child:[]}]})(i)}var v$={exports:{}},Qm=typeof Reflect=="object"?Reflect:null,kY=Qm&&typeof Qm.apply=="function"?Qm.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},yw;Qm&&typeof Qm.ownKeys=="function"?yw=Qm.ownKeys:Object.getOwnPropertySymbols?yw=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:yw=function(e){return Object.getOwnPropertyNames(e)};function XSt(i){console&&console.warn&&console.warn(i)}var Xhe=Number.isNaN||function(e){return e!==e};function Ei(){Ei.init.call(this)}v$.exports=Ei;v$.exports.once=JSt;Ei.EventEmitter=Ei;Ei.prototype._events=void 0;Ei.prototype._eventsCount=0;Ei.prototype._maxListeners=void 0;var TY=10;function p2(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(Ei,"defaultMaxListeners",{enumerable:!0,get:function(){return TY},set:function(i){if(typeof i!="number"||i<0||Xhe(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");TY=i}});Ei.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ei.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Xhe(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Yhe(i){return i._maxListeners===void 0?Ei.defaultMaxListeners:i._maxListeners}Ei.prototype.getMaxListeners=function(){return Yhe(this)};Ei.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var s=e==="error",r=this._events;if(r!==void 0)s=s&&r.error===void 0;else if(!s)return!1;if(s){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var l=r[e];if(l===void 0)return!1;if(typeof l=="function")kY(l,this,t);else for(var c=l.length,u=ede(l,c),n=0;n<c;++n)kY(u[n],this,t);return!0};function qhe(i,e,t,n){var s,r,a;if(p2(t),r=i._events,r===void 0?(r=i._events=Object.create(null),i._eventsCount=0):(r.newListener!==void 0&&(i.emit("newListener",e,t.listener?t.listener:t),r=i._events),a=r[e]),a===void 0)a=r[e]=t,++i._eventsCount;else if(typeof a=="function"?a=r[e]=n?[t,a]:[a,t]:n?a.unshift(t):a.push(t),s=Yhe(i),s>0&&a.length>s&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=i,o.type=e,o.count=a.length,XSt(o)}return i}Ei.prototype.addListener=function(e,t){return qhe(this,e,t,!1)};Ei.prototype.on=Ei.prototype.addListener;Ei.prototype.prependListener=function(e,t){return qhe(this,e,t,!0)};function YSt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Zhe(i,e,t){var n={fired:!1,wrapFn:void 0,target:i,type:e,listener:t},s=YSt.bind(n);return s.listener=t,n.wrapFn=s,s}Ei.prototype.once=function(e,t){return p2(t),this.on(e,Zhe(this,e,t)),this};Ei.prototype.prependOnceListener=function(e,t){return p2(t),this.prependListener(e,Zhe(this,e,t)),this};Ei.prototype.removeListener=function(e,t){var n,s,r,a,o;if(p2(t),s=this._events,s===void 0)return this;if(n=s[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(r=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,r=a;break}if(r<0)return this;r===0?n.shift():qSt(n,r),n.length===1&&(s[e]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",e,o||t)}return this};Ei.prototype.off=Ei.prototype.removeListener;Ei.prototype.removeAllListeners=function(e){var t,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var r=Object.keys(n),a;for(s=0;s<r.length;++s)a=r[s],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(s=t.length-1;s>=0;s--)this.removeListener(e,t[s]);return this};function Jhe(i,e,t){var n=i._events;if(n===void 0)return[];var s=n[e];return s===void 0?[]:typeof s=="function"?t?[s.listener||s]:[s]:t?ZSt(s):ede(s,s.length)}Ei.prototype.listeners=function(e){return Jhe(this,e,!0)};Ei.prototype.rawListeners=function(e){return Jhe(this,e,!1)};Ei.listenerCount=function(i,e){return typeof i.listenerCount=="function"?i.listenerCount(e):Qhe.call(i,e)};Ei.prototype.listenerCount=Qhe;function Qhe(i){var e=this._events;if(e!==void 0){var t=e[i];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Ei.prototype.eventNames=function(){return this._eventsCount>0?yw(this._events):[]};function ede(i,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=i[n];return t}function qSt(i,e){for(;e+1<i.length;e++)i[e]=i[e+1];i.pop()}function ZSt(i){for(var e=new Array(i.length),t=0;t<e.length;++t)e[t]=i[t].listener||i[t];return e}function JSt(i,e){return new Promise(function(t,n){function s(a){i.removeListener(e,r),n(a)}function r(){typeof i.removeListener=="function"&&i.removeListener("error",s),t([].slice.call(arguments))}tde(i,e,r,{once:!0}),e!=="error"&&QSt(i,s,{once:!0})})}function QSt(i,e,t){typeof i.on=="function"&&tde(i,"error",e,t)}function tde(i,e,t,n){if(typeof i.on=="function")n.once?i.once(e,t):i.on(e,t);else if(typeof i.addEventListener=="function")i.addEventListener(e,function s(r){n.once&&i.removeEventListener(e,s),t(r)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}var eCt=v$.exports;const Uy=new eCt.EventEmitter,$1=Uy.emit.bind(Uy),b$=Uy.on.bind(Uy),x$=Uy.off.bind(Uy);async function tCt(i=dt("server_ip")){let e;try{const t=await fetch(i+kh("test"));e=t.status===200,pt("checkServerConnect","successfully",(t.status===200).toString())}catch{pt("checkServerConnect","error","Server not found"),e=!1}return e}function iCt(){const{Text:i}=On,{t:e}=Do(),t=[{node:"item",name:"",type:"primary",active:Ff()===1,onClick:()=>N1(1)},{node:"item",name:"English",type:"primary",active:Ff()===2,onClick:()=>N1(2)}],n=()=>{if(dt("theme_color")==="light")return u(N.jsx(ib,{style:{width:"20px",height:"20px"}})),N.jsx(ib,{style:{width:"20px",height:"20px"}});if(dt("theme_color")==="dark")return u(N.jsx(tb,{style:{width:"20px",height:"20px"}})),N.jsx(tb,{style:{width:"20px",height:"20px"}});if(dt("theme_color")==="auto")return u(N.jsx(Ch,{style:{width:"20px",height:"20px"}})),N.jsx(Ch,{style:{width:"20px",height:"20px"}})},[s,r]=H.useState("home"),[a,o]=H.useState(!1),l=()=>{o(!a)},[c,u]=H.useState(N.jsx(Ch,{style:{width:"20px",height:"20px"}}));function h(y){r(y.itemKey),$1("changePage",y.itemKey)}const[d,p]=H.useState(!1),f=()=>{p(!d)};H.useEffect(()=>{const y=b=>{r(b)};return b$("changePage",y),window.addEventListener("themeChange",n),()=>{x$("changePage",y),window.removeEventListener("themeChange",n)}},[]);function g(){mw()==="dark"?(e2(),document.body.hasAttribute("theme-mode")?u(N.jsx(Ch,{style:{width:"20px",height:"20px"}})):u(N.jsx(Ch,{style:{width:"20px",height:"20px"}}))):mw()==="light"?(JO(),u(N.jsx(tb,{style:{width:"20px",height:"20px"}}))):mw()==="auto"&&(QO(),u(N.jsx(ib,{style:{width:"20px",height:"20px"}})))}function m(){const[y,b]=H.useState([null,null,null]);function x(){return new Promise(C=>{tCt(Yh()).then(w=>{let A,T,E;w?(E=3,A="info",T=N.jsx(i,{children:e("Server_connection_successful")})):(E=0,A="error",T=N.jsxs(N.Fragment,{children:[N.jsx(i,{children:e("Server_connection_failed")}),N.jsx("br",{}),N.jsx(it,{onClick:()=>{window.location.href=window.location.href},children:e("Refresh")}),N.jsx(it,{style:{marginLeft:"5px"},className:"semi-button semi-button-warning",onClick:l,type:"button",children:e("Server_IP")}),N.jsx(it,{style:{marginLeft:"5px"},className:"semi-button semi-button-warning",onClick:f,type:"button",children:e("HTTPS_settings_API_settings")})]})),C([E,A,T])})})}function S(C){!C||C.includes(null)||Ys(e("Server Status Check"),C[2],null,C[0],C[1])}H.useEffect(()=>{x().then(C=>{b(C)})},[]),H.useEffect(()=>{S(y)},[y])}return N.jsxs(N.Fragment,{children:[m(),N.jsx("div",{className:"index-module_container__x1Eix",style:{width:"100%",top:"0",zIndex:"1",height:"5%",backdropFilter:" blur(5px)",backgroundColor:" rgba(112,110,109,0)"},children:N.jsx(wc,{selectedKeys:s,mode:"horizontal",onSelect:y=>h(y),header:{text:"CCRS"},footer:N.jsx(N.Fragment,{children:N.jsxs(Nt,{children:[N.jsx(it,{style:{margin:"10px"},theme:"borderless",icon:c,onClick:g,"aria-label":""}),N.jsx(Oi,{trigger:"click",showTick:!0,position:"bottomLeft",menu:t,children:N.jsx(it,{style:{color:"var(--semi-color-text-0)",display:fc()==="Phone"?"none":""},theme:"borderless",children:N.jsx(TQ,{})})}),N.jsx(it,{onClick:l,style:{color:"var(--semi-color-text-0)",display:fc()==="Phone"?"none":""},theme:"borderless",children:N.jsx(UE,{})})]})})})}),N.jsx(Pn,{closeOnEsc:!0,style:{maxWidth:"100%",fontFamily:"var(--Default-font)"},title:e("Settings"),visible:a,onCancel:l,footer:N.jsx(IB,{}),children:N.jsx(d2,{})}),N.jsx(Pn,{closeOnEsc:!0,style:{maxWidth:"100%",fontFamily:"var(--Default-font)"},title:e("Advanced_Settings"),visible:d,onCancel:f,footer:N.jsx(IB,{}),children:N.jsx(y$,{})})]})}function nCt(){const{t:i}=Do(),[e,t]=H.useState(!0),[n,s]=H.useState([]),[r,a]=H.useState(!1),[o,l]=H.useState(!1),c=()=>{l(!o)};let u=Yh()+kh("upload"),h=Yh()+kh("clear"),d=".png,.jpeg,.jpg";function p(b){a(b)}function f(b){t(b)}async function g(){p(!0);try{const x=await(await fetch(Yh()+kh("start"))).json();m(x)}catch(b){console.error("Error fetching data:",b),p(!1)}}function m(b){let x=[];console.log("data:"+b),b[0]===""?(x=[{key:i("Failed_OCR"),value:b[0]}],y(i("Failed_OCR")+b[0])):(x=[{key:i("Success_OCR_Text"),value:b[0]}],y(i("Success_OCR_Text")+b[0])),s(x),p(!1),console.log(b)}function y(b){Ys(i("New_Notify_Send"),b)}return N.jsxs(N.Fragment,{children:[N.jsx("br",{}),N.jsxs("div",{className:"grid",style:{margin:"7px"},children:[N.jsx(mu,{type:"flex",justify:"center",children:N.jsx(fo,{children:N.jsx(mx,{action:u,listType:"picture",accept:d,enctype:"multipart/form-data",limit:1,onError:function(){f(!0)},onSuccess:function(){f(!1)},onClear:function(){fetch(h).then(),f(!0),s({key:"",value:""})},onRemove:function(b){fetch(h+"?filename="+b.name).then(),f(!0),s({key:"",value:""})},children:N.jsx(EQ,{size:"extra-large"})})})}),N.jsx(mu,{type:"flex",justify:"center",children:N.jsx(Cc,{delay:100,spinning:r,children:N.jsx(it,{style:{marginTop:"20px"},onClick:g,disabled:e,children:i("Start_OCR")})})}),N.jsx(mu,{type:"flex",justify:"center",children:N.jsx(fo,{children:N.jsx(rl,{style:{marginTop:"20px"},data:n})})}),N.jsx(it,{onClick:c,size:"large",theme:"outline",icon:N.jsx(UE,{}),style:{marginRight:10,borderRadius:"20px",position:"fixed",top:"80%",right:"2%",display:fc()==="PC"?"none":""}})]}),N.jsx(Pn,{style:{maxWidth:"100%"},title:i("Settings"),visible:o,onCancel:c,placement:"right",children:N.jsx(d2,{})})]})}function sCt(){const{t:i}=Do(),[e,t]=H.useState(!1),n=()=>{t(!e)},[s,r]=H.useState(!1),a=()=>{r(!s)};function o(){$1("changePage","vision")}function l(p){window.open(p,"_blank")}function c(p){p==="1"?r(!s):t(!e)}const u={display:fc()==="Phone"?"none":"",width:"auto",height:window.innerHeight-200,zIndex:"0"},h=(p,f,g="",m=N.jsx(wp,{}))=>{const y=()=>{f(g)};return N.jsx(N.Fragment,{children:N.jsxs(xi,{onClick:y,shadows:"hover",style:{maxWidth:330,margin:"5px"},bodyStyle:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[N.jsx(uu,{title:p}),m]})})},d=["./bannerimg1.jpg","./bannerimg2.jpg","./bannerimg3.jpg"];return N.jsx(N.Fragment,{children:N.jsxs("div",{className:"grid",children:[N.jsx(xj,{style:u,arrowType:"hover",theme:"dark",children:d.map((p,f)=>N.jsx("div",{style:{backgroundSize:"cover",backgroundImage:`url('${p}')`}},f))}),N.jsx("br",{}),N.jsx("div",{className:"grid",children:N.jsx(Nt,{wrap:!0,style:{width:"100%"},children:N.jsxs(mu,{justify:"center",type:"flex",style:{width:"100%"},children:[N.jsx(fo,{style:{minWidth:"150px"},span:6,order:1,children:h(i("Start_OCR"),o,"",N.jsx(OQ,{}))}),N.jsx("br",{}),N.jsx(fo,{style:{minWidth:"150px"},span:6,order:2,children:h(i("Visit_official"),l,"https://www.dicastal.com/",N.jsx(COe,{}))}),N.jsx("br",{}),N.jsx(fo,{style:{minWidth:"150px"},span:6,order:3,children:h(i("Change_Settings"),c,"0",N.jsx(UE,{}))}),N.jsx("br",{}),N.jsx(fo,{style:{minWidth:"150px"},span:6,order:4,children:h(i("Check_logs"),c,"1",N.jsx(Yw,{}))})]})})}),N.jsx(Pn,{style:{maxWidth:"100%"},title:i("Settings"),visible:e,onCancel:n,placement:"right",children:N.jsx(d2,{})}),N.jsx(Pn,{style:{width:"100%"},title:i("Log_viewer"),visible:s,onCancel:a,placement:"right",children:N.jsx(h2,{})})]})})}function rCt(){const{t:i}=Do(),{Content:e}=yc,[t,n]=H.useState(""),[s,r]=H.useState([]),[a,o]=H.useState([]),[l,c]=H.useState(!1),[u,h]=H.useState([]),[d,p]=H.useState(""),[f,g]=H.useState(`Server Console 1.0 
`),m=[Fb.Keys.Control,"Enter"],y=N.jsx("p",{}),b=10,x=j=>{n(j)},[S,C]=H.useState(!1),w=j=>{const I=j[0].map((z,$)=>({title:z,dataIndex:z})),D=j.slice(1).map((z,$)=>{const V={};return z.forEach((L,Y)=>{const ae=j[0][Y];V[ae]=L}),{key:($+1).toString(),...V}});r(I),o(D),console.log("Columns:",s),console.log("Data:",a),C(!0)},A=()=>{C(!1)},T=()=>{C(!1)};let E=H.useMemo(()=>({pageSize:5,formatPageText:!1,position:"top"}),[]);H.useEffect(()=>{R("exit")},[]);function P(j){let I="",D;try{D=JSON.parse(j)}catch{D=j}Array.isArray(D)?D.length>0&&Array.isArray(D[0])?(w(D),D.forEach((z,$)=>{const V=z.map(L=>typeof L=="object"?JSON.stringify(L,null,2):L).join("	");$>0?I+=`
`+V:I=V})):D.forEach((z,$)=>{typeof z=="object"&&(z=JSON.stringify(z,null,2)),$>0?I+=`
`+z:I=z}):typeof D=="object"&&D!==null?I=JSON.stringify(D,null,2):I=D,I&&(p(z=>z+`
`+I),clearTimeout(window.batchUpdateTimeout),window.batchUpdateTimeout=setTimeout(()=>{g(z=>z+d+`
`+I),p("")},b))}function O(j){let I=j;l?h(D=>[...D,{type:"result",data:I}]):P(I)}function M(j){let I="()-["+Xy()+`]
#	`+j+`
`;l?h(D=>[...D,{type:"command",data:I}]):P(I)}function R(j=""){if(t==="clear"){g(""),n("");return}j=j===""?t:j,M(j),console.log(j);const I=Yh()+"/command?command="+j;fetch(I).then(D=>D.json()).then(D=>{console.log("",D),O(D),n("")}).catch(D=>{console.error("",D),O(">Failed"+D)})}return N.jsxs(N.Fragment,{children:[N.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[N.jsx(e,{className:"semi-always-dark",children:N.jsx(Mee,{value:f,autosize:{maxRows:25},readonly:!0,rows:10,style:{backgroundColor:"var(--semi-color-bg-1)"}})}),N.jsx("br",{}),N.jsxs(Nt,{style:{width:"40%",display:"flex",position:"fixed",bottom:"10%",left:"50%",transform:"translateX(-50%)",zIndex:99,alignItems:"center"},children:[N.jsx(Bj,{size:"large",style:{width:"100%",marginLeft:"1%"},children:N.jsx(ly,{data:["help","blacklist","sql","clear"],style:{width:"100%"},position:"top",value:t,onChange:x,children:N.jsx(ll,{"data-target":"inputConsole",placeholder:i("Run_command_shortcut")})})}),N.jsx(it,{onClick:()=>{R(t)},children:i("Send")}),N.jsx(Fb,{hotKeys:m,onHotKey:()=>{R(t)},render:y})]})]}),N.jsx(tr,{title:"Table_Visible",visible:S,onOk:A,onCancel:T,children:N.jsx(Fc,{columns:s,dataSource:a,pagination:E})})]})}const aCt=[],oCt={user:{name:"User",avatar:"./CCRS-j.png"},assistant:{name:"Assistant",avatar:"./gemini.svg"},system:{name:"Assistant",avatar:"./gemini.svg"}};let lCt=0;function cCt(){return`id-${lCt++}`}function uCt(){const[i,e]=H.useState(aCt),t=H.useCallback(async o=>{Q7(o).then(l=>{const c={role:"assistant",id:cCt(),createAt:Date.now(),content:l};e(u=>[...u,c])})},[]),n=H.useCallback(o=>{e(o)},[]),s={height:window.innerHeight-100,textAlign:"left",width:window.innerWidth},r=H.useCallback(async()=>{const o=[...i],l=o[o.length-1];try{const c=await Q7(o[o.length-2].content),u={...l,status:"complete",content:c};e([...o.slice(0,-1),u])}catch(c){console.error("Error in tryAskAI:",c)}},[i]),a=H.useCallback(async()=>{await HGe()},[]);return N.jsx(Nt,{align:"start",style:{width:"100%"},children:N.jsx(Db,{align:"leftRight",mode:"userBubble",style:s,chats:i,roleConfig:oCt,onChatsChange:n,onMessageSend:t,onMessageReset:r,clearContext:a,showClearContext:!0},"leftRightuserBubble")})}function hCt(){const[i,e]=H.useState("home");return H.useEffect(()=>{const t=new URLSearchParams(window.location.search);bi("server_ip",t.get("serverip")||dt("server_ip"));const n=s=>{e(s)};return b$("changePage",n),()=>{x$("changePage",n)}},[]),N.jsx(N.Fragment,{children:N.jsx("div",{id:"container",children:N.jsx("div",{id:"returnpage",style:{height:"100%"},children:i==="home"?N.jsx(sCt,{}):i==="console"?N.jsx(rCt,{}):i==="vision"?N.jsx(nCt,{}):N.jsx(uCt,{})})})})}bi("buile_time",document.querySelector("#build-time").content.toString(),!0);function dCt(){return N.jsx(N.Fragment,{children:N.jsx("div",{id:"HomePage",children:N.jsx(hCt,{})})})}try{self["workbox:window:7.2.0"]&&_()}catch{}function EY(i,e){return new Promise(function(t){var n=new MessageChannel;n.port1.onmessage=function(s){t(s.data)},i.postMessage(e,[n.port2])})}function pCt(i){var e=function(t,n){if(typeof t!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,n);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i,"string");return typeof e=="symbol"?e:e+""}function fCt(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,pCt(n.key),n)}}function RB(i,e){return RB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},RB(i,e)}function PY(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function gCt(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t)return(t=t.call(i)).next.bind(t);if(Array.isArray(i)||(t=function(s,r){if(s){if(typeof s=="string")return PY(s,r);var a=Object.prototype.toString.call(s).slice(8,-1);return a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set"?Array.from(s):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?PY(s,r):void 0}}(i))||e){t&&(i=t);var n=0;return function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}try{self["workbox:core:7.2.0"]&&_()}catch{}var sR=function(){var i=this;this.promise=new Promise(function(e,t){i.resolve=e,i.reject=t})};function rR(i,e){var t=location.href;return new URL(i,t).href===new URL(e,t).href}var C_=function(i,e){this.type=i,Object.assign(this,e)};function lh(i,e,t){return t?e?e(i):i:(i&&i.then||(i=Promise.resolve(i)),e?i.then(e):i)}function mCt(){}var yCt={type:"SKIP_WAITING"};function OY(i,e){return i&&i.then?i.then(mCt):Promise.resolve()}var _Ct=function(i){function e(o,l){var c,u;return l===void 0&&(l={}),(c=i.call(this)||this).nn={},c.tn=0,c.rn=new sR,c.en=new sR,c.on=new sR,c.un=0,c.an=new Set,c.cn=function(){var h=c.fn,d=h.installing;c.tn>0||!rR(d.scriptURL,c.sn.toString())||performance.now()>c.un+6e4?(c.vn=d,h.removeEventListener("updatefound",c.cn)):(c.hn=d,c.an.add(d),c.rn.resolve(d)),++c.tn,d.addEventListener("statechange",c.ln)},c.ln=function(h){var d=c.fn,p=h.target,f=p.state,g=p===c.vn,m={sw:p,isExternal:g,originalEvent:h};!g&&c.mn&&(m.isUpdate=!0),c.dispatchEvent(new C_(f,m)),f==="installed"?c.wn=self.setTimeout(function(){f==="installed"&&d.waiting===p&&c.dispatchEvent(new C_("waiting",m))},200):f==="activating"&&(clearTimeout(c.wn),g||c.en.resolve(p))},c.yn=function(h){var d=c.hn,p=d!==navigator.serviceWorker.controller;c.dispatchEvent(new C_("controlling",{isExternal:p,originalEvent:h,sw:d,isUpdate:c.mn})),p||c.on.resolve(d)},c.gn=(u=function(h){var d=h.data,p=h.ports,f=h.source;return lh(c.getSW(),function(){c.an.has(f)&&c.dispatchEvent(new C_("message",{data:d,originalEvent:h,ports:p,sw:f}))})},function(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];try{return Promise.resolve(u.apply(this,h))}catch(p){return Promise.reject(p)}}),c.sn=o,c.nn=l,navigator.serviceWorker.addEventListener("message",c.gn),c}var t,n;n=i,(t=e).prototype=Object.create(n.prototype),t.prototype.constructor=t,RB(t,n);var s,r,a=e.prototype;return a.register=function(o){var l=(o===void 0?{}:o).immediate,c=l!==void 0&&l;try{var u=this;return lh(function(h,d){var p=h();return p&&p.then?p.then(d):d(p)}(function(){if(!c&&document.readyState!=="complete")return OY(new Promise(function(h){return window.addEventListener("load",h)}))},function(){return u.mn=!!navigator.serviceWorker.controller,u.dn=u.pn(),lh(u.bn(),function(h){u.fn=h,u.dn&&(u.hn=u.dn,u.en.resolve(u.dn),u.on.resolve(u.dn),u.dn.addEventListener("statechange",u.ln,{once:!0}));var d=u.fn.waiting;return d&&rR(d.scriptURL,u.sn.toString())&&(u.hn=d,Promise.resolve().then(function(){u.dispatchEvent(new C_("waiting",{sw:d,wasWaitingBeforeRegister:!0}))}).then(function(){})),u.hn&&(u.rn.resolve(u.hn),u.an.add(u.hn)),u.fn.addEventListener("updatefound",u.cn),navigator.serviceWorker.addEventListener("controllerchange",u.yn),u.fn})}))}catch(h){return Promise.reject(h)}},a.update=function(){try{return this.fn?lh(OY(this.fn.update())):lh()}catch(o){return Promise.reject(o)}},a.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},a.messageSW=function(o){try{return lh(this.getSW(),function(l){return EY(l,o)})}catch(l){return Promise.reject(l)}},a.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&EY(this.fn.waiting,yCt)},a.pn=function(){var o=navigator.serviceWorker.controller;return o&&rR(o.scriptURL,this.sn.toString())?o:void 0},a.bn=function(){try{var o=this;return lh(function(l,c){try{var u=l()}catch(h){return c(h)}return u&&u.then?u.then(void 0,c):u}(function(){return lh(navigator.serviceWorker.register(o.sn,o.nn),function(l){return o.un=performance.now(),l})},function(l){throw l}))}catch(l){return Promise.reject(l)}},s=e,(r=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&fCt(s.prototype,r),Object.defineProperty(s,"prototype",{writable:!1}),s}(function(){function i(){this.Pn=new Map}var e=i.prototype;return e.addEventListener=function(t,n){this.jn(t).add(n)},e.removeEventListener=function(t,n){this.jn(t).delete(n)},e.dispatchEvent=function(t){t.target=this;for(var n,s=gCt(this.jn(t.type));!(n=s()).done;)(0,n.value)(t)},e.jn=function(t){return this.Pn.has(t)||this.Pn.set(t,new Set),this.Pn.get(t)},i}()),vCt={};const bCt=()=>{if(navigator!=null&&navigator.serviceWorker){const i=new _Ct(`${vCt.PUBLIC_URL}/service-worker.js`),e=()=>{window.confirm("New Update Available. Click OK to update")&&i.messageSkipWaiting()};i.addEventListener("waiting",e),i.register()}};function xCt(){const[i,e]=H.useState([]),[t,n]=H.useState([]),{t:s}=Do(),r=()=>{const l=LGe();e(l)};H.useEffect(()=>{r()},[]);const a=l=>{n(c=>[...c,l]),setTimeout(()=>{Z7(l),r(),n(c=>c.filter(u=>u!==l))},300)},o=()=>{n(i.map(l=>l.id)),setTimeout(()=>{e([]),n([]),Z7()},300)};return N.jsxs("div",{style:{padding:"16px",position:"relative"},children:[i.length>0?i.map(({id:l,title:c,content:u})=>N.jsx(Sd,{fullMode:!1,title:c,description:N.jsx(Nt,{vertical:!0,children:u}),type:"info",onClose:()=>a(l),className:t.includes(l)?"slide-out":"",style:{marginBottom:"12px",transition:"all 0.3s ease"}},l)):N.jsx("p",{style:{textAlign:"center",color:"var(--semi-color-text-2)"},children:s("No_notifications_available")}),i.length>0&&N.jsx("div",{className:"grid",style:{position:"fixed",bottom:"10%",width:fc()==="PC"?"25%":"50%",zIndex:9999},children:N.jsx(Nt,{style:{width:"100%"},vertical:!0,align:"center",children:N.jsx(Ml,{theme:"light",icon:N.jsx(Rc,{}),style:{borderRadius:"20px",backgroundColor:" --semi-color-bg-4"},onClick:o})})})]})}function SCt(){const[i,e]=H.useState(!1),t=()=>{e(!i)},{t:n}=Do(),[s,r]=H.useState("home"),[a,o]=H.useState(!1),l=()=>{o(!a)};function c(h){console.log(h),h.itemKey!=="message"?(r(h.itemKey),$1("changePage",h.itemKey)):l()}function u(){const h=[{itemKey:"home",text:n("Home"),icon:N.jsx(_Oe,{})},{itemKey:"vision",text:n("Vision"),icon:N.jsx(OQ,{})},{itemKey:"console",text:n("Console"),icon:N.jsx(UOe,{})},{itemKey:"message",text:n("NotifyCenter"),icon:N.jsx(AOe,{})}];return dt("use_ai_page")==="true"&&h.push({itemKey:"ai",text:n("AI"),icon:N.jsx(JPe,{})}),h}return H.useEffect(()=>{const h=d=>{r(d)};return b$("changePage",h),()=>{x$("changePage",h)}},[]),N.jsxs(N.Fragment,{children:[N.jsx(wc,{isCollapsed:i,style:{height:"100%"},selectedKeys:s,mode:"vertical",items:u(),onSelect:h=>c(h),header:{text:"CCRS"},footer:{children:N.jsx(N.Fragment,{children:N.jsx(it,{icon:i?N.jsx(fL,{style:{color:"--semi-color-tertiary-active"}}):N.jsx(fL,{style:{color:"--semi-color-text-0"}}),onClick:t,theme:"borderless",children:i?null:n("Close navigation")})})}}),N.jsx(Pn,{closeOnEsc:!0,placement:"left",style:{maxWidth:"100%",fontFamily:"var(--Default-font)"},title:n("NotifyCenter"),visible:a,onCancel:l,children:N.jsx(xCt,{})})]})}const ide=H.createContext(void 0),nde=({children:i})=>{const[e,t]=H.useState({x:0,y:0,visible:!1,target:null}),n=r=>{r.preventDefault();const{clientX:a,clientY:o}=r,{innerWidth:l,innerHeight:c}=window,u=200,h=300,d=Math.min(a,l-u),p=Math.min(o,c-h);t({x:d,y:p,visible:!0,target:r.target})},s=()=>{t(r=>({...r,visible:!1}))};return H.useEffect(()=>{const r=a=>{e.visible&&!a.target.closest(".context-menu")&&s()};return document.addEventListener("click",r),()=>{document.removeEventListener("click",r)}},[e.visible]),N.jsx(ide.Provider,{value:{contextMenu:e,showContextMenu:n,hideContextMenu:s},children:i})};nde.propTypes={children:v.node.isRequired};const sde=()=>{const i=H.useContext(ide);if(i===void 0)throw new Error("useContextMenu must be used within a ContextMenuProvider");return i};function CCt(){const{contextMenu:i}=sde(),[e,t]=H.useState(!1),[n,s]=H.useState(N.jsx(Ch,{style:{width:"20px",height:"20px"}})),{t:r}=Do();H.useEffect(()=>(window.addEventListener("themeChange",a),()=>{window.removeEventListener("themeChange",a)}),[]);const a=()=>{dt("theme_color")==="light"?s(N.jsx(ib,{style:{width:"20px",height:"20px"}})):dt("theme_color")==="dark"?s(N.jsx(tb,{style:{width:"20px",height:"20px"}})):dt("theme_color")==="auto"&&s(N.jsx(Ch,{style:{width:"20px",height:"20px"}}))},o=()=>{t(g=>!g)};function l(){const g=mw();g==="dark"?(e2(),s(N.jsx(Ch,{style:{width:"20px",height:"20px"}}))):g==="light"?(JO(),s(N.jsx(tb,{style:{width:"20px",height:"20px"}}))):g==="auto"&&(QO(),s(N.jsx(ib,{style:{width:"20px",height:"20px"}})))}if(!i.visible)return null;const c=[{node:"item",name:"",type:"primary",active:Ff()===1,onClick:()=>N1(1)},{node:"item",name:"English",type:"primary",active:Ff()===2,onClick:()=>N1(2)}],u=[{node:"item",name:r("Console"),type:"primary",onClick:()=>$1("changePage","console")},{node:"item",name:r("Vision"),type:"primary",onClick:()=>$1("changePage","vision")},{node:"item",name:r("Settings"),type:"primary",onClick:()=>o()}],h=()=>{var m;const g=(m=window.getSelection())==null?void 0:m.toString();g&&navigator.clipboard.writeText(g).then(()=>{Ys(r("New_Notify_Send"),r("Copy successful"))}).catch(y=>{Ys(r("Copy failed"),y)})},d=()=>{var m;const g=(m=window.getSelection())==null?void 0:m.toString();g&&i.target instanceof HTMLInputElement&&navigator.clipboard.writeText(g).then(()=>{const y=i.target.selectionStart||0,b=i.target.selectionEnd||0;i.target.setRangeText("",y,b,"end"),Ys(r("New_Notify_Send"),r("Cut successful"))}).catch(y=>{Ys(r("Cut failed"),y)})},p=()=>{i.target instanceof HTMLInputElement&&navigator.clipboard.readText().then(g=>{const m=i.target.selectionStart||0,y=i.target.selectionEnd||0;i.target.setRangeText(g,m,y,"end"),Ys(r("New_Notify_Send"),r("Paste successful"))}).catch(g=>{Ys(r("Paste failed"),g)})},f=()=>i.target instanceof HTMLInputElement||i.target instanceof HTMLTextAreaElement?[{node:"item",name:r("Cut"),icon:N.jsx(iOe,{}),onClick:d},{node:"item",name:r("Copy"),icon:N.jsx(pL,{}),onClick:h},{node:"item",name:r("Paste"),icon:N.jsx(cOe,{}),onClick:p}]:[];return N.jsxs("div",{className:"grid",style:{position:"fixed",top:`${i.y}px`,left:`${i.x}px`,backgroundColor:"var(--semi-color-bg-1)",padding:"10px",borderRadius:"10px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",display:i.visible?"inline-block":"none",minWidth:"100px",zIndex:1001},onClick:g=>{g.stopPropagation()},children:[N.jsxs(mu,{children:[N.jsx(fo,{span:8,children:N.jsx(it,{theme:"borderless",onClick:()=>window.location.reload(),icon:N.jsx(PQ,{}),"aria-label":r("Refresh")})}),N.jsx(fo,{span:8,children:N.jsx(it,{theme:"borderless",onClick:h,icon:N.jsx(pL,{}),"aria-label":r("Copy")})}),N.jsx(fo,{span:8,children:N.jsx(it,{theme:"borderless",icon:n,onClick:l,"aria-label":r("Theme_color")})})]}),N.jsx("br",{}),N.jsxs(Oi.Menu,{tabIndex:-1,children:[f().map((g,m)=>N.jsx(Oi.Item,{style:{borderRadius:"10px"},icon:g.icon,onClick:g.onClick,children:g.name},m)),N.jsx(Oi.Item,{style:{borderRadius:"10px"},children:N.jsx(Oi,{trigger:"hover",showTick:!0,position:"right",menu:u,children:N.jsx("div",{style:{cursor:"pointer"},children:r("Switch page")})})}),N.jsx(Oi.Item,{style:{borderRadius:"10px"},children:N.jsx(Oi,{trigger:"hover",showTick:!0,position:"right",menu:c,children:N.jsx("div",{style:{cursor:"pointer"},children:r("Regional language")})})})]}),N.jsx(Pn,{closeOnEsc:!0,style:{maxWidth:"100%",fontFamily:"var(--Default-font)"},title:"Settings",visible:e,onCancel:o,footer:N.jsx(IB,{}),children:N.jsx(d2,{})})]})}function wCt(){const{Header:i,Content:e}=yc,{showContextMenu:t}=sde();H.useEffect(()=>{pt("Hook Theme...","successfully","UI Loading(3/3)...");let s=dt("theme_color");s==="auto"?e2():eSt(s)},[]);const n=s=>{dt("use_app_content_menu")==="true"&&fc()==="PC"&&t(s)};return N.jsxs(yc,{onContextMenu:n,style:{border:"1px solid var(--semi-color-border)"},children:[N.jsx(i,{style:{position:"fixed",width:"100%",zIndex:1,backdropFilter:"blur(5px)",backgroundColor:"rgba(255, 255, 255, 0)"},children:N.jsx(iCt,{})}),N.jsx(f0,{children:N.jsx(SCt,{})}),N.jsx(yc,{children:N.jsxs(e,{style:{height:"100%",marginTop:"60px"},children:[N.jsx(dCt,{}),N.jsx(CCt,{})]})})]})}function ACt(){return bCt(),pt("UI Loading...","successfully","UI Loading(1/3)..."),pt("Check Settings...","successfully","UI Loading(2/3)..."),UGe(),pt("UI was Start...","successfully","Start successfully"),N.jsx(nde,{children:N.jsx(wCt,{})})}const ct=i=>typeof i=="string",w_=()=>{let i,e;const t=new Promise((n,s)=>{i=n,e=s});return t.resolve=i,t.reject=e,t},MY=i=>i==null?"":""+i,kCt=(i,e,t)=>{i.forEach(n=>{e[n]&&(t[n]=e[n])})},TCt=/###/g,IY=i=>i&&i.indexOf("###")>-1?i.replace(TCt,"."):i,RY=i=>!i||ct(i),nb=(i,e,t)=>{const n=ct(e)?e.split("."):e;let s=0;for(;s<n.length-1;){if(RY(i))return{};const r=IY(n[s]);!i[r]&&t&&(i[r]=new t),Object.prototype.hasOwnProperty.call(i,r)?i=i[r]:i={},++s}return RY(i)?{}:{obj:i,k:IY(n[s])}},LY=(i,e,t)=>{const{obj:n,k:s}=nb(i,e,Object);if(n!==void 0||e.length===1){n[s]=t;return}let r=e[e.length-1],a=e.slice(0,e.length-1),o=nb(i,a,Object);for(;o.obj===void 0&&a.length;)r=`${a[a.length-1]}.${r}`,a=a.slice(0,a.length-1),o=nb(i,a,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${r}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${r}`]=t},ECt=(i,e,t,n)=>{const{obj:s,k:r}=nb(i,e,Object);s[r]=s[r]||[],s[r].push(t)},sE=(i,e)=>{const{obj:t,k:n}=nb(i,e);if(t&&Object.prototype.hasOwnProperty.call(t,n))return t[n]},PCt=(i,e,t)=>{const n=sE(i,t);return n!==void 0?n:sE(e,t)},rde=(i,e,t)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in i?ct(i[n])||i[n]instanceof String||ct(e[n])||e[n]instanceof String?t&&(i[n]=e[n]):rde(i[n],e[n],t):i[n]=e[n]);return i},Og=i=>i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var OCt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const MCt=i=>ct(i)?i.replace(/[&<>"'\/]/g,e=>OCt[e]):i;class ICt{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const RCt=[" ",",","?","!",";"],LCt=new ICt(20),DCt=(i,e,t)=>{e=e||"",t=t||"";const n=RCt.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(n.length===0)return!0;const s=LCt.getRegExp(`(${n.map(a=>a==="?"?"\\?":a).join("|")})`);let r=!s.test(i);if(!r){const a=i.indexOf(t);a>0&&!s.test(i.substring(0,a))&&(r=!0)}return r},LB=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!i)return;if(i[e])return Object.prototype.hasOwnProperty.call(i,e)?i[e]:void 0;const n=e.split(t);let s=i;for(let r=0;r<n.length;){if(!s||typeof s!="object")return;let a,o="";for(let l=r;l<n.length;++l)if(l!==r&&(o+=t),o+=n[l],a=s[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&l<n.length-1)continue;r+=l-r+1;break}s=a}return s},rE=i=>i==null?void 0:i.replace("_","-"),FCt={type:"logger",log(i){this.output("log",i)},warn(i){this.output("warn",i)},error(i){this.output("error",i)},output(i,e){var t,n;(n=(t=console==null?void 0:console[i])==null?void 0:t.apply)==null||n.call(t,console,e)}};class aE{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||FCt,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,s){return s&&!this.debug?null:(ct(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new aE(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new aE(this.logger,e)}}var hc=new aE;class f2{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const s=this.observers[n].get(t)||0;this.observers[n].set(t,s+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[o,l]=a;for(let c=0;c<l;c++)o(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[o,l]=a;for(let c=0;c<l;c++)o.apply(o,[e,...n])})}}class DY extends f2{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){var c,u;let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const r=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,a=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],n&&(Array.isArray(n)?o.push(...n):ct(n)&&r?o.push(...n.split(r)):o.push(n)));const l=sE(this.data,o);return!l&&!t&&!n&&e.indexOf(".")>-1&&(e=o[0],t=o[1],n=o.slice(2).join(".")),l||!a||!ct(n)?l:LB((u=(c=this.data)==null?void 0:c[e])==null?void 0:u[t],n,r)}addResource(e,t,n,s){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let o=[e,t];n&&(o=o.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(o=e.split("."),s=t,t=o[1]),this.addNamespaces(t),LY(this.data,o,s),r.silent||this.emit("added",e,t,n,s)}addResources(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const r in n)(ct(n[r])||Array.isArray(n[r]))&&this.addResource(e,t,r,n[r],{silent:!0});s.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,s,r){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),s=n,n=t,t=o[1]),this.addNamespaces(t);let l=sE(this.data,o)||{};a.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?rde(l,n,r):l={...l,...n},LY(this.data,o,l),a.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(s=>t[s]&&Object.keys(t[s]).length>0)}toJSON(){return this.data}}var ade={processors:{},addPostProcessor(i){this.processors[i.name]=i},handle(i,e,t,n,s){return i.forEach(r=>{var a;e=((a=this.processors[r])==null?void 0:a.process(e,t,n,s))??e}),e}};const FY={};class oE extends f2{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),kCt(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=hc.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const n=this.resolve(e,t);return(n==null?void 0:n.res)!==void 0}extractFromKey(e,t){let n=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let r=t.ns||this.options.defaultNS||[];const a=n&&e.indexOf(n)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!DCt(e,n,s);if(a&&!o){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:ct(r)?[r]:r};const c=e.split(n);(n!==s||n===s&&this.options.ns.indexOf(c[0])>-1)&&(r=c.shift()),e=c.join(s)}return{key:e,namespaces:ct(r)?[r]:r}}translate(e,t,n){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const s=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,r=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],t),l=o[o.length-1],c=t.lng||this.language,u=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((c==null?void 0:c.toLowerCase())==="cimode"){if(u){const S=t.nsSeparator||this.options.nsSeparator;return s?{res:`${l}${S}${a}`,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:`${l}${S}${a}`}return s?{res:a,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:a}const h=this.resolve(e,t);let d=h==null?void 0:h.res;const p=(h==null?void 0:h.usedKey)||a,f=(h==null?void 0:h.exactUsedKey)||a,g=Object.prototype.toString.apply(d),m=["[object Number]","[object Function]","[object RegExp]"],y=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,x=!ct(d)&&typeof d!="boolean"&&typeof d!="number";if(b&&d&&x&&m.indexOf(g)<0&&!(ct(y)&&Array.isArray(d))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const S=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,d,{...t,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return s?(h.res=S,h.usedParams=this.getUsedParamsDetails(t),h):S}if(r){const S=Array.isArray(d),C=S?[]:{},w=S?f:p;for(const A in d)if(Object.prototype.hasOwnProperty.call(d,A)){const T=`${w}${r}${A}`;C[A]=this.translate(T,{...t,joinArrays:!1,ns:o}),C[A]===T&&(C[A]=d[A])}d=C}}else if(b&&ct(y)&&Array.isArray(d))d=d.join(y),d&&(d=this.extendTranslation(d,e,t,n));else{let S=!1,C=!1;const w=t.count!==void 0&&!ct(t.count),A=oE.hasDefaultValue(t),T=w?this.pluralResolver.getSuffix(c,t.count,t):"",E=t.ordinal&&w?this.pluralResolver.getSuffix(c,t.count,{ordinal:!1}):"",P=w&&!t.ordinal&&t.count===0,O=P&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${T}`]||t[`defaultValue${E}`]||t.defaultValue;!this.isValidLookup(d)&&A&&(S=!0,d=O),this.isValidLookup(d)||(C=!0,d=a);const R=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&C?void 0:d,j=A&&O!==d&&this.options.updateMissing;if(C||S||j){if(this.logger.log(j?"updateKey":"missingKey",c,l,a,j?O:d),r){const $=this.resolve(a,{...t,keySeparator:!1});$&&$.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let I=[];const D=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&D&&D[0])for(let $=0;$<D.length;$++)I.push(D[$]);else this.options.saveMissingTo==="all"?I=this.languageUtils.toResolveHierarchy(t.lng||this.language):I.push(t.lng||this.language);const z=($,V,L)=>{var ae;const Y=A&&L!==d?L:R;this.options.missingKeyHandler?this.options.missingKeyHandler($,l,V,Y,j,t):(ae=this.backendConnector)!=null&&ae.saveMissing&&this.backendConnector.saveMissing($,l,V,Y,j,t),this.emit("missingKey",$,l,V,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&w?I.forEach($=>{const V=this.pluralResolver.getSuffixes($,t);P&&t[`defaultValue${this.options.pluralSeparator}zero`]&&V.indexOf(`${this.options.pluralSeparator}zero`)<0&&V.push(`${this.options.pluralSeparator}zero`),V.forEach(L=>{z([$],a+L,t[`defaultValue${L}`]||O)})}):z(I,a,O))}d=this.extendTranslation(d,e,t,h,n),C&&d===a&&this.options.appendNamespaceToMissingKey&&(d=`${l}:${a}`),(C||S)&&this.options.parseMissingKeyHandler&&(d=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${a}`:a,S?d:void 0))}return s?(h.res=d,h.usedParams=this.getUsedParamsDetails(t),h):d}extendTranslation(e,t,n,s,r){var c,u;var a=this;if((c=this.i18nFormat)!=null&&c.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const h=ct(e)&&(((u=n==null?void 0:n.interpolation)==null?void 0:u.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(h){const f=e.match(this.interpolator.nestingRegexp);d=f&&f.length}let p=n.replace&&!ct(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),e=this.interpolator.interpolate(e,p,n.lng||this.language||s.usedLng,n),h){const f=e.match(this.interpolator.nestingRegexp),g=f&&f.length;d<g&&(n.nest=!1)}!n.lng&&s&&s.res&&(n.lng=this.language||s.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var f=arguments.length,g=new Array(f),m=0;m<f;m++)g[m]=arguments[m];return(r==null?void 0:r[0])===g[0]&&!n.context?(a.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${t[0]}`),null):a.translate(...g,t)},n)),n.interpolation&&this.interpolator.reset()}const o=n.postProcess||this.options.postProcess,l=ct(o)?[o]:o;return e!=null&&(l!=null&&l.length)&&n.applyPostProcessor!==!1&&(e=ade.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,s,r,a,o;return ct(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(n))return;const c=this.extractFromKey(l,t),u=c.key;s=u;let h=c.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const d=t.count!==void 0&&!ct(t.count),p=d&&!t.ordinal&&t.count===0,f=t.context!==void 0&&(ct(t.context)||typeof t.context=="number")&&t.context!=="",g=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);h.forEach(m=>{var y,b;this.isValidLookup(n)||(o=m,!FY[`${g[0]}-${m}`]&&((y=this.utils)!=null&&y.hasLoadedNamespace)&&!((b=this.utils)!=null&&b.hasLoadedNamespace(o))&&(FY[`${g[0]}-${m}`]=!0,this.logger.warn(`key "${s}" for languages "${g.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach(x=>{var w;if(this.isValidLookup(n))return;a=x;const S=[u];if((w=this.i18nFormat)!=null&&w.addLookupKeys)this.i18nFormat.addLookupKeys(S,u,x,m,t);else{let A;d&&(A=this.pluralResolver.getSuffix(x,t.count,t));const T=`${this.options.pluralSeparator}zero`,E=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(S.push(u+A),t.ordinal&&A.indexOf(E)===0&&S.push(u+A.replace(E,this.options.pluralSeparator)),p&&S.push(u+T)),f){const P=`${u}${this.options.contextSeparator}${t.context}`;S.push(P),d&&(S.push(P+A),t.ordinal&&A.indexOf(E)===0&&S.push(P+A.replace(E,this.options.pluralSeparator)),p&&S.push(P+T))}}let C;for(;C=S.pop();)this.isValidLookup(n)||(r=C,n=this.getResource(x,m,C,t))}))})}),{res:n,usedKey:s,exactUsedKey:r,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,n){var r;let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(r=this.i18nFormat)!=null&&r.getResource?this.i18nFormat.getResource(e,t,n,s):this.resourceStore.getResource(e,t,n,s)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!ct(e.replace);let s=n?e.replace:e;if(n&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!n){s={...s};for(const r of t)delete s[r]}return s}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&e[n]!==void 0)return!0;return!1}}class BY{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=hc.create("languageUtils")}getScriptPartFromCode(e){if(e=rE(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=rE(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(ct(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(n=>{if(t)return;const s=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(s))&&(t=s)}),!t&&this.options.supportedLngs&&e.forEach(n=>{if(t)return;const s=this.getLanguagePartFromCode(n);if(this.isSupportedCode(s))return t=s;t=this.options.supportedLngs.find(r=>{if(r===s)return r;if(!(r.indexOf("-")<0&&s.indexOf("-")<0)&&(r.indexOf("-")>0&&s.indexOf("-")<0&&r.substring(0,r.indexOf("-"))===s||r.indexOf(s)===0&&s.length>1))return r})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),ct(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),s=[],r=a=>{a&&(this.isSupportedCode(a)?s.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return ct(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&r(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&r(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&r(this.getLanguagePartFromCode(e))):ct(e)&&r(this.formatLanguageCode(e)),n.forEach(a=>{s.indexOf(a)<0&&r(this.formatLanguageCode(a))}),s}}const jY={zero:0,one:1,two:2,few:3,many:4,other:5},NY={select:i=>i===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class BCt{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=hc.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=rE(e==="dev"?"en":e),s=t.ordinal?"ordinal":"cardinal",r=JSON.stringify({cleanedCode:n,type:s});if(r in this.pluralRulesCache)return this.pluralRulesCache[r];let a;try{a=new Intl.PluralRules(n,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),NY;if(!e.match(/-|_/))return NY;const l=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(l,t)}return this.pluralRulesCache[r]=a,a}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),(n==null?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,n).map(s=>`${t}${s}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort((s,r)=>jY[s]-jY[r]).map(s=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.getRule(e,n);return s?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}const $Y=function(i,e,t){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,r=PCt(i,e,t);return!r&&s&&ct(t)&&(r=LB(i,t,n),r===void 0&&(r=LB(e,t,n))),r},aR=i=>i.replace(/\$/g,"$$$$");class jCt{constructor(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=hc.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:s,prefix:r,prefixEscaped:a,suffix:o,suffixEscaped:l,formatSeparator:c,unescapeSuffix:u,unescapePrefix:h,nestingPrefix:d,nestingPrefixEscaped:p,nestingSuffix:f,nestingSuffixEscaped:g,nestingOptionsSeparator:m,maxReplaces:y,alwaysFormat:b}=e.interpolation;this.escape=t!==void 0?t:MCt,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=r?Og(r):a||"{{",this.suffix=o?Og(o):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=u?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=d?Og(d):p||Og("$t("),this.nestingSuffix=f?Og(f):g||Og(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=y||1e3,this.alwaysFormat=b!==void 0?b:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,n)=>(t==null?void 0:t.source)===n?(t.lastIndex=0,t):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,n,s){var p;let r,a,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=f=>{if(f.indexOf(this.formatSeparator)<0){const b=$Y(t,l,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(b,void 0,n,{...s,...t,interpolationkey:f}):b}const g=f.split(this.formatSeparator),m=g.shift().trim(),y=g.join(this.formatSeparator).trim();return this.format($Y(t,l,m,this.options.keySeparator,this.options.ignoreJSONStructure),y,n,{...s,...t,interpolationkey:m})};this.resetRegExp();const u=(s==null?void 0:s.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=((p=s==null?void 0:s.interpolation)==null?void 0:p.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>aR(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?aR(this.escape(f)):aR(f)}].forEach(f=>{for(o=0;r=f.regex.exec(e);){const g=r[1].trim();if(a=c(g),a===void 0)if(typeof u=="function"){const y=u(e,r,s);a=ct(y)?y:""}else if(s&&Object.prototype.hasOwnProperty.call(s,g))a="";else if(h){a=r[0];continue}else this.logger.warn(`missed to pass in variable ${g} for interpolating ${e}`),a="";else!ct(a)&&!this.useRawValueToEscape&&(a=MY(a));const m=f.safeValue(a);if(e=e.replace(r[0],m),h?(f.regex.lastIndex+=a.length,f.regex.lastIndex-=r[0].length):f.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,r,a;const o=(l,c)=>{const u=this.nestingOptionsSeparator;if(l.indexOf(u)<0)return l;const h=l.split(new RegExp(`${u}[ ]*{`));let d=`{${h[1]}`;l=h[0],d=this.interpolate(d,a);const p=d.match(/'/g),f=d.match(/"/g);(((p==null?void 0:p.length)??0)%2===0&&!f||f.length%2!==0)&&(d=d.replace(/'/g,'"'));try{a=JSON.parse(d),c&&(a={...c,...a})}catch(g){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,g),`${l}${u}${d}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,l};for(;s=this.nestingRegexp.exec(e);){let l=[];a={...n},a=a.replace&&!ct(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let c=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){const u=s[1].split(this.formatSeparator).map(h=>h.trim());s[1]=u.shift(),l=u,c=!0}if(r=t(o.call(this,s[1].trim(),a),a),r&&s[0]===e&&!ct(r))return r;ct(r)||(r=MY(r)),r||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),r=""),c&&(r=l.reduce((u,h)=>this.format(u,h,n.lng,{...n,interpolationkey:s[1].trim()}),r.trim())),e=e.replace(s[0],r),this.regexp.lastIndex=0}return e}}const NCt=i=>{let e=i.toLowerCase().trim();const t={};if(i.indexOf("(")>-1){const n=i.split("(");e=n[0].toLowerCase().trim();const s=n[1].substring(0,n[1].length-1);e==="currency"&&s.indexOf(":")<0?t.currency||(t.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?t.range||(t.range=s.trim()):s.split(";").forEach(a=>{if(a){const[o,...l]=a.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,""),u=o.trim();t[u]||(t[u]=c),c==="false"&&(t[u]=!1),c==="true"&&(t[u]=!0),isNaN(c)||(t[u]=parseInt(c,10))}})}return{formatName:e,formatOptions:t}},Mg=i=>{const e={};return(t,n,s)=>{let r=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(r={...r,[s.interpolationkey]:void 0});const a=n+JSON.stringify(r);let o=e[a];return o||(o=i(rE(n),s),e[a]=o),o(t)}};class $Ct{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=hc.create("formatter"),this.options=e,this.formats={number:Mg((t,n)=>{const s=new Intl.NumberFormat(t,{...n});return r=>s.format(r)}),currency:Mg((t,n)=>{const s=new Intl.NumberFormat(t,{...n,style:"currency"});return r=>s.format(r)}),datetime:Mg((t,n)=>{const s=new Intl.DateTimeFormat(t,{...n});return r=>s.format(r)}),relativetime:Mg((t,n)=>{const s=new Intl.RelativeTimeFormat(t,{...n});return r=>s.format(r,n.range||"day")}),list:Mg((t,n)=>{const s=new Intl.ListFormat(t,{...n});return r=>s.format(r)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Mg(t)}format(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const r=t.split(this.formatSeparator);if(r.length>1&&r[0].indexOf("(")>1&&r[0].indexOf(")")<0&&r.find(o=>o.indexOf(")")>-1)){const o=r.findIndex(l=>l.indexOf(")")>-1);r[0]=[r[0],...r.splice(1,o)].join(this.formatSeparator)}return r.reduce((o,l)=>{var h;const{formatName:c,formatOptions:u}=NCt(l);if(this.formats[c]){let d=o;try{const p=((h=s==null?void 0:s.formatParams)==null?void 0:h[s.interpolationkey])||{},f=p.locale||p.lng||s.locale||s.lng||n;d=this.formats[c](o,f,{...u,...s,...p})}catch(p){this.logger.warn(p)}return d}else this.logger.warn(`there was no format function for ${c}`);return o},e)}}const zCt=(i,e)=>{i.pending[e]!==void 0&&(delete i.pending[e],i.pendingCount--)};class HCt extends f2{constructor(e,t,n){var r,a;let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=hc.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],(a=(r=this.backend)==null?void 0:r.init)==null||a.call(r,n,s.backend,s)}queueLoad(e,t,n,s){const r={},a={},o={},l={};return e.forEach(c=>{let u=!0;t.forEach(h=>{const d=`${c}|${h}`;!n.reload&&this.store.hasResourceBundle(c,h)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?a[d]===void 0&&(a[d]=!0):(this.state[d]=1,u=!1,a[d]===void 0&&(a[d]=!0),r[d]===void 0&&(r[d]=!0),l[h]===void 0&&(l[h]=!0)))}),u||(o[c]=!0)}),(Object.keys(r).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(r),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(e,t,n){const s=e.split("|"),r=s[0],a=s[1];t&&this.emit("failedLoading",r,a,t),!t&&n&&this.store.addResourceBundle(r,a,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const o={};this.queue.forEach(l=>{ECt(l.loaded,[r],a),zCt(l,e),t&&l.errors.push(t),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{o[c]||(o[c]={});const u=l.loaded[c];u.length&&u.forEach(h=>{o[c][h]===void 0&&(o[c][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:n,tried:s,wait:r,callback:a});return}this.readingCalls++;const o=(c,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(c&&u&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,n,s+1,r*2,a)},r);return}a(c,u)},l=this.backend[n].bind(this.backend);if(l.length===2){try{const c=l(e,t);c&&typeof c.then=="function"?c.then(u=>o(null,u)).catch(o):o(null,c)}catch(c){o(c)}return}return l(e,t,o)}prepareLoading(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();ct(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ct(t)&&(t=[t]);const r=this.queueLoad(e,t,n,s);if(!r.toLoad.length)return r.pending.length||s(),null;r.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e.split("|"),s=n[0],r=n[1];this.read(s,r,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${t}loading namespace ${r} for language ${s} failed`,a),!a&&o&&this.logger.log(`${t}loaded namespace ${r} for language ${s}`,o),this.loaded(e,a,o)})}saveMissing(e,t,n,s,r){var l,c,u,h,d;let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((c=(l=this.services)==null?void 0:l.utils)!=null&&c.hasLoadedNamespace&&!((h=(u=this.services)==null?void 0:u.utils)!=null&&h.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if((d=this.backend)!=null&&d.create){const p={...a,isUpdate:r},f=this.backend.create.bind(this.backend);if(f.length<6)try{let g;f.length===5?g=f(e,t,n,s,p):g=f(e,t,n,s),g&&typeof g.then=="function"?g.then(m=>o(null,m)).catch(o):o(null,g)}catch(g){o(g)}else f(e,t,n,s,o,p)}!e||!e[0]||this.store.addResource(e[0],t,n,s)}}}const zY=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:i=>{let e={};if(typeof i[1]=="object"&&(e=i[1]),ct(i[1])&&(e.defaultValue=i[1]),ct(i[2])&&(e.tDescription=i[2]),typeof i[2]=="object"||typeof i[3]=="object"){const t=i[3]||i[2];Object.keys(t).forEach(n=>{e[n]=t[n]})}return e},interpolation:{escapeValue:!0,format:i=>i,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),HY=i=>{var e,t;return ct(i.ns)&&(i.ns=[i.ns]),ct(i.fallbackLng)&&(i.fallbackLng=[i.fallbackLng]),ct(i.fallbackNS)&&(i.fallbackNS=[i.fallbackNS]),((t=(e=i.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(i.supportedLngs=i.supportedLngs.concat(["cimode"])),typeof i.initImmediate=="boolean"&&(i.initAsync=i.initImmediate),i},TC=()=>{},VCt=i=>{Object.getOwnPropertyNames(Object.getPrototypeOf(i)).forEach(t=>{typeof i[t]=="function"&&(i[t]=i[t].bind(i))})};class z1 extends f2{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=HY(e),this.services={},this.logger=hc,this.modules={external:[]},VCt(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(n=t,t={}),t.defaultNS==null&&t.ns&&(ct(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const s=zY();this.options={...s,...this.options,...HY(t)},this.options.interpolation={...s.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const r=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?hc.init(r(this.modules.logger),this.options):hc.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=$Ct;const h=new BY(this.options);this.store=new DY(this.options.resources,this.options);const d=this.services;d.logger=hc,d.resourceStore=this.store,d.languageUtils=h,d.pluralResolver=new BCt(h,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(d.formatter=r(u),d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new jCt(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new HCt(r(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",function(p){for(var f=arguments.length,g=new Array(f>1?f-1:0),m=1;m<f;m++)g[m-1]=arguments[m];e.emit(p,...g)}),this.modules.languageDetector&&(d.languageDetector=r(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=r(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new oE(this.services,this.options),this.translator.on("*",function(p){for(var f=arguments.length,g=new Array(f>1?f-1:0),m=1;m<f;m++)g[m-1]=arguments[m];e.emit(p,...g)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,n||(n=TC),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return e.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return e.store[u](...arguments),e}});const l=w_(),c=()=>{const u=(h,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(d),n(h,d)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),l}loadResources(e){var r,a;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:TC;const s=ct(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if((s==null?void 0:s.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const o=[],l=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(h=>{h!=="cimode"&&o.indexOf(h)<0&&o.push(h)})};s?l(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u=>l(u)),(a=(r=this.options.preload)==null?void 0:r.forEach)==null||a.call(r,c=>l(c)),this.services.backendConnector.load(o,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(c)})}else n(null)}reloadResources(e,t,n){const s=w_();return typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=TC),this.services.backendConnector.reload(e,t,r=>{s.resolve(),n(r)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&ade.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const s=w_();this.emit("languageChanging",e);const r=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,c)=>{c?(r(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,s.resolve(function(){return n.t(...arguments)}),t&&t(l,function(){return n.t(...arguments)})},o=l=>{var u,h;!e&&!l&&this.services.languageDetector&&(l=[]);const c=ct(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);c&&(this.language||r(c),this.translator.language||this.translator.changeLanguage(c),(h=(u=this.services.languageDetector)==null?void 0:u.cacheUserLanguage)==null||h.call(u,c)),this.loadResources(c,d=>{a(d,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),s}getFixedT(e,t,n){var s=this;const r=function(a,o){let l;if(typeof o!="object"){for(var c=arguments.length,u=new Array(c>2?c-2:0),h=2;h<c;h++)u[h-2]=arguments[h];l=s.options.overloadTranslationOptionHandler([a,o].concat(u))}else l={...o};l.lng=l.lng||r.lng,l.lngs=l.lngs||r.lngs,l.ns=l.ns||r.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||n||r.keyPrefix);const d=s.options.keySeparator||".";let p;return l.keyPrefix&&Array.isArray(a)?p=a.map(f=>`${l.keyPrefix}${d}${f}`):p=l.keyPrefix?`${l.keyPrefix}${d}${a}`:a,s.t(p,l)};return ct(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=n,r}t(){var s;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(s=this.translator)==null?void 0:s.translate(...t)}exists(){var s;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(s=this.translator)==null?void 0:s.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,r=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const c=this.services.backendConnector.state[`${o}|${l}`];return c===-1||c===0||c===2};if(t.precheck){const o=t.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(n,e)&&(!s||a(r,e)))}loadNamespaces(e,t){const n=w_();return this.options.ns?(ct(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{n.resolve(),t&&t(s)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=w_();ct(e)&&(e=[e]);const s=this.options.preload||[],r=e.filter(a=>s.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return r.length?(this.options.preload=s.concat(r),this.loadResources(a=>{n.resolve(),t&&t(a)}),n):(t&&t(),Promise.resolve())}dir(e){var s,r;if(e||(e=this.resolvedLanguage||(((s=this.languages)==null?void 0:s.length)>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=((r=this.services)==null?void 0:r.languageUtils)||new BY(zY());return t.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new z1(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:TC;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},r=new z1(s);if((e.debug!==void 0||e.prefix!==void 0)&&(r.logger=r.logger.clone(e)),["store","services","language"].forEach(o=>{r[o]=this[o]}),r.services={...this.services},r.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},n){const o=Object.keys(this.store.data).reduce((l,c)=>(l[c]={...this.store.data[c]},Object.keys(l[c]).reduce((u,h)=>(u[h]={...l[c][h]},u),{})),{});r.store=new DY(o,s),r.services.resourceStore=r.store}return r.translator=new oE(r.services,s),r.translator.on("*",function(o){for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];r.emit(o,...c)}),r.init(s,t),r.translator.options=s,r.translator.backendConnector.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const lr=z1.createInstance();lr.createInstance=z1.createInstance;lr.createInstance;lr.dir;lr.init;lr.loadResources;lr.reloadResources;lr.use;lr.changeLanguage;lr.getFixedT;lr.t;lr.exists;lr.setDefaultNamespace;lr.hasLoadedNamespace;lr.loadNamespaces;lr.loadLanguages;const UCt={code:"en-US",dateFnsLocale:UEe,Pagination:{pageSize:"Items per page: ${pageSize}",total:"Total pages: ${total}",jumpTo:"Jump to",page:" page"},Modal:{confirm:"Confirm",cancel:"Cancel"},Tabs:{more:"More"},TimePicker:{placeholder:{time:"Select time",timeRange:"Select a time range"},begin:"Start Time",end:"End Time",hour:"",minute:"",second:"",AM:"AM",PM:"PM"},DatePicker:{placeholder:{date:"Select date",dateTime:"Select date and time",dateRange:["Start date","End date"],dateTimeRange:["Start date","End date"],monthRange:["Start month","End month"]},presets:"Presets",footer:{confirm:"Confirm",cancel:"Cancel"},selectDate:"Select Date",selectTime:"Select Time",year:"year",month:"month",day:"day",monthText:"${month} ${year}",months:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},fullMonths:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},weeks:{Mon:"Mon",Tue:"Tue",Wed:"Wed",Thu:"Thu",Fri:"Fri",Sat:"Sat",Sun:"Sun"},localeFormatToken:{FORMAT_SWITCH_DATE:"MM/dd/yyyy"}},Popconfirm:{confirm:"Confirm",cancel:"Cancel"},Navigation:{collapseText:"Collapse Sidebar",expandText:"Expand Sidebar"},Table:{emptyText:"No Result",pageText:"Showing ${currentStart} to ${currentEnd} of ${total}",descend:"Click to descend",ascend:"Click to ascend",cancelSort:"Cancel sorting"},Select:{emptyText:"No Result",createText:"Create"},Cascader:{emptyText:"No Result"},Tree:{emptyText:"No Result",searchPlaceholder:"Search"},List:{emptyText:"No Result"},Calendar:{allDay:"All Day",AM:"${time} AM",PM:"${time} PM",datestring:"",remaining:"${remained} more"},Upload:{mainText:"Click to Upload File or Drag File to here",illegalTips:"This type of file is not supported",legalTips:"Release and start uploading",retry:"Retry",replace:"Replace File",clear:"Clear",selectedFiles:"Selected Files",illegalSize:"Illegal file size",fail:"Upload fail"},TreeSelect:{searchPlaceholder:"Search"},Typography:{copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Transfer:{emptyLeft:"No Data",emptySearch:"No search results",emptyRight:"No content, check from the left",placeholder:"Search",clear:"Clear",selectAll:"Select all",clearSelectAll:"Unselect all",total:"Total items: ${total}",selected:"Items selected: ${total}"},Form:{optional:"(optional)"},Image:{preview:"Preview",loading:"Loading",loadError:"Failed to load",prevTip:"Previous",nextTip:"Next",zoomInTip:"Zoom in",zoomOutTip:"Zoom out",rotateTip:"Rotate",downloadTip:"Download",adaptiveTip:"Adapt to the page",originTip:"Original size"},Chat:{deleteConfirm:"Are you sure you want to delete this session?",clearContext:"Context cleared",copySuccess:"Copy successful.",stop:"Stop",copy:"Copy",copied:"Copied",dropAreaText:"Put the file here"}},WCt="",GCt="",KCt="API",XCt="API",YCt="",qCt="",ZCt="",JCt="",QCt="",ewt="",twt="",iwt="",nwt="",swt="",rwt="",awt="",owt="",lwt="",cwt="",uwt="",hwt="",dwt="",pwt="",fwt="",gwt="",mwt="",ywt="HTTPS",_wt="HTTPS",vwt="HTTPSAPI",bwt="HTTPS",xwt="",Swt="",Cwt="",wwt="",Awt="",kwt="",Twt="",Ewt="",Pwt="",Owt="",Mwt="",Iwt="",Rwt="?",Lwt="",Dwt="",Fwt="",Bwt="",jwt="",Nwt="",$wt="",zwt="",Hwt="",Vwt="",Uwt="",Wwt="",Gwt="",Kwt="CTRL+ENTER",Xwt="",Ywt="",qwt="",Zwt="",Jwt="IP",Qwt=",IPHTTPSAPI",eAt="",tAt="",iAt="",nAt="",sAt="UI ",rAt=",",aAt="",oAt="",lAt="",cAt="",uAt="",hAt="",dAt="UI",pAt="",fAt="PC",gAt="",mAt=".",yAt="",_At="APIAPI",vAt="HTTP",bAt="HTTPS",xAt=" IP:  (https/http)",SAt="HTTPSHTTPS",CAt="HTTPS",wAt="",AAt="HTTPS",kAt="HTTPSHTTPS",TAt=" Google Chrome  Gemini nano AI AI  Google  CCRS  Google  CCRS ",EAt="",PAt="",OAt=" AI",MAt=" Google ",IAt="",RAt=" AI ",LAt="Gemini for chrome ",DAt="Chrome For Android, Chrome for IOS, Chrome for Chrome OS  ",FAt=" Chrome  22 GB 10 GB",BAt="()",jAt="6GB",NAt="",$At="Chrome",zAt="/",HAt="",VAt="",UAt="UI ",WAt="",GAt="HTTPS",KAt="",XAt="",YAt="",qAt="",ZAt="",JAt={About:WCt,Advanced_Settings:GCt,API_Settings:KCt,API_port:XCt,AppInfo:YCt,"AI Setting":"AI",App_name:qCt,Base_Settings:ZCt,Build_time:JCt,Change_Settings:QCt,Check_logs:ewt,Comment:twt,Console:iwt,Copy:nwt,"Copy successful":"","Click to see more information about AI":"AI","Copy failed":"",Cut:swt,"Cut successful":"","Cut failed":"","Close navigation":"",close_all_notify:rwt,content:awt,Del_pic:owt,Done:lwt,"data source":"",Enter_filter_value:cwt,Event:uwt,Event_list:hwt,Failed_OCR:dwt,Failed_save:pwt,Find_E_by_filter:fwt,Get_pic:gwt,"Generative AI operational requirements":"AI",Home:mwt,HTTPS_Service:ywt,HTTPS_Service_Setting:_wt,HTTPS_settings_API_settings:vwt,Https_state:bwt,"Increase productivity with Gemini built into Chrome":"ChromeGemini",Log_control:xwt,Log_download:Swt,Log_viewer:Cwt,Log_viewer_text:wwt,Logs_count:Awt,Logs_count_text:kwt,Logs_error_count:Twt,Logs_error_count_text:Ewt,Logs_success_count:Pwt,Logs_success_count_text:Owt,Logs_warning_count:Mwt,Logs_warning_count_text:Iwt,Look_other_set:Rwt,More_info:Lwt,New_settings_page:Dwt,NotifyCenter:Fwt,No_notifications_available:Bwt,New_Notify_Send:jwt,Pic_info:Nwt,Paste:$wt,"Paste successful":"","Paste failed":"",Recover:zwt,Refresh:Hwt,Remarks:Vwt,Restore_default_settings:Uwt,Result:Wwt,Roughly_browse:Gwt,"Regional language":"","Switch page":"",Run_command_shortcut:Kwt,"Received a message from the server":"","Refer also to Built_AI":"Build_AI",Save_change:Xwt,Save_setting:Ywt,Send:qwt,Send_start:Zwt,Server_IP:Jwt,"Server Status Check":"",Server_connection_failed:Qwt,Server_connection_successful:eAt,Settings:tAt,Start_OCR:iAt,Success_OCR_Text:nAt,Success_change_UI:sAt,Success_save_set:rAt,Test_can_use:aAt,Theme_auto:oAt,Theme_color:lAt,Theme_dark:cAt,Theme_light:uAt,Time:hAt,Tip_Log_View_info:dAt,Tip_can_recover_set:pAt,Tip_cannot_support_your_device:fAt,Tip_loss_all_set:gAt,Tip_new_set_default_is_on:mAt,Tip_please_turn_off:yAt,Tip_seem_api:_At,Tip_send_by_http:vAt,Tip_send_by_https:bAt,Tip_server_ip:xAt,Tip_try_off_https:SAt,Tip_unknow_http_service:CAt,Tip_update_state:wAt,Tip_you_need_open_https:AAt,Tip_you_open_https:kAt,Tip_AI_Page_1:TAt,Tip_AI_Page_2_1:EAt,Tip_AI_Page_2_2:PAt,Tip_AI_Page_2_3:OAt,Tip_AI_Page_3:MAt,Tip_AI_Page_4_1:IAt,Tip_AI_Page_4_2:RAt,Tip_AI_require_1:LAt,Tip_AI_require_2:DAt,Tip_AI_require_Disk:FAt,Tip_AI_require_GPU:BAt,Tip_AI_require_GPU_M:jAt,Tip_AI_require_Network:NAt,"OS version":"","Browser Support":"",minChromeVersion:$At,Storage:zAt,"Video RAM":"","Network connection":"",Toggle_display_language:HAt,Type:VAt,UI_set:UAt,Upload_pic:WAt,"Use the built-in right-click menu":"",Use_https:GAt,"Using Generative AI":"AI",Visit_official:KAt,View:XAt,View_all_info:YAt,Vision:qAt,Warning:ZAt},QAt="About",ekt="Advanced Settings",tkt="API Settings",ikt="API Port",nkt="Application Information",skt="Application Name",rkt="Basic Settings",akt="Build Time",okt="Modify Settings",lkt="Copy",ckt="Cut",ukt="Close all notify",hkt="View Logs",dkt="Comment",pkt="Console",fkt="Content",gkt="Clear Pictures",mkt="Done",ykt="Enter Filter Value",_kt="Event",vkt="Event List",bkt="Text Recognition Failed",xkt="Save failed.",Skt="Locate Errors via Filter",Ckt="Retrieve Picture",wkt="Home",Akt="HTTPS Status",kkt="HTTPS Service",Tkt="HTTPS Service Settings",Ekt="HTTPS and API Settings",Pkt="Log operation",Okt="Download log",Mkt="Log Viewer",Ikt="View all frontend log information.",Rkt="Log Count",Lkt="The total number of detected events.",Dkt="Error Events",Fkt="Indicates the number of events that failed and impacted the system. Pay close attention to these.",Bkt="Successful Events",jkt="Indicates the number of events that were successfully completed without errors.",Nkt="Warning Events",$kt="Indicates events completed with errors but didn't affect core functionality.",zkt="Looking for other settings?",Hkt="Detailed Info",Vkt="New Settings Page",Ukt="Notify Center",Wkt="No notifications available",Gkt="New Notify",Kkt="Uploaded Picture Info",Xkt="Paste",Ykt="Restore Default Settings",qkt="Refresh page",Zkt="Remarks",Jkt="Restore Default Settings",Qkt="Result",eTt="Roughly Browse",tTt="Press CTRL+ENTER to execute the command.",iTt="Confirm Save Changes?",nTt="Save Settings",sTt="Send",rTt="Send Processing Request",aTt="Server IP",oTt="Server connection failed, please check if the server IP has changed or check the advanced settings for HTTPS and API settings",lTt="Server connection successful",cTt="Settings",uTt="Start Recognition",hTt="Recognized Text",dTt="UI Change Successful",pTt="Settings saved successfully. Refresh the page to apply.",fTt="Test Connectivity",gTt="Auto Switch",mTt="Theme Color",yTt="Dark Mode",_Tt="Light Mode",vTt="Quickly view the UI and current server status.",bTt="The components used on this page are incompatible with your device. Please switch to a PC for better viewing.",xTt="You can restore default settings anytime.",STt="You will lose all saved settings.",CTt="Default is enabled. After enabling, use the enhanced settings page. Refresh the page to apply.",wTt="After switching,",ATt="Ensure the server API matches the API set on this page, otherwise the connection will fail.",kTt="The information will be sent using HTTP.",TTt="The information will be sent using HTTPS.",ETt="Typically in the format IP:Port or domain name (https/http cannot be omitted).",PTt="You can turn off HTTPS service first. If the website works properly, it means the server doesn't support HTTPS, otherwise enable it.",OTt="Not sure if the server has HTTPS enabled?",MTt="update the settings.",ITt="If the server supports HTTPS, please enable this option.",RTt="Ensure the server you are linking to supports HTTPS. If it doesn't, communication with the server will fail.",LTt="These features rely on Gemini nano AI built into Google Chrome and are experimental. When using AI, you may receive incorrect or objectionable information. This information is not controlled by Google and CCRS and does not represent the views of Google and CCRS.",DTt="Please ensure that generative artificial intelligence is enabled when the device meets the",FTt="configuration requirements,",BTt="otherwise the corresponding entry will not appear",jTt="This data is not sent to Google or other servers, and all calculations are completed on your device.",NTt="Before Using these features Please adhere to the",$Tt=" Generative AI Use Restrictions Policy",zTt="These are not necessarily the final requirements for Gemini Nano in Chrome.",HTt="Not yet supported: Chrome for Android, Chrome for iOS, Chrome for ChromeOS, Other Browser",VTt="At least 22 GB on the volume that contains your Chrome profile. Note that the model requires a lot less storage, its just for the sake of having an ample storage margin. If after the download the available storage space falls below 10 GB, the model will be deleted again.",UTt="Integrated GPU, or discrete GPU (e.g. video card).",WTt="6 GB (minimum)",GTt="A non-metered connection",KTt="minChromeVersion",XTt="Storage",YTt="Type",qTt="Toggle display language",ZTt="Upload Picture",JTt="UI Settings",QTt="Use HTTPS",eEt="Visit Official Website",tEt="View",iEt="Overview",nEt="Recognition System",sEt="Warning",rEt={About:QAt,Advanced_Settings:ekt,API_Settings:tkt,API_port:ikt,AppInfo:nkt,App_name:skt,"AI Setting":"AI Setting",Base_Settings:rkt,Build_time:akt,Change_Settings:okt,"Close navigation":"Close navigation",Copy:lkt,"Click to see more information about AI":"Click to see more information about AI","Copy successful":"Copy successful","Copy failed":"Copy failed",Cut:ckt,"Cut failed":"Cut failed","Cut successful":"Cut successful",close_all_notify:ukt,Check_logs:hkt,Comment:dkt,Console:pkt,content:fkt,Del_pic:gkt,Done:mkt,"data source":"Data source",Enter_filter_value:ykt,Event:_kt,Event_list:vkt,Failed_OCR:bkt,Failed_save:xkt,Find_E_by_filter:Skt,Get_pic:Ckt,"Generative AI operational requirements":"Generative AI operational requirements",Home:wkt,Https_state:Akt,HTTPS_Service:kkt,HTTPS_Service_Setting:Tkt,HTTPS_settings_API_settings:Ekt,"Increase productivity with Gemini built into Chrome":"Increase productivity with Gemini built into Chrome",Log_control:Pkt,Log_download:Okt,Log_viewer:Mkt,Log_viewer_text:Ikt,Logs_count:Rkt,Logs_count_text:Lkt,Logs_error_count:Dkt,Logs_error_count_text:Fkt,Logs_success_count:Bkt,Logs_success_count_text:jkt,Logs_warning_count:Nkt,Logs_warning_count_text:$kt,Look_other_set:zkt,More_info:Hkt,New_settings_page:Vkt,NotifyCenter:Ukt,No_notifications_available:Wkt,New_Notify_Send:Gkt,Pic_info:Kkt,Paste:Xkt,"Paste successful":"Paste successful","Paste failed":"Paste failed",Recover:Ykt,Refresh:qkt,Remarks:Zkt,Restore_default_settings:Jkt,Result:Qkt,Roughly_browse:eTt,Run_command_shortcut:tTt,"Regional language":"Regional language","Received a message from the server":"Received a message from the server","Refer also to Built_AI":"For information on how to open and use Build-in AI, please go to the following article",Save_change:iTt,Save_setting:nTt,Send:sTt,Send_start:rTt,"Switch page":"Switch page",Server_IP:aTt,"Server Status Check":"Server Status Check",Server_connection_failed:oTt,Server_connection_successful:lTt,Settings:cTt,Start_OCR:uTt,Success_OCR_Text:hTt,Success_change_UI:dTt,Success_save_set:pTt,Test_can_use:fTt,Theme_auto:gTt,Theme_color:mTt,Theme_dark:yTt,Theme_light:_Tt,Tip_Log_View_info:vTt,Tip_cannot_support_your_device:bTt,Tip_can_recover_set:xTt,Tip_loss_all_set:STt,Tip_new_set_default_is_on:CTt,Tip_please_turn_off:wTt,Tip_seem_api:ATt,Tip_send_by_http:kTt,Tip_send_by_https:TTt,Tip_server_ip:ETt,Tip_try_off_https:PTt,Tip_unknow_http_service:OTt,Tip_update_state:MTt,Tip_you_need_open_https:ITt,Tip_you_open_https:RTt,Tip_AI_Page_1:LTt,Tip_AI_Page_2_1:DTt,Tip_AI_Page_2_2:FTt,Tip_AI_Page_2_3:BTt,Tip_AI_Page_3:jTt,Tip_AI_Page_4_1:NTt,Tip_AI_Page_4_2:$Tt,Tip_AI_require_1:zTt,Tip_AI_require_2:HTt,Tip_AI_require_Disk:VTt,Tip_AI_require_GPU:UTt,Tip_AI_require_GPU_M:WTt,Tip_AI_require_Network:GTt,"OS version":"OS version","Browser Support":"Browser Support",minChromeVersion:KTt,Storage:XTt,"Video RAM":"Video RAM","Network connection":"Network connection",Type:YTt,Toggle_display_language:qTt,Upload_pic:ZTt,UI_set:JTt,Use_https:QTt,"Use the built-in right-click menu":"Use the built-in right-click menu","Using Generative AI":"Using Generative AI",Visit_official:eEt,View:tEt,View_all_info:iEt,Vision:nEt,Warning:sEt};lr.use(RSt).init({resources:{en:{translation:rEt},zh:{translation:JAt}},lng:Ff()===1?"zh":"en",fallbackLng:"zh",interpolation:{escapeValue:!1}});const aEt=Ff()===1?Xw:UCt;vr.createRoot(document.getElementById("root")).render(N.jsx(H.StrictMode,{children:N.jsx(vN,{locale:aEt,children:N.jsx(ACt,{})})}));
