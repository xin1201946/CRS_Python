import{r as e,j as s,P as t,z as a}from"./index-CCsViYEm.js";import{C as r,S as l}from"./index-BI5xKCkj.js";import{D as n}from"./index-CoWGG1Mh.js";import{P as o}from"./index-JT-Bmx7K.js";import{T as i,a as c}from"./index-C4uoQKnu.js";import{O as d}from"./AppContent-DzAY2IDB.js";import{V as p}from"./VChart-jgLG29LE.js";import"./index-D05P_SgG.js";import"./pick-CcpBOeoj.js";import"./localeConsumer-BEiTkOj7.js";import"./isPlainObject-Dm5b2ZIv.js";import"./index-D7TaNYTJ.js";function m({mainColor:t="#6366f1",backgroundColors:a="rgb(60, 60, 60)",icon:r="",title:l="Processor",content:n="Intel(R) Core(TM) i5-7400 CPU",percentage:o=22,usageLabel:i="PROCESSOR USAGE",bottomStats:c={left:"4 Cores",center:"1.6 GHz",right:"64-bit"}}){const[d,p]=e.useState(0);return e.useEffect((()=>{const e=setInterval((()=>{p((s=>s<o?s+1:s>o?s-1:(clearInterval(e),s)))}),20);return()=>clearInterval(e)}),[o]),s.jsxs("div",{className:"w-full max-w-md rounded-lg overflow-hidden",style:{backgroundColor:a},children:[s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex items-center justify-center",style:{backgroundColor:t},children:s.jsx("img",{src:r,alt:"Icon",className:"w-8 object-cover"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-white text-lg font-medium",children:l}),s.jsx("p",{className:"text-gray-300 text-sm",children:n})]})]}),s.jsxs("div",{className:"text-right mb-4",children:[s.jsxs("div",{className:"relative inline-block",children:[s.jsx("span",{className:"text-gray-500 text-6xl font-bold absolute left-0",children:"0"}),s.jsx("span",{className:"text-white text-6xl font-bold ml-8",children:d}),s.jsx("span",{className:"text-white text-4xl font-bold",children:"%"})]}),s.jsx("br",{}),s.jsxs("div",{className:"mt-2",style:{float:"right"},children:[s.jsx("p",{className:"text-gray-400 text-sm tracking-wider mb-2",children:i}),s.jsx("div",{className:"h-1 bg-gray-700 rounded-full w-32 mx-auto",children:s.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${d}%`,backgroundColor:t}})})]})]})]}),s.jsx("br",{}),s.jsxs("div",{className:"grid grid-cols-3 text-center py-3",style:{backgroundColor:t},children:[s.jsx("div",{className:"text-white border-r border-white/20",children:c.left}),s.jsx("div",{className:"text-white border-r border-white/20",children:c.center}),s.jsx("div",{className:"text-white",children:c.right})]})]})}function u(){const[t,u]=e.useState([]),[h,x]=e.useState(0),[j,g]=e.useState(""),[v,y]=e.useState(0),[b,f]=e.useState([]),[k,N]=e.useState([]),[S,w]=e.useState(0),[C,M]=e.useState(""),[P,I]=e.useState({}),[_,T]=e.useState({}),[O,B]=e.useState(""),[D,F]=e.useState("Waiting"),[G,R]=e.useState(""),[U,A]=e.useState(0),[K,E]=e.useState(0),[V,z]=e.useState(""),[W,L]=e.useState({version:"Unknown",released:"",RepairNumber:""}),[H,J]=e.useState(""),[$,q]=e.useState("");e.useEffect((()=>{const e=setInterval((()=>{(e=>{try{if("object"!=typeof e||null===e)return;for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s))switch(s){case"cpu_name":g(e[s]||"");break;case"currentTime":u(e[s]||[]);break;case"userCount":x(e[s]||0);break;case"cpuCount":y(e[s]||0);break;case"cpuPercent":f(Array.isArray(e[s])?e[s]:[]);break;case"memPercent":N(Array.isArray(e[s])?e[s]:[]);break;case"memTotal":w(e[s]||0);break;case"externalIp":M(e[s]||"");break;case"gpu":I(e[s]||{});break;case"hostname":B(e[s]||"");break;case"serverInfo":F("string"==typeof e[s]?e[s]:"Invalid data");break;case"platform":R(e[s]||"");break;case"swapTotal":A(e[s]||0);break;case"swapPercent":E(e[s]||0);break;case"runTime":z(e[s]||"");break;case"python":L(e[s]||{version:"Unknown",released:"",RepairNumber:""});break;case"network":T(Object.values(e[s]).filter((e=>!0===e.is_up)))}}catch(s){}})(d())}),1e3);return()=>clearInterval(e)}),[]);const Q={type:"area",stack:!0,title:{visible:!0,text:a("CPU usage")+(b[b.length-1]||0)+"%"},xField:"type",yField:"value",line:{style:{curveType:"monotone"}},seriesField:"country",legends:{visible:!0},tooltip:{dimension:{updateContent:e=>{let s=0;return e.forEach((e=>{s+=+e.value})),e.push({hasShape:"false",key:"Total",value:s}),e}}}},X={type:"area",stack:!0,title:{visible:!0,text:a("memory usage")+(k[k.length-1]||0)+"%"},xField:"type",yField:"value",line:{style:{curveType:"monotone"}},seriesField:"country",legends:{visible:!0},tooltip:{dimension:{updateContent:e=>{let s=0;return e.forEach((e=>{s+=+e.value})),e.push({hasShape:"false",key:"Total",value:s}),e}}}},Y=b.length>0?b:[[]],Z=k.length>0?k:[[]],ee=t.length>0?t:[[]],se={values:Y.map(((e,s)=>({type:ee[s],value:e})))},te={values:Z.map(((e,s)=>({type:ee[s],value:e})))},ae=[{key:a("OS version"),value:G},{key:a("Computer_Name"),value:O},{key:a("Server_IP"),value:C},{key:a("connected device"),value:h,span:3},{key:a("CPU core count"),value:v,span:3},{key:a("Mem total"),value:S,span:3},{key:a("server runtime"),value:V,span:3},{key:a("Swap total"),value:U,span:3},{key:a("Server Info"),value:"object"==typeof D?JSON.stringify(D):D,span:3}],re=[{key:a("Python Version"),value:W.version},{key:a("released"),value:W.released},{key:a("RepairNumber"),value:W.RepairNumber}],le=()=>P&&0!==Object.keys(P).length?s.jsx(i,{type:"line",activeKey:""===H?"0":H,onChange:e=>{J(e)},children:Object.keys(P).map((e=>{const t=P[e];return s.jsx(c,{tab:"GPU "+t.id,itemKey:e,children:s.jsxs(l,{align:"start",style:{margin:"5px"},className:"scroll-auto",children:[s.jsx(o,{percent:isNaN(Math.floor(t.load))?0:Math.floor(t.load),strokeWidth:10,type:"circle",style:{margin:5},format:e=>e+"%","aria-label":"gpu usage",showInfo:!0}),s.jsxs("div",{children:[s.jsxs("p",{children:[a("Name"),": ",t.name]}),s.jsxs("p",{children:[a("Driver version"),": ",t.driver]}),s.jsxs("p",{children:[a("Video RAM"),": ",isNaN(Math.floor(t.memory_total))?0:Math.floor(t.memory_total)," GB"]}),s.jsxs("p",{children:[a("Video memory used"),": ",isNaN(Math.floor(t.memory_used))?0:Math.floor(t.memory_used)," GB"]}),s.jsxs("p",{children:[a("Video memory available"),": ",isNaN(Math.floor(t.memory_free))?0:Math.floor(t.memory_free)," GB"]}),s.jsxs("p",{children:[a("memory usage"),": ",isNaN(Math.floor(t.memory_percent))?0:Math.floor(t.memory_percent),"%"]}),s.jsxs("p",{children:[a("Temperature"),": ",t.temperature," °C"]}),s.jsxs("p",{children:[a("Graphics load"),": ",isNaN(Math.floor(t.load))?0:Math.floor(t.load),"%"]})]})]})},t.id)}))}):s.jsx("div",{children:"正在加载GPU信息..."});function ne(){const e=e=>e<1024?e+"KB/s":e<1048576?(e/1024).toFixed(1)+"MB/s":(e/1024/1024).toFixed(2)+"GB/s";return _&&0!==Object.keys(_).length?s.jsx(i,{type:"line",tabPosition:"left",activeKey:""===$?"0":$,onChange:e=>{q(e)},children:Object.keys(_).map((t=>{const r=_[t];return s.jsx(c,{tab:r.name,itemKey:t,children:s.jsx(l,{align:"start",children:s.jsxs("p",{children:[s.jsxs("p",{children:[a("Name"),": ",r.name]}),s.jsxs("p",{children:[a("Upload Speed"),": ",e(r.speed.upload_speedKBps)]}),s.jsxs("p",{children:[a("Download Speed"),": ",e(r.speed.download_speedKBps)]}),s.jsxs("p",{children:[a("Total Speed"),": ",e(r.speed.total_speedKBps)]}),s.jsxs("p",{children:[a("Total rate"),": ",r.speed.utilization," %"]}),s.jsxs("p",{children:["ipv4: ",r.ipv4]}),s.jsxs("p",{children:["ipv6: ",r.ipv6]})]})})},t)}))}):s.jsx("div",{children:"正在加载网卡信息..."})}return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 p-6",children:[s.jsxs("div",{className:"col-span-2 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsx(m,{mainColor:"#6366f1",content:j,icon:"./processor.webp",backgroundColor:"#2D2D2D",percentage:parseInt(b[b.length-1]||0),bottomStats:{left:v+" Cores",center:h+" Devices",right:"64-bit"}}),s.jsx(m,{mainColor:"orange",backgroundColor:"#2D2D2D",icon:"./memory.webp",title:"Memory",content:G,percentage:parseInt(k[k.length-1]||0),bottomStats:{left:(S/1024).toFixed(1)+" GiB RAM",center:"64-bit",right:V}}),s.jsx(r,{className:"col-span-2 lg:col-span-1",title:"Swap",children:s.jsx(o,{percent:K,strokeWidth:10,type:"circle",style:{margin:5},format:e=>e+"%","aria-label":"swap usage",showInfo:!0})}),s.jsx(r,{className:"col-span-2 lg:col-span-1",title:"Python",children:s.jsx(n,{layout:"vertical",align:"plain",data:re,column:4})}),s.jsx(r,{className:"col-span-2 lg:col-span-1",title:"Network",children:s.jsx(ne,{})}),s.jsx(r,{className:"col-span-2 lg:col-span-1",children:s.jsx(le,{})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsx("div",{className:"col-span-2 lg:col-span-1",children:s.jsx(p,{spec:{...Q,data:se},option:{mode:"desktop-browser"}})}),s.jsx("div",{className:"col-span-2 lg:col-span-1",children:s.jsx(p,{spec:{...X,data:te},option:{mode:"desktop-browser"}})})]})]}),s.jsx("div",{className:"lg:col-span-1",children:s.jsx(r,{className:"w-full",title:a("Server detail"),children:s.jsx(n,{layout:"vertical",align:"plain",data:ae,column:4})})})]})})}m.propTypes={mainColor:t.string,backgroundColors:t.string,icon:t.string,title:t.string,content:t.string,percentage:t.number,usageLabel:t.string,bottomStats:t.shape({left:t.string,center:t.string,right:t.string})};export{u as default};
