import{B as e,z as t,A as i,D as s,F as n,R as o,N as a,Y as l,Z as r,P as c,K as d,H as p,$ as h,r as u,g as m,o as f,j as g,a0 as x,t as _,s as b,a1 as y,a2 as C}from"./index-CiQzaChg.js";import{B as j}from"./index-BkocQc-7.js";import{B as v,_ as k,L as S}from"./index-DAldieki.js";import{C as P}from"./index-DGV8NlRW.js";import{F as T}from"./index-CIVc8U6F.js";import{i as O}from"./isPromise-Bw3YL3VT.js";import{P as w,T as E}from"./index-CpoOHKow.js";import{S as R}from"./index-xa6R1Qjp.js";import{S as V}from"./index-BRjotAfv.js";import{u as I}from"./useTranslation-BGT4VW5o.js";import"./keyCode-BPRnlZ-b.js";import"./IconClear-Drn29lcF.js";import"./index-Wgo1-T_w.js";const N={PREFIX:`${e}-popconfirm`,POPOVER:`${e}-popconfirm-popover`};class B extends t{init(){}destroy(){}handleCancel(e){const t=this._adapter.notifyCancel(e);O(t)?(this._adapter.updateCancelLoading(!0),t.then((e=>{this.handleVisibleChange(!1),this._adapter.updateCancelLoading(!1)}),(e=>{this._adapter.updateCancelLoading(!1)}))):this.handleVisibleChange(!1)}handleConfirm(e){const t=this._adapter.notifyConfirm(e);O(t)?(this._adapter.updateConfirmLoading(!0),t.then((e=>{this._adapter.updateConfirmLoading(!1),this.handleVisibleChange(!1)}),(e=>{this._adapter.updateConfirmLoading(!1)}))):this.handleVisibleChange(!1)}handleClickOutSide(e){this._adapter.notifyClickOutSide(e)}handleVisibleChange(e){this._isControlledComponent("visible")||this._adapter.setVisible(e),e?this.handleFocusOperateButton():this._adapter.focusPrevFocusElement(),this._adapter.notifyVisibleChange(e)}handleFocusOperateButton(){const{cancelButtonProps:e,okButtonProps:t}=this._adapter.getProps();i(e,"autoFocus")&&!i(e,"disabled")?this._adapter.focusCancelButton():i(t,"autoFocus")&&!i(t,"disabled")&&this._adapter.focusOkButton()}}class F extends s{constructor(e){super(e),this.handleCancel=e=>this.foundation.handleCancel(e&&e.nativeEvent),this.handleConfirm=e=>this.foundation.handleConfirm(e&&e.nativeEvent),this.handleVisibleChange=e=>this.foundation.handleVisibleChange(e),this.handleClickOutSide=e=>this.foundation.handleClickOutSide(e),this.stopImmediatePropagation=e=>e&&e.nativeEvent&&e.nativeEvent.stopImmediatePropagation(),this.renderConfirmPopCard=e=>{let{initialFocusRef:t}=e;const{content:i,title:s,className:l,style:r,cancelType:c,icon:d,prefixCls:p,showCloseIcon:h}=this.props,{direction:u}=this.context,m=n(p,l,{[`${p}-rtl`]:"rtl"===u}),f=null!=s,g=!(null==i),x=o.isValidElement(d),_=n({[`${p}-body`]:!0,[`${p}-body-withIcon`]:x});return o.createElement("div",{className:m,onClick:this.stopImmediatePropagation,style:r},o.createElement("div",{className:`${p}-inner`},o.createElement("div",{className:`${p}-header`},x?o.createElement("i",{className:`${p}-header-icon`,"x-semi-prop":"icon"},d):null,o.createElement("div",{className:`${p}-header-body`},f?o.createElement("div",{className:`${p}-header-title`,"x-semi-prop":"title"},s):null),h?o.createElement(v,{className:`${p}-btn-close`,icon:o.createElement(a,null),size:"small",theme:"borderless",type:c,onClick:this.handleCancel}):null),g?o.createElement("div",{className:_,"x-semi-prop":"content"},k(i)?i({initialFocusRef:t}):i):null,o.createElement("div",{className:`${p}-footer`,ref:this.footerRef},this.renderControls())))},this.state={cancelLoading:!1,confirmLoading:!1,visible:e.defaultVisible||!1},this.foundation=new B(this.adapter),this.footerRef=o.createRef(),this.popoverRef=o.createRef()}static getDerivedStateFromProps(e,t){const i={},{hasOwnProperty:s}=Object.prototype;return s.call(e,"visible")&&(i.visible=e.visible),i}get adapter(){return Object.assign(Object.assign({},super.adapter),{setVisible:e=>this.setState({visible:e}),updateConfirmLoading:e=>this.setState({confirmLoading:e}),updateCancelLoading:e=>this.setState({cancelLoading:e}),notifyConfirm:e=>this.props.onConfirm(e),notifyCancel:e=>this.props.onCancel(e),notifyVisibleChange:e=>this.props.onVisibleChange(e),notifyClickOutSide:e=>this.props.onClickOutSide(e),focusCancelButton:()=>{var e,t;const i=null===(t=null===(e=this.footerRef)||void 0===e?void 0:e.current)||void 0===t?void 0:t.querySelector("[data-type=cancel]");null==i||i.focus({preventScroll:!0})},focusOkButton:()=>{var e,t;const i=null===(t=null===(e=this.footerRef)||void 0===e?void 0:e.current)||void 0===t?void 0:t.querySelector("[data-type=ok]");null==i||i.focus({preventScroll:!0})},focusPrevFocusElement:()=>{var e;null===(e=this.popoverRef.current)||void 0===e||e.focusTrigger()}})}renderControls(){const{okText:e,cancelText:t,okType:s,cancelType:n,cancelButtonProps:a,okButtonProps:r}=this.props,{cancelLoading:c,confirmLoading:d}=this.state;return o.createElement(S,{componentName:"Popconfirm"},((p,h)=>o.createElement(o.Fragment,null,o.createElement(v,Object.assign({"data-type":"cancel",type:n,onClick:this.handleCancel,loading:c},l(a,"autoFocus")),t||i(p,"cancel")),o.createElement(v,Object.assign({"data-type":"ok",type:s,theme:"solid",onClick:this.handleConfirm,loading:d},l(r,"autoFocus")),e||i(p,"confirm")))))}render(){const{direction:e}=this.context,t="rtl"===e?"bottomRight":"bottomLeft",i=this.props,{className:s,prefixCls:n,disabled:a,children:l,style:r,position:c=t}=i,d=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(i,["className","prefixCls","disabled","children","style","position"]);if(a)return l;const{visible:p}=this.state,h={onVisibleChange:this.handleVisibleChange,className:N.POPOVER,onClickOutSide:this.handleClickOutSide};return this.isControlled("visible")&&(h.trigger="custom"),o.createElement(w,Object.assign({ref:this.popoverRef},d,{content:e=>{let{initialFocusRef:t}=e;return this.renderConfirmPopCard({initialFocusRef:t})},visible:p,position:c},h),l)}}function L(){const{t:e}=I(),[t,i]=u.useState("true"===m("use_https")),{Text:s}=E,n=f();return g.jsxs(g.Fragment,{children:[g.jsxs(P,{id:"HTTPS_Service_Setting",header:g.jsx(s,{children:e("HTTPS_Service_Setting")}),children:[g.jsx(j,{fullMode:!1,type:"info",bordered:!0,icon:null,closeIcon:null,title:g.jsx("div",{style:{fontWeight:600,fontSize:"14px",lineHeight:"20px"},children:e("Tip_unknow_http_service")}),description:g.jsxs("div",{children:[e("Tip_try_off_https"),g.jsx("br",{})," ",e("Tip_please_turn_off"),g.jsx(s,{link:{href:window.location},children:e("Refresh")}),e("Tip_update_state")]})}),g.jsx("br",{}),g.jsxs(R,{children:[e("Use_https"),g.jsx(w,{showArrow:!0,position:"top",content:g.jsx("article",{children:(m("use_https"),e("Tip_you_open_https"))}),children:g.jsx(x,{style:{color:"var(--semi-color-primary)"}})}),g.jsx(V,{checked:t,onChange:e=>{i(e),b("use_https",e)},"aria-label":""})]}),g.jsx("br",{}),g.jsx("br",{}),g.jsxs(R,{children:[e("Https_state")," ",m("use_https"),g.jsx(w,{showArrow:!0,position:"top",content:g.jsx("article",{children:"true"===m("use_https")?e("Tip_send_by_https"):e("Tip_send_by_http")}),children:g.jsx(x,{style:{color:"var(--semi-color-primary)"}})})]})]}),g.jsx("br",{}),g.jsxs(P,{id:"API_Settings",header:g.jsx(s,{children:e("API_Settings")}),children:[g.jsx(j,{fullMode:!1,icon:null,type:"danger",bordered:!0,closeIcon:null,title:g.jsxs("div",{style:{fontWeight:600,fontSize:"14px",lineHeight:"20px"},children:["âš  ",e("Warning")]}),description:g.jsxs("div",{children:[e("Tip_seem_api"),g.jsx("br",{})," ",e("Tip_please_turn_off"),g.jsx(s,{link:{href:window.location},children:e("Refresh")}),e("Tip_update_state")]}),children:g.jsxs("div",{className:"semi-modal-footer",children:[g.jsx(F,{title:e("Save_change"),content:e("Tip_can_recover_set"),position:"bottomRight",onConfirm:()=>{const e={api_upload:document.getElementById("upload").value,api_clear:document.getElementById("clear").value,api_start:document.getElementById("start").value,api_test:document.getElementById("test").value};y(e),window.location.reload()},children:g.jsx(v,{className:"semi-button semi-button-tertiary semi-button-light",type:"button",children:e("Save_setting")})}),g.jsx(F,{title:e("Save_change"),content:e("Tip_loss_all_set"),position:"bottomRight",onConfirm:()=>{C(),window.location.reload()},children:g.jsx(v,{className:"semi-button semi-button-warning",type:"button",children:e("Restore_default_settings")})})]})}),g.jsx("br",{}),g.jsxs(R,{id:"api_input_box",vertical:!0,align:"left",children:[g.jsxs(R,{spacing:"medium",children:[g.jsx(s,{style:{width:"50%"},children:e("Upload_pic")}),g.jsx(T,{id:"upload",style:{width:"50%"},defaultValue:_("upload")})]}),g.jsxs(R,{spacing:"medium",children:[g.jsx(s,{style:{width:"50%"},children:e("Del_pic")}),g.jsx(T,{id:"clear",style:{width:"50%"},defaultValue:_("clear")})]}),g.jsxs(R,{spacing:"medium",children:[g.jsx(s,{style:{width:"50%"},children:e("Send_start")}),g.jsx(T,{id:"start",style:{width:"50%"},defaultValue:_("start")})]}),g.jsxs(R,{spacing:"medium",children:[g.jsx(s,{style:{width:"50%"},children:e("Test_can_use")}),g.jsx(T,{id:"test",style:{width:"50%"},defaultValue:_("test")})]})]})]}),g.jsx("br",{}),g.jsx(P,{style:{backgroundColor:"var( --semi-color-fill-0)"},children:g.jsxs(R,{spacing:"medium",vertical:!0,align:"left",children:[g.jsx(s,{style:{fontSize:"medium",fontWeight:"bold",color:"var( --semi-color-text-2)"},children:e("Look_other_set")}),g.jsx(s,{onClick:()=>{n("/settings/basic#server_ip")},style:{color:"var( --semi-color-link)",cursor:"pointer"},children:e("Server_IP")}),g.jsx(s,{onClick:()=>{n("/settings/basic#theme_color")},style:{color:"var( --semi-color-link)",cursor:"pointer"},children:e("Theme_color")}),g.jsx(s,{onClick:()=>{n("/settings/basic#ui_set")},style:{color:"var( --semi-color-link)",cursor:"pointer"},children:e("UI_set")}),g.jsx(s,{onClick:()=>{n("/settings/log")},style:{color:"var( --semi-color-link)",cursor:"pointer"},children:e("Log_viewer")})]})}),g.jsx("br",{})]})}F.contextType=r,F.propTypes={motion:c.oneOfType([c.bool,c.func,c.object]),disabled:c.bool,content:c.oneOfType([c.node,c.func]),title:c.any,prefixCls:c.string,className:c.string,style:c.object,icon:c.node,okText:c.string,okType:c.string,cancelText:c.string,cancelType:c.string,onCancel:c.func,onConfirm:c.func,onClickOutSide:c.func,onVisibleChange:c.func,visible:c.bool,defaultVisible:c.bool,okButtonProps:c.object,cancelButtonProps:c.object,stopPropagation:c.oneOfType([c.bool,c.string]),showCloseIcon:c.bool,zIndex:c.number,trigger:c.string,position:c.string},F.__SemiComponentName__="Popconfirm",F.defaultProps=d(F.__SemiComponentName__,{stopPropagation:!0,trigger:"click",onVisibleChange:p,disabled:!1,icon:o.createElement(h,{size:"extra-large"}),okType:"primary",cancelType:"tertiary",prefixCls:N.PREFIX,zIndex:1030,showCloseIcon:!0,onCancel:p,onConfirm:p,onClickOutSide:p});export{L as default};
