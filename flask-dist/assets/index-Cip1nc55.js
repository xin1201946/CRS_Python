import{r as e,R as t,P as s}from"./index-CCsViYEm.js";import{c as o,i as r,D as n,T as a,k as i,m as l,U as c,t as p,B as h,v as d}from"./AppContent-DzAY2IDB.js";import{r as m}from"./pick-CcpBOeoj.js";import{_ as u}from"./index-D05P_SgG.js";import{c as b,s as f}from"./index-BI5xKCkj.js";import{h as g}from"./localeConsumer-BEiTkOj7.js";const v=o((function(t){return e.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},t),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.64 16.44a1.5 1.5 0 0 1-2.12 0l-5.66-5.66-5.66 5.66a1.5 1.5 0 1 1-2.12-2.12L10.8 7.6a1.5 1.5 0 0 1 2.12 0l6.72 6.72a1.5 1.5 0 0 1 0 2.12Z",fill:"currentColor"}))}),"chevron_up");class E extends r{constructor(e){super(Object.assign({},e)),this.handleFocusVisible=e=>{const{target:t}=e;try{t.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch(s){n(!0,"Warning: [Semi Avatar] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this._adapter.setFocusVisible(!1)},this.changeScale=()=>{const{gap:e}=this.getProps(),t=this._adapter.getAvatarNode(),s=null==t?void 0:t.firstChild,[o,r]=[(null==t?void 0:t.offsetWidth)||0,(null==s?void 0:s.offsetWidth)||0];if(0!==o&&0!==r&&2*e<o){const t=o-2*e>r?1:(o-2*e)/r;this._adapter.setScale(t)}}}init(){const{children:e}=this.getProps();"string"==typeof e&&this.changeScale()}destroy(){}handleImgLoadError(){const{onError:e}=this.getProps();!1!==(e?e():void 0)&&this._adapter.notifyImgState(!1)}handleEnter(e){this._adapter.notifyEnter(e)}handleLeave(e){this._adapter.notifyLeave(e)}}const y=e=>{let{gradientStart:s,gradientEnd:o}=e;const r=a();return t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"51",height:"52",viewBox:"0 0 51 52",fill:"none"},t.createElement("g",{filter:"url(#filter0_d_6_2)"},t.createElement("path",{d:"M40.4918 46.5592C44.6795 43.176 46.261 34.1333 47.5301 25.6141C49.5854 11.8168 39.6662 1 25.8097 1C11.2857 1 3 11.4279 3 25.3518C3 33.7866 6.29361 43.8947 10.4602 46.5592C12.5868 47.9192 12.5868 47.9051 25.8097 47.9192C38.3651 47.9282 38.5352 48.14 40.4918 46.5592Z",fill:`url(#${r})`})),t.createElement("defs",null,t.createElement("filter",{id:"filter0_d_6_2",x:"0.789215",y:"0.447304",width:"49.2216",height:"51.3549",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},t.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),t.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),t.createElement("feOffset",{dy:"1.65809"}),t.createElement("feGaussianBlur",{stdDeviation:"1.10539"}),t.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"}),t.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_6_2"}),t.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_6_2",result:"shape"})),t.createElement("linearGradient",{id:r,x1:"17.671",y1:"31.7392",x2:"17.671",y2:"47.9333",gradientUnits:"userSpaceOnUse"},t.createElement("stop",{stopColor:s}),t.createElement("stop",{offset:"1",stopColor:o}))))};const S=f.SIZE,$=f.SHAPE,x=f.COLOR,C=b.PREFIX;class O extends i{constructor(e){super(e),this.handleFocusVisible=e=>{this.foundation.handleFocusVisible(e)},this.handleBlur=e=>{this.foundation.handleBlur()},this.getContent=()=>{const{children:e,onClick:s,imgAttr:o,src:r,srcSet:n,alt:a}=this.props,{isImgExist:i}=this.state;let p=e;const h=s!==c,d=r&&i,m={tabIndex:0,onKeyDown:this.handleKeyDown,onFocus:this.handleFocusVisible,onBlur:this.handleBlur};if(d){const e=h?`clickable Avatar: ${a}`:a,s=Object.assign(Object.assign({src:r,srcSet:n,onError:this.handleError},o),{className:l({[`${C}-no-focus-visible`]:h})}),i=h?Object.assign(Object.assign({},s),m):s;p=t.createElement("img",Object.assign({alt:e},i))}else if("string"==typeof e){const s=null!=a?a:e,o={role:"img","aria-label":h?`clickable Avatar: ${s}`:s,className:l(`${C}-label`,{[`${C}-no-focus-visible`]:h})},r=h?Object.assign(Object.assign({},o),m):o,n={transform:`scale(${this.state.scale})`};p=t.createElement("span",{className:`${C}-content`,style:n},t.createElement("span",Object.assign({},r,{"x-semi-prop":"children"}),e))}return p},this.renderBottomSlot=()=>{var e,s;if(!this.props.bottomSlot)return null;if(this.props.bottomSlot.render)return this.props.bottomSlot.render();const o=null!==(e=this.props.bottomSlot.render)&&void 0!==e?e:()=>{var e;const s={};return this.props.bottomSlot.bgColor&&(s.backgroundColor=this.props.bottomSlot.bgColor),this.props.bottomSlot.textColor&&(s.color=this.props.bottomSlot.textColor),t.createElement("span",{style:s,className:l(`${C}-bottom_slot-shape_${this.props.bottomSlot.shape}`,`${C}-bottom_slot-shape_${this.props.bottomSlot.shape}-${this.props.size}`,null!==(e=this.props.bottomSlot.className)&&void 0!==e?e:"")},this.props.bottomSlot.text)};return t.createElement("div",{className:l([`${C}-bottom_slot`]),style:null!==(s=this.props.bottomSlot.style)&&void 0!==s?s:{}},o())},this.renderTopSlot=()=>{var e,s,o,r;if(!this.props.topSlot)return null;if(this.props.topSlot.render)return this.props.topSlot.render();const n={};return this.props.topSlot.textColor&&(n.color=this.props.topSlot.textColor),t.createElement("div",{style:null!==(e=this.props.topSlot.style)&&void 0!==e?e:{},className:l([`${C}-top_slot-wrapper`,null!==(s=this.props.topSlot.className)&&void 0!==s?s:"",{[`${C}-animated`]:this.props.contentMotion}])},t.createElement("div",{className:l([`${C}-top_slot-bg`,`${C}-top_slot-bg-${this.props.size}`])},t.createElement("div",{className:l([`${C}-top_slot-bg-svg`,`${C}-top_slot-bg-svg-${this.props.size}`])},t.createElement(y,{gradientStart:null!==(o=this.props.topSlot.gradientStart)&&void 0!==o?o:"var(--semi-color-primary)",gradientEnd:null!==(r=this.props.topSlot.gradientEnd)&&void 0!==r?r:"var(--semi-color-primary)"}))),t.createElement("div",{className:l([`${C}-top_slot`])},t.createElement("div",{style:n,className:l([`${C}-top_slot-content`,`${C}-top_slot-content-${this.props.size}`])},this.props.topSlot.text)))},this.state={isImgExist:!0,hoverContent:"",focusVisible:!1,scale:1},this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.handleError=this.handleError.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.getContent=this.getContent.bind(this),this.avatarRef=t.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyImgState:e=>{this.setState({isImgExist:e})},notifyEnter:e=>{const{hoverMask:t}=this.props,s=t;this.setState({hoverContent:s},(()=>{const{onMouseEnter:t}=this.props;t&&t(e)}))},notifyLeave:e=>{this.setState({hoverContent:""},(()=>{const{onMouseLeave:t}=this.props;t&&t(e)}))},setFocusVisible:e=>{this.setState({focusVisible:e})},setScale:e=>{this.setState({scale:e})},getAvatarNode:()=>{var e;return null===(e=this.avatarRef)||void 0===e?void 0:e.current}})}componentDidMount(){this.foundation=new E(this.adapter),this.foundation.init()}componentDidUpdate(e){if(this.props.src&&this.props.src!==e.src){const e=new Image(0,0);e.src=this.props.src,e.onload=()=>{this.setState({isImgExist:!0})},e.onerror=()=>{this.setState({isImgExist:!1})},e.onabort=()=>{this.setState({isImgExist:!1})}}"string"==typeof this.props.children&&this.props.children!==e.children&&this.foundation.changeScale()}componentWillUnmount(){this.foundation.destroy()}onEnter(e){this.foundation.handleEnter(e)}onLeave(e){this.foundation.handleLeave(e)}handleError(){this.foundation.handleImgLoadError()}handleKeyDown(e){const{onClick:t}=this.props;switch(e.key){case"Enter":t(e),g(e);break;case"Escape":e.target.blur()}}render(){var e;const s=this.props,{shape:o,children:r,size:n,color:a,className:i,hoverMask:c,onClick:p,imgAttr:h,src:d,srcSet:m,style:u,alt:b,gap:g,bottomSlot:v,topSlot:E,border:y,contentMotion:S}=s,$=function(e,t){var s={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(s[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(s[o[r]]=e[o[r]])}return s}(s,["shape","children","size","color","className","hoverMask","onClick","imgAttr","src","srcSet","style","alt","gap","bottomSlot","topSlot","border","contentMotion"]),{isImgExist:x,hoverContent:O,focusVisible:_}=this.state;let j={};f.SIZE.includes(n)||(j={width:n,height:n}),j=Object.assign(Object.assign({},j),u);const w=v||E||y,I={onClick:p,onMouseEnter:this.onEnter,onMouseLeave:this.onLeave},N=d&&x,k=l(C,{[`${C}-${o}`]:o,[`${C}-${n}`]:n,[`${C}-${a}`]:a&&!N,[`${C}-img`]:N,[`${C}-focus`]:_,[`${C}-animated`]:S},i),A=O?t.createElement("div",{className:`${C}-hover`,"x-semi-prop":"hoverContent"},O):null;let P=t.createElement("span",Object.assign({},$,{style:w?{}:j,className:k},w?{}:I,{role:"listitem",ref:this.avatarRef}),this.getContent(),A);if(y){const s={};"object"==typeof y&&(null==y?void 0:y.color)&&(s.borderColor=null==y?void 0:y.color),P=t.createElement("div",{style:Object.assign({position:"relative"},j)},P,t.createElement("span",{style:s,className:l([`${C}-additionalBorder`,`${C}-additionalBorder-${n}`,{[`${C}-${o}`]:o}])}),"object"==typeof this.props.border&&this.props.border.motion&&t.createElement("span",{style:s,className:l([`${C}-additionalBorder`,`${C}-additionalBorder-${n}`,{[`${C}-${o}`]:o,[`${C}-additionalBorder-animated`]:"object"==typeof this.props.border&&(null===(e=this.props.border)||void 0===e?void 0:e.motion)}])}))}return w?t.createElement("span",Object.assign({className:l([`${C}-wrapper`]),style:j},I),P,E&&["extra-small","small","default","medium","large","extra-large"].includes(n)&&"circle"===o&&this.renderTopSlot(),v&&["extra-small","small","default","medium","large","extra-large"].includes(n)&&this.renderBottomSlot()):P}}var _,j,w,I;function N(){if(I)return w;I=1;var e=function(){if(j)return _;j=1;var e=m(),t=1/0;return _=function(s){return s?(s=e(s))===t||s===-1/0?17976931348623157e292*(s<0?-1:1):s==s?s:0:0===s?s:0}}();return w=function(t){var s=e(t),o=s%1;return s==s?o?s-o:s:0}}O.__SemiComponentName__="Avatar",O.defaultProps=p(O.__SemiComponentName__,{size:"medium",color:"grey",shape:"circle",gap:3,onClick:c,onMouseEnter:c,onMouseLeave:c}),O.propTypes={children:s.node,color:s.oneOf(x),shape:s.oneOf($),size:s.oneOf(S),hoverMask:s.node,className:s.string,style:s.object,gap:s.number,imgAttr:s.object,src:s.string,srcSet:s.string,alt:s.string,onError:s.func,onClick:s.func,onMouseEnter:s.func,onMouseLeave:s.func,bottomSlot:s.shape({render:s.func,shape:s.oneOf(["circle","square"]),text:s.node,bgColor:s.string,textColor:s.string,className:s.string,style:s.object}),topSlot:s.shape({render:s.func,gradientStart:s.string,gradientEnd:s.string,text:s.node,textColor:s.string,className:s.string,style:s.object}),border:s.oneOfType([s.shape({color:s.string,motion:s.bool}),s.bool]),contentMotion:s.bool},O.elementType="Avatar";const k={PREFIX:`${h}-tag`},A={TAG_SIZE:["default","small","large"],TAG_COLOR:["grey","red","pink","purple","violet","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","white"],TAG_TYPE:["light","solid","ghost"],AVATAR_SHAPE:["square","circle"]};const P=k.PREFIX,B=A.TAG_COLOR,M=A.TAG_SIZE,T=A.TAG_TYPE,L=A.AVATAR_SHAPE;class D extends e.Component{constructor(e){super(e),this.state={visible:!0},this.close=this.close.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}static getDerivedStateFromProps(e){return"visible"in e?{visible:e.visible}:null}setVisible(e){"visible"in this.props||this.setState({visible:e})}close(e,t,s){const{onClose:o}=this.props;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),o&&o(t,e,s),e.defaultPrevented||this.setVisible(!1)}handleKeyDown(e){const{closable:t,onClick:s,onKeyDown:o}=this.props;switch(e.key){case"Backspace":case"Delete":t&&this.close(e,this.props.children,this.props.tagKey),g(e);break;case"Enter":s(e),g(e);break;case"Escape":e.target.blur()}o&&o(e)}renderAvatar(){const{avatarShape:e,avatarSrc:s}=this.props;return t.createElement(O,{src:s,shape:e})}render(){const e=this.props,{tagKey:s,children:o,size:r,color:n,closable:a,visible:i,onClose:c,onClick:p,className:h,type:m,shape:b,avatarSrc:f,avatarShape:g,tabIndex:v,prefixIcon:E,suffixIcon:y}=e,S=function(e,t){var s={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(s[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(s[o[r]]=e[o[r]])}return s}(e,["tagKey","children","size","color","closable","visible","onClose","onClick","className","type","shape","avatarSrc","avatarShape","tabIndex","prefixIcon","suffixIcon"]),{visible:$}=this.state,x=p!==D.defaultProps.onClick||a,C={role:"button",tabIndex:v||0,onKeyDown:this.handleKeyDown},O=Object.assign(Object.assign({},S),{onClick:p,tabIndex:v,className:l(P,{[`${P}-default`]:"default"===r,[`${P}-small`]:"small"===r,[`${P}-large`]:"large"===r,[`${P}-square`]:"square"===b,[`${P}-circle`]:"circle"===b,[`${P}-${m}`]:m,[`${P}-${n}-${m}`]:n&&m,[`${P}-closable`]:a,[`${P}-invisible`]:!$,[`${P}-avatar-${g}`]:f},h)}),_=x?Object.assign(Object.assign({},O),C):O,j=a?t.createElement("div",{className:`${P}-close`,onClick:e=>this.close(e,o,s)},t.createElement(d,{size:"small"})):null,w=u(o),I=l(`${P}-content`,`${P}-content-${w?"ellipsis":"center"}`);return t.createElement("div",Object.assign({"aria-label":this.props["aria-label"]||w?`${a?"Closable ":""}Tag: ${o}`:""},_),E?t.createElement("div",{className:`${P}-prefix-icon`},E):null,f?this.renderAvatar():null,t.createElement("div",{className:I},o),y?t.createElement("div",{className:`${P}-suffix-icon`},y):null,j)}}D.defaultProps={size:M[0],color:B[0],closable:!1,type:T[0],onClose:()=>{},onClick:()=>{},onMouseEnter:()=>{},style:{},className:"",shape:"square",avatarShape:"square",prefixIcon:null,suffixIcon:null},D.propTypes={children:s.node,tagKey:s.oneOfType([s.string,s.number]),size:s.oneOf(M),color:s.oneOf(B),type:s.oneOf(T),closable:s.bool,visible:s.bool,onClose:s.func,onClick:s.func,prefixIcon:s.node,suffixIcon:s.node,style:s.object,className:s.string,avatarSrc:s.string,avatarShape:s.oneOf(L),"aria-label":s.string};export{v as I,D as T,k as c,N as r,A as s};
