import{R as e,P as t,r as s,A as r,B as n,C as o,D as i,j as l,k as a,m as c}from"./index-B93kzz_1.js";import{B as d}from"./pick-saSZ4uyX.js";import{T as m,S as u,P as h,C as p}from"./index-sw4Tt9-H.js";import{a as g}from"./index-9FU0tlLi.js";import{D as x}from"./index-D1X-lcZg.js";import{F as j,T as y,I as f,M as b}from"./index-DBFaSEMM.js";import{B as v,T as w,m as _,u as C,E as k,s as O}from"./AppContent-DNe_3nC0.js";import{T as P}from"./index-DWiNSKR2.js";import{V as E}from"./VChart-CkeeqBVs.js";import"./index-Cx5UTvVX.js";import"./isPlainObject-BHD4x_c9.js";import"./isPromise-BOKwgLAu.js";import"./truncateValue-BEIqKqx9.js";import"./index-CqCiHeci.js";import"./index-gMJfqxwI.js";import"./IconClear-_a5P9oDU.js";const L={PREFIX:`${v}`};const F=["xxl","xl","lg","md","sm","xs"],R=e.createContext(null),S={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"};class T extends e.Component{constructor(){super(...arguments),this.state={screens:{xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}},this.unRegisters=[]}componentDidMount(){this.unRegisters=Object.keys(S).map((e=>w(S[e],{match:()=>{"object"==typeof this.props.gutter&&this.setState((t=>({screens:Object.assign(Object.assign({},t.screens),{[e]:!0})})))},unmatch:()=>{"object"==typeof this.props.gutter&&this.setState((t=>({screens:Object.assign(Object.assign({},t.screens),{[e]:!1})})))}})))}componentWillUnmount(){this.unRegisters.forEach((e=>e()))}getGutter(){const{gutter:e=0}=this.props,t=[0,0];return(Array.isArray(e)?e.slice(0,2):[e,0]).forEach(((e,s)=>{if("object"==typeof e)for(let r=0;r<F.length;r++){const n=F[r];if(this.state.screens[n]&&void 0!==e[n]){t[s]=e[n];break}}else t[s]=e||0})),t}render(){const t=this.props,{prefixCls:s,type:r,justify:n,align:o,className:i,style:l,children:a}=t,c=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(s[r[n]]=e[r[n]])}return s}(t,["prefixCls","type","justify","align","className","style","children"]),d=this.getGutter(),m=`${s}-row`,u=_({[m]:"flex"!==r,[`${m}-${r}`]:r,[`${m}-${r}-${n}`]:r&&n,[`${m}-${r}-${o}`]:r&&o},i),h=Object.assign(Object.assign(Object.assign({},d[0]>0?{marginLeft:d[0]/-2,marginRight:d[0]/-2}:{}),d[1]>0?{marginTop:d[1]/-2,marginBottom:d[1]/-2}:{}),l),p=Object.assign({},c);return delete p.gutter,e.createElement(R.Provider,{value:{gutters:d}},e.createElement("div",Object.assign({},p,{className:u,style:h,"x-semi-prop":"children"}),a))}}function $(){const{Text:e}=m,{t:t}=C(),[v,w]=s.useState([]),_=s.useRef({isComposition:!1}),[L,F]=s.useState(window.innerWidth),[R,S]=s.useState([]);let $="";function I(){"Phone"===a()?O(t("Warning"),t("Tip_cannot_support_your_device"),null,5,"warning"):b.info({title:t("More_info"),content:l.jsxs(l.Fragment,{children:[l.jsxs(p,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[l.jsx(e,{style:{color:"var(--semi-color-info)"},children:t("Logs_count")}),"： ",t("Logs_count_text")]}),l.jsxs(p,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[l.jsx(e,{style:{color:"var(--semi-color-success)"},children:t("Logs_success_count")}),"：",t("Logs_success_count_text")]}),l.jsxs(p,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[l.jsx(e,{style:{color:"var( --semi-color-warning)"},children:t("Logs_warning_count")}),"：",t("Logs_warning_count_text")]}),l.jsxs(p,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[l.jsx(e,{style:{color:"var(--semi-color-danger)"},children:t("Logs_error_count")}),"：",t("Logs_error_count_text")]})]}),cancelButtonProps:{theme:"borderless"},okButtonProps:{theme:"solid"}})}function z(e,t){return(e/t*100).toFixed(2)}s.useEffect((()=>{const e=r();function t(){F(window.innerWidth)}return S(e),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[]);const A=n().length+o().length+i().length;return l.jsxs(l.Fragment,{children:[l.jsx("h3",{children:l.jsxs(u,{children:[t("View_all_info"),l.jsx(h,{showArrow:!0,arrowPointAtCenter:!0,content:l.jsx("article",{children:t("Tip_Log_View_info")}),position:"right",children:l.jsx(k,{style:{color:"var(--semi-color-primary)"}})})]})}),l.jsx("div",{className:"grid",children:l.jsx(T,{type:"flex",justify:"center",children:l.jsxs(u,{spacing:[100,20],align:"center",wrap:!0,children:[L>=940&&function(){const e={type:"pie",data:[{id:"id0",values:[{type:"Success",value:z(n().length,A)},{type:"Warning",value:z(o().length,A)},{type:"Error",value:z(i().length,A)}]}],valueField:"value",categoryField:"type",label:{visible:!0},tooltip:{mark:{content:[{key:e=>e.type,value:e=>e.value+"%"}]}}};return l.jsx(l.Fragment,{children:l.jsx("div",{children:l.jsx(E,{spec:{...e,title:{visible:!0,text:"",subtext:""},legends:{visible:!0,orient:"right"}},option:{mode:"desktop-browser"}})})})}(),function(){const e=[{key:t("Logs_count"),value:l.jsx(d,{theme:"borderless",size:"small",children:r().length})},{key:t("Logs_success_count"),value:l.jsx(d,{type:"primary",theme:"borderless",size:"small",children:n().length})},{key:t("Logs_warning_count"),value:l.jsx(d,{type:"warning",theme:"borderless",size:"small",children:o().length})},{key:t("Logs_error_count"),value:l.jsx(d,{type:"danger",theme:"borderless",size:"small",children:i().length})}];return l.jsx(l.Fragment,{children:l.jsx(p,{shadows:"hover",title:t("Roughly_browse"),onClick:I,headerExtraContent:l.jsx(f,{style:{color:"var(--semi-color-primary)"}}),children:l.jsx(x,{data:e})})})}()]})})}),function(){let r;r="Phone"===a()?s.useMemo((()=>({pageSize:5,formatPageText:!1,position:"top"})),[]):s.useMemo((()=>({pageSize:7,position:"top"})),[]);const n=[{title:l.jsxs(u,{children:[l.jsx("span",{children:t("Event")}),l.jsx(j,{placeholder:t("Enter_filter_value"),style:{width:200},onCompositionStart:()=>{_.current.isComposition=!0},onCompositionEnd:e=>{_.current.isComposition=!1;const t=e.target.value;w(t?[t]:[])},onChange:e=>{if(_.current.isComposition)return;w(e?[e]:[])},showClear:!0})]}),dataIndex:"event",key:"event",width:400,render:e=>l.jsx("div",{children:e}),onFilter:(e,t)=>t.event.includes(e),filteredValue:v},{title:t("Result"),dataIndex:"result",key:"result",render:e=>l.jsx("div",{children:l.jsx(P,{color:"successfully"===e?"green":"warning"===e?"yellow":"red",children:e})}),sorter:(e,t)=>{const s={error:0,warning:1,successfully:2};return s[e.result]===s[t.result]?0:s[e.result]-s[t.result]}},{title:t("Time"),dataIndex:"time",key:"time",sorter:(e,t)=>new Date(e.time)-new Date(t.time)>0?1:-1,render:e=>l.jsx("div",{children:e})},{title:t("Comment"),dataIndex:"comment",key:"comment",render:s=>l.jsx(d,{onClick:()=>{return r=s,void("Phone"===a()?""===$?$=O(t("Remarks"),r,null,0,"info",!1,"light"):O(t("Remarks"),r,null,0,"info",!1,"light",$):b.info({title:t("More_info"),content:l.jsx(l.Fragment,{children:l.jsx(e,{children:r})}),cancelButtonProps:{theme:"borderless"},okButtonProps:{theme:"solid"}}));var r},children:t("View")})}];return l.jsxs(l.Fragment,{children:[l.jsx("h3",{children:l.jsxs(u,{children:[t("Event_list"),l.jsx(h,{showArrow:!0,arrowPointAtCenter:!0,content:l.jsx("article",{children:t("Find_E_by_filter")}),position:"right",children:l.jsx(k,{style:{color:"var(--semi-color-primary)"}})})]})}),l.jsx(g,{children:l.jsx(g.Panel,{header:t("Log_control"),itemKey:"1",children:l.jsx(u,{children:l.jsx(d,{theme:"outline",type:"primary",style:{marginRight:8},onClick:c,children:t("Log_download")})})})}),l.jsx(y,{style:{width:"100%"},pagination:r,dataSource:R,columns:n,filteredValue:v})]})}()]})}T.propTypes={type:t.oneOf(["flex"]),align:t.oneOf(["top","middle","bottom"]),justify:t.oneOf(["start","end","center","space-around","space-between"]),className:t.string,style:t.object,children:t.node,gutter:t.oneOfType([t.object,t.number,t.array]),prefixCls:t.string},T.defaultProps={prefixCls:L.PREFIX},T.RowContext={gutters:t.any};export{$ as default};
