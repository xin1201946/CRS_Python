import{R as e,P as t}from"./index-B93kzz_1.js";import{B as n,i as s,k as a,bZ as i,m as r}from"./AppContent-DNe_3nC0.js";const l=["default","error","warning","success"],o={PREFIX:`${n}-spin`};class d extends s{static get spinDefaultAdapter(){return{getProp:()=>{},setLoading:e=>{}}}constructor(e){super(Object.assign(Object.assign({},d.spinDefaultAdapter),e))}updateLoadingIfNeedDelay(){const{spinning:e,delay:t}=this._adapter.getProps(),{delay:n}=this._adapter.getStates();if(n){const n=this;this._timer=setTimeout((()=>{n._adapter.setState({loading:e,delay:0})}),t)}}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}}const p=o.PREFIX;class c extends a{constructor(e){super(e),this.foundation=new d(this.adapter),this.state={delay:e.delay,loading:!0}}static getDerivedStateFromProps(e){return e.delay?!1===e.spinning?{delay:0,loading:!1}:{delay:e.delay}:{loading:e.spinning}}get adapter(){return Object.assign(Object.assign({},super.adapter),{setLoading:e=>{this.setState({loading:e})}})}componentWillUnmount(){this.foundation.destroy()}renderSpin(){const{indicator:t,tip:n}=this.props,{loading:s}=this.state;return s?e.createElement("div",{className:`${p}-wrapper`},t?e.createElement("div",{className:`${p}-animate`,"x-semi-prop":"indicator"},t):e.createElement(i,null),n?e.createElement("div",{"x-semi-prop":"tip"},n):null):null}render(){this.foundation.updateLoadingIfNeedDelay();const t=this.props,{children:n,style:s,wrapperClassName:a,childStyle:i,size:l}=t,o=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n}(t,["children","style","wrapperClassName","childStyle","size"]),{loading:d}=this.state,c=r(p,a,{[`${p}-${l}`]:l,[`${p}-block`]:n,[`${p}-hidden`]:!d});return e.createElement("div",Object.assign({className:c,style:s},this.getDataAttr(o)),this.renderSpin(),e.createElement("div",{className:`${p}-children`,style:i,"x-semi-prop":"children"},n))}}function u(e){return null!==(t=e)&&"object"==typeof t&&"function"==typeof e.then;var t}c.propTypes={size:t.oneOf(["small","middle","large"]),spinning:t.bool,children:t.node,indicator:t.node,delay:t.number,tip:t.node,wrapperClassName:t.string,childStyle:t.object,style:t.object},c.defaultProps={size:"middle",spinning:!0,children:null,indicator:null,delay:0};export{c as S,l as V,u as i};
