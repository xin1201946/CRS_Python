import{x as e,r as t,e as s,S as o,aj as r,R as n,f as a,c as i,n as l,j as c,P as p,B as h,d}from"./index-CUrNDP8Z.js";import{r as m,b as u}from"./pick-C1Jd6_7O.js";import{c as b,h as g,s as f}from"./index-us_Rri2v.js";const v=e((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.64 16.44a1.5 1.5 0 0 1-2.12 0l-5.66-5.66-5.66 5.66a1.5 1.5 0 1 1-2.12-2.12L10.8 7.6a1.5 1.5 0 0 1 2.12 0l6.72 6.72a1.5 1.5 0 0 1 0 2.12Z",fill:"currentColor"}))}),"chevron_up");class E extends s{constructor(e){super(Object.assign({},e)),this.handleFocusVisible=e=>{const{target:t}=e;try{t.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch(s){o(!0,"Warning: [Semi Avatar] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this._adapter.setFocusVisible(!1)},this.changeScale=()=>{const{gap:e}=this.getProps(),t=this._adapter.getAvatarNode(),s=null==t?void 0:t.firstChild,[o,r]=[(null==t?void 0:t.offsetWidth)||0,(null==s?void 0:s.offsetWidth)||0];if(0!==o&&0!==r&&2*e<o){const t=o-2*e>r?1:(o-2*e)/r;this._adapter.setScale(t)}}}init(){const{children:e}=this.getProps();"string"==typeof e&&this.changeScale()}destroy(){}handleImgLoadError(){const{onError:e}=this.getProps();!1!==(e?e():void 0)&&this._adapter.notifyImgState(!1)}handleEnter(e){this._adapter.notifyEnter(e)}handleLeave(e){this._adapter.notifyLeave(e)}}const y=e=>{let{gradientStart:t,gradientEnd:s}=e;const o=r();return n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"51",height:"52",viewBox:"0 0 51 52",fill:"none"},n.createElement("g",{filter:"url(#filter0_d_6_2)"},n.createElement("path",{d:"M40.4918 46.5592C44.6795 43.176 46.261 34.1333 47.5301 25.6141C49.5854 11.8168 39.6662 1 25.8097 1C11.2857 1 3 11.4279 3 25.3518C3 33.7866 6.29361 43.8947 10.4602 46.5592C12.5868 47.9192 12.5868 47.9051 25.8097 47.9192C38.3651 47.9282 38.5352 48.14 40.4918 46.5592Z",fill:`url(#${o})`})),n.createElement("defs",null,n.createElement("filter",{id:"filter0_d_6_2",x:"0.789215",y:"0.447304",width:"49.2216",height:"51.3549",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),n.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),n.createElement("feOffset",{dy:"1.65809"}),n.createElement("feGaussianBlur",{stdDeviation:"1.10539"}),n.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"}),n.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_6_2"}),n.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_6_2",result:"shape"})),n.createElement("linearGradient",{id:o,x1:"17.671",y1:"31.7392",x2:"17.671",y2:"47.9333",gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:t}),n.createElement("stop",{offset:"1",stopColor:s}))))};const S=f.SIZE,$=f.SHAPE,x=f.COLOR,O=b.PREFIX;class C extends a{constructor(e){super(e),this.handleFocusVisible=e=>{this.foundation.handleFocusVisible(e)},this.handleBlur=e=>{this.foundation.handleBlur()},this.getContent=()=>{const{children:e,onClick:t,imgAttr:s,src:o,srcSet:r,alt:a}=this.props,{isImgExist:c}=this.state;let p=e;const h=t!==l,d=o&&c,m={tabIndex:0,onKeyDown:this.handleKeyDown,onFocus:this.handleFocusVisible,onBlur:this.handleBlur};if(d){const e=h?`clickable Avatar: ${a}`:a,t=Object.assign(Object.assign({src:o,srcSet:r,onError:this.handleError},s),{className:i({[`${O}-no-focus-visible`]:h})}),l=h?Object.assign(Object.assign({},t),m):t;p=n.createElement("img",Object.assign({alt:e},l))}else if("string"==typeof e){const t=null!=a?a:e,s={role:"img","aria-label":h?`clickable Avatar: ${t}`:t,className:i(`${O}-label`,{[`${O}-no-focus-visible`]:h})},o=h?Object.assign(Object.assign({},s),m):s,r={transform:`scale(${this.state.scale})`};p=n.createElement("span",{className:`${O}-content`,style:r},n.createElement("span",Object.assign({},o,{"x-semi-prop":"children"}),e))}return p},this.renderBottomSlot=()=>{var e,t;if(!this.props.bottomSlot)return null;if(this.props.bottomSlot.render)return this.props.bottomSlot.render();const s=null!==(e=this.props.bottomSlot.render)&&void 0!==e?e:()=>{var e;const t={};return this.props.bottomSlot.bgColor&&(t.backgroundColor=this.props.bottomSlot.bgColor),this.props.bottomSlot.textColor&&(t.color=this.props.bottomSlot.textColor),n.createElement("span",{style:t,className:i(`${O}-bottom_slot-shape_${this.props.bottomSlot.shape}`,`${O}-bottom_slot-shape_${this.props.bottomSlot.shape}-${this.props.size}`,null!==(e=this.props.bottomSlot.className)&&void 0!==e?e:"")},this.props.bottomSlot.text)};return n.createElement("div",{className:i([`${O}-bottom_slot`]),style:null!==(t=this.props.bottomSlot.style)&&void 0!==t?t:{}},s())},this.renderTopSlot=()=>{var e,t,s,o;if(!this.props.topSlot)return null;if(this.props.topSlot.render)return this.props.topSlot.render();const r={};return this.props.topSlot.textColor&&(r.color=this.props.topSlot.textColor),n.createElement("div",{style:null!==(e=this.props.topSlot.style)&&void 0!==e?e:{},className:i([`${O}-top_slot-wrapper`,null!==(t=this.props.topSlot.className)&&void 0!==t?t:"",{[`${O}-animated`]:this.props.contentMotion}])},n.createElement("div",{className:i([`${O}-top_slot-bg`,`${O}-top_slot-bg-${this.props.size}`])},n.createElement("div",{className:i([`${O}-top_slot-bg-svg`,`${O}-top_slot-bg-svg-${this.props.size}`])},n.createElement(y,{gradientStart:null!==(s=this.props.topSlot.gradientStart)&&void 0!==s?s:"var(--semi-color-primary)",gradientEnd:null!==(o=this.props.topSlot.gradientEnd)&&void 0!==o?o:"var(--semi-color-primary)"}))),n.createElement("div",{className:i([`${O}-top_slot`])},n.createElement("div",{style:r,className:i([`${O}-top_slot-content`,`${O}-top_slot-content-${this.props.size}`])},this.props.topSlot.text)))},this.state={isImgExist:!0,hoverContent:"",focusVisible:!1,scale:1},this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.handleError=this.handleError.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.getContent=this.getContent.bind(this),this.avatarRef=n.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyImgState:e=>{this.setState({isImgExist:e})},notifyEnter:e=>{const{hoverMask:t}=this.props,s=t;this.setState({hoverContent:s},(()=>{const{onMouseEnter:t}=this.props;t&&t(e)}))},notifyLeave:e=>{this.setState({hoverContent:""},(()=>{const{onMouseLeave:t}=this.props;t&&t(e)}))},setFocusVisible:e=>{this.setState({focusVisible:e})},setScale:e=>{this.setState({scale:e})},getAvatarNode:()=>{var e;return null===(e=this.avatarRef)||void 0===e?void 0:e.current}})}componentDidMount(){this.foundation=new E(this.adapter),this.foundation.init()}componentDidUpdate(e){if(this.props.src&&this.props.src!==e.src){const e=new Image(0,0);e.src=this.props.src,e.onload=()=>{this.setState({isImgExist:!0})},e.onerror=()=>{this.setState({isImgExist:!1})},e.onabort=()=>{this.setState({isImgExist:!1})}}"string"==typeof this.props.children&&this.props.children!==e.children&&this.foundation.changeScale()}componentWillUnmount(){this.foundation.destroy()}onEnter(e){this.foundation.handleEnter(e)}onLeave(e){this.foundation.handleLeave(e)}handleError(){this.foundation.handleImgLoadError()}handleKeyDown(e){const{onClick:t}=this.props;switch(e.key){case"Enter":t(e),g(e);break;case"Escape":e.target.blur()}}render(){var e;const t=this.props,{shape:s,children:o,size:r,color:a,className:l,hoverMask:c,onClick:p,imgAttr:h,src:d,srcSet:m,style:u,alt:b,gap:g,bottomSlot:v,topSlot:E,border:y,contentMotion:S}=t,$=function(e,t){var s={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(s[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(s[o[r]]=e[o[r]])}return s}(t,["shape","children","size","color","className","hoverMask","onClick","imgAttr","src","srcSet","style","alt","gap","bottomSlot","topSlot","border","contentMotion"]),{isImgExist:x,hoverContent:C,focusVisible:_}=this.state;let j={};f.SIZE.includes(r)||(j={width:r,height:r}),j=Object.assign(Object.assign({},j),u);const w=v||E||y,I={onClick:p,onMouseEnter:this.onEnter,onMouseLeave:this.onLeave},N=d&&x,k=i(O,{[`${O}-${s}`]:s,[`${O}-${r}`]:r,[`${O}-${a}`]:a&&!N,[`${O}-img`]:N,[`${O}-focus`]:_,[`${O}-animated`]:S},l),A=C?n.createElement("div",{className:`${O}-hover`,"x-semi-prop":"hoverContent"},C):null;let P=n.createElement("span",Object.assign({},$,{style:w?{}:j,className:k},w?{}:I,{role:"listitem",ref:this.avatarRef}),this.getContent(),A);if(y){const t={};"object"==typeof y&&(null==y?void 0:y.color)&&(t.borderColor=null==y?void 0:y.color),P=n.createElement("div",{style:Object.assign({position:"relative"},j)},P,n.createElement("span",{style:t,className:i([`${O}-additionalBorder`,`${O}-additionalBorder-${r}`,{[`${O}-${s}`]:s}])}),"object"==typeof this.props.border&&this.props.border.motion&&n.createElement("span",{style:t,className:i([`${O}-additionalBorder`,`${O}-additionalBorder-${r}`,{[`${O}-${s}`]:s,[`${O}-additionalBorder-animated`]:"object"==typeof this.props.border&&(null===(e=this.props.border)||void 0===e?void 0:e.motion)}])}))}return w?n.createElement("span",Object.assign({className:i([`${O}-wrapper`]),style:j},I),P,E&&["extra-small","small","default","medium","large","extra-large"].includes(r)&&"circle"===s&&this.renderTopSlot(),v&&["extra-small","small","default","medium","large","extra-large"].includes(r)&&this.renderBottomSlot()):P}}var _,j,w,I;function N(){if(I)return w;I=1;var e=function(){if(j)return _;j=1;var e=m(),t=1/0;return _=function(s){return s?(s=e(s))===t||s===-1/0?17976931348623157e292*(s<0?-1:1):s==s?s:0:0===s?s:0}}();return w=function(t){var s=e(t),o=s%1;return s==s?o?s-o:s:0}}C.__SemiComponentName__="Avatar",C.defaultProps=c(C.__SemiComponentName__,{size:"medium",color:"grey",shape:"circle",gap:3,onClick:l,onMouseEnter:l,onMouseLeave:l}),C.propTypes={children:p.node,color:p.oneOf(x),shape:p.oneOf($),size:p.oneOf(S),hoverMask:p.node,className:p.string,style:p.object,gap:p.number,imgAttr:p.object,src:p.string,srcSet:p.string,alt:p.string,onError:p.func,onClick:p.func,onMouseEnter:p.func,onMouseLeave:p.func,bottomSlot:p.shape({render:p.func,shape:p.oneOf(["circle","square"]),text:p.node,bgColor:p.string,textColor:p.string,className:p.string,style:p.object}),topSlot:p.shape({render:p.func,gradientStart:p.string,gradientEnd:p.string,text:p.node,textColor:p.string,className:p.string,style:p.object}),border:p.oneOfType([p.shape({color:p.string,motion:p.bool}),p.bool]),contentMotion:p.bool},C.elementType="Avatar";const k={PREFIX:`${h}-tag`},A={TAG_SIZE:["default","small","large"],TAG_COLOR:["grey","red","pink","purple","violet","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","white"],TAG_TYPE:["light","solid","ghost"],AVATAR_SHAPE:["square","circle"]};const P=k.PREFIX,B=A.TAG_COLOR,M=A.TAG_SIZE,T=A.TAG_TYPE,L=A.AVATAR_SHAPE;class D extends t.Component{constructor(e){super(e),this.state={visible:!0},this.close=this.close.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}static getDerivedStateFromProps(e){return"visible"in e?{visible:e.visible}:null}setVisible(e){"visible"in this.props||this.setState({visible:e})}close(e,t,s){const{onClose:o}=this.props;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),o&&o(t,e,s),e.defaultPrevented||this.setVisible(!1)}handleKeyDown(e){const{closable:t,onClick:s,onKeyDown:o}=this.props;switch(e.key){case"Backspace":case"Delete":t&&this.close(e,this.props.children,this.props.tagKey),g(e);break;case"Enter":s(e),g(e);break;case"Escape":e.target.blur()}o&&o(e)}renderAvatar(){const{avatarShape:e,avatarSrc:t}=this.props;return n.createElement(C,{src:t,shape:e})}render(){const e=this.props,{tagKey:t,children:s,size:o,color:r,closable:a,visible:l,onClose:c,onClick:p,className:h,type:m,shape:b,avatarSrc:g,avatarShape:f,tabIndex:v,prefixIcon:E,suffixIcon:y}=e,S=function(e,t){var s={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(s[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(s[o[r]]=e[o[r]])}return s}(e,["tagKey","children","size","color","closable","visible","onClose","onClick","className","type","shape","avatarSrc","avatarShape","tabIndex","prefixIcon","suffixIcon"]),{visible:$}=this.state,x=p!==D.defaultProps.onClick||a,O={role:"button",tabIndex:v||0,onKeyDown:this.handleKeyDown},C=Object.assign(Object.assign({},S),{onClick:p,tabIndex:v,className:i(P,{[`${P}-default`]:"default"===o,[`${P}-small`]:"small"===o,[`${P}-large`]:"large"===o,[`${P}-square`]:"square"===b,[`${P}-circle`]:"circle"===b,[`${P}-${m}`]:m,[`${P}-${r}-${m}`]:r&&m,[`${P}-closable`]:a,[`${P}-invisible`]:!$,[`${P}-avatar-${f}`]:g},h)}),_=x?Object.assign(Object.assign({},C),O):C,j=a?n.createElement("div",{className:`${P}-close`,onClick:e=>this.close(e,s,t)},n.createElement(d,{size:"small"})):null,w=u(s),I=i(`${P}-content`,`${P}-content-${w?"ellipsis":"center"}`);return n.createElement("div",Object.assign({"aria-label":this.props["aria-label"]||w?`${a?"Closable ":""}Tag: ${s}`:""},_),E?n.createElement("div",{className:`${P}-prefix-icon`},E):null,g?this.renderAvatar():null,n.createElement("div",{className:I},s),y?n.createElement("div",{className:`${P}-suffix-icon`},y):null,j)}}D.defaultProps={size:M[0],color:B[0],closable:!1,type:T[0],onClose:()=>{},onClick:()=>{},onMouseEnter:()=>{},style:{},className:"",shape:"square",avatarShape:"square",prefixIcon:null,suffixIcon:null},D.propTypes={children:p.node,tagKey:p.oneOfType([p.string,p.number]),size:p.oneOf(M),color:p.oneOf(B),type:p.oneOf(T),closable:p.bool,visible:p.bool,onClose:p.func,onClick:p.func,prefixIcon:p.node,suffixIcon:p.node,style:p.object,className:p.string,avatarSrc:p.string,avatarShape:p.oneOf(L),"aria-label":p.string};export{v as I,D as T,k as c,N as r,A as s};
