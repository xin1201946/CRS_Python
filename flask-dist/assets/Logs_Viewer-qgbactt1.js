import{B as e,R as t,b as s,c as r,P as n,r as o,af as i,ag as l,ah as a,ai as c,p as d,T as m,q as u,v as h,t as p}from"./index-CUrNDP8Z.js";import{B as g}from"./pick-C1Jd6_7O.js";import{T as x,S as j,P as y,C as f}from"./index-us_Rri2v.js";import{a as b}from"./index-C9cInr0r.js";import{D as v}from"./index-Bmpmq-Lv.js";import{F as w,T as _,I as C,M as k}from"./index-CT9ZkhZS.js";import{T as O}from"./index-CxDB-K0w.js";import{u as P}from"./AppContent-DHqh3m8t.js";import{V as L}from"./VChart-Dqn1CQPA.js";import"./index-DLTOlcWb.js";import"./isPlainObject-D5ASi4rq.js";import"./isPromise-JuwXNpuL.js";import"./truncateValue-Dp0N6Jvb.js";import"./index-C__1bys8.js";import"./index-BQv4GC1T.js";import"./IconClear-CtTcTnbg.js";const E={PREFIX:`${e}`};const F=["xxl","xl","lg","md","sm","xs"],R=t.createContext(null),S={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"};class T extends t.Component{constructor(){super(...arguments),this.state={screens:{xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}},this.unRegisters=[]}componentDidMount(){this.unRegisters=Object.keys(S).map((e=>s(S[e],{match:()=>{"object"==typeof this.props.gutter&&this.setState((t=>({screens:Object.assign(Object.assign({},t.screens),{[e]:!0})})))},unmatch:()=>{"object"==typeof this.props.gutter&&this.setState((t=>({screens:Object.assign(Object.assign({},t.screens),{[e]:!1})})))}})))}componentWillUnmount(){this.unRegisters.forEach((e=>e()))}getGutter(){const{gutter:e=0}=this.props,t=[0,0];return(Array.isArray(e)?e.slice(0,2):[e,0]).forEach(((e,s)=>{if("object"==typeof e)for(let r=0;r<F.length;r++){const n=F[r];if(this.state.screens[n]&&void 0!==e[n]){t[s]=e[n];break}}else t[s]=e||0})),t}render(){const e=this.props,{prefixCls:s,type:n,justify:o,align:i,className:l,style:a,children:c}=e,d=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(s[r[n]]=e[r[n]])}return s}(e,["prefixCls","type","justify","align","className","style","children"]),m=this.getGutter(),u=`${s}-row`,h=r({[u]:"flex"!==n,[`${u}-${n}`]:n,[`${u}-${n}-${o}`]:n&&o,[`${u}-${n}-${i}`]:n&&i},l),p=Object.assign(Object.assign(Object.assign({},m[0]>0?{marginLeft:m[0]/-2,marginRight:m[0]/-2}:{}),m[1]>0?{marginTop:m[1]/-2,marginBottom:m[1]/-2}:{}),a),g=Object.assign({},d);return delete g.gutter,t.createElement(R.Provider,{value:{gutters:m}},t.createElement("div",Object.assign({},g,{className:h,style:p,"x-semi-prop":"children"}),c))}}function $(){const{Text:e}=x,{t:t}=P(),[s,r]=o.useState([]),n=o.useRef({isComposition:!1}),[E,F]=o.useState(window.innerWidth),[R,S]=o.useState([]);let $="";function I(){"Phone"===u()?p(t("Warning"),t("Tip_cannot_support_your_device"),null,5,"warning"):k.info({title:t("More_info"),content:d.jsxs(d.Fragment,{children:[d.jsxs(f,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[d.jsx(e,{style:{color:"var(--semi-color-info)"},children:t("Logs_count")}),"： ",t("Logs_count_text")]}),d.jsxs(f,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[d.jsx(e,{style:{color:"var(--semi-color-success)"},children:t("Logs_success_count")}),"：",t("Logs_success_count_text")]}),d.jsxs(f,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[d.jsx(e,{style:{color:"var( --semi-color-warning)"},children:t("Logs_warning_count")}),"：",t("Logs_warning_count_text")]}),d.jsxs(f,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[d.jsx(e,{style:{color:"var(--semi-color-danger)"},children:t("Logs_error_count")}),"：",t("Logs_error_count_text")]})]}),cancelButtonProps:{theme:"borderless"},okButtonProps:{theme:"solid"}})}function z(e,t){return(e/t*100).toFixed(2)}o.useEffect((()=>{const e=i();function t(){F(window.innerWidth)}return S(e),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[]);const V=l().length+a().length+c().length;return d.jsxs(d.Fragment,{children:[d.jsx("h3",{children:d.jsxs(j,{children:[t("View_all_info"),d.jsx(y,{showArrow:!0,arrowPointAtCenter:!0,content:d.jsx("article",{children:t("Tip_Log_View_info")}),position:"right",children:d.jsx(m,{style:{color:"var(--semi-color-primary)"}})})]})}),d.jsx("div",{className:"grid",children:d.jsx(T,{type:"flex",justify:"center",children:d.jsxs(j,{spacing:[100,20],align:"center",wrap:!0,children:[E>=940&&function(){const e={type:"pie",data:[{id:"id0",values:[{type:"Success",value:z(l().length,V)},{type:"Warning",value:z(a().length,V)},{type:"Error",value:z(c().length,V)}]}],valueField:"value",categoryField:"type",label:{visible:!0},tooltip:{mark:{content:[{key:e=>e.type,value:e=>e.value+"%"}]}}};return d.jsx(d.Fragment,{children:d.jsx("div",{children:d.jsx(L,{spec:{...e,title:{visible:!0,text:"",subtext:""},legends:{visible:!0,orient:"right"}},option:{mode:"desktop-browser"}})})})}(),function(){const e=[{key:t("Logs_count"),value:d.jsx(g,{theme:"borderless",size:"small",children:i().length})},{key:t("Logs_success_count"),value:d.jsx(g,{type:"primary",theme:"borderless",size:"small",children:l().length})},{key:t("Logs_warning_count"),value:d.jsx(g,{type:"warning",theme:"borderless",size:"small",children:a().length})},{key:t("Logs_error_count"),value:d.jsx(g,{type:"danger",theme:"borderless",size:"small",children:c().length})}];return d.jsx(d.Fragment,{children:d.jsx(f,{shadows:"hover",title:t("Roughly_browse"),onClick:I,headerExtraContent:d.jsx(C,{style:{color:"var(--semi-color-primary)"}}),children:d.jsx(v,{data:e})})})}()]})})}),function(){let i;i="Phone"===u()?o.useMemo((()=>({pageSize:5,formatPageText:!1,position:"top"})),[]):o.useMemo((()=>({pageSize:7,position:"top"})),[]);const l=[{title:d.jsxs(j,{children:[d.jsx("span",{children:t("Event")}),d.jsx(w,{placeholder:t("Enter_filter_value"),style:{width:200},onCompositionStart:()=>{n.current.isComposition=!0},onCompositionEnd:e=>{n.current.isComposition=!1;const t=e.target.value;r(t?[t]:[])},onChange:e=>{if(n.current.isComposition)return;r(e?[e]:[])},showClear:!0})]}),dataIndex:"event",key:"event",width:400,render:e=>d.jsx("div",{children:e}),onFilter:(e,t)=>t.event.includes(e),filteredValue:s},{title:t("Result"),dataIndex:"result",key:"result",render:e=>d.jsx("div",{children:d.jsx(O,{color:"successfully"===e?"green":"warning"===e?"yellow":"red",children:e})}),sorter:(e,t)=>{const s={error:0,warning:1,successfully:2};return s[e.result]===s[t.result]?0:s[e.result]-s[t.result]}},{title:t("Time"),dataIndex:"time",key:"time",sorter:(e,t)=>new Date(e.time)-new Date(t.time)>0?1:-1,render:e=>d.jsx("div",{children:e})},{title:t("Comment"),dataIndex:"comment",key:"comment",render:s=>d.jsx(g,{onClick:()=>{return r=s,void("Phone"===u()?""===$?$=p(t("Remarks"),r,null,0,"info",!1,"light"):p(t("Remarks"),r,null,0,"info",!1,"light",$):k.info({title:t("More_info"),content:d.jsx(d.Fragment,{children:d.jsx(e,{children:r})}),cancelButtonProps:{theme:"borderless"},okButtonProps:{theme:"solid"}}));var r},children:t("View")})}];return d.jsxs(d.Fragment,{children:[d.jsx("h3",{children:d.jsxs(j,{children:[t("Event_list"),d.jsx(y,{showArrow:!0,arrowPointAtCenter:!0,content:d.jsx("article",{children:t("Find_E_by_filter")}),position:"right",children:d.jsx(m,{style:{color:"var(--semi-color-primary)"}})})]})}),d.jsx(b,{children:d.jsx(b.Panel,{header:t("Log_control"),itemKey:"1",children:d.jsx(j,{children:d.jsx(g,{theme:"outline",type:"primary",style:{marginRight:8},onClick:h,children:t("Log_download")})})})}),d.jsx(_,{style:{width:"100%"},pagination:i,dataSource:R,columns:l,filteredValue:s})]})}()]})}T.propTypes={type:n.oneOf(["flex"]),align:n.oneOf(["top","middle","bottom"]),justify:n.oneOf(["start","end","center","space-around","space-between"]),className:n.string,style:n.object,children:n.node,gutter:n.oneOfType([n.object,n.number,n.array]),prefixCls:n.string},T.defaultProps={prefixCls:E.PREFIX},T.RowContext={gutters:n.any};export{$ as default};
