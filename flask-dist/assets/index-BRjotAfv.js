import{z as e,a3 as s,B as t,D as a,R as i,F as o,P as n,H as r}from"./index-CiQzaChg.js";import{S as l}from"./index-Wgo1-T_w.js";class d extends e{constructor(e){super(Object.assign({},e)),this.handleFocusVisible=e=>{const{target:t}=e;try{t.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch(a){s(!0,"Warning: [Semi Switch] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this._adapter.setFocusVisible(!1)}}init(){const{disabled:e}=this.getProps();this.setDisabled(e)}setChecked(e){this._adapter.setNativeControlChecked(e)}setDisabled(e){this._adapter.setNativeControlDisabled(e)}handleChange(e,s){void 0!==this.getProps().checked||this._adapter.setNativeControlChecked(e),this._adapter.notifyChange(e,s)}destroy(){}}const c={PREFIX:`${t}-switch`,FOCUS:`${t}-switch-focus`,LARGE:`${t}-switch-large`,SMALL:`${t}-switch-small`,CHECKED:`${t}-switch-checked`,DISABLED:`${t}-switch-disabled`,KNOB:`${t}-switch-knob`,NATIVE_CONTROL:`${t}-switch-native-control`,CHECKED_TEXT:`${t}-switch-checked-text`,UNCHECKED_TEXT:`${t}-switch-unchecked-text`,LOADING_SPIN:`${t}-switch-loading-spin`,LOADING:`${t}-switch-loading`};class h extends a{constructor(e){super(e),this.handleFocusVisible=e=>{this.foundation.handleFocusVisible(e)},this.handleBlur=e=>{this.foundation.handleBlur()},this.state={nativeControlChecked:e.defaultChecked||e.checked,nativeControlDisabled:!1,focusVisible:!1},this.switchRef=i.createRef(),this.foundation=new d(this.adapter)}componentDidMount(){this.foundation.init()}componentDidUpdate(e){this.props.checked!==e.checked&&this.foundation.setChecked(this.props.checked),this.props.disabled!==e.disabled&&this.foundation.setDisabled(this.props.disabled)}componentWillUnmount(){this.foundation.destroy()}get adapter(){return Object.assign(Object.assign({},super.adapter),{setNativeControlChecked:e=>{this.setState({nativeControlChecked:e})},setNativeControlDisabled:e=>{this.setState({nativeControlDisabled:e})},setFocusVisible:e=>{this.setState({focusVisible:e})},notifyChange:(e,s)=>{this.props.onChange(e,s)}})}render(){const{nativeControlChecked:e,nativeControlDisabled:s,focusVisible:t}=this.state,a=this.props,{className:n,style:r,onMouseEnter:d,onMouseLeave:h,size:p,checkedText:u,uncheckedText:b,loading:C,id:g}=a,f=function(e,s){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&s.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)s.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(t[a[i]]=e[a[i]])}return t}(a,["className","style","onMouseEnter","onMouseLeave","size","checkedText","uncheckedText","loading","id"]),m=o(n,{[c.PREFIX]:!0,[c.CHECKED]:e,[c.DISABLED]:s,[c.LARGE]:"large"===p,[c.SMALL]:"small"===p,[c.LOADING]:C,[c.FOCUS]:t}),E={type:"checkbox",className:c.NATIVE_CONTROL,disabled:s||C,checked:e||!1},k=u&&e&&"small"!==p,v=b&&!e&&"small"!==p;return i.createElement("div",Object.assign({className:m,style:r,onMouseEnter:d,onMouseLeave:h},this.getDataAttr(f)),C?i.createElement(l,{wrapperClassName:c.LOADING_SPIN,size:"default"===p?"middle":p}):i.createElement("div",{className:c.KNOB,"aria-hidden":!0}),k?i.createElement("div",{className:c.CHECKED_TEXT,"x-semi-prop":"checkedText"},u):null,v?i.createElement("div",{className:c.UNCHECKED_TEXT,"x-semi-prop":"uncheckedText"},b):null,i.createElement("input",Object.assign({},E,{ref:this.switchRef,id:g,role:"switch","aria-checked":e,"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],"aria-disabled":this.props.disabled,onChange:e=>this.foundation.handleChange(e.target.checked,e),onFocus:e=>this.handleFocusVisible(e),onBlur:e=>this.handleBlur(e)})))}}h.propTypes={"aria-label":n.string,"aria-labelledby":n.string,"aria-invalid":n.bool,"aria-errormessage":n.string,"aria-describedby":n.string,className:n.string,checked:n.bool,checkedText:n.node,defaultChecked:n.bool,disabled:n.bool,loading:n.bool,onChange:n.func,onMouseEnter:n.func,onMouseLeave:n.func,style:n.object,size:n.oneOf(["default","small","large"]),uncheckedText:n.node,id:n.string},h.defaultProps={disabled:!1,className:"",onChange:r,loading:!1,onMouseEnter:r,onMouseLeave:r,size:"default"};export{h as S};
