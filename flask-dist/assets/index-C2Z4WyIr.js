import{I as e,J as t,Q as s,R as a,cq as n,U as i,P as r}from"./index-k2JO1M9C.js";const l={PREFIX:`${e}-spin`};class d extends t{static get spinDefaultAdapter(){return{getProp:()=>{},setLoading:e=>{}}}constructor(e){super(Object.assign(Object.assign({},d.spinDefaultAdapter),e))}updateLoadingIfNeedDelay(){const{spinning:e,delay:t}=this._adapter.getProps(),{delay:s}=this._adapter.getStates();if(s){const s=this;this._timer=setTimeout((()=>{s._adapter.setState({loading:e,delay:0})}),t)}}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}}const o=l.PREFIX;class p extends s{constructor(e){super(e),this.foundation=new d(this.adapter),this.state={delay:e.delay,loading:!0}}static getDerivedStateFromProps(e){return e.delay?!1===e.spinning?{delay:0,loading:!1}:{delay:e.delay}:{loading:e.spinning}}get adapter(){return Object.assign(Object.assign({},super.adapter),{setLoading:e=>{this.setState({loading:e})}})}componentWillUnmount(){this.foundation.destroy()}renderSpin(){const{indicator:e,tip:t}=this.props,{loading:s}=this.state;return s?a.createElement("div",{className:`${o}-wrapper`},e?a.createElement("div",{className:`${o}-animate`,"x-semi-prop":"indicator"},e):a.createElement(n,null),t?a.createElement("div",{"x-semi-prop":"tip"},t):null):null}render(){this.foundation.updateLoadingIfNeedDelay();const e=this.props,{children:t,style:s,wrapperClassName:n,childStyle:r,size:l}=e,d=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s}(e,["children","style","wrapperClassName","childStyle","size"]),{loading:p}=this.state,c=i(o,n,{[`${o}-${l}`]:l,[`${o}-block`]:t,[`${o}-hidden`]:!p});return a.createElement("div",Object.assign({className:c,style:s},this.getDataAttr(d)),this.renderSpin(),a.createElement("div",{className:`${o}-children`,style:r,"x-semi-prop":"children"},t))}}p.propTypes={size:r.oneOf(["small","middle","large"]),spinning:r.bool,children:r.node,indicator:r.node,delay:r.number,tip:r.node,wrapperClassName:r.string,childStyle:r.object,style:r.object},p.defaultProps={size:"middle",spinning:!0,children:null,indicator:null,delay:0};export{p as S};
