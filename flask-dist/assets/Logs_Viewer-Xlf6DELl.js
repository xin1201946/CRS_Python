import{I as e,R as t,af as r,U as s,P as n,r as o,ag as i,ah as l,ai as a,aj as c,j as d,ab as m,h as u,ak as p,z as h}from"./index-k2JO1M9C.js";import{B as x}from"./pick-ZVkINtgk.js";import{C as g}from"./index-B8O6Tzqf.js";import{C as j}from"./index-B1G5Fgek.js";import{D as y}from"./index-DqQpIOZl.js";import{I as f,M as b}from"./Modal-C-ducFH_.js";import{F as v}from"./index-Cftg1Zoi.js";import{T as w,P as _}from"./index-Dbzjir6I.js";import{S as C}from"./index-BewOyLsF.js";import{T as k}from"./index-BOt7BdqK.js";import{T as F}from"./index-C9NxgC6G.js";import{u as O}from"./useTranslation-Bb5d4rEj.js";import{V as E}from"./VChart-XR69Dv-b.js";import"./index-B3G2HN7z.js";import"./index-EzmHzhvQ.js";import"./isPlainObject-C3LPBiV0.js";import"./isPromise-Bw3YL3VT.js";import"./IconClear-DWg_ri4z.js";import"./toInteger-D9yWLGs_.js";import"./index-C2Z4WyIr.js";import"./index-DKu1ufgK.js";import"./index-O9a0kp0r.js";const P={PREFIX:`${e}`};const L=["xxl","xl","lg","md","sm","xs"],R=t.createContext(null),B={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"};class S extends t.Component{constructor(){super(...arguments),this.state={screens:{xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}},this.unRegisters=[]}componentDidMount(){this.unRegisters=Object.keys(B).map((e=>r(B[e],{match:()=>{"object"==typeof this.props.gutter&&this.setState((t=>({screens:Object.assign(Object.assign({},t.screens),{[e]:!0})})))},unmatch:()=>{"object"==typeof this.props.gutter&&this.setState((t=>({screens:Object.assign(Object.assign({},t.screens),{[e]:!1})})))}})))}componentWillUnmount(){this.unRegisters.forEach((e=>e()))}getGutter(){const{gutter:e=0}=this.props,t=[0,0];return(Array.isArray(e)?e.slice(0,2):[e,0]).forEach(((e,r)=>{if("object"==typeof e)for(let s=0;s<L.length;s++){const n=L[s];if(this.state.screens[n]&&void 0!==e[n]){t[r]=e[n];break}}else t[r]=e||0})),t}render(){const e=this.props,{prefixCls:r,type:n,justify:o,align:i,className:l,style:a,children:c}=e,d=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]])}return r}(e,["prefixCls","type","justify","align","className","style","children"]),m=this.getGutter(),u=`${r}-row`,p=s({[u]:"flex"!==n,[`${u}-${n}`]:n,[`${u}-${n}-${o}`]:n&&o,[`${u}-${n}-${i}`]:n&&i},l),h=Object.assign(Object.assign(Object.assign({},m[0]>0?{marginLeft:m[0]/-2,marginRight:m[0]/-2}:{}),m[1]>0?{marginTop:m[1]/-2,marginBottom:m[1]/-2}:{}),a),x=Object.assign({},d);return delete x.gutter,t.createElement(R.Provider,{value:{gutters:m}},t.createElement("div",Object.assign({},x,{className:p,style:h,"x-semi-prop":"children"}),c))}}function T(){const{Text:e}=w,{t:t}=O(),[r,s]=o.useState([]),n=o.useRef({isComposition:!1}),[P,L]=o.useState(window.innerWidth),[R,B]=o.useState([]);let T="";function I(){"Phone"===u()?h(t("Warning"),t("Tip_cannot_support_your_device"),null,5,"warning"):b.info({title:t("More_info"),content:d.jsxs(d.Fragment,{children:[d.jsxs(g,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[d.jsx(e,{style:{color:"var(--semi-color-info)"},children:t("Logs_count")}),"： ",t("Logs_count_text")]}),d.jsxs(g,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[d.jsx(e,{style:{color:"var(--semi-color-success)"},children:t("Logs_success_count")}),"：",t("Logs_success_count_text")]}),d.jsxs(g,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[d.jsx(e,{style:{color:"var( --semi-color-warning)"},children:t("Logs_warning_count")}),"：",t("Logs_warning_count_text")]}),d.jsxs(g,{bordered:!1,style:{backgroundColor:"var( --semi-color-bg-2)"},children:[d.jsx(e,{style:{color:"var(--semi-color-danger)"},children:t("Logs_error_count")}),"：",t("Logs_error_count_text")]})]}),cancelButtonProps:{theme:"borderless"},okButtonProps:{theme:"solid"}})}function z(e,t){return(e/t*100).toFixed(2)}o.useEffect((()=>{const e=i();function t(){L(window.innerWidth)}return B(e),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[]);const M=l().length+a().length+c().length;return d.jsxs(d.Fragment,{children:[d.jsx("h3",{children:d.jsxs(C,{children:[t("View_all_info"),d.jsx(_,{showArrow:!0,arrowPointAtCenter:!0,content:d.jsx("article",{children:t("Tip_Log_View_info")}),position:"right",children:d.jsx(m,{style:{color:"var(--semi-color-primary)"}})})]})}),d.jsx("div",{className:"grid",children:d.jsx(S,{type:"flex",justify:"center",children:d.jsxs(C,{spacing:[100,20],align:"center",wrap:!0,children:[P>=940&&function(){const e={type:"pie",data:[{id:"id0",values:[{type:"Success",value:z(l().length,M)},{type:"Warning",value:z(a().length,M)},{type:"Error",value:z(c().length,M)}]}],theme:{background:"transparent",colorScheme:{default:["#5383F4","#7BCF8E","#FF9D2C","#FFDB26","#7568D9","#80D8FB","#1857A3","#CAB0E8","#FF8867","#B9E493","#2CB4A8","#B9E4E3"]},series:{bar:{barMaxWidth:15,label:{visible:!0,position:"top",formatMethod:e=>e+"%"}}},component:{axis:{label:{style:{fontFamily:"Times New Roman"}}}},markByName:{bar:{style:{cornerRadius:15}}}},valueField:"value",categoryField:"type",label:{visible:!0},tooltip:{mark:{content:[{key:e=>e.type,value:e=>e.value+"%"}]}}};return d.jsx(d.Fragment,{children:d.jsx("div",{children:d.jsx(E,{spec:{...e,title:{visible:!0,text:"",subtext:""},legends:{visible:!0,orient:"right"}},option:{mode:"desktop-browser"}})})})}(),function(){const e=[{key:t("Logs_count"),value:d.jsx(x,{theme:"borderless",size:"small",children:i().length})},{key:t("Logs_success_count"),value:d.jsx(x,{type:"primary",theme:"borderless",size:"small",children:l().length})},{key:t("Logs_warning_count"),value:d.jsx(x,{type:"warning",theme:"borderless",size:"small",children:a().length})},{key:t("Logs_error_count"),value:d.jsx(x,{type:"danger",theme:"borderless",size:"small",children:c().length})}];return d.jsx(d.Fragment,{children:d.jsx(g,{shadows:"hover",title:t("Roughly_browse"),onClick:I,headerExtraContent:d.jsx(f,{style:{color:"var(--semi-color-primary)"}}),children:d.jsx(y,{data:e})})})}()]})})}),function(){let i;i="Phone"===u()?o.useMemo((()=>({pageSize:5,formatPageText:!1,position:"top"})),[]):o.useMemo((()=>({pageSize:7,position:"top"})),[]);const l=[{title:d.jsxs(C,{children:[d.jsx("span",{children:t("Event")}),d.jsx(v,{placeholder:t("Enter_filter_value"),style:{width:200},onCompositionStart:()=>{n.current.isComposition=!0},onCompositionEnd:e=>{n.current.isComposition=!1;const t=e.target.value;s(t?[t]:[])},onChange:e=>{if(n.current.isComposition)return;s(e?[e]:[])},showClear:!0})]}),dataIndex:"event",key:"event",width:400,render:e=>d.jsx("div",{children:e}),onFilter:(e,t)=>t.event.includes(e),filteredValue:r},{title:t("Result"),dataIndex:"result",key:"result",render:e=>d.jsx("div",{children:d.jsx(F,{color:"successfully"===e?"green":"warning"===e?"yellow":"red",children:e})}),sorter:(e,t)=>{const r={error:0,warning:1,successfully:2};return r[e.result]===r[t.result]?0:r[e.result]-r[t.result]}},{title:t("Time"),dataIndex:"time",key:"time",sorter:(e,t)=>new Date(e.time)-new Date(t.time)>0?1:-1,render:e=>d.jsx("div",{children:e})},{title:t("Comment"),dataIndex:"comment",key:"comment",render:r=>d.jsx(x,{onClick:()=>{return s=r,void("Phone"===u()?""===T?T=h(t("Remarks"),s,null,0,"info",!1,"light"):h(t("Remarks"),s,null,0,"info",!1,"light",T):b.info({title:t("More_info"),content:d.jsx(d.Fragment,{children:d.jsx(e,{children:s})}),cancelButtonProps:{theme:"borderless"},okButtonProps:{theme:"solid"}}));var s},children:t("View")})}];return d.jsxs(d.Fragment,{children:[d.jsx("h3",{children:d.jsxs(C,{children:[t("Event_list"),d.jsx(_,{showArrow:!0,arrowPointAtCenter:!0,content:d.jsx("article",{children:t("Find_E_by_filter")}),position:"right",children:d.jsx(m,{style:{color:"var(--semi-color-primary)"}})})]})}),d.jsx(j,{children:d.jsx(j.Panel,{header:t("Log_control"),itemKey:"1",children:d.jsx(C,{children:d.jsx(x,{theme:"outline",type:"primary",style:{marginRight:8},onClick:p,children:t("Log_download")})})})}),d.jsx(k,{style:{width:"100%"},pagination:i,dataSource:R,columns:l,filteredValue:r})]})}()]})}S.propTypes={type:n.oneOf(["flex"]),align:n.oneOf(["top","middle","bottom"]),justify:n.oneOf(["start","end","center","space-around","space-between"]),className:n.string,style:n.object,children:n.node,gutter:n.oneOfType([n.object,n.number,n.array]),prefixCls:n.string},S.defaultProps={prefixCls:P.PREFIX},S.RowContext={gutters:n.any};export{T as default};
