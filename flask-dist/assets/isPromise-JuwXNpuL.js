import{B as e,e as t,f as n,R as s,bl as a,c as i,P as r}from"./index-CUrNDP8Z.js";const l=["default","error","warning","success"],o={PREFIX:`${e}-spin`};class d extends t{static get spinDefaultAdapter(){return{getProp:()=>{},setLoading:e=>{}}}constructor(e){super(Object.assign(Object.assign({},d.spinDefaultAdapter),e))}updateLoadingIfNeedDelay(){const{spinning:e,delay:t}=this._adapter.getProps(),{delay:n}=this._adapter.getStates();if(n){const n=this;this._timer=setTimeout((()=>{n._adapter.setState({loading:e,delay:0})}),t)}}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}}const p=o.PREFIX;class c extends n{constructor(e){super(e),this.foundation=new d(this.adapter),this.state={delay:e.delay,loading:!0}}static getDerivedStateFromProps(e){return e.delay?!1===e.spinning?{delay:0,loading:!1}:{delay:e.delay}:{loading:e.spinning}}get adapter(){return Object.assign(Object.assign({},super.adapter),{setLoading:e=>{this.setState({loading:e})}})}componentWillUnmount(){this.foundation.destroy()}renderSpin(){const{indicator:e,tip:t}=this.props,{loading:n}=this.state;return n?s.createElement("div",{className:`${p}-wrapper`},e?s.createElement("div",{className:`${p}-animate`,"x-semi-prop":"indicator"},e):s.createElement(a,null),t?s.createElement("div",{"x-semi-prop":"tip"},t):null):null}render(){this.foundation.updateLoadingIfNeedDelay();const e=this.props,{children:t,style:n,wrapperClassName:a,childStyle:r,size:l}=e,o=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n}(e,["children","style","wrapperClassName","childStyle","size"]),{loading:d}=this.state,c=i(p,a,{[`${p}-${l}`]:l,[`${p}-block`]:t,[`${p}-hidden`]:!d});return s.createElement("div",Object.assign({className:c,style:n},this.getDataAttr(o)),this.renderSpin(),s.createElement("div",{className:`${p}-children`,style:r,"x-semi-prop":"children"},t))}}function u(e){return null!==(t=e)&&"object"==typeof t&&"function"==typeof e.then;var t}c.propTypes={size:r.oneOf(["small","middle","large"]),spinning:r.bool,children:r.node,indicator:r.node,delay:r.number,tip:r.node,wrapperClassName:r.string,childStyle:r.object,style:r.object},c.defaultProps={size:"middle",spinning:!0,children:null,indicator:null,delay:0};export{c as S,l as V,u as i};
